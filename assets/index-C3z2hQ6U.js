function eL(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const d=Object.getOwnPropertyDescriptor(n,s);d&&Object.defineProperty(e,s,d.get?d:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function r(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerPolicy&&(d.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?d.credentials="include":s.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(s){if(s.ep)return;s.ep=!0;const d=r(s);fetch(s.href,d)}})();var Zy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var U0={exports:{}},Cm={},q0={exports:{}},Or={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lA;function tL(){if(lA)return Or;lA=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),h=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),S=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.iterator;function M(Ae){return Ae===null||typeof Ae!="object"?null:(Ae=A&&Ae[A]||Ae["@@iterator"],typeof Ae=="function"?Ae:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,N={};function B(Ae,Ne,yt){this.props=Ae,this.context=Ne,this.refs=N,this.updater=yt||L}B.prototype.isReactComponent={},B.prototype.setState=function(Ae,Ne){if(typeof Ae!="object"&&typeof Ae!="function"&&Ae!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ae,Ne,"setState")},B.prototype.forceUpdate=function(Ae){this.updater.enqueueForceUpdate(this,Ae,"forceUpdate")};function Z(){}Z.prototype=B.prototype;function J(Ae,Ne,yt){this.props=Ae,this.context=Ne,this.refs=N,this.updater=yt||L}var Q=J.prototype=new Z;Q.constructor=J,U(Q,B.prototype),Q.isPureReactComponent=!0;var ie=Array.isArray,H=Object.prototype.hasOwnProperty,X={current:null},se={key:!0,ref:!0,__self:!0,__source:!0};function fe(Ae,Ne,yt){var jt,Ut={},rr=null,cr=null;if(Ne!=null)for(jt in Ne.ref!==void 0&&(cr=Ne.ref),Ne.key!==void 0&&(rr=""+Ne.key),Ne)H.call(Ne,jt)&&!se.hasOwnProperty(jt)&&(Ut[jt]=Ne[jt]);var Jt=arguments.length-2;if(Jt===1)Ut.children=yt;else if(1<Jt){for(var ht=Array(Jt),Wt=0;Wt<Jt;Wt++)ht[Wt]=arguments[Wt+2];Ut.children=ht}if(Ae&&Ae.defaultProps)for(jt in Jt=Ae.defaultProps,Jt)Ut[jt]===void 0&&(Ut[jt]=Jt[jt]);return{$$typeof:e,type:Ae,key:rr,ref:cr,props:Ut,_owner:X.current}}function Se(Ae,Ne){return{$$typeof:e,type:Ae.type,key:Ne,ref:Ae.ref,props:Ae.props,_owner:Ae._owner}}function Be(Ae){return typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===e}function xe(Ae){var Ne={"=":"=0",":":"=2"};return"$"+Ae.replace(/[=:]/g,function(yt){return Ne[yt]})}var $e=/\/+/g;function Fe(Ae,Ne){return typeof Ae=="object"&&Ae!==null&&Ae.key!=null?xe(""+Ae.key):Ne.toString(36)}function Ke(Ae,Ne,yt,jt,Ut){var rr=typeof Ae;(rr==="undefined"||rr==="boolean")&&(Ae=null);var cr=!1;if(Ae===null)cr=!0;else switch(rr){case"string":case"number":cr=!0;break;case"object":switch(Ae.$$typeof){case e:case t:cr=!0}}if(cr)return cr=Ae,Ut=Ut(cr),Ae=jt===""?"."+Fe(cr,0):jt,ie(Ut)?(yt="",Ae!=null&&(yt=Ae.replace($e,"$&/")+"/"),Ke(Ut,Ne,yt,"",function(Wt){return Wt})):Ut!=null&&(Be(Ut)&&(Ut=Se(Ut,yt+(!Ut.key||cr&&cr.key===Ut.key?"":(""+Ut.key).replace($e,"$&/")+"/")+Ae)),Ne.push(Ut)),1;if(cr=0,jt=jt===""?".":jt+":",ie(Ae))for(var Jt=0;Jt<Ae.length;Jt++){rr=Ae[Jt];var ht=jt+Fe(rr,Jt);cr+=Ke(rr,Ne,yt,ht,Ut)}else if(ht=M(Ae),typeof ht=="function")for(Ae=ht.call(Ae),Jt=0;!(rr=Ae.next()).done;)rr=rr.value,ht=jt+Fe(rr,Jt++),cr+=Ke(rr,Ne,yt,ht,Ut);else if(rr==="object")throw Ne=String(Ae),Error("Objects are not valid as a React child (found: "+(Ne==="[object Object]"?"object with keys {"+Object.keys(Ae).join(", ")+"}":Ne)+"). If you meant to render a collection of children, use an array instead.");return cr}function Xe(Ae,Ne,yt){if(Ae==null)return Ae;var jt=[],Ut=0;return Ke(Ae,jt,"","",function(rr){return Ne.call(yt,rr,Ut++)}),jt}function rt(Ae){if(Ae._status===-1){var Ne=Ae._result;Ne=Ne(),Ne.then(function(yt){(Ae._status===0||Ae._status===-1)&&(Ae._status=1,Ae._result=yt)},function(yt){(Ae._status===0||Ae._status===-1)&&(Ae._status=2,Ae._result=yt)}),Ae._status===-1&&(Ae._status=0,Ae._result=Ne)}if(Ae._status===1)return Ae._result.default;throw Ae._result}var Qe={current:null},We={transition:null},tt={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:We,ReactCurrentOwner:X};function nt(){throw Error("act(...) is not supported in production builds of React.")}return Or.Children={map:Xe,forEach:function(Ae,Ne,yt){Xe(Ae,function(){Ne.apply(this,arguments)},yt)},count:function(Ae){var Ne=0;return Xe(Ae,function(){Ne++}),Ne},toArray:function(Ae){return Xe(Ae,function(Ne){return Ne})||[]},only:function(Ae){if(!Be(Ae))throw Error("React.Children.only expected to receive a single React element child.");return Ae}},Or.Component=B,Or.Fragment=r,Or.Profiler=s,Or.PureComponent=J,Or.StrictMode=n,Or.Suspense=_,Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tt,Or.act=nt,Or.cloneElement=function(Ae,Ne,yt){if(Ae==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Ae+".");var jt=U({},Ae.props),Ut=Ae.key,rr=Ae.ref,cr=Ae._owner;if(Ne!=null){if(Ne.ref!==void 0&&(rr=Ne.ref,cr=X.current),Ne.key!==void 0&&(Ut=""+Ne.key),Ae.type&&Ae.type.defaultProps)var Jt=Ae.type.defaultProps;for(ht in Ne)H.call(Ne,ht)&&!se.hasOwnProperty(ht)&&(jt[ht]=Ne[ht]===void 0&&Jt!==void 0?Jt[ht]:Ne[ht])}var ht=arguments.length-2;if(ht===1)jt.children=yt;else if(1<ht){Jt=Array(ht);for(var Wt=0;Wt<ht;Wt++)Jt[Wt]=arguments[Wt+2];jt.children=Jt}return{$$typeof:e,type:Ae.type,key:Ut,ref:rr,props:jt,_owner:cr}},Or.createContext=function(Ae){return Ae={$$typeof:h,_currentValue:Ae,_currentValue2:Ae,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Ae.Provider={$$typeof:d,_context:Ae},Ae.Consumer=Ae},Or.createElement=fe,Or.createFactory=function(Ae){var Ne=fe.bind(null,Ae);return Ne.type=Ae,Ne},Or.createRef=function(){return{current:null}},Or.forwardRef=function(Ae){return{$$typeof:l,render:Ae}},Or.isValidElement=Be,Or.lazy=function(Ae){return{$$typeof:E,_payload:{_status:-1,_result:Ae},_init:rt}},Or.memo=function(Ae,Ne){return{$$typeof:S,type:Ae,compare:Ne===void 0?null:Ne}},Or.startTransition=function(Ae){var Ne=We.transition;We.transition={};try{Ae()}finally{We.transition=Ne}},Or.unstable_act=nt,Or.useCallback=function(Ae,Ne){return Qe.current.useCallback(Ae,Ne)},Or.useContext=function(Ae){return Qe.current.useContext(Ae)},Or.useDebugValue=function(){},Or.useDeferredValue=function(Ae){return Qe.current.useDeferredValue(Ae)},Or.useEffect=function(Ae,Ne){return Qe.current.useEffect(Ae,Ne)},Or.useId=function(){return Qe.current.useId()},Or.useImperativeHandle=function(Ae,Ne,yt){return Qe.current.useImperativeHandle(Ae,Ne,yt)},Or.useInsertionEffect=function(Ae,Ne){return Qe.current.useInsertionEffect(Ae,Ne)},Or.useLayoutEffect=function(Ae,Ne){return Qe.current.useLayoutEffect(Ae,Ne)},Or.useMemo=function(Ae,Ne){return Qe.current.useMemo(Ae,Ne)},Or.useReducer=function(Ae,Ne,yt){return Qe.current.useReducer(Ae,Ne,yt)},Or.useRef=function(Ae){return Qe.current.useRef(Ae)},Or.useState=function(Ae){return Qe.current.useState(Ae)},Or.useSyncExternalStore=function(Ae,Ne,yt){return Qe.current.useSyncExternalStore(Ae,Ne,yt)},Or.useTransition=function(){return Qe.current.useTransition()},Or.version="18.3.1",Or}var uA;function JS(){return uA||(uA=1,q0.exports=tL()),q0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cA;function rL(){if(cA)return Cm;cA=1;var e=JS(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function h(l,_,S){var E,A={},M=null,L=null;S!==void 0&&(M=""+S),_.key!==void 0&&(M=""+_.key),_.ref!==void 0&&(L=_.ref);for(E in _)n.call(_,E)&&!d.hasOwnProperty(E)&&(A[E]=_[E]);if(l&&l.defaultProps)for(E in _=l.defaultProps,_)A[E]===void 0&&(A[E]=_[E]);return{$$typeof:t,type:l,key:M,ref:L,props:A,_owner:s.current}}return Cm.Fragment=r,Cm.jsx=h,Cm.jsxs=h,Cm}var hA;function nL(){return hA||(hA=1,U0.exports=rL()),U0.exports}var K=nL(),Pe=JS();const ze=fn(Pe),iL=eL({__proto__:null,default:ze},[Pe]);var Ky={},W0={exports:{}},So={},G0={exports:{}},H0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fA;function aL(){return fA||(fA=1,(function(e){function t(We,tt){var nt=We.length;We.push(tt);e:for(;0<nt;){var Ae=nt-1>>>1,Ne=We[Ae];if(0<s(Ne,tt))We[Ae]=tt,We[nt]=Ne,nt=Ae;else break e}}function r(We){return We.length===0?null:We[0]}function n(We){if(We.length===0)return null;var tt=We[0],nt=We.pop();if(nt!==tt){We[0]=nt;e:for(var Ae=0,Ne=We.length,yt=Ne>>>1;Ae<yt;){var jt=2*(Ae+1)-1,Ut=We[jt],rr=jt+1,cr=We[rr];if(0>s(Ut,nt))rr<Ne&&0>s(cr,Ut)?(We[Ae]=cr,We[rr]=nt,Ae=rr):(We[Ae]=Ut,We[jt]=nt,Ae=jt);else if(rr<Ne&&0>s(cr,nt))We[Ae]=cr,We[rr]=nt,Ae=rr;else break e}}return tt}function s(We,tt){var nt=We.sortIndex-tt.sortIndex;return nt!==0?nt:We.id-tt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var h=Date,l=h.now();e.unstable_now=function(){return h.now()-l}}var _=[],S=[],E=1,A=null,M=3,L=!1,U=!1,N=!1,B=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(We){for(var tt=r(S);tt!==null;){if(tt.callback===null)n(S);else if(tt.startTime<=We)n(S),tt.sortIndex=tt.expirationTime,t(_,tt);else break;tt=r(S)}}function ie(We){if(N=!1,Q(We),!U)if(r(_)!==null)U=!0,rt(H);else{var tt=r(S);tt!==null&&Qe(ie,tt.startTime-We)}}function H(We,tt){U=!1,N&&(N=!1,Z(fe),fe=-1),L=!0;var nt=M;try{for(Q(tt),A=r(_);A!==null&&(!(A.expirationTime>tt)||We&&!xe());){var Ae=A.callback;if(typeof Ae=="function"){A.callback=null,M=A.priorityLevel;var Ne=Ae(A.expirationTime<=tt);tt=e.unstable_now(),typeof Ne=="function"?A.callback=Ne:A===r(_)&&n(_),Q(tt)}else n(_);A=r(_)}if(A!==null)var yt=!0;else{var jt=r(S);jt!==null&&Qe(ie,jt.startTime-tt),yt=!1}return yt}finally{A=null,M=nt,L=!1}}var X=!1,se=null,fe=-1,Se=5,Be=-1;function xe(){return!(e.unstable_now()-Be<Se)}function $e(){if(se!==null){var We=e.unstable_now();Be=We;var tt=!0;try{tt=se(!0,We)}finally{tt?Fe():(X=!1,se=null)}}else X=!1}var Fe;if(typeof J=="function")Fe=function(){J($e)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,Xe=Ke.port2;Ke.port1.onmessage=$e,Fe=function(){Xe.postMessage(null)}}else Fe=function(){B($e,0)};function rt(We){se=We,X||(X=!0,Fe())}function Qe(We,tt){fe=B(function(){We(e.unstable_now())},tt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(We){We.callback=null},e.unstable_continueExecution=function(){U||L||(U=!0,rt(H))},e.unstable_forceFrameRate=function(We){0>We||125<We?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Se=0<We?Math.floor(1e3/We):5},e.unstable_getCurrentPriorityLevel=function(){return M},e.unstable_getFirstCallbackNode=function(){return r(_)},e.unstable_next=function(We){switch(M){case 1:case 2:case 3:var tt=3;break;default:tt=M}var nt=M;M=tt;try{return We()}finally{M=nt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(We,tt){switch(We){case 1:case 2:case 3:case 4:case 5:break;default:We=3}var nt=M;M=We;try{return tt()}finally{M=nt}},e.unstable_scheduleCallback=function(We,tt,nt){var Ae=e.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?Ae+nt:Ae):nt=Ae,We){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=nt+Ne,We={id:E++,callback:tt,priorityLevel:We,startTime:nt,expirationTime:Ne,sortIndex:-1},nt>Ae?(We.sortIndex=nt,t(S,We),r(_)===null&&We===r(S)&&(N?(Z(fe),fe=-1):N=!0,Qe(ie,nt-Ae))):(We.sortIndex=Ne,t(_,We),U||L||(U=!0,rt(H))),We},e.unstable_shouldYield=xe,e.unstable_wrapCallback=function(We){var tt=M;return function(){var nt=M;M=tt;try{return We.apply(this,arguments)}finally{M=nt}}}})(H0)),H0}var dA;function oL(){return dA||(dA=1,G0.exports=aL()),G0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pA;function sL(){if(pA)return So;pA=1;var e=JS(),t=oL();function r(c){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+c,x=1;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+c+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function d(c,p){h(c,p),h(c+"Capture",p)}function h(c,p){for(s[c]=p,c=0;c<p.length;c++)n.add(p[c])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_=Object.prototype.hasOwnProperty,S=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},A={};function M(c){return _.call(A,c)?!0:_.call(E,c)?!1:S.test(c)?A[c]=!0:(E[c]=!0,!1)}function L(c,p,x,C){if(x!==null&&x.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return C?!1:x!==null?!x.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function U(c,p,x,C){if(p===null||typeof p>"u"||L(c,p,x,C))return!0;if(C)return!1;if(x!==null)switch(x.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function N(c,p,x,C,R,F,ae){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=C,this.attributeNamespace=R,this.mustUseProperty=x,this.propertyName=c,this.type=p,this.sanitizeURL=F,this.removeEmptyString=ae}var B={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){B[c]=new N(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var p=c[0];B[p]=new N(p,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){B[c]=new N(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){B[c]=new N(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){B[c]=new N(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){B[c]=new N(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){B[c]=new N(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){B[c]=new N(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){B[c]=new N(c,5,!1,c.toLowerCase(),null,!1,!1)});var Z=/[\-:]([a-z])/g;function J(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var p=c.replace(Z,J);B[p]=new N(p,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var p=c.replace(Z,J);B[p]=new N(p,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var p=c.replace(Z,J);B[p]=new N(p,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){B[c]=new N(c,1,!1,c.toLowerCase(),null,!1,!1)}),B.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){B[c]=new N(c,1,!1,c.toLowerCase(),null,!0,!0)});function Q(c,p,x,C){var R=B.hasOwnProperty(p)?B[p]:null;(R!==null?R.type!==0:C||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(U(p,x,R,C)&&(x=null),C||R===null?M(p)&&(x===null?c.removeAttribute(p):c.setAttribute(p,""+x)):R.mustUseProperty?c[R.propertyName]=x===null?R.type===3?!1:"":x:(p=R.attributeName,C=R.attributeNamespace,x===null?c.removeAttribute(p):(R=R.type,x=R===3||R===4&&x===!0?"":""+x,C?c.setAttributeNS(C,p,x):c.setAttribute(p,x))))}var ie=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),X=Symbol.for("react.portal"),se=Symbol.for("react.fragment"),fe=Symbol.for("react.strict_mode"),Se=Symbol.for("react.profiler"),Be=Symbol.for("react.provider"),xe=Symbol.for("react.context"),$e=Symbol.for("react.forward_ref"),Fe=Symbol.for("react.suspense"),Ke=Symbol.for("react.suspense_list"),Xe=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),Qe=Symbol.for("react.offscreen"),We=Symbol.iterator;function tt(c){return c===null||typeof c!="object"?null:(c=We&&c[We]||c["@@iterator"],typeof c=="function"?c:null)}var nt=Object.assign,Ae;function Ne(c){if(Ae===void 0)try{throw Error()}catch(x){var p=x.stack.trim().match(/\n( *(at )?)/);Ae=p&&p[1]||""}return`
`+Ae+c}var yt=!1;function jt(c,p){if(!c||yt)return"";yt=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(Ye){var C=Ye}Reflect.construct(c,[],p)}else{try{p.call()}catch(Ye){C=Ye}c.call(p.prototype)}else{try{throw Error()}catch(Ye){C=Ye}c()}}catch(Ye){if(Ye&&C&&typeof Ye.stack=="string"){for(var R=Ye.stack.split(`
`),F=C.stack.split(`
`),ae=R.length-1,be=F.length-1;1<=ae&&0<=be&&R[ae]!==F[be];)be--;for(;1<=ae&&0<=be;ae--,be--)if(R[ae]!==F[be]){if(ae!==1||be!==1)do if(ae--,be--,0>be||R[ae]!==F[be]){var Ie=`
`+R[ae].replace(" at new "," at ");return c.displayName&&Ie.includes("<anonymous>")&&(Ie=Ie.replace("<anonymous>",c.displayName)),Ie}while(1<=ae&&0<=be);break}}}finally{yt=!1,Error.prepareStackTrace=x}return(c=c?c.displayName||c.name:"")?Ne(c):""}function Ut(c){switch(c.tag){case 5:return Ne(c.type);case 16:return Ne("Lazy");case 13:return Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 2:case 15:return c=jt(c.type,!1),c;case 11:return c=jt(c.type.render,!1),c;case 1:return c=jt(c.type,!0),c;default:return""}}function rr(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case se:return"Fragment";case X:return"Portal";case Se:return"Profiler";case fe:return"StrictMode";case Fe:return"Suspense";case Ke:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case xe:return(c.displayName||"Context")+".Consumer";case Be:return(c._context.displayName||"Context")+".Provider";case $e:var p=c.render;return c=c.displayName,c||(c=p.displayName||p.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Xe:return p=c.displayName||null,p!==null?p:rr(c.type)||"Memo";case rt:p=c._payload,c=c._init;try{return rr(c(p))}catch{}}return null}function cr(c){var p=c.type;switch(c.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=p.render,c=c.displayName||c.name||"",p.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rr(p);case 8:return p===fe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function Jt(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function ht(c){var p=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Wt(c){var p=ht(c)?"checked":"value",x=Object.getOwnPropertyDescriptor(c.constructor.prototype,p),C=""+c[p];if(!c.hasOwnProperty(p)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var R=x.get,F=x.set;return Object.defineProperty(c,p,{configurable:!0,get:function(){return R.call(this)},set:function(ae){C=""+ae,F.call(this,ae)}}),Object.defineProperty(c,p,{enumerable:x.enumerable}),{getValue:function(){return C},setValue:function(ae){C=""+ae},stopTracking:function(){c._valueTracker=null,delete c[p]}}}}function sr(c){c._valueTracker||(c._valueTracker=Wt(c))}function lt(c){if(!c)return!1;var p=c._valueTracker;if(!p)return!0;var x=p.getValue(),C="";return c&&(C=ht(c)?c.checked?"true":"false":c.value),c=C,c!==x?(p.setValue(c),!0):!1}function Ir(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function mr(c,p){var x=p.checked;return nt({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??c._wrapperState.initialChecked})}function Yr(c,p){var x=p.defaultValue==null?"":p.defaultValue,C=p.checked!=null?p.checked:p.defaultChecked;x=Jt(p.value!=null?p.value:x),c._wrapperState={initialChecked:C,initialValue:x,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function qe(c,p){p=p.checked,p!=null&&Q(c,"checked",p,!1)}function dn(c,p){qe(c,p);var x=Jt(p.value),C=p.type;if(x!=null)C==="number"?(x===0&&c.value===""||c.value!=x)&&(c.value=""+x):c.value!==""+x&&(c.value=""+x);else if(C==="submit"||C==="reset"){c.removeAttribute("value");return}p.hasOwnProperty("value")?vr(c,p.type,x):p.hasOwnProperty("defaultValue")&&vr(c,p.type,Jt(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(c.defaultChecked=!!p.defaultChecked)}function xi(c,p,x){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var C=p.type;if(!(C!=="submit"&&C!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+c._wrapperState.initialValue,x||p===c.value||(c.value=p),c.defaultValue=p}x=c.name,x!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,x!==""&&(c.name=x)}function vr(c,p,x){(p!=="number"||Ir(c.ownerDocument)!==c)&&(x==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+x&&(c.defaultValue=""+x))}var Rr=Array.isArray;function Gn(c,p,x,C){if(c=c.options,p){p={};for(var R=0;R<x.length;R++)p["$"+x[R]]=!0;for(x=0;x<c.length;x++)R=p.hasOwnProperty("$"+c[x].value),c[x].selected!==R&&(c[x].selected=R),R&&C&&(c[x].defaultSelected=!0)}else{for(x=""+Jt(x),p=null,R=0;R<c.length;R++){if(c[R].value===x){c[R].selected=!0,C&&(c[R].defaultSelected=!0);return}p!==null||c[R].disabled||(p=c[R])}p!==null&&(p.selected=!0)}}function Hn(c,p){if(p.dangerouslySetInnerHTML!=null)throw Error(r(91));return nt({},p,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Ri(c,p){var x=p.value;if(x==null){if(x=p.children,p=p.defaultValue,x!=null){if(p!=null)throw Error(r(92));if(Rr(x)){if(1<x.length)throw Error(r(93));x=x[0]}p=x}p==null&&(p=""),x=p}c._wrapperState={initialValue:Jt(x)}}function co(c,p){var x=Jt(p.value),C=Jt(p.defaultValue);x!=null&&(x=""+x,x!==c.value&&(c.value=x),p.defaultValue==null&&c.defaultValue!==x&&(c.defaultValue=x)),C!=null&&(c.defaultValue=""+C)}function ci(c){var p=c.textContent;p===c._wrapperState.initialValue&&p!==""&&p!==null&&(c.value=p)}function xl(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ns(c,p){return c==null||c==="http://www.w3.org/1999/xhtml"?xl(p):c==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var pt,Va=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,x,C,R){MSApp.execUnsafeLocalFunction(function(){return c(p,x,C,R)})}:c})(function(c,p){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=p;else{for(pt=pt||document.createElement("div"),pt.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=pt.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;p.firstChild;)c.appendChild(p.firstChild)}});function Bn(c,p){if(p){var x=c.firstChild;if(x&&x===c.lastChild&&x.nodeType===3){x.nodeValue=p;return}}c.textContent=p}var zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},os=["Webkit","ms","Moz","O"];Object.keys(zi).forEach(function(c){os.forEach(function(p){p=p+c.charAt(0).toUpperCase()+c.substring(1),zi[p]=zi[c]})});function bt(c,p,x){return p==null||typeof p=="boolean"||p===""?"":x||typeof p!="number"||p===0||zi.hasOwnProperty(c)&&zi[c]?(""+p).trim():p+"px"}function gr(c,p){c=c.style;for(var x in p)if(p.hasOwnProperty(x)){var C=x.indexOf("--")===0,R=bt(x,p[x],C);x==="float"&&(x="cssFloat"),C?c.setProperty(x,R):c[x]=R}}var Qt=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hi(c,p){if(p){if(Qt[c]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(r(137,c));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(r(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(r(61))}if(p.style!=null&&typeof p.style!="object")throw Error(r(62))}}function ea(c,p){if(c.indexOf("-")===-1)return typeof p.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ir=null;function va(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Ua=null,ta=null,bi=null;function ve(c){if(c=Ou(c)){if(typeof Ua!="function")throw Error(r(280));var p=c.stateNode;p&&(p=Du(p),Ua(c.stateNode,c.type,p))}}function te(c){ta?bi?bi.push(c):bi=[c]:ta=c}function ee(){if(ta){var c=ta,p=bi;if(bi=ta=null,ve(c),p)for(c=0;c<p.length;c++)ve(p[c])}}function ue(c,p){return c(p)}function me(){}var Ce=!1;function Oe(c,p,x){if(Ce)return c(p,x);Ce=!0;try{return ue(c,p,x)}finally{Ce=!1,(ta!==null||bi!==null)&&(me(),ee())}}function Le(c,p){var x=c.stateNode;if(x===null)return null;var C=Du(x);if(C===null)return null;x=C[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(c=c.type,C=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!C;break e;default:c=!1}if(c)return null;if(x&&typeof x!="function")throw Error(r(231,p,typeof x));return x}var Te=!1;if(l)try{var Je={};Object.defineProperty(Je,"passive",{get:function(){Te=!0}}),window.addEventListener("test",Je,Je),window.removeEventListener("test",Je,Je)}catch{Te=!1}function st(c,p,x,C,R,F,ae,be,Ie){var Ye=Array.prototype.slice.call(arguments,3);try{p.apply(x,Ye)}catch(ft){this.onError(ft)}}var He=!1,vt=null,Lt=!1,Gt=null,Ar={onError:function(c){He=!0,vt=c}};function lr(c,p,x,C,R,F,ae,be,Ie){He=!1,vt=null,st.apply(Ar,arguments)}function Er(c,p,x,C,R,F,ae,be,Ie){if(lr.apply(this,arguments),He){if(He){var Ye=vt;He=!1,vt=null}else throw Error(r(198));Lt||(Lt=!0,Gt=Ye)}}function pr(c){var p=c,x=c;if(c.alternate)for(;p.return;)p=p.return;else{c=p;do p=c,(p.flags&4098)!==0&&(x=p.return),c=p.return;while(c)}return p.tag===3?x:null}function En(c){if(c.tag===13){var p=c.memoizedState;if(p===null&&(c=c.alternate,c!==null&&(p=c.memoizedState)),p!==null)return p.dehydrated}return null}function pn(c){if(pr(c)!==c)throw Error(r(188))}function _r(c){var p=c.alternate;if(!p){if(p=pr(c),p===null)throw Error(r(188));return p!==c?null:c}for(var x=c,C=p;;){var R=x.return;if(R===null)break;var F=R.alternate;if(F===null){if(C=R.return,C!==null){x=C;continue}break}if(R.child===F.child){for(F=R.child;F;){if(F===x)return pn(R),c;if(F===C)return pn(R),p;F=F.sibling}throw Error(r(188))}if(x.return!==C.return)x=R,C=F;else{for(var ae=!1,be=R.child;be;){if(be===x){ae=!0,x=R,C=F;break}if(be===C){ae=!0,C=R,x=F;break}be=be.sibling}if(!ae){for(be=F.child;be;){if(be===x){ae=!0,x=F,C=R;break}if(be===C){ae=!0,C=F,x=R;break}be=be.sibling}if(!ae)throw Error(r(189))}}if(x.alternate!==C)throw Error(r(190))}if(x.tag!==3)throw Error(r(188));return x.stateNode.current===x?c:p}function Lr(c){return c=_r(c),c!==null?nn(c):null}function nn(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var p=nn(c);if(p!==null)return p;c=c.sibling}return null}var Nn=t.unstable_scheduleCallback,Zn=t.unstable_cancelCallback,wi=t.unstable_shouldYield,bl=t.unstable_requestPaint,ar=t.unstable_now,dh=t.unstable_getCurrentPriorityLevel,pu=t.unstable_ImmediatePriority,ji=t.unstable_UserBlockingPriority,fi=t.unstable_NormalPriority,Up=t.unstable_LowPriority,ra=t.unstable_IdlePriority,di=null,Si=null;function Fs(c){if(Si&&typeof Si.onCommitFiberRoot=="function")try{Si.onCommitFiberRoot(di,c,void 0,(c.current.flags&128)===128)}catch{}}var Vr=Math.clz32?Math.clz32:Cn,mu=Math.log,qa=Math.LN2;function Cn(c){return c>>>=0,c===0?32:31-(mu(c)/qa|0)|0}var $s=64,Li=4194304;function Vs(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Bi(c,p){var x=c.pendingLanes;if(x===0)return 0;var C=0,R=c.suspendedLanes,F=c.pingedLanes,ae=x&268435455;if(ae!==0){var be=ae&~R;be!==0?C=Vs(be):(F&=ae,F!==0&&(C=Vs(F)))}else ae=x&~R,ae!==0?C=Vs(ae):F!==0&&(C=Vs(F));if(C===0)return 0;if(p!==0&&p!==C&&(p&R)===0&&(R=C&-C,F=p&-p,R>=F||R===16&&(F&4194240)!==0))return p;if((C&4)!==0&&(C|=x&16),p=c.entangledLanes,p!==0)for(c=c.entanglements,p&=C;0<p;)x=31-Vr(p),R=1<<x,C|=c[x],p&=~R;return C}function qp(c,p){switch(c){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dc(c,p){for(var x=c.suspendedLanes,C=c.pingedLanes,R=c.expirationTimes,F=c.pendingLanes;0<F;){var ae=31-Vr(F),be=1<<ae,Ie=R[ae];Ie===-1?((be&x)===0||(be&C)!==0)&&(R[ae]=qp(be,p)):Ie<=p&&(c.expiredLanes|=be),F&=~be}}function Eo(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Co(){var c=$s;return $s<<=1,($s&4194240)===0&&($s=64),c}function Cr(c){for(var p=[],x=0;31>x;x++)p.push(c);return p}function Us(c,p,x){c.pendingLanes|=p,p!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,p=31-Vr(p),c[p]=x}function ph(c,p){var x=c.pendingLanes&~p;c.pendingLanes=p,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=p,c.mutableReadLanes&=p,c.entangledLanes&=p,p=c.entanglements;var C=c.eventTimes;for(c=c.expirationTimes;0<x;){var R=31-Vr(x),F=1<<R;p[R]=0,C[R]=-1,c[R]=-1,x&=~F}}function ss(c,p){var x=c.entangledLanes|=p;for(c=c.entanglements;x;){var C=31-Vr(x),R=1<<C;R&p|c[C]&p&&(c[C]|=p),x&=~R}}var Br=0;function gu(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var wl,Sl,qs,mh,Gf,pc=!1,mc=[],Ni=null,_a=null,Mn=null,Kn=new Map,ls=new Map,Wa=[],gc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gh(c,p){switch(c){case"focusin":case"focusout":Ni=null;break;case"dragenter":case"dragleave":_a=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":Kn.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":ls.delete(p.pointerId)}}function ho(c,p,x,C,R,F){return c===null||c.nativeEvent!==F?(c={blockedOn:p,domEventName:x,eventSystemFlags:C,nativeEvent:F,targetContainers:[R]},p!==null&&(p=Ou(p),p!==null&&Sl(p)),c):(c.eventSystemFlags|=C,p=c.targetContainers,R!==null&&p.indexOf(R)===-1&&p.push(R),c)}function Wp(c,p,x,C,R){switch(p){case"focusin":return Ni=ho(Ni,c,p,x,C,R),!0;case"dragenter":return _a=ho(_a,c,p,x,C,R),!0;case"mouseover":return Mn=ho(Mn,c,p,x,C,R),!0;case"pointerover":var F=R.pointerId;return Kn.set(F,ho(Kn.get(F)||null,c,p,x,C,R)),!0;case"gotpointercapture":return F=R.pointerId,ls.set(F,ho(ls.get(F)||null,c,p,x,C,R)),!0}return!1}function yh(c){var p=Fo(c.target);if(p!==null){var x=pr(p);if(x!==null){if(p=x.tag,p===13){if(p=En(x),p!==null){c.blockedOn=p,Gf(c.priority,function(){qs(x)});return}}else if(p===3&&x.stateNode.current.memoizedState.isDehydrated){c.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}c.blockedOn=null}function yu(c){if(c.blockedOn!==null)return!1;for(var p=c.targetContainers;0<p.length;){var x=vu(c.domEventName,c.eventSystemFlags,p[0],c.nativeEvent);if(x===null){x=c.nativeEvent;var C=new x.constructor(x.type,x);ir=C,x.target.dispatchEvent(C),ir=null}else return p=Ou(x),p!==null&&Sl(p),c.blockedOn=x,!1;p.shift()}return!0}function Hf(c,p,x){yu(c)&&x.delete(p)}function Gp(){pc=!1,Ni!==null&&yu(Ni)&&(Ni=null),_a!==null&&yu(_a)&&(_a=null),Mn!==null&&yu(Mn)&&(Mn=null),Kn.forEach(Hf),ls.forEach(Hf)}function Pl(c,p){c.blockedOn===p&&(c.blockedOn=null,pc||(pc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Gp)))}function Mo(c){function p(R){return Pl(R,c)}if(0<mc.length){Pl(mc[0],c);for(var x=1;x<mc.length;x++){var C=mc[x];C.blockedOn===c&&(C.blockedOn=null)}}for(Ni!==null&&Pl(Ni,c),_a!==null&&Pl(_a,c),Mn!==null&&Pl(Mn,c),Kn.forEach(p),ls.forEach(p),x=0;x<Wa.length;x++)C=Wa[x],C.blockedOn===c&&(C.blockedOn=null);for(;0<Wa.length&&(x=Wa[0],x.blockedOn===null);)yh(x),x.blockedOn===null&&Wa.shift()}var us=ie.ReactCurrentBatchConfig,Ws=!0;function vh(c,p,x,C){var R=Br,F=us.transition;us.transition=null;try{Br=1,xa(c,p,x,C)}finally{Br=R,us.transition=F}}function _h(c,p,x,C){var R=Br,F=us.transition;us.transition=null;try{Br=4,xa(c,p,x,C)}finally{Br=R,us.transition=F}}function xa(c,p,x,C){if(Ws){var R=vu(c,p,x,C);if(R===null)ku(c,p,C,yc,x),gh(c,C);else if(Wp(R,c,p,x,C))C.stopPropagation();else if(gh(c,C),p&4&&-1<gc.indexOf(c)){for(;R!==null;){var F=Ou(R);if(F!==null&&wl(F),F=vu(c,p,x,C),F===null&&ku(c,p,C,yc,x),F===R)break;R=F}R!==null&&C.stopPropagation()}else ku(c,p,C,null,x)}}var yc=null;function vu(c,p,x,C){if(yc=null,c=va(C),c=Fo(c),c!==null)if(p=pr(c),p===null)c=null;else if(x=p.tag,x===13){if(c=En(p),c!==null)return c;c=null}else if(x===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;c=null}else p!==c&&(c=null);return yc=c,null}function cs(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dh()){case pu:return 1;case ji:return 4;case fi:case Up:return 16;case ra:return 536870912;default:return 16}default:return 16}}var Pi=null,kr=null,Gs=null;function Zf(){if(Gs)return Gs;var c,p=kr,x=p.length,C,R="value"in Pi?Pi.value:Pi.textContent,F=R.length;for(c=0;c<x&&p[c]===R[c];c++);var ae=x-c;for(C=1;C<=ae&&p[x-C]===R[F-C];C++);return Gs=R.slice(c,1<C?1-C:void 0)}function Io(c){var p=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&p===13&&(c=13)):c=p,c===10&&(c=13),32<=c||c===13?c:0}function vc(){return!0}function xh(){return!1}function na(c){function p(x,C,R,F,ae){this._reactName=x,this._targetInst=R,this.type=C,this.nativeEvent=F,this.target=ae,this.currentTarget=null;for(var be in c)c.hasOwnProperty(be)&&(x=c[be],this[be]=x?x(F):F[be]);return this.isDefaultPrevented=(F.defaultPrevented!=null?F.defaultPrevented:F.returnValue===!1)?vc:xh,this.isPropagationStopped=xh,this}return nt(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=vc)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=vc)},persist:function(){},isPersistent:vc}),p}var Hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_u=na(Hs),Tl=nt({},Hs,{view:0,detail:0}),Kf=na(Tl),_c,xc,Ga,xu=nt({},Tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wu,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Ga&&(Ga&&c.type==="mousemove"?(_c=c.screenX-Ga.screenX,xc=c.screenY-Ga.screenY):xc=_c=0,Ga=c),_c)},movementY:function(c){return"movementY"in c?c.movementY:xc}}),Xf=na(xu),Yf=nt({},xu,{dataTransfer:0}),bu=na(Yf),Hp=nt({},Tl,{relatedTarget:0}),Al=na(Hp),Zp=nt({},Hs,{animationName:0,elapsedTime:0,pseudoElement:0}),Kp=na(Zp),Jf=nt({},Hs,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Qf=na(Jf),ed=nt({},Hs,{data:0}),bc=na(ed),td={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ko={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bh(c){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(c):(c=ko[c])?!!p[c]:!1}function wu(){return bh}var wh=nt({},Tl,{key:function(c){if(c.key){var p=td[c.key]||c.key;if(p!=="Unidentified")return p}return c.type==="keypress"?(c=Io(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?wc[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wu,charCode:function(c){return c.type==="keypress"?Io(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Io(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),Sc=na(wh),Sh=nt({},xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hs=na(Sh),Ph=nt({},Tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wu}),Xp=na(Ph),Sn=nt({},Hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yp=na(Sn),br=nt({},xu,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Pc=na(br),Jr=[9,13,27,32],Nr=l&&"CompositionEvent"in window,Ha=null;l&&"documentMode"in document&&(Ha=document.documentMode);var Su=l&&"TextEvent"in window&&!Ha,El=l&&(!Nr||Ha&&8<Ha&&11>=Ha),Tc=" ",fs=!1;function Zs(c,p){switch(c){case"keyup":return Jr.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ia(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var ds=!1;function Th(c,p){switch(c){case"compositionend":return ia(p);case"keypress":return p.which!==32?null:(fs=!0,Tc);case"textInput":return c=p.data,c===Tc&&fs?null:c;default:return null}}function Ah(c,p){if(ds)return c==="compositionend"||!Nr&&Zs(c,p)?(c=Zf(),Gs=kr=Pi=null,ds=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return El&&p.locale!=="ko"?null:p.data;default:return null}}var Ks={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cl(c){var p=c&&c.nodeName&&c.nodeName.toLowerCase();return p==="input"?!!Ks[c.type]:p==="textarea"}function Ml(c,p,x,C){te(C),p=zl(p,"onChange"),0<p.length&&(x=new _u("onChange","change",null,x,C),c.push({event:x,listeners:p}))}var fo=null,Oo=null;function Ac(c){kc(c,0)}function Do(c){var p=Ya(c);if(lt(p))return c}function Il(c,p){if(c==="change")return p}var Eh=!1;if(l){var Pu;if(l){var Pr="oninput"in document;if(!Pr){var Tu=document.createElement("div");Tu.setAttribute("oninput","return;"),Pr=typeof Tu.oninput=="function"}Pu=Pr}else Pu=!1;Eh=Pu&&(!document.documentMode||9<document.documentMode)}function rd(){fo&&(fo.detachEvent("onpropertychange",Ch),Oo=fo=null)}function Ch(c){if(c.propertyName==="value"&&Do(Oo)){var p=[];Ml(p,Oo,c,va(c)),Oe(Ac,p)}}function kl(c,p,x){c==="focusin"?(rd(),fo=p,Oo=x,fo.attachEvent("onpropertychange",Ch)):c==="focusout"&&rd()}function nd(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Do(Oo)}function Ec(c,p){if(c==="click")return Do(p)}function id(c,p){if(c==="input"||c==="change")return Do(p)}function ad(c,p){return c===p&&(c!==0||1/c===1/p)||c!==c&&p!==p}var Fi=typeof Object.is=="function"?Object.is:ad;function ps(c,p){if(Fi(c,p))return!0;if(typeof c!="object"||c===null||typeof p!="object"||p===null)return!1;var x=Object.keys(c),C=Object.keys(p);if(x.length!==C.length)return!1;for(C=0;C<x.length;C++){var R=x[C];if(!_.call(p,R)||!Fi(c[R],p[R]))return!1}return!0}function Xs(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Ys(c,p){var x=Xs(c);c=0;for(var C;x;){if(x.nodeType===3){if(C=c+x.textContent.length,c<=p&&C>=p)return{node:x,offset:p-c};c=C}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Xs(x)}}function Js(c,p){return c&&p?c===p?!0:c&&c.nodeType===3?!1:p&&p.nodeType===3?Js(c,p.parentNode):"contains"in c?c.contains(p):c.compareDocumentPosition?!!(c.compareDocumentPosition(p)&16):!1:!1}function Cc(){for(var c=window,p=Ir();p instanceof c.HTMLIFrameElement;){try{var x=typeof p.contentWindow.location.href=="string"}catch{x=!1}if(x)c=p.contentWindow;else break;p=Ir(c.document)}return p}function ms(c){var p=c&&c.nodeName&&c.nodeName.toLowerCase();return p&&(p==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||p==="textarea"||c.contentEditable==="true")}function Au(c){var p=Cc(),x=c.focusedElem,C=c.selectionRange;if(p!==x&&x&&x.ownerDocument&&Js(x.ownerDocument.documentElement,x)){if(C!==null&&ms(x)){if(p=C.start,c=C.end,c===void 0&&(c=p),"selectionStart"in x)x.selectionStart=p,x.selectionEnd=Math.min(c,x.value.length);else if(c=(p=x.ownerDocument||document)&&p.defaultView||window,c.getSelection){c=c.getSelection();var R=x.textContent.length,F=Math.min(C.start,R);C=C.end===void 0?F:Math.min(C.end,R),!c.extend&&F>C&&(R=C,C=F,F=R),R=Ys(x,F);var ae=Ys(x,C);R&&ae&&(c.rangeCount!==1||c.anchorNode!==R.node||c.anchorOffset!==R.offset||c.focusNode!==ae.node||c.focusOffset!==ae.offset)&&(p=p.createRange(),p.setStart(R.node,R.offset),c.removeAllRanges(),F>C?(c.addRange(p),c.extend(ae.node,ae.offset)):(p.setEnd(ae.node,ae.offset),c.addRange(p)))}}for(p=[],c=x;c=c.parentNode;)c.nodeType===1&&p.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<p.length;x++)c=p[x],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var Mc=l&&"documentMode"in document&&11>=document.documentMode,Ro=null,Eu=null,Cu=null,Ic=!1;function Mu(c,p,x){var C=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Ic||Ro==null||Ro!==Ir(C)||(C=Ro,"selectionStart"in C&&ms(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),Cu&&ps(Cu,C)||(Cu=C,C=zl(Eu,"onSelect"),0<C.length&&(p=new _u("onSelect","select",null,p,x),c.push({event:p,listeners:C}),p.target=Ro)))}function Ol(c,p){var x={};return x[c.toLowerCase()]=p.toLowerCase(),x["Webkit"+c]="webkit"+p,x["Moz"+c]="moz"+p,x}var po={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},Qs={},ri={};l&&(ri=document.createElement("div").style,"AnimationEvent"in window||(delete po.animationend.animation,delete po.animationiteration.animation,delete po.animationstart.animation),"TransitionEvent"in window||delete po.transitionend.transition);function mo(c){if(Qs[c])return Qs[c];if(!po[c])return c;var p=po[c],x;for(x in p)if(p.hasOwnProperty(x)&&x in ri)return Qs[c]=p[x];return c}var Mh=mo("animationend"),Ih=mo("animationiteration"),_n=mo("animationstart"),ba=mo("transitionend"),$i=new Map,Dl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function go(c,p){$i.set(c,p),d(p,[c])}for(var Rl=0;Rl<Dl.length;Rl++){var gs=Dl[Rl],zo=gs.toLowerCase(),kh=gs[0].toUpperCase()+gs.slice(1);go(zo,"on"+kh)}go(Mh,"onAnimationEnd"),go(Ih,"onAnimationIteration"),go(_n,"onAnimationStart"),go("dblclick","onDoubleClick"),go("focusin","onFocus"),go("focusout","onBlur"),go(ba,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oh=new Set("cancel close invalid load scroll toggle".split(" ").concat(ys));function Iu(c,p,x){var C=c.type||"unknown-event";c.currentTarget=x,Er(C,p,void 0,c),c.currentTarget=null}function kc(c,p){p=(p&4)!==0;for(var x=0;x<c.length;x++){var C=c[x],R=C.event;C=C.listeners;e:{var F=void 0;if(p)for(var ae=C.length-1;0<=ae;ae--){var be=C[ae],Ie=be.instance,Ye=be.currentTarget;if(be=be.listener,Ie!==F&&R.isPropagationStopped())break e;Iu(R,be,Ye),F=Ie}else for(ae=0;ae<C.length;ae++){if(be=C[ae],Ie=be.instance,Ye=be.currentTarget,be=be.listener,Ie!==F&&R.isPropagationStopped())break e;Iu(R,be,Ye),F=Ie}}}if(Lt)throw c=Gt,Lt=!1,Gt=null,c}function Qr(c,p){var x=p[wr];x===void 0&&(x=p[wr]=new Set);var C=c+"__bubble";x.has(C)||(Oc(p,c,2,!1),x.add(C))}function jo(c,p,x){var C=0;p&&(C|=4),Oc(x,c,C,p)}var el="_reactListening"+Math.random().toString(36).slice(2);function Lo(c){if(!c[el]){c[el]=!0,n.forEach(function(x){x!=="selectionchange"&&(Oh.has(x)||jo(x,!1,c),jo(x,!0,c))});var p=c.nodeType===9?c:c.ownerDocument;p===null||p[el]||(p[el]=!0,jo("selectionchange",!1,p))}}function Oc(c,p,x,C){switch(cs(p)){case 1:var R=vh;break;case 4:R=_h;break;default:R=xa}x=R.bind(null,p,x,c),R=void 0,!Te||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(R=!0),C?R!==void 0?c.addEventListener(p,x,{capture:!0,passive:R}):c.addEventListener(p,x,!0):R!==void 0?c.addEventListener(p,x,{passive:R}):c.addEventListener(p,x,!1)}function ku(c,p,x,C,R){var F=C;if((p&1)===0&&(p&2)===0&&C!==null)e:for(;;){if(C===null)return;var ae=C.tag;if(ae===3||ae===4){var be=C.stateNode.containerInfo;if(be===R||be.nodeType===8&&be.parentNode===R)break;if(ae===4)for(ae=C.return;ae!==null;){var Ie=ae.tag;if((Ie===3||Ie===4)&&(Ie=ae.stateNode.containerInfo,Ie===R||Ie.nodeType===8&&Ie.parentNode===R))return;ae=ae.return}for(;be!==null;){if(ae=Fo(be),ae===null)return;if(Ie=ae.tag,Ie===5||Ie===6){C=F=ae;continue e}be=be.parentNode}}C=C.return}Oe(function(){var Ye=F,ft=va(x),mt=[];e:{var ct=$i.get(c);if(ct!==void 0){var Et=_u,Bt=c;switch(c){case"keypress":if(Io(x)===0)break e;case"keydown":case"keyup":Et=Sc;break;case"focusin":Bt="focus",Et=Al;break;case"focusout":Bt="blur",Et=Al;break;case"beforeblur":case"afterblur":Et=Al;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Et=Xf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Et=bu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Et=Xp;break;case Mh:case Ih:case _n:Et=Kp;break;case ba:Et=Yp;break;case"scroll":Et=Kf;break;case"wheel":Et=Pc;break;case"copy":case"cut":case"paste":Et=Qf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Et=hs}var Ht=(p&4)!==0,zn=!Ht&&c==="scroll",Ge=Ht?ct!==null?ct+"Capture":null:ct;Ht=[];for(var De=Ye,Ze;De!==null;){Ze=De;var St=Ze.stateNode;if(Ze.tag===5&&St!==null&&(Ze=St,Ge!==null&&(St=Le(De,Ge),St!=null&&Ht.push(tl(De,St,Ze)))),zn)break;De=De.return}0<Ht.length&&(ct=new Et(ct,Bt,null,x,ft),mt.push({event:ct,listeners:Ht}))}}if((p&7)===0){e:{if(ct=c==="mouseover"||c==="pointerover",Et=c==="mouseout"||c==="pointerout",ct&&x!==ir&&(Bt=x.relatedTarget||x.fromElement)&&(Fo(Bt)||Bt[Xa]))break e;if((Et||ct)&&(ct=ft.window===ft?ft:(ct=ft.ownerDocument)?ct.defaultView||ct.parentWindow:window,Et?(Bt=x.relatedTarget||x.toElement,Et=Ye,Bt=Bt?Fo(Bt):null,Bt!==null&&(zn=pr(Bt),Bt!==zn||Bt.tag!==5&&Bt.tag!==6)&&(Bt=null)):(Et=null,Bt=Ye),Et!==Bt)){if(Ht=Xf,St="onMouseLeave",Ge="onMouseEnter",De="mouse",(c==="pointerout"||c==="pointerover")&&(Ht=hs,St="onPointerLeave",Ge="onPointerEnter",De="pointer"),zn=Et==null?ct:Ya(Et),Ze=Bt==null?ct:Ya(Bt),ct=new Ht(St,De+"leave",Et,x,ft),ct.target=zn,ct.relatedTarget=Ze,St=null,Fo(ft)===Ye&&(Ht=new Ht(Ge,De+"enter",Bt,x,ft),Ht.target=Ze,Ht.relatedTarget=zn,St=Ht),zn=St,Et&&Bt)t:{for(Ht=Et,Ge=Bt,De=0,Ze=Ht;Ze;Ze=Bo(Ze))De++;for(Ze=0,St=Ge;St;St=Bo(St))Ze++;for(;0<De-Ze;)Ht=Bo(Ht),De--;for(;0<Ze-De;)Ge=Bo(Ge),Ze--;for(;De--;){if(Ht===Ge||Ge!==null&&Ht===Ge.alternate)break t;Ht=Bo(Ht),Ge=Bo(Ge)}Ht=null}else Ht=null;Et!==null&&jl(mt,ct,Et,Ht,!1),Bt!==null&&zn!==null&&jl(mt,zn,Bt,Ht,!0)}}e:{if(ct=Ye?Ya(Ye):window,Et=ct.nodeName&&ct.nodeName.toLowerCase(),Et==="select"||Et==="input"&&ct.type==="file")var Kt=Il;else if(Cl(ct))if(Eh)Kt=id;else{Kt=nd;var nr=kl}else(Et=ct.nodeName)&&Et.toLowerCase()==="input"&&(ct.type==="checkbox"||ct.type==="radio")&&(Kt=Ec);if(Kt&&(Kt=Kt(c,Ye))){Ml(mt,Kt,x,ft);break e}nr&&nr(c,ct,Ye),c==="focusout"&&(nr=ct._wrapperState)&&nr.controlled&&ct.type==="number"&&vr(ct,"number",ct.value)}switch(nr=Ye?Ya(Ye):window,c){case"focusin":(Cl(nr)||nr.contentEditable==="true")&&(Ro=nr,Eu=Ye,Cu=null);break;case"focusout":Cu=Eu=Ro=null;break;case"mousedown":Ic=!0;break;case"contextmenu":case"mouseup":case"dragend":Ic=!1,Mu(mt,x,ft);break;case"selectionchange":if(Mc)break;case"keydown":case"keyup":Mu(mt,x,ft)}var Xt;if(Nr)e:{switch(c){case"compositionstart":var hr="onCompositionStart";break e;case"compositionend":hr="onCompositionEnd";break e;case"compositionupdate":hr="onCompositionUpdate";break e}hr=void 0}else ds?Zs(c,x)&&(hr="onCompositionEnd"):c==="keydown"&&x.keyCode===229&&(hr="onCompositionStart");hr&&(El&&x.locale!=="ko"&&(ds||hr!=="onCompositionStart"?hr==="onCompositionEnd"&&ds&&(Xt=Zf()):(Pi=ft,kr="value"in Pi?Pi.value:Pi.textContent,ds=!0)),nr=zl(Ye,hr),0<nr.length&&(hr=new bc(hr,c,null,x,ft),mt.push({event:hr,listeners:nr}),Xt?hr.data=Xt:(Xt=ia(x),Xt!==null&&(hr.data=Xt)))),(Xt=Su?Th(c,x):Ah(c,x))&&(Ye=zl(Ye,"onBeforeInput"),0<Ye.length&&(ft=new bc("onBeforeInput","beforeinput",null,x,ft),mt.push({event:ft,listeners:Ye}),ft.data=Xt))}kc(mt,p)})}function tl(c,p,x){return{instance:c,listener:p,currentTarget:x}}function zl(c,p){for(var x=p+"Capture",C=[];c!==null;){var R=c,F=R.stateNode;R.tag===5&&F!==null&&(R=F,F=Le(c,x),F!=null&&C.unshift(tl(c,F,R)),F=Le(c,p),F!=null&&C.push(tl(c,F,R))),c=c.return}return C}function Bo(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function jl(c,p,x,C,R){for(var F=p._reactName,ae=[];x!==null&&x!==C;){var be=x,Ie=be.alternate,Ye=be.stateNode;if(Ie!==null&&Ie===C)break;be.tag===5&&Ye!==null&&(be=Ye,R?(Ie=Le(x,F),Ie!=null&&ae.unshift(tl(x,Ie,be))):R||(Ie=Le(x,F),Ie!=null&&ae.push(tl(x,Ie,be)))),x=x.return}ae.length!==0&&c.push({event:p,listeners:ae})}var od=/\r\n?/g,wa=/\u0000|\uFFFD/g;function Za(c){return(typeof c=="string"?c:""+c).replace(od,`
`).replace(wa,"")}function Ll(c,p,x){if(p=Za(p),Za(c)!==p&&x)throw Error(r(425))}function Vi(){}var No=null,Dh=null;function Rh(c,p){return c==="textarea"||c==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var Dc=typeof setTimeout=="function"?setTimeout:void 0,sd=typeof clearTimeout=="function"?clearTimeout:void 0,Rc=typeof Promise=="function"?Promise:void 0,Bl=typeof queueMicrotask=="function"?queueMicrotask:typeof Rc<"u"?function(c){return Rc.resolve(null).then(c).catch(Sa)}:Dc;function Sa(c){setTimeout(function(){throw c})}function It(c,p){var x=p,C=0;do{var R=x.nextSibling;if(c.removeChild(x),R&&R.nodeType===8)if(x=R.data,x==="/$"){if(C===0){c.removeChild(R),Mo(p);return}C--}else x!=="$"&&x!=="$?"&&x!=="$!"||C++;x=R}while(x);Mo(p)}function Ka(c){for(;c!=null;c=c.nextSibling){var p=c.nodeType;if(p===1||p===3)break;if(p===8){if(p=c.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return c}function zc(c){c=c.previousSibling;for(var p=0;c;){if(c.nodeType===8){var x=c.data;if(x==="$"||x==="$!"||x==="$?"){if(p===0)return c;p--}else x==="/$"&&p++}c=c.previousSibling}return null}var rl=Math.random().toString(36).slice(2),Ti="__reactFiber$"+rl,yo="__reactProps$"+rl,Xa="__reactContainer$"+rl,wr="__reactEvents$"+rl,zh="__reactListeners$"+rl,Jp="__reactHandles$"+rl;function Fo(c){var p=c[Ti];if(p)return p;for(var x=c.parentNode;x;){if(p=x[Xa]||x[Ti]){if(x=p.alternate,p.child!==null||x!==null&&x.child!==null)for(c=zc(c);c!==null;){if(x=c[Ti])return x;c=zc(c)}return p}c=x,x=c.parentNode}return null}function Ou(c){return c=c[Ti]||c[Xa],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Ya(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(r(33))}function Du(c){return c[yo]||null}var Ru=[],nl=-1;function vs(c){return{current:c}}function en(c){0>nl||(c.current=Ru[nl],Ru[nl]=null,nl--)}function an(c,p){nl++,Ru[nl]=c.current,c.current=p}var _s={},Gr=vs(_s),Sr=vs(!1),Pa=_s;function $o(c,p){var x=c.type.contextTypes;if(!x)return _s;var C=c.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===p)return C.__reactInternalMemoizedMaskedChildContext;var R={},F;for(F in x)R[F]=p[F];return C&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=p,c.__reactInternalMemoizedMaskedChildContext=R),R}function ni(c){return c=c.childContextTypes,c!=null}function zu(){en(Sr),en(Gr)}function Nl(c,p,x){if(Gr.current!==_s)throw Error(r(168));an(Gr,p),an(Sr,x)}function Fl(c,p,x){var C=c.stateNode;if(p=p.childContextTypes,typeof C.getChildContext!="function")return x;C=C.getChildContext();for(var R in C)if(!(R in p))throw Error(r(108,cr(c)||"Unknown",R));return nt({},x,C)}function aa(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||_s,Pa=Gr.current,an(Gr,c),an(Sr,Sr.current),!0}function $l(c,p,x){var C=c.stateNode;if(!C)throw Error(r(169));x?(c=Fl(c,p,Pa),C.__reactInternalMemoizedMergedChildContext=c,en(Sr),en(Gr),an(Gr,c)):en(Sr),an(Sr,x)}var kt=null,Zt=!1,Vl=!1;function ju(c){kt===null?kt=[c]:kt.push(c)}function jh(c){Zt=!0,ju(c)}function w(){if(!Vl&&kt!==null){Vl=!0;var c=0,p=Br;try{var x=kt;for(Br=1;c<x.length;c++){var C=x[c];do C=C(!0);while(C!==null)}kt=null,Zt=!1}catch(R){throw kt!==null&&(kt=kt.slice(c+1)),Nn(pu,w),R}finally{Br=p,Vl=!1}}return null}var i=[],f=0,g=null,y=0,b=[],k=0,D=null,z=1,$="";function W(c,p){i[f++]=y,i[f++]=g,g=c,y=p}function G(c,p,x){b[k++]=z,b[k++]=$,b[k++]=D,D=c;var C=z;c=$;var R=32-Vr(C)-1;C&=~(1<<R),x+=1;var F=32-Vr(p)+R;if(30<F){var ae=R-R%5;F=(C&(1<<ae)-1).toString(32),C>>=ae,R-=ae,z=1<<32-Vr(p)+R|x<<R|C,$=F+c}else z=1<<F|x<<R|C,$=c}function ne(c){c.return!==null&&(W(c,1),G(c,1,0))}function le(c){for(;c===g;)g=i[--f],i[f]=null,y=i[--f],i[f]=null;for(;c===D;)D=b[--k],b[k]=null,$=b[--k],b[k]=null,z=b[--k],b[k]=null}var he=null,de=null,ge=!1,_e=null;function Ee(c,p){var x=ka(5,null,null,0);x.elementType="DELETED",x.stateNode=p,x.return=c,p=c.deletions,p===null?(c.deletions=[x],c.flags|=16):p.push(x)}function pe(c,p){switch(c.tag){case 5:var x=c.type;return p=p.nodeType!==1||x.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(c.stateNode=p,he=c,de=Ka(p.firstChild),!0):!1;case 6:return p=c.pendingProps===""||p.nodeType!==3?null:p,p!==null?(c.stateNode=p,he=c,de=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(x=D!==null?{id:z,overflow:$}:null,c.memoizedState={dehydrated:p,treeContext:x,retryLane:1073741824},x=ka(18,null,null,0),x.stateNode=p,x.return=c,c.child=x,he=c,de=null,!0):!1;default:return!1}}function ke(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Re(c){if(ge){var p=de;if(p){var x=p;if(!pe(c,p)){if(ke(c))throw Error(r(418));p=Ka(x.nextSibling);var C=he;p&&pe(c,p)?Ee(C,x):(c.flags=c.flags&-4097|2,ge=!1,he=c)}}else{if(ke(c))throw Error(r(418));c.flags=c.flags&-4097|2,ge=!1,he=c}}}function Ue(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;he=c}function at(c){if(c!==he)return!1;if(!ge)return Ue(c),ge=!0,!1;var p;if((p=c.tag!==3)&&!(p=c.tag!==5)&&(p=c.type,p=p!=="head"&&p!=="body"&&!Rh(c.type,c.memoizedProps)),p&&(p=de)){if(ke(c))throw dt(),Error(r(418));for(;p;)Ee(c,p),p=Ka(p.nextSibling)}if(Ue(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,p=0;c;){if(c.nodeType===8){var x=c.data;if(x==="/$"){if(p===0){de=Ka(c.nextSibling);break e}p--}else x!=="$"&&x!=="$!"&&x!=="$?"||p++}c=c.nextSibling}de=null}}else de=he?Ka(c.stateNode.nextSibling):null;return!0}function dt(){for(var c=de;c;)c=Ka(c.nextSibling)}function _t(){de=he=null,ge=!1}function At(c){_e===null?_e=[c]:_e.push(c)}var xt=ie.ReactCurrentBatchConfig;function gt(c,p,x){if(c=x.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(r(309));var C=x.stateNode}if(!C)throw Error(r(147,c));var R=C,F=""+c;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===F?p.ref:(p=function(ae){var be=R.refs;ae===null?delete be[F]:be[F]=ae},p._stringRef=F,p)}if(typeof c!="string")throw Error(r(284));if(!x._owner)throw Error(r(290,c))}return c}function Rt(c,p){throw c=Object.prototype.toString.call(p),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":c))}function tr(c){var p=c._init;return p(c._payload)}function wt(c){function p(Ge,De){if(c){var Ze=Ge.deletions;Ze===null?(Ge.deletions=[De],Ge.flags|=16):Ze.push(De)}}function x(Ge,De){if(!c)return null;for(;De!==null;)p(Ge,De),De=De.sibling;return null}function C(Ge,De){for(Ge=new Map;De!==null;)De.key!==null?Ge.set(De.key,De):Ge.set(De.index,De),De=De.sibling;return Ge}function R(Ge,De){return Ge=eu(Ge,De),Ge.index=0,Ge.sibling=null,Ge}function F(Ge,De,Ze){return Ge.index=Ze,c?(Ze=Ge.alternate,Ze!==null?(Ze=Ze.index,Ze<De?(Ge.flags|=2,De):Ze):(Ge.flags|=2,De)):(Ge.flags|=1048576,De)}function ae(Ge){return c&&Ge.alternate===null&&(Ge.flags|=2),Ge}function be(Ge,De,Ze,St){return De===null||De.tag!==6?(De=bo(Ze,Ge.mode,St),De.return=Ge,De):(De=R(De,Ze),De.return=Ge,De)}function Ie(Ge,De,Ze,St){var Kt=Ze.type;return Kt===se?ft(Ge,De,Ze.props.children,St,Ze.key):De!==null&&(De.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===rt&&tr(Kt)===De.type)?(St=R(De,Ze.props),St.ref=gt(Ge,De,Ze),St.return=Ge,St):(St=hf(Ze.type,Ze.key,Ze.props,null,Ge.mode,St),St.ref=gt(Ge,De,Ze),St.return=Ge,St)}function Ye(Ge,De,Ze,St){return De===null||De.tag!==4||De.stateNode.containerInfo!==Ze.containerInfo||De.stateNode.implementation!==Ze.implementation?(De=Ps(Ze,Ge.mode,St),De.return=Ge,De):(De=R(De,Ze.children||[]),De.return=Ge,De)}function ft(Ge,De,Ze,St,Kt){return De===null||De.tag!==7?(De=tu(Ze,Ge.mode,St,Kt),De.return=Ge,De):(De=R(De,Ze),De.return=Ge,De)}function mt(Ge,De,Ze){if(typeof De=="string"&&De!==""||typeof De=="number")return De=bo(""+De,Ge.mode,Ze),De.return=Ge,De;if(typeof De=="object"&&De!==null){switch(De.$$typeof){case H:return Ze=hf(De.type,De.key,De.props,null,Ge.mode,Ze),Ze.ref=gt(Ge,null,De),Ze.return=Ge,Ze;case X:return De=Ps(De,Ge.mode,Ze),De.return=Ge,De;case rt:var St=De._init;return mt(Ge,St(De._payload),Ze)}if(Rr(De)||tt(De))return De=tu(De,Ge.mode,Ze,null),De.return=Ge,De;Rt(Ge,De)}return null}function ct(Ge,De,Ze,St){var Kt=De!==null?De.key:null;if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number")return Kt!==null?null:be(Ge,De,""+Ze,St);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case H:return Ze.key===Kt?Ie(Ge,De,Ze,St):null;case X:return Ze.key===Kt?Ye(Ge,De,Ze,St):null;case rt:return Kt=Ze._init,ct(Ge,De,Kt(Ze._payload),St)}if(Rr(Ze)||tt(Ze))return Kt!==null?null:ft(Ge,De,Ze,St,null);Rt(Ge,Ze)}return null}function Et(Ge,De,Ze,St,Kt){if(typeof St=="string"&&St!==""||typeof St=="number")return Ge=Ge.get(Ze)||null,be(De,Ge,""+St,Kt);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case H:return Ge=Ge.get(St.key===null?Ze:St.key)||null,Ie(De,Ge,St,Kt);case X:return Ge=Ge.get(St.key===null?Ze:St.key)||null,Ye(De,Ge,St,Kt);case rt:var nr=St._init;return Et(Ge,De,Ze,nr(St._payload),Kt)}if(Rr(St)||tt(St))return Ge=Ge.get(Ze)||null,ft(De,Ge,St,Kt,null);Rt(De,St)}return null}function Bt(Ge,De,Ze,St){for(var Kt=null,nr=null,Xt=De,hr=De=0,si=null;Xt!==null&&hr<Ze.length;hr++){Xt.index>hr?(si=Xt,Xt=null):si=Xt.sibling;var Fr=ct(Ge,Xt,Ze[hr],St);if(Fr===null){Xt===null&&(Xt=si);break}c&&Xt&&Fr.alternate===null&&p(Ge,Xt),De=F(Fr,De,hr),nr===null?Kt=Fr:nr.sibling=Fr,nr=Fr,Xt=si}if(hr===Ze.length)return x(Ge,Xt),ge&&W(Ge,hr),Kt;if(Xt===null){for(;hr<Ze.length;hr++)Xt=mt(Ge,Ze[hr],St),Xt!==null&&(De=F(Xt,De,hr),nr===null?Kt=Xt:nr.sibling=Xt,nr=Xt);return ge&&W(Ge,hr),Kt}for(Xt=C(Ge,Xt);hr<Ze.length;hr++)si=Et(Xt,Ge,hr,Ze[hr],St),si!==null&&(c&&si.alternate!==null&&Xt.delete(si.key===null?hr:si.key),De=F(si,De,hr),nr===null?Kt=si:nr.sibling=si,nr=si);return c&&Xt.forEach(function(sl){return p(Ge,sl)}),ge&&W(Ge,hr),Kt}function Ht(Ge,De,Ze,St){var Kt=tt(Ze);if(typeof Kt!="function")throw Error(r(150));if(Ze=Kt.call(Ze),Ze==null)throw Error(r(151));for(var nr=Kt=null,Xt=De,hr=De=0,si=null,Fr=Ze.next();Xt!==null&&!Fr.done;hr++,Fr=Ze.next()){Xt.index>hr?(si=Xt,Xt=null):si=Xt.sibling;var sl=ct(Ge,Xt,Fr.value,St);if(sl===null){Xt===null&&(Xt=si);break}c&&Xt&&sl.alternate===null&&p(Ge,Xt),De=F(sl,De,hr),nr===null?Kt=sl:nr.sibling=sl,nr=sl,Xt=si}if(Fr.done)return x(Ge,Xt),ge&&W(Ge,hr),Kt;if(Xt===null){for(;!Fr.done;hr++,Fr=Ze.next())Fr=mt(Ge,Fr.value,St),Fr!==null&&(De=F(Fr,De,hr),nr===null?Kt=Fr:nr.sibling=Fr,nr=Fr);return ge&&W(Ge,hr),Kt}for(Xt=C(Ge,Xt);!Fr.done;hr++,Fr=Ze.next())Fr=Et(Xt,Ge,hr,Fr.value,St),Fr!==null&&(c&&Fr.alternate!==null&&Xt.delete(Fr.key===null?hr:Fr.key),De=F(Fr,De,hr),nr===null?Kt=Fr:nr.sibling=Fr,nr=Fr);return c&&Xt.forEach(function(k0){return p(Ge,k0)}),ge&&W(Ge,hr),Kt}function zn(Ge,De,Ze,St){if(typeof Ze=="object"&&Ze!==null&&Ze.type===se&&Ze.key===null&&(Ze=Ze.props.children),typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case H:e:{for(var Kt=Ze.key,nr=De;nr!==null;){if(nr.key===Kt){if(Kt=Ze.type,Kt===se){if(nr.tag===7){x(Ge,nr.sibling),De=R(nr,Ze.props.children),De.return=Ge,Ge=De;break e}}else if(nr.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===rt&&tr(Kt)===nr.type){x(Ge,nr.sibling),De=R(nr,Ze.props),De.ref=gt(Ge,nr,Ze),De.return=Ge,Ge=De;break e}x(Ge,nr);break}else p(Ge,nr);nr=nr.sibling}Ze.type===se?(De=tu(Ze.props.children,Ge.mode,St,Ze.key),De.return=Ge,Ge=De):(St=hf(Ze.type,Ze.key,Ze.props,null,Ge.mode,St),St.ref=gt(Ge,De,Ze),St.return=Ge,Ge=St)}return ae(Ge);case X:e:{for(nr=Ze.key;De!==null;){if(De.key===nr)if(De.tag===4&&De.stateNode.containerInfo===Ze.containerInfo&&De.stateNode.implementation===Ze.implementation){x(Ge,De.sibling),De=R(De,Ze.children||[]),De.return=Ge,Ge=De;break e}else{x(Ge,De);break}else p(Ge,De);De=De.sibling}De=Ps(Ze,Ge.mode,St),De.return=Ge,Ge=De}return ae(Ge);case rt:return nr=Ze._init,zn(Ge,De,nr(Ze._payload),St)}if(Rr(Ze))return Bt(Ge,De,Ze,St);if(tt(Ze))return Ht(Ge,De,Ze,St);Rt(Ge,Ze)}return typeof Ze=="string"&&Ze!==""||typeof Ze=="number"?(Ze=""+Ze,De!==null&&De.tag===6?(x(Ge,De.sibling),De=R(De,Ze),De.return=Ge,Ge=De):(x(Ge,De),De=bo(Ze,Ge.mode,St),De.return=Ge,Ge=De),ae(Ge)):x(Ge,De)}return zn}var Pt=wt(!0),er=wt(!1),qr=vs(null),ur=null,yr=null,Hr=null;function Xn(){Hr=yr=ur=null}function oa(c){var p=qr.current;en(qr),c._currentValue=p}function Zr(c,p,x){for(;c!==null;){var C=c.alternate;if((c.childLanes&p)!==p?(c.childLanes|=p,C!==null&&(C.childLanes|=p)):C!==null&&(C.childLanes&p)!==p&&(C.childLanes|=p),c===x)break;c=c.return}}function Fn(c,p){ur=c,Hr=yr=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&p)!==0&&(ca=!0),c.firstContext=null)}function on(c){var p=c._currentValue;if(Hr!==c)if(c={context:c,memoizedValue:p,next:null},yr===null){if(ur===null)throw Error(r(308));yr=c,ur.dependencies={lanes:0,firstContext:c}}else yr=yr.next=c;return p}var Pn=null;function ii(c){Pn===null?Pn=[c]:Pn.push(c)}function Ja(c,p,x,C){var R=p.interleaved;return R===null?(x.next=x,ii(p)):(x.next=R.next,R.next=x),p.interleaved=x,Ui(c,C)}function Ui(c,p){c.lanes|=p;var x=c.alternate;for(x!==null&&(x.lanes|=p),x=c,c=c.return;c!==null;)c.childLanes|=p,x=c.alternate,x!==null&&(x.childLanes|=p),x=c,c=c.return;return x.tag===3?x.stateNode:null}var Qa=!1;function xs(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sa(c,p){c=c.updateQueue,p.updateQueue===c&&(p.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Ta(c,p){return{eventTime:c,lane:p,tag:0,payload:null,callback:null,next:null}}function vo(c,p,x){var C=c.updateQueue;if(C===null)return null;if(C=C.shared,(zr&2)!==0){var R=C.pending;return R===null?p.next=p:(p.next=R.next,R.next=p),C.pending=p,Ui(c,x)}return R=C.interleaved,R===null?(p.next=p,ii(C)):(p.next=R.next,R.next=p),C.interleaved=p,Ui(c,x)}function Ai(c,p,x){if(p=p.updateQueue,p!==null&&(p=p.shared,(x&4194240)!==0)){var C=p.lanes;C&=c.pendingLanes,x|=C,p.lanes=x,ss(c,x)}}function la(c,p){var x=c.updateQueue,C=c.alternate;if(C!==null&&(C=C.updateQueue,x===C)){var R=null,F=null;if(x=x.firstBaseUpdate,x!==null){do{var ae={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};F===null?R=F=ae:F=F.next=ae,x=x.next}while(x!==null);F===null?R=F=p:F=F.next=p}else R=F=p;x={baseState:C.baseState,firstBaseUpdate:R,lastBaseUpdate:F,shared:C.shared,effects:C.effects},c.updateQueue=x;return}c=x.lastBaseUpdate,c===null?x.firstBaseUpdate=p:c.next=p,x.lastBaseUpdate=p}function eo(c,p,x,C){var R=c.updateQueue;Qa=!1;var F=R.firstBaseUpdate,ae=R.lastBaseUpdate,be=R.shared.pending;if(be!==null){R.shared.pending=null;var Ie=be,Ye=Ie.next;Ie.next=null,ae===null?F=Ye:ae.next=Ye,ae=Ie;var ft=c.alternate;ft!==null&&(ft=ft.updateQueue,be=ft.lastBaseUpdate,be!==ae&&(be===null?ft.firstBaseUpdate=Ye:be.next=Ye,ft.lastBaseUpdate=Ie))}if(F!==null){var mt=R.baseState;ae=0,ft=Ye=Ie=null,be=F;do{var ct=be.lane,Et=be.eventTime;if((C&ct)===ct){ft!==null&&(ft=ft.next={eventTime:Et,lane:0,tag:be.tag,payload:be.payload,callback:be.callback,next:null});e:{var Bt=c,Ht=be;switch(ct=p,Et=x,Ht.tag){case 1:if(Bt=Ht.payload,typeof Bt=="function"){mt=Bt.call(Et,mt,ct);break e}mt=Bt;break e;case 3:Bt.flags=Bt.flags&-65537|128;case 0:if(Bt=Ht.payload,ct=typeof Bt=="function"?Bt.call(Et,mt,ct):Bt,ct==null)break e;mt=nt({},mt,ct);break e;case 2:Qa=!0}}be.callback!==null&&be.lane!==0&&(c.flags|=64,ct=R.effects,ct===null?R.effects=[be]:ct.push(be))}else Et={eventTime:Et,lane:ct,tag:be.tag,payload:be.payload,callback:be.callback,next:null},ft===null?(Ye=ft=Et,Ie=mt):ft=ft.next=Et,ae|=ct;if(be=be.next,be===null){if(be=R.shared.pending,be===null)break;ct=be,be=ct.next,ct.next=null,R.lastBaseUpdate=ct,R.shared.pending=null}}while(!0);if(ft===null&&(Ie=mt),R.baseState=Ie,R.firstBaseUpdate=Ye,R.lastBaseUpdate=ft,p=R.shared.interleaved,p!==null){R=p;do ae|=R.lane,R=R.next;while(R!==p)}else F===null&&(R.shared.lanes=0);Vu|=ae,c.lanes=ae,c.memoizedState=mt}}function Aa(c,p,x){if(c=p.effects,p.effects=null,c!==null)for(p=0;p<c.length;p++){var C=c[p],R=C.callback;if(R!==null){if(C.callback=null,C=x,typeof R!="function")throw Error(r(191,R));R.call(C)}}}var In={},cn=vs(In),ai=vs(In),xr=vs(In);function ua(c){if(c===In)throw Error(r(174));return c}function bs(c,p){switch(an(xr,p),an(ai,c),an(cn,In),c=p.nodeType,c){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:Ns(null,"");break;default:c=c===8?p.parentNode:p,p=c.namespaceURI||null,c=c.tagName,p=Ns(p,c)}en(cn),an(cn,p)}function to(){en(cn),en(ai),en(xr)}function Lh(c){ua(xr.current);var p=ua(cn.current),x=Ns(p,c.type);p!==x&&(an(ai,c),an(cn,x))}function Bh(c){ai.current===c&&(en(cn),en(ai))}var mn=vs(0);function ro(c){for(var p=c;p!==null;){if(p.tag===13){var x=p.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var jc=[];function Ul(){for(var c=0;c<jc.length;c++)jc[c]._workInProgressVersionPrimary=null;jc.length=0}var ws=ie.ReactCurrentDispatcher,ql=ie.ReactCurrentBatchConfig,_o=0,Kr=null,xn=null,$n=null,Nh=!1,Lc=!1,Fh=0,Qp=0;function Yn(){throw Error(r(321))}function Wl(c,p){if(p===null)return!1;for(var x=0;x<p.length&&x<c.length;x++)if(!Fi(c[x],p[x]))return!1;return!0}function Vo(c,p,x,C,R,F){if(_o=F,Kr=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,ws.current=c===null||c.memoizedState===null?pd:_0,c=x(C,R),Lc){F=0;do{if(Lc=!1,Fh=0,25<=F)throw Error(r(301));F+=1,$n=xn=null,p.updateQueue=null,ws.current=ly,c=x(C,R)}while(Lc)}if(ws.current=dd,p=xn!==null&&xn.next!==null,_o=0,$n=xn=Kr=null,Nh=!1,p)throw Error(r(300));return c}function no(){var c=Fh!==0;return Fh=0,c}function Ei(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $n===null?Kr.memoizedState=$n=c:$n=$n.next=c,$n}function io(){if(xn===null){var c=Kr.alternate;c=c!==null?c.memoizedState:null}else c=xn.next;var p=$n===null?Kr.memoizedState:$n.next;if(p!==null)$n=p,xn=c;else{if(c===null)throw Error(r(310));xn=c,c={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},$n===null?Kr.memoizedState=$n=c:$n=$n.next=c}return $n}function Uo(c,p){return typeof p=="function"?p(c):p}function em(c){var p=io(),x=p.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=c;var C=xn,R=C.baseQueue,F=x.pending;if(F!==null){if(R!==null){var ae=R.next;R.next=F.next,F.next=ae}C.baseQueue=R=F,x.pending=null}if(R!==null){F=R.next,C=C.baseState;var be=ae=null,Ie=null,Ye=F;do{var ft=Ye.lane;if((_o&ft)===ft)Ie!==null&&(Ie=Ie.next={lane:0,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),C=Ye.hasEagerState?Ye.eagerState:c(C,Ye.action);else{var mt={lane:ft,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null};Ie===null?(be=Ie=mt,ae=C):Ie=Ie.next=mt,Kr.lanes|=ft,Vu|=ft}Ye=Ye.next}while(Ye!==null&&Ye!==F);Ie===null?ae=C:Ie.next=be,Fi(C,p.memoizedState)||(ca=!0),p.memoizedState=C,p.baseState=ae,p.baseQueue=Ie,x.lastRenderedState=C}if(c=x.interleaved,c!==null){R=c;do F=R.lane,Kr.lanes|=F,Vu|=F,R=R.next;while(R!==c)}else R===null&&(x.lanes=0);return[p.memoizedState,x.dispatch]}function ld(c){var p=io(),x=p.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=c;var C=x.dispatch,R=x.pending,F=p.memoizedState;if(R!==null){x.pending=null;var ae=R=R.next;do F=c(F,ae.action),ae=ae.next;while(ae!==R);Fi(F,p.memoizedState)||(ca=!0),p.memoizedState=F,p.baseQueue===null&&(p.baseState=F),x.lastRenderedState=F}return[F,C]}function kn(){}function ud(c,p){var x=Kr,C=io(),R=p(),F=!Fi(C.memoizedState,R);if(F&&(C.memoizedState=R,ca=!0),C=C.queue,Uh(Hl.bind(null,x,C,c),[c]),C.getSnapshot!==p||F||$n!==null&&$n.memoizedState.tag&1){if(x.flags|=2048,Vh(9,Gl.bind(null,x,C,R,p),void 0,null),oi===null)throw Error(r(349));(_o&30)!==0||tm(x,p,R)}return R}function tm(c,p,x){c.flags|=16384,c={getSnapshot:p,value:x},p=Kr.updateQueue,p===null?(p={lastEffect:null,stores:null},Kr.updateQueue=p,p.stores=[c]):(x=p.stores,x===null?p.stores=[c]:x.push(c))}function Gl(c,p,x,C){p.value=x,p.getSnapshot=C,$h(p)&&cd(c)}function Hl(c,p,x){return x(function(){$h(p)&&cd(c)})}function $h(c){var p=c.getSnapshot;c=c.value;try{var x=p();return!Fi(c,x)}catch{return!0}}function cd(c){var p=Ui(c,1);p!==null&&Wo(p,c,1,-1)}function rm(c){var p=Ei();return typeof c=="function"&&(c=c()),p.memoizedState=p.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:c},p.queue=c,c=c.dispatch=Nc.bind(null,Kr,c),[p.memoizedState,c]}function Vh(c,p,x,C){return c={tag:c,create:p,destroy:x,deps:C,next:null},p=Kr.updateQueue,p===null?(p={lastEffect:null,stores:null},Kr.updateQueue=p,p.lastEffect=c.next=c):(x=p.lastEffect,x===null?p.lastEffect=c.next=c:(C=x.next,x.next=c,c.next=C,p.lastEffect=c)),c}function nm(){return io().memoizedState}function hd(c,p,x,C){var R=Ei();Kr.flags|=c,R.memoizedState=Vh(1|p,x,void 0,C===void 0?null:C)}function Bc(c,p,x,C){var R=io();C=C===void 0?null:C;var F=void 0;if(xn!==null){var ae=xn.memoizedState;if(F=ae.destroy,C!==null&&Wl(C,ae.deps)){R.memoizedState=Vh(p,x,F,C);return}}Kr.flags|=c,R.memoizedState=Vh(1|p,x,F,C)}function iy(c,p){return hd(8390656,8,c,p)}function Uh(c,p){return Bc(2048,8,c,p)}function im(c,p){return Bc(4,2,c,p)}function am(c,p){return Bc(4,4,c,p)}function Lu(c,p){if(typeof p=="function")return c=c(),p(c),function(){p(null)};if(p!=null)return c=c(),p.current=c,function(){p.current=null}}function ay(c,p,x){return x=x!=null?x.concat([c]):null,Bc(4,4,Lu.bind(null,p,c),x)}function Bu(){}function qh(c,p){var x=io();p=p===void 0?null:p;var C=x.memoizedState;return C!==null&&p!==null&&Wl(p,C[1])?C[0]:(x.memoizedState=[c,p],c)}function Wh(c,p){var x=io();p=p===void 0?null:p;var C=x.memoizedState;return C!==null&&p!==null&&Wl(p,C[1])?C[0]:(c=c(),x.memoizedState=[c,p],c)}function om(c,p,x){return(_o&21)===0?(c.baseState&&(c.baseState=!1,ca=!0),c.memoizedState=x):(Fi(x,p)||(x=Co(),Kr.lanes|=x,Vu|=x,c.baseState=!0),p)}function oy(c,p){var x=Br;Br=x!==0&&4>x?x:4,c(!0);var C=ql.transition;ql.transition={};try{c(!1),p()}finally{Br=x,ql.transition=C}}function sy(){return io().memoizedState}function qi(c,p,x){var C=Ql(c);if(x={lane:C,action:x,hasEagerState:!1,eagerState:null,next:null},fd(c))sm(p,x);else if(x=Ja(c,p,x,C),x!==null){var R=ha();Wo(x,c,C,R),Fc(x,p,C)}}function Nc(c,p,x){var C=Ql(c),R={lane:C,action:x,hasEagerState:!1,eagerState:null,next:null};if(fd(c))sm(p,R);else{var F=c.alternate;if(c.lanes===0&&(F===null||F.lanes===0)&&(F=p.lastRenderedReducer,F!==null))try{var ae=p.lastRenderedState,be=F(ae,x);if(R.hasEagerState=!0,R.eagerState=be,Fi(be,ae)){var Ie=p.interleaved;Ie===null?(R.next=R,ii(p)):(R.next=Ie.next,Ie.next=R),p.interleaved=R;return}}catch{}finally{}x=Ja(c,p,R,C),x!==null&&(R=ha(),Wo(x,c,C,R),Fc(x,p,C))}}function fd(c){var p=c.alternate;return c===Kr||p!==null&&p===Kr}function sm(c,p){Lc=Nh=!0;var x=c.pending;x===null?p.next=p:(p.next=x.next,x.next=p),c.pending=p}function Fc(c,p,x){if((x&4194240)!==0){var C=p.lanes;C&=c.pendingLanes,x|=C,p.lanes=x,ss(c,x)}}var dd={readContext:on,useCallback:Yn,useContext:Yn,useEffect:Yn,useImperativeHandle:Yn,useInsertionEffect:Yn,useLayoutEffect:Yn,useMemo:Yn,useReducer:Yn,useRef:Yn,useState:Yn,useDebugValue:Yn,useDeferredValue:Yn,useTransition:Yn,useMutableSource:Yn,useSyncExternalStore:Yn,useId:Yn,unstable_isNewReconciler:!1},pd={readContext:on,useCallback:function(c,p){return Ei().memoizedState=[c,p===void 0?null:p],c},useContext:on,useEffect:iy,useImperativeHandle:function(c,p,x){return x=x!=null?x.concat([c]):null,hd(4194308,4,Lu.bind(null,p,c),x)},useLayoutEffect:function(c,p){return hd(4194308,4,c,p)},useInsertionEffect:function(c,p){return hd(4,2,c,p)},useMemo:function(c,p){var x=Ei();return p=p===void 0?null:p,c=c(),x.memoizedState=[c,p],c},useReducer:function(c,p,x){var C=Ei();return p=x!==void 0?x(p):p,C.memoizedState=C.baseState=p,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:p},C.queue=c,c=c.dispatch=qi.bind(null,Kr,c),[C.memoizedState,c]},useRef:function(c){var p=Ei();return c={current:c},p.memoizedState=c},useState:rm,useDebugValue:Bu,useDeferredValue:function(c){return Ei().memoizedState=c},useTransition:function(){var c=rm(!1),p=c[0];return c=oy.bind(null,c[1]),Ei().memoizedState=c,[p,c]},useMutableSource:function(){},useSyncExternalStore:function(c,p,x){var C=Kr,R=Ei();if(ge){if(x===void 0)throw Error(r(407));x=x()}else{if(x=p(),oi===null)throw Error(r(349));(_o&30)!==0||tm(C,p,x)}R.memoizedState=x;var F={value:x,getSnapshot:p};return R.queue=F,iy(Hl.bind(null,C,F,c),[c]),C.flags|=2048,Vh(9,Gl.bind(null,C,F,x,p),void 0,null),x},useId:function(){var c=Ei(),p=oi.identifierPrefix;if(ge){var x=$,C=z;x=(C&~(1<<32-Vr(C)-1)).toString(32)+x,p=":"+p+"R"+x,x=Fh++,0<x&&(p+="H"+x.toString(32)),p+=":"}else x=Qp++,p=":"+p+"r"+x.toString(32)+":";return c.memoizedState=p},unstable_isNewReconciler:!1},_0={readContext:on,useCallback:qh,useContext:on,useEffect:Uh,useImperativeHandle:ay,useInsertionEffect:im,useLayoutEffect:am,useMemo:Wh,useReducer:em,useRef:nm,useState:function(){return em(Uo)},useDebugValue:Bu,useDeferredValue:function(c){var p=io();return om(p,xn.memoizedState,c)},useTransition:function(){var c=em(Uo)[0],p=io().memoizedState;return[c,p]},useMutableSource:kn,useSyncExternalStore:ud,useId:sy,unstable_isNewReconciler:!1},ly={readContext:on,useCallback:qh,useContext:on,useEffect:Uh,useImperativeHandle:ay,useInsertionEffect:im,useLayoutEffect:am,useMemo:Wh,useReducer:ld,useRef:nm,useState:function(){return ld(Uo)},useDebugValue:Bu,useDeferredValue:function(c){var p=io();return xn===null?p.memoizedState=c:om(p,xn.memoizedState,c)},useTransition:function(){var c=ld(Uo)[0],p=io().memoizedState;return[c,p]},useMutableSource:kn,useSyncExternalStore:ud,useId:sy,unstable_isNewReconciler:!1};function xo(c,p){if(c&&c.defaultProps){p=nt({},p),c=c.defaultProps;for(var x in c)p[x]===void 0&&(p[x]=c[x]);return p}return p}function md(c,p,x,C){p=c.memoizedState,x=x(C,p),x=x==null?p:nt({},p,x),c.memoizedState=x,c.lanes===0&&(c.updateQueue.baseState=x)}var gd={isMounted:function(c){return(c=c._reactInternals)?pr(c)===c:!1},enqueueSetState:function(c,p,x){c=c._reactInternals;var C=ha(),R=Ql(c),F=Ta(C,R);F.payload=p,x!=null&&(F.callback=x),p=vo(c,F,R),p!==null&&(Wo(p,c,R,C),Ai(p,c,R))},enqueueReplaceState:function(c,p,x){c=c._reactInternals;var C=ha(),R=Ql(c),F=Ta(C,R);F.tag=1,F.payload=p,x!=null&&(F.callback=x),p=vo(c,F,R),p!==null&&(Wo(p,c,R,C),Ai(p,c,R))},enqueueForceUpdate:function(c,p){c=c._reactInternals;var x=ha(),C=Ql(c),R=Ta(x,C);R.tag=2,p!=null&&(R.callback=p),p=vo(c,R,C),p!==null&&(Wo(p,c,C,x),Ai(p,c,C))}};function yd(c,p,x,C,R,F,ae){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(C,F,ae):p.prototype&&p.prototype.isPureReactComponent?!ps(x,C)||!ps(R,F):!0}function lm(c,p,x){var C=!1,R=_s,F=p.contextType;return typeof F=="object"&&F!==null?F=on(F):(R=ni(p)?Pa:Gr.current,C=p.contextTypes,F=(C=C!=null)?$o(c,R):_s),p=new p(x,F),c.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=gd,c.stateNode=p,p._reactInternals=c,C&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=R,c.__reactInternalMemoizedMaskedChildContext=F),p}function vd(c,p,x,C){c=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(x,C),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(x,C),p.state!==c&&gd.enqueueReplaceState(p,p.state,null)}function Nu(c,p,x,C){var R=c.stateNode;R.props=x,R.state=c.memoizedState,R.refs={},xs(c);var F=p.contextType;typeof F=="object"&&F!==null?R.context=on(F):(F=ni(p)?Pa:Gr.current,R.context=$o(c,F)),R.state=c.memoizedState,F=p.getDerivedStateFromProps,typeof F=="function"&&(md(c,p,F,x),R.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(p=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),p!==R.state&&gd.enqueueReplaceState(R,R.state,null),eo(c,x,R,C),R.state=c.memoizedState),typeof R.componentDidMount=="function"&&(c.flags|=4194308)}function pi(c,p){try{var x="",C=p;do x+=Ut(C),C=C.return;while(C);var R=x}catch(F){R=`
Error generating stack: `+F.message+`
`+F.stack}return{value:c,source:p,stack:R,digest:null}}function _d(c,p,x){return{value:c,source:null,stack:x??null,digest:p??null}}function Gh(c,p){try{console.error(p.value)}catch(x){setTimeout(function(){throw x})}}var x0=typeof WeakMap=="function"?WeakMap:Map;function um(c,p,x){x=Ta(-1,x),x.tag=3,x.payload={element:null};var C=p.value;return x.callback=function(){rf||(rf=!0,Id=C),Gh(c,p)},x}function uy(c,p,x){x=Ta(-1,x),x.tag=3;var C=c.type.getDerivedStateFromError;if(typeof C=="function"){var R=p.value;x.payload=function(){return C(R)},x.callback=function(){Gh(c,p)}}var F=c.stateNode;return F!==null&&typeof F.componentDidCatch=="function"&&(x.callback=function(){Gh(c,p),typeof C!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var ae=p.stack;this.componentDidCatch(p.value,{componentStack:ae!==null?ae:""})}),x}function cy(c,p,x){var C=c.pingCache;if(C===null){C=c.pingCache=new x0;var R=new Set;C.set(p,R)}else R=C.get(p),R===void 0&&(R=new Set,C.set(p,R));R.has(x)||(R.add(x),c=A0.bind(null,c,p,x),p.then(c,c))}function hy(c){do{var p;if((p=c.tag===13)&&(p=c.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return c;c=c.return}while(c!==null);return null}function fy(c,p,x,C,R){return(c.mode&1)===0?(c===p?c.flags|=65536:(c.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(p=Ta(-1,1),p.tag=2,vo(x,p,1))),x.lanes|=1),c):(c.flags|=65536,c.lanes=R,c)}var dy=ie.ReactCurrentOwner,ca=!1;function Vn(c,p,x,C){p.child=c===null?er(p,null,x,C):Pt(p,c.child,x,C)}function $c(c,p,x,C,R){x=x.render;var F=p.ref;return Fn(p,R),C=Vo(c,p,x,C,F,R),x=no(),c!==null&&!ca?(p.updateQueue=c.updateQueue,p.flags&=-2053,c.lanes&=~R,ao(c,p,R)):(ge&&x&&ne(p),p.flags|=1,Vn(c,p,C,R),p.child)}function py(c,p,x,C,R){if(c===null){var F=x.type;return typeof F=="function"&&!cf(F)&&F.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(p.tag=15,p.type=F,my(c,p,F,C,R)):(c=hf(x.type,null,C,p,p.mode,R),c.ref=p.ref,c.return=p,p.child=c)}if(F=c.child,(c.lanes&R)===0){var ae=F.memoizedProps;if(x=x.compare,x=x!==null?x:ps,x(ae,C)&&c.ref===p.ref)return ao(c,p,R)}return p.flags|=1,c=eu(F,C),c.ref=p.ref,c.return=p,p.child=c}function my(c,p,x,C,R){if(c!==null){var F=c.memoizedProps;if(ps(F,C)&&c.ref===p.ref)if(ca=!1,p.pendingProps=C=F,(c.lanes&R)!==0)(c.flags&131072)!==0&&(ca=!0);else return p.lanes=c.lanes,ao(c,p,R)}return cm(c,p,x,C,R)}function gy(c,p,x){var C=p.pendingProps,R=C.children,F=c!==null?c.memoizedState:null;if(C.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},an(qc,Hi),Hi|=x;else{if((x&1073741824)===0)return c=F!==null?F.baseLanes|x:x,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:c,cachePool:null,transitions:null},p.updateQueue=null,an(qc,Hi),Hi|=c,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},C=F!==null?F.baseLanes:x,an(qc,Hi),Hi|=C}else F!==null?(C=F.baseLanes|x,p.memoizedState=null):C=x,an(qc,Hi),Hi|=C;return Vn(c,p,R,x),p.child}function yy(c,p){var x=p.ref;(c===null&&x!==null||c!==null&&c.ref!==x)&&(p.flags|=512,p.flags|=2097152)}function cm(c,p,x,C,R){var F=ni(x)?Pa:Gr.current;return F=$o(p,F),Fn(p,R),x=Vo(c,p,x,C,F,R),C=no(),c!==null&&!ca?(p.updateQueue=c.updateQueue,p.flags&=-2053,c.lanes&=~R,ao(c,p,R)):(ge&&C&&ne(p),p.flags|=1,Vn(c,p,x,R),p.child)}function vy(c,p,x,C,R){if(ni(x)){var F=!0;aa(p)}else F=!1;if(Fn(p,R),p.stateNode===null)Kh(c,p),lm(p,x,C),Nu(p,x,C,R),C=!0;else if(c===null){var ae=p.stateNode,be=p.memoizedProps;ae.props=be;var Ie=ae.context,Ye=x.contextType;typeof Ye=="object"&&Ye!==null?Ye=on(Ye):(Ye=ni(x)?Pa:Gr.current,Ye=$o(p,Ye));var ft=x.getDerivedStateFromProps,mt=typeof ft=="function"||typeof ae.getSnapshotBeforeUpdate=="function";mt||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(be!==C||Ie!==Ye)&&vd(p,ae,C,Ye),Qa=!1;var ct=p.memoizedState;ae.state=ct,eo(p,C,ae,R),Ie=p.memoizedState,be!==C||ct!==Ie||Sr.current||Qa?(typeof ft=="function"&&(md(p,x,ft,C),Ie=p.memoizedState),(be=Qa||yd(p,x,be,C,ct,Ie,Ye))?(mt||typeof ae.UNSAFE_componentWillMount!="function"&&typeof ae.componentWillMount!="function"||(typeof ae.componentWillMount=="function"&&ae.componentWillMount(),typeof ae.UNSAFE_componentWillMount=="function"&&ae.UNSAFE_componentWillMount()),typeof ae.componentDidMount=="function"&&(p.flags|=4194308)):(typeof ae.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=C,p.memoizedState=Ie),ae.props=C,ae.state=Ie,ae.context=Ye,C=be):(typeof ae.componentDidMount=="function"&&(p.flags|=4194308),C=!1)}else{ae=p.stateNode,sa(c,p),be=p.memoizedProps,Ye=p.type===p.elementType?be:xo(p.type,be),ae.props=Ye,mt=p.pendingProps,ct=ae.context,Ie=x.contextType,typeof Ie=="object"&&Ie!==null?Ie=on(Ie):(Ie=ni(x)?Pa:Gr.current,Ie=$o(p,Ie));var Et=x.getDerivedStateFromProps;(ft=typeof Et=="function"||typeof ae.getSnapshotBeforeUpdate=="function")||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(be!==mt||ct!==Ie)&&vd(p,ae,C,Ie),Qa=!1,ct=p.memoizedState,ae.state=ct,eo(p,C,ae,R);var Bt=p.memoizedState;be!==mt||ct!==Bt||Sr.current||Qa?(typeof Et=="function"&&(md(p,x,Et,C),Bt=p.memoizedState),(Ye=Qa||yd(p,x,Ye,C,ct,Bt,Ie)||!1)?(ft||typeof ae.UNSAFE_componentWillUpdate!="function"&&typeof ae.componentWillUpdate!="function"||(typeof ae.componentWillUpdate=="function"&&ae.componentWillUpdate(C,Bt,Ie),typeof ae.UNSAFE_componentWillUpdate=="function"&&ae.UNSAFE_componentWillUpdate(C,Bt,Ie)),typeof ae.componentDidUpdate=="function"&&(p.flags|=4),typeof ae.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof ae.componentDidUpdate!="function"||be===c.memoizedProps&&ct===c.memoizedState||(p.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||be===c.memoizedProps&&ct===c.memoizedState||(p.flags|=1024),p.memoizedProps=C,p.memoizedState=Bt),ae.props=C,ae.state=Bt,ae.context=Ie,C=Ye):(typeof ae.componentDidUpdate!="function"||be===c.memoizedProps&&ct===c.memoizedState||(p.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||be===c.memoizedProps&&ct===c.memoizedState||(p.flags|=1024),C=!1)}return hm(c,p,x,C,F,R)}function hm(c,p,x,C,R,F){yy(c,p);var ae=(p.flags&128)!==0;if(!C&&!ae)return R&&$l(p,x,!1),ao(c,p,F);C=p.stateNode,dy.current=p;var be=ae&&typeof x.getDerivedStateFromError!="function"?null:C.render();return p.flags|=1,c!==null&&ae?(p.child=Pt(p,c.child,null,F),p.child=Pt(p,null,be,F)):Vn(c,p,be,F),p.memoizedState=C.state,R&&$l(p,x,!0),p.child}function xd(c){var p=c.stateNode;p.pendingContext?Nl(c,p.pendingContext,p.pendingContext!==p.context):p.context&&Nl(c,p.context,!1),bs(c,p.containerInfo)}function _y(c,p,x,C,R){return _t(),At(R),p.flags|=256,Vn(c,p,x,C),p.child}var Zl={dehydrated:null,treeContext:null,retryLane:0};function fm(c){return{baseLanes:c,cachePool:null,transitions:null}}function Tn(c,p,x){var C=p.pendingProps,R=mn.current,F=!1,ae=(p.flags&128)!==0,be;if((be=ae)||(be=c!==null&&c.memoizedState===null?!1:(R&2)!==0),be?(F=!0,p.flags&=-129):(c===null||c.memoizedState!==null)&&(R|=1),an(mn,R&1),c===null)return Re(p),c=p.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((p.mode&1)===0?p.lanes=1:c.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(ae=C.children,c=C.fallback,F?(C=p.mode,F=p.child,ae={mode:"hidden",children:ae},(C&1)===0&&F!==null?(F.childLanes=0,F.pendingProps=ae):F=ru(ae,C,0,null),c=tu(c,C,x,null),F.return=p,c.return=p,F.sibling=c,p.child=F,p.child.memoizedState=fm(x),p.memoizedState=Zl,c):Vc(p,ae));if(R=c.memoizedState,R!==null&&(be=R.dehydrated,be!==null))return bd(c,p,ae,C,be,R,x);if(F){F=C.fallback,ae=p.mode,R=c.child,be=R.sibling;var Ie={mode:"hidden",children:C.children};return(ae&1)===0&&p.child!==R?(C=p.child,C.childLanes=0,C.pendingProps=Ie,p.deletions=null):(C=eu(R,Ie),C.subtreeFlags=R.subtreeFlags&14680064),be!==null?F=eu(be,F):(F=tu(F,ae,x,null),F.flags|=2),F.return=p,C.return=p,C.sibling=F,p.child=C,C=F,F=p.child,ae=c.child.memoizedState,ae=ae===null?fm(x):{baseLanes:ae.baseLanes|x,cachePool:null,transitions:ae.transitions},F.memoizedState=ae,F.childLanes=c.childLanes&~x,p.memoizedState=Zl,C}return F=c.child,c=F.sibling,C=eu(F,{mode:"visible",children:C.children}),(p.mode&1)===0&&(C.lanes=x),C.return=p,C.sibling=null,c!==null&&(x=p.deletions,x===null?(p.deletions=[c],p.flags|=16):x.push(c)),p.child=C,p.memoizedState=null,C}function Vc(c,p){return p=ru({mode:"visible",children:p},c.mode,0,null),p.return=c,c.child=p}function Hh(c,p,x,C){return C!==null&&At(C),Pt(p,c.child,null,x),c=Vc(p,p.pendingProps.children),c.flags|=2,p.memoizedState=null,c}function bd(c,p,x,C,R,F,ae){if(x)return p.flags&256?(p.flags&=-257,C=_d(Error(r(422))),Hh(c,p,ae,C)):p.memoizedState!==null?(p.child=c.child,p.flags|=128,null):(F=C.fallback,R=p.mode,C=ru({mode:"visible",children:C.children},R,0,null),F=tu(F,R,ae,null),F.flags|=2,C.return=p,F.return=p,C.sibling=F,p.child=C,(p.mode&1)!==0&&Pt(p,c.child,null,ae),p.child.memoizedState=fm(ae),p.memoizedState=Zl,F);if((p.mode&1)===0)return Hh(c,p,ae,null);if(R.data==="$!"){if(C=R.nextSibling&&R.nextSibling.dataset,C)var be=C.dgst;return C=be,F=Error(r(419)),C=_d(F,C,void 0),Hh(c,p,ae,C)}if(be=(ae&c.childLanes)!==0,ca||be){if(C=oi,C!==null){switch(ae&-ae){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}R=(R&(C.suspendedLanes|ae))!==0?0:R,R!==0&&R!==F.retryLane&&(F.retryLane=R,Ui(c,R),Wo(C,c,R,-1))}return Dd(),C=_d(Error(r(421))),Hh(c,p,ae,C)}return R.data==="$?"?(p.flags|=128,p.child=c.child,p=zy.bind(null,c),R._reactRetry=p,null):(c=F.treeContext,de=Ka(R.nextSibling),he=p,ge=!0,_e=null,c!==null&&(b[k++]=z,b[k++]=$,b[k++]=D,z=c.id,$=c.overflow,D=p),p=Vc(p,C.children),p.flags|=4096,p)}function Zh(c,p,x){c.lanes|=p;var C=c.alternate;C!==null&&(C.lanes|=p),Zr(c.return,p,x)}function Fu(c,p,x,C,R){var F=c.memoizedState;F===null?c.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:C,tail:x,tailMode:R}:(F.isBackwards=p,F.rendering=null,F.renderingStartTime=0,F.last=C,F.tail=x,F.tailMode=R)}function dm(c,p,x){var C=p.pendingProps,R=C.revealOrder,F=C.tail;if(Vn(c,p,C.children,x),C=mn.current,(C&2)!==0)C=C&1|2,p.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=p.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Zh(c,x,p);else if(c.tag===19)Zh(c,x,p);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===p)break e;for(;c.sibling===null;){if(c.return===null||c.return===p)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}C&=1}if(an(mn,C),(p.mode&1)===0)p.memoizedState=null;else switch(R){case"forwards":for(x=p.child,R=null;x!==null;)c=x.alternate,c!==null&&ro(c)===null&&(R=x),x=x.sibling;x=R,x===null?(R=p.child,p.child=null):(R=x.sibling,x.sibling=null),Fu(p,!1,R,x,F);break;case"backwards":for(x=null,R=p.child,p.child=null;R!==null;){if(c=R.alternate,c!==null&&ro(c)===null){p.child=R;break}c=R.sibling,R.sibling=x,x=R,R=c}Fu(p,!0,x,null,F);break;case"together":Fu(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Kh(c,p){(p.mode&1)===0&&c!==null&&(c.alternate=null,p.alternate=null,p.flags|=2)}function ao(c,p,x){if(c!==null&&(p.dependencies=c.dependencies),Vu|=p.lanes,(x&p.childLanes)===0)return null;if(c!==null&&p.child!==c.child)throw Error(r(153));if(p.child!==null){for(c=p.child,x=eu(c,c.pendingProps),p.child=x,x.return=p;c.sibling!==null;)c=c.sibling,x=x.sibling=eu(c,c.pendingProps),x.return=p;x.sibling=null}return p.child}function pm(c,p,x){switch(p.tag){case 3:xd(p),_t();break;case 5:Lh(p);break;case 1:ni(p.type)&&aa(p);break;case 4:bs(p,p.stateNode.containerInfo);break;case 10:var C=p.type._context,R=p.memoizedProps.value;an(qr,C._currentValue),C._currentValue=R;break;case 13:if(C=p.memoizedState,C!==null)return C.dehydrated!==null?(an(mn,mn.current&1),p.flags|=128,null):(x&p.child.childLanes)!==0?Tn(c,p,x):(an(mn,mn.current&1),c=ao(c,p,x),c!==null?c.sibling:null);an(mn,mn.current&1);break;case 19:if(C=(x&p.childLanes)!==0,(c.flags&128)!==0){if(C)return dm(c,p,x);p.flags|=128}if(R=p.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),an(mn,mn.current),C)break;return null;case 22:case 23:return p.lanes=0,gy(c,p,x)}return ao(c,p,x)}var wd,Xh,Sd,mm;wd=function(c,p){for(var x=p.child;x!==null;){if(x.tag===5||x.tag===6)c.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===p)break;for(;x.sibling===null;){if(x.return===null||x.return===p)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},Xh=function(){},Sd=function(c,p,x,C){var R=c.memoizedProps;if(R!==C){c=p.stateNode,ua(cn.current);var F=null;switch(x){case"input":R=mr(c,R),C=mr(c,C),F=[];break;case"select":R=nt({},R,{value:void 0}),C=nt({},C,{value:void 0}),F=[];break;case"textarea":R=Hn(c,R),C=Hn(c,C),F=[];break;default:typeof R.onClick!="function"&&typeof C.onClick=="function"&&(c.onclick=Vi)}hi(x,C);var ae;x=null;for(Ye in R)if(!C.hasOwnProperty(Ye)&&R.hasOwnProperty(Ye)&&R[Ye]!=null)if(Ye==="style"){var be=R[Ye];for(ae in be)be.hasOwnProperty(ae)&&(x||(x={}),x[ae]="")}else Ye!=="dangerouslySetInnerHTML"&&Ye!=="children"&&Ye!=="suppressContentEditableWarning"&&Ye!=="suppressHydrationWarning"&&Ye!=="autoFocus"&&(s.hasOwnProperty(Ye)?F||(F=[]):(F=F||[]).push(Ye,null));for(Ye in C){var Ie=C[Ye];if(be=R!=null?R[Ye]:void 0,C.hasOwnProperty(Ye)&&Ie!==be&&(Ie!=null||be!=null))if(Ye==="style")if(be){for(ae in be)!be.hasOwnProperty(ae)||Ie&&Ie.hasOwnProperty(ae)||(x||(x={}),x[ae]="");for(ae in Ie)Ie.hasOwnProperty(ae)&&be[ae]!==Ie[ae]&&(x||(x={}),x[ae]=Ie[ae])}else x||(F||(F=[]),F.push(Ye,x)),x=Ie;else Ye==="dangerouslySetInnerHTML"?(Ie=Ie?Ie.__html:void 0,be=be?be.__html:void 0,Ie!=null&&be!==Ie&&(F=F||[]).push(Ye,Ie)):Ye==="children"?typeof Ie!="string"&&typeof Ie!="number"||(F=F||[]).push(Ye,""+Ie):Ye!=="suppressContentEditableWarning"&&Ye!=="suppressHydrationWarning"&&(s.hasOwnProperty(Ye)?(Ie!=null&&Ye==="onScroll"&&Qr("scroll",c),F||be===Ie||(F=[])):(F=F||[]).push(Ye,Ie))}x&&(F=F||[]).push("style",x);var Ye=F;(p.updateQueue=Ye)&&(p.flags|=4)}},mm=function(c,p,x,C){x!==C&&(p.flags|=4)};function Uc(c,p){if(!ge)switch(c.tailMode){case"hidden":p=c.tail;for(var x=null;p!==null;)p.alternate!==null&&(x=p),p=p.sibling;x===null?c.tail=null:x.sibling=null;break;case"collapsed":x=c.tail;for(var C=null;x!==null;)x.alternate!==null&&(C=x),x=x.sibling;C===null?p||c.tail===null?c.tail=null:c.tail.sibling=null:C.sibling=null}}function Wi(c){var p=c.alternate!==null&&c.alternate.child===c.child,x=0,C=0;if(p)for(var R=c.child;R!==null;)x|=R.lanes|R.childLanes,C|=R.subtreeFlags&14680064,C|=R.flags&14680064,R.return=c,R=R.sibling;else for(R=c.child;R!==null;)x|=R.lanes|R.childLanes,C|=R.subtreeFlags,C|=R.flags,R.return=c,R=R.sibling;return c.subtreeFlags|=C,c.childLanes=x,p}function b0(c,p,x){var C=p.pendingProps;switch(le(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wi(p),null;case 1:return ni(p.type)&&zu(),Wi(p),null;case 3:return C=p.stateNode,to(),en(Sr),en(Gr),Ul(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(c===null||c.child===null)&&(at(p)?p.flags|=4:c===null||c.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,_e!==null&&(_m(_e),_e=null))),Xh(c,p),Wi(p),null;case 5:Bh(p);var R=ua(xr.current);if(x=p.type,c!==null&&p.stateNode!=null)Sd(c,p,x,C,R),c.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!C){if(p.stateNode===null)throw Error(r(166));return Wi(p),null}if(c=ua(cn.current),at(p)){C=p.stateNode,x=p.type;var F=p.memoizedProps;switch(C[Ti]=p,C[yo]=F,c=(p.mode&1)!==0,x){case"dialog":Qr("cancel",C),Qr("close",C);break;case"iframe":case"object":case"embed":Qr("load",C);break;case"video":case"audio":for(R=0;R<ys.length;R++)Qr(ys[R],C);break;case"source":Qr("error",C);break;case"img":case"image":case"link":Qr("error",C),Qr("load",C);break;case"details":Qr("toggle",C);break;case"input":Yr(C,F),Qr("invalid",C);break;case"select":C._wrapperState={wasMultiple:!!F.multiple},Qr("invalid",C);break;case"textarea":Ri(C,F),Qr("invalid",C)}hi(x,F),R=null;for(var ae in F)if(F.hasOwnProperty(ae)){var be=F[ae];ae==="children"?typeof be=="string"?C.textContent!==be&&(F.suppressHydrationWarning!==!0&&Ll(C.textContent,be,c),R=["children",be]):typeof be=="number"&&C.textContent!==""+be&&(F.suppressHydrationWarning!==!0&&Ll(C.textContent,be,c),R=["children",""+be]):s.hasOwnProperty(ae)&&be!=null&&ae==="onScroll"&&Qr("scroll",C)}switch(x){case"input":sr(C),xi(C,F,!0);break;case"textarea":sr(C),ci(C);break;case"select":case"option":break;default:typeof F.onClick=="function"&&(C.onclick=Vi)}C=R,p.updateQueue=C,C!==null&&(p.flags|=4)}else{ae=R.nodeType===9?R:R.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=xl(x)),c==="http://www.w3.org/1999/xhtml"?x==="script"?(c=ae.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof C.is=="string"?c=ae.createElement(x,{is:C.is}):(c=ae.createElement(x),x==="select"&&(ae=c,C.multiple?ae.multiple=!0:C.size&&(ae.size=C.size))):c=ae.createElementNS(c,x),c[Ti]=p,c[yo]=C,wd(c,p,!1,!1),p.stateNode=c;e:{switch(ae=ea(x,C),x){case"dialog":Qr("cancel",c),Qr("close",c),R=C;break;case"iframe":case"object":case"embed":Qr("load",c),R=C;break;case"video":case"audio":for(R=0;R<ys.length;R++)Qr(ys[R],c);R=C;break;case"source":Qr("error",c),R=C;break;case"img":case"image":case"link":Qr("error",c),Qr("load",c),R=C;break;case"details":Qr("toggle",c),R=C;break;case"input":Yr(c,C),R=mr(c,C),Qr("invalid",c);break;case"option":R=C;break;case"select":c._wrapperState={wasMultiple:!!C.multiple},R=nt({},C,{value:void 0}),Qr("invalid",c);break;case"textarea":Ri(c,C),R=Hn(c,C),Qr("invalid",c);break;default:R=C}hi(x,R),be=R;for(F in be)if(be.hasOwnProperty(F)){var Ie=be[F];F==="style"?gr(c,Ie):F==="dangerouslySetInnerHTML"?(Ie=Ie?Ie.__html:void 0,Ie!=null&&Va(c,Ie)):F==="children"?typeof Ie=="string"?(x!=="textarea"||Ie!=="")&&Bn(c,Ie):typeof Ie=="number"&&Bn(c,""+Ie):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(s.hasOwnProperty(F)?Ie!=null&&F==="onScroll"&&Qr("scroll",c):Ie!=null&&Q(c,F,Ie,ae))}switch(x){case"input":sr(c),xi(c,C,!1);break;case"textarea":sr(c),ci(c);break;case"option":C.value!=null&&c.setAttribute("value",""+Jt(C.value));break;case"select":c.multiple=!!C.multiple,F=C.value,F!=null?Gn(c,!!C.multiple,F,!1):C.defaultValue!=null&&Gn(c,!!C.multiple,C.defaultValue,!0);break;default:typeof R.onClick=="function"&&(c.onclick=Vi)}switch(x){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}}C&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Wi(p),null;case 6:if(c&&p.stateNode!=null)mm(c,p,c.memoizedProps,C);else{if(typeof C!="string"&&p.stateNode===null)throw Error(r(166));if(x=ua(xr.current),ua(cn.current),at(p)){if(C=p.stateNode,x=p.memoizedProps,C[Ti]=p,(F=C.nodeValue!==x)&&(c=he,c!==null))switch(c.tag){case 3:Ll(C.nodeValue,x,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Ll(C.nodeValue,x,(c.mode&1)!==0)}F&&(p.flags|=4)}else C=(x.nodeType===9?x:x.ownerDocument).createTextNode(C),C[Ti]=p,p.stateNode=C}return Wi(p),null;case 13:if(en(mn),C=p.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(ge&&de!==null&&(p.mode&1)!==0&&(p.flags&128)===0)dt(),_t(),p.flags|=98560,F=!1;else if(F=at(p),C!==null&&C.dehydrated!==null){if(c===null){if(!F)throw Error(r(318));if(F=p.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(r(317));F[Ti]=p}else _t(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Wi(p),F=!1}else _e!==null&&(_m(_e),_e=null),F=!0;if(!F)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=x,p):(C=C!==null,C!==(c!==null&&c.memoizedState!==null)&&C&&(p.child.flags|=8192,(p.mode&1)!==0&&(c===null||(mn.current&1)!==0?Jn===0&&(Jn=3):Dd())),p.updateQueue!==null&&(p.flags|=4),Wi(p),null);case 4:return to(),Xh(c,p),c===null&&Lo(p.stateNode.containerInfo),Wi(p),null;case 10:return oa(p.type._context),Wi(p),null;case 17:return ni(p.type)&&zu(),Wi(p),null;case 19:if(en(mn),F=p.memoizedState,F===null)return Wi(p),null;if(C=(p.flags&128)!==0,ae=F.rendering,ae===null)if(C)Uc(F,!1);else{if(Jn!==0||c!==null&&(c.flags&128)!==0)for(c=p.child;c!==null;){if(ae=ro(c),ae!==null){for(p.flags|=128,Uc(F,!1),C=ae.updateQueue,C!==null&&(p.updateQueue=C,p.flags|=4),p.subtreeFlags=0,C=x,x=p.child;x!==null;)F=x,c=C,F.flags&=14680066,ae=F.alternate,ae===null?(F.childLanes=0,F.lanes=c,F.child=null,F.subtreeFlags=0,F.memoizedProps=null,F.memoizedState=null,F.updateQueue=null,F.dependencies=null,F.stateNode=null):(F.childLanes=ae.childLanes,F.lanes=ae.lanes,F.child=ae.child,F.subtreeFlags=0,F.deletions=null,F.memoizedProps=ae.memoizedProps,F.memoizedState=ae.memoizedState,F.updateQueue=ae.updateQueue,F.type=ae.type,c=ae.dependencies,F.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),x=x.sibling;return an(mn,mn.current&1|2),p.child}c=c.sibling}F.tail!==null&&ar()>gn&&(p.flags|=128,C=!0,Uc(F,!1),p.lanes=4194304)}else{if(!C)if(c=ro(ae),c!==null){if(p.flags|=128,C=!0,x=c.updateQueue,x!==null&&(p.updateQueue=x,p.flags|=4),Uc(F,!0),F.tail===null&&F.tailMode==="hidden"&&!ae.alternate&&!ge)return Wi(p),null}else 2*ar()-F.renderingStartTime>gn&&x!==1073741824&&(p.flags|=128,C=!0,Uc(F,!1),p.lanes=4194304);F.isBackwards?(ae.sibling=p.child,p.child=ae):(x=F.last,x!==null?x.sibling=ae:p.child=ae,F.last=ae)}return F.tail!==null?(p=F.tail,F.rendering=p,F.tail=p.sibling,F.renderingStartTime=ar(),p.sibling=null,x=mn.current,an(mn,C?x&1|2:x&1),p):(Wi(p),null);case 22:case 23:return of(),C=p.memoizedState!==null,c!==null&&c.memoizedState!==null!==C&&(p.flags|=8192),C&&(p.mode&1)!==0?(Hi&1073741824)!==0&&(Wi(p),p.subtreeFlags&6&&(p.flags|=8192)):Wi(p),null;case 24:return null;case 25:return null}throw Error(r(156,p.tag))}function w0(c,p){switch(le(p),p.tag){case 1:return ni(p.type)&&zu(),c=p.flags,c&65536?(p.flags=c&-65537|128,p):null;case 3:return to(),en(Sr),en(Gr),Ul(),c=p.flags,(c&65536)!==0&&(c&128)===0?(p.flags=c&-65537|128,p):null;case 5:return Bh(p),null;case 13:if(en(mn),c=p.memoizedState,c!==null&&c.dehydrated!==null){if(p.alternate===null)throw Error(r(340));_t()}return c=p.flags,c&65536?(p.flags=c&-65537|128,p):null;case 19:return en(mn),null;case 4:return to(),null;case 10:return oa(p.type._context),null;case 22:case 23:return of(),null;case 24:return null;default:return null}}var Pd=!1,Gi=!1,Kl=typeof WeakSet=="function"?WeakSet:Set,$t=null;function $u(c,p){var x=c.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(C){bn(c,p,C)}else x.current=null}function Xl(c,p,x){try{x()}catch(C){bn(c,p,C)}}var xy=!1;function S0(c,p){if(No=Ws,c=Cc(),ms(c)){if("selectionStart"in c)var x={start:c.selectionStart,end:c.selectionEnd};else e:{x=(x=c.ownerDocument)&&x.defaultView||window;var C=x.getSelection&&x.getSelection();if(C&&C.rangeCount!==0){x=C.anchorNode;var R=C.anchorOffset,F=C.focusNode;C=C.focusOffset;try{x.nodeType,F.nodeType}catch{x=null;break e}var ae=0,be=-1,Ie=-1,Ye=0,ft=0,mt=c,ct=null;t:for(;;){for(var Et;mt!==x||R!==0&&mt.nodeType!==3||(be=ae+R),mt!==F||C!==0&&mt.nodeType!==3||(Ie=ae+C),mt.nodeType===3&&(ae+=mt.nodeValue.length),(Et=mt.firstChild)!==null;)ct=mt,mt=Et;for(;;){if(mt===c)break t;if(ct===x&&++Ye===R&&(be=ae),ct===F&&++ft===C&&(Ie=ae),(Et=mt.nextSibling)!==null)break;mt=ct,ct=mt.parentNode}mt=Et}x=be===-1||Ie===-1?null:{start:be,end:Ie}}else x=null}x=x||{start:0,end:0}}else x=null;for(Dh={focusedElem:c,selectionRange:x},Ws=!1,$t=p;$t!==null;)if(p=$t,c=p.child,(p.subtreeFlags&1028)!==0&&c!==null)c.return=p,$t=c;else for(;$t!==null;){p=$t;try{var Bt=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(Bt!==null){var Ht=Bt.memoizedProps,zn=Bt.memoizedState,Ge=p.stateNode,De=Ge.getSnapshotBeforeUpdate(p.elementType===p.type?Ht:xo(p.type,Ht),zn);Ge.__reactInternalSnapshotBeforeUpdate=De}break;case 3:var Ze=p.stateNode.containerInfo;Ze.nodeType===1?Ze.textContent="":Ze.nodeType===9&&Ze.documentElement&&Ze.removeChild(Ze.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(St){bn(p,p.return,St)}if(c=p.sibling,c!==null){c.return=p.return,$t=c;break}$t=p.return}return Bt=xy,xy=!1,Bt}function Yh(c,p,x){var C=p.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var R=C=C.next;do{if((R.tag&c)===c){var F=R.destroy;R.destroy=void 0,F!==void 0&&Xl(p,x,F)}R=R.next}while(R!==C)}}function Jh(c,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var x=p=p.next;do{if((x.tag&c)===c){var C=x.create;x.destroy=C()}x=x.next}while(x!==p)}}function Td(c){var p=c.ref;if(p!==null){var x=c.stateNode;switch(c.tag){case 5:c=x;break;default:c=x}typeof p=="function"?p(c):p.current=c}}function by(c){var p=c.alternate;p!==null&&(c.alternate=null,by(p)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(p=c.stateNode,p!==null&&(delete p[Ti],delete p[yo],delete p[wr],delete p[zh],delete p[Jp])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function wy(c){return c.tag===5||c.tag===3||c.tag===4}function Sy(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||wy(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function gm(c,p,x){var C=c.tag;if(C===5||C===6)c=c.stateNode,p?x.nodeType===8?x.parentNode.insertBefore(c,p):x.insertBefore(c,p):(x.nodeType===8?(p=x.parentNode,p.insertBefore(c,x)):(p=x,p.appendChild(c)),x=x._reactRootContainer,x!=null||p.onclick!==null||(p.onclick=Vi));else if(C!==4&&(c=c.child,c!==null))for(gm(c,p,x),c=c.sibling;c!==null;)gm(c,p,x),c=c.sibling}function Qh(c,p,x){var C=c.tag;if(C===5||C===6)c=c.stateNode,p?x.insertBefore(c,p):x.appendChild(c);else if(C!==4&&(c=c.child,c!==null))for(Qh(c,p,x),c=c.sibling;c!==null;)Qh(c,p,x),c=c.sibling}var Un=null,oo=!1;function Yl(c,p,x){for(x=x.child;x!==null;)Py(c,p,x),x=x.sibling}function Py(c,p,x){if(Si&&typeof Si.onCommitFiberUnmount=="function")try{Si.onCommitFiberUnmount(di,x)}catch{}switch(x.tag){case 5:Gi||$u(x,p);case 6:var C=Un,R=oo;Un=null,Yl(c,p,x),Un=C,oo=R,Un!==null&&(oo?(c=Un,x=x.stateNode,c.nodeType===8?c.parentNode.removeChild(x):c.removeChild(x)):Un.removeChild(x.stateNode));break;case 18:Un!==null&&(oo?(c=Un,x=x.stateNode,c.nodeType===8?It(c.parentNode,x):c.nodeType===1&&It(c,x),Mo(c)):It(Un,x.stateNode));break;case 4:C=Un,R=oo,Un=x.stateNode.containerInfo,oo=!0,Yl(c,p,x),Un=C,oo=R;break;case 0:case 11:case 14:case 15:if(!Gi&&(C=x.updateQueue,C!==null&&(C=C.lastEffect,C!==null))){R=C=C.next;do{var F=R,ae=F.destroy;F=F.tag,ae!==void 0&&((F&2)!==0||(F&4)!==0)&&Xl(x,p,ae),R=R.next}while(R!==C)}Yl(c,p,x);break;case 1:if(!Gi&&($u(x,p),C=x.stateNode,typeof C.componentWillUnmount=="function"))try{C.props=x.memoizedProps,C.state=x.memoizedState,C.componentWillUnmount()}catch(be){bn(x,p,be)}Yl(c,p,x);break;case 21:Yl(c,p,x);break;case 22:x.mode&1?(Gi=(C=Gi)||x.memoizedState!==null,Yl(c,p,x),Gi=C):Yl(c,p,x);break;default:Yl(c,p,x)}}function ym(c){var p=c.updateQueue;if(p!==null){c.updateQueue=null;var x=c.stateNode;x===null&&(x=c.stateNode=new Kl),p.forEach(function(C){var R=jy.bind(null,c,C);x.has(C)||(x.add(C),C.then(R,R))})}}function qo(c,p){var x=p.deletions;if(x!==null)for(var C=0;C<x.length;C++){var R=x[C];try{var F=c,ae=p,be=ae;e:for(;be!==null;){switch(be.tag){case 5:Un=be.stateNode,oo=!1;break e;case 3:Un=be.stateNode.containerInfo,oo=!0;break e;case 4:Un=be.stateNode.containerInfo,oo=!0;break e}be=be.return}if(Un===null)throw Error(r(160));Py(F,ae,R),Un=null,oo=!1;var Ie=R.alternate;Ie!==null&&(Ie.return=null),R.return=null}catch(Ye){bn(R,p,Ye)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)Ty(p,c),p=p.sibling}function Ty(c,p){var x=c.alternate,C=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(qo(p,c),Ea(c),C&4){try{Yh(3,c,c.return),Jh(3,c)}catch(Ht){bn(c,c.return,Ht)}try{Yh(5,c,c.return)}catch(Ht){bn(c,c.return,Ht)}}break;case 1:qo(p,c),Ea(c),C&512&&x!==null&&$u(x,x.return);break;case 5:if(qo(p,c),Ea(c),C&512&&x!==null&&$u(x,x.return),c.flags&32){var R=c.stateNode;try{Bn(R,"")}catch(Ht){bn(c,c.return,Ht)}}if(C&4&&(R=c.stateNode,R!=null)){var F=c.memoizedProps,ae=x!==null?x.memoizedProps:F,be=c.type,Ie=c.updateQueue;if(c.updateQueue=null,Ie!==null)try{be==="input"&&F.type==="radio"&&F.name!=null&&qe(R,F),ea(be,ae);var Ye=ea(be,F);for(ae=0;ae<Ie.length;ae+=2){var ft=Ie[ae],mt=Ie[ae+1];ft==="style"?gr(R,mt):ft==="dangerouslySetInnerHTML"?Va(R,mt):ft==="children"?Bn(R,mt):Q(R,ft,mt,Ye)}switch(be){case"input":dn(R,F);break;case"textarea":co(R,F);break;case"select":var ct=R._wrapperState.wasMultiple;R._wrapperState.wasMultiple=!!F.multiple;var Et=F.value;Et!=null?Gn(R,!!F.multiple,Et,!1):ct!==!!F.multiple&&(F.defaultValue!=null?Gn(R,!!F.multiple,F.defaultValue,!0):Gn(R,!!F.multiple,F.multiple?[]:"",!1))}R[yo]=F}catch(Ht){bn(c,c.return,Ht)}}break;case 6:if(qo(p,c),Ea(c),C&4){if(c.stateNode===null)throw Error(r(162));R=c.stateNode,F=c.memoizedProps;try{R.nodeValue=F}catch(Ht){bn(c,c.return,Ht)}}break;case 3:if(qo(p,c),Ea(c),C&4&&x!==null&&x.memoizedState.isDehydrated)try{Mo(p.containerInfo)}catch(Ht){bn(c,c.return,Ht)}break;case 4:qo(p,c),Ea(c);break;case 13:qo(p,c),Ea(c),R=c.child,R.flags&8192&&(F=R.memoizedState!==null,R.stateNode.isHidden=F,!F||R.alternate!==null&&R.alternate.memoizedState!==null||(Uu=ar())),C&4&&ym(c);break;case 22:if(ft=x!==null&&x.memoizedState!==null,c.mode&1?(Gi=(Ye=Gi)||ft,qo(p,c),Gi=Ye):qo(p,c),Ea(c),C&8192){if(Ye=c.memoizedState!==null,(c.stateNode.isHidden=Ye)&&!ft&&(c.mode&1)!==0)for($t=c,ft=c.child;ft!==null;){for(mt=$t=ft;$t!==null;){switch(ct=$t,Et=ct.child,ct.tag){case 0:case 11:case 14:case 15:Yh(4,ct,ct.return);break;case 1:$u(ct,ct.return);var Bt=ct.stateNode;if(typeof Bt.componentWillUnmount=="function"){C=ct,x=ct.return;try{p=C,Bt.props=p.memoizedProps,Bt.state=p.memoizedState,Bt.componentWillUnmount()}catch(Ht){bn(C,x,Ht)}}break;case 5:$u(ct,ct.return);break;case 22:if(ct.memoizedState!==null){My(mt);continue}}Et!==null?(Et.return=ct,$t=Et):My(mt)}ft=ft.sibling}e:for(ft=null,mt=c;;){if(mt.tag===5){if(ft===null){ft=mt;try{R=mt.stateNode,Ye?(F=R.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none"):(be=mt.stateNode,Ie=mt.memoizedProps.style,ae=Ie!=null&&Ie.hasOwnProperty("display")?Ie.display:null,be.style.display=bt("display",ae))}catch(Ht){bn(c,c.return,Ht)}}}else if(mt.tag===6){if(ft===null)try{mt.stateNode.nodeValue=Ye?"":mt.memoizedProps}catch(Ht){bn(c,c.return,Ht)}}else if((mt.tag!==22&&mt.tag!==23||mt.memoizedState===null||mt===c)&&mt.child!==null){mt.child.return=mt,mt=mt.child;continue}if(mt===c)break e;for(;mt.sibling===null;){if(mt.return===null||mt.return===c)break e;ft===mt&&(ft=null),mt=mt.return}ft===mt&&(ft=null),mt.sibling.return=mt.return,mt=mt.sibling}}break;case 19:qo(p,c),Ea(c),C&4&&ym(c);break;case 21:break;default:qo(p,c),Ea(c)}}function Ea(c){var p=c.flags;if(p&2){try{e:{for(var x=c.return;x!==null;){if(wy(x)){var C=x;break e}x=x.return}throw Error(r(160))}switch(C.tag){case 5:var R=C.stateNode;C.flags&32&&(Bn(R,""),C.flags&=-33);var F=Sy(c);Qh(c,F,R);break;case 3:case 4:var ae=C.stateNode.containerInfo,be=Sy(c);gm(c,be,ae);break;default:throw Error(r(161))}}catch(Ie){bn(c,c.return,Ie)}c.flags&=-3}p&4096&&(c.flags&=-4097)}function Ay(c,p,x){$t=c,Ey(c)}function Ey(c,p,x){for(var C=(c.mode&1)!==0;$t!==null;){var R=$t,F=R.child;if(R.tag===22&&C){var ae=R.memoizedState!==null||Pd;if(!ae){var be=R.alternate,Ie=be!==null&&be.memoizedState!==null||Gi;be=Pd;var Ye=Gi;if(Pd=ae,(Gi=Ie)&&!Ye)for($t=R;$t!==null;)ae=$t,Ie=ae.child,ae.tag===22&&ae.memoizedState!==null?Iy(R):Ie!==null?(Ie.return=ae,$t=Ie):Iy(R);for(;F!==null;)$t=F,Ey(F),F=F.sibling;$t=R,Pd=be,Gi=Ye}Cy(c)}else(R.subtreeFlags&8772)!==0&&F!==null?(F.return=R,$t=F):Cy(c)}}function Cy(c){for(;$t!==null;){var p=$t;if((p.flags&8772)!==0){var x=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:Gi||Jh(5,p);break;case 1:var C=p.stateNode;if(p.flags&4&&!Gi)if(x===null)C.componentDidMount();else{var R=p.elementType===p.type?x.memoizedProps:xo(p.type,x.memoizedProps);C.componentDidUpdate(R,x.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var F=p.updateQueue;F!==null&&Aa(p,F,C);break;case 3:var ae=p.updateQueue;if(ae!==null){if(x=null,p.child!==null)switch(p.child.tag){case 5:x=p.child.stateNode;break;case 1:x=p.child.stateNode}Aa(p,ae,x)}break;case 5:var be=p.stateNode;if(x===null&&p.flags&4){x=be;var Ie=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":Ie.autoFocus&&x.focus();break;case"img":Ie.src&&(x.src=Ie.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var Ye=p.alternate;if(Ye!==null){var ft=Ye.memoizedState;if(ft!==null){var mt=ft.dehydrated;mt!==null&&Mo(mt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Gi||p.flags&512&&Td(p)}catch(ct){bn(p,p.return,ct)}}if(p===c){$t=null;break}if(x=p.sibling,x!==null){x.return=p.return,$t=x;break}$t=p.return}}function My(c){for(;$t!==null;){var p=$t;if(p===c){$t=null;break}var x=p.sibling;if(x!==null){x.return=p.return,$t=x;break}$t=p.return}}function Iy(c){for(;$t!==null;){var p=$t;try{switch(p.tag){case 0:case 11:case 15:var x=p.return;try{Jh(4,p)}catch(Ie){bn(p,x,Ie)}break;case 1:var C=p.stateNode;if(typeof C.componentDidMount=="function"){var R=p.return;try{C.componentDidMount()}catch(Ie){bn(p,R,Ie)}}var F=p.return;try{Td(p)}catch(Ie){bn(p,F,Ie)}break;case 5:var ae=p.return;try{Td(p)}catch(Ie){bn(p,ae,Ie)}}}catch(Ie){bn(p,p.return,Ie)}if(p===c){$t=null;break}var be=p.sibling;if(be!==null){be.return=p.return,$t=be;break}$t=p.return}}var P0=Math.ceil,Ad=ie.ReactCurrentDispatcher,Ed=ie.ReactCurrentOwner,Ca=ie.ReactCurrentBatchConfig,zr=0,oi=null,qn=null,Ci=0,Hi=0,qc=vs(0),Jn=0,ef=null,Vu=0,Cd=0,Md=0,tf=null,Ma=null,Uu=0,gn=1/0,Ss=null,rf=!1,Id=null,Tr=null,Wc=!1,il=null,nf=0,so=0,Jl=null,af=-1,kd=0;function ha(){return(zr&6)!==0?ar():af!==-1?af:af=ar()}function Ql(c){return(c.mode&1)===0?1:(zr&2)!==0&&Ci!==0?Ci&-Ci:xt.transition!==null?(kd===0&&(kd=Co()),kd):(c=Br,c!==0||(c=window.event,c=c===void 0?16:cs(c.type)),c)}function Wo(c,p,x,C){if(50<so)throw so=0,Jl=null,Error(r(185));Us(c,x,C),((zr&2)===0||c!==oi)&&(c===oi&&((zr&2)===0&&(Cd|=x),Jn===4&&Go(c,Ci)),Ia(c,C),x===1&&zr===0&&(p.mode&1)===0&&(gn=ar()+500,Zt&&w()))}function Ia(c,p){var x=c.callbackNode;dc(c,p);var C=Bi(c,c===oi?Ci:0);if(C===0)x!==null&&Zn(x),c.callbackNode=null,c.callbackPriority=0;else if(p=C&-C,c.callbackPriority!==p){if(x!=null&&Zn(x),p===1)c.tag===0?jh(qu.bind(null,c)):ju(qu.bind(null,c)),Bl(function(){(zr&6)===0&&w()}),x=null;else{switch(gu(C)){case 1:x=pu;break;case 4:x=ji;break;case 16:x=fi;break;case 536870912:x=ra;break;default:x=fi}x=wm(x,ky.bind(null,c))}c.callbackPriority=p,c.callbackNode=x}}function ky(c,p){if(af=-1,kd=0,(zr&6)!==0)throw Error(r(327));var x=c.callbackNode;if(Zo()&&c.callbackNode!==x)return null;var C=Bi(c,c===oi?Ci:0);if(C===0)return null;if((C&30)!==0||(C&c.expiredLanes)!==0||p)p=sf(c,C);else{p=C;var R=zr;zr|=2;var F=Dy();(oi!==c||Ci!==p)&&(Ss=null,gn=ar()+500,Wu(c,p));do try{xm();break}catch(be){Oy(c,be)}while(!0);Xn(),Ad.current=F,zr=R,qn!==null?p=0:(oi=null,Ci=0,p=Jn)}if(p!==0){if(p===2&&(R=Eo(c),R!==0&&(C=R,p=vm(c,R))),p===1)throw x=ef,Wu(c,0),Go(c,C),Ia(c,ar()),x;if(p===6)Go(c,C);else{if(R=c.current.alternate,(C&30)===0&&!T0(R)&&(p=sf(c,C),p===2&&(F=Eo(c),F!==0&&(C=F,p=vm(c,F))),p===1))throw x=ef,Wu(c,0),Go(c,C),Ia(c,ar()),x;switch(c.finishedWork=R,c.finishedLanes=C,p){case 0:case 1:throw Error(r(345));case 2:Ho(c,Ma,Ss);break;case 3:if(Go(c,C),(C&130023424)===C&&(p=Uu+500-ar(),10<p)){if(Bi(c,0)!==0)break;if(R=c.suspendedLanes,(R&C)!==C){ha(),c.pingedLanes|=c.suspendedLanes&R;break}c.timeoutHandle=Dc(Ho.bind(null,c,Ma,Ss),p);break}Ho(c,Ma,Ss);break;case 4:if(Go(c,C),(C&4194240)===C)break;for(p=c.eventTimes,R=-1;0<C;){var ae=31-Vr(C);F=1<<ae,ae=p[ae],ae>R&&(R=ae),C&=~F}if(C=R,C=ar()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*P0(C/1960))-C,10<C){c.timeoutHandle=Dc(Ho.bind(null,c,Ma,Ss),C);break}Ho(c,Ma,Ss);break;case 5:Ho(c,Ma,Ss);break;default:throw Error(r(329))}}}return Ia(c,ar()),c.callbackNode===x?ky.bind(null,c):null}function vm(c,p){var x=tf;return c.current.memoizedState.isDehydrated&&(Wu(c,p).flags|=256),c=sf(c,p),c!==2&&(p=Ma,Ma=x,p!==null&&_m(p)),c}function _m(c){Ma===null?Ma=c:Ma.push.apply(Ma,c)}function T0(c){for(var p=c;;){if(p.flags&16384){var x=p.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var C=0;C<x.length;C++){var R=x[C],F=R.getSnapshot;R=R.value;try{if(!Fi(F(),R))return!1}catch{return!1}}}if(x=p.child,p.subtreeFlags&16384&&x!==null)x.return=p,p=x;else{if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Go(c,p){for(p&=~Md,p&=~Cd,c.suspendedLanes|=p,c.pingedLanes&=~p,c=c.expirationTimes;0<p;){var x=31-Vr(p),C=1<<x;c[x]=-1,p&=~C}}function qu(c){if((zr&6)!==0)throw Error(r(327));Zo();var p=Bi(c,0);if((p&1)===0)return Ia(c,ar()),null;var x=sf(c,p);if(c.tag!==0&&x===2){var C=Eo(c);C!==0&&(p=C,x=vm(c,C))}if(x===1)throw x=ef,Wu(c,0),Go(c,p),Ia(c,ar()),x;if(x===6)throw Error(r(345));return c.finishedWork=c.current.alternate,c.finishedLanes=p,Ho(c,Ma,Ss),Ia(c,ar()),null}function Od(c,p){var x=zr;zr|=1;try{return c(p)}finally{zr=x,zr===0&&(gn=ar()+500,Zt&&w())}}function al(c){il!==null&&il.tag===0&&(zr&6)===0&&Zo();var p=zr;zr|=1;var x=Ca.transition,C=Br;try{if(Ca.transition=null,Br=1,c)return c()}finally{Br=C,Ca.transition=x,zr=p,(zr&6)===0&&w()}}function of(){Hi=qc.current,en(qc)}function Wu(c,p){c.finishedWork=null,c.finishedLanes=0;var x=c.timeoutHandle;if(x!==-1&&(c.timeoutHandle=-1,sd(x)),qn!==null)for(x=qn.return;x!==null;){var C=x;switch(le(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&zu();break;case 3:to(),en(Sr),en(Gr),Ul();break;case 5:Bh(C);break;case 4:to();break;case 13:en(mn);break;case 19:en(mn);break;case 10:oa(C.type._context);break;case 22:case 23:of()}x=x.return}if(oi=c,qn=c=eu(c.current,null),Ci=Hi=p,Jn=0,ef=null,Md=Cd=Vu=0,Ma=tf=null,Pn!==null){for(p=0;p<Pn.length;p++)if(x=Pn[p],C=x.interleaved,C!==null){x.interleaved=null;var R=C.next,F=x.pending;if(F!==null){var ae=F.next;F.next=R,C.next=ae}x.pending=C}Pn=null}return c}function Oy(c,p){do{var x=qn;try{if(Xn(),ws.current=dd,Nh){for(var C=Kr.memoizedState;C!==null;){var R=C.queue;R!==null&&(R.pending=null),C=C.next}Nh=!1}if(_o=0,$n=xn=Kr=null,Lc=!1,Fh=0,Ed.current=null,x===null||x.return===null){Jn=1,ef=p,qn=null;break}e:{var F=c,ae=x.return,be=x,Ie=p;if(p=Ci,be.flags|=32768,Ie!==null&&typeof Ie=="object"&&typeof Ie.then=="function"){var Ye=Ie,ft=be,mt=ft.tag;if((ft.mode&1)===0&&(mt===0||mt===11||mt===15)){var ct=ft.alternate;ct?(ft.updateQueue=ct.updateQueue,ft.memoizedState=ct.memoizedState,ft.lanes=ct.lanes):(ft.updateQueue=null,ft.memoizedState=null)}var Et=hy(ae);if(Et!==null){Et.flags&=-257,fy(Et,ae,be,F,p),Et.mode&1&&cy(F,Ye,p),p=Et,Ie=Ye;var Bt=p.updateQueue;if(Bt===null){var Ht=new Set;Ht.add(Ie),p.updateQueue=Ht}else Bt.add(Ie);break e}else{if((p&1)===0){cy(F,Ye,p),Dd();break e}Ie=Error(r(426))}}else if(ge&&be.mode&1){var zn=hy(ae);if(zn!==null){(zn.flags&65536)===0&&(zn.flags|=256),fy(zn,ae,be,F,p),At(pi(Ie,be));break e}}F=Ie=pi(Ie,be),Jn!==4&&(Jn=2),tf===null?tf=[F]:tf.push(F),F=ae;do{switch(F.tag){case 3:F.flags|=65536,p&=-p,F.lanes|=p;var Ge=um(F,Ie,p);la(F,Ge);break e;case 1:be=Ie;var De=F.type,Ze=F.stateNode;if((F.flags&128)===0&&(typeof De.getDerivedStateFromError=="function"||Ze!==null&&typeof Ze.componentDidCatch=="function"&&(Tr===null||!Tr.has(Ze)))){F.flags|=65536,p&=-p,F.lanes|=p;var St=uy(F,be,p);la(F,St);break e}}F=F.return}while(F!==null)}ol(x)}catch(Kt){p=Kt,qn===x&&x!==null&&(qn=x=x.return);continue}break}while(!0)}function Dy(){var c=Ad.current;return Ad.current=dd,c===null?dd:c}function Dd(){(Jn===0||Jn===3||Jn===2)&&(Jn=4),oi===null||(Vu&268435455)===0&&(Cd&268435455)===0||Go(oi,Ci)}function sf(c,p){var x=zr;zr|=2;var C=Dy();(oi!==c||Ci!==p)&&(Ss=null,Wu(c,p));do try{fa();break}catch(R){Oy(c,R)}while(!0);if(Xn(),zr=x,Ad.current=C,qn!==null)throw Error(r(261));return oi=null,Ci=0,Jn}function fa(){for(;qn!==null;)bm(qn)}function xm(){for(;qn!==null&&!wi();)bm(qn)}function bm(c){var p=Ly(c.alternate,c,Hi);c.memoizedProps=c.pendingProps,p===null?ol(c):qn=p,Ed.current=null}function ol(c){var p=c;do{var x=p.alternate;if(c=p.return,(p.flags&32768)===0){if(x=b0(x,p,Hi),x!==null){qn=x;return}}else{if(x=w0(x,p),x!==null){x.flags&=32767,qn=x;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Jn=6,qn=null;return}}if(p=p.sibling,p!==null){qn=p;return}qn=p=c}while(p!==null);Jn===0&&(Jn=5)}function Ho(c,p,x){var C=Br,R=Ca.transition;try{Ca.transition=null,Br=1,lf(c,p,x,C)}finally{Ca.transition=R,Br=C}return null}function lf(c,p,x,C){do Zo();while(il!==null);if((zr&6)!==0)throw Error(r(327));x=c.finishedWork;var R=c.finishedLanes;if(x===null)return null;if(c.finishedWork=null,c.finishedLanes=0,x===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0;var F=x.lanes|x.childLanes;if(ph(c,F),c===oi&&(qn=oi=null,Ci=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||Wc||(Wc=!0,wm(fi,function(){return Zo(),null})),F=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||F){F=Ca.transition,Ca.transition=null;var ae=Br;Br=1;var be=zr;zr|=4,Ed.current=null,S0(c,x),Ty(x,c),Au(Dh),Ws=!!No,Dh=No=null,c.current=x,Ay(x),bl(),zr=be,Br=ae,Ca.transition=F}else c.current=x;if(Wc&&(Wc=!1,il=c,nf=R),F=c.pendingLanes,F===0&&(Tr=null),Fs(x.stateNode),Ia(c,ar()),p!==null)for(C=c.onRecoverableError,x=0;x<p.length;x++)R=p[x],C(R.value,{componentStack:R.stack,digest:R.digest});if(rf)throw rf=!1,c=Id,Id=null,c;return(nf&1)!==0&&c.tag!==0&&Zo(),F=c.pendingLanes,(F&1)!==0?c===Jl?so++:(so=0,Jl=c):so=0,w(),null}function Zo(){if(il!==null){var c=gu(nf),p=Ca.transition,x=Br;try{if(Ca.transition=null,Br=16>c?16:c,il===null)var C=!1;else{if(c=il,il=null,nf=0,(zr&6)!==0)throw Error(r(331));var R=zr;for(zr|=4,$t=c.current;$t!==null;){var F=$t,ae=F.child;if(($t.flags&16)!==0){var be=F.deletions;if(be!==null){for(var Ie=0;Ie<be.length;Ie++){var Ye=be[Ie];for($t=Ye;$t!==null;){var ft=$t;switch(ft.tag){case 0:case 11:case 15:Yh(8,ft,F)}var mt=ft.child;if(mt!==null)mt.return=ft,$t=mt;else for(;$t!==null;){ft=$t;var ct=ft.sibling,Et=ft.return;if(by(ft),ft===Ye){$t=null;break}if(ct!==null){ct.return=Et,$t=ct;break}$t=Et}}}var Bt=F.alternate;if(Bt!==null){var Ht=Bt.child;if(Ht!==null){Bt.child=null;do{var zn=Ht.sibling;Ht.sibling=null,Ht=zn}while(Ht!==null)}}$t=F}}if((F.subtreeFlags&2064)!==0&&ae!==null)ae.return=F,$t=ae;else e:for(;$t!==null;){if(F=$t,(F.flags&2048)!==0)switch(F.tag){case 0:case 11:case 15:Yh(9,F,F.return)}var Ge=F.sibling;if(Ge!==null){Ge.return=F.return,$t=Ge;break e}$t=F.return}}var De=c.current;for($t=De;$t!==null;){ae=$t;var Ze=ae.child;if((ae.subtreeFlags&2064)!==0&&Ze!==null)Ze.return=ae,$t=Ze;else e:for(ae=De;$t!==null;){if(be=$t,(be.flags&2048)!==0)try{switch(be.tag){case 0:case 11:case 15:Jh(9,be)}}catch(Kt){bn(be,be.return,Kt)}if(be===ae){$t=null;break e}var St=be.sibling;if(St!==null){St.return=be.return,$t=St;break e}$t=be.return}}if(zr=R,w(),Si&&typeof Si.onPostCommitFiberRoot=="function")try{Si.onPostCommitFiberRoot(di,c)}catch{}C=!0}return C}finally{Br=x,Ca.transition=p}}return!1}function uf(c,p,x){p=pi(x,p),p=um(c,p,1),c=vo(c,p,1),p=ha(),c!==null&&(Us(c,1,p),Ia(c,p))}function bn(c,p,x){if(c.tag===3)uf(c,c,x);else for(;p!==null;){if(p.tag===3){uf(p,c,x);break}else if(p.tag===1){var C=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(Tr===null||!Tr.has(C))){c=pi(x,c),c=uy(p,c,1),p=vo(p,c,1),c=ha(),p!==null&&(Us(p,1,c),Ia(p,c));break}}p=p.return}}function A0(c,p,x){var C=c.pingCache;C!==null&&C.delete(p),p=ha(),c.pingedLanes|=c.suspendedLanes&x,oi===c&&(Ci&x)===x&&(Jn===4||Jn===3&&(Ci&130023424)===Ci&&500>ar()-Uu?Wu(c,0):Md|=x),Ia(c,p)}function Ry(c,p){p===0&&((c.mode&1)===0?p=1:(p=Li,Li<<=1,(Li&130023424)===0&&(Li=4194304)));var x=ha();c=Ui(c,p),c!==null&&(Us(c,p,x),Ia(c,x))}function zy(c){var p=c.memoizedState,x=0;p!==null&&(x=p.retryLane),Ry(c,x)}function jy(c,p){var x=0;switch(c.tag){case 13:var C=c.stateNode,R=c.memoizedState;R!==null&&(x=R.retryLane);break;case 19:C=c.stateNode;break;default:throw Error(r(314))}C!==null&&C.delete(p),Ry(c,x)}var Ly;Ly=function(c,p,x){if(c!==null)if(c.memoizedProps!==p.pendingProps||Sr.current)ca=!0;else{if((c.lanes&x)===0&&(p.flags&128)===0)return ca=!1,pm(c,p,x);ca=(c.flags&131072)!==0}else ca=!1,ge&&(p.flags&1048576)!==0&&G(p,y,p.index);switch(p.lanes=0,p.tag){case 2:var C=p.type;Kh(c,p),c=p.pendingProps;var R=$o(p,Gr.current);Fn(p,x),R=Vo(null,p,C,c,R,x);var F=no();return p.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,ni(C)?(F=!0,aa(p)):F=!1,p.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,xs(p),R.updater=gd,p.stateNode=R,R._reactInternals=p,Nu(p,C,c,x),p=hm(null,p,C,!0,F,x)):(p.tag=0,ge&&F&&ne(p),Vn(null,p,R,x),p=p.child),p;case 16:C=p.elementType;e:{switch(Kh(c,p),c=p.pendingProps,R=C._init,C=R(C._payload),p.type=C,R=p.tag=E0(C),c=xo(C,c),R){case 0:p=cm(null,p,C,c,x);break e;case 1:p=vy(null,p,C,c,x);break e;case 11:p=$c(null,p,C,c,x);break e;case 14:p=py(null,p,C,xo(C.type,c),x);break e}throw Error(r(306,C,""))}return p;case 0:return C=p.type,R=p.pendingProps,R=p.elementType===C?R:xo(C,R),cm(c,p,C,R,x);case 1:return C=p.type,R=p.pendingProps,R=p.elementType===C?R:xo(C,R),vy(c,p,C,R,x);case 3:e:{if(xd(p),c===null)throw Error(r(387));C=p.pendingProps,F=p.memoizedState,R=F.element,sa(c,p),eo(p,C,null,x);var ae=p.memoizedState;if(C=ae.element,F.isDehydrated)if(F={element:C,isDehydrated:!1,cache:ae.cache,pendingSuspenseBoundaries:ae.pendingSuspenseBoundaries,transitions:ae.transitions},p.updateQueue.baseState=F,p.memoizedState=F,p.flags&256){R=pi(Error(r(423)),p),p=_y(c,p,C,x,R);break e}else if(C!==R){R=pi(Error(r(424)),p),p=_y(c,p,C,x,R);break e}else for(de=Ka(p.stateNode.containerInfo.firstChild),he=p,ge=!0,_e=null,x=er(p,null,C,x),p.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(_t(),C===R){p=ao(c,p,x);break e}Vn(c,p,C,x)}p=p.child}return p;case 5:return Lh(p),c===null&&Re(p),C=p.type,R=p.pendingProps,F=c!==null?c.memoizedProps:null,ae=R.children,Rh(C,R)?ae=null:F!==null&&Rh(C,F)&&(p.flags|=32),yy(c,p),Vn(c,p,ae,x),p.child;case 6:return c===null&&Re(p),null;case 13:return Tn(c,p,x);case 4:return bs(p,p.stateNode.containerInfo),C=p.pendingProps,c===null?p.child=Pt(p,null,C,x):Vn(c,p,C,x),p.child;case 11:return C=p.type,R=p.pendingProps,R=p.elementType===C?R:xo(C,R),$c(c,p,C,R,x);case 7:return Vn(c,p,p.pendingProps,x),p.child;case 8:return Vn(c,p,p.pendingProps.children,x),p.child;case 12:return Vn(c,p,p.pendingProps.children,x),p.child;case 10:e:{if(C=p.type._context,R=p.pendingProps,F=p.memoizedProps,ae=R.value,an(qr,C._currentValue),C._currentValue=ae,F!==null)if(Fi(F.value,ae)){if(F.children===R.children&&!Sr.current){p=ao(c,p,x);break e}}else for(F=p.child,F!==null&&(F.return=p);F!==null;){var be=F.dependencies;if(be!==null){ae=F.child;for(var Ie=be.firstContext;Ie!==null;){if(Ie.context===C){if(F.tag===1){Ie=Ta(-1,x&-x),Ie.tag=2;var Ye=F.updateQueue;if(Ye!==null){Ye=Ye.shared;var ft=Ye.pending;ft===null?Ie.next=Ie:(Ie.next=ft.next,ft.next=Ie),Ye.pending=Ie}}F.lanes|=x,Ie=F.alternate,Ie!==null&&(Ie.lanes|=x),Zr(F.return,x,p),be.lanes|=x;break}Ie=Ie.next}}else if(F.tag===10)ae=F.type===p.type?null:F.child;else if(F.tag===18){if(ae=F.return,ae===null)throw Error(r(341));ae.lanes|=x,be=ae.alternate,be!==null&&(be.lanes|=x),Zr(ae,x,p),ae=F.sibling}else ae=F.child;if(ae!==null)ae.return=F;else for(ae=F;ae!==null;){if(ae===p){ae=null;break}if(F=ae.sibling,F!==null){F.return=ae.return,ae=F;break}ae=ae.return}F=ae}Vn(c,p,R.children,x),p=p.child}return p;case 9:return R=p.type,C=p.pendingProps.children,Fn(p,x),R=on(R),C=C(R),p.flags|=1,Vn(c,p,C,x),p.child;case 14:return C=p.type,R=xo(C,p.pendingProps),R=xo(C.type,R),py(c,p,C,R,x);case 15:return my(c,p,p.type,p.pendingProps,x);case 17:return C=p.type,R=p.pendingProps,R=p.elementType===C?R:xo(C,R),Kh(c,p),p.tag=1,ni(C)?(c=!0,aa(p)):c=!1,Fn(p,x),lm(p,C,R),Nu(p,C,R,x),hm(null,p,C,!0,c,x);case 19:return dm(c,p,x);case 22:return gy(c,p,x)}throw Error(r(156,p.tag))};function wm(c,p){return Nn(c,p)}function By(c,p,x,C){this.tag=c,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ka(c,p,x,C){return new By(c,p,x,C)}function cf(c){return c=c.prototype,!(!c||!c.isReactComponent)}function E0(c){if(typeof c=="function")return cf(c)?1:0;if(c!=null){if(c=c.$$typeof,c===$e)return 11;if(c===Xe)return 14}return 2}function eu(c,p){var x=c.alternate;return x===null?(x=ka(c.tag,p,c.key,c.mode),x.elementType=c.elementType,x.type=c.type,x.stateNode=c.stateNode,x.alternate=c,c.alternate=x):(x.pendingProps=p,x.type=c.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=c.flags&14680064,x.childLanes=c.childLanes,x.lanes=c.lanes,x.child=c.child,x.memoizedProps=c.memoizedProps,x.memoizedState=c.memoizedState,x.updateQueue=c.updateQueue,p=c.dependencies,x.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},x.sibling=c.sibling,x.index=c.index,x.ref=c.ref,x}function hf(c,p,x,C,R,F){var ae=2;if(C=c,typeof c=="function")cf(c)&&(ae=1);else if(typeof c=="string")ae=5;else e:switch(c){case se:return tu(x.children,R,F,p);case fe:ae=8,R|=8;break;case Se:return c=ka(12,x,p,R|2),c.elementType=Se,c.lanes=F,c;case Fe:return c=ka(13,x,p,R),c.elementType=Fe,c.lanes=F,c;case Ke:return c=ka(19,x,p,R),c.elementType=Ke,c.lanes=F,c;case Qe:return ru(x,R,F,p);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case Be:ae=10;break e;case xe:ae=9;break e;case $e:ae=11;break e;case Xe:ae=14;break e;case rt:ae=16,C=null;break e}throw Error(r(130,c==null?c:typeof c,""))}return p=ka(ae,x,p,R),p.elementType=c,p.type=C,p.lanes=F,p}function tu(c,p,x,C){return c=ka(7,c,C,p),c.lanes=x,c}function ru(c,p,x,C){return c=ka(22,c,C,p),c.elementType=Qe,c.lanes=x,c.stateNode={isHidden:!1},c}function bo(c,p,x){return c=ka(6,c,null,p),c.lanes=x,c}function Ps(c,p,x){return p=ka(4,c.children!==null?c.children:[],c.key,p),p.lanes=x,p.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},p}function Ny(c,p,x,C,R){this.tag=p,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cr(0),this.expirationTimes=Cr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cr(0),this.identifierPrefix=C,this.onRecoverableError=R,this.mutableSourceEagerHydrationData=null}function ff(c,p,x,C,R,F,ae,be,Ie){return c=new Ny(c,p,x,be,Ie),p===1?(p=1,F===!0&&(p|=8)):p=0,F=ka(3,null,null,p),c.current=F,F.stateNode=c,F.memoizedState={element:C,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},xs(F),c}function C0(c,p,x){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:C==null?null:""+C,children:c,containerInfo:p,implementation:x}}function Fy(c){if(!c)return _s;c=c._reactInternals;e:{if(pr(c)!==c||c.tag!==1)throw Error(r(170));var p=c;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(ni(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(r(171))}if(c.tag===1){var x=c.type;if(ni(x))return Fl(c,x,p)}return p}function df(c,p,x,C,R,F,ae,be,Ie){return c=ff(x,C,!0,c,R,F,ae,be,Ie),c.context=Fy(null),x=c.current,C=ha(),R=Ql(x),F=Ta(C,R),F.callback=p??null,vo(x,F,R),c.current.lanes=R,Us(c,R,C),Ia(c,C),c}function Gc(c,p,x,C){var R=p.current,F=ha(),ae=Ql(R);return x=Fy(x),p.context===null?p.context=x:p.pendingContext=x,p=Ta(F,ae),p.payload={element:c},C=C===void 0?null:C,C!==null&&(p.callback=C),c=vo(R,p,ae),c!==null&&(Wo(c,R,ae,F),Ai(c,R,ae)),ae}function Rd(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function zd(c,p){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var x=c.retryLane;c.retryLane=x!==0&&x<p?x:p}}function pf(c,p){zd(c,p),(c=c.alternate)&&zd(c,p)}function Hc(){return null}var Sm=typeof reportError=="function"?reportError:function(c){console.error(c)};function jd(c){this._internalRoot=c}Zc.prototype.render=jd.prototype.render=function(c){var p=this._internalRoot;if(p===null)throw Error(r(409));Gc(c,p,null,null)},Zc.prototype.unmount=jd.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var p=c.containerInfo;al(function(){Gc(null,c,null,null)}),p[Xa]=null}};function Zc(c){this._internalRoot=c}Zc.prototype.unstable_scheduleHydration=function(c){if(c){var p=mh();c={blockedOn:null,target:c,priority:p};for(var x=0;x<Wa.length&&p!==0&&p<Wa[x].priority;x++);Wa.splice(x,0,c),x===0&&yh(c)}};function Ld(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function Gu(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function Pm(){}function M0(c,p,x,C,R){if(R){if(typeof C=="function"){var F=C;C=function(){var Ye=Rd(ae);F.call(Ye)}}var ae=df(p,C,c,0,null,!1,!1,"",Pm);return c._reactRootContainer=ae,c[Xa]=ae.current,Lo(c.nodeType===8?c.parentNode:c),al(),ae}for(;R=c.lastChild;)c.removeChild(R);if(typeof C=="function"){var be=C;C=function(){var Ye=Rd(Ie);be.call(Ye)}}var Ie=ff(c,0,!1,null,null,!1,!1,"",Pm);return c._reactRootContainer=Ie,c[Xa]=Ie.current,Lo(c.nodeType===8?c.parentNode:c),al(function(){Gc(p,Ie,x,C)}),Ie}function Bd(c,p,x,C,R){var F=x._reactRootContainer;if(F){var ae=F;if(typeof R=="function"){var be=R;R=function(){var Ie=Rd(ae);be.call(Ie)}}Gc(p,ae,c,R)}else ae=M0(x,p,c,R,C);return Rd(ae)}wl=function(c){switch(c.tag){case 3:var p=c.stateNode;if(p.current.memoizedState.isDehydrated){var x=Vs(p.pendingLanes);x!==0&&(ss(p,x|1),Ia(p,ar()),(zr&6)===0&&(gn=ar()+500,w()))}break;case 13:al(function(){var C=Ui(c,1);if(C!==null){var R=ha();Wo(C,c,1,R)}}),pf(c,1)}},Sl=function(c){if(c.tag===13){var p=Ui(c,134217728);if(p!==null){var x=ha();Wo(p,c,134217728,x)}pf(c,134217728)}},qs=function(c){if(c.tag===13){var p=Ql(c),x=Ui(c,p);if(x!==null){var C=ha();Wo(x,c,p,C)}pf(c,p)}},mh=function(){return Br},Gf=function(c,p){var x=Br;try{return Br=c,p()}finally{Br=x}},Ua=function(c,p,x){switch(p){case"input":if(dn(c,x),p=x.name,x.type==="radio"&&p!=null){for(x=c;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<x.length;p++){var C=x[p];if(C!==c&&C.form===c.form){var R=Du(C);if(!R)throw Error(r(90));lt(C),dn(C,R)}}}break;case"textarea":co(c,x);break;case"select":p=x.value,p!=null&&Gn(c,!!x.multiple,p,!1)}},ue=Od,me=al;var $y={usingClientEntryPoint:!1,Events:[Ou,Ya,Du,te,ee,Od]},mf={findFiberByHostInstance:Fo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I0={bundleType:mf.bundleType,version:mf.version,rendererPackageName:mf.rendererPackageName,rendererConfig:mf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ie.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=Lr(c),c===null?null:c.stateNode},findFiberByHostInstance:mf.findFiberByHostInstance||Hc,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nd.isDisabled&&Nd.supportsFiber)try{di=Nd.inject(I0),Si=Nd}catch{}}return So.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$y,So.createPortal=function(c,p){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ld(p))throw Error(r(200));return C0(c,p,null,x)},So.createRoot=function(c,p){if(!Ld(c))throw Error(r(299));var x=!1,C="",R=Sm;return p!=null&&(p.unstable_strictMode===!0&&(x=!0),p.identifierPrefix!==void 0&&(C=p.identifierPrefix),p.onRecoverableError!==void 0&&(R=p.onRecoverableError)),p=ff(c,1,!1,null,null,x,!1,C,R),c[Xa]=p.current,Lo(c.nodeType===8?c.parentNode:c),new jd(p)},So.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var p=c._reactInternals;if(p===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=Lr(p),c=c===null?null:c.stateNode,c},So.flushSync=function(c){return al(c)},So.hydrate=function(c,p,x){if(!Gu(p))throw Error(r(200));return Bd(null,c,p,!0,x)},So.hydrateRoot=function(c,p,x){if(!Ld(c))throw Error(r(405));var C=x!=null&&x.hydratedSources||null,R=!1,F="",ae=Sm;if(x!=null&&(x.unstable_strictMode===!0&&(R=!0),x.identifierPrefix!==void 0&&(F=x.identifierPrefix),x.onRecoverableError!==void 0&&(ae=x.onRecoverableError)),p=df(p,null,c,1,x??null,R,!1,F,ae),c[Xa]=p.current,Lo(c),C)for(c=0;c<C.length;c++)x=C[c],R=x._getVersion,R=R(x._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[x,R]:p.mutableSourceEagerHydrationData.push(x,R);return new Zc(p)},So.render=function(c,p,x){if(!Gu(p))throw Error(r(200));return Bd(null,c,p,!1,x)},So.unmountComponentAtNode=function(c){if(!Gu(c))throw Error(r(40));return c._reactRootContainer?(al(function(){Bd(null,null,c,!1,function(){c._reactRootContainer=null,c[Xa]=null})}),!0):!1},So.unstable_batchedUpdates=Od,So.unstable_renderSubtreeIntoContainer=function(c,p,x,C){if(!Gu(x))throw Error(r(200));if(c==null||c._reactInternals===void 0)throw Error(r(38));return Bd(c,p,x,!1,C)},So.version="18.3.1-next-f1338f8080-20240426",So}var mA;function M4(){if(mA)return W0.exports;mA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),W0.exports=sL(),W0.exports}var gA;function lL(){if(gA)return Ky;gA=1;var e=M4();return Ky.createRoot=e.createRoot,Ky.hydrateRoot=e.hydrateRoot,Ky}var uL=lL();const cL=fn(uL);M4();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eg(){return eg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eg.apply(this,arguments)}var Qc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Qc||(Qc={}));const yA="popstate";function hL(e){e===void 0&&(e={});function t(s,d){let{pathname:h="/",search:l="",hash:_=""}=Nf(s.location.hash.substr(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),f2("",{pathname:h,search:l,hash:_},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function r(s,d){let h=s.document.querySelector("base"),l="";if(h&&h.getAttribute("href")){let _=s.location.href,S=_.indexOf("#");l=S===-1?_:_.slice(0,S)}return l+"#"+(typeof d=="string"?d:bv(d))}function n(s,d){QS(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(d)+")")}return dL(t,r,n,e)}function ti(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function QS(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function fL(){return Math.random().toString(36).substr(2,8)}function vA(e,t){return{usr:e.state,key:e.key,idx:t}}function f2(e,t,r,n){return r===void 0&&(r=null),eg({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Nf(t):t,{state:r,key:t&&t.key||n||fL()})}function bv(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Nf(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function dL(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:d=!1}=n,h=s.history,l=Qc.Pop,_=null,S=E();S==null&&(S=0,h.replaceState(eg({},h.state,{idx:S}),""));function E(){return(h.state||{idx:null}).idx}function A(){l=Qc.Pop;let B=E(),Z=B==null?null:B-S;S=B,_&&_({action:l,location:N.location,delta:Z})}function M(B,Z){l=Qc.Push;let J=f2(N.location,B,Z);r&&r(J,B),S=E()+1;let Q=vA(J,S),ie=N.createHref(J);try{h.pushState(Q,"",ie)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;s.location.assign(ie)}d&&_&&_({action:l,location:N.location,delta:1})}function L(B,Z){l=Qc.Replace;let J=f2(N.location,B,Z);r&&r(J,B),S=E();let Q=vA(J,S),ie=N.createHref(J);h.replaceState(Q,"",ie),d&&_&&_({action:l,location:N.location,delta:0})}function U(B){let Z=s.location.origin!=="null"?s.location.origin:s.location.href,J=typeof B=="string"?B:bv(B);return J=J.replace(/ $/,"%20"),ti(Z,"No window.location.(origin|href) available to create URL for href: "+J),new URL(J,Z)}let N={get action(){return l},get location(){return e(s,h)},listen(B){if(_)throw new Error("A history only accepts one active listener");return s.addEventListener(yA,A),_=B,()=>{s.removeEventListener(yA,A),_=null}},createHref(B){return t(s,B)},createURL:U,encodeLocation(B){let Z=U(B);return{pathname:Z.pathname,search:Z.search,hash:Z.hash}},push:M,replace:L,go(B){return h.go(B)}};return N}var _A;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(_A||(_A={}));function pL(e,t,r){return r===void 0&&(r="/"),mL(e,t,r)}function mL(e,t,r,n){let s=typeof t=="string"?Nf(t):t,d=ap(s.pathname||"/",r);if(d==null)return null;let h=I4(e);gL(h);let l=null;for(let _=0;l==null&&_<h.length;++_){let S=EL(d);l=TL(h[_],S)}return l}function I4(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(d,h,l)=>{let _={relativePath:l===void 0?d.path||"":l,caseSensitive:d.caseSensitive===!0,childrenIndex:h,route:d};_.relativePath.startsWith("/")&&(ti(_.relativePath.startsWith(n),'Absolute route path "'+_.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),_.relativePath=_.relativePath.slice(n.length));let S=th([n,_.relativePath]),E=r.concat(_);d.children&&d.children.length>0&&(ti(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+S+'".')),I4(d.children,t,E,S)),!(d.path==null&&!d.index)&&t.push({path:S,score:SL(S,d.index),routesMeta:E})};return e.forEach((d,h)=>{var l;if(d.path===""||!((l=d.path)!=null&&l.includes("?")))s(d,h);else for(let _ of k4(d.path))s(d,h,_)}),t}function k4(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),d=r.replace(/\?$/,"");if(n.length===0)return s?[d,""]:[d];let h=k4(n.join("/")),l=[];return l.push(...h.map(_=>_===""?d:[d,_].join("/"))),s&&l.push(...h),l.map(_=>e.startsWith("/")&&_===""?"/":_)}function gL(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:PL(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const yL=/^:[\w-]+$/,vL=3,_L=2,xL=1,bL=10,wL=-2,xA=e=>e==="*";function SL(e,t){let r=e.split("/"),n=r.length;return r.some(xA)&&(n+=wL),t&&(n+=_L),r.filter(s=>!xA(s)).reduce((s,d)=>s+(yL.test(d)?vL:d===""?xL:bL),n)}function PL(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function TL(e,t,r){let{routesMeta:n}=e,s={},d="/",h=[];for(let l=0;l<n.length;++l){let _=n[l],S=l===n.length-1,E=d==="/"?t:t.slice(d.length)||"/",A=d2({path:_.relativePath,caseSensitive:_.caseSensitive,end:S},E),M=_.route;if(!A)return null;Object.assign(s,A.params),h.push({params:s,pathname:th([d,A.pathname]),pathnameBase:kL(th([d,A.pathnameBase])),route:M}),A.pathnameBase!=="/"&&(d=th([d,A.pathnameBase]))}return h}function d2(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=AL(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let d=s[0],h=d.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((S,E,A)=>{let{paramName:M,isOptional:L}=E;if(M==="*"){let N=l[A]||"";h=d.slice(0,d.length-N.length).replace(/(.)\/+$/,"$1")}const U=l[A];return L&&!U?S[M]=void 0:S[M]=(U||"").replace(/%2F/g,"/"),S},{}),pathname:d,pathnameBase:h,pattern:e}}function AL(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),QS(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,l,_)=>(n.push({paramName:l,isOptional:_!=null}),_?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function EL(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return QS(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ap(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function CL(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Nf(e):e;return{pathname:r?r.startsWith("/")?r:ML(r,t):t,search:OL(n),hash:DL(s)}}function ML(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Z0(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function IL(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function O4(e,t){let r=IL(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function D4(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Nf(e):(s=eg({},e),ti(!s.pathname||!s.pathname.includes("?"),Z0("?","pathname","search",s)),ti(!s.pathname||!s.pathname.includes("#"),Z0("#","pathname","hash",s)),ti(!s.search||!s.search.includes("#"),Z0("#","search","hash",s)));let d=e===""||s.pathname==="",h=d?"/":s.pathname,l;if(h==null)l=r;else{let A=t.length-1;if(!n&&h.startsWith("..")){let M=h.split("/");for(;M[0]==="..";)M.shift(),A-=1;s.pathname=M.join("/")}l=A>=0?t[A]:"/"}let _=CL(s,l),S=h&&h!=="/"&&h.endsWith("/"),E=(d||h===".")&&r.endsWith("/");return!_.pathname.endsWith("/")&&(S||E)&&(_.pathname+="/"),_}const th=e=>e.join("/").replace(/\/\/+/g,"/"),kL=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),OL=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,DL=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function RL(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const R4=["post","put","patch","delete"];new Set(R4);const zL=["get",...R4];new Set(zL);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tg(){return tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tg.apply(this,arguments)}const I_=Pe.createContext(null),z4=Pe.createContext(null),oh=Pe.createContext(null),k_=Pe.createContext(null),Ff=Pe.createContext({outlet:null,matches:[],isDataRoute:!1}),j4=Pe.createContext(null);function jL(e,t){let{relative:r}=t===void 0?{}:t;Ug()||ti(!1);let{basename:n,navigator:s}=Pe.useContext(oh),{hash:d,pathname:h,search:l}=O_(e,{relative:r}),_=h;return n!=="/"&&(_=h==="/"?n:th([n,h])),s.createHref({pathname:_,search:l,hash:d})}function Ug(){return Pe.useContext(k_)!=null}function Op(){return Ug()||ti(!1),Pe.useContext(k_).location}function L4(e){Pe.useContext(oh).static||Pe.useLayoutEffect(e)}function LL(){let{isDataRoute:e}=Pe.useContext(Ff);return e?XL():BL()}function BL(){Ug()||ti(!1);let e=Pe.useContext(I_),{basename:t,future:r,navigator:n}=Pe.useContext(oh),{matches:s}=Pe.useContext(Ff),{pathname:d}=Op(),h=JSON.stringify(O4(s,r.v7_relativeSplatPath)),l=Pe.useRef(!1);return L4(()=>{l.current=!0}),Pe.useCallback(function(S,E){if(E===void 0&&(E={}),!l.current)return;if(typeof S=="number"){n.go(S);return}let A=D4(S,JSON.parse(h),d,E.relative==="path");e==null&&t!=="/"&&(A.pathname=A.pathname==="/"?t:th([t,A.pathname])),(E.replace?n.replace:n.push)(A,E.state,E)},[t,n,h,d,e])}function O_(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=Pe.useContext(oh),{matches:s}=Pe.useContext(Ff),{pathname:d}=Op(),h=JSON.stringify(O4(s,n.v7_relativeSplatPath));return Pe.useMemo(()=>D4(e,JSON.parse(h),d,r==="path"),[e,h,d,r])}function NL(e,t){return FL(e,t)}function FL(e,t,r,n){Ug()||ti(!1);let{navigator:s}=Pe.useContext(oh),{matches:d}=Pe.useContext(Ff),h=d[d.length-1],l=h?h.params:{};h&&h.pathname;let _=h?h.pathnameBase:"/";h&&h.route;let S=Op(),E;if(t){var A;let B=typeof t=="string"?Nf(t):t;_==="/"||(A=B.pathname)!=null&&A.startsWith(_)||ti(!1),E=B}else E=S;let M=E.pathname||"/",L=M;if(_!=="/"){let B=_.replace(/^\//,"").split("/");L="/"+M.replace(/^\//,"").split("/").slice(B.length).join("/")}let U=pL(e,{pathname:L}),N=WL(U&&U.map(B=>Object.assign({},B,{params:Object.assign({},l,B.params),pathname:th([_,s.encodeLocation?s.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?_:th([_,s.encodeLocation?s.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),d,r,n);return t&&N?Pe.createElement(k_.Provider,{value:{location:tg({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:Qc.Pop}},N):N}function $L(){let e=KL(),t=RL(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Pe.createElement(Pe.Fragment,null,Pe.createElement("h2",null,"Unexpected Application Error!"),Pe.createElement("h3",{style:{fontStyle:"italic"}},t),r?Pe.createElement("pre",{style:s},r):null,null)}const VL=Pe.createElement($L,null);class UL extends Pe.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?Pe.createElement(Ff.Provider,{value:this.props.routeContext},Pe.createElement(j4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qL(e){let{routeContext:t,match:r,children:n}=e,s=Pe.useContext(I_);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),Pe.createElement(Ff.Provider,{value:t},n)}function WL(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var d;if(!r)return null;if(r.errors)e=r.matches;else if((d=n)!=null&&d.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let h=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let E=h.findIndex(A=>A.route.id&&(l==null?void 0:l[A.route.id])!==void 0);E>=0||ti(!1),h=h.slice(0,Math.min(h.length,E+1))}let _=!1,S=-1;if(r&&n&&n.v7_partialHydration)for(let E=0;E<h.length;E++){let A=h[E];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(S=E),A.route.id){let{loaderData:M,errors:L}=r,U=A.route.loader&&M[A.route.id]===void 0&&(!L||L[A.route.id]===void 0);if(A.route.lazy||U){_=!0,S>=0?h=h.slice(0,S+1):h=[h[0]];break}}}return h.reduceRight((E,A,M)=>{let L,U=!1,N=null,B=null;r&&(L=l&&A.route.id?l[A.route.id]:void 0,N=A.route.errorElement||VL,_&&(S<0&&M===0?(YL("route-fallback"),U=!0,B=null):S===M&&(U=!0,B=A.route.hydrateFallbackElement||null)));let Z=t.concat(h.slice(0,M+1)),J=()=>{let Q;return L?Q=N:U?Q=B:A.route.Component?Q=Pe.createElement(A.route.Component,null):A.route.element?Q=A.route.element:Q=E,Pe.createElement(qL,{match:A,routeContext:{outlet:E,matches:Z,isDataRoute:r!=null},children:Q})};return r&&(A.route.ErrorBoundary||A.route.errorElement||M===0)?Pe.createElement(UL,{location:r.location,revalidation:r.revalidation,component:N,error:L,children:J(),routeContext:{outlet:null,matches:Z,isDataRoute:!0}}):J()},null)}var B4=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(B4||{}),N4=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(N4||{});function GL(e){let t=Pe.useContext(I_);return t||ti(!1),t}function HL(e){let t=Pe.useContext(z4);return t||ti(!1),t}function ZL(e){let t=Pe.useContext(Ff);return t||ti(!1),t}function F4(e){let t=ZL(),r=t.matches[t.matches.length-1];return r.route.id||ti(!1),r.route.id}function KL(){var e;let t=Pe.useContext(j4),r=HL(),n=F4();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function XL(){let{router:e}=GL(B4.UseNavigateStable),t=F4(N4.UseNavigateStable),r=Pe.useRef(!1);return L4(()=>{r.current=!0}),Pe.useCallback(function(s,d){d===void 0&&(d={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,tg({fromRouteId:t},d)))},[e,t])}const bA={};function YL(e,t,r){bA[e]||(bA[e]=!0)}function JL(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ks(e){ti(!1)}function QL(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Qc.Pop,navigator:d,static:h=!1,future:l}=e;Ug()&&ti(!1);let _=t.replace(/^\/*/,"/"),S=Pe.useMemo(()=>({basename:_,navigator:d,static:h,future:tg({v7_relativeSplatPath:!1},l)}),[_,l,d,h]);typeof n=="string"&&(n=Nf(n));let{pathname:E="/",search:A="",hash:M="",state:L=null,key:U="default"}=n,N=Pe.useMemo(()=>{let B=ap(E,_);return B==null?null:{location:{pathname:B,search:A,hash:M,state:L,key:U},navigationType:s}},[_,E,A,M,L,U,s]);return N==null?null:Pe.createElement(oh.Provider,{value:S},Pe.createElement(k_.Provider,{children:r,value:N}))}function e6(e){let{children:t,location:r}=e;return NL(p2(t),r)}new Promise(()=>{});function p2(e,t){t===void 0&&(t=[]);let r=[];return Pe.Children.forEach(e,(n,s)=>{if(!Pe.isValidElement(n))return;let d=[...t,s];if(n.type===Pe.Fragment){r.push.apply(r,p2(n.props.children,d));return}n.type!==ks&&ti(!1),!n.props.index||!n.props.children||ti(!1);let h={id:n.props.id||d.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(h.children=p2(n.props.children,d)),r.push(h)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wv(){return wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wv.apply(this,arguments)}function $4(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,d;for(d=0;d<n.length;d++)s=n[d],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function t6(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function r6(e,t){return e.button===0&&(!t||t==="_self")&&!t6(e)}const n6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],i6=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],a6="6";try{window.__reactRouterVersion=a6}catch{}const o6=Pe.createContext({isTransitioning:!1}),s6="startTransition",wA=iL[s6];function l6(e){let{basename:t,children:r,future:n,window:s}=e,d=Pe.useRef();d.current==null&&(d.current=hL({window:s,v5Compat:!0}));let h=d.current,[l,_]=Pe.useState({action:h.action,location:h.location}),{v7_startTransition:S}=n||{},E=Pe.useCallback(A=>{S&&wA?wA(()=>_(A)):_(A)},[_,S]);return Pe.useLayoutEffect(()=>h.listen(E),[h,E]),Pe.useEffect(()=>JL(n),[n]),Pe.createElement(QL,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:h,future:n})}const u6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",c6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eP=Pe.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:d,replace:h,state:l,target:_,to:S,preventScrollReset:E,viewTransition:A}=t,M=$4(t,n6),{basename:L}=Pe.useContext(oh),U,N=!1;if(typeof S=="string"&&c6.test(S)&&(U=S,u6))try{let Q=new URL(window.location.href),ie=S.startsWith("//")?new URL(Q.protocol+S):new URL(S),H=ap(ie.pathname,L);ie.origin===Q.origin&&H!=null?S=H+ie.search+ie.hash:N=!0}catch{}let B=jL(S,{relative:s}),Z=f6(S,{replace:h,state:l,target:_,preventScrollReset:E,relative:s,viewTransition:A});function J(Q){n&&n(Q),Q.defaultPrevented||Z(Q)}return Pe.createElement("a",wv({},M,{href:U||B,onClick:N||d?n:J,ref:r,target:_}))}),Ku=Pe.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:d="",end:h=!1,style:l,to:_,viewTransition:S,children:E}=t,A=$4(t,i6),M=O_(_,{relative:A.relative}),L=Op(),U=Pe.useContext(z4),{navigator:N,basename:B}=Pe.useContext(oh),Z=U!=null&&d6(M)&&S===!0,J=N.encodeLocation?N.encodeLocation(M).pathname:M.pathname,Q=L.pathname,ie=U&&U.navigation&&U.navigation.location?U.navigation.location.pathname:null;s||(Q=Q.toLowerCase(),ie=ie?ie.toLowerCase():null,J=J.toLowerCase()),ie&&B&&(ie=ap(ie,B)||ie);const H=J!=="/"&&J.endsWith("/")?J.length-1:J.length;let X=Q===J||!h&&Q.startsWith(J)&&Q.charAt(H)==="/",se=ie!=null&&(ie===J||!h&&ie.startsWith(J)&&ie.charAt(J.length)==="/"),fe={isActive:X,isPending:se,isTransitioning:Z},Se=X?n:void 0,Be;typeof d=="function"?Be=d(fe):Be=[d,X?"active":null,se?"pending":null,Z?"transitioning":null].filter(Boolean).join(" ");let xe=typeof l=="function"?l(fe):l;return Pe.createElement(eP,wv({},A,{"aria-current":Se,className:Be,ref:r,style:xe,to:_,viewTransition:S}),typeof E=="function"?E(fe):E)});var m2;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(m2||(m2={}));var SA;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(SA||(SA={}));function h6(e){let t=Pe.useContext(I_);return t||ti(!1),t}function f6(e,t){let{target:r,replace:n,state:s,preventScrollReset:d,relative:h,viewTransition:l}=t===void 0?{}:t,_=LL(),S=Op(),E=O_(e,{relative:h});return Pe.useCallback(A=>{if(r6(A,r)){A.preventDefault();let M=n!==void 0?n:bv(S)===bv(E);_(e,{replace:M,state:s,preventScrollReset:d,relative:h,viewTransition:l})}},[S,_,E,n,s,r,e,d,h,l])}function d6(e,t){t===void 0&&(t={});let r=Pe.useContext(o6);r==null&&ti(!1);let{basename:n}=h6(m2.useViewTransitionState),s=O_(e,{relative:t.relative});if(!r.isTransitioning)return!1;let d=ap(r.currentLocation.pathname,n)||r.currentLocation.pathname,h=ap(r.nextLocation.pathname,n)||r.nextLocation.pathname;return d2(s.pathname,h)!=null||d2(s.pathname,d)!=null}const tP=Pe.createContext({});function rP(e){const t=Pe.useRef(null);return t.current===null&&(t.current=e()),t.current}const D_=Pe.createContext(null),nP=Pe.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class p6 extends Pe.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function m6({children:e,isPresent:t}){const r=Pe.useId(),n=Pe.useRef(null),s=Pe.useRef({width:0,height:0,top:0,left:0}),{nonce:d}=Pe.useContext(nP);return Pe.useInsertionEffect(()=>{const{width:h,height:l,top:_,left:S}=s.current;if(t||!n.current||!h||!l)return;n.current.dataset.motionPopId=r;const E=document.createElement("style");return d&&(E.nonce=d),document.head.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${l}px !important;
            top: ${_}px !important;
            left: ${S}px !important;
          }
        `),()=>{document.head.removeChild(E)}},[t]),K.jsx(p6,{isPresent:t,childRef:n,sizeRef:s,children:Pe.cloneElement(e,{ref:n})})}const g6=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:d,mode:h})=>{const l=rP(y6),_=Pe.useId(),S=Pe.useCallback(A=>{l.set(A,!0);for(const M of l.values())if(!M)return;n&&n()},[l,n]),E=Pe.useMemo(()=>({id:_,initial:t,isPresent:r,custom:s,onExitComplete:S,register:A=>(l.set(A,!1),()=>l.delete(A))}),d?[Math.random(),S]:[r,S]);return Pe.useMemo(()=>{l.forEach((A,M)=>l.set(M,!1))},[r]),Pe.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),h==="popLayout"&&(e=K.jsx(m6,{isPresent:r,children:e})),K.jsx(D_.Provider,{value:E,children:e})};function y6(){return new Map}function V4(e=!0){const t=Pe.useContext(D_);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,d=Pe.useId();Pe.useEffect(()=>{e&&s(d)},[e]);const h=Pe.useCallback(()=>e&&n&&n(d),[d,n,e]);return!r&&n?[!1,h]:[!0]}const Xy=e=>e.key||"";function PA(e){const t=[];return Pe.Children.forEach(e,r=>{Pe.isValidElement(r)&&t.push(r)}),t}const iP=typeof window<"u",U4=iP?Pe.useLayoutEffect:Pe.useEffect,aP=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:d="sync",propagate:h=!1})=>{const[l,_]=V4(h),S=Pe.useMemo(()=>PA(e),[e]),E=h&&!l?[]:S.map(Xy),A=Pe.useRef(!0),M=Pe.useRef(S),L=rP(()=>new Map),[U,N]=Pe.useState(S),[B,Z]=Pe.useState(S);U4(()=>{A.current=!1,M.current=S;for(let ie=0;ie<B.length;ie++){const H=Xy(B[ie]);E.includes(H)?L.delete(H):L.get(H)!==!0&&L.set(H,!1)}},[B,E.length,E.join("-")]);const J=[];if(S!==U){let ie=[...S];for(let H=0;H<B.length;H++){const X=B[H],se=Xy(X);E.includes(se)||(ie.splice(H,0,X),J.push(X))}d==="wait"&&J.length&&(ie=J),Z(PA(ie)),N(S);return}const{forceRender:Q}=Pe.useContext(tP);return K.jsx(K.Fragment,{children:B.map(ie=>{const H=Xy(ie),X=h&&!l?!1:S===B||E.includes(H),se=()=>{if(L.has(H))L.set(H,!0);else return;let fe=!0;L.forEach(Se=>{Se||(fe=!1)}),fe&&(Q==null||Q(),Z(M.current),h&&(_==null||_()),n&&n())};return K.jsx(g6,{isPresent:X,initial:!A.current||r?void 0:!1,custom:X?void 0:t,presenceAffectsLayout:s,mode:d,onExitComplete:X?void 0:se,children:ie},H)})})},rs=e=>e;let q4=rs;function oP(e){let t;return()=>(t===void 0&&(t=e()),t)}const op=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},ec=e=>e*1e3,tc=e=>e/1e3,v6={useManualTiming:!1};function _6(e){let t=new Set,r=new Set,n=!1,s=!1;const d=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function l(S){d.has(S)&&(_.schedule(S),e()),S(h)}const _={schedule:(S,E=!1,A=!1)=>{const L=A&&n?t:r;return E&&d.add(S),L.has(S)||L.add(S),S},cancel:S=>{r.delete(S),d.delete(S)},process:S=>{if(h=S,n){s=!0;return}n=!0,[t,r]=[r,t],t.forEach(l),t.clear(),n=!1,s&&(s=!1,_.process(S))}};return _}const Yy=["read","resolveKeyframes","update","preRender","render","postRender"],x6=40;function W4(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},d=()=>r=!0,h=Yy.reduce((Z,J)=>(Z[J]=_6(d),Z),{}),{read:l,resolveKeyframes:_,update:S,preRender:E,render:A,postRender:M}=h,L=()=>{const Z=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(Z-s.timestamp,x6),1),s.timestamp=Z,s.isProcessing=!0,l.process(s),_.process(s),S.process(s),E.process(s),A.process(s),M.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(L))},U=()=>{r=!0,n=!0,s.isProcessing||e(L)};return{schedule:Yy.reduce((Z,J)=>{const Q=h[J];return Z[J]=(ie,H=!1,X=!1)=>(r||U(),Q.schedule(ie,H,X)),Z},{}),cancel:Z=>{for(let J=0;J<Yy.length;J++)h[Yy[J]].cancel(Z)},state:s,steps:h}}const{schedule:Rn,cancel:ih,state:ga,steps:K0}=W4(typeof requestAnimationFrame<"u"?requestAnimationFrame:rs,!0),G4=Pe.createContext({strict:!1}),TA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},sp={};for(const e in TA)sp[e]={isEnabled:t=>TA[e].some(r=>!!t[r])};function b6(e){for(const t in e)sp[t]={...sp[t],...e[t]}}const w6=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Sv(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||w6.has(e)}let H4=e=>!Sv(e);function S6(e){e&&(H4=t=>t.startsWith("on")?!Sv(t):e(t))}try{S6(require("@emotion/is-prop-valid").default)}catch{}function P6(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(H4(s)||r===!0&&Sv(s)||!t&&!Sv(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}function T6(e){if(typeof Proxy>"u")return e;const t=new Map,r=(...n)=>e(...n);return new Proxy(r,{get:(n,s)=>s==="create"?e:(t.has(s)||t.set(s,e(s)),t.get(s))})}const R_=Pe.createContext({});function rg(e){return typeof e=="string"||Array.isArray(e)}function z_(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const sP=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],lP=["initial",...sP];function j_(e){return z_(e.animate)||lP.some(t=>rg(e[t]))}function Z4(e){return!!(j_(e)||e.variants)}function A6(e,t){if(j_(e)){const{initial:r,animate:n}=e;return{initial:r===!1||rg(r)?r:void 0,animate:rg(n)?n:void 0}}return e.inherit!==!1?t:{}}function E6(e){const{initial:t,animate:r}=A6(e,Pe.useContext(R_));return Pe.useMemo(()=>({initial:t,animate:r}),[AA(t),AA(r)])}function AA(e){return Array.isArray(e)?e.join(" "):e}const C6=Symbol.for("motionComponentSymbol");function Zd(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function M6(e,t,r){return Pe.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Zd(r)&&(r.current=n))},[t])}const uP=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),I6="framerAppearId",K4="data-"+uP(I6),{schedule:cP}=W4(queueMicrotask,!1),X4=Pe.createContext({});function k6(e,t,r,n,s){var d,h;const{visualElement:l}=Pe.useContext(R_),_=Pe.useContext(G4),S=Pe.useContext(D_),E=Pe.useContext(nP).reducedMotion,A=Pe.useRef(null);n=n||_.renderer,!A.current&&n&&(A.current=n(e,{visualState:t,parent:l,props:r,presenceContext:S,blockInitialAnimation:S?S.initial===!1:!1,reducedMotionConfig:E}));const M=A.current,L=Pe.useContext(X4);M&&!M.projection&&s&&(M.type==="html"||M.type==="svg")&&O6(A.current,r,s,L);const U=Pe.useRef(!1);Pe.useInsertionEffect(()=>{M&&U.current&&M.update(r,S)});const N=r[K4],B=Pe.useRef(!!N&&!(!((d=window.MotionHandoffIsComplete)===null||d===void 0)&&d.call(window,N))&&((h=window.MotionHasOptimisedAnimation)===null||h===void 0?void 0:h.call(window,N)));return U4(()=>{M&&(U.current=!0,window.MotionIsMounted=!0,M.updateFeatures(),cP.render(M.render),B.current&&M.animationState&&M.animationState.animateChanges())}),Pe.useEffect(()=>{M&&(!B.current&&M.animationState&&M.animationState.animateChanges(),B.current&&(queueMicrotask(()=>{var Z;(Z=window.MotionHandoffMarkAsComplete)===null||Z===void 0||Z.call(window,N)}),B.current=!1))}),M}function O6(e,t,r,n){const{layoutId:s,layout:d,drag:h,dragConstraints:l,layoutScroll:_,layoutRoot:S}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:Y4(e.parent)),e.projection.setOptions({layoutId:s,layout:d,alwaysMeasureLayout:!!h||l&&Zd(l),visualElement:e,animationType:typeof d=="string"?d:"both",initialPromotionConfig:n,layoutScroll:_,layoutRoot:S})}function Y4(e){if(e)return e.options.allowProjection!==!1?e.projection:Y4(e.parent)}function D6({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:s}){var d,h;e&&b6(e);function l(S,E){let A;const M={...Pe.useContext(nP),...S,layoutId:R6(S)},{isStatic:L}=M,U=E6(S),N=n(S,L);if(!L&&iP){z6();const B=j6(M);A=B.MeasureLayout,U.visualElement=k6(s,N,M,t,B.ProjectionNode)}return K.jsxs(R_.Provider,{value:U,children:[A&&U.visualElement?K.jsx(A,{visualElement:U.visualElement,...M}):null,r(s,S,M6(N,U.visualElement,E),N,L,U.visualElement)]})}l.displayName=`motion.${typeof s=="string"?s:`create(${(h=(d=s.displayName)!==null&&d!==void 0?d:s.name)!==null&&h!==void 0?h:""})`}`;const _=Pe.forwardRef(l);return _[C6]=s,_}function R6({layoutId:e}){const t=Pe.useContext(tP).id;return t&&e!==void 0?t+"-"+e:e}function z6(e,t){Pe.useContext(G4).strict}function j6(e){const{drag:t,layout:r}=sp;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const L6=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hP(e){return typeof e!="string"||e.includes("-")?!1:!!(L6.indexOf(e)>-1||/[A-Z]/u.test(e))}function EA(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function fP(e,t,r,n){if(typeof t=="function"){const[s,d]=EA(n);t=t(r!==void 0?r:e.custom,s,d)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,d]=EA(n);t=t(r!==void 0?r:e.custom,s,d)}return t}const g2=e=>Array.isArray(e),B6=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),N6=e=>g2(e)?e[e.length-1]||0:e,Fa=e=>!!(e&&e.getVelocity);function mv(e){const t=Fa(e)?e.get():e;return B6(t)?t.toValue():t}function F6({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:r},n,s,d){const h={latestValues:$6(n,s,d,e),renderState:t()};return r&&(h.onMount=l=>r({props:n,current:l,...h}),h.onUpdate=l=>r(l)),h}const J4=e=>(t,r)=>{const n=Pe.useContext(R_),s=Pe.useContext(D_),d=()=>F6(e,t,n,s);return r?d():rP(d)};function $6(e,t,r,n){const s={},d=n(e,{});for(const M in d)s[M]=mv(d[M]);let{initial:h,animate:l}=e;const _=j_(e),S=Z4(e);t&&S&&!_&&e.inherit!==!1&&(h===void 0&&(h=t.initial),l===void 0&&(l=t.animate));let E=r?r.initial===!1:!1;E=E||h===!1;const A=E?l:h;if(A&&typeof A!="boolean"&&!z_(A)){const M=Array.isArray(A)?A:[A];for(let L=0;L<M.length;L++){const U=fP(e,M[L]);if(U){const{transitionEnd:N,transition:B,...Z}=U;for(const J in Z){let Q=Z[J];if(Array.isArray(Q)){const ie=E?Q.length-1:0;Q=Q[ie]}Q!==null&&(s[J]=Q)}for(const J in N)s[J]=N[J]}}}return s}const Dp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],$f=new Set(Dp),Q4=e=>t=>typeof t=="string"&&t.startsWith(e),eD=Q4("--"),V6=Q4("var(--"),dP=e=>V6(e)?U6.test(e.split("/*")[0].trim()):!1,U6=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,tD=(e,t)=>t&&typeof e=="number"?t.transform(e):e,ac=(e,t,r)=>r>t?t:r<e?e:r,Rp={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ng={...Rp,transform:e=>ac(0,1,e)},Jy={...Rp,default:1},qg=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Xc=qg("deg"),lu=qg("%"),dr=qg("px"),q6=qg("vh"),W6=qg("vw"),CA={...lu,parse:e=>lu.parse(e)/100,transform:e=>lu.transform(e*100)},G6={borderWidth:dr,borderTopWidth:dr,borderRightWidth:dr,borderBottomWidth:dr,borderLeftWidth:dr,borderRadius:dr,radius:dr,borderTopLeftRadius:dr,borderTopRightRadius:dr,borderBottomRightRadius:dr,borderBottomLeftRadius:dr,width:dr,maxWidth:dr,height:dr,maxHeight:dr,top:dr,right:dr,bottom:dr,left:dr,padding:dr,paddingTop:dr,paddingRight:dr,paddingBottom:dr,paddingLeft:dr,margin:dr,marginTop:dr,marginRight:dr,marginBottom:dr,marginLeft:dr,backgroundPositionX:dr,backgroundPositionY:dr},H6={rotate:Xc,rotateX:Xc,rotateY:Xc,rotateZ:Xc,scale:Jy,scaleX:Jy,scaleY:Jy,scaleZ:Jy,skew:Xc,skewX:Xc,skewY:Xc,distance:dr,translateX:dr,translateY:dr,translateZ:dr,x:dr,y:dr,z:dr,perspective:dr,transformPerspective:dr,opacity:ng,originX:CA,originY:CA,originZ:dr},MA={...Rp,transform:Math.round},pP={...G6,...H6,zIndex:MA,size:dr,fillOpacity:ng,strokeOpacity:ng,numOctaves:MA},Z6={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},K6=Dp.length;function X6(e,t,r){let n="",s=!0;for(let d=0;d<K6;d++){const h=Dp[d],l=e[h];if(l===void 0)continue;let _=!0;if(typeof l=="number"?_=l===(h.startsWith("scale")?1:0):_=parseFloat(l)===0,!_||r){const S=tD(l,pP[h]);if(!_){s=!1;const E=Z6[h]||h;n+=`${E}(${S}) `}r&&(t[h]=S)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function mP(e,t,r){const{style:n,vars:s,transformOrigin:d}=e;let h=!1,l=!1;for(const _ in t){const S=t[_];if($f.has(_)){h=!0;continue}else if(eD(_)){s[_]=S;continue}else{const E=tD(S,pP[_]);_.startsWith("origin")?(l=!0,d[_]=E):n[_]=E}}if(t.transform||(h||r?n.transform=X6(t,e.transform,r):n.transform&&(n.transform="none")),l){const{originX:_="50%",originY:S="50%",originZ:E=0}=d;n.transformOrigin=`${_} ${S} ${E}`}}const Y6={offset:"stroke-dashoffset",array:"stroke-dasharray"},J6={offset:"strokeDashoffset",array:"strokeDasharray"};function Q6(e,t,r=1,n=0,s=!0){e.pathLength=1;const d=s?Y6:J6;e[d.offset]=dr.transform(-n);const h=dr.transform(t),l=dr.transform(r);e[d.array]=`${h} ${l}`}function IA(e,t,r){return typeof e=="string"?e:dr.transform(t+r*e)}function eB(e,t,r){const n=IA(t,e.x,e.width),s=IA(r,e.y,e.height);return`${n} ${s}`}function gP(e,{attrX:t,attrY:r,attrScale:n,originX:s,originY:d,pathLength:h,pathSpacing:l=1,pathOffset:_=0,...S},E,A){if(mP(e,S,A),E){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:M,style:L,dimensions:U}=e;M.transform&&(U&&(L.transform=M.transform),delete M.transform),U&&(s!==void 0||d!==void 0||L.transform)&&(L.transformOrigin=eB(U,s!==void 0?s:.5,d!==void 0?d:.5)),t!==void 0&&(M.x=t),r!==void 0&&(M.y=r),n!==void 0&&(M.scale=n),h!==void 0&&Q6(M,h,l,_,!1)}const yP=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),rD=()=>({...yP(),attrs:{}}),vP=e=>typeof e=="string"&&e.toLowerCase()==="svg";function nD(e,{style:t,vars:r},n,s){Object.assign(e.style,t,s&&s.getProjectionStyles(n));for(const d in r)e.style.setProperty(d,r[d])}const iD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function aD(e,t,r,n){nD(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(iD.has(s)?s:uP(s),t.attrs[s])}const Pv={};function tB(e){Object.assign(Pv,e)}function oD(e,{layout:t,layoutId:r}){return $f.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Pv[e]||e==="opacity")}function _P(e,t,r){var n;const{style:s}=e,d={};for(const h in s)(Fa(s[h])||t.style&&Fa(t.style[h])||oD(h,e)||((n=r==null?void 0:r.getValue(h))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(d[h]=s[h]);return d}function sD(e,t,r){const n=_P(e,t,r);for(const s in e)if(Fa(e[s])||Fa(t[s])){const d=Dp.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[d]=e[s]}return n}function rB(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const kA=["x","y","width","height","cx","cy","r"],nB={useVisualState:J4({scrapeMotionValuesFromProps:sD,createRenderState:rD,onUpdate:({props:e,prevProps:t,current:r,renderState:n,latestValues:s})=>{if(!r)return;let d=!!e.drag;if(!d){for(const l in s)if($f.has(l)){d=!0;break}}if(!d)return;let h=!t;if(t)for(let l=0;l<kA.length;l++){const _=kA[l];e[_]!==t[_]&&(h=!0)}h&&Rn.read(()=>{rB(r,n),Rn.render(()=>{gP(n,s,vP(r.tagName),e.transformTemplate),aD(r,n)})})}})},iB={useVisualState:J4({scrapeMotionValuesFromProps:_P,createRenderState:yP})};function lD(e,t,r){for(const n in t)!Fa(t[n])&&!oD(n,r)&&(e[n]=t[n])}function aB({transformTemplate:e},t){return Pe.useMemo(()=>{const r=yP();return mP(r,t,e),Object.assign({},r.vars,r.style)},[t])}function oB(e,t){const r=e.style||{},n={};return lD(n,r,e),Object.assign(n,aB(e,t)),n}function sB(e,t){const r={},n=oB(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}function lB(e,t,r,n){const s=Pe.useMemo(()=>{const d=rD();return gP(d,t,vP(n),e.transformTemplate),{...d.attrs,style:{...d.style}}},[t]);if(e.style){const d={};lD(d,e.style,e),s.style={...d,...s.style}}return s}function uB(e=!1){return(r,n,s,{latestValues:d},h)=>{const _=(hP(r)?lB:sB)(n,d,h,r),S=P6(n,typeof r=="string",e),E=r!==Pe.Fragment?{...S,..._,ref:s}:{},{children:A}=n,M=Pe.useMemo(()=>Fa(A)?A.get():A,[A]);return Pe.createElement(r,{...E,children:M})}}function cB(e,t){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const h={...hP(n)?nB:iB,preloadedFeatures:e,useRender:uB(s),createVisualElement:t,Component:n};return D6(h)}}function uD(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function L_(e,t,r){const n=e.getProps();return fP(n,t,r!==void 0?r:n.custom,e)}const hB=oP(()=>window.ScrollTimeline!==void 0);class fB{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,r){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=r}attachTimeline(t,r){const n=this.animations.map(s=>{if(hB()&&s.attachTimeline)return s.attachTimeline(t);if(typeof r=="function")return r(s)});return()=>{n.forEach((s,d)=>{s&&s(),this.animations[d].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let r=0;r<this.animations.length;r++)t=Math.max(t,this.animations[r].duration);return t}runAll(t){this.animations.forEach(r=>r[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class dB extends fB{then(t,r){return Promise.all(this.animations).then(t).catch(r)}}function xP(e,t){return e?e[t]||e.default||e:void 0}const y2=2e4;function cD(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<y2;)t+=r,n=e.next(t);return t>=y2?1/0:t}function bP(e){return typeof e=="function"}function OA(e,t){e.timeline=t,e.onfinish=null}const wP=e=>Array.isArray(e)&&typeof e[0]=="number",pB={linearEasing:void 0};function mB(e,t){const r=oP(e);return()=>{var n;return(n=pB[t])!==null&&n!==void 0?n:r()}}const Tv=mB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hD=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let d=0;d<s;d++)n+=e(op(0,s-1,d))+", ";return`linear(${n.substring(0,n.length-2)})`};function fD(e){return!!(typeof e=="function"&&Tv()||!e||typeof e=="string"&&(e in v2||Tv())||wP(e)||Array.isArray(e)&&e.every(fD))}const Nm=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,v2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Nm([0,.65,.55,1]),circOut:Nm([.55,0,1,.45]),backIn:Nm([.31,.01,.66,-.59]),backOut:Nm([.33,1.53,.69,.99])};function dD(e,t){if(e)return typeof e=="function"&&Tv()?hD(e,t):wP(e)?Nm(e):Array.isArray(e)?e.map(r=>dD(r,t)||v2.easeOut):v2[e]}const hl={x:!1,y:!1};function pD(){return hl.x||hl.y}function gB(e,t,r){var n;if(e instanceof Element)return[e];if(typeof e=="string"){let s=document;const d=(n=void 0)!==null&&n!==void 0?n:s.querySelectorAll(e);return d?Array.from(d):[]}return Array.from(e)}function mD(e,t){const r=gB(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function DA(e){return t=>{t.pointerType==="touch"||pD()||e(t)}}function yB(e,t,r={}){const[n,s,d]=mD(e,r),h=DA(l=>{const{target:_}=l,S=t(l);if(typeof S!="function"||!_)return;const E=DA(A=>{S(A),_.removeEventListener("pointerleave",E)});_.addEventListener("pointerleave",E,s)});return n.forEach(l=>{l.addEventListener("pointerenter",h,s)}),d}const gD=(e,t)=>t?e===t?!0:gD(e,t.parentElement):!1,SP=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,vB=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function _B(e){return vB.has(e.tagName)||e.tabIndex!==-1}const Fm=new WeakSet;function RA(e){return t=>{t.key==="Enter"&&e(t)}}function X0(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const xB=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=RA(()=>{if(Fm.has(r))return;X0(r,"down");const s=RA(()=>{X0(r,"up")}),d=()=>X0(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",d,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function zA(e){return SP(e)&&!pD()}function bB(e,t,r={}){const[n,s,d]=mD(e,r),h=l=>{const _=l.currentTarget;if(!zA(l)||Fm.has(_))return;Fm.add(_);const S=t(l),E=(L,U)=>{window.removeEventListener("pointerup",A),window.removeEventListener("pointercancel",M),!(!zA(L)||!Fm.has(_))&&(Fm.delete(_),typeof S=="function"&&S(L,{success:U}))},A=L=>{E(L,r.useGlobalTarget||gD(_,L.target))},M=L=>{E(L,!1)};window.addEventListener("pointerup",A,s),window.addEventListener("pointercancel",M,s)};return n.forEach(l=>{!_B(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(r.useGlobalTarget?window:l).addEventListener("pointerdown",h,s),l.addEventListener("focus",S=>xB(S,s),s)}),d}function wB(e){return e==="x"||e==="y"?hl[e]?null:(hl[e]=!0,()=>{hl[e]=!1}):hl.x||hl.y?null:(hl.x=hl.y=!0,()=>{hl.x=hl.y=!1})}const yD=new Set(["width","height","top","left","right","bottom",...Dp]);let gv;function SB(){gv=void 0}const uu={now:()=>(gv===void 0&&uu.set(ga.isProcessing||v6.useManualTiming?ga.timestamp:performance.now()),gv),set:e=>{gv=e,queueMicrotask(SB)}};function PP(e,t){e.indexOf(t)===-1&&e.push(t)}function TP(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class AP{constructor(){this.subscriptions=[]}add(t){return PP(this.subscriptions,t),()=>TP(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let d=0;d<s;d++){const h=this.subscriptions[d];h&&h(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function vD(e,t){return t?e*(1e3/t):0}const jA=30,PB=e=>!isNaN(parseFloat(e));class TB{constructor(t,r={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{const d=uu.now();this.updatedAt!==d&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=uu.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=PB(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new AP);const n=this.events[t].add(r);return t==="change"?()=>{n(),Rn.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=uu.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>jA)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,jA);return vD(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ig(e,t){return new TB(e,t)}function AB(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,ig(r))}function EB(e,t){const r=L_(e,t);let{transitionEnd:n={},transition:s={},...d}=r||{};d={...d,...n};for(const h in d){const l=N6(d[h]);AB(e,h,l)}}function CB(e){return!!(Fa(e)&&e.add)}function _2(e,t){const r=e.getValue("willChange");if(CB(r))return r.add(t)}function _D(e){return e.props[K4]}const xD=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,MB=1e-7,IB=12;function kB(e,t,r,n,s){let d,h,l=0;do h=t+(r-t)/2,d=xD(h,n,s)-e,d>0?r=h:t=h;while(Math.abs(d)>MB&&++l<IB);return h}function Wg(e,t,r,n){if(e===t&&r===n)return rs;const s=d=>kB(d,0,1,e,r);return d=>d===0||d===1?d:xD(s(d),t,n)}const bD=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,wD=e=>t=>1-e(1-t),SD=Wg(.33,1.53,.69,.99),EP=wD(SD),PD=bD(EP),TD=e=>(e*=2)<1?.5*EP(e):.5*(2-Math.pow(2,-10*(e-1))),CP=e=>1-Math.sin(Math.acos(e)),AD=wD(CP),ED=bD(CP),CD=e=>/^0[^.\s]+$/u.test(e);function OB(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||CD(e):!0}const Wm=e=>Math.round(e*1e5)/1e5,MP=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function DB(e){return e==null}const RB=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,IP=(e,t)=>r=>!!(typeof r=="string"&&RB.test(r)&&r.startsWith(e)||t&&!DB(r)&&Object.prototype.hasOwnProperty.call(r,t)),MD=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,d,h,l]=n.match(MP);return{[e]:parseFloat(s),[t]:parseFloat(d),[r]:parseFloat(h),alpha:l!==void 0?parseFloat(l):1}},zB=e=>ac(0,255,e),Y0={...Rp,transform:e=>Math.round(zB(e))},Pf={test:IP("rgb","red"),parse:MD("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Y0.transform(e)+", "+Y0.transform(t)+", "+Y0.transform(r)+", "+Wm(ng.transform(n))+")"};function jB(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const x2={test:IP("#"),parse:jB,transform:Pf.transform},Kd={test:IP("hsl","hue"),parse:MD("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+lu.transform(Wm(t))+", "+lu.transform(Wm(r))+", "+Wm(ng.transform(n))+")"},ja={test:e=>Pf.test(e)||x2.test(e)||Kd.test(e),parse:e=>Pf.test(e)?Pf.parse(e):Kd.test(e)?Kd.parse(e):x2.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Pf.transform(e):Kd.transform(e)},LB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function BB(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(MP))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(LB))===null||r===void 0?void 0:r.length)||0)>0}const ID="number",kD="color",NB="var",FB="var(",LA="${}",$B=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ag(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let d=0;const l=t.replace($B,_=>(ja.test(_)?(n.color.push(d),s.push(kD),r.push(ja.parse(_))):_.startsWith(FB)?(n.var.push(d),s.push(NB),r.push(_)):(n.number.push(d),s.push(ID),r.push(parseFloat(_))),++d,LA)).split(LA);return{values:r,split:l,indexes:n,types:s}}function OD(e){return ag(e).values}function DD(e){const{split:t,types:r}=ag(e),n=t.length;return s=>{let d="";for(let h=0;h<n;h++)if(d+=t[h],s[h]!==void 0){const l=r[h];l===ID?d+=Wm(s[h]):l===kD?d+=ja.transform(s[h]):d+=s[h]}return d}}const VB=e=>typeof e=="number"?0:e;function UB(e){const t=OD(e);return DD(e)(t.map(VB))}const ah={test:BB,parse:OD,createTransformer:DD,getAnimatableNone:UB},qB=new Set(["brightness","contrast","saturate","opacity"]);function WB(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(MP)||[];if(!n)return e;const s=r.replace(n,"");let d=qB.has(t)?1:0;return n!==r&&(d*=100),t+"("+d+s+")"}const GB=/\b([a-z-]*)\(.*?\)/gu,b2={...ah,getAnimatableNone:e=>{const t=e.match(GB);return t?t.map(WB).join(" "):e}},HB={...pP,color:ja,backgroundColor:ja,outlineColor:ja,fill:ja,stroke:ja,borderColor:ja,borderTopColor:ja,borderRightColor:ja,borderBottomColor:ja,borderLeftColor:ja,filter:b2,WebkitFilter:b2},kP=e=>HB[e];function RD(e,t){let r=kP(e);return r!==b2&&(r=ah),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const ZB=new Set(["auto","none","0"]);function KB(e,t,r){let n=0,s;for(;n<e.length&&!s;){const d=e[n];typeof d=="string"&&!ZB.has(d)&&ag(d).values.length&&(s=e[n]),n++}if(s&&r)for(const d of t)e[d]=RD(r,s)}const BA=e=>e===Rp||e===dr,NA=(e,t)=>parseFloat(e.split(", ")[t]),FA=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/u);if(s)return NA(s[1],t);{const d=n.match(/^matrix\((.+)\)$/u);return d?NA(d[1],e):0}},XB=new Set(["x","y","z"]),YB=Dp.filter(e=>!XB.has(e));function JB(e){const t=[];return YB.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const lp={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:FA(4,13),y:FA(5,14)};lp.translateX=lp.x;lp.translateY=lp.y;const Mf=new Set;let w2=!1,S2=!1;function zD(){if(S2){const e=Array.from(Mf).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=JB(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([d,h])=>{var l;(l=n.getValue(d))===null||l===void 0||l.set(h)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}S2=!1,w2=!1,Mf.forEach(e=>e.complete()),Mf.clear()}function jD(){Mf.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(S2=!0)})}function QB(){jD(),zD()}class OP{constructor(t,r,n,s,d,h=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=d,this.isAsync=h}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Mf.add(this),w2||(w2=!0,Rn.read(jD),Rn.resolveKeyframes(zD))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;for(let d=0;d<t.length;d++)if(t[d]===null)if(d===0){const h=s==null?void 0:s.get(),l=t[t.length-1];if(h!==void 0)t[0]=h;else if(n&&r){const _=n.readValue(r,l);_!=null&&(t[0]=_)}t[0]===void 0&&(t[0]=l),s&&h===void 0&&s.set(t[0])}else t[d]=t[d-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Mf.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Mf.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const LD=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),eN=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function tN(e){const t=eN.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function BD(e,t,r=1){const[n,s]=tN(e);if(!n)return;const d=window.getComputedStyle(t).getPropertyValue(n);if(d){const h=d.trim();return LD(h)?parseFloat(h):h}return dP(s)?BD(s,t,r+1):s}const ND=e=>t=>t.test(e),rN={test:e=>e==="auto",parse:e=>e},FD=[Rp,dr,lu,Xc,W6,q6,rN],$A=e=>FD.find(ND(e));class $D extends OP{constructor(t,r,n,s,d){super(t,r,n,s,d,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let _=0;_<t.length;_++){let S=t[_];if(typeof S=="string"&&(S=S.trim(),dP(S))){const E=BD(S,r.current);E!==void 0&&(t[_]=E),_===t.length-1&&(this.finalKeyframe=S)}}if(this.resolveNoneKeyframes(),!yD.has(n)||t.length!==2)return;const[s,d]=t,h=$A(s),l=$A(d);if(h!==l)if(BA(h)&&BA(l))for(let _=0;_<t.length;_++){const S=t[_];typeof S=="string"&&(t[_]=parseFloat(S))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)OB(t[s])&&n.push(s);n.length&&KB(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=lp[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){var t;const{element:r,name:n,unresolvedKeyframes:s}=this;if(!r||!r.current)return;const d=r.getValue(n);d&&d.jump(this.measuredOrigin,!1);const h=s.length-1,l=s[h];s[h]=lp[n](r.measureViewportBox(),window.getComputedStyle(r.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([_,S])=>{r.getValue(_).set(S)}),this.resolveNoneKeyframes()}}const VA=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ah.test(e)||e==="0")&&!e.startsWith("url("));function nN(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function iN(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const d=e[e.length-1],h=VA(s,t),l=VA(d,t);return!h||!l?!1:nN(e)||(r==="spring"||bP(r))&&n}const aN=e=>e!==null;function B_(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(aN),d=t&&r!=="loop"&&t%2===1?0:s.length-1;return!d||n===void 0?s[d]:n}const oN=40;class VD{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:d=0,repeatType:h="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=uu.now(),this.options={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:d,repeatType:h,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>oN?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&QB(),this._resolved}onKeyframesResolved(t,r){this.resolvedAt=uu.now(),this.hasAttemptedResolve=!0;const{name:n,type:s,velocity:d,delay:h,onComplete:l,onUpdate:_,isGenerator:S}=this.options;if(!S&&!iN(t,n,s,d))if(h)this.options.duration=0;else{_&&_(B_(t,this.options,r)),l&&l(),this.resolveFinishedPromise();return}const E=this.initPlayback(t,r);E!==!1&&(this._resolved={keyframes:t,finalKeyframe:r,...E},this.onPostResolved())}onPostResolved(){}then(t,r){return this.currentFinishedPromise.then(t,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Wn=(e,t,r)=>e+(t-e)*r;function J0(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function sN({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,d=0,h=0;if(!t)s=d=h=r;else{const l=r<.5?r*(1+t):r+t-r*t,_=2*r-l;s=J0(_,l,e+1/3),d=J0(_,l,e),h=J0(_,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(d*255),blue:Math.round(h*255),alpha:n}}function Av(e,t){return r=>r>0?t:e}const Q0=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},lN=[x2,Pf,Kd],uN=e=>lN.find(t=>t.test(e));function UA(e){const t=uN(e);if(!t)return!1;let r=t.parse(e);return t===Kd&&(r=sN(r)),r}const qA=(e,t)=>{const r=UA(e),n=UA(t);if(!r||!n)return Av(e,t);const s={...r};return d=>(s.red=Q0(r.red,n.red,d),s.green=Q0(r.green,n.green,d),s.blue=Q0(r.blue,n.blue,d),s.alpha=Wn(r.alpha,n.alpha,d),Pf.transform(s))},cN=(e,t)=>r=>t(e(r)),Gg=(...e)=>e.reduce(cN),P2=new Set(["none","hidden"]);function hN(e,t){return P2.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function fN(e,t){return r=>Wn(e,t,r)}function DP(e){return typeof e=="number"?fN:typeof e=="string"?dP(e)?Av:ja.test(e)?qA:mN:Array.isArray(e)?UD:typeof e=="object"?ja.test(e)?qA:dN:Av}function UD(e,t){const r=[...e],n=r.length,s=e.map((d,h)=>DP(d)(d,t[h]));return d=>{for(let h=0;h<n;h++)r[h]=s[h](d);return r}}function dN(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=DP(e[s])(e[s],t[s]));return s=>{for(const d in n)r[d]=n[d](s);return r}}function pN(e,t){var r;const n=[],s={color:0,var:0,number:0};for(let d=0;d<t.values.length;d++){const h=t.types[d],l=e.indexes[h][s[h]],_=(r=e.values[l])!==null&&r!==void 0?r:0;n[d]=_,s[h]++}return n}const mN=(e,t)=>{const r=ah.createTransformer(t),n=ag(e),s=ag(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?P2.has(e)&&!s.values.length||P2.has(t)&&!n.values.length?hN(e,t):Gg(UD(pN(n,s),s.values),r):Av(e,t)};function qD(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Wn(e,t,r):DP(e)(e,t)}const gN=5;function WD(e,t,r){const n=Math.max(t-gN,0);return vD(r-e(n),t-n)}const Qn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ex=.001;function yN({duration:e=Qn.duration,bounce:t=Qn.bounce,velocity:r=Qn.velocity,mass:n=Qn.mass}){let s,d,h=1-t;h=ac(Qn.minDamping,Qn.maxDamping,h),e=ac(Qn.minDuration,Qn.maxDuration,tc(e)),h<1?(s=S=>{const E=S*h,A=E*e,M=E-r,L=T2(S,h),U=Math.exp(-A);return ex-M/L*U},d=S=>{const A=S*h*e,M=A*r+r,L=Math.pow(h,2)*Math.pow(S,2)*e,U=Math.exp(-A),N=T2(Math.pow(S,2),h);return(-s(S)+ex>0?-1:1)*((M-L)*U)/N}):(s=S=>{const E=Math.exp(-S*e),A=(S-r)*e+1;return-ex+E*A},d=S=>{const E=Math.exp(-S*e),A=(r-S)*(e*e);return E*A});const l=5/e,_=_N(s,d,l);if(e=ec(e),isNaN(_))return{stiffness:Qn.stiffness,damping:Qn.damping,duration:e};{const S=Math.pow(_,2)*n;return{stiffness:S,damping:h*2*Math.sqrt(n*S),duration:e}}}const vN=12;function _N(e,t,r){let n=r;for(let s=1;s<vN;s++)n=n-e(n)/t(n);return n}function T2(e,t){return e*Math.sqrt(1-t*t)}const xN=["duration","bounce"],bN=["stiffness","damping","mass"];function WA(e,t){return t.some(r=>e[r]!==void 0)}function wN(e){let t={velocity:Qn.velocity,stiffness:Qn.stiffness,damping:Qn.damping,mass:Qn.mass,isResolvedFromDuration:!1,...e};if(!WA(e,bN)&&WA(e,xN))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,d=2*ac(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Qn.mass,stiffness:s,damping:d}}else{const r=yN(e);t={...t,...r,mass:Qn.mass},t.isResolvedFromDuration=!0}return t}function GD(e=Qn.visualDuration,t=Qn.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const d=r.keyframes[0],h=r.keyframes[r.keyframes.length-1],l={done:!1,value:d},{stiffness:_,damping:S,mass:E,duration:A,velocity:M,isResolvedFromDuration:L}=wN({...r,velocity:-tc(r.velocity||0)}),U=M||0,N=S/(2*Math.sqrt(_*E)),B=h-d,Z=tc(Math.sqrt(_/E)),J=Math.abs(B)<5;n||(n=J?Qn.restSpeed.granular:Qn.restSpeed.default),s||(s=J?Qn.restDelta.granular:Qn.restDelta.default);let Q;if(N<1){const H=T2(Z,N);Q=X=>{const se=Math.exp(-N*Z*X);return h-se*((U+N*Z*B)/H*Math.sin(H*X)+B*Math.cos(H*X))}}else if(N===1)Q=H=>h-Math.exp(-Z*H)*(B+(U+Z*B)*H);else{const H=Z*Math.sqrt(N*N-1);Q=X=>{const se=Math.exp(-N*Z*X),fe=Math.min(H*X,300);return h-se*((U+N*Z*B)*Math.sinh(fe)+H*B*Math.cosh(fe))/H}}const ie={calculatedDuration:L&&A||null,next:H=>{const X=Q(H);if(L)l.done=H>=A;else{let se=0;N<1&&(se=H===0?ec(U):WD(Q,H,X));const fe=Math.abs(se)<=n,Se=Math.abs(h-X)<=s;l.done=fe&&Se}return l.value=l.done?h:X,l},toString:()=>{const H=Math.min(cD(ie),y2),X=hD(se=>ie.next(H*se).value,H,30);return H+"ms "+X}};return ie}function GA({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:d=500,modifyTarget:h,min:l,max:_,restDelta:S=.5,restSpeed:E}){const A=e[0],M={done:!1,value:A},L=fe=>l!==void 0&&fe<l||_!==void 0&&fe>_,U=fe=>l===void 0?_:_===void 0||Math.abs(l-fe)<Math.abs(_-fe)?l:_;let N=r*t;const B=A+N,Z=h===void 0?B:h(B);Z!==B&&(N=Z-A);const J=fe=>-N*Math.exp(-fe/n),Q=fe=>Z+J(fe),ie=fe=>{const Se=J(fe),Be=Q(fe);M.done=Math.abs(Se)<=S,M.value=M.done?Z:Be};let H,X;const se=fe=>{L(M.value)&&(H=fe,X=GD({keyframes:[M.value,U(M.value)],velocity:WD(Q,fe,M.value),damping:s,stiffness:d,restDelta:S,restSpeed:E}))};return se(0),{calculatedDuration:null,next:fe=>{let Se=!1;return!X&&H===void 0&&(Se=!0,ie(fe),se(fe)),H!==void 0&&fe>=H?X.next(fe-H):(!Se&&ie(fe),M)}}}const SN=Wg(.42,0,1,1),PN=Wg(0,0,.58,1),HD=Wg(.42,0,.58,1),TN=e=>Array.isArray(e)&&typeof e[0]!="number",AN={linear:rs,easeIn:SN,easeInOut:HD,easeOut:PN,circIn:CP,circInOut:ED,circOut:AD,backIn:EP,backInOut:PD,backOut:SD,anticipate:TD},HA=e=>{if(wP(e)){q4(e.length===4);const[t,r,n,s]=e;return Wg(t,r,n,s)}else if(typeof e=="string")return AN[e];return e};function EN(e,t,r){const n=[],s=r||qD,d=e.length-1;for(let h=0;h<d;h++){let l=s(e[h],e[h+1]);if(t){const _=Array.isArray(t)?t[h]||rs:t;l=Gg(_,l)}n.push(l)}return n}function CN(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const d=e.length;if(q4(d===t.length),d===1)return()=>t[0];if(d===2&&t[0]===t[1])return()=>t[1];const h=e[0]===e[1];e[0]>e[d-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=EN(t,n,s),_=l.length,S=E=>{if(h&&E<e[0])return t[0];let A=0;if(_>1)for(;A<e.length-2&&!(E<e[A+1]);A++);const M=op(e[A],e[A+1],E);return l[A](M)};return r?E=>S(ac(e[0],e[d-1],E)):S}function MN(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=op(0,t,n);e.push(Wn(r,1,s))}}function IN(e){const t=[0];return MN(t,e.length-1),t}function kN(e,t){return e.map(r=>r*t)}function ON(e,t){return e.map(()=>t||HD).splice(0,e.length-1)}function Ev({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=TN(n)?n.map(HA):HA(n),d={done:!1,value:t[0]},h=kN(r&&r.length===t.length?r:IN(t),e),l=CN(h,t,{ease:Array.isArray(s)?s:ON(t,s)});return{calculatedDuration:e,next:_=>(d.value=l(_),d.done=_>=e,d)}}const DN=e=>{const t=({timestamp:r})=>e(r);return{start:()=>Rn.update(t,!0),stop:()=>ih(t),now:()=>ga.isProcessing?ga.timestamp:uu.now()}},RN={decay:GA,inertia:GA,tween:Ev,keyframes:Ev,spring:GD},zN=e=>e/100;class RP extends VD{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:_}=this.options;_&&_()};const{name:r,motionValue:n,element:s,keyframes:d}=this.options,h=(s==null?void 0:s.KeyframeResolver)||OP,l=(_,S)=>this.onKeyframesResolved(_,S);this.resolver=new h(d,l,r,n,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:r="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:d,velocity:h=0}=this.options,l=bP(r)?r:RN[r]||Ev;let _,S;l!==Ev&&typeof t[0]!="number"&&(_=Gg(zN,qD(t[0],t[1])),t=[0,100]);const E=l({...this.options,keyframes:t});d==="mirror"&&(S=l({...this.options,keyframes:[...t].reverse(),velocity:-h})),E.calculatedDuration===null&&(E.calculatedDuration=cD(E));const{calculatedDuration:A}=E,M=A+s,L=M*(n+1)-s;return{generator:E,mirroredGenerator:S,mapPercentToKeyframes:_,calculatedDuration:A,resolvedDuration:M,totalDuration:L}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,r=!1){const{resolved:n}=this;if(!n){const{keyframes:fe}=this.options;return{done:!0,value:fe[fe.length-1]}}const{finalKeyframe:s,generator:d,mirroredGenerator:h,mapPercentToKeyframes:l,keyframes:_,calculatedDuration:S,totalDuration:E,resolvedDuration:A}=n;if(this.startTime===null)return d.next(0);const{delay:M,repeat:L,repeatType:U,repeatDelay:N,onUpdate:B}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-E/this.speed,this.startTime)),r?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const Z=this.currentTime-M*(this.speed>=0?1:-1),J=this.speed>=0?Z<0:Z>E;this.currentTime=Math.max(Z,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=E);let Q=this.currentTime,ie=d;if(L){const fe=Math.min(this.currentTime,E)/A;let Se=Math.floor(fe),Be=fe%1;!Be&&fe>=1&&(Be=1),Be===1&&Se--,Se=Math.min(Se,L+1),!!(Se%2)&&(U==="reverse"?(Be=1-Be,N&&(Be-=N/A)):U==="mirror"&&(ie=h)),Q=ac(0,1,Be)*A}const H=J?{done:!1,value:_[0]}:ie.next(Q);l&&(H.value=l(H.value));let{done:X}=H;!J&&S!==null&&(X=this.speed>=0?this.currentTime>=E:this.currentTime<=0);const se=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&X);return se&&s!==void 0&&(H.value=B_(_,this.options,s)),B&&B(H.value),se&&this.finish(),H}get duration(){const{resolved:t}=this;return t?tc(t.calculatedDuration):0}get time(){return tc(this.currentTime)}set time(t){t=ec(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=tc(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=DN,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=t(d=>this.tick(d))),r&&r();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const jN=new Set(["opacity","clipPath","filter","transform"]);function LN(e,t,r,{delay:n=0,duration:s=300,repeat:d=0,repeatType:h="loop",ease:l="easeInOut",times:_}={}){const S={[t]:r};_&&(S.offset=_);const E=dD(l,s);return Array.isArray(E)&&(S.easing=E),e.animate(S,{delay:n,duration:s,easing:Array.isArray(E)?"linear":E,fill:"both",iterations:d+1,direction:h==="reverse"?"alternate":"normal"})}const BN=oP(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Cv=10,NN=2e4;function FN(e){return bP(e.type)||e.type==="spring"||!fD(e.ease)}function $N(e,t){const r=new RP({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:e[0]};const s=[];let d=0;for(;!n.done&&d<NN;)n=r.sample(d),s.push(n.value),d+=Cv;return{times:void 0,keyframes:s,duration:d-Cv,ease:"linear"}}const ZD={anticipate:TD,backInOut:PD,circInOut:ED};function VN(e){return e in ZD}class ZA extends VD{constructor(t){super(t);const{name:r,motionValue:n,element:s,keyframes:d}=this.options;this.resolver=new $D(d,(h,l)=>this.onKeyframesResolved(h,l),r,n,s),this.resolver.scheduleResolve()}initPlayback(t,r){let{duration:n=300,times:s,ease:d,type:h,motionValue:l,name:_,startTime:S}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof d=="string"&&Tv()&&VN(d)&&(d=ZD[d]),FN(this.options)){const{onComplete:A,onUpdate:M,motionValue:L,element:U,...N}=this.options,B=$N(t,N);t=B.keyframes,t.length===1&&(t[1]=t[0]),n=B.duration,s=B.times,d=B.ease,h="keyframes"}const E=LN(l.owner.current,_,t,{...this.options,duration:n,times:s,ease:d});return E.startTime=S??this.calcStartTime(),this.pendingTimeline?(OA(E,this.pendingTimeline),this.pendingTimeline=void 0):E.onfinish=()=>{const{onComplete:A}=this.options;l.set(B_(t,this.options,r)),A&&A(),this.cancel(),this.resolveFinishedPromise()},{animation:E,duration:n,times:s,type:h,ease:d,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:r}=t;return tc(r)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:r}=t;return tc(r.currentTime||0)}set time(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=ec(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:r}=t;return r.playbackRate}set speed(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:r}=t;return r.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:r}=t;return r.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:r}=this;if(!r)return rs;const{animation:n}=r;OA(n,t)}return rs}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:r,keyframes:n,duration:s,type:d,ease:h,times:l}=t;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:S,onUpdate:E,onComplete:A,element:M,...L}=this.options,U=new RP({...L,keyframes:n,duration:s,type:d,ease:h,times:l,isGenerator:!0}),N=ec(this.time);S.setWithVelocity(U.sample(N-Cv).value,U.sample(N).value,Cv)}const{onStop:_}=this.options;_&&_(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:r,name:n,repeatDelay:s,repeatType:d,damping:h,type:l}=t;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:_,transformTemplate:S}=r.owner.getProps();return BN()&&n&&jN.has(n)&&!_&&!S&&!s&&d!=="mirror"&&h!==0&&l!=="inertia"}}const UN={type:"spring",stiffness:500,damping:25,restSpeed:10},qN=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),WN={type:"keyframes",duration:.8},GN={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},HN=(e,{keyframes:t})=>t.length>2?WN:$f.has(e)?e.startsWith("scale")?qN(t[1]):UN:GN;function ZN({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:d,repeatType:h,repeatDelay:l,from:_,elapsed:S,...E}){return!!Object.keys(E).length}const zP=(e,t,r,n={},s,d)=>h=>{const l=xP(n,e)||{},_=l.delay||n.delay||0;let{elapsed:S=0}=n;S=S-ec(_);let E={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-S,onUpdate:M=>{t.set(M),l.onUpdate&&l.onUpdate(M)},onComplete:()=>{h(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:d?void 0:s};ZN(l)||(E={...E,...HN(e,E)}),E.duration&&(E.duration=ec(E.duration)),E.repeatDelay&&(E.repeatDelay=ec(E.repeatDelay)),E.from!==void 0&&(E.keyframes[0]=E.from);let A=!1;if((E.type===!1||E.duration===0&&!E.repeatDelay)&&(E.duration=0,E.delay===0&&(A=!0)),A&&!d&&t.get()!==void 0){const M=B_(E.keyframes,l);if(M!==void 0)return Rn.update(()=>{E.onUpdate(M),E.onComplete()}),new dB([])}return!d&&ZA.supports(E)?new ZA(E):new RP(E)};function KN({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function KD(e,t,{delay:r=0,transitionOverride:n,type:s}={}){var d;let{transition:h=e.getDefaultTransition(),transitionEnd:l,..._}=t;n&&(h=n);const S=[],E=s&&e.animationState&&e.animationState.getState()[s];for(const A in _){const M=e.getValue(A,(d=e.latestValues[A])!==null&&d!==void 0?d:null),L=_[A];if(L===void 0||E&&KN(E,A))continue;const U={delay:r,...xP(h||{},A)};let N=!1;if(window.MotionHandoffAnimation){const Z=_D(e);if(Z){const J=window.MotionHandoffAnimation(Z,A,Rn);J!==null&&(U.startTime=J,N=!0)}}_2(e,A),M.start(zP(A,M,L,e.shouldReduceMotion&&yD.has(A)?{type:!1}:U,e,N));const B=M.animation;B&&S.push(B)}return l&&Promise.all(S).then(()=>{Rn.update(()=>{l&&EB(e,l)})}),S}function A2(e,t,r={}){var n;const s=L_(e,t,r.type==="exit"?(n=e.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:d=e.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(d=r.transitionOverride);const h=s?()=>Promise.all(KD(e,s,r)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(S=0)=>{const{delayChildren:E=0,staggerChildren:A,staggerDirection:M}=d;return XN(e,t,E+S,A,M,r)}:()=>Promise.resolve(),{when:_}=d;if(_){const[S,E]=_==="beforeChildren"?[h,l]:[l,h];return S().then(()=>E())}else return Promise.all([h(),l(r.delay)])}function XN(e,t,r=0,n=0,s=1,d){const h=[],l=(e.variantChildren.size-1)*n,_=s===1?(S=0)=>S*n:(S=0)=>l-S*n;return Array.from(e.variantChildren).sort(YN).forEach((S,E)=>{S.notify("AnimationStart",t),h.push(A2(S,t,{...d,delay:r+_(E)}).then(()=>S.notify("AnimationComplete",t)))}),Promise.all(h)}function YN(e,t){return e.sortNodePosition(t)}function JN(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(d=>A2(e,d,r));n=Promise.all(s)}else if(typeof t=="string")n=A2(e,t,r);else{const s=typeof t=="function"?L_(e,t,r.custom):t;n=Promise.all(KD(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}const QN=lP.length;function XD(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?XD(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<QN;r++){const n=lP[r],s=e.props[n];(rg(s)||s===!1)&&(t[n]=s)}return t}const eF=[...sP].reverse(),tF=sP.length;function rF(e){return t=>Promise.all(t.map(({animation:r,options:n})=>JN(e,r,n)))}function nF(e){let t=rF(e),r=KA(),n=!0;const s=_=>(S,E)=>{var A;const M=L_(e,E,_==="exit"?(A=e.presenceContext)===null||A===void 0?void 0:A.custom:void 0);if(M){const{transition:L,transitionEnd:U,...N}=M;S={...S,...N,...U}}return S};function d(_){t=_(e)}function h(_){const{props:S}=e,E=XD(e.parent)||{},A=[],M=new Set;let L={},U=1/0;for(let B=0;B<tF;B++){const Z=eF[B],J=r[Z],Q=S[Z]!==void 0?S[Z]:E[Z],ie=rg(Q),H=Z===_?J.isActive:null;H===!1&&(U=B);let X=Q===E[Z]&&Q!==S[Z]&&ie;if(X&&n&&e.manuallyAnimateOnMount&&(X=!1),J.protectedKeys={...L},!J.isActive&&H===null||!Q&&!J.prevProp||z_(Q)||typeof Q=="boolean")continue;const se=iF(J.prevProp,Q);let fe=se||Z===_&&J.isActive&&!X&&ie||B>U&&ie,Se=!1;const Be=Array.isArray(Q)?Q:[Q];let xe=Be.reduce(s(Z),{});H===!1&&(xe={});const{prevResolvedValues:$e={}}=J,Fe={...$e,...xe},Ke=Qe=>{fe=!0,M.has(Qe)&&(Se=!0,M.delete(Qe)),J.needsAnimating[Qe]=!0;const We=e.getValue(Qe);We&&(We.liveStyle=!1)};for(const Qe in Fe){const We=xe[Qe],tt=$e[Qe];if(L.hasOwnProperty(Qe))continue;let nt=!1;g2(We)&&g2(tt)?nt=!uD(We,tt):nt=We!==tt,nt?We!=null?Ke(Qe):M.add(Qe):We!==void 0&&M.has(Qe)?Ke(Qe):J.protectedKeys[Qe]=!0}J.prevProp=Q,J.prevResolvedValues=xe,J.isActive&&(L={...L,...xe}),n&&e.blockInitialAnimation&&(fe=!1),fe&&(!(X&&se)||Se)&&A.push(...Be.map(Qe=>({animation:Qe,options:{type:Z}})))}if(M.size){const B={};M.forEach(Z=>{const J=e.getBaseTarget(Z),Q=e.getValue(Z);Q&&(Q.liveStyle=!0),B[Z]=J??null}),A.push({animation:B})}let N=!!A.length;return n&&(S.initial===!1||S.initial===S.animate)&&!e.manuallyAnimateOnMount&&(N=!1),n=!1,N?t(A):Promise.resolve()}function l(_,S){var E;if(r[_].isActive===S)return Promise.resolve();(E=e.variantChildren)===null||E===void 0||E.forEach(M=>{var L;return(L=M.animationState)===null||L===void 0?void 0:L.setActive(_,S)}),r[_].isActive=S;const A=h(_);for(const M in r)r[M].protectedKeys={};return A}return{animateChanges:h,setActive:l,setAnimateFunction:d,getState:()=>r,reset:()=>{r=KA(),n=!0}}}function iF(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!uD(t,e):!1}function vf(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function KA(){return{animate:vf(!0),whileInView:vf(),whileHover:vf(),whileTap:vf(),whileDrag:vf(),whileFocus:vf(),exit:vf()}}class sh{constructor(t){this.isMounted=!1,this.node=t}update(){}}class aF extends sh{constructor(t){super(t),t.animationState||(t.animationState=nF(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();z_(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let oF=0;class sF extends sh{constructor(){super(...arguments),this.id=oF++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const lF={animation:{Feature:aF},exit:{Feature:sF}};function og(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function Hg(e){return{point:{x:e.pageX,y:e.pageY}}}const uF=e=>t=>SP(t)&&e(t,Hg(t));function Gm(e,t,r,n){return og(e,t,uF(r),n)}const XA=(e,t)=>Math.abs(e-t);function cF(e,t){const r=XA(e.x,t.x),n=XA(e.y,t.y);return Math.sqrt(r**2+n**2)}class YD{constructor(t,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:d=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=rx(this.lastMoveEventInfo,this.history),M=this.startEvent!==null,L=cF(A.offset,{x:0,y:0})>=3;if(!M&&!L)return;const{point:U}=A,{timestamp:N}=ga;this.history.push({...U,timestamp:N});const{onStart:B,onMove:Z}=this.handlers;M||(B&&B(this.lastMoveEvent,A),this.startEvent=this.lastMoveEvent),Z&&Z(this.lastMoveEvent,A)},this.handlePointerMove=(A,M)=>{this.lastMoveEvent=A,this.lastMoveEventInfo=tx(M,this.transformPagePoint),Rn.update(this.updatePoint,!0)},this.handlePointerUp=(A,M)=>{this.end();const{onEnd:L,onSessionEnd:U,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=rx(A.type==="pointercancel"?this.lastMoveEventInfo:tx(M,this.transformPagePoint),this.history);this.startEvent&&L&&L(A,B),U&&U(A,B)},!SP(t))return;this.dragSnapToOrigin=d,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const h=Hg(t),l=tx(h,this.transformPagePoint),{point:_}=l,{timestamp:S}=ga;this.history=[{..._,timestamp:S}];const{onSessionStart:E}=r;E&&E(t,rx(l,this.history)),this.removeListeners=Gg(Gm(this.contextWindow,"pointermove",this.handlePointerMove),Gm(this.contextWindow,"pointerup",this.handlePointerUp),Gm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ih(this.updatePoint)}}function tx(e,t){return t?{point:t(e.point)}:e}function YA(e,t){return{x:e.x-t.x,y:e.y-t.y}}function rx({point:e},t){return{point:e,delta:YA(e,JD(t)),offset:YA(e,hF(t)),velocity:fF(t,.1)}}function hF(e){return e[0]}function JD(e){return e[e.length-1]}function fF(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=JD(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>ec(t)));)r--;if(!n)return{x:0,y:0};const d=tc(s.timestamp-n.timestamp);if(d===0)return{x:0,y:0};const h={x:(s.x-n.x)/d,y:(s.y-n.y)/d};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}const QD=1e-4,dF=1-QD,pF=1+QD,eR=.01,mF=0-eR,gF=0+eR;function ns(e){return e.max-e.min}function yF(e,t,r){return Math.abs(e-t)<=r}function JA(e,t,r,n=.5){e.origin=n,e.originPoint=Wn(t.min,t.max,e.origin),e.scale=ns(r)/ns(t),e.translate=Wn(r.min,r.max,e.origin)-e.originPoint,(e.scale>=dF&&e.scale<=pF||isNaN(e.scale))&&(e.scale=1),(e.translate>=mF&&e.translate<=gF||isNaN(e.translate))&&(e.translate=0)}function Hm(e,t,r,n){JA(e.x,t.x,r.x,n?n.originX:void 0),JA(e.y,t.y,r.y,n?n.originY:void 0)}function QA(e,t,r){e.min=r.min+t.min,e.max=e.min+ns(t)}function vF(e,t,r){QA(e.x,t.x,r.x),QA(e.y,t.y,r.y)}function eE(e,t,r){e.min=t.min-r.min,e.max=e.min+ns(t)}function Zm(e,t,r){eE(e.x,t.x,r.x),eE(e.y,t.y,r.y)}function _F(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Wn(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Wn(r,e,n.max):Math.min(e,r)),e}function tE(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function xF(e,{top:t,left:r,bottom:n,right:s}){return{x:tE(e.x,r,s),y:tE(e.y,t,n)}}function rE(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function bF(e,t){return{x:rE(e.x,t.x),y:rE(e.y,t.y)}}function wF(e,t){let r=.5;const n=ns(e),s=ns(t);return s>n?r=op(t.min,t.max-n,e.min):n>s&&(r=op(e.min,e.max-s,t.min)),ac(0,1,r)}function SF(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const E2=.35;function PF(e=E2){return e===!1?e=0:e===!0&&(e=E2),{x:nE(e,"left","right"),y:nE(e,"top","bottom")}}function nE(e,t,r){return{min:iE(e,t),max:iE(e,r)}}function iE(e,t){return typeof e=="number"?e:e[t]||0}const aE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Xd=()=>({x:aE(),y:aE()}),oE=()=>({min:0,max:0}),li=()=>({x:oE(),y:oE()});function Os(e){return[e("x"),e("y")]}function tR({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function TF({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function AF(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function nx(e){return e===void 0||e===1}function C2({scale:e,scaleX:t,scaleY:r}){return!nx(e)||!nx(t)||!nx(r)}function xf(e){return C2(e)||rR(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function rR(e){return sE(e.x)||sE(e.y)}function sE(e){return e&&e!=="0%"}function Mv(e,t,r){const n=e-r,s=t*n;return r+s}function lE(e,t,r,n,s){return s!==void 0&&(e=Mv(e,s,n)),Mv(e,r,n)+t}function M2(e,t=0,r=1,n,s){e.min=lE(e.min,t,r,n,s),e.max=lE(e.max,t,r,n,s)}function nR(e,{x:t,y:r}){M2(e.x,t.translate,t.scale,t.originPoint),M2(e.y,r.translate,r.scale,r.originPoint)}const uE=.999999999999,cE=1.0000000000001;function EF(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let d,h;for(let l=0;l<s;l++){d=r[l],h=d.projectionDelta;const{visualElement:_}=d.options;_&&_.props.style&&_.props.style.display==="contents"||(n&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Jd(e,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),h&&(t.x*=h.x.scale,t.y*=h.y.scale,nR(e,h)),n&&xf(d.latestValues)&&Jd(e,d.latestValues))}t.x<cE&&t.x>uE&&(t.x=1),t.y<cE&&t.y>uE&&(t.y=1)}function Yd(e,t){e.min=e.min+t,e.max=e.max+t}function hE(e,t,r,n,s=.5){const d=Wn(e.min,e.max,s);M2(e,t,r,d,n)}function Jd(e,t){hE(e.x,t.x,t.scaleX,t.scale,t.originX),hE(e.y,t.y,t.scaleY,t.scale,t.originY)}function iR(e,t){return tR(AF(e.getBoundingClientRect(),t))}function CF(e,t,r){const n=iR(e,r),{scroll:s}=t;return s&&(Yd(n.x,s.offset.x),Yd(n.y,s.offset.y)),n}const aR=({current:e})=>e?e.ownerDocument.defaultView:null,MF=new WeakMap;class IF{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=li(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=E=>{const{dragSnapToOrigin:A}=this.getProps();A?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Hg(E).point)},d=(E,A)=>{const{drag:M,dragPropagation:L,onDragStart:U}=this.getProps();if(M&&!L&&(this.openDragLock&&this.openDragLock(),this.openDragLock=wB(M),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Os(B=>{let Z=this.getAxisMotionValue(B).get()||0;if(lu.test(Z)){const{projection:J}=this.visualElement;if(J&&J.layout){const Q=J.layout.layoutBox[B];Q&&(Z=ns(Q)*(parseFloat(Z)/100))}}this.originPoint[B]=Z}),U&&Rn.postRender(()=>U(E,A)),_2(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},h=(E,A)=>{const{dragPropagation:M,dragDirectionLock:L,onDirectionLock:U,onDrag:N}=this.getProps();if(!M&&!this.openDragLock)return;const{offset:B}=A;if(L&&this.currentDirection===null){this.currentDirection=kF(B),this.currentDirection!==null&&U&&U(this.currentDirection);return}this.updateAxis("x",A.point,B),this.updateAxis("y",A.point,B),this.visualElement.render(),N&&N(E,A)},l=(E,A)=>this.stop(E,A),_=()=>Os(E=>{var A;return this.getAnimationState(E)==="paused"&&((A=this.getAxisMotionValue(E).animation)===null||A===void 0?void 0:A.play())}),{dragSnapToOrigin:S}=this.getProps();this.panSession=new YD(t,{onSessionStart:s,onStart:d,onMove:h,onSessionEnd:l,resumeAnimation:_},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:S,contextWindow:aR(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:d}=this.getProps();d&&Rn.postRender(()=>d(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!Qy(t,s,this.currentDirection))return;const d=this.getAxisMotionValue(t);let h=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(h=_F(h,this.constraints[t],this.elastic[t])),d.set(h)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,d=this.constraints;r&&Zd(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=xF(s.layoutBox,r):this.constraints=!1,this.elastic=PF(n),d!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Os(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=SF(s.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Zd(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const d=CF(n,s.root,this.visualElement.getTransformPagePoint());let h=bF(s.layout.layoutBox,d);if(r){const l=r(TF(h));this.hasMutatedConstraints=!!l,l&&(h=tR(l))}return h}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:d,dragSnapToOrigin:h,onDragTransitionEnd:l}=this.getProps(),_=this.constraints||{},S=Os(E=>{if(!Qy(E,r,this.currentDirection))return;let A=_&&_[E]||{};h&&(A={min:0,max:0});const M=s?200:1e6,L=s?40:1e7,U={type:"inertia",velocity:n?t[E]:0,bounceStiffness:M,bounceDamping:L,timeConstant:750,restDelta:1,restSpeed:10,...d,...A};return this.startAxisValueAnimation(E,U)});return Promise.all(S).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return _2(this.visualElement,t),n.start(zP(t,n,0,r,this.visualElement,!1))}stopAnimation(){Os(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Os(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Os(r=>{const{drag:n}=this.getProps();if(!Qy(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,d=this.getAxisMotionValue(r);if(s&&s.layout){const{min:h,max:l}=s.layout.layoutBox[r];d.set(t[r]-Wn(h,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Zd(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Os(h=>{const l=this.getAxisMotionValue(h);if(l&&this.constraints!==!1){const _=l.get();s[h]=wF({min:_,max:_},this.constraints[h])}});const{transformTemplate:d}=this.visualElement.getProps();this.visualElement.current.style.transform=d?d({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Os(h=>{if(!Qy(h,t,null))return;const l=this.getAxisMotionValue(h),{min:_,max:S}=this.constraints[h];l.set(Wn(_,S,s[h]))})}addListeners(){if(!this.visualElement.current)return;MF.set(this.visualElement,this);const t=this.visualElement.current,r=Gm(t,"pointerdown",_=>{const{drag:S,dragListener:E=!0}=this.getProps();S&&E&&this.start(_)}),n=()=>{const{dragConstraints:_}=this.getProps();Zd(_)&&_.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,d=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Rn.read(n);const h=og(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",(({delta:_,hasLayoutChanged:S})=>{this.isDragging&&S&&(Os(E=>{const A=this.getAxisMotionValue(E);A&&(this.originPoint[E]+=_[E].translate,A.set(A.get()+_[E].translate))}),this.visualElement.render())}));return()=>{h(),r(),d(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:d=!1,dragElastic:h=E2,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:d,dragElastic:h,dragMomentum:l}}}function Qy(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function kF(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class OF extends sh{constructor(t){super(t),this.removeGroupControls=rs,this.removeListeners=rs,this.controls=new IF(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||rs}unmount(){this.removeGroupControls(),this.removeListeners()}}const fE=e=>(t,r)=>{e&&Rn.postRender(()=>e(t,r))};class DF extends sh{constructor(){super(...arguments),this.removePointerDownListener=rs}onPointerDown(t){this.session=new YD(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aR(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:fE(t),onStart:fE(r),onMove:n,onEnd:(d,h)=>{delete this.session,s&&Rn.postRender(()=>s(d,h))}}}mount(){this.removePointerDownListener=Gm(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const yv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function dE(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Mm={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(dr.test(e))e=parseFloat(e);else return e;const r=dE(e,t.target.x),n=dE(e,t.target.y);return`${r}% ${n}%`}},RF={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=ah.parse(e);if(s.length>5)return n;const d=ah.createTransformer(e),h=typeof s[0]!="number"?1:0,l=r.x.scale*t.x,_=r.y.scale*t.y;s[0+h]/=l,s[1+h]/=_;const S=Wn(l,_,.5);return typeof s[2+h]=="number"&&(s[2+h]/=S),typeof s[3+h]=="number"&&(s[3+h]/=S),d(s)}};class zF extends Pe.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:d}=t;tB(jF),d&&(r.group&&r.group.add(d),n&&n.register&&s&&n.register(d),d.root.didUpdate(),d.addEventListener("animationComplete",()=>{this.safeToRemove()}),d.setOptions({...d.options,onExitComplete:()=>this.safeToRemove()})),yv.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:d}=this.props,h=n.projection;return h&&(h.isPresent=d,s||t.layoutDependency!==r||r===void 0?h.willUpdate():this.safeToRemove(),t.isPresent!==d&&(d?h.promote():h.relegate()||Rn.postRender(()=>{const l=h.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),cP.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function oR(e){const[t,r]=V4(),n=Pe.useContext(tP);return K.jsx(zF,{...e,layoutGroup:n,switchLayoutGroup:Pe.useContext(X4),isPresent:t,safeToRemove:r})}const jF={borderRadius:{...Mm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Mm,borderTopRightRadius:Mm,borderBottomLeftRadius:Mm,borderBottomRightRadius:Mm,boxShadow:RF};function LF(e,t,r){const n=Fa(e)?e:ig(e);return n.start(zP("",n,t,r)),n.animation}function BF(e){return e instanceof SVGElement&&e.tagName!=="svg"}const NF=(e,t)=>e.depth-t.depth;class FF{constructor(){this.children=[],this.isDirty=!1}add(t){PP(this.children,t),this.isDirty=!0}remove(t){TP(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(NF),this.isDirty=!1,this.children.forEach(t)}}function $F(e,t){const r=uu.now(),n=({timestamp:s})=>{const d=s-r;d>=t&&(ih(n),e(d-t))};return Rn.read(n,!0),()=>ih(n)}const sR=["TopLeft","TopRight","BottomLeft","BottomRight"],VF=sR.length,pE=e=>typeof e=="string"?parseFloat(e):e,mE=e=>typeof e=="number"||dr.test(e);function UF(e,t,r,n,s,d){s?(e.opacity=Wn(0,r.opacity!==void 0?r.opacity:1,qF(n)),e.opacityExit=Wn(t.opacity!==void 0?t.opacity:1,0,WF(n))):d&&(e.opacity=Wn(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let h=0;h<VF;h++){const l=`border${sR[h]}Radius`;let _=gE(t,l),S=gE(r,l);if(_===void 0&&S===void 0)continue;_||(_=0),S||(S=0),_===0||S===0||mE(_)===mE(S)?(e[l]=Math.max(Wn(pE(_),pE(S),n),0),(lu.test(S)||lu.test(_))&&(e[l]+="%")):e[l]=S}(t.rotate||r.rotate)&&(e.rotate=Wn(t.rotate||0,r.rotate||0,n))}function gE(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const qF=lR(0,.5,AD),WF=lR(.5,.95,rs);function lR(e,t,r){return n=>n<e?0:n>t?1:r(op(e,t,n))}function yE(e,t){e.min=t.min,e.max=t.max}function Es(e,t){yE(e.x,t.x),yE(e.y,t.y)}function vE(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function _E(e,t,r,n,s){return e-=t,e=Mv(e,1/r,n),s!==void 0&&(e=Mv(e,1/s,n)),e}function GF(e,t=0,r=1,n=.5,s,d=e,h=e){if(lu.test(t)&&(t=parseFloat(t),t=Wn(h.min,h.max,t/100)-h.min),typeof t!="number")return;let l=Wn(d.min,d.max,n);e===d&&(l-=t),e.min=_E(e.min,t,r,l,s),e.max=_E(e.max,t,r,l,s)}function xE(e,t,[r,n,s],d,h){GF(e,t[r],t[n],t[s],t.scale,d,h)}const HF=["x","scaleX","originX"],ZF=["y","scaleY","originY"];function bE(e,t,r,n){xE(e.x,t,HF,r?r.x:void 0,n?n.x:void 0),xE(e.y,t,ZF,r?r.y:void 0,n?n.y:void 0)}function wE(e){return e.translate===0&&e.scale===1}function uR(e){return wE(e.x)&&wE(e.y)}function SE(e,t){return e.min===t.min&&e.max===t.max}function KF(e,t){return SE(e.x,t.x)&&SE(e.y,t.y)}function PE(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function cR(e,t){return PE(e.x,t.x)&&PE(e.y,t.y)}function TE(e){return ns(e.x)/ns(e.y)}function AE(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class XF{constructor(){this.members=[]}add(t){PP(this.members,t),t.scheduleRender()}remove(t){if(TP(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const d=this.members[s];if(d.isPresent!==!1){n=d;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function YF(e,t,r){let n="";const s=e.x.translate/t.x,d=e.y.translate/t.y,h=(r==null?void 0:r.z)||0;if((s||d||h)&&(n=`translate3d(${s}px, ${d}px, ${h}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:S,rotate:E,rotateX:A,rotateY:M,skewX:L,skewY:U}=r;S&&(n=`perspective(${S}px) ${n}`),E&&(n+=`rotate(${E}deg) `),A&&(n+=`rotateX(${A}deg) `),M&&(n+=`rotateY(${M}deg) `),L&&(n+=`skewX(${L}deg) `),U&&(n+=`skewY(${U}deg) `)}const l=e.x.scale*t.x,_=e.y.scale*t.y;return(l!==1||_!==1)&&(n+=`scale(${l}, ${_})`),n||"none"}const bf={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},$m=typeof window<"u"&&window.MotionDebug!==void 0,ix=["","X","Y","Z"],JF={visibility:"hidden"},EE=1e3;let QF=0;function ax(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function hR(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=_D(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:d}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Rn,!(s||d))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&hR(n)}function fR({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(h={},l=t==null?void 0:t()){this.id=QF++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,$m&&(bf.totalNodes=bf.resolvedTargetDeltas=bf.recalculatedProjection=0),this.nodes.forEach(r8),this.nodes.forEach(s8),this.nodes.forEach(l8),this.nodes.forEach(n8),$m&&window.MotionDebug.record(bf)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let _=0;_<this.path.length;_++)this.path[_].shouldResetTransform=!0;this.root===this&&(this.nodes=new FF)}addEventListener(h,l){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new AP),this.eventHandlers.get(h).add(l)}notifyListeners(h,...l){const _=this.eventHandlers.get(h);_&&_.notify(...l)}hasListeners(h){return this.eventHandlers.has(h)}mount(h,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=BF(h),this.instance=h;const{layoutId:_,layout:S,visualElement:E}=this.options;if(E&&!E.current&&E.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(S||_)&&(this.isLayoutDirty=!0),e){let A;const M=()=>this.root.updateBlockedByResize=!1;e(h,()=>{this.root.updateBlockedByResize=!0,A&&A(),A=$F(M,250),yv.hasAnimatedSinceResize&&(yv.hasAnimatedSinceResize=!1,this.nodes.forEach(ME))})}_&&this.root.registerSharedNode(_,this),this.options.animate!==!1&&E&&(_||S)&&this.addEventListener("didUpdate",({delta:A,hasLayoutChanged:M,hasRelativeTargetChanged:L,layout:U})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||E.getDefaultTransition()||d8,{onLayoutAnimationStart:B,onLayoutAnimationComplete:Z}=E.getProps(),J=!this.targetLayout||!cR(this.targetLayout,U)||L,Q=!M&&L;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||Q||M&&(J||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(A,Q);const ie={...xP(N,"layout"),onPlay:B,onComplete:Z};(E.shouldReduceMotion||this.options.layoutRoot)&&(ie.delay=0,ie.type=!1),this.startAnimation(ie)}else M||ME(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=U})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ih(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(u8),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&hR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let E=0;E<this.path.length;E++){const A=this.path[E];A.shouldResetTransform=!0,A.updateScroll("snapshot"),A.options.layoutRoot&&A.willUpdate(!1)}const{layoutId:l,layout:_}=this.options;if(l===void 0&&!_)return;const S=this.getTransformTemplate();this.prevTransformTemplateValue=S?S(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(CE);return}this.isUpdating||this.nodes.forEach(a8),this.isUpdating=!1,this.nodes.forEach(o8),this.nodes.forEach(e8),this.nodes.forEach(t8),this.clearAllSnapshots();const l=uu.now();ga.delta=ac(0,1e3/60,l-ga.timestamp),ga.timestamp=l,ga.isProcessing=!0,K0.update.process(ga),K0.preRender.process(ga),K0.render.process(ga),ga.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,cP.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(i8),this.sharedNodes.forEach(c8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Rn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Rn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let _=0;_<this.path.length;_++)this.path[_].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutCorrected=li(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(l=!1),l){const _=n(this.instance);this.scroll={animationId:this.root.animationId,phase:h,isRoot:_,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:_}}}resetTransform(){if(!s)return;const h=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!uR(this.projectionDelta),_=this.getTransformTemplate(),S=_?_(this.latestValues,""):void 0,E=S!==this.prevTransformTemplateValue;h&&(l||xf(this.latestValues)||E)&&(s(this.instance,S),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const l=this.measurePageBox();let _=this.removeElementScroll(l);return h&&(_=this.removeTransform(_)),p8(_),{animationId:this.root.animationId,measuredBox:l,layoutBox:_,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:l}=this.options;if(!l)return li();const _=l.measureViewportBox();if(!(((h=this.scroll)===null||h===void 0?void 0:h.wasRoot)||this.path.some(m8))){const{scroll:E}=this.root;E&&(Yd(_.x,E.offset.x),Yd(_.y,E.offset.y))}return _}removeElementScroll(h){var l;const _=li();if(Es(_,h),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return _;for(let S=0;S<this.path.length;S++){const E=this.path[S],{scroll:A,options:M}=E;E!==this.root&&A&&M.layoutScroll&&(A.wasRoot&&Es(_,h),Yd(_.x,A.offset.x),Yd(_.y,A.offset.y))}return _}applyTransform(h,l=!1){const _=li();Es(_,h);for(let S=0;S<this.path.length;S++){const E=this.path[S];!l&&E.options.layoutScroll&&E.scroll&&E!==E.root&&Jd(_,{x:-E.scroll.offset.x,y:-E.scroll.offset.y}),xf(E.latestValues)&&Jd(_,E.latestValues)}return xf(this.latestValues)&&Jd(_,this.latestValues),_}removeTransform(h){const l=li();Es(l,h);for(let _=0;_<this.path.length;_++){const S=this.path[_];if(!S.instance||!xf(S.latestValues))continue;C2(S.latestValues)&&S.updateSnapshot();const E=li(),A=S.measurePageBox();Es(E,A),bE(l,S.latestValues,S.snapshot?S.snapshot.layoutBox:void 0,E)}return xf(this.latestValues)&&bE(l,this.latestValues),l}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ga.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){var l;const _=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=_.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=_.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=_.isSharedProjectionDirty);const S=!!this.resumingFrom||this!==_;if(!(h||S&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:A,layoutId:M}=this.options;if(!(!this.layout||!(A||M))){if(this.resolvedRelativeTargetAt=ga.timestamp,!this.targetDelta&&!this.relativeTarget){const L=this.getClosestProjectingParent();L&&L.layout&&this.animationProgress!==1?(this.relativeParent=L,this.forceRelativeParentToResolveTarget(),this.relativeTarget=li(),this.relativeTargetOrigin=li(),Zm(this.relativeTargetOrigin,this.layout.layoutBox,L.layout.layoutBox),Es(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=li(),this.targetWithTransforms=li()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Es(this.target,this.layout.layoutBox),nR(this.target,this.targetDelta)):Es(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const L=this.getClosestProjectingParent();L&&!!L.resumingFrom==!!this.resumingFrom&&!L.options.layoutScroll&&L.target&&this.animationProgress!==1?(this.relativeParent=L,this.forceRelativeParentToResolveTarget(),this.relativeTarget=li(),this.relativeTargetOrigin=li(),Zm(this.relativeTargetOrigin,this.target,L.target),Es(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}$m&&bf.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||C2(this.parent.latestValues)||rR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var h;const l=this.getLead(),_=!!this.resumingFrom||this!==l;let S=!0;if((this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty)&&(S=!1),_&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(S=!1),this.resolvedRelativeTargetAt===ga.timestamp&&(S=!1),S)return;const{layout:E,layoutId:A}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(E||A))return;Es(this.layoutCorrected,this.layout.layoutBox);const M=this.treeScale.x,L=this.treeScale.y;EF(this.layoutCorrected,this.treeScale,this.path,_),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=li());const{target:U}=l;if(!U){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vE(this.prevProjectionDelta.x,this.projectionDelta.x),vE(this.prevProjectionDelta.y,this.projectionDelta.y)),Hm(this.projectionDelta,this.layoutCorrected,U,this.latestValues),(this.treeScale.x!==M||this.treeScale.y!==L||!AE(this.projectionDelta.x,this.prevProjectionDelta.x)||!AE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",U)),$m&&bf.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),h){const _=this.getStack();_&&_.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Xd(),this.projectionDelta=Xd(),this.projectionDeltaWithTransform=Xd()}setAnimationOrigin(h,l=!1){const _=this.snapshot,S=_?_.latestValues:{},E={...this.latestValues},A=Xd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const M=li(),L=_?_.source:void 0,U=this.layout?this.layout.source:void 0,N=L!==U,B=this.getStack(),Z=!B||B.members.length<=1,J=!!(N&&!Z&&this.options.crossfade===!0&&!this.path.some(f8));this.animationProgress=0;let Q;this.mixTargetDelta=ie=>{const H=ie/1e3;IE(A.x,h.x,H),IE(A.y,h.y,H),this.setTargetDelta(A),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Zm(M,this.layout.layoutBox,this.relativeParent.layout.layoutBox),h8(this.relativeTarget,this.relativeTargetOrigin,M,H),Q&&KF(this.relativeTarget,Q)&&(this.isProjectionDirty=!1),Q||(Q=li()),Es(Q,this.relativeTarget)),N&&(this.animationValues=E,UF(E,S,this.latestValues,H,J,Z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ih(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Rn.update(()=>{yv.hasAnimatedSinceResize=!0,this.currentAnimation=LF(0,EE,{...h,onUpdate:l=>{this.mixTargetDelta(l),h.onUpdate&&h.onUpdate(l)},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(EE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:l,target:_,layout:S,latestValues:E}=h;if(!(!l||!_||!S)){if(this!==h&&this.layout&&S&&dR(this.options.animationType,this.layout.layoutBox,S.layoutBox)){_=this.target||li();const A=ns(this.layout.layoutBox.x);_.x.min=h.target.x.min,_.x.max=_.x.min+A;const M=ns(this.layout.layoutBox.y);_.y.min=h.target.y.min,_.y.max=_.y.min+M}Es(l,_),Jd(l,E),Hm(this.projectionDeltaWithTransform,this.layoutCorrected,l,E)}}registerSharedNode(h,l){this.sharedNodes.has(h)||this.sharedNodes.set(h,new XF),this.sharedNodes.get(h).add(l);const S=l.options.initialPromotionConfig;l.promote({transition:S?S.transition:void 0,preserveFollowOpacity:S&&S.shouldPreserveFollowOpacity?S.shouldPreserveFollowOpacity(l):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){var h;const{layoutId:l}=this.options;return l?((h=this.getStack())===null||h===void 0?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:l}=this.options;return l?(h=this.getStack())===null||h===void 0?void 0:h.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:l,preserveFollowOpacity:_}={}){const S=this.getStack();S&&S.promote(this,_),h&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let l=!1;const{latestValues:_}=h;if((_.z||_.rotate||_.rotateX||_.rotateY||_.rotateZ||_.skewX||_.skewY)&&(l=!0),!l)return;const S={};_.z&&ax("z",h,S,this.animationValues);for(let E=0;E<ix.length;E++)ax(`rotate${ix[E]}`,h,S,this.animationValues),ax(`skew${ix[E]}`,h,S,this.animationValues);h.render();for(const E in S)h.setStaticValue(E,S[E]),this.animationValues&&(this.animationValues[E]=S[E]);h.scheduleRender()}getProjectionStyles(h){var l,_;if(!this.instance||this.isSVG)return;if(!this.isVisible)return JF;const S={visibility:""},E=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,S.opacity="",S.pointerEvents=mv(h==null?void 0:h.pointerEvents)||"",S.transform=E?E(this.latestValues,""):"none",S;const A=this.getLead();if(!this.projectionDelta||!this.layout||!A.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=mv(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!xf(this.latestValues)&&(N.transform=E?E({},""):"none",this.hasProjected=!1),N}const M=A.animationValues||A.latestValues;this.applyTransformsToTarget(),S.transform=YF(this.projectionDeltaWithTransform,this.treeScale,M),E&&(S.transform=E(M,S.transform));const{x:L,y:U}=this.projectionDelta;S.transformOrigin=`${L.origin*100}% ${U.origin*100}% 0`,A.animationValues?S.opacity=A===this?(_=(l=M.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&_!==void 0?_:1:this.preserveOpacity?this.latestValues.opacity:M.opacityExit:S.opacity=A===this?M.opacity!==void 0?M.opacity:"":M.opacityExit!==void 0?M.opacityExit:0;for(const N in Pv){if(M[N]===void 0)continue;const{correct:B,applyTo:Z}=Pv[N],J=S.transform==="none"?M[N]:B(M[N],A);if(Z){const Q=Z.length;for(let ie=0;ie<Q;ie++)S[Z[ie]]=J}else S[N]=J}return this.options.layoutId&&(S.pointerEvents=A===this?mv(h==null?void 0:h.pointerEvents)||"":"none"),S}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>{var l;return(l=h.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(CE),this.root.sharedNodes.clear()}}}function e8(e){e.updateLayout()}function t8(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:d}=e.options,h=r.source!==e.layout.source;d==="size"?Os(A=>{const M=h?r.measuredBox[A]:r.layoutBox[A],L=ns(M);M.min=n[A].min,M.max=M.min+L}):dR(d,r.layoutBox,n)&&Os(A=>{const M=h?r.measuredBox[A]:r.layoutBox[A],L=ns(n[A]);M.max=M.min+L,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[A].max=e.relativeTarget[A].min+L)});const l=Xd();Hm(l,n,r.layoutBox);const _=Xd();h?Hm(_,e.applyTransform(s,!0),r.measuredBox):Hm(_,n,r.layoutBox);const S=!uR(l);let E=!1;if(!e.resumeFrom){const A=e.getClosestProjectingParent();if(A&&!A.resumeFrom){const{snapshot:M,layout:L}=A;if(M&&L){const U=li();Zm(U,r.layoutBox,M.layoutBox);const N=li();Zm(N,n,L.layoutBox),cR(U,N)||(E=!0),A.options.layoutRoot&&(e.relativeTarget=N,e.relativeTargetOrigin=U,e.relativeParent=A)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:_,layoutDelta:l,hasLayoutChanged:S,hasRelativeTargetChanged:E})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function r8(e){$m&&bf.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function n8(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function i8(e){e.clearSnapshot()}function CE(e){e.clearMeasurements()}function a8(e){e.isLayoutDirty=!1}function o8(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ME(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function s8(e){e.resolveTargetDelta()}function l8(e){e.calcProjection()}function u8(e){e.resetSkewAndRotation()}function c8(e){e.removeLeadSnapshot()}function IE(e,t,r){e.translate=Wn(t.translate,0,r),e.scale=Wn(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function kE(e,t,r,n){e.min=Wn(t.min,r.min,n),e.max=Wn(t.max,r.max,n)}function h8(e,t,r,n){kE(e.x,t.x,r.x,n),kE(e.y,t.y,r.y,n)}function f8(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const d8={duration:.45,ease:[.4,0,.1,1]},OE=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),DE=OE("applewebkit/")&&!OE("chrome/")?Math.round:rs;function RE(e){e.min=DE(e.min),e.max=DE(e.max)}function p8(e){RE(e.x),RE(e.y)}function dR(e,t,r){return e==="position"||e==="preserve-aspect"&&!yF(TE(t),TE(r),.2)}function m8(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const g8=fR({attachResizeListener:(e,t)=>og(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ox={current:void 0},pR=fR({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ox.current){const e=new g8({});e.mount(window),e.setOptions({layoutScroll:!0}),ox.current=e}return ox.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),y8={pan:{Feature:DF},drag:{Feature:OF,ProjectionNode:pR,MeasureLayout:oR}};function zE(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,d=n[s];d&&Rn.postRender(()=>d(t,Hg(t)))}class v8 extends sh{mount(){const{current:t}=this.node;t&&(this.unmount=yB(t,r=>(zE(this.node,r,"Start"),n=>zE(this.node,n,"End"))))}unmount(){}}class _8 extends sh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Gg(og(this.node.current,"focus",()=>this.onFocus()),og(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function jE(e,t,r){const{props:n}=e;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),d=n[s];d&&Rn.postRender(()=>d(t,Hg(t)))}class x8 extends sh{mount(){const{current:t}=this.node;t&&(this.unmount=bB(t,r=>(jE(this.node,r,"Start"),(n,{success:s})=>jE(this.node,n,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const I2=new WeakMap,sx=new WeakMap,b8=e=>{const t=I2.get(e.target);t&&t(e)},w8=e=>{e.forEach(b8)};function S8({root:e,...t}){const r=e||document;sx.has(r)||sx.set(r,{});const n=sx.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(w8,{root:e,...t})),n[s]}function P8(e,t,r){const n=S8(t);return I2.set(e,r),n.observe(e),()=>{I2.delete(e),n.unobserve(e)}}const T8={some:0,all:1};class A8 extends sh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:d}=t,h={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:T8[s]},l=_=>{const{isIntersecting:S}=_;if(this.isInView===S||(this.isInView=S,d&&!S&&this.hasEnteredView))return;S&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",S);const{onViewportEnter:E,onViewportLeave:A}=this.node.getProps(),M=S?E:A;M&&M(_)};return P8(this.node.current,h,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(E8(t,r))&&this.startObserver()}unmount(){}}function E8({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const C8={inView:{Feature:A8},tap:{Feature:x8},focus:{Feature:_8},hover:{Feature:v8}},M8={layout:{ProjectionNode:pR,MeasureLayout:oR}},k2={current:null},mR={current:!1};function I8(){if(mR.current=!0,!!iP)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>k2.current=e.matches;e.addListener(t),t()}else k2.current=!1}const k8=[...FD,ja,ah],O8=e=>k8.find(ND(e)),LE=new WeakMap;function D8(e,t,r){for(const n in t){const s=t[n],d=r[n];if(Fa(s))e.addValue(n,s);else if(Fa(d))e.addValue(n,ig(s,{owner:e}));else if(d!==s)if(e.hasValue(n)){const h=e.getValue(n);h.liveStyle===!0?h.jump(s):h.hasAnimated||h.set(s)}else{const h=e.getStaticValue(n);e.addValue(n,ig(h!==void 0?h:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const BE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class R8{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:d,visualState:h},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=OP,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const L=uu.now();this.renderScheduledAt<L&&(this.renderScheduledAt=L,Rn.render(this.render,!1,!0))};const{latestValues:_,renderState:S,onUpdate:E}=h;this.onUpdate=E,this.latestValues=_,this.baseTarget={..._},this.initialValues=r.initial?{..._}:{},this.renderState=S,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!d,this.isControllingVariants=j_(r),this.isVariantNode=Z4(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:A,...M}=this.scrapeMotionValuesFromProps(r,{},this);for(const L in M){const U=M[L];_[L]!==void 0&&Fa(U)&&U.set(_[L],!1)}}mount(t){this.current=t,LE.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),mR.current||I8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:k2.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){LE.delete(this.current),this.projection&&this.projection.unmount(),ih(this.notifyUpdate),ih(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=$f.has(t),s=r.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Rn.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),d=r.on("renderRequest",this.scheduleRender);let h;window.MotionCheckAppearSync&&(h=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),d(),h&&h(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in sp){const r=sp[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const d=this.features[t];d.isMounted?d.update():(d.mount(),d.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):li()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<BE.length;n++){const s=BE[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const d="on"+s,h=t[d];h&&(this.propEventSubscriptions[s]=this.on(s,h))}this.prevMotionValues=D8(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=ig(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){var n;let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(LD(s)||CD(s))?s=parseFloat(s):!O8(s)&&ah.test(r)&&(s=RD(t,r)),this.setBaseTarget(t,Fa(s)?s.get():s)),Fa(s)?s.get():s}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const h=fP(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);h&&(s=h[t])}if(n&&s!==void 0)return s;const d=this.getBaseTargetFromProps(this.props,t);return d!==void 0&&!Fa(d)?d:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new AP),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class gR extends R8{constructor(){super(...arguments),this.KeyframeResolver=$D}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Fa(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function z8(e){return window.getComputedStyle(e)}class j8 extends gR{constructor(){super(...arguments),this.type="html",this.renderInstance=nD}readValueFromInstance(t,r){if($f.has(r)){const n=kP(r);return n&&n.default||0}else{const n=z8(t),s=(eD(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return iR(t,r)}build(t,r,n){mP(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return _P(t,r,n)}}class L8 extends gR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=li}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if($f.has(r)){const n=kP(r);return n&&n.default||0}return r=iD.has(r)?r:uP(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return sD(t,r,n)}build(t,r,n){gP(t,r,this.isSVGTag,n.transformTemplate)}renderInstance(t,r,n,s){aD(t,r,n,s)}mount(t){this.isSVGTag=vP(t.tagName),super.mount(t)}}const B8=(e,t)=>hP(e)?new L8(t):new j8(t,{allowProjection:e!==Pe.Fragment}),N8=cB({...lF,...C8,...y8,...M8},B8),Ur=T6(N8);function F8(){const[e,t]=Pe.useState(()=>localStorage.getItem("theme")==="dark");return Pe.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),K.jsx("div",{className:"theme-switch-sun-moon","data-dark-mode":e,onClick:()=>t(!e),title:"Toggle theme",children:K.jsx(Ur.div,{className:"theme-switch-handle",layout:!0,transition:{type:"spring",stiffness:500,damping:30},children:K.jsx("div",{className:"theme-switch-moon-crescent"})})})}function $8(){return K.jsx("header",{className:"navbar",children:K.jsxs("div",{className:"nav-container",children:[K.jsx(Ku,{to:"/",className:"nav-logo",children:"LODESTAR"}),K.jsxs("nav",{className:"nav-menu",children:[K.jsx(Ku,{to:"/about",className:"nav-links",children:"About"}),K.jsx(Ku,{to:"/maps",className:"nav-links",children:"Map"}),K.jsx(Ku,{to:"/alerts",className:"nav-links",children:"Alerts"}),K.jsx(Ku,{to:"/living-labs",className:"nav-links",children:"Living Labs"}),K.jsx(Ku,{to:"/serious-games",className:"nav-links",children:"Serious Games"}),K.jsx(Ku,{to:"/research",className:"nav-links",children:"Research"}),K.jsx(Ku,{to:"/team",className:"nav-links",children:"Team"}),K.jsx(Ku,{to:"/internal-access",className:"nav-links",children:"Internal Portal"})]}),K.jsx("div",{className:"nav-action-item",children:K.jsx(F8,{})})]})})}var yR={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},NE=ze.createContext&&ze.createContext(yR),V8=["attr","size","title"];function U8(e,t){if(e==null)return{};var r=q8(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function q8(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Iv(){return Iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Iv.apply(this,arguments)}function FE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FE(Object(r),!0).forEach(function(n){W8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W8(e,t,r){return t=G8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G8(e){var t=H8(e,"string");return typeof t=="symbol"?t:t+""}function H8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vR(e){return e&&e.map((t,r)=>ze.createElement(t.tag,kv({key:r},t.attr),vR(t.child)))}function rn(e){return t=>ze.createElement(Z8,Iv({attr:kv({},e.attr)},t),vR(e.child))}function Z8(e){var t=r=>{var{attr:n,size:s,title:d}=e,h=U8(e,V8),l=s||r.size||"1em",_;return r.className&&(_=r.className),e.className&&(_=(_?_+" ":"")+e.className),ze.createElement("svg",Iv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,h,{className:_,style:kv(kv({color:e.color||r.color},r.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),d&&ze.createElement("title",null,d),e.children)};return NE!==void 0?ze.createElement(NE.Consumer,null,r=>t(r)):t(yR)}function K8(e){return rn({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(e)}function X8(e){return rn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(e)}function vv(e){return rn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"},child:[]}]})(e)}function Y8(e){return rn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M208 0c-29.9 0-54.7 20.5-61.8 48.2-.8 0-1.4-.2-2.2-.2-35.3 0-64 28.7-64 64 0 4.8.6 9.5 1.7 14C52.5 138 32 166.6 32 200c0 12.6 3.2 24.3 8.3 34.9C16.3 248.7 0 274.3 0 304c0 33.3 20.4 61.9 49.4 73.9-.9 4.6-1.4 9.3-1.4 14.1 0 39.8 32.2 72 72 72 4.1 0 8.1-.5 12-1.2 9.6 28.5 36.2 49.2 68 49.2 39.8 0 72-32.2 72-72V64c0-35.3-28.7-64-64-64zm368 304c0-29.7-16.3-55.3-40.3-69.1 5.2-10.6 8.3-22.3 8.3-34.9 0-33.4-20.5-62-49.7-74 1-4.5 1.7-9.2 1.7-14 0-35.3-28.7-64-64-64-.8 0-1.5.2-2.2.2C422.7 20.5 397.9 0 368 0c-35.3 0-64 28.6-64 64v376c0 39.8 32.2 72 72 72 31.8 0 58.4-20.7 68-49.2 3.9.7 7.9 1.2 12 1.2 39.8 0 72-32.2 72-72 0-4.8-.5-9.5-1.4-14.1 29-12 49.4-40.6 49.4-73.9z"},child:[]}]})(e)}function J8(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M320 336c0 8.84-7.16 16-16 16h-96c-8.84 0-16-7.16-16-16v-48H0v144c0 25.6 22.4 48 48 48h416c25.6 0 48-22.4 48-48V288H320v48zm144-208h-80V80c0-25.6-22.4-48-48-48H176c-25.6 0-48 22.4-48 48v48H48c-25.6 0-48 22.4-48 48v80h512v-80c0-25.6-22.4-48-48-48zm-144 0H192V96h128v32z"},child:[]}]})(e)}function Q8(e){return rn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M150.94 192h33.73c11.01 0 18.61-10.83 14.86-21.18-4.93-13.58-7.55-27.98-7.55-42.82s2.62-29.24 7.55-42.82C203.29 74.83 195.68 64 184.67 64h-33.73c-7.01 0-13.46 4.49-15.41 11.23C130.64 92.21 128 109.88 128 128c0 18.12 2.64 35.79 7.54 52.76 1.94 6.74 8.39 11.24 15.4 11.24zM89.92 23.34C95.56 12.72 87.97 0 75.96 0H40.63c-6.27 0-12.14 3.59-14.74 9.31C9.4 45.54 0 85.65 0 128c0 24.75 3.12 68.33 26.69 118.86 2.62 5.63 8.42 9.14 14.61 9.14h34.84c12.02 0 19.61-12.74 13.95-23.37-49.78-93.32-16.71-178.15-.17-209.29zM614.06 9.29C611.46 3.58 605.6 0 599.33 0h-35.42c-11.98 0-19.66 12.66-14.02 23.25 18.27 34.29 48.42 119.42.28 209.23-5.72 10.68 1.8 23.52 13.91 23.52h35.23c6.27 0 12.13-3.58 14.73-9.29C630.57 210.48 640 170.36 640 128s-9.42-82.48-25.94-118.71zM489.06 64h-33.73c-11.01 0-18.61 10.83-14.86 21.18 4.93 13.58 7.55 27.98 7.55 42.82s-2.62 29.24-7.55 42.82c-3.76 10.35 3.85 21.18 14.86 21.18h33.73c7.02 0 13.46-4.49 15.41-11.24 4.9-16.97 7.53-34.64 7.53-52.76 0-18.12-2.64-35.79-7.54-52.76-1.94-6.75-8.39-11.24-15.4-11.24zm-116.3 100.12c7.05-10.29 11.2-22.71 11.2-36.12 0-35.35-28.63-64-63.96-64-35.32 0-63.96 28.65-63.96 64 0 13.41 4.15 25.83 11.2 36.12l-130.5 313.41c-3.4 8.15.46 17.52 8.61 20.92l29.51 12.31c8.15 3.4 17.52-.46 20.91-8.61L244.96 384h150.07l49.2 118.15c3.4 8.16 12.76 12.01 20.91 8.61l29.51-12.31c8.15-3.4 12-12.77 8.61-20.92l-130.5-313.41zM271.62 320L320 203.81 368.38 320h-96.76z"},child:[]}]})(e)}function e$(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(e)}function t$(e){return rn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M510.5 225.5c-6.9-37.2-39.3-65.5-78.5-65.5-12.3 0-23.9 3-34.3 8-17.4-24.1-45.6-40-77.7-40-53 0-96 43-96 96 0 .5.2 1.1.2 1.6C187.6 233 160 265.2 160 304c0 44.2 35.8 80 80 80h256c44.2 0 80-35.8 80-80 0-39.2-28.2-71.7-65.5-78.5zm-386.4 34.4c-37.4-37.4-37.4-98.3 0-135.8 34.6-34.6 89.1-36.8 126.7-7.4 20-12.9 43.6-20.7 69.2-20.7.7 0 1.3.2 2 .2l8.9-26.7c3.4-10.2-6.3-19.8-16.5-16.4l-75.3 25.1-35.5-71c-4.8-9.6-18.5-9.6-23.3 0l-35.5 71-75.3-25.1c-10.2-3.4-19.8 6.3-16.4 16.5l25.1 75.3-71 35.5c-9.6 4.8-9.6 18.5 0 23.3l71 35.5-25.1 75.3c-3.4 10.2 6.3 19.8 16.5 16.5l59.2-19.7c-.2-2.4-.7-4.7-.7-7.2 0-12.5 2.3-24.5 6.2-35.9-3.6-2.7-7.1-5.2-10.2-8.3zm69.8-58c4.3-24.5 15.8-46.4 31.9-64-9.8-6.2-21.4-9.9-33.8-9.9-35.3 0-64 28.7-64 64 0 18.7 8.2 35.4 21.1 47.1 11.3-15.9 26.6-28.9 44.8-37.2zm330.6 216.2c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8zm-96 0c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8zm-96 0c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8zm-96 0c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8z"},child:[]}]})(e)}function r$(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128 272c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(e)}function n$(e){return rn({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M225.38 233.37c-12.5 12.5-12.5 32.76 0 45.25 12.49 12.5 32.76 12.5 45.25 0 12.5-12.5 12.5-32.76 0-45.25-12.5-12.49-32.76-12.49-45.25 0zM248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm126.14 148.05L308.17 300.4a31.938 31.938 0 0 1-15.77 15.77l-144.34 65.97c-16.65 7.61-33.81-9.55-26.2-26.2l65.98-144.35a31.938 31.938 0 0 1 15.77-15.77l144.34-65.97c16.65-7.6 33.8 9.55 26.19 26.2z"},child:[]}]})(e)}function i$(e){return rn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"},child:[]}]})(e)}function a$(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(e)}function o$(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 168v-16c0-13.255 10.745-24 24-24h360V80c0-21.367 25.899-32.042 40.971-16.971l80 80c9.372 9.373 9.372 24.569 0 33.941l-80 80C409.956 271.982 384 261.456 384 240v-48H24c-13.255 0-24-10.745-24-24zm488 152H128v-48c0-21.314-25.862-32.08-40.971-16.971l-80 80c-9.372 9.373-9.372 24.569 0 33.941l80 80C102.057 463.997 128 453.437 128 432v-48h360c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24z"},child:[]}]})(e)}function s$(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function l$(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"},child:[]}]})(e)}function u$(e){return rn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480.07 96H160a160 160 0 1 0 114.24 272h91.52A160 160 0 1 0 480.07 96zM248 268a12 12 0 0 1-12 12h-52v52a12 12 0 0 1-12 12h-24a12 12 0 0 1-12-12v-52H84a12 12 0 0 1-12-12v-24a12 12 0 0 1 12-12h52v-52a12 12 0 0 1 12-12h24a12 12 0 0 1 12 12v52h52a12 12 0 0 1 12 12zm216 76a40 40 0 1 1 40-40 40 40 0 0 1-40 40zm64-96a40 40 0 1 1 40-40 40 40 0 0 1-40 40z"},child:[]}]})(e)}function _R(e){return rn({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"},child:[]}]})(e)}function c$(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(e)}function h$(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M12.41 148.02l232.94 105.67c6.8 3.09 14.49 3.09 21.29 0l232.94-105.67c16.55-7.51 16.55-32.52 0-40.03L266.65 2.31a25.607 25.607 0 0 0-21.29 0L12.41 107.98c-16.55 7.51-16.55 32.53 0 40.04zm487.18 88.28l-58.09-26.33-161.64 73.27c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.51 209.97l-58.1 26.33c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 276.3c16.55-7.5 16.55-32.5 0-40zm0 127.8l-57.87-26.23-161.86 73.37c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.29 337.87 12.41 364.1c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 404.1c16.55-7.5 16.55-32.5 0-40z"},child:[]}]})(e)}function f$(e){return rn({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(e)}function d$(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M507.31 84.69L464 41.37c-6-6-14.14-9.37-22.63-9.37H288V16c0-8.84-7.16-16-16-16h-32c-8.84 0-16 7.16-16 16v16H56c-13.25 0-24 10.75-24 24v80c0 13.25 10.75 24 24 24h385.37c8.49 0 16.62-3.37 22.63-9.37l43.31-43.31c6.25-6.26 6.25-16.38 0-22.63zM224 496c0 8.84 7.16 16 16 16h32c8.84 0 16-7.16 16-16V384h-64v112zm232-272H288v-32h-64v32H70.63c-8.49 0-16.62 3.37-22.63 9.37L4.69 276.69c-6.25 6.25-6.25 16.38 0 22.63L48 342.63c6 6 14.14 9.37 22.63 9.37H456c13.25 0 24-10.75 24-24v-80c0-13.25-10.75-24-24-24z"},child:[]}]})(e)}function p$(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(e)}function m$(e){return rn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(e)}function g$(e){return rn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M519.442 288.651c-41.519 0-59.5 31.593-82.058 31.593C377.409 320.244 432 144 432 144s-196.288 80-196.288-3.297c0-35.827 36.288-46.25 36.288-85.985C272 19.216 243.885 0 210.539 0c-34.654 0-66.366 18.891-66.366 56.346 0 41.364 31.711 59.277 31.711 81.75C175.885 207.719 0 166.758 0 166.758v333.237s178.635 41.047 178.635-28.662c0-22.473-40-40.107-40-81.471 0-37.456 29.25-56.346 63.577-56.346 33.673 0 61.788 19.216 61.788 54.717 0 39.735-36.288 50.158-36.288 85.985 0 60.803 129.675 25.73 181.23 25.73 0 0-34.725-120.101 25.827-120.101 35.962 0 46.423 36.152 86.308 36.152C556.712 416 576 387.99 576 354.443c0-34.199-18.962-65.792-56.558-65.792z"},child:[]}]})(e)}function y$(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(e)}function v$(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M139.61 35.5a12 12 0 0 0-17 0L58.93 98.81l-22.7-22.12a12 12 0 0 0-17 0L3.53 92.41a12 12 0 0 0 0 17l47.59 47.4a12.78 12.78 0 0 0 17.61 0l15.59-15.62L156.52 69a12.09 12.09 0 0 0 .09-17zm0 159.19a12 12 0 0 0-17 0l-63.68 63.72-22.7-22.1a12 12 0 0 0-17 0L3.53 252a12 12 0 0 0 0 17L51 316.5a12.77 12.77 0 0 0 17.6 0l15.7-15.69 72.2-72.22a12 12 0 0 0 .09-16.9zM64 368c-26.49 0-48.59 21.5-48.59 48S37.53 464 64 464a48 48 0 0 0 0-96zm432 16H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(e)}function xR(e){return rn({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function _$(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"},child:[]}]})(e)}function x$(e){return rn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function b$(e){return rn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}function lx(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(e)}function w$(){return K.jsxs("footer",{className:"footer",children:[K.jsxs("div",{className:"footer-content container",children:[K.jsxs("div",{className:"footer-logo-group",children:[K.jsx(_R,{}),K.jsx("h3",{children:"LODESTAR Project"})]}),K.jsx("p",{className:"footer-description",children:"A collaborative India-Netherlands initiative to build a low-cost, multi-hazard early warning system for communities at risk."}),K.jsxs("div",{className:"footer-links",children:[K.jsx("a",{href:"https://www.iittp.ac.in/",target:"_blank",rel:"noopener noreferrer",children:"IIT Tirupati"}),K.jsx("span",{children:""}),K.jsx("a",{href:"https://www.iitg.ac.in/",target:"_blank",rel:"noopener noreferrer",children:"IIT Guwahati"}),K.jsx("span",{children:""}),K.jsx("a",{href:"https://www.iisc.ac.in/",target:"_blank",rel:"noopener noreferrer",children:"IISc Bangalore"}),K.jsx("span",{children:""}),K.jsx("a",{href:"https://www.wur.nl/en/wageningen-university.htm",target:"_blank",rel:"noopener noreferrer",children:"Wageningen University & Research"}),K.jsx("span",{children:""}),K.jsx("a",{href:"https://metameta.nl/",target:"_blank",rel:"noopener noreferrer",children:"MetaMeta"}),K.jsx("span",{children:""}),K.jsx("a",{href:"https://cstep.in/",target:"_blank",rel:"noopener noreferrer",children:"CSTEP"})]})]}),K.jsxs("div",{className:"footer-bottom-bar",children:[K.jsx("p",{children:" 2025 LODESTAR Project Consortium | Funded by DST (India) & NWO (Netherlands)"}),K.jsx("div",{className:"footer-credits",children:K.jsx("span",{children:"Dashboard by IIT Tirupati"})})]})]})}function S$(){const[e,t]=Pe.useState(!1),r=()=>{window.scrollY>window.innerHeight?t(!0):t(!1)},n=()=>{window.scrollTo({top:0,behavior:"smooth"})};return Pe.useEffect(()=>(window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r)}),[]),K.jsx(aP,{children:e&&K.jsx(Ur.button,{onClick:n,className:"scroll-to-top-btn","aria-label":"Scroll to top",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},children:K.jsx("span",{className:"scroll-to-top-arrow"})})})}function P$({children:e}){const r=Op().pathname!=="/maps";return K.jsxs("div",{className:"app-container",children:[K.jsx($8,{}),K.jsx("main",{className:"main-content",children:e}),r&&K.jsx(w$,{}),K.jsx(S$,{})]})}const T$=[{name:"Bengaluru, India",hazard:"Urban Floods",country:"India"},{name:"Guwahati, India",hazard:"Compound Pluvial & Fluvial Floods",country:"India"},{name:"Anantapur, India",hazard:"Compound Flood & Drought Events",country:"India"},{name:"Dordrecht, NL",hazard:"Urban Floods & Evacuation Planning",country:"Netherlands"},{name:"Tilburg & Breda, NL",hazard:"Droughts & Urban Development",country:"Netherlands"}],A$=[{icon:K.jsx(Q8,{}),title:"Early Warning System",text:"Developing a multi-hazard EWS for both single and compound events."},{icon:K.jsx(b$,{}),title:"Living Labs",text:"Co-creating solutions through participatory workshops with citizens and experts."},{icon:K.jsx(Y8,{}),title:"Citizen Science",text:"Integrating local knowledge and real-time, user-submitted data into scientific models."},{icon:K.jsx(y$,{}),title:"Disaster Management",text:"Enhancing the resilience of at-risk communities against extreme climate events."}];function E$(){return K.jsxs("div",{children:[K.jsxs("section",{className:"hero-section",children:[K.jsx("div",{className:"hero-background-shape"}),K.jsxs("div",{className:"container hero-content",children:[K.jsx("h1",{className:"hero-title",children:"LODESTAR"}),K.jsx("p",{className:"hero-subtitle",children:"Low-cost Disaster & Emergency Services for Communities At Risk"}),K.jsx("p",{className:"hero-description",children:"A collaborative India-Netherlands project to build a reliable, low-cost, multi-hazard early warning system for floods and droughts, integrating advanced technology with community-led citizen science."})]})]}),K.jsx("section",{className:"concepts-section",children:K.jsxs("div",{className:"container",children:[K.jsx("h2",{className:"section-title",children:"Core Concepts"}),K.jsx("div",{className:"concepts-grid",children:A$.map(e=>K.jsxs("div",{className:"concept-card",children:[K.jsx("div",{className:"concept-icon",children:e.icon}),K.jsx("h3",{className:"concept-title",children:e.title}),K.jsx("p",{className:"concept-text",children:e.text})]},e.title))})]})}),K.jsxs(Ur.section,{className:"cta-map-section",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0,amount:.5},transition:{duration:.8},children:[K.jsx("div",{className:"cta-map-overlay"}),K.jsxs("div",{className:"container cta-map-content",children:[K.jsx("h2",{children:"Explore the Geo-Dashboard"}),K.jsx("p",{children:"View real-time data, forecasts, and active alerts on our interactive map."}),K.jsxs(eP,{to:"/maps",className:"cta-map-button",children:["Launch Interactive Map ",K.jsx(X8,{})]})]})]}),K.jsx("section",{className:"sites-section",children:K.jsxs("div",{className:"container",children:[K.jsx("h2",{className:"section-title",children:"Our Study Sites"}),K.jsx("div",{className:"sites-grid",children:T$.map(e=>K.jsxs("div",{className:"site-card-home",children:[K.jsx("div",{className:`site-flag ${e.country.toLowerCase()}`}),K.jsx("h3",{className:"site-name",children:e.name}),K.jsxs("p",{className:"site-hazard",children:[K.jsx("strong",{children:"Focus:"})," ",e.hazard]})]},e.name))})]})})]})}const C$=[{id:"RO1",text:"To develop socio-technical disaster and emergency (early warning) services (MH-EWS dashboards) to address the challenges of extreme compound disaster events in India and the Netherlands."},{id:"RO2",text:"To improve flood and drought modelling and user interface by focusing on innovative technologies, to arrive at an integrated MH-EWS for floods and/or droughts."},{id:"RO3",text:"To develop socio-cultural and management innovations via living labs, necessary for implementing new technologies and accelerating uptake, while ensuring long-term sustainability."}],M$=[{title:"WS 1: Disaster Context & Knowledge Gaps",description:"Sets the disaster context by taking stock of existing systems and identifying socio-technical knowledge gaps in flood and drought management to build a foundation for the project."},{title:"WS 2: Real-time Data Assimilation",description:"Conducts real-time hydrometeorological data assimilation using computer vision-based algorithms and extended weather forecasts, leveraging low-cost sensors and citizen science."},{title:"WS 3: Citizen Science & Living Labs",description:"Creates synergy between citizens, academics, and professionals using 'living labs' and 'serious games' to facilitate knowledge exchange, co-create solutions, and ensure the EWS meets user needs."},{title:"WS 4: Integrated Dashboard & Forecasting",description:"Develops a multi-hazard forecast framework using an ensemble of models (AI/ML, process-based) to co-create a user-centric, integrated MH-EWS dashboard for mobile and web."},{title:"WS 5: Capacity Building & Internationalization",description:"Builds the disaster management capacity of all partners and external stakeholders in India and the Netherlands through training, workshops, summer academies, and international outreach."}];function I$(){return K.jsxs("div",{children:[K.jsx(Ur.section,{className:"hero-section-about",initial:{opacity:0},animate:{opacity:1},transition:{duration:.7},children:K.jsxs("div",{className:"container",children:[K.jsx("h1",{className:"hero-title-about",children:"About The LODESTAR Project"}),K.jsx("p",{className:"hero-subtitle-about",children:"Understanding the vision, objectives, and methodology behind our collaborative effort to build disaster resilience."})]})}),K.jsx("section",{className:"page-section",children:K.jsx("div",{className:"container",children:K.jsxs("div",{className:"about-grid",children:[K.jsx(Ur.div,{className:"about-grid-title",initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0,amount:.5},transition:{duration:.6},children:K.jsx("h2",{children:"The Challenge & Our Vision"})}),K.jsxs("div",{className:"about-grid-content",children:[K.jsxs(Ur.div,{className:"text-block",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.6},children:[K.jsx("h4",{children:"The Challenge"}),K.jsx("p",{children:`Existing Early Warning Systems often lack sufficient lead times and fail to integrate crucial community knowledge. This creates a "know-do gap," where warnings don't translate into effective local actions.`})]}),K.jsxs(Ur.div,{className:"text-block",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.6,delay:.2},children:[K.jsx("h4",{children:"Our Vision"}),K.jsx("p",{children:`LODESTAR's vision is to co-create a low-cost, multi-hazard EWS using a "living labs" approach. This makes the system more comprehensive, participatory, and responsive, improving disaster preparedness for all.`})]})]}),K.jsx(Ur.div,{className:"about-grid-title",initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0,amount:.5},transition:{duration:.6},children:K.jsx("h2",{children:"Our Core Objectives"})}),K.jsx("div",{className:"about-grid-content",children:K.jsx("div",{className:"objectives-list",children:C$.map((e,t)=>K.jsxs(Ur.div,{className:"objective-card",initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0,amount:.5},transition:{duration:.5,delay:t*.1},children:[K.jsx("div",{className:"objective-id",children:e.id}),K.jsx("p",{children:e.text})]},e.id))})}),K.jsx(Ur.div,{className:"about-grid-title",initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0,amount:.5},transition:{duration:.6},children:K.jsx("h2",{children:"Our Approach"})}),K.jsx("div",{className:"about-grid-content",children:K.jsx("div",{className:"timeline",children:M$.map((e,t)=>K.jsxs(Ur.div,{className:"timeline-item",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0,amount:.5},transition:{duration:.8,delay:t*.15},children:[K.jsx("div",{className:"timeline-dot"}),K.jsxs("div",{className:"timeline-content",children:[K.jsxs("span",{className:"timeline-step",children:["Step ",t+1]}),K.jsx("h4",{children:e.title}),K.jsx("p",{children:e.description})]})]},e.title))})})]})})})]})}var _v={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */var k$=_v.exports,$E;function O$(){return $E||($E=1,(function(e,t){(function(r,n){e.exports=n()})(k$,(function(){var r={},n={};function s(h,l,_){if(n[h]=_,h==="index"){var S="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",E={};return n.shared(E),n.index(r,E),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([S],{type:"text/javascript"}))),r}}s("shared",["exports"],(function(h){function l(o,a,u,m){return new(u||(u=Promise))((function(v,P){function T(j){try{O(m.next(j))}catch(V){P(V)}}function I(j){try{O(m.throw(j))}catch(V){P(V)}}function O(j){var V;j.done?v(j.value):(V=j.value,V instanceof u?V:new u((function(q){q(V)}))).then(T,I)}O((m=m.apply(o,a||[])).next())}))}function _(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var S=E;function E(o,a){this.x=o,this.y=a}E.prototype={clone:function(){return new E(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,a){return this.clone()._rotateAround(o,a)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var a=o.x-this.x,u=o.y-this.y;return a*a+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,a){return Math.atan2(this.x*a-this.y*o,this.x*o+this.y*a)},_matMult:function(o){var a=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=a,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var a=Math.cos(o),u=Math.sin(o),m=u*this.x+a*this.y;return this.x=a*this.x-u*this.y,this.y=m,this},_rotateAround:function(o,a){var u=Math.cos(o),m=Math.sin(o),v=a.y+m*(this.x-a.x)+u*(this.y-a.y);return this.x=a.x+u*(this.x-a.x)-m*(this.y-a.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},E.convert=function(o){return o instanceof E?o:Array.isArray(o)?new E(o[0],o[1]):o};var A=_(S),M=L;function L(o,a,u,m){this.cx=3*o,this.bx=3*(u-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(m-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=a,this.p2x=u,this.p2y=m}L.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,a){if(a===void 0&&(a=1e-6),o<0)return 0;if(o>1)return 1;for(var u=o,m=0;m<8;m++){var v=this.sampleCurveX(u)-o;if(Math.abs(v)<a)return u;var P=this.sampleCurveDerivativeX(u);if(Math.abs(P)<1e-6)break;u-=v/P}var T=0,I=1;for(u=o,m=0;m<20&&(v=this.sampleCurveX(u),!(Math.abs(v-o)<a));m++)o>v?T=u:I=u,u=.5*(I-T)+T;return u},solve:function(o,a){return this.sampleCurveY(this.solveCurveX(o,a))}};var U=_(M);let N,B;function Z(){return N==null&&(N=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),N}function J(){if(B==null&&(B=!1,Z())){const a=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(a){for(let m=0;m<25;m++){const v=4*m;a.fillStyle=`rgb(${v},${v+1},${v+2})`,a.fillRect(m%5,Math.floor(m/5),1,1)}const u=a.getImageData(0,0,5,5).data;for(let m=0;m<100;m++)if(m%4!=3&&u[m]!==m){B=!0;break}}}return B||!1}function Q(o,a,u,m){const v=new U(o,a,u,m);return P=>v.solve(P)}const ie=Q(.25,.1,.25,1);function H(o,a,u){return Math.min(u,Math.max(a,o))}function X(o,a,u){const m=u-a,v=((o-a)%m+m)%m+a;return v===a?u:v}function se(o,...a){for(const u of a)for(const m in u)o[m]=u[m];return o}let fe=1;function Se(o,a,u){const m={};for(const v in o)m[v]=a.call(this,o[v],v,o);return m}function Be(o,a,u){const m={};for(const v in o)a.call(this,o[v],v,o)&&(m[v]=o[v]);return m}function xe(o){return Array.isArray(o)?o.map(xe):typeof o=="object"&&o?Se(o,xe):o}const $e={};function Fe(o){$e[o]||(typeof console<"u"&&console.warn(o),$e[o]=!0)}function Ke(o,a,u){return(u.y-o.y)*(a.x-o.x)>(a.y-o.y)*(u.x-o.x)}function Xe(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let rt=null;function Qe(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const We="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function tt(o,a,u,m,v){return l(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const P=new VideoFrame(o,{timestamp:0});try{const T=P==null?void 0:P.format;if(!T||!T.startsWith("BGR")&&!T.startsWith("RGB"))throw new Error(`Unrecognized format ${T}`);const I=T.startsWith("BGR"),O=new Uint8ClampedArray(m*v*4);if(yield P.copyTo(O,(function(j,V,q,Y,re){const oe=4*Math.max(-V,0),ce=(Math.max(0,q)-q)*Y*4+oe,ye=4*Y,we=Math.max(0,V),Ve=Math.max(0,q);return{rect:{x:we,y:Ve,width:Math.min(j.width,V+Y)-we,height:Math.min(j.height,q+re)-Ve},layout:[{offset:ce,stride:ye}]}})(o,a,u,m,v)),I)for(let j=0;j<O.length;j+=4){const V=O[j];O[j]=O[j+2],O[j+2]=V}return O}finally{P.close()}}))}let nt,Ae;const Ne="AbortError";function yt(){return new Error(Ne)}const jt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ut(o){return jt.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const rr="global-dispatcher";class cr extends Error{constructor(a,u,m,v){super(`AJAXError: ${u} (${a}): ${m}`),this.status=a,this.statusText=u,this.url=m,this.body=v}}const Jt=()=>Xe(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ht=function(o,a){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const m=Ut(o.url);if(m)return m(o,a);if(Xe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:rr},a)}if(!(/^file:/.test(u=o.url)||/^file:/.test(Jt())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(m,v){return l(this,void 0,void 0,(function*(){const P=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:Jt(),signal:v.signal});m.type!=="json"||P.headers.has("Accept")||P.headers.set("Accept","application/json");const T=yield fetch(P);if(!T.ok){const j=yield T.blob();throw new cr(T.status,T.statusText,m.url,j)}let I;I=m.type==="arrayBuffer"||m.type==="image"?T.arrayBuffer():m.type==="json"?T.json():T.text();const O=yield I;if(v.signal.aborted)throw yt();return{data:O,cacheControl:T.headers.get("Cache-Control"),expires:T.headers.get("Expires")}}))})(o,a);if(Xe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:rr},a)}var u;return(function(m,v){return new Promise(((P,T)=>{var I;const O=new XMLHttpRequest;O.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(O.responseType="arraybuffer");for(const j in m.headers)O.setRequestHeader(j,m.headers[j]);m.type==="json"&&(O.responseType="text",!((I=m.headers)===null||I===void 0)&&I.Accept||O.setRequestHeader("Accept","application/json")),O.withCredentials=m.credentials==="include",O.onerror=()=>{T(new Error(O.statusText))},O.onload=()=>{if(!v.signal.aborted)if((O.status>=200&&O.status<300||O.status===0)&&O.response!==null){let j=O.response;if(m.type==="json")try{j=JSON.parse(O.response)}catch(V){return void T(V)}P({data:j,cacheControl:O.getResponseHeader("Cache-Control"),expires:O.getResponseHeader("Expires")})}else{const j=new Blob([O.response],{type:O.getResponseHeader("Content-Type")});T(new cr(O.status,O.statusText,m.url,j))}},v.signal.addEventListener("abort",(()=>{O.abort(),T(yt())})),O.send(m.body)}))})(o,a)};function Wt(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const a=new URL(o),u=window.location;return a.protocol===u.protocol&&a.host===u.host}function sr(o,a,u){u[o]&&u[o].indexOf(a)!==-1||(u[o]=u[o]||[],u[o].push(a))}function lt(o,a,u){if(u&&u[o]){const m=u[o].indexOf(a);m!==-1&&u[o].splice(m,1)}}class Ir{constructor(a,u={}){se(this,u),this.type=a}}class mr extends Ir{constructor(a,u={}){super("error",se({error:a},u))}}class Yr{on(a,u){return this._listeners=this._listeners||{},sr(a,u,this._listeners),this}off(a,u){return lt(a,u,this._listeners),lt(a,u,this._oneTimeListeners),this}once(a,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},sr(a,u,this._oneTimeListeners),this):new Promise((m=>this.once(a,m)))}fire(a,u){typeof a=="string"&&(a=new Ir(a,u||{}));const m=a.type;if(this.listens(m)){a.target=this;const v=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const I of v)I.call(this,a);const P=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const I of P)lt(m,I,this._oneTimeListeners),I.call(this,a);const T=this._eventedParent;T&&(se(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(a))}else a instanceof mr&&console.error(a.error);return this}listens(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)}setEventedParent(a,u){return this._eventedParent=a,this._eventedParentData=u,this}}var qe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const dn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function xi(o,a){const u={};for(const m in o)m!=="ref"&&(u[m]=o[m]);return dn.forEach((m=>{m in a&&(u[m]=a[m])})),u}function vr(o,a){if(Array.isArray(o)){if(!Array.isArray(a)||o.length!==a.length)return!1;for(let u=0;u<o.length;u++)if(!vr(o[u],a[u]))return!1;return!0}if(typeof o=="object"&&o!==null&&a!==null){if(typeof a!="object"||Object.keys(o).length!==Object.keys(a).length)return!1;for(const u in o)if(!vr(o[u],a[u]))return!1;return!0}return o===a}function Rr(o,a){o.push(a)}function Gn(o,a,u){Rr(u,{command:"addSource",args:[o,a[o]]})}function Hn(o,a,u){Rr(a,{command:"removeSource",args:[o]}),u[o]=!0}function Ri(o,a,u,m){Hn(o,u,m),Gn(o,a,u)}function co(o,a,u){let m;for(m in o[u])if(Object.prototype.hasOwnProperty.call(o[u],m)&&m!=="data"&&!vr(o[u][m],a[u][m]))return!1;for(m in a[u])if(Object.prototype.hasOwnProperty.call(a[u],m)&&m!=="data"&&!vr(o[u][m],a[u][m]))return!1;return!0}function ci(o,a,u,m,v,P){o=o||{},a=a||{};for(const T in o)Object.prototype.hasOwnProperty.call(o,T)&&(vr(o[T],a[T])||u.push({command:P,args:[m,T,a[T],v]}));for(const T in a)Object.prototype.hasOwnProperty.call(a,T)&&!Object.prototype.hasOwnProperty.call(o,T)&&(vr(o[T],a[T])||u.push({command:P,args:[m,T,a[T],v]}))}function xl(o){return o.id}function Ns(o,a){return o[a.id]=a,o}class pt{constructor(a,u,m,v){this.message=(a?`${a}: `:"")+m,v&&(this.identifier=v),u!=null&&u.__line__&&(this.line=u.__line__)}}function Va(o,...a){for(const u of a)for(const m in u)o[m]=u[m];return o}class Bn extends Error{constructor(a,u){super(u),this.message=u,this.key=a}}class zi{constructor(a,u=[]){this.parent=a,this.bindings={};for(const[m,v]of u)this.bindings[m]=v}concat(a){return new zi(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const os={kind:"null"},bt={kind:"number"},gr={kind:"string"},Qt={kind:"boolean"},hi={kind:"color"},ea={kind:"object"},ir={kind:"value"},va={kind:"collator"},Ua={kind:"formatted"},ta={kind:"padding"},bi={kind:"resolvedImage"},ve={kind:"variableAnchorOffsetCollection"};function te(o,a){return{kind:"array",itemType:o,N:a}}function ee(o){if(o.kind==="array"){const a=ee(o.itemType);return typeof o.N=="number"?`array<${a}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${a}>`}return o.kind}const ue=[os,bt,gr,Qt,hi,Ua,ea,te(ir),ta,bi,ve];function me(o,a){if(a.kind==="error")return null;if(o.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!me(o.itemType,a.itemType))&&(typeof o.N!="number"||o.N===a.N))return null}else{if(o.kind===a.kind)return null;if(o.kind==="value"){for(const u of ue)if(!me(u,a))return null}}return`Expected ${ee(o)} but found ${ee(a)} instead.`}function Ce(o,a){return a.some((u=>u.kind===o.kind))}function Oe(o,a){return a.some((u=>u==="null"?o===null:u==="array"?Array.isArray(o):u==="object"?o&&!Array.isArray(o)&&typeof o=="object":u===typeof o))}function Le(o,a){return o.kind==="array"&&a.kind==="array"?o.itemType.kind===a.itemType.kind&&typeof o.N=="number":o.kind===a.kind}const Te=.96422,Je=.82521,st=4/29,He=6/29,vt=3*He*He,Lt=He*He*He,Gt=Math.PI/180,Ar=180/Math.PI;function lr(o){return(o%=360)<0&&(o+=360),o}function Er([o,a,u,m]){let v,P;const T=En((.2225045*(o=pr(o))+.7168786*(a=pr(a))+.0606169*(u=pr(u)))/1);o===a&&a===u?v=P=T:(v=En((.4360747*o+.3850649*a+.1430804*u)/Te),P=En((.0139322*o+.0971045*a+.7141733*u)/Je));const I=116*T-16;return[I<0?0:I,500*(v-T),200*(T-P),m]}function pr(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function En(o){return o>Lt?Math.pow(o,1/3):o/vt+st}function pn([o,a,u,m]){let v=(o+16)/116,P=isNaN(a)?v:v+a/500,T=isNaN(u)?v:v-u/200;return v=1*Lr(v),P=Te*Lr(P),T=Je*Lr(T),[_r(3.1338561*P-1.6168667*v-.4906146*T),_r(-.9787684*P+1.9161415*v+.033454*T),_r(.0719453*P-.2289914*v+1.4052427*T),m]}function _r(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function Lr(o){return o>He?o*o*o:vt*(o-st)}function nn(o){return parseInt(o.padEnd(2,o),16)/255}function Nn(o,a){return Zn(a?o/100:o,0,1)}function Zn(o,a,u){return Math.min(Math.max(a,o),u)}function wi(o){return!o.some(Number.isNaN)}const bl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class ar{constructor(a,u,m,v=1,P=!0){this.r=a,this.g=u,this.b=m,this.a=v,P||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[a,u,m,v]))}static parse(a){if(a instanceof ar)return a;if(typeof a!="string")return;const u=(function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];const v=bl[m];if(v){const[T,I,O]=v;return[T/255,I/255,O/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){const T=m.length<6?1:2;let I=1;return[nn(m.slice(I,I+=T)),nn(m.slice(I,I+=T)),nn(m.slice(I,I+=T)),nn(m.slice(I,I+T)||"ff")]}if(m.startsWith("rgb")){const T=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[I,O,j,V,q,Y,re,oe,ce,ye,we,Ve]=T,Me=[V||" ",re||" ",ye].join("");if(Me==="  "||Me==="  /"||Me===",,"||Me===",,,"){const je=[j,Y,ce].join(""),et=je==="%%%"?100:je===""?255:0;if(et){const ut=[Zn(+O/et,0,1),Zn(+q/et,0,1),Zn(+oe/et,0,1),we?Nn(+we,Ve):1];if(wi(ut))return ut}}return}}const P=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(P){const[T,I,O,j,V,q,Y,re,oe]=P,ce=[O||" ",V||" ",Y].join("");if(ce==="  "||ce==="  /"||ce===",,"||ce===",,,"){const ye=[+I,Zn(+j,0,100),Zn(+q,0,100),re?Nn(+re,oe):1];if(wi(ye))return(function([we,Ve,Me,je]){function et(ut){const Mt=(ut+we/30)%12,Yt=Ve*Math.min(Me,1-Me);return Me-Yt*Math.max(-1,Math.min(Mt-3,9-Mt,1))}return we=lr(we),Ve/=100,Me/=100,[et(0),et(8),et(4),je]})(ye)}}})(a);return u?new ar(...u,!1):void 0}get rgb(){const{r:a,g:u,b:m,a:v}=this,P=v||1/0;return this.overwriteGetter("rgb",[a/P,u/P,m/P,v])}get hcl(){return this.overwriteGetter("hcl",(function(a){const[u,m,v,P]=Er(a),T=Math.sqrt(m*m+v*v);return[Math.round(1e4*T)?lr(Math.atan2(v,m)*Ar):NaN,T,u,P]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Er(this.rgb))}overwriteGetter(a,u){return Object.defineProperty(this,a,{value:u}),u}toString(){const[a,u,m,v]=this.rgb;return`rgba(${[a,u,m].map((P=>Math.round(255*P))).join(",")},${v})`}}ar.black=new ar(0,0,0,1),ar.white=new ar(1,1,1,1),ar.transparent=new ar(0,0,0,0),ar.red=new ar(1,0,0,1);class dh{constructor(a,u,m){this.sensitivity=a?u?"variant":"case":u?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,u){return this.collator.compare(a,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class pu{constructor(a,u,m,v,P){this.text=a,this.image=u,this.scale=m,this.fontStack=v,this.textColor=P}}class ji{constructor(a){this.sections=a}static fromString(a){return new ji([new pu(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((a=>a.text.length!==0||a.image&&a.image.name.length!==0))}static factory(a){return a instanceof ji?a:ji.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map((a=>a.text)).join("")}}class fi{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof fi)return a;if(typeof a=="number")return new fi([a,a,a,a]);if(Array.isArray(a)&&!(a.length<1||a.length>4)){for(const u of a)if(typeof u!="number")return;switch(a.length){case 1:a=[a[0],a[0],a[0],a[0]];break;case 2:a=[a[0],a[1],a[0],a[1]];break;case 3:a=[a[0],a[1],a[2],a[1]]}return new fi(a)}}toString(){return JSON.stringify(this.values)}}const Up=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ra{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof ra)return a;if(Array.isArray(a)&&!(a.length<1)&&a.length%2==0){for(let u=0;u<a.length;u+=2){const m=a[u],v=a[u+1];if(typeof m!="string"||!Up.has(m)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new ra(a)}}toString(){return JSON.stringify(this.values)}}class di{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new di({name:a,available:!1}):null}}function Si(o,a,u,m){return typeof o=="number"&&o>=0&&o<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof u=="number"&&u>=0&&u<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[o,a,u,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[o,a,u,m]:[o,a,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Fs(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof ar||o instanceof dh||o instanceof ji||o instanceof fi||o instanceof ra||o instanceof di)return!0;if(Array.isArray(o)){for(const a of o)if(!Fs(a))return!1;return!0}if(typeof o=="object"){for(const a in o)if(!Fs(o[a]))return!1;return!0}return!1}function Vr(o){if(o===null)return os;if(typeof o=="string")return gr;if(typeof o=="boolean")return Qt;if(typeof o=="number")return bt;if(o instanceof ar)return hi;if(o instanceof dh)return va;if(o instanceof ji)return Ua;if(o instanceof fi)return ta;if(o instanceof ra)return ve;if(o instanceof di)return bi;if(Array.isArray(o)){const a=o.length;let u;for(const m of o){const v=Vr(m);if(u){if(u===v)continue;u=ir;break}u=v}return te(u||ir,a)}return ea}function mu(o){const a=typeof o;return o===null?"":a==="string"||a==="number"||a==="boolean"?String(o):o instanceof ar||o instanceof ji||o instanceof fi||o instanceof ra||o instanceof di?o.toString():JSON.stringify(o)}class qa{constructor(a,u){this.type=a,this.value=u}static parse(a,u){if(a.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!Fs(a[1]))return u.error("invalid value");const m=a[1];let v=Vr(m);const P=u.expectedType;return v.kind!=="array"||v.N!==0||!P||P.kind!=="array"||typeof P.N=="number"&&P.N!==0||(v=P),new qa(v,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Cn{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}const $s={string:gr,number:bt,boolean:Qt,object:ea};class Li{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");let m,v=1;const P=a[0];if(P==="array"){let I,O;if(a.length>2){const j=a[1];if(typeof j!="string"||!(j in $s)||j==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);I=$s[j],v++}else I=ir;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return u.error('The length argument to "array" must be a positive integer literal',2);O=a[2],v++}m=te(I,O)}else{if(!$s[P])throw new Error(`Types doesn't contain name = ${P}`);m=$s[P]}const T=[];for(;v<a.length;v++){const I=u.parse(a[v],v,ir);if(!I)return null;T.push(I)}return new Li(m,T)}evaluate(a){for(let u=0;u<this.args.length;u++){const m=this.args[u].evaluate(a);if(!me(this.type,Vr(m)))return m;if(u===this.args.length-1)throw new Cn(`Expected value to be of type ${ee(this.type)}, but found ${ee(Vr(m))} instead.`)}throw new Error}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every((a=>a.outputDefined()))}}const Vs={"to-boolean":Qt,"to-color":hi,"to-number":bt,"to-string":gr};class Bi{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");const m=a[0];if(!Vs[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&a.length!==2)return u.error("Expected one argument.");const v=Vs[m],P=[];for(let T=1;T<a.length;T++){const I=u.parse(a[T],T,ir);if(!I)return null;P.push(I)}return new Bi(v,P)}evaluate(a){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(a);case"color":{let u,m;for(const v of this.args){if(u=v.evaluate(a),m=null,u instanceof ar)return u;if(typeof u=="string"){const P=a.parseColor(u);if(P)return P}else if(Array.isArray(u)&&(m=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Si(u[0],u[1],u[2],u[3]),!m))return new ar(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Cn(m||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(const m of this.args){u=m.evaluate(a);const v=fi.parse(u);if(v)return v}throw new Cn(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(const m of this.args){u=m.evaluate(a);const v=ra.parse(u);if(v)return v}throw new Cn(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(const m of this.args){if(u=m.evaluate(a),u===null)return 0;const v=Number(u);if(!isNaN(v))return v}throw new Cn(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return ji.fromString(mu(this.args[0].evaluate(a)));case"resolvedImage":return di.fromString(mu(this.args[0].evaluate(a)));default:return mu(this.args[0].evaluate(a))}}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every((a=>a.outputDefined()))}}const qp=["Unknown","Point","LineString","Polygon"];class dc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?qp[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let u=this._parseColorCache[a];return u||(u=this._parseColorCache[a]=ar.parse(a)),u}}class Eo{constructor(a,u,m=[],v,P=new zi,T=[]){this.registry=a,this.path=m,this.key=m.map((I=>`[${I}]`)).join(""),this.scope=P,this.errors=T,this.expectedType=v,this._isConstant=u}parse(a,u,m,v,P={}){return u?this.concat(u,m,v)._parse(a,P):this._parse(a,P)}_parse(a,u){function m(v,P,T){return T==="assert"?new Li(P,[v]):T==="coerce"?new Bi(P,[v]):v}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=a[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const P=this.registry[v];if(P){let T=P.parse(a,this);if(!T)return null;if(this.expectedType){const I=this.expectedType,O=T.type;if(I.kind!=="string"&&I.kind!=="number"&&I.kind!=="boolean"&&I.kind!=="object"&&I.kind!=="array"||O.kind!=="value")if(I.kind!=="color"&&I.kind!=="formatted"&&I.kind!=="resolvedImage"||O.kind!=="value"&&O.kind!=="string")if(I.kind!=="padding"||O.kind!=="value"&&O.kind!=="number"&&O.kind!=="array")if(I.kind!=="variableAnchorOffsetCollection"||O.kind!=="value"&&O.kind!=="array"){if(this.checkSubtype(I,O))return null}else T=m(T,I,u.typeAnnotation||"coerce");else T=m(T,I,u.typeAnnotation||"coerce");else T=m(T,I,u.typeAnnotation||"coerce");else T=m(T,I,u.typeAnnotation||"assert")}if(!(T instanceof qa)&&T.type.kind!=="resolvedImage"&&this._isConstant(T)){const I=new dc;try{T=new qa(T.type,T.evaluate(I))}catch(O){return this.error(O.message),null}}return T}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,u,m){const v=typeof a=="number"?this.path.concat(a):this.path,P=m?this.scope.concat(m):this.scope;return new Eo(this.registry,this._isConstant,v,u||null,P,this.errors)}error(a,...u){const m=`${this.key}${u.map((v=>`[${v}]`)).join("")}`;this.errors.push(new Bn(m,a))}checkSubtype(a,u){const m=me(a,u);return m&&this.error(m),m}}class Co{constructor(a,u){this.type=u.type,this.bindings=[].concat(a),this.result=u}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const u of this.bindings)a(u[1]);a(this.result)}static parse(a,u){if(a.length<4)return u.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const m=[];for(let P=1;P<a.length-1;P+=2){const T=a[P];if(typeof T!="string")return u.error(`Expected string, but found ${typeof T} instead.`,P);if(/[^a-zA-Z0-9_]/.test(T))return u.error("Variable names must contain only alphanumeric characters or '_'.",P);const I=u.parse(a[P+1],P+1);if(!I)return null;m.push([T,I])}const v=u.parse(a[a.length-1],a.length-1,u.expectedType,m);return v?new Co(m,v):null}outputDefined(){return this.result.outputDefined()}}class Cr{constructor(a,u){this.type=u.type,this.name=a,this.boundExpression=u}static parse(a,u){if(a.length!==2||typeof a[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const m=a[1];return u.scope.has(m)?new Cr(m,u.scope.get(m)):u.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}}class Us{constructor(a,u,m){this.type=a,this.index=u,this.input=m}static parse(a,u){if(a.length!==3)return u.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const m=u.parse(a[1],1,bt),v=u.parse(a[2],2,te(u.expectedType||ir));return m&&v?new Us(v.type.itemType,m,v):null}evaluate(a){const u=this.index.evaluate(a),m=this.input.evaluate(a);if(u<0)throw new Cn(`Array index out of bounds: ${u} < 0.`);if(u>=m.length)throw new Cn(`Array index out of bounds: ${u} > ${m.length-1}.`);if(u!==Math.floor(u))throw new Cn(`Array index must be an integer, but found ${u} instead.`);return m[u]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}}class ph{constructor(a,u){this.type=Qt,this.needle=a,this.haystack=u}static parse(a,u){if(a.length!==3)return u.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const m=u.parse(a[1],1,ir),v=u.parse(a[2],2,ir);return m&&v?Ce(m.type,[Qt,gr,bt,os,ir])?new ph(m,v):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ee(m.type)} instead`):null}evaluate(a){const u=this.needle.evaluate(a),m=this.haystack.evaluate(a);if(!m)return!1;if(!Oe(u,["boolean","string","number","null"]))throw new Cn(`Expected first argument to be of type boolean, string, number or null, but found ${ee(Vr(u))} instead.`);if(!Oe(m,["string","array"]))throw new Cn(`Expected second argument to be of type array or string, but found ${ee(Vr(m))} instead.`);return m.indexOf(u)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}}class ss{constructor(a,u,m){this.type=bt,this.needle=a,this.haystack=u,this.fromIndex=m}static parse(a,u){if(a.length<=2||a.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const m=u.parse(a[1],1,ir),v=u.parse(a[2],2,ir);if(!m||!v)return null;if(!Ce(m.type,[Qt,gr,bt,os,ir]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ee(m.type)} instead`);if(a.length===4){const P=u.parse(a[3],3,bt);return P?new ss(m,v,P):null}return new ss(m,v)}evaluate(a){const u=this.needle.evaluate(a),m=this.haystack.evaluate(a);if(!Oe(u,["boolean","string","number","null"]))throw new Cn(`Expected first argument to be of type boolean, string, number or null, but found ${ee(Vr(u))} instead.`);let v;if(this.fromIndex&&(v=this.fromIndex.evaluate(a)),Oe(m,["string"])){const P=m.indexOf(u,v);return P===-1?-1:[...m.slice(0,P)].length}if(Oe(m,["array"]))return m.indexOf(u,v);throw new Cn(`Expected second argument to be of type array or string, but found ${ee(Vr(m))} instead.`)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}}class Br{constructor(a,u,m,v,P,T){this.inputType=a,this.type=u,this.input=m,this.cases=v,this.outputs=P,this.otherwise=T}static parse(a,u){if(a.length<5)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return u.error("Expected an even number of arguments.");let m,v;u.expectedType&&u.expectedType.kind!=="value"&&(v=u.expectedType);const P={},T=[];for(let j=2;j<a.length-1;j+=2){let V=a[j];const q=a[j+1];Array.isArray(V)||(V=[V]);const Y=u.concat(j);if(V.length===0)return Y.error("Expected at least one branch label.");for(const oe of V){if(typeof oe!="number"&&typeof oe!="string")return Y.error("Branch labels must be numbers or strings.");if(typeof oe=="number"&&Math.abs(oe)>Number.MAX_SAFE_INTEGER)return Y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof oe=="number"&&Math.floor(oe)!==oe)return Y.error("Numeric branch labels must be integer values.");if(m){if(Y.checkSubtype(m,Vr(oe)))return null}else m=Vr(oe);if(P[String(oe)]!==void 0)return Y.error("Branch labels must be unique.");P[String(oe)]=T.length}const re=u.parse(q,j,v);if(!re)return null;v=v||re.type,T.push(re)}const I=u.parse(a[1],1,ir);if(!I)return null;const O=u.parse(a[a.length-1],a.length-1,v);return O?I.type.kind!=="value"&&u.concat(1).checkSubtype(m,I.type)?null:new Br(m,v,I,P,T,O):null}evaluate(a){const u=this.input.evaluate(a);return(Vr(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every((a=>a.outputDefined()))&&this.otherwise.outputDefined()}}class gu{constructor(a,u,m){this.type=a,this.branches=u,this.otherwise=m}static parse(a,u){if(a.length<4)return u.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return u.error("Expected an odd number of arguments.");let m;u.expectedType&&u.expectedType.kind!=="value"&&(m=u.expectedType);const v=[];for(let T=1;T<a.length-1;T+=2){const I=u.parse(a[T],T,Qt);if(!I)return null;const O=u.parse(a[T+1],T+1,m);if(!O)return null;v.push([I,O]),m=m||O.type}const P=u.parse(a[a.length-1],a.length-1,m);if(!P)return null;if(!m)throw new Error("Can't infer output type");return new gu(m,v,P)}evaluate(a){for(const[u,m]of this.branches)if(u.evaluate(a))return m.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[u,m]of this.branches)a(u),a(m);a(this.otherwise)}outputDefined(){return this.branches.every((([a,u])=>u.outputDefined()))&&this.otherwise.outputDefined()}}class wl{constructor(a,u,m,v){this.type=a,this.input=u,this.beginIndex=m,this.endIndex=v}static parse(a,u){if(a.length<=2||a.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const m=u.parse(a[1],1,ir),v=u.parse(a[2],2,bt);if(!m||!v)return null;if(!Ce(m.type,[te(ir),gr,ir]))return u.error(`Expected first argument to be of type array or string, but found ${ee(m.type)} instead`);if(a.length===4){const P=u.parse(a[3],3,bt);return P?new wl(m.type,m,v,P):null}return new wl(m.type,m,v)}evaluate(a){const u=this.input.evaluate(a),m=this.beginIndex.evaluate(a);let v;if(this.endIndex&&(v=this.endIndex.evaluate(a)),Oe(u,["string"]))return[...u].slice(m,v).join("");if(Oe(u,["array"]))return u.slice(m,v);throw new Cn(`Expected first argument to be of type array or string, but found ${ee(Vr(u))} instead.`)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}}function Sl(o,a){const u=o.length-1;let m,v,P=0,T=u,I=0;for(;P<=T;)if(I=Math.floor((P+T)/2),m=o[I],v=o[I+1],m<=a){if(I===u||a<v)return I;P=I+1}else{if(!(m>a))throw new Cn("Input is not a number.");T=I-1}return 0}class qs{constructor(a,u,m){this.type=a,this.input=u,this.labels=[],this.outputs=[];for(const[v,P]of m)this.labels.push(v),this.outputs.push(P)}static parse(a,u){if(a.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return u.error("Expected an even number of arguments.");const m=u.parse(a[1],1,bt);if(!m)return null;const v=[];let P=null;u.expectedType&&u.expectedType.kind!=="value"&&(P=u.expectedType);for(let T=1;T<a.length;T+=2){const I=T===1?-1/0:a[T],O=a[T+1],j=T,V=T+1;if(typeof I!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(v.length&&v[v.length-1][0]>=I)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',j);const q=u.parse(O,V,P);if(!q)return null;P=P||q.type,v.push([I,q])}return new qs(P,m,v)}evaluate(a){const u=this.labels,m=this.outputs;if(u.length===1)return m[0].evaluate(a);const v=this.input.evaluate(a);if(v<=u[0])return m[0].evaluate(a);const P=u.length;return v>=u[P-1]?m[P-1].evaluate(a):m[Sl(u,v)].evaluate(a)}eachChild(a){a(this.input);for(const u of this.outputs)a(u)}outputDefined(){return this.outputs.every((a=>a.outputDefined()))}}function mh(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Gf=pc;function pc(o,a,u,m){this.cx=3*o,this.bx=3*(u-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(m-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=a,this.p2x=u,this.p2y=m}pc.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,a){if(a===void 0&&(a=1e-6),o<0)return 0;if(o>1)return 1;for(var u=o,m=0;m<8;m++){var v=this.sampleCurveX(u)-o;if(Math.abs(v)<a)return u;var P=this.sampleCurveDerivativeX(u);if(Math.abs(P)<1e-6)break;u-=v/P}var T=0,I=1;for(u=o,m=0;m<20&&(v=this.sampleCurveX(u),!(Math.abs(v-o)<a));m++)o>v?T=u:I=u,u=.5*(I-T)+T;return u},solve:function(o,a){return this.sampleCurveY(this.solveCurveX(o,a))}};var mc=mh(Gf);function Ni(o,a,u){return o+u*(a-o)}function _a(o,a,u){return o.map(((m,v)=>Ni(m,a[v],u)))}const Mn={number:Ni,color:function(o,a,u,m="rgb"){switch(m){case"rgb":{const[v,P,T,I]=_a(o.rgb,a.rgb,u);return new ar(v,P,T,I,!1)}case"hcl":{const[v,P,T,I]=o.hcl,[O,j,V,q]=a.hcl;let Y,re;if(isNaN(v)||isNaN(O))isNaN(v)?isNaN(O)?Y=NaN:(Y=O,T!==1&&T!==0||(re=j)):(Y=v,V!==1&&V!==0||(re=P));else{let Ve=O-v;O>v&&Ve>180?Ve-=360:O<v&&v-O>180&&(Ve+=360),Y=v+u*Ve}const[oe,ce,ye,we]=(function([Ve,Me,je,et]){return Ve=isNaN(Ve)?0:Ve*Gt,pn([je,Math.cos(Ve)*Me,Math.sin(Ve)*Me,et])})([Y,re??Ni(P,j,u),Ni(T,V,u),Ni(I,q,u)]);return new ar(oe,ce,ye,we,!1)}case"lab":{const[v,P,T,I]=pn(_a(o.lab,a.lab,u));return new ar(v,P,T,I,!1)}}},array:_a,padding:function(o,a,u){return new fi(_a(o.values,a.values,u))},variableAnchorOffsetCollection:function(o,a,u){const m=o.values,v=a.values;if(m.length!==v.length)throw new Cn(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${a.toString()}`);const P=[];for(let T=0;T<m.length;T+=2){if(m[T]!==v[T])throw new Cn(`Cannot interpolate values containing mismatched anchors. from[${T}]: ${m[T]}, to[${T}]: ${v[T]}`);P.push(m[T]);const[I,O]=m[T+1],[j,V]=v[T+1];P.push([Ni(I,j,u),Ni(O,V,u)])}return new ra(P)}};class Kn{constructor(a,u,m,v,P){this.type=a,this.operator=u,this.interpolation=m,this.input=v,this.labels=[],this.outputs=[];for(const[T,I]of P)this.labels.push(T),this.outputs.push(I)}static interpolationFactor(a,u,m,v){let P=0;if(a.name==="exponential")P=ls(u,a.base,m,v);else if(a.name==="linear")P=ls(u,1,m,v);else if(a.name==="cubic-bezier"){const T=a.controlPoints;P=new mc(T[0],T[1],T[2],T[3]).solve(ls(u,1,m,v))}return P}static parse(a,u){let[m,v,P,...T]=a;if(!Array.isArray(v)||v.length===0)return u.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const j=v[1];if(typeof j!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:j}}else{if(v[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const j=v.slice(1);if(j.length!==4||j.some((V=>typeof V!="number"||V<0||V>1)))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:j}}}if(a.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(P=u.parse(P,2,bt),!P)return null;const I=[];let O=null;m==="interpolate-hcl"||m==="interpolate-lab"?O=hi:u.expectedType&&u.expectedType.kind!=="value"&&(O=u.expectedType);for(let j=0;j<T.length;j+=2){const V=T[j],q=T[j+1],Y=j+3,re=j+4;if(typeof V!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(I.length&&I[I.length-1][0]>=V)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Y);const oe=u.parse(q,re,O);if(!oe)return null;O=O||oe.type,I.push([V,oe])}return Le(O,bt)||Le(O,hi)||Le(O,ta)||Le(O,ve)||Le(O,te(bt))?new Kn(O,m,v,P,I):u.error(`Type ${ee(O)} is not interpolatable.`)}evaluate(a){const u=this.labels,m=this.outputs;if(u.length===1)return m[0].evaluate(a);const v=this.input.evaluate(a);if(v<=u[0])return m[0].evaluate(a);const P=u.length;if(v>=u[P-1])return m[P-1].evaluate(a);const T=Sl(u,v),I=Kn.interpolationFactor(this.interpolation,v,u[T],u[T+1]),O=m[T].evaluate(a),j=m[T+1].evaluate(a);switch(this.operator){case"interpolate":return Mn[this.type.kind](O,j,I);case"interpolate-hcl":return Mn.color(O,j,I,"hcl");case"interpolate-lab":return Mn.color(O,j,I,"lab")}}eachChild(a){a(this.input);for(const u of this.outputs)a(u)}outputDefined(){return this.outputs.every((a=>a.outputDefined()))}}function ls(o,a,u,m){const v=m-u,P=o-u;return v===0?0:a===1?P/v:(Math.pow(a,P)-1)/(Math.pow(a,v)-1)}class Wa{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expectected at least one argument.");let m=null;const v=u.expectedType;v&&v.kind!=="value"&&(m=v);const P=[];for(const I of a.slice(1)){const O=u.parse(I,1+P.length,m,void 0,{typeAnnotation:"omit"});if(!O)return null;m=m||O.type,P.push(O)}if(!m)throw new Error("No output type");const T=v&&P.some((I=>me(v,I.type)));return new Wa(T?ir:m,P)}evaluate(a){let u,m=null,v=0;for(const P of this.args)if(v++,m=P.evaluate(a),m&&m instanceof di&&!m.available&&(u||(u=m.name),m=null,v===this.args.length&&(m=u)),m!==null)break;return m}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every((a=>a.outputDefined()))}}function gc(o,a){return o==="=="||o==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function gh(o,a,u,m){return m.compare(a,u)===0}function ho(o,a,u){const m=o!=="=="&&o!=="!=";return class bR{constructor(P,T,I){this.type=Qt,this.lhs=P,this.rhs=T,this.collator=I,this.hasUntypedArgument=P.type.kind==="value"||T.type.kind==="value"}static parse(P,T){if(P.length!==3&&P.length!==4)return T.error("Expected two or three arguments.");const I=P[0];let O=T.parse(P[1],1,ir);if(!O)return null;if(!gc(I,O.type))return T.concat(1).error(`"${I}" comparisons are not supported for type '${ee(O.type)}'.`);let j=T.parse(P[2],2,ir);if(!j)return null;if(!gc(I,j.type))return T.concat(2).error(`"${I}" comparisons are not supported for type '${ee(j.type)}'.`);if(O.type.kind!==j.type.kind&&O.type.kind!=="value"&&j.type.kind!=="value")return T.error(`Cannot compare types '${ee(O.type)}' and '${ee(j.type)}'.`);m&&(O.type.kind==="value"&&j.type.kind!=="value"?O=new Li(j.type,[O]):O.type.kind!=="value"&&j.type.kind==="value"&&(j=new Li(O.type,[j])));let V=null;if(P.length===4){if(O.type.kind!=="string"&&j.type.kind!=="string"&&O.type.kind!=="value"&&j.type.kind!=="value")return T.error("Cannot use collator to compare non-string types.");if(V=T.parse(P[3],3,va),!V)return null}return new bR(O,j,V)}evaluate(P){const T=this.lhs.evaluate(P),I=this.rhs.evaluate(P);if(m&&this.hasUntypedArgument){const O=Vr(T),j=Vr(I);if(O.kind!==j.kind||O.kind!=="string"&&O.kind!=="number")throw new Cn(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${O.kind}, ${j.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const O=Vr(T),j=Vr(I);if(O.kind!=="string"||j.kind!=="string")return a(P,T,I)}return this.collator?u(P,T,I,this.collator.evaluate(P)):a(P,T,I)}eachChild(P){P(this.lhs),P(this.rhs),this.collator&&P(this.collator)}outputDefined(){return!0}}}const Wp=ho("==",(function(o,a,u){return a===u}),gh),yh=ho("!=",(function(o,a,u){return a!==u}),(function(o,a,u,m){return!gh(0,a,u,m)})),yu=ho("<",(function(o,a,u){return a<u}),(function(o,a,u,m){return m.compare(a,u)<0})),Hf=ho(">",(function(o,a,u){return a>u}),(function(o,a,u,m){return m.compare(a,u)>0})),Gp=ho("<=",(function(o,a,u){return a<=u}),(function(o,a,u,m){return m.compare(a,u)<=0})),Pl=ho(">=",(function(o,a,u){return a>=u}),(function(o,a,u,m){return m.compare(a,u)>=0}));class Mo{constructor(a,u,m){this.type=va,this.locale=m,this.caseSensitive=a,this.diacriticSensitive=u}static parse(a,u){if(a.length!==2)return u.error("Expected one argument.");const m=a[1];if(typeof m!="object"||Array.isArray(m))return u.error("Collator options argument must be an object.");const v=u.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,Qt);if(!v)return null;const P=u.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,Qt);if(!P)return null;let T=null;return m.locale&&(T=u.parse(m.locale,1,gr),!T)?null:new Mo(v,P,T)}evaluate(a){return new dh(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}}class us{constructor(a,u,m,v,P){this.type=gr,this.number=a,this.locale=u,this.currency=m,this.minFractionDigits=v,this.maxFractionDigits=P}static parse(a,u){if(a.length!==3)return u.error("Expected two arguments.");const m=u.parse(a[1],1,bt);if(!m)return null;const v=a[2];if(typeof v!="object"||Array.isArray(v))return u.error("NumberFormat options argument must be an object.");let P=null;if(v.locale&&(P=u.parse(v.locale,1,gr),!P))return null;let T=null;if(v.currency&&(T=u.parse(v.currency,1,gr),!T))return null;let I=null;if(v["min-fraction-digits"]&&(I=u.parse(v["min-fraction-digits"],1,bt),!I))return null;let O=null;return v["max-fraction-digits"]&&(O=u.parse(v["max-fraction-digits"],1,bt),!O)?null:new us(m,P,T,I,O)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}}class Ws{constructor(a){this.type=Ua,this.sections=a}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");const m=a[1];if(!Array.isArray(m)&&typeof m=="object")return u.error("First argument must be an image or text section.");const v=[];let P=!1;for(let T=1;T<=a.length-1;++T){const I=a[T];if(P&&typeof I=="object"&&!Array.isArray(I)){P=!1;let O=null;if(I["font-scale"]&&(O=u.parse(I["font-scale"],1,bt),!O))return null;let j=null;if(I["text-font"]&&(j=u.parse(I["text-font"],1,te(gr)),!j))return null;let V=null;if(I["text-color"]&&(V=u.parse(I["text-color"],1,hi),!V))return null;const q=v[v.length-1];q.scale=O,q.font=j,q.textColor=V}else{const O=u.parse(a[T],1,ir);if(!O)return null;const j=O.type.kind;if(j!=="string"&&j!=="value"&&j!=="null"&&j!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");P=!0,v.push({content:O,scale:null,font:null,textColor:null})}}return new Ws(v)}evaluate(a){return new ji(this.sections.map((u=>{const m=u.content.evaluate(a);return Vr(m)===bi?new pu("",m,null,null,null):new pu(mu(m),null,u.scale?u.scale.evaluate(a):null,u.font?u.font.evaluate(a).join(","):null,u.textColor?u.textColor.evaluate(a):null)})))}eachChild(a){for(const u of this.sections)a(u.content),u.scale&&a(u.scale),u.font&&a(u.font),u.textColor&&a(u.textColor)}outputDefined(){return!1}}class vh{constructor(a){this.type=bi,this.input=a}static parse(a,u){if(a.length!==2)return u.error("Expected two arguments.");const m=u.parse(a[1],1,gr);return m?new vh(m):u.error("No image name provided.")}evaluate(a){const u=this.input.evaluate(a),m=di.fromString(u);return m&&a.availableImages&&(m.available=a.availableImages.indexOf(u)>-1),m}eachChild(a){a(this.input)}outputDefined(){return!1}}class _h{constructor(a){this.type=bt,this.input=a}static parse(a,u){if(a.length!==2)return u.error(`Expected 1 argument, but found ${a.length-1} instead.`);const m=u.parse(a[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${ee(m.type)} instead.`):new _h(m):null}evaluate(a){const u=this.input.evaluate(a);if(typeof u=="string")return[...u].length;if(Array.isArray(u))return u.length;throw new Cn(`Expected value to be of type string or array, but found ${ee(Vr(u))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}}const xa=8192;function yc(o,a){const u=(180+o[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,v=Math.pow(2,a.z);return[Math.round(u*v*xa),Math.round(m*v*xa)]}function vu(o,a){const u=Math.pow(2,a.z);return[(v=(o[0]/xa+a.x)/u,360*v-180),(m=(o[1]/xa+a.y)/u,360/Math.PI*Math.atan(Math.exp((180-360*m)*Math.PI/180))-90)];var m,v}function cs(o,a){o[0]=Math.min(o[0],a[0]),o[1]=Math.min(o[1],a[1]),o[2]=Math.max(o[2],a[0]),o[3]=Math.max(o[3],a[1])}function Pi(o,a){return!(o[0]<=a[0]||o[2]>=a[2]||o[1]<=a[1]||o[3]>=a[3])}function kr(o,a,u){const m=o[0]-a[0],v=o[1]-a[1],P=o[0]-u[0],T=o[1]-u[1];return m*T-P*v==0&&m*P<=0&&v*T<=0}function Gs(o,a,u,m){return(v=[m[0]-u[0],m[1]-u[1]])[0]*(P=[a[0]-o[0],a[1]-o[1]])[1]-v[1]*P[0]!=0&&!(!Hs(o,a,u,m)||!Hs(u,m,o,a));var v,P}function Zf(o,a,u){for(const m of u)for(let v=0;v<m.length-1;++v)if(Gs(o,a,m[v],m[v+1]))return!0;return!1}function Io(o,a,u=!1){let m=!1;for(const I of a)for(let O=0;O<I.length-1;O++){if(kr(o,I[O],I[O+1]))return u;(P=I[O])[1]>(v=o)[1]!=(T=I[O+1])[1]>v[1]&&v[0]<(T[0]-P[0])*(v[1]-P[1])/(T[1]-P[1])+P[0]&&(m=!m)}var v,P,T;return m}function vc(o,a){for(const u of a)if(Io(o,u))return!0;return!1}function xh(o,a){for(const u of o)if(!Io(u,a))return!1;for(let u=0;u<o.length-1;++u)if(Zf(o[u],o[u+1],a))return!1;return!0}function na(o,a){for(const u of a)if(xh(o,u))return!0;return!1}function Hs(o,a,u,m){const v=m[0]-u[0],P=m[1]-u[1],T=(o[0]-u[0])*P-v*(o[1]-u[1]),I=(a[0]-u[0])*P-v*(a[1]-u[1]);return T>0&&I<0||T<0&&I>0}function _u(o,a,u){const m=[];for(let v=0;v<o.length;v++){const P=[];for(let T=0;T<o[v].length;T++){const I=yc(o[v][T],u);cs(a,I),P.push(I)}m.push(P)}return m}function Tl(o,a,u){const m=[];for(let v=0;v<o.length;v++){const P=_u(o[v],a,u);m.push(P)}return m}function Kf(o,a,u,m){if(o[0]<u[0]||o[0]>u[2]){const v=.5*m;let P=o[0]-u[0]>v?-m:u[0]-o[0]>v?m:0;P===0&&(P=o[0]-u[2]>v?-m:u[2]-o[0]>v?m:0),o[0]+=P}cs(a,o)}function _c(o,a,u,m){const v=Math.pow(2,m.z)*xa,P=[m.x*xa,m.y*xa],T=[];for(const I of o)for(const O of I){const j=[O.x+P[0],O.y+P[1]];Kf(j,a,u,v),T.push(j)}return T}function xc(o,a,u,m){const v=Math.pow(2,m.z)*xa,P=[m.x*xa,m.y*xa],T=[];for(const O of o){const j=[];for(const V of O){const q=[V.x+P[0],V.y+P[1]];cs(a,q),j.push(q)}T.push(j)}if(a[2]-a[0]<=v/2){(I=a)[0]=I[1]=1/0,I[2]=I[3]=-1/0;for(const O of T)for(const j of O)Kf(j,a,u,v)}var I;return T}class Ga{constructor(a,u){this.type=Qt,this.geojson=a,this.geometries=u}static parse(a,u){if(a.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(Fs(a[1])){const m=a[1];if(m.type==="FeatureCollection"){const v=[];for(const P of m.features){const{type:T,coordinates:I}=P.geometry;T==="Polygon"&&v.push(I),T==="MultiPolygon"&&v.push(...I)}if(v.length)return new Ga(m,{type:"MultiPolygon",coordinates:v})}else if(m.type==="Feature"){const v=m.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Ga(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new Ga(m,m)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return(function(u,m){const v=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],T=u.canonicalID();if(m.type==="Polygon"){const I=_u(m.coordinates,P,T),O=_c(u.geometry(),v,P,T);if(!Pi(v,P))return!1;for(const j of O)if(!Io(j,I))return!1}if(m.type==="MultiPolygon"){const I=Tl(m.coordinates,P,T),O=_c(u.geometry(),v,P,T);if(!Pi(v,P))return!1;for(const j of O)if(!vc(j,I))return!1}return!0})(a,this.geometries);if(a.geometryType()==="LineString")return(function(u,m){const v=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],T=u.canonicalID();if(m.type==="Polygon"){const I=_u(m.coordinates,P,T),O=xc(u.geometry(),v,P,T);if(!Pi(v,P))return!1;for(const j of O)if(!xh(j,I))return!1}if(m.type==="MultiPolygon"){const I=Tl(m.coordinates,P,T),O=xc(u.geometry(),v,P,T);if(!Pi(v,P))return!1;for(const j of O)if(!na(j,I))return!1}return!0})(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let xu=class{constructor(o=[],a=((u,m)=>u<m?-1:u>m?1:0)){if(this.data=o,this.length=this.data.length,this.compare=a,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:a,compare:u}=this,m=a[o];for(;o>0;){const v=o-1>>1,P=a[v];if(u(m,P)>=0)break;a[o]=P,o=v}a[o]=m}_down(o){const{data:a,compare:u}=this,m=this.length>>1,v=a[o];for(;o<m;){let P=1+(o<<1);const T=P+1;if(T<this.length&&u(a[T],a[P])<0&&(P=T),u(a[P],v)>=0)break;a[o]=a[P],o=P}a[o]=v}};function Xf(o,a,u,m,v){Yf(o,a,u,m||o.length-1,v||Hp)}function Yf(o,a,u,m,v){for(;m>u;){if(m-u>600){var P=m-u+1,T=a-u+1,I=Math.log(P),O=.5*Math.exp(2*I/3),j=.5*Math.sqrt(I*O*(P-O)/P)*(T-P/2<0?-1:1);Yf(o,a,Math.max(u,Math.floor(a-T*O/P+j)),Math.min(m,Math.floor(a+(P-T)*O/P+j)),v)}var V=o[a],q=u,Y=m;for(bu(o,u,a),v(o[m],V)>0&&bu(o,u,m);q<Y;){for(bu(o,q,Y),q++,Y--;v(o[q],V)<0;)q++;for(;v(o[Y],V)>0;)Y--}v(o[u],V)===0?bu(o,u,Y):bu(o,++Y,m),Y<=a&&(u=Y+1),a<=Y&&(m=Y-1)}}function bu(o,a,u){var m=o[a];o[a]=o[u],o[u]=m}function Hp(o,a){return o<a?-1:o>a?1:0}function Al(o,a){if(o.length<=1)return[o];const u=[];let m,v;for(const P of o){const T=Kp(P);T!==0&&(P.area=Math.abs(T),v===void 0&&(v=T<0),v===T<0?(m&&u.push(m),m=[P]):m.push(P))}if(m&&u.push(m),a>1)for(let P=0;P<u.length;P++)u[P].length<=a||(Xf(u[P],a,1,u[P].length-1,Zp),u[P]=u[P].slice(0,a));return u}function Zp(o,a){return a.area-o.area}function Kp(o){let a=0;for(let u,m,v=0,P=o.length,T=P-1;v<P;T=v++)u=o[v],m=o[T],a+=(m.x-u.x)*(u.y+m.y);return a}const Jf=1/298.257223563,Qf=Jf*(2-Jf),ed=Math.PI/180;class bc{constructor(a){const u=6378.137*ed*1e3,m=Math.cos(a*ed),v=1/(1-Qf*(1-m*m)),P=Math.sqrt(v);this.kx=u*P*m,this.ky=u*P*v*(1-Qf)}distance(a,u){const m=this.wrap(a[0]-u[0])*this.kx,v=(a[1]-u[1])*this.ky;return Math.sqrt(m*m+v*v)}pointOnLine(a,u){let m,v,P,T,I=1/0;for(let O=0;O<a.length-1;O++){let j=a[O][0],V=a[O][1],q=this.wrap(a[O+1][0]-j)*this.kx,Y=(a[O+1][1]-V)*this.ky,re=0;q===0&&Y===0||(re=(this.wrap(u[0]-j)*this.kx*q+(u[1]-V)*this.ky*Y)/(q*q+Y*Y),re>1?(j=a[O+1][0],V=a[O+1][1]):re>0&&(j+=q/this.kx*re,V+=Y/this.ky*re)),q=this.wrap(u[0]-j)*this.kx,Y=(u[1]-V)*this.ky;const oe=q*q+Y*Y;oe<I&&(I=oe,m=j,v=V,P=O,T=re)}return{point:[m,v],index:P,t:Math.max(0,Math.min(1,T))}}wrap(a){for(;a<-180;)a+=360;for(;a>180;)a-=360;return a}}function td(o,a){return a[0]-o[0]}function wc(o){return o[1]-o[0]+1}function ko(o,a){return o[1]>=o[0]&&o[1]<a}function bh(o,a){if(o[0]>o[1])return[null,null];const u=wc(o);if(a){if(u===2)return[o,null];const v=Math.floor(u/2);return[[o[0],o[0]+v],[o[0]+v,o[1]]]}if(u===1)return[o,null];const m=Math.floor(u/2)-1;return[[o[0],o[0]+m],[o[0]+m+1,o[1]]]}function wu(o,a){if(!ko(a,o.length))return[1/0,1/0,-1/0,-1/0];const u=[1/0,1/0,-1/0,-1/0];for(let m=a[0];m<=a[1];++m)cs(u,o[m]);return u}function wh(o){const a=[1/0,1/0,-1/0,-1/0];for(const u of o)for(const m of u)cs(a,m);return a}function Sc(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function Sh(o,a,u){if(!Sc(o)||!Sc(a))return NaN;let m=0,v=0;return o[2]<a[0]&&(m=a[0]-o[2]),o[0]>a[2]&&(m=o[0]-a[2]),o[1]>a[3]&&(v=o[1]-a[3]),o[3]<a[1]&&(v=a[1]-o[3]),u.distance([0,0],[m,v])}function hs(o,a,u){const m=u.pointOnLine(a,o);return u.distance(o,m.point)}function Ph(o,a,u,m,v){const P=Math.min(hs(o,[u,m],v),hs(a,[u,m],v)),T=Math.min(hs(u,[o,a],v),hs(m,[o,a],v));return Math.min(P,T)}function Xp(o,a,u,m,v){if(!ko(a,o.length)||!ko(m,u.length))return 1/0;let P=1/0;for(let T=a[0];T<a[1];++T){const I=o[T],O=o[T+1];for(let j=m[0];j<m[1];++j){const V=u[j],q=u[j+1];if(Gs(I,O,V,q))return 0;P=Math.min(P,Ph(I,O,V,q,v))}}return P}function Sn(o,a,u,m,v){if(!ko(a,o.length)||!ko(m,u.length))return NaN;let P=1/0;for(let T=a[0];T<=a[1];++T)for(let I=m[0];I<=m[1];++I)if(P=Math.min(P,v.distance(o[T],u[I])),P===0)return P;return P}function Yp(o,a,u){if(Io(o,a,!0))return 0;let m=1/0;for(const v of a){const P=v[0],T=v[v.length-1];if(P!==T&&(m=Math.min(m,hs(o,[T,P],u)),m===0))return m;const I=u.pointOnLine(v,o);if(m=Math.min(m,u.distance(o,I.point)),m===0)return m}return m}function br(o,a,u,m){if(!ko(a,o.length))return NaN;for(let P=a[0];P<=a[1];++P)if(Io(o[P],u,!0))return 0;let v=1/0;for(let P=a[0];P<a[1];++P){const T=o[P],I=o[P+1];for(const O of u)for(let j=0,V=O.length,q=V-1;j<V;q=j++){const Y=O[q],re=O[j];if(Gs(T,I,Y,re))return 0;v=Math.min(v,Ph(T,I,Y,re,m))}}return v}function Pc(o,a){for(const u of o)for(const m of u)if(Io(m,a,!0))return!0;return!1}function Jr(o,a,u,m=1/0){const v=wh(o),P=wh(a);if(m!==1/0&&Sh(v,P,u)>=m)return m;if(Pi(v,P)){if(Pc(o,a))return 0}else if(Pc(a,o))return 0;let T=1/0;for(const I of o)for(let O=0,j=I.length,V=j-1;O<j;V=O++){const q=I[V],Y=I[O];for(const re of a)for(let oe=0,ce=re.length,ye=ce-1;oe<ce;ye=oe++){const we=re[ye],Ve=re[oe];if(Gs(q,Y,we,Ve))return 0;T=Math.min(T,Ph(q,Y,we,Ve,u))}}return T}function Nr(o,a,u,m,v,P){if(!P)return;const T=Sh(wu(m,P),v,u);T<a&&o.push([T,P,[0,0]])}function Ha(o,a,u,m,v,P,T){if(!P||!T)return;const I=Sh(wu(m,P),wu(v,T),u);I<a&&o.push([I,P,T])}function Su(o,a,u,m,v=1/0){let P=Math.min(m.distance(o[0],u[0][0]),v);if(P===0)return P;const T=new xu([[0,[0,o.length-1],[0,0]]],td),I=wh(u);for(;T.length>0;){const O=T.pop();if(O[0]>=P)continue;const j=O[1],V=a?50:100;if(wc(j)<=V){if(!ko(j,o.length))return NaN;if(a){const q=br(o,j,u,m);if(isNaN(q)||q===0)return q;P=Math.min(P,q)}else for(let q=j[0];q<=j[1];++q){const Y=Yp(o[q],u,m);if(P=Math.min(P,Y),P===0)return 0}}else{const q=bh(j,a);Nr(T,P,m,o,I,q[0]),Nr(T,P,m,o,I,q[1])}}return P}function El(o,a,u,m,v,P=1/0){let T=Math.min(P,v.distance(o[0],u[0]));if(T===0)return T;const I=new xu([[0,[0,o.length-1],[0,u.length-1]]],td);for(;I.length>0;){const O=I.pop();if(O[0]>=T)continue;const j=O[1],V=O[2],q=a?50:100,Y=m?50:100;if(wc(j)<=q&&wc(V)<=Y){if(!ko(j,o.length)&&ko(V,u.length))return NaN;let re;if(a&&m)re=Xp(o,j,u,V,v),T=Math.min(T,re);else if(a&&!m){const oe=o.slice(j[0],j[1]+1);for(let ce=V[0];ce<=V[1];++ce)if(re=hs(u[ce],oe,v),T=Math.min(T,re),T===0)return T}else if(!a&&m){const oe=u.slice(V[0],V[1]+1);for(let ce=j[0];ce<=j[1];++ce)if(re=hs(o[ce],oe,v),T=Math.min(T,re),T===0)return T}else re=Sn(o,j,u,V,v),T=Math.min(T,re)}else{const re=bh(j,a),oe=bh(V,m);Ha(I,T,v,o,u,re[0],oe[0]),Ha(I,T,v,o,u,re[0],oe[1]),Ha(I,T,v,o,u,re[1],oe[0]),Ha(I,T,v,o,u,re[1],oe[1])}}return T}function Tc(o){return o.type==="MultiPolygon"?o.coordinates.map((a=>({type:"Polygon",coordinates:a}))):o.type==="MultiLineString"?o.coordinates.map((a=>({type:"LineString",coordinates:a}))):o.type==="MultiPoint"?o.coordinates.map((a=>({type:"Point",coordinates:a}))):[o]}class fs{constructor(a,u){this.type=bt,this.geojson=a,this.geometries=u}static parse(a,u){if(a.length!==2)return u.error(`'distance' expression requires exactly one argument, but found ${a.length-1} instead.`);if(Fs(a[1])){const m=a[1];if(m.type==="FeatureCollection")return new fs(m,m.features.map((v=>Tc(v.geometry))).flat());if(m.type==="Feature")return new fs(m,Tc(m.geometry));if("type"in m&&"coordinates"in m)return new fs(m,Tc(m))}return u.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return(function(u,m){const v=u.geometry(),P=v.flat().map((O=>vu([O.x,O.y],u.canonical)));if(v.length===0)return NaN;const T=new bc(P[0][1]);let I=1/0;for(const O of m){switch(O.type){case"Point":I=Math.min(I,El(P,!1,[O.coordinates],!1,T,I));break;case"LineString":I=Math.min(I,El(P,!1,O.coordinates,!0,T,I));break;case"Polygon":I=Math.min(I,Su(P,!1,O.coordinates,T,I))}if(I===0)return I}return I})(a,this.geometries);if(a.geometryType()==="LineString")return(function(u,m){const v=u.geometry(),P=v.flat().map((O=>vu([O.x,O.y],u.canonical)));if(v.length===0)return NaN;const T=new bc(P[0][1]);let I=1/0;for(const O of m){switch(O.type){case"Point":I=Math.min(I,El(P,!0,[O.coordinates],!1,T,I));break;case"LineString":I=Math.min(I,El(P,!0,O.coordinates,!0,T,I));break;case"Polygon":I=Math.min(I,Su(P,!0,O.coordinates,T,I))}if(I===0)return I}return I})(a,this.geometries);if(a.geometryType()==="Polygon")return(function(u,m){const v=u.geometry();if(v.length===0||v[0].length===0)return NaN;const P=Al(v,0).map((O=>O.map((j=>j.map((V=>vu([V.x,V.y],u.canonical))))))),T=new bc(P[0][0][0][1]);let I=1/0;for(const O of m)for(const j of P){switch(O.type){case"Point":I=Math.min(I,Su([O.coordinates],!1,j,T,I));break;case"LineString":I=Math.min(I,Su(O.coordinates,!0,j,T,I));break;case"Polygon":I=Math.min(I,Jr(j,O.coordinates,T,I))}if(I===0)return I}return I})(a,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Zs={"==":Wp,"!=":yh,">":Hf,"<":yu,">=":Pl,"<=":Gp,array:Li,at:Us,boolean:Li,case:gu,coalesce:Wa,collator:Mo,format:Ws,image:vh,in:ph,"index-of":ss,interpolate:Kn,"interpolate-hcl":Kn,"interpolate-lab":Kn,length:_h,let:Co,literal:qa,match:Br,number:Li,"number-format":us,object:Li,slice:wl,step:qs,string:Li,"to-boolean":Bi,"to-color":Bi,"to-number":Bi,"to-string":Bi,var:Cr,within:Ga,distance:fs};class ia{constructor(a,u,m,v){this.name=a,this.type=u,this._evaluate=m,this.args=v}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}static parse(a,u){const m=a[0],v=ia.definitions[m];if(!v)return u.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const P=Array.isArray(v)?v[0]:v.type,T=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,I=T.filter((([j])=>!Array.isArray(j)||j.length===a.length-1));let O=null;for(const[j,V]of I){O=new Eo(u.registry,Cl,u.path,null,u.scope);const q=[];let Y=!1;for(let re=1;re<a.length;re++){const oe=a[re],ce=Array.isArray(j)?j[re-1]:j.type,ye=O.parse(oe,1+q.length,ce);if(!ye){Y=!0;break}q.push(ye)}if(!Y)if(Array.isArray(j)&&j.length!==q.length)O.error(`Expected ${j.length} arguments, but found ${q.length} instead.`);else{for(let re=0;re<q.length;re++){const oe=Array.isArray(j)?j[re]:j.type,ce=q[re];O.concat(re+1).checkSubtype(oe,ce.type)}if(O.errors.length===0)return new ia(m,P,V,q)}}if(I.length===1)u.errors.push(...O.errors);else{const j=(I.length?I:T).map((([q])=>{return Y=q,Array.isArray(Y)?`(${Y.map(ee).join(", ")})`:`(${ee(Y.type)}...)`;var Y})).join(" | "),V=[];for(let q=1;q<a.length;q++){const Y=u.parse(a[q],1+V.length);if(!Y)return null;V.push(ee(Y.type))}u.error(`Expected arguments of type ${j}, but found (${V.join(", ")}) instead.`)}return null}static register(a,u){ia.definitions=u;for(const m in u)a[m]=ia}}function ds(o,[a,u,m,v]){a=a.evaluate(o),u=u.evaluate(o),m=m.evaluate(o);const P=v?v.evaluate(o):1,T=Si(a,u,m,P);if(T)throw new Cn(T);return new ar(a/255,u/255,m/255,P,!1)}function Th(o,a){return o in a}function Ah(o,a){const u=a[o];return u===void 0?null:u}function Ks(o){return{type:o}}function Cl(o){if(o instanceof Cr)return Cl(o.boundExpression);if(o instanceof ia&&o.name==="error"||o instanceof Mo||o instanceof Ga||o instanceof fs)return!1;const a=o instanceof Bi||o instanceof Li;let u=!0;return o.eachChild((m=>{u=a?u&&Cl(m):u&&m instanceof qa})),!!u&&Ml(o)&&Oo(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ml(o){if(o instanceof ia&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Ga||o instanceof fs)return!1;let a=!0;return o.eachChild((u=>{a&&!Ml(u)&&(a=!1)})),a}function fo(o){if(o instanceof ia&&o.name==="feature-state")return!1;let a=!0;return o.eachChild((u=>{a&&!fo(u)&&(a=!1)})),a}function Oo(o,a){if(o instanceof ia&&a.indexOf(o.name)>=0)return!1;let u=!0;return o.eachChild((m=>{u&&!Oo(m,a)&&(u=!1)})),u}function Ac(o){return{result:"success",value:o}}function Do(o){return{result:"error",value:o}}function Il(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Eh(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Pu(o){return!!o.expression&&o.expression.interpolated}function Pr(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Tu(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function rd(o){return o}function Ch(o,a){const u=a.type==="color",m=o.stops&&typeof o.stops[0][0]=="object",v=m||!(m||o.property!==void 0),P=o.type||(Pu(a)?"exponential":"interval");if(u||a.type==="padding"){const V=u?ar.parse:fi.parse;(o=Va({},o)).stops&&(o.stops=o.stops.map((q=>[q[0],V(q[1])]))),o.default=V(o.default?o.default:a.default)}if(o.colorSpace&&(T=o.colorSpace)!=="rgb"&&T!=="hcl"&&T!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var T;let I,O,j;if(P==="exponential")I=id;else if(P==="interval")I=Ec;else if(P==="categorical"){I=nd,O=Object.create(null);for(const V of o.stops)O[V[0]]=V[1];j=typeof o.stops[0][0]}else{if(P!=="identity")throw new Error(`Unknown function type "${P}"`);I=ad}if(m){const V={},q=[];for(let oe=0;oe<o.stops.length;oe++){const ce=o.stops[oe],ye=ce[0].zoom;V[ye]===void 0&&(V[ye]={zoom:ye,type:o.type,property:o.property,default:o.default,stops:[]},q.push(ye)),V[ye].stops.push([ce[0].value,ce[1]])}const Y=[];for(const oe of q)Y.push([V[oe].zoom,Ch(V[oe],a)]);const re={name:"linear"};return{kind:"composite",interpolationType:re,interpolationFactor:Kn.interpolationFactor.bind(void 0,re),zoomStops:Y.map((oe=>oe[0])),evaluate:({zoom:oe},ce)=>id({stops:Y,base:o.base},a,oe).evaluate(oe,ce)}}if(v){const V=P==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:V,interpolationFactor:Kn.interpolationFactor.bind(void 0,V),zoomStops:o.stops.map((q=>q[0])),evaluate:({zoom:q})=>I(o,a,q,O,j)}}return{kind:"source",evaluate(V,q){const Y=q&&q.properties?q.properties[o.property]:void 0;return Y===void 0?kl(o.default,a.default):I(o,a,Y,O,j)}}}function kl(o,a,u){return o!==void 0?o:a!==void 0?a:u!==void 0?u:void 0}function nd(o,a,u,m,v){return kl(typeof u===v?m[u]:void 0,o.default,a.default)}function Ec(o,a,u){if(Pr(u)!=="number")return kl(o.default,a.default);const m=o.stops.length;if(m===1||u<=o.stops[0][0])return o.stops[0][1];if(u>=o.stops[m-1][0])return o.stops[m-1][1];const v=Sl(o.stops.map((P=>P[0])),u);return o.stops[v][1]}function id(o,a,u){const m=o.base!==void 0?o.base:1;if(Pr(u)!=="number")return kl(o.default,a.default);const v=o.stops.length;if(v===1||u<=o.stops[0][0])return o.stops[0][1];if(u>=o.stops[v-1][0])return o.stops[v-1][1];const P=Sl(o.stops.map((V=>V[0])),u),T=(function(V,q,Y,re){const oe=re-Y,ce=V-Y;return oe===0?0:q===1?ce/oe:(Math.pow(q,ce)-1)/(Math.pow(q,oe)-1)})(u,m,o.stops[P][0],o.stops[P+1][0]),I=o.stops[P][1],O=o.stops[P+1][1],j=Mn[a.type]||rd;return typeof I.evaluate=="function"?{evaluate(...V){const q=I.evaluate.apply(void 0,V),Y=O.evaluate.apply(void 0,V);if(q!==void 0&&Y!==void 0)return j(q,Y,T,o.colorSpace)}}:j(I,O,T,o.colorSpace)}function ad(o,a,u){switch(a.type){case"color":u=ar.parse(u);break;case"formatted":u=ji.fromString(u.toString());break;case"resolvedImage":u=di.fromString(u.toString());break;case"padding":u=fi.parse(u);break;default:Pr(u)===a.type||a.type==="enum"&&a.values[u]||(u=void 0)}return kl(u,o.default,a.default)}ia.register(Zs,{error:[{kind:"error"},[gr],(o,[a])=>{throw new Cn(a.evaluate(o))}],typeof:[gr,[ir],(o,[a])=>ee(Vr(a.evaluate(o)))],"to-rgba":[te(bt,4),[hi],(o,[a])=>{const[u,m,v,P]=a.evaluate(o).rgb;return[255*u,255*m,255*v,P]}],rgb:[hi,[bt,bt,bt],ds],rgba:[hi,[bt,bt,bt,bt],ds],has:{type:Qt,overloads:[[[gr],(o,[a])=>Th(a.evaluate(o),o.properties())],[[gr,ea],(o,[a,u])=>Th(a.evaluate(o),u.evaluate(o))]]},get:{type:ir,overloads:[[[gr],(o,[a])=>Ah(a.evaluate(o),o.properties())],[[gr,ea],(o,[a,u])=>Ah(a.evaluate(o),u.evaluate(o))]]},"feature-state":[ir,[gr],(o,[a])=>Ah(a.evaluate(o),o.featureState||{})],properties:[ea,[],o=>o.properties()],"geometry-type":[gr,[],o=>o.geometryType()],id:[ir,[],o=>o.id()],zoom:[bt,[],o=>o.globals.zoom],"heatmap-density":[bt,[],o=>o.globals.heatmapDensity||0],"line-progress":[bt,[],o=>o.globals.lineProgress||0],accumulated:[ir,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[bt,Ks(bt),(o,a)=>{let u=0;for(const m of a)u+=m.evaluate(o);return u}],"*":[bt,Ks(bt),(o,a)=>{let u=1;for(const m of a)u*=m.evaluate(o);return u}],"-":{type:bt,overloads:[[[bt,bt],(o,[a,u])=>a.evaluate(o)-u.evaluate(o)],[[bt],(o,[a])=>-a.evaluate(o)]]},"/":[bt,[bt,bt],(o,[a,u])=>a.evaluate(o)/u.evaluate(o)],"%":[bt,[bt,bt],(o,[a,u])=>a.evaluate(o)%u.evaluate(o)],ln2:[bt,[],()=>Math.LN2],pi:[bt,[],()=>Math.PI],e:[bt,[],()=>Math.E],"^":[bt,[bt,bt],(o,[a,u])=>Math.pow(a.evaluate(o),u.evaluate(o))],sqrt:[bt,[bt],(o,[a])=>Math.sqrt(a.evaluate(o))],log10:[bt,[bt],(o,[a])=>Math.log(a.evaluate(o))/Math.LN10],ln:[bt,[bt],(o,[a])=>Math.log(a.evaluate(o))],log2:[bt,[bt],(o,[a])=>Math.log(a.evaluate(o))/Math.LN2],sin:[bt,[bt],(o,[a])=>Math.sin(a.evaluate(o))],cos:[bt,[bt],(o,[a])=>Math.cos(a.evaluate(o))],tan:[bt,[bt],(o,[a])=>Math.tan(a.evaluate(o))],asin:[bt,[bt],(o,[a])=>Math.asin(a.evaluate(o))],acos:[bt,[bt],(o,[a])=>Math.acos(a.evaluate(o))],atan:[bt,[bt],(o,[a])=>Math.atan(a.evaluate(o))],min:[bt,Ks(bt),(o,a)=>Math.min(...a.map((u=>u.evaluate(o))))],max:[bt,Ks(bt),(o,a)=>Math.max(...a.map((u=>u.evaluate(o))))],abs:[bt,[bt],(o,[a])=>Math.abs(a.evaluate(o))],round:[bt,[bt],(o,[a])=>{const u=a.evaluate(o);return u<0?-Math.round(-u):Math.round(u)}],floor:[bt,[bt],(o,[a])=>Math.floor(a.evaluate(o))],ceil:[bt,[bt],(o,[a])=>Math.ceil(a.evaluate(o))],"filter-==":[Qt,[gr,ir],(o,[a,u])=>o.properties()[a.value]===u.value],"filter-id-==":[Qt,[ir],(o,[a])=>o.id()===a.value],"filter-type-==":[Qt,[gr],(o,[a])=>o.geometryType()===a.value],"filter-<":[Qt,[gr,ir],(o,[a,u])=>{const m=o.properties()[a.value],v=u.value;return typeof m==typeof v&&m<v}],"filter-id-<":[Qt,[ir],(o,[a])=>{const u=o.id(),m=a.value;return typeof u==typeof m&&u<m}],"filter->":[Qt,[gr,ir],(o,[a,u])=>{const m=o.properties()[a.value],v=u.value;return typeof m==typeof v&&m>v}],"filter-id->":[Qt,[ir],(o,[a])=>{const u=o.id(),m=a.value;return typeof u==typeof m&&u>m}],"filter-<=":[Qt,[gr,ir],(o,[a,u])=>{const m=o.properties()[a.value],v=u.value;return typeof m==typeof v&&m<=v}],"filter-id-<=":[Qt,[ir],(o,[a])=>{const u=o.id(),m=a.value;return typeof u==typeof m&&u<=m}],"filter->=":[Qt,[gr,ir],(o,[a,u])=>{const m=o.properties()[a.value],v=u.value;return typeof m==typeof v&&m>=v}],"filter-id->=":[Qt,[ir],(o,[a])=>{const u=o.id(),m=a.value;return typeof u==typeof m&&u>=m}],"filter-has":[Qt,[ir],(o,[a])=>a.value in o.properties()],"filter-has-id":[Qt,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[Qt,[te(gr)],(o,[a])=>a.value.indexOf(o.geometryType())>=0],"filter-id-in":[Qt,[te(ir)],(o,[a])=>a.value.indexOf(o.id())>=0],"filter-in-small":[Qt,[gr,te(ir)],(o,[a,u])=>u.value.indexOf(o.properties()[a.value])>=0],"filter-in-large":[Qt,[gr,te(ir)],(o,[a,u])=>(function(m,v,P,T){for(;P<=T;){const I=P+T>>1;if(v[I]===m)return!0;v[I]>m?T=I-1:P=I+1}return!1})(o.properties()[a.value],u.value,0,u.value.length-1)],all:{type:Qt,overloads:[[[Qt,Qt],(o,[a,u])=>a.evaluate(o)&&u.evaluate(o)],[Ks(Qt),(o,a)=>{for(const u of a)if(!u.evaluate(o))return!1;return!0}]]},any:{type:Qt,overloads:[[[Qt,Qt],(o,[a,u])=>a.evaluate(o)||u.evaluate(o)],[Ks(Qt),(o,a)=>{for(const u of a)if(u.evaluate(o))return!0;return!1}]]},"!":[Qt,[Qt],(o,[a])=>!a.evaluate(o)],"is-supported-script":[Qt,[gr],(o,[a])=>{const u=o.globals&&o.globals.isSupportedScript;return!u||u(a.evaluate(o))}],upcase:[gr,[gr],(o,[a])=>a.evaluate(o).toUpperCase()],downcase:[gr,[gr],(o,[a])=>a.evaluate(o).toLowerCase()],concat:[gr,Ks(ir),(o,a)=>a.map((u=>mu(u.evaluate(o)))).join("")],"resolved-locale":[gr,[va],(o,[a])=>a.evaluate(o).resolvedLocale()]});class Fi{constructor(a,u){var m;this.expression=a,this._warningHistory={},this._evaluator=new dc,this._defaultValue=u?(m=u).type==="color"&&Tu(m.default)?new ar(0,0,0,0):m.type==="color"?ar.parse(m.default)||null:m.type==="padding"?fi.parse(m.default)||null:m.type==="variableAnchorOffsetCollection"?ra.parse(m.default)||null:m.default===void 0?null:m.default:null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(a,u,m,v,P,T){return this._evaluator.globals=a,this._evaluator.feature=u,this._evaluator.featureState=m,this._evaluator.canonical=v,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=T,this.expression.evaluate(this._evaluator)}evaluate(a,u,m,v,P,T){this._evaluator.globals=a,this._evaluator.feature=u||null,this._evaluator.featureState=m||null,this._evaluator.canonical=v,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=T||null;try{const I=this.expression.evaluate(this._evaluator);if(I==null||typeof I=="number"&&I!=I)return this._defaultValue;if(this._enumValues&&!(I in this._enumValues))throw new Cn(`Expected value to be one of ${Object.keys(this._enumValues).map((O=>JSON.stringify(O))).join(", ")}, but found ${JSON.stringify(I)} instead.`);return I}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,typeof console<"u"&&console.warn(I.message)),this._defaultValue}}}function ps(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Zs}function Xs(o,a){const u=new Eo(Zs,Cl,[],a?(function(v){const P={color:hi,string:gr,number:bt,enum:gr,boolean:Qt,formatted:Ua,padding:ta,resolvedImage:bi,variableAnchorOffsetCollection:ve};return v.type==="array"?te(P[v.value]||ir,v.length):P[v.type]})(a):void 0),m=u.parse(o,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Ac(new Fi(m,a)):Do(u.errors)}class Ys{constructor(a,u){this.kind=a,this._styleExpression=u,this.isStateDependent=a!=="constant"&&!fo(u.expression)}evaluateWithoutErrorHandling(a,u,m,v,P,T){return this._styleExpression.evaluateWithoutErrorHandling(a,u,m,v,P,T)}evaluate(a,u,m,v,P,T){return this._styleExpression.evaluate(a,u,m,v,P,T)}}class Js{constructor(a,u,m,v){this.kind=a,this.zoomStops=m,this._styleExpression=u,this.isStateDependent=a!=="camera"&&!fo(u.expression),this.interpolationType=v}evaluateWithoutErrorHandling(a,u,m,v,P,T){return this._styleExpression.evaluateWithoutErrorHandling(a,u,m,v,P,T)}evaluate(a,u,m,v,P,T){return this._styleExpression.evaluate(a,u,m,v,P,T)}interpolationFactor(a,u,m){return this.interpolationType?Kn.interpolationFactor(this.interpolationType,a,u,m):0}}function Cc(o,a){const u=Xs(o,a);if(u.result==="error")return u;const m=u.value.expression,v=Ml(m);if(!v&&!Il(a))return Do([new Bn("","data expressions not supported")]);const P=Oo(m,["zoom"]);if(!P&&!Eh(a))return Do([new Bn("","zoom expressions not supported")]);const T=Au(m);return T||P?T instanceof Bn?Do([T]):T instanceof Kn&&!Pu(a)?Do([new Bn("",'"interpolate" expressions cannot be used with this property')]):Ac(T?new Js(v?"camera":"composite",u.value,T.labels,T instanceof Kn?T.interpolation:void 0):new Ys(v?"constant":"source",u.value)):Do([new Bn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ms{constructor(a,u){this._parameters=a,this._specification=u,Va(this,Ch(this._parameters,this._specification))}static deserialize(a){return new ms(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function Au(o){let a=null;if(o instanceof Co)a=Au(o.result);else if(o instanceof Wa){for(const u of o.args)if(a=Au(u),a)break}else(o instanceof qs||o instanceof Kn)&&o.input instanceof ia&&o.input.name==="zoom"&&(a=o);return a instanceof Bn||o.eachChild((u=>{const m=Au(u);m instanceof Bn?a=m:!a&&m?a=new Bn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&m&&a!==m&&(a=new Bn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),a}function Mc(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const a of o.slice(1))if(!Mc(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}const Ro={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Eu(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Mc(o)||(o=Mu(o));const a=Xs(o,Ro);if(a.result==="error")throw new Error(a.value.map((u=>`${u.key}: ${u.message}`)).join(", "));return{filter:(u,m,v)=>a.value.evaluate(u,m,{},v),needGeometry:Ic(o)}}function Cu(o,a){return o<a?-1:o>a?1:0}function Ic(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let a=1;a<o.length;a++)if(Ic(o[a]))return!0;return!1}function Mu(o){if(!o)return!0;const a=o[0];return o.length<=1?a!=="any":a==="=="?Ol(o[1],o[2],"=="):a==="!="?ri(Ol(o[1],o[2],"==")):a==="<"||a===">"||a==="<="||a===">="?Ol(o[1],o[2],a):a==="any"?(u=o.slice(1),["any"].concat(u.map(Mu))):a==="all"?["all"].concat(o.slice(1).map(Mu)):a==="none"?["all"].concat(o.slice(1).map(Mu).map(ri)):a==="in"?po(o[1],o.slice(2)):a==="!in"?ri(po(o[1],o.slice(2))):a==="has"?Qs(o[1]):a!=="!has"||ri(Qs(o[1]));var u}function Ol(o,a,u){switch(o){case"$type":return[`filter-type-${u}`,a];case"$id":return[`filter-id-${u}`,a];default:return[`filter-${u}`,o,a]}}function po(o,a){if(a.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some((u=>typeof u!=typeof a[0]))?["filter-in-large",o,["literal",a.sort(Cu)]]:["filter-in-small",o,["literal",a]]}}function Qs(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function ri(o){return["!",o]}function mo(o){const a=typeof o;if(a==="number"||a==="boolean"||a==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let v="[";for(const P of o)v+=`${mo(P)},`;return`${v}]`}const u=Object.keys(o).sort();let m="{";for(let v=0;v<u.length;v++)m+=`${JSON.stringify(u[v])}:${mo(o[u[v]])},`;return`${m}}`}function Mh(o){let a="";for(const u of dn)a+=`/${mo(o[u])}`;return a}function Ih(o){const a=o.value;return a?[new pt(o.key,a,"constants have been deprecated as of v8")]:[]}function _n(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function ba(o){if(Array.isArray(o))return o.map(ba);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const a={};for(const u in o)a[u]=ba(o[u]);return a}return _n(o)}function $i(o){const a=o.key,u=o.value,m=o.valueSpec||{},v=o.objectElementValidators||{},P=o.style,T=o.styleSpec,I=o.validateSpec;let O=[];const j=Pr(u);if(j!=="object")return[new pt(a,u,`object expected, ${j} found`)];for(const V in u){const q=V.split(".")[0],Y=m[q]||m["*"];let re;if(v[q])re=v[q];else if(m[q])re=I;else if(v["*"])re=v["*"];else{if(!m["*"]){O.push(new pt(a,u[V],`unknown property "${V}"`));continue}re=I}O=O.concat(re({key:(a&&`${a}.`)+V,value:u[V],valueSpec:Y,style:P,styleSpec:T,object:u,objectKey:V,validateSpec:I},u))}for(const V in m)v[V]||m[V].required&&m[V].default===void 0&&u[V]===void 0&&O.push(new pt(a,u,`missing required property "${V}"`));return O}function Dl(o){const a=o.value,u=o.valueSpec,m=o.style,v=o.styleSpec,P=o.key,T=o.arrayElementValidator||o.validateSpec;if(Pr(a)!=="array")return[new pt(P,a,`array expected, ${Pr(a)} found`)];if(u.length&&a.length!==u.length)return[new pt(P,a,`array length ${u.length} expected, length ${a.length} found`)];if(u["min-length"]&&a.length<u["min-length"])return[new pt(P,a,`array length at least ${u["min-length"]} expected, length ${a.length} found`)];let I={type:u.value,values:u.values};v.$version<7&&(I.function=u.function),Pr(u.value)==="object"&&(I=u.value);let O=[];for(let j=0;j<a.length;j++)O=O.concat(T({array:a,arrayIndex:j,value:a[j],valueSpec:I,validateSpec:o.validateSpec,style:m,styleSpec:v,key:`${P}[${j}]`}));return O}function go(o){const a=o.key,u=o.value,m=o.valueSpec;let v=Pr(u);return v==="number"&&u!=u&&(v="NaN"),v!=="number"?[new pt(a,u,`number expected, ${v} found`)]:"minimum"in m&&u<m.minimum?[new pt(a,u,`${u} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&u>m.maximum?[new pt(a,u,`${u} is greater than the maximum value ${m.maximum}`)]:[]}function Rl(o){const a=o.valueSpec,u=_n(o.value.type);let m,v,P,T={};const I=u!=="categorical"&&o.value.property===void 0,O=!I,j=Pr(o.value.stops)==="array"&&Pr(o.value.stops[0])==="array"&&Pr(o.value.stops[0][0])==="object",V=$i({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(re){if(u==="identity")return[new pt(re.key,re.value,'identity function may not have a "stops" property')];let oe=[];const ce=re.value;return oe=oe.concat(Dl({key:re.key,value:ce,valueSpec:re.valueSpec,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec,arrayElementValidator:q})),Pr(ce)==="array"&&ce.length===0&&oe.push(new pt(re.key,ce,"array must have at least one stop")),oe},default:function(re){return re.validateSpec({key:re.key,value:re.value,valueSpec:a,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec})}}});return u==="identity"&&I&&V.push(new pt(o.key,o.value,'missing required property "property"')),u==="identity"||o.value.stops||V.push(new pt(o.key,o.value,'missing required property "stops"')),u==="exponential"&&o.valueSpec.expression&&!Pu(o.valueSpec)&&V.push(new pt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(O&&!Il(o.valueSpec)?V.push(new pt(o.key,o.value,"property functions not supported")):I&&!Eh(o.valueSpec)&&V.push(new pt(o.key,o.value,"zoom functions not supported"))),u!=="categorical"&&!j||o.value.property!==void 0||V.push(new pt(o.key,o.value,'"property" property is required')),V;function q(re){let oe=[];const ce=re.value,ye=re.key;if(Pr(ce)!=="array")return[new pt(ye,ce,`array expected, ${Pr(ce)} found`)];if(ce.length!==2)return[new pt(ye,ce,`array length 2 expected, length ${ce.length} found`)];if(j){if(Pr(ce[0])!=="object")return[new pt(ye,ce,`object expected, ${Pr(ce[0])} found`)];if(ce[0].zoom===void 0)return[new pt(ye,ce,"object stop key must have zoom")];if(ce[0].value===void 0)return[new pt(ye,ce,"object stop key must have value")];if(P&&P>_n(ce[0].zoom))return[new pt(ye,ce[0].zoom,"stop zoom values must appear in ascending order")];_n(ce[0].zoom)!==P&&(P=_n(ce[0].zoom),v=void 0,T={}),oe=oe.concat($i({key:`${ye}[0]`,value:ce[0],valueSpec:{zoom:{}},validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec,objectElementValidators:{zoom:go,value:Y}}))}else oe=oe.concat(Y({key:`${ye}[0]`,value:ce[0],validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec},ce));return ps(ba(ce[1]))?oe.concat([new pt(`${ye}[1]`,ce[1],"expressions are not allowed in function stops.")]):oe.concat(re.validateSpec({key:`${ye}[1]`,value:ce[1],valueSpec:a,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec}))}function Y(re,oe){const ce=Pr(re.value),ye=_n(re.value),we=re.value!==null?re.value:oe;if(m){if(ce!==m)return[new pt(re.key,we,`${ce} stop domain type must match previous stop domain type ${m}`)]}else m=ce;if(ce!=="number"&&ce!=="string"&&ce!=="boolean")return[new pt(re.key,we,"stop domain value must be a number, string, or boolean")];if(ce!=="number"&&u!=="categorical"){let Ve=`number expected, ${ce} found`;return Il(a)&&u===void 0&&(Ve+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new pt(re.key,we,Ve)]}return u!=="categorical"||ce!=="number"||isFinite(ye)&&Math.floor(ye)===ye?u!=="categorical"&&ce==="number"&&v!==void 0&&ye<v?[new pt(re.key,we,"stop domain values must appear in ascending order")]:(v=ye,u==="categorical"&&ye in T?[new pt(re.key,we,"stop domain values must be unique")]:(T[ye]=!0,[])):[new pt(re.key,we,`integer expected, found ${ye}`)]}}function gs(o){const a=(o.expressionContext==="property"?Cc:Xs)(ba(o.value),o.valueSpec);if(a.result==="error")return a.value.map((m=>new pt(`${o.key}${m.key}`,o.value,m.message)));const u=a.value.expression||a.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!u.outputDefined())return[new pt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!fo(u))return[new pt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!fo(u))return[new pt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Oo(u,["zoom","feature-state"]))return[new pt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!Ml(u))return[new pt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function zo(o){const a=o.key,u=o.value,m=o.valueSpec,v=[];return Array.isArray(m.values)?m.values.indexOf(_n(u))===-1&&v.push(new pt(a,u,`expected one of [${m.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(m.values).indexOf(_n(u))===-1&&v.push(new pt(a,u,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(u)} found`)),v}function kh(o){return Mc(ba(o.value))?gs(Va({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ys(o)}function ys(o){const a=o.value,u=o.key;if(Pr(a)!=="array")return[new pt(u,a,`array expected, ${Pr(a)} found`)];const m=o.styleSpec;let v,P=[];if(a.length<1)return[new pt(u,a,"filter array must have at least 1 element")];switch(P=P.concat(zo({key:`${u}[0]`,value:a[0],valueSpec:m.filter_operator,style:o.style,styleSpec:o.styleSpec})),_n(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&_n(a[1])==="$type"&&P.push(new pt(u,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&P.push(new pt(u,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(v=Pr(a[1]),v!=="string"&&P.push(new pt(`${u}[1]`,a[1],`string expected, ${v} found`)));for(let T=2;T<a.length;T++)v=Pr(a[T]),_n(a[1])==="$type"?P=P.concat(zo({key:`${u}[${T}]`,value:a[T],valueSpec:m.geometry_type,style:o.style,styleSpec:o.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&P.push(new pt(`${u}[${T}]`,a[T],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let T=1;T<a.length;T++)P=P.concat(ys({key:`${u}[${T}]`,value:a[T],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":v=Pr(a[1]),a.length!==2?P.push(new pt(u,a,`filter array for "${a[0]}" operator must have 2 elements`)):v!=="string"&&P.push(new pt(`${u}[1]`,a[1],`string expected, ${v} found`))}return P}function Oh(o,a){const u=o.key,m=o.validateSpec,v=o.style,P=o.styleSpec,T=o.value,I=o.objectKey,O=P[`${a}_${o.layerType}`];if(!O)return[];const j=I.match(/^(.*)-transition$/);if(a==="paint"&&j&&O[j[1]]&&O[j[1]].transition)return m({key:u,value:T,valueSpec:P.transition,style:v,styleSpec:P});const V=o.valueSpec||O[I];if(!V)return[new pt(u,T,`unknown property "${I}"`)];let q;if(Pr(T)==="string"&&Il(V)&&!V.tokens&&(q=/^{([^}]+)}$/.exec(T)))return[new pt(u,T,`"${I}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(q[1])} }\`.`)];const Y=[];return o.layerType==="symbol"&&(I==="text-field"&&v&&!v.glyphs&&Y.push(new pt(u,T,'use of "text-field" requires a style "glyphs" property')),I==="text-font"&&Tu(ba(T))&&_n(T.type)==="identity"&&Y.push(new pt(u,T,'"text-font" does not support identity functions'))),Y.concat(m({key:o.key,value:T,valueSpec:V,style:v,styleSpec:P,expressionContext:"property",propertyType:a,propertyKey:I}))}function Iu(o){return Oh(o,"paint")}function kc(o){return Oh(o,"layout")}function Qr(o){let a=[];const u=o.value,m=o.key,v=o.style,P=o.styleSpec;u.type||u.ref||a.push(new pt(m,u,'either "type" or "ref" is required'));let T=_n(u.type);const I=_n(u.ref);if(u.id){const O=_n(u.id);for(let j=0;j<o.arrayIndex;j++){const V=v.layers[j];_n(V.id)===O&&a.push(new pt(m,u.id,`duplicate layer id "${u.id}", previously used at line ${V.id.__line__}`))}}if("ref"in u){let O;["type","source","source-layer","filter","layout"].forEach((j=>{j in u&&a.push(new pt(m,u[j],`"${j}" is prohibited for ref layers`))})),v.layers.forEach((j=>{_n(j.id)===I&&(O=j)})),O?O.ref?a.push(new pt(m,u.ref,"ref cannot reference another ref layer")):T=_n(O.type):a.push(new pt(m,u.ref,`ref layer "${I}" not found`))}else if(T!=="background")if(u.source){const O=v.sources&&v.sources[u.source],j=O&&_n(O.type);O?j==="vector"&&T==="raster"?a.push(new pt(m,u.source,`layer "${u.id}" requires a raster source`)):j!=="raster-dem"&&T==="hillshade"?a.push(new pt(m,u.source,`layer "${u.id}" requires a raster-dem source`)):j==="raster"&&T!=="raster"?a.push(new pt(m,u.source,`layer "${u.id}" requires a vector source`)):j!=="vector"||u["source-layer"]?j==="raster-dem"&&T!=="hillshade"?a.push(new pt(m,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):T!=="line"||!u.paint||!u.paint["line-gradient"]||j==="geojson"&&O.lineMetrics||a.push(new pt(m,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new pt(m,u,`layer "${u.id}" must specify a "source-layer"`)):a.push(new pt(m,u.source,`source "${u.source}" not found`))}else a.push(new pt(m,u,'missing required property "source"'));return a=a.concat($i({key:m,value:u,valueSpec:P.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${m}.type`,value:u.type,valueSpec:P.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:u,objectKey:"type"}),filter:kh,layout:O=>$i({layer:u,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,validateSpec:O.validateSpec,objectElementValidators:{"*":j=>kc(Va({layerType:T},j))}}),paint:O=>$i({layer:u,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,validateSpec:O.validateSpec,objectElementValidators:{"*":j=>Iu(Va({layerType:T},j))}})}})),a}function jo(o){const a=o.value,u=o.key,m=Pr(a);return m!=="string"?[new pt(u,a,`string expected, ${m} found`)]:[]}const el={promoteId:function({key:o,value:a}){if(Pr(a)==="string")return jo({key:o,value:a});{const u=[];for(const m in a)u.push(...jo({key:`${o}.${m}`,value:a[m]}));return u}}};function Lo(o){const a=o.value,u=o.key,m=o.styleSpec,v=o.style,P=o.validateSpec;if(!a.type)return[new pt(u,a,'"type" is required')];const T=_n(a.type);let I;switch(T){case"vector":case"raster":return I=$i({key:u,value:a,valueSpec:m[`source_${T.replace("-","_")}`],style:o.style,styleSpec:m,objectElementValidators:el,validateSpec:P}),I;case"raster-dem":return I=(function(O){var j;const V=(j=O.sourceName)!==null&&j!==void 0?j:"",q=O.value,Y=O.styleSpec,re=Y.source_raster_dem,oe=O.style;let ce=[];const ye=Pr(q);if(q===void 0)return ce;if(ye!=="object")return ce.push(new pt("source_raster_dem",q,`object expected, ${ye} found`)),ce;const we=_n(q.encoding)==="custom",Ve=["redFactor","greenFactor","blueFactor","baseShift"],Me=O.value.encoding?`"${O.value.encoding}"`:"Default";for(const je in q)!we&&Ve.includes(je)?ce.push(new pt(je,q[je],`In "${V}": "${je}" is only valid when "encoding" is set to "custom". ${Me} encoding found`)):re[je]?ce=ce.concat(O.validateSpec({key:je,value:q[je],valueSpec:re[je],validateSpec:O.validateSpec,style:oe,styleSpec:Y})):ce.push(new pt(je,q[je],`unknown property "${je}"`));return ce})({sourceName:u,value:a,style:o.style,styleSpec:m,validateSpec:P}),I;case"geojson":if(I=$i({key:u,value:a,valueSpec:m.source_geojson,style:v,styleSpec:m,validateSpec:P,objectElementValidators:el}),a.cluster)for(const O in a.clusterProperties){const[j,V]=a.clusterProperties[O],q=typeof j=="string"?[j,["accumulated"],["get",O]]:j;I.push(...gs({key:`${u}.${O}.map`,value:V,expressionContext:"cluster-map"})),I.push(...gs({key:`${u}.${O}.reduce`,value:q,expressionContext:"cluster-reduce"}))}return I;case"video":return $i({key:u,value:a,valueSpec:m.source_video,style:v,validateSpec:P,styleSpec:m});case"image":return $i({key:u,value:a,valueSpec:m.source_image,style:v,validateSpec:P,styleSpec:m});case"canvas":return[new pt(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return zo({key:`${u}.type`,value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Oc(o){const a=o.value,u=o.styleSpec,m=u.light,v=o.style;let P=[];const T=Pr(a);if(a===void 0)return P;if(T!=="object")return P=P.concat([new pt("light",a,`object expected, ${T} found`)]),P;for(const I in a){const O=I.match(/^(.*)-transition$/);P=P.concat(O&&m[O[1]]&&m[O[1]].transition?o.validateSpec({key:I,value:a[I],valueSpec:u.transition,validateSpec:o.validateSpec,style:v,styleSpec:u}):m[I]?o.validateSpec({key:I,value:a[I],valueSpec:m[I],validateSpec:o.validateSpec,style:v,styleSpec:u}):[new pt(I,a[I],`unknown property "${I}"`)])}return P}function ku(o){const a=o.value,u=o.styleSpec,m=u.sky,v=o.style,P=Pr(a);if(a===void 0)return[];if(P!=="object")return[new pt("sky",a,`object expected, ${P} found`)];let T=[];for(const I in a)T=T.concat(m[I]?o.validateSpec({key:I,value:a[I],valueSpec:m[I],style:v,styleSpec:u}):[new pt(I,a[I],`unknown property "${I}"`)]);return T}function tl(o){const a=o.value,u=o.styleSpec,m=u.terrain,v=o.style;let P=[];const T=Pr(a);if(a===void 0)return P;if(T!=="object")return P=P.concat([new pt("terrain",a,`object expected, ${T} found`)]),P;for(const I in a)P=P.concat(m[I]?o.validateSpec({key:I,value:a[I],valueSpec:m[I],validateSpec:o.validateSpec,style:v,styleSpec:u}):[new pt(I,a[I],`unknown property "${I}"`)]);return P}function zl(o){let a=[];const u=o.value,m=o.key;if(Array.isArray(u)){const v=[],P=[];for(const T in u)u[T].id&&v.includes(u[T].id)&&a.push(new pt(m,u,`all the sprites' ids must be unique, but ${u[T].id} is duplicated`)),v.push(u[T].id),u[T].url&&P.includes(u[T].url)&&a.push(new pt(m,u,`all the sprites' URLs must be unique, but ${u[T].url} is duplicated`)),P.push(u[T].url),a=a.concat($i({key:`${m}[${T}]`,value:u[T],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return a}return jo({key:m,value:u})}const Bo={"*":()=>[],array:Dl,boolean:function(o){const a=o.value,u=o.key,m=Pr(a);return m!=="boolean"?[new pt(u,a,`boolean expected, ${m} found`)]:[]},number:go,color:function(o){const a=o.key,u=o.value,m=Pr(u);return m!=="string"?[new pt(a,u,`color expected, ${m} found`)]:ar.parse(String(u))?[]:[new pt(a,u,`color expected, "${u}" found`)]},constants:Ih,enum:zo,filter:kh,function:Rl,layer:Qr,object:$i,source:Lo,light:Oc,sky:ku,terrain:tl,projection:function(o){const a=o.value,u=o.styleSpec,m=u.projection,v=o.style,P=Pr(a);if(a===void 0)return[];if(P!=="object")return[new pt("projection",a,`object expected, ${P} found`)];let T=[];for(const I in a)T=T.concat(m[I]?o.validateSpec({key:I,value:a[I],valueSpec:m[I],style:v,styleSpec:u}):[new pt(I,a[I],`unknown property "${I}"`)]);return T},string:jo,formatted:function(o){return jo(o).length===0?[]:gs(o)},resolvedImage:function(o){return jo(o).length===0?[]:gs(o)},padding:function(o){const a=o.key,u=o.value;if(Pr(u)==="array"){if(u.length<1||u.length>4)return[new pt(a,u,`padding requires 1 to 4 values; ${u.length} values found`)];const m={type:"number"};let v=[];for(let P=0;P<u.length;P++)v=v.concat(o.validateSpec({key:`${a}[${P}]`,value:u[P],validateSpec:o.validateSpec,valueSpec:m}));return v}return go({key:a,value:u,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const a=o.key,u=o.value,m=Pr(u),v=o.styleSpec;if(m!=="array"||u.length<1||u.length%2!=0)return[new pt(a,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let P=[];for(let T=0;T<u.length;T+=2)P=P.concat(zo({key:`${a}[${T}]`,value:u[T],valueSpec:v.layout_symbol["text-anchor"]})),P=P.concat(Dl({key:`${a}[${T+1}]`,value:u[T+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:v}));return P},sprite:zl};function jl(o){const a=o.value,u=o.valueSpec,m=o.styleSpec;return o.validateSpec=jl,u.expression&&Tu(_n(a))?Rl(o):u.expression&&ps(ba(a))?gs(o):u.type&&Bo[u.type]?Bo[u.type](o):$i(Va({},o,{valueSpec:u.type?m[u.type]:u}))}function od(o){const a=o.value,u=o.key,m=jo(o);return m.length||(a.indexOf("{fontstack}")===-1&&m.push(new pt(u,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&m.push(new pt(u,a,'"glyphs" url must include a "{range}" token'))),m}function wa(o,a=qe){let u=[];return u=u.concat(jl({key:"",value:o,valueSpec:a.$root,styleSpec:a,style:o,validateSpec:jl,objectElementValidators:{glyphs:od,"*":()=>[]}})),o.constants&&(u=u.concat(Ih({key:"constants",value:o.constants}))),Ll(u)}function Za(o){return function(a){return o({...a,validateSpec:jl})}}function Ll(o){return[].concat(o).sort(((a,u)=>a.line-u.line))}function Vi(o){return function(...a){return Ll(o.apply(this,a))}}wa.source=Vi(Za(Lo)),wa.sprite=Vi(Za(zl)),wa.glyphs=Vi(Za(od)),wa.light=Vi(Za(Oc)),wa.sky=Vi(Za(ku)),wa.terrain=Vi(Za(tl)),wa.layer=Vi(Za(Qr)),wa.filter=Vi(Za(kh)),wa.paintProperty=Vi(Za(Iu)),wa.layoutProperty=Vi(Za(kc));const No=wa,Dh=No.light,Rh=No.sky,Dc=No.paintProperty,sd=No.layoutProperty;function Rc(o,a){let u=!1;if(a&&a.length)for(const m of a)o.fire(new mr(new Error(m.message))),u=!0;return u}class Bl{constructor(a,u,m){const v=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;const T=new Int32Array(this.arrayBuffer);a=T[0],this.d=(u=T[1])+2*(m=T[2]);for(let O=0;O<this.d*this.d;O++){const j=T[3+O],V=T[3+O+1];v.push(j===V?null:T.subarray(j,V))}const I=T[3+v.length+1];this.keys=T.subarray(T[3+v.length],I),this.bboxes=T.subarray(I),this.insert=this._insertReadonly}else{this.d=u+2*m;for(let T=0;T<this.d*this.d;T++)v.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=a,this.padding=m,this.scale=u/a,this.uid=0;const P=m/u*a;this.min=-P,this.max=a+P}insert(a,u,m,v,P){this._forEachCell(u,m,v,P,this._insertCell,this.uid++,void 0,void 0),this.keys.push(a),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(P)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(a,u,m,v,P,T){this.cells[P].push(T)}query(a,u,m,v,P){const T=this.min,I=this.max;if(a<=T&&u<=T&&I<=m&&I<=v&&!P)return Array.prototype.slice.call(this.keys);{const O=[];return this._forEachCell(a,u,m,v,this._queryCell,O,{},P),O}}_queryCell(a,u,m,v,P,T,I,O){const j=this.cells[P];if(j!==null){const V=this.keys,q=this.bboxes;for(let Y=0;Y<j.length;Y++){const re=j[Y];if(I[re]===void 0){const oe=4*re;(O?O(q[oe+0],q[oe+1],q[oe+2],q[oe+3]):a<=q[oe+2]&&u<=q[oe+3]&&m>=q[oe+0]&&v>=q[oe+1])?(I[re]=!0,T.push(V[re])):I[re]=!1}}}}_forEachCell(a,u,m,v,P,T,I,O){const j=this._convertToCellCoord(a),V=this._convertToCellCoord(u),q=this._convertToCellCoord(m),Y=this._convertToCellCoord(v);for(let re=j;re<=q;re++)for(let oe=V;oe<=Y;oe++){const ce=this.d*oe+re;if((!O||O(this._convertFromCellCoord(re),this._convertFromCellCoord(oe),this._convertFromCellCoord(re+1),this._convertFromCellCoord(oe+1)))&&P.call(this,a,u,m,v,ce,T,I,O))return}}_convertFromCellCoord(a){return(a-this.padding)/this.scale}_convertToCellCoord(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const a=this.cells,u=3+this.cells.length+1+1;let m=0;for(let T=0;T<this.cells.length;T++)m+=this.cells[T].length;const v=new Int32Array(u+m+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let P=u;for(let T=0;T<a.length;T++){const I=a[T];v[3+T]=P,v.set(I,P),P+=I.length}return v[3+a.length]=P,v.set(this.keys,P),P+=this.keys.length,v[3+a.length+1]=P,v.set(this.bboxes,P),P+=this.bboxes.length,v.buffer}static serialize(a,u){const m=a.toArrayBuffer();return u&&u.push(m),{buffer:m}}static deserialize(a){return new Bl(a.buffer)}}const Sa={};function It(o,a,u={}){if(Sa[o])throw new Error(`${o} is already registered.`);Object.defineProperty(a,"_classRegistryKey",{value:o,writeable:!1}),Sa[o]={klass:a,omit:u.omit||[],shallow:u.shallow||[]}}It("Object",Object),It("TransferableGridIndex",Bl),It("Color",ar),It("Error",Error),It("AJAXError",cr),It("ResolvedImage",di),It("StylePropertyFunction",ms),It("StyleExpression",Fi,{omit:["_evaluator"]}),It("ZoomDependentExpression",Js),It("ZoomConstantExpression",Ys),It("CompoundExpression",ia,{omit:["_evaluate"]});for(const o in Zs)Zs[o]._classRegistryKey||It(`Expression_${o}`,Zs[o]);function Ka(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function zc(o){return o.$name||o.constructor._classRegistryKey}function rl(o){return!(function(a){if(a===null||typeof a!="object")return!1;const u=zc(a);return!(!u||u==="Object")})(o)&&(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||Ka(o)||Qe(o)||ArrayBuffer.isView(o)||o instanceof ImageData)}function Ti(o,a){if(rl(o))return(Ka(o)||Qe(o))&&a&&a.push(o),ArrayBuffer.isView(o)&&a&&a.push(o.buffer),o instanceof ImageData&&a&&a.push(o.data.buffer),o;if(Array.isArray(o)){const P=[];for(const T of o)P.push(Ti(T,a));return P}if(typeof o!="object")throw new Error("can't serialize object of type "+typeof o);const u=zc(o);if(!u)throw new Error(`can't serialize object of unregistered class ${o.constructor.name}`);if(!Sa[u])throw new Error(`${u} is not registered.`);const{klass:m}=Sa[u],v=m.serialize?m.serialize(o,a):{};if(m.serialize){if(a&&v===a[a.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const P in o){if(!o.hasOwnProperty(P)||Sa[u].omit.indexOf(P)>=0)continue;const T=o[P];v[P]=Sa[u].shallow.indexOf(P)>=0?T:Ti(T,a)}o instanceof Error&&(v.message=o.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(v.$name=u),v}function yo(o){if(rl(o))return o;if(Array.isArray(o))return o.map(yo);if(typeof o!="object")throw new Error("can't deserialize object of type "+typeof o);const a=zc(o)||"Object";if(!Sa[a])throw new Error(`can't deserialize unregistered class ${a}`);const{klass:u}=Sa[a];if(!u)throw new Error(`can't deserialize unregistered class ${a}`);if(u.deserialize)return u.deserialize(o);const m=Object.create(u.prototype);for(const v of Object.keys(o)){if(v==="$name")continue;const P=o[v];m[v]=Sa[a].shallow.indexOf(v)>=0?P:yo(P)}return m}class Xa{constructor(){this.first=!0}update(a,u){const m=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=u),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=m,!0))}}const wr={"Latin-1 Supplement":o=>o>=128&&o<=255,"Hangul Jamo":o=>o>=4352&&o<=4607,Khmer:o=>o>=6016&&o<=6143,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Katakana:o=>o>=12448&&o<=12543,Kanbun:o=>o>=12688&&o<=12703,"CJK Strokes":o=>o>=12736&&o<=12783,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"Private Use Area":o=>o>=57344&&o<=63743,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function zh(o){for(const a of o)if(Ru(a.charCodeAt(0)))return!0;return!1}function Jp(o){for(const a of o)if(!Ya(a.charCodeAt(0)))return!1;return!0}function Fo(o){const a=o.map((u=>{try{return new RegExp(`\\p{sc=${u}}`,"u").source}catch{return null}})).filter((u=>u));return new RegExp(a.join("|"),"u")}const Ou=Fo(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ya(o){return!Ou.test(String.fromCodePoint(o))}const Du=Fo(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Ru(o){return!(o!==746&&o!==747&&(o<4352||!(wr["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||wr["CJK Compatibility"](o)||wr["CJK Strokes"](o)||!(!wr["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||wr["Enclosed CJK Letters and Months"](o)||wr["Ideographic Description Characters"](o)||wr.Kanbun(o)||wr.Katakana(o)&&o!==12540||!(!wr["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!wr["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||wr["Vertical Forms"](o)||wr["Yijing Hexagram Symbols"](o)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(o))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(o))||Du.test(String.fromCodePoint(o)))))}function nl(o){return!(Ru(o)||(function(a){return!!(wr["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||wr["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||wr["Letterlike Symbols"](a)||wr["Number Forms"](a)||wr["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||wr["Control Pictures"](a)&&a!==9251||wr["Optical Character Recognition"](a)||wr["Enclosed Alphanumerics"](a)||wr["Geometric Shapes"](a)||wr["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||wr["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||wr["CJK Symbols and Punctuation"](a)||wr.Katakana(a)||wr["Private Use Area"](a)||wr["CJK Compatibility Forms"](a)||wr["Small Form Variants"](a)||wr["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)})(o))}const vs=Fo(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function en(o){return vs.test(String.fromCodePoint(o))}function an(o,a){return!(!a&&en(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||wr.Khmer(o))}function _s(o){for(const a of o)if(en(a.charCodeAt(0)))return!0;return!1}const Gr=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Sr{constructor(a,u){this.zoom=a,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Xa,this.transition={})}isSupportedScript(a){return(function(u,m){for(const v of u)if(!an(v.charCodeAt(0),m))return!1;return!0})(a,Gr.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const a=this.zoom,u=a-Math.floor(a),m=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*u}}}class Pa{constructor(a,u){this.property=a,this.value=u,this.expression=(function(m,v){if(Tu(m))return new ms(m,v);if(ps(m)){const P=Cc(m,v);if(P.result==="error")throw new Error(P.value.map((T=>`${T.key}: ${T.message}`)).join(", "));return P.value}{let P=m;return v.type==="color"&&typeof m=="string"?P=ar.parse(m):v.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?v.type==="variableAnchorOffsetCollection"&&Array.isArray(m)&&(P=ra.parse(m)):P=fi.parse(m),{kind:"constant",evaluate:()=>P}}})(u===void 0?a.specification.default:u,a.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,u,m){return this.property.possiblyEvaluate(this,a,u,m)}}class $o{constructor(a){this.property=a,this.value=new Pa(a,void 0)}transitioned(a,u){return new zu(this.property,this.value,u,se({},a.transition,this.transition),a.now)}untransitioned(){return new zu(this.property,this.value,null,{},0)}}class ni{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return xe(this._values[a].value.value)}setValue(a,u){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new $o(this._values[a].property)),this._values[a].value=new Pa(this._values[a].property,u===null?void 0:xe(u))}getTransition(a){return xe(this._values[a].transition)}setTransition(a,u){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new $o(this._values[a].property)),this._values[a].transition=xe(u)||void 0}serialize(){const a={};for(const u of Object.keys(this._values)){const m=this.getValue(u);m!==void 0&&(a[u]=m);const v=this.getTransition(u);v!==void 0&&(a[`${u}-transition`]=v)}return a}transitioned(a,u){const m=new Nl(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].transitioned(a,u._values[v]);return m}untransitioned(){const a=new Nl(this._properties);for(const u of Object.keys(this._values))a._values[u]=this._values[u].untransitioned();return a}}class zu{constructor(a,u,m,v,P){this.property=a,this.value=u,this.begin=P+v.delay||0,this.end=this.begin+v.duration||0,a.specification.transition&&(v.delay||v.duration)&&(this.prior=m)}possiblyEvaluate(a,u,m){const v=a.now||0,P=this.value.possiblyEvaluate(a,u,m),T=this.prior;if(T){if(v>this.end)return this.prior=null,P;if(this.value.isDataDriven())return this.prior=null,P;if(v<this.begin)return T.possiblyEvaluate(a,u,m);{const I=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(T.possiblyEvaluate(a,u,m),P,(function(O){if(O<=0)return 0;if(O>=1)return 1;const j=O*O,V=j*O;return 4*(O<.5?V:3*(O-j)+V-.75)})(I))}}return P}}class Nl{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,u,m){const v=new $l(this._properties);for(const P of Object.keys(this._values))v._values[P]=this._values[P].possiblyEvaluate(a,u,m);return v}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class Fl{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}hasValue(a){return this._values[a].value!==void 0}getValue(a){return xe(this._values[a].value)}setValue(a,u){this._values[a]=new Pa(this._values[a].property,u===null?void 0:xe(u))}serialize(){const a={};for(const u of Object.keys(this._values)){const m=this.getValue(u);m!==void 0&&(a[u]=m)}return a}possiblyEvaluate(a,u,m){const v=new $l(this._properties);for(const P of Object.keys(this._values))v._values[P]=this._values[P].possiblyEvaluate(a,u,m);return v}}class aa{constructor(a,u,m){this.property=a,this.value=u,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,u,m,v){return this.property.evaluate(this.value,this.parameters,a,u,m,v)}}class $l{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class kt{constructor(a){this.specification=a}possiblyEvaluate(a,u){if(a.isDataDriven())throw new Error("Value should not be data driven");return a.expression.evaluate(u)}interpolate(a,u,m){const v=Mn[this.specification.type];return v?v(a,u,m):a}}class Zt{constructor(a,u){this.specification=a,this.overrides=u}possiblyEvaluate(a,u,m,v){return new aa(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(u,null,{},m,v)}:a.expression,u)}interpolate(a,u,m){if(a.value.kind!=="constant"||u.value.kind!=="constant")return a;if(a.value.value===void 0||u.value.value===void 0)return new aa(this,{kind:"constant",value:void 0},a.parameters);const v=Mn[this.specification.type];if(v){const P=v(a.value.value,u.value.value,m);return new aa(this,{kind:"constant",value:P},a.parameters)}return a}evaluate(a,u,m,v,P,T){return a.kind==="constant"?a.value:a.evaluate(u,m,v,P,T)}}class Vl extends Zt{possiblyEvaluate(a,u,m,v){if(a.value===void 0)return new aa(this,{kind:"constant",value:void 0},u);if(a.expression.kind==="constant"){const P=a.expression.evaluate(u,null,{},m,v),T=a.property.specification.type==="resolvedImage"&&typeof P!="string"?P.name:P,I=this._calculate(T,T,T,u);return new aa(this,{kind:"constant",value:I},u)}if(a.expression.kind==="camera"){const P=this._calculate(a.expression.evaluate({zoom:u.zoom-1}),a.expression.evaluate({zoom:u.zoom}),a.expression.evaluate({zoom:u.zoom+1}),u);return new aa(this,{kind:"constant",value:P},u)}return new aa(this,a.expression,u)}evaluate(a,u,m,v,P,T){if(a.kind==="source"){const I=a.evaluate(u,m,v,P,T);return this._calculate(I,I,I,u)}return a.kind==="composite"?this._calculate(a.evaluate({zoom:Math.floor(u.zoom)-1},m,v),a.evaluate({zoom:Math.floor(u.zoom)},m,v),a.evaluate({zoom:Math.floor(u.zoom)+1},m,v),u):a.value}_calculate(a,u,m,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:a,to:u}:{from:m,to:u}}interpolate(a){return a}}class ju{constructor(a){this.specification=a}possiblyEvaluate(a,u,m,v){if(a.value!==void 0){if(a.expression.kind==="constant"){const P=a.expression.evaluate(u,null,{},m,v);return this._calculate(P,P,P,u)}return this._calculate(a.expression.evaluate(new Sr(Math.floor(u.zoom-1),u)),a.expression.evaluate(new Sr(Math.floor(u.zoom),u)),a.expression.evaluate(new Sr(Math.floor(u.zoom+1),u)),u)}}_calculate(a,u,m,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:a,to:u}:{from:m,to:u}}interpolate(a){return a}}class jh{constructor(a){this.specification=a}possiblyEvaluate(a,u,m,v){return!!a.expression.evaluate(u,null,{},m,v)}interpolate(){return!1}}class w{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in a){const m=a[u];m.specification.overridable&&this.overridableProperties.push(u);const v=this.defaultPropertyValues[u]=new Pa(m,void 0),P=this.defaultTransitionablePropertyValues[u]=new $o(m);this.defaultTransitioningPropertyValues[u]=P.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=v.possiblyEvaluate({})}}}It("DataDrivenProperty",Zt),It("DataConstantProperty",kt),It("CrossFadedDataDrivenProperty",Vl),It("CrossFadedProperty",ju),It("ColorRampProperty",jh);const i="-transition";class f extends Yr{constructor(a,u){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1},a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),u.layout&&(this._unevaluatedLayout=new Fl(u.layout)),u.paint)){this._transitionablePaint=new ni(u.paint);for(const m in a.paint)this.setPaintProperty(m,a.paint[m],{validate:!1});for(const m in a.layout)this.setLayoutProperty(m,a.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new $l(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,u,m={}){u!=null&&this._validate(sd,`layers.${this.id}.layout.${a}`,a,u,m)||(a!=="visibility"?this._unevaluatedLayout.setValue(a,u):this.visibility=u)}getPaintProperty(a){return a.endsWith(i)?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)}setPaintProperty(a,u,m={}){if(u!=null&&this._validate(Dc,`layers.${this.id}.paint.${a}`,a,u,m))return!1;if(a.endsWith(i))return this._transitionablePaint.setTransition(a.slice(0,-11),u||void 0),!1;{const v=this._transitionablePaint._values[a],P=v.property.specification["property-type"]==="cross-faded-data-driven",T=v.value.isDataDriven(),I=v.value;this._transitionablePaint.setValue(a,u),this._handleSpecialPaintPropertyUpdate(a);const O=this._transitionablePaint._values[a].value;return O.isDataDriven()||T||P||this._handleOverridablePaintPropertyUpdate(a,I,O)}}_handleSpecialPaintPropertyUpdate(a){}_handleOverridablePaintPropertyUpdate(a,u,m){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,u){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,u)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),Be(a,((u,m)=>!(u===void 0||m==="layout"&&!Object.keys(u).length||m==="paint"&&!Object.keys(u).length)))}_validate(a,u,m,v,P={}){return(!P||P.validate!==!1)&&Rc(this,a.call(No,{key:u,layerType:this.type,objectKey:m,value:v,styleSpec:qe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const u=this.paint.get(a);if(u instanceof aa&&Il(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const g={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class y{constructor(a,u){this._structArray=a,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class b{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,u){return a._trim(),u&&(a.isTransferred=!0,u.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const u=Object.create(this.prototype);return u.arrayBuffer=a.arrayBuffer,u.length=a.length,u.capacity=a.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function k(o,a=1){let u=0,m=0;return{members:o.map((v=>{const P=g[v.type].BYTES_PER_ELEMENT,T=u=D(u,Math.max(a,P)),I=v.components||1;return m=Math.max(m,P),u+=P*I,{name:v.name,type:v.type,components:I,offset:T}})),size:D(u,Math.max(m,a)),alignment:a}}function D(o,a){return Math.ceil(o/a)*a}class z extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u){const m=this.length;return this.resize(m+1),this.emplace(m,a,u)}emplace(a,u,m){const v=2*a;return this.int16[v+0]=u,this.int16[v+1]=m,a}}z.prototype.bytesPerElement=4,It("StructArrayLayout2i4",z);class $ extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,a,u,m)}emplace(a,u,m,v){const P=3*a;return this.int16[P+0]=u,this.int16[P+1]=m,this.int16[P+2]=v,a}}$.prototype.bytesPerElement=6,It("StructArrayLayout3i6",$);class W extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,m,v){const P=this.length;return this.resize(P+1),this.emplace(P,a,u,m,v)}emplace(a,u,m,v,P){const T=4*a;return this.int16[T+0]=u,this.int16[T+1]=m,this.int16[T+2]=v,this.int16[T+3]=P,a}}W.prototype.bytesPerElement=8,It("StructArrayLayout4i8",W);class G extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,m,v,P,T){const I=this.length;return this.resize(I+1),this.emplace(I,a,u,m,v,P,T)}emplace(a,u,m,v,P,T,I){const O=6*a;return this.int16[O+0]=u,this.int16[O+1]=m,this.int16[O+2]=v,this.int16[O+3]=P,this.int16[O+4]=T,this.int16[O+5]=I,a}}G.prototype.bytesPerElement=12,It("StructArrayLayout2i4i12",G);class ne extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,m,v,P,T){const I=this.length;return this.resize(I+1),this.emplace(I,a,u,m,v,P,T)}emplace(a,u,m,v,P,T,I){const O=4*a,j=8*a;return this.int16[O+0]=u,this.int16[O+1]=m,this.uint8[j+4]=v,this.uint8[j+5]=P,this.uint8[j+6]=T,this.uint8[j+7]=I,a}}ne.prototype.bytesPerElement=8,It("StructArrayLayout2i4ub8",ne);class le extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u){const m=this.length;return this.resize(m+1),this.emplace(m,a,u)}emplace(a,u,m){const v=2*a;return this.float32[v+0]=u,this.float32[v+1]=m,a}}le.prototype.bytesPerElement=8,It("StructArrayLayout2f8",le);class he extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,m,v,P,T,I,O,j,V){const q=this.length;return this.resize(q+1),this.emplace(q,a,u,m,v,P,T,I,O,j,V)}emplace(a,u,m,v,P,T,I,O,j,V,q){const Y=10*a;return this.uint16[Y+0]=u,this.uint16[Y+1]=m,this.uint16[Y+2]=v,this.uint16[Y+3]=P,this.uint16[Y+4]=T,this.uint16[Y+5]=I,this.uint16[Y+6]=O,this.uint16[Y+7]=j,this.uint16[Y+8]=V,this.uint16[Y+9]=q,a}}he.prototype.bytesPerElement=20,It("StructArrayLayout10ui20",he);class de extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,m,v,P,T,I,O,j,V,q,Y){const re=this.length;return this.resize(re+1),this.emplace(re,a,u,m,v,P,T,I,O,j,V,q,Y)}emplace(a,u,m,v,P,T,I,O,j,V,q,Y,re){const oe=12*a;return this.int16[oe+0]=u,this.int16[oe+1]=m,this.int16[oe+2]=v,this.int16[oe+3]=P,this.uint16[oe+4]=T,this.uint16[oe+5]=I,this.uint16[oe+6]=O,this.uint16[oe+7]=j,this.int16[oe+8]=V,this.int16[oe+9]=q,this.int16[oe+10]=Y,this.int16[oe+11]=re,a}}de.prototype.bytesPerElement=24,It("StructArrayLayout4i4ui4i24",de);class ge extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,a,u,m)}emplace(a,u,m,v){const P=3*a;return this.float32[P+0]=u,this.float32[P+1]=m,this.float32[P+2]=v,a}}ge.prototype.bytesPerElement=12,It("StructArrayLayout3f12",ge);class _e extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.uint32[1*a+0]=u,a}}_e.prototype.bytesPerElement=4,It("StructArrayLayout1ul4",_e);class Ee extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,m,v,P,T,I,O,j){const V=this.length;return this.resize(V+1),this.emplace(V,a,u,m,v,P,T,I,O,j)}emplace(a,u,m,v,P,T,I,O,j,V){const q=10*a,Y=5*a;return this.int16[q+0]=u,this.int16[q+1]=m,this.int16[q+2]=v,this.int16[q+3]=P,this.int16[q+4]=T,this.int16[q+5]=I,this.uint32[Y+3]=O,this.uint16[q+8]=j,this.uint16[q+9]=V,a}}Ee.prototype.bytesPerElement=20,It("StructArrayLayout6i1ul2ui20",Ee);class pe extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,m,v,P,T){const I=this.length;return this.resize(I+1),this.emplace(I,a,u,m,v,P,T)}emplace(a,u,m,v,P,T,I){const O=6*a;return this.int16[O+0]=u,this.int16[O+1]=m,this.int16[O+2]=v,this.int16[O+3]=P,this.int16[O+4]=T,this.int16[O+5]=I,a}}pe.prototype.bytesPerElement=12,It("StructArrayLayout2i2i2i12",pe);class ke extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,m,v,P){const T=this.length;return this.resize(T+1),this.emplace(T,a,u,m,v,P)}emplace(a,u,m,v,P,T){const I=4*a,O=8*a;return this.float32[I+0]=u,this.float32[I+1]=m,this.float32[I+2]=v,this.int16[O+6]=P,this.int16[O+7]=T,a}}ke.prototype.bytesPerElement=16,It("StructArrayLayout2f1f2i16",ke);class Re extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,m,v,P,T){const I=this.length;return this.resize(I+1),this.emplace(I,a,u,m,v,P,T)}emplace(a,u,m,v,P,T,I){const O=16*a,j=4*a,V=8*a;return this.uint8[O+0]=u,this.uint8[O+1]=m,this.float32[j+1]=v,this.float32[j+2]=P,this.int16[V+6]=T,this.int16[V+7]=I,a}}Re.prototype.bytesPerElement=16,It("StructArrayLayout2ub2f2i16",Re);class Ue extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,a,u,m)}emplace(a,u,m,v){const P=3*a;return this.uint16[P+0]=u,this.uint16[P+1]=m,this.uint16[P+2]=v,a}}Ue.prototype.bytesPerElement=6,It("StructArrayLayout3ui6",Ue);class at extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,m,v,P,T,I,O,j,V,q,Y,re,oe,ce,ye,we){const Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,a,u,m,v,P,T,I,O,j,V,q,Y,re,oe,ce,ye,we)}emplace(a,u,m,v,P,T,I,O,j,V,q,Y,re,oe,ce,ye,we,Ve){const Me=24*a,je=12*a,et=48*a;return this.int16[Me+0]=u,this.int16[Me+1]=m,this.uint16[Me+2]=v,this.uint16[Me+3]=P,this.uint32[je+2]=T,this.uint32[je+3]=I,this.uint32[je+4]=O,this.uint16[Me+10]=j,this.uint16[Me+11]=V,this.uint16[Me+12]=q,this.float32[je+7]=Y,this.float32[je+8]=re,this.uint8[et+36]=oe,this.uint8[et+37]=ce,this.uint8[et+38]=ye,this.uint32[je+10]=we,this.int16[Me+22]=Ve,a}}at.prototype.bytesPerElement=48,It("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",at);class dt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,m,v,P,T,I,O,j,V,q,Y,re,oe,ce,ye,we,Ve,Me,je,et,ut,Mt,Yt,Ct,Tt,Ft,zt){const Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,a,u,m,v,P,T,I,O,j,V,q,Y,re,oe,ce,ye,we,Ve,Me,je,et,ut,Mt,Yt,Ct,Tt,Ft,zt)}emplace(a,u,m,v,P,T,I,O,j,V,q,Y,re,oe,ce,ye,we,Ve,Me,je,et,ut,Mt,Yt,Ct,Tt,Ft,zt,Dt){const it=32*a,Vt=16*a;return this.int16[it+0]=u,this.int16[it+1]=m,this.int16[it+2]=v,this.int16[it+3]=P,this.int16[it+4]=T,this.int16[it+5]=I,this.int16[it+6]=O,this.int16[it+7]=j,this.uint16[it+8]=V,this.uint16[it+9]=q,this.uint16[it+10]=Y,this.uint16[it+11]=re,this.uint16[it+12]=oe,this.uint16[it+13]=ce,this.uint16[it+14]=ye,this.uint16[it+15]=we,this.uint16[it+16]=Ve,this.uint16[it+17]=Me,this.uint16[it+18]=je,this.uint16[it+19]=et,this.uint16[it+20]=ut,this.uint16[it+21]=Mt,this.uint16[it+22]=Yt,this.uint32[Vt+12]=Ct,this.float32[Vt+13]=Tt,this.float32[Vt+14]=Ft,this.uint16[it+30]=zt,this.uint16[it+31]=Dt,a}}dt.prototype.bytesPerElement=64,It("StructArrayLayout8i15ui1ul2f2ui64",dt);class _t extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.float32[1*a+0]=u,a}}_t.prototype.bytesPerElement=4,It("StructArrayLayout1f4",_t);class At extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,a,u,m)}emplace(a,u,m,v){const P=3*a;return this.uint16[6*a+0]=u,this.float32[P+1]=m,this.float32[P+2]=v,a}}At.prototype.bytesPerElement=12,It("StructArrayLayout1ui2f12",At);class xt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,a,u,m)}emplace(a,u,m,v){const P=4*a;return this.uint32[2*a+0]=u,this.uint16[P+2]=m,this.uint16[P+3]=v,a}}xt.prototype.bytesPerElement=8,It("StructArrayLayout1ul2ui8",xt);class gt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u){const m=this.length;return this.resize(m+1),this.emplace(m,a,u)}emplace(a,u,m){const v=2*a;return this.uint16[v+0]=u,this.uint16[v+1]=m,a}}gt.prototype.bytesPerElement=4,It("StructArrayLayout2ui4",gt);class Rt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.uint16[1*a+0]=u,a}}Rt.prototype.bytesPerElement=2,It("StructArrayLayout1ui2",Rt);class tr extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,m,v){const P=this.length;return this.resize(P+1),this.emplace(P,a,u,m,v)}emplace(a,u,m,v,P){const T=4*a;return this.float32[T+0]=u,this.float32[T+1]=m,this.float32[T+2]=v,this.float32[T+3]=P,a}}tr.prototype.bytesPerElement=16,It("StructArrayLayout4f16",tr);class wt extends y{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new A(this.anchorPointX,this.anchorPointY)}}wt.prototype.size=20;class Pt extends Ee{get(a){return new wt(this,a)}}It("CollisionBoxArray",Pt);class er extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(a){this._structArray.uint8[this._pos1+37]=a}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(a){this._structArray.uint8[this._pos1+38]=a}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(a){this._structArray.uint32[this._pos4+10]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}er.prototype.size=48;class qr extends at{get(a){return new er(this,a)}}It("PlacedSymbolArray",qr);class ur extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(a){this._structArray.uint32[this._pos4+12]=a}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ur.prototype.size=64;class yr extends dt{get(a){return new ur(this,a)}}It("SymbolInstanceArray",yr);class Hr extends _t{getoffsetX(a){return this.float32[1*a+0]}}It("GlyphOffsetArray",Hr);class Xn extends ${getx(a){return this.int16[3*a+0]}gety(a){return this.int16[3*a+1]}gettileUnitDistanceFromAnchor(a){return this.int16[3*a+2]}}It("SymbolLineVertexArray",Xn);class oa extends y{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}oa.prototype.size=12;class Zr extends At{get(a){return new oa(this,a)}}It("TextAnchorOffsetArray",Zr);class Fn extends y{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Fn.prototype.size=8;class on extends xt{get(a){return new Fn(this,a)}}It("FeatureIndexArray",on);class Pn extends z{}class ii extends z{}class Ja extends z{}class Ui extends G{}class Qa extends ne{}class xs extends le{}class sa extends he{}class Ta extends de{}class vo extends ge{}class Ai extends _e{}class la extends pe{}class eo extends Re{}class Aa extends Ue{}class In extends gt{}const cn=k([{name:"a_pos",components:2,type:"Int16"}],4),{members:ai}=cn;class xr{constructor(a=[]){this.segments=a}prepareSegment(a,u,m,v){let P=this.segments[this.segments.length-1];return a>xr.MAX_VERTEX_ARRAY_LENGTH&&Fe(`Max vertices per segment is ${xr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!P||P.vertexLength+a>xr.MAX_VERTEX_ARRAY_LENGTH||P.sortKey!==v)&&(P={vertexOffset:u.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},v!==void 0&&(P.sortKey=v),this.segments.push(P)),P}get(){return this.segments}destroy(){for(const a of this.segments)for(const u in a.vaos)a.vaos[u].destroy()}static simpleSegment(a,u,m,v){return new xr([{vertexOffset:a,primitiveOffset:u,vertexLength:m,primitiveLength:v,vaos:{},sortKey:0}])}}function ua(o,a){return 256*(o=H(Math.floor(o),0,255))+H(Math.floor(a),0,255)}xr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,It("SegmentVector",xr);const bs=k([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var to={exports:{}},Lh={exports:{}};Lh.exports=function(o,a){var u,m,v,P,T,I,O,j;for(m=o.length-(u=3&o.length),v=a,T=3432918353,I=461845907,j=0;j<m;)O=255&o.charCodeAt(j)|(255&o.charCodeAt(++j))<<8|(255&o.charCodeAt(++j))<<16|(255&o.charCodeAt(++j))<<24,++j,v=27492+(65535&(P=5*(65535&(v=(v^=O=(65535&(O=(O=(65535&O)*T+(((O>>>16)*T&65535)<<16)&4294967295)<<15|O>>>17))*I+(((O>>>16)*I&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(P>>>16)&65535)<<16);switch(O=0,u){case 3:O^=(255&o.charCodeAt(j+2))<<16;case 2:O^=(255&o.charCodeAt(j+1))<<8;case 1:v^=O=(65535&(O=(O=(65535&(O^=255&o.charCodeAt(j)))*T+(((O>>>16)*T&65535)<<16)&4294967295)<<15|O>>>17))*I+(((O>>>16)*I&65535)<<16)&4294967295}return v^=o.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0};var Bh=Lh.exports,mn={exports:{}};mn.exports=function(o,a){for(var u,m=o.length,v=a^m,P=0;m>=4;)u=1540483477*(65535&(u=255&o.charCodeAt(P)|(255&o.charCodeAt(++P))<<8|(255&o.charCodeAt(++P))<<16|(255&o.charCodeAt(++P))<<24))+((1540483477*(u>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),m-=4,++P;switch(m){case 3:v^=(255&o.charCodeAt(P+2))<<16;case 2:v^=(255&o.charCodeAt(P+1))<<8;case 1:v=1540483477*(65535&(v^=255&o.charCodeAt(P)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0};var ro=Bh,jc=mn.exports;to.exports=ro,to.exports.murmur3=ro,to.exports.murmur2=jc;var Ul=_(to.exports);class ws{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,u,m,v){this.ids.push(ql(a)),this.positions.push(u,m,v)}getPositions(a){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=ql(a);let m=0,v=this.ids.length-1;for(;m<v;){const T=m+v>>1;this.ids[T]>=u?v=T:m=T+1}const P=[];for(;this.ids[m]===u;)P.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return P}static serialize(a,u){const m=new Float64Array(a.ids),v=new Uint32Array(a.positions);return _o(m,v,0,m.length-1),u&&u.push(m.buffer,v.buffer),{ids:m,positions:v}}static deserialize(a){const u=new ws;return u.ids=a.ids,u.positions=a.positions,u.indexed=!0,u}}function ql(o){const a=+o;return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER?a:Ul(String(o))}function _o(o,a,u,m){for(;u<m;){const v=o[u+m>>1];let P=u-1,T=m+1;for(;;){do P++;while(o[P]<v);do T--;while(o[T]>v);if(P>=T)break;Kr(o,P,T),Kr(a,3*P,3*T),Kr(a,3*P+1,3*T+1),Kr(a,3*P+2,3*T+2)}T-u<m-T?(_o(o,a,u,T),u=T+1):(_o(o,a,T+1,m),m=T)}}function Kr(o,a,u){const m=o[a];o[a]=o[u],o[u]=m}It("FeaturePositionMap",ws);class xn{constructor(a,u){this.gl=a.gl,this.location=u}}class $n extends xn{constructor(a,u){super(a,u),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class Nh extends xn{constructor(a,u){super(a,u),this.current=[0,0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))}}class Lc extends xn{constructor(a,u){super(a,u),this.current=ar.transparent}set(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))}}const Fh=new Float32Array(16);function Qp(o){return[ua(255*o.r,255*o.g),ua(255*o.b,255*o.a)]}class Yn{constructor(a,u,m){this.value=a,this.uniformNames=u.map((v=>`u_${v}`)),this.type=m}setUniform(a,u,m){a.set(m.constantOr(this.value))}getBinding(a,u,m){return this.type==="color"?new Lc(a,u):new $n(a,u)}}class Wl{constructor(a,u){this.uniformNames=u.map((m=>`u_${m}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(a,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=a.tlbr}setUniform(a,u,m,v){const P=v==="u_pattern_to"?this.patternTo:v==="u_pattern_from"?this.patternFrom:v==="u_pixel_ratio_to"?this.pixelRatioTo:v==="u_pixel_ratio_from"?this.pixelRatioFrom:null;P&&a.set(P)}getBinding(a,u,m){return m.substr(0,9)==="u_pattern"?new Nh(a,u):new $n(a,u)}}class Vo{constructor(a,u,m,v){this.expression=a,this.type=m,this.maxValue=0,this.paintVertexAttributes=u.map((P=>({name:`a_${P}`,type:"Float32",components:m==="color"?2:1,offset:0}))),this.paintVertexArray=new v}populatePaintArray(a,u,m,v,P){const T=this.paintVertexArray.length,I=this.expression.evaluate(new Sr(0),u,{},v,[],P);this.paintVertexArray.resize(a),this._setPaintValue(T,a,I)}updatePaintArray(a,u,m,v){const P=this.expression.evaluate({zoom:0},m,v);this._setPaintValue(a,u,P)}_setPaintValue(a,u,m){if(this.type==="color"){const v=Qp(m);for(let P=a;P<u;P++)this.paintVertexArray.emplace(P,v[0],v[1])}else{for(let v=a;v<u;v++)this.paintVertexArray.emplace(v,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class no{constructor(a,u,m,v,P,T){this.expression=a,this.uniformNames=u.map((I=>`u_${I}_t`)),this.type=m,this.useIntegerZoom=v,this.zoom=P,this.maxValue=0,this.paintVertexAttributes=u.map((I=>({name:`a_${I}`,type:"Float32",components:m==="color"?4:2,offset:0}))),this.paintVertexArray=new T}populatePaintArray(a,u,m,v,P){const T=this.expression.evaluate(new Sr(this.zoom),u,{},v,[],P),I=this.expression.evaluate(new Sr(this.zoom+1),u,{},v,[],P),O=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(O,a,T,I)}updatePaintArray(a,u,m,v){const P=this.expression.evaluate({zoom:this.zoom},m,v),T=this.expression.evaluate({zoom:this.zoom+1},m,v);this._setPaintValue(a,u,P,T)}_setPaintValue(a,u,m,v){if(this.type==="color"){const P=Qp(m),T=Qp(v);for(let I=a;I<u;I++)this.paintVertexArray.emplace(I,P[0],P[1],T[0],T[1])}else{for(let P=a;P<u;P++)this.paintVertexArray.emplace(P,m,v);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(v))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,u){const m=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,v=H(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);a.set(v)}getBinding(a,u,m){return new $n(a,u)}}class Ei{constructor(a,u,m,v,P,T){this.expression=a,this.type=u,this.useIntegerZoom=m,this.zoom=v,this.layerId=T,this.zoomInPaintVertexArray=new P,this.zoomOutPaintVertexArray=new P}populatePaintArray(a,u,m){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(v,a,u.patterns&&u.patterns[this.layerId],m)}updatePaintArray(a,u,m,v,P){this._setPaintValues(a,u,m.patterns&&m.patterns[this.layerId],P)}_setPaintValues(a,u,m,v){if(!v||!m)return;const{min:P,mid:T,max:I}=m,O=v[P],j=v[T],V=v[I];if(O&&j&&V)for(let q=a;q<u;q++)this.zoomInPaintVertexArray.emplace(q,j.tl[0],j.tl[1],j.br[0],j.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1],j.pixelRatio,O.pixelRatio),this.zoomOutPaintVertexArray.emplace(q,j.tl[0],j.tl[1],j.br[0],j.br[1],V.tl[0],V.tl[1],V.br[0],V.br[1],j.pixelRatio,V.pixelRatio)}upload(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,bs.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,bs.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class io{constructor(a,u,m){this.binders={},this._buffers=[];const v=[];for(const P in a.paint._values){if(!m(P))continue;const T=a.paint.get(P);if(!(T instanceof aa&&Il(T.property.specification)))continue;const I=em(P,a.type),O=T.value,j=T.property.specification.type,V=T.property.useIntegerZoom,q=T.property.specification["property-type"],Y=q==="cross-faded"||q==="cross-faded-data-driven";if(O.kind==="constant")this.binders[P]=Y?new Wl(O.value,I):new Yn(O.value,I,j),v.push(`/u_${P}`);else if(O.kind==="source"||Y){const re=ld(P,j,"source");this.binders[P]=Y?new Ei(O,j,V,u,re,a.id):new Vo(O,I,j,re),v.push(`/a_${P}`)}else{const re=ld(P,j,"composite");this.binders[P]=new no(O,I,j,V,u,re),v.push(`/z_${P}`)}}this.cacheKey=v.sort().join("")}getMaxValue(a){const u=this.binders[a];return u instanceof Vo||u instanceof no?u.maxValue:0}populatePaintArrays(a,u,m,v,P){for(const T in this.binders){const I=this.binders[T];(I instanceof Vo||I instanceof no||I instanceof Ei)&&I.populatePaintArray(a,u,m,v,P)}}setConstantPatternPositions(a,u){for(const m in this.binders){const v=this.binders[m];v instanceof Wl&&v.setConstantPatternPositions(a,u)}}updatePaintArrays(a,u,m,v,P){let T=!1;for(const I in a){const O=u.getPositions(I);for(const j of O){const V=m.feature(j.index);for(const q in this.binders){const Y=this.binders[q];if((Y instanceof Vo||Y instanceof no||Y instanceof Ei)&&Y.expression.isStateDependent===!0){const re=v.paint.get(q);Y.expression=re.value,Y.updatePaintArray(j.start,j.end,V,a[I],P),T=!0}}}}return T}defines(){const a=[];for(const u in this.binders){const m=this.binders[u];(m instanceof Yn||m instanceof Wl)&&a.push(...m.uniformNames.map((v=>`#define HAS_UNIFORM_${v}`)))}return a}getBinderAttributes(){const a=[];for(const u in this.binders){const m=this.binders[u];if(m instanceof Vo||m instanceof no)for(let v=0;v<m.paintVertexAttributes.length;v++)a.push(m.paintVertexAttributes[v].name);else if(m instanceof Ei)for(let v=0;v<bs.members.length;v++)a.push(bs.members[v].name)}return a}getBinderUniforms(){const a=[];for(const u in this.binders){const m=this.binders[u];if(m instanceof Yn||m instanceof Wl||m instanceof no)for(const v of m.uniformNames)a.push(v)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a,u){const m=[];for(const v in this.binders){const P=this.binders[v];if(P instanceof Yn||P instanceof Wl||P instanceof no){for(const T of P.uniformNames)if(u[T]){const I=P.getBinding(a,u[T],T);m.push({name:T,property:v,binding:I})}}}return m}setUniforms(a,u,m,v){for(const{name:P,property:T,binding:I}of u)this.binders[T].setUniform(I,v,m.get(T),P)}updatePaintBuffers(a){this._buffers=[];for(const u in this.binders){const m=this.binders[u];if(a&&m instanceof Ei){const v=a.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(m instanceof Vo||m instanceof no)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(a){for(const u in this.binders){const m=this.binders[u];(m instanceof Vo||m instanceof no||m instanceof Ei)&&m.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const u=this.binders[a];(u instanceof Vo||u instanceof no||u instanceof Ei)&&u.destroy()}}}class Uo{constructor(a,u,m=(()=>!0)){this.programConfigurations={};for(const v of a)this.programConfigurations[v.id]=new io(v,u,m);this.needsUpload=!1,this._featureMap=new ws,this._bufferOffset=0}populatePaintArrays(a,u,m,v,P,T){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(a,u,v,P,T);u.id!==void 0&&this._featureMap.add(u.id,m,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,u,m,v){for(const P of m)this.needsUpload=this.programConfigurations[P.id].updatePaintArrays(a,this._featureMap,u,P,v)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}function em(o,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${a}-`,"").replace(/-/g,"_")]}function ld(o,a,u){const m={color:{source:le,composite:tr},number:{source:_t,composite:le}},v=(function(P){return{"line-pattern":{source:sa,composite:sa},"fill-pattern":{source:sa,composite:sa},"fill-extrusion-pattern":{source:sa,composite:sa}}[P]})(o);return v&&v[u]||m[a][u]}It("ConstantBinder",Yn),It("CrossFadedConstantBinder",Wl),It("SourceExpressionBinder",Vo),It("CrossFadedCompositeBinder",Ei),It("CompositeExpressionBinder",no),It("ProgramConfiguration",io,{omit:["_buffers"]}),It("ProgramConfigurationSet",Uo);const kn=8192,ud=Math.pow(2,14)-1,tm=-ud-1;function Gl(o){const a=kn/o.extent,u=o.loadGeometry();for(let m=0;m<u.length;m++){const v=u[m];for(let P=0;P<v.length;P++){const T=v[P],I=Math.round(T.x*a),O=Math.round(T.y*a);T.x=H(I,tm,ud),T.y=H(O,tm,ud),(I<T.x||I>T.x+1||O<T.y||O>T.y+1)&&Fe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function Hl(o,a){return{type:o.type,id:o.id,properties:o.properties,geometry:a?Gl(o):[]}}function $h(o,a,u,m,v){o.emplaceBack(2*a+(m+1)/2,2*u+(v+1)/2)}class cd{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((u=>u.id)),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new ii,this.indexArray=new Aa,this.segments=new xr,this.programConfigurations=new Uo(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id))}populate(a,u,m){const v=this.layers[0],P=[];let T=null,I=!1;v.type==="circle"&&(T=v.layout.get("circle-sort-key"),I=!T.isConstant());for(const{feature:O,id:j,index:V,sourceLayerIndex:q}of a){const Y=this.layers[0]._featureFilter.needGeometry,re=Hl(O,Y);if(!this.layers[0]._featureFilter.filter(new Sr(this.zoom),re,m))continue;const oe=I?T.evaluate(re,{},m):void 0,ce={id:j,properties:O.properties,type:O.type,sourceLayerIndex:q,index:V,geometry:Y?re.geometry:Gl(O),patterns:{},sortKey:oe};P.push(ce)}I&&P.sort(((O,j)=>O.sortKey-j.sortKey));for(const O of P){const{geometry:j,index:V,sourceLayerIndex:q}=O,Y=a[V].feature;this.addFeature(O,j,V,m),u.featureIndex.insert(Y,j,V,q,this.index)}}update(a,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,ai),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,u,m,v){for(const P of u)for(const T of P){const I=T.x,O=T.y;if(I<0||I>=kn||O<0||O>=kn)continue;const j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),V=j.vertexLength;$h(this.layoutVertexArray,I,O,-1,-1),$h(this.layoutVertexArray,I,O,1,-1),$h(this.layoutVertexArray,I,O,1,1),$h(this.layoutVertexArray,I,O,-1,1),this.indexArray.emplaceBack(V,V+1,V+2),this.indexArray.emplaceBack(V,V+3,V+2),j.vertexLength+=4,j.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,{},v)}}function rm(o,a){for(let u=0;u<o.length;u++)if(Lu(a,o[u]))return!0;for(let u=0;u<a.length;u++)if(Lu(o,a[u]))return!0;return!!Bc(o,a)}function Vh(o,a,u){return!!Lu(o,a)||!!Uh(a,o,u)}function nm(o,a){if(o.length===1)return am(a,o[0]);for(let u=0;u<a.length;u++){const m=a[u];for(let v=0;v<m.length;v++)if(Lu(o,m[v]))return!0}for(let u=0;u<o.length;u++)if(am(a,o[u]))return!0;for(let u=0;u<a.length;u++)if(Bc(o,a[u]))return!0;return!1}function hd(o,a,u){if(o.length>1){if(Bc(o,a))return!0;for(let m=0;m<a.length;m++)if(Uh(a[m],o,u))return!0}for(let m=0;m<o.length;m++)if(Uh(o[m],a,u))return!0;return!1}function Bc(o,a){if(o.length===0||a.length===0)return!1;for(let u=0;u<o.length-1;u++){const m=o[u],v=o[u+1];for(let P=0;P<a.length-1;P++)if(iy(m,v,a[P],a[P+1]))return!0}return!1}function iy(o,a,u,m){return Ke(o,u,m)!==Ke(a,u,m)&&Ke(o,a,u)!==Ke(o,a,m)}function Uh(o,a,u){const m=u*u;if(a.length===1)return o.distSqr(a[0])<m;for(let v=1;v<a.length;v++)if(im(o,a[v-1],a[v])<m)return!0;return!1}function im(o,a,u){const m=a.distSqr(u);if(m===0)return o.distSqr(a);const v=((o.x-a.x)*(u.x-a.x)+(o.y-a.y)*(u.y-a.y))/m;return o.distSqr(v<0?a:v>1?u:u.sub(a)._mult(v)._add(a))}function am(o,a){let u,m,v,P=!1;for(let T=0;T<o.length;T++){u=o[T];for(let I=0,O=u.length-1;I<u.length;O=I++)m=u[I],v=u[O],m.y>a.y!=v.y>a.y&&a.x<(v.x-m.x)*(a.y-m.y)/(v.y-m.y)+m.x&&(P=!P)}return P}function Lu(o,a){let u=!1;for(let m=0,v=o.length-1;m<o.length;v=m++){const P=o[m],T=o[v];P.y>a.y!=T.y>a.y&&a.x<(T.x-P.x)*(a.y-P.y)/(T.y-P.y)+P.x&&(u=!u)}return u}function ay(o,a,u){const m=u[0],v=u[2];if(o.x<m.x&&a.x<m.x||o.x>v.x&&a.x>v.x||o.y<m.y&&a.y<m.y||o.y>v.y&&a.y>v.y)return!1;const P=Ke(o,a,u[0]);return P!==Ke(o,a,u[1])||P!==Ke(o,a,u[2])||P!==Ke(o,a,u[3])}function Bu(o,a,u){const m=a.paint.get(o).value;return m.kind==="constant"?m.value:u.programConfigurations.get(a.id).getMaxValue(o)}function qh(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Wh(o,a,u,m,v){if(!a[0]&&!a[1])return o;const P=A.convert(a)._mult(v);u==="viewport"&&P._rotate(-m);const T=[];for(let I=0;I<o.length;I++)T.push(o[I].sub(P));return T}let om,oy;It("CircleBucket",cd,{omit:["layers"]});var sy={get paint(){return oy=oy||new w({"circle-radius":new Zt(qe.paint_circle["circle-radius"]),"circle-color":new Zt(qe.paint_circle["circle-color"]),"circle-blur":new Zt(qe.paint_circle["circle-blur"]),"circle-opacity":new Zt(qe.paint_circle["circle-opacity"]),"circle-translate":new kt(qe.paint_circle["circle-translate"]),"circle-translate-anchor":new kt(qe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new kt(qe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new kt(qe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Zt(qe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Zt(qe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Zt(qe.paint_circle["circle-stroke-opacity"])})},get layout(){return om=om||new w({"circle-sort-key":new Zt(qe.layout_circle["circle-sort-key"])})}},qi=1e-6,Nc=typeof Float32Array<"u"?Float32Array:Array;function fd(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function sm(o,a,u){var m=a[0],v=a[1],P=a[2],T=a[3],I=a[4],O=a[5],j=a[6],V=a[7],q=a[8],Y=a[9],re=a[10],oe=a[11],ce=a[12],ye=a[13],we=a[14],Ve=a[15],Me=u[0],je=u[1],et=u[2],ut=u[3];return o[0]=Me*m+je*I+et*q+ut*ce,o[1]=Me*v+je*O+et*Y+ut*ye,o[2]=Me*P+je*j+et*re+ut*we,o[3]=Me*T+je*V+et*oe+ut*Ve,o[4]=(Me=u[4])*m+(je=u[5])*I+(et=u[6])*q+(ut=u[7])*ce,o[5]=Me*v+je*O+et*Y+ut*ye,o[6]=Me*P+je*j+et*re+ut*we,o[7]=Me*T+je*V+et*oe+ut*Ve,o[8]=(Me=u[8])*m+(je=u[9])*I+(et=u[10])*q+(ut=u[11])*ce,o[9]=Me*v+je*O+et*Y+ut*ye,o[10]=Me*P+je*j+et*re+ut*we,o[11]=Me*T+je*V+et*oe+ut*Ve,o[12]=(Me=u[12])*m+(je=u[13])*I+(et=u[14])*q+(ut=u[15])*ce,o[13]=Me*v+je*O+et*Y+ut*ye,o[14]=Me*P+je*j+et*re+ut*we,o[15]=Me*T+je*V+et*oe+ut*Ve,o}Math.hypot||(Math.hypot=function(){for(var o=0,a=arguments.length;a--;)o+=arguments[a]*arguments[a];return Math.sqrt(o)});var Fc,dd=sm;function pd(o,a,u){var m=a[0],v=a[1],P=a[2],T=a[3];return o[0]=u[0]*m+u[4]*v+u[8]*P+u[12]*T,o[1]=u[1]*m+u[5]*v+u[9]*P+u[13]*T,o[2]=u[2]*m+u[6]*v+u[10]*P+u[14]*T,o[3]=u[3]*m+u[7]*v+u[11]*P+u[15]*T,o}Fc=new Nc(4),Nc!=Float32Array&&(Fc[0]=0,Fc[1]=0,Fc[2]=0,Fc[3]=0);class _0 extends f{constructor(a){super(a,sy)}createBucket(a){return new cd(a)}queryRadius(a){const u=a;return Bu("circle-radius",this,u)+Bu("circle-stroke-width",this,u)+qh(this.paint.get("circle-translate"))}queryIntersectsFeature(a,u,m,v,P,T,I,O){const j=Wh(a,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),T.angle,I),V=this.paint.get("circle-radius").evaluate(u,m)+this.paint.get("circle-stroke-width").evaluate(u,m),q=this.paint.get("circle-pitch-alignment")==="map",Y=q?j:(function(oe,ce){return oe.map((ye=>ly(ye,ce)))})(j,O),re=q?V*I:V;for(const oe of v)for(const ce of oe){const ye=q?ce:ly(ce,O);let we=re;const Ve=pd([],[ce.x,ce.y,0,1],O);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?we*=Ve[3]/T.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(we*=T.cameraToCenterDistance/Ve[3]),Vh(Y,ye,we))return!0}return!1}}function ly(o,a){const u=pd([],[o.x,o.y,0,1],a);return new A(u[0]/u[3],u[1]/u[3])}class xo extends cd{}let md;It("HeatmapBucket",xo,{omit:["layers"]});var gd={get paint(){return md=md||new w({"heatmap-radius":new Zt(qe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Zt(qe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new kt(qe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new jh(qe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new kt(qe.paint_heatmap["heatmap-opacity"])})}};function yd(o,{width:a,height:u},m,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==a*u*m)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${a*u*m}`)}else v=new Uint8Array(a*u*m);return o.width=a,o.height=u,o.data=v,o}function lm(o,{width:a,height:u},m){if(a===o.width&&u===o.height)return;const v=yd({},{width:a,height:u},m);vd(o,v,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,a),height:Math.min(o.height,u)},m),o.width=a,o.height=u,o.data=v.data}function vd(o,a,u,m,v,P){if(v.width===0||v.height===0)return a;if(v.width>o.width||v.height>o.height||u.x>o.width-v.width||u.y>o.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>a.width||v.height>a.height||m.x>a.width-v.width||m.y>a.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const T=o.data,I=a.data;if(T===I)throw new Error("srcData equals dstData, so image is already copied");for(let O=0;O<v.height;O++){const j=((u.y+O)*o.width+u.x)*P,V=((m.y+O)*a.width+m.x)*P;for(let q=0;q<v.width*P;q++)I[V+q]=T[j+q]}return a}class Nu{constructor(a,u){yd(this,a,1,u)}resize(a){lm(this,a,1)}clone(){return new Nu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,u,m,v,P){vd(a,u,m,v,P,1)}}class pi{constructor(a,u){yd(this,a,4,u)}resize(a){lm(this,a,4)}replace(a,u){u?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new pi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,u,m,v,P){vd(a,u,m,v,P,4)}}function _d(o){const a={},u=o.resolution||256,m=o.clips?o.clips.length:1,v=o.image||new pi({width:u,height:m});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const P=(T,I,O)=>{a[o.evaluationKey]=O;const j=o.expression.evaluate(a);v.data[T+I+0]=Math.floor(255*j.r/j.a),v.data[T+I+1]=Math.floor(255*j.g/j.a),v.data[T+I+2]=Math.floor(255*j.b/j.a),v.data[T+I+3]=Math.floor(255*j.a)};if(o.clips)for(let T=0,I=0;T<m;++T,I+=4*u)for(let O=0,j=0;O<u;O++,j+=4){const V=O/(u-1),{start:q,end:Y}=o.clips[T];P(I,j,q*(1-V)+Y*V)}else for(let T=0,I=0;T<u;T++,I+=4)P(0,I,T/(u-1));return v}It("AlphaImage",Nu),It("RGBAImage",pi);const Gh="big-fb";class x0 extends f{createBucket(a){return new xo(a)}constructor(a){super(a,gd),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=_d({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Gh)&&this.heatmapFbos.delete(Gh)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let um;var uy={get paint(){return um=um||new w({"hillshade-illumination-direction":new kt(qe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new kt(qe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new kt(qe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new kt(qe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new kt(qe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new kt(qe.paint_hillshade["hillshade-accent-color"])})}};class cy extends f{constructor(a){super(a,uy)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const hy=k([{name:"a_pos",components:2,type:"Int16"}],4),{members:fy}=hy;function dy(o,a,u=2){const m=a&&a.length,v=m?a[0]*u:o.length;let P=ca(o,0,v,u,!0);const T=[];if(!P||P.next===P.prev)return T;let I,O,j;if(m&&(P=(function(V,q,Y,re){const oe=[];for(let ce=0,ye=q.length;ce<ye;ce++){const we=ca(V,q[ce]*re,ce<ye-1?q[ce+1]*re:V.length,re,!1);we===we.next&&(we.steiner=!0),oe.push(_y(we))}oe.sort(cm);for(let ce=0;ce<oe.length;ce++)Y=vy(oe[ce],Y);return Y})(o,a,P,u)),o.length>80*u){I=1/0,O=1/0;let V=-1/0,q=-1/0;for(let Y=u;Y<v;Y+=u){const re=o[Y],oe=o[Y+1];re<I&&(I=re),oe<O&&(O=oe),re>V&&(V=re),oe>q&&(q=oe)}j=Math.max(V-I,q-O),j=j!==0?32767/j:0}return $c(P,T,u,I,O,j,0),T}function ca(o,a,u,m,v){let P;if(v===(function(T,I,O,j){let V=0;for(let q=I,Y=O-j;q<O;q+=j)V+=(T[Y]-T[q])*(T[q+1]+T[Y+1]),Y=q;return V})(o,a,u,m)>0)for(let T=a;T<u;T+=m)P=Kh(T/m|0,o[T],o[T+1],P);else for(let T=u-m;T>=a;T-=m)P=Kh(T/m|0,o[T],o[T+1],P);return P&&Vc(P,P.next)&&(ao(P),P=P.next),P}function Vn(o,a){if(!o)return o;a||(a=o);let u,m=o;do if(u=!1,m.steiner||!Vc(m,m.next)&&Tn(m.prev,m,m.next)!==0)m=m.next;else{if(ao(m),m=a=m.prev,m===m.next)break;u=!0}while(u||m!==a);return a}function $c(o,a,u,m,v,P,T){if(!o)return;!T&&P&&(function(O,j,V,q){let Y=O;do Y.z===0&&(Y.z=xd(Y.x,Y.y,j,V,q)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==O);Y.prevZ.nextZ=null,Y.prevZ=null,(function(re){let oe,ce=1;do{let ye,we=re;re=null;let Ve=null;for(oe=0;we;){oe++;let Me=we,je=0;for(let ut=0;ut<ce&&(je++,Me=Me.nextZ,Me);ut++);let et=ce;for(;je>0||et>0&&Me;)je!==0&&(et===0||!Me||we.z<=Me.z)?(ye=we,we=we.nextZ,je--):(ye=Me,Me=Me.nextZ,et--),Ve?Ve.nextZ=ye:re=ye,ye.prevZ=Ve,Ve=ye;we=Me}Ve.nextZ=null,ce*=2}while(oe>1)})(Y)})(o,m,v,P);let I=o;for(;o.prev!==o.next;){const O=o.prev,j=o.next;if(P?my(o,m,v,P):py(o))a.push(O.i,o.i,j.i),ao(o),o=j.next,I=j.next;else if((o=j)===I){T?T===1?$c(o=gy(Vn(o),a),a,u,m,v,P,2):T===2&&yy(o,a,u,m,v,P):$c(Vn(o),a,u,m,v,P,1);break}}}function py(o){const a=o.prev,u=o,m=o.next;if(Tn(a,u,m)>=0)return!1;const v=a.x,P=u.x,T=m.x,I=a.y,O=u.y,j=m.y,V=v<P?v<T?v:T:P<T?P:T,q=I<O?I<j?I:j:O<j?O:j,Y=v>P?v>T?v:T:P>T?P:T,re=I>O?I>j?I:j:O>j?O:j;let oe=m.next;for(;oe!==a;){if(oe.x>=V&&oe.x<=Y&&oe.y>=q&&oe.y<=re&&Zl(v,I,P,O,T,j,oe.x,oe.y)&&Tn(oe.prev,oe,oe.next)>=0)return!1;oe=oe.next}return!0}function my(o,a,u,m){const v=o.prev,P=o,T=o.next;if(Tn(v,P,T)>=0)return!1;const I=v.x,O=P.x,j=T.x,V=v.y,q=P.y,Y=T.y,re=I<O?I<j?I:j:O<j?O:j,oe=V<q?V<Y?V:Y:q<Y?q:Y,ce=I>O?I>j?I:j:O>j?O:j,ye=V>q?V>Y?V:Y:q>Y?q:Y,we=xd(re,oe,a,u,m),Ve=xd(ce,ye,a,u,m);let Me=o.prevZ,je=o.nextZ;for(;Me&&Me.z>=we&&je&&je.z<=Ve;){if(Me.x>=re&&Me.x<=ce&&Me.y>=oe&&Me.y<=ye&&Me!==v&&Me!==T&&Zl(I,V,O,q,j,Y,Me.x,Me.y)&&Tn(Me.prev,Me,Me.next)>=0||(Me=Me.prevZ,je.x>=re&&je.x<=ce&&je.y>=oe&&je.y<=ye&&je!==v&&je!==T&&Zl(I,V,O,q,j,Y,je.x,je.y)&&Tn(je.prev,je,je.next)>=0))return!1;je=je.nextZ}for(;Me&&Me.z>=we;){if(Me.x>=re&&Me.x<=ce&&Me.y>=oe&&Me.y<=ye&&Me!==v&&Me!==T&&Zl(I,V,O,q,j,Y,Me.x,Me.y)&&Tn(Me.prev,Me,Me.next)>=0)return!1;Me=Me.prevZ}for(;je&&je.z<=Ve;){if(je.x>=re&&je.x<=ce&&je.y>=oe&&je.y<=ye&&je!==v&&je!==T&&Zl(I,V,O,q,j,Y,je.x,je.y)&&Tn(je.prev,je,je.next)>=0)return!1;je=je.nextZ}return!0}function gy(o,a){let u=o;do{const m=u.prev,v=u.next.next;!Vc(m,v)&&Hh(m,u,u.next,v)&&Fu(m,v)&&Fu(v,m)&&(a.push(m.i,u.i,v.i),ao(u),ao(u.next),u=o=v),u=u.next}while(u!==o);return Vn(u)}function yy(o,a,u,m,v,P){let T=o;do{let I=T.next.next;for(;I!==T.prev;){if(T.i!==I.i&&fm(T,I)){let O=dm(T,I);return T=Vn(T,T.next),O=Vn(O,O.next),$c(T,a,u,m,v,P,0),void $c(O,a,u,m,v,P,0)}I=I.next}T=T.next}while(T!==o)}function cm(o,a){return o.x-a.x}function vy(o,a){const u=(function(v,P){let T=P;const I=v.x,O=v.y;let j,V=-1/0;do{if(O<=T.y&&O>=T.next.y&&T.next.y!==T.y){const ce=T.x+(O-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(ce<=I&&ce>V&&(V=ce,j=T.x<T.next.x?T:T.next,ce===I))return j}T=T.next}while(T!==P);if(!j)return null;const q=j,Y=j.x,re=j.y;let oe=1/0;T=j;do{if(I>=T.x&&T.x>=Y&&I!==T.x&&Zl(O<re?I:V,O,Y,re,O<re?V:I,O,T.x,T.y)){const ce=Math.abs(O-T.y)/(I-T.x);Fu(T,v)&&(ce<oe||ce===oe&&(T.x>j.x||T.x===j.x&&hm(j,T)))&&(j=T,oe=ce)}T=T.next}while(T!==q);return j})(o,a);if(!u)return a;const m=dm(u,o);return Vn(m,m.next),Vn(u,u.next)}function hm(o,a){return Tn(o.prev,o,a.prev)<0&&Tn(a.next,o,o.next)<0}function xd(o,a,u,m,v){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-u)*v|0)|o<<8))|o<<4))|o<<2))|o<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-m)*v|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function _y(o){let a=o,u=o;do(a.x<u.x||a.x===u.x&&a.y<u.y)&&(u=a),a=a.next;while(a!==o);return u}function Zl(o,a,u,m,v,P,T,I){return(v-T)*(a-I)>=(o-T)*(P-I)&&(o-T)*(m-I)>=(u-T)*(a-I)&&(u-T)*(P-I)>=(v-T)*(m-I)}function fm(o,a){return o.next.i!==a.i&&o.prev.i!==a.i&&!(function(u,m){let v=u;do{if(v.i!==u.i&&v.next.i!==u.i&&v.i!==m.i&&v.next.i!==m.i&&Hh(v,v.next,u,m))return!0;v=v.next}while(v!==u);return!1})(o,a)&&(Fu(o,a)&&Fu(a,o)&&(function(u,m){let v=u,P=!1;const T=(u.x+m.x)/2,I=(u.y+m.y)/2;do v.y>I!=v.next.y>I&&v.next.y!==v.y&&T<(v.next.x-v.x)*(I-v.y)/(v.next.y-v.y)+v.x&&(P=!P),v=v.next;while(v!==u);return P})(o,a)&&(Tn(o.prev,o,a.prev)||Tn(o,a.prev,a))||Vc(o,a)&&Tn(o.prev,o,o.next)>0&&Tn(a.prev,a,a.next)>0)}function Tn(o,a,u){return(a.y-o.y)*(u.x-a.x)-(a.x-o.x)*(u.y-a.y)}function Vc(o,a){return o.x===a.x&&o.y===a.y}function Hh(o,a,u,m){const v=Zh(Tn(o,a,u)),P=Zh(Tn(o,a,m)),T=Zh(Tn(u,m,o)),I=Zh(Tn(u,m,a));return v!==P&&T!==I||!(v!==0||!bd(o,u,a))||!(P!==0||!bd(o,m,a))||!(T!==0||!bd(u,o,m))||!(I!==0||!bd(u,a,m))}function bd(o,a,u){return a.x<=Math.max(o.x,u.x)&&a.x>=Math.min(o.x,u.x)&&a.y<=Math.max(o.y,u.y)&&a.y>=Math.min(o.y,u.y)}function Zh(o){return o>0?1:o<0?-1:0}function Fu(o,a){return Tn(o.prev,o,o.next)<0?Tn(o,a,o.next)>=0&&Tn(o,o.prev,a)>=0:Tn(o,a,o.prev)<0||Tn(o,o.next,a)<0}function dm(o,a){const u=pm(o.i,o.x,o.y),m=pm(a.i,a.x,a.y),v=o.next,P=a.prev;return o.next=a,a.prev=o,u.next=v,v.prev=u,m.next=u,u.prev=m,P.next=m,m.prev=P,m}function Kh(o,a,u,m){const v=pm(o,a,u);return m?(v.next=m.next,v.prev=m,m.next.prev=v,m.next=v):(v.prev=v,v.next=v),v}function ao(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function pm(o,a,u){return{i:o,x:a,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function wd(o,a,u){const m=u.patternDependencies;let v=!1;for(const P of a){const T=P.paint.get(`${o}-pattern`);T.isConstant()||(v=!0);const I=T.constantOr(null);I&&(v=!0,m[I.to]=!0,m[I.from]=!0)}return v}function Xh(o,a,u,m,v){const P=v.patternDependencies;for(const T of a){const I=T.paint.get(`${o}-pattern`).value;if(I.kind!=="constant"){let O=I.evaluate({zoom:m-1},u,{},v.availableImages),j=I.evaluate({zoom:m},u,{},v.availableImages),V=I.evaluate({zoom:m+1},u,{},v.availableImages);O=O&&O.name?O.name:O,j=j&&j.name?j.name:j,V=V&&V.name?V.name:V,P[O]=!0,P[j]=!0,P[V]=!0,u.patterns[T.id]={min:O,mid:j,max:V}}}return u}class Sd{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((u=>u.id)),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ja,this.indexArray=new Aa,this.indexArray2=new In,this.programConfigurations=new Uo(a.layers,a.zoom),this.segments=new xr,this.segments2=new xr,this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id))}populate(a,u,m){this.hasPattern=wd("fill",this.layers,u);const v=this.layers[0].layout.get("fill-sort-key"),P=!v.isConstant(),T=[];for(const{feature:I,id:O,index:j,sourceLayerIndex:V}of a){const q=this.layers[0]._featureFilter.needGeometry,Y=Hl(I,q);if(!this.layers[0]._featureFilter.filter(new Sr(this.zoom),Y,m))continue;const re=P?v.evaluate(Y,{},m,u.availableImages):void 0,oe={id:O,properties:I.properties,type:I.type,sourceLayerIndex:V,index:j,geometry:q?Y.geometry:Gl(I),patterns:{},sortKey:re};T.push(oe)}P&&T.sort(((I,O)=>I.sortKey-O.sortKey));for(const I of T){const{geometry:O,index:j,sourceLayerIndex:V}=I;if(this.hasPattern){const q=Xh("fill",this.layers,I,this.zoom,u);this.patternFeatures.push(q)}else this.addFeature(I,O,j,m,{});u.featureIndex.insert(a[j].feature,O,j,V,this.index)}}update(a,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,m)}addFeatures(a,u,m){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,fy),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,u,m,v,P){for(const T of Al(u,500)){let I=0;for(const re of T)I+=re.length;const O=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),j=O.vertexLength,V=[],q=[];for(const re of T){if(re.length===0)continue;re!==T[0]&&q.push(V.length/2);const oe=this.segments2.prepareSegment(re.length,this.layoutVertexArray,this.indexArray2),ce=oe.vertexLength;this.layoutVertexArray.emplaceBack(re[0].x,re[0].y),this.indexArray2.emplaceBack(ce+re.length-1,ce),V.push(re[0].x),V.push(re[0].y);for(let ye=1;ye<re.length;ye++)this.layoutVertexArray.emplaceBack(re[ye].x,re[ye].y),this.indexArray2.emplaceBack(ce+ye-1,ce+ye),V.push(re[ye].x),V.push(re[ye].y);oe.vertexLength+=re.length,oe.primitiveLength+=re.length}const Y=dy(V,q);for(let re=0;re<Y.length;re+=3)this.indexArray.emplaceBack(j+Y[re],j+Y[re+1],j+Y[re+2]);O.vertexLength+=I,O.primitiveLength+=Y.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,P,v)}}let mm,Uc;It("FillBucket",Sd,{omit:["layers","patternFeatures"]});var Wi={get paint(){return Uc=Uc||new w({"fill-antialias":new kt(qe.paint_fill["fill-antialias"]),"fill-opacity":new Zt(qe.paint_fill["fill-opacity"]),"fill-color":new Zt(qe.paint_fill["fill-color"]),"fill-outline-color":new Zt(qe.paint_fill["fill-outline-color"]),"fill-translate":new kt(qe.paint_fill["fill-translate"]),"fill-translate-anchor":new kt(qe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Vl(qe.paint_fill["fill-pattern"])})},get layout(){return mm=mm||new w({"fill-sort-key":new Zt(qe.layout_fill["fill-sort-key"])})}};class b0 extends f{constructor(a){super(a,Wi)}recalculate(a,u){super.recalculate(a,u);const m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new Sd(a)}queryRadius(){return qh(this.paint.get("fill-translate"))}queryIntersectsFeature(a,u,m,v,P,T,I){return nm(Wh(a,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),T.angle,I),v)}isTileClipped(){return!0}}const w0=k([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Pd=k([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Gi}=w0;var Kl={},$t=S,$u=Xl;function Xl(o,a,u,m,v){this.properties={},this.extent=u,this.type=0,this._pbf=o,this._geometry=-1,this._keys=m,this._values=v,o.readFields(xy,this,a)}function xy(o,a,u){o==1?a.id=u.readVarint():o==2?(function(m,v){for(var P=m.readVarint()+m.pos;m.pos<P;){var T=v._keys[m.readVarint()],I=v._values[m.readVarint()];v.properties[T]=I}})(u,a):o==3?a.type=u.readVarint():o==4&&(a._geometry=u.pos)}function S0(o){for(var a,u,m=0,v=0,P=o.length,T=P-1;v<P;T=v++)m+=((u=o[T]).x-(a=o[v]).x)*(a.y+u.y);return m}Xl.types=["Unknown","Point","LineString","Polygon"],Xl.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var a,u=o.readVarint()+o.pos,m=1,v=0,P=0,T=0,I=[];o.pos<u;){if(v<=0){var O=o.readVarint();m=7&O,v=O>>3}if(v--,m===1||m===2)P+=o.readSVarint(),T+=o.readSVarint(),m===1&&(a&&I.push(a),a=[]),a.push(new $t(P,T));else{if(m!==7)throw new Error("unknown command "+m);a&&a.push(a[0].clone())}}return a&&I.push(a),I},Xl.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var a=o.readVarint()+o.pos,u=1,m=0,v=0,P=0,T=1/0,I=-1/0,O=1/0,j=-1/0;o.pos<a;){if(m<=0){var V=o.readVarint();u=7&V,m=V>>3}if(m--,u===1||u===2)(v+=o.readSVarint())<T&&(T=v),v>I&&(I=v),(P+=o.readSVarint())<O&&(O=P),P>j&&(j=P);else if(u!==7)throw new Error("unknown command "+u)}return[T,O,I,j]},Xl.prototype.toGeoJSON=function(o,a,u){var m,v,P=this.extent*Math.pow(2,u),T=this.extent*o,I=this.extent*a,O=this.loadGeometry(),j=Xl.types[this.type];function V(re){for(var oe=0;oe<re.length;oe++){var ce=re[oe];re[oe]=[360*(ce.x+T)/P-180,360/Math.PI*Math.atan(Math.exp((180-360*(ce.y+I)/P)*Math.PI/180))-90]}}switch(this.type){case 1:var q=[];for(m=0;m<O.length;m++)q[m]=O[m][0];V(O=q);break;case 2:for(m=0;m<O.length;m++)V(O[m]);break;case 3:for(O=(function(re){var oe=re.length;if(oe<=1)return[re];for(var ce,ye,we=[],Ve=0;Ve<oe;Ve++){var Me=S0(re[Ve]);Me!==0&&(ye===void 0&&(ye=Me<0),ye===Me<0?(ce&&we.push(ce),ce=[re[Ve]]):ce.push(re[Ve]))}return ce&&we.push(ce),we})(O),m=0;m<O.length;m++)for(v=0;v<O[m].length;v++)V(O[m][v])}O.length===1?O=O[0]:j="Multi"+j;var Y={type:"Feature",geometry:{type:j,coordinates:O},properties:this.properties};return"id"in this&&(Y.id=this.id),Y};var Yh=$u,Jh=Td;function Td(o,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(by,this,a),this.length=this._features.length}function by(o,a,u){o===15?a.version=u.readVarint():o===1?a.name=u.readString():o===5?a.extent=u.readVarint():o===2?a._features.push(u.pos):o===3?a._keys.push(u.readString()):o===4&&a._values.push((function(m){for(var v=null,P=m.readVarint()+m.pos;m.pos<P;){var T=m.readVarint()>>3;v=T===1?m.readString():T===2?m.readFloat():T===3?m.readDouble():T===4?m.readVarint64():T===5?m.readVarint():T===6?m.readSVarint():T===7?m.readBoolean():null}return v})(u))}Td.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var a=this._pbf.readVarint()+this._pbf.pos;return new Yh(this._pbf,a,this.extent,this._keys,this._values)};var wy=Jh;function Sy(o,a,u){if(o===3){var m=new wy(u,u.readVarint()+u.pos);m.length&&(a[m.name]=m)}}Kl.VectorTile=function(o,a){this.layers=o.readFields(Sy,{},a)},Kl.VectorTileFeature=$u,Kl.VectorTileLayer=Jh;const gm=Kl.VectorTileFeature.types,Qh=Math.pow(2,13);function Un(o,a,u,m,v,P,T,I){o.emplaceBack(a,u,2*Math.floor(m*Qh)+T,v*Qh*2,P*Qh*2,Math.round(I))}class oo{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((u=>u.id)),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Ui,this.centroidVertexArray=new Pn,this.indexArray=new Aa,this.programConfigurations=new Uo(a.layers,a.zoom),this.segments=new xr,this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id))}populate(a,u,m){this.features=[],this.hasPattern=wd("fill-extrusion",this.layers,u);for(const{feature:v,id:P,index:T,sourceLayerIndex:I}of a){const O=this.layers[0]._featureFilter.needGeometry,j=Hl(v,O);if(!this.layers[0]._featureFilter.filter(new Sr(this.zoom),j,m))continue;const V={id:P,sourceLayerIndex:I,index:T,geometry:O?j.geometry:Gl(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(Xh("fill-extrusion",this.layers,V,this.zoom,u)):this.addFeature(V,V.geometry,T,m,{}),u.featureIndex.insert(v,V.geometry,T,I,this.index,!0)}}addFeatures(a,u,m){for(const v of this.features){const{geometry:P}=v;this.addFeature(v,P,v.index,u,m)}}update(a,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Gi),this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,Pd.members,!0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(a,u,m,v,P){for(const T of Al(u,500)){const I={x:0,y:0,vertexCount:0};let O=0;for(const oe of T)O+=oe.length;let j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const oe of T){if(oe.length===0||Py(oe))continue;let ce=0;for(let ye=0;ye<oe.length;ye++){const we=oe[ye];if(ye>=1){const Ve=oe[ye-1];if(!Yl(we,Ve)){j.vertexLength+4>xr.MAX_VERTEX_ARRAY_LENGTH&&(j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Me=we.sub(Ve)._perp()._unit(),je=Ve.dist(we);ce+je>32768&&(ce=0),Un(this.layoutVertexArray,we.x,we.y,Me.x,Me.y,0,0,ce),Un(this.layoutVertexArray,we.x,we.y,Me.x,Me.y,0,1,ce),I.x+=2*we.x,I.y+=2*we.y,I.vertexCount+=2,ce+=je,Un(this.layoutVertexArray,Ve.x,Ve.y,Me.x,Me.y,0,0,ce),Un(this.layoutVertexArray,Ve.x,Ve.y,Me.x,Me.y,0,1,ce),I.x+=2*Ve.x,I.y+=2*Ve.y,I.vertexCount+=2;const et=j.vertexLength;this.indexArray.emplaceBack(et,et+2,et+1),this.indexArray.emplaceBack(et+1,et+2,et+3),j.vertexLength+=4,j.primitiveLength+=2}}}}if(j.vertexLength+O>xr.MAX_VERTEX_ARRAY_LENGTH&&(j=this.segments.prepareSegment(O,this.layoutVertexArray,this.indexArray)),gm[a.type]!=="Polygon")continue;const V=[],q=[],Y=j.vertexLength;for(const oe of T)if(oe.length!==0){oe!==T[0]&&q.push(V.length/2);for(let ce=0;ce<oe.length;ce++){const ye=oe[ce];Un(this.layoutVertexArray,ye.x,ye.y,0,0,1,1,0),I.x+=ye.x,I.y+=ye.y,I.vertexCount+=1,V.push(ye.x),V.push(ye.y)}}const re=dy(V,q);for(let oe=0;oe<re.length;oe+=3)this.indexArray.emplaceBack(Y+re[oe],Y+re[oe+2],Y+re[oe+1]);j.primitiveLength+=re.length/3,j.vertexLength+=O;for(let oe=0;oe<I.vertexCount;oe++){const ce=Math.floor(I.x/I.vertexCount),ye=Math.floor(I.y/I.vertexCount);this.centroidVertexArray.emplaceBack(ce,ye)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,P,v)}}function Yl(o,a){return o.x===a.x&&(o.x<0||o.x>kn)||o.y===a.y&&(o.y<0||o.y>kn)}function Py(o){return o.every((a=>a.x<0))||o.every((a=>a.x>kn))||o.every((a=>a.y<0))||o.every((a=>a.y>kn))}let ym;It("FillExtrusionBucket",oo,{omit:["layers","features"]});var qo={get paint(){return ym=ym||new w({"fill-extrusion-opacity":new kt(qe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Zt(qe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new kt(qe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new kt(qe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Vl(qe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Zt(qe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Zt(qe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new kt(qe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Ty extends f{constructor(a){super(a,qo)}createBucket(a){return new oo(a)}queryRadius(){return qh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(a,u,m,v,P,T,I,O){const j=Wh(a,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),T.angle,I),V=this.paint.get("fill-extrusion-height").evaluate(u,m),q=this.paint.get("fill-extrusion-base").evaluate(u,m),Y=(function(oe,ce,ye,we){const Ve=[];for(const Me of oe){const je=[Me.x,Me.y,0,1];pd(je,je,ce),Ve.push(new A(je[0]/je[3],je[1]/je[3]))}return Ve})(j,O),re=(function(oe,ce,ye,we){const Ve=[],Me=[],je=we[8]*ce,et=we[9]*ce,ut=we[10]*ce,Mt=we[11]*ce,Yt=we[8]*ye,Ct=we[9]*ye,Tt=we[10]*ye,Ft=we[11]*ye;for(const zt of oe){const Dt=[],it=[];for(const Vt of zt){const Nt=Vt.x,or=Vt.y,sn=we[0]*Nt+we[4]*or+we[12],tn=we[1]*Nt+we[5]*or+we[13],mi=we[2]*Nt+we[6]*or+we[14],Ts=we[3]*Nt+we[7]*or+we[15],Ki=mi+ut,gi=Ts+Mt,Oa=sn+Yt,Da=tn+Ct,Ra=mi+Tt,jn=Ts+Ft,yi=new A((sn+je)/gi,(tn+et)/gi);yi.z=Ki/gi,Dt.push(yi);const da=new A(Oa/jn,Da/jn);da.z=Ra/jn,it.push(da)}Ve.push(Dt),Me.push(it)}return[Ve,Me]})(v,q,V,O);return(function(oe,ce,ye){let we=1/0;nm(ye,ce)&&(we=Ay(ye,ce[0]));for(let Ve=0;Ve<ce.length;Ve++){const Me=ce[Ve],je=oe[Ve];for(let et=0;et<Me.length-1;et++){const ut=Me[et],Mt=[ut,Me[et+1],je[et+1],je[et],ut];rm(ye,Mt)&&(we=Math.min(we,Ay(ye,Mt)))}}return we!==1/0&&we})(re[0],re[1],Y)}}function Ea(o,a){return o.x*a.x+o.y*a.y}function Ay(o,a){if(o.length===1){let u=0;const m=a[u++];let v;for(;!v||m.equals(v);)if(v=a[u++],!v)return 1/0;for(;u<a.length;u++){const P=a[u],T=o[0],I=v.sub(m),O=P.sub(m),j=T.sub(m),V=Ea(I,I),q=Ea(I,O),Y=Ea(O,O),re=Ea(j,I),oe=Ea(j,O),ce=V*Y-q*q,ye=(Y*re-q*oe)/ce,we=(V*oe-q*re)/ce,Ve=m.z*(1-ye-we)+v.z*ye+P.z*we;if(isFinite(Ve))return Ve}return 1/0}{let u=1/0;for(const m of a)u=Math.min(u,m.z);return u}}const Ey=k([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Cy}=Ey,My=k([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Iy}=My,P0=Kl.VectorTileFeature.types,Ad=Math.cos(Math.PI/180*37.5),Ed=Math.pow(2,14)/.5;class Ca{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((u=>u.id)),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((u=>{this.gradients[u.id]={}})),this.layoutVertexArray=new Qa,this.layoutVertexArray2=new xs,this.indexArray=new Aa,this.programConfigurations=new Uo(a.layers,a.zoom),this.segments=new xr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id))}populate(a,u,m){this.hasPattern=wd("line",this.layers,u);const v=this.layers[0].layout.get("line-sort-key"),P=!v.isConstant(),T=[];for(const{feature:I,id:O,index:j,sourceLayerIndex:V}of a){const q=this.layers[0]._featureFilter.needGeometry,Y=Hl(I,q);if(!this.layers[0]._featureFilter.filter(new Sr(this.zoom),Y,m))continue;const re=P?v.evaluate(Y,{},m):void 0,oe={id:O,properties:I.properties,type:I.type,sourceLayerIndex:V,index:j,geometry:q?Y.geometry:Gl(I),patterns:{},sortKey:re};T.push(oe)}P&&T.sort(((I,O)=>I.sortKey-O.sortKey));for(const I of T){const{geometry:O,index:j,sourceLayerIndex:V}=I;if(this.hasPattern){const q=Xh("line",this.layers,I,this.zoom,u);this.patternFeatures.push(q)}else this.addFeature(I,O,j,m,{});u.featureIndex.insert(a[j].feature,O,j,V,this.index)}}update(a,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,m)}addFeatures(a,u,m){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,Iy)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Cy),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,u,m,v,P){const T=this.layers[0].layout,I=T.get("line-join").evaluate(a,{}),O=T.get("line-cap"),j=T.get("line-miter-limit"),V=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const q of u)this.addLine(q,a,I,O,j,V);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,P,v)}addLine(a,u,m,v,P,T){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let we=0;we<a.length-1;we++)this.totalDistance+=a[we].dist(a[we+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const I=P0[u.type]==="Polygon";let O=a.length;for(;O>=2&&a[O-1].equals(a[O-2]);)O--;let j=0;for(;j<O-1&&a[j].equals(a[j+1]);)j++;if(O<(I?3:2))return;m==="bevel"&&(P=1.05);const V=this.overscaling<=16?15*kn/(512*this.overscaling):0,q=this.segments.prepareSegment(10*O,this.layoutVertexArray,this.indexArray);let Y,re,oe,ce,ye;this.e1=this.e2=-1,I&&(Y=a[O-2],ye=a[j].sub(Y)._unit()._perp());for(let we=j;we<O;we++){if(oe=we===O-1?I?a[j+1]:void 0:a[we+1],oe&&a[we].equals(oe))continue;ye&&(ce=ye),Y&&(re=Y),Y=a[we],ye=oe?oe.sub(Y)._unit()._perp():ce,ce=ce||ye;let Ve=ce.add(ye);Ve.x===0&&Ve.y===0||Ve._unit();const Me=ce.x*ye.x+ce.y*ye.y,je=Ve.x*ye.x+Ve.y*ye.y,et=je!==0?1/je:1/0,ut=2*Math.sqrt(2-2*je),Mt=je<Ad&&re&&oe,Yt=ce.x*ye.y-ce.y*ye.x>0;if(Mt&&we>j){const Ft=Y.dist(re);if(Ft>2*V){const zt=Y.sub(Y.sub(re)._mult(V/Ft)._round());this.updateDistance(re,zt),this.addCurrentVertex(zt,ce,0,0,q),re=zt}}const Ct=re&&oe;let Tt=Ct?m:I?"butt":v;if(Ct&&Tt==="round"&&(et<T?Tt="miter":et<=2&&(Tt="fakeround")),Tt==="miter"&&et>P&&(Tt="bevel"),Tt==="bevel"&&(et>2&&(Tt="flipbevel"),et<P&&(Tt="miter")),re&&this.updateDistance(re,Y),Tt==="miter")Ve._mult(et),this.addCurrentVertex(Y,Ve,0,0,q);else if(Tt==="flipbevel"){if(et>100)Ve=ye.mult(-1);else{const Ft=et*ce.add(ye).mag()/ce.sub(ye).mag();Ve._perp()._mult(Ft*(Yt?-1:1))}this.addCurrentVertex(Y,Ve,0,0,q),this.addCurrentVertex(Y,Ve.mult(-1),0,0,q)}else if(Tt==="bevel"||Tt==="fakeround"){const Ft=-Math.sqrt(et*et-1),zt=Yt?Ft:0,Dt=Yt?0:Ft;if(re&&this.addCurrentVertex(Y,ce,zt,Dt,q),Tt==="fakeround"){const it=Math.round(180*ut/Math.PI/20);for(let Vt=1;Vt<it;Vt++){let Nt=Vt/it;if(Nt!==.5){const sn=Nt-.5;Nt+=Nt*sn*(Nt-1)*((1.0904+Me*(Me*(3.55645-1.43519*Me)-3.2452))*sn*sn+(.848013+Me*(.215638*Me-1.06021)))}const or=ye.sub(ce)._mult(Nt)._add(ce)._unit()._mult(Yt?-1:1);this.addHalfVertex(Y,or.x,or.y,!1,Yt,0,q)}}oe&&this.addCurrentVertex(Y,ye,-zt,-Dt,q)}else if(Tt==="butt")this.addCurrentVertex(Y,Ve,0,0,q);else if(Tt==="square"){const Ft=re?1:-1;this.addCurrentVertex(Y,Ve,Ft,Ft,q)}else Tt==="round"&&(re&&(this.addCurrentVertex(Y,ce,0,0,q),this.addCurrentVertex(Y,ce,1,1,q,!0)),oe&&(this.addCurrentVertex(Y,ye,-1,-1,q,!0),this.addCurrentVertex(Y,ye,0,0,q)));if(Mt&&we<O-1){const Ft=Y.dist(oe);if(Ft>2*V){const zt=Y.add(oe.sub(Y)._mult(V/Ft)._round());this.updateDistance(Y,zt),this.addCurrentVertex(zt,ye,0,0,q),Y=zt}}}}addCurrentVertex(a,u,m,v,P,T=!1){const I=u.y*v-u.x,O=-u.y-u.x*v;this.addHalfVertex(a,u.x+u.y*m,u.y-u.x*m,T,!1,m,P),this.addHalfVertex(a,I,O,T,!0,-v,P),this.distance>Ed/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(a,u,m,v,P,T))}addHalfVertex({x:a,y:u},m,v,P,T,I,O){const j=.5*(this.lineClips?this.scaledDistance*(Ed-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a<<1)+(P?1:0),(u<<1)+(T?1:0),Math.round(63*m)+128,Math.round(63*v)+128,1+(I===0?0:I<0?-1:1)|(63&j)<<2,j>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const V=O.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,V),O.primitiveLength++),T?this.e2=V:this.e1=V}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(a,u){this.distance+=a.dist(u),this.updateScaledDistance()}}let zr,oi;It("LineBucket",Ca,{omit:["layers","patternFeatures"]});var qn={get paint(){return oi=oi||new w({"line-opacity":new Zt(qe.paint_line["line-opacity"]),"line-color":new Zt(qe.paint_line["line-color"]),"line-translate":new kt(qe.paint_line["line-translate"]),"line-translate-anchor":new kt(qe.paint_line["line-translate-anchor"]),"line-width":new Zt(qe.paint_line["line-width"]),"line-gap-width":new Zt(qe.paint_line["line-gap-width"]),"line-offset":new Zt(qe.paint_line["line-offset"]),"line-blur":new Zt(qe.paint_line["line-blur"]),"line-dasharray":new ju(qe.paint_line["line-dasharray"]),"line-pattern":new Vl(qe.paint_line["line-pattern"]),"line-gradient":new jh(qe.paint_line["line-gradient"])})},get layout(){return zr=zr||new w({"line-cap":new kt(qe.layout_line["line-cap"]),"line-join":new Zt(qe.layout_line["line-join"]),"line-miter-limit":new kt(qe.layout_line["line-miter-limit"]),"line-round-limit":new kt(qe.layout_line["line-round-limit"]),"line-sort-key":new Zt(qe.layout_line["line-sort-key"])})}};class Ci extends Zt{possiblyEvaluate(a,u){return u=new Sr(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(a,u)}evaluate(a,u,m,v){return u=se({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(a,u,m,v)}}let Hi;class qc extends f{constructor(a){super(a,qn),this.gradientVersion=0,Hi||(Hi=new Ci(qn.paint.properties["line-width"].specification),Hi.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const u=this.gradientExpression();this.stepInterpolant=!!(function(m){return m._styleExpression!==void 0})(u)&&u._styleExpression.expression instanceof qs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(a,u){super.recalculate(a,u),this.paint._values["line-floorwidth"]=Hi.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new Ca(a)}queryRadius(a){const u=a,m=Jn(Bu("line-width",this,u),Bu("line-gap-width",this,u)),v=Bu("line-offset",this,u);return m/2+Math.abs(v)+qh(this.paint.get("line-translate"))}queryIntersectsFeature(a,u,m,v,P,T,I){const O=Wh(a,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),T.angle,I),j=I/2*Jn(this.paint.get("line-width").evaluate(u,m),this.paint.get("line-gap-width").evaluate(u,m)),V=this.paint.get("line-offset").evaluate(u,m);return V&&(v=(function(q,Y){const re=[];for(let oe=0;oe<q.length;oe++){const ce=q[oe],ye=[];for(let we=0;we<ce.length;we++){const Ve=ce[we-1],Me=ce[we],je=ce[we+1],et=we===0?new A(0,0):Me.sub(Ve)._unit()._perp(),ut=we===ce.length-1?new A(0,0):je.sub(Me)._unit()._perp(),Mt=et._add(ut)._unit(),Yt=Mt.x*ut.x+Mt.y*ut.y;Yt!==0&&Mt._mult(1/Yt),ye.push(Mt._mult(Y)._add(Me))}re.push(ye)}return re})(v,V*I)),(function(q,Y,re){for(let oe=0;oe<Y.length;oe++){const ce=Y[oe];if(q.length>=3){for(let ye=0;ye<ce.length;ye++)if(Lu(q,ce[ye]))return!0}if(hd(q,ce,re))return!0}return!1})(O,v,j)}isTileClipped(){return!0}}function Jn(o,a){return a>0?a+2*o:o}const ef=k([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Vu=k([{name:"a_projected_pos",components:3,type:"Float32"}],4);k([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Cd=k([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);k([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Md=k([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),tf=k([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ma(o,a,u){return o.sections.forEach((m=>{m.text=(function(v,P,T){const I=P.layout.get("text-transform").evaluate(T,{});return I==="uppercase"?v=v.toLocaleUpperCase():I==="lowercase"&&(v=v.toLocaleLowerCase()),Gr.applyArabicShaping&&(v=Gr.applyArabicShaping(v)),v})(m.text,a,u)})),o}k([{name:"triangle",components:3,type:"Uint16"}]),k([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),k([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),k([{type:"Float32",name:"offsetX"}]),k([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),k([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Uu={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var gn=24,Ss=Tr,rf=function(o,a,u,m,v){var P,T,I=8*v-m-1,O=(1<<I)-1,j=O>>1,V=-7,q=v-1,Y=-1,re=o[a+q];for(q+=Y,P=re&(1<<-V)-1,re>>=-V,V+=I;V>0;P=256*P+o[a+q],q+=Y,V-=8);for(T=P&(1<<-V)-1,P>>=-V,V+=m;V>0;T=256*T+o[a+q],q+=Y,V-=8);if(P===0)P=1-j;else{if(P===O)return T?NaN:1/0*(re?-1:1);T+=Math.pow(2,m),P-=j}return(re?-1:1)*T*Math.pow(2,P-m)},Id=function(o,a,u,m,v,P){var T,I,O,j=8*P-v-1,V=(1<<j)-1,q=V>>1,Y=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,re=0,oe=1,ce=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(I=isNaN(a)?1:0,T=V):(T=Math.floor(Math.log(a)/Math.LN2),a*(O=Math.pow(2,-T))<1&&(T--,O*=2),(a+=T+q>=1?Y/O:Y*Math.pow(2,1-q))*O>=2&&(T++,O/=2),T+q>=V?(I=0,T=V):T+q>=1?(I=(a*O-1)*Math.pow(2,v),T+=q):(I=a*Math.pow(2,q-1)*Math.pow(2,v),T=0));v>=8;o[u+re]=255&I,re+=oe,I/=256,v-=8);for(T=T<<v|I,j+=v;j>0;o[u+re]=255&T,re+=oe,T/=256,j-=8);o[u+re-oe]|=128*ce};function Tr(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Tr.Varint=0,Tr.Fixed64=1,Tr.Bytes=2,Tr.Fixed32=5;var Wc=4294967296,il=1/Wc,nf=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function so(o){return o.type===Tr.Bytes?o.readVarint()+o.pos:o.pos+1}function Jl(o,a,u){return u?4294967296*a+(o>>>0):4294967296*(a>>>0)+(o>>>0)}function af(o,a,u){var m=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));u.realloc(m);for(var v=u.pos-1;v>=o;v--)u.buf[v+m]=u.buf[v]}function kd(o,a){for(var u=0;u<o.length;u++)a.writeVarint(o[u])}function ha(o,a){for(var u=0;u<o.length;u++)a.writeSVarint(o[u])}function Ql(o,a){for(var u=0;u<o.length;u++)a.writeFloat(o[u])}function Wo(o,a){for(var u=0;u<o.length;u++)a.writeDouble(o[u])}function Ia(o,a){for(var u=0;u<o.length;u++)a.writeBoolean(o[u])}function ky(o,a){for(var u=0;u<o.length;u++)a.writeFixed32(o[u])}function vm(o,a){for(var u=0;u<o.length;u++)a.writeSFixed32(o[u])}function _m(o,a){for(var u=0;u<o.length;u++)a.writeFixed64(o[u])}function T0(o,a){for(var u=0;u<o.length;u++)a.writeSFixed64(o[u])}function Go(o,a){return(o[a]|o[a+1]<<8|o[a+2]<<16)+16777216*o[a+3]}function qu(o,a,u){o[u]=a,o[u+1]=a>>>8,o[u+2]=a>>>16,o[u+3]=a>>>24}function Od(o,a){return(o[a]|o[a+1]<<8|o[a+2]<<16)+(o[a+3]<<24)}Tr.prototype={destroy:function(){this.buf=null},readFields:function(o,a,u){for(u=u||this.length;this.pos<u;){var m=this.readVarint(),v=m>>3,P=this.pos;this.type=7&m,o(v,a,this),this.pos===P&&this.skip(m)}return a},readMessage:function(o,a){return this.readFields(o,a,this.readVarint()+this.pos)},readFixed32:function(){var o=Go(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Od(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Go(this.buf,this.pos)+Go(this.buf,this.pos+4)*Wc;return this.pos+=8,o},readSFixed64:function(){var o=Go(this.buf,this.pos)+Od(this.buf,this.pos+4)*Wc;return this.pos+=8,o},readFloat:function(){var o=rf(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=rf(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var a,u,m=this.buf;return a=127&(u=m[this.pos++]),u<128?a:(a|=(127&(u=m[this.pos++]))<<7,u<128?a:(a|=(127&(u=m[this.pos++]))<<14,u<128?a:(a|=(127&(u=m[this.pos++]))<<21,u<128?a:(function(v,P,T){var I,O,j=T.buf;if(I=(112&(O=j[T.pos++]))>>4,O<128||(I|=(127&(O=j[T.pos++]))<<3,O<128)||(I|=(127&(O=j[T.pos++]))<<10,O<128)||(I|=(127&(O=j[T.pos++]))<<17,O<128)||(I|=(127&(O=j[T.pos++]))<<24,O<128)||(I|=(1&(O=j[T.pos++]))<<31,O<128))return Jl(v,I,P);throw new Error("Expected varint not more than 10 bytes")})(a|=(15&(u=m[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,a=this.pos;return this.pos=o,o-a>=12&&nf?(function(u,m,v){return nf.decode(u.subarray(m,v))})(this.buf,a,o):(function(u,m,v){for(var P="",T=m;T<v;){var I,O,j,V=u[T],q=null,Y=V>239?4:V>223?3:V>191?2:1;if(T+Y>v)break;Y===1?V<128&&(q=V):Y===2?(192&(I=u[T+1]))==128&&(q=(31&V)<<6|63&I)<=127&&(q=null):Y===3?(O=u[T+2],(192&(I=u[T+1]))==128&&(192&O)==128&&((q=(15&V)<<12|(63&I)<<6|63&O)<=2047||q>=55296&&q<=57343)&&(q=null)):Y===4&&(O=u[T+2],j=u[T+3],(192&(I=u[T+1]))==128&&(192&O)==128&&(192&j)==128&&((q=(15&V)<<18|(63&I)<<12|(63&O)<<6|63&j)<=65535||q>=1114112)&&(q=null)),q===null?(q=65533,Y=1):q>65535&&(q-=65536,P+=String.fromCharCode(q>>>10&1023|55296),q=56320|1023&q),P+=String.fromCharCode(q),T+=Y}return P})(this.buf,a,o)},readBytes:function(){var o=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,o);return this.pos=o,a},readPackedVarint:function(o,a){if(this.type!==Tr.Bytes)return o.push(this.readVarint(a));var u=so(this);for(o=o||[];this.pos<u;)o.push(this.readVarint(a));return o},readPackedSVarint:function(o){if(this.type!==Tr.Bytes)return o.push(this.readSVarint());var a=so(this);for(o=o||[];this.pos<a;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Tr.Bytes)return o.push(this.readBoolean());var a=so(this);for(o=o||[];this.pos<a;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Tr.Bytes)return o.push(this.readFloat());var a=so(this);for(o=o||[];this.pos<a;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Tr.Bytes)return o.push(this.readDouble());var a=so(this);for(o=o||[];this.pos<a;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Tr.Bytes)return o.push(this.readFixed32());var a=so(this);for(o=o||[];this.pos<a;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Tr.Bytes)return o.push(this.readSFixed32());var a=so(this);for(o=o||[];this.pos<a;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Tr.Bytes)return o.push(this.readFixed64());var a=so(this);for(o=o||[];this.pos<a;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Tr.Bytes)return o.push(this.readSFixed64());var a=so(this);for(o=o||[];this.pos<a;)o.push(this.readSFixed64());return o},skip:function(o){var a=7&o;if(a===Tr.Varint)for(;this.buf[this.pos++]>127;);else if(a===Tr.Bytes)this.pos=this.readVarint()+this.pos;else if(a===Tr.Fixed32)this.pos+=4;else{if(a!==Tr.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(o,a){this.writeVarint(o<<3|a)},realloc:function(o){for(var a=this.length||16;a<this.pos+o;)a*=2;if(a!==this.length){var u=new Uint8Array(a);u.set(this.buf),this.buf=u,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),qu(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),qu(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),qu(this.buf,-1&o,this.pos),qu(this.buf,Math.floor(o*il),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),qu(this.buf,-1&o,this.pos),qu(this.buf,Math.floor(o*il),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?(function(a,u){var m,v;if(a>=0?(m=a%4294967296|0,v=a/4294967296|0):(v=~(-a/4294967296),4294967295^(m=~(-a%4294967296))?m=m+1|0:(m=0,v=v+1|0)),a>=18446744073709552e3||a<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),(function(P,T,I){I.buf[I.pos++]=127&P|128,P>>>=7,I.buf[I.pos++]=127&P|128,P>>>=7,I.buf[I.pos++]=127&P|128,P>>>=7,I.buf[I.pos++]=127&P|128,I.buf[I.pos]=127&(P>>>=7)})(m,0,u),(function(P,T){var I=(7&P)<<4;T.buf[T.pos++]|=I|((P>>>=3)?128:0),P&&(T.buf[T.pos++]=127&P|((P>>>=7)?128:0),P&&(T.buf[T.pos++]=127&P|((P>>>=7)?128:0),P&&(T.buf[T.pos++]=127&P|((P>>>=7)?128:0),P&&(T.buf[T.pos++]=127&P|((P>>>=7)?128:0),P&&(T.buf[T.pos++]=127&P)))))})(v,u)})(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var a=this.pos;this.pos=(function(m,v,P){for(var T,I,O=0;O<v.length;O++){if((T=v.charCodeAt(O))>55295&&T<57344){if(!I){T>56319||O+1===v.length?(m[P++]=239,m[P++]=191,m[P++]=189):I=T;continue}if(T<56320){m[P++]=239,m[P++]=191,m[P++]=189,I=T;continue}T=I-55296<<10|T-56320|65536,I=null}else I&&(m[P++]=239,m[P++]=191,m[P++]=189,I=null);T<128?m[P++]=T:(T<2048?m[P++]=T>>6|192:(T<65536?m[P++]=T>>12|224:(m[P++]=T>>18|240,m[P++]=T>>12&63|128),m[P++]=T>>6&63|128),m[P++]=63&T|128)}return P})(this.buf,o,this.pos);var u=this.pos-a;u>=128&&af(a,u,this),this.pos=a-1,this.writeVarint(u),this.pos+=u},writeFloat:function(o){this.realloc(4),Id(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Id(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var a=o.length;this.writeVarint(a),this.realloc(a);for(var u=0;u<a;u++)this.buf[this.pos++]=o[u]},writeRawMessage:function(o,a){this.pos++;var u=this.pos;o(a,this);var m=this.pos-u;m>=128&&af(u,m,this),this.pos=u-1,this.writeVarint(m),this.pos+=m},writeMessage:function(o,a,u){this.writeTag(o,Tr.Bytes),this.writeRawMessage(a,u)},writePackedVarint:function(o,a){a.length&&this.writeMessage(o,kd,a)},writePackedSVarint:function(o,a){a.length&&this.writeMessage(o,ha,a)},writePackedBoolean:function(o,a){a.length&&this.writeMessage(o,Ia,a)},writePackedFloat:function(o,a){a.length&&this.writeMessage(o,Ql,a)},writePackedDouble:function(o,a){a.length&&this.writeMessage(o,Wo,a)},writePackedFixed32:function(o,a){a.length&&this.writeMessage(o,ky,a)},writePackedSFixed32:function(o,a){a.length&&this.writeMessage(o,vm,a)},writePackedFixed64:function(o,a){a.length&&this.writeMessage(o,_m,a)},writePackedSFixed64:function(o,a){a.length&&this.writeMessage(o,T0,a)},writeBytesField:function(o,a){this.writeTag(o,Tr.Bytes),this.writeBytes(a)},writeFixed32Field:function(o,a){this.writeTag(o,Tr.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(o,a){this.writeTag(o,Tr.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(o,a){this.writeTag(o,Tr.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(o,a){this.writeTag(o,Tr.Fixed64),this.writeSFixed64(a)},writeVarintField:function(o,a){this.writeTag(o,Tr.Varint),this.writeVarint(a)},writeSVarintField:function(o,a){this.writeTag(o,Tr.Varint),this.writeSVarint(a)},writeStringField:function(o,a){this.writeTag(o,Tr.Bytes),this.writeString(a)},writeFloatField:function(o,a){this.writeTag(o,Tr.Fixed32),this.writeFloat(a)},writeDoubleField:function(o,a){this.writeTag(o,Tr.Fixed64),this.writeDouble(a)},writeBooleanField:function(o,a){this.writeVarintField(o,!!a)}};var al=_(Ss);const of=3;function Wu(o,a,u){o===1&&u.readMessage(Oy,a)}function Oy(o,a,u){if(o===3){const{id:m,bitmap:v,width:P,height:T,left:I,top:O,advance:j}=u.readMessage(Dy,{});a.push({id:m,bitmap:new Nu({width:P+2*of,height:T+2*of},v),metrics:{width:P,height:T,left:I,top:O,advance:j}})}}function Dy(o,a,u){o===1?a.id=u.readVarint():o===2?a.bitmap=u.readBytes():o===3?a.width=u.readVarint():o===4?a.height=u.readVarint():o===5?a.left=u.readSVarint():o===6?a.top=u.readSVarint():o===7&&(a.advance=u.readVarint())}const Dd=of;function sf(o){let a=0,u=0;for(const T of o)a+=T.w*T.h,u=Math.max(u,T.w);o.sort(((T,I)=>I.h-T.h));const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),u),h:1/0}];let v=0,P=0;for(const T of o)for(let I=m.length-1;I>=0;I--){const O=m[I];if(!(T.w>O.w||T.h>O.h)){if(T.x=O.x,T.y=O.y,P=Math.max(P,T.y+T.h),v=Math.max(v,T.x+T.w),T.w===O.w&&T.h===O.h){const j=m.pop();I<m.length&&(m[I]=j)}else T.h===O.h?(O.x+=T.w,O.w-=T.w):T.w===O.w?(O.y+=T.h,O.h-=T.h):(m.push({x:O.x+T.w,y:O.y,w:O.w-T.w,h:T.h}),O.y+=T.h,O.h-=T.h);break}}return{w:v,h:P,fill:a/(v*P)||0}}const fa=1;class xm{constructor(a,{pixelRatio:u,version:m,stretchX:v,stretchY:P,content:T,textFitWidth:I,textFitHeight:O}){this.paddedRect=a,this.pixelRatio=u,this.stretchX=v,this.stretchY=P,this.content=T,this.version=m,this.textFitWidth=I,this.textFitHeight=O}get tl(){return[this.paddedRect.x+fa,this.paddedRect.y+fa]}get br(){return[this.paddedRect.x+this.paddedRect.w-fa,this.paddedRect.y+this.paddedRect.h-fa]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*fa)/this.pixelRatio,(this.paddedRect.h-2*fa)/this.pixelRatio]}}class bm{constructor(a,u){const m={},v={};this.haveRenderCallbacks=[];const P=[];this.addImages(a,m,P),this.addImages(u,v,P);const{w:T,h:I}=sf(P),O=new pi({width:T||1,height:I||1});for(const j in a){const V=a[j],q=m[j].paddedRect;pi.copy(V.data,O,{x:0,y:0},{x:q.x+fa,y:q.y+fa},V.data)}for(const j in u){const V=u[j],q=v[j].paddedRect,Y=q.x+fa,re=q.y+fa,oe=V.data.width,ce=V.data.height;pi.copy(V.data,O,{x:0,y:0},{x:Y,y:re},V.data),pi.copy(V.data,O,{x:0,y:ce-1},{x:Y,y:re-1},{width:oe,height:1}),pi.copy(V.data,O,{x:0,y:0},{x:Y,y:re+ce},{width:oe,height:1}),pi.copy(V.data,O,{x:oe-1,y:0},{x:Y-1,y:re},{width:1,height:ce}),pi.copy(V.data,O,{x:0,y:0},{x:Y+oe,y:re},{width:1,height:ce})}this.image=O,this.iconPositions=m,this.patternPositions=v}addImages(a,u,m){for(const v in a){const P=a[v],T={x:0,y:0,w:P.data.width+2*fa,h:P.data.height+2*fa};m.push(T),u[v]=new xm(T,P),P.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(a,u){a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in a.updatedImages)this.patchUpdatedImage(this.iconPositions[m],a.getImage(m),u),this.patchUpdatedImage(this.patternPositions[m],a.getImage(m),u)}patchUpdatedImage(a,u,m){if(!a||!u||a.version===u.version)return;a.version=u.version;const[v,P]=a.tl;m.update(u.data,void 0,{x:v,y:P})}}var ol;It("ImagePosition",xm),It("ImageAtlas",bm),h.ah=void 0,(ol=h.ah||(h.ah={}))[ol.none=0]="none",ol[ol.horizontal=1]="horizontal",ol[ol.vertical=2]="vertical",ol[ol.horizontalOnly=3]="horizontalOnly";const Ho=-17;class lf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,u){const m=new lf;return m.scale=a||1,m.fontStack=u,m}static forImage(a){const u=new lf;return u.imageName=a,u}}class Zo{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,u){const m=new Zo;for(let v=0;v<a.sections.length;v++){const P=a.sections[v];P.image?m.addImageSection(P):m.addTextSection(P,u)}return m}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(){this.text=(function(a){let u="";for(let m=0;m<a.length;m++){const v=a.charCodeAt(m+1)||null,P=a.charCodeAt(m-1)||null;u+=v&&nl(v)&&!Uu[a[m+1]]||P&&nl(P)&&!Uu[a[m-1]]||!Uu[a[m]]?a[m]:Uu[a[m]]}return u})(this.text)}trim(){let a=0;for(let m=0;m<this.text.length&&bn[this.text.charCodeAt(m)];m++)a++;let u=this.text.length;for(let m=this.text.length-1;m>=0&&m>=a&&bn[this.text.charCodeAt(m)];m--)u--;this.text=this.text.substring(a,u),this.sectionIndex=this.sectionIndex.slice(a,u)}substring(a,u){const m=new Zo;return m.text=this.text.substring(a,u),m.sectionIndex=this.sectionIndex.slice(a,u),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((a,u)=>Math.max(a,this.sections[u].scale)),0)}addTextSection(a,u){this.text+=a.text,this.sections.push(lf.forText(a.scale,a.fontStack||u));const m=this.sections.length-1;for(let v=0;v<a.text.length;++v)this.sectionIndex.push(m)}addImageSection(a){const u=a.image?a.image.name:"";if(u.length===0)return void Fe("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(lf.forImage(u)),this.sectionIndex.push(this.sections.length-1)):Fe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function uf(o,a,u,m,v,P,T,I,O,j,V,q,Y,re,oe){const ce=Zo.fromFeature(o,v);let ye;q===h.ah.vertical&&ce.verticalizePunctuation();const{processBidirectionalText:we,processStyledBidirectionalText:Ve}=Gr;if(we&&ce.sections.length===1){ye=[];const et=we(ce.toString(),ka(ce,j,P,a,m,re));for(const ut of et){const Mt=new Zo;Mt.text=ut,Mt.sections=ce.sections;for(let Yt=0;Yt<ut.length;Yt++)Mt.sectionIndex.push(0);ye.push(Mt)}}else if(Ve){ye=[];const et=Ve(ce.text,ce.sectionIndex,ka(ce,j,P,a,m,re));for(const ut of et){const Mt=new Zo;Mt.text=ut[0],Mt.sectionIndex=ut[1],Mt.sections=ce.sections,ye.push(Mt)}}else ye=(function(et,ut){const Mt=[],Yt=et.text;let Ct=0;for(const Tt of ut)Mt.push(et.substring(Ct,Tt)),Ct=Tt;return Ct<Yt.length&&Mt.push(et.substring(Ct,Yt.length)),Mt})(ce,ka(ce,j,P,a,m,re));const Me=[],je={positionedLines:Me,text:ce.toString(),top:V[1],bottom:V[1],left:V[0],right:V[0],writingMode:q,iconsInText:!1,verticalizable:!1};return(function(et,ut,Mt,Yt,Ct,Tt,Ft,zt,Dt,it,Vt,Nt){let or=0,sn=Ho,tn=0,mi=0;const Ts=zt==="right"?1:zt==="left"?0:.5;let Ki=0;for(const jn of Ct){jn.trim();const yi=jn.getMaxScale(),da=(yi-1)*gn,Xi={positionedGlyphs:[],lineOffset:0};et.positionedLines[Ki]=Xi;const za=Xi.positionedGlyphs;let Yi=0;if(!jn.length()){sn+=Tt,++Ki;continue}for(let lo=0;lo<jn.length();lo++){const jr=jn.getSection(lo),hn=jn.getSectionIndex(lo),yn=jn.getCharCode(lo);let wo=0,On=null,Vd=null,nu=null,iu=gn;const As=!(Dt===h.ah.horizontal||!Vt&&!Ru(yn)||Vt&&(bn[yn]||(gi=yn,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(gi)))));if(jr.imageName){const Xo=Yt[jr.imageName];if(!Xo)continue;nu=jr.imageName,et.iconsInText=et.iconsInText||!0,Vd=Xo.paddedRect;const Mi=Xo.displaySize;jr.scale=jr.scale*gn/Nt,On={width:Mi[0],height:Mi[1],left:fa,top:-Dd,advance:As?Mi[1]:Mi[0]},wo=da+(gn-Mi[1]*jr.scale),iu=On.advance;const Hu=As?Mi[0]*jr.scale-gn*yi:Mi[1]*jr.scale-gn*yi;Hu>0&&Hu>Yi&&(Yi=Hu)}else{const Xo=Mt[jr.fontStack],Mi=Xo&&Xo[yn];if(Mi&&Mi.rect)Vd=Mi.rect,On=Mi.metrics;else{const Hu=ut[jr.fontStack],Em=Hu&&Hu[yn];if(!Em)continue;On=Em.metrics}wo=(yi-jr.scale)*gn}As?(et.verticalizable=!0,za.push({glyph:yn,imageName:nu,x:or,y:sn+wo,vertical:As,scale:jr.scale,fontStack:jr.fontStack,sectionIndex:hn,metrics:On,rect:Vd}),or+=iu*jr.scale+it):(za.push({glyph:yn,imageName:nu,x:or,y:sn+wo,vertical:As,scale:jr.scale,fontStack:jr.fontStack,sectionIndex:hn,metrics:On,rect:Vd}),or+=On.advance*jr.scale+it)}za.length!==0&&(tn=Math.max(or-it,tn),E0(za,0,za.length-1,Ts,Yi)),or=0;const Ko=Tt*yi+Yi;Xi.lineOffset=Math.max(Yi,da),sn+=Ko,mi=Math.max(Ko,mi),++Ki}var gi;const Oa=sn-Ho,{horizontalAlign:Da,verticalAlign:Ra}=cf(Ft);(function(jn,yi,da,Xi,za,Yi,Ko,lo,jr){const hn=(yi-da)*za;let yn=0;yn=Yi!==Ko?-lo*Xi-Ho:(-Xi*jr+.5)*Ko;for(const wo of jn)for(const On of wo.positionedGlyphs)On.x+=hn,On.y+=yn})(et.positionedLines,Ts,Da,Ra,tn,mi,Tt,Oa,Ct.length),et.top+=-Ra*Oa,et.bottom=et.top+Oa,et.left+=-Da*tn,et.right=et.left+tn})(je,a,u,m,ye,T,I,O,q,j,Y,oe),!(function(et){for(const ut of et)if(ut.positionedGlyphs.length!==0)return!1;return!0})(Me)&&je}const bn={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},A0={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Ry={40:!0};function zy(o,a,u,m,v,P){if(a.imageName){const T=m[a.imageName];return T?T.displaySize[0]*a.scale*gn/P+v:0}{const T=u[a.fontStack],I=T&&T[o];return I?I.metrics.advance*a.scale+v:0}}function jy(o,a,u,m){const v=Math.pow(o-a,2);return m?o<a?v/2:2*v:v+Math.abs(u)*u}function Ly(o,a,u){let m=0;return o===10&&(m-=1e4),u&&(m+=150),o!==40&&o!==65288||(m+=50),a!==41&&a!==65289||(m+=50),m}function wm(o,a,u,m,v,P){let T=null,I=jy(a,u,v,P);for(const O of m){const j=jy(a-O.x,u,v,P)+O.badness;j<=I&&(T=O,I=j)}return{index:o,x:a,priorBreak:T,badness:I}}function By(o){return o?By(o.priorBreak).concat(o.index):[]}function ka(o,a,u,m,v,P){if(!o)return[];const T=[],I=(function(q,Y,re,oe,ce,ye){let we=0;for(let Ve=0;Ve<q.length();Ve++){const Me=q.getSection(Ve);we+=zy(q.getCharCode(Ve),Me,oe,ce,Y,ye)}return we/Math.max(1,Math.ceil(we/re))})(o,a,u,m,v,P),O=o.text.indexOf("")>=0;let j=0;for(let q=0;q<o.length();q++){const Y=o.getSection(q),re=o.getCharCode(q);if(bn[re]||(j+=zy(re,Y,m,v,a,P)),q<o.length()-1){const oe=!((V=re)<11904)&&(!!wr["CJK Compatibility Forms"](V)||!!wr["CJK Compatibility"](V)||!!wr["CJK Strokes"](V)||!!wr["CJK Symbols and Punctuation"](V)||!!wr["Enclosed CJK Letters and Months"](V)||!!wr["Halfwidth and Fullwidth Forms"](V)||!!wr["Ideographic Description Characters"](V)||!!wr["Vertical Forms"](V)||Du.test(String.fromCodePoint(V)));(A0[re]||oe||Y.imageName||q!==o.length()-2&&Ry[o.getCharCode(q+1)])&&T.push(wm(q+1,j,I,T,Ly(re,o.getCharCode(q+1),oe&&O),!1))}}var V;return By(wm(o.length(),j,I,T,0,!0))}function cf(o){let a=.5,u=.5;switch(o){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:a,verticalAlign:u}}function E0(o,a,u,m,v){if(!m&&!v)return;const P=o[u],T=(o[u].x+P.metrics.advance*P.scale)*m;for(let I=a;I<=u;I++)o[I].x-=T,o[I].y+=v}function eu(o,a,u){const{horizontalAlign:m,verticalAlign:v}=cf(u),P=a[0]-o.displaySize[0]*m,T=a[1]-o.displaySize[1]*v;return{image:o,top:T,bottom:T+o.displaySize[1],left:P,right:P+o.displaySize[0]}}function hf(o){var a,u;let m=o.left,v=o.top,P=o.right-m,T=o.bottom-v;const I=(a=o.image.textFitWidth)!==null&&a!==void 0?a:"stretchOrShrink",O=(u=o.image.textFitHeight)!==null&&u!==void 0?u:"stretchOrShrink",j=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(O==="proportional"){if(I==="stretchOnly"&&P/T<j||I==="proportional"){const V=Math.ceil(T*j);m*=V/P,P=V}}else if(I==="proportional"&&O==="stretchOnly"&&j!==0&&P/T>j){const V=Math.ceil(P/j);v*=V/T,T=V}return{x1:m,y1:v,x2:m+P,y2:v+T}}function tu(o,a,u,m,v,P){const T=o.image;let I;if(T.content){const ye=T.content,we=T.pixelRatio||1;I=[ye[0]/we,ye[1]/we,T.displaySize[0]-ye[2]/we,T.displaySize[1]-ye[3]/we]}const O=a.left*P,j=a.right*P;let V,q,Y,re;u==="width"||u==="both"?(re=v[0]+O-m[3],q=v[0]+j+m[1]):(re=v[0]+(O+j-T.displaySize[0])/2,q=re+T.displaySize[0]);const oe=a.top*P,ce=a.bottom*P;return u==="height"||u==="both"?(V=v[1]+oe-m[0],Y=v[1]+ce+m[2]):(V=v[1]+(oe+ce-T.displaySize[1])/2,Y=V+T.displaySize[1]),{image:T,top:V,right:q,bottom:Y,left:re,collisionPadding:I}}const ru=255,bo=128,Ps=ru*bo;function Ny(o,a){const{expression:u}=a;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Sr(o+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:v}=u;let P=0;for(;P<m.length&&m[P]<=o;)P++;P=Math.max(0,P-1);let T=P;for(;T<m.length&&m[T]<o+1;)T++;T=Math.min(m.length-1,T);const I=m[P],O=m[T];return u.kind==="composite"?{kind:"composite",minZoom:I,maxZoom:O,interpolationType:v}:{kind:"camera",minZoom:I,maxZoom:O,minSize:u.evaluate(new Sr(I)),maxSize:u.evaluate(new Sr(O)),interpolationType:v}}}function ff(o,a,u){let m="never";const v=o.get(a);return v?m=v:o.get(u)&&(m="always"),m}const C0=Kl.VectorTileFeature.types,Fy=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function df(o,a,u,m,v,P,T,I,O,j,V,q,Y){const re=I?Math.min(Ps,Math.round(I[0])):0,oe=I?Math.min(Ps,Math.round(I[1])):0;o.emplaceBack(a,u,Math.round(32*m),Math.round(32*v),P,T,(re<<1)+(O?1:0),oe,16*j,16*V,256*q,256*Y)}function Gc(o,a,u){o.emplaceBack(a.x,a.y,u),o.emplaceBack(a.x,a.y,u),o.emplaceBack(a.x,a.y,u),o.emplaceBack(a.x,a.y,u)}function Rd(o){for(const a of o.sections)if(_s(a.text))return!0;return!1}class zd{constructor(a){this.layoutVertexArray=new Ta,this.indexArray=new Aa,this.programConfigurations=a,this.segments=new xr,this.dynamicLayoutVertexArray=new vo,this.opacityVertexArray=new Ai,this.hasVisibleVertices=!1,this.placedSymbolArray=new qr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,u,m,v){this.isEmpty()||(m&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,ef.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,Vu.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,Fy,!0),this.opacityVertexBuffer.itemSize=1),(m||v)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}It("SymbolBuffers",zd);class pf{constructor(a,u,m){this.layoutVertexArray=new a,this.layoutAttributes=u,this.indexArray=new m,this.segments=new xr,this.collisionVertexArray=new eo}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,Cd.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}It("CollisionBuffers",pf);class Hc{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((T=>T.id)),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=fd([]),this.placementViewportMatrix=fd([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ny(this.zoom,u["text-size"]),this.iconSizeData=Ny(this.zoom,u["icon-size"]);const m=this.layers[0].layout,v=m.get("symbol-sort-key"),P=m.get("symbol-z-order");this.canOverlap=ff(m,"text-overlap","text-allow-overlap")!=="never"||ff(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=P!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(P==="viewport-y"||P==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map((T=>h.ah[T]))),this.stateDependentLayerIds=this.layers.filter((T=>T.isStateDependent())).map((T=>T.id)),this.sourceID=a.sourceID}createArrays(){this.text=new zd(new Uo(this.layers,this.zoom,(a=>/^text/.test(a)))),this.icon=new zd(new Uo(this.layers,this.zoom,(a=>/^icon/.test(a)))),this.glyphOffsetArray=new Hr,this.lineVertexArray=new Xn,this.symbolInstances=new yr,this.textAnchorOffsets=new Zr}calculateGlyphDependencies(a,u,m,v,P){for(let T=0;T<a.length;T++)if(u[a.charCodeAt(T)]=!0,(m||v)&&P){const I=Uu[a.charAt(T)];I&&(u[I.charCodeAt(0)]=!0)}}populate(a,u,m){const v=this.layers[0],P=v.layout,T=P.get("text-font"),I=P.get("text-field"),O=P.get("icon-image"),j=(I.value.kind!=="constant"||I.value.value instanceof ji&&!I.value.value.isEmpty()||I.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),V=O.value.kind!=="constant"||!!O.value.value||Object.keys(O.parameters).length>0,q=P.get("symbol-sort-key");if(this.features=[],!j&&!V)return;const Y=u.iconDependencies,re=u.glyphDependencies,oe=u.availableImages,ce=new Sr(this.zoom);for(const{feature:ye,id:we,index:Ve,sourceLayerIndex:Me}of a){const je=v._featureFilter.needGeometry,et=Hl(ye,je);if(!v._featureFilter.filter(ce,et,m))continue;let ut,Mt;if(je||(et.geometry=Gl(ye)),j){const Ct=v.getValueAndResolveTokens("text-field",et,m,oe),Tt=ji.factory(Ct),Ft=this.hasRTLText=this.hasRTLText||Rd(Tt);(!Ft||Gr.getRTLTextPluginStatus()==="unavailable"||Ft&&Gr.isParsed())&&(ut=Ma(Tt,v,et))}if(V){const Ct=v.getValueAndResolveTokens("icon-image",et,m,oe);Mt=Ct instanceof di?Ct:di.fromString(Ct)}if(!ut&&!Mt)continue;const Yt=this.sortFeaturesByKey?q.evaluate(et,{},m):void 0;if(this.features.push({id:we,text:ut,icon:Mt,index:Ve,sourceLayerIndex:Me,geometry:et.geometry,properties:ye.properties,type:C0[ye.type],sortKey:Yt}),Mt&&(Y[Mt.name]=!0),ut){const Ct=T.evaluate(et,{},m).join(","),Tt=P.get("text-rotation-alignment")!=="viewport"&&P.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(h.ah.vertical)>=0;for(const Ft of ut.sections)if(Ft.image)Y[Ft.image.name]=!0;else{const zt=zh(ut.toString()),Dt=Ft.fontStack||Ct,it=re[Dt]=re[Dt]||{};this.calculateGlyphDependencies(Ft.text,it,Tt,this.allowVerticalPlacement,zt)}}}P.get("symbol-placement")==="line"&&(this.features=(function(ye){const we={},Ve={},Me=[];let je=0;function et(Ct){Me.push(ye[Ct]),je++}function ut(Ct,Tt,Ft){const zt=Ve[Ct];return delete Ve[Ct],Ve[Tt]=zt,Me[zt].geometry[0].pop(),Me[zt].geometry[0]=Me[zt].geometry[0].concat(Ft[0]),zt}function Mt(Ct,Tt,Ft){const zt=we[Tt];return delete we[Tt],we[Ct]=zt,Me[zt].geometry[0].shift(),Me[zt].geometry[0]=Ft[0].concat(Me[zt].geometry[0]),zt}function Yt(Ct,Tt,Ft){const zt=Ft?Tt[0][Tt[0].length-1]:Tt[0][0];return`${Ct}:${zt.x}:${zt.y}`}for(let Ct=0;Ct<ye.length;Ct++){const Tt=ye[Ct],Ft=Tt.geometry,zt=Tt.text?Tt.text.toString():null;if(!zt){et(Ct);continue}const Dt=Yt(zt,Ft),it=Yt(zt,Ft,!0);if(Dt in Ve&&it in we&&Ve[Dt]!==we[it]){const Vt=Mt(Dt,it,Ft),Nt=ut(Dt,it,Me[Vt].geometry);delete we[Dt],delete Ve[it],Ve[Yt(zt,Me[Nt].geometry,!0)]=Nt,Me[Vt].geometry=null}else Dt in Ve?ut(Dt,it,Ft):it in we?Mt(Dt,it,Ft):(et(Ct),we[Dt]=je-1,Ve[it]=je-1)}return Me.filter((Ct=>Ct.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((ye,we)=>ye.sortKey-we.sortKey))}update(a,u,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,u,this.layers,m),this.icon.programConfigurations.updatePaintArrays(a,u,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,u){const m=this.lineVertexArray.length;if(a.segment!==void 0){let v=a.dist(u[a.segment+1]),P=a.dist(u[a.segment]);const T={};for(let I=a.segment+1;I<u.length;I++)T[I]={x:u[I].x,y:u[I].y,tileUnitDistanceFromAnchor:v},I<u.length-1&&(v+=u[I+1].dist(u[I]));for(let I=a.segment||0;I>=0;I--)T[I]={x:u[I].x,y:u[I].y,tileUnitDistanceFromAnchor:P},I>0&&(P+=u[I-1].dist(u[I]));for(let I=0;I<u.length;I++){const O=T[I];this.lineVertexArray.emplaceBack(O.x,O.y,O.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(a,u,m,v,P,T,I,O,j,V,q,Y){const re=a.indexArray,oe=a.layoutVertexArray,ce=a.segments.prepareSegment(4*u.length,oe,re,this.canOverlap?T.sortKey:void 0),ye=this.glyphOffsetArray.length,we=ce.vertexLength,Ve=this.allowVerticalPlacement&&I===h.ah.vertical?Math.PI/2:0,Me=T.text&&T.text.sections;for(let je=0;je<u.length;je++){const{tl:et,tr:ut,bl:Mt,br:Yt,tex:Ct,pixelOffsetTL:Tt,pixelOffsetBR:Ft,minFontScaleX:zt,minFontScaleY:Dt,glyphOffset:it,isSDF:Vt,sectionIndex:Nt}=u[je],or=ce.vertexLength,sn=it[1];df(oe,O.x,O.y,et.x,sn+et.y,Ct.x,Ct.y,m,Vt,Tt.x,Tt.y,zt,Dt),df(oe,O.x,O.y,ut.x,sn+ut.y,Ct.x+Ct.w,Ct.y,m,Vt,Ft.x,Tt.y,zt,Dt),df(oe,O.x,O.y,Mt.x,sn+Mt.y,Ct.x,Ct.y+Ct.h,m,Vt,Tt.x,Ft.y,zt,Dt),df(oe,O.x,O.y,Yt.x,sn+Yt.y,Ct.x+Ct.w,Ct.y+Ct.h,m,Vt,Ft.x,Ft.y,zt,Dt),Gc(a.dynamicLayoutVertexArray,O,Ve),re.emplaceBack(or,or+1,or+2),re.emplaceBack(or+1,or+2,or+3),ce.vertexLength+=4,ce.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(it[0]),je!==u.length-1&&Nt===u[je+1].sectionIndex||a.programConfigurations.populatePaintArrays(oe.length,T,T.index,{},Y,Me&&Me[Nt])}a.placedSymbolArray.emplaceBack(O.x,O.y,ye,this.glyphOffsetArray.length-ye,we,j,V,O.segment,m?m[0]:0,m?m[1]:0,v[0],v[1],I,0,!1,0,q)}_addCollisionDebugVertex(a,u,m,v,P,T){return u.emplaceBack(0,0),a.emplaceBack(m.x,m.y,v,P,Math.round(T.x),Math.round(T.y))}addCollisionDebugVertices(a,u,m,v,P,T,I){const O=P.segments.prepareSegment(4,P.layoutVertexArray,P.indexArray),j=O.vertexLength,V=P.layoutVertexArray,q=P.collisionVertexArray,Y=I.anchorX,re=I.anchorY;this._addCollisionDebugVertex(V,q,T,Y,re,new A(a,u)),this._addCollisionDebugVertex(V,q,T,Y,re,new A(m,u)),this._addCollisionDebugVertex(V,q,T,Y,re,new A(m,v)),this._addCollisionDebugVertex(V,q,T,Y,re,new A(a,v)),O.vertexLength+=4;const oe=P.indexArray;oe.emplaceBack(j,j+1),oe.emplaceBack(j+1,j+2),oe.emplaceBack(j+2,j+3),oe.emplaceBack(j+3,j),O.primitiveLength+=4}addDebugCollisionBoxes(a,u,m,v){for(let P=a;P<u;P++){const T=this.collisionBoxArray.get(P);this.addCollisionDebugVertices(T.x1,T.y1,T.x2,T.y2,v?this.textCollisionBox:this.iconCollisionBox,T.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new pf(la,Md.members,In),this.iconCollisionBox=new pf(la,Md.members,In);for(let a=0;a<this.symbolInstances.length;a++){const u=this.symbolInstances.get(a);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(a,u,m,v,P,T,I,O,j){const V={};for(let q=u;q<m;q++){const Y=a.get(q);V.textBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},V.textFeatureIndex=Y.featureIndex;break}for(let q=v;q<P;q++){const Y=a.get(q);V.verticalTextBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},V.verticalTextFeatureIndex=Y.featureIndex;break}for(let q=T;q<I;q++){const Y=a.get(q);V.iconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},V.iconFeatureIndex=Y.featureIndex;break}for(let q=O;q<j;q++){const Y=a.get(q);V.verticalIconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},V.verticalIconFeatureIndex=Y.featureIndex;break}return V}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const m=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,u){const m=a.placedSymbolArray.get(u),v=m.vertexStartIndex+4*m.numGlyphs;for(let P=m.vertexStartIndex;P<v;P+=4)a.indexArray.emplaceBack(P,P+1,P+2),a.indexArray.emplaceBack(P+1,P+2,P+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(a),m=Math.cos(a),v=[],P=[],T=[];for(let I=0;I<this.symbolInstances.length;++I){T.push(I);const O=this.symbolInstances.get(I);v.push(0|Math.round(u*O.anchorX+m*O.anchorY)),P.push(O.featureIndex)}return T.sort(((I,O)=>v[I]-v[O]||P[O]-P[I])),T}addToSortKeyRanges(a,u){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===u?m.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const m=this.symbolInstances.get(u);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach(((v,P,T)=>{v>=0&&T.indexOf(v)===P&&this.addIndicesForPlacedSymbol(this.text,v)})),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Sm,jd;It("SymbolBucket",Hc,{omit:["layers","collisionBoxArray","features","compareText"]}),Hc.MAX_GLYPHS=65535,Hc.addDynamicAttributes=Gc;var Zc={get paint(){return jd=jd||new w({"icon-opacity":new Zt(qe.paint_symbol["icon-opacity"]),"icon-color":new Zt(qe.paint_symbol["icon-color"]),"icon-halo-color":new Zt(qe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Zt(qe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Zt(qe.paint_symbol["icon-halo-blur"]),"icon-translate":new kt(qe.paint_symbol["icon-translate"]),"icon-translate-anchor":new kt(qe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Zt(qe.paint_symbol["text-opacity"]),"text-color":new Zt(qe.paint_symbol["text-color"],{runtimeType:hi,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new Zt(qe.paint_symbol["text-halo-color"]),"text-halo-width":new Zt(qe.paint_symbol["text-halo-width"]),"text-halo-blur":new Zt(qe.paint_symbol["text-halo-blur"]),"text-translate":new kt(qe.paint_symbol["text-translate"]),"text-translate-anchor":new kt(qe.paint_symbol["text-translate-anchor"])})},get layout(){return Sm=Sm||new w({"symbol-placement":new kt(qe.layout_symbol["symbol-placement"]),"symbol-spacing":new kt(qe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new kt(qe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Zt(qe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new kt(qe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new kt(qe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new kt(qe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new kt(qe.layout_symbol["icon-ignore-placement"]),"icon-optional":new kt(qe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new kt(qe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Zt(qe.layout_symbol["icon-size"]),"icon-text-fit":new kt(qe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new kt(qe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Zt(qe.layout_symbol["icon-image"]),"icon-rotate":new Zt(qe.layout_symbol["icon-rotate"]),"icon-padding":new Zt(qe.layout_symbol["icon-padding"]),"icon-keep-upright":new kt(qe.layout_symbol["icon-keep-upright"]),"icon-offset":new Zt(qe.layout_symbol["icon-offset"]),"icon-anchor":new Zt(qe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new kt(qe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new kt(qe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new kt(qe.layout_symbol["text-rotation-alignment"]),"text-field":new Zt(qe.layout_symbol["text-field"]),"text-font":new Zt(qe.layout_symbol["text-font"]),"text-size":new Zt(qe.layout_symbol["text-size"]),"text-max-width":new Zt(qe.layout_symbol["text-max-width"]),"text-line-height":new kt(qe.layout_symbol["text-line-height"]),"text-letter-spacing":new Zt(qe.layout_symbol["text-letter-spacing"]),"text-justify":new Zt(qe.layout_symbol["text-justify"]),"text-radial-offset":new Zt(qe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new kt(qe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Zt(qe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Zt(qe.layout_symbol["text-anchor"]),"text-max-angle":new kt(qe.layout_symbol["text-max-angle"]),"text-writing-mode":new kt(qe.layout_symbol["text-writing-mode"]),"text-rotate":new Zt(qe.layout_symbol["text-rotate"]),"text-padding":new kt(qe.layout_symbol["text-padding"]),"text-keep-upright":new kt(qe.layout_symbol["text-keep-upright"]),"text-transform":new Zt(qe.layout_symbol["text-transform"]),"text-offset":new Zt(qe.layout_symbol["text-offset"]),"text-allow-overlap":new kt(qe.layout_symbol["text-allow-overlap"]),"text-overlap":new kt(qe.layout_symbol["text-overlap"]),"text-ignore-placement":new kt(qe.layout_symbol["text-ignore-placement"]),"text-optional":new kt(qe.layout_symbol["text-optional"])})}};class Ld{constructor(a){if(a.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=a.property.overrides?a.property.overrides.runtimeType:os,this.defaultValue=a}evaluate(a){if(a.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(a.formattedSection))return u.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}It("FormatSectionOverride",Ld,{omit:["defaultValue"]});class Gu extends f{constructor(a){super(a,Zc)}recalculate(a,u){if(super.recalculate(a,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const v=[];for(const P of m)v.indexOf(P)<0&&v.push(P);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(a,u,m,v){const P=this.layout.get(a).evaluate(u,{},m,v),T=this._unevaluatedLayout._values[a];return T.isDataDriven()||ps(T.value)||!P?P:(function(I,O){return O.replace(/{([^{}]+)}/g,((j,V)=>I&&V in I?String(I[V]):""))})(u.properties,P)}createBucket(a){return new Hc(a)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const a of Zc.paint.overridableProperties){if(!Gu.hasPaintOverride(this.layout,a))continue;const u=this.paint.get(a),m=new Ld(u),v=new Fi(m,u.property.specification);let P=null;P=u.value.kind==="constant"||u.value.kind==="source"?new Ys("source",v):new Js("composite",v,u.value.zoomStops),this.paint._values[a]=new aa(u.property,P,u.parameters)}}_handleOverridablePaintPropertyUpdate(a,u,m){return!(!this.layout||u.isDataDriven()||m.isDataDriven())&&Gu.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,u){const m=a.get("text-field"),v=Zc.paint.properties[u];let P=!1;const T=I=>{for(const O of I)if(v.overrides&&v.overrides.hasOverride(O))return void(P=!0)};if(m.value.kind==="constant"&&m.value.value instanceof ji)T(m.value.value.sections);else if(m.value.kind==="source"){const I=j=>{P||(j instanceof qa&&Vr(j.value)===Ua?T(j.value.sections):j instanceof Ws?T(j.sections):j.eachChild(I))},O=m.value;O._styleExpression&&I(O._styleExpression.expression)}return P}}let Pm;var M0={get paint(){return Pm=Pm||new w({"background-color":new kt(qe.paint_background["background-color"]),"background-pattern":new ju(qe.paint_background["background-pattern"]),"background-opacity":new kt(qe.paint_background["background-opacity"])})}};class Bd extends f{constructor(a){super(a,M0)}}let $y;var mf={get paint(){return $y=$y||new w({"raster-opacity":new kt(qe.paint_raster["raster-opacity"]),"raster-hue-rotate":new kt(qe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new kt(qe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new kt(qe.paint_raster["raster-brightness-max"]),"raster-saturation":new kt(qe.paint_raster["raster-saturation"]),"raster-contrast":new kt(qe.paint_raster["raster-contrast"]),"raster-resampling":new kt(qe.paint_raster["raster-resampling"]),"raster-fade-duration":new kt(qe.paint_raster["raster-fade-duration"])})}};class I0 extends f{constructor(a){super(a,mf)}}class Nd extends f{constructor(a){super(a,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class c{constructor(a){this._methodToThrottle=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const p=63710088e-1;class x{constructor(a,u){if(isNaN(a)||isNaN(u))throw new Error(`Invalid LngLat object: (${a}, ${u})`);if(this.lng=+a,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new x(X(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const u=Math.PI/180,m=this.lat*u,v=a.lat*u,P=Math.sin(m)*Math.sin(v)+Math.cos(m)*Math.cos(v)*Math.cos((a.lng-this.lng)*u);return p*Math.acos(Math.min(P,1))}static convert(a){if(a instanceof x)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new x(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new x(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const C=2*Math.PI*p;function R(o){return C*Math.cos(o*Math.PI/180)}function F(o){return(180+o)/360}function ae(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function be(o,a){return o/R(a)}function Ie(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Ye{constructor(a,u,m=0){this.x=+a,this.y=+u,this.z=+m}static fromLngLat(a,u=0){const m=x.convert(a);return new Ye(F(m.lng),ae(m.lat),be(u,m.lat))}toLngLat(){return new x(360*this.x-180,Ie(this.y))}toAltitude(){return this.z*R(Ie(this.y))}meterInMercatorCoordinateUnits(){return 1/C*(a=Ie(this.y),1/Math.cos(a*Math.PI/180));var a}}function ft(o,a,u){var m=2*Math.PI*6378137/256/Math.pow(2,u);return[o*m-2*Math.PI*6378137/2,a*m-2*Math.PI*6378137/2]}class mt{constructor(a,u,m){if(!(function(v,P,T){return!(v<0||v>25||T<0||T>=Math.pow(2,v)||P<0||P>=Math.pow(2,v))})(a,u,m))throw new Error(`x=${u}, y=${m}, z=${a} outside of bounds. 0<=x<${Math.pow(2,a)}, 0<=y<${Math.pow(2,a)} 0<=z<=25 `);this.z=a,this.x=u,this.y=m,this.key=Bt(0,a,a,u,m)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,u,m){const v=(T=this.y,I=this.z,O=ft(256*(P=this.x),256*(T=Math.pow(2,I)-T-1),I),j=ft(256*(P+1),256*(T+1),I),O[0]+","+O[1]+","+j[0]+","+j[1]);var P,T,I,O,j;const V=(function(q,Y,re){let oe,ce="";for(let ye=q;ye>0;ye--)oe=1<<ye-1,ce+=(Y&oe?1:0)+(re&oe?2:0);return ce})(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,V).replace(/{bbox-epsg-3857}/g,v)}isChildOf(a){const u=this.z-a.z;return u>0&&a.x===this.x>>u&&a.y===this.y>>u}getTilePoint(a){const u=Math.pow(2,this.z);return new A((a.x*u-this.x)*kn,(a.y*u-this.y)*kn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ct{constructor(a,u){this.wrap=a,this.canonical=u,this.key=Bt(a,u.z,u.z,u.x,u.y)}}class Et{constructor(a,u,m,v,P){if(a<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${a}; z = ${m}`);this.overscaledZ=a,this.wrap=u,this.canonical=new mt(m,+v,+P),this.key=Bt(u,a,m,v,P)}clone(){return new Et(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-a;return a>this.canonical.z?new Et(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Et(a,this.wrap,a,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(a,u){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-a;return a>this.canonical.z?Bt(this.wrap*+u,a,this.canonical.z,this.canonical.x,this.canonical.y):Bt(this.wrap*+u,a,a,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(a){if(a.wrap!==this.wrap)return!1;const u=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>u&&a.canonical.y===this.canonical.y>>u}children(a){if(this.overscaledZ>=a)return[new Et(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,m=2*this.canonical.x,v=2*this.canonical.y;return[new Et(u,this.wrap,u,m,v),new Et(u,this.wrap,u,m+1,v),new Et(u,this.wrap,u,m,v+1),new Et(u,this.wrap,u,m+1,v+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new Et(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new Et(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ct(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(a){return this.canonical.getTilePoint(new Ye(a.x-this.wrap,a.y))}}function Bt(o,a,u,m,v){(o*=2)<0&&(o=-1*o-1);const P=1<<u;return(P*P*o+P*v+m).toString(36)+u.toString(36)+a.toString(36)}It("CanonicalTileID",mt),It("OverscaledTileID",Et,{omit:["posMatrix"]});class Ht{constructor(a,u,m,v=1,P=1,T=1,I=0){if(this.uid=a,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void Fe(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;const O=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=P,this.blueFactor=T,this.baseShift=I;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let j=0;j<O;j++)this.data[this._idx(-1,j)]=this.data[this._idx(0,j)],this.data[this._idx(O,j)]=this.data[this._idx(O-1,j)],this.data[this._idx(j,-1)]=this.data[this._idx(j,0)],this.data[this._idx(j,O)]=this.data[this._idx(j,O-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(O,-1)]=this.data[this._idx(O-1,0)],this.data[this._idx(-1,O)]=this.data[this._idx(0,O-1)],this.data[this._idx(O,O)]=this.data[this._idx(O-1,O-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let j=0;j<O;j++)for(let V=0;V<O;V++){const q=this.get(j,V);q>this.max&&(this.max=q),q<this.min&&(this.min=q)}}get(a,u){const m=new Uint8Array(this.data.buffer),v=4*this._idx(a,u);return this.unpack(m[v],m[v+1],m[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(a,u){if(a<-1||a>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(a+1)}unpack(a,u,m){return a*this.redFactor+u*this.greenFactor+m*this.blueFactor-this.baseShift}getPixels(){return new pi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(a,u,m){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let v=u*this.dim,P=u*this.dim+this.dim,T=m*this.dim,I=m*this.dim+this.dim;switch(u){case-1:v=P-1;break;case 1:P=v+1}switch(m){case-1:T=I-1;break;case 1:I=T+1}const O=-u*this.dim,j=-m*this.dim;for(let V=T;V<I;V++)for(let q=v;q<P;q++)this.data[this._idx(q,V)]=a.data[this._idx(q+O,V+j)]}}It("DEMData",Ht);class zn{constructor(a){this._stringToNumber={},this._numberToString=[];for(let u=0;u<a.length;u++){const m=a[u];this._stringToNumber[m]=u,this._numberToString[u]=m}}encode(a){return this._stringToNumber[a]}decode(a){if(a>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${a} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[a]}}class Ge{constructor(a,u,m,v,P){this.type="Feature",this._vectorTileFeature=a,a._z=u,a._x=m,a._y=v,this.properties=a.properties,this.id=P}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(a[u]=this[u]);return a}}class De{constructor(a,u){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new Bl(kn,16,0),this.grid3D=new Bl(kn,16,0),this.featureIndexArray=new on,this.promoteId=u}insert(a,u,m,v,P,T){const I=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,v,P);const O=T?this.grid3D:this.grid;for(let j=0;j<u.length;j++){const V=u[j],q=[1/0,1/0,-1/0,-1/0];for(let Y=0;Y<V.length;Y++){const re=V[Y];q[0]=Math.min(q[0],re.x),q[1]=Math.min(q[1],re.y),q[2]=Math.max(q[2],re.x),q[3]=Math.max(q[3],re.y)}q[0]<kn&&q[1]<kn&&q[2]>=0&&q[3]>=0&&O.insert(I,q[0],q[1],q[2],q[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Kl.VectorTile(new al(this.rawTileData)).layers,this.sourceLayerCoder=new zn(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(a,u,m,v){this.loadVTLayers();const P=a.params||{},T=kn/a.tileSize/a.scale,I=Eu(P.filter),O=a.queryGeometry,j=a.queryPadding*T,V=St(O),q=this.grid.query(V.minX-j,V.minY-j,V.maxX+j,V.maxY+j),Y=St(a.cameraQueryGeometry),re=this.grid3D.query(Y.minX-j,Y.minY-j,Y.maxX+j,Y.maxY+j,((ye,we,Ve,Me)=>(function(je,et,ut,Mt,Yt){for(const Tt of je)if(et<=Tt.x&&ut<=Tt.y&&Mt>=Tt.x&&Yt>=Tt.y)return!0;const Ct=[new A(et,ut),new A(et,Yt),new A(Mt,Yt),new A(Mt,ut)];if(je.length>2){for(const Tt of Ct)if(Lu(je,Tt))return!0}for(let Tt=0;Tt<je.length-1;Tt++)if(ay(je[Tt],je[Tt+1],Ct))return!0;return!1})(a.cameraQueryGeometry,ye-j,we-j,Ve+j,Me+j)));for(const ye of re)q.push(ye);q.sort(Kt);const oe={};let ce;for(let ye=0;ye<q.length;ye++){const we=q[ye];if(we===ce)continue;ce=we;const Ve=this.featureIndexArray.get(we);let Me=null;this.loadMatchingFeature(oe,Ve.bucketIndex,Ve.sourceLayerIndex,Ve.featureIndex,I,P.layers,P.availableImages,u,m,v,((je,et,ut)=>(Me||(Me=Gl(je)),et.queryIntersectsFeature(O,je,ut,Me,this.z,a.transform,T,a.pixelPosMatrix))))}return oe}loadMatchingFeature(a,u,m,v,P,T,I,O,j,V,q){const Y=this.bucketLayerIDs[u];if(T&&!(function(ye,we){for(let Ve=0;Ve<ye.length;Ve++)if(we.indexOf(ye[Ve])>=0)return!0;return!1})(T,Y))return;const re=this.sourceLayerCoder.decode(m),oe=this.vtLayers[re].feature(v);if(P.needGeometry){const ye=Hl(oe,!0);if(!P.filter(new Sr(this.tileID.overscaledZ),ye,this.tileID.canonical))return}else if(!P.filter(new Sr(this.tileID.overscaledZ),oe))return;const ce=this.getId(oe,re);for(let ye=0;ye<Y.length;ye++){const we=Y[ye];if(T&&T.indexOf(we)<0)continue;const Ve=O[we];if(!Ve)continue;let Me={};ce&&V&&(Me=V.getState(Ve.sourceLayer||"_geojsonTileLayer",ce));const je=se({},j[we]);je.paint=Ze(je.paint,Ve.paint,oe,Me,I),je.layout=Ze(je.layout,Ve.layout,oe,Me,I);const et=!q||q(oe,Ve,Me);if(!et)continue;const ut=new Ge(oe,this.z,this.x,this.y,ce);ut.layer=je;let Mt=a[we];Mt===void 0&&(Mt=a[we]=[]),Mt.push({featureIndex:v,feature:ut,intersectionZ:et})}}lookupSymbolFeatures(a,u,m,v,P,T,I,O){const j={};this.loadVTLayers();const V=Eu(P);for(const q of a)this.loadMatchingFeature(j,m,v,q,V,T,I,O,u);return j}hasLayer(a){for(const u of this.bucketLayerIDs)for(const m of u)if(a===m)return!0;return!1}getId(a,u){let m=a.id;return this.promoteId&&(m=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof m=="boolean"&&(m=Number(m))),m}}function Ze(o,a,u,m,v){return Se(o,((P,T)=>{const I=a instanceof $l?a.get(T):null;return I&&I.evaluate?I.evaluate(u,m,v):I}))}function St(o){let a=1/0,u=1/0,m=-1/0,v=-1/0;for(const P of o)a=Math.min(a,P.x),u=Math.min(u,P.y),m=Math.max(m,P.x),v=Math.max(v,P.y);return{minX:a,minY:u,maxX:m,maxY:v}}function Kt(o,a){return a-o}function nr(o,a,u,m,v){const P=[];for(let T=0;T<o.length;T++){const I=o[T];let O;for(let j=0;j<I.length-1;j++){let V=I[j],q=I[j+1];V.x<a&&q.x<a||(V.x<a?V=new A(a,V.y+(a-V.x)/(q.x-V.x)*(q.y-V.y))._round():q.x<a&&(q=new A(a,V.y+(a-V.x)/(q.x-V.x)*(q.y-V.y))._round()),V.y<u&&q.y<u||(V.y<u?V=new A(V.x+(u-V.y)/(q.y-V.y)*(q.x-V.x),u)._round():q.y<u&&(q=new A(V.x+(u-V.y)/(q.y-V.y)*(q.x-V.x),u)._round()),V.x>=m&&q.x>=m||(V.x>=m?V=new A(m,V.y+(m-V.x)/(q.x-V.x)*(q.y-V.y))._round():q.x>=m&&(q=new A(m,V.y+(m-V.x)/(q.x-V.x)*(q.y-V.y))._round()),V.y>=v&&q.y>=v||(V.y>=v?V=new A(V.x+(v-V.y)/(q.y-V.y)*(q.x-V.x),v)._round():q.y>=v&&(q=new A(V.x+(v-V.y)/(q.y-V.y)*(q.x-V.x),v)._round()),O&&V.equals(O[O.length-1])||(O=[V],P.push(O)),O.push(q)))))}}return P}It("FeatureIndex",De,{omit:["rawTileData","sourceLayerCoder"]});class Xt extends A{constructor(a,u,m,v){super(a,u),this.angle=m,v!==void 0&&(this.segment=v)}clone(){return new Xt(this.x,this.y,this.angle,this.segment)}}function hr(o,a,u,m,v){if(a.segment===void 0||u===0)return!0;let P=a,T=a.segment+1,I=0;for(;I>-u/2;){if(T--,T<0)return!1;I-=o[T].dist(P),P=o[T]}I+=o[T].dist(o[T+1]),T++;const O=[];let j=0;for(;I<u/2;){const V=o[T],q=o[T+1];if(!q)return!1;let Y=o[T-1].angleTo(V)-V.angleTo(q);for(Y=Math.abs((Y+3*Math.PI)%(2*Math.PI)-Math.PI),O.push({distance:I,angleDelta:Y}),j+=Y;I-O[0].distance>m;)j-=O.shift().angleDelta;if(j>v)return!1;T++,I+=V.dist(q)}return!0}function si(o){let a=0;for(let u=0;u<o.length-1;u++)a+=o[u].dist(o[u+1]);return a}function Fr(o,a,u){return o?.6*a*u:0}function sl(o,a){return Math.max(o?o.right-o.left:0,a?a.right-a.left:0)}function k0(o,a,u,m,v,P){const T=Fr(u,v,P),I=sl(u,m)*P;let O=0;const j=si(o)/2;for(let V=0;V<o.length-1;V++){const q=o[V],Y=o[V+1],re=q.dist(Y);if(O+re>j){const oe=(j-O)/re,ce=Mn.number(q.x,Y.x,oe),ye=Mn.number(q.y,Y.y,oe),we=new Xt(ce,ye,Y.angleTo(q),V);return we._round(),!T||hr(o,we,I,T,a)?we:void 0}O+=re}}function jj(o,a,u,m,v,P,T,I,O){const j=Fr(m,P,T),V=sl(m,v),q=V*T,Y=o[0].x===0||o[0].x===O||o[0].y===0||o[0].y===O;return a-q<a/4&&(a=q+a/4),HT(o,Y?a/2*I%a:(V/2+2*P)*T*I%a,a,j,u,q,Y,!1,O)}function HT(o,a,u,m,v,P,T,I,O){const j=P/2,V=si(o);let q=0,Y=a-u,re=[];for(let oe=0;oe<o.length-1;oe++){const ce=o[oe],ye=o[oe+1],we=ce.dist(ye),Ve=ye.angleTo(ce);for(;Y+u<q+we;){Y+=u;const Me=(Y-q)/we,je=Mn.number(ce.x,ye.x,Me),et=Mn.number(ce.y,ye.y,Me);if(je>=0&&je<O&&et>=0&&et<O&&Y-j>=0&&Y+j<=V){const ut=new Xt(je,et,Ve,oe);ut._round(),m&&!hr(o,ut,P,m,v)||re.push(ut)}}q+=we}return I||re.length||T||(re=HT(o,q/2,u,m,v,P,T,!0,O)),re}It("Anchor",Xt);const Fd=fa;function ZT(o,a,u,m){const v=[],P=o.image,T=P.pixelRatio,I=P.paddedRect.w-2*Fd,O=P.paddedRect.h-2*Fd;let j={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};const V=P.stretchX||[[0,I]],q=P.stretchY||[[0,O]],Y=(it,Vt)=>it+Vt[1]-Vt[0],re=V.reduce(Y,0),oe=q.reduce(Y,0),ce=I-re,ye=O-oe;let we=0,Ve=re,Me=0,je=oe,et=0,ut=ce,Mt=0,Yt=ye;if(P.content&&m){const it=P.content,Vt=it[2]-it[0],Nt=it[3]-it[1];(P.textFitWidth||P.textFitHeight)&&(j=hf(o)),we=Vy(V,0,it[0]),Me=Vy(q,0,it[1]),Ve=Vy(V,it[0],it[2]),je=Vy(q,it[1],it[3]),et=it[0]-we,Mt=it[1]-Me,ut=Vt-Ve,Yt=Nt-je}const Ct=j.x1,Tt=j.y1,Ft=j.x2-Ct,zt=j.y2-Tt,Dt=(it,Vt,Nt,or)=>{const sn=Uy(it.stretch-we,Ve,Ft,Ct),tn=qy(it.fixed-et,ut,it.stretch,re),mi=Uy(Vt.stretch-Me,je,zt,Tt),Ts=qy(Vt.fixed-Mt,Yt,Vt.stretch,oe),Ki=Uy(Nt.stretch-we,Ve,Ft,Ct),gi=qy(Nt.fixed-et,ut,Nt.stretch,re),Oa=Uy(or.stretch-Me,je,zt,Tt),Da=qy(or.fixed-Mt,Yt,or.stretch,oe),Ra=new A(sn,mi),jn=new A(Ki,mi),yi=new A(Ki,Oa),da=new A(sn,Oa),Xi=new A(tn/T,Ts/T),za=new A(gi/T,Da/T),Yi=a*Math.PI/180;if(Yi){const jr=Math.sin(Yi),hn=Math.cos(Yi),yn=[hn,-jr,jr,hn];Ra._matMult(yn),jn._matMult(yn),da._matMult(yn),yi._matMult(yn)}const Ko=it.stretch+it.fixed,lo=Vt.stretch+Vt.fixed;return{tl:Ra,tr:jn,bl:da,br:yi,tex:{x:P.paddedRect.x+Fd+Ko,y:P.paddedRect.y+Fd+lo,w:Nt.stretch+Nt.fixed-Ko,h:or.stretch+or.fixed-lo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Xi,pixelOffsetBR:za,minFontScaleX:ut/T/Ft,minFontScaleY:Yt/T/zt,isSDF:u}};if(m&&(P.stretchX||P.stretchY)){const it=KT(V,ce,re),Vt=KT(q,ye,oe);for(let Nt=0;Nt<it.length-1;Nt++){const or=it[Nt],sn=it[Nt+1];for(let tn=0;tn<Vt.length-1;tn++)v.push(Dt(or,Vt[tn],sn,Vt[tn+1]))}}else v.push(Dt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:I+1},{fixed:0,stretch:O+1}));return v}function Vy(o,a,u){let m=0;for(const v of o)m+=Math.max(a,Math.min(u,v[1]))-Math.max(a,Math.min(u,v[0]));return m}function KT(o,a,u){const m=[{fixed:-Fd,stretch:0}];for(const[v,P]of o){const T=m[m.length-1];m.push({fixed:v-T.stretch,stretch:T.stretch}),m.push({fixed:v-T.stretch,stretch:T.stretch+(P-v)})}return m.push({fixed:a+Fd,stretch:u}),m}function Uy(o,a,u,m){return o/a*u+m}function qy(o,a,u,m){return o-a*u/m}class Wy{constructor(a,u,m,v,P,T,I,O,j,V){var q;if(this.boxStartIndex=a.length,j){let Y=T.top,re=T.bottom;const oe=T.collisionPadding;oe&&(Y-=oe[1],re+=oe[3]);let ce=re-Y;ce>0&&(ce=Math.max(10,ce),this.circleDiameter=ce)}else{const Y=!((q=T.image)===null||q===void 0)&&q.content&&(T.image.textFitWidth||T.image.textFitHeight)?hf(T):{x1:T.left,y1:T.top,x2:T.right,y2:T.bottom};Y.y1=Y.y1*I-O[0],Y.y2=Y.y2*I+O[2],Y.x1=Y.x1*I-O[3],Y.x2=Y.x2*I+O[1];const re=T.collisionPadding;if(re&&(Y.x1-=re[0]*I,Y.y1-=re[1]*I,Y.x2+=re[2]*I,Y.y2+=re[3]*I),V){const oe=new A(Y.x1,Y.y1),ce=new A(Y.x2,Y.y1),ye=new A(Y.x1,Y.y2),we=new A(Y.x2,Y.y2),Ve=V*Math.PI/180;oe._rotate(Ve),ce._rotate(Ve),ye._rotate(Ve),we._rotate(Ve),Y.x1=Math.min(oe.x,ce.x,ye.x,we.x),Y.x2=Math.max(oe.x,ce.x,ye.x,we.x),Y.y1=Math.min(oe.y,ce.y,ye.y,we.y),Y.y2=Math.max(oe.y,ce.y,ye.y,we.y)}a.emplaceBack(u.x,u.y,Y.x1,Y.y1,Y.x2,Y.y2,m,v,P)}this.boxEndIndex=a.length}}class Lj{constructor(a=[],u=((m,v)=>m<v?-1:m>v?1:0)){if(this.data=a,this.length=this.data.length,this.compare=u,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;const a=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:u,compare:m}=this,v=u[a];for(;a>0;){const P=a-1>>1,T=u[P];if(m(v,T)>=0)break;u[a]=T,a=P}u[a]=v}_down(a){const{data:u,compare:m}=this,v=this.length>>1,P=u[a];for(;a<v;){let T=1+(a<<1);const I=T+1;if(I<this.length&&m(u[I],u[T])<0&&(T=I),m(u[T],P)>=0)break;u[a]=u[T],a=T}u[a]=P}}function Bj(o,a=1,u=!1){let m=1/0,v=1/0,P=-1/0,T=-1/0;const I=o[0];for(let re=0;re<I.length;re++){const oe=I[re];(!re||oe.x<m)&&(m=oe.x),(!re||oe.y<v)&&(v=oe.y),(!re||oe.x>P)&&(P=oe.x),(!re||oe.y>T)&&(T=oe.y)}const O=Math.min(P-m,T-v);let j=O/2;const V=new Lj([],Nj);if(O===0)return new A(m,v);for(let re=m;re<P;re+=O)for(let oe=v;oe<T;oe+=O)V.push(new $d(re+j,oe+j,j,o));let q=(function(re){let oe=0,ce=0,ye=0;const we=re[0];for(let Ve=0,Me=we.length,je=Me-1;Ve<Me;je=Ve++){const et=we[Ve],ut=we[je],Mt=et.x*ut.y-ut.x*et.y;ce+=(et.x+ut.x)*Mt,ye+=(et.y+ut.y)*Mt,oe+=3*Mt}return new $d(ce/oe,ye/oe,0,re)})(o),Y=V.length;for(;V.length;){const re=V.pop();(re.d>q.d||!q.d)&&(q=re,u&&console.log("found best %d after %d probes",Math.round(1e4*re.d)/1e4,Y)),re.max-q.d<=a||(j=re.h/2,V.push(new $d(re.p.x-j,re.p.y-j,j,o)),V.push(new $d(re.p.x+j,re.p.y-j,j,o)),V.push(new $d(re.p.x-j,re.p.y+j,j,o)),V.push(new $d(re.p.x+j,re.p.y+j,j,o)),Y+=4)}return u&&(console.log(`num probes: ${Y}`),console.log(`best distance: ${q.d}`)),q.p}function Nj(o,a){return a.max-o.max}function $d(o,a,u,m){this.p=new A(o,a),this.h=u,this.d=(function(v,P){let T=!1,I=1/0;for(let O=0;O<P.length;O++){const j=P[O];for(let V=0,q=j.length,Y=q-1;V<q;Y=V++){const re=j[V],oe=j[Y];re.y>v.y!=oe.y>v.y&&v.x<(oe.x-re.x)*(v.y-re.y)/(oe.y-re.y)+re.x&&(T=!T),I=Math.min(I,im(v,re,oe))}}return(T?1:-1)*Math.sqrt(I)})(this.p,m),this.max=this.d+this.h*Math.SQRT2}var Zi;h.aq=void 0,(Zi=h.aq||(h.aq={}))[Zi.center=1]="center",Zi[Zi.left=2]="left",Zi[Zi.right=3]="right",Zi[Zi.top=4]="top",Zi[Zi.bottom=5]="bottom",Zi[Zi["top-left"]=6]="top-left",Zi[Zi["top-right"]=7]="top-right",Zi[Zi["bottom-left"]=8]="bottom-left",Zi[Zi["bottom-right"]=9]="bottom-right";const Kc=7,O0=Number.POSITIVE_INFINITY;function XT(o,a){return a[1]!==O0?(function(u,m,v){let P=0,T=0;switch(m=Math.abs(m),v=Math.abs(v),u){case"top-right":case"top-left":case"top":T=v-Kc;break;case"bottom-right":case"bottom-left":case"bottom":T=-v+Kc}switch(u){case"top-right":case"bottom-right":case"right":P=-m;break;case"top-left":case"bottom-left":case"left":P=m}return[P,T]})(o,a[0],a[1]):(function(u,m){let v=0,P=0;m<0&&(m=0);const T=m/Math.SQRT2;switch(u){case"top-right":case"top-left":P=T-Kc;break;case"bottom-right":case"bottom-left":P=-T+Kc;break;case"bottom":P=-m+Kc;break;case"top":P=m-Kc}switch(u){case"top-right":case"bottom-right":v=-T;break;case"top-left":case"bottom-left":v=T;break;case"left":v=m;break;case"right":v=-m}return[v,P]})(o,a[0])}function YT(o,a,u){var m;const v=o.layout,P=(m=v.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(a,{},u);if(P){const I=P.values,O=[];for(let j=0;j<I.length;j+=2){const V=O[j]=I[j],q=I[j+1].map((Y=>Y*gn));V.startsWith("top")?q[1]-=Kc:V.startsWith("bottom")&&(q[1]+=Kc),O[j+1]=q}return new ra(O)}const T=v.get("text-variable-anchor");if(T){let I;I=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(a,{},u)*gn,O0]:v.get("text-offset").evaluate(a,{},u).map((j=>j*gn));const O=[];for(const j of T)O.push(j,XT(j,I));return new ra(O)}return null}function D0(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Fj(o,a,u,m,v,P,T,I,O,j,V){let q=P.textMaxSize.evaluate(a,{});q===void 0&&(q=T);const Y=o.layers[0].layout,re=Y.get("icon-offset").evaluate(a,{},V),oe=QT(u.horizontal),ce=T/24,ye=o.tilePixelRatio*ce,we=o.tilePixelRatio*q/24,Ve=o.tilePixelRatio*I,Me=o.tilePixelRatio*Y.get("symbol-spacing"),je=Y.get("text-padding")*o.tilePixelRatio,et=(function(it,Vt,Nt,or=1){const sn=it.get("icon-padding").evaluate(Vt,{},Nt),tn=sn&&sn.values;return[tn[0]*or,tn[1]*or,tn[2]*or,tn[3]*or]})(Y,a,V,o.tilePixelRatio),ut=Y.get("text-max-angle")/180*Math.PI,Mt=Y.get("text-rotation-alignment")!=="viewport"&&Y.get("symbol-placement")!=="point",Yt=Y.get("icon-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",Ct=Y.get("symbol-placement"),Tt=Me/2,Ft=Y.get("icon-text-fit");let zt;m&&Ft!=="none"&&(o.allowVerticalPlacement&&u.vertical&&(zt=tu(m,u.vertical,Ft,Y.get("icon-text-fit-padding"),re,ce)),oe&&(m=tu(m,oe,Ft,Y.get("icon-text-fit-padding"),re,ce)));const Dt=(it,Vt)=>{Vt.x<0||Vt.x>=kn||Vt.y<0||Vt.y>=kn||(function(Nt,or,sn,tn,mi,Ts,Ki,gi,Oa,Da,Ra,jn,yi,da,Xi,za,Yi,Ko,lo,jr,hn,yn,wo,On,Vd){const nu=Nt.addToLineVertexArray(or,sn);let iu,As,Xo,Mi,Hu=0,Em=0,nA=0,iA=0,$0=-1,V0=-1;const Zu={};let aA=Ul("");if(Nt.allowVerticalPlacement&&tn.vertical){const pa=gi.layout.get("text-rotate").evaluate(hn,{},On)+90;Xo=new Wy(Oa,or,Da,Ra,jn,tn.vertical,yi,da,Xi,pa),Ki&&(Mi=new Wy(Oa,or,Da,Ra,jn,Ki,Yi,Ko,Xi,pa))}if(mi){const pa=gi.layout.get("icon-rotate").evaluate(hn,{}),Yo=gi.layout.get("icon-text-fit")!=="none",gf=ZT(mi,pa,wo,Yo),ul=Ki?ZT(Ki,pa,wo,Yo):void 0;As=new Wy(Oa,or,Da,Ra,jn,mi,Yi,Ko,!1,pa),Hu=4*gf.length;const yf=Nt.iconSizeData;let au=null;yf.kind==="source"?(au=[bo*gi.layout.get("icon-size").evaluate(hn,{})],au[0]>Ps&&Fe(`${Nt.layerIds[0]}: Value for "icon-size" is >= ${ru}. Reduce your "icon-size".`)):yf.kind==="composite"&&(au=[bo*yn.compositeIconSizes[0].evaluate(hn,{},On),bo*yn.compositeIconSizes[1].evaluate(hn,{},On)],(au[0]>Ps||au[1]>Ps)&&Fe(`${Nt.layerIds[0]}: Value for "icon-size" is >= ${ru}. Reduce your "icon-size".`)),Nt.addSymbols(Nt.icon,gf,au,jr,lo,hn,h.ah.none,or,nu.lineStartIndex,nu.lineLength,-1,On),$0=Nt.icon.placedSymbolArray.length-1,ul&&(Em=4*ul.length,Nt.addSymbols(Nt.icon,ul,au,jr,lo,hn,h.ah.vertical,or,nu.lineStartIndex,nu.lineLength,-1,On),V0=Nt.icon.placedSymbolArray.length-1)}const oA=Object.keys(tn.horizontal);for(const pa of oA){const Yo=tn.horizontal[pa];if(!iu){aA=Ul(Yo.text);const ul=gi.layout.get("text-rotate").evaluate(hn,{},On);iu=new Wy(Oa,or,Da,Ra,jn,Yo,yi,da,Xi,ul)}const gf=Yo.positionedLines.length===1;if(nA+=JT(Nt,or,Yo,Ts,gi,Xi,hn,za,nu,tn.vertical?h.ah.horizontal:h.ah.horizontalOnly,gf?oA:[pa],Zu,$0,yn,On),gf)break}tn.vertical&&(iA+=JT(Nt,or,tn.vertical,Ts,gi,Xi,hn,za,nu,h.ah.vertical,["vertical"],Zu,V0,yn,On));const Uj=iu?iu.boxStartIndex:Nt.collisionBoxArray.length,qj=iu?iu.boxEndIndex:Nt.collisionBoxArray.length,Wj=Xo?Xo.boxStartIndex:Nt.collisionBoxArray.length,Gj=Xo?Xo.boxEndIndex:Nt.collisionBoxArray.length,Hj=As?As.boxStartIndex:Nt.collisionBoxArray.length,Zj=As?As.boxEndIndex:Nt.collisionBoxArray.length,Kj=Mi?Mi.boxStartIndex:Nt.collisionBoxArray.length,Xj=Mi?Mi.boxEndIndex:Nt.collisionBoxArray.length;let ll=-1;const Hy=(pa,Yo)=>pa&&pa.circleDiameter?Math.max(pa.circleDiameter,Yo):Yo;ll=Hy(iu,ll),ll=Hy(Xo,ll),ll=Hy(As,ll),ll=Hy(Mi,ll);const sA=ll>-1?1:0;sA&&(ll*=Vd/gn),Nt.glyphOffsetArray.length>=Hc.MAX_GLYPHS&&Fe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),hn.sortKey!==void 0&&Nt.addToSortKeyRanges(Nt.symbolInstances.length,hn.sortKey);const Yj=YT(gi,hn,On),[Jj,Qj]=(function(pa,Yo){const gf=pa.length,ul=Yo==null?void 0:Yo.values;if((ul==null?void 0:ul.length)>0)for(let yf=0;yf<ul.length;yf+=2){const au=ul[yf+1];pa.emplaceBack(h.aq[ul[yf]],au[0],au[1])}return[gf,pa.length]})(Nt.textAnchorOffsets,Yj);Nt.symbolInstances.emplaceBack(or.x,or.y,Zu.right>=0?Zu.right:-1,Zu.center>=0?Zu.center:-1,Zu.left>=0?Zu.left:-1,Zu.vertical||-1,$0,V0,aA,Uj,qj,Wj,Gj,Hj,Zj,Kj,Xj,Da,nA,iA,Hu,Em,sA,0,yi,ll,Jj,Qj)})(o,Vt,it,u,m,v,zt,o.layers[0],o.collisionBoxArray,a.index,a.sourceLayerIndex,o.index,ye,[je,je,je,je],Mt,O,Ve,et,Yt,re,a,P,j,V,T)};if(Ct==="line")for(const it of nr(a.geometry,0,0,kn,kn)){const Vt=jj(it,Me,ut,u.vertical||oe,m,24,we,o.overscaling,kn);for(const Nt of Vt)oe&&$j(o,oe.text,Tt,Nt)||Dt(it,Nt)}else if(Ct==="line-center"){for(const it of a.geometry)if(it.length>1){const Vt=k0(it,ut,u.vertical||oe,m,24,we);Vt&&Dt(it,Vt)}}else if(a.type==="Polygon")for(const it of Al(a.geometry,0)){const Vt=Bj(it,16);Dt(it[0],new Xt(Vt.x,Vt.y,0))}else if(a.type==="LineString")for(const it of a.geometry)Dt(it,new Xt(it[0].x,it[0].y,0));else if(a.type==="Point")for(const it of a.geometry)for(const Vt of it)Dt([Vt],new Xt(Vt.x,Vt.y,0))}function JT(o,a,u,m,v,P,T,I,O,j,V,q,Y,re,oe){const ce=(function(Ve,Me,je,et,ut,Mt,Yt,Ct){const Tt=et.layout.get("text-rotate").evaluate(Mt,{})*Math.PI/180,Ft=[];for(const zt of Me.positionedLines)for(const Dt of zt.positionedGlyphs){if(!Dt.rect)continue;const it=Dt.rect||{};let Vt=Dd+1,Nt=!0,or=1,sn=0;const tn=(ut||Ct)&&Dt.vertical,mi=Dt.metrics.advance*Dt.scale/2;if(Ct&&Me.verticalizable&&(sn=zt.lineOffset/2-(Dt.imageName?-(gn-Dt.metrics.width*Dt.scale)/2:(Dt.scale-1)*gn)),Dt.imageName){const jr=Yt[Dt.imageName];Nt=jr.sdf,or=jr.pixelRatio,Vt=fa/or}const Ts=ut?[Dt.x+mi,Dt.y]:[0,0];let Ki=ut?[0,0]:[Dt.x+mi+je[0],Dt.y+je[1]-sn],gi=[0,0];tn&&(gi=Ki,Ki=[0,0]);const Oa=Dt.metrics.isDoubleResolution?2:1,Da=(Dt.metrics.left-Vt)*Dt.scale-mi+Ki[0],Ra=(-Dt.metrics.top-Vt)*Dt.scale+Ki[1],jn=Da+it.w/Oa*Dt.scale/or,yi=Ra+it.h/Oa*Dt.scale/or,da=new A(Da,Ra),Xi=new A(jn,Ra),za=new A(Da,yi),Yi=new A(jn,yi);if(tn){const jr=new A(-mi,mi-Ho),hn=-Math.PI/2,yn=gn/2-mi,wo=new A(5-Ho-yn,-(Dt.imageName?yn:0)),On=new A(...gi);da._rotateAround(hn,jr)._add(wo)._add(On),Xi._rotateAround(hn,jr)._add(wo)._add(On),za._rotateAround(hn,jr)._add(wo)._add(On),Yi._rotateAround(hn,jr)._add(wo)._add(On)}if(Tt){const jr=Math.sin(Tt),hn=Math.cos(Tt),yn=[hn,-jr,jr,hn];da._matMult(yn),Xi._matMult(yn),za._matMult(yn),Yi._matMult(yn)}const Ko=new A(0,0),lo=new A(0,0);Ft.push({tl:da,tr:Xi,bl:za,br:Yi,tex:it,writingMode:Me.writingMode,glyphOffset:Ts,sectionIndex:Dt.sectionIndex,isSDF:Nt,pixelOffsetTL:Ko,pixelOffsetBR:lo,minFontScaleX:0,minFontScaleY:0})}return Ft})(0,u,I,v,P,T,m,o.allowVerticalPlacement),ye=o.textSizeData;let we=null;ye.kind==="source"?(we=[bo*v.layout.get("text-size").evaluate(T,{})],we[0]>Ps&&Fe(`${o.layerIds[0]}: Value for "text-size" is >= ${ru}. Reduce your "text-size".`)):ye.kind==="composite"&&(we=[bo*re.compositeTextSizes[0].evaluate(T,{},oe),bo*re.compositeTextSizes[1].evaluate(T,{},oe)],(we[0]>Ps||we[1]>Ps)&&Fe(`${o.layerIds[0]}: Value for "text-size" is >= ${ru}. Reduce your "text-size".`)),o.addSymbols(o.text,ce,we,I,P,T,j,a,O.lineStartIndex,O.lineLength,Y,oe);for(const Ve of V)q[Ve]=o.text.placedSymbolArray.length-1;return 4*ce.length}function QT(o){for(const a in o)return o[a];return null}function $j(o,a,u,m){const v=o.compareText;if(a in v){const P=v[a];for(let T=P.length-1;T>=0;T--)if(m.dist(P[T])<u)return!0}else v[a]=[];return v[a].push(m),!1}const eA=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class R0{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,m]=new Uint8Array(a,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=m>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const P=eA[15&m];if(!P)throw new Error("Unrecognized array type.");const[T]=new Uint16Array(a,2,1),[I]=new Uint32Array(a,4,1);return new R0(I,T,P,a)}constructor(a,u=64,m=Float64Array,v){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=m,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;const P=eA.indexOf(this.ArrayType),T=2*a*this.ArrayType.BYTES_PER_ELEMENT,I=a*this.IndexArrayType.BYTES_PER_ELEMENT,O=(8-I%8)%8;if(P<0)throw new Error(`Unexpected typed array class: ${m}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+I+O,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+T+I+O),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+I+O,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+P]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=a)}add(a,u){const m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=a,this.coords[this._pos++]=u,m}finish(){const a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return z0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,u,m,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:P,coords:T,nodeSize:I}=this,O=[0,P.length-1,0],j=[];for(;O.length;){const V=O.pop()||0,q=O.pop()||0,Y=O.pop()||0;if(q-Y<=I){for(let ye=Y;ye<=q;ye++){const we=T[2*ye],Ve=T[2*ye+1];we>=a&&we<=m&&Ve>=u&&Ve<=v&&j.push(P[ye])}continue}const re=Y+q>>1,oe=T[2*re],ce=T[2*re+1];oe>=a&&oe<=m&&ce>=u&&ce<=v&&j.push(P[re]),(V===0?a<=oe:u<=ce)&&(O.push(Y),O.push(re-1),O.push(1-V)),(V===0?m>=oe:v>=ce)&&(O.push(re+1),O.push(q),O.push(1-V))}return j}within(a,u,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:P,nodeSize:T}=this,I=[0,v.length-1,0],O=[],j=m*m;for(;I.length;){const V=I.pop()||0,q=I.pop()||0,Y=I.pop()||0;if(q-Y<=T){for(let ye=Y;ye<=q;ye++)rA(P[2*ye],P[2*ye+1],a,u)<=j&&O.push(v[ye]);continue}const re=Y+q>>1,oe=P[2*re],ce=P[2*re+1];rA(oe,ce,a,u)<=j&&O.push(v[re]),(V===0?a-m<=oe:u-m<=ce)&&(I.push(Y),I.push(re-1),I.push(1-V)),(V===0?a+m>=oe:u+m>=ce)&&(I.push(re+1),I.push(q),I.push(1-V))}return O}}function z0(o,a,u,m,v,P){if(v-m<=u)return;const T=m+v>>1;tA(o,a,T,m,v,P),z0(o,a,u,m,T-1,1-P),z0(o,a,u,T+1,v,1-P)}function tA(o,a,u,m,v,P){for(;v>m;){if(v-m>600){const j=v-m+1,V=u-m+1,q=Math.log(j),Y=.5*Math.exp(2*q/3),re=.5*Math.sqrt(q*Y*(j-Y)/j)*(V-j/2<0?-1:1);tA(o,a,u,Math.max(m,Math.floor(u-V*Y/j+re)),Math.min(v,Math.floor(u+(j-V)*Y/j+re)),P)}const T=a[2*u+P];let I=m,O=v;for(Tm(o,a,m,u),a[2*v+P]>T&&Tm(o,a,m,v);I<O;){for(Tm(o,a,I,O),I++,O--;a[2*I+P]<T;)I++;for(;a[2*O+P]>T;)O--}a[2*m+P]===T?Tm(o,a,m,O):(O++,Tm(o,a,O,v)),O<=u&&(m=O+1),u<=O&&(v=O-1)}}function Tm(o,a,u,m){j0(o,u,m),j0(a,2*u,2*m),j0(a,2*u+1,2*m+1)}function j0(o,a,u){const m=o[a];o[a]=o[u],o[u]=m}function rA(o,a,u,m){const v=o-u,P=a-m;return v*v+P*P}var L0;h.bg=void 0,(L0=h.bg||(h.bg={})).create="create",L0.load="load",L0.fullLoad="fullLoad";let Gy=null,Am=[];const B0=1e3/60,N0="loadTime",F0="fullLoadTime",Vj={mark(o){performance.mark(o)},frame(o){const a=o;Gy!=null&&Am.push(a-Gy),Gy=a},clearMetrics(){Gy=null,Am=[],performance.clearMeasures(N0),performance.clearMeasures(F0);for(const o in h.bg)performance.clearMarks(h.bg[o])},getPerformanceMetrics(){performance.measure(N0,h.bg.create,h.bg.load),performance.measure(F0,h.bg.create,h.bg.fullLoad);const o=performance.getEntriesByName(N0)[0].duration,a=performance.getEntriesByName(F0)[0].duration,u=Am.length,m=1/(Am.reduce(((P,T)=>P+T),0)/u/1e3),v=Am.filter((P=>P>B0)).reduce(((P,T)=>P+(T-B0)/B0),0);return{loadTime:o,fullLoadTime:a,fps:m,percentDroppedFrames:v/(u+v)*100,totalFrames:u}}};h.$=class extends W{},h.A=Nc,h.B=Rh,h.C=function(o){if(rt==null){const a=o.navigator?o.navigator.userAgent:null;rt=!!o.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return rt},h.D=kt,h.E=Yr,h.F=class{constructor(o,a){this.target=o,this.mapId=a,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new c((()=>this.process())),this.subscription=(function(u,m,v,P){return u.addEventListener(m,v,!1),{unsubscribe:()=>{u.removeEventListener(m,v,!1)}}})(this.target,"message",(u=>this.receive(u))),this.globalScope=Xe(self)?o:window}registerMessageHandler(o,a){this.messageHandlers[o]=a}sendAsync(o,a){return new Promise(((u,m)=>{const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[v]={resolve:u,reject:m},a&&a.signal.addEventListener("abort",(()=>{delete this.resolveRejects[v];const I={id:v,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(I)}),{once:!0});const P=[],T=Object.assign(Object.assign({},o),{id:v,sourceMapId:this.mapId,origin:location.origin,data:Ti(o.data,P)});this.target.postMessage(T,{transfer:P})}))}receive(o){const a=o.data,u=a.id;if(!(a.origin!=="file://"&&location.origin!=="file://"&&a.origin!=="resource://android"&&location.origin!=="resource://android"&&a.origin!==location.origin||a.targetMapId&&this.mapId!==a.targetMapId)){if(a.type==="<cancel>"){delete this.tasks[u];const m=this.abortControllers[u];return delete this.abortControllers[u],void(m&&m.abort())}if(Xe(self)||a.mustQueue)return this.tasks[u]=a,this.taskQueue.push(u),void this.invoker.trigger();this.processTask(u,a)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),a=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),a&&this.processTask(o,a)}processTask(o,a){return l(this,void 0,void 0,(function*(){if(a.type==="<response>"){const v=this.resolveRejects[o];return delete this.resolveRejects[o],v?void(a.error?v.reject(yo(a.error)):v.resolve(yo(a.data))):void 0}if(!this.messageHandlers[a.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${a.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const u=yo(a.data),m=new AbortController;this.abortControllers[o]=m;try{const v=yield this.messageHandlers[a.type](a.sourceMapId,u,m);this.completeTask(o,null,v)}catch(v){this.completeTask(o,v)}}))}completeTask(o,a,u){const m=[];delete this.abortControllers[o];const v={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:a?Ti(a):null,data:Ti(u,m)};this.target.postMessage(v,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},h.G=rr,h.H=function(){var o=new Nc(16);return Nc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},h.I=xm,h.J=function(o,a,u){var m,v,P,T,I,O,j,V,q,Y,re,oe,ce=u[0],ye=u[1],we=u[2];return a===o?(o[12]=a[0]*ce+a[4]*ye+a[8]*we+a[12],o[13]=a[1]*ce+a[5]*ye+a[9]*we+a[13],o[14]=a[2]*ce+a[6]*ye+a[10]*we+a[14],o[15]=a[3]*ce+a[7]*ye+a[11]*we+a[15]):(v=a[1],P=a[2],T=a[3],I=a[4],O=a[5],j=a[6],V=a[7],q=a[8],Y=a[9],re=a[10],oe=a[11],o[0]=m=a[0],o[1]=v,o[2]=P,o[3]=T,o[4]=I,o[5]=O,o[6]=j,o[7]=V,o[8]=q,o[9]=Y,o[10]=re,o[11]=oe,o[12]=m*ce+I*ye+q*we+a[12],o[13]=v*ce+O*ye+Y*we+a[13],o[14]=P*ce+j*ye+re*we+a[14],o[15]=T*ce+V*ye+oe*we+a[15]),o},h.K=function(o,a,u){var m=u[0],v=u[1],P=u[2];return o[0]=a[0]*m,o[1]=a[1]*m,o[2]=a[2]*m,o[3]=a[3]*m,o[4]=a[4]*v,o[5]=a[5]*v,o[6]=a[6]*v,o[7]=a[7]*v,o[8]=a[8]*P,o[9]=a[9]*P,o[10]=a[10]*P,o[11]=a[11]*P,o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15],o},h.L=sm,h.M=function(o,a){const u={};for(let m=0;m<a.length;m++){const v=a[m];v in o&&(u[v]=o[v])}return u},h.N=x,h.O=F,h.P=A,h.Q=ae,h.R=pi,h.S=Et,h.T=ni,h.U=Z,h.V=J,h.W=tt,h.X=kn,h.Y=k,h.Z=Ye,h._=l,h.a=jt,h.a$=function(o,a){var u=o[0],m=o[1],v=o[2],P=o[3],T=o[4],I=o[5],O=o[6],j=o[7],V=o[8],q=o[9],Y=o[10],re=o[11],oe=o[12],ce=o[13],ye=o[14],we=o[15],Ve=a[0],Me=a[1],je=a[2],et=a[3],ut=a[4],Mt=a[5],Yt=a[6],Ct=a[7],Tt=a[8],Ft=a[9],zt=a[10],Dt=a[11],it=a[12],Vt=a[13],Nt=a[14],or=a[15];return Math.abs(u-Ve)<=qi*Math.max(1,Math.abs(u),Math.abs(Ve))&&Math.abs(m-Me)<=qi*Math.max(1,Math.abs(m),Math.abs(Me))&&Math.abs(v-je)<=qi*Math.max(1,Math.abs(v),Math.abs(je))&&Math.abs(P-et)<=qi*Math.max(1,Math.abs(P),Math.abs(et))&&Math.abs(T-ut)<=qi*Math.max(1,Math.abs(T),Math.abs(ut))&&Math.abs(I-Mt)<=qi*Math.max(1,Math.abs(I),Math.abs(Mt))&&Math.abs(O-Yt)<=qi*Math.max(1,Math.abs(O),Math.abs(Yt))&&Math.abs(j-Ct)<=qi*Math.max(1,Math.abs(j),Math.abs(Ct))&&Math.abs(V-Tt)<=qi*Math.max(1,Math.abs(V),Math.abs(Tt))&&Math.abs(q-Ft)<=qi*Math.max(1,Math.abs(q),Math.abs(Ft))&&Math.abs(Y-zt)<=qi*Math.max(1,Math.abs(Y),Math.abs(zt))&&Math.abs(re-Dt)<=qi*Math.max(1,Math.abs(re),Math.abs(Dt))&&Math.abs(oe-it)<=qi*Math.max(1,Math.abs(oe),Math.abs(it))&&Math.abs(ce-Vt)<=qi*Math.max(1,Math.abs(ce),Math.abs(Vt))&&Math.abs(ye-Nt)<=qi*Math.max(1,Math.abs(ye),Math.abs(Nt))&&Math.abs(we-or)<=qi*Math.max(1,Math.abs(we),Math.abs(or))},h.a0=xr,h.a1=mt,h.a2=pt,h.a3=o=>{const a=window.document.createElement("video");return a.muted=!0,new Promise((u=>{a.onloadstart=()=>{u(a)};for(const m of o){const v=window.document.createElement("source");Wt(m)||(a.crossOrigin="Anonymous"),v.src=m,a.appendChild(v)}}))},h.a4=function(){return fe++},h.a5=Pt,h.a6=Hc,h.a7=Eu,h.a8=Hl,h.a9=Ge,h.aA=function(o){if(o.type==="custom")return new Nd(o);switch(o.type){case"background":return new Bd(o);case"circle":return new _0(o);case"fill":return new b0(o);case"fill-extrusion":return new Ty(o);case"heatmap":return new x0(o);case"hillshade":return new cy(o);case"line":return new qc(o);case"raster":return new I0(o);case"symbol":return new Gu(o)}},h.aB=xe,h.aC=function(o,a){if(!o)return[{command:"setStyle",args:[a]}];let u=[];try{if(!vr(o.version,a.version))return[{command:"setStyle",args:[a]}];vr(o.center,a.center)||u.push({command:"setCenter",args:[a.center]}),vr(o.zoom,a.zoom)||u.push({command:"setZoom",args:[a.zoom]}),vr(o.bearing,a.bearing)||u.push({command:"setBearing",args:[a.bearing]}),vr(o.pitch,a.pitch)||u.push({command:"setPitch",args:[a.pitch]}),vr(o.sprite,a.sprite)||u.push({command:"setSprite",args:[a.sprite]}),vr(o.glyphs,a.glyphs)||u.push({command:"setGlyphs",args:[a.glyphs]}),vr(o.transition,a.transition)||u.push({command:"setTransition",args:[a.transition]}),vr(o.light,a.light)||u.push({command:"setLight",args:[a.light]}),vr(o.terrain,a.terrain)||u.push({command:"setTerrain",args:[a.terrain]}),vr(o.sky,a.sky)||u.push({command:"setSky",args:[a.sky]}),vr(o.projection,a.projection)||u.push({command:"setProjection",args:[a.projection]});const m={},v=[];(function(T,I,O,j){let V;for(V in I=I||{},T=T||{})Object.prototype.hasOwnProperty.call(T,V)&&(Object.prototype.hasOwnProperty.call(I,V)||Hn(V,O,j));for(V in I)Object.prototype.hasOwnProperty.call(I,V)&&(Object.prototype.hasOwnProperty.call(T,V)?vr(T[V],I[V])||(T[V].type==="geojson"&&I[V].type==="geojson"&&co(T,I,V)?Rr(O,{command:"setGeoJSONSourceData",args:[V,I[V].data]}):Ri(V,I,O,j)):Gn(V,I,O))})(o.sources,a.sources,v,m);const P=[];o.layers&&o.layers.forEach((T=>{"source"in T&&m[T.source]?u.push({command:"removeLayer",args:[T.id]}):P.push(T)})),u=u.concat(v),(function(T,I,O){I=I||[];const j=(T=T||[]).map(xl),V=I.map(xl),q=T.reduce(Ns,{}),Y=I.reduce(Ns,{}),re=j.slice(),oe=Object.create(null);let ce,ye,we,Ve,Me;for(let je=0,et=0;je<j.length;je++)ce=j[je],Object.prototype.hasOwnProperty.call(Y,ce)?et++:(Rr(O,{command:"removeLayer",args:[ce]}),re.splice(re.indexOf(ce,et),1));for(let je=0,et=0;je<V.length;je++)ce=V[V.length-1-je],re[re.length-1-je]!==ce&&(Object.prototype.hasOwnProperty.call(q,ce)?(Rr(O,{command:"removeLayer",args:[ce]}),re.splice(re.lastIndexOf(ce,re.length-et),1)):et++,Ve=re[re.length-je],Rr(O,{command:"addLayer",args:[Y[ce],Ve]}),re.splice(re.length-je,0,ce),oe[ce]=!0);for(let je=0;je<V.length;je++)if(ce=V[je],ye=q[ce],we=Y[ce],!oe[ce]&&!vr(ye,we))if(vr(ye.source,we.source)&&vr(ye["source-layer"],we["source-layer"])&&vr(ye.type,we.type)){for(Me in ci(ye.layout,we.layout,O,ce,null,"setLayoutProperty"),ci(ye.paint,we.paint,O,ce,null,"setPaintProperty"),vr(ye.filter,we.filter)||Rr(O,{command:"setFilter",args:[ce,we.filter]}),vr(ye.minzoom,we.minzoom)&&vr(ye.maxzoom,we.maxzoom)||Rr(O,{command:"setLayerZoomRange",args:[ce,we.minzoom,we.maxzoom]}),ye)Object.prototype.hasOwnProperty.call(ye,Me)&&Me!=="layout"&&Me!=="paint"&&Me!=="filter"&&Me!=="metadata"&&Me!=="minzoom"&&Me!=="maxzoom"&&(Me.indexOf("paint.")===0?ci(ye[Me],we[Me],O,ce,Me.slice(6),"setPaintProperty"):vr(ye[Me],we[Me])||Rr(O,{command:"setLayerProperty",args:[ce,Me,we[Me]]}));for(Me in we)Object.prototype.hasOwnProperty.call(we,Me)&&!Object.prototype.hasOwnProperty.call(ye,Me)&&Me!=="layout"&&Me!=="paint"&&Me!=="filter"&&Me!=="metadata"&&Me!=="minzoom"&&Me!=="maxzoom"&&(Me.indexOf("paint.")===0?ci(ye[Me],we[Me],O,ce,Me.slice(6),"setPaintProperty"):vr(ye[Me],we[Me])||Rr(O,{command:"setLayerProperty",args:[ce,Me,we[Me]]}))}else Rr(O,{command:"removeLayer",args:[ce]}),Ve=re[re.lastIndexOf(ce)+1],Rr(O,{command:"addLayer",args:[we,Ve]})})(P,a.layers,u)}catch(m){console.warn("Unable to compute style diff:",m),u=[{command:"setStyle",args:[a]}]}return u},h.aD=function(o){const a=[],u=o.id;return u===void 0&&a.push({message:`layers.${u}: missing required property "id"`}),o.render===void 0&&a.push({message:`layers.${u}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&a.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),a},h.aE=function o(a,u){if(Array.isArray(a)){if(!Array.isArray(u)||a.length!==u.length)return!1;for(let m=0;m<a.length;m++)if(!o(a[m],u[m]))return!1;return!0}if(typeof a=="object"&&a!==null&&u!==null){if(typeof u!="object"||Object.keys(a).length!==Object.keys(u).length)return!1;for(const m in a)if(!o(a[m],u[m]))return!1;return!0}return a===u},h.aF=Se,h.aG=Be,h.aH=class extends xn{constructor(o,a){super(o,a),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},h.aI=$n,h.aJ=class extends xn{constructor(o,a){super(o,a),this.current=Fh}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let a=1;a<16;a++)if(o[a]!==this.current[a]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},h.aK=Nh,h.aL=Lc,h.aM=ar,h.aN=class extends xn{constructor(o,a){super(o,a),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},h.aO=class extends xn{constructor(o,a){super(o,a),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},h.aP=function(o,a,u,m,v,P,T){var I=1/(a-u),O=1/(m-v),j=1/(P-T);return o[0]=-2*I,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*O,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*j,o[11]=0,o[12]=(a+u)*I,o[13]=(v+m)*O,o[14]=(T+P)*j,o[15]=1,o},h.aQ=dd,h.aR=class extends ke{},h.aS=tf,h.aT=class extends Ue{},h.aU=Gh,h.aV=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},h.aW=_d,h.aX=Pn,h.aY=Aa,h.aZ=class extends Rt{},h.a_=function(o,a){return o[0]===a[0]&&o[1]===a[1]&&o[2]===a[2]&&o[3]===a[3]&&o[4]===a[4]&&o[5]===a[5]&&o[6]===a[6]&&o[7]===a[7]&&o[8]===a[8]&&o[9]===a[9]&&o[10]===a[10]&&o[11]===a[11]&&o[12]===a[12]&&o[13]===a[13]&&o[14]===a[14]&&o[15]===a[15]},h.aa=function(o){const a={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((u,m,v,P)=>{const T=v||P;return a[m]=!T||T.toLowerCase(),""})),a["max-age"]){const u=parseInt(a["max-age"],10);isNaN(u)?delete a["max-age"]:a["max-age"]=u}return a},h.ab=function(o,a){const u=[];for(const m in o)m in a||u.push(m);return u},h.ac=H,h.ad=function(o,a,u){var m=Math.sin(u),v=Math.cos(u),P=a[0],T=a[1],I=a[2],O=a[3],j=a[4],V=a[5],q=a[6],Y=a[7];return a!==o&&(o[8]=a[8],o[9]=a[9],o[10]=a[10],o[11]=a[11],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15]),o[0]=P*v+j*m,o[1]=T*v+V*m,o[2]=I*v+q*m,o[3]=O*v+Y*m,o[4]=j*v-P*m,o[5]=V*v-T*m,o[6]=q*v-I*m,o[7]=Y*v-O*m,o},h.ae=function(o){var a=new Nc(16);return a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],a[4]=o[4],a[5]=o[5],a[6]=o[6],a[7]=o[7],a[8]=o[8],a[9]=o[9],a[10]=o[10],a[11]=o[11],a[12]=o[12],a[13]=o[13],a[14]=o[14],a[15]=o[15],a},h.af=pd,h.ag=function(o,a){let u=0,m=0;if(o.kind==="constant")m=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:v,minZoom:P,maxZoom:T}=o,I=v?H(Kn.interpolationFactor(v,a,P,T),0,1):0;o.kind==="camera"?m=Mn.number(o.minSize,o.maxSize,I):u=I}return{uSizeT:u,uSize:m}},h.ai=function(o,{uSize:a,uSizeT:u},{lowerSize:m,upperSize:v}){return o.kind==="source"?m/bo:o.kind==="composite"?Mn.number(m/bo,v/bo,u):a},h.aj=Gc,h.ak=function(o,a,u,m){const v=a.y-o.y,P=a.x-o.x,T=m.y-u.y,I=m.x-u.x,O=T*P-I*v;if(O===0)return null;const j=(I*(o.y-u.y)-T*(o.x-u.x))/O;return new A(o.x+j*P,o.y+j*v)},h.al=nr,h.am=rm,h.an=fd,h.ao=function(o){let a=1/0,u=1/0,m=-1/0,v=-1/0;for(const P of o)a=Math.min(a,P.x),u=Math.min(u,P.y),m=Math.max(m,P.x),v=Math.max(v,P.y);return[a,u,m,v]},h.ap=gn,h.ar=ff,h.as=function(o,a){var u=a[0],m=a[1],v=a[2],P=a[3],T=a[4],I=a[5],O=a[6],j=a[7],V=a[8],q=a[9],Y=a[10],re=a[11],oe=a[12],ce=a[13],ye=a[14],we=a[15],Ve=u*I-m*T,Me=u*O-v*T,je=u*j-P*T,et=m*O-v*I,ut=m*j-P*I,Mt=v*j-P*O,Yt=V*ce-q*oe,Ct=V*ye-Y*oe,Tt=V*we-re*oe,Ft=q*ye-Y*ce,zt=q*we-re*ce,Dt=Y*we-re*ye,it=Ve*Dt-Me*zt+je*Ft+et*Tt-ut*Ct+Mt*Yt;return it?(o[0]=(I*Dt-O*zt+j*Ft)*(it=1/it),o[1]=(v*zt-m*Dt-P*Ft)*it,o[2]=(ce*Mt-ye*ut+we*et)*it,o[3]=(Y*ut-q*Mt-re*et)*it,o[4]=(O*Tt-T*Dt-j*Ct)*it,o[5]=(u*Dt-v*Tt+P*Ct)*it,o[6]=(ye*je-oe*Mt-we*Me)*it,o[7]=(V*Mt-Y*je+re*Me)*it,o[8]=(T*zt-I*Tt+j*Yt)*it,o[9]=(m*Tt-u*zt-P*Yt)*it,o[10]=(oe*ut-ce*je+we*Ve)*it,o[11]=(q*je-V*ut-re*Ve)*it,o[12]=(I*Ct-T*Ft-O*Yt)*it,o[13]=(u*Ft-m*Ct+v*Yt)*it,o[14]=(ce*Me-oe*et-ye*Ve)*it,o[15]=(V*et-q*Me+Y*Ve)*it,o):null},h.at=D0,h.au=cf,h.av=R0,h.aw=function(){const o={},a=qe.$version;for(const u in qe.$root){const m=qe.$root[u];if(m.required){let v=null;v=u==="version"?a:m.type==="array"?[]:{},v!=null&&(o[u]=v)}}return o},h.ax=Xa,h.ay=Jt,h.az=function(o){o=o.slice();const a=Object.create(null);for(let u=0;u<o.length;u++)a[o[u].id]=o[u];for(let u=0;u<o.length;u++)"ref"in o[u]&&(o[u]=xi(o[u],a[o[u].ref]));return o},h.b=Qe,h.b0=function(o,a){return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5],o[6]=a[6],o[7]=a[7],o[8]=a[8],o[9]=a[9],o[10]=a[10],o[11]=a[11],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15],o},h.b1=function(o,a,u){return o[0]=a[0]*u[0],o[1]=a[1]*u[1],o[2]=a[2]*u[2],o[3]=a[3]*u[3],o},h.b2=function(o,a){return o[0]*a[0]+o[1]*a[1]+o[2]*a[2]+o[3]*a[3]},h.b3=X,h.b4=ct,h.b5=be,h.b6=function(o,a,u,m,v){var P,T=1/Math.tan(a/2);return o[0]=T/u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=T,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,v!=null&&v!==1/0?(o[10]=(v+m)*(P=1/(m-v)),o[14]=2*v*m*P):(o[10]=-1,o[14]=-2*m),o},h.b7=function(o,a,u){var m=Math.sin(u),v=Math.cos(u),P=a[4],T=a[5],I=a[6],O=a[7],j=a[8],V=a[9],q=a[10],Y=a[11];return a!==o&&(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15]),o[4]=P*v+j*m,o[5]=T*v+V*m,o[6]=I*v+q*m,o[7]=O*v+Y*m,o[8]=j*v-P*m,o[9]=V*v-T*m,o[10]=q*v-I*m,o[11]=Y*v-O*m,o},h.b8=Q,h.b9=ie,h.bA=Ss,h.bB=function(o){return o.message===Ne},h.bC=Xs,h.bD=Gr,h.ba=function(o){return o*Math.PI/180},h.bb=function(o,a){const{x:u,y:m}=Ye.fromLngLat(a);return!(o<0||o>25||m<0||m>=1||u<0||u>=1)},h.bc=function(o,a){return o[0]=a[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=a[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},h.bd=class extends ${},h.be=p,h.bf=Vj,h.bh=cr,h.bi=function(o,a){jt.REGISTERED_PROTOCOLS[o]=a},h.bj=function(o){delete jt.REGISTERED_PROTOCOLS[o]},h.bk=function(o,a){const u={};for(let v=0;v<o.length;v++){const P=a&&a[o[v].id]||Mh(o[v]);a&&(a[o[v].id]=P);let T=u[P];T||(T=u[P]=[]),T.push(o[v])}const m=[];for(const v in u)m.push(u[v]);return m},h.bl=It,h.bm=zn,h.bn=De,h.bo=bm,h.bp=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=kn/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const a=o.bucket.layers[0],u=a.layout,m=a._unevaluatedLayout._values,v={layoutIconSize:m["icon-size"].possiblyEvaluate(new Sr(o.bucket.zoom+1),o.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new Sr(o.bucket.zoom+1),o.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new Sr(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:j,maxZoom:V}=o.bucket.textSizeData;v.compositeTextSizes=[m["text-size"].possiblyEvaluate(new Sr(j),o.canonical),m["text-size"].possiblyEvaluate(new Sr(V),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:j,maxZoom:V}=o.bucket.iconSizeData;v.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new Sr(j),o.canonical),m["icon-size"].possiblyEvaluate(new Sr(V),o.canonical)]}const P=u.get("text-line-height")*gn,T=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",I=u.get("text-keep-upright"),O=u.get("text-size");for(const j of o.bucket.features){const V=u.get("text-font").evaluate(j,{},o.canonical).join(","),q=O.evaluate(j,{},o.canonical),Y=v.layoutTextSize.evaluate(j,{},o.canonical),re=v.layoutIconSize.evaluate(j,{},o.canonical),oe={horizontal:{},vertical:void 0},ce=j.text;let ye,we=[0,0];if(ce){const je=ce.toString(),et=u.get("text-letter-spacing").evaluate(j,{},o.canonical)*gn,ut=Jp(je)?et:0,Mt=u.get("text-anchor").evaluate(j,{},o.canonical),Yt=YT(a,j,o.canonical);if(!Yt){const zt=u.get("text-radial-offset").evaluate(j,{},o.canonical);we=zt?XT(Mt,[zt*gn,O0]):u.get("text-offset").evaluate(j,{},o.canonical).map((Dt=>Dt*gn))}let Ct=T?"center":u.get("text-justify").evaluate(j,{},o.canonical);const Tt=u.get("symbol-placement")==="point"?u.get("text-max-width").evaluate(j,{},o.canonical)*gn:1/0,Ft=()=>{o.bucket.allowVerticalPlacement&&zh(je)&&(oe.vertical=uf(ce,o.glyphMap,o.glyphPositions,o.imagePositions,V,Tt,P,Mt,"left",ut,we,h.ah.vertical,!0,Y,q))};if(!T&&Yt){const zt=new Set;if(Ct==="auto")for(let it=0;it<Yt.values.length;it+=2)zt.add(D0(Yt.values[it]));else zt.add(Ct);let Dt=!1;for(const it of zt)if(!oe.horizontal[it])if(Dt)oe.horizontal[it]=oe.horizontal[0];else{const Vt=uf(ce,o.glyphMap,o.glyphPositions,o.imagePositions,V,Tt,P,"center",it,ut,we,h.ah.horizontal,!1,Y,q);Vt&&(oe.horizontal[it]=Vt,Dt=Vt.positionedLines.length===1)}Ft()}else{Ct==="auto"&&(Ct=D0(Mt));const zt=uf(ce,o.glyphMap,o.glyphPositions,o.imagePositions,V,Tt,P,Mt,Ct,ut,we,h.ah.horizontal,!1,Y,q);zt&&(oe.horizontal[Ct]=zt),Ft(),zh(je)&&T&&I&&(oe.vertical=uf(ce,o.glyphMap,o.glyphPositions,o.imagePositions,V,Tt,P,Mt,Ct,ut,we,h.ah.vertical,!1,Y,q))}}let Ve=!1;if(j.icon&&j.icon.name){const je=o.imageMap[j.icon.name];je&&(ye=eu(o.imagePositions[j.icon.name],u.get("icon-offset").evaluate(j,{},o.canonical),u.get("icon-anchor").evaluate(j,{},o.canonical)),Ve=!!je.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Ve:o.bucket.sdfIcons!==Ve&&Fe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(je.pixelRatio!==o.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Me=QT(oe.horizontal)||oe.vertical;o.bucket.iconsInText=!!Me&&Me.iconsInText,(Me||ye)&&Fj(o.bucket,j,oe,ye,o.imageMap,v,Y,re,we,Ve,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},h.bq=Ca,h.br=Sd,h.bs=oo,h.bt=Kl,h.bu=al,h.bv=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},h.bw=function(o,a,u,m,v){return l(this,void 0,void 0,(function*(){if(J())try{return yield tt(o,a,u,m,v)}catch{}return(function(P,T,I,O,j){const V=P.width,q=P.height;nt&&Ae||(nt=new OffscreenCanvas(V,q),Ae=nt.getContext("2d",{willReadFrequently:!0})),nt.width=V,nt.height=q,Ae.drawImage(P,0,0,V,q);const Y=Ae.getImageData(T,I,O,j);return Ae.clearRect(0,0,V,q),Y.data})(o,a,u,m,v)}))},h.bx=Ht,h.by=_,h.bz=S,h.c=yt,h.d=o=>l(void 0,void 0,void 0,(function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const a=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(a)}catch(u){throw new Error(`Could not load image because of ${u.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),h.e=se,h.f=o=>new Promise(((a,u)=>{const m=new Image;m.onload=()=>{a(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame((()=>{m.src=We}))},m.onerror=()=>u(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(o)],{type:"image/png"});m.src=o.byteLength?URL.createObjectURL(v):We})),h.g=Ut,h.h=(o,a)=>ht(se(o,{type:"json"}),a),h.i=Xe,h.j=mr,h.k=Ir,h.l=(o,a)=>ht(se(o,{type:"arrayBuffer"}),a),h.m=ht,h.n=function(o){return new al(o).readFields(Wu,[])},h.o=Nu,h.p=sf,h.q=w,h.r=Dh,h.s=Wt,h.t=Rc,h.u=No,h.v=qe,h.w=Fe,h.x=function([o,a,u]){return a+=90,a*=Math.PI/180,u*=Math.PI/180,{x:o*Math.cos(a)*Math.sin(u),y:o*Math.sin(a)*Math.sin(u),z:o*Math.cos(u)}},h.y=Mn,h.z=Sr})),s("worker",["./shared"],(function(h){class l{constructor(te){this.keyCache={},te&&this.replace(te)}replace(te){this._layerConfigs={},this._layers={},this.update(te,[])}update(te,ee){for(const me of te){this._layerConfigs[me.id]=me;const Ce=this._layers[me.id]=h.aA(me);Ce._featureFilter=h.a7(Ce.filter),this.keyCache[me.id]&&delete this.keyCache[me.id]}for(const me of ee)delete this.keyCache[me],delete this._layerConfigs[me],delete this._layers[me];this.familiesBySource={};const ue=h.bk(Object.values(this._layerConfigs),this.keyCache);for(const me of ue){const Ce=me.map((He=>this._layers[He.id])),Oe=Ce[0];if(Oe.visibility==="none")continue;const Le=Oe.source||"";let Te=this.familiesBySource[Le];Te||(Te=this.familiesBySource[Le]={});const Je=Oe.sourceLayer||"_geojsonTileLayer";let st=Te[Je];st||(st=Te[Je]=[]),st.push(Ce)}}}class _{constructor(te){const ee={},ue=[];for(const Le in te){const Te=te[Le],Je=ee[Le]={};for(const st in Te){const He=Te[+st];if(!He||He.bitmap.width===0||He.bitmap.height===0)continue;const vt={x:0,y:0,w:He.bitmap.width+2,h:He.bitmap.height+2};ue.push(vt),Je[st]={rect:vt,metrics:He.metrics}}}const{w:me,h:Ce}=h.p(ue),Oe=new h.o({width:me||1,height:Ce||1});for(const Le in te){const Te=te[Le];for(const Je in Te){const st=Te[+Je];if(!st||st.bitmap.width===0||st.bitmap.height===0)continue;const He=ee[Le][Je].rect;h.o.copy(st.bitmap,Oe,{x:0,y:0},{x:He.x+1,y:He.y+1},st.bitmap)}}this.image=Oe,this.positions=ee}}h.bl("GlyphAtlas",_);class S{constructor(te){this.tileID=new h.S(te.tileID.overscaledZ,te.tileID.wrap,te.tileID.canonical.z,te.tileID.canonical.x,te.tileID.canonical.y),this.uid=te.uid,this.zoom=te.zoom,this.pixelRatio=te.pixelRatio,this.tileSize=te.tileSize,this.source=te.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=te.showCollisionBoxes,this.collectResourceTiming=!!te.collectResourceTiming,this.returnDependencies=!!te.returnDependencies,this.promoteId=te.promoteId,this.inFlightDependencies=[]}parse(te,ee,ue,me){return h._(this,void 0,void 0,(function*(){this.status="parsing",this.data=te,this.collisionBoxArray=new h.a5;const Ce=new h.bm(Object.keys(te.layers).sort()),Oe=new h.bn(this.tileID,this.promoteId);Oe.bucketLayerIDs=[];const Le={},Te={featureIndex:Oe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ue},Je=ee.familiesBySource[this.source];for(const _r in Je){const Lr=te.layers[_r];if(!Lr)continue;Lr.version===1&&h.w(`Vector tile source "${this.source}" layer "${_r}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const nn=Ce.encode(_r),Nn=[];for(let Zn=0;Zn<Lr.length;Zn++){const wi=Lr.feature(Zn),bl=Oe.getId(wi,_r);Nn.push({feature:wi,id:bl,index:Zn,sourceLayerIndex:nn})}for(const Zn of Je[_r]){const wi=Zn[0];wi.source!==this.source&&h.w(`layer.source = ${wi.source} does not equal this.source = ${this.source}`),wi.minzoom&&this.zoom<Math.floor(wi.minzoom)||wi.maxzoom&&this.zoom>=wi.maxzoom||wi.visibility!=="none"&&(E(Zn,this.zoom,ue),(Le[wi.id]=wi.createBucket({index:Oe.bucketLayerIDs.length,layers:Zn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:nn,sourceID:this.source})).populate(Nn,Te,this.tileID.canonical),Oe.bucketLayerIDs.push(Zn.map((bl=>bl.id))))}}const st=h.aF(Te.glyphDependencies,(_r=>Object.keys(_r).map(Number)));this.inFlightDependencies.forEach((_r=>_r==null?void 0:_r.abort())),this.inFlightDependencies=[];let He=Promise.resolve({});if(Object.keys(st).length){const _r=new AbortController;this.inFlightDependencies.push(_r),He=me.sendAsync({type:"GG",data:{stacks:st,source:this.source,tileID:this.tileID,type:"glyphs"}},_r)}const vt=Object.keys(Te.iconDependencies);let Lt=Promise.resolve({});if(vt.length){const _r=new AbortController;this.inFlightDependencies.push(_r),Lt=me.sendAsync({type:"GI",data:{icons:vt,source:this.source,tileID:this.tileID,type:"icons"}},_r)}const Gt=Object.keys(Te.patternDependencies);let Ar=Promise.resolve({});if(Gt.length){const _r=new AbortController;this.inFlightDependencies.push(_r),Ar=me.sendAsync({type:"GI",data:{icons:Gt,source:this.source,tileID:this.tileID,type:"patterns"}},_r)}const[lr,Er,pr]=yield Promise.all([He,Lt,Ar]),En=new _(lr),pn=new h.bo(Er,pr);for(const _r in Le){const Lr=Le[_r];Lr instanceof h.a6?(E(Lr.layers,this.zoom,ue),h.bp({bucket:Lr,glyphMap:lr,glyphPositions:En.positions,imageMap:Er,imagePositions:pn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Lr.hasPattern&&(Lr instanceof h.bq||Lr instanceof h.br||Lr instanceof h.bs)&&(E(Lr.layers,this.zoom,ue),Lr.addFeatures(Te,this.tileID.canonical,pn.patternPositions))}return this.status="done",{buckets:Object.values(Le).filter((_r=>!_r.isEmpty())),featureIndex:Oe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:En.image,imageAtlas:pn,glyphMap:this.returnDependencies?lr:null,iconMap:this.returnDependencies?Er:null,glyphPositions:this.returnDependencies?En.positions:null}}))}}function E(ve,te,ee){const ue=new h.z(te);for(const me of ve)me.recalculate(ue,ee)}class A{constructor(te,ee,ue){this.actor=te,this.layerIndex=ee,this.availableImages=ue,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(te,ee){return h._(this,void 0,void 0,(function*(){const ue=yield h.l(te.request,ee);try{return{vectorTile:new h.bt.VectorTile(new h.bu(ue.data)),rawData:ue.data,cacheControl:ue.cacheControl,expires:ue.expires}}catch(me){const Ce=new Uint8Array(ue.data);let Oe=`Unable to parse the tile at ${te.request.url}, `;throw Oe+=Ce[0]===31&&Ce[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${me.message}`,new Error(Oe)}}))}loadTile(te){return h._(this,void 0,void 0,(function*(){const ee=te.uid,ue=!!(te&&te.request&&te.request.collectResourceTiming)&&new h.bv(te.request),me=new S(te);this.loading[ee]=me;const Ce=new AbortController;me.abort=Ce;try{const Oe=yield this.loadVectorTile(te,Ce);if(delete this.loading[ee],!Oe)return null;const Le=Oe.rawData,Te={};Oe.expires&&(Te.expires=Oe.expires),Oe.cacheControl&&(Te.cacheControl=Oe.cacheControl);const Je={};if(ue){const He=ue.finish();He&&(Je.resourceTiming=JSON.parse(JSON.stringify(He)))}me.vectorTile=Oe.vectorTile;const st=me.parse(Oe.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[ee]=me,this.fetching[ee]={rawTileData:Le,cacheControl:Te,resourceTiming:Je};try{const He=yield st;return h.e({rawTileData:Le.slice(0)},He,Te,Je)}finally{delete this.fetching[ee]}}catch(Oe){throw delete this.loading[ee],me.status="done",this.loaded[ee]=me,Oe}}))}reloadTile(te){return h._(this,void 0,void 0,(function*(){const ee=te.uid;if(!this.loaded||!this.loaded[ee])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ue=this.loaded[ee];if(ue.showCollisionBoxes=te.showCollisionBoxes,ue.status==="parsing"){const me=yield ue.parse(ue.vectorTile,this.layerIndex,this.availableImages,this.actor);let Ce;if(this.fetching[ee]){const{rawTileData:Oe,cacheControl:Le,resourceTiming:Te}=this.fetching[ee];delete this.fetching[ee],Ce=h.e({rawTileData:Oe.slice(0)},me,Le,Te)}else Ce=me;return Ce}if(ue.status==="done"&&ue.vectorTile)return ue.parse(ue.vectorTile,this.layerIndex,this.availableImages,this.actor)}))}abortTile(te){return h._(this,void 0,void 0,(function*(){const ee=this.loading,ue=te.uid;ee&&ee[ue]&&ee[ue].abort&&(ee[ue].abort.abort(),delete ee[ue])}))}removeTile(te){return h._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[te.uid]&&delete this.loaded[te.uid]}))}}class M{constructor(){this.loaded={}}loadTile(te){return h._(this,void 0,void 0,(function*(){const{uid:ee,encoding:ue,rawImageData:me,redFactor:Ce,greenFactor:Oe,blueFactor:Le,baseShift:Te}=te,Je=me.width+2,st=me.height+2,He=h.b(me)?new h.R({width:Je,height:st},yield h.bw(me,-1,-1,Je,st)):me,vt=new h.bx(ee,He,ue,Ce,Oe,Le,Te);return this.loaded=this.loaded||{},this.loaded[ee]=vt,vt}))}removeTile(te){const ee=this.loaded,ue=te.uid;ee&&ee[ue]&&delete ee[ue]}}function L(ve,te){if(ve.length!==0){U(ve[0],te);for(var ee=1;ee<ve.length;ee++)U(ve[ee],!te)}}function U(ve,te){for(var ee=0,ue=0,me=0,Ce=ve.length,Oe=Ce-1;me<Ce;Oe=me++){var Le=(ve[me][0]-ve[Oe][0])*(ve[Oe][1]+ve[me][1]),Te=ee+Le;ue+=Math.abs(ee)>=Math.abs(Le)?ee-Te+Le:Le-Te+ee,ee=Te}ee+ue>=0!=!!te&&ve.reverse()}var N=h.by((function ve(te,ee){var ue,me=te&&te.type;if(me==="FeatureCollection")for(ue=0;ue<te.features.length;ue++)ve(te.features[ue],ee);else if(me==="GeometryCollection")for(ue=0;ue<te.geometries.length;ue++)ve(te.geometries[ue],ee);else if(me==="Feature")ve(te.geometry,ee);else if(me==="Polygon")L(te.coordinates,ee);else if(me==="MultiPolygon")for(ue=0;ue<te.coordinates.length;ue++)L(te.coordinates[ue],ee);return te}));const B=h.bt.VectorTileFeature.prototype.toGeoJSON;var Z={exports:{}},J=h.bz,Q=h.bt.VectorTileFeature,ie=H;function H(ve,te){this.options=te||{},this.features=ve,this.length=ve.length}function X(ve,te){this.id=typeof ve.id=="number"?ve.id:void 0,this.type=ve.type,this.rawGeometry=ve.type===1?[ve.geometry]:ve.geometry,this.properties=ve.tags,this.extent=te||4096}H.prototype.feature=function(ve){return new X(this.features[ve],this.options.extent)},X.prototype.loadGeometry=function(){var ve=this.rawGeometry;this.geometry=[];for(var te=0;te<ve.length;te++){for(var ee=ve[te],ue=[],me=0;me<ee.length;me++)ue.push(new J(ee[me][0],ee[me][1]));this.geometry.push(ue)}return this.geometry},X.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ve=this.geometry,te=1/0,ee=-1/0,ue=1/0,me=-1/0,Ce=0;Ce<ve.length;Ce++)for(var Oe=ve[Ce],Le=0;Le<Oe.length;Le++){var Te=Oe[Le];te=Math.min(te,Te.x),ee=Math.max(ee,Te.x),ue=Math.min(ue,Te.y),me=Math.max(me,Te.y)}return[te,ue,ee,me]},X.prototype.toGeoJSON=Q.prototype.toGeoJSON;var se=h.bA,fe=ie;function Se(ve){var te=new se;return(function(ee,ue){for(var me in ee.layers)ue.writeMessage(3,Be,ee.layers[me])})(ve,te),te.finish()}function Be(ve,te){var ee;te.writeVarintField(15,ve.version||1),te.writeStringField(1,ve.name||""),te.writeVarintField(5,ve.extent||4096);var ue={keys:[],values:[],keycache:{},valuecache:{}};for(ee=0;ee<ve.length;ee++)ue.feature=ve.feature(ee),te.writeMessage(2,xe,ue);var me=ue.keys;for(ee=0;ee<me.length;ee++)te.writeStringField(3,me[ee]);var Ce=ue.values;for(ee=0;ee<Ce.length;ee++)te.writeMessage(4,rt,Ce[ee])}function xe(ve,te){var ee=ve.feature;ee.id!==void 0&&te.writeVarintField(1,ee.id),te.writeMessage(2,$e,ve),te.writeVarintField(3,ee.type),te.writeMessage(4,Xe,ee)}function $e(ve,te){var ee=ve.feature,ue=ve.keys,me=ve.values,Ce=ve.keycache,Oe=ve.valuecache;for(var Le in ee.properties){var Te=ee.properties[Le],Je=Ce[Le];if(Te!==null){Je===void 0&&(ue.push(Le),Ce[Le]=Je=ue.length-1),te.writeVarint(Je);var st=typeof Te;st!=="string"&&st!=="boolean"&&st!=="number"&&(Te=JSON.stringify(Te));var He=st+":"+Te,vt=Oe[He];vt===void 0&&(me.push(Te),Oe[He]=vt=me.length-1),te.writeVarint(vt)}}}function Fe(ve,te){return(te<<3)+(7&ve)}function Ke(ve){return ve<<1^ve>>31}function Xe(ve,te){for(var ee=ve.loadGeometry(),ue=ve.type,me=0,Ce=0,Oe=ee.length,Le=0;Le<Oe;Le++){var Te=ee[Le],Je=1;ue===1&&(Je=Te.length),te.writeVarint(Fe(1,Je));for(var st=ue===3?Te.length-1:Te.length,He=0;He<st;He++){He===1&&ue!==1&&te.writeVarint(Fe(2,st-1));var vt=Te[He].x-me,Lt=Te[He].y-Ce;te.writeVarint(Ke(vt)),te.writeVarint(Ke(Lt)),me+=vt,Ce+=Lt}ue===3&&te.writeVarint(Fe(7,1))}}function rt(ve,te){var ee=typeof ve;ee==="string"?te.writeStringField(1,ve):ee==="boolean"?te.writeBooleanField(7,ve):ee==="number"&&(ve%1!=0?te.writeDoubleField(3,ve):ve<0?te.writeSVarintField(6,ve):te.writeVarintField(5,ve))}Z.exports=Se,Z.exports.fromVectorTileJs=Se,Z.exports.fromGeojsonVt=function(ve,te){te=te||{};var ee={};for(var ue in ve)ee[ue]=new fe(ve[ue].features,te),ee[ue].name=ue,ee[ue].version=te.version,ee[ue].extent=te.extent;return Se({layers:ee})},Z.exports.GeoJSONWrapper=fe;var Qe=h.by(Z.exports);const We={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ve=>ve},tt=Math.fround||(nt=new Float32Array(1),ve=>(nt[0]=+ve,nt[0]));var nt;const Ae=3,Ne=5,yt=6;class jt{constructor(te){this.options=Object.assign(Object.create(We),te),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(te){const{log:ee,minZoom:ue,maxZoom:me}=this.options;ee&&console.time("total time");const Ce=`prepare ${te.length} points`;ee&&console.time(Ce),this.points=te;const Oe=[];for(let Te=0;Te<te.length;Te++){const Je=te[Te];if(!Je.geometry)continue;const[st,He]=Je.geometry.coordinates,vt=tt(cr(st)),Lt=tt(Jt(He));Oe.push(vt,Lt,1/0,Te,-1,1),this.options.reduce&&Oe.push(0)}let Le=this.trees[me+1]=this._createTree(Oe);ee&&console.timeEnd(Ce);for(let Te=me;Te>=ue;Te--){const Je=+Date.now();Le=this.trees[Te]=this._createTree(this._cluster(Le,Te)),ee&&console.log("z%d: %d clusters in %dms",Te,Le.numItems,+Date.now()-Je)}return ee&&console.timeEnd("total time"),this}getClusters(te,ee){let ue=((te[0]+180)%360+360)%360-180;const me=Math.max(-90,Math.min(90,te[1]));let Ce=te[2]===180?180:((te[2]+180)%360+360)%360-180;const Oe=Math.max(-90,Math.min(90,te[3]));if(te[2]-te[0]>=360)ue=-180,Ce=180;else if(ue>Ce){const He=this.getClusters([ue,me,180,Oe],ee),vt=this.getClusters([-180,me,Ce,Oe],ee);return He.concat(vt)}const Le=this.trees[this._limitZoom(ee)],Te=Le.range(cr(ue),Jt(Oe),cr(Ce),Jt(me)),Je=Le.data,st=[];for(const He of Te){const vt=this.stride*He;st.push(Je[vt+Ne]>1?Ut(Je,vt,this.clusterProps):this.points[Je[vt+Ae]])}return st}getChildren(te){const ee=this._getOriginId(te),ue=this._getOriginZoom(te),me="No cluster with the specified id.",Ce=this.trees[ue];if(!Ce)throw new Error(me);const Oe=Ce.data;if(ee*this.stride>=Oe.length)throw new Error(me);const Le=this.options.radius/(this.options.extent*Math.pow(2,ue-1)),Te=Ce.within(Oe[ee*this.stride],Oe[ee*this.stride+1],Le),Je=[];for(const st of Te){const He=st*this.stride;Oe[He+4]===te&&Je.push(Oe[He+Ne]>1?Ut(Oe,He,this.clusterProps):this.points[Oe[He+Ae]])}if(Je.length===0)throw new Error(me);return Je}getLeaves(te,ee,ue){const me=[];return this._appendLeaves(me,te,ee=ee||10,ue=ue||0,0),me}getTile(te,ee,ue){const me=this.trees[this._limitZoom(te)],Ce=Math.pow(2,te),{extent:Oe,radius:Le}=this.options,Te=Le/Oe,Je=(ue-Te)/Ce,st=(ue+1+Te)/Ce,He={features:[]};return this._addTileFeatures(me.range((ee-Te)/Ce,Je,(ee+1+Te)/Ce,st),me.data,ee,ue,Ce,He),ee===0&&this._addTileFeatures(me.range(1-Te/Ce,Je,1,st),me.data,Ce,ue,Ce,He),ee===Ce-1&&this._addTileFeatures(me.range(0,Je,Te/Ce,st),me.data,-1,ue,Ce,He),He.features.length?He:null}getClusterExpansionZoom(te){let ee=this._getOriginZoom(te)-1;for(;ee<=this.options.maxZoom;){const ue=this.getChildren(te);if(ee++,ue.length!==1)break;te=ue[0].properties.cluster_id}return ee}_appendLeaves(te,ee,ue,me,Ce){const Oe=this.getChildren(ee);for(const Le of Oe){const Te=Le.properties;if(Te&&Te.cluster?Ce+Te.point_count<=me?Ce+=Te.point_count:Ce=this._appendLeaves(te,Te.cluster_id,ue,me,Ce):Ce<me?Ce++:te.push(Le),te.length===ue)break}return Ce}_createTree(te){const ee=new h.av(te.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ue=0;ue<te.length;ue+=this.stride)ee.add(te[ue],te[ue+1]);return ee.finish(),ee.data=te,ee}_addTileFeatures(te,ee,ue,me,Ce,Oe){for(const Le of te){const Te=Le*this.stride,Je=ee[Te+Ne]>1;let st,He,vt;if(Je)st=rr(ee,Te,this.clusterProps),He=ee[Te],vt=ee[Te+1];else{const Ar=this.points[ee[Te+Ae]];st=Ar.properties;const[lr,Er]=Ar.geometry.coordinates;He=cr(lr),vt=Jt(Er)}const Lt={type:1,geometry:[[Math.round(this.options.extent*(He*Ce-ue)),Math.round(this.options.extent*(vt*Ce-me))]],tags:st};let Gt;Gt=Je||this.options.generateId?ee[Te+Ae]:this.points[ee[Te+Ae]].id,Gt!==void 0&&(Lt.id=Gt),Oe.features.push(Lt)}}_limitZoom(te){return Math.max(this.options.minZoom,Math.min(Math.floor(+te),this.options.maxZoom+1))}_cluster(te,ee){const{radius:ue,extent:me,reduce:Ce,minPoints:Oe}=this.options,Le=ue/(me*Math.pow(2,ee)),Te=te.data,Je=[],st=this.stride;for(let He=0;He<Te.length;He+=st){if(Te[He+2]<=ee)continue;Te[He+2]=ee;const vt=Te[He],Lt=Te[He+1],Gt=te.within(Te[He],Te[He+1],Le),Ar=Te[He+Ne];let lr=Ar;for(const Er of Gt){const pr=Er*st;Te[pr+2]>ee&&(lr+=Te[pr+Ne])}if(lr>Ar&&lr>=Oe){let Er,pr=vt*Ar,En=Lt*Ar,pn=-1;const _r=((He/st|0)<<5)+(ee+1)+this.points.length;for(const Lr of Gt){const nn=Lr*st;if(Te[nn+2]<=ee)continue;Te[nn+2]=ee;const Nn=Te[nn+Ne];pr+=Te[nn]*Nn,En+=Te[nn+1]*Nn,Te[nn+4]=_r,Ce&&(Er||(Er=this._map(Te,He,!0),pn=this.clusterProps.length,this.clusterProps.push(Er)),Ce(Er,this._map(Te,nn)))}Te[He+4]=_r,Je.push(pr/lr,En/lr,1/0,_r,-1,lr),Ce&&Je.push(pn)}else{for(let Er=0;Er<st;Er++)Je.push(Te[He+Er]);if(lr>1)for(const Er of Gt){const pr=Er*st;if(!(Te[pr+2]<=ee)){Te[pr+2]=ee;for(let En=0;En<st;En++)Je.push(Te[pr+En])}}}}return Je}_getOriginId(te){return te-this.points.length>>5}_getOriginZoom(te){return(te-this.points.length)%32}_map(te,ee,ue){if(te[ee+Ne]>1){const Oe=this.clusterProps[te[ee+yt]];return ue?Object.assign({},Oe):Oe}const me=this.points[te[ee+Ae]].properties,Ce=this.options.map(me);return ue&&Ce===me?Object.assign({},Ce):Ce}}function Ut(ve,te,ee){return{type:"Feature",id:ve[te+Ae],properties:rr(ve,te,ee),geometry:{type:"Point",coordinates:[(ue=ve[te],360*(ue-.5)),ht(ve[te+1])]}};var ue}function rr(ve,te,ee){const ue=ve[te+Ne],me=ue>=1e4?`${Math.round(ue/1e3)}k`:ue>=1e3?Math.round(ue/100)/10+"k":ue,Ce=ve[te+yt],Oe=Ce===-1?{}:Object.assign({},ee[Ce]);return Object.assign(Oe,{cluster:!0,cluster_id:ve[te+Ae],point_count:ue,point_count_abbreviated:me})}function cr(ve){return ve/360+.5}function Jt(ve){const te=Math.sin(ve*Math.PI/180),ee=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return ee<0?0:ee>1?1:ee}function ht(ve){const te=(180-360*ve)*Math.PI/180;return 360*Math.atan(Math.exp(te))/Math.PI-90}function Wt(ve,te,ee,ue){let me=ue;const Ce=te+(ee-te>>1);let Oe,Le=ee-te;const Te=ve[te],Je=ve[te+1],st=ve[ee],He=ve[ee+1];for(let vt=te+3;vt<ee;vt+=3){const Lt=sr(ve[vt],ve[vt+1],Te,Je,st,He);if(Lt>me)Oe=vt,me=Lt;else if(Lt===me){const Gt=Math.abs(vt-Ce);Gt<Le&&(Oe=vt,Le=Gt)}}me>ue&&(Oe-te>3&&Wt(ve,te,Oe,ue),ve[Oe+2]=me,ee-Oe>3&&Wt(ve,Oe,ee,ue))}function sr(ve,te,ee,ue,me,Ce){let Oe=me-ee,Le=Ce-ue;if(Oe!==0||Le!==0){const Te=((ve-ee)*Oe+(te-ue)*Le)/(Oe*Oe+Le*Le);Te>1?(ee=me,ue=Ce):Te>0&&(ee+=Oe*Te,ue+=Le*Te)}return Oe=ve-ee,Le=te-ue,Oe*Oe+Le*Le}function lt(ve,te,ee,ue){const me={id:ve??null,type:te,geometry:ee,tags:ue,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(te==="Point"||te==="MultiPoint"||te==="LineString")Ir(me,ee);else if(te==="Polygon")Ir(me,ee[0]);else if(te==="MultiLineString")for(const Ce of ee)Ir(me,Ce);else if(te==="MultiPolygon")for(const Ce of ee)Ir(me,Ce[0]);return me}function Ir(ve,te){for(let ee=0;ee<te.length;ee+=3)ve.minX=Math.min(ve.minX,te[ee]),ve.minY=Math.min(ve.minY,te[ee+1]),ve.maxX=Math.max(ve.maxX,te[ee]),ve.maxY=Math.max(ve.maxY,te[ee+1])}function mr(ve,te,ee,ue){if(!te.geometry)return;const me=te.geometry.coordinates;if(me&&me.length===0)return;const Ce=te.geometry.type,Oe=Math.pow(ee.tolerance/((1<<ee.maxZoom)*ee.extent),2);let Le=[],Te=te.id;if(ee.promoteId?Te=te.properties[ee.promoteId]:ee.generateId&&(Te=ue||0),Ce==="Point")Yr(me,Le);else if(Ce==="MultiPoint")for(const Je of me)Yr(Je,Le);else if(Ce==="LineString")qe(me,Le,Oe,!1);else if(Ce==="MultiLineString"){if(ee.lineMetrics){for(const Je of me)Le=[],qe(Je,Le,Oe,!1),ve.push(lt(Te,"LineString",Le,te.properties));return}dn(me,Le,Oe,!1)}else if(Ce==="Polygon")dn(me,Le,Oe,!0);else{if(Ce!=="MultiPolygon"){if(Ce==="GeometryCollection"){for(const Je of te.geometry.geometries)mr(ve,{id:Te,geometry:Je,properties:te.properties},ee,ue);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Je of me){const st=[];dn(Je,st,Oe,!0),Le.push(st)}}ve.push(lt(Te,Ce,Le,te.properties))}function Yr(ve,te){te.push(xi(ve[0]),vr(ve[1]),0)}function qe(ve,te,ee,ue){let me,Ce,Oe=0;for(let Te=0;Te<ve.length;Te++){const Je=xi(ve[Te][0]),st=vr(ve[Te][1]);te.push(Je,st,0),Te>0&&(Oe+=ue?(me*st-Je*Ce)/2:Math.sqrt(Math.pow(Je-me,2)+Math.pow(st-Ce,2))),me=Je,Ce=st}const Le=te.length-3;te[2]=1,Wt(te,0,Le,ee),te[Le+2]=1,te.size=Math.abs(Oe),te.start=0,te.end=te.size}function dn(ve,te,ee,ue){for(let me=0;me<ve.length;me++){const Ce=[];qe(ve[me],Ce,ee,ue),te.push(Ce)}}function xi(ve){return ve/360+.5}function vr(ve){const te=Math.sin(ve*Math.PI/180),ee=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return ee<0?0:ee>1?1:ee}function Rr(ve,te,ee,ue,me,Ce,Oe,Le){if(ue/=te,Ce>=(ee/=te)&&Oe<ue)return ve;if(Oe<ee||Ce>=ue)return null;const Te=[];for(const Je of ve){const st=Je.geometry;let He=Je.type;const vt=me===0?Je.minX:Je.minY,Lt=me===0?Je.maxX:Je.maxY;if(vt>=ee&&Lt<ue){Te.push(Je);continue}if(Lt<ee||vt>=ue)continue;let Gt=[];if(He==="Point"||He==="MultiPoint")Gn(st,Gt,ee,ue,me);else if(He==="LineString")Hn(st,Gt,ee,ue,me,!1,Le.lineMetrics);else if(He==="MultiLineString")co(st,Gt,ee,ue,me,!1);else if(He==="Polygon")co(st,Gt,ee,ue,me,!0);else if(He==="MultiPolygon")for(const Ar of st){const lr=[];co(Ar,lr,ee,ue,me,!0),lr.length&&Gt.push(lr)}if(Gt.length){if(Le.lineMetrics&&He==="LineString"){for(const Ar of Gt)Te.push(lt(Je.id,He,Ar,Je.tags));continue}He!=="LineString"&&He!=="MultiLineString"||(Gt.length===1?(He="LineString",Gt=Gt[0]):He="MultiLineString"),He!=="Point"&&He!=="MultiPoint"||(He=Gt.length===3?"Point":"MultiPoint"),Te.push(lt(Je.id,He,Gt,Je.tags))}}return Te.length?Te:null}function Gn(ve,te,ee,ue,me){for(let Ce=0;Ce<ve.length;Ce+=3){const Oe=ve[Ce+me];Oe>=ee&&Oe<=ue&&ci(te,ve[Ce],ve[Ce+1],ve[Ce+2])}}function Hn(ve,te,ee,ue,me,Ce,Oe){let Le=Ri(ve);const Te=me===0?xl:Ns;let Je,st,He=ve.start;for(let lr=0;lr<ve.length-3;lr+=3){const Er=ve[lr],pr=ve[lr+1],En=ve[lr+2],pn=ve[lr+3],_r=ve[lr+4],Lr=me===0?Er:pr,nn=me===0?pn:_r;let Nn=!1;Oe&&(Je=Math.sqrt(Math.pow(Er-pn,2)+Math.pow(pr-_r,2))),Lr<ee?nn>ee&&(st=Te(Le,Er,pr,pn,_r,ee),Oe&&(Le.start=He+Je*st)):Lr>ue?nn<ue&&(st=Te(Le,Er,pr,pn,_r,ue),Oe&&(Le.start=He+Je*st)):ci(Le,Er,pr,En),nn<ee&&Lr>=ee&&(st=Te(Le,Er,pr,pn,_r,ee),Nn=!0),nn>ue&&Lr<=ue&&(st=Te(Le,Er,pr,pn,_r,ue),Nn=!0),!Ce&&Nn&&(Oe&&(Le.end=He+Je*st),te.push(Le),Le=Ri(ve)),Oe&&(He+=Je)}let vt=ve.length-3;const Lt=ve[vt],Gt=ve[vt+1],Ar=me===0?Lt:Gt;Ar>=ee&&Ar<=ue&&ci(Le,Lt,Gt,ve[vt+2]),vt=Le.length-3,Ce&&vt>=3&&(Le[vt]!==Le[0]||Le[vt+1]!==Le[1])&&ci(Le,Le[0],Le[1],Le[2]),Le.length&&te.push(Le)}function Ri(ve){const te=[];return te.size=ve.size,te.start=ve.start,te.end=ve.end,te}function co(ve,te,ee,ue,me,Ce){for(const Oe of ve)Hn(Oe,te,ee,ue,me,Ce,!1)}function ci(ve,te,ee,ue){ve.push(te,ee,ue)}function xl(ve,te,ee,ue,me,Ce){const Oe=(Ce-te)/(ue-te);return ci(ve,Ce,ee+(me-ee)*Oe,1),Oe}function Ns(ve,te,ee,ue,me,Ce){const Oe=(Ce-ee)/(me-ee);return ci(ve,te+(ue-te)*Oe,Ce,1),Oe}function pt(ve,te){const ee=[];for(let ue=0;ue<ve.length;ue++){const me=ve[ue],Ce=me.type;let Oe;if(Ce==="Point"||Ce==="MultiPoint"||Ce==="LineString")Oe=Va(me.geometry,te);else if(Ce==="MultiLineString"||Ce==="Polygon"){Oe=[];for(const Le of me.geometry)Oe.push(Va(Le,te))}else if(Ce==="MultiPolygon"){Oe=[];for(const Le of me.geometry){const Te=[];for(const Je of Le)Te.push(Va(Je,te));Oe.push(Te)}}ee.push(lt(me.id,Ce,Oe,me.tags))}return ee}function Va(ve,te){const ee=[];ee.size=ve.size,ve.start!==void 0&&(ee.start=ve.start,ee.end=ve.end);for(let ue=0;ue<ve.length;ue+=3)ee.push(ve[ue]+te,ve[ue+1],ve[ue+2]);return ee}function Bn(ve,te){if(ve.transformed)return ve;const ee=1<<ve.z,ue=ve.x,me=ve.y;for(const Ce of ve.features){const Oe=Ce.geometry,Le=Ce.type;if(Ce.geometry=[],Le===1)for(let Te=0;Te<Oe.length;Te+=2)Ce.geometry.push(zi(Oe[Te],Oe[Te+1],te,ee,ue,me));else for(let Te=0;Te<Oe.length;Te++){const Je=[];for(let st=0;st<Oe[Te].length;st+=2)Je.push(zi(Oe[Te][st],Oe[Te][st+1],te,ee,ue,me));Ce.geometry.push(Je)}}return ve.transformed=!0,ve}function zi(ve,te,ee,ue,me,Ce){return[Math.round(ee*(ve*ue-me)),Math.round(ee*(te*ue-Ce))]}function os(ve,te,ee,ue,me){const Ce=te===me.maxZoom?0:me.tolerance/((1<<te)*me.extent),Oe={features:[],numPoints:0,numSimplified:0,numFeatures:ve.length,source:null,x:ee,y:ue,z:te,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Le of ve)bt(Oe,Le,Ce,me);return Oe}function bt(ve,te,ee,ue){const me=te.geometry,Ce=te.type,Oe=[];if(ve.minX=Math.min(ve.minX,te.minX),ve.minY=Math.min(ve.minY,te.minY),ve.maxX=Math.max(ve.maxX,te.maxX),ve.maxY=Math.max(ve.maxY,te.maxY),Ce==="Point"||Ce==="MultiPoint")for(let Le=0;Le<me.length;Le+=3)Oe.push(me[Le],me[Le+1]),ve.numPoints++,ve.numSimplified++;else if(Ce==="LineString")gr(Oe,me,ve,ee,!1,!1);else if(Ce==="MultiLineString"||Ce==="Polygon")for(let Le=0;Le<me.length;Le++)gr(Oe,me[Le],ve,ee,Ce==="Polygon",Le===0);else if(Ce==="MultiPolygon")for(let Le=0;Le<me.length;Le++){const Te=me[Le];for(let Je=0;Je<Te.length;Je++)gr(Oe,Te[Je],ve,ee,!0,Je===0)}if(Oe.length){let Le=te.tags||null;if(Ce==="LineString"&&ue.lineMetrics){Le={};for(const Je in te.tags)Le[Je]=te.tags[Je];Le.mapbox_clip_start=me.start/me.size,Le.mapbox_clip_end=me.end/me.size}const Te={geometry:Oe,type:Ce==="Polygon"||Ce==="MultiPolygon"?3:Ce==="LineString"||Ce==="MultiLineString"?2:1,tags:Le};te.id!==null&&(Te.id=te.id),ve.features.push(Te)}}function gr(ve,te,ee,ue,me,Ce){const Oe=ue*ue;if(ue>0&&te.size<(me?Oe:ue))return void(ee.numPoints+=te.length/3);const Le=[];for(let Te=0;Te<te.length;Te+=3)(ue===0||te[Te+2]>Oe)&&(ee.numSimplified++,Le.push(te[Te],te[Te+1])),ee.numPoints++;me&&(function(Te,Je){let st=0;for(let He=0,vt=Te.length,Lt=vt-2;He<vt;Lt=He,He+=2)st+=(Te[He]-Te[Lt])*(Te[He+1]+Te[Lt+1]);if(st>0===Je)for(let He=0,vt=Te.length;He<vt/2;He+=2){const Lt=Te[He],Gt=Te[He+1];Te[He]=Te[vt-2-He],Te[He+1]=Te[vt-1-He],Te[vt-2-He]=Lt,Te[vt-1-He]=Gt}})(Le,Ce),ve.push(Le)}const Qt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class hi{constructor(te,ee){const ue=(ee=this.options=(function(Ce,Oe){for(const Le in Oe)Ce[Le]=Oe[Le];return Ce})(Object.create(Qt),ee)).debug;if(ue&&console.time("preprocess data"),ee.maxZoom<0||ee.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ee.promoteId&&ee.generateId)throw new Error("promoteId and generateId cannot be used together.");let me=(function(Ce,Oe){const Le=[];if(Ce.type==="FeatureCollection")for(let Te=0;Te<Ce.features.length;Te++)mr(Le,Ce.features[Te],Oe,Te);else mr(Le,Ce.type==="Feature"?Ce:{geometry:Ce},Oe);return Le})(te,ee);this.tiles={},this.tileCoords=[],ue&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ee.indexMaxZoom,ee.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),me=(function(Ce,Oe){const Le=Oe.buffer/Oe.extent;let Te=Ce;const Je=Rr(Ce,1,-1-Le,Le,0,-1,2,Oe),st=Rr(Ce,1,1-Le,2+Le,0,-1,2,Oe);return(Je||st)&&(Te=Rr(Ce,1,-Le,1+Le,0,-1,2,Oe)||[],Je&&(Te=pt(Je,1).concat(Te)),st&&(Te=Te.concat(pt(st,-1)))),Te})(me,ee),me.length&&this.splitTile(me,0,0,0),ue&&(me.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(te,ee,ue,me,Ce,Oe,Le){const Te=[te,ee,ue,me],Je=this.options,st=Je.debug;for(;Te.length;){me=Te.pop(),ue=Te.pop(),ee=Te.pop(),te=Te.pop();const He=1<<ee,vt=ea(ee,ue,me);let Lt=this.tiles[vt];if(!Lt&&(st>1&&console.time("creation"),Lt=this.tiles[vt]=os(te,ee,ue,me,Je),this.tileCoords.push({z:ee,x:ue,y:me}),st)){st>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ee,ue,me,Lt.numFeatures,Lt.numPoints,Lt.numSimplified),console.timeEnd("creation"));const Nn=`z${ee}`;this.stats[Nn]=(this.stats[Nn]||0)+1,this.total++}if(Lt.source=te,Ce==null){if(ee===Je.indexMaxZoom||Lt.numPoints<=Je.indexMaxPoints)continue}else{if(ee===Je.maxZoom||ee===Ce)continue;if(Ce!=null){const Nn=Ce-ee;if(ue!==Oe>>Nn||me!==Le>>Nn)continue}}if(Lt.source=null,te.length===0)continue;st>1&&console.time("clipping");const Gt=.5*Je.buffer/Je.extent,Ar=.5-Gt,lr=.5+Gt,Er=1+Gt;let pr=null,En=null,pn=null,_r=null,Lr=Rr(te,He,ue-Gt,ue+lr,0,Lt.minX,Lt.maxX,Je),nn=Rr(te,He,ue+Ar,ue+Er,0,Lt.minX,Lt.maxX,Je);te=null,Lr&&(pr=Rr(Lr,He,me-Gt,me+lr,1,Lt.minY,Lt.maxY,Je),En=Rr(Lr,He,me+Ar,me+Er,1,Lt.minY,Lt.maxY,Je),Lr=null),nn&&(pn=Rr(nn,He,me-Gt,me+lr,1,Lt.minY,Lt.maxY,Je),_r=Rr(nn,He,me+Ar,me+Er,1,Lt.minY,Lt.maxY,Je),nn=null),st>1&&console.timeEnd("clipping"),Te.push(pr||[],ee+1,2*ue,2*me),Te.push(En||[],ee+1,2*ue,2*me+1),Te.push(pn||[],ee+1,2*ue+1,2*me),Te.push(_r||[],ee+1,2*ue+1,2*me+1)}}getTile(te,ee,ue){te=+te,ee=+ee,ue=+ue;const me=this.options,{extent:Ce,debug:Oe}=me;if(te<0||te>24)return null;const Le=1<<te,Te=ea(te,ee=ee+Le&Le-1,ue);if(this.tiles[Te])return Bn(this.tiles[Te],Ce);Oe>1&&console.log("drilling down to z%d-%d-%d",te,ee,ue);let Je,st=te,He=ee,vt=ue;for(;!Je&&st>0;)st--,He>>=1,vt>>=1,Je=this.tiles[ea(st,He,vt)];return Je&&Je.source?(Oe>1&&(console.log("found parent tile z%d-%d-%d",st,He,vt),console.time("drilling down")),this.splitTile(Je.source,st,He,vt,te,ee,ue),Oe>1&&console.timeEnd("drilling down"),this.tiles[Te]?Bn(this.tiles[Te],Ce):null):null}}function ea(ve,te,ee){return 32*((1<<ve)*ee+te)+ve}function ir(ve,te){return te?ve.properties[te]:ve.id}function va(ve,te){if(ve==null)return!0;if(ve.type==="Feature")return ir(ve,te)!=null;if(ve.type==="FeatureCollection"){const ee=new Set;for(const ue of ve.features){const me=ir(ue,te);if(me==null||ee.has(me))return!1;ee.add(me)}return!0}return!1}function Ua(ve,te){const ee=new Map;if(ve!=null)if(ve.type==="Feature")ee.set(ir(ve,te),ve);else for(const ue of ve.features)ee.set(ir(ue,te),ue);return ee}class ta extends A{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(te,ee){return h._(this,void 0,void 0,(function*(){const ue=te.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const me=this._geoJSONIndex.getTile(ue.z,ue.x,ue.y);if(!me)return null;const Ce=new class{constructor(Le){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.X,this.length=Le.length,this._features=Le}feature(Le){return new class{constructor(Te){this._feature=Te,this.extent=h.X,this.type=Te.type,this.properties=Te.tags,"id"in Te&&!isNaN(Te.id)&&(this.id=parseInt(Te.id,10))}loadGeometry(){if(this._feature.type===1){const Te=[];for(const Je of this._feature.geometry)Te.push([new h.P(Je[0],Je[1])]);return Te}{const Te=[];for(const Je of this._feature.geometry){const st=[];for(const He of Je)st.push(new h.P(He[0],He[1]));Te.push(st)}return Te}}toGeoJSON(Te,Je,st){return B.call(this,Te,Je,st)}}(this._features[Le])}}(me.features);let Oe=Qe(Ce);return Oe.byteOffset===0&&Oe.byteLength===Oe.buffer.byteLength||(Oe=new Uint8Array(Oe)),{vectorTile:Ce,rawData:Oe.buffer}}))}loadData(te){return h._(this,void 0,void 0,(function*(){var ee;(ee=this._pendingRequest)===null||ee===void 0||ee.abort();const ue=!!(te&&te.request&&te.request.collectResourceTiming)&&new h.bv(te.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(te,this._pendingRequest),this._geoJSONIndex=te.cluster?new jt((function({superclusterOptions:Oe,clusterProperties:Le}){if(!Le||!Oe)return Oe;const Te={},Je={},st={accumulated:null,zoom:0},He={properties:null},vt=Object.keys(Le);for(const Lt of vt){const[Gt,Ar]=Le[Lt],lr=h.bC(Ar),Er=h.bC(typeof Gt=="string"?[Gt,["accumulated"],["get",Lt]]:Gt);Te[Lt]=lr.value,Je[Lt]=Er.value}return Oe.map=Lt=>{He.properties=Lt;const Gt={};for(const Ar of vt)Gt[Ar]=Te[Ar].evaluate(st,He);return Gt},Oe.reduce=(Lt,Gt)=>{He.properties=Gt;for(const Ar of vt)st.accumulated=Lt[Ar],Lt[Ar]=Je[Ar].evaluate(st,He)},Oe})(te)).load((yield this._pendingData).features):(me=yield this._pendingData,new hi(me,te.geojsonVtOptions)),this.loaded={};const Ce={};if(ue){const Oe=ue.finish();Oe&&(Ce.resourceTiming={},Ce.resourceTiming[te.source]=JSON.parse(JSON.stringify(Oe)))}return Ce}catch(Ce){if(delete this._pendingRequest,h.bB(Ce))return{abandoned:!0};throw Ce}var me}))}getData(){return h._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(te){const ee=this.loaded;return ee&&ee[te.uid]?super.reloadTile(te):this.loadTile(te)}loadAndProcessGeoJSON(te,ee){return h._(this,void 0,void 0,(function*(){let ue=yield this.loadGeoJSON(te,ee);if(delete this._pendingRequest,typeof ue!="object")throw new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`);if(N(ue,!0),te.filter){const me=h.bC(te.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(me.result==="error")throw new Error(me.value.map((Oe=>`${Oe.key}: ${Oe.message}`)).join(", "));ue={type:"FeatureCollection",features:ue.features.filter((Oe=>me.value.evaluate({zoom:0},Oe)))}}return ue}))}loadGeoJSON(te,ee){return h._(this,void 0,void 0,(function*(){const{promoteId:ue}=te;if(te.request){const me=yield h.h(te.request,ee);return this._dataUpdateable=va(me.data,ue)?Ua(me.data,ue):void 0,me.data}if(typeof te.data=="string")try{const me=JSON.parse(te.data);return this._dataUpdateable=va(me,ue)?Ua(me,ue):void 0,me}catch{throw new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`)}if(!te.dataDiff)throw new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${te.source}`);return(function(me,Ce,Oe){var Le,Te,Je,st;if(Ce.removeAll&&me.clear(),Ce.remove)for(const He of Ce.remove)me.delete(He);if(Ce.add)for(const He of Ce.add){const vt=ir(He,Oe);vt!=null&&me.set(vt,He)}if(Ce.update)for(const He of Ce.update){let vt=me.get(He.id);if(vt==null)continue;const Lt=!He.removeAllProperties&&(((Le=He.removeProperties)===null||Le===void 0?void 0:Le.length)>0||((Te=He.addOrUpdateProperties)===null||Te===void 0?void 0:Te.length)>0);if((He.newGeometry||He.removeAllProperties||Lt)&&(vt=Object.assign({},vt),me.set(He.id,vt),Lt&&(vt.properties=Object.assign({},vt.properties))),He.newGeometry&&(vt.geometry=He.newGeometry),He.removeAllProperties)vt.properties={};else if(((Je=He.removeProperties)===null||Je===void 0?void 0:Je.length)>0)for(const Gt of He.removeProperties)Object.prototype.hasOwnProperty.call(vt.properties,Gt)&&delete vt.properties[Gt];if(((st=He.addOrUpdateProperties)===null||st===void 0?void 0:st.length)>0)for(const{key:Gt,value:Ar}of He.addOrUpdateProperties)vt.properties[Gt]=Ar}})(this._dataUpdateable,te.dataDiff,ue),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(te){return h._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(te){return this._geoJSONIndex.getClusterExpansionZoom(te.clusterId)}getClusterChildren(te){return this._geoJSONIndex.getChildren(te.clusterId)}getClusterLeaves(te){return this._geoJSONIndex.getLeaves(te.clusterId,te.limit,te.offset)}}class bi{constructor(te){this.self=te,this.actor=new h.F(te),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ee,ue)=>{if(this.externalWorkerSourceTypes[ee])throw new Error(`Worker source with name "${ee}" already registered.`);this.externalWorkerSourceTypes[ee]=ue},this.self.addProtocol=h.bi,this.self.removeProtocol=h.bj,this.self.registerRTLTextPlugin=ee=>{if(h.bD.isParsed())throw new Error("RTL text plugin already registered.");h.bD.setMethods(ee)},this.actor.registerMessageHandler("LDT",((ee,ue)=>this._getDEMWorkerSource(ee,ue.source).loadTile(ue))),this.actor.registerMessageHandler("RDT",((ee,ue)=>h._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(ee,ue.source).removeTile(ue)})))),this.actor.registerMessageHandler("GCEZ",((ee,ue)=>h._(this,void 0,void 0,(function*(){return this._getWorkerSource(ee,ue.type,ue.source).getClusterExpansionZoom(ue)})))),this.actor.registerMessageHandler("GCC",((ee,ue)=>h._(this,void 0,void 0,(function*(){return this._getWorkerSource(ee,ue.type,ue.source).getClusterChildren(ue)})))),this.actor.registerMessageHandler("GCL",((ee,ue)=>h._(this,void 0,void 0,(function*(){return this._getWorkerSource(ee,ue.type,ue.source).getClusterLeaves(ue)})))),this.actor.registerMessageHandler("LD",((ee,ue)=>this._getWorkerSource(ee,ue.type,ue.source).loadData(ue))),this.actor.registerMessageHandler("GD",((ee,ue)=>this._getWorkerSource(ee,ue.type,ue.source).getData())),this.actor.registerMessageHandler("LT",((ee,ue)=>this._getWorkerSource(ee,ue.type,ue.source).loadTile(ue))),this.actor.registerMessageHandler("RT",((ee,ue)=>this._getWorkerSource(ee,ue.type,ue.source).reloadTile(ue))),this.actor.registerMessageHandler("AT",((ee,ue)=>this._getWorkerSource(ee,ue.type,ue.source).abortTile(ue))),this.actor.registerMessageHandler("RMT",((ee,ue)=>this._getWorkerSource(ee,ue.type,ue.source).removeTile(ue))),this.actor.registerMessageHandler("RS",((ee,ue)=>h._(this,void 0,void 0,(function*(){if(!this.workerSources[ee]||!this.workerSources[ee][ue.type]||!this.workerSources[ee][ue.type][ue.source])return;const me=this.workerSources[ee][ue.type][ue.source];delete this.workerSources[ee][ue.type][ue.source],me.removeSource!==void 0&&me.removeSource(ue)})))),this.actor.registerMessageHandler("RM",(ee=>h._(this,void 0,void 0,(function*(){delete this.layerIndexes[ee],delete this.availableImages[ee],delete this.workerSources[ee],delete this.demWorkerSources[ee]})))),this.actor.registerMessageHandler("SR",((ee,ue)=>h._(this,void 0,void 0,(function*(){this.referrer=ue})))),this.actor.registerMessageHandler("SRPS",((ee,ue)=>this._syncRTLPluginState(ee,ue))),this.actor.registerMessageHandler("IS",((ee,ue)=>h._(this,void 0,void 0,(function*(){this.self.importScripts(ue)})))),this.actor.registerMessageHandler("SI",((ee,ue)=>this._setImages(ee,ue))),this.actor.registerMessageHandler("UL",((ee,ue)=>h._(this,void 0,void 0,(function*(){this._getLayerIndex(ee).update(ue.layers,ue.removedIds)})))),this.actor.registerMessageHandler("SL",((ee,ue)=>h._(this,void 0,void 0,(function*(){this._getLayerIndex(ee).replace(ue)}))))}_setImages(te,ee){return h._(this,void 0,void 0,(function*(){this.availableImages[te]=ee;for(const ue in this.workerSources[te]){const me=this.workerSources[te][ue];for(const Ce in me)me[Ce].availableImages=ee}}))}_syncRTLPluginState(te,ee){return h._(this,void 0,void 0,(function*(){if(h.bD.isParsed())return h.bD.getState();if(ee.pluginStatus!=="loading")return h.bD.setState(ee),ee;const ue=ee.pluginURL;if(this.self.importScripts(ue),h.bD.isParsed()){const me={pluginStatus:"loaded",pluginURL:ue};return h.bD.setState(me),me}throw h.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${ue}`)}))}_getAvailableImages(te){let ee=this.availableImages[te];return ee||(ee=[]),ee}_getLayerIndex(te){let ee=this.layerIndexes[te];return ee||(ee=this.layerIndexes[te]=new l),ee}_getWorkerSource(te,ee,ue){if(this.workerSources[te]||(this.workerSources[te]={}),this.workerSources[te][ee]||(this.workerSources[te][ee]={}),!this.workerSources[te][ee][ue]){const me={sendAsync:(Ce,Oe)=>(Ce.targetMapId=te,this.actor.sendAsync(Ce,Oe))};switch(ee){case"vector":this.workerSources[te][ee][ue]=new A(me,this._getLayerIndex(te),this._getAvailableImages(te));break;case"geojson":this.workerSources[te][ee][ue]=new ta(me,this._getLayerIndex(te),this._getAvailableImages(te));break;default:this.workerSources[te][ee][ue]=new this.externalWorkerSourceTypes[ee](me,this._getLayerIndex(te),this._getAvailableImages(te))}}return this.workerSources[te][ee][ue]}_getDEMWorkerSource(te,ee){return this.demWorkerSources[te]||(this.demWorkerSources[te]={}),this.demWorkerSources[te][ee]||(this.demWorkerSources[te][ee]=new M),this.demWorkerSources[te][ee]}}return h.i(self)&&(self.worker=new bi(self)),bi})),s("index",["exports","./shared"],(function(h,l){var _="4.7.1";let S,E;const A={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:w=>new Promise(((i,f)=>{const g=requestAnimationFrame(i);w.signal.addEventListener("abort",(()=>{cancelAnimationFrame(g),f(l.c())}))})),getImageData(w,i=0){return this.getImageCanvasContext(w).getImageData(-i,-i,w.width+2*i,w.height+2*i)},getImageCanvasContext(w){const i=window.document.createElement("canvas"),f=i.getContext("2d",{willReadFrequently:!0});if(!f)throw new Error("failed to create canvas 2d context");return i.width=w.width,i.height=w.height,f.drawImage(w,0,0,w.width,w.height),f},resolveURL:w=>(S||(S=document.createElement("a")),S.href=w,S.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(E==null&&(E=matchMedia("(prefers-reduced-motion: reduce)")),E.matches)}};class M{static testProp(i){if(!M.docStyle)return i[0];for(let f=0;f<i.length;f++)if(i[f]in M.docStyle)return i[f];return i[0]}static create(i,f,g){const y=window.document.createElement(i);return f!==void 0&&(y.className=f),g&&g.appendChild(y),y}static createNS(i,f){return window.document.createElementNS(i,f)}static disableDrag(){M.docStyle&&M.selectProp&&(M.userSelect=M.docStyle[M.selectProp],M.docStyle[M.selectProp]="none")}static enableDrag(){M.docStyle&&M.selectProp&&(M.docStyle[M.selectProp]=M.userSelect)}static setTransform(i,f){i.style[M.transformProp]=f}static addEventListener(i,f,g,y={}){i.addEventListener(f,g,"passive"in y?y:y.capture)}static removeEventListener(i,f,g,y={}){i.removeEventListener(f,g,"passive"in y?y:y.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",M.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",M.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",M.suppressClickInternal,!0)}),0)}static getScale(i){const f=i.getBoundingClientRect();return{x:f.width/i.offsetWidth||1,y:f.height/i.offsetHeight||1,boundingClientRect:f}}static getPoint(i,f,g){const y=f.boundingClientRect;return new l.P((g.clientX-y.left)/f.x-i.clientLeft,(g.clientY-y.top)/f.y-i.clientTop)}static mousePos(i,f){const g=M.getScale(i);return M.getPoint(i,g,f)}static touchPos(i,f){const g=[],y=M.getScale(i);for(let b=0;b<f.length;b++)g.push(M.getPoint(i,y,f[b]));return g}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}M.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,M.selectProp=M.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),M.transformProp=M.testProp(["transform","WebkitTransform"]);const L={supported:!1,testSupport:function(w){!B&&N&&(Z?J(w):U=w)}};let U,N,B=!1,Z=!1;function J(w){const i=w.createTexture();w.bindTexture(w.TEXTURE_2D,i);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,N),w.isContextLost())return;L.supported=!0}catch{}w.deleteTexture(i),B=!0}var Q;typeof document<"u"&&(N=document.createElement("img"),N.onload=()=>{U&&J(U),U=null,Z=!0},N.onerror=()=>{B=!0,U=null},N.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(w){let i,f,g,y;w.resetRequestQueue=()=>{i=[],f=0,g=0,y={}},w.addThrottleControl=z=>{const $=g++;return y[$]=z,$},w.removeThrottleControl=z=>{delete y[z],k()},w.getImage=(z,$,W=!0)=>new Promise(((G,ne)=>{L.supported&&(z.headers||(z.headers={}),z.headers.accept="image/webp,*/*"),l.e(z,{type:"image"}),i.push({abortController:$,requestParameters:z,supportImageRefresh:W,state:"queued",onError:le=>{ne(le)},onSuccess:le=>{G(le)}}),k()}));const b=z=>l._(this,void 0,void 0,(function*(){z.state="running";const{requestParameters:$,supportImageRefresh:W,onError:G,onSuccess:ne,abortController:le}=z,he=W===!1&&!l.i(self)&&!l.g($.url)&&(!$.headers||Object.keys($.headers).reduce(((_e,Ee)=>_e&&Ee==="accept"),!0));f++;const de=he?D($,le):l.m($,le);try{const _e=yield de;delete z.abortController,z.state="completed",_e.data instanceof HTMLImageElement||l.b(_e.data)?ne(_e):_e.data&&ne({data:yield(ge=_e.data,typeof createImageBitmap=="function"?l.d(ge):l.f(ge)),cacheControl:_e.cacheControl,expires:_e.expires})}catch(_e){delete z.abortController,G(_e)}finally{f--,k()}var ge})),k=()=>{const z=(()=>{for(const $ of Object.keys(y))if(y[$]())return!0;return!1})()?l.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let $=f;$<z&&i.length>0;$++){const W=i.shift();W.abortController.signal.aborted?$--:b(W)}},D=(z,$)=>new Promise(((W,G)=>{const ne=new Image,le=z.url,he=z.credentials;he&&he==="include"?ne.crossOrigin="use-credentials":(he&&he==="same-origin"||!l.s(le))&&(ne.crossOrigin="anonymous"),$.signal.addEventListener("abort",(()=>{ne.src="",G(l.c())})),ne.fetchPriority="high",ne.onload=()=>{ne.onerror=ne.onload=null,W({data:ne})},ne.onerror=()=>{ne.onerror=ne.onload=null,$.signal.aborted||G(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ne.src=le}))})(Q||(Q={})),Q.resetRequestQueue();class ie{constructor(i){this._transformRequestFn=i}transformRequest(i,f){return this._transformRequestFn&&this._transformRequestFn(i,f)||{url:i}}setTransformRequest(i){this._transformRequestFn=i}}function H(w){var i=new l.A(3);return i[0]=w[0],i[1]=w[1],i[2]=w[2],i}var X,se=function(w,i,f){return w[0]=i[0]-f[0],w[1]=i[1]-f[1],w[2]=i[2]-f[2],w};X=new l.A(3),l.A!=Float32Array&&(X[0]=0,X[1]=0,X[2]=0);var fe=function(w){var i=w[0],f=w[1];return i*i+f*f};function Se(w){const i=[];if(typeof w=="string")i.push({id:"default",url:w});else if(w&&w.length>0){const f=[];for(const{id:g,url:y}of w){const b=`${g}${y}`;f.indexOf(b)===-1&&(f.push(b),i.push({id:g,url:y}))}}return i}function Be(w,i,f){const g=w.split("?");return g[0]+=`${i}${f}`,g.join("?")}(function(){var w=new l.A(2);l.A!=Float32Array&&(w[0]=0,w[1]=0)})();class xe{constructor(i,f,g,y){this.context=i,this.format=g,this.texture=i.gl.createTexture(),this.update(f,y)}update(i,f,g){const{width:y,height:b}=i,k=!(this.size&&this.size[0]===y&&this.size[1]===b||g),{context:D}=this,{gl:z}=D;if(this.useMipmap=!!(f&&f.useMipmap),z.bindTexture(z.TEXTURE_2D,this.texture),D.pixelStoreUnpackFlipY.set(!1),D.pixelStoreUnpack.set(1),D.pixelStoreUnpackPremultiplyAlpha.set(this.format===z.RGBA&&(!f||f.premultiply!==!1)),k)this.size=[y,b],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.b(i)?z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,z.UNSIGNED_BYTE,i):z.texImage2D(z.TEXTURE_2D,0,this.format,y,b,0,this.format,z.UNSIGNED_BYTE,i.data);else{const{x:$,y:W}=g||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.b(i)?z.texSubImage2D(z.TEXTURE_2D,0,$,W,z.RGBA,z.UNSIGNED_BYTE,i):z.texSubImage2D(z.TEXTURE_2D,0,$,W,y,b,z.RGBA,z.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&z.generateMipmap(z.TEXTURE_2D)}bind(i,f,g){const{context:y}=this,{gl:b}=y;b.bindTexture(b.TEXTURE_2D,this.texture),g!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=b.LINEAR),i!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,i),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,g||i),this.filter=i),f!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,f),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,f),this.wrap=f)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function $e(w){const{userImage:i}=w;return!!(i&&i.render&&i.render())&&(w.data.replace(new Uint8Array(i.data.buffer)),!0)}class Fe extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:f,promiseResolve:g}of this.requestors)g(this._getImagesForIds(f));this.requestors=[]}}getImage(i){const f=this.images[i];if(f&&!f.data&&f.spriteData){const g=f.spriteData;f.data=new l.R({width:g.width,height:g.height},g.context.getImageData(g.x,g.y,g.width,g.height).data),f.spriteData=null}return f}addImage(i,f){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,f)&&(this.images[i]=f)}_validate(i,f){let g=!0;const y=f.data||f.spriteData;return this._validateStretch(f.stretchX,y&&y.width)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "stretchX" value`))),g=!1),this._validateStretch(f.stretchY,y&&y.height)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "stretchY" value`))),g=!1),this._validateContent(f.content,f)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "content" value`))),g=!1),g}_validateStretch(i,f){if(!i)return!0;let g=0;for(const y of i){if(y[0]<g||y[1]<y[0]||f<y[1])return!1;g=y[1]}return!0}_validateContent(i,f){if(!i)return!0;if(i.length!==4)return!1;const g=f.spriteData,y=g&&g.width||f.data.width,b=g&&g.height||f.data.height;return!(i[0]<0||y<i[0]||i[1]<0||b<i[1]||i[2]<0||y<i[2]||i[3]<0||b<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,f,g=!0){const y=this.getImage(i);if(g&&(y.data.width!==f.data.width||y.data.height!==f.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${f.data.width}x${f.data.height}).`);f.version=y.version+1,this.images[i]=f,this.updatedImages[i]=!0}removeImage(i){const f=this.images[i];delete this.images[i],delete this.patterns[i],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise(((f,g)=>{let y=!0;if(!this.isLoaded())for(const b of i)this.images[b]||(y=!1);this.isLoaded()||y?f(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:f})}))}_getImagesForIds(i){const f={};for(const g of i){let y=this.getImage(g);y||(this.fire(new l.k("styleimagemissing",{id:g})),y=this.getImage(g)),y?f[g]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:l.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return f}getPixelSize(){const{width:i,height:f}=this.atlasImage;return{width:i,height:f}}getPattern(i){const f=this.patterns[i],g=this.getImage(i);if(!g)return null;if(f&&f.position.version===g.version)return f.position;if(f)f.position.version=g.version;else{const y={w:g.data.width+2,h:g.data.height+2,x:0,y:0},b=new l.I(y,g);this.patterns[i]={bin:y,position:b}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const f=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new xe(i,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const b in this.patterns)i.push(this.patterns[b].bin);const{w:f,h:g}=l.p(i),y=this.atlasImage;y.resize({width:f||1,height:g||1});for(const b in this.patterns){const{bin:k}=this.patterns[b],D=k.x+1,z=k.y+1,$=this.getImage(b).data,W=$.width,G=$.height;l.R.copy($,y,{x:0,y:0},{x:D,y:z},{width:W,height:G}),l.R.copy($,y,{x:0,y:G-1},{x:D,y:z-1},{width:W,height:1}),l.R.copy($,y,{x:0,y:0},{x:D,y:z+G},{width:W,height:1}),l.R.copy($,y,{x:W-1,y:0},{x:D-1,y:z},{width:1,height:G}),l.R.copy($,y,{x:0,y:0},{x:D+W,y:z},{width:1,height:G})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const f of i){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const g=this.getImage(f);g||l.w(`Image with ID: "${f}" was not found`),$e(g)&&this.updateImage(f,g)}}}const Ke=1e20;function Xe(w,i,f,g,y,b,k,D,z){for(let $=i;$<i+g;$++)rt(w,f*b+$,b,y,k,D,z);for(let $=f;$<f+y;$++)rt(w,$*b+i,1,g,k,D,z)}function rt(w,i,f,g,y,b,k){b[0]=0,k[0]=-Ke,k[1]=Ke,y[0]=w[i];for(let D=1,z=0,$=0;D<g;D++){y[D]=w[i+D*f];const W=D*D;do{const G=b[z];$=(y[D]-y[G]+W-G*G)/(D-G)/2}while($<=k[z]&&--z>-1);z++,b[z]=D,k[z]=$,k[z+1]=Ke}for(let D=0,z=0;D<g;D++){for(;k[z+1]<D;)z++;const $=b[z],W=D-$;w[i+D*f]=y[$]+W*W}}class Qe{constructor(i,f){this.requestManager=i,this.localIdeographFontFamily=f,this.entries={}}setURL(i){this.url=i}getGlyphs(i){return l._(this,void 0,void 0,(function*(){const f=[];for(const b in i)for(const k of i[b])f.push(this._getAndCacheGlyphsPromise(b,k));const g=yield Promise.all(f),y={};for(const{stack:b,id:k,glyph:D}of g)y[b]||(y[b]={}),y[b][k]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};return y}))}_getAndCacheGlyphsPromise(i,f){return l._(this,void 0,void 0,(function*(){let g=this.entries[i];g||(g=this.entries[i]={glyphs:{},requests:{},ranges:{}});let y=g.glyphs[f];if(y!==void 0)return{stack:i,id:f,glyph:y};if(y=this._tinySDF(g,i,f),y)return g.glyphs[f]=y,{stack:i,id:f,glyph:y};const b=Math.floor(f/256);if(256*b>65535)throw new Error("glyphs > 65535 not supported");if(g.ranges[b])return{stack:i,id:f,glyph:y};if(!this.url)throw new Error("glyphsUrl is not set");if(!g.requests[b]){const D=Qe.loadGlyphRange(i,b,this.url,this.requestManager);g.requests[b]=D}const k=yield g.requests[b];for(const D in k)this._doesCharSupportLocalGlyph(+D)||(g.glyphs[+D]=k[+D]);return g.ranges[b]=!0,{stack:i,id:f,glyph:k[f]||null}}))}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(i))}_tinySDF(i,f,g){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(g))return;let b=i.tinySDF;if(!b){let D="400";/bold/i.test(f)?D="900":/medium/i.test(f)?D="500":/light/i.test(f)&&(D="200"),b=i.tinySDF=new Qe.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:D})}const k=b.draw(String.fromCharCode(g));return{id:g,bitmap:new l.o({width:k.width||60,height:k.height||60},k.data),metrics:{width:k.glyphWidth/2||24,height:k.glyphHeight/2||24,left:k.glyphLeft/2+.5||0,top:k.glyphTop/2-27.5||-8,advance:k.glyphAdvance/2||24,isDoubleResolution:!0}}}}Qe.loadGlyphRange=function(w,i,f,g){return l._(this,void 0,void 0,(function*(){const y=256*i,b=y+255,k=g.transformRequest(f.replace("{fontstack}",w).replace("{range}",`${y}-${b}`),"Glyphs"),D=yield l.l(k,new AbortController);if(!D||!D.data)throw new Error(`Could not load glyph range. range: ${i}, ${y}-${b}`);const z={};for(const $ of l.n(D.data))z[$.id]=$;return z}))},Qe.TinySDF=class{constructor({fontSize:w=24,buffer:i=3,radius:f=8,cutoff:g=.25,fontFamily:y="sans-serif",fontWeight:b="normal",fontStyle:k="normal"}={}){this.buffer=i,this.cutoff=g,this.radius=f;const D=this.size=w+4*i,z=this._createCanvas(D),$=this.ctx=z.getContext("2d",{willReadFrequently:!0});$.font=`${k} ${b} ${w}px ${y}`,$.textBaseline="alphabetic",$.textAlign="left",$.fillStyle="black",this.gridOuter=new Float64Array(D*D),this.gridInner=new Float64Array(D*D),this.f=new Float64Array(D),this.z=new Float64Array(D+1),this.v=new Uint16Array(D)}_createCanvas(w){const i=document.createElement("canvas");return i.width=i.height=w,i}draw(w){const{width:i,actualBoundingBoxAscent:f,actualBoundingBoxDescent:g,actualBoundingBoxLeft:y,actualBoundingBoxRight:b}=this.ctx.measureText(w),k=Math.ceil(f),D=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-y))),z=Math.min(this.size-this.buffer,k+Math.ceil(g)),$=D+2*this.buffer,W=z+2*this.buffer,G=Math.max($*W,0),ne=new Uint8ClampedArray(G),le={data:ne,width:$,height:W,glyphWidth:D,glyphHeight:z,glyphTop:k,glyphLeft:0,glyphAdvance:i};if(D===0||z===0)return le;const{ctx:he,buffer:de,gridInner:ge,gridOuter:_e}=this;he.clearRect(de,de,D,z),he.fillText(w,de,de+k);const Ee=he.getImageData(de,de,D,z);_e.fill(Ke,0,G),ge.fill(0,0,G);for(let pe=0;pe<z;pe++)for(let ke=0;ke<D;ke++){const Re=Ee.data[4*(pe*D+ke)+3]/255;if(Re===0)continue;const Ue=(pe+de)*$+ke+de;if(Re===1)_e[Ue]=0,ge[Ue]=Ke;else{const at=.5-Re;_e[Ue]=at>0?at*at:0,ge[Ue]=at<0?at*at:0}}Xe(_e,0,0,$,W,$,this.f,this.v,this.z),Xe(ge,de,de,D,z,$,this.f,this.v,this.z);for(let pe=0;pe<G;pe++){const ke=Math.sqrt(_e[pe])-Math.sqrt(ge[pe]);ne[pe]=Math.round(255-255*(ke/this.radius+this.cutoff))}return le}};class We{constructor(){this.specification=l.v.light.position}possiblyEvaluate(i,f){return l.x(i.expression.evaluate(f))}interpolate(i,f,g){return{x:l.y.number(i.x,f.x,g),y:l.y.number(i.y,f.y,g),z:l.y.number(i.z,f.z,g)}}}let tt;class nt extends l.E{constructor(i){super(),tt=tt||new l.q({anchor:new l.D(l.v.light.anchor),position:new We,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(tt),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,f={}){if(!this._validate(l.r,i,f))for(const g in i){const y=i[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),y):this._transitionable.setValue(g,y)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,f,g){return(!g||g.validate!==!1)&&l.t(this,i.call(l.u,{value:f,style:{glyphs:!0,sprite:!0},styleSpec:l.v}))}}const Ae=new l.q({"sky-color":new l.D(l.v.sky["sky-color"]),"horizon-color":new l.D(l.v.sky["horizon-color"]),"fog-color":new l.D(l.v.sky["fog-color"]),"fog-ground-blend":new l.D(l.v.sky["fog-ground-blend"]),"horizon-fog-blend":new l.D(l.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new l.D(l.v.sky["sky-horizon-blend"]),"atmosphere-blend":new l.D(l.v.sky["atmosphere-blend"])});class Ne extends l.E{constructor(i){super(),this._transitionable=new l.T(Ae),this.setSky(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new l.z(0))}setSky(i,f={}){if(!this._validate(l.B,i,f)){i||(i={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const g in i){const y=i[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),y):this._transitionable.setValue(g,y)}}}getSky(){return this._transitionable.serialize()}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,f,g={}){return(g==null?void 0:g.validate)!==!1&&l.t(this,i.call(l.u,l.e({value:f,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}calculateFogBlendOpacity(i){return i<60?0:i<70?(i-60)/10:1}}class yt{constructor(i,f){this.width=i,this.height=f,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,f){const g=i.join(",")+String(f);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(i,f)),this.dashEntry[g]}getDashRanges(i,f,g){const y=[];let b=i.length%2==1?-i[i.length-1]*g:0,k=i[0]*g,D=!0;y.push({left:b,right:k,isDash:D,zeroLength:i[0]===0});let z=i[0];for(let $=1;$<i.length;$++){D=!D;const W=i[$];b=z*g,z+=W,k=z*g,y.push({left:b,right:k,isDash:D,zeroLength:W===0})}return y}addRoundDash(i,f,g){const y=f/2;for(let b=-g;b<=g;b++){const k=this.width*(this.nextRow+g+b);let D=0,z=i[D];for(let $=0;$<this.width;$++){$/z.right>1&&(z=i[++D]);const W=Math.abs($-z.left),G=Math.abs($-z.right),ne=Math.min(W,G);let le;const he=b/g*(y+1);if(z.isDash){const de=y-Math.abs(he);le=Math.sqrt(ne*ne+de*de)}else le=y-Math.sqrt(ne*ne+he*he);this.data[k+$]=Math.max(0,Math.min(255,le+128))}}}addRegularDash(i){for(let D=i.length-1;D>=0;--D){const z=i[D],$=i[D+1];z.zeroLength?i.splice(D,1):$&&$.isDash===z.isDash&&($.left=z.left,i.splice(D,1))}const f=i[0],g=i[i.length-1];f.isDash===g.isDash&&(f.left=g.left-this.width,g.right=f.right+this.width);const y=this.width*this.nextRow;let b=0,k=i[b];for(let D=0;D<this.width;D++){D/k.right>1&&(k=i[++b]);const z=Math.abs(D-k.left),$=Math.abs(D-k.right),W=Math.min(z,$);this.data[y+D]=Math.max(0,Math.min(255,(k.isDash?W:-W)+128))}}addDash(i,f){const g=f?7:0,y=2*g+1;if(this.nextRow+y>this.height)return l.w("LineAtlas out of space"),null;let b=0;for(let D=0;D<i.length;D++)b+=i[D];if(b!==0){const D=this.width/b,z=this.getDashRanges(i,this.width,D);f?this.addRoundDash(z,D,g):this.addRegularDash(z)}const k={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:b};return this.nextRow+=y,this.dirty=!0,k}bind(i){const f=i.gl;this.texture?(f.bindTexture(f.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,f.texSubImage2D(f.TEXTURE_2D,0,0,0,this.width,this.height,f.ALPHA,f.UNSIGNED_BYTE,this.data))):(this.texture=f.createTexture(),f.bindTexture(f.TEXTURE_2D,this.texture),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texImage2D(f.TEXTURE_2D,0,f.ALPHA,this.width,this.height,0,f.ALPHA,f.UNSIGNED_BYTE,this.data))}}const jt="maplibre_preloaded_worker_pool";class Ut{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Ut.workerCount;)this.workers.push(new Worker(l.a.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach((f=>{f.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[jt]}numActive(){return Object.keys(this.active).length}}const rr=Math.floor(A.hardwareConcurrency/2);let cr,Jt;function ht(){return cr||(cr=new Ut),cr}Ut.workerCount=l.C(globalThis)?Math.max(Math.min(rr,3),1):1;class Wt{constructor(i,f){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=f;const g=this.workerPool.acquire(f);for(let y=0;y<g.length;y++){const b=new l.F(g[y],f);b.name=`Worker ${y}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,f){const g=[];for(const y of this.actors)g.push(y.sendAsync({type:i,data:f}));return Promise.all(g)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach((f=>{f.remove()})),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,f){for(const g of this.actors)g.registerMessageHandler(i,f)}}function sr(){return Jt||(Jt=new Wt(ht(),l.G),Jt.registerMessageHandler("GR",((w,i,f)=>l.m(i,f)))),Jt}function lt(w,i){const f=l.H();return l.J(f,f,[1,1,0]),l.K(f,f,[.5*w.width,.5*w.height,1]),l.L(f,f,w.calculatePosMatrix(i.toUnwrapped()))}function Ir(w,i,f,g,y,b){const k=(function(G,ne,le){if(G)for(const he of G){const de=ne[he];if(de&&de.source===le&&de.type==="fill-extrusion")return!0}else for(const he in ne){const de=ne[he];if(de.source===le&&de.type==="fill-extrusion")return!0}return!1})(y&&y.layers,i,w.id),D=b.maxPitchScaleFactor(),z=w.tilesIn(g,D,k);z.sort(mr);const $=[];for(const G of z)$.push({wrappedTileID:G.tileID.wrapped().key,queryResults:G.tile.queryRenderedFeatures(i,f,w._state,G.queryGeometry,G.cameraQueryGeometry,G.scale,y,b,D,lt(w.transform,G.tileID))});const W=(function(G){const ne={},le={};for(const he of G){const de=he.queryResults,ge=he.wrappedTileID,_e=le[ge]=le[ge]||{};for(const Ee in de){const pe=de[Ee],ke=_e[Ee]=_e[Ee]||{},Re=ne[Ee]=ne[Ee]||[];for(const Ue of pe)ke[Ue.featureIndex]||(ke[Ue.featureIndex]=!0,Re.push(Ue))}}return ne})($);for(const G in W)W[G].forEach((ne=>{const le=ne.feature,he=w.getFeatureState(le.layer["source-layer"],le.id);le.source=le.layer.source,le.layer["source-layer"]&&(le.sourceLayer=le.layer["source-layer"]),le.state=he}));return W}function mr(w,i){const f=w.tileID,g=i.tileID;return f.overscaledZ-g.overscaledZ||f.canonical.y-g.canonical.y||f.wrap-g.wrap||f.canonical.x-g.canonical.x}function Yr(w,i,f){return l._(this,void 0,void 0,(function*(){let g=w;if(w.url?g=(yield l.h(i.transformRequest(w.url,"Source"),f)).data:yield A.frameAsync(f),!g)return null;const y=l.M(l.e(g,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in g&&g.vector_layers&&(y.vectorLayerIds=g.vector_layers.map((b=>b.id))),y}))}class qe{constructor(i,f){i&&(f?this.setSouthWest(i).setNorthEast(f):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof l.N?new l.N(i.lng,i.lat):l.N.convert(i),this}setSouthWest(i){return this._sw=i instanceof l.N?new l.N(i.lng,i.lat):l.N.convert(i),this}extend(i){const f=this._sw,g=this._ne;let y,b;if(i instanceof l.N)y=i,b=i;else{if(!(i instanceof qe))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(qe.convert(i)):this.extend(l.N.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(l.N.convert(i)):this;if(y=i._sw,b=i._ne,!y||!b)return this}return f||g?(f.lng=Math.min(y.lng,f.lng),f.lat=Math.min(y.lat,f.lat),g.lng=Math.max(b.lng,g.lng),g.lat=Math.max(b.lat,g.lat)):(this._sw=new l.N(y.lng,y.lat),this._ne=new l.N(b.lng,b.lat)),this}getCenter(){return new l.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.N(this.getWest(),this.getNorth())}getSouthEast(){return new l.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:f,lat:g}=l.N.convert(i);let y=this._sw.lng<=f&&f<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=f&&f>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&y}static convert(i){return i instanceof qe?i:i&&new qe(i)}static fromLngLat(i,f=0){const g=360*f/40075017,y=g/Math.cos(Math.PI/180*i.lat);return new qe(new l.N(i.lng-y,i.lat-g),new l.N(i.lng+y,i.lat+g))}adjustAntiMeridian(){const i=new l.N(this._sw.lng,this._sw.lat),f=new l.N(this._ne.lng,this._ne.lat);return new qe(i,i.lng>f.lng?new l.N(f.lng+360,f.lat):f)}}class dn{constructor(i,f,g){this.bounds=qe.convert(this.validateBounds(i)),this.minzoom=f||0,this.maxzoom=g||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const f=Math.pow(2,i.z),g=Math.floor(l.O(this.bounds.getWest())*f),y=Math.floor(l.Q(this.bounds.getNorth())*f),b=Math.ceil(l.O(this.bounds.getEast())*f),k=Math.ceil(l.Q(this.bounds.getSouth())*f);return i.x>=g&&i.x<b&&i.y>=y&&i.y<k}}class xi extends l.E{constructor(i,f,g,y){if(super(),this.id=i,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.M(f,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return l._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield Yr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i&&(l.e(this,i),i.bounds&&(this.tileBounds=new dn(i.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new l.j(i))}}))}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty((()=>{this._options.tiles=i})),this}setUrl(i){return this.setSourceProperty((()=>{this.url=i,this._options.url=i})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return l.e({},this._options)}loadTile(i){return l._(this,void 0,void 0,(function*(){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(f,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};g.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise(((b,k)=>{i.reloadPromise={resolve:b,reject:k}}))}else i.actor=this.dispatcher.getActor(),y="LT";i.abortController=new AbortController;try{const b=yield i.actor.sendAsync({type:y,data:g},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,b)}catch(b){if(delete i.abortController,i.aborted)return;if(b&&b.status!==404)throw b;this._afterTileLoadWorkerResponse(i,null)}}))}_afterTileLoadWorkerResponse(i,f){if(f&&f.resourceTiming&&(i.resourceTiming=f.resourceTiming),f&&this.map._refreshExpiredTiles&&i.setExpiryData(f),i.loadVectorData(f,this.map.painter),i.reloadPromise){const g=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(g.resolve).catch(g.reject)}}abortTile(i){return l._(this,void 0,void 0,(function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))}))}unloadTile(i){return l._(this,void 0,void 0,(function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class vr extends l.E{constructor(i,f,g,y){super(),this.id=i,this.dispatcher=g,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},f),l.e(this,l.M(f,["url","scheme","tileSize"]))}load(){return l._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield Yr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,i&&(l.e(this,i),i.bounds&&(this.tileBounds=new dn(i.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new l.j(i))}}))}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load()}setTiles(i){return this.setSourceProperty((()=>{this._options.tiles=i})),this}setUrl(i){return this.setSourceProperty((()=>{this.url=i,this._options.url=i})),this}serialize(){return l.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return l._(this,void 0,void 0,(function*(){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{const g=yield Q.getImage(this.map._requestManager.transformRequest(f,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(g&&g.data){this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&i.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const y=this.map.painter.context,b=y.gl,k=g.data;i.texture=this.map.painter.getTileTexture(k.width),i.texture?i.texture.update(k,{useMipmap:!0}):(i.texture=new xe(y,k,b.RGBA,{useMipmap:!0}),i.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST)),i.state="loaded"}}catch(g){if(delete i.abortController,i.aborted)i.state="unloaded";else if(g)throw i.state="errored",g}}))}abortTile(i){return l._(this,void 0,void 0,(function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)}))}unloadTile(i){return l._(this,void 0,void 0,(function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)}))}hasTransition(){return!1}}class Rr extends vr{constructor(i,f,g,y){super(i,f,g,y),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},f),this.encoding=f.encoding||"mapbox",this.redFactor=f.redFactor,this.greenFactor=f.greenFactor,this.blueFactor=f.blueFactor,this.baseShift=f.baseShift}loadTile(i){return l._(this,void 0,void 0,(function*(){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(f,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{const y=yield Q.getImage(g,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(y&&y.data){const b=y.data;this.map._refreshExpiredTiles&&y.cacheControl&&y.expires&&i.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const k=l.b(b)&&l.U()?b:yield this.readImageNow(b),D={type:this.type,uid:i.uid,source:this.id,rawImageData:k,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();const z=yield i.actor.sendAsync({type:"LDT",data:D});i.dem=z,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(y){if(delete i.abortController,i.aborted)i.state="unloaded";else if(y)throw i.state="errored",y}}))}readImageNow(i){return l._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&l.V()){const f=i.width+2,g=i.height+2;try{return new l.R({width:f,height:g},yield l.W(i,-1,-1,f,g))}catch{}}return A.getImageData(i,1)}))}_getNeighboringTiles(i){const f=i.canonical,g=Math.pow(2,f.z),y=(f.x-1+g)%g,b=f.x===0?i.wrap-1:i.wrap,k=(f.x+1+g)%g,D=f.x+1===g?i.wrap+1:i.wrap,z={};return z[new l.S(i.overscaledZ,b,f.z,y,f.y).key]={backfilled:!1},z[new l.S(i.overscaledZ,D,f.z,k,f.y).key]={backfilled:!1},f.y>0&&(z[new l.S(i.overscaledZ,b,f.z,y,f.y-1).key]={backfilled:!1},z[new l.S(i.overscaledZ,i.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},z[new l.S(i.overscaledZ,D,f.z,k,f.y-1).key]={backfilled:!1}),f.y+1<g&&(z[new l.S(i.overscaledZ,b,f.z,y,f.y+1).key]={backfilled:!1},z[new l.S(i.overscaledZ,i.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},z[new l.S(i.overscaledZ,D,f.z,k,f.y+1).key]={backfilled:!1}),z}unloadTile(i){return l._(this,void 0,void 0,(function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))}))}}class Gn extends l.E{constructor(i,f,g,y){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=g.getActor(),this.setEventedParent(y),this._data=f.data,this._options=l.e({},f),this._collectResourceTiming=f.collectResourceTiming,f.maxzoom!==void 0&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId;const b=l.X/this.tileSize;f.clusterMaxZoom!==void 0&&this.maxzoom<=f.clusterMaxZoom&&l.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${f.clusterMaxZoom}".`),this.workerOptions=l.e({source:this.id,cluster:f.cluster||!1,geojsonVtOptions:{buffer:(f.buffer!==void 0?f.buffer:128)*b,tolerance:(f.tolerance!==void 0?f.tolerance:.375)*b,extent:l.X,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:f.clusterMaxZoom!==void 0?f.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,f.clusterMinPoints||2),extent:l.X,radius:(f.clusterRadius||50)*b,log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return l._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}getData(){return l._(this,void 0,void 0,(function*(){const i=l.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:i})}))}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,f,g){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:f,offset:g}})}_updateWorkerData(i){return l._(this,void 0,void 0,(function*(){const f=l.e({type:this.type},this.workerOptions);i?f.dataDiff=i:typeof this._data=="string"?(f.request=this.map._requestManager.transformRequest(A.resolveURL(this._data),"Source"),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"}));try{const g=yield this.actor.sendAsync({type:"LD",data:f});if(this._pendingLoads--,this._removed||g.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let y=null;g.resourceTiming&&g.resourceTiming[this.id]&&(y=g.resourceTiming[this.id].slice(0));const b={dataType:"source"};this._collectResourceTiming&&y&&y.length>0&&l.e(b,{resourceTiming:y}),this.fire(new l.k("data",Object.assign(Object.assign({},b),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},b),{sourceDataType:"content"})))}catch(g){if(this._pendingLoads--,this._removed)return void this.fire(new l.k("dataabort",{dataType:"source"}));this.fire(new l.j(g))}}))}loaded(){return this._pendingLoads===0}loadTile(i){return l._(this,void 0,void 0,(function*(){const f=i.actor?"RT":"LT";i.actor=this.actor;const g={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.abortController=new AbortController;const y=yield this.actor.sendAsync({type:f,data:g},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(y,this.map.painter,f==="RT")}))}abortTile(i){return l._(this,void 0,void 0,(function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0}))}unloadTile(i){return l._(this,void 0,void 0,(function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return l.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Hn=l.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ri extends l.E{constructor(i,f,g,y){super(),this.id=i,this.dispatcher=g,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=f}load(i){return l._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const f=yield Q.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,f&&f.data&&(this.image=f.data,i&&(this.coordinates=i),this._finishLoading())}catch(f){this._request=null,this._loaded=!0,this.fire(new l.j(f))}}))}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;const f=i.map(l.Z.fromLngLat);this.tileID=(function(y){let b=1/0,k=1/0,D=-1/0,z=-1/0;for(const ne of y)b=Math.min(b,ne.x),k=Math.min(k,ne.y),D=Math.max(D,ne.x),z=Math.max(z,ne.y);const $=Math.max(D-b,z-k),W=Math.max(0,Math.floor(-Math.log($)/Math.LN2)),G=Math.pow(2,W);return new l.a1(W,Math.floor((b+D)/2*G),Math.floor((k+z)/2*G))})(f),this.minzoom=this.maxzoom=this.tileID.z;const g=f.map((y=>this.tileID.getTilePoint(y)._round()));return this._boundsArray=new l.$,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,l.X,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,l.X),this._boundsArray.emplaceBack(g[2].x,g[2].y,l.X,l.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,f=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Hn.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new xe(i,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let g=!1;for(const y in this.tiles){const b=this.tiles[y];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,g=!0)}g&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return l._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class co extends Ri{constructor(i,f,g,y){super(i,f,g,y),this.roundZoom=!0,this.type="video",this.options=f}load(){return l._(this,void 0,void 0,(function*(){this._loaded=!1;const i=this.options;this.urls=[];for(const f of i.urls)this.urls.push(this.map._requestManager.transformRequest(f,"Source").url);try{const f=yield l.a3(this.urls);if(this._loaded=!0,!f)return;this.video=f,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(f){this.fire(new l.j(f))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const f=this.video.seekable;i<f.start(0)||i>f.end(0)?this.fire(new l.j(new l.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${f.start(0)} and ${f.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,f=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Hn.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,this.video)):(this.texture=new xe(i,this.video,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let g=!1;for(const y in this.tiles){const b=this.tiles[y];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,g=!0)}g&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ci extends Ri{constructor(i,f,g,y){super(i,f,g,y),f.coordinates?Array.isArray(f.coordinates)&&f.coordinates.length===4&&!f.coordinates.some((b=>!Array.isArray(b)||b.length!==2||b.some((k=>typeof k!="number"))))||this.fire(new l.j(new l.a2(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.a2(`sources.${i}`,null,'missing required property "coordinates"'))),f.animate&&typeof f.animate!="boolean"&&this.fire(new l.j(new l.a2(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),f.canvas?typeof f.canvas=="string"||f.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.a2(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.a2(`sources.${i}`,null,'missing required property "canvas"'))),this.options=f,this.animate=f.animate===void 0||f.animate}load(){return l._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const f=this.map.painter.context,g=f.gl;this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,Hn.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new xe(f,this.canvas,g.RGBA,{premultiply:!0});let y=!1;for(const b in this.tiles){const k=this.tiles[b];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,y=!0)}y&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const xl={},Ns=w=>{switch(w){case"geojson":return Gn;case"image":return Ri;case"raster":return vr;case"raster-dem":return Rr;case"vector":return xi;case"video":return co;case"canvas":return ci}return xl[w]},pt="RTLPluginLoaded";class Va extends l.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=sr()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch((f=>{throw this.status="error",f}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return l._(this,arguments,void 0,(function*(f,g=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=A.resolveURL(f),!this.url)throw new Error(`requested url ${f} is invalid`);if(this.status==="unavailable"){if(!g)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return l._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new l.k(pt))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Bn=null;function zi(){return Bn||(Bn=new Va),Bn}class os{constructor(i,f){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=l.a4(),this.uses=0,this.tileSize=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const f=i+this.timeAdded;f<this.fadeEndTime||(this.fadeEndTime=f)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,f,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=(function(y,b){const k={};if(!b)return k;for(const D of y){const z=D.layerIds.map(($=>b.getLayer($))).filter(Boolean);if(z.length!==0){D.layers=z,D.stateDependentLayerIds&&(D.stateDependentLayers=D.stateDependentLayerIds.map(($=>z.filter((W=>W.id===$))[0])));for(const $ of z)k[$.id]=D}}return k})(i.buckets,f.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const b=this.buckets[y];if(b instanceof l.a6){if(this.hasSymbolBuckets=!0,!g)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const b=this.buckets[y];if(b instanceof l.a6&&b.hasRTLText){this.hasRTLText=!0,zi().lazyLoad();break}}this.queryPadding=0;for(const y in this.buckets){const b=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,f.style.getLayer(y).queryRadius(b))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new l.a5}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const g in this.buckets){const y=this.buckets[g];y.uploadPending()&&y.upload(i)}const f=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new xe(i,this.imageAtlas.image,f.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new xe(i,this.glyphAtlasImage,f.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,f,g,y,b,k,D,z,$,W){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:b,scale:k,tileSize:this.tileSize,pixelPosMatrix:W,transform:z,params:D,queryPadding:this.queryPadding*$},i,f,g):{}}querySourceFeatures(i,f){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const y=g.loadVTLayers(),b=f&&f.sourceLayer?f.sourceLayer:"",k=y._geojsonTileLayer||y[b];if(!k)return;const D=l.a7(f&&f.filter),{z,x:$,y:W}=this.tileID.canonical,G={z,x:$,y:W};for(let ne=0;ne<k.length;ne++){const le=k.feature(ne);if(D.needGeometry){const ge=l.a8(le,!0);if(!D.filter(new l.z(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!D.filter(new l.z(this.tileID.overscaledZ),le))continue;const he=g.getId(le,b),de=new l.a9(le,z,$,W,he);de.tile=G,i.push(de)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const f=this.expirationTime;if(i.cacheControl){const g=l.aa(i.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const g=Date.now();let y=!1;if(this.expirationTime>g)y=!1;else if(f)if(this.expirationTime<f)y=!0;else{const b=this.expirationTime-f;b?this.expirationTime=g+Math.max(b,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,f){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const g=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!f.style.hasLayer(y))continue;const b=this.buckets[y],k=b.layers[0].sourceLayer||"_geojsonTileLayer",D=g[k],z=i[k];if(!D||!z||Object.keys(z).length===0)continue;b.update(z,D,this.imageAtlas&&this.imageAtlas.patternPositions||{});const $=f&&f.style&&f.style.getLayer(y);$&&(this.queryPadding=Math.max(this.queryPadding,$.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<A.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=A.now()+i}setDependencies(i,f){const g={};for(const y of f)g[y]=!0;this.dependencies[i]=g}hasDependency(i,f){for(const g of i){const y=this.dependencies[g];if(y){for(const b of f)if(y[b])return!0}}return!1}}class bt{constructor(i,f){this.max=i,this.onRemove=f,this.reset()}reset(){for(const i in this.data)for(const f of this.data[i])f.timeout&&clearTimeout(f.timeout),this.onRemove(f.value);return this.data={},this.order=[],this}add(i,f,g){const y=i.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const b={value:f,timeout:void 0};if(g!==void 0&&(b.timeout=setTimeout((()=>{this.remove(i,b)}),g)),this.data[y].push(b),this.order.push(y),this.order.length>this.max){const k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const f=this.data[i].shift();return f.timeout&&clearTimeout(f.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),f.value}getByKey(i){const f=this.data[i];return f?f[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,f){if(!this.has(i))return this;const g=i.wrapped().key,y=f===void 0?0:this.data[g].indexOf(f),b=this.data[g][y];return this.data[g].splice(y,1),b.timeout&&clearTimeout(b.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(b.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const f=this._getAndRemoveByKey(this.order[0]);f&&this.onRemove(f)}return this}filter(i){const f=[];for(const g in this.data)for(const y of this.data[g])i(y.value)||f.push(y);for(const g of f)this.remove(g.value.tileID,g)}}class gr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,f,g){const y=String(f);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][y]=this.stateChanges[i][y]||{},l.e(this.stateChanges[i][y],g),this.deletedStates[i]===null){this.deletedStates[i]={};for(const b in this.state[i])b!==y&&(this.deletedStates[i][b]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][y]===null){this.deletedStates[i][y]={};for(const b in this.state[i][y])g[b]||(this.deletedStates[i][y][b]=null)}else for(const b in g)this.deletedStates[i]&&this.deletedStates[i][y]&&this.deletedStates[i][y][b]===null&&delete this.deletedStates[i][y][b]}removeFeatureState(i,f,g){if(this.deletedStates[i]===null)return;const y=String(f);if(this.deletedStates[i]=this.deletedStates[i]||{},g&&f!==void 0)this.deletedStates[i][y]!==null&&(this.deletedStates[i][y]=this.deletedStates[i][y]||{},this.deletedStates[i][y][g]=null);else if(f!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][y])for(g in this.deletedStates[i][y]={},this.stateChanges[i][y])this.deletedStates[i][y][g]=null;else this.deletedStates[i][y]=null;else this.deletedStates[i]=null}getState(i,f){const g=String(f),y=l.e({},(this.state[i]||{})[g],(this.stateChanges[i]||{})[g]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const b=this.deletedStates[i][f];if(b===null)return{};for(const k in b)delete y[k]}return y}initializeTileState(i,f){i.setFeatureState(this.state,f)}coalesceChanges(i,f){const g={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const b={};for(const k in this.stateChanges[y])this.state[y][k]||(this.state[y][k]={}),l.e(this.state[y][k],this.stateChanges[y][k]),b[k]=this.state[y][k];g[y]=b}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const b={};if(this.deletedStates[y]===null)for(const k in this.state[y])b[k]={},this.state[y][k]={};else for(const k in this.deletedStates[y]){if(this.deletedStates[y][k]===null)this.state[y][k]={};else for(const D of Object.keys(this.deletedStates[y][k]))delete this.state[y][k][D];b[k]=this.state[y][k]}g[y]=g[y]||{},l.e(g[y],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(const y in i)i[y].setFeatureState(g,f)}}class Qt extends l.E{constructor(i,f,g){super(),this.id=i,this.dispatcher=g,this.on("data",(y=>this._dataHandler(y))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((y,b,k,D)=>{const z=new(Ns(b.type))(y,b,k,D);if(z.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${z.id}`);return z})(i,f,g,this),this._tiles={},this._cache=new bt(0,(y=>this._unloadTile(y))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new gr,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const f=this._tiles[i];if(f.state!=="loaded"&&f.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,f,g){return l._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,f,g)}catch(y){i.state="errored",y.status!==404?this._source.fire(new l.j(y,{tile:i})):this.update(this.transform,this.terrain)}}))}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new l.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const f in this._tiles){const g=this._tiles[f];g.upload(i),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((i=>i.tileID)).sort(hi).map((i=>i.key))}getRenderableIds(i){const f=[];for(const g in this._tiles)this._isIdRenderable(g,i)&&f.push(this._tiles[g]);return i?f.sort(((g,y)=>{const b=g.tileID,k=y.tileID,D=new l.P(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),z=new l.P(k.canonical.x,k.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-k.overscaledZ||z.y-D.y||z.x-D.x})).map((g=>g.tileID.key)):f.map((g=>g.tileID)).sort(hi).map((g=>g.key))}hasRenderableParent(i){const f=this.findLoadedParent(i,0);return!!f&&this._isIdRenderable(f.tileID.key)}_isIdRenderable(i,f){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(f||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,f){return l._(this,void 0,void 0,(function*(){const g=this._tiles[i];g&&(g.state!=="loading"&&(g.state=f),yield this._loadTile(g,i,f))}))}_tileLoaded(i,f,g){i.timeAdded=A.now(),g==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(f,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const f=this.getRenderableIds();for(let y=0;y<f.length;y++){const b=f[y];if(i.neighboringTiles&&i.neighboringTiles[b]){const k=this.getTileByID(b);g(i,k),g(k,i)}}function g(y,b){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let k=b.tileID.canonical.x-y.tileID.canonical.x;const D=b.tileID.canonical.y-y.tileID.canonical.y,z=Math.pow(2,y.tileID.canonical.z),$=b.tileID.key;k===0&&D===0||Math.abs(D)>1||(Math.abs(k)>1&&(Math.abs(k+z)===1?k+=z:Math.abs(k-z)===1&&(k-=z)),b.dem&&y.dem&&(y.dem.backfillBorder(b.dem,k,D),y.neighboringTiles&&y.neighboringTiles[$]&&(y.neighboringTiles[$].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,f,g,y){for(const b in this._tiles){let k=this._tiles[b];if(y[b]||!k.hasData()||k.tileID.overscaledZ<=f||k.tileID.overscaledZ>g)continue;let D=k.tileID;for(;k&&k.tileID.overscaledZ>f+1;){const $=k.tileID.scaledTo(k.tileID.overscaledZ-1);k=this._tiles[$.key],k&&k.hasData()&&(D=$)}let z=D;for(;z.overscaledZ>f;)if(z=z.scaledTo(z.overscaledZ-1),i[z.key]){y[D.key]=D;break}}}findLoadedParent(i,f){if(i.key in this._loadedParentTiles){const g=this._loadedParentTiles[i.key];return g&&g.tileID.overscaledZ>=f?g:null}for(let g=i.overscaledZ-1;g>=f;g--){const y=i.scaledTo(g),b=this._getLoadedTile(y);if(b)return b}}findLoadedSibling(i){return this._getLoadedTile(i)}_getLoadedTile(i){const f=this._tiles[i.key];return f&&f.hasData()?f:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const f=Math.ceil(i.width/this._source.tileSize)+1,g=Math.ceil(i.height/this._source.tileSize)+1,y=Math.floor(f*g*(this._maxTileCacheZoomLevels===null?l.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(b)}handleWrapJump(i){const f=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,f){const g={};for(const y in this._tiles){const b=this._tiles[y];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+f),g[b.tileID.key]=b}this._tiles=g;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}_updateCoveredAndRetainedTiles(i,f,g,y,b,k){const D={},z={},$=Object.keys(i),W=A.now();for(const G of $){const ne=i[G],le=this._tiles[G];if(!le||le.fadeEndTime!==0&&le.fadeEndTime<=W)continue;const he=this.findLoadedParent(ne,f),de=this.findLoadedSibling(ne),ge=he||de||null;ge&&(this._addTile(ge.tileID),D[ge.tileID.key]=ge.tileID),z[G]=ne}this._retainLoadedChildren(z,y,g,i);for(const G in D)i[G]||(this._coveredTiles[G]=!0,i[G]=D[G]);if(k){const G={},ne={};for(const le of b)this._tiles[le.key].hasData()?G[le.key]=le:ne[le.key]=le;for(const le in ne){const he=ne[le].children(this._source.maxzoom);this._tiles[he[0].key]&&this._tiles[he[1].key]&&this._tiles[he[2].key]&&this._tiles[he[3].key]&&(G[he[0].key]=i[he[0].key]=he[0],G[he[1].key]=i[he[1].key]=he[1],G[he[2].key]=i[he[2].key]=he[2],G[he[3].key]=i[he[3].key]=he[3],delete ne[le])}for(const le in ne){const he=ne[le],de=this.findLoadedParent(he,this._source.minzoom),ge=this.findLoadedSibling(he),_e=de||ge||null;if(_e){G[_e.tileID.key]=i[_e.tileID.key]=_e.tileID;for(const Ee in G)G[Ee].isChildOf(_e.tileID)&&delete G[Ee]}}for(const le in this._tiles)G[le]||(this._coveredTiles[le]=!0)}}update(i,f){if(!this._sourceLoaded||this._paused)return;let g;this.transform=i,this.terrain=f,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=i.getVisibleUnwrappedCoordinates(this._source.tileID).map((W=>new l.S(W.canonical.z,W.wrap,W.canonical.z,W.canonical.x,W.canonical.y))):(g=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:f}),this._source.hasTile&&(g=g.filter((W=>this._source.hasTile(W))))):g=[];const y=i.coveringZoomLevel(this._source),b=Math.max(y-Qt.maxOverzooming,this._source.minzoom),k=Math.max(y+Qt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const W={};for(const G of g)if(G.canonical.z>this._source.minzoom){const ne=G.scaledTo(G.canonical.z-1);W[ne.key]=ne;const le=G.scaledTo(Math.max(this._source.minzoom,Math.min(G.canonical.z,5)));W[le.key]=le}g=g.concat(Object.values(W))}const D=g.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,D&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const z=this._updateRetainedTiles(g,y);ea(this._source.type)&&this._updateCoveredAndRetainedTiles(z,b,k,y,g,f);for(const W in z)this._tiles[W].clearFadeHold();const $=l.ab(this._tiles,z);for(const W of $){const G=this._tiles[W];G.hasSymbolBuckets&&!G.holdingForFade()?G.setHoldDuration(this.map._fadeDuration):G.hasSymbolBuckets&&!G.symbolFadeFinished()||this._removeTile(W)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,f){var g;const y={},b={},k=Math.max(f-Qt.maxOverzooming,this._source.minzoom),D=Math.max(f+Qt.maxUnderzooming,this._source.minzoom),z={};for(const $ of i){const W=this._addTile($);y[$.key]=$,W.hasData()||f<this._source.maxzoom&&(z[$.key]=$)}this._retainLoadedChildren(z,f,D,y);for(const $ of i){let W=this._tiles[$.key];if(W.hasData())continue;if(f+1>this._source.maxzoom){const ne=$.children(this._source.maxzoom)[0],le=this.getTile(ne);if(le&&le.hasData()){y[ne.key]=ne;continue}}else{const ne=$.children(this._source.maxzoom);if(y[ne[0].key]&&y[ne[1].key]&&y[ne[2].key]&&y[ne[3].key])continue}let G=W.wasRequested();for(let ne=$.overscaledZ-1;ne>=k;--ne){const le=$.scaledTo(ne);if(b[le.key])break;if(b[le.key]=!0,W=this.getTile(le),!W&&G&&(W=this._addTile(le)),W){const he=W.hasData();if((he||!(!((g=this.map)===null||g===void 0)&&g.cancelPendingTileRequestsWhileZooming)||G)&&(y[le.key]=le),G=W.wasRequested(),he)break}}}return y}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const f=[];let g,y=this._tiles[i].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){g=this._loadedParentTiles[y.key];break}f.push(y.key);const b=y.scaledTo(y.overscaledZ-1);if(g=this._getLoadedTile(b),g)break;y=b}for(const b of f)this._loadedParentTiles[b]=g}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const i in this._tiles){const f=this._tiles[i].tileID,g=this._getLoadedTile(f);this._loadedSiblingTiles[f.key]=g}}_addTile(i){let f=this._tiles[i.key];if(f)return f;f=this._cache.getAndRemove(i),f&&(this._setTileReloadTimer(i.key,f),f.tileID=i,this._state.initializeTileState(f,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,f)));const g=f;return f||(f=new os(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(f,i.key,f.state)),f.uses++,this._tiles[i.key]=f,g||this._source.fire(new l.k("dataloading",{tile:f,coord:f.tileID,dataType:"source"})),f}_setTileReloadTimer(i,f){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const g=f.getExpiryTimeout();g&&(this._timers[i]=setTimeout((()=>{this._reloadTile(i,"expired"),delete this._timers[i]}),g))}_removeTile(i){const f=this._tiles[i];f&&(f.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),f.uses>0||(f.hasData()&&f.state!=="reloading"?this._cache.add(f.tileID,f,f.getExpiryTimeout()):(f.aborted=!0,this._abortTile(f),this._unloadTile(f))))}_dataHandler(i){const f=i.sourceDataType;i.dataType==="source"&&f==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&i.dataType==="source"&&f==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,f,g){const y=[],b=this.transform;if(!b)return y;const k=g?b.getCameraQueryGeometry(i):i,D=i.map((he=>b.pointCoordinate(he,this.terrain))),z=k.map((he=>b.pointCoordinate(he,this.terrain))),$=this.getIds();let W=1/0,G=1/0,ne=-1/0,le=-1/0;for(const he of z)W=Math.min(W,he.x),G=Math.min(G,he.y),ne=Math.max(ne,he.x),le=Math.max(le,he.y);for(let he=0;he<$.length;he++){const de=this._tiles[$[he]];if(de.holdingForFade())continue;const ge=de.tileID,_e=Math.pow(2,b.zoom-de.tileID.overscaledZ),Ee=f*de.queryPadding*l.X/de.tileSize/_e,pe=[ge.getTilePoint(new l.Z(W,G)),ge.getTilePoint(new l.Z(ne,le))];if(pe[0].x-Ee<l.X&&pe[0].y-Ee<l.X&&pe[1].x+Ee>=0&&pe[1].y+Ee>=0){const ke=D.map((Ue=>ge.getTilePoint(Ue))),Re=z.map((Ue=>ge.getTilePoint(Ue)));y.push({tile:de,tileID:ge,queryGeometry:ke,cameraQueryGeometry:Re,scale:_e})}}return y}getVisibleCoordinates(i){const f=this.getRenderableIds(i).map((g=>this._tiles[g].tileID));for(const g of f)g.posMatrix=this.transform.calculatePosMatrix(g.toUnwrapped());return f}hasTransition(){if(this._source.hasTransition())return!0;if(ea(this._source.type)){const i=A.now();for(const f in this._tiles)if(this._tiles[f].fadeEndTime>=i)return!0}return!1}setFeatureState(i,f,g){this._state.updateState(i=i||"_geojsonTileLayer",f,g)}removeFeatureState(i,f,g){this._state.removeFeatureState(i=i||"_geojsonTileLayer",f,g)}getFeatureState(i,f){return this._state.getState(i=i||"_geojsonTileLayer",f)}setDependencies(i,f,g){const y=this._tiles[i];y&&y.setDependencies(f,g)}reloadTilesForDependencies(i,f){for(const g in this._tiles)this._tiles[g].hasDependency(i,f)&&this._reloadTile(g,"reloading");this._cache.filter((g=>!g.hasDependency(i,f)))}}function hi(w,i){const f=Math.abs(2*w.wrap)-+(w.wrap<0),g=Math.abs(2*i.wrap)-+(i.wrap<0);return w.overscaledZ-i.overscaledZ||g-f||i.canonical.y-w.canonical.y||i.canonical.x-w.canonical.x}function ea(w){return w==="raster"||w==="image"||w==="video"}Qt.maxOverzooming=10,Qt.maxUnderzooming=3;class ir{constructor(i,f){this.reset(i,f)}reset(i,f){this.points=i||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=l.ac(i,0,1);let f=1,g=this._distances[f];const y=i*this.paddedLength+this.padding;for(;g<y&&f<this._distances.length;)g=this._distances[++f];const b=f-1,k=this._distances[b],D=g-k,z=D>0?(y-k)/D:0;return this.points[b].mult(1-z).add(this.points[f].mult(z))}}function va(w,i){let f=!0;return w==="always"||w!=="never"&&i!=="never"||(f=!1),f}class Ua{constructor(i,f,g){const y=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(i/g),this.yCellCount=Math.ceil(f/g);for(let k=0;k<this.xCellCount*this.yCellCount;k++)y.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=f,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,f,g,y,b){this._forEachCell(f,g,y,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(y),this.bboxes.push(b)}insertCircle(i,f,g,y){this._forEachCell(f-y,g-y,f+y,g+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(f),this.circles.push(g),this.circles.push(y)}_insertBoxCell(i,f,g,y,b,k){this.boxCells[b].push(k)}_insertCircleCell(i,f,g,y,b,k){this.circleCells[b].push(k)}_query(i,f,g,y,b,k,D){if(g<0||i>this.width||y<0||f>this.height)return[];const z=[];if(i<=0&&f<=0&&this.width<=g&&this.height<=y){if(b)return[{key:null,x1:i,y1:f,x2:g,y2:y}];for(let $=0;$<this.boxKeys.length;$++)z.push({key:this.boxKeys[$],x1:this.bboxes[4*$],y1:this.bboxes[4*$+1],x2:this.bboxes[4*$+2],y2:this.bboxes[4*$+3]});for(let $=0;$<this.circleKeys.length;$++){const W=this.circles[3*$],G=this.circles[3*$+1],ne=this.circles[3*$+2];z.push({key:this.circleKeys[$],x1:W-ne,y1:G-ne,x2:W+ne,y2:G+ne})}}else this._forEachCell(i,f,g,y,this._queryCell,z,{hitTest:b,overlapMode:k,seenUids:{box:{},circle:{}}},D);return z}query(i,f,g,y){return this._query(i,f,g,y,!1,null)}hitTest(i,f,g,y,b,k){return this._query(i,f,g,y,!0,b,k).length>0}hitTestCircle(i,f,g,y,b){const k=i-g,D=i+g,z=f-g,$=f+g;if(D<0||k>this.width||$<0||z>this.height)return!1;const W=[];return this._forEachCell(k,z,D,$,this._queryCellCircle,W,{hitTest:!0,overlapMode:y,circle:{x:i,y:f,radius:g},seenUids:{box:{},circle:{}}},b),W.length>0}_queryCell(i,f,g,y,b,k,D,z){const{seenUids:$,hitTest:W,overlapMode:G}=D,ne=this.boxCells[b];if(ne!==null){const he=this.bboxes;for(const de of ne)if(!$.box[de]){$.box[de]=!0;const ge=4*de,_e=this.boxKeys[de];if(i<=he[ge+2]&&f<=he[ge+3]&&g>=he[ge+0]&&y>=he[ge+1]&&(!z||z(_e))&&(!W||!va(G,_e.overlapMode))&&(k.push({key:_e,x1:he[ge],y1:he[ge+1],x2:he[ge+2],y2:he[ge+3]}),W))return!0}}const le=this.circleCells[b];if(le!==null){const he=this.circles;for(const de of le)if(!$.circle[de]){$.circle[de]=!0;const ge=3*de,_e=this.circleKeys[de];if(this._circleAndRectCollide(he[ge],he[ge+1],he[ge+2],i,f,g,y)&&(!z||z(_e))&&(!W||!va(G,_e.overlapMode))){const Ee=he[ge],pe=he[ge+1],ke=he[ge+2];if(k.push({key:_e,x1:Ee-ke,y1:pe-ke,x2:Ee+ke,y2:pe+ke}),W)return!0}}}return!1}_queryCellCircle(i,f,g,y,b,k,D,z){const{circle:$,seenUids:W,overlapMode:G}=D,ne=this.boxCells[b];if(ne!==null){const he=this.bboxes;for(const de of ne)if(!W.box[de]){W.box[de]=!0;const ge=4*de,_e=this.boxKeys[de];if(this._circleAndRectCollide($.x,$.y,$.radius,he[ge+0],he[ge+1],he[ge+2],he[ge+3])&&(!z||z(_e))&&!va(G,_e.overlapMode))return k.push(!0),!0}}const le=this.circleCells[b];if(le!==null){const he=this.circles;for(const de of le)if(!W.circle[de]){W.circle[de]=!0;const ge=3*de,_e=this.circleKeys[de];if(this._circlesCollide(he[ge],he[ge+1],he[ge+2],$.x,$.y,$.radius)&&(!z||z(_e))&&!va(G,_e.overlapMode))return k.push(!0),!0}}}_forEachCell(i,f,g,y,b,k,D,z){const $=this._convertToXCellCoord(i),W=this._convertToYCellCoord(f),G=this._convertToXCellCoord(g),ne=this._convertToYCellCoord(y);for(let le=$;le<=G;le++)for(let he=W;he<=ne;he++)if(b.call(this,i,f,g,y,this.xCellCount*he+le,k,D,z))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,f,g,y,b,k){const D=y-i,z=b-f,$=g+k;return $*$>D*D+z*z}_circleAndRectCollide(i,f,g,y,b,k,D){const z=(k-y)/2,$=Math.abs(i-(y+z));if($>z+g)return!1;const W=(D-b)/2,G=Math.abs(f-(b+W));if(G>W+g)return!1;if($<=z||G<=W)return!0;const ne=$-z,le=G-W;return ne*ne+le*le<=g*g}}function ta(w,i,f,g,y){const b=l.H();return i?(l.K(b,b,[1/y,1/y,1]),f||l.ad(b,b,g.angle)):l.L(b,g.labelPlaneMatrix,w),b}function bi(w,i,f,g,y){if(i){const b=l.ae(w);return l.K(b,b,[y,y,1]),f||l.ad(b,b,-g.angle),b}return g.glCoordMatrix}function ve(w,i,f,g){let y;g?(y=[w,i,g(w,i),1],l.af(y,y,f)):(y=[w,i,0,1],Ar(y,y,f));const b=y[3];return{point:new l.P(y[0]/b,y[1]/b),signedDistanceFromCamera:b,isOccluded:!1}}function te(w,i){return .5+w/i*.5}function ee(w,i){return w.x>=-i[0]&&w.x<=i[0]&&w.y>=-i[1]&&w.y<=i[1]}function ue(w,i,f,g,y,b,k,D,z,$,W,G,ne,le,he){const de=g?w.textSizeData:w.iconSizeData,ge=l.ag(de,f.transform.zoom),_e=[256/f.width*2+1,256/f.height*2+1],Ee=g?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;Ee.clear();const pe=w.lineVertexArray,ke=g?w.text.placedSymbolArray:w.icon.placedSymbolArray,Re=f.transform.width/f.transform.height;let Ue=!1;for(let at=0;at<ke.length;at++){const dt=ke.get(at);if(dt.hidden||dt.writingMode===l.ah.vertical&&!Ue){Gt(dt.numGlyphs,Ee);continue}Ue=!1;const _t=ve(dt.anchorX,dt.anchorY,i,he);if(!ee(_t.point,_e)){Gt(dt.numGlyphs,Ee);continue}const At=te(f.transform.cameraToCenterDistance,_t.signedDistanceFromCamera),xt=l.ai(de,ge,dt),gt=k?xt/At:xt*At,Rt={getElevation:he,labelPlaneMatrix:y,lineVertexArray:pe,pitchWithMap:k,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:$,tileAnchorPoint:new l.P(dt.anchorX,dt.anchorY),unwrappedTileID:W,width:G,height:ne,translation:le},tr=Oe(Rt,dt,gt,!1,D,i,b,w.glyphOffsetArray,Ee,Re,z);Ue=tr.useVertical,(tr.notEnoughRoom||Ue||tr.needsFlipping&&Oe(Rt,dt,gt,!0,D,i,b,w.glyphOffsetArray,Ee,Re,z).notEnoughRoom)&&Gt(dt.numGlyphs,Ee)}g?w.text.dynamicLayoutVertexBuffer.updateData(Ee):w.icon.dynamicLayoutVertexBuffer.updateData(Ee)}function me(w,i,f,g,y,b,k,D){const z=b.glyphStartIndex+b.numGlyphs,$=b.lineStartIndex,W=b.lineStartIndex+b.lineLength,G=i.getoffsetX(b.glyphStartIndex),ne=i.getoffsetX(z-1),le=vt(w*G,f,g,y,b.segment,$,W,D,k);if(!le)return null;const he=vt(w*ne,f,g,y,b.segment,$,W,D,k);return he?D.projectionCache.anyProjectionOccluded?null:{first:le,last:he}:null}function Ce(w,i,f,g){return w===l.ah.horizontal&&Math.abs(f.y-i.y)>Math.abs(f.x-i.x)*g?{useVertical:!0}:(w===l.ah.vertical?i.y<f.y:i.x>f.x)?{needsFlipping:!0}:null}function Oe(w,i,f,g,y,b,k,D,z,$,W){const G=f/24,ne=i.lineOffsetX*G,le=i.lineOffsetY*G;let he;if(i.numGlyphs>1){const de=i.glyphStartIndex+i.numGlyphs,ge=i.lineStartIndex,_e=i.lineStartIndex+i.lineLength,Ee=me(G,D,ne,le,g,i,W,w);if(!Ee)return{notEnoughRoom:!0};const pe=ve(Ee.first.point.x,Ee.first.point.y,k,w.getElevation).point,ke=ve(Ee.last.point.x,Ee.last.point.y,k,w.getElevation).point;if(y&&!g){const Re=Ce(i.writingMode,pe,ke,$);if(Re)return Re}he=[Ee.first];for(let Re=i.glyphStartIndex+1;Re<de-1;Re++)he.push(vt(G*D.getoffsetX(Re),ne,le,g,i.segment,ge,_e,w,W));he.push(Ee.last)}else{if(y&&!g){const ge=ve(w.tileAnchorPoint.x,w.tileAnchorPoint.y,b,w.getElevation).point,_e=i.lineStartIndex+i.segment+1,Ee=new l.P(w.lineVertexArray.getx(_e),w.lineVertexArray.gety(_e)),pe=ve(Ee.x,Ee.y,b,w.getElevation),ke=pe.signedDistanceFromCamera>0?pe.point:(function(Ue,at,dt,_t,At,xt){return Le(Ue,at,dt,1,At,xt)})(w.tileAnchorPoint,Ee,ge,0,b,w),Re=Ce(i.writingMode,ge,ke,$);if(Re)return Re}const de=vt(G*D.getoffsetX(i.glyphStartIndex),ne,le,g,i.segment,i.lineStartIndex,i.lineStartIndex+i.lineLength,w,W);if(!de||w.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};he=[de]}for(const de of he)l.aj(z,de.point,de.angle);return{}}function Le(w,i,f,g,y,b){const k=w.add(w.sub(i)._unit()),D=y!==void 0?ve(k.x,k.y,y,b.getElevation).point:Je(k.x,k.y,b).point,z=f.sub(D);return f.add(z._mult(g/z.mag()))}function Te(w,i,f){const g=i.projectionCache;if(g.projections[w])return g.projections[w];const y=new l.P(i.lineVertexArray.getx(w),i.lineVertexArray.gety(w)),b=Je(y.x,y.y,i);if(b.signedDistanceFromCamera>0)return g.projections[w]=b.point,g.anyProjectionOccluded=g.anyProjectionOccluded||b.isOccluded,b.point;const k=w-f.direction;return(function(D,z,$,W,G){return Le(D,z,$,W,void 0,G)})(f.distanceFromAnchor===0?i.tileAnchorPoint:new l.P(i.lineVertexArray.getx(k),i.lineVertexArray.gety(k)),y,f.previousVertex,f.absOffsetX-f.distanceFromAnchor+1,i)}function Je(w,i,f){const g=w+f.translation[0],y=i+f.translation[1];let b;return!f.pitchWithMap&&f.projection.useSpecialProjectionForSymbols?(b=f.projection.projectTileCoordinates(g,y,f.unwrappedTileID,f.getElevation),b.point.x=(.5*b.point.x+.5)*f.width,b.point.y=(.5*-b.point.y+.5)*f.height):(b=ve(g,y,f.labelPlaneMatrix,f.getElevation),b.isOccluded=!1),b}function st(w,i,f){return w._unit()._perp()._mult(i*f)}function He(w,i,f,g,y,b,k,D,z){if(D.projectionCache.offsets[w])return D.projectionCache.offsets[w];const $=f.add(i);if(w+z.direction<g||w+z.direction>=y)return D.projectionCache.offsets[w]=$,$;const W=Te(w+z.direction,D,z),G=st(W.sub(f),k,z.direction),ne=f.add(G),le=W.add(G);return D.projectionCache.offsets[w]=l.ak(b,$,ne,le)||$,D.projectionCache.offsets[w]}function vt(w,i,f,g,y,b,k,D,z){const $=g?w-i:w+i;let W=$>0?1:-1,G=0;g&&(W*=-1,G=Math.PI),W<0&&(G+=Math.PI);let ne,le=W>0?b+y:b+y+1;D.projectionCache.cachedAnchorPoint?ne=D.projectionCache.cachedAnchorPoint:(ne=Je(D.tileAnchorPoint.x,D.tileAnchorPoint.y,D).point,D.projectionCache.cachedAnchorPoint=ne);let he,de,ge=ne,_e=ne,Ee=0,pe=0;const ke=Math.abs($),Re=[];let Ue;for(;Ee+pe<=ke;){if(le+=W,le<b||le>=k)return null;Ee+=pe,_e=ge,de=he;const _t={absOffsetX:ke,direction:W,distanceFromAnchor:Ee,previousVertex:_e};if(ge=Te(le,D,_t),f===0)Re.push(_e),Ue=ge.sub(_e);else{let At;const xt=ge.sub(_e);At=xt.mag()===0?st(Te(le+W,D,_t).sub(ge),f,W):st(xt,f,W),de||(de=_e.add(At)),he=He(le,At,ge,b,k,de,f,D,_t),Re.push(de),Ue=he.sub(de)}pe=Ue.mag()}const at=Ue._mult((ke-Ee)/pe)._add(de||_e),dt=G+Math.atan2(ge.y-_e.y,ge.x-_e.x);return Re.push(at),{point:at,angle:z?dt:0,path:Re}}const Lt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Gt(w,i){for(let f=0;f<w;f++){const g=i.length;i.resize(g+4),i.float32.set(Lt,3*g)}}function Ar(w,i,f){const g=i[0],y=i[1];return w[0]=f[0]*g+f[4]*y+f[12],w[1]=f[1]*g+f[5]*y+f[13],w[3]=f[3]*g+f[7]*y+f[15],w}const lr=100;class Er{constructor(i,f,g=new Ua(i.width+200,i.height+200,25),y=new Ua(i.width+200,i.height+200,25)){this.transform=i,this.mapProjection=f,this.grid=g,this.ignoredGrid=y,this.pitchFactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+lr,this.screenBottomBoundary=i.height+lr,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,f,g,y,b,k,D,z,$,W,G){const ne=i.anchorPointX+z[0],le=i.anchorPointY+z[1],he=this.projectAndGetPerspectiveRatio(y,ne,le,b,W),de=g*he.perspectiveRatio;let ge;if(k||D)ge=this._projectCollisionBox(i,de,y,b,k,D,z,he,W,G);else{const Re=he.point.x+(G?G.x*de:0),Ue=he.point.y+(G?G.y*de:0);ge={allPointsOccluded:!1,box:[Re+i.x1*de,Ue+i.y1*de,Re+i.x2*de,Ue+i.y2*de]}}const[_e,Ee,pe,ke]=ge.box;return this.mapProjection.useSpecialProjectionForSymbols&&(k?ge.allPointsOccluded:this.mapProjection.isOccluded(ne,le,b))||he.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(_e,Ee,pe,ke)||f!=="always"&&this.grid.hitTest(_e,Ee,pe,ke,f,$)?{box:[_e,Ee,pe,ke],placeable:!1,offscreen:!1}:{box:[_e,Ee,pe,ke],placeable:!0,offscreen:this.isOffscreen(_e,Ee,pe,ke)}}placeCollisionCircles(i,f,g,y,b,k,D,z,$,W,G,ne,le,he,de,ge){const _e=[],Ee=new l.P(f.anchorX,f.anchorY),pe=this.getPerspectiveRatio(k,Ee.x,Ee.y,D,ge),ke=(G?b/pe:b*pe)/l.ap,Re={getElevation:ge,labelPlaneMatrix:z,lineVertexArray:g,pitchWithMap:G,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:Ee,unwrappedTileID:D,width:this.transform.width,height:this.transform.height,translation:de},Ue=me(ke,y,f.lineOffsetX*ke,f.lineOffsetY*ke,!1,f,!1,Re);let at=!1,dt=!1,_t=!0;if(Ue){const At=.5*le*pe+he,xt=new l.P(-100,-100),gt=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Rt=new ir,tr=Ue.first,wt=Ue.last;let Pt=[];for(let ur=tr.path.length-1;ur>=1;ur--)Pt.push(tr.path[ur]);for(let ur=1;ur<wt.path.length;ur++)Pt.push(wt.path[ur]);const er=2.5*At;if($){const ur=this.projectPathToScreenSpace(Pt,Re,$);Pt=ur.some((yr=>yr.signedDistanceFromCamera<=0))?[]:ur.map((yr=>yr.point))}let qr=[];if(Pt.length>0){const ur=Pt[0].clone(),yr=Pt[0].clone();for(let Hr=1;Hr<Pt.length;Hr++)ur.x=Math.min(ur.x,Pt[Hr].x),ur.y=Math.min(ur.y,Pt[Hr].y),yr.x=Math.max(yr.x,Pt[Hr].x),yr.y=Math.max(yr.y,Pt[Hr].y);qr=ur.x>=xt.x&&yr.x<=gt.x&&ur.y>=xt.y&&yr.y<=gt.y?[Pt]:yr.x<xt.x||ur.x>gt.x||yr.y<xt.y||ur.y>gt.y?[]:l.al([Pt],xt.x,xt.y,gt.x,gt.y)}for(const ur of qr){Rt.reset(ur,.25*At);let yr=0;yr=Rt.length<=.5*At?1:Math.ceil(Rt.paddedLength/er)+1;for(let Hr=0;Hr<yr;Hr++){const Xn=Hr/Math.max(yr-1,1),oa=Rt.lerp(Xn),Zr=oa.x+lr,Fn=oa.y+lr;_e.push(Zr,Fn,At,0);const on=Zr-At,Pn=Fn-At,ii=Zr+At,Ja=Fn+At;if(_t=_t&&this.isOffscreen(on,Pn,ii,Ja),dt=dt||this.isInsideGrid(on,Pn,ii,Ja),i!=="always"&&this.grid.hitTestCircle(Zr,Fn,At,i,ne)&&(at=!0,!W))return{circles:[],offscreen:!1,collisionDetected:at}}}}return{circles:!W&&at||!dt||pe<this.perspectiveRatioCutoff?[]:_e,offscreen:_t,collisionDetected:at}}projectPathToScreenSpace(i,f,g){return i.map((y=>ve(y.x,y.y,g,f.getElevation)))}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[];let g=1/0,y=1/0,b=-1/0,k=-1/0;for(const W of i){const G=new l.P(W.x+lr,W.y+lr);g=Math.min(g,G.x),y=Math.min(y,G.y),b=Math.max(b,G.x),k=Math.max(k,G.y),f.push(G)}const D=this.grid.query(g,y,b,k).concat(this.ignoredGrid.query(g,y,b,k)),z={},$={};for(const W of D){const G=W.key;if(z[G.bucketInstanceId]===void 0&&(z[G.bucketInstanceId]={}),z[G.bucketInstanceId][G.featureIndex])continue;const ne=[new l.P(W.x1,W.y1),new l.P(W.x2,W.y1),new l.P(W.x2,W.y2),new l.P(W.x1,W.y2)];l.am(f,ne)&&(z[G.bucketInstanceId][G.featureIndex]=!0,$[G.bucketInstanceId]===void 0&&($[G.bucketInstanceId]=[]),$[G.bucketInstanceId].push(G.featureIndex))}return $}insertCollisionBox(i,f,g,y,b,k){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:b,collisionGroupID:k,overlapMode:f},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,f,g,y,b,k){const D=g?this.ignoredGrid:this.grid,z={bucketInstanceId:y,featureIndex:b,collisionGroupID:k,overlapMode:f};for(let $=0;$<i.length;$+=4)D.insertCircle(z,i[$],i[$+1],i[$+2])}projectAndGetPerspectiveRatio(i,f,g,y,b){let k;b?(k=[f,g,b(f,g),1],l.af(k,k,i)):(k=[f,g,0,1],Ar(k,k,i));const D=k[3];return{point:new l.P((k[0]/D+1)/2*this.transform.width+lr,(-k[1]/D+1)/2*this.transform.height+lr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/D*.5,isOccluded:!1,signedDistanceFromCamera:D}}getPerspectiveRatio(i,f,g,y,b){const k=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(f,g,y,b):ve(f,g,i,b);return .5+this.transform.cameraToCenterDistance/k.signedDistanceFromCamera*.5}isOffscreen(i,f,g,y){return g<lr||i>=this.screenRightBoundary||y<lr||f>this.screenBottomBoundary}isInsideGrid(i,f,g,y){return g>=0&&i<this.gridRightBoundary&&y>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const i=l.an([]);return l.J(i,i,[-100,-100,0]),i}_projectCollisionBox(i,f,g,y,b,k,D,z,$,W){let G=new l.P(1,0),ne=new l.P(0,1);const le=new l.P(i.anchorPointX+D[0],i.anchorPointY+D[1]);if(k&&!b){const _t=this.projectAndGetPerspectiveRatio(g,le.x+1,le.y,y,$).point.sub(z.point).unit(),At=Math.atan(_t.y/_t.x)+(_t.x<0?Math.PI:0),xt=Math.sin(At),gt=Math.cos(At);G=new l.P(gt,xt),ne=new l.P(-xt,gt)}else if(!k&&b){const _t=-this.transform.angle,At=Math.sin(_t),xt=Math.cos(_t);G=new l.P(xt,At),ne=new l.P(-At,xt)}let he=z.point,de=f;if(b){he=le;const _t=this.transform.zoom-Math.floor(this.transform.zoom);de=Math.pow(2,-_t),de*=this.mapProjection.getPitchedTextCorrection(this.transform,le,y),W||(de*=l.ac(.5+z.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}W&&(he=he.add(G.mult(W.x*de)).add(ne.mult(W.y*de)));const ge=i.x1*de,_e=i.x2*de,Ee=(ge+_e)/2,pe=i.y1*de,ke=i.y2*de,Re=(pe+ke)/2,Ue=[{offsetX:ge,offsetY:pe},{offsetX:Ee,offsetY:pe},{offsetX:_e,offsetY:pe},{offsetX:_e,offsetY:Re},{offsetX:_e,offsetY:ke},{offsetX:Ee,offsetY:ke},{offsetX:ge,offsetY:ke},{offsetX:ge,offsetY:Re}];let at=[];for(const{offsetX:_t,offsetY:At}of Ue)at.push(new l.P(he.x+G.x*_t+ne.x*At,he.y+G.y*_t+ne.y*At));let dt=!1;if(b){const _t=at.map((At=>this.projectAndGetPerspectiveRatio(g,At.x,At.y,y,$)));dt=_t.some((At=>!At.isOccluded)),at=_t.map((At=>At.point))}else dt=!0;return{box:l.ao(at),allPointsOccluded:!dt}}}function pr(w,i,f){return i*(l.X/(w.tileSize*Math.pow(2,f-w.tileID.overscaledZ)))}class En{constructor(i,f,g,y){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?f:-f))):y&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class pn{constructor(i,f,g,y,b){this.text=new En(i?i.text:null,f,g,b),this.icon=new En(i?i.icon:null,f,y,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class _r{constructor(i,f,g){this.text=i,this.icon=f,this.skipFade=g}}class Lr{constructor(){this.invProjMatrix=l.H(),this.viewportMatrix=l.H(),this.circles=[]}}class nn{constructor(i,f,g,y,b){this.bucketInstanceId=i,this.featureIndex=f,this.sourceLayerIndex=g,this.bucketIndex=y,this.tileID=b}}class Nn{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const f=++this.maxGroupID;this.collisionGroups[i]={ID:f,predicate:g=>g.collisionGroupID===f}}return this.collisionGroups[i]}}function Zn(w,i,f,g,y){const{horizontalAlign:b,verticalAlign:k}=l.au(w);return new l.P(-(b-.5)*i+g[0]*y,-(k-.5)*f+g[1]*y)}class wi{constructor(i,f,g,y,b,k){this.transform=i.clone(),this.terrain=g,this.collisionIndex=new Er(this.transform,f),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new Nn(b),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=k,k&&(k.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(i){const f=this.terrain;return f?(g,y)=>f.getElevation(i,g,y):null}getBucketParts(i,f,g,y){const b=g.getBucket(f),k=g.latestFeatureIndex;if(!b||!k||f.id!==b.layerIds[0])return;const D=g.collisionBoxArray,z=b.layers[0].layout,$=b.layers[0].paint,W=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),G=g.tileSize/l.X,ne=g.tileID.toUnwrapped(),le=this.transform.calculatePosMatrix(ne),he=z.get("text-pitch-alignment")==="map",de=z.get("text-rotation-alignment")==="map",ge=pr(g,1,this.transform.zoom),_e=this.collisionIndex.mapProjection.translatePosition(this.transform,g,$.get("text-translate"),$.get("text-translate-anchor")),Ee=this.collisionIndex.mapProjection.translatePosition(this.transform,g,$.get("icon-translate"),$.get("icon-translate-anchor")),pe=ta(le,he,de,this.transform,ge);let ke=null;if(he){const Ue=bi(le,he,de,this.transform,ge);ke=l.L([],this.transform.labelPlaneMatrix,Ue)}this.retainedQueryData[b.bucketInstanceId]=new nn(b.bucketInstanceId,k,b.sourceLayerIndex,b.index,g.tileID);const Re={bucket:b,layout:z,translationText:_e,translationIcon:Ee,posMatrix:le,unwrappedTileID:ne,textLabelPlaneMatrix:pe,labelToScreenMatrix:ke,scale:W,textPixelRatio:G,holdingForFade:g.holdingForFade(),collisionBoxArray:D,partiallyEvaluatedTextSize:l.ag(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(y)for(const Ue of b.sortKeyRanges){const{sortKey:at,symbolInstanceStart:dt,symbolInstanceEnd:_t}=Ue;i.push({sortKey:at,symbolInstanceStart:dt,symbolInstanceEnd:_t,parameters:Re})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:Re})}attemptAnchorPlacement(i,f,g,y,b,k,D,z,$,W,G,ne,le,he,de,ge,_e,Ee,pe){const ke=l.aq[i.textAnchor],Re=[i.textOffset0,i.textOffset1],Ue=Zn(ke,g,y,Re,b),at=this.collisionIndex.placeCollisionBox(f,ne,z,$,W,D,k,ge,G.predicate,pe,Ue);if((!Ee||this.collisionIndex.placeCollisionBox(Ee,ne,z,$,W,D,k,_e,G.predicate,pe,Ue).placeable)&&at.placeable){let dt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[le.crossTileID]&&this.prevPlacement.placements[le.crossTileID]&&this.prevPlacement.placements[le.crossTileID].text&&(dt=this.prevPlacement.variableOffsets[le.crossTileID].anchor),le.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[le.crossTileID]={textOffset:Re,width:g,height:y,anchor:ke,textBoxScale:b,prevAnchor:dt},this.markUsedJustification(he,ke,le,de),he.allowVerticalPlacement&&(this.markUsedOrientation(he,de,le),this.placedOrientations[le.crossTileID]=de),{shift:Ue,placedGlyphBoxes:at}}}placeLayerBucketPart(i,f,g){const{bucket:y,layout:b,translationText:k,translationIcon:D,posMatrix:z,unwrappedTileID:$,textLabelPlaneMatrix:W,labelToScreenMatrix:G,textPixelRatio:ne,holdingForFade:le,collisionBoxArray:he,partiallyEvaluatedTextSize:de,collisionGroup:ge}=i.parameters,_e=b.get("text-optional"),Ee=b.get("icon-optional"),pe=l.ar(b,"text-overlap","text-allow-overlap"),ke=pe==="always",Re=l.ar(b,"icon-overlap","icon-allow-overlap"),Ue=Re==="always",at=b.get("text-rotation-alignment")==="map",dt=b.get("text-pitch-alignment")==="map",_t=b.get("icon-text-fit")!=="none",At=b.get("symbol-z-order")==="viewport-y",xt=ke&&(Ue||!y.hasIconData()||Ee),gt=Ue&&(ke||!y.hasTextData()||_e);!y.collisionArrays&&he&&y.deserializeCollisionBoxes(he);const Rt=this._getTerrainElevationFunc(this.retainedQueryData[y.bucketInstanceId].tileID),tr=(wt,Pt,er)=>{var qr,ur;if(f[wt.crossTileID])return;if(le)return void(this.placements[wt.crossTileID]=new _r(!1,!1,!1));let yr=!1,Hr=!1,Xn=!0,oa=null,Zr={box:null,placeable:!1,offscreen:null},Fn={placeable:!1},on=null,Pn=null,ii=null,Ja=0,Ui=0,Qa=0;Pt.textFeatureIndex?Ja=Pt.textFeatureIndex:wt.useRuntimeCollisionCircles&&(Ja=wt.featureIndex),Pt.verticalTextFeatureIndex&&(Ui=Pt.verticalTextFeatureIndex);const xs=Pt.textBox;if(xs){const Ai=In=>{let cn=l.ah.horizontal;if(y.allowVerticalPlacement&&!In&&this.prevPlacement){const ai=this.prevPlacement.placedOrientations[wt.crossTileID];ai&&(this.placedOrientations[wt.crossTileID]=ai,cn=ai,this.markUsedOrientation(y,cn,wt))}return cn},la=(In,cn)=>{if(y.allowVerticalPlacement&&wt.numVerticalGlyphVertices>0&&Pt.verticalTextBox){for(const ai of y.writingModes)if(ai===l.ah.vertical?(Zr=cn(),Fn=Zr):Zr=In(),Zr&&Zr.placeable)break}else Zr=In()},eo=wt.textAnchorOffsetStartIndex,Aa=wt.textAnchorOffsetEndIndex;if(Aa===eo){const In=(cn,ai)=>{const xr=this.collisionIndex.placeCollisionBox(cn,pe,ne,z,$,dt,at,k,ge.predicate,Rt);return xr&&xr.placeable&&(this.markUsedOrientation(y,ai,wt),this.placedOrientations[wt.crossTileID]=ai),xr};la((()=>In(xs,l.ah.horizontal)),(()=>{const cn=Pt.verticalTextBox;return y.allowVerticalPlacement&&wt.numVerticalGlyphVertices>0&&cn?In(cn,l.ah.vertical):{box:null,offscreen:null}})),Ai(Zr&&Zr.placeable)}else{let In=l.aq[(ur=(qr=this.prevPlacement)===null||qr===void 0?void 0:qr.variableOffsets[wt.crossTileID])===null||ur===void 0?void 0:ur.anchor];const cn=(xr,ua,bs)=>{const to=xr.x2-xr.x1,Lh=xr.y2-xr.y1,Bh=wt.textBoxScale,mn=_t&&Re==="never"?ua:null;let ro=null,jc=pe==="never"?1:2,Ul="never";In&&jc++;for(let ws=0;ws<jc;ws++){for(let ql=eo;ql<Aa;ql++){const _o=y.textAnchorOffsets.get(ql);if(In&&_o.textAnchor!==In)continue;const Kr=this.attemptAnchorPlacement(_o,xr,to,Lh,Bh,at,dt,ne,z,$,ge,Ul,wt,y,bs,k,D,mn,Rt);if(Kr&&(ro=Kr.placedGlyphBoxes,ro&&ro.placeable))return yr=!0,oa=Kr.shift,ro}In?In=null:Ul=pe}return g&&!ro&&(ro={box:this.collisionIndex.placeCollisionBox(xs,"always",ne,z,$,dt,at,k,ge.predicate,Rt,new l.P(0,0)).box,offscreen:!1,placeable:!1}),ro};la((()=>cn(xs,Pt.iconBox,l.ah.horizontal)),(()=>{const xr=Pt.verticalTextBox;return y.allowVerticalPlacement&&(!Zr||!Zr.placeable)&&wt.numVerticalGlyphVertices>0&&xr?cn(xr,Pt.verticalIconBox,l.ah.vertical):{box:null,occluded:!0,offscreen:null}})),Zr&&(yr=Zr.placeable,Xn=Zr.offscreen);const ai=Ai(Zr&&Zr.placeable);if(!yr&&this.prevPlacement){const xr=this.prevPlacement.variableOffsets[wt.crossTileID];xr&&(this.variableOffsets[wt.crossTileID]=xr,this.markUsedJustification(y,xr.anchor,wt,ai))}}}if(on=Zr,yr=on&&on.placeable,Xn=on&&on.offscreen,wt.useRuntimeCollisionCircles){const Ai=y.text.placedSymbolArray.get(wt.centerJustifiedTextSymbolIndex),la=l.ai(y.textSizeData,de,Ai),eo=b.get("text-padding");Pn=this.collisionIndex.placeCollisionCircles(pe,Ai,y.lineVertexArray,y.glyphOffsetArray,la,z,$,W,G,g,dt,ge.predicate,wt.collisionCircleDiameter,eo,k,Rt),Pn.circles.length&&Pn.collisionDetected&&!g&&l.w("Collisions detected, but collision boxes are not shown"),yr=ke||Pn.circles.length>0&&!Pn.collisionDetected,Xn=Xn&&Pn.offscreen}if(Pt.iconFeatureIndex&&(Qa=Pt.iconFeatureIndex),Pt.iconBox){const Ai=la=>this.collisionIndex.placeCollisionBox(la,Re,ne,z,$,dt,at,D,ge.predicate,Rt,_t&&oa?oa:void 0);Fn&&Fn.placeable&&Pt.verticalIconBox?(ii=Ai(Pt.verticalIconBox),Hr=ii.placeable):(ii=Ai(Pt.iconBox),Hr=ii.placeable),Xn=Xn&&ii.offscreen}const sa=_e||wt.numHorizontalGlyphVertices===0&&wt.numVerticalGlyphVertices===0,Ta=Ee||wt.numIconVertices===0;sa||Ta?Ta?sa||(Hr=Hr&&yr):yr=Hr&&yr:Hr=yr=Hr&&yr;const vo=Hr&&ii.placeable;if(yr&&on.placeable&&this.collisionIndex.insertCollisionBox(on.box,pe,b.get("text-ignore-placement"),y.bucketInstanceId,Fn&&Fn.placeable&&Ui?Ui:Ja,ge.ID),vo&&this.collisionIndex.insertCollisionBox(ii.box,Re,b.get("icon-ignore-placement"),y.bucketInstanceId,Qa,ge.ID),Pn&&yr&&this.collisionIndex.insertCollisionCircles(Pn.circles,pe,b.get("text-ignore-placement"),y.bucketInstanceId,Ja,ge.ID),g&&this.storeCollisionData(y.bucketInstanceId,er,Pt,on,ii,Pn),wt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[wt.crossTileID]=new _r(yr||xt,Hr||gt,Xn||y.justReloaded),f[wt.crossTileID]=!0};if(At){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const wt=y.getSortedSymbolIndexes(this.transform.angle);for(let Pt=wt.length-1;Pt>=0;--Pt){const er=wt[Pt];tr(y.symbolInstances.get(er),y.collisionArrays[er],er)}}else for(let wt=i.symbolInstanceStart;wt<i.symbolInstanceEnd;wt++)tr(y.symbolInstances.get(wt),y.collisionArrays[wt],wt);if(g&&y.bucketInstanceId in this.collisionCircleArrays){const wt=this.collisionCircleArrays[y.bucketInstanceId];l.as(wt.invProjMatrix,z),wt.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}storeCollisionData(i,f,g,y,b,k){if(g.textBox||g.iconBox){let D,z;this.collisionBoxArrays.has(i)?D=this.collisionBoxArrays.get(i):(D=new Map,this.collisionBoxArrays.set(i,D)),D.has(f)?z=D.get(f):(z={text:null,icon:null},D.set(f,z)),g.textBox&&(z.text=y.box),g.iconBox&&(z.icon=b.box)}if(k){let D=this.collisionCircleArrays[i];D===void 0&&(D=this.collisionCircleArrays[i]=new Lr);for(let z=0;z<k.circles.length;z+=4)D.circles.push(k.circles[z+0]),D.circles.push(k.circles[z+1]),D.circles.push(k.circles[z+2]),D.circles.push(k.collisionDetected?1:0)}}markUsedJustification(i,f,g,y){let b;b=y===l.ah.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[l.at(f)];const k=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(const D of k)D>=0&&(i.text.placedSymbolArray.get(D).crossTileID=b>=0&&D!==b?0:g.crossTileID)}markUsedOrientation(i,f,g){const y=f===l.ah.horizontal||f===l.ah.horizontalOnly?f:0,b=f===l.ah.vertical?f:0,k=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(const D of k)i.text.placedSymbolArray.get(D).placedOrientation=y;g.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let g=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const y=f?f.symbolFadeChange(i):1,b=f?f.opacities:{},k=f?f.variableOffsets:{},D=f?f.placedOrientations:{};for(const z in this.placements){const $=this.placements[z],W=b[z];W?(this.opacities[z]=new pn(W,y,$.text,$.icon),g=g||$.text!==W.text.placed||$.icon!==W.icon.placed):(this.opacities[z]=new pn(null,y,$.text,$.icon,$.skipFade),g=g||$.text||$.icon)}for(const z in b){const $=b[z];if(!this.opacities[z]){const W=new pn($,y,!1,!1);W.isHidden()||(this.opacities[z]=W,g=g||$.text.placed||$.icon.placed)}}for(const z in k)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=k[z]);for(const z in D)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=D[z]);if(f&&f.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:i)}updateLayerOpacities(i,f){const g={};for(const y of f){const b=y.getBucket(i);b&&y.latestFeatureIndex&&i.id===b.layerIds[0]&&this.updateBucketOpacities(b,y.tileID,g,y.collisionBoxArray)}}updateBucketOpacities(i,f,g,y){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const b=i.layers[0],k=b.layout,D=new pn(null,0,!1,!1,!0),z=k.get("text-allow-overlap"),$=k.get("icon-allow-overlap"),W=b._unevaluatedLayout.hasValue("text-variable-anchor")||b._unevaluatedLayout.hasValue("text-variable-anchor-offset"),G=k.get("text-rotation-alignment")==="map",ne=k.get("text-pitch-alignment")==="map",le=k.get("icon-text-fit")!=="none",he=new pn(null,0,z&&($||!i.hasIconData()||k.get("icon-optional")),$&&(z||!i.hasTextData()||k.get("text-optional")),!0);!i.collisionArrays&&y&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(y);const de=(_e,Ee,pe)=>{for(let ke=0;ke<Ee/4;ke++)_e.opacityVertexArray.emplaceBack(pe);_e.hasVisibleVertices=_e.hasVisibleVertices||pe!==Si},ge=this.collisionBoxArrays.get(i.bucketInstanceId);for(let _e=0;_e<i.symbolInstances.length;_e++){const Ee=i.symbolInstances.get(_e),{numHorizontalGlyphVertices:pe,numVerticalGlyphVertices:ke,crossTileID:Re}=Ee;let Ue=this.opacities[Re];g[Re]?Ue=D:Ue||(Ue=he,this.opacities[Re]=Ue),g[Re]=!0;const at=Ee.numIconVertices>0,dt=this.placedOrientations[Ee.crossTileID],_t=dt===l.ah.vertical,At=dt===l.ah.horizontal||dt===l.ah.horizontalOnly;if(pe>0||ke>0){const gt=di(Ue.text);de(i.text,pe,_t?Si:gt),de(i.text,ke,At?Si:gt);const Rt=Ue.text.isHidden();[Ee.rightJustifiedTextSymbolIndex,Ee.centerJustifiedTextSymbolIndex,Ee.leftJustifiedTextSymbolIndex].forEach((Pt=>{Pt>=0&&(i.text.placedSymbolArray.get(Pt).hidden=Rt||_t?1:0)})),Ee.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Ee.verticalPlacedTextSymbolIndex).hidden=Rt||At?1:0);const tr=this.variableOffsets[Ee.crossTileID];tr&&this.markUsedJustification(i,tr.anchor,Ee,dt);const wt=this.placedOrientations[Ee.crossTileID];wt&&(this.markUsedJustification(i,"left",Ee,wt),this.markUsedOrientation(i,wt,Ee))}if(at){const gt=di(Ue.icon),Rt=!(le&&Ee.verticalPlacedIconSymbolIndex&&_t);Ee.placedIconSymbolIndex>=0&&(de(i.icon,Ee.numIconVertices,Rt?gt:Si),i.icon.placedSymbolArray.get(Ee.placedIconSymbolIndex).hidden=Ue.icon.isHidden()),Ee.verticalPlacedIconSymbolIndex>=0&&(de(i.icon,Ee.numVerticalIconVertices,Rt?Si:gt),i.icon.placedSymbolArray.get(Ee.verticalPlacedIconSymbolIndex).hidden=Ue.icon.isHidden())}const xt=ge&&ge.has(_e)?ge.get(_e):{text:null,icon:null};if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const gt=i.collisionArrays[_e];if(gt){let Rt=new l.P(0,0);if(gt.textBox||gt.verticalTextBox){let tr=!0;if(W){const wt=this.variableOffsets[Re];wt?(Rt=Zn(wt.anchor,wt.width,wt.height,wt.textOffset,wt.textBoxScale),G&&Rt._rotate(ne?this.transform.angle:-this.transform.angle)):tr=!1}if(gt.textBox||gt.verticalTextBox){let wt;gt.textBox&&(wt=_t),gt.verticalTextBox&&(wt=At),bl(i.textCollisionBox.collisionVertexArray,Ue.text.placed,!tr||wt,xt.text,Rt.x,Rt.y)}}if(gt.iconBox||gt.verticalIconBox){const tr=!!(!At&&gt.verticalIconBox);let wt;gt.iconBox&&(wt=tr),gt.verticalIconBox&&(wt=!tr),bl(i.iconCollisionBox.collisionVertexArray,Ue.icon.placed,wt,xt.icon,le?Rt.x:0,le?Rt.y:0)}}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const _e=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=_e.invProjMatrix,i.placementViewportMatrix=_e.viewportMatrix,i.collisionCircleArray=_e.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,f){const g=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*g>i}setStale(){this.stale=!0}}function bl(w,i,f,g,y,b){g&&g.length!==0||(g=[0,0,0,0]);const k=g[0]-lr,D=g[1]-lr,z=g[2]-lr,$=g[3]-lr;w.emplaceBack(i?1:0,f?1:0,y||0,b||0,k,D),w.emplaceBack(i?1:0,f?1:0,y||0,b||0,z,D),w.emplaceBack(i?1:0,f?1:0,y||0,b||0,z,$),w.emplaceBack(i?1:0,f?1:0,y||0,b||0,k,$)}const ar=Math.pow(2,25),dh=Math.pow(2,24),pu=Math.pow(2,17),ji=Math.pow(2,16),fi=Math.pow(2,9),Up=Math.pow(2,8),ra=Math.pow(2,1);function di(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const i=w.placed?1:0,f=Math.floor(127*w.opacity);return f*ar+i*dh+f*pu+i*ji+f*fi+i*Up+f*ra+i}const Si=0;function Fs(){return{isOccluded:(w,i,f)=>!1,getPitchedTextCorrection:(w,i,f)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(w,i,f,g){throw new Error("Not implemented.")},translatePosition:(w,i,f,g)=>(function(y,b,k,D,z=!1){if(!k[0]&&!k[1])return[0,0];const $=z?D==="map"?y.angle:0:D==="viewport"?-y.angle:0;if($){const W=Math.sin($),G=Math.cos($);k=[k[0]*G-k[1]*W,k[0]*W+k[1]*G]}return[z?k[0]:pr(b,k[0],y.zoom),z?k[1]:pr(b,k[1],y.zoom)]})(w,i,f,g),getCircleRadiusCorrection:w=>1}}class Vr{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,f,g,y,b){const k=this._bucketParts;for(;this._currentTileIndex<i.length;)if(f.getBucketParts(k,y,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort(((D,z)=>D.sortKey-z.sortKey)));this._currentPartIndex<k.length;)if(f.placeLayerBucketPart(k[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,b())return!0;return!1}}class mu{constructor(i,f,g,y,b,k,D,z){this.placement=new wi(i,Fs(),f,k,D,z),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(i,f,g){const y=A.now(),b=()=>!this._forceFullPlacement&&A.now()-y>2;for(;this._currentPlacementIndex>=0;){const k=f[i[this._currentPlacementIndex]],D=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=D)&&(!k.maxzoom||k.maxzoom>D)){if(this._inProgressLayer||(this._inProgressLayer=new Vr(k)),this._inProgressLayer.continuePlacement(g[k.source],this.placement,this._showCollisionBoxes,k,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const qa=512/l.X/2;class Cn{constructor(i,f,g){this.tileID=i,this.bucketInstanceId=g,this._symbolsByKey={};const y=new Map;for(let b=0;b<f.length;b++){const k=f.get(b),D=k.key,z=y.get(D);z?z.push(k):y.set(D,[k])}for(const[b,k]of y){const D={positions:k.map((z=>({x:Math.floor(z.anchorX*qa),y:Math.floor(z.anchorY*qa)}))),crossTileIDs:k.map((z=>z.crossTileID))};if(D.positions.length>128){const z=new l.av(D.positions.length,16,Uint16Array);for(const{x:$,y:W}of D.positions)z.add($,W);z.finish(),delete D.positions,D.index=z}this._symbolsByKey[b]=D}}getScaledCoordinates(i,f){const{x:g,y,z:b}=this.tileID.canonical,{x:k,y:D,z}=f.canonical,$=qa/Math.pow(2,z-b),W=(D*l.X+i.anchorY)*$,G=y*l.X*qa;return{x:Math.floor((k*l.X+i.anchorX)*$-g*l.X*qa),y:Math.floor(W-G)}}findMatches(i,f,g){const y=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let b=0;b<i.length;b++){const k=i.get(b);if(k.crossTileID)continue;const D=this._symbolsByKey[k.key];if(!D)continue;const z=this.getScaledCoordinates(k,f);if(D.index){const $=D.index.range(z.x-y,z.y-y,z.x+y,z.y+y).sort();for(const W of $){const G=D.crossTileIDs[W];if(!g[G]){g[G]=!0,k.crossTileID=G;break}}}else if(D.positions)for(let $=0;$<D.positions.length;$++){const W=D.positions[$],G=D.crossTileIDs[$];if(Math.abs(W.x-z.x)<=y&&Math.abs(W.y-z.y)<=y&&!g[G]){g[G]=!0,k.crossTileID=G;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:i})=>i))}}class $s{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Li{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const f=Math.round((i-this.lng)/360);if(f!==0)for(const g in this.indexes){const y=this.indexes[g],b={};for(const k in y){const D=y[k];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+f),b[D.tileID.key]=D}this.indexes[g]=b}this.lng=i}addBucket(i,f,g){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let b=0;b<f.symbolInstances.length;b++)f.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const y=this.usedCrossTileIDs[i.overscaledZ];for(const b in this.indexes){const k=this.indexes[b];if(Number(b)>i.overscaledZ)for(const D in k){const z=k[D];z.tileID.isChildOf(i)&&z.findMatches(f.symbolInstances,i,y)}else{const D=k[i.scaledTo(Number(b)).key];D&&D.findMatches(f.symbolInstances,i,y)}}for(let b=0;b<f.symbolInstances.length;b++){const k=f.symbolInstances.get(b);k.crossTileID||(k.crossTileID=g.generate(),y[k.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Cn(i,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(i,f){for(const g of f.getCrossTileIDsLists())for(const y of g)delete this.usedCrossTileIDs[i][y]}removeStaleBuckets(i){let f=!1;for(const g in this.indexes){const y=this.indexes[g];for(const b in y)i[y[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,y[b]),delete y[b],f=!0)}return f}}class Vs{constructor(){this.layerIndexes={},this.crossTileIDs=new $s,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,f,g){let y=this.layerIndexes[i.id];y===void 0&&(y=this.layerIndexes[i.id]=new Li);let b=!1;const k={};y.handleWrapJump(g);for(const D of f){const z=D.getBucket(i);z&&i.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(D.tileID,z,this.crossTileIDs)&&(b=!0),k[z.bucketInstanceId]=!0)}return y.removeStaleBuckets(k)&&(b=!0),b}pruneUnusedLayers(i){const f={};i.forEach((g=>{f[g]=!0}));for(const g in this.layerIndexes)f[g]||delete this.layerIndexes[g]}}const Bi=(w,i)=>l.t(w,i&&i.filter((f=>f.identifier!=="source.canvas"))),qp=l.aw();class dc extends l.E{constructor(i,f={}){super(),this._rtlPluginLoaded=()=>{for(const g in this.sourceCaches){const y=this.sourceCaches[g].getSource().type;y!=="vector"&&y!=="geojson"||this.sourceCaches[g].reload()}},this.map=i,this.dispatcher=new Wt(ht(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",((g,y)=>this.getGlyphs(g,y))),this.dispatcher.registerMessageHandler("GI",((g,y)=>this.getImages(g,y))),this.imageManager=new Fe,this.imageManager.setEventedParent(this),this.glyphManager=new Qe(i._requestManager,f.localIdeographFontFamily),this.lineAtlas=new yt(256,512),this.crossTileSymbolIndex=new Vs,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",l.ay()),zi().on(pt,this._rtlPluginLoaded),this.on("data",(g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const y=this.sourceCaches[g.sourceId];if(!y)return;const b=y.getSource();if(b&&b.vectorLayerIds)for(const k in this._layers){const D=this._layers[k];D.source===b.id&&this._validateLayer(D)}}))}loadURL(i,f={},g){this.fire(new l.k("dataloading",{dataType:"style"})),f.validate=typeof f.validate!="boolean"||f.validate;const y=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController;const b=this._loadStyleRequest;l.h(y,this._loadStyleRequest).then((k=>{this._loadStyleRequest=null,this._load(k.data,f,g)})).catch((k=>{this._loadStyleRequest=null,k&&!b.signal.aborted&&this.fire(new l.j(k))}))}loadJSON(i,f={},g){this.fire(new l.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,A.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,f.validate=f.validate!==!1,this._load(i,f,g)})).catch((()=>{}))}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(qp,{validate:!1})}_load(i,f,g){var y;const b=f.transformStyle?f.transformStyle(g,i):i;if(!f.validate||!Bi(this,l.u(b))){this._loaded=!0,this.stylesheet=b;for(const k in b.sources)this.addSource(k,b.sources[k],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new nt(this.stylesheet.light),this.sky=new Ne(this.stylesheet.sky),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const i=l.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",i),this._order=i.map((f=>f.id)),this._layers={},this._serializedLayers=null;for(const f of i){const g=l.aA(f);g.setEventedParent(this,{layer:{id:f.id}}),this._layers[f.id]=g}}_loadSprite(i,f=!1,g=void 0){let y;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(b,k,D,z){return l._(this,void 0,void 0,(function*(){const $=Se(b),W=D>1?"@2x":"",G={},ne={};for(const{id:le,url:he}of $){const de=k.transformRequest(Be(he,W,".json"),"SpriteJSON");G[le]=l.h(de,z);const ge=k.transformRequest(Be(he,W,".png"),"SpriteImage");ne[le]=Q.getImage(ge,z)}return yield Promise.all([...Object.values(G),...Object.values(ne)]),(function(le,he){return l._(this,void 0,void 0,(function*(){const de={};for(const ge in le){de[ge]={};const _e=A.getImageCanvasContext((yield he[ge]).data),Ee=(yield le[ge]).data;for(const pe in Ee){const{width:ke,height:Re,x:Ue,y:at,sdf:dt,pixelRatio:_t,stretchX:At,stretchY:xt,content:gt,textFitWidth:Rt,textFitHeight:tr}=Ee[pe];de[ge][pe]={data:null,pixelRatio:_t,sdf:dt,stretchX:At,stretchY:xt,content:gt,textFitWidth:Rt,textFitHeight:tr,spriteData:{width:ke,height:Re,x:Ue,y:at,context:_e}}}}return de}))})(G,ne)}))})(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((b=>{if(this._spriteRequest=null,b)for(const k in b){this._spritesImagesIds[k]=[];const D=this._spritesImagesIds[k]?this._spritesImagesIds[k].filter((z=>!(z in b))):[];for(const z of D)this.imageManager.removeImage(z),this._changedImages[z]=!0;for(const z in b[k]){const $=k==="default"?z:`${k}:${z}`;this._spritesImagesIds[k].push($),$ in this.imageManager.images?this.imageManager.updateImage($,b[k][z],!1):this.imageManager.addImage($,b[k][z]),f&&(this._changedImages[$]=!0)}}})).catch((b=>{this._spriteRequest=null,y=b,this.fire(new l.j(y))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),f&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),g&&g(y)}))}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(i){const f=this.sourceCaches[i.source];if(!f)return;const g=i.sourceLayer;if(!g)return;const y=f.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(g)===-1)&&this.fire(new l.j(new Error(`Source layer "${g}" does not exist on source "${y.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i,f=!1){const g=this._serializedAllLayers();if(!i||i.length===0)return Object.values(f?l.aB(g):g);const y=[];for(const b of i)if(g[b]){const k=f?l.aB(g[b]):g[b];y.push(k)}return y}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const f=Object.keys(this._layers);for(const g of f){const y=this._layers[g];y.type!=="custom"&&(i[g]=y.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const f=this._changed;if(f){const y=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(y.length||b.length)&&this._updateWorkerLayers(y,b);for(const k in this._updatedSources){const D=this._updatedSources[k];if(D==="reload")this._reloadSource(k);else{if(D!=="clear")throw new Error(`Invalid action ${D}`);this._clearSource(k)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const k in this._updatedPaintProps)this._layers[k].updateTransitions(i);this.light.updateTransitions(i),this.sky.updateTransitions(i),this._resetUpdates()}const g={};for(const y in this.sourceCaches){const b=this.sourceCaches[y];g[y]=b.used,b.used=!1}for(const y of this._order){const b=this._layers[y];b.recalculate(i,this._availableImages),!b.isHidden(i.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const y in g){const b=this.sourceCaches[y];!!g[y]!=!!b.used&&b.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(i),this.sky.recalculate(i),this.z=i.zoom,f&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const f in this.sourceCaches)this.sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,f){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i,!1),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,f={}){var g;this._checkLoaded();const y=this.serialize();if(i=f.transformStyle?f.transformStyle(y,i):i,((g=f.validate)===null||g===void 0||g)&&Bi(this,l.u(i)))return!1;(i=l.aB(i)).layers=l.az(i.layers);const b=l.aC(y,i),k=this._getOperationsToPerform(b);if(k.unimplemented.length>0)throw new Error(`Unimplemented: ${k.unimplemented.join(", ")}.`);if(k.operations.length===0)return!1;for(const D of k.operations)D();return this.stylesheet=i,this._serializedLayers=null,!0}_getOperationsToPerform(i){const f=[],g=[];for(const y of i)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":f.push((()=>this.addLayer.apply(this,y.args)));break;case"removeLayer":f.push((()=>this.removeLayer.apply(this,y.args)));break;case"setPaintProperty":f.push((()=>this.setPaintProperty.apply(this,y.args)));break;case"setLayoutProperty":f.push((()=>this.setLayoutProperty.apply(this,y.args)));break;case"setFilter":f.push((()=>this.setFilter.apply(this,y.args)));break;case"addSource":f.push((()=>this.addSource.apply(this,y.args)));break;case"removeSource":f.push((()=>this.removeSource.apply(this,y.args)));break;case"setLayerZoomRange":f.push((()=>this.setLayerZoomRange.apply(this,y.args)));break;case"setLight":f.push((()=>this.setLight.apply(this,y.args)));break;case"setGeoJSONSourceData":f.push((()=>this.setGeoJSONSourceData.apply(this,y.args)));break;case"setGlyphs":f.push((()=>this.setGlyphs.apply(this,y.args)));break;case"setSprite":f.push((()=>this.setSprite.apply(this,y.args)));break;case"setSky":f.push((()=>this.setSky.apply(this,y.args)));break;case"setTerrain":f.push((()=>this.map.setTerrain.apply(this,y.args)));break;case"setTransition":f.push((()=>{}));break;default:g.push(y.command)}return{operations:f,unimplemented:g}}addImage(i,f){if(this.getImage(i))return this.fire(new l.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,f),this._afterImageUpdated(i)}updateImage(i,f){this.imageManager.updateImage(i,f)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new l.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,f,g={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(l.u.source,`sources.${i}`,f,null,g))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const y=this.sourceCaches[i]=new Qt(i,f,this.dispatcher);y.style=this,y.setEventedParent(this,(()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:i}))),y.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const g in this._layers)if(this._layers[g].source===i)return this.fire(new l.j(new Error(`Source "${i}" cannot be removed while layer "${g}" is using it.`)));const f=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],f.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),f.setEventedParent(null),f.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,f){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const g=this.sourceCaches[i].getSource();if(g.type!=="geojson")throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(f),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,f,g={}){this._checkLoaded();const y=i.id;if(this.getLayer(y))return void this.fire(new l.j(new Error(`Layer "${y}" already exists on this map.`)));let b;if(i.type==="custom"){if(Bi(this,l.aD(i)))return;b=l.aA(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(y,i.source),i=l.aB(i),i=l.e(i,{source:y})),this._validate(l.u.layer,`layers.${y}`,i,{arrayIndex:-1},g))return;b=l.aA(i),this._validateLayer(b),b.setEventedParent(this,{layer:{id:y}})}const k=f?this._order.indexOf(f):this._order.length;if(f&&k===-1)this.fire(new l.j(new Error(`Cannot add layer "${y}" before non-existing layer "${f}".`)));else{if(this._order.splice(k,0,y),this._layerOrderChanged=!0,this._layers[y]=b,this._removedLayers[y]&&b.source&&b.type!=="custom"){const D=this._removedLayers[y];delete this._removedLayers[y],D.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(i,f){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new l.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===f)return;const g=this._order.indexOf(i);this._order.splice(g,1);const y=f?this._order.indexOf(f):this._order.length;f&&y===-1?this.fire(new l.j(new Error(`Cannot move layer "${i}" before non-existing layer "${f}".`))):(this._order.splice(y,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const f=this._layers[i];if(!f)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${i}".`)));f.setEventedParent(null);const g=this._order.indexOf(i);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=f,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],f.onRemove&&f.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,f,g){this._checkLoaded();const y=this.getLayer(i);y?y.minzoom===f&&y.maxzoom===g||(f!=null&&(y.minzoom=f),g!=null&&(y.maxzoom=g),this._updateLayer(y)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,f,g={}){this._checkLoaded();const y=this.getLayer(i);if(y){if(!l.aE(y.filter,f))return f==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(l.u.filter,`layers.${y.id}.filter`,f,null,g)||(y.filter=l.aB(f),this._updateLayer(y)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return l.aB(this.getLayer(i).filter)}setLayoutProperty(i,f,g,y={}){this._checkLoaded();const b=this.getLayer(i);b?l.aE(b.getLayoutProperty(f),g)||(b.setLayoutProperty(f,g,y),this._updateLayer(b)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,f){const g=this.getLayer(i);if(g)return g.getLayoutProperty(f);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,f,g,y={}){this._checkLoaded();const b=this.getLayer(i);b?l.aE(b.getPaintProperty(f),g)||(b.setPaintProperty(f,g,y)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[i]=!0,this._serializedLayers=null):this.fire(new l.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,f){return this.getLayer(i).getPaintProperty(f)}setFeatureState(i,f){this._checkLoaded();const g=i.source,y=i.sourceLayer,b=this.sourceCaches[g];if(b===void 0)return void this.fire(new l.j(new Error(`The source '${g}' does not exist in the map's style.`)));const k=b.getSource().type;k==="geojson"&&y?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):k!=="vector"||y?(i.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),b.setFeatureState(y,i.id,f)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,f){this._checkLoaded();const g=i.source,y=this.sourceCaches[g];if(y===void 0)return void this.fire(new l.j(new Error(`The source '${g}' does not exist in the map's style.`)));const b=y.getSource().type,k=b==="vector"?i.sourceLayer:void 0;b!=="vector"||k?f&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(k,i.id,f):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const f=i.source,g=i.sourceLayer,y=this.sourceCaches[f];if(y!==void 0)return y.getSource().type!=="vector"||g?(i.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),y.getFeatureState(g,i.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=l.aF(this.sourceCaches,(b=>b.serialize())),f=this._serializeByIds(this._order,!0),g=this.map.getTerrain()||void 0,y=this.stylesheet;return l.aG({version:y.version,name:y.name,metadata:y.metadata,light:y.light,sky:y.sky,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,sources:i,layers:f,terrain:g},(b=>b!==void 0))}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const f=k=>this._layers[k].type==="fill-extrusion",g={},y=[];for(let k=this._order.length-1;k>=0;k--){const D=this._order[k];if(f(D)){g[D]=k;for(const z of i){const $=z[D];if($)for(const W of $)y.push(W)}}}y.sort(((k,D)=>D.intersectionZ-k.intersectionZ));const b=[];for(let k=this._order.length-1;k>=0;k--){const D=this._order[k];if(f(D))for(let z=y.length-1;z>=0;z--){const $=y[z].feature;if(g[$.layer.id]<k)break;b.push($),y.pop()}else for(const z of i){const $=z[D];if($)for(const W of $)b.push(W.feature)}}return b}queryRenderedFeatures(i,f,g){f&&f.filter&&this._validate(l.u.filter,"queryRenderedFeatures.filter",f.filter,null,f);const y={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const D of f.layers){const z=this._layers[D];if(!z)return this.fire(new l.j(new Error(`The layer '${D}' does not exist in the map's style and cannot be queried for features.`))),[];y[z.source]=!0}}const b=[];f.availableImages=this._availableImages;const k=this._serializedAllLayers();for(const D in this.sourceCaches)f.layers&&!y[D]||b.push(Ir(this.sourceCaches[D],this._layers,k,i,f,g));return this.placement&&b.push((function(D,z,$,W,G,ne,le){const he={},de=ne.queryRenderedSymbols(W),ge=[];for(const _e of Object.keys(de).map(Number))ge.push(le[_e]);ge.sort(mr);for(const _e of ge){const Ee=_e.featureIndex.lookupSymbolFeatures(de[_e.bucketInstanceId],z,_e.bucketIndex,_e.sourceLayerIndex,G.filter,G.layers,G.availableImages,D);for(const pe in Ee){const ke=he[pe]=he[pe]||[],Re=Ee[pe];Re.sort(((Ue,at)=>{const dt=_e.featureSortOrder;if(dt){const _t=dt.indexOf(Ue.featureIndex);return dt.indexOf(at.featureIndex)-_t}return at.featureIndex-Ue.featureIndex}));for(const Ue of Re)ke.push(Ue)}}for(const _e in he)he[_e].forEach((Ee=>{const pe=Ee.feature,ke=$[D[_e].source].getFeatureState(pe.layer["source-layer"],pe.id);pe.source=pe.layer.source,pe.layer["source-layer"]&&(pe.sourceLayer=pe.layer["source-layer"]),pe.state=ke}));return he})(this._layers,k,this.sourceCaches,i,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(i,f){f&&f.filter&&this._validate(l.u.filter,"querySourceFeatures.filter",f.filter,null,f);const g=this.sourceCaches[i];return g?(function(y,b){const k=y.getRenderableIds().map(($=>y.getTileByID($))),D=[],z={};for(let $=0;$<k.length;$++){const W=k[$],G=W.tileID.canonical.key;z[G]||(z[G]=!0,W.querySourceFeatures(D,b))}return D})(g,f):[]}getLight(){return this.light.getLight()}setLight(i,f={}){this._checkLoaded();const g=this.light.getLight();let y=!1;for(const k in i)if(!l.aE(i[k],g[k])){y=!0;break}if(!y)return;const b={now:A.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,f),this.light.updateTransitions(b)}getSky(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.sky}setSky(i,f={}){const g=this.getSky();let y=!1;if(!i&&!g)return;if(i&&!g)y=!0;else if(!i&&g)y=!0;else for(const k in i)if(!l.aE(i[k],g[k])){y=!0;break}if(!y)return;const b={now:A.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=i,this.sky.setSky(i,f),this.sky.updateTransitions(b)}_validate(i,f,g,y,b={}){return(!b||b.validate!==!1)&&Bi(this,i.call(l.u,l.e({key:f,style:this.serialize(),value:g,styleSpec:l.v},y)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),zi().off(pt,this._rtlPluginLoaded);for(const f in this._layers)this._layers[f].setEventedParent(null);for(const f in this.sourceCaches){const g=this.sourceCaches[f];g.setEventedParent(null),g.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const f in this.sourceCaches)this.sourceCaches[f].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,f,g,y,b=!1){let k=!1,D=!1;const z={};for(const $ of this._order){const W=this._layers[$];if(W.type!=="symbol")continue;if(!z[W.source]){const ne=this.sourceCaches[W.source];z[W.source]=ne.getRenderableIds(!0).map((le=>ne.getTileByID(le))).sort(((le,he)=>he.tileID.overscaledZ-le.tileID.overscaledZ||(le.tileID.isLessThan(he.tileID)?-1:1)))}const G=this.crossTileSymbolIndex.addLayer(W,z[W.source],i.center.lng);k=k||G}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(A.now(),i.zoom))&&(this.pauseablePlacement=new mu(i,this.map.terrain,this._order,b,f,g,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(A.now()),D=!0),k&&this.pauseablePlacement.placement.setStale()),D||k)for(const $ of this._order){const W=this._layers[$];W.type==="symbol"&&this.placement.updateLayerOpacities(W,z[W.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(A.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,f){return l._(this,void 0,void 0,(function*(){const g=yield this.imageManager.getImages(f.icons);this._updateTilesForChangedImages();const y=this.sourceCaches[f.source];return y&&y.setDependencies(f.tileID.key,f.type,f.icons),g}))}getGlyphs(i,f){return l._(this,void 0,void 0,(function*(){const g=yield this.glyphManager.getGlyphs(f.stacks),y=this.sourceCaches[f.source];return y&&y.setDependencies(f.tileID.key,f.type,[""]),g}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,f={}){this._checkLoaded(),i&&this._validate(l.u.glyphs,"glyphs",i,null,f)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,f,g={},y){this._checkLoaded();const b=[{id:i,url:f}],k=[...Se(this.stylesheet.sprite),...b];this._validate(l.u.sprite,"sprite",k,null,g)||(this.stylesheet.sprite=k,this._loadSprite(b,!0,y))}removeSprite(i){this._checkLoaded();const f=Se(this.stylesheet.sprite);if(f.find((g=>g.id===i))){if(this._spritesImagesIds[i])for(const g of this._spritesImagesIds[i])this.imageManager.removeImage(g),this._changedImages[g]=!0;f.splice(f.findIndex((g=>g.id===i)),1),this.stylesheet.sprite=f.length>0?f:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return Se(this.stylesheet.sprite)}setSprite(i,f={},g){this._checkLoaded(),i&&this._validate(l.u.sprite,"sprite",i,null,f)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,g):(this._unloadSprite(),g&&g(null)))}}var Eo=l.Y([{name:"a_pos",type:"Int16",components:2}]);const Co={prelude:Cr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Cr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Cr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Cr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Cr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Cr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Cr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Cr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Cr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Cr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Cr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Cr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Cr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Cr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Cr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Cr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Cr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Cr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Cr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Cr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Cr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Cr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Cr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Cr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Cr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Cr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Cr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Cr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Cr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Cr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Cr(w,i){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=i.match(/attribute ([\w]+) ([\w]+)/g),y=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=b?b.concat(y):y,D={};return{fragmentSource:w=w.replace(f,((z,$,W,G,ne)=>(D[ne]=!0,$==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
varying ${W} ${G} ${ne};
#else
uniform ${W} ${G} u_${ne};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ne}
    ${W} ${G} ${ne} = u_${ne};
#endif
`))),vertexSource:i=i.replace(f,((z,$,W,G,ne)=>{const le=G==="float"?"vec2":"vec4",he=ne.match(/color/)?"color":le;return D[ne]?$==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
uniform lowp float u_${ne}_t;
attribute ${W} ${le} a_${ne};
varying ${W} ${G} ${ne};
#else
uniform ${W} ${G} u_${ne};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${ne}
    ${ne} = a_${ne};
#else
    ${W} ${G} ${ne} = u_${ne};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ne}
    ${ne} = unpack_mix_${he}(a_${ne}, u_${ne}_t);
#else
    ${W} ${G} ${ne} = u_${ne};
#endif
`:$==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
uniform lowp float u_${ne}_t;
attribute ${W} ${le} a_${ne};
#else
uniform ${W} ${G} u_${ne};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${ne}
    ${W} ${G} ${ne} = a_${ne};
#else
    ${W} ${G} ${ne} = u_${ne};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ne}
    ${W} ${G} ${ne} = unpack_mix_${he}(a_${ne}, u_${ne}_t);
#else
    ${W} ${G} ${ne} = u_${ne};
#endif
`})),staticAttributes:g,staticUniforms:k}}class Us{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,f,g,y,b,k,D,z,$){this.context=i;let W=this.boundPaintVertexBuffers.length!==y.length;for(let G=0;!W&&G<y.length;G++)this.boundPaintVertexBuffers[G]!==y[G]&&(W=!0);!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==g||W||this.boundIndexBuffer!==b||this.boundVertexOffset!==k||this.boundDynamicVertexBuffer!==D||this.boundDynamicVertexBuffer2!==z||this.boundDynamicVertexBuffer3!==$?this.freshBind(f,g,y,b,k,D,z,$):(i.bindVertexArray.set(this.vao),D&&D.bind(),b&&b.dynamicDraw&&b.bind(),z&&z.bind(),$&&$.bind())}freshBind(i,f,g,y,b,k,D,z){const $=i.numAttributes,W=this.context,G=W.gl;this.vao&&this.destroy(),this.vao=W.createVertexArray(),W.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=y,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=k,this.boundDynamicVertexBuffer2=D,this.boundDynamicVertexBuffer3=z,f.enableAttributes(G,i);for(const ne of g)ne.enableAttributes(G,i);k&&k.enableAttributes(G,i),D&&D.enableAttributes(G,i),z&&z.enableAttributes(G,i),f.bind(),f.setVertexAttribPointers(G,i,b);for(const ne of g)ne.bind(),ne.setVertexAttribPointers(G,i,b);k&&(k.bind(),k.setVertexAttribPointers(G,i,b)),y&&y.bind(),D&&(D.bind(),D.setVertexAttribPointers(G,i,b)),z&&(z.bind(),z.setVertexAttribPointers(G,i,b)),W.currentNumAttributes=$}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const ph=(w,i,f,g,y)=>({u_matrix:w,u_texture:0,u_ele_delta:i,u_fog_matrix:f,u_fog_color:g?g.properties.get("fog-color"):l.aM.white,u_fog_ground_blend:g?g.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:g?g.calculateFogBlendOpacity(y):0,u_horizon_color:g?g.properties.get("horizon-color"):l.aM.white,u_horizon_fog_blend:g?g.properties.get("horizon-fog-blend"):1});function ss(w){const i=[];for(let f=0;f<w.length;f++){if(w[f]===null)continue;const g=w[f].split(" ");i.push(g.pop())}return i}class Br{constructor(i,f,g,y,b,k){const D=i.gl;this.program=D.createProgram();const z=ss(f.staticAttributes),$=g?g.getBinderAttributes():[],W=z.concat($),G=Co.prelude.staticUniforms?ss(Co.prelude.staticUniforms):[],ne=f.staticUniforms?ss(f.staticUniforms):[],le=g?g.getBinderUniforms():[],he=G.concat(ne).concat(le),de=[];for(const Ue of he)de.indexOf(Ue)<0&&de.push(Ue);const ge=g?g.defines():[];b&&ge.push("#define OVERDRAW_INSPECTOR;"),k&&ge.push("#define TERRAIN3D;");const _e=ge.concat(Co.prelude.fragmentSource,f.fragmentSource).join(`
`),Ee=ge.concat(Co.prelude.vertexSource,f.vertexSource).join(`
`),pe=D.createShader(D.FRAGMENT_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);if(D.shaderSource(pe,_e),D.compileShader(pe),!D.getShaderParameter(pe,D.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${D.getShaderInfoLog(pe)}`);D.attachShader(this.program,pe);const ke=D.createShader(D.VERTEX_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);if(D.shaderSource(ke,Ee),D.compileShader(ke),!D.getShaderParameter(ke,D.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${D.getShaderInfoLog(ke)}`);D.attachShader(this.program,ke),this.attributes={};const Re={};this.numAttributes=W.length;for(let Ue=0;Ue<this.numAttributes;Ue++)W[Ue]&&(D.bindAttribLocation(this.program,Ue,W[Ue]),this.attributes[W[Ue]]=Ue);if(D.linkProgram(this.program),!D.getProgramParameter(this.program,D.LINK_STATUS))throw new Error(`Program failed to link: ${D.getProgramInfoLog(this.program)}`);D.deleteShader(ke),D.deleteShader(pe);for(let Ue=0;Ue<de.length;Ue++){const at=de[Ue];if(at&&!Re[at]){const dt=D.getUniformLocation(this.program,at);dt&&(Re[at]=dt)}}this.fixedUniforms=y(i,Re),this.terrainUniforms=((Ue,at)=>({u_depth:new l.aH(Ue,at.u_depth),u_terrain:new l.aH(Ue,at.u_terrain),u_terrain_dim:new l.aI(Ue,at.u_terrain_dim),u_terrain_matrix:new l.aJ(Ue,at.u_terrain_matrix),u_terrain_unpack:new l.aK(Ue,at.u_terrain_unpack),u_terrain_exaggeration:new l.aI(Ue,at.u_terrain_exaggeration)}))(i,Re),this.binderUniforms=g?g.getUniforms(i,Re):[]}draw(i,f,g,y,b,k,D,z,$,W,G,ne,le,he,de,ge,_e,Ee){const pe=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(g),i.setStencilMode(y),i.setColorMode(b),i.setCullFace(k),z){i.activeTexture.set(pe.TEXTURE2),pe.bindTexture(pe.TEXTURE_2D,z.depthTexture),i.activeTexture.set(pe.TEXTURE3),pe.bindTexture(pe.TEXTURE_2D,z.texture);for(const Re in this.terrainUniforms)this.terrainUniforms[Re].set(z[Re])}for(const Re in this.fixedUniforms)this.fixedUniforms[Re].set(D[Re]);de&&de.setUniforms(i,this.binderUniforms,le,{zoom:he});let ke=0;switch(f){case pe.LINES:ke=2;break;case pe.TRIANGLES:ke=3;break;case pe.LINE_STRIP:ke=1}for(const Re of ne.get()){const Ue=Re.vaos||(Re.vaos={});(Ue[$]||(Ue[$]=new Us)).bind(i,this,W,de?de.getPaintVertexBuffers():[],G,Re.vertexOffset,ge,_e,Ee),pe.drawElements(f,Re.primitiveLength*ke,pe.UNSIGNED_SHORT,Re.primitiveOffset*ke*2)}}}function gu(w,i,f){const g=1/pr(f,1,i.transform.tileZoom),y=Math.pow(2,f.tileID.overscaledZ),b=f.tileSize*Math.pow(2,i.transform.tileZoom)/y,k=b*(f.tileID.canonical.x+f.tileID.wrap*y),D=b*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[g,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[k>>16,D>>16],u_pixel_coord_lower:[65535&k,65535&D]}}const wl=(w,i,f,g)=>{const y=i.style.light,b=y.properties.get("position"),k=[b.x,b.y,b.z],D=(function(){var $=new l.A(9);return l.A!=Float32Array&&($[1]=0,$[2]=0,$[3]=0,$[5]=0,$[6]=0,$[7]=0),$[0]=1,$[4]=1,$[8]=1,$})();y.properties.get("anchor")==="viewport"&&(function($,W){var G=Math.sin(W),ne=Math.cos(W);$[0]=ne,$[1]=G,$[2]=0,$[3]=-G,$[4]=ne,$[5]=0,$[6]=0,$[7]=0,$[8]=1})(D,-i.transform.angle),(function($,W,G){var ne=W[0],le=W[1],he=W[2];$[0]=ne*G[0]+le*G[3]+he*G[6],$[1]=ne*G[1]+le*G[4]+he*G[7],$[2]=ne*G[2]+le*G[5]+he*G[8]})(k,k,D);const z=y.properties.get("color");return{u_matrix:w,u_lightpos:k,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+f,u_opacity:g}},Sl=(w,i,f,g,y,b,k)=>l.e(wl(w,i,f,g),gu(b,i,k),{u_height_factor:-Math.pow(2,y.overscaledZ)/k.tileSize/8}),qs=w=>({u_matrix:w}),mh=(w,i,f,g)=>l.e(qs(w),gu(f,i,g)),Gf=(w,i)=>({u_matrix:w,u_world:i}),pc=(w,i,f,g,y)=>l.e(mh(w,i,f,g),{u_world:y}),mc=(w,i,f,g)=>{const y=w.transform;let b,k;if(g.paint.get("circle-pitch-alignment")==="map"){const D=pr(f,1,y.zoom);b=!0,k=[D,D]}else b=!1,k=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(g.paint.get("circle-pitch-scale")==="map"),u_matrix:w.translatePosMatrix(i.posMatrix,f,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:k}},Ni=(w,i,f)=>({u_matrix:w,u_inv_matrix:i,u_camera_to_center_distance:f.cameraToCenterDistance,u_viewport_size:[f.width,f.height]}),_a=(w,i,f=1)=>({u_matrix:w,u_color:i,u_overlay:0,u_overlay_scale:f}),Mn=w=>({u_matrix:w}),Kn=(w,i,f,g)=>({u_matrix:w,u_extrude_scale:pr(i,1,f),u_intensity:g}),ls=(w,i,f,g)=>{const y=l.H();l.aP(y,0,w.width,w.height,0,0,1);const b=w.context.gl;return{u_matrix:y,u_world:[b.drawingBufferWidth,b.drawingBufferHeight],u_image:f,u_color_ramp:g,u_opacity:i.paint.get("heatmap-opacity")}};function Wa(w,i){const f=Math.pow(2,i.canonical.z),g=i.canonical.y;return[new l.Z(0,g/f).toLngLat().lat,new l.Z(0,(g+1)/f).toLngLat().lat]}const gc=(w,i,f,g)=>{const y=w.transform;return{u_matrix:yu(w,i,f,g),u_ratio:1/pr(i,1,y.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},gh=(w,i,f,g,y)=>l.e(gc(w,i,f,y),{u_image:0,u_image_height:g}),ho=(w,i,f,g,y)=>{const b=w.transform,k=yh(i,b);return{u_matrix:yu(w,i,f,y),u_texsize:i.imageAtlasTexture.size,u_ratio:1/pr(i,1,b.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[k,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Wp=(w,i,f,g,y,b)=>{const k=w.lineAtlas,D=yh(i,w.transform),z=f.layout.get("line-cap")==="round",$=k.getDash(g.from,z),W=k.getDash(g.to,z),G=$.width*y.fromScale,ne=W.width*y.toScale;return l.e(gc(w,i,f,b),{u_patternscale_a:[D/G,-$.height/2],u_patternscale_b:[D/ne,-W.height/2],u_sdfgamma:k.width/(256*Math.min(G,ne)*w.pixelRatio)/2,u_image:0,u_tex_y_a:$.y,u_tex_y_b:W.y,u_mix:y.t})};function yh(w,i){return 1/pr(w,1,i.tileZoom)}function yu(w,i,f,g){return w.translatePosMatrix(g?g.posMatrix:i.tileID.posMatrix,i,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}const Hf=(w,i,f,g,y)=>{return{u_matrix:w,u_tl_parent:i,u_scale_parent:f,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(k=y.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(b=y.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Gp(y.paint.get("raster-hue-rotate"))};var b,k};function Gp(w){w*=Math.PI/180;const i=Math.sin(w),f=Math.cos(w);return[(2*f+1)/3,(-Math.sqrt(3)*i-f+1)/3,(Math.sqrt(3)*i-f+1)/3]}const Pl=(w,i,f,g,y,b,k,D,z,$,W,G,ne,le)=>{const he=k.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:he.cameraToCenterDistance,u_pitch:he.pitch/360*2*Math.PI,u_rotate_symbol:+f,u_aspect_ratio:he.width/he.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_matrix:D,u_label_plane_matrix:z,u_coord_matrix:$,u_is_text:+G,u_pitch_with_map:+g,u_is_along_line:y,u_is_variable_anchor:b,u_texsize:ne,u_texture:0,u_translation:W,u_pitched_scale:le}},Mo=(w,i,f,g,y,b,k,D,z,$,W,G,ne,le,he)=>{const de=k.transform;return l.e(Pl(w,i,f,g,y,b,k,D,z,$,W,G,ne,he),{u_gamma_scale:g?Math.cos(de._pitch)*de.cameraToCenterDistance:1,u_device_pixel_ratio:k.pixelRatio,u_is_halo:1})},us=(w,i,f,g,y,b,k,D,z,$,W,G,ne,le)=>l.e(Mo(w,i,f,g,y,b,k,D,z,$,W,!0,G,!0,le),{u_texsize_icon:ne,u_texture_icon:1}),Ws=(w,i,f)=>({u_matrix:w,u_opacity:i,u_color:f}),vh=(w,i,f,g,y,b)=>l.e((function(k,D,z,$){const W=z.imageManager.getPattern(k.from.toString()),G=z.imageManager.getPattern(k.to.toString()),{width:ne,height:le}=z.imageManager.getPixelSize(),he=Math.pow(2,$.tileID.overscaledZ),de=$.tileSize*Math.pow(2,z.transform.tileZoom)/he,ge=de*($.tileID.canonical.x+$.tileID.wrap*he),_e=de*$.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:W.tl,u_pattern_br_a:W.br,u_pattern_tl_b:G.tl,u_pattern_br_b:G.br,u_texsize:[ne,le],u_mix:D.t,u_pattern_size_a:W.displaySize,u_pattern_size_b:G.displaySize,u_scale_a:D.fromScale,u_scale_b:D.toScale,u_tile_units_to_pixels:1/pr($,1,z.transform.tileZoom),u_pixel_coord_upper:[ge>>16,_e>>16],u_pixel_coord_lower:[65535&ge,65535&_e]}})(g,b,f,y),{u_matrix:w,u_opacity:i}),_h={fillExtrusion:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_lightpos:new l.aN(w,i.u_lightpos),u_lightintensity:new l.aI(w,i.u_lightintensity),u_lightcolor:new l.aN(w,i.u_lightcolor),u_vertical_gradient:new l.aI(w,i.u_vertical_gradient),u_opacity:new l.aI(w,i.u_opacity)}),fillExtrusionPattern:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_lightpos:new l.aN(w,i.u_lightpos),u_lightintensity:new l.aI(w,i.u_lightintensity),u_lightcolor:new l.aN(w,i.u_lightcolor),u_vertical_gradient:new l.aI(w,i.u_vertical_gradient),u_height_factor:new l.aI(w,i.u_height_factor),u_image:new l.aH(w,i.u_image),u_texsize:new l.aO(w,i.u_texsize),u_pixel_coord_upper:new l.aO(w,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(w,i.u_pixel_coord_lower),u_scale:new l.aN(w,i.u_scale),u_fade:new l.aI(w,i.u_fade),u_opacity:new l.aI(w,i.u_opacity)}),fill:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix)}),fillPattern:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_image:new l.aH(w,i.u_image),u_texsize:new l.aO(w,i.u_texsize),u_pixel_coord_upper:new l.aO(w,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(w,i.u_pixel_coord_lower),u_scale:new l.aN(w,i.u_scale),u_fade:new l.aI(w,i.u_fade)}),fillOutline:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_world:new l.aO(w,i.u_world)}),fillOutlinePattern:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_world:new l.aO(w,i.u_world),u_image:new l.aH(w,i.u_image),u_texsize:new l.aO(w,i.u_texsize),u_pixel_coord_upper:new l.aO(w,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(w,i.u_pixel_coord_lower),u_scale:new l.aN(w,i.u_scale),u_fade:new l.aI(w,i.u_fade)}),circle:(w,i)=>({u_camera_to_center_distance:new l.aI(w,i.u_camera_to_center_distance),u_scale_with_map:new l.aH(w,i.u_scale_with_map),u_pitch_with_map:new l.aH(w,i.u_pitch_with_map),u_extrude_scale:new l.aO(w,i.u_extrude_scale),u_device_pixel_ratio:new l.aI(w,i.u_device_pixel_ratio),u_matrix:new l.aJ(w,i.u_matrix)}),collisionBox:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_pixel_extrude_scale:new l.aO(w,i.u_pixel_extrude_scale)}),collisionCircle:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_inv_matrix:new l.aJ(w,i.u_inv_matrix),u_camera_to_center_distance:new l.aI(w,i.u_camera_to_center_distance),u_viewport_size:new l.aO(w,i.u_viewport_size)}),debug:(w,i)=>({u_color:new l.aL(w,i.u_color),u_matrix:new l.aJ(w,i.u_matrix),u_overlay:new l.aH(w,i.u_overlay),u_overlay_scale:new l.aI(w,i.u_overlay_scale)}),clippingMask:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix)}),heatmap:(w,i)=>({u_extrude_scale:new l.aI(w,i.u_extrude_scale),u_intensity:new l.aI(w,i.u_intensity),u_matrix:new l.aJ(w,i.u_matrix)}),heatmapTexture:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_world:new l.aO(w,i.u_world),u_image:new l.aH(w,i.u_image),u_color_ramp:new l.aH(w,i.u_color_ramp),u_opacity:new l.aI(w,i.u_opacity)}),hillshade:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_image:new l.aH(w,i.u_image),u_latrange:new l.aO(w,i.u_latrange),u_light:new l.aO(w,i.u_light),u_shadow:new l.aL(w,i.u_shadow),u_highlight:new l.aL(w,i.u_highlight),u_accent:new l.aL(w,i.u_accent)}),hillshadePrepare:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_image:new l.aH(w,i.u_image),u_dimension:new l.aO(w,i.u_dimension),u_zoom:new l.aI(w,i.u_zoom),u_unpack:new l.aK(w,i.u_unpack)}),line:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_ratio:new l.aI(w,i.u_ratio),u_device_pixel_ratio:new l.aI(w,i.u_device_pixel_ratio),u_units_to_pixels:new l.aO(w,i.u_units_to_pixels)}),lineGradient:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_ratio:new l.aI(w,i.u_ratio),u_device_pixel_ratio:new l.aI(w,i.u_device_pixel_ratio),u_units_to_pixels:new l.aO(w,i.u_units_to_pixels),u_image:new l.aH(w,i.u_image),u_image_height:new l.aI(w,i.u_image_height)}),linePattern:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_texsize:new l.aO(w,i.u_texsize),u_ratio:new l.aI(w,i.u_ratio),u_device_pixel_ratio:new l.aI(w,i.u_device_pixel_ratio),u_image:new l.aH(w,i.u_image),u_units_to_pixels:new l.aO(w,i.u_units_to_pixels),u_scale:new l.aN(w,i.u_scale),u_fade:new l.aI(w,i.u_fade)}),lineSDF:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_ratio:new l.aI(w,i.u_ratio),u_device_pixel_ratio:new l.aI(w,i.u_device_pixel_ratio),u_units_to_pixels:new l.aO(w,i.u_units_to_pixels),u_patternscale_a:new l.aO(w,i.u_patternscale_a),u_patternscale_b:new l.aO(w,i.u_patternscale_b),u_sdfgamma:new l.aI(w,i.u_sdfgamma),u_image:new l.aH(w,i.u_image),u_tex_y_a:new l.aI(w,i.u_tex_y_a),u_tex_y_b:new l.aI(w,i.u_tex_y_b),u_mix:new l.aI(w,i.u_mix)}),raster:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_tl_parent:new l.aO(w,i.u_tl_parent),u_scale_parent:new l.aI(w,i.u_scale_parent),u_buffer_scale:new l.aI(w,i.u_buffer_scale),u_fade_t:new l.aI(w,i.u_fade_t),u_opacity:new l.aI(w,i.u_opacity),u_image0:new l.aH(w,i.u_image0),u_image1:new l.aH(w,i.u_image1),u_brightness_low:new l.aI(w,i.u_brightness_low),u_brightness_high:new l.aI(w,i.u_brightness_high),u_saturation_factor:new l.aI(w,i.u_saturation_factor),u_contrast_factor:new l.aI(w,i.u_contrast_factor),u_spin_weights:new l.aN(w,i.u_spin_weights)}),symbolIcon:(w,i)=>({u_is_size_zoom_constant:new l.aH(w,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(w,i.u_is_size_feature_constant),u_size_t:new l.aI(w,i.u_size_t),u_size:new l.aI(w,i.u_size),u_camera_to_center_distance:new l.aI(w,i.u_camera_to_center_distance),u_pitch:new l.aI(w,i.u_pitch),u_rotate_symbol:new l.aH(w,i.u_rotate_symbol),u_aspect_ratio:new l.aI(w,i.u_aspect_ratio),u_fade_change:new l.aI(w,i.u_fade_change),u_matrix:new l.aJ(w,i.u_matrix),u_label_plane_matrix:new l.aJ(w,i.u_label_plane_matrix),u_coord_matrix:new l.aJ(w,i.u_coord_matrix),u_is_text:new l.aH(w,i.u_is_text),u_pitch_with_map:new l.aH(w,i.u_pitch_with_map),u_is_along_line:new l.aH(w,i.u_is_along_line),u_is_variable_anchor:new l.aH(w,i.u_is_variable_anchor),u_texsize:new l.aO(w,i.u_texsize),u_texture:new l.aH(w,i.u_texture),u_translation:new l.aO(w,i.u_translation),u_pitched_scale:new l.aI(w,i.u_pitched_scale)}),symbolSDF:(w,i)=>({u_is_size_zoom_constant:new l.aH(w,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(w,i.u_is_size_feature_constant),u_size_t:new l.aI(w,i.u_size_t),u_size:new l.aI(w,i.u_size),u_camera_to_center_distance:new l.aI(w,i.u_camera_to_center_distance),u_pitch:new l.aI(w,i.u_pitch),u_rotate_symbol:new l.aH(w,i.u_rotate_symbol),u_aspect_ratio:new l.aI(w,i.u_aspect_ratio),u_fade_change:new l.aI(w,i.u_fade_change),u_matrix:new l.aJ(w,i.u_matrix),u_label_plane_matrix:new l.aJ(w,i.u_label_plane_matrix),u_coord_matrix:new l.aJ(w,i.u_coord_matrix),u_is_text:new l.aH(w,i.u_is_text),u_pitch_with_map:new l.aH(w,i.u_pitch_with_map),u_is_along_line:new l.aH(w,i.u_is_along_line),u_is_variable_anchor:new l.aH(w,i.u_is_variable_anchor),u_texsize:new l.aO(w,i.u_texsize),u_texture:new l.aH(w,i.u_texture),u_gamma_scale:new l.aI(w,i.u_gamma_scale),u_device_pixel_ratio:new l.aI(w,i.u_device_pixel_ratio),u_is_halo:new l.aH(w,i.u_is_halo),u_translation:new l.aO(w,i.u_translation),u_pitched_scale:new l.aI(w,i.u_pitched_scale)}),symbolTextAndIcon:(w,i)=>({u_is_size_zoom_constant:new l.aH(w,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(w,i.u_is_size_feature_constant),u_size_t:new l.aI(w,i.u_size_t),u_size:new l.aI(w,i.u_size),u_camera_to_center_distance:new l.aI(w,i.u_camera_to_center_distance),u_pitch:new l.aI(w,i.u_pitch),u_rotate_symbol:new l.aH(w,i.u_rotate_symbol),u_aspect_ratio:new l.aI(w,i.u_aspect_ratio),u_fade_change:new l.aI(w,i.u_fade_change),u_matrix:new l.aJ(w,i.u_matrix),u_label_plane_matrix:new l.aJ(w,i.u_label_plane_matrix),u_coord_matrix:new l.aJ(w,i.u_coord_matrix),u_is_text:new l.aH(w,i.u_is_text),u_pitch_with_map:new l.aH(w,i.u_pitch_with_map),u_is_along_line:new l.aH(w,i.u_is_along_line),u_is_variable_anchor:new l.aH(w,i.u_is_variable_anchor),u_texsize:new l.aO(w,i.u_texsize),u_texsize_icon:new l.aO(w,i.u_texsize_icon),u_texture:new l.aH(w,i.u_texture),u_texture_icon:new l.aH(w,i.u_texture_icon),u_gamma_scale:new l.aI(w,i.u_gamma_scale),u_device_pixel_ratio:new l.aI(w,i.u_device_pixel_ratio),u_is_halo:new l.aH(w,i.u_is_halo),u_translation:new l.aO(w,i.u_translation),u_pitched_scale:new l.aI(w,i.u_pitched_scale)}),background:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_opacity:new l.aI(w,i.u_opacity),u_color:new l.aL(w,i.u_color)}),backgroundPattern:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_opacity:new l.aI(w,i.u_opacity),u_image:new l.aH(w,i.u_image),u_pattern_tl_a:new l.aO(w,i.u_pattern_tl_a),u_pattern_br_a:new l.aO(w,i.u_pattern_br_a),u_pattern_tl_b:new l.aO(w,i.u_pattern_tl_b),u_pattern_br_b:new l.aO(w,i.u_pattern_br_b),u_texsize:new l.aO(w,i.u_texsize),u_mix:new l.aI(w,i.u_mix),u_pattern_size_a:new l.aO(w,i.u_pattern_size_a),u_pattern_size_b:new l.aO(w,i.u_pattern_size_b),u_scale_a:new l.aI(w,i.u_scale_a),u_scale_b:new l.aI(w,i.u_scale_b),u_pixel_coord_upper:new l.aO(w,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(w,i.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aI(w,i.u_tile_units_to_pixels)}),terrain:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_texture:new l.aH(w,i.u_texture),u_ele_delta:new l.aI(w,i.u_ele_delta),u_fog_matrix:new l.aJ(w,i.u_fog_matrix),u_fog_color:new l.aL(w,i.u_fog_color),u_fog_ground_blend:new l.aI(w,i.u_fog_ground_blend),u_fog_ground_blend_opacity:new l.aI(w,i.u_fog_ground_blend_opacity),u_horizon_color:new l.aL(w,i.u_horizon_color),u_horizon_fog_blend:new l.aI(w,i.u_horizon_fog_blend)}),terrainDepth:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_ele_delta:new l.aI(w,i.u_ele_delta)}),terrainCoords:(w,i)=>({u_matrix:new l.aJ(w,i.u_matrix),u_texture:new l.aH(w,i.u_texture),u_terrain_coords_id:new l.aI(w,i.u_terrain_coords_id),u_ele_delta:new l.aI(w,i.u_ele_delta)}),sky:(w,i)=>({u_sky_color:new l.aL(w,i.u_sky_color),u_horizon_color:new l.aL(w,i.u_horizon_color),u_horizon:new l.aI(w,i.u_horizon),u_sky_horizon_blend:new l.aI(w,i.u_sky_horizon_blend)})};class xa{constructor(i,f,g){this.context=i;const y=i.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const f=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const yc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class vu{constructor(i,f,g,y){this.length=f.length,this.attributes=g,this.itemSize=f.bytesPerElement,this.dynamicDraw=y,this.context=i;const b=i.gl;this.buffer=b.createBuffer(),i.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,f){for(let g=0;g<this.attributes.length;g++){const y=f.attributes[this.attributes[g].name];y!==void 0&&i.enableVertexAttribArray(y)}}setVertexAttribPointers(i,f,g){for(let y=0;y<this.attributes.length;y++){const b=this.attributes[y],k=f.attributes[b.name];k!==void 0&&i.vertexAttribPointer(k,b.components,i[yc[b.type]],!1,this.itemSize,b.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const cs=new WeakMap;function Pi(w){var i;if(cs.has(w))return cs.get(w);{const f=(i=w.getParameter(w.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return cs.set(w,f),f}}class kr{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Gs extends kr{getDefault(){return l.aM.transparent}set(i){const f=this.current;(i.r!==f.r||i.g!==f.g||i.b!==f.b||i.a!==f.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Zf extends kr{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Io extends kr{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class vc extends kr{getDefault(){return[!0,!0,!0,!0]}set(i){const f=this.current;(i[0]!==f[0]||i[1]!==f[1]||i[2]!==f[2]||i[3]!==f[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class xh extends kr{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class na extends kr{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Hs extends kr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const f=this.current;(i.func!==f.func||i.ref!==f.ref||i.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class _u extends kr{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const f=this.current;(i[0]!==f[0]||i[1]!==f[1]||i[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Tl extends kr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;i?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=i,this.dirty=!1}}class Kf extends kr{getDefault(){return[0,1]}set(i){const f=this.current;(i[0]!==f[0]||i[1]!==f[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class _c extends kr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;i?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=i,this.dirty=!1}}class xc extends kr{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Ga extends kr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;i?f.enable(f.BLEND):f.disable(f.BLEND),this.current=i,this.dirty=!1}}class xu extends kr{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const f=this.current;(i[0]!==f[0]||i[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Xf extends kr{getDefault(){return l.aM.transparent}set(i){const f=this.current;(i.r!==f.r||i.g!==f.g||i.b!==f.b||i.a!==f.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Yf extends kr{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class bu extends kr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;i?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=i,this.dirty=!1}}class Hp extends kr{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Al extends kr{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Zp extends kr{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Kp extends kr{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Jf extends kr{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const f=this.current;(i[0]!==f[0]||i[1]!==f[1]||i[2]!==f[2]||i[3]!==f[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Qf extends kr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class ed extends kr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class bc extends kr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class td extends kr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class wc extends kr{getDefault(){return null}set(i){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class ko extends kr{getDefault(){return null}set(i){var f;if(i===this.current&&!this.dirty)return;const g=this.gl;Pi(g)?g.bindVertexArray(i):(f=g.getExtension("OES_vertex_array_object"))===null||f===void 0||f.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class bh extends kr{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class wu extends kr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class wh extends kr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Sc extends kr{constructor(i,f){super(i),this.context=i,this.parent=f}getDefault(){return null}}class Sh extends Sc{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class hs extends Sc{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Ph extends Sc{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Xp{constructor(i,f,g,y,b){this.context=i,this.width=f,this.height=g;const k=i.gl,D=this.framebuffer=k.createFramebuffer();if(this.colorAttachment=new Sh(i,D),y)this.depthAttachment=b?new Ph(i,D):new hs(i,D);else if(b)throw new Error("Stencil cannot be set without depth");if(k.checkFramebufferStatus(k.FRAMEBUFFER)!==k.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,f=this.colorAttachment.get();if(f&&i.deleteTexture(f),this.depthAttachment){const g=this.depthAttachment.get();g&&i.deleteRenderbuffer(g)}i.deleteFramebuffer(this.framebuffer)}}class Sn{constructor(i,f,g){this.blendFunction=i,this.blendColor=f,this.mask=g}}Sn.Replace=[1,0],Sn.disabled=new Sn(Sn.Replace,l.aM.transparent,[!1,!1,!1,!1]),Sn.unblended=new Sn(Sn.Replace,l.aM.transparent,[!0,!0,!0,!0]),Sn.alphaBlended=new Sn([1,771],l.aM.transparent,[!0,!0,!0,!0]);class Yp{constructor(i){var f,g;if(this.gl=i,this.clearColor=new Gs(this),this.clearDepth=new Zf(this),this.clearStencil=new Io(this),this.colorMask=new vc(this),this.depthMask=new xh(this),this.stencilMask=new na(this),this.stencilFunc=new Hs(this),this.stencilOp=new _u(this),this.stencilTest=new Tl(this),this.depthRange=new Kf(this),this.depthTest=new _c(this),this.depthFunc=new xc(this),this.blend=new Ga(this),this.blendFunc=new xu(this),this.blendColor=new Xf(this),this.blendEquation=new Yf(this),this.cullFace=new bu(this),this.cullFaceSide=new Hp(this),this.frontFace=new Al(this),this.program=new Zp(this),this.activeTexture=new Kp(this),this.viewport=new Jf(this),this.bindFramebuffer=new Qf(this),this.bindRenderbuffer=new ed(this),this.bindTexture=new bc(this),this.bindVertexBuffer=new td(this),this.bindElementBuffer=new wc(this),this.bindVertexArray=new ko(this),this.pixelStoreUnpack=new bh(this),this.pixelStoreUnpackPremultiplyAlpha=new wu(this),this.pixelStoreUnpackFlipY=new wh(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Pi(i)){this.HALF_FLOAT=i.HALF_FLOAT;const y=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(f=i.RGBA16F)!==null&&f!==void 0?f:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(g=i.RGB16F)!==null&&g!==void 0?g:y==null?void 0:y.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const y=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=y==null?void 0:y.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,f){return new xa(this,i,f)}createVertexBuffer(i,f,g){return new vu(this,i,f,g)}createRenderbuffer(i,f,g){const y=this.gl,b=y.createRenderbuffer();return this.bindRenderbuffer.set(b),y.renderbufferStorage(y.RENDERBUFFER,i,f,g),this.bindRenderbuffer.set(null),b}createFramebuffer(i,f,g,y){return new Xp(this,i,f,g,y)}clear({color:i,depth:f,stencil:g}){const y=this.gl;let b=0;i&&(b|=y.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(b|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),g!==void 0&&(b|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),y.clear(b)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){l.aE(i.blendFunction,Sn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Pi(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var f;return Pi(this.gl)?this.gl.deleteVertexArray(i):(f=this.gl.getExtension("OES_vertex_array_object"))===null||f===void 0?void 0:f.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class br{constructor(i,f,g){this.func=i,this.mask=f,this.range=g}}br.ReadOnly=!1,br.ReadWrite=!0,br.disabled=new br(519,br.ReadOnly,[0,1]);const Pc=7680;class Jr{constructor(i,f,g,y,b,k){this.test=i,this.ref=f,this.mask=g,this.fail=y,this.depthFail=b,this.pass=k}}Jr.disabled=new Jr({func:519,mask:0},0,0,Pc,Pc,Pc);class Nr{constructor(i,f,g){this.enable=i,this.mode=f,this.frontFace=g}}let Ha;function Su(w,i,f,g,y){const b=w.context,k=b.gl,D=w.useProgram("collisionBox"),z=[];let $=0,W=0;for(let _e=0;_e<g.length;_e++){const Ee=g[_e],pe=i.getTile(Ee).getBucket(f);if(!pe)continue;const ke=y?pe.textCollisionBox:pe.iconCollisionBox,Re=pe.collisionCircleArray;if(Re.length>0){const Ue=l.H();l.aQ(Ue,pe.placementInvProjMatrix,w.transform.glCoordMatrix),l.aQ(Ue,Ue,pe.placementViewportMatrix),z.push({circleArray:Re,circleOffset:W,transform:Ee.posMatrix,invTransform:Ue,coord:Ee}),$+=Re.length/4,W=$}ke&&D.draw(b,k.LINES,br.disabled,Jr.disabled,w.colorModeForRenderPass(),Nr.disabled,{u_matrix:Ee.posMatrix,u_pixel_extrude_scale:[1/(G=w.transform).width,1/G.height]},w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ee),f.id,ke.layoutVertexBuffer,ke.indexBuffer,ke.segments,null,w.transform.zoom,null,null,ke.collisionVertexBuffer)}var G;if(!y||!z.length)return;const ne=w.useProgram("collisionCircle"),le=new l.aR;le.resize(4*$),le._trim();let he=0;for(const _e of z)for(let Ee=0;Ee<_e.circleArray.length/4;Ee++){const pe=4*Ee,ke=_e.circleArray[pe+0],Re=_e.circleArray[pe+1],Ue=_e.circleArray[pe+2],at=_e.circleArray[pe+3];le.emplace(he++,ke,Re,Ue,at,0),le.emplace(he++,ke,Re,Ue,at,1),le.emplace(he++,ke,Re,Ue,at,2),le.emplace(he++,ke,Re,Ue,at,3)}(!Ha||Ha.length<2*$)&&(Ha=(function(_e){const Ee=2*_e,pe=new l.aT;pe.resize(Ee),pe._trim();for(let ke=0;ke<Ee;ke++){const Re=6*ke;pe.uint16[Re+0]=4*ke+0,pe.uint16[Re+1]=4*ke+1,pe.uint16[Re+2]=4*ke+2,pe.uint16[Re+3]=4*ke+2,pe.uint16[Re+4]=4*ke+3,pe.uint16[Re+5]=4*ke+0}return pe})($));const de=b.createIndexBuffer(Ha,!0),ge=b.createVertexBuffer(le,l.aS.members,!0);for(const _e of z){const Ee=Ni(_e.transform,_e.invTransform,w.transform);ne.draw(b,k.TRIANGLES,br.disabled,Jr.disabled,w.colorModeForRenderPass(),Nr.disabled,Ee,w.style.map.terrain&&w.style.map.terrain.getTerrainData(_e.coord),f.id,ge,de,l.a0.simpleSegment(0,2*_e.circleOffset,_e.circleArray.length,_e.circleArray.length/2),null,w.transform.zoom,null,null,null)}ge.destroy(),de.destroy()}Nr.disabled=new Nr(!1,1029,2305),Nr.backCCW=new Nr(!0,1029,2305);const El=l.an(new Float32Array(16));function Tc(w,i,f,g,y,b){const{horizontalAlign:k,verticalAlign:D}=l.au(w);return new l.P((-(k-.5)*i/y+g[0])*b,(-(D-.5)*f/y+g[1])*b)}function fs(w,i,f,g,y,b){const k=i.tileAnchorPoint.add(new l.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let D=g.mult(b);f||(D=D.rotate(-y));const z=k.add(D);return ve(z.x,z.y,i.labelPlaneMatrix,i.getElevation).point}if(f){const D=Je(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(w),z=Math.atan(D.y/D.x)+(D.x<0?Math.PI:0);return w.add(g.rotate(z))}return w.add(g)}function Zs(w,i,f,g,y,b,k,D,z,$,W,G,ne,le){const he=w.text.placedSymbolArray,de=w.text.dynamicLayoutVertexArray,ge=w.icon.dynamicLayoutVertexArray,_e={};de.clear();for(let Ee=0;Ee<he.length;Ee++){const pe=he.get(Ee),ke=pe.hidden||!pe.crossTileID||w.allowVerticalPlacement&&!pe.placedOrientation?null:g[pe.crossTileID];if(ke){const Re=new l.P(pe.anchorX,pe.anchorY),Ue={getElevation:le,width:y.width,height:y.height,labelPlaneMatrix:b,pitchWithMap:f,projection:W,tileAnchorPoint:Re,translation:G,unwrappedTileID:ne},at=f?ve(Re.x,Re.y,k,le):Je(Re.x,Re.y,Ue),dt=te(y.cameraToCenterDistance,at.signedDistanceFromCamera);let _t=l.ai(w.textSizeData,z,pe)*dt/l.ap;f&&(_t*=w.tilePixelRatio/D);const{width:At,height:xt,anchor:gt,textOffset:Rt,textBoxScale:tr}=ke,wt=Tc(gt,At,xt,Rt,tr,_t),Pt=W.getPitchedTextCorrection(y,Re.add(new l.P(G[0],G[1])),ne),er=fs(at.point,Ue,i,wt,y.angle,Pt),qr=w.allowVerticalPlacement&&pe.placedOrientation===l.ah.vertical?Math.PI/2:0;for(let ur=0;ur<pe.numGlyphs;ur++)l.aj(de,er,qr);$&&pe.associatedIconIndex>=0&&(_e[pe.associatedIconIndex]={shiftedAnchor:er,angle:qr})}else Gt(pe.numGlyphs,de)}if($){ge.clear();const Ee=w.icon.placedSymbolArray;for(let pe=0;pe<Ee.length;pe++){const ke=Ee.get(pe);if(ke.hidden)Gt(ke.numGlyphs,ge);else{const Re=_e[pe];if(Re)for(let Ue=0;Ue<ke.numGlyphs;Ue++)l.aj(ge,Re.shiftedAnchor,Re.angle);else Gt(ke.numGlyphs,ge)}}w.icon.dynamicLayoutVertexBuffer.updateData(ge)}w.text.dynamicLayoutVertexBuffer.updateData(de)}function ia(w,i,f){return f.iconsInText&&i?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function ds(w,i,f,g,y,b,k,D,z,$,W,G){const ne=w.context,le=ne.gl,he=w.transform,de=Fs(),ge=D==="map",_e=z==="map",Ee=D!=="viewport"&&f.layout.get("symbol-placement")!=="point",pe=ge&&!_e&&!Ee,ke=!_e&&Ee,Re=!f.layout.get("symbol-sort-key").isConstant();let Ue=!1;const at=w.depthModeForSublayer(0,br.ReadOnly),dt=f._unevaluatedLayout.hasValue("text-variable-anchor")||f._unevaluatedLayout.hasValue("text-variable-anchor-offset"),_t=[],At=de.getCircleRadiusCorrection(he);for(const xt of g){const gt=i.getTile(xt),Rt=gt.getBucket(f);if(!Rt)continue;const tr=y?Rt.text:Rt.icon;if(!tr||!tr.segments.get().length||!tr.hasVisibleVertices)continue;const wt=tr.programConfigurations.get(f.id),Pt=y||Rt.sdfIcons,er=y?Rt.textSizeData:Rt.iconSizeData,qr=_e||he.pitch!==0,ur=w.useProgram(ia(Pt,y,Rt),wt),yr=l.ag(er,he.zoom),Hr=w.style.map.terrain&&w.style.map.terrain.getTerrainData(xt);let Xn,oa,Zr,Fn,on=[0,0],Pn=null;if(y)oa=gt.glyphAtlasTexture,Zr=le.LINEAR,Xn=gt.glyphAtlasTexture.size,Rt.iconsInText&&(on=gt.imageAtlasTexture.size,Pn=gt.imageAtlasTexture,Fn=qr||w.options.rotating||w.options.zooming||er.kind==="composite"||er.kind==="camera"?le.LINEAR:le.NEAREST);else{const xr=f.layout.get("icon-size").constantOr(0)!==1||Rt.iconsNeedLinear;oa=gt.imageAtlasTexture,Zr=Pt||w.options.rotating||w.options.zooming||xr||qr?le.LINEAR:le.NEAREST,Xn=gt.imageAtlasTexture.size}const ii=pr(gt,1,w.transform.zoom),Ja=ke?xt.posMatrix:El,Ui=ta(Ja,_e,ge,w.transform,ii),Qa=bi(Ja,_e,ge,w.transform,ii),xs=bi(xt.posMatrix,_e,ge,w.transform,ii),sa=de.translatePosition(w.transform,gt,b,k),Ta=dt&&Rt.hasTextData(),vo=f.layout.get("icon-text-fit")!=="none"&&Ta&&Rt.hasIconData();if(Ee){const xr=w.style.map.terrain?(bs,to)=>w.style.map.terrain.getElevation(xt,bs,to):null,ua=f.layout.get("text-rotation-alignment")==="map";ue(Rt,xt.posMatrix,w,y,Ui,xs,_e,$,ua,de,xt.toUnwrapped(),he.width,he.height,sa,xr)}const Ai=xt.posMatrix,la=y&&dt||vo,eo=Ee||la?El:Ui,Aa=Qa,In=Pt&&f.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let cn;cn=Pt?Rt.iconsInText?us(er.kind,yr,pe,_e,Ee,la,w,Ai,eo,Aa,sa,Xn,on,At):Mo(er.kind,yr,pe,_e,Ee,la,w,Ai,eo,Aa,sa,y,Xn,!0,At):Pl(er.kind,yr,pe,_e,Ee,la,w,Ai,eo,Aa,sa,y,Xn,At);const ai={program:ur,buffers:tr,uniformValues:cn,atlasTexture:oa,atlasTextureIcon:Pn,atlasInterpolation:Zr,atlasInterpolationIcon:Fn,isSDF:Pt,hasHalo:In};if(Re&&Rt.canOverlap){Ue=!0;const xr=tr.segments.get();for(const ua of xr)_t.push({segments:new l.a0([ua]),sortKey:ua.sortKey,state:ai,terrainData:Hr})}else _t.push({segments:tr.segments,sortKey:0,state:ai,terrainData:Hr})}Ue&&_t.sort(((xt,gt)=>xt.sortKey-gt.sortKey));for(const xt of _t){const gt=xt.state;if(ne.activeTexture.set(le.TEXTURE0),gt.atlasTexture.bind(gt.atlasInterpolation,le.CLAMP_TO_EDGE),gt.atlasTextureIcon&&(ne.activeTexture.set(le.TEXTURE1),gt.atlasTextureIcon&&gt.atlasTextureIcon.bind(gt.atlasInterpolationIcon,le.CLAMP_TO_EDGE)),gt.isSDF){const Rt=gt.uniformValues;gt.hasHalo&&(Rt.u_is_halo=1,Th(gt.buffers,xt.segments,f,w,gt.program,at,W,G,Rt,xt.terrainData)),Rt.u_is_halo=0}Th(gt.buffers,xt.segments,f,w,gt.program,at,W,G,gt.uniformValues,xt.terrainData)}}function Th(w,i,f,g,y,b,k,D,z,$){const W=g.context;y.draw(W,W.gl.TRIANGLES,b,k,D,Nr.disabled,z,$,f.id,w.layoutVertexBuffer,w.indexBuffer,i,f.paint,g.transform.zoom,w.programConfigurations.get(f.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function Ah(w,i,f,g){const y=w.context,b=y.gl,k=Jr.disabled,D=new Sn([b.ONE,b.ONE],l.aM.transparent,[!0,!0,!0,!0]),z=i.getBucket(f);if(!z)return;const $=g.key;let W=f.heatmapFbos.get($);W||(W=Cl(y,i.tileSize,i.tileSize),f.heatmapFbos.set($,W)),y.bindFramebuffer.set(W.framebuffer),y.viewport.set([0,0,i.tileSize,i.tileSize]),y.clear({color:l.aM.transparent});const G=z.programConfigurations.get(f.id),ne=w.useProgram("heatmap",G),le=w.style.map.terrain.getTerrainData(g);ne.draw(y,b.TRIANGLES,br.disabled,k,D,Nr.disabled,Kn(g.posMatrix,i,w.transform.zoom,f.paint.get("heatmap-intensity")),le,f.id,z.layoutVertexBuffer,z.indexBuffer,z.segments,f.paint,w.transform.zoom,G)}function Ks(w,i,f){const g=w.context,y=g.gl;g.setColorMode(w.colorModeForRenderPass());const b=Ml(g,i),k=f.key,D=i.heatmapFbos.get(k);D&&(g.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,D.colorAttachment.get()),g.activeTexture.set(y.TEXTURE1),b.bind(y.LINEAR,y.CLAMP_TO_EDGE),w.useProgram("heatmapTexture").draw(g,y.TRIANGLES,br.disabled,Jr.disabled,w.colorModeForRenderPass(),Nr.disabled,ls(w,i,0,1),null,i.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,i.paint,w.transform.zoom),D.destroy(),i.heatmapFbos.delete(k))}function Cl(w,i,f){var g,y;const b=w.gl,k=b.createTexture();b.bindTexture(b.TEXTURE_2D,k),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);const D=(g=w.HALF_FLOAT)!==null&&g!==void 0?g:b.UNSIGNED_BYTE,z=(y=w.RGBA16F)!==null&&y!==void 0?y:b.RGBA;b.texImage2D(b.TEXTURE_2D,0,z,i,f,0,b.RGBA,D,null);const $=w.createFramebuffer(i,f,!1,!1);return $.colorAttachment.set(k),$}function Ml(w,i){return i.colorRampTexture||(i.colorRampTexture=new xe(w,i.colorRamp,w.gl.RGBA)),i.colorRampTexture}function fo(w,i,f,g,y){if(!f||!g||!g.imageAtlas)return;const b=g.imageAtlas.patternPositions;let k=b[f.to.toString()],D=b[f.from.toString()];if(!k&&D&&(k=D),!D&&k&&(D=k),!k||!D){const z=y.getPaintProperty(i);k=b[z],D=b[z]}k&&D&&w.setConstantPatternPositions(k,D)}function Oo(w,i,f,g,y,b,k){const D=w.context.gl,z="fill-pattern",$=f.paint.get(z),W=$&&$.constantOr(1),G=f.getCrossfadeParameters();let ne,le,he,de,ge;k?(le=W&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ne=D.LINES):(le=W?"fillPattern":"fill",ne=D.TRIANGLES);const _e=$.constantOr(null);for(const Ee of g){const pe=i.getTile(Ee);if(W&&!pe.patternsLoaded())continue;const ke=pe.getBucket(f);if(!ke)continue;const Re=ke.programConfigurations.get(f.id),Ue=w.useProgram(le,Re),at=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ee);W&&(w.context.activeTexture.set(D.TEXTURE0),pe.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),Re.updatePaintBuffers(G)),fo(Re,z,_e,pe,f);const dt=at?Ee:null,_t=w.translatePosMatrix(dt?dt.posMatrix:Ee.posMatrix,pe,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(k){de=ke.indexBuffer2,ge=ke.segments2;const At=[D.drawingBufferWidth,D.drawingBufferHeight];he=le==="fillOutlinePattern"&&W?pc(_t,w,G,pe,At):Gf(_t,At)}else de=ke.indexBuffer,ge=ke.segments,he=W?mh(_t,w,G,pe):qs(_t);Ue.draw(w.context,ne,y,w.stencilModeForClipping(Ee),b,Nr.disabled,he,at,f.id,ke.layoutVertexBuffer,de,ge,f.paint,w.transform.zoom,Re)}}function Ac(w,i,f,g,y,b,k){const D=w.context,z=D.gl,$="fill-extrusion-pattern",W=f.paint.get($),G=W.constantOr(1),ne=f.getCrossfadeParameters(),le=f.paint.get("fill-extrusion-opacity"),he=W.constantOr(null);for(const de of g){const ge=i.getTile(de),_e=ge.getBucket(f);if(!_e)continue;const Ee=w.style.map.terrain&&w.style.map.terrain.getTerrainData(de),pe=_e.programConfigurations.get(f.id),ke=w.useProgram(G?"fillExtrusionPattern":"fillExtrusion",pe);G&&(w.context.activeTexture.set(z.TEXTURE0),ge.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),pe.updatePaintBuffers(ne)),fo(pe,$,he,ge,f);const Re=w.translatePosMatrix(de.posMatrix,ge,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),Ue=f.paint.get("fill-extrusion-vertical-gradient"),at=G?Sl(Re,w,Ue,le,de,ne,ge):wl(Re,w,Ue,le);ke.draw(D,D.gl.TRIANGLES,y,b,k,Nr.backCCW,at,Ee,f.id,_e.layoutVertexBuffer,_e.indexBuffer,_e.segments,f.paint,w.transform.zoom,pe,w.style.map.terrain&&_e.centroidVertexBuffer)}}function Do(w,i,f,g,y,b,k){const D=w.context,z=D.gl,$=f.fbo;if(!$)return;const W=w.useProgram("hillshade"),G=w.style.map.terrain&&w.style.map.terrain.getTerrainData(i);D.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,$.colorAttachment.get()),W.draw(D,z.TRIANGLES,y,b,k,Nr.disabled,((ne,le,he,de)=>{const ge=he.paint.get("hillshade-shadow-color"),_e=he.paint.get("hillshade-highlight-color"),Ee=he.paint.get("hillshade-accent-color");let pe=he.paint.get("hillshade-illumination-direction")*(Math.PI/180);he.paint.get("hillshade-illumination-anchor")==="viewport"&&(pe-=ne.transform.angle);const ke=!ne.options.moving;return{u_matrix:de?de.posMatrix:ne.transform.calculatePosMatrix(le.tileID.toUnwrapped(),ke),u_image:0,u_latrange:Wa(0,le.tileID),u_light:[he.paint.get("hillshade-exaggeration"),pe],u_shadow:ge,u_highlight:_e,u_accent:Ee}})(w,f,g,G?i:null),G,g.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments)}function Il(w,i,f,g,y,b){const k=w.context,D=k.gl,z=i.dem;if(z&&z.data){const $=z.dim,W=z.stride,G=z.getPixels();if(k.activeTexture.set(D.TEXTURE1),k.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||w.getTileTexture(W),i.demTexture){const le=i.demTexture;le.update(G,{premultiply:!1}),le.bind(D.NEAREST,D.CLAMP_TO_EDGE)}else i.demTexture=new xe(k,G,D.RGBA,{premultiply:!1}),i.demTexture.bind(D.NEAREST,D.CLAMP_TO_EDGE);k.activeTexture.set(D.TEXTURE0);let ne=i.fbo;if(!ne){const le=new xe(k,{width:$,height:$,data:null},D.RGBA);le.bind(D.LINEAR,D.CLAMP_TO_EDGE),ne=i.fbo=k.createFramebuffer($,$,!0,!1),ne.colorAttachment.set(le.texture)}k.bindFramebuffer.set(ne.framebuffer),k.viewport.set([0,0,$,$]),w.useProgram("hillshadePrepare").draw(k,D.TRIANGLES,g,y,b,Nr.disabled,((le,he)=>{const de=he.stride,ge=l.H();return l.aP(ge,0,l.X,-l.X,0,0,1),l.J(ge,ge,[0,-l.X,0]),{u_matrix:ge,u_image:1,u_dimension:[de,de],u_zoom:le.overscaledZ,u_unpack:he.getUnpackVector()}})(i.tileID,z),null,f.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Eh(w,i,f,g,y,b){const k=g.paint.get("raster-fade-duration");if(!b&&k>0){const D=A.now(),z=(D-w.timeAdded)/k,$=i?(D-i.timeAdded)/k:-1,W=f.getSource(),G=y.coveringZoomLevel({tileSize:W.tileSize,roundZoom:W.roundZoom}),ne=!i||Math.abs(i.tileID.overscaledZ-G)>Math.abs(w.tileID.overscaledZ-G),le=ne&&w.refreshedUponExpiration?1:l.ac(ne?z:1-$,0,1);return w.refreshedUponExpiration&&z>=1&&(w.refreshedUponExpiration=!1),i?{opacity:1,mix:1-le}:{opacity:le,mix:0}}return{opacity:1,mix:0}}const Pu=new l.aM(1,0,0,1),Pr=new l.aM(0,1,0,1),Tu=new l.aM(0,0,1,1),rd=new l.aM(1,0,1,1),Ch=new l.aM(0,1,1,1);function kl(w,i,f,g){Ec(w,0,i+f/2,w.transform.width,f,g)}function nd(w,i,f,g){Ec(w,i-f/2,0,f,w.transform.height,g)}function Ec(w,i,f,g,y,b){const k=w.context,D=k.gl;D.enable(D.SCISSOR_TEST),D.scissor(i*w.pixelRatio,f*w.pixelRatio,g*w.pixelRatio,y*w.pixelRatio),k.clear({color:b}),D.disable(D.SCISSOR_TEST)}function id(w,i,f){const g=w.context,y=g.gl,b=f.posMatrix,k=w.useProgram("debug"),D=br.disabled,z=Jr.disabled,$=w.colorModeForRenderPass(),W="$debug",G=w.style.map.terrain&&w.style.map.terrain.getTerrainData(f);g.activeTexture.set(y.TEXTURE0);const ne=i.getTileByID(f.key).latestRawTileData,le=Math.floor((ne&&ne.byteLength||0)/1024),he=i.getTile(f).tileSize,de=512/Math.min(he,512)*(f.overscaledZ/w.transform.zoom)*.5;let ge=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(ge+=` => ${f.overscaledZ}`),(function(_e,Ee){_e.initDebugOverlayCanvas();const pe=_e.debugOverlayCanvas,ke=_e.context.gl,Re=_e.debugOverlayCanvas.getContext("2d");Re.clearRect(0,0,pe.width,pe.height),Re.shadowColor="white",Re.shadowBlur=2,Re.lineWidth=1.5,Re.strokeStyle="white",Re.textBaseline="top",Re.font="bold 36px Open Sans, sans-serif",Re.fillText(Ee,5,5),Re.strokeText(Ee,5,5),_e.debugOverlayTexture.update(pe),_e.debugOverlayTexture.bind(ke.LINEAR,ke.CLAMP_TO_EDGE)})(w,`${ge} ${le}kB`),k.draw(g,y.TRIANGLES,D,z,Sn.alphaBlended,Nr.disabled,_a(b,l.aM.transparent,de),null,W,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),k.draw(g,y.LINE_STRIP,D,z,$,Nr.disabled,_a(b,l.aM.red),G,W,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function ad(w,i,f){const g=w.context,y=g.gl,b=w.colorModeForRenderPass(),k=new br(y.LEQUAL,br.ReadWrite,w.depthRangeFor3D),D=w.useProgram("terrain"),z=i.getTerrainMesh();g.bindFramebuffer.set(null),g.viewport.set([0,0,w.width,w.height]);for(const $ of f){const W=w.renderToTexture.getTexture($),G=i.getTerrainData($.tileID);g.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,W.texture);const ne=w.transform.calculatePosMatrix($.tileID.toUnwrapped()),le=i.getMeshFrameDelta(w.transform.zoom),he=w.transform.calculateFogMatrix($.tileID.toUnwrapped()),de=ph(ne,le,he,w.style.sky,w.transform.pitch);D.draw(g,y.TRIANGLES,k,Jr.disabled,b,Nr.backCCW,de,G,"terrain",z.vertexBuffer,z.indexBuffer,z.segments)}}class Fi{constructor(i,f,g){this.vertexBuffer=i,this.indexBuffer=f,this.segments=g}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class ps{constructor(i,f){this.context=new Yp(i),this.transform=f,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Qt.maxUnderzooming+Qt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Vs}resize(i,f,g){if(this.width=Math.floor(i*g),this.height=Math.floor(f*g),this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const i=this.context,f=new l.aX;f.emplaceBack(0,0),f.emplaceBack(l.X,0),f.emplaceBack(0,l.X),f.emplaceBack(l.X,l.X),this.tileExtentBuffer=i.createVertexBuffer(f,Eo.members),this.tileExtentSegments=l.a0.simpleSegment(0,0,4,2);const g=new l.aX;g.emplaceBack(0,0),g.emplaceBack(l.X,0),g.emplaceBack(0,l.X),g.emplaceBack(l.X,l.X),this.debugBuffer=i.createVertexBuffer(g,Eo.members),this.debugSegments=l.a0.simpleSegment(0,0,4,5);const y=new l.$;y.emplaceBack(0,0,0,0),y.emplaceBack(l.X,0,l.X,0),y.emplaceBack(0,l.X,0,l.X),y.emplaceBack(l.X,l.X,l.X,l.X),this.rasterBoundsBuffer=i.createVertexBuffer(y,Hn.members),this.rasterBoundsSegments=l.a0.simpleSegment(0,0,4,2);const b=new l.aX;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(b,Eo.members),this.viewportSegments=l.a0.simpleSegment(0,0,4,2);const k=new l.aZ;k.emplaceBack(0),k.emplaceBack(1),k.emplaceBack(3),k.emplaceBack(2),k.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(k);const D=new l.aY;D.emplaceBack(0,1,2),D.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(D);const z=this.context.gl;this.stencilClearMode=new Jr({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO)}clearStencil(){const i=this.context,f=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const g=l.H();l.aP(g,0,this.width,this.height,0,0,1),l.K(g,g,[f.drawingBufferWidth,f.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,f.TRIANGLES,br.disabled,this.stencilClearMode,Sn.disabled,Nr.disabled,Mn(g),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,f){if(this.currentStencilSource===i.source||!i.isTileClipped()||!f||!f.length)return;this.currentStencilSource=i.source;const g=this.context,y=g.gl;this.nextStencilID+f.length>256&&this.clearStencil(),g.setColorMode(Sn.disabled),g.setDepthMode(br.disabled);const b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of f){const D=this._tileClippingMaskIDs[k.key]=this.nextStencilID++,z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(k);b.draw(g,y.TRIANGLES,br.disabled,new Jr({func:y.ALWAYS,mask:0},D,255,y.KEEP,y.KEEP,y.REPLACE),Sn.disabled,Nr.disabled,Mn(k.posMatrix),z,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,f=this.context.gl;return new Jr({func:f.NOTEQUAL,mask:255},i,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(i){const f=this.context.gl;return new Jr({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(i){const f=this.context.gl,g=i.sort(((k,D)=>D.overscaledZ-k.overscaledZ)),y=g[g.length-1].overscaledZ,b=g[0].overscaledZ-y+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const k={};for(let D=0;D<b;D++)k[D+y]=new Jr({func:f.GEQUAL,mask:255},D+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=b,[k,g]}return[{[y]:Jr.disabled},g]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Sn([i.CONSTANT_COLOR,i.ONE],new l.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Sn.unblended:Sn.alphaBlended}depthModeForSublayer(i,f,g){if(!this.opaquePassEnabledForLayer())return br.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new br(g||this.context.gl.LEQUAL,f,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,f){this.style=i,this.options=f,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(A.now()),this.imageManager.beginFrame();const g=this.style._order,y=this.style.sourceCaches,b={},k={},D={};for(const z in y){const $=y[z];$.used&&$.prepare(this.context),b[z]=$.getVisibleCoordinates(),k[z]=b[z].slice().reverse(),D[z]=$.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<g.length;z++)if(this.style._layers[g[z]].is3D()){this.opaquePassCutoff=z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const z of g){const $=this.style._layers[z];if(!$.hasOffscreenPass()||$.isHidden(this.transform.zoom))continue;const W=k[$.source];($.type==="custom"||W.length)&&this.renderLayer(this,y[$.source],$,W)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:f.showOverdrawInspector?l.aM.black:l.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(z,$){const W=z.context,G=W.gl,ne=((_e,Ee,pe)=>({u_sky_color:_e.properties.get("sky-color"),u_horizon_color:_e.properties.get("horizon-color"),u_horizon:(Ee.height/2+Ee.getHorizon())*pe,u_sky_horizon_blend:_e.properties.get("sky-horizon-blend")*Ee.height/2*pe}))($,z.style.map.transform,z.pixelRatio),le=new br(G.LEQUAL,br.ReadWrite,[0,1]),he=Jr.disabled,de=z.colorModeForRenderPass(),ge=z.useProgram("sky");if(!$.mesh){const _e=new l.aX;_e.emplaceBack(-1,-1),_e.emplaceBack(1,-1),_e.emplaceBack(1,1),_e.emplaceBack(-1,1);const Ee=new l.aY;Ee.emplaceBack(0,1,2),Ee.emplaceBack(0,2,3),$.mesh=new Fi(W.createVertexBuffer(_e,Eo.members),W.createIndexBuffer(Ee),l.a0.simpleSegment(0,0,_e.length,Ee.length))}ge.draw(W,G.TRIANGLES,le,he,de,Nr.disabled,ne,void 0,"sky",$.mesh.vertexBuffer,$.mesh.indexBuffer,$.mesh.segments)})(this,this.style.sky),this._showOverdrawInspector=f.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[g[this.currentLayer]],$=y[z.source],W=b[z.source];this._renderTileClippingMasks(z,W),this.renderLayer(this,$,z,W)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const z=this.style._layers[g[this.currentLayer]],$=y[z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(z))continue;const W=(z.type==="symbol"?D:k)[z.source];this._renderTileClippingMasks(z,b[z.source]),this.renderLayer(this,$,z,W)}if(this.options.showTileBoundaries){const z=(function($,W){let G=null;const ne=Object.values($._layers).flatMap((ge=>ge.source&&!ge.isHidden(W)?[$.sourceCaches[ge.source]]:[])),le=ne.filter((ge=>ge.getSource().type==="vector")),he=ne.filter((ge=>ge.getSource().type!=="vector")),de=ge=>{(!G||G.getSource().maxzoom<ge.getSource().maxzoom)&&(G=ge)};return le.forEach((ge=>de(ge))),G||he.forEach((ge=>de(ge))),G})(this.style,this.transform.zoom);z&&(function($,W,G){for(let ne=0;ne<G.length;ne++)id($,W,G[ne])})(this,z,z.getVisibleCoordinates())}this.options.showPadding&&(function(z){const $=z.transform.padding;kl(z,z.transform.height-($.top||0),3,Pu),kl(z,$.bottom||0,3,Pr),nd(z,$.left||0,3,Tu),nd(z,z.transform.width-($.right||0),3,rd);const W=z.transform.centerPoint;(function(G,ne,le,he){Ec(G,ne-1,le-10,2,20,he),Ec(G,ne-10,le-1,20,2,he)})(z,W.x,z.transform.height-W.y,Ch)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;const f=this.terrainFacilitator.matrix,g=this.transform.modelViewProjectionMatrix;let y=this.terrainFacilitator.dirty;y||(y=i?!l.a_(f,g):!l.a$(f,g)),y||(y=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),y&&(l.b0(f,g),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(b,k){const D=b.context,z=D.gl,$=Sn.unblended,W=new br(z.LEQUAL,br.ReadWrite,[0,1]),G=k.getTerrainMesh(),ne=k.sourceCache.getRenderableTiles(),le=b.useProgram("terrainDepth");D.bindFramebuffer.set(k.getFramebuffer("depth").framebuffer),D.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),D.clear({color:l.aM.transparent,depth:1});for(const he of ne){const de=k.getTerrainData(he.tileID),ge={u_matrix:b.transform.calculatePosMatrix(he.tileID.toUnwrapped()),u_ele_delta:k.getMeshFrameDelta(b.transform.zoom)};le.draw(D,z.TRIANGLES,W,Jr.disabled,$,Nr.backCCW,ge,de,"terrain",G.vertexBuffer,G.indexBuffer,G.segments)}D.bindFramebuffer.set(null),D.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain),(function(b,k){const D=b.context,z=D.gl,$=Sn.unblended,W=new br(z.LEQUAL,br.ReadWrite,[0,1]),G=k.getTerrainMesh(),ne=k.getCoordsTexture(),le=k.sourceCache.getRenderableTiles(),he=b.useProgram("terrainCoords");D.bindFramebuffer.set(k.getFramebuffer("coords").framebuffer),D.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),D.clear({color:l.aM.transparent,depth:1}),k.coordsIndex=[];for(const de of le){const ge=k.getTerrainData(de.tileID);D.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,ne.texture);const _e={u_matrix:b.transform.calculatePosMatrix(de.tileID.toUnwrapped()),u_terrain_coords_id:(255-k.coordsIndex.length)/255,u_texture:0,u_ele_delta:k.getMeshFrameDelta(b.transform.zoom)};he.draw(D,z.TRIANGLES,W,Jr.disabled,$,Nr.backCCW,_e,ge,"terrain",G.vertexBuffer,G.indexBuffer,G.segments),k.coordsIndex.push(de.tileID.key)}D.bindFramebuffer.set(null),D.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain))}renderLayer(i,f,g,y){if(!g.isHidden(this.transform.zoom)&&(g.type==="background"||g.type==="custom"||(y||[]).length))switch(this.id=g.id,g.type){case"symbol":(function(b,k,D,z,$){if(b.renderPass!=="translucent")return;const W=Jr.disabled,G=b.colorModeForRenderPass();(D._unevaluatedLayout.hasValue("text-variable-anchor")||D._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(ne,le,he,de,ge,_e,Ee,pe,ke){const Re=le.transform,Ue=Fs(),at=ge==="map",dt=_e==="map";for(const _t of ne){const At=de.getTile(_t),xt=At.getBucket(he);if(!xt||!xt.text||!xt.text.segments.get().length)continue;const gt=l.ag(xt.textSizeData,Re.zoom),Rt=pr(At,1,le.transform.zoom),tr=ta(_t.posMatrix,dt,at,le.transform,Rt),wt=he.layout.get("icon-text-fit")!=="none"&&xt.hasIconData();if(gt){const Pt=Math.pow(2,Re.zoom-At.tileID.overscaledZ),er=le.style.map.terrain?(ur,yr)=>le.style.map.terrain.getElevation(_t,ur,yr):null,qr=Ue.translatePosition(Re,At,Ee,pe);Zs(xt,at,dt,ke,Re,tr,_t.posMatrix,Pt,gt,wt,Ue,qr,_t.toUnwrapped(),er)}}})(z,b,D,k,D.layout.get("text-rotation-alignment"),D.layout.get("text-pitch-alignment"),D.paint.get("text-translate"),D.paint.get("text-translate-anchor"),$),D.paint.get("icon-opacity").constantOr(1)!==0&&ds(b,k,D,z,!1,D.paint.get("icon-translate"),D.paint.get("icon-translate-anchor"),D.layout.get("icon-rotation-alignment"),D.layout.get("icon-pitch-alignment"),D.layout.get("icon-keep-upright"),W,G),D.paint.get("text-opacity").constantOr(1)!==0&&ds(b,k,D,z,!0,D.paint.get("text-translate"),D.paint.get("text-translate-anchor"),D.layout.get("text-rotation-alignment"),D.layout.get("text-pitch-alignment"),D.layout.get("text-keep-upright"),W,G),k.map.showCollisionBoxes&&(Su(b,k,D,z,!0),Su(b,k,D,z,!1))})(i,f,g,y,this.style.placement.variableOffsets);break;case"circle":(function(b,k,D,z){if(b.renderPass!=="translucent")return;const $=D.paint.get("circle-opacity"),W=D.paint.get("circle-stroke-width"),G=D.paint.get("circle-stroke-opacity"),ne=!D.layout.get("circle-sort-key").isConstant();if($.constantOr(1)===0&&(W.constantOr(1)===0||G.constantOr(1)===0))return;const le=b.context,he=le.gl,de=b.depthModeForSublayer(0,br.ReadOnly),ge=Jr.disabled,_e=b.colorModeForRenderPass(),Ee=[];for(let pe=0;pe<z.length;pe++){const ke=z[pe],Re=k.getTile(ke),Ue=Re.getBucket(D);if(!Ue)continue;const at=Ue.programConfigurations.get(D.id),dt=b.useProgram("circle",at),_t=Ue.layoutVertexBuffer,At=Ue.indexBuffer,xt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(ke),gt={programConfiguration:at,program:dt,layoutVertexBuffer:_t,indexBuffer:At,uniformValues:mc(b,ke,Re,D),terrainData:xt};if(ne){const Rt=Ue.segments.get();for(const tr of Rt)Ee.push({segments:new l.a0([tr]),sortKey:tr.sortKey,state:gt})}else Ee.push({segments:Ue.segments,sortKey:0,state:gt})}ne&&Ee.sort(((pe,ke)=>pe.sortKey-ke.sortKey));for(const pe of Ee){const{programConfiguration:ke,program:Re,layoutVertexBuffer:Ue,indexBuffer:at,uniformValues:dt,terrainData:_t}=pe.state;Re.draw(le,he.TRIANGLES,de,ge,_e,Nr.disabled,dt,_t,D.id,Ue,at,pe.segments,D.paint,b.transform.zoom,ke)}})(i,f,g,y);break;case"heatmap":(function(b,k,D,z){if(D.paint.get("heatmap-opacity")===0)return;const $=b.context;if(b.style.map.terrain){for(const W of z){const G=k.getTile(W);k.hasRenderableParent(W)||(b.renderPass==="offscreen"?Ah(b,G,D,W):b.renderPass==="translucent"&&Ks(b,D,W))}$.viewport.set([0,0,b.width,b.height])}else b.renderPass==="offscreen"?(function(W,G,ne,le){const he=W.context,de=he.gl,ge=Jr.disabled,_e=new Sn([de.ONE,de.ONE],l.aM.transparent,[!0,!0,!0,!0]);(function(Ee,pe,ke){const Re=Ee.gl;Ee.activeTexture.set(Re.TEXTURE1),Ee.viewport.set([0,0,pe.width/4,pe.height/4]);let Ue=ke.heatmapFbos.get(l.aU);Ue?(Re.bindTexture(Re.TEXTURE_2D,Ue.colorAttachment.get()),Ee.bindFramebuffer.set(Ue.framebuffer)):(Ue=Cl(Ee,pe.width/4,pe.height/4),ke.heatmapFbos.set(l.aU,Ue))})(he,W,ne),he.clear({color:l.aM.transparent});for(let Ee=0;Ee<le.length;Ee++){const pe=le[Ee];if(G.hasRenderableParent(pe))continue;const ke=G.getTile(pe),Re=ke.getBucket(ne);if(!Re)continue;const Ue=Re.programConfigurations.get(ne.id),at=W.useProgram("heatmap",Ue),{zoom:dt}=W.transform;at.draw(he,de.TRIANGLES,br.disabled,ge,_e,Nr.disabled,Kn(pe.posMatrix,ke,dt,ne.paint.get("heatmap-intensity")),null,ne.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,ne.paint,W.transform.zoom,Ue)}he.viewport.set([0,0,W.width,W.height])})(b,k,D,z):b.renderPass==="translucent"&&(function(W,G){const ne=W.context,le=ne.gl;ne.setColorMode(W.colorModeForRenderPass());const he=G.heatmapFbos.get(l.aU);he&&(ne.activeTexture.set(le.TEXTURE0),le.bindTexture(le.TEXTURE_2D,he.colorAttachment.get()),ne.activeTexture.set(le.TEXTURE1),Ml(ne,G).bind(le.LINEAR,le.CLAMP_TO_EDGE),W.useProgram("heatmapTexture").draw(ne,le.TRIANGLES,br.disabled,Jr.disabled,W.colorModeForRenderPass(),Nr.disabled,ls(W,G,0,1),null,G.id,W.viewportBuffer,W.quadTriangleIndexBuffer,W.viewportSegments,G.paint,W.transform.zoom))})(b,D)})(i,f,g,y);break;case"line":(function(b,k,D,z){if(b.renderPass!=="translucent")return;const $=D.paint.get("line-opacity"),W=D.paint.get("line-width");if($.constantOr(1)===0||W.constantOr(1)===0)return;const G=b.depthModeForSublayer(0,br.ReadOnly),ne=b.colorModeForRenderPass(),le=D.paint.get("line-dasharray"),he=D.paint.get("line-pattern"),de=he.constantOr(1),ge=D.paint.get("line-gradient"),_e=D.getCrossfadeParameters(),Ee=de?"linePattern":le?"lineSDF":ge?"lineGradient":"line",pe=b.context,ke=pe.gl;let Re=!0;for(const Ue of z){const at=k.getTile(Ue);if(de&&!at.patternsLoaded())continue;const dt=at.getBucket(D);if(!dt)continue;const _t=dt.programConfigurations.get(D.id),At=b.context.program.get(),xt=b.useProgram(Ee,_t),gt=Re||xt.program!==At,Rt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ue),tr=he.constantOr(null);if(tr&&at.imageAtlas){const er=at.imageAtlas,qr=er.patternPositions[tr.to.toString()],ur=er.patternPositions[tr.from.toString()];qr&&ur&&_t.setConstantPatternPositions(qr,ur)}const wt=Rt?Ue:null,Pt=de?ho(b,at,D,_e,wt):le?Wp(b,at,D,le,_e,wt):ge?gh(b,at,D,dt.lineClipsArray.length,wt):gc(b,at,D,wt);if(de)pe.activeTexture.set(ke.TEXTURE0),at.imageAtlasTexture.bind(ke.LINEAR,ke.CLAMP_TO_EDGE),_t.updatePaintBuffers(_e);else if(le&&(gt||b.lineAtlas.dirty))pe.activeTexture.set(ke.TEXTURE0),b.lineAtlas.bind(pe);else if(ge){const er=dt.gradients[D.id];let qr=er.texture;if(D.gradientVersion!==er.version){let ur=256;if(D.stepInterpolant){const yr=k.getSource().maxzoom,Hr=Ue.canonical.z===yr?Math.ceil(1<<b.transform.maxZoom-Ue.canonical.z):1;ur=l.ac(l.aV(dt.maxLineLength/l.X*1024*Hr),256,pe.maxTextureSize)}er.gradient=l.aW({expression:D.gradientExpression(),evaluationKey:"lineProgress",resolution:ur,image:er.gradient||void 0,clips:dt.lineClipsArray}),er.texture?er.texture.update(er.gradient):er.texture=new xe(pe,er.gradient,ke.RGBA),er.version=D.gradientVersion,qr=er.texture}pe.activeTexture.set(ke.TEXTURE0),qr.bind(D.stepInterpolant?ke.NEAREST:ke.LINEAR,ke.CLAMP_TO_EDGE)}xt.draw(pe,ke.TRIANGLES,G,b.stencilModeForClipping(Ue),ne,Nr.disabled,Pt,Rt,D.id,dt.layoutVertexBuffer,dt.indexBuffer,dt.segments,D.paint,b.transform.zoom,_t,dt.layoutVertexBuffer2),Re=!1}})(i,f,g,y);break;case"fill":(function(b,k,D,z){const $=D.paint.get("fill-color"),W=D.paint.get("fill-opacity");if(W.constantOr(1)===0)return;const G=b.colorModeForRenderPass(),ne=D.paint.get("fill-pattern"),le=b.opaquePassEnabledForLayer()&&!ne.constantOr(1)&&$.constantOr(l.aM.transparent).a===1&&W.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===le){const he=b.depthModeForSublayer(1,b.renderPass==="opaque"?br.ReadWrite:br.ReadOnly);Oo(b,k,D,z,he,G,!1)}if(b.renderPass==="translucent"&&D.paint.get("fill-antialias")){const he=b.depthModeForSublayer(D.getPaintProperty("fill-outline-color")?2:0,br.ReadOnly);Oo(b,k,D,z,he,G,!0)}})(i,f,g,y);break;case"fill-extrusion":(function(b,k,D,z){const $=D.paint.get("fill-extrusion-opacity");if($!==0&&b.renderPass==="translucent"){const W=new br(b.context.gl.LEQUAL,br.ReadWrite,b.depthRangeFor3D);if($!==1||D.paint.get("fill-extrusion-pattern").constantOr(1))Ac(b,k,D,z,W,Jr.disabled,Sn.disabled),Ac(b,k,D,z,W,b.stencilModeFor3D(),b.colorModeForRenderPass());else{const G=b.colorModeForRenderPass();Ac(b,k,D,z,W,Jr.disabled,G)}}})(i,f,g,y);break;case"hillshade":(function(b,k,D,z){if(b.renderPass!=="offscreen"&&b.renderPass!=="translucent")return;const $=b.context,W=b.depthModeForSublayer(0,br.ReadOnly),G=b.colorModeForRenderPass(),[ne,le]=b.renderPass==="translucent"?b.stencilConfigForOverlap(z):[{},z];for(const he of le){const de=k.getTile(he);de.needsHillshadePrepare!==void 0&&de.needsHillshadePrepare&&b.renderPass==="offscreen"?Il(b,de,D,W,Jr.disabled,G):b.renderPass==="translucent"&&Do(b,he,de,D,W,ne[he.overscaledZ],G)}$.viewport.set([0,0,b.width,b.height])})(i,f,g,y);break;case"raster":(function(b,k,D,z){if(b.renderPass!=="translucent"||D.paint.get("raster-opacity")===0||!z.length)return;const $=b.context,W=$.gl,G=k.getSource(),ne=b.useProgram("raster"),le=b.colorModeForRenderPass(),[he,de]=G instanceof Ri?[{},z]:b.stencilConfigForOverlap(z),ge=de[de.length-1].overscaledZ,_e=!b.options.moving;for(const Ee of de){const pe=b.depthModeForSublayer(Ee.overscaledZ-ge,D.paint.get("raster-opacity")===1?br.ReadWrite:br.ReadOnly,W.LESS),ke=k.getTile(Ee);ke.registerFadeDuration(D.paint.get("raster-fade-duration"));const Re=k.findLoadedParent(Ee,0),Ue=k.findLoadedSibling(Ee),at=Eh(ke,Re||Ue||null,k,D,b.transform,b.style.map.terrain);let dt,_t;const At=D.paint.get("raster-resampling")==="nearest"?W.NEAREST:W.LINEAR;$.activeTexture.set(W.TEXTURE0),ke.texture.bind(At,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),$.activeTexture.set(W.TEXTURE1),Re?(Re.texture.bind(At,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),dt=Math.pow(2,Re.tileID.overscaledZ-ke.tileID.overscaledZ),_t=[ke.tileID.canonical.x*dt%1,ke.tileID.canonical.y*dt%1]):ke.texture.bind(At,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),ke.texture.useMipmap&&$.extTextureFilterAnisotropic&&b.transform.pitch>20&&W.texParameterf(W.TEXTURE_2D,$.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,$.extTextureFilterAnisotropicMax);const xt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ee),gt=xt?Ee:null,Rt=gt?gt.posMatrix:b.transform.calculatePosMatrix(Ee.toUnwrapped(),_e),tr=Hf(Rt,_t||[0,0],dt||1,at,D);G instanceof Ri?ne.draw($,W.TRIANGLES,pe,Jr.disabled,le,Nr.disabled,tr,xt,D.id,G.boundsBuffer,b.quadTriangleIndexBuffer,G.boundsSegments):ne.draw($,W.TRIANGLES,pe,he[Ee.overscaledZ],le,Nr.disabled,tr,xt,D.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}})(i,f,g,y);break;case"background":(function(b,k,D,z){const $=D.paint.get("background-color"),W=D.paint.get("background-opacity");if(W===0)return;const G=b.context,ne=G.gl,le=b.transform,he=le.tileSize,de=D.paint.get("background-pattern");if(b.isPatternMissing(de))return;const ge=!de&&$.a===1&&W===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==ge)return;const _e=Jr.disabled,Ee=b.depthModeForSublayer(0,ge==="opaque"?br.ReadWrite:br.ReadOnly),pe=b.colorModeForRenderPass(),ke=b.useProgram(de?"backgroundPattern":"background"),Re=z||le.coveringTiles({tileSize:he,terrain:b.style.map.terrain});de&&(G.activeTexture.set(ne.TEXTURE0),b.imageManager.bind(b.context));const Ue=D.getCrossfadeParameters();for(const at of Re){const dt=z?at.posMatrix:b.transform.calculatePosMatrix(at.toUnwrapped()),_t=de?vh(dt,W,b,de,{tileID:at,tileSize:he},Ue):Ws(dt,W,$),At=b.style.map.terrain&&b.style.map.terrain.getTerrainData(at);ke.draw(G,ne.TRIANGLES,Ee,_e,pe,Nr.disabled,_t,At,D.id,b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}})(i,0,g,y);break;case"custom":(function(b,k,D){const z=b.context,$=D.implementation;if(b.renderPass==="offscreen"){const W=$.prerender;W&&(b.setCustomLayerDefaults(),z.setColorMode(b.colorModeForRenderPass()),W.call($,z.gl,b.transform.customLayerMatrix()),z.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),z.setColorMode(b.colorModeForRenderPass()),z.setStencilMode(Jr.disabled);const W=$.renderingMode==="3d"?new br(b.context.gl.LEQUAL,br.ReadWrite,b.depthRangeFor3D):b.depthModeForSublayer(0,br.ReadOnly);z.setDepthMode(W),$.render(z.gl,b.transform.customLayerMatrix(),{farZ:b.transform.farZ,nearZ:b.transform.nearZ,fov:b.transform._fov,modelViewProjectionMatrix:b.transform.modelViewProjectionMatrix,projectionMatrix:b.transform.projectionMatrix}),z.setDirty(),b.setBaseState(),z.bindFramebuffer.set(null)}})(i,0,g)}}translatePosMatrix(i,f,g,y,b){if(!g[0]&&!g[1])return i;const k=b?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(k){const $=Math.sin(k),W=Math.cos(k);g=[g[0]*W-g[1]*$,g[0]*$+g[1]*W]}const D=[b?g[0]:pr(f,g[0],this.transform.zoom),b?g[1]:pr(f,g[1],this.transform.zoom),0],z=new Float32Array(16);return l.J(z,i,D),z}saveTileTexture(i){const f=this._tileTextures[i.size[0]];f?f.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const f=this._tileTextures[i];return f&&f.length>0?f.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const f=this.imageManager.getPattern(i.from.toString()),g=this.imageManager.getPattern(i.to.toString());return!f||!g}useProgram(i,f){this.cache=this.cache||{};const g=i+(f?f.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[g]||(this.cache[g]=new Br(this.context,Co[i],f,_h[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[g]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new xe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:f}=this.context.gl;return this.width!==i||this.height!==f}}class Xs{constructor(i,f){this.points=i,this.planes=f}static fromInvProjectionMatrix(i,f,g){const y=Math.pow(2,g),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((D=>{const z=1/(D=l.af([],D,i))[3]/f*y;return l.b1(D,D,[z,z,1/D[3],z])})),k=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((D=>{const z=(function(ne,le){var he=le[0],de=le[1],ge=le[2],_e=he*he+de*de+ge*ge;return _e>0&&(_e=1/Math.sqrt(_e)),ne[0]=le[0]*_e,ne[1]=le[1]*_e,ne[2]=le[2]*_e,ne})([],(function(ne,le,he){var de=le[0],ge=le[1],_e=le[2],Ee=he[0],pe=he[1],ke=he[2];return ne[0]=ge*ke-_e*pe,ne[1]=_e*Ee-de*ke,ne[2]=de*pe-ge*Ee,ne})([],se([],b[D[0]],b[D[1]]),se([],b[D[2]],b[D[1]]))),$=-((W=z)[0]*(G=b[D[1]])[0]+W[1]*G[1]+W[2]*G[2]);var W,G;return z.concat($)}));return new Xs(b,k)}}class Ys{constructor(i,f){this.min=i,this.max=f,this.center=(function(g,y,b){return g[0]=.5*y[0],g[1]=.5*y[1],g[2]=.5*y[2],g})([],(function(g,y,b){return g[0]=y[0]+b[0],g[1]=y[1]+b[1],g[2]=y[2]+b[2],g})([],this.min,this.max))}quadrant(i){const f=[i%2==0,i<2],g=H(this.min),y=H(this.max);for(let b=0;b<f.length;b++)g[b]=f[b]?this.min[b]:this.center[b],y[b]=f[b]?this.center[b]:this.max[b];return y[2]=this.max[2],new Ys(g,y)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const f=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let g=!0;for(let y=0;y<i.planes.length;y++){const b=i.planes[y];let k=0;for(let D=0;D<f.length;D++)l.b2(b,f[D])>=0&&k++;if(k===0)return 0;k!==f.length&&(g=!1)}if(g)return 2;for(let y=0;y<3;y++){let b=Number.MAX_VALUE,k=-Number.MAX_VALUE;for(let D=0;D<i.points.length;D++){const z=i.points[D][y]-this.min[y];b=Math.min(b,z),k=Math.max(k,z)}if(k<0||b>this.max[y]-this.min[y])return 0}return 1}}class Js{constructor(i=0,f=0,g=0,y=0){if(isNaN(i)||i<0||isNaN(f)||f<0||isNaN(g)||g<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=f,this.left=g,this.right=y}interpolate(i,f,g){return f.top!=null&&i.top!=null&&(this.top=l.y.number(i.top,f.top,g)),f.bottom!=null&&i.bottom!=null&&(this.bottom=l.y.number(i.bottom,f.bottom,g)),f.left!=null&&i.left!=null&&(this.left=l.y.number(i.left,f.left,g)),f.right!=null&&i.right!=null&&(this.right=l.y.number(i.right,f.right,g)),this}getCenter(i,f){const g=l.ac((this.left+i-this.right)/2,0,i),y=l.ac((this.top+f-this.bottom)/2,0,f);return new l.P(g,y)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Js(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Cc=85.051129;class ms{constructor(i,f,g,y,b){this.tileSize=512,this._renderWorldCopies=b===void 0||!!b,this._minZoom=i||0,this._maxZoom=f||22,this._minPitch=g??0,this._maxPitch=y??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Js,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const i=new ms(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.lngRange=i.lngRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this.minElevationForCurrentTile=i.minElevationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const f=-l.b3(i,-180,180)*Math.PI/180;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=(function(){var g=new l.A(4);return l.A!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g})(),(function(g,y,b){var k=y[0],D=y[1],z=y[2],$=y[3],W=Math.sin(b),G=Math.cos(b);g[0]=k*G+z*W,g[1]=D*G+$*W,g[2]=k*-W+z*G,g[3]=D*-W+$*G})(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const f=l.ac(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const f=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._zoom=f,this.tileZoom=Math.max(0,Math.floor(f)),this.scale=this.zoomScale(f),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,f,g){this._unmodified=!1,this._edgeInsets.interpolate(i,f,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const f=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(i){const f=[new l.b4(0,i)];if(this._renderWorldCopies){const g=this.pointCoordinate(new l.P(0,0)),y=this.pointCoordinate(new l.P(this.width,0)),b=this.pointCoordinate(new l.P(this.width,this.height)),k=this.pointCoordinate(new l.P(0,this.height)),D=Math.floor(Math.min(g.x,y.x,b.x,k.x)),z=Math.floor(Math.max(g.x,y.x,b.x,k.x)),$=1;for(let W=D-$;W<=z+$;W++)W!==0&&f.push(new l.b4(W,i))}return f}coveringTiles(i){var f,g;let y=this.coveringZoomLevel(i);const b=y;if(i.minzoom!==void 0&&y<i.minzoom)return[];i.maxzoom!==void 0&&y>i.maxzoom&&(y=i.maxzoom);const k=this.pointCoordinate(this.getCameraPoint()),D=l.Z.fromLngLat(this.center),z=Math.pow(2,y),$=[z*k.x,z*k.y,0],W=[z*D.x,z*D.y,0],G=Xs.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,y);let ne=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ne=y);const le=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,he=pe=>({aabb:new Ys([pe*z,0,0],[(pe+1)*z,z,0]),zoom:0,x:0,y:0,wrap:pe,fullyVisible:!1}),de=[],ge=[],_e=y,Ee=i.reparseOverscaled?b:y;if(this._renderWorldCopies)for(let pe=1;pe<=3;pe++)de.push(he(-pe)),de.push(he(pe));for(de.push(he(0));de.length>0;){const pe=de.pop(),ke=pe.x,Re=pe.y;let Ue=pe.fullyVisible;if(!Ue){const xt=pe.aabb.intersects(G);if(xt===0)continue;Ue=xt===2}const at=i.terrain?$:W,dt=pe.aabb.distanceX(at),_t=pe.aabb.distanceY(at),At=Math.max(Math.abs(dt),Math.abs(_t));if(pe.zoom===_e||At>le+(1<<_e-pe.zoom)-2&&pe.zoom>=ne){const xt=_e-pe.zoom,gt=$[0]-.5-(ke<<xt),Rt=$[1]-.5-(Re<<xt);ge.push({tileID:new l.S(pe.zoom===_e?Ee:pe.zoom,pe.wrap,pe.zoom,ke,Re),distanceSq:fe([W[0]-.5-ke,W[1]-.5-Re]),tileDistanceToCamera:Math.sqrt(gt*gt+Rt*Rt)})}else for(let xt=0;xt<4;xt++){const gt=(ke<<1)+xt%2,Rt=(Re<<1)+(xt>>1),tr=pe.zoom+1;let wt=pe.aabb.quadrant(xt);if(i.terrain){const Pt=new l.S(tr,pe.wrap,tr,gt,Rt),er=i.terrain.getMinMaxElevation(Pt),qr=(f=er.minElevation)!==null&&f!==void 0?f:this.elevation,ur=(g=er.maxElevation)!==null&&g!==void 0?g:this.elevation;wt=new Ys([wt.min[0],wt.min[1],qr],[wt.max[0],wt.max[1],ur])}de.push({aabb:wt,zoom:tr,x:gt,y:Rt,wrap:pe.wrap,fullyVisible:Ue})}}return ge.sort(((pe,ke)=>pe.distanceSq-ke.distanceSq)).map((pe=>pe.tileID))}resize(i,f){this.width=i,this.height=f,this.pixelsToGLUnits=[2/i,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const f=l.ac(i.lat,-85.051129,Cc);return new l.P(l.O(i.lng)*this.worldSize,l.Q(f)*this.worldSize)}unproject(i){return new l.Z(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const f=this.elevation,g=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,y=this.pointLocation(this.centerPoint,i),b=i.getElevationForLngLatZoom(y,this.tileZoom);if(!(this.elevation-b))return;const k=g+f-b,D=Math.cos(this._pitch)*this.cameraToCenterDistance/k/l.b5(1,y.lat),z=this.scaleZoom(D/this.tileSize);this._elevation=b,this._center=y,this.zoom=z}setLocationAtPoint(i,f){const g=this.pointCoordinate(f),y=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(i),k=new l.Z(b.x-(g.x-y.x),b.y-(g.y-y.y));this.center=this.coordinateLocation(k),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,f){return f?this.coordinatePoint(this.locationCoordinate(i),f.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,f){return this.coordinateLocation(this.pointCoordinate(i,f))}locationCoordinate(i){return l.Z.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,f){if(f){const ne=f.pointCoordinate(i);if(ne!=null)return ne}const g=[i.x,i.y,0,1],y=[i.x,i.y,1,1];l.af(g,g,this.pixelMatrixInverse),l.af(y,y,this.pixelMatrixInverse);const b=g[3],k=y[3],D=g[1]/b,z=y[1]/k,$=g[2]/b,W=y[2]/k,G=$===W?0:(0-$)/(W-$);return new l.Z(l.y.number(g[0]/b,y[0]/k,G)/this.worldSize,l.y.number(D,z,G)/this.worldSize)}coordinatePoint(i,f=0,g=this.pixelMatrix){const y=[i.x*this.worldSize,i.y*this.worldSize,f,1];return l.af(y,y,g),new l.P(y[0]/y[3],y[1]/y[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new qe().extend(this.pointLocation(new l.P(0,i))).extend(this.pointLocation(new l.P(this.width,i))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new qe([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Cc])}calculateTileMatrix(i){const f=i.canonical,g=this.worldSize/this.zoomScale(f.z),y=f.x+Math.pow(2,f.z)*i.wrap,b=l.an(new Float64Array(16));return l.J(b,b,[y*g,f.y*g,0]),l.K(b,b,[g/l.X,g/l.X,1]),b}calculatePosMatrix(i,f=!1){const g=i.key,y=f?this._alignedPosMatrixCache:this._posMatrixCache;if(y[g])return y[g];const b=this.calculateTileMatrix(i);return l.L(b,f?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,b),y[g]=new Float32Array(b),y[g]}calculateFogMatrix(i){const f=i.key,g=this._fogMatrixCache;if(g[f])return g[f];const y=this.calculateTileMatrix(i);return l.L(y,this.fogMatrix,y),g[f]=new Float32Array(y),g[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(i,f){f=l.ac(+f,this.minZoom,this.maxZoom);const g={center:new l.N(i.lng,i.lat),zoom:f};let y=this.lngRange;if(!this._renderWorldCopies&&y===null){const pe=179.9999999999;y=[-pe,pe]}const b=this.tileSize*this.zoomScale(g.zoom);let k=0,D=b,z=0,$=b,W=0,G=0;const{x:ne,y:le}=this.size;if(this.latRange){const pe=this.latRange;k=l.Q(pe[1])*b,D=l.Q(pe[0])*b,D-k<le&&(W=le/(D-k))}y&&(z=l.b3(l.O(y[0])*b,0,b),$=l.b3(l.O(y[1])*b,0,b),$<z&&($+=b),$-z<ne&&(G=ne/($-z)));const{x:he,y:de}=this.project.call({worldSize:b},i);let ge,_e;const Ee=Math.max(G||0,W||0);if(Ee){const pe=new l.P(G?($+z)/2:he,W?(D+k)/2:de);return g.center=this.unproject.call({worldSize:b},pe).wrap(),g.zoom+=this.scaleZoom(Ee),g}if(this.latRange){const pe=le/2;de-pe<k&&(_e=k+pe),de+pe>D&&(_e=D-pe)}if(y){const pe=(z+$)/2;let ke=he;this._renderWorldCopies&&(ke=l.b3(he,pe-b/2,pe+b/2));const Re=ne/2;ke-Re<z&&(ge=z+Re),ke+Re>$&&(ge=$-Re)}if(ge!==void 0||_e!==void 0){const pe=new l.P(ge??he,_e??de);g.center=this.unproject.call({worldSize:b},pe).wrap()}return g}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const i=this._unmodified,{center:f,zoom:g}=this.getConstrained(this.center,this.zoom);this.center=f,this.zoom=g,this._unmodified=i,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,f=this.point.x,g=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b5(1,this.center.lat)*this.worldSize;let y=l.an(new Float64Array(16));l.K(y,y,[this.width/2,-this.height/2,1]),l.J(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=l.an(new Float64Array(16)),l.K(y,y,[1,-1,1]),l.J(y,y,[-1,-1,0]),l.K(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y;const b=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),k=Math.min(this.elevation,this.minElevationForCurrentTile),D=b-k*this._pixelPerMeter/Math.cos(this._pitch),z=k<0?D:b,$=Math.PI/2+this._pitch,W=this._fov*(.5+i.y/this.height),G=Math.sin(W)*z/Math.sin(l.ac(Math.PI-$-W,.01,Math.PI-.01)),ne=this.getHorizon(),le=2*Math.atan(ne/this.cameraToCenterDistance)*(.5+i.y/(2*ne)),he=Math.sin(le)*z/Math.sin(l.ac(Math.PI-$-le,.01,Math.PI-.01)),de=Math.min(G,he);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*de+z),this.nearZ=this.height/50,y=new Float64Array(16),l.b6(y,this._fov,this.width/this.height,this.nearZ,this.farZ),y[8]=2*-i.x/this.width,y[9]=2*i.y/this.height,this.projectionMatrix=l.ae(y),l.K(y,y,[1,-1,1]),l.J(y,y,[0,0,-this.cameraToCenterDistance]),l.b7(y,y,this._pitch),l.ad(y,y,this.angle),l.J(y,y,[-f,-g,0]),this.mercatorMatrix=l.K([],y,[this.worldSize,this.worldSize,this.worldSize]),l.K(y,y,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.L(new Float64Array(16),this.labelPlaneMatrix,y),l.J(y,y,[0,0,-this.elevation]),this.modelViewProjectionMatrix=y,this.invModelViewProjectionMatrix=l.as([],y),this.fogMatrix=new Float64Array(16),l.b6(this.fogMatrix,this._fov,this.width/this.height,b,this.farZ),this.fogMatrix[8]=2*-i.x/this.width,this.fogMatrix[9]=2*i.y/this.height,l.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),l.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),l.b7(this.fogMatrix,this.fogMatrix,this._pitch),l.ad(this.fogMatrix,this.fogMatrix,this.angle),l.J(this.fogMatrix,this.fogMatrix,[-f,-g,0]),l.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),l.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=l.L(new Float64Array(16),this.labelPlaneMatrix,y);const ge=this.width%2/2,_e=this.height%2/2,Ee=Math.cos(this.angle),pe=Math.sin(this.angle),ke=f-Math.round(f)+Ee*ge+pe*_e,Re=g-Math.round(g)+Ee*_e+pe*ge,Ue=new Float64Array(y);if(l.J(Ue,Ue,[ke>.5?ke-1:ke,Re>.5?Re-1:Re,0]),this.alignedModelViewProjectionMatrix=Ue,y=l.as(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new l.P(0,0)),f=[i.x*this.worldSize,i.y*this.worldSize,0,1];return l.af(f,f,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,i))}getCameraQueryGeometry(i){const f=this.getCameraPoint();if(i.length===1)return[i[0],f];{let g=f.x,y=f.y,b=f.x,k=f.y;for(const D of i)g=Math.min(g,D.x),y=Math.min(y,D.y),b=Math.max(b,D.x),k=Math.max(k,D.y);return[new l.P(g,y),new l.P(b,y),new l.P(b,k),new l.P(g,k),new l.P(g,y)]}}lngLatToCameraDepth(i,f){const g=this.locationCoordinate(i),y=[g.x*this.worldSize,g.y*this.worldSize,f,1];return l.af(y,y,this.modelViewProjectionMatrix),y[2]/y[3]}}function Au(w,i){let f,g=!1,y=null,b=null;const k=()=>{y=null,g&&(w.apply(b,f),y=setTimeout(k,i),g=!1)};return(...D)=>(g=!0,b=this,f=D,y||k(),y)}class Mc{constructor(i){this._getCurrentHash=()=>{const f=window.location.hash.replace("#","");if(this._hashName){let g;return f.split("&").map((y=>y.split("="))).forEach((y=>{y[0]===this._hashName&&(g=y)})),(g&&g[1]||"").split("/")}return f.split("/")},this._onHashChange=()=>{const f=this._getCurrentHash();if(f.length>=3&&!f.some((g=>isNaN(g)))){const g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(f[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:g,pitch:+(f[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const f=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,f)},this._removeHash=()=>{const f=this._getCurrentHash();if(f.length===0)return;const g=f.join("/");let y=g;y.split("&").length>0&&(y=y.split("&")[0]),this._hashName&&(y=`${this._hashName}=${g}`);let b=window.location.hash.replace(y,"");b.startsWith("#&")?b=b.slice(0,1)+b.slice(2):b==="#"&&(b="");let k=window.location.href.replace(/(#.+)?$/,b);k=k.replace("&&","&"),window.history.replaceState(window.history.state,null,k)},this._updateHash=Au(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(i){const f=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,y=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,y),k=Math.round(f.lng*b)/b,D=Math.round(f.lat*b)/b,z=this._map.getBearing(),$=this._map.getPitch();let W="";if(W+=i?`/${k}/${D}/${g}`:`${g}/${D}/${k}`,(z||$)&&(W+="/"+Math.round(10*z)/10),$&&(W+=`/${Math.round($)}`),this._hashName){const G=this._hashName;let ne=!1;const le=window.location.hash.slice(1).split("&").map((he=>{const de=he.split("=")[0];return de===G?(ne=!0,`${de}=${W}`):he})).filter((he=>he));return ne||le.push(`${G}=${W}`),`#${le.join("&")}`}return`#${W}`}}const Ro={linearity:.3,easing:l.b8(0,0,.3,1)},Eu=l.e({deceleration:2500,maxSpeed:1400},Ro),Cu=l.e({deceleration:20,maxSpeed:1400},Ro),Ic=l.e({deceleration:1e3,maxSpeed:360},Ro),Mu=l.e({deceleration:1e3,maxSpeed:90},Ro);class Ol{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:A.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,f=A.now();for(;i.length>0&&f-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const f={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)f.zoom+=b.zoomDelta||0,f.bearing+=b.bearingDelta||0,f.pitch+=b.pitchDelta||0,b.panDelta&&f.pan._add(b.panDelta),b.around&&(f.around=b.around),b.pinchAround&&(f.pinchAround=b.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(f.pan.mag()){const b=Qs(f.pan.mag(),g,l.e({},Eu,i||{}));y.offset=f.pan.mult(b.amount/f.pan.mag()),y.center=this._map.transform.center,po(y,b)}if(f.zoom){const b=Qs(f.zoom,g,Cu);y.zoom=this._map.transform.zoom+b.amount,po(y,b)}if(f.bearing){const b=Qs(f.bearing,g,Ic);y.bearing=this._map.transform.bearing+l.ac(b.amount,-179,179),po(y,b)}if(f.pitch){const b=Qs(f.pitch,g,Mu);y.pitch=this._map.transform.pitch+b.amount,po(y,b)}if(y.zoom||y.bearing){const b=f.pinchAround===void 0?f.around:f.pinchAround;y.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),l.e(y,{noMoveStart:!0})}}function po(w,i){(!w.duration||w.duration<i.duration)&&(w.duration=i.duration,w.easing=i.easing)}function Qs(w,i,f){const{maxSpeed:g,linearity:y,deceleration:b}=f,k=l.ac(w*y/(i/1e3),-g,g),D=Math.abs(k)/(b*y);return{easing:f.easing,duration:1e3*D,amount:k*(D/2)}}class ri extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,f,g,y={}){const b=M.mousePos(f.getCanvas(),g),k=f.unproject(b);super(i,l.e({point:b,lngLat:k,originalEvent:g},y)),this._defaultPrevented=!1,this.target=f}}class mo extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,f,g){const y=i==="touchend"?g.changedTouches:g.touches,b=M.touchPos(f.getCanvasContainer(),y),k=b.map((z=>f.unproject(z))),D=b.reduce(((z,$,W,G)=>z.add($.div(G.length))),new l.P(0,0));super(i,{points:b,point:D,lngLats:k,lngLat:f.unproject(D),originalEvent:g}),this._defaultPrevented=!1}}class Mh extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,f,g){super(i,{originalEvent:g}),this._defaultPrevented=!1}}class Ih{constructor(i,f){this._map=i,this._clickTolerance=f.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Mh(i.type,this._map,i))}mousedown(i,f){return this._mousedownPos=f,this._firePreventable(new ri(i.type,this._map,i))}mouseup(i){this._map.fire(new ri(i.type,this._map,i))}click(i,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||this._map.fire(new ri(i.type,this._map,i))}dblclick(i){return this._firePreventable(new ri(i.type,this._map,i))}mouseover(i){this._map.fire(new ri(i.type,this._map,i))}mouseout(i){this._map.fire(new ri(i.type,this._map,i))}touchstart(i){return this._firePreventable(new mo(i.type,this._map,i))}touchmove(i){this._map.fire(new mo(i.type,this._map,i))}touchend(i){this._map.fire(new mo(i.type,this._map,i))}touchcancel(i){this._map.fire(new mo(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class _n{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new ri(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ri("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new ri(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ba{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(l.P.convert(i),this._map.terrain)}}class $i{constructor(i,f){this._map=i,this._tr=new ba(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,f){this.isEnabled()&&i.shiftKey&&i.button===0&&(M.disableDrag(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(i,f){if(!this._active)return;const g=f;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=g,this._box||(this._box=M.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const b=Math.min(y.x,g.x),k=Math.max(y.x,g.x),D=Math.min(y.y,g.y),z=Math.max(y.y,g.y);M.setTransform(this._box,`translate(${b}px,${D}px)`),this._box.style.width=k-b+"px",this._box.style.height=z-D+"px"}mouseupWindow(i,f){if(!this._active||i.button!==0)return;const g=this._startPos,y=f;if(this.reset(),M.suppressClick(),g.x!==y.x||g.y!==y.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:i})),{cameraAnimation:b=>b.fitScreenCoordinates(g,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(M.remove(this._box),this._box=null),M.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,f){return this._map.fire(new l.k(i,{originalEvent:f}))}}function Dl(w,i){if(w.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${i.length}`);const f={};for(let g=0;g<w.length;g++)f[w[g].identifier]=i[g];return f}class go{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,f,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),g.length===this.numTouches&&(this.centroid=(function(y){const b=new l.P(0,0);for(const k of y)b._add(k);return b.div(y.length)})(f),this.touches=Dl(g,f)))}touchmove(i,f,g){if(this.aborted||!this.centroid)return;const y=Dl(g,f);for(const b in this.touches){const k=y[b];(!k||k.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(i,f,g){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Rl{constructor(i){this.singleTap=new go(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,f,g){this.singleTap.touchstart(i,f,g)}touchmove(i,f,g){this.singleTap.touchmove(i,f,g)}touchend(i,f,g){const y=this.singleTap.touchend(i,f,g);if(y){const b=i.timeStamp-this.lastTime<500,k=!this.lastTap||this.lastTap.dist(y)<30;if(b&&k||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class gs{constructor(i){this._tr=new ba(i),this._zoomIn=new Rl({numTouches:1,numTaps:2}),this._zoomOut=new Rl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,f,g){this._zoomIn.touchstart(i,f,g),this._zoomOut.touchstart(i,f,g)}touchmove(i,f,g){this._zoomIn.touchmove(i,f,g),this._zoomOut.touchmove(i,f,g)}touchend(i,f,g){const y=this._zoomIn.touchend(i,f,g),b=this._zoomOut.touchend(i,f,g),k=this._tr;return y?(this._active=!0,i.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:k.zoom+1,around:k.unproject(y)},{originalEvent:i})}):b?(this._active=!0,i.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:k.zoom-1,around:k.unproject(b)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zo{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const f=this._moveFunction(...i);if(f.bearingDelta||f.pitchDelta||f.around||f.panDelta)return this._active=!0,f}dragStart(i,f){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=f.length?f[0]:f,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,f){if(!this.isEnabled())return;const g=this._lastPoint;if(!g)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const y=f.length?f[0]:f;return!this._moved&&y.dist(g)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(g,y))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&M.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const kh={0:1,2:2};class ys{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const f=M.mouseButton(i);this._eventButton=f}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!(function(f,g){const y=kh[g];return f.buttons===void 0||(f.buttons&y)!==y})(i,this._eventButton)}isValidEndEvent(i){return M.mouseButton(i)===this._eventButton}}class Oh{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const Iu=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=i=>{i.preventDefault()}},kc=({enable:w,clickTolerance:i,bearingDegreesPerPixelMoved:f=.8})=>{const g=new ys({checkCorrectEvent:y=>M.mouseButton(y)===0&&y.ctrlKey||M.mouseButton(y)===2});return new zo({clickTolerance:i,move:(y,b)=>({bearingDelta:(b.x-y.x)*f}),moveStateManager:g,enable:w,assignEvents:Iu})},Qr=({enable:w,clickTolerance:i,pitchDegreesPerPixelMoved:f=-.5})=>{const g=new ys({checkCorrectEvent:y=>M.mouseButton(y)===0&&y.ctrlKey||M.mouseButton(y)===2});return new zo({clickTolerance:i,move:(y,b)=>({pitchDelta:(b.y-y.y)*f}),moveStateManager:g,enable:w,assignEvents:Iu})};class jo{constructor(i,f){this._clickTolerance=i.clickTolerance||1,this._map=f,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0)}_shouldBePrevented(i){return i<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(i,f,g){return this._calculateTransform(i,f,g)}touchmove(i,f,g){if(this._active){if(!this._shouldBePrevented(g.length))return i.preventDefault(),this._calculateTransform(i,f,g);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",i)}}touchend(i,f,g){this._calculateTransform(i,f,g),this._active&&this._shouldBePrevented(g.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,f,g){g.length>0&&(this._active=!0);const y=Dl(g,f),b=new l.P(0,0),k=new l.P(0,0);let D=0;for(const $ in y){const W=y[$],G=this._touches[$];G&&(b._add(W),k._add(W.sub(G)),D++,y[$]=W)}if(this._touches=y,this._shouldBePrevented(D)||!k.mag())return;const z=k.div(D);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(D),panDelta:z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class el{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,f,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([f[0],f[1]]))}touchmove(i,f,g){if(!this._firstTwoTouches)return;i.preventDefault();const[y,b]=this._firstTwoTouches,k=Lo(g,f,y),D=Lo(g,f,b);if(!k||!D)return;const z=this._aroundCenter?null:k.add(D).div(2);return this._move([k,D],z,i)}touchend(i,f,g){if(!this._firstTwoTouches)return;const[y,b]=this._firstTwoTouches,k=Lo(g,f,y),D=Lo(g,f,b);k&&D||(this._active&&M.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Lo(w,i,f){for(let g=0;g<w.length;g++)if(w[g].identifier===f)return i[g]}function Oc(w,i){return Math.log(w/i)/Math.LN2}class ku extends el{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,f){const g=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Oc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Oc(this._distance,g),pinchAround:f}}}function tl(w,i){return 180*w.angleWith(i)/Math.PI}class zl extends el{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,f,g){const y=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:tl(this._vector,y),pinchAround:f}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const f=25/(Math.PI*this._minDiameter)*360,g=tl(i,this._startVector);return Math.abs(g)<f}}function Bo(w){return Math.abs(w.y)>Math.abs(w.x)}class jl extends el{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,f,g){super.touchstart(i,f,g),this._currentTouchCount=g.length}_start(i){this._lastPoints=i,Bo(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,f,g){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const y=i[0].sub(this._lastPoints[0]),b=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,b,g.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(y.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(i,f,g){if(this._valid!==void 0)return this._valid;const y=i.mag()>=2,b=f.mag()>=2;if(!y&&!b)return;if(!y||!b)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;const k=i.y>0==f.y>0;return Bo(i)&&Bo(f)&&k}}const od={panStep:100,bearingStep:15,pitchStep:10};class wa{constructor(i){this._tr=new ba(i);const f=od;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let f=0,g=0,y=0,b=0,k=0;switch(i.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:i.shiftKey?g=-1:(i.preventDefault(),b=-1);break;case 39:i.shiftKey?g=1:(i.preventDefault(),b=1);break;case 38:i.shiftKey?y=1:(i.preventDefault(),k=-1);break;case 40:i.shiftKey?y=-1:(i.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(g=0,y=0),{cameraAnimation:D=>{const z=this._tr;D.easeTo({duration:300,easeId:"keyboardHandler",easing:Za,zoom:f?Math.round(z.zoom)+f*(i.shiftKey?2:1):z.zoom,bearing:z.bearing+g*this._bearingStep,pitch:z.pitch+y*this._pitchStep,offset:[-b*this._panStep,-k*this._panStep],center:z.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Za(w){return w*(2-w)}const Ll=4.000244140625;class Vi{constructor(i,f){this._onTimeout=g=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(g)},this._map=i,this._tr=new ba(i),this._triggerRenderFrame=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(i){return!!this._map.cooperativeGestures.isEnabled()&&!(i.ctrlKey||this._map.cooperativeGestures.isBypassed(i))}wheel(i){if(!this.isEnabled())return;if(this._shouldBePrevented(i))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",i);let f=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const g=A.now(),y=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,f!==0&&f%Ll==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(y*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),i.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=i,this._delta-=f,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=M.mousePos(this._map.getCanvas(),i),g=this._tr;this._around=f.y>g.transform.height/2-g.transform.getHorizon()?l.N.convert(this._aroundCenter?g.center:g.unproject(f)):l.N.convert(g.center),this._aroundPoint=g.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const z=this._type==="wheel"&&Math.abs(this._delta)>Ll?this._wheelZoomRate:this._defaultZoomRate;let $=2/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&$!==0&&($=1/$);const W=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(W*$))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const f=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,g=this._startZoom,y=this._easing;let b,k=!1;const D=A.now()-this._lastWheelEventTime;if(this._type==="wheel"&&g&&y&&D){const z=Math.min(D/200,1),$=y(z);b=l.y.number(g,f,$),z<1?this._frameId||(this._frameId=!0):k=!0}else b=f,k=!0;return this._active=!0,k&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!k,zoomDelta:b-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let f=l.b9;if(this._prevEase){const g=this._prevEase,y=(A.now()-g.start)/g.duration,b=g.easing(y+.01)-g.easing(y),k=.27/Math.sqrt(b*b+1e-4)*.01,D=Math.sqrt(.0729-k*k);f=l.b8(k,D,.25,1)}return this._prevEase={start:A.now(),duration:i,easing:f},f}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class No{constructor(i,f){this._clickZoom=i,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Dh{constructor(i){this._tr=new ba(i),this.reset()}reset(){this._active=!1}dblclick(i,f){return i.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(f)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rh{constructor(){this._tap=new Rl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,f,g){if(!this._swipePoint)if(this._tapTime){const y=f[0],b=i.timeStamp-this._tapTime<500,k=this._tapPoint.dist(y)<30;b&&k?g.length>0&&(this._swipePoint=y,this._swipeTouch=g[0].identifier):this.reset()}else this._tap.touchstart(i,f,g)}touchmove(i,f,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const y=f[0],b=y.y-this._swipePoint.y;return this._swipePoint=y,i.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(i,f,g)}touchend(i,f,g){if(this._tapTime)this._swipePoint&&g.length===0&&this.reset();else{const y=this._tap.touchend(i,f,g);y&&(this._tapTime=i.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Dc{constructor(i,f,g){this._el=i,this._mousePan=f,this._touchPan=g}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class sd{constructor(i,f,g){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=f,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Rc{constructor(i,f,g,y){this._el=i,this._touchZoom=f,this._touchRotate=g,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Bl{constructor(i,f){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=f,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=M.create("div","maplibregl-cooperative-gesture-screen",i);let f=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(f=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const g=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=f,this._container.appendChild(y);const b=document.createElement("div");b.className="maplibregl-mobile-message",b.textContent=g,this._container.appendChild(b),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(M.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(i){return i[this._bypassKey]}notifyGestureBlocked(i,f){this._enabled&&(this._map.fire(new l.k("cooperativegestureprevented",{gestureType:i,originalEvent:f})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Sa=w=>w.zoom||w.drag||w.pitch||w.rotate;class It extends l.k{}function Ka(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta}class zc{constructor(i,f){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,b)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const k=y.type==="renderFrame"?void 0:y,D={needsRenderFrame:!1},z={},$={},W=y.touches,G=W?this._getMapTouches(W):void 0,ne=G?M.touchPos(this._map.getCanvas(),G):M.mousePos(this._map.getCanvas(),y);for(const{handlerName:de,handler:ge,allowed:_e}of this._handlers){if(!ge.isEnabled())continue;let Ee;this._blockedByActive($,_e,de)?ge.reset():ge[b||y.type]&&(Ee=ge[b||y.type](y,ne,G),this.mergeHandlerResult(D,z,Ee,de,k),Ee&&Ee.needsRenderFrame&&this._triggerRenderFrame()),(Ee||ge.isActive())&&($[de]=ge)}const le={};for(const de in this._previousActiveHandlers)$[de]||(le[de]=k);this._previousActiveHandlers=$,(Object.keys(le).length||Ka(D))&&(this._changes.push([D,z,le]),this._triggerRenderFrame()),(Object.keys($).length||Ka(D))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:he}=D;he&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],he(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ol(i),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(f);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,b,k]of this._listeners)M.addEventListener(y,b,y===document?this.handleWindowEvent:this.handleEvent,k)}destroy(){for(const[i,f,g]of this._listeners)M.removeEventListener(i,f,i===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(i){const f=this._map,g=f.getCanvasContainer();this._add("mapEvent",new Ih(f,i));const y=f.boxZoom=new $i(f,i);this._add("boxZoom",y),i.interactive&&i.boxZoom&&y.enable();const b=f.cooperativeGestures=new Bl(f,i.cooperativeGestures);this._add("cooperativeGestures",b),i.cooperativeGestures&&b.enable();const k=new gs(f),D=new Dh(f);f.doubleClickZoom=new No(D,k),this._add("tapZoom",k),this._add("clickZoom",D),i.interactive&&i.doubleClickZoom&&f.doubleClickZoom.enable();const z=new Rh;this._add("tapDragZoom",z);const $=f.touchPitch=new jl(f);this._add("touchPitch",$),i.interactive&&i.touchPitch&&f.touchPitch.enable(i.touchPitch);const W=kc(i),G=Qr(i);f.dragRotate=new sd(i,W,G),this._add("mouseRotate",W,["mousePitch"]),this._add("mousePitch",G,["mouseRotate"]),i.interactive&&i.dragRotate&&f.dragRotate.enable();const ne=(({enable:Ee,clickTolerance:pe})=>{const ke=new ys({checkCorrectEvent:Re=>M.mouseButton(Re)===0&&!Re.ctrlKey});return new zo({clickTolerance:pe,move:(Re,Ue)=>({around:Ue,panDelta:Ue.sub(Re)}),activateOnStart:!0,moveStateManager:ke,enable:Ee,assignEvents:Iu})})(i),le=new jo(i,f);f.dragPan=new Dc(g,ne,le),this._add("mousePan",ne),this._add("touchPan",le,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&f.dragPan.enable(i.dragPan);const he=new zl,de=new ku;f.touchZoomRotate=new Rc(g,de,he,z),this._add("touchRotate",he,["touchPan","touchZoom"]),this._add("touchZoom",de,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&f.touchZoomRotate.enable(i.touchZoomRotate);const ge=f.scrollZoom=new Vi(f,(()=>this._triggerRenderFrame()));this._add("scrollZoom",ge,["mousePan"]),i.interactive&&i.scrollZoom&&f.scrollZoom.enable(i.scrollZoom);const _e=f.keyboard=new wa(f);this._add("keyboard",_e),i.interactive&&i.keyboard&&f.keyboard.enable(),this._add("blockableMapEvent",new _n(f))}_add(i,f,g){this._handlers.push({handlerName:i,handler:f,allowed:g}),this._handlersById[i]=f}stop(i){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Sa(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,f,g){for(const y in i)if(y!==g&&(!f||f.indexOf(y)<0))return!0;return!1}_getMapTouches(i){const f=[];for(const g of i)this._el.contains(g.target)&&f.push(g);return f}mergeHandlerResult(i,f,g,y,b){if(!g)return;l.e(i,g);const k={handlerName:y,originalEvent:g.originalEvent||b};g.zoomDelta!==void 0&&(f.zoom=k),g.panDelta!==void 0&&(f.drag=k),g.pitchDelta!==void 0&&(f.pitch=k),g.bearingDelta!==void 0&&(f.rotate=k)}_applyChanges(){const i={},f={},g={};for(const[y,b,k]of this._changes)y.panDelta&&(i.panDelta=(i.panDelta||new l.P(0,0))._add(y.panDelta)),y.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(i.around=y.around),y.pinchAround!==void 0&&(i.pinchAround=y.pinchAround),y.noInertia&&(i.noInertia=y.noInertia),l.e(f,b),l.e(g,k);this._updateMapTransform(i,f,g),this._changes=[]}_updateMapTransform(i,f,g){const y=this._map,b=y._getTransformForUpdate(),k=y.terrain;if(!(Ka(i)||k&&this._terrainMovement))return this._fireEvents(f,g,!0);let{panDelta:D,zoomDelta:z,bearingDelta:$,pitchDelta:W,around:G,pinchAround:ne}=i;ne!==void 0&&(G=ne),y._stop(!0),G=G||y.transform.centerPoint;const le=b.pointLocation(D?G.sub(D):G);$&&(b.bearing+=$),W&&(b.pitch+=W),z&&(b.zoom+=z),k?this._terrainMovement||!f.drag&&!f.zoom?f.drag&&this._terrainMovement?b.center=b.pointLocation(b.centerPoint.sub(D)):b.setLocationAtPoint(le,G):(this._terrainMovement=!0,this._map._elevationFreeze=!0,b.setLocationAtPoint(le,G)):b.setLocationAtPoint(le,G),y._applyUpdatedTransform(b),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(f,g,!0)}_fireEvents(i,f,g){const y=Sa(this._eventsInProgress),b=Sa(i),k={};for(const G in i){const{originalEvent:ne}=i[G];this._eventsInProgress[G]||(k[`${G}start`]=ne),this._eventsInProgress[G]=i[G]}!y&&b&&this._fireEvent("movestart",b.originalEvent);for(const G in k)this._fireEvent(G,k[G]);b&&this._fireEvent("move",b.originalEvent);for(const G in i){const{originalEvent:ne}=i[G];this._fireEvent(G,ne)}const D={};let z;for(const G in this._eventsInProgress){const{handlerName:ne,originalEvent:le}=this._eventsInProgress[G];this._handlersById[ne].isActive()||(delete this._eventsInProgress[G],z=f[ne]||le,D[`${G}end`]=z)}for(const G in D)this._fireEvent(G,D[G]);const $=Sa(this._eventsInProgress),W=(y||b)&&!$;if(W&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const G=this._map._getTransformForUpdate();G.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(G)}if(g&&W){this._updatingCamera=!0;const G=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ne=le=>le!==0&&-this._bearingSnap<le&&le<this._bearingSnap;!G||!G.essential&&A.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:z})),ne(this._map.getBearing())&&this._map.resetNorth()):(ne(G.bearing||this._map.getBearing())&&(G.bearing=0),G.freezeElevation=!0,this._map.easeTo(G,{originalEvent:z})),this._updatingCamera=!1}}_fireEvent(i,f){this._map.fire(new l.k(i,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((i=>{delete this._frameId,this.handleEvent(new It("renderFrame",{timeStamp:i})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class rl extends l.E{constructor(i,f){super(),this._renderFrameCallback=()=>{const g=Math.min((A.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=f.bearingSnap,this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new l.N(this.transform.center.lng,this.transform.center.lat)}setCenter(i,f){return this.jumpTo({center:i},f)}panBy(i,f,g){return i=l.P.convert(i).mult(-1),this.panTo(this.transform.center,l.e({offset:i},f),g)}panTo(i,f,g){return this.easeTo(l.e({center:i},f),g)}getZoom(){return this.transform.zoom}setZoom(i,f){return this.jumpTo({zoom:i},f),this}zoomTo(i,f,g){return this.easeTo(l.e({zoom:i},f),g)}zoomIn(i,f){return this.zoomTo(this.getZoom()+1,i,f),this}zoomOut(i,f){return this.zoomTo(this.getZoom()-1,i,f),this}getBearing(){return this.transform.bearing}setBearing(i,f){return this.jumpTo({bearing:i},f),this}getPadding(){return this.transform.padding}setPadding(i,f){return this.jumpTo({padding:i},f),this}rotateTo(i,f,g){return this.easeTo(l.e({bearing:i},f),g)}resetNorth(i,f){return this.rotateTo(0,l.e({duration:1e3},i),f),this}resetNorthPitch(i,f){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},i),f),this}snapToNorth(i,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,f):this}getPitch(){return this.transform.pitch}setPitch(i,f){return this.jumpTo({pitch:i},f),this}cameraForBounds(i,f){i=qe.convert(i).adjustAntiMeridian();const g=f&&f.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),g,f)}_cameraForBoxAndBearing(i,f,g,y){const b={top:0,bottom:0,right:0,left:0};if(typeof(y=l.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const xt=y.padding;y.padding={top:xt,bottom:xt,right:xt,left:xt}}y.padding=l.e(b,y.padding);const k=this.transform,D=k.padding,z=new qe(i,f),$=k.project(z.getNorthWest()),W=k.project(z.getNorthEast()),G=k.project(z.getSouthEast()),ne=k.project(z.getSouthWest()),le=l.ba(-g),he=$.rotate(le),de=W.rotate(le),ge=G.rotate(le),_e=ne.rotate(le),Ee=new l.P(Math.max(he.x,de.x,_e.x,ge.x),Math.max(he.y,de.y,_e.y,ge.y)),pe=new l.P(Math.min(he.x,de.x,_e.x,ge.x),Math.min(he.y,de.y,_e.y,ge.y)),ke=Ee.sub(pe),Re=(k.width-(D.left+D.right+y.padding.left+y.padding.right))/ke.x,Ue=(k.height-(D.top+D.bottom+y.padding.top+y.padding.bottom))/ke.y;if(Ue<0||Re<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const at=Math.min(k.scaleZoom(k.scale*Math.min(Re,Ue)),y.maxZoom),dt=l.P.convert(y.offset),_t=new l.P((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(l.ba(g)),At=dt.add(_t).mult(k.scale/k.zoomScale(at));return{center:k.unproject($.add(G).div(2).sub(At)),zoom:at,bearing:g}}fitBounds(i,f,g){return this._fitInternal(this.cameraForBounds(i,f),f,g)}fitScreenCoordinates(i,f,g,y,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(i)),this.transform.pointLocation(l.P.convert(f)),g,y),y,b)}_fitInternal(i,f,g){return i?(delete(f=l.e(i,f)).padding,f.linear?this.easeTo(f,g):this.flyTo(f,g)):this}jumpTo(i,f){this.stop();const g=this._getTransformForUpdate();let y=!1,b=!1,k=!1;return"zoom"in i&&g.zoom!==+i.zoom&&(y=!0,g.zoom=+i.zoom),i.center!==void 0&&(g.center=l.N.convert(i.center)),"bearing"in i&&g.bearing!==+i.bearing&&(b=!0,g.bearing=+i.bearing),"pitch"in i&&g.pitch!==+i.pitch&&(k=!0,g.pitch=+i.pitch),i.padding==null||g.isPaddingEqual(i.padding)||(g.padding=i.padding),this._applyUpdatedTransform(g),this.fire(new l.k("movestart",f)).fire(new l.k("move",f)),y&&this.fire(new l.k("zoomstart",f)).fire(new l.k("zoom",f)).fire(new l.k("zoomend",f)),b&&this.fire(new l.k("rotatestart",f)).fire(new l.k("rotate",f)).fire(new l.k("rotateend",f)),k&&this.fire(new l.k("pitchstart",f)).fire(new l.k("pitch",f)).fire(new l.k("pitchend",f)),this.fire(new l.k("moveend",f))}calculateCameraOptionsFromTo(i,f,g,y=0){const b=l.Z.fromLngLat(i,f),k=l.Z.fromLngLat(g,y),D=k.x-b.x,z=k.y-b.y,$=k.z-b.z,W=Math.hypot(D,z,$);if(W===0)throw new Error("Can't calculate camera options with same From and To");const G=Math.hypot(D,z),ne=this.transform.scaleZoom(this.transform.cameraToCenterDistance/W/this.transform.tileSize),le=180*Math.atan2(D,-z)/Math.PI;let he=180*Math.acos(G/W)/Math.PI;return he=$<0?90-he:90+he,{center:k.toLngLat(),zoom:ne,pitch:he,bearing:le}}easeTo(i,f){var g;this._stop(!1,i.easeId),((i=l.e({offset:[0,0],duration:500,easing:l.b9},i)).animate===!1||!i.essential&&A.prefersReducedMotion)&&(i.duration=0);const y=this._getTransformForUpdate(),b=y.zoom,k=y.bearing,D=y.pitch,z=y.padding,$="bearing"in i?this._normalizeBearing(i.bearing,k):k,W="pitch"in i?+i.pitch:D,G="padding"in i?i.padding:y.padding,ne=l.P.convert(i.offset);let le=y.centerPoint.add(ne);const he=y.pointLocation(le),{center:de,zoom:ge}=y.getConstrained(l.N.convert(i.center||he),(g=i.zoom)!==null&&g!==void 0?g:b);this._normalizeCenter(de,y);const _e=y.project(he),Ee=y.project(de).sub(_e),pe=y.zoomScale(ge-b);let ke,Re;i.around&&(ke=l.N.convert(i.around),Re=y.locationPoint(ke));const Ue={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ge!==b,this._rotating=this._rotating||k!==$,this._pitching=this._pitching||W!==D,this._padding=!y.isPaddingEqual(G),this._easeId=i.easeId,this._prepareEase(f,i.noMoveStart,Ue),this.terrain&&this._prepareElevation(de),this._ease((at=>{if(this._zooming&&(y.zoom=l.y.number(b,ge,at)),this._rotating&&(y.bearing=l.y.number(k,$,at)),this._pitching&&(y.pitch=l.y.number(D,W,at)),this._padding&&(y.interpolatePadding(z,G,at),le=y.centerPoint.add(ne)),this.terrain&&!i.freezeElevation&&this._updateElevation(at),ke)y.setLocationAtPoint(ke,Re);else{const dt=y.zoomScale(y.zoom-b),_t=ge>b?Math.min(2,pe):Math.max(.5,pe),At=Math.pow(_t,1-at),xt=y.unproject(_e.add(Ee.mult(at*At)).mult(dt));y.setLocationAtPoint(y.renderWorldCopies?xt.wrap():xt,le)}this._applyUpdatedTransform(y),this._fireMoveEvents(f)}),(at=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(f,at)}),i),this}_prepareEase(i,f,g={}){this._moving=!0,f||g.moving||this.fire(new l.k("movestart",i)),this._zooming&&!g.zooming&&this.fire(new l.k("zoomstart",i)),this._rotating&&!g.rotating&&this.fire(new l.k("rotatestart",i)),this._pitching&&!g.pitching&&this.fire(new l.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const f=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&f!==this._elevationTarget){const g=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(g-(f-(g*i+this._elevationStart))/(1-i)),this._elevationTarget=f}this.transform.elevation=l.y.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(i){const f=i.getCameraPosition(),g=this.terrain.getElevationForLngLatZoom(f.lngLat,i.zoom);if(f.altitude<g){const y=this.calculateCameraOptionsFromTo(f.lngLat,g,i.center,i.elevation);return{pitch:y.pitch,zoom:y.zoom}}return{}}_applyUpdatedTransform(i){const f=[];if(this.terrain&&f.push((y=>this._elevateCameraIfInsideTerrain(y))),this.transformCameraUpdate&&f.push((y=>this.transformCameraUpdate(y))),!f.length)return;const g=i.clone();for(const y of f){const b=g.clone(),{center:k,zoom:D,pitch:z,bearing:$,elevation:W}=y(b);k&&(b.center=k),D!==void 0&&(b.zoom=D),z!==void 0&&(b.pitch=z),$!==void 0&&(b.bearing=$),W!==void 0&&(b.elevation=W),g.apply(b)}this.transform.apply(g)}_fireMoveEvents(i){this.fire(new l.k("move",i)),this._zooming&&this.fire(new l.k("zoom",i)),this._rotating&&this.fire(new l.k("rotate",i)),this._pitching&&this.fire(new l.k("pitch",i))}_afterEase(i,f){if(this._easeId&&f&&this._easeId===f)return;delete this._easeId;const g=this._zooming,y=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new l.k("zoomend",i)),y&&this.fire(new l.k("rotateend",i)),b&&this.fire(new l.k("pitchend",i)),this.fire(new l.k("moveend",i))}flyTo(i,f){var g;if(!i.essential&&A.prefersReducedMotion){const Pt=l.M(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Pt,f)}this.stop(),i=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.b9},i);const y=this._getTransformForUpdate(),b=y.zoom,k=y.bearing,D=y.pitch,z=y.padding,$="bearing"in i?this._normalizeBearing(i.bearing,k):k,W="pitch"in i?+i.pitch:D,G="padding"in i?i.padding:y.padding,ne=l.P.convert(i.offset);let le=y.centerPoint.add(ne);const he=y.pointLocation(le),{center:de,zoom:ge}=y.getConstrained(l.N.convert(i.center||he),(g=i.zoom)!==null&&g!==void 0?g:b);this._normalizeCenter(de,y);const _e=y.zoomScale(ge-b),Ee=y.project(he),pe=y.project(de).sub(Ee);let ke=i.curve;const Re=Math.max(y.width,y.height),Ue=Re/_e,at=pe.mag();if("minZoom"in i){const Pt=l.ac(Math.min(i.minZoom,b,ge),y.minZoom,y.maxZoom),er=Re/y.zoomScale(Pt-b);ke=Math.sqrt(er/at*2)}const dt=ke*ke;function _t(Pt){const er=(Ue*Ue-Re*Re+(Pt?-1:1)*dt*dt*at*at)/(2*(Pt?Ue:Re)*dt*at);return Math.log(Math.sqrt(er*er+1)-er)}function At(Pt){return(Math.exp(Pt)-Math.exp(-Pt))/2}function xt(Pt){return(Math.exp(Pt)+Math.exp(-Pt))/2}const gt=_t(!1);let Rt=function(Pt){return xt(gt)/xt(gt+ke*Pt)},tr=function(Pt){return Re*((xt(gt)*(At(er=gt+ke*Pt)/xt(er))-At(gt))/dt)/at;var er},wt=(_t(!0)-gt)/ke;if(Math.abs(at)<1e-6||!isFinite(wt)){if(Math.abs(Re-Ue)<1e-6)return this.easeTo(i,f);const Pt=Ue<Re?-1:1;wt=Math.abs(Math.log(Ue/Re))/ke,tr=()=>0,Rt=er=>Math.exp(Pt*ke*er)}return i.duration="duration"in i?+i.duration:1e3*wt/("screenSpeed"in i?+i.screenSpeed/ke:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=k!==$,this._pitching=W!==D,this._padding=!y.isPaddingEqual(G),this._prepareEase(f,!1),this.terrain&&this._prepareElevation(de),this._ease((Pt=>{const er=Pt*wt,qr=1/Rt(er);y.zoom=Pt===1?ge:b+y.scaleZoom(qr),this._rotating&&(y.bearing=l.y.number(k,$,Pt)),this._pitching&&(y.pitch=l.y.number(D,W,Pt)),this._padding&&(y.interpolatePadding(z,G,Pt),le=y.centerPoint.add(ne)),this.terrain&&!i.freezeElevation&&this._updateElevation(Pt);const ur=Pt===1?de:y.unproject(Ee.add(pe.mult(tr(er))).mult(qr));y.setLocationAtPoint(y.renderWorldCopies?ur.wrap():ur,le),this._applyUpdatedTransform(y),this._fireMoveEvents(f)}),(()=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(f)}),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,f){var g;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,f)}return i||(g=this.handlers)===null||g===void 0||g.stop(!1),this}_ease(i,f,g){g.animate===!1||g.duration===0?(i(1),f()):(this._easeStart=A.now(),this._easeOptions=g,this._onEaseFrame=i,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,f){i=l.b3(i,-180,180);const g=Math.abs(i-f);return Math.abs(i-360-f)<g&&(i-=360),Math.abs(i+360-f)<g&&(i+=360),i}_normalizeCenter(i,f){if(!f.renderWorldCopies||f.lngRange)return;const g=i.lng-f.center.lng;i.lng+=g>180?-360:g<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(l.N.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}const Ti={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class yo{constructor(i=Ti){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=f=>{!f||f.sourceDataType!=="metadata"&&f.sourceDataType!=="visibility"&&f.dataType!=="style"&&f.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=M.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=M.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=M.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){M.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,f){const g=this._map._getUIString(`AttributionControl.${f}`);i.title=g,i.setAttribute("aria-label",g)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map((y=>typeof y!="string"?"":y))):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const f=this._map.style.sourceCaches;for(const y in f){const b=f[y];if(b.used||b.usedForTerrain){const k=b.getSource();k.attribution&&i.indexOf(k.attribution)<0&&i.push(k.attribution)}}i=i.filter((y=>String(y).trim())),i.sort(((y,b)=>y.length-b.length)),i=i.filter(((y,b)=>{for(let k=b+1;k<i.length;k++)if(i[k].indexOf(y)>=0)return!1;return!0}));const g=i.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,i.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Xa{constructor(i={}){this._updateCompact=()=>{const f=this._container.children;if(f.length){const g=f[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&g.classList.add("maplibregl-compact"):g.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=M.create("div","maplibregl-ctrl");const f=M.create("a","maplibregl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://maplibre.org/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){M.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class wr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const f=++this._id;return this._queue.push({callback:i,id:f,cancelled:!1}),f}remove(i){const f=this._currentlyRunning,g=f?this._queue.concat(f):this._queue;for(const y of g)if(y.id===i)return void(y.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const f=this._currentlyRunning=this._queue;this._queue=[];for(const g of f)if(!g.cancelled&&(g.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var zh=l.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Jp extends l.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,f){this.sourceCache.update(i,f),this._renderableTilesKeys=[];const g={};for(const y of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:f}))g[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.posMatrix=new Float64Array(16),l.aP(y.posMatrix,0,l.X,0,l.X,0,1),this._tiles[y.key]=new os(y,this.tileSize));for(const y in this._tiles)g[y]||delete this._tiles[y]}freeRtt(i){for(const f in this._tiles){const g=this._tiles[f];(!i||g.tileID.equals(i)||g.tileID.isChildOf(i)||i.isChildOf(g.tileID))&&(g.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((i=>this.getTileByID(i)))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const f={};for(const g of this._renderableTilesKeys){const y=this._tiles[g].tileID;if(y.canonical.equals(i.canonical)){const b=i.clone();b.posMatrix=new Float64Array(16),l.aP(b.posMatrix,0,l.X,0,l.X,0,1),f[g]=b}else if(y.canonical.isChildOf(i.canonical)){const b=i.clone();b.posMatrix=new Float64Array(16);const k=y.canonical.z-i.canonical.z,D=y.canonical.x-(y.canonical.x>>k<<k),z=y.canonical.y-(y.canonical.y>>k<<k),$=l.X>>k;l.aP(b.posMatrix,0,$,0,$,0,1),l.J(b.posMatrix,b.posMatrix,[-D*$,-z*$,0]),f[g]=b}else if(i.canonical.isChildOf(y.canonical)){const b=i.clone();b.posMatrix=new Float64Array(16);const k=i.canonical.z-y.canonical.z,D=i.canonical.x-(i.canonical.x>>k<<k),z=i.canonical.y-(i.canonical.y>>k<<k),$=l.X>>k;l.aP(b.posMatrix,0,l.X,0,l.X,0,1),l.J(b.posMatrix,b.posMatrix,[D*$,z*$,0]),l.K(b.posMatrix,b.posMatrix,[1/2**k,1/2**k,0]),f[g]=b}}return f}getSourceTile(i,f){const g=this.sourceCache._source;let y=i.overscaledZ-this.deltaZoom;if(y>g.maxzoom&&(y=g.maxzoom),y<g.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(y).key);let b=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!b||!b.dem)&&f)for(;y>=g.minzoom&&(!b||!b.dem);)b=this.sourceCache.getTileByID(i.scaledTo(y--).key);return b}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter((f=>f.timeAdded>=i))}}class Fo{constructor(i,f,g){this.painter=i,this.sourceCache=new Jp(f),this.options=g,this.exaggeration=typeof g.exaggeration=="number"?g.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,f,g,y=l.X){var b;if(!(f>=0&&f<y&&g>=0&&g<y))return 0;const k=this.getTerrainData(i),D=(b=k.tile)===null||b===void 0?void 0:b.dem;if(!D)return 0;const z=(function(he,de,ge){var _e=de[0],Ee=de[1];return he[0]=ge[0]*_e+ge[4]*Ee+ge[12],he[1]=ge[1]*_e+ge[5]*Ee+ge[13],he})([],[f/y*l.X,g/y*l.X],k.u_terrain_matrix),$=[z[0]*D.dim,z[1]*D.dim],W=Math.floor($[0]),G=Math.floor($[1]),ne=$[0]-W,le=$[1]-G;return D.get(W,G)*(1-ne)*(1-le)+D.get(W+1,G)*ne*(1-le)+D.get(W,G+1)*(1-ne)*le+D.get(W+1,G+1)*ne*le}getElevationForLngLatZoom(i,f){if(!l.bb(f,i.wrap()))return 0;const{tileID:g,mercatorX:y,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(i,f);return this.getElevation(g,y%l.X,b%l.X,l.X)}getElevation(i,f,g,y=l.X){return this.getDEMElevation(i,f,g,y)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const y=this.painter.context,b=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new xe(y,b,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new xe(y,new l.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.an([])}const f=this.sourceCache.getSourceTile(i,!0);if(f&&f.dem&&(!f.demTexture||f.needsTerrainPrepare)){const y=this.painter.context;f.demTexture=this.painter.getTileTexture(f.dem.stride),f.demTexture?f.demTexture.update(f.dem.getPixels(),{premultiply:!1}):f.demTexture=new xe(y,f.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),f.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),f.needsTerrainPrepare=!1}const g=f&&f+f.tileID.key+i.key;if(g&&!this._demMatrixCache[g]){const y=this.sourceCache.sourceCache._source.maxzoom;let b=i.canonical.z-f.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=y?b=i.canonical.z-y:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const k=i.canonical.x-(i.canonical.x>>b<<b),D=i.canonical.y-(i.canonical.y>>b<<b),z=l.bc(new Float64Array(16),[1/(l.X<<b),1/(l.X<<b),0]);l.J(z,z,[k*l.X,D*l.X,0]),this._demMatrixCache[i.key]={matrix:z,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:f&&f.dem&&f.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:f&&f.dem&&f.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(f&&f.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:f}}getFramebuffer(i){const f=this.painter,g=f.width/devicePixelRatio,y=f.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new xe(f.context,{width:g,height:y,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new xe(f.context,{width:g,height:y,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=f.context.createFramebuffer(g,y,!0,!1),this._fbo.depthAttachment.set(f.context.createRenderbuffer(f.context.gl.DEPTH_COMPONENT16,g,y))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const f=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,k=0;b<this._coordsTextureSize;b++)for(let D=0;D<this._coordsTextureSize;D++,k+=4)f[k+0]=255&D,f[k+1]=255&b,f[k+2]=D>>8<<4|b>>8,f[k+3]=0;const g=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(f.buffer)),y=new xe(i,g,i.gl.RGBA,{premultiply:!1});return y.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);const f=new Uint8Array(4),g=this.painter.context,y=g.gl,b=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),k=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),D=Math.round(this.painter.height/devicePixelRatio);g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(b,D-k-1,1,1,y.RGBA,y.UNSIGNED_BYTE,f),g.bindFramebuffer.set(null);const z=f[0]+(f[2]>>4<<8),$=f[1]+((15&f[2])<<8),W=this.coordsIndex[255-f[3]],G=W&&this.sourceCache.getTileByID(W);if(!G)return null;const ne=this._coordsTextureSize,le=(1<<G.tileID.canonical.z)*ne;return new l.Z((G.tileID.canonical.x*ne+z)/le+G.tileID.wrap,(G.tileID.canonical.y*ne+$)/le,this.getElevation(G.tileID,z,$,ne))}depthAtPoint(i){const f=new Uint8Array(4),g=this.painter.context,y=g.gl;return g.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,f),g.bindFramebuffer.set(null),(f[0]/16777216+f[1]/65536+f[2]/256+f[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,f=new l.bd,g=new l.aY,y=this.meshSize,b=l.X/y,k=y*y;for(let G=0;G<=y;G++)for(let ne=0;ne<=y;ne++)f.emplaceBack(ne*b,G*b,0);for(let G=0;G<k;G+=y+1)for(let ne=0;ne<y;ne++)g.emplaceBack(ne+G,y+ne+G+1,y+ne+G+2),g.emplaceBack(ne+G,y+ne+G+2,ne+G+1);const D=f.length,z=D+2*(y+1);for(const G of[0,1])for(let ne=0;ne<=y;ne++)for(const le of[0,1])f.emplaceBack(ne*b,G*l.X,le);for(let G=0;G<2*y;G+=2)g.emplaceBack(z+G,z+G+1,z+G+3),g.emplaceBack(z+G,z+G+3,z+G+2),g.emplaceBack(D+G,D+G+3,D+G+1),g.emplaceBack(D+G,D+G+2,D+G+3);const $=f.length,W=$+2*(y+1);for(const G of[0,1])for(let ne=0;ne<=y;ne++)for(const le of[0,1])f.emplaceBack(G*l.X,ne*b,le);for(let G=0;G<2*y;G+=2)g.emplaceBack($+G,$+G+1,$+G+3),g.emplaceBack($+G,$+G+3,$+G+2),g.emplaceBack(W+G,W+G+3,W+G+1),g.emplaceBack(W+G,W+G+2,W+G+3);return this._mesh=new Fi(i.createVertexBuffer(f,zh.members),i.createIndexBuffer(g),l.a0.simpleSegment(0,0,f.length,g.length)),this._mesh}getMeshFrameDelta(i){return 2*Math.PI*l.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,f){var g;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(i,f);return(g=this.getMinMaxElevation(y).minElevation)!==null&&g!==void 0?g:0}getMinMaxElevation(i){const f=this.getTerrainData(i).tile,g={minElevation:null,maxElevation:null};return f&&f.dem&&(g.minElevation=f.dem.min*this.exaggeration,g.maxElevation=f.dem.max*this.exaggeration),g}_getOverscaledTileIDFromLngLatZoom(i,f){const g=l.Z.fromLngLat(i.wrap()),y=(1<<f)*l.X,b=g.x*y,k=g.y*y,D=Math.floor(b/l.X),z=Math.floor(k/l.X);return{tileID:new l.S(f,0,f,D,z),mercatorX:b,mercatorY:k}}}class Ou{constructor(i,f,g){this._context=i,this._size=f,this._tileSize=g,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const f=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),g=new xe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return g.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),f.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),f.colorAttachment.set(g.texture),{id:i,fbo:f,texture:g,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((f=>i.id!==f)),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const f of this._recentlyUsed)if(!this._objects[f].inUse)return this._objects[f];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((i=>!i.inUse))===!1}}const Ya={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Du{constructor(i,f){this.painter=i,this.terrain=f,this.pool=new Ou(i.context,30,f.sourceCache.tileSize*f.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,f){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter((g=>!i._layers[g].isHidden(f))),this._coordsDescendingInv={};for(const g in i.sourceCaches){this._coordsDescendingInv[g]={};const y=i.sourceCaches[g].getVisibleCoordinates();for(const b of y){const k=this.terrain.sourceCache.getTerrainCoords(b);for(const D in k)this._coordsDescendingInv[g][D]||(this._coordsDescendingInv[g][D]=[]),this._coordsDescendingInv[g][D].push(k[D])}}this._coordsDescendingInvStr={};for(const g of i._order){const y=i._layers[g],b=y.source;if(Ya[y.type]&&!this._coordsDescendingInvStr[b]){this._coordsDescendingInvStr[b]={};for(const k in this._coordsDescendingInv[b])this._coordsDescendingInvStr[b][k]=this._coordsDescendingInv[b][k].map((D=>D.key)).sort().join()}}for(const g of this._renderableTiles)for(const y in this._coordsDescendingInvStr){const b=this._coordsDescendingInvStr[y][g.tileID.key];b&&b!==g.rttCoords[y]&&(g.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const f=i.type,g=this.painter,y=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(Ya[f]&&(this._prevType&&Ya[this._prevType]||this._stacks.push([]),this._prevType=f,this._stacks[this._stacks.length-1].push(i.id),!y))return!0;if(Ya[this._prevType]||Ya[f]&&y){this._prevType=f;const b=this._stacks.length-1,k=this._stacks[b]||[];for(const D of this._renderableTiles){if(this.pool.isFull()&&(ad(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(D),D.rtt[b]){const $=this.pool.getObjectForId(D.rtt[b].id);if($.stamp===D.rtt[b].stamp){this.pool.useObject($);continue}}const z=this.pool.getOrCreateFreeObject();this.pool.useObject(z),this.pool.stampObject(z),D.rtt[b]={id:z.id,stamp:z.stamp},g.context.bindFramebuffer.set(z.fbo.framebuffer),g.context.clear({color:l.aM.transparent,stencil:0}),g.currentStencilSource=void 0;for(let $=0;$<k.length;$++){const W=g.style._layers[k[$]],G=W.source?this._coordsDescendingInv[W.source][D.tileID.key]:[D.tileID];g.context.viewport.set([0,0,z.fbo.width,z.fbo.height]),g._renderTileClippingMasks(W,G),g.renderLayer(g,g.style.sourceCaches[W.source],W,G),W.source&&(D.rttCoords[W.source]=this._coordsDescendingInvStr[W.source][D.tileID.key])}}return ad(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ya[f]}return!1}}const Ru={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},nl=_,vs={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Ti,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},en=w=>{w.touchstart=w.dragStart,w.touchmoveWindow=w.dragMove,w.touchend=w.dragEnd},an={showCompass:!0,showZoom:!0,visualizePitch:!1};class _s{constructor(i,f,g=!1){this.mousedown=k=>{this.startMouse(l.e({},k,{ctrlKey:!0,preventDefault:()=>k.preventDefault()}),M.mousePos(this.element,k)),M.addEventListener(window,"mousemove",this.mousemove),M.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=k=>{this.moveMouse(k,M.mousePos(this.element,k))},this.mouseup=k=>{this.mouseRotate.dragEnd(k),this.mousePitch&&this.mousePitch.dragEnd(k),this.offTemp()},this.touchstart=k=>{k.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=M.touchPos(this.element,k.targetTouches)[0],this.startTouch(k,this._startPos),M.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.addEventListener(window,"touchend",this.touchend))},this.touchmove=k=>{k.targetTouches.length!==1?this.reset():(this._lastPos=M.touchPos(this.element,k.targetTouches)[0],this.moveTouch(k,this._lastPos))},this.touchend=k=>{k.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const y=i.dragRotate._mouseRotate.getClickTolerance(),b=i.dragRotate._mousePitch.getClickTolerance();this.element=f,this.mouseRotate=kc({clickTolerance:y,enable:!0}),this.touchRotate=(({enable:k,clickTolerance:D,bearingDegreesPerPixelMoved:z=.8})=>{const $=new Oh;return new zo({clickTolerance:D,move:(W,G)=>({bearingDelta:(G.x-W.x)*z}),moveStateManager:$,enable:k,assignEvents:en})})({clickTolerance:y,enable:!0}),this.map=i,g&&(this.mousePitch=Qr({clickTolerance:b,enable:!0}),this.touchPitch=(({enable:k,clickTolerance:D,pitchDegreesPerPixelMoved:z=-.5})=>{const $=new Oh;return new zo({clickTolerance:D,move:(W,G)=>({pitchDelta:(G.y-W.y)*z}),moveStateManager:$,enable:k,assignEvents:en})})({clickTolerance:b,enable:!0})),M.addEventListener(f,"mousedown",this.mousedown),M.addEventListener(f,"touchstart",this.touchstart,{passive:!1}),M.addEventListener(f,"touchcancel",this.reset)}startMouse(i,f){this.mouseRotate.dragStart(i,f),this.mousePitch&&this.mousePitch.dragStart(i,f),M.disableDrag()}startTouch(i,f){this.touchRotate.dragStart(i,f),this.touchPitch&&this.touchPitch.dragStart(i,f),M.disableDrag()}moveMouse(i,f){const g=this.map,{bearingDelta:y}=this.mouseRotate.dragMove(i,f)||{};if(y&&g.setBearing(g.getBearing()+y),this.mousePitch){const{pitchDelta:b}=this.mousePitch.dragMove(i,f)||{};b&&g.setPitch(g.getPitch()+b)}}moveTouch(i,f){const g=this.map,{bearingDelta:y}=this.touchRotate.dragMove(i,f)||{};if(y&&g.setBearing(g.getBearing()+y),this.touchPitch){const{pitchDelta:b}=this.touchPitch.dragMove(i,f)||{};b&&g.setPitch(g.getPitch()+b)}}off(){const i=this.element;M.removeEventListener(i,"mousedown",this.mousedown),M.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),M.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.removeEventListener(window,"touchend",this.touchend),M.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){M.enableDrag(),M.removeEventListener(window,"mousemove",this.mousemove),M.removeEventListener(window,"mouseup",this.mouseup),M.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.removeEventListener(window,"touchend",this.touchend)}}let Gr;function Sr(w,i,f){const g=new l.N(w.lng,w.lat);if(w=new l.N(w.lng,w.lat),i){const y=new l.N(w.lng-360,w.lat),b=new l.N(w.lng+360,w.lat),k=f.locationPoint(w).distSqr(i);f.locationPoint(y).distSqr(i)<k?w=y:f.locationPoint(b).distSqr(i)<k&&(w=b)}for(;Math.abs(w.lng-f.center.lng)>180;){const y=f.locationPoint(w);if(y.x>=0&&y.y>=0&&y.x<=f.width&&y.y<=f.height)break;w.lng>f.center.lng?w.lng-=360:w.lng+=360}return w.lng!==g.lng&&f.locationPoint(w).y>f.height/2-f.getHorizon()?w:g}const Pa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function $o(w,i,f){const g=w.classList;for(const y in Pa)g.remove(`maplibregl-${f}-anchor-${y}`);g.add(`maplibregl-${f}-anchor-${i}`)}class ni extends l.E{constructor(i){if(super(),this._onKeyPress=f=>{const g=f.code,y=f.charCode||f.keyCode;g!=="Space"&&g!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=f=>{const g=f.originalEvent.target,y=this._element;this._popup&&(g===y||y.contains(g))&&this.togglePopup()},this._update=f=>{var g;if(!this._map)return;const y=this._map.loaded()&&!this._map.isMoving();((f==null?void 0:f.type)==="terrain"||(f==null?void 0:f.type)==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Sr(this._lngLat,this._flatPos,this._map.transform):(g=this._lngLat)===null||g===void 0?void 0:g.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let b="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?b=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(b=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let k="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?k="rotateX(0deg)":this._pitchAlignment==="map"&&(k=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||f&&f.type!=="moveend"||(this._pos=this._pos.round()),M.setTransform(this._element,`${Pa[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${k} ${b}`),A.frameAsync(new AbortController).then((()=>{this._updateOpacity(f&&f.type==="moveend")})).catch((()=>{}))},this._onMove=f=>{if(!this._isDragging){const g=this._clickTolerance||this._map._clickTolerance;this._isDragging=f.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=f.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=f=>{this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(this._pos).add(this._offset),this._pointerdownPos=f.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._subpixelPositioning=i&&i.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(i==null?void 0:i.opacity,i==null?void 0:i.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=l.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=M.create("div");const f=M.createNS("http://www.w3.org/2000/svg","svg"),g=41,y=27;f.setAttributeNS(null,"display","block"),f.setAttributeNS(null,"height",`${g}px`),f.setAttributeNS(null,"width",`${y}px`),f.setAttributeNS(null,"viewBox",`0 0 ${y} ${g}`);const b=M.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const k=M.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");const D=M.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"transform","translate(3.0, 29.0)"),D.setAttributeNS(null,"fill","#000000");const z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const _e of z){const Ee=M.createNS("http://www.w3.org/2000/svg","ellipse");Ee.setAttributeNS(null,"opacity","0.04"),Ee.setAttributeNS(null,"cx","10.5"),Ee.setAttributeNS(null,"cy","5.80029008"),Ee.setAttributeNS(null,"rx",_e.rx),Ee.setAttributeNS(null,"ry",_e.ry),D.appendChild(Ee)}const $=M.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"fill",this._color);const W=M.createNS("http://www.w3.org/2000/svg","path");W.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),$.appendChild(W);const G=M.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"opacity","0.25"),G.setAttributeNS(null,"fill","#000000");const ne=M.createNS("http://www.w3.org/2000/svg","path");ne.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),G.appendChild(ne);const le=M.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"transform","translate(6.0, 7.0)"),le.setAttributeNS(null,"fill","#FFFFFF");const he=M.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"transform","translate(8.0, 8.0)");const de=M.createNS("http://www.w3.org/2000/svg","circle");de.setAttributeNS(null,"fill","#000000"),de.setAttributeNS(null,"opacity","0.25"),de.setAttributeNS(null,"cx","5.5"),de.setAttributeNS(null,"cy","5.5"),de.setAttributeNS(null,"r","5.4999962");const ge=M.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#FFFFFF"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962"),he.appendChild(de),he.appendChild(ge),k.appendChild(D),k.appendChild($),k.appendChild(G),k.appendChild(le),k.appendChild(he),f.appendChild(k),f.setAttributeNS(null,"height",g*this._scale+"px"),f.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(f),this._offset=l.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(f=>{f.preventDefault()})),this._element.addEventListener("mousedown",(f=>{f.preventDefault()})),$o(this._element,this._anchor,"marker"),i&&i.className)for(const f of i.className.split(" "))this._element.classList.add(f);this._popup=null}addTo(i){return this.remove(),this._map=i,this._element.setAttribute("aria-label",i._getUIString("Marker.Title")),i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),M.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=l.N.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const y=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(i){return this._subpixelPositioning=i,this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var f,g;if(!(!((f=this._map)===null||f===void 0)&&f.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const y=this._map,b=y.terrain.depthAtPoint(this._pos),k=y.terrain.getElevationForLngLatZoom(this._lngLat,y.transform.tileZoom);if(y.transform.lngLatToCameraDepth(this._lngLat,k)-b<.006)return void(this._element.style.opacity=this._opacity);const D=-this._offset.y/y.transform._pixelPerMeter,z=Math.sin(y.getPitch()*Math.PI/180)*D,$=y.terrain.depthAtPoint(new l.P(this._pos.x,this._pos.y-this._offset.y)),W=y.transform.lngLatToCameraDepth(this._lngLat,k+z)-$>.006;!((g=this._popup)===null||g===void 0)&&g.isOpen()&&W&&this._popup.remove(),this._element.style.opacity=W?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=l.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,f){return i===void 0&&f===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),f!==void 0&&(this._opacityWhenCovered=f),this._map&&this._updateOpacity(!0),this}}const zu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Nl=0,Fl=!1;const aa={maxWidth:100,unit:"metric"};function $l(w,i,f){const g=f&&f.maxWidth||100,y=w._container.clientHeight/2,b=w.unproject([0,y]),k=w.unproject([g,y]),D=b.distanceTo(k);if(f&&f.unit==="imperial"){const z=3.2808*D;z>5280?kt(i,g,z/5280,w._getUIString("ScaleControl.Miles")):kt(i,g,z,w._getUIString("ScaleControl.Feet"))}else f&&f.unit==="nautical"?kt(i,g,D/1852,w._getUIString("ScaleControl.NauticalMiles")):D>=1e3?kt(i,g,D/1e3,w._getUIString("ScaleControl.Kilometers")):kt(i,g,D,w._getUIString("ScaleControl.Meters"))}function kt(w,i,f,g){const y=(function(b){const k=Math.pow(10,`${Math.floor(b)}`.length-1);let D=b/k;return D=D>=10?10:D>=5?5:D>=3?3:D>=2?2:D>=1?1:(function(z){const $=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*$)/$})(D),k*D})(f);w.style.width=i*(y/f)+"px",w.innerHTML=`${y}&nbsp;${g}`}const Zt={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Vl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ju(w){if(w){if(typeof w=="number"){const i=Math.round(Math.abs(w)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,w),"top-left":new l.P(i,i),"top-right":new l.P(-i,i),bottom:new l.P(0,-w),"bottom-left":new l.P(i,-i),"bottom-right":new l.P(-i,-i),left:new l.P(w,0),right:new l.P(-w,0)}}if(w instanceof l.P||Array.isArray(w)){const i=l.P.convert(w);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:l.P.convert(w.center||[0,0]),top:l.P.convert(w.top||[0,0]),"top-left":l.P.convert(w["top-left"]||[0,0]),"top-right":l.P.convert(w["top-right"]||[0,0]),bottom:l.P.convert(w.bottom||[0,0]),"bottom-left":l.P.convert(w["bottom-left"]||[0,0]),"bottom-right":l.P.convert(w["bottom-right"]||[0,0]),left:l.P.convert(w.left||[0,0]),right:l.P.convert(w.right||[0,0])}}return ju(new l.P(0,0))}const jh=_;h.AJAXError=l.bh,h.Evented=l.E,h.LngLat=l.N,h.MercatorCoordinate=l.Z,h.Point=l.P,h.addProtocol=l.bi,h.config=l.a,h.removeProtocol=l.bj,h.AttributionControl=yo,h.BoxZoomHandler=$i,h.CanvasSource=ci,h.CooperativeGesturesHandler=Bl,h.DoubleClickZoomHandler=No,h.DragPanHandler=Dc,h.DragRotateHandler=sd,h.EdgeInsets=Js,h.FullscreenControl=class extends l.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var i;let f=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=f==null?void 0:f.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)f=f.shadowRoot.fullscreenElement;f===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){M.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=M.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);M.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},h.GeoJSONSource=Gn,h.GeolocateControl=class extends l.E{constructor(w){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const f=new l.N(i.coords.longitude,i.coords.latitude),g=i.coords.accuracy,y=this._map.getBearing(),b=l.e({bearing:y},this.options.fitBoundsOptions),k=qe.fromLngLat(f,g);this._map.fitBounds(k,b,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const f=new l.N(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(f).addTo(this._map),this._userLocationDotMarker.setLngLat(f).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&Fl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(i=>i.preventDefault())),this._geolocateButton=M.create("button","maplibregl-ctrl-geolocate",this._container),M.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=i=>{if(this._map){if(i===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}else{const f=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=M.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ni({element:this._dotElement}),this._circleElement=M.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ni({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(f=>{f.geolocateSource||this._watchState!=="ACTIVE_LOCK"||f.originalEvent&&f.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")),this.fire(new l.k("userlocationlostfocus")))}))}},this.options=l.e({},zu,w)}onAdd(w){return this._map=w,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return l._(this,arguments,void 0,(function*(i=!1){if(Gr!==void 0&&!i)return Gr;if(window.navigator.permissions===void 0)return Gr=!!window.navigator.geolocation,Gr;try{Gr=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Gr=!!window.navigator.geolocation}return Gr}))})().then((i=>this._finishSetupUI(i))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),M.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Nl=0,Fl=!1}_isOutOfMapMaxBounds(w){const i=this._map.getMaxBounds(),f=w.coords;return i&&(f.longitude<i.getWest()||f.longitude>i.getEast()||f.latitude<i.getSouth()||f.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const w=this._map.getBounds(),i=w.getSouthEast(),f=w.getNorthEast(),g=i.distanceTo(f),y=Math.ceil(this._accuracy/(g/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Nl--,Fl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart")),this.fire(new l.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Nl++,Nl>1?(w={maximumAge:6e5,timeout:0},Fl=!0):(w=this.options.positionOptions,Fl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},h.Hash=Mc,h.ImageSource=Ri,h.KeyboardHandler=wa,h.LngLatBounds=qe,h.LogoControl=Xa,h.Map=class extends rl{constructor(w){l.bf.mark(l.bg.create);const i=Object.assign(Object.assign({},vs),w);if(i.minZoom!=null&&i.maxZoom!=null&&i.minZoom>i.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(i.minPitch!=null&&i.maxPitch!=null&&i.minPitch>i.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(i.minPitch!=null&&i.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(i.maxPitch!=null&&i.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ms(i.minZoom,i.maxZoom,i.minPitch,i.maxPitch,i.renderWorldCopies),{bearingSnap:i.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new wr,this._controls=[],this._mapId=l.a4(),this._contextLost=f=>{f.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new l.k("webglcontextlost",{originalEvent:f}))},this._contextRestored=f=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:f}))},this._onMapScroll=f=>{if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=i.interactive,this._maxTileCacheSize=i.maxTileCacheSize,this._maxTileCacheZoomLevels=i.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=i.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=i.preserveDrawingBuffer===!0,this._antialias=i.antialias===!0,this._trackResize=i.trackResize===!0,this._bearingSnap=i.bearingSnap,this._refreshExpiredTiles=i.refreshExpiredTiles===!0,this._fadeDuration=i.fadeDuration,this._crossSourceCollisions=i.crossSourceCollisions===!0,this._collectResourceTiming=i.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ru),i.locale),this._clickTolerance=i.clickTolerance,this._overridePixelRatio=i.pixelRatio,this._maxCanvasSize=i.maxCanvasSize,this.transformCameraUpdate=i.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=i.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Q.addThrottleControl((()=>this.isMoving())),this._requestManager=new ie(i.transformRequest),typeof i.container=="string"){if(this._container=document.getElementById(i.container),!this._container)throw new Error(`Container '${i.container}' not found.`)}else{if(!(i.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=i.container}if(i.maxBounds&&this.setMaxBounds(i.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))).on("moveend",(()=>this._update(!1))).on("zoom",(()=>this._update(!0))).on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})).once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let f=!1;const g=Au((y=>{this._trackResize&&!this._removed&&(this.resize(y),this.redraw())}),50);this._resizeObserver=new ResizeObserver((y=>{f?g(y):f=!0})),this._resizeObserver.observe(this._container)}this.handlers=new zc(this,i),this._hash=i.hash&&new Mc(typeof i.hash=="string"&&i.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:i.center,zoom:i.zoom,bearing:i.bearing,pitch:i.pitch}),i.bounds&&(this.resize(),this.fitBounds(i.bounds,l.e({},i.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=i.localIdeographFontFamily,this._validateStyle=i.validateStyle,i.style&&this.setStyle(i.style,{localIdeographFontFamily:i.localIdeographFontFamily}),i.attributionControl&&this.addControl(new yo(typeof i.attributionControl=="boolean"?void 0:i.attributionControl)),i.maplibreLogo&&this.addControl(new Xa,i.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(f=>{this._update(f.dataType==="style"),this.fire(new l.k(`${f.dataType}data`,f))})),this.on("dataloading",(f=>{this.fire(new l.k(`${f.dataType}dataloading`,f))})),this.on("dataabort",(f=>{this.fire(new l.k("sourcedataabort",f))}))}_getMapId(){return this._mapId}addControl(w,i){if(i===void 0&&(i=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=w.onAdd(this);this._controls.push(w);const g=this._controlPositions[i];return i.indexOf("bottom")!==-1?g.insertBefore(f,g.firstChild):g.appendChild(f),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(w);return i>-1&&this._controls.splice(i,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}calculateCameraOptionsFromTo(w,i,f,g){return g==null&&this.terrain&&(g=this.terrain.getElevationForLngLatZoom(f,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(w,i,f,g)}resize(w){var i;const f=this._containerDimensions(),g=f[0],y=f[1],b=this._getClampedPixelRatio(g,y);if(this._resizeCanvas(g,y,b),this.painter.resize(g,y,b),this.painter.overLimit()){const D=this.painter.context.gl;this._maxCanvasSize=[D.drawingBufferWidth,D.drawingBufferHeight];const z=this._getClampedPixelRatio(g,y);this._resizeCanvas(g,y,z),this.painter.resize(g,y,z)}this.transform.resize(g,y),(i=this._requestedCameraState)===null||i===void 0||i.resize(g,y);const k=!this._moving;return k&&(this.stop(),this.fire(new l.k("movestart",w)).fire(new l.k("move",w))),this.fire(new l.k("resize",w)),k&&this.fire(new l.k("moveend",w)),this}_getClampedPixelRatio(w,i){const{0:f,1:g}=this._maxCanvasSize,y=this.getPixelRatio(),b=w*y,k=i*y;return Math.min(b>f?f/b:1,k>g?g/k:1)*y}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(qe.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom)return this.transform.minZoom=w,this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom)return this.transform.maxZoom=w,this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.minPitch=w,this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(w>=this.transform.minPitch)return this.transform.maxPitch=w,this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.renderWorldCopies=w,this._update()}project(w){return this.transform.locationPoint(l.N.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.pointLocation(l.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,i,f){if(w==="mouseenter"||w==="mouseover"){let g=!1;return{layers:i,listener:f,delegates:{mousemove:b=>{const k=i.filter((z=>this.getLayer(z))),D=k.length!==0?this.queryRenderedFeatures(b.point,{layers:k}):[];D.length?g||(g=!0,f.call(this,new ri(w,this,b.originalEvent,{features:D}))):g=!1},mouseout:()=>{g=!1}}}}if(w==="mouseleave"||w==="mouseout"){let g=!1;return{layers:i,listener:f,delegates:{mousemove:k=>{const D=i.filter((z=>this.getLayer(z)));(D.length!==0?this.queryRenderedFeatures(k.point,{layers:D}):[]).length?g=!0:g&&(g=!1,f.call(this,new ri(w,this,k.originalEvent)))},mouseout:k=>{g&&(g=!1,f.call(this,new ri(w,this,k.originalEvent)))}}}}{const g=y=>{const b=i.filter((D=>this.getLayer(D))),k=b.length!==0?this.queryRenderedFeatures(y.point,{layers:b}):[];k.length&&(y.features=k,f.call(this,y),delete y.features)};return{layers:i,listener:f,delegates:{[w]:g}}}}_saveDelegatedListener(w,i){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(i)}_removeDelegatedListener(w,i,f){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const g=this._delegatedListeners[w];for(let y=0;y<g.length;y++){const b=g[y];if(b.listener===f&&b.layers.length===i.length&&b.layers.every((k=>i.includes(k)))){for(const k in b.delegates)this.off(k,b.delegates[k]);return void g.splice(y,1)}}}on(w,i,f){if(f===void 0)return super.on(w,i);const g=this._createDelegatedListener(w,typeof i=="string"?[i]:i,f);this._saveDelegatedListener(w,g);for(const y in g.delegates)this.on(y,g.delegates[y]);return this}once(w,i,f){if(f===void 0)return super.once(w,i);const g=typeof i=="string"?[i]:i,y=this._createDelegatedListener(w,g,f);for(const b in y.delegates){const k=y.delegates[b];y.delegates[b]=(...D)=>{this._removeDelegatedListener(w,g,f),k(...D)}}this._saveDelegatedListener(w,y);for(const b in y.delegates)this.once(b,y.delegates[b]);return this}off(w,i,f){return f===void 0?super.off(w,i):(this._removeDelegatedListener(w,typeof i=="string"?[i]:i,f),this)}queryRenderedFeatures(w,i){if(!this.style)return[];let f;const g=w instanceof l.P||Array.isArray(w),y=g?w:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(g?{}:w)||{},y instanceof l.P||typeof y[0]=="number")f=[l.P.convert(y)];else{const b=l.P.convert(y[0]),k=l.P.convert(y[1]);f=[b,new l.P(k.x,b.y),k,new l.P(b.x,k.y),b]}return this.style.queryRenderedFeatures(f,i,this.transform)}querySourceFeatures(w,i){return this.style.querySourceFeatures(w,i)}setStyle(w,i){return(i=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(w,i))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const i=this._locale[w];if(i==null)throw new Error(`Missing UI string '${w}'`);return i}_updateStyle(w,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(w,i)));const f=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new dc(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,i,f):this.style.loadJSON(w,i,f),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new dc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,i){if(typeof w=="string"){const f=this._requestManager.transformRequest(w,"Style");l.h(f,new AbortController).then((g=>{this._updateDiff(g.data,i)})).catch((g=>{g&&this.fire(new l.j(g))}))}else typeof w=="object"&&this._updateDiff(w,i)}_updateDiff(w,i){try{this.style.setState(w,i)&&this._update(!0)}catch(f){l.w(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(w,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(w,i){return this._lazyInitEmptyStyle(),this.style.addSource(w,i),this._update(!0)}isSourceLoaded(w){const i=this.style&&this.style.sourceCaches[w];if(i!==void 0)return i.loaded();this.fire(new l.j(new Error(`There is no source with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const i=this.style.sourceCaches[w.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&i.reload();for(const f in this.style._layers){const g=this.style._layers[f];g.type==="hillshade"&&g.source===w.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Fo(this.painter,i,w),this.painter.renderToTexture=new Du(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=f=>{f.dataType==="style"?this.terrain.sourceCache.freeRtt():f.dataType==="source"&&f.tile&&(f.sourceId!==w.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(f.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:w})),this}getTerrain(){var w,i;return(i=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const w=this.style&&this.style.sourceCaches;for(const i in w){const f=w[i]._tiles;for(const g in f){const y=f[g];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}addImage(w,i,f={}){const{pixelRatio:g=1,sdf:y=!1,stretchX:b,stretchY:k,content:D,textFitWidth:z,textFitHeight:$}=f;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||l.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:W,height:G,data:ne}=i,le=i;return this.style.addImage(w,{data:new l.R({width:W,height:G},new Uint8Array(ne)),pixelRatio:g,stretchX:b,stretchY:k,content:D,textFitWidth:z,textFitHeight:$,sdf:y,version:0,userImage:le}),le.onAdd&&le.onAdd(this,w),this}}{const{width:W,height:G,data:ne}=A.getImageData(i);this.style.addImage(w,{data:new l.R({width:W,height:G},ne),pixelRatio:g,stretchX:b,stretchY:k,content:D,textFitWidth:z,textFitHeight:$,sdf:y,version:0})}}updateImage(w,i){const f=this.style.getImage(w);if(!f)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=i instanceof HTMLImageElement||l.b(i)?A.getImageData(i):i,{width:y,height:b,data:k}=g;if(y===void 0||b===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==f.data.width||b!==f.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const D=!(i instanceof HTMLImageElement||l.b(i));return f.data.replace(k,D),this.style.updateImage(w,f),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return Q.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,i){return this._lazyInitEmptyStyle(),this.style.addLayer(w,i),this._update(!0)}moveLayer(w,i){return this.style.moveLayer(w,i),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,i,f){return this.style.setLayerZoomRange(w,i,f),this._update(!0)}setFilter(w,i,f={}){return this.style.setFilter(w,i,f),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,i,f,g={}){return this.style.setPaintProperty(w,i,f,g),this._update(!0)}getPaintProperty(w,i){return this.style.getPaintProperty(w,i)}setLayoutProperty(w,i,f,g={}){return this.style.setLayoutProperty(w,i,f,g),this._update(!0)}getLayoutProperty(w,i){return this.style.getLayoutProperty(w,i)}setGlyphs(w,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,i,f={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,i,f,(g=>{g||this._update(!0)})),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,i,(f=>{f||this._update(!0)})),this}setLight(w,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,i),this._update(!0)}getLight(){return this.style.getLight()}setSky(w){return this._lazyInitEmptyStyle(),this.style.setSky(w),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,i){return this.style.setFeatureState(w,i),this._update()}removeFeatureState(w,i){return this.style.removeFeatureState(w,i),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,i=0;return this._container&&(w=this._container.clientWidth||400,i=this._container.clientHeight||300),[w,i]}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const i=this._canvasContainer=M.create("div","maplibregl-canvas-container",w);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=M.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const f=this._containerDimensions(),g=this._getClampedPixelRatio(f[0],f[1]);this._resizeCanvas(f[0],f[1],g);const y=this._controlContainer=M.create("div","maplibregl-control-container",w),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((k=>{b[k]=M.create("div",`maplibregl-ctrl-${k} `,y)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,i,f){this._canvas.width=Math.floor(f*w),this._canvas.height=Math.floor(f*i),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const w={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",(g=>{i={requestedAttributes:w},g&&(i.statusMessage=g.statusMessage,i.type=g.type)}),{once:!0});const f=this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w);if(!f){const g="Failed to initialize WebGL";throw i?(i.message=g,new Error(JSON.stringify(i))):new Error(g)}this.painter=new ps(f,this.transform),L.testSupport(f)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let f=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const y=this.transform.zoom,b=A.now();this.style.zoomHistory.update(y,b);const k=new l.z(y,{now:b,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),D=k.crossFadingFactor();D===1&&D===this._crossFadingFactor||(f=!0,this._crossFadingFactor=D),this.style.update(k)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bf.mark(l.bg.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||f)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const g=this._sourcesDirty||this._styleDirty||this._placementDirty;return g||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||g||(this._fullyLoaded=!0,l.bf.mark(l.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const f of this._controls)f.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Q.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i!=null&&i.loseContext&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),M.remove(this._canvasContainer),M.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),l.bf.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,A.frameAsync(this._frameRequest).then((w=>{l.bf.frame(w),this._frameRequest=null,this._render(w)})).catch((()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return nl}getCameraTargetElevation(){return this.transform.elevation}},h.MapMouseEvent=ri,h.MapTouchEvent=mo,h.MapWheelEvent=Mh,h.Marker=ni,h.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const i=this._map.getZoom(),f=i===this._map.getMaxZoom(),g=i===this._map.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,f)=>{const g=this._map._getUIString(`NavigationControl.${f}`);i.title=g,i.setAttribute("aria-label",g)},this.options=l.e({},an,w),this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(i=>i.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(i=>this._map.zoomIn({},{originalEvent:i}))),M.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(i=>this._map.zoomOut({},{originalEvent:i}))),M.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})})),this._compassIcon=M.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new _s(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){M.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,i){const f=M.create("button",w,this._container);return f.type="button",f.addEventListener("click",i),f}},h.Popup=class extends l.E{constructor(w){super(),this.remove=()=>(this._content&&M.remove(this._content),this._container&&(M.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new l.k("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{var f;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=M.create("div","maplibregl-popup",this._map.getContainer()),this._tip=M.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const D of this.options.className.split(" "))this._container.classList.add(D);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Sr(this._lngLat,this._flatPos,this._map.transform):(f=this._lngLat)===null||f===void 0?void 0:f.wrap(),this._trackPointer&&!i)return;const g=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationPoint(this._lngLat));let y=this.options.anchor;const b=ju(this.options.offset);if(!y){const D=this._container.offsetWidth,z=this._container.offsetHeight;let $;$=g.y+b.bottom.y<z?["top"]:g.y>this._map.transform.height-z?["bottom"]:[],g.x<D/2?$.push("left"):g.x>this._map.transform.width-D/2&&$.push("right"),y=$.length===0?"bottom":$.join("-")}let k=g.add(b[y]);this.options.subpixelPositioning||(k=k.round()),M.setTransform(this._container,`${Pa[y]} translate(${k.x}px,${k.y}px)`),$o(this._container,y,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(Zt),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=l.N.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const i=document.createDocumentFragment(),f=document.createElement("body");let g;for(f.innerHTML=w;g=f.firstChild,g;)i.appendChild(g);return this.setDOMContent(i)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=M.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}_createCloseButton(){this.options.closeButton&&(this._closeButton=M.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(Vl);w&&w.focus()}},h.RasterDEMTileSource=Rr,h.RasterTileSource=vr,h.ScaleControl=class{constructor(w){this._onMove=()=>{$l(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,$l(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},aa),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){M.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},h.ScrollZoomHandler=Vi,h.Style=dc,h.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=M.create("button","maplibregl-ctrl-terrain",this._container),M.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){M.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},h.TwoFingersTouchPitchHandler=jl,h.TwoFingersTouchRotateHandler=zl,h.TwoFingersTouchZoomHandler=ku,h.TwoFingersTouchZoomRotateHandler=Rc,h.VectorTileSource=xi,h.VideoSource=co,h.addSourceType=(w,i)=>l._(void 0,void 0,void 0,(function*(){if(Ns(w))throw new Error(`A source type called "${w}" already exists.`);((f,g)=>{xl[f]=g})(w,i)})),h.clearPrewarmedResources=function(){const w=cr;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(jt),cr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},h.getMaxParallelImageRequests=function(){return l.a.MAX_PARALLEL_IMAGE_REQUESTS},h.getRTLTextPluginStatus=function(){return zi().getRTLTextPluginStatus()},h.getVersion=function(){return jh},h.getWorkerCount=function(){return Ut.workerCount},h.getWorkerUrl=function(){return l.a.WORKER_URL},h.importScriptInWorkers=function(w){return sr().broadcast("IS",w)},h.prewarm=function(){ht().acquire(jt)},h.setMaxParallelImageRequests=function(w){l.a.MAX_PARALLEL_IMAGE_REQUESTS=w},h.setRTLTextPlugin=function(w,i){return zi().setRTLTextPlugin(w,i)},h.setWorkerCount=function(w){Ut.workerCount=w},h.setWorkerUrl=function(w){l.a.WORKER_URL=w}}));var d=r;return d}))})(_v)),_v.exports}var D$=O$();const ev=fn(D$);function wR(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=wR(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Wr(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=wR(e))&&(n&&(n+=" "),n+=t);return n}var ux,VE;function Ao(){if(VE)return ux;VE=1;var e=Array.isArray;return ux=e,ux}var cx,UE;function SR(){if(UE)return cx;UE=1;var e=typeof Zy=="object"&&Zy&&Zy.Object===Object&&Zy;return cx=e,cx}var hx,qE;function du(){if(qE)return hx;qE=1;var e=SR(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return hx=r,hx}var fx,WE;function Zg(){if(WE)return fx;WE=1;var e=du(),t=e.Symbol;return fx=t,fx}var dx,GE;function R$(){if(GE)return dx;GE=1;var e=Zg(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,s=e?e.toStringTag:void 0;function d(h){var l=r.call(h,s),_=h[s];try{h[s]=void 0;var S=!0}catch{}var E=n.call(h);return S&&(l?h[s]=_:delete h[s]),E}return dx=d,dx}var px,HE;function z$(){if(HE)return px;HE=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return px=r,px}var mx,ZE;function cc(){if(ZE)return mx;ZE=1;var e=Zg(),t=R$(),r=z$(),n="[object Null]",s="[object Undefined]",d=e?e.toStringTag:void 0;function h(l){return l==null?l===void 0?s:n:d&&d in Object(l)?t(l):r(l)}return mx=h,mx}var gx,KE;function hc(){if(KE)return gx;KE=1;function e(t){return t!=null&&typeof t=="object"}return gx=e,gx}var yx,XE;function zp(){if(XE)return yx;XE=1;var e=cc(),t=hc(),r="[object Symbol]";function n(s){return typeof s=="symbol"||t(s)&&e(s)==r}return yx=n,yx}var vx,YE;function jP(){if(YE)return vx;YE=1;var e=Ao(),t=zp(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(d,h){if(e(d))return!1;var l=typeof d;return l=="number"||l=="symbol"||l=="boolean"||d==null||t(d)?!0:n.test(d)||!r.test(d)||h!=null&&d in Object(h)}return vx=s,vx}var _x,JE;function lh(){if(JE)return _x;JE=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return _x=e,_x}var xx,QE;function LP(){if(QE)return xx;QE=1;var e=cc(),t=lh(),r="[object AsyncFunction]",n="[object Function]",s="[object GeneratorFunction]",d="[object Proxy]";function h(l){if(!t(l))return!1;var _=e(l);return _==n||_==s||_==r||_==d}return xx=h,xx}var bx,eC;function j$(){if(eC)return bx;eC=1;var e=du(),t=e["__core-js_shared__"];return bx=t,bx}var wx,tC;function L$(){if(tC)return wx;tC=1;var e=j$(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return wx=r,wx}var Sx,rC;function PR(){if(rC)return Sx;rC=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return Sx=r,Sx}var Px,nC;function B$(){if(nC)return Px;nC=1;var e=LP(),t=L$(),r=lh(),n=PR(),s=/[\\^$.*+?()[\]{}|]/g,d=/^\[object .+?Constructor\]$/,h=Function.prototype,l=Object.prototype,_=h.toString,S=l.hasOwnProperty,E=RegExp("^"+_.call(S).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function A(M){if(!r(M)||t(M))return!1;var L=e(M)?E:d;return L.test(n(M))}return Px=A,Px}var Tx,iC;function N$(){if(iC)return Tx;iC=1;function e(t,r){return t==null?void 0:t[r]}return Tx=e,Tx}var Ax,aC;function Vf(){if(aC)return Ax;aC=1;var e=B$(),t=N$();function r(n,s){var d=t(n,s);return e(d)?d:void 0}return Ax=r,Ax}var Ex,oC;function N_(){if(oC)return Ex;oC=1;var e=Vf(),t=e(Object,"create");return Ex=t,Ex}var Cx,sC;function F$(){if(sC)return Cx;sC=1;var e=N_();function t(){this.__data__=e?e(null):{},this.size=0}return Cx=t,Cx}var Mx,lC;function $$(){if(lC)return Mx;lC=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return Mx=e,Mx}var Ix,uC;function V$(){if(uC)return Ix;uC=1;var e=N_(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function s(d){var h=this.__data__;if(e){var l=h[d];return l===t?void 0:l}return n.call(h,d)?h[d]:void 0}return Ix=s,Ix}var kx,cC;function U$(){if(cC)return kx;cC=1;var e=N_(),t=Object.prototype,r=t.hasOwnProperty;function n(s){var d=this.__data__;return e?d[s]!==void 0:r.call(d,s)}return kx=n,kx}var Ox,hC;function q$(){if(hC)return Ox;hC=1;var e=N_(),t="__lodash_hash_undefined__";function r(n,s){var d=this.__data__;return this.size+=this.has(n)?0:1,d[n]=e&&s===void 0?t:s,this}return Ox=r,Ox}var Dx,fC;function W$(){if(fC)return Dx;fC=1;var e=F$(),t=$$(),r=V$(),n=U$(),s=q$();function d(h){var l=-1,_=h==null?0:h.length;for(this.clear();++l<_;){var S=h[l];this.set(S[0],S[1])}}return d.prototype.clear=e,d.prototype.delete=t,d.prototype.get=r,d.prototype.has=n,d.prototype.set=s,Dx=d,Dx}var Rx,dC;function G$(){if(dC)return Rx;dC=1;function e(){this.__data__=[],this.size=0}return Rx=e,Rx}var zx,pC;function BP(){if(pC)return zx;pC=1;function e(t,r){return t===r||t!==t&&r!==r}return zx=e,zx}var jx,mC;function F_(){if(mC)return jx;mC=1;var e=BP();function t(r,n){for(var s=r.length;s--;)if(e(r[s][0],n))return s;return-1}return jx=t,jx}var Lx,gC;function H$(){if(gC)return Lx;gC=1;var e=F_(),t=Array.prototype,r=t.splice;function n(s){var d=this.__data__,h=e(d,s);if(h<0)return!1;var l=d.length-1;return h==l?d.pop():r.call(d,h,1),--this.size,!0}return Lx=n,Lx}var Bx,yC;function Z$(){if(yC)return Bx;yC=1;var e=F_();function t(r){var n=this.__data__,s=e(n,r);return s<0?void 0:n[s][1]}return Bx=t,Bx}var Nx,vC;function K$(){if(vC)return Nx;vC=1;var e=F_();function t(r){return e(this.__data__,r)>-1}return Nx=t,Nx}var Fx,_C;function X$(){if(_C)return Fx;_C=1;var e=F_();function t(r,n){var s=this.__data__,d=e(s,r);return d<0?(++this.size,s.push([r,n])):s[d][1]=n,this}return Fx=t,Fx}var $x,xC;function $_(){if(xC)return $x;xC=1;var e=G$(),t=H$(),r=Z$(),n=K$(),s=X$();function d(h){var l=-1,_=h==null?0:h.length;for(this.clear();++l<_;){var S=h[l];this.set(S[0],S[1])}}return d.prototype.clear=e,d.prototype.delete=t,d.prototype.get=r,d.prototype.has=n,d.prototype.set=s,$x=d,$x}var Vx,bC;function NP(){if(bC)return Vx;bC=1;var e=Vf(),t=du(),r=e(t,"Map");return Vx=r,Vx}var Ux,wC;function Y$(){if(wC)return Ux;wC=1;var e=W$(),t=$_(),r=NP();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return Ux=n,Ux}var qx,SC;function J$(){if(SC)return qx;SC=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return qx=e,qx}var Wx,PC;function V_(){if(PC)return Wx;PC=1;var e=J$();function t(r,n){var s=r.__data__;return e(n)?s[typeof n=="string"?"string":"hash"]:s.map}return Wx=t,Wx}var Gx,TC;function Q$(){if(TC)return Gx;TC=1;var e=V_();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return Gx=t,Gx}var Hx,AC;function eV(){if(AC)return Hx;AC=1;var e=V_();function t(r){return e(this,r).get(r)}return Hx=t,Hx}var Zx,EC;function tV(){if(EC)return Zx;EC=1;var e=V_();function t(r){return e(this,r).has(r)}return Zx=t,Zx}var Kx,CC;function rV(){if(CC)return Kx;CC=1;var e=V_();function t(r,n){var s=e(this,r),d=s.size;return s.set(r,n),this.size+=s.size==d?0:1,this}return Kx=t,Kx}var Xx,MC;function FP(){if(MC)return Xx;MC=1;var e=Y$(),t=Q$(),r=eV(),n=tV(),s=rV();function d(h){var l=-1,_=h==null?0:h.length;for(this.clear();++l<_;){var S=h[l];this.set(S[0],S[1])}}return d.prototype.clear=e,d.prototype.delete=t,d.prototype.get=r,d.prototype.has=n,d.prototype.set=s,Xx=d,Xx}var Yx,IC;function TR(){if(IC)return Yx;IC=1;var e=FP(),t="Expected a function";function r(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var d=function(){var h=arguments,l=s?s.apply(this,h):h[0],_=d.cache;if(_.has(l))return _.get(l);var S=n.apply(this,h);return d.cache=_.set(l,S)||_,S};return d.cache=new(r.Cache||e),d}return r.Cache=e,Yx=r,Yx}var Jx,kC;function nV(){if(kC)return Jx;kC=1;var e=TR(),t=500;function r(n){var s=e(n,function(h){return d.size===t&&d.clear(),h}),d=s.cache;return s}return Jx=r,Jx}var Qx,OC;function iV(){if(OC)return Qx;OC=1;var e=nV(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(s){var d=[];return s.charCodeAt(0)===46&&d.push(""),s.replace(t,function(h,l,_,S){d.push(_?S.replace(r,"$1"):l||h)}),d});return Qx=n,Qx}var e1,DC;function $P(){if(DC)return e1;DC=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,d=Array(s);++n<s;)d[n]=r(t[n],n,t);return d}return e1=e,e1}var t1,RC;function aV(){if(RC)return t1;RC=1;var e=Zg(),t=$P(),r=Ao(),n=zp(),s=e?e.prototype:void 0,d=s?s.toString:void 0;function h(l){if(typeof l=="string")return l;if(r(l))return t(l,h)+"";if(n(l))return d?d.call(l):"";var _=l+"";return _=="0"&&1/l==-1/0?"-0":_}return t1=h,t1}var r1,zC;function AR(){if(zC)return r1;zC=1;var e=aV();function t(r){return r==null?"":e(r)}return r1=t,r1}var n1,jC;function ER(){if(jC)return n1;jC=1;var e=Ao(),t=jP(),r=iV(),n=AR();function s(d,h){return e(d)?d:t(d,h)?[d]:r(n(d))}return n1=s,n1}var i1,LC;function U_(){if(LC)return i1;LC=1;var e=zp();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return i1=t,i1}var a1,BC;function VP(){if(BC)return a1;BC=1;var e=ER(),t=U_();function r(n,s){s=e(s,n);for(var d=0,h=s.length;n!=null&&d<h;)n=n[t(s[d++])];return d&&d==h?n:void 0}return a1=r,a1}var o1,NC;function CR(){if(NC)return o1;NC=1;var e=VP();function t(r,n,s){var d=r==null?void 0:e(r,n);return d===void 0?s:d}return o1=t,o1}var oV=CR();const zs=fn(oV);var s1,FC;function sV(){if(FC)return s1;FC=1;function e(t){return t==null}return s1=e,s1}var lV=sV();const Dr=fn(lV);var l1,$C;function uV(){if($C)return l1;$C=1;var e=cc(),t=Ao(),r=hc(),n="[object String]";function s(d){return typeof d=="string"||!t(d)&&r(d)&&e(d)==n}return l1=s,l1}var cV=uV();const Rf=fn(cV);var hV=LP();const Mr=fn(hV);var fV=lh();const jp=fn(fV);var u1={exports:{}},ln={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VC;function dV(){if(VC)return ln;VC=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),h=Symbol.for("react.context"),l=Symbol.for("react.server_context"),_=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),L=Symbol.for("react.offscreen"),U;U=Symbol.for("react.module.reference");function N(B){if(typeof B=="object"&&B!==null){var Z=B.$$typeof;switch(Z){case e:switch(B=B.type,B){case r:case s:case n:case S:case E:return B;default:switch(B=B&&B.$$typeof,B){case l:case h:case _:case M:case A:case d:return B;default:return Z}}case t:return Z}}}return ln.ContextConsumer=h,ln.ContextProvider=d,ln.Element=e,ln.ForwardRef=_,ln.Fragment=r,ln.Lazy=M,ln.Memo=A,ln.Portal=t,ln.Profiler=s,ln.StrictMode=n,ln.Suspense=S,ln.SuspenseList=E,ln.isAsyncMode=function(){return!1},ln.isConcurrentMode=function(){return!1},ln.isContextConsumer=function(B){return N(B)===h},ln.isContextProvider=function(B){return N(B)===d},ln.isElement=function(B){return typeof B=="object"&&B!==null&&B.$$typeof===e},ln.isForwardRef=function(B){return N(B)===_},ln.isFragment=function(B){return N(B)===r},ln.isLazy=function(B){return N(B)===M},ln.isMemo=function(B){return N(B)===A},ln.isPortal=function(B){return N(B)===t},ln.isProfiler=function(B){return N(B)===s},ln.isStrictMode=function(B){return N(B)===n},ln.isSuspense=function(B){return N(B)===S},ln.isSuspenseList=function(B){return N(B)===E},ln.isValidElementType=function(B){return typeof B=="string"||typeof B=="function"||B===r||B===s||B===n||B===S||B===E||B===L||typeof B=="object"&&B!==null&&(B.$$typeof===M||B.$$typeof===A||B.$$typeof===d||B.$$typeof===h||B.$$typeof===_||B.$$typeof===U||B.getModuleId!==void 0)},ln.typeOf=N,ln}var UC;function pV(){return UC||(UC=1,u1.exports=dV()),u1.exports}var mV=pV(),c1,qC;function MR(){if(qC)return c1;qC=1;var e=cc(),t=hc(),r="[object Number]";function n(s){return typeof s=="number"||t(s)&&e(s)==r}return c1=n,c1}var h1,WC;function gV(){if(WC)return h1;WC=1;var e=MR();function t(r){return e(r)&&r!=+r}return h1=t,h1}var yV=gV();const Kg=fn(yV);var vV=MR();const _V=fn(vV);var gl=function(t){return t===0?0:t>0?1:-1},Tf=function(t){return Rf(t)&&t.indexOf("%")===t.length-1},Ot=function(t){return _V(t)&&!Kg(t)},xV=function(t){return Dr(t)},Oi=function(t){return Ot(t)||Rf(t)},bV=0,Xg=function(t){var r=++bV;return"".concat(t||"").concat(r)},zf=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ot(t)&&!Rf(t))return n;var d;if(Tf(t)){var h=t.indexOf("%");d=r*parseFloat(t.slice(0,h))/100}else d=+t;return Kg(d)&&(d=n),s&&d>r&&(d=r),d},Jc=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},wV=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},s=0;s<r;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},pl=function(t,r){return Ot(t)&&Ot(r)?function(n){return t+n*(r-t)}:function(){return r}};function Ov(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):zs(n,t))===r})}var SV=function(t,r){return Ot(t)&&Ot(r)?t-r:Rf(t)&&Rf(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function rp(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function O2(e){"@babel/helpers - typeof";return O2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O2(e)}var PV=["viewBox","children"],TV=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],GC=["points","pathLength"],f1={svg:PV,polygon:GC,polyline:GC},UP=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Dv=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(Pe.isValidElement(t)&&(n=t.props),!jp(n))return null;var s={};return Object.keys(n).forEach(function(d){UP.includes(d)&&(s[d]=r||function(h){return n[d](n,h)})}),s},AV=function(t,r,n){return function(s){return t(r,n,s),null}},Rv=function(t,r,n){if(!jp(t)||O2(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(d){var h=t[d];UP.includes(d)&&typeof h=="function"&&(s||(s={}),s[d]=AV(h,r,n))}),s},EV=["children"],CV=["children"];function HC(e,t){if(e==null)return{};var r=MV(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function MV(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function D2(e){"@babel/helpers - typeof";return D2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D2(e)}var ZC={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},rc=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},KC=null,d1=null,qP=function e(t){if(t===KC&&Array.isArray(d1))return d1;var r=[];return Pe.Children.forEach(t,function(n){Dr(n)||(mV.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),d1=r,KC=t,r};function js(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(s){return rc(s)}):n=[rc(t)],qP(e).forEach(function(s){var d=zs(s,"type.displayName")||zs(s,"type.name");n.indexOf(d)!==-1&&r.push(s)}),r}function es(e,t){var r=js(e,t);return r&&r[0]}var XC=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,s=r.height;return!(!Ot(n)||n<=0||!Ot(s)||s<=0)},IV=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],kV=function(t){return t&&t.type&&Rf(t.type)&&IV.indexOf(t.type)>=0},OV=function(t){return t&&D2(t)==="object"&&"clipDot"in t},DV=function(t,r,n,s){var d,h=(d=f1==null?void 0:f1[s])!==null&&d!==void 0?d:[];return r.startsWith("data-")||!Mr(t)&&(s&&h.includes(r)||TV.includes(r))||n&&UP.includes(r)},$r=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(Pe.isValidElement(t)&&(s=t.props),!jp(s))return null;var d={};return Object.keys(s).forEach(function(h){var l;DV((l=s)===null||l===void 0?void 0:l[h],h,r,n)&&(d[h]=s[h])}),d},R2=function e(t,r){if(t===r)return!0;var n=Pe.Children.count(t);if(n!==Pe.Children.count(r))return!1;if(n===0)return!0;if(n===1)return YC(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var d=t[s],h=r[s];if(Array.isArray(d)||Array.isArray(h)){if(!e(d,h))return!1}else if(!YC(d,h))return!1}return!0},YC=function(t,r){if(Dr(t)&&Dr(r))return!0;if(!Dr(t)&&!Dr(r)){var n=t.props||{},s=n.children,d=HC(n,EV),h=r.props||{},l=h.children,_=HC(h,CV);return s&&l?rp(d,_)&&R2(s,l):!s&&!l?rp(d,_):!1}return!1},JC=function(t,r){var n=[],s={};return qP(t).forEach(function(d,h){if(kV(d))n.push(d);else if(d){var l=rc(d.type),_=r[l]||{},S=_.handler,E=_.once;if(S&&(!E||!s[l])){var A=S(d,l,h);n.push(A),s[l]=!0}}}),n},RV=function(t){var r=t&&t.type;return r&&ZC[r]?ZC[r]:null},zV=function(t,r){return qP(r).indexOf(t)},jV=["children","width","height","viewBox","className","style","title","desc"];function z2(){return z2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z2.apply(this,arguments)}function LV(e,t){if(e==null)return{};var r=BV(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function BV(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function j2(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,d=e.className,h=e.style,l=e.title,_=e.desc,S=LV(e,jV),E=s||{width:r,height:n,x:0,y:0},A=Wr("recharts-surface",d);return ze.createElement("svg",z2({},$r(S,!0,"svg"),{className:A,width:r,height:n,style:h,viewBox:"".concat(E.x," ").concat(E.y," ").concat(E.width," ").concat(E.height)}),ze.createElement("title",null,l),ze.createElement("desc",null,_),t)}var NV=["children","className"];function L2(){return L2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L2.apply(this,arguments)}function FV(e,t){if(e==null)return{};var r=$V(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $V(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var ui=ze.forwardRef(function(e,t){var r=e.children,n=e.className,s=FV(e,NV),d=Wr("recharts-layer",n);return ze.createElement("g",L2({className:d},$r(s,!0),{ref:t}),r)}),nc=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),d=2;d<n;d++)s[d-2]=arguments[d]},p1,QC;function VV(){if(QC)return p1;QC=1;function e(t,r,n){var s=-1,d=t.length;r<0&&(r=-r>d?0:d+r),n=n>d?d:n,n<0&&(n+=d),d=r>n?0:n-r>>>0,r>>>=0;for(var h=Array(d);++s<d;)h[s]=t[s+r];return h}return p1=e,p1}var m1,eM;function UV(){if(eM)return m1;eM=1;var e=VV();function t(r,n,s){var d=r.length;return s=s===void 0?d:s,!n&&s>=d?r:e(r,n,s)}return m1=t,m1}var g1,tM;function IR(){if(tM)return g1;tM=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,d="\\ufe0e\\ufe0f",h="\\u200d",l=RegExp("["+h+e+s+d+"]");function _(S){return l.test(S)}return g1=_,g1}var y1,rM;function qV(){if(rM)return y1;rM=1;function e(t){return t.split("")}return y1=e,y1}var v1,nM;function WV(){if(nM)return v1;nM=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,d="\\ufe0e\\ufe0f",h="["+e+"]",l="["+s+"]",_="\\ud83c[\\udffb-\\udfff]",S="(?:"+l+"|"+_+")",E="[^"+e+"]",A="(?:\\ud83c[\\udde6-\\uddff]){2}",M="[\\ud800-\\udbff][\\udc00-\\udfff]",L="\\u200d",U=S+"?",N="["+d+"]?",B="(?:"+L+"(?:"+[E,A,M].join("|")+")"+N+U+")*",Z=N+U+B,J="(?:"+[E+l+"?",l,A,M,h].join("|")+")",Q=RegExp(_+"(?="+_+")|"+J+Z,"g");function ie(H){return H.match(Q)||[]}return v1=ie,v1}var _1,iM;function GV(){if(iM)return _1;iM=1;var e=qV(),t=IR(),r=WV();function n(s){return t(s)?r(s):e(s)}return _1=n,_1}var x1,aM;function HV(){if(aM)return x1;aM=1;var e=UV(),t=IR(),r=GV(),n=AR();function s(d){return function(h){h=n(h);var l=t(h)?r(h):void 0,_=l?l[0]:h.charAt(0),S=l?e(l,1).join(""):h.slice(1);return _[d]()+S}}return x1=s,x1}var b1,oM;function ZV(){if(oM)return b1;oM=1;var e=HV(),t=e("toUpperCase");return b1=t,b1}var KV=ZV();const q_=fn(KV);function An(e){return function(){return e}}const kR=Math.cos,zv=Math.sin,_l=Math.sqrt,jv=Math.PI,W_=2*jv,B2=Math.PI,N2=2*B2,wf=1e-6,XV=N2-wf;function OR(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function YV(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return OR;const r=10**t;return function(n){this._+=n[0];for(let s=1,d=n.length;s<d;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class JV{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?OR:YV(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,d,h){this._append`C${+t},${+r},${+n},${+s},${this._x1=+d},${this._y1=+h}`}arcTo(t,r,n,s,d){if(t=+t,r=+r,n=+n,s=+s,d=+d,d<0)throw new Error(`negative radius: ${d}`);let h=this._x1,l=this._y1,_=n-t,S=s-r,E=h-t,A=l-r,M=E*E+A*A;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(M>wf)if(!(Math.abs(A*_-S*E)>wf)||!d)this._append`L${this._x1=t},${this._y1=r}`;else{let L=n-h,U=s-l,N=_*_+S*S,B=L*L+U*U,Z=Math.sqrt(N),J=Math.sqrt(M),Q=d*Math.tan((B2-Math.acos((N+M-B)/(2*Z*J)))/2),ie=Q/J,H=Q/Z;Math.abs(ie-1)>wf&&this._append`L${t+ie*E},${r+ie*A}`,this._append`A${d},${d},0,0,${+(A*L>E*U)},${this._x1=t+H*_},${this._y1=r+H*S}`}}arc(t,r,n,s,d,h){if(t=+t,r=+r,n=+n,h=!!h,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),_=n*Math.sin(s),S=t+l,E=r+_,A=1^h,M=h?s-d:d-s;this._x1===null?this._append`M${S},${E}`:(Math.abs(this._x1-S)>wf||Math.abs(this._y1-E)>wf)&&this._append`L${S},${E}`,n&&(M<0&&(M=M%N2+N2),M>XV?this._append`A${n},${n},0,1,${A},${t-l},${r-_}A${n},${n},0,1,${A},${this._x1=S},${this._y1=E}`:M>wf&&this._append`A${n},${n},0,${+(M>=B2)},${A},${this._x1=t+n*Math.cos(d)},${this._y1=r+n*Math.sin(d)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function WP(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new JV(t)}function GP(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function DR(e){this._context=e}DR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function G_(e){return new DR(e)}function RR(e){return e[0]}function zR(e){return e[1]}function jR(e,t){var r=An(!0),n=null,s=G_,d=null,h=WP(l);e=typeof e=="function"?e:e===void 0?RR:An(e),t=typeof t=="function"?t:t===void 0?zR:An(t);function l(_){var S,E=(_=GP(_)).length,A,M=!1,L;for(n==null&&(d=s(L=h())),S=0;S<=E;++S)!(S<E&&r(A=_[S],S,_))===M&&((M=!M)?d.lineStart():d.lineEnd()),M&&d.point(+e(A,S,_),+t(A,S,_));if(L)return d=null,L+""||null}return l.x=function(_){return arguments.length?(e=typeof _=="function"?_:An(+_),l):e},l.y=function(_){return arguments.length?(t=typeof _=="function"?_:An(+_),l):t},l.defined=function(_){return arguments.length?(r=typeof _=="function"?_:An(!!_),l):r},l.curve=function(_){return arguments.length?(s=_,n!=null&&(d=s(n)),l):s},l.context=function(_){return arguments.length?(_==null?n=d=null:d=s(n=_),l):n},l}function tv(e,t,r){var n=null,s=An(!0),d=null,h=G_,l=null,_=WP(S);e=typeof e=="function"?e:e===void 0?RR:An(+e),t=typeof t=="function"?t:An(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?zR:An(+r);function S(A){var M,L,U,N=(A=GP(A)).length,B,Z=!1,J,Q=new Array(N),ie=new Array(N);for(d==null&&(l=h(J=_())),M=0;M<=N;++M){if(!(M<N&&s(B=A[M],M,A))===Z)if(Z=!Z)L=M,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),U=M-1;U>=L;--U)l.point(Q[U],ie[U]);l.lineEnd(),l.areaEnd()}Z&&(Q[M]=+e(B,M,A),ie[M]=+t(B,M,A),l.point(n?+n(B,M,A):Q[M],r?+r(B,M,A):ie[M]))}if(J)return l=null,J+""||null}function E(){return jR().defined(s).curve(h).context(d)}return S.x=function(A){return arguments.length?(e=typeof A=="function"?A:An(+A),n=null,S):e},S.x0=function(A){return arguments.length?(e=typeof A=="function"?A:An(+A),S):e},S.x1=function(A){return arguments.length?(n=A==null?null:typeof A=="function"?A:An(+A),S):n},S.y=function(A){return arguments.length?(t=typeof A=="function"?A:An(+A),r=null,S):t},S.y0=function(A){return arguments.length?(t=typeof A=="function"?A:An(+A),S):t},S.y1=function(A){return arguments.length?(r=A==null?null:typeof A=="function"?A:An(+A),S):r},S.lineX0=S.lineY0=function(){return E().x(e).y(t)},S.lineY1=function(){return E().x(e).y(r)},S.lineX1=function(){return E().x(n).y(t)},S.defined=function(A){return arguments.length?(s=typeof A=="function"?A:An(!!A),S):s},S.curve=function(A){return arguments.length?(h=A,d!=null&&(l=h(d)),S):h},S.context=function(A){return arguments.length?(A==null?d=l=null:l=h(d=A),S):d},S}class LR{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function QV(e){return new LR(e,!0)}function e7(e){return new LR(e,!1)}const HP={draw(e,t){const r=_l(t/jv);e.moveTo(r,0),e.arc(0,0,r,0,W_)}},t7={draw(e,t){const r=_l(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},BR=_l(1/3),r7=BR*2,n7={draw(e,t){const r=_l(t/r7),n=r*BR;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},i7={draw(e,t){const r=_l(t),n=-r/2;e.rect(n,n,r,r)}},a7=.8908130915292852,NR=zv(jv/10)/zv(7*jv/10),o7=zv(W_/10)*NR,s7=-kR(W_/10)*NR,l7={draw(e,t){const r=_l(t*a7),n=o7*r,s=s7*r;e.moveTo(0,-r),e.lineTo(n,s);for(let d=1;d<5;++d){const h=W_*d/5,l=kR(h),_=zv(h);e.lineTo(_*r,-l*r),e.lineTo(l*n-_*s,_*n+l*s)}e.closePath()}},w1=_l(3),u7={draw(e,t){const r=-_l(t/(w1*3));e.moveTo(0,r*2),e.lineTo(-w1*r,-r),e.lineTo(w1*r,-r),e.closePath()}},Cs=-.5,Ms=_l(3)/2,F2=1/_l(12),c7=(F2/2+1)*3,h7={draw(e,t){const r=_l(t/c7),n=r/2,s=r*F2,d=n,h=r*F2+r,l=-d,_=h;e.moveTo(n,s),e.lineTo(d,h),e.lineTo(l,_),e.lineTo(Cs*n-Ms*s,Ms*n+Cs*s),e.lineTo(Cs*d-Ms*h,Ms*d+Cs*h),e.lineTo(Cs*l-Ms*_,Ms*l+Cs*_),e.lineTo(Cs*n+Ms*s,Cs*s-Ms*n),e.lineTo(Cs*d+Ms*h,Cs*h-Ms*d),e.lineTo(Cs*l+Ms*_,Cs*_-Ms*l),e.closePath()}};function f7(e,t){let r=null,n=WP(s);e=typeof e=="function"?e:An(e||HP),t=typeof t=="function"?t:An(t===void 0?64:+t);function s(){let d;if(r||(r=d=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),d)return r=null,d+""||null}return s.type=function(d){return arguments.length?(e=typeof d=="function"?d:An(d),s):e},s.size=function(d){return arguments.length?(t=typeof d=="function"?d:An(+d),s):t},s.context=function(d){return arguments.length?(r=d??null,s):r},s}function Lv(){}function Bv(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function FR(e){this._context=e}FR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Bv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Bv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function d7(e){return new FR(e)}function $R(e){this._context=e}$R.prototype={areaStart:Lv,areaEnd:Lv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Bv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function p7(e){return new $R(e)}function VR(e){this._context=e}VR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Bv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function m7(e){return new VR(e)}function UR(e){this._context=e}UR.prototype={areaStart:Lv,areaEnd:Lv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function g7(e){return new UR(e)}function sM(e){return e<0?-1:1}function lM(e,t,r){var n=e._x1-e._x0,s=t-e._x1,d=(e._y1-e._y0)/(n||s<0&&-0),h=(r-e._y1)/(s||n<0&&-0),l=(d*s+h*n)/(n+s);return(sM(d)+sM(h))*Math.min(Math.abs(d),Math.abs(h),.5*Math.abs(l))||0}function uM(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function S1(e,t,r){var n=e._x0,s=e._y0,d=e._x1,h=e._y1,l=(d-n)/3;e._context.bezierCurveTo(n+l,s+l*t,d-l,h-l*r,d,h)}function Nv(e){this._context=e}Nv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:S1(this,this._t0,uM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,S1(this,uM(this,r=lM(this,e,t)),r);break;default:S1(this,this._t0,r=lM(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function qR(e){this._context=new WR(e)}(qR.prototype=Object.create(Nv.prototype)).point=function(e,t){Nv.prototype.point.call(this,t,e)};function WR(e){this._context=e}WR.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,d){this._context.bezierCurveTo(t,e,n,r,d,s)}};function y7(e){return new Nv(e)}function v7(e){return new qR(e)}function GR(e){this._context=e}GR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=cM(e),s=cM(t),d=0,h=1;h<r;++d,++h)this._context.bezierCurveTo(n[0][d],s[0][d],n[1][d],s[1][d],e[h],t[h]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function cM(e){var t,r=e.length-1,n,s=new Array(r),d=new Array(r),h=new Array(r);for(s[0]=0,d[0]=2,h[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,d[t]=4,h[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,d[r-1]=7,h[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/d[t-1],d[t]-=n,h[t]-=n*h[t-1];for(s[r-1]=h[r-1]/d[r-1],t=r-2;t>=0;--t)s[t]=(h[t]-s[t+1])/d[t];for(d[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)d[t]=2*e[t+1]-s[t+1];return[s,d]}function _7(e){return new GR(e)}function H_(e,t){this._context=e,this._t=t}H_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function x7(e){return new H_(e,.5)}function b7(e){return new H_(e,0)}function w7(e){return new H_(e,1)}function up(e,t){if((h=e.length)>1)for(var r=1,n,s,d=e[t[0]],h,l=d.length;r<h;++r)for(s=d,d=e[t[r]],n=0;n<l;++n)d[n][1]+=d[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function $2(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function S7(e,t){return e[t]}function P7(e){const t=[];return t.key=e,t}function T7(){var e=An([]),t=$2,r=up,n=S7;function s(d){var h=Array.from(e.apply(this,arguments),P7),l,_=h.length,S=-1,E;for(const A of d)for(l=0,++S;l<_;++l)(h[l][S]=[0,+n(A,h[l].key,S,d)]).data=A;for(l=0,E=GP(t(h));l<_;++l)h[E[l]].index=l;return r(h,E),h}return s.keys=function(d){return arguments.length?(e=typeof d=="function"?d:An(Array.from(d)),s):e},s.value=function(d){return arguments.length?(n=typeof d=="function"?d:An(+d),s):n},s.order=function(d){return arguments.length?(t=d==null?$2:typeof d=="function"?d:An(Array.from(d)),s):t},s.offset=function(d){return arguments.length?(r=d??up,s):r},s}function A7(e,t){if((n=e.length)>0){for(var r,n,s=0,d=e[0].length,h;s<d;++s){for(h=r=0;r<n;++r)h+=e[r][s][1]||0;if(h)for(r=0;r<n;++r)e[r][s][1]/=h}up(e,t)}}function E7(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,d=n.length;r<d;++r){for(var h=0,l=0;h<s;++h)l+=e[h][r][1]||0;n[r][1]+=n[r][0]=-l/2}up(e,t)}}function C7(e,t){if(!(!((h=e.length)>0)||!((d=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,d,h;n<d;++n){for(var l=0,_=0,S=0;l<h;++l){for(var E=e[t[l]],A=E[n][1]||0,M=E[n-1][1]||0,L=(A-M)/2,U=0;U<l;++U){var N=e[t[U]],B=N[n][1]||0,Z=N[n-1][1]||0;L+=B-Z}_+=A,S+=L*A}s[n-1][1]+=s[n-1][0]=r,_&&(r-=S/_)}s[n-1][1]+=s[n-1][0]=r,up(e,t)}}function sg(e){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sg(e)}var M7=["type","size","sizeType"];function V2(){return V2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V2.apply(this,arguments)}function hM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hM(Object(r),!0).forEach(function(n){I7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I7(e,t,r){return t=k7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k7(e){var t=O7(e,"string");return sg(t)=="symbol"?t:t+""}function O7(e,t){if(sg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D7(e,t){if(e==null)return{};var r=R7(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function R7(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var HR={symbolCircle:HP,symbolCross:t7,symbolDiamond:n7,symbolSquare:i7,symbolStar:l7,symbolTriangle:u7,symbolWye:h7},z7=Math.PI/180,j7=function(t){var r="symbol".concat(q_(t));return HR[r]||HP},L7=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*z7;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},B7=function(t,r){HR["symbol".concat(q_(t))]=r},ZP=function(t){var r=t.type,n=r===void 0?"circle":r,s=t.size,d=s===void 0?64:s,h=t.sizeType,l=h===void 0?"area":h,_=D7(t,M7),S=fM(fM({},_),{},{type:n,size:d,sizeType:l}),E=function(){var B=j7(n),Z=f7().type(B).size(L7(d,l,n));return Z()},A=S.className,M=S.cx,L=S.cy,U=$r(S,!0);return M===+M&&L===+L&&d===+d?ze.createElement("path",V2({},U,{className:Wr("recharts-symbols",A),transform:"translate(".concat(M,", ").concat(L,")"),d:E()})):null};ZP.registerSymbol=B7;function cp(e){"@babel/helpers - typeof";return cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cp(e)}function U2(){return U2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U2.apply(this,arguments)}function dM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function N7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dM(Object(r),!0).forEach(function(n){lg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KR(n.key),n)}}function V7(e,t,r){return t&&$7(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function U7(e,t,r){return t=Fv(t),q7(e,ZR()?Reflect.construct(t,r||[],Fv(e).constructor):t.apply(e,r))}function q7(e,t){if(t&&(cp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W7(e)}function W7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZR=function(){return!!e})()}function Fv(e){return Fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fv(e)}function G7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q2(e,t)}function q2(e,t){return q2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},q2(e,t)}function lg(e,t,r){return t=KR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KR(e){var t=H7(e,"string");return cp(t)=="symbol"?t:t+""}function H7(e,t){if(cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Is=32,KP=(function(e){function t(){return F7(this,t),U7(this,t,arguments)}return G7(t,e),V7(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,d=Is/2,h=Is/6,l=Is/3,_=n.inactive?s:n.color;if(n.type==="plainline")return ze.createElement("line",{strokeWidth:4,fill:"none",stroke:_,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:d,x2:Is,y2:d,className:"recharts-legend-icon"});if(n.type==="line")return ze.createElement("path",{strokeWidth:4,fill:"none",stroke:_,d:"M0,".concat(d,"h").concat(l,`
            A`).concat(h,",").concat(h,",0,1,1,").concat(2*l,",").concat(d,`
            H`).concat(Is,"M").concat(2*l,",").concat(d,`
            A`).concat(h,",").concat(h,",0,1,1,").concat(l,",").concat(d),className:"recharts-legend-icon"});if(n.type==="rect")return ze.createElement("path",{stroke:"none",fill:_,d:"M0,".concat(Is/8,"h").concat(Is,"v").concat(Is*3/4,"h").concat(-Is,"z"),className:"recharts-legend-icon"});if(ze.isValidElement(n.legendIcon)){var S=N7({},n);return delete S.legendIcon,ze.cloneElement(n.legendIcon,S)}return ze.createElement(ZP,{fill:_,cx:d,cy:d,size:Is,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,d=s.payload,h=s.iconSize,l=s.layout,_=s.formatter,S=s.inactiveColor,E={x:0,y:0,width:Is,height:Is},A={display:l==="horizontal"?"inline-block":"block",marginRight:10},M={display:"inline-block",verticalAlign:"middle",marginRight:4};return d.map(function(L,U){var N=L.formatter||_,B=Wr(lg(lg({"recharts-legend-item":!0},"legend-item-".concat(U),!0),"inactive",L.inactive));if(L.type==="none")return null;var Z=Mr(L.value)?null:L.value;nc(!Mr(L.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var J=L.inactive?S:L.color;return ze.createElement("li",U2({className:B,style:A,key:"legend-item-".concat(U)},Rv(n.props,L,U)),ze.createElement(j2,{width:h,height:h,viewBox:E,style:M},n.renderIcon(L)),ze.createElement("span",{className:"recharts-legend-item-text",style:{color:J}},N?N(Z,L,U):Z))})}},{key:"render",value:function(){var n=this.props,s=n.payload,d=n.layout,h=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:d==="horizontal"?h:"left"};return ze.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(Pe.PureComponent);lg(KP,"displayName","Legend");lg(KP,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var P1,pM;function Z7(){if(pM)return P1;pM=1;var e=$_();function t(){this.__data__=new e,this.size=0}return P1=t,P1}var T1,mM;function K7(){if(mM)return T1;mM=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return T1=e,T1}var A1,gM;function X7(){if(gM)return A1;gM=1;function e(t){return this.__data__.get(t)}return A1=e,A1}var E1,yM;function Y7(){if(yM)return E1;yM=1;function e(t){return this.__data__.has(t)}return E1=e,E1}var C1,vM;function J7(){if(vM)return C1;vM=1;var e=$_(),t=NP(),r=FP(),n=200;function s(d,h){var l=this.__data__;if(l instanceof e){var _=l.__data__;if(!t||_.length<n-1)return _.push([d,h]),this.size=++l.size,this;l=this.__data__=new r(_)}return l.set(d,h),this.size=l.size,this}return C1=s,C1}var M1,_M;function XR(){if(_M)return M1;_M=1;var e=$_(),t=Z7(),r=K7(),n=X7(),s=Y7(),d=J7();function h(l){var _=this.__data__=new e(l);this.size=_.size}return h.prototype.clear=t,h.prototype.delete=r,h.prototype.get=n,h.prototype.has=s,h.prototype.set=d,M1=h,M1}var I1,xM;function Q7(){if(xM)return I1;xM=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return I1=t,I1}var k1,bM;function e9(){if(bM)return k1;bM=1;function e(t){return this.__data__.has(t)}return k1=e,k1}var O1,wM;function YR(){if(wM)return O1;wM=1;var e=FP(),t=Q7(),r=e9();function n(s){var d=-1,h=s==null?0:s.length;for(this.__data__=new e;++d<h;)this.add(s[d])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,O1=n,O1}var D1,SM;function JR(){if(SM)return D1;SM=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(r(t[n],n,t))return!0;return!1}return D1=e,D1}var R1,PM;function QR(){if(PM)return R1;PM=1;function e(t,r){return t.has(r)}return R1=e,R1}var z1,TM;function e5(){if(TM)return z1;TM=1;var e=YR(),t=JR(),r=QR(),n=1,s=2;function d(h,l,_,S,E,A){var M=_&n,L=h.length,U=l.length;if(L!=U&&!(M&&U>L))return!1;var N=A.get(h),B=A.get(l);if(N&&B)return N==l&&B==h;var Z=-1,J=!0,Q=_&s?new e:void 0;for(A.set(h,l),A.set(l,h);++Z<L;){var ie=h[Z],H=l[Z];if(S)var X=M?S(H,ie,Z,l,h,A):S(ie,H,Z,h,l,A);if(X!==void 0){if(X)continue;J=!1;break}if(Q){if(!t(l,function(se,fe){if(!r(Q,fe)&&(ie===se||E(ie,se,_,S,A)))return Q.push(fe)})){J=!1;break}}else if(!(ie===H||E(ie,H,_,S,A))){J=!1;break}}return A.delete(h),A.delete(l),J}return z1=d,z1}var j1,AM;function t9(){if(AM)return j1;AM=1;var e=du(),t=e.Uint8Array;return j1=t,j1}var L1,EM;function r9(){if(EM)return L1;EM=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s,d){n[++r]=[d,s]}),n}return L1=e,L1}var B1,CM;function XP(){if(CM)return B1;CM=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s){n[++r]=s}),n}return B1=e,B1}var N1,MM;function n9(){if(MM)return N1;MM=1;var e=Zg(),t=t9(),r=BP(),n=e5(),s=r9(),d=XP(),h=1,l=2,_="[object Boolean]",S="[object Date]",E="[object Error]",A="[object Map]",M="[object Number]",L="[object RegExp]",U="[object Set]",N="[object String]",B="[object Symbol]",Z="[object ArrayBuffer]",J="[object DataView]",Q=e?e.prototype:void 0,ie=Q?Q.valueOf:void 0;function H(X,se,fe,Se,Be,xe,$e){switch(fe){case J:if(X.byteLength!=se.byteLength||X.byteOffset!=se.byteOffset)return!1;X=X.buffer,se=se.buffer;case Z:return!(X.byteLength!=se.byteLength||!xe(new t(X),new t(se)));case _:case S:case M:return r(+X,+se);case E:return X.name==se.name&&X.message==se.message;case L:case N:return X==se+"";case A:var Fe=s;case U:var Ke=Se&h;if(Fe||(Fe=d),X.size!=se.size&&!Ke)return!1;var Xe=$e.get(X);if(Xe)return Xe==se;Se|=l,$e.set(X,se);var rt=n(Fe(X),Fe(se),Se,Be,xe,$e);return $e.delete(X),rt;case B:if(ie)return ie.call(X)==ie.call(se)}return!1}return N1=H,N1}var F1,IM;function t5(){if(IM)return F1;IM=1;function e(t,r){for(var n=-1,s=r.length,d=t.length;++n<s;)t[d+n]=r[n];return t}return F1=e,F1}var $1,kM;function i9(){if(kM)return $1;kM=1;var e=t5(),t=Ao();function r(n,s,d){var h=s(n);return t(n)?h:e(h,d(n))}return $1=r,$1}var V1,OM;function a9(){if(OM)return V1;OM=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,d=0,h=[];++n<s;){var l=t[n];r(l,n,t)&&(h[d++]=l)}return h}return V1=e,V1}var U1,DM;function o9(){if(DM)return U1;DM=1;function e(){return[]}return U1=e,U1}var q1,RM;function s9(){if(RM)return q1;RM=1;var e=a9(),t=o9(),r=Object.prototype,n=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,d=s?function(h){return h==null?[]:(h=Object(h),e(s(h),function(l){return n.call(h,l)}))}:t;return q1=d,q1}var W1,zM;function l9(){if(zM)return W1;zM=1;function e(t,r){for(var n=-1,s=Array(t);++n<t;)s[n]=r(n);return s}return W1=e,W1}var G1,jM;function u9(){if(jM)return G1;jM=1;var e=cc(),t=hc(),r="[object Arguments]";function n(s){return t(s)&&e(s)==r}return G1=n,G1}var H1,LM;function YP(){if(LM)return H1;LM=1;var e=u9(),t=hc(),r=Object.prototype,n=r.hasOwnProperty,s=r.propertyIsEnumerable,d=e((function(){return arguments})())?e:function(h){return t(h)&&n.call(h,"callee")&&!s.call(h,"callee")};return H1=d,H1}var Vm={exports:{}},Z1,BM;function c9(){if(BM)return Z1;BM=1;function e(){return!1}return Z1=e,Z1}Vm.exports;var NM;function r5(){return NM||(NM=1,(function(e,t){var r=du(),n=c9(),s=t&&!t.nodeType&&t,d=s&&!0&&e&&!e.nodeType&&e,h=d&&d.exports===s,l=h?r.Buffer:void 0,_=l?l.isBuffer:void 0,S=_||n;e.exports=S})(Vm,Vm.exports)),Vm.exports}var K1,FM;function JP(){if(FM)return K1;FM=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,s){var d=typeof n;return s=s??e,!!s&&(d=="number"||d!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<s}return K1=r,K1}var X1,$M;function QP(){if($M)return X1;$M=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return X1=t,X1}var Y1,VM;function h9(){if(VM)return Y1;VM=1;var e=cc(),t=QP(),r=hc(),n="[object Arguments]",s="[object Array]",d="[object Boolean]",h="[object Date]",l="[object Error]",_="[object Function]",S="[object Map]",E="[object Number]",A="[object Object]",M="[object RegExp]",L="[object Set]",U="[object String]",N="[object WeakMap]",B="[object ArrayBuffer]",Z="[object DataView]",J="[object Float32Array]",Q="[object Float64Array]",ie="[object Int8Array]",H="[object Int16Array]",X="[object Int32Array]",se="[object Uint8Array]",fe="[object Uint8ClampedArray]",Se="[object Uint16Array]",Be="[object Uint32Array]",xe={};xe[J]=xe[Q]=xe[ie]=xe[H]=xe[X]=xe[se]=xe[fe]=xe[Se]=xe[Be]=!0,xe[n]=xe[s]=xe[B]=xe[d]=xe[Z]=xe[h]=xe[l]=xe[_]=xe[S]=xe[E]=xe[A]=xe[M]=xe[L]=xe[U]=xe[N]=!1;function $e(Fe){return r(Fe)&&t(Fe.length)&&!!xe[e(Fe)]}return Y1=$e,Y1}var J1,UM;function n5(){if(UM)return J1;UM=1;function e(t){return function(r){return t(r)}}return J1=e,J1}var Um={exports:{}};Um.exports;var qM;function f9(){return qM||(qM=1,(function(e,t){var r=SR(),n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,d=s&&s.exports===n,h=d&&r.process,l=(function(){try{var _=s&&s.require&&s.require("util").types;return _||h&&h.binding&&h.binding("util")}catch{}})();e.exports=l})(Um,Um.exports)),Um.exports}var Q1,WM;function i5(){if(WM)return Q1;WM=1;var e=h9(),t=n5(),r=f9(),n=r&&r.isTypedArray,s=n?t(n):e;return Q1=s,Q1}var eb,GM;function d9(){if(GM)return eb;GM=1;var e=l9(),t=YP(),r=Ao(),n=r5(),s=JP(),d=i5(),h=Object.prototype,l=h.hasOwnProperty;function _(S,E){var A=r(S),M=!A&&t(S),L=!A&&!M&&n(S),U=!A&&!M&&!L&&d(S),N=A||M||L||U,B=N?e(S.length,String):[],Z=B.length;for(var J in S)(E||l.call(S,J))&&!(N&&(J=="length"||L&&(J=="offset"||J=="parent")||U&&(J=="buffer"||J=="byteLength"||J=="byteOffset")||s(J,Z)))&&B.push(J);return B}return eb=_,eb}var tb,HM;function p9(){if(HM)return tb;HM=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,s=typeof n=="function"&&n.prototype||e;return r===s}return tb=t,tb}var rb,ZM;function a5(){if(ZM)return rb;ZM=1;function e(t,r){return function(n){return t(r(n))}}return rb=e,rb}var nb,KM;function m9(){if(KM)return nb;KM=1;var e=a5(),t=e(Object.keys,Object);return nb=t,nb}var ib,XM;function g9(){if(XM)return ib;XM=1;var e=p9(),t=m9(),r=Object.prototype,n=r.hasOwnProperty;function s(d){if(!e(d))return t(d);var h=[];for(var l in Object(d))n.call(d,l)&&l!="constructor"&&h.push(l);return h}return ib=s,ib}var ab,YM;function Yg(){if(YM)return ab;YM=1;var e=LP(),t=QP();function r(n){return n!=null&&t(n.length)&&!e(n)}return ab=r,ab}var ob,JM;function Z_(){if(JM)return ob;JM=1;var e=d9(),t=g9(),r=Yg();function n(s){return r(s)?e(s):t(s)}return ob=n,ob}var sb,QM;function y9(){if(QM)return sb;QM=1;var e=i9(),t=s9(),r=Z_();function n(s){return e(s,r,t)}return sb=n,sb}var lb,eI;function v9(){if(eI)return lb;eI=1;var e=y9(),t=1,r=Object.prototype,n=r.hasOwnProperty;function s(d,h,l,_,S,E){var A=l&t,M=e(d),L=M.length,U=e(h),N=U.length;if(L!=N&&!A)return!1;for(var B=L;B--;){var Z=M[B];if(!(A?Z in h:n.call(h,Z)))return!1}var J=E.get(d),Q=E.get(h);if(J&&Q)return J==h&&Q==d;var ie=!0;E.set(d,h),E.set(h,d);for(var H=A;++B<L;){Z=M[B];var X=d[Z],se=h[Z];if(_)var fe=A?_(se,X,Z,h,d,E):_(X,se,Z,d,h,E);if(!(fe===void 0?X===se||S(X,se,l,_,E):fe)){ie=!1;break}H||(H=Z=="constructor")}if(ie&&!H){var Se=d.constructor,Be=h.constructor;Se!=Be&&"constructor"in d&&"constructor"in h&&!(typeof Se=="function"&&Se instanceof Se&&typeof Be=="function"&&Be instanceof Be)&&(ie=!1)}return E.delete(d),E.delete(h),ie}return lb=s,lb}var ub,tI;function _9(){if(tI)return ub;tI=1;var e=Vf(),t=du(),r=e(t,"DataView");return ub=r,ub}var cb,rI;function x9(){if(rI)return cb;rI=1;var e=Vf(),t=du(),r=e(t,"Promise");return cb=r,cb}var hb,nI;function o5(){if(nI)return hb;nI=1;var e=Vf(),t=du(),r=e(t,"Set");return hb=r,hb}var fb,iI;function b9(){if(iI)return fb;iI=1;var e=Vf(),t=du(),r=e(t,"WeakMap");return fb=r,fb}var db,aI;function w9(){if(aI)return db;aI=1;var e=_9(),t=NP(),r=x9(),n=o5(),s=b9(),d=cc(),h=PR(),l="[object Map]",_="[object Object]",S="[object Promise]",E="[object Set]",A="[object WeakMap]",M="[object DataView]",L=h(e),U=h(t),N=h(r),B=h(n),Z=h(s),J=d;return(e&&J(new e(new ArrayBuffer(1)))!=M||t&&J(new t)!=l||r&&J(r.resolve())!=S||n&&J(new n)!=E||s&&J(new s)!=A)&&(J=function(Q){var ie=d(Q),H=ie==_?Q.constructor:void 0,X=H?h(H):"";if(X)switch(X){case L:return M;case U:return l;case N:return S;case B:return E;case Z:return A}return ie}),db=J,db}var pb,oI;function S9(){if(oI)return pb;oI=1;var e=XR(),t=e5(),r=n9(),n=v9(),s=w9(),d=Ao(),h=r5(),l=i5(),_=1,S="[object Arguments]",E="[object Array]",A="[object Object]",M=Object.prototype,L=M.hasOwnProperty;function U(N,B,Z,J,Q,ie){var H=d(N),X=d(B),se=H?E:s(N),fe=X?E:s(B);se=se==S?A:se,fe=fe==S?A:fe;var Se=se==A,Be=fe==A,xe=se==fe;if(xe&&h(N)){if(!h(B))return!1;H=!0,Se=!1}if(xe&&!Se)return ie||(ie=new e),H||l(N)?t(N,B,Z,J,Q,ie):r(N,B,se,Z,J,Q,ie);if(!(Z&_)){var $e=Se&&L.call(N,"__wrapped__"),Fe=Be&&L.call(B,"__wrapped__");if($e||Fe){var Ke=$e?N.value():N,Xe=Fe?B.value():B;return ie||(ie=new e),Q(Ke,Xe,Z,J,ie)}}return xe?(ie||(ie=new e),n(N,B,Z,J,Q,ie)):!1}return pb=U,pb}var mb,sI;function eT(){if(sI)return mb;sI=1;var e=S9(),t=hc();function r(n,s,d,h,l){return n===s?!0:n==null||s==null||!t(n)&&!t(s)?n!==n&&s!==s:e(n,s,d,h,r,l)}return mb=r,mb}var gb,lI;function P9(){if(lI)return gb;lI=1;var e=XR(),t=eT(),r=1,n=2;function s(d,h,l,_){var S=l.length,E=S,A=!_;if(d==null)return!E;for(d=Object(d);S--;){var M=l[S];if(A&&M[2]?M[1]!==d[M[0]]:!(M[0]in d))return!1}for(;++S<E;){M=l[S];var L=M[0],U=d[L],N=M[1];if(A&&M[2]){if(U===void 0&&!(L in d))return!1}else{var B=new e;if(_)var Z=_(U,N,L,d,h,B);if(!(Z===void 0?t(N,U,r|n,_,B):Z))return!1}}return!0}return gb=s,gb}var yb,uI;function s5(){if(uI)return yb;uI=1;var e=lh();function t(r){return r===r&&!e(r)}return yb=t,yb}var vb,cI;function T9(){if(cI)return vb;cI=1;var e=s5(),t=Z_();function r(n){for(var s=t(n),d=s.length;d--;){var h=s[d],l=n[h];s[d]=[h,l,e(l)]}return s}return vb=r,vb}var _b,hI;function l5(){if(hI)return _b;hI=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return _b=e,_b}var xb,fI;function A9(){if(fI)return xb;fI=1;var e=P9(),t=T9(),r=l5();function n(s){var d=t(s);return d.length==1&&d[0][2]?r(d[0][0],d[0][1]):function(h){return h===s||e(h,s,d)}}return xb=n,xb}var bb,dI;function E9(){if(dI)return bb;dI=1;function e(t,r){return t!=null&&r in Object(t)}return bb=e,bb}var wb,pI;function C9(){if(pI)return wb;pI=1;var e=ER(),t=YP(),r=Ao(),n=JP(),s=QP(),d=U_();function h(l,_,S){_=e(_,l);for(var E=-1,A=_.length,M=!1;++E<A;){var L=d(_[E]);if(!(M=l!=null&&S(l,L)))break;l=l[L]}return M||++E!=A?M:(A=l==null?0:l.length,!!A&&s(A)&&n(L,A)&&(r(l)||t(l)))}return wb=h,wb}var Sb,mI;function M9(){if(mI)return Sb;mI=1;var e=E9(),t=C9();function r(n,s){return n!=null&&t(n,s,e)}return Sb=r,Sb}var Pb,gI;function I9(){if(gI)return Pb;gI=1;var e=eT(),t=CR(),r=M9(),n=jP(),s=s5(),d=l5(),h=U_(),l=1,_=2;function S(E,A){return n(E)&&s(A)?d(h(E),A):function(M){var L=t(M,E);return L===void 0&&L===A?r(M,E):e(A,L,l|_)}}return Pb=S,Pb}var Tb,yI;function Lp(){if(yI)return Tb;yI=1;function e(t){return t}return Tb=e,Tb}var Ab,vI;function k9(){if(vI)return Ab;vI=1;function e(t){return function(r){return r==null?void 0:r[t]}}return Ab=e,Ab}var Eb,_I;function O9(){if(_I)return Eb;_I=1;var e=VP();function t(r){return function(n){return e(n,r)}}return Eb=t,Eb}var Cb,xI;function D9(){if(xI)return Cb;xI=1;var e=k9(),t=O9(),r=jP(),n=U_();function s(d){return r(d)?e(n(d)):t(d)}return Cb=s,Cb}var Mb,bI;function uh(){if(bI)return Mb;bI=1;var e=A9(),t=I9(),r=Lp(),n=Ao(),s=D9();function d(h){return typeof h=="function"?h:h==null?r:typeof h=="object"?n(h)?t(h[0],h[1]):e(h):s(h)}return Mb=d,Mb}var Ib,wI;function u5(){if(wI)return Ib;wI=1;function e(t,r,n,s){for(var d=t.length,h=n+(s?1:-1);s?h--:++h<d;)if(r(t[h],h,t))return h;return-1}return Ib=e,Ib}var kb,SI;function R9(){if(SI)return kb;SI=1;function e(t){return t!==t}return kb=e,kb}var Ob,PI;function z9(){if(PI)return Ob;PI=1;function e(t,r,n){for(var s=n-1,d=t.length;++s<d;)if(t[s]===r)return s;return-1}return Ob=e,Ob}var Db,TI;function j9(){if(TI)return Db;TI=1;var e=u5(),t=R9(),r=z9();function n(s,d,h){return d===d?r(s,d,h):e(s,t,h)}return Db=n,Db}var Rb,AI;function L9(){if(AI)return Rb;AI=1;var e=j9();function t(r,n){var s=r==null?0:r.length;return!!s&&e(r,n,0)>-1}return Rb=t,Rb}var zb,EI;function B9(){if(EI)return zb;EI=1;function e(t,r,n){for(var s=-1,d=t==null?0:t.length;++s<d;)if(n(r,t[s]))return!0;return!1}return zb=e,zb}var jb,CI;function N9(){if(CI)return jb;CI=1;function e(){}return jb=e,jb}var Lb,MI;function F9(){if(MI)return Lb;MI=1;var e=o5(),t=N9(),r=XP(),n=1/0,s=e&&1/r(new e([,-0]))[1]==n?function(d){return new e(d)}:t;return Lb=s,Lb}var Bb,II;function $9(){if(II)return Bb;II=1;var e=YR(),t=L9(),r=B9(),n=QR(),s=F9(),d=XP(),h=200;function l(_,S,E){var A=-1,M=t,L=_.length,U=!0,N=[],B=N;if(E)U=!1,M=r;else if(L>=h){var Z=S?null:s(_);if(Z)return d(Z);U=!1,M=n,B=new e}else B=S?[]:N;e:for(;++A<L;){var J=_[A],Q=S?S(J):J;if(J=E||J!==0?J:0,U&&Q===Q){for(var ie=B.length;ie--;)if(B[ie]===Q)continue e;S&&B.push(Q),N.push(J)}else M(B,Q,E)||(B!==N&&B.push(Q),N.push(J))}return N}return Bb=l,Bb}var Nb,kI;function V9(){if(kI)return Nb;kI=1;var e=uh(),t=$9();function r(n,s){return n&&n.length?t(n,e(s,2)):[]}return Nb=r,Nb}var U9=V9();const OI=fn(U9);function c5(e,t,r){return t===!0?OI(e,r):Mr(t)?OI(e,t):e}function hp(e){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hp(e)}var q9=["ref"];function DI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DI(Object(r),!0).forEach(function(n){K_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f5(n.key),n)}}function G9(e,t,r){return t&&RI(e.prototype,t),r&&RI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function H9(e,t,r){return t=$v(t),Z9(e,h5()?Reflect.construct(t,r||[],$v(e).constructor):t.apply(e,r))}function Z9(e,t){if(t&&(hp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K9(e)}function K9(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h5=function(){return!!e})()}function $v(e){return $v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$v(e)}function X9(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W2(e,t)}function W2(e,t){return W2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},W2(e,t)}function K_(e,t,r){return t=f5(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f5(e){var t=Y9(e,"string");return hp(t)=="symbol"?t:t+""}function Y9(e,t){if(hp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function J9(e,t){if(e==null)return{};var r=Q9(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Q9(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function eU(e){return e.value}function tU(e,t){if(ze.isValidElement(e))return ze.cloneElement(e,t);if(typeof e=="function")return ze.createElement(e,t);t.ref;var r=J9(t,q9);return ze.createElement(KP,r)}var zI=1,If=(function(e){function t(){var r;W9(this,t);for(var n=arguments.length,s=new Array(n),d=0;d<n;d++)s[d]=arguments[d];return r=H9(this,t,[].concat(s)),K_(r,"lastBoundingBox",{width:-1,height:-1}),r}return X9(t,e),G9(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>zI||Math.abs(s.height-this.lastBoundingBox.height)>zI)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Xu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,d=s.layout,h=s.align,l=s.verticalAlign,_=s.margin,S=s.chartWidth,E=s.chartHeight,A,M;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(h==="center"&&d==="vertical"){var L=this.getBBoxSnapshot();A={left:((S||0)-L.width)/2}}else A=h==="right"?{right:_&&_.right||0}:{left:_&&_.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var U=this.getBBoxSnapshot();M={top:((E||0)-U.height)/2}}else M=l==="bottom"?{bottom:_&&_.bottom||0}:{top:_&&_.top||0};return Xu(Xu({},A),M)}},{key:"render",value:function(){var n=this,s=this.props,d=s.content,h=s.width,l=s.height,_=s.wrapperStyle,S=s.payloadUniqBy,E=s.payload,A=Xu(Xu({position:"absolute",width:h||"auto",height:l||"auto"},this.getDefaultPosition(_)),_);return ze.createElement("div",{className:"recharts-legend-wrapper",style:A,ref:function(L){n.wrapperNode=L}},tU(d,Xu(Xu({},this.props),{},{payload:c5(E,S,eU)})))}}],[{key:"getWithHeight",value:function(n,s){var d=Xu(Xu({},this.defaultProps),n.props),h=d.layout;return h==="vertical"&&Ot(n.props.height)?{height:n.props.height}:h==="horizontal"?{width:n.props.width||s}:null}}])})(Pe.PureComponent);K_(If,"displayName","Legend");K_(If,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Fb,jI;function rU(){if(jI)return Fb;jI=1;var e=Zg(),t=YP(),r=Ao(),n=e?e.isConcatSpreadable:void 0;function s(d){return r(d)||t(d)||!!(n&&d&&d[n])}return Fb=s,Fb}var $b,LI;function d5(){if(LI)return $b;LI=1;var e=t5(),t=rU();function r(n,s,d,h,l){var _=-1,S=n.length;for(d||(d=t),l||(l=[]);++_<S;){var E=n[_];s>0&&d(E)?s>1?r(E,s-1,d,h,l):e(l,E):h||(l[l.length]=E)}return l}return $b=r,$b}var Vb,BI;function nU(){if(BI)return Vb;BI=1;function e(t){return function(r,n,s){for(var d=-1,h=Object(r),l=s(r),_=l.length;_--;){var S=l[t?_:++d];if(n(h[S],S,h)===!1)break}return r}}return Vb=e,Vb}var Ub,NI;function iU(){if(NI)return Ub;NI=1;var e=nU(),t=e();return Ub=t,Ub}var qb,FI;function p5(){if(FI)return qb;FI=1;var e=iU(),t=Z_();function r(n,s){return n&&e(n,s,t)}return qb=r,qb}var Wb,$I;function aU(){if($I)return Wb;$I=1;var e=Yg();function t(r,n){return function(s,d){if(s==null)return s;if(!e(s))return r(s,d);for(var h=s.length,l=n?h:-1,_=Object(s);(n?l--:++l<h)&&d(_[l],l,_)!==!1;);return s}}return Wb=t,Wb}var Gb,VI;function tT(){if(VI)return Gb;VI=1;var e=p5(),t=aU(),r=t(e);return Gb=r,Gb}var Hb,UI;function m5(){if(UI)return Hb;UI=1;var e=tT(),t=Yg();function r(n,s){var d=-1,h=t(n)?Array(n.length):[];return e(n,function(l,_,S){h[++d]=s(l,_,S)}),h}return Hb=r,Hb}var Zb,qI;function oU(){if(qI)return Zb;qI=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return Zb=e,Zb}var Kb,WI;function sU(){if(WI)return Kb;WI=1;var e=zp();function t(r,n){if(r!==n){var s=r!==void 0,d=r===null,h=r===r,l=e(r),_=n!==void 0,S=n===null,E=n===n,A=e(n);if(!S&&!A&&!l&&r>n||l&&_&&E&&!S&&!A||d&&_&&E||!s&&E||!h)return 1;if(!d&&!l&&!A&&r<n||A&&s&&h&&!d&&!l||S&&s&&h||!_&&h||!E)return-1}return 0}return Kb=t,Kb}var Xb,GI;function lU(){if(GI)return Xb;GI=1;var e=sU();function t(r,n,s){for(var d=-1,h=r.criteria,l=n.criteria,_=h.length,S=s.length;++d<_;){var E=e(h[d],l[d]);if(E){if(d>=S)return E;var A=s[d];return E*(A=="desc"?-1:1)}}return r.index-n.index}return Xb=t,Xb}var Yb,HI;function uU(){if(HI)return Yb;HI=1;var e=$P(),t=VP(),r=uh(),n=m5(),s=oU(),d=n5(),h=lU(),l=Lp(),_=Ao();function S(E,A,M){A.length?A=e(A,function(N){return _(N)?function(B){return t(B,N.length===1?N[0]:N)}:N}):A=[l];var L=-1;A=e(A,d(r));var U=n(E,function(N,B,Z){var J=e(A,function(Q){return Q(N)});return{criteria:J,index:++L,value:N}});return s(U,function(N,B){return h(N,B,M)})}return Yb=S,Yb}var Jb,ZI;function cU(){if(ZI)return Jb;ZI=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return Jb=e,Jb}var Qb,KI;function hU(){if(KI)return Qb;KI=1;var e=cU(),t=Math.max;function r(n,s,d){return s=t(s===void 0?n.length-1:s,0),function(){for(var h=arguments,l=-1,_=t(h.length-s,0),S=Array(_);++l<_;)S[l]=h[s+l];l=-1;for(var E=Array(s+1);++l<s;)E[l]=h[l];return E[s]=d(S),e(n,this,E)}}return Qb=r,Qb}var ew,XI;function fU(){if(XI)return ew;XI=1;function e(t){return function(){return t}}return ew=e,ew}var tw,YI;function g5(){if(YI)return tw;YI=1;var e=Vf(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return tw=t,tw}var rw,JI;function dU(){if(JI)return rw;JI=1;var e=fU(),t=g5(),r=Lp(),n=t?function(s,d){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(d),writable:!0})}:r;return rw=n,rw}var nw,QI;function pU(){if(QI)return nw;QI=1;var e=800,t=16,r=Date.now;function n(s){var d=0,h=0;return function(){var l=r(),_=t-(l-h);if(h=l,_>0){if(++d>=e)return arguments[0]}else d=0;return s.apply(void 0,arguments)}}return nw=n,nw}var iw,ek;function mU(){if(ek)return iw;ek=1;var e=dU(),t=pU(),r=t(e);return iw=r,iw}var aw,tk;function gU(){if(tk)return aw;tk=1;var e=Lp(),t=hU(),r=mU();function n(s,d){return r(t(s,d,e),s+"")}return aw=n,aw}var ow,rk;function X_(){if(rk)return ow;rk=1;var e=BP(),t=Yg(),r=JP(),n=lh();function s(d,h,l){if(!n(l))return!1;var _=typeof h;return(_=="number"?t(l)&&r(h,l.length):_=="string"&&h in l)?e(l[h],d):!1}return ow=s,ow}var sw,nk;function yU(){if(nk)return sw;nk=1;var e=d5(),t=uU(),r=gU(),n=X_(),s=r(function(d,h){if(d==null)return[];var l=h.length;return l>1&&n(d,h[0],h[1])?h=[]:l>2&&n(h[0],h[1],h[2])&&(h=[h[0]]),t(d,e(h,1),[])});return sw=s,sw}var vU=yU();const rT=fn(vU);function ug(e){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ug(e)}function G2(){return G2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G2.apply(this,arguments)}function _U(e,t){return SU(e)||wU(e,t)||bU(e,t)||xU()}function xU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bU(e,t){if(e){if(typeof e=="string")return ik(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ik(e,t)}}function ik(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wU(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,S=!1;try{if(d=(r=r.call(e)).next,t!==0)for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){S=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(S)throw s}}return l}}function SU(e){if(Array.isArray(e))return e}function ak(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ak(Object(r),!0).forEach(function(n){PU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ak(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PU(e,t,r){return t=TU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TU(e){var t=AU(e,"string");return ug(t)=="symbol"?t:t+""}function AU(e,t){if(ug(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ug(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EU(e){return Array.isArray(e)&&Oi(e[0])&&Oi(e[1])?e.join(" ~ "):e}var CU=function(t){var r=t.separator,n=r===void 0?" : ":r,s=t.contentStyle,d=s===void 0?{}:s,h=t.itemStyle,l=h===void 0?{}:h,_=t.labelStyle,S=_===void 0?{}:_,E=t.payload,A=t.formatter,M=t.itemSorter,L=t.wrapperClassName,U=t.labelClassName,N=t.label,B=t.labelFormatter,Z=t.accessibilityLayer,J=Z===void 0?!1:Z,Q=function(){if(E&&E.length){var $e={padding:0,margin:0},Fe=(M?rT(E,M):E).map(function(Ke,Xe){if(Ke.type==="none")return null;var rt=lw({display:"block",paddingTop:4,paddingBottom:4,color:Ke.color||"#000"},l),Qe=Ke.formatter||A||EU,We=Ke.value,tt=Ke.name,nt=We,Ae=tt;if(Qe&&nt!=null&&Ae!=null){var Ne=Qe(We,tt,Ke,Xe,E);if(Array.isArray(Ne)){var yt=_U(Ne,2);nt=yt[0],Ae=yt[1]}else nt=Ne}return ze.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Xe),style:rt},Oi(Ae)?ze.createElement("span",{className:"recharts-tooltip-item-name"},Ae):null,Oi(Ae)?ze.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ze.createElement("span",{className:"recharts-tooltip-item-value"},nt),ze.createElement("span",{className:"recharts-tooltip-item-unit"},Ke.unit||""))});return ze.createElement("ul",{className:"recharts-tooltip-item-list",style:$e},Fe)}return null},ie=lw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},d),H=lw({margin:0},S),X=!Dr(N),se=X?N:"",fe=Wr("recharts-default-tooltip",L),Se=Wr("recharts-tooltip-label",U);X&&B&&E!==void 0&&E!==null&&(se=B(N,E));var Be=J?{role:"status","aria-live":"assertive"}:{};return ze.createElement("div",G2({className:fe,style:ie},Be),ze.createElement("p",{className:Se,style:H},ze.isValidElement(se)?se:"".concat(se)),Q())};function cg(e){"@babel/helpers - typeof";return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cg(e)}function rv(e,t,r){return t=MU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MU(e){var t=IU(e,"string");return cg(t)=="symbol"?t:t+""}function IU(e,t){if(cg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Im="recharts-tooltip-wrapper",kU={visibility:"hidden"};function OU(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return Wr(Im,rv(rv(rv(rv({},"".concat(Im,"-right"),Ot(r)&&t&&Ot(t.x)&&r>=t.x),"".concat(Im,"-left"),Ot(r)&&t&&Ot(t.x)&&r<t.x),"".concat(Im,"-bottom"),Ot(n)&&t&&Ot(t.y)&&n>=t.y),"".concat(Im,"-top"),Ot(n)&&t&&Ot(t.y)&&n<t.y))}function ok(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,d=e.position,h=e.reverseDirection,l=e.tooltipDimension,_=e.viewBox,S=e.viewBoxDimension;if(d&&Ot(d[n]))return d[n];var E=r[n]-l-s,A=r[n]+s;if(t[n])return h[n]?E:A;if(h[n]){var M=E,L=_[n];return M<L?Math.max(A,_[n]):Math.max(E,_[n])}var U=A+l,N=_[n]+S;return U>N?Math.max(E,_[n]):Math.max(A,_[n])}function DU(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function RU(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,s=e.position,d=e.reverseDirection,h=e.tooltipBox,l=e.useTranslate3d,_=e.viewBox,S,E,A;return h.height>0&&h.width>0&&r?(E=ok({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:d,tooltipDimension:h.width,viewBox:_,viewBoxDimension:_.width}),A=ok({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:d,tooltipDimension:h.height,viewBox:_,viewBoxDimension:_.height}),S=DU({translateX:E,translateY:A,useTranslate3d:l})):S=kU,{cssProperties:S,cssClasses:OU({translateX:E,translateY:A,coordinate:r})}}function fp(e){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fp(e)}function sk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sk(Object(r),!0).forEach(function(n){Z2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v5(n.key),n)}}function LU(e,t,r){return t&&jU(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function BU(e,t,r){return t=Vv(t),NU(e,y5()?Reflect.construct(t,r||[],Vv(e).constructor):t.apply(e,r))}function NU(e,t){if(t&&(fp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FU(e)}function FU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y5=function(){return!!e})()}function Vv(e){return Vv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vv(e)}function $U(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H2(e,t)}function H2(e,t){return H2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},H2(e,t)}function Z2(e,t,r){return t=v5(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v5(e){var t=VU(e,"string");return fp(t)=="symbol"?t:t+""}function VU(e,t){if(fp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var uk=1,UU=(function(e){function t(){var r;zU(this,t);for(var n=arguments.length,s=new Array(n),d=0;d<n;d++)s[d]=arguments[d];return r=BU(this,t,[].concat(s)),Z2(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Z2(r,"handleKeyDown",function(h){if(h.key==="Escape"){var l,_,S,E;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(_=r.props.coordinate)===null||_===void 0?void 0:_.x)!==null&&l!==void 0?l:0,y:(S=(E=r.props.coordinate)===null||E===void 0?void 0:E.y)!==null&&S!==void 0?S:0}})}}),r}return $U(t,e),LU(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>uk||Math.abs(n.height-this.state.lastBoundingBox.height)>uk)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,d=s.active,h=s.allowEscapeViewBox,l=s.animationDuration,_=s.animationEasing,S=s.children,E=s.coordinate,A=s.hasPayload,M=s.isAnimationActive,L=s.offset,U=s.position,N=s.reverseDirection,B=s.useTranslate3d,Z=s.viewBox,J=s.wrapperStyle,Q=RU({allowEscapeViewBox:h,coordinate:E,offsetTopLeft:L,position:U,reverseDirection:N,tooltipBox:this.state.lastBoundingBox,useTranslate3d:B,viewBox:Z}),ie=Q.cssClasses,H=Q.cssProperties,X=lk(lk({transition:M&&d?"transform ".concat(l,"ms ").concat(_):void 0},H),{},{pointerEvents:"none",visibility:!this.state.dismissed&&d&&A?"visible":"hidden",position:"absolute",top:0,left:0},J);return ze.createElement("div",{tabIndex:-1,className:ie,style:X,ref:function(fe){n.wrapperNode=fe}},S)}}])})(Pe.PureComponent),qU=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Bp={isSsr:qU()};function dp(e){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dp(e)}function ck(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ck(Object(r),!0).forEach(function(n){nT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ck(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x5(n.key),n)}}function HU(e,t,r){return t&&GU(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZU(e,t,r){return t=Uv(t),KU(e,_5()?Reflect.construct(t,r||[],Uv(e).constructor):t.apply(e,r))}function KU(e,t){if(t&&(dp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XU(e)}function XU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_5=function(){return!!e})()}function Uv(e){return Uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Uv(e)}function YU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K2(e,t)}function K2(e,t){return K2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},K2(e,t)}function nT(e,t,r){return t=x5(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x5(e){var t=JU(e,"string");return dp(t)=="symbol"?t:t+""}function JU(e,t){if(dp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function QU(e){return e.dataKey}function eq(e,t){return ze.isValidElement(e)?ze.cloneElement(e,t):typeof e=="function"?ze.createElement(e,t):ze.createElement(CU,t)}var ou=(function(e){function t(){return WU(this,t),ZU(this,t,arguments)}return YU(t,e),HU(t,[{key:"render",value:function(){var n=this,s=this.props,d=s.active,h=s.allowEscapeViewBox,l=s.animationDuration,_=s.animationEasing,S=s.content,E=s.coordinate,A=s.filterNull,M=s.isAnimationActive,L=s.offset,U=s.payload,N=s.payloadUniqBy,B=s.position,Z=s.reverseDirection,J=s.useTranslate3d,Q=s.viewBox,ie=s.wrapperStyle,H=U??[];A&&H.length&&(H=c5(U.filter(function(se){return se.value!=null&&(se.hide!==!0||n.props.includeHidden)}),N,QU));var X=H.length>0;return ze.createElement(UU,{allowEscapeViewBox:h,animationDuration:l,animationEasing:_,isAnimationActive:M,active:d,coordinate:E,hasPayload:X,offset:L,position:B,reverseDirection:Z,useTranslate3d:J,viewBox:Q,wrapperStyle:ie},eq(S,hk(hk({},this.props),{},{payload:H})))}}])})(Pe.PureComponent);nT(ou,"displayName","Tooltip");nT(ou,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Bp.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var uw,fk;function tq(){if(fk)return uw;fk=1;var e=du(),t=function(){return e.Date.now()};return uw=t,uw}var cw,dk;function rq(){if(dk)return cw;dk=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return cw=t,cw}var hw,pk;function nq(){if(pk)return hw;pk=1;var e=rq(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return hw=r,hw}var fw,mk;function b5(){if(mk)return fw;mk=1;var e=nq(),t=lh(),r=zp(),n=NaN,s=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,h=/^0o[0-7]+$/i,l=parseInt;function _(S){if(typeof S=="number")return S;if(r(S))return n;if(t(S)){var E=typeof S.valueOf=="function"?S.valueOf():S;S=t(E)?E+"":E}if(typeof S!="string")return S===0?S:+S;S=e(S);var A=d.test(S);return A||h.test(S)?l(S.slice(2),A?2:8):s.test(S)?n:+S}return fw=_,fw}var dw,gk;function iq(){if(gk)return dw;gk=1;var e=lh(),t=tq(),r=b5(),n="Expected a function",s=Math.max,d=Math.min;function h(l,_,S){var E,A,M,L,U,N,B=0,Z=!1,J=!1,Q=!0;if(typeof l!="function")throw new TypeError(n);_=r(_)||0,e(S)&&(Z=!!S.leading,J="maxWait"in S,M=J?s(r(S.maxWait)||0,_):M,Q="trailing"in S?!!S.trailing:Q);function ie(Fe){var Ke=E,Xe=A;return E=A=void 0,B=Fe,L=l.apply(Xe,Ke),L}function H(Fe){return B=Fe,U=setTimeout(fe,_),Z?ie(Fe):L}function X(Fe){var Ke=Fe-N,Xe=Fe-B,rt=_-Ke;return J?d(rt,M-Xe):rt}function se(Fe){var Ke=Fe-N,Xe=Fe-B;return N===void 0||Ke>=_||Ke<0||J&&Xe>=M}function fe(){var Fe=t();if(se(Fe))return Se(Fe);U=setTimeout(fe,X(Fe))}function Se(Fe){return U=void 0,Q&&E?ie(Fe):(E=A=void 0,L)}function Be(){U!==void 0&&clearTimeout(U),B=0,E=N=A=U=void 0}function xe(){return U===void 0?L:Se(t())}function $e(){var Fe=t(),Ke=se(Fe);if(E=arguments,A=this,N=Fe,Ke){if(U===void 0)return H(N);if(J)return clearTimeout(U),U=setTimeout(fe,_),ie(N)}return U===void 0&&(U=setTimeout(fe,_)),L}return $e.cancel=Be,$e.flush=xe,$e}return dw=h,dw}var pw,yk;function aq(){if(yk)return pw;yk=1;var e=iq(),t=lh(),r="Expected a function";function n(s,d,h){var l=!0,_=!0;if(typeof s!="function")throw new TypeError(r);return t(h)&&(l="leading"in h?!!h.leading:l,_="trailing"in h?!!h.trailing:_),e(s,d,{leading:l,maxWait:d,trailing:_})}return pw=n,pw}var oq=aq();const w5=fn(oq);function hg(e){"@babel/helpers - typeof";return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hg(e)}function vk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vk(Object(r),!0).forEach(function(n){sq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sq(e,t,r){return t=lq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lq(e){var t=uq(e,"string");return hg(t)=="symbol"?t:t+""}function uq(e,t){if(hg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cq(e,t){return pq(e)||dq(e,t)||fq(e,t)||hq()}function hq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fq(e,t){if(e){if(typeof e=="string")return _k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _k(e,t)}}function _k(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dq(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,S=!1;try{if(d=(r=r.call(e)).next,t!==0)for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){S=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(S)throw s}}return l}}function pq(e){if(Array.isArray(e))return e}var mq=Pe.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,d=e.width,h=d===void 0?"100%":d,l=e.height,_=l===void 0?"100%":l,S=e.minWidth,E=S===void 0?0:S,A=e.minHeight,M=e.maxHeight,L=e.children,U=e.debounce,N=U===void 0?0:U,B=e.id,Z=e.className,J=e.onResize,Q=e.style,ie=Q===void 0?{}:Q,H=Pe.useRef(null),X=Pe.useRef();X.current=J,Pe.useImperativeHandle(t,function(){return Object.defineProperty(H.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),H.current},configurable:!0})});var se=Pe.useState({containerWidth:s.width,containerHeight:s.height}),fe=cq(se,2),Se=fe[0],Be=fe[1],xe=Pe.useCallback(function(Fe,Ke){Be(function(Xe){var rt=Math.round(Fe),Qe=Math.round(Ke);return Xe.containerWidth===rt&&Xe.containerHeight===Qe?Xe:{containerWidth:rt,containerHeight:Qe}})},[]);Pe.useEffect(function(){var Fe=function(tt){var nt,Ae=tt[0].contentRect,Ne=Ae.width,yt=Ae.height;xe(Ne,yt),(nt=X.current)===null||nt===void 0||nt.call(X,Ne,yt)};N>0&&(Fe=w5(Fe,N,{trailing:!0,leading:!1}));var Ke=new ResizeObserver(Fe),Xe=H.current.getBoundingClientRect(),rt=Xe.width,Qe=Xe.height;return xe(rt,Qe),Ke.observe(H.current),function(){Ke.disconnect()}},[xe,N]);var $e=Pe.useMemo(function(){var Fe=Se.containerWidth,Ke=Se.containerHeight;if(Fe<0||Ke<0)return null;nc(Tf(h)||Tf(_),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,h,_),nc(!r||r>0,"The aspect(%s) must be greater than zero.",r);var Xe=Tf(h)?Fe:h,rt=Tf(_)?Ke:_;r&&r>0&&(Xe?rt=Xe/r:rt&&(Xe=rt*r),M&&rt>M&&(rt=M)),nc(Xe>0||rt>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Xe,rt,h,_,E,A,r);var Qe=!Array.isArray(L)&&rc(L.type).endsWith("Chart");return ze.Children.map(L,function(We){return ze.isValidElement(We)?Pe.cloneElement(We,nv({width:Xe,height:rt},Qe?{style:nv({height:"100%",width:"100%",maxHeight:rt,maxWidth:Xe},We.props.style)}:{})):We})},[r,L,_,M,A,E,Se,h]);return ze.createElement("div",{id:B?"".concat(B):void 0,className:Wr("recharts-responsive-container",Z),style:nv(nv({},ie),{},{width:h,height:_,minWidth:E,minHeight:A,maxHeight:M}),ref:H},$e)}),S5=function(t){return null};S5.displayName="Cell";function fg(e){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fg(e)}function xk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function X2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xk(Object(r),!0).forEach(function(n){gq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gq(e,t,r){return t=yq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yq(e){var t=vq(e,"string");return fg(t)=="symbol"?t:t+""}function vq(e,t){if(fg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ud={widthCache:{},cacheCount:0},_q=2e3,xq={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},bk="recharts_measurement_span";function bq(e){var t=X2({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Km=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Bp.isSsr)return{width:0,height:0};var n=bq(r),s=JSON.stringify({text:t,copyStyle:n});if(Ud.widthCache[s])return Ud.widthCache[s];try{var d=document.getElementById(bk);d||(d=document.createElement("span"),d.setAttribute("id",bk),d.setAttribute("aria-hidden","true"),document.body.appendChild(d));var h=X2(X2({},xq),n);Object.assign(d.style,h),d.textContent="".concat(t);var l=d.getBoundingClientRect(),_={width:l.width,height:l.height};return Ud.widthCache[s]=_,++Ud.cacheCount>_q&&(Ud.cacheCount=0,Ud.widthCache={}),_}catch{return{width:0,height:0}}},wq=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function dg(e){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dg(e)}function qv(e,t){return Aq(e)||Tq(e,t)||Pq(e,t)||Sq()}function Sq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pq(e,t){if(e){if(typeof e=="string")return wk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wk(e,t)}}function wk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tq(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,S=!1;try{if(d=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;_=!1}else for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){S=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(S)throw s}}return l}}function Aq(e){if(Array.isArray(e))return e}function Eq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Mq(n.key),n)}}function Cq(e,t,r){return t&&Sk(e.prototype,t),r&&Sk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mq(e){var t=Iq(e,"string");return dg(t)=="symbol"?t:t+""}function Iq(e,t){if(dg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Pk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Tk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,kq=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Oq=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,P5={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Dq=Object.keys(P5),Qd="NaN";function Rq(e,t){return e*P5[t]}var iv=(function(){function e(t,r){Eq(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!kq.test(r)&&(this.num=NaN,this.unit=""),Dq.includes(r)&&(this.num=Rq(t,r),this.unit="px")}return Cq(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=Oq.exec(r))!==null&&n!==void 0?n:[],d=qv(s,3),h=d[1],l=d[2];return new e(parseFloat(h),l??"")}}])})();function T5(e){if(e.includes(Qd))return Qd;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=Pk.exec(t))!==null&&r!==void 0?r:[],s=qv(n,4),d=s[1],h=s[2],l=s[3],_=iv.parse(d??""),S=iv.parse(l??""),E=h==="*"?_.multiply(S):_.divide(S);if(E.isNaN())return Qd;t=t.replace(Pk,E.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var A,M=(A=Tk.exec(t))!==null&&A!==void 0?A:[],L=qv(M,4),U=L[1],N=L[2],B=L[3],Z=iv.parse(U??""),J=iv.parse(B??""),Q=N==="+"?Z.add(J):Z.subtract(J);if(Q.isNaN())return Qd;t=t.replace(Tk,Q.toString())}return t}var Ak=/\(([^()]*)\)/;function zq(e){for(var t=e;t.includes("(");){var r=Ak.exec(t),n=qv(r,2),s=n[1];t=t.replace(Ak,T5(s))}return t}function jq(e){var t=e.replace(/\s+/g,"");return t=zq(t),t=T5(t),t}function Lq(e){try{return jq(e)}catch{return Qd}}function mw(e){var t=Lq(e.slice(5,-1));return t===Qd?"":t}var Bq=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Nq=["dx","dy","angle","className","breakAll"];function Y2(){return Y2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Y2.apply(this,arguments)}function Ek(e,t){if(e==null)return{};var r=Fq(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Fq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ck(e,t){return qq(e)||Uq(e,t)||Vq(e,t)||$q()}function $q(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vq(e,t){if(e){if(typeof e=="string")return Mk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mk(e,t)}}function Mk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Uq(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,S=!1;try{if(d=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;_=!1}else for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){S=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(S)throw s}}return l}}function qq(e){if(Array.isArray(e))return e}var A5=/[ \f\n\r\t\v\u2028\u2029]+/,E5=function(t){var r=t.children,n=t.breakAll,s=t.style;try{var d=[];Dr(r)||(n?d=r.toString().split(""):d=r.toString().split(A5));var h=d.map(function(_){return{word:_,width:Km(_,s).width}}),l=n?0:Km("",s).width;return{wordsWithComputedWidth:h,spaceWidth:l}}catch{return null}},Wq=function(t,r,n,s,d){var h=t.maxLines,l=t.children,_=t.style,S=t.breakAll,E=Ot(h),A=l,M=function(){var Xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Xe.reduce(function(rt,Qe){var We=Qe.word,tt=Qe.width,nt=rt[rt.length-1];if(nt&&(s==null||d||nt.width+tt+n<Number(s)))nt.words.push(We),nt.width+=tt+n;else{var Ae={words:[We],width:tt};rt.push(Ae)}return rt},[])},L=M(r),U=function(Xe){return Xe.reduce(function(rt,Qe){return rt.width>Qe.width?rt:Qe})};if(!E)return L;for(var N="",B=function(Xe){var rt=A.slice(0,Xe),Qe=E5({breakAll:S,style:_,children:rt+N}).wordsWithComputedWidth,We=M(Qe),tt=We.length>h||U(We).width>Number(s);return[tt,We]},Z=0,J=A.length-1,Q=0,ie;Z<=J&&Q<=A.length-1;){var H=Math.floor((Z+J)/2),X=H-1,se=B(X),fe=Ck(se,2),Se=fe[0],Be=fe[1],xe=B(H),$e=Ck(xe,1),Fe=$e[0];if(!Se&&!Fe&&(Z=H+1),Se&&Fe&&(J=H-1),!Se&&Fe){ie=Be;break}Q++}return ie||L},Ik=function(t){var r=Dr(t)?[]:t.toString().split(A5);return[{words:r}]},Gq=function(t){var r=t.width,n=t.scaleToFit,s=t.children,d=t.style,h=t.breakAll,l=t.maxLines;if((r||n)&&!Bp.isSsr){var _,S,E=E5({breakAll:h,children:s,style:d});if(E){var A=E.wordsWithComputedWidth,M=E.spaceWidth;_=A,S=M}else return Ik(s);return Wq({breakAll:h,children:s,maxLines:l,style:d},_,S,r,n)}return Ik(s)},kk="#808080",Wv=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,d=s===void 0?0:s,h=t.lineHeight,l=h===void 0?"1em":h,_=t.capHeight,S=_===void 0?"0.71em":_,E=t.scaleToFit,A=E===void 0?!1:E,M=t.textAnchor,L=M===void 0?"start":M,U=t.verticalAnchor,N=U===void 0?"end":U,B=t.fill,Z=B===void 0?kk:B,J=Ek(t,Bq),Q=Pe.useMemo(function(){return Gq({breakAll:J.breakAll,children:J.children,maxLines:J.maxLines,scaleToFit:A,style:J.style,width:J.width})},[J.breakAll,J.children,J.maxLines,A,J.style,J.width]),ie=J.dx,H=J.dy,X=J.angle,se=J.className,fe=J.breakAll,Se=Ek(J,Nq);if(!Oi(n)||!Oi(d))return null;var Be=n+(Ot(ie)?ie:0),xe=d+(Ot(H)?H:0),$e;switch(N){case"start":$e=mw("calc(".concat(S,")"));break;case"middle":$e=mw("calc(".concat((Q.length-1)/2," * -").concat(l," + (").concat(S," / 2))"));break;default:$e=mw("calc(".concat(Q.length-1," * -").concat(l,")"));break}var Fe=[];if(A){var Ke=Q[0].width,Xe=J.width;Fe.push("scale(".concat((Ot(Xe)?Xe/Ke:1)/Ke,")"))}return X&&Fe.push("rotate(".concat(X,", ").concat(Be,", ").concat(xe,")")),Fe.length&&(Se.transform=Fe.join(" ")),ze.createElement("text",Y2({},$r(Se,!0),{x:Be,y:xe,className:Wr("recharts-text",se),textAnchor:L,fill:Z.includes("url")?kk:Z}),Q.map(function(rt,Qe){var We=rt.words.join(fe?"":" ");return ze.createElement("tspan",{x:Be,dy:Qe===0?$e:l,key:"".concat(We,"-").concat(Qe)},We)}))};function rh(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Hq(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function iT(e){let t,r,n;e.length!==2?(t=rh,r=(l,_)=>rh(e(l),_),n=(l,_)=>e(l)-_):(t=e===rh||e===Hq?e:Zq,r=e,n=e);function s(l,_,S=0,E=l.length){if(S<E){if(t(_,_)!==0)return E;do{const A=S+E>>>1;r(l[A],_)<0?S=A+1:E=A}while(S<E)}return S}function d(l,_,S=0,E=l.length){if(S<E){if(t(_,_)!==0)return E;do{const A=S+E>>>1;r(l[A],_)<=0?S=A+1:E=A}while(S<E)}return S}function h(l,_,S=0,E=l.length){const A=s(l,_,S,E-1);return A>S&&n(l[A-1],_)>-n(l[A],_)?A-1:A}return{left:s,center:h,right:d}}function Zq(){return 0}function C5(e){return e===null?NaN:+e}function*Kq(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Xq=iT(rh),Jg=Xq.right;iT(C5).center;class Ok extends Map{constructor(t,r=Qq){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(Dk(this,t))}has(t){return super.has(Dk(this,t))}set(t,r){return super.set(Yq(this,t),r)}delete(t){return super.delete(Jq(this,t))}}function Dk({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Yq({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Jq({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Qq(e){return e!==null&&typeof e=="object"?e.valueOf():e}function eW(e=rh){if(e===rh)return M5;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function M5(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const tW=Math.sqrt(50),rW=Math.sqrt(10),nW=Math.sqrt(2);function Gv(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),d=n/Math.pow(10,s),h=d>=tW?10:d>=rW?5:d>=nW?2:1;let l,_,S;return s<0?(S=Math.pow(10,-s)/h,l=Math.round(e*S),_=Math.round(t*S),l/S<e&&++l,_/S>t&&--_,S=-S):(S=Math.pow(10,s)*h,l=Math.round(e/S),_=Math.round(t/S),l*S<e&&++l,_*S>t&&--_),_<l&&.5<=r&&r<2?Gv(e,t,r*2):[l,_,S]}function J2(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,d,h]=n?Gv(t,e,r):Gv(e,t,r);if(!(d>=s))return[];const l=d-s+1,_=new Array(l);if(n)if(h<0)for(let S=0;S<l;++S)_[S]=(d-S)/-h;else for(let S=0;S<l;++S)_[S]=(d-S)*h;else if(h<0)for(let S=0;S<l;++S)_[S]=(s+S)/-h;else for(let S=0;S<l;++S)_[S]=(s+S)*h;return _}function Q2(e,t,r){return t=+t,e=+e,r=+r,Gv(e,t,r)[2]}function eS(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?Q2(t,e,r):Q2(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function Rk(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function zk(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function I5(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?M5:eW(s);n>r;){if(n-r>600){const _=n-r+1,S=t-r+1,E=Math.log(_),A=.5*Math.exp(2*E/3),M=.5*Math.sqrt(E*A*(_-A)/_)*(S-_/2<0?-1:1),L=Math.max(r,Math.floor(t-S*A/_+M)),U=Math.min(n,Math.floor(t+(_-S)*A/_+M));I5(e,t,L,U,s)}const d=e[t];let h=r,l=n;for(km(e,r,t),s(e[n],d)>0&&km(e,r,n);h<l;){for(km(e,h,l),++h,--l;s(e[h],d)<0;)++h;for(;s(e[l],d)>0;)--l}s(e[r],d)===0?km(e,r,l):(++l,km(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function km(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function iW(e,t,r){if(e=Float64Array.from(Kq(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return zk(e);if(t>=1)return Rk(e);var n,s=(n-1)*t,d=Math.floor(s),h=Rk(I5(e,d).subarray(0,d+1)),l=zk(e.subarray(d+1));return h+(l-h)*(s-d)}}function aW(e,t,r=C5){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,d=Math.floor(s),h=+r(e[d],d,e),l=+r(e[d+1],d+1,e);return h+(l-h)*(s-d)}}function oW(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,d=new Array(s);++n<s;)d[n]=e+n*r;return d}function Bs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function fc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const tS=Symbol("implicit");function aT(){var e=new Ok,t=[],r=[],n=tS;function s(d){let h=e.get(d);if(h===void 0){if(n!==tS)return n;e.set(d,h=t.push(d)-1)}return r[h%r.length]}return s.domain=function(d){if(!arguments.length)return t.slice();t=[],e=new Ok;for(const h of d)e.has(h)||e.set(h,t.push(h)-1);return s},s.range=function(d){return arguments.length?(r=Array.from(d),s):r.slice()},s.unknown=function(d){return arguments.length?(n=d,s):n},s.copy=function(){return aT(t,r).unknown(n)},Bs.apply(s,arguments),s}function pg(){var e=aT().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,d,h,l=!1,_=0,S=0,E=.5;delete e.unknown;function A(){var M=t().length,L=s<n,U=L?s:n,N=L?n:s;d=(N-U)/Math.max(1,M-_+S*2),l&&(d=Math.floor(d)),U+=(N-U-d*(M-_))*E,h=d*(1-_),l&&(U=Math.round(U),h=Math.round(h));var B=oW(M).map(function(Z){return U+d*Z});return r(L?B.reverse():B)}return e.domain=function(M){return arguments.length?(t(M),A()):t()},e.range=function(M){return arguments.length?([n,s]=M,n=+n,s=+s,A()):[n,s]},e.rangeRound=function(M){return[n,s]=M,n=+n,s=+s,l=!0,A()},e.bandwidth=function(){return h},e.step=function(){return d},e.round=function(M){return arguments.length?(l=!!M,A()):l},e.padding=function(M){return arguments.length?(_=Math.min(1,S=+M),A()):_},e.paddingInner=function(M){return arguments.length?(_=Math.min(1,M),A()):_},e.paddingOuter=function(M){return arguments.length?(S=+M,A()):S},e.align=function(M){return arguments.length?(E=Math.max(0,Math.min(1,M)),A()):E},e.copy=function(){return pg(t(),[n,s]).round(l).paddingInner(_).paddingOuter(S).align(E)},Bs.apply(A(),arguments)}function k5(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return k5(t())},e}function Xm(){return k5(pg.apply(null,arguments).paddingInner(1))}function oT(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function O5(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Qg(){}var mg=.7,Hv=1/mg,np="\\s*([+-]?\\d+)\\s*",gg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",cu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sW=/^#([0-9a-f]{3,8})$/,lW=new RegExp(`^rgb\\(${np},${np},${np}\\)$`),uW=new RegExp(`^rgb\\(${cu},${cu},${cu}\\)$`),cW=new RegExp(`^rgba\\(${np},${np},${np},${gg}\\)$`),hW=new RegExp(`^rgba\\(${cu},${cu},${cu},${gg}\\)$`),fW=new RegExp(`^hsl\\(${gg},${cu},${cu}\\)$`),dW=new RegExp(`^hsla\\(${gg},${cu},${cu},${gg}\\)$`),jk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oT(Qg,yg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Lk,formatHex:Lk,formatHex8:pW,formatHsl:mW,formatRgb:Bk,toString:Bk});function Lk(){return this.rgb().formatHex()}function pW(){return this.rgb().formatHex8()}function mW(){return D5(this).formatHsl()}function Bk(){return this.rgb().formatRgb()}function yg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=sW.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Nk(t):r===3?new To(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?av(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?av(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=lW.exec(e))?new To(t[1],t[2],t[3],1):(t=uW.exec(e))?new To(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cW.exec(e))?av(t[1],t[2],t[3],t[4]):(t=hW.exec(e))?av(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=fW.exec(e))?Vk(t[1],t[2]/100,t[3]/100,1):(t=dW.exec(e))?Vk(t[1],t[2]/100,t[3]/100,t[4]):jk.hasOwnProperty(e)?Nk(jk[e]):e==="transparent"?new To(NaN,NaN,NaN,0):null}function Nk(e){return new To(e>>16&255,e>>8&255,e&255,1)}function av(e,t,r,n){return n<=0&&(e=t=r=NaN),new To(e,t,r,n)}function gW(e){return e instanceof Qg||(e=yg(e)),e?(e=e.rgb(),new To(e.r,e.g,e.b,e.opacity)):new To}function rS(e,t,r,n){return arguments.length===1?gW(e):new To(e,t,r,n??1)}function To(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}oT(To,rS,O5(Qg,{brighter(e){return e=e==null?Hv:Math.pow(Hv,e),new To(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?mg:Math.pow(mg,e),new To(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new To(kf(this.r),kf(this.g),kf(this.b),Zv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Fk,formatHex:Fk,formatHex8:yW,formatRgb:$k,toString:$k}));function Fk(){return`#${Af(this.r)}${Af(this.g)}${Af(this.b)}`}function yW(){return`#${Af(this.r)}${Af(this.g)}${Af(this.b)}${Af((isNaN(this.opacity)?1:this.opacity)*255)}`}function $k(){const e=Zv(this.opacity);return`${e===1?"rgb(":"rgba("}${kf(this.r)}, ${kf(this.g)}, ${kf(this.b)}${e===1?")":`, ${e})`}`}function Zv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function kf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Af(e){return e=kf(e),(e<16?"0":"")+e.toString(16)}function Vk(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ml(e,t,r,n)}function D5(e){if(e instanceof ml)return new ml(e.h,e.s,e.l,e.opacity);if(e instanceof Qg||(e=yg(e)),!e)return new ml;if(e instanceof ml)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),d=Math.max(t,r,n),h=NaN,l=d-s,_=(d+s)/2;return l?(t===d?h=(r-n)/l+(r<n)*6:r===d?h=(n-t)/l+2:h=(t-r)/l+4,l/=_<.5?d+s:2-d-s,h*=60):l=_>0&&_<1?0:h,new ml(h,l,_,e.opacity)}function vW(e,t,r,n){return arguments.length===1?D5(e):new ml(e,t,r,n??1)}function ml(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}oT(ml,vW,O5(Qg,{brighter(e){return e=e==null?Hv:Math.pow(Hv,e),new ml(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?mg:Math.pow(mg,e),new ml(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new To(gw(e>=240?e-240:e+120,s,n),gw(e,s,n),gw(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new ml(Uk(this.h),ov(this.s),ov(this.l),Zv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Zv(this.opacity);return`${e===1?"hsl(":"hsla("}${Uk(this.h)}, ${ov(this.s)*100}%, ${ov(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Uk(e){return e=(e||0)%360,e<0?e+360:e}function ov(e){return Math.max(0,Math.min(1,e||0))}function gw(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const sT=e=>()=>e;function _W(e,t){return function(r){return e+r*t}}function xW(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function bW(e){return(e=+e)==1?R5:function(t,r){return r-t?xW(t,r,e):sT(isNaN(t)?r:t)}}function R5(e,t){var r=t-e;return r?_W(e,r):sT(isNaN(e)?t:e)}const qk=(function e(t){var r=bW(t);function n(s,d){var h=r((s=rS(s)).r,(d=rS(d)).r),l=r(s.g,d.g),_=r(s.b,d.b),S=R5(s.opacity,d.opacity);return function(E){return s.r=h(E),s.g=l(E),s.b=_(E),s.opacity=S(E),s+""}}return n.gamma=e,n})(1);function wW(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(d){for(s=0;s<r;++s)n[s]=e[s]*(1-d)+t[s]*d;return n}}function SW(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function PW(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),d=new Array(r),h;for(h=0;h<n;++h)s[h]=Np(e[h],t[h]);for(;h<r;++h)d[h]=t[h];return function(l){for(h=0;h<n;++h)d[h]=s[h](l);return d}}function TW(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Kv(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function AW(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Np(e[s],t[s]):n[s]=t[s];return function(d){for(s in r)n[s]=r[s](d);return n}}var nS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yw=new RegExp(nS.source,"g");function EW(e){return function(){return e}}function CW(e){return function(t){return e(t)+""}}function MW(e,t){var r=nS.lastIndex=yw.lastIndex=0,n,s,d,h=-1,l=[],_=[];for(e=e+"",t=t+"";(n=nS.exec(e))&&(s=yw.exec(t));)(d=s.index)>r&&(d=t.slice(r,d),l[h]?l[h]+=d:l[++h]=d),(n=n[0])===(s=s[0])?l[h]?l[h]+=s:l[++h]=s:(l[++h]=null,_.push({i:h,x:Kv(n,s)})),r=yw.lastIndex;return r<t.length&&(d=t.slice(r),l[h]?l[h]+=d:l[++h]=d),l.length<2?_[0]?CW(_[0].x):EW(t):(t=_.length,function(S){for(var E=0,A;E<t;++E)l[(A=_[E]).i]=A.x(S);return l.join("")})}function Np(e,t){var r=typeof t,n;return t==null||r==="boolean"?sT(t):(r==="number"?Kv:r==="string"?(n=yg(t))?(t=n,qk):MW:t instanceof yg?qk:t instanceof Date?TW:SW(t)?wW:Array.isArray(t)?PW:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?AW:Kv)(e,t)}function lT(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function IW(e,t){t===void 0&&(t=e,e=Np);for(var r=0,n=t.length-1,s=t[0],d=new Array(n<0?0:n);r<n;)d[r]=e(s,s=t[++r]);return function(h){var l=Math.max(0,Math.min(n-1,Math.floor(h*=n)));return d[l](h-l)}}function kW(e){return function(){return e}}function Xv(e){return+e}var Wk=[0,1];function uo(e){return e}function iS(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:kW(isNaN(t)?NaN:.5)}function OW(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function DW(e,t,r){var n=e[0],s=e[1],d=t[0],h=t[1];return s<n?(n=iS(s,n),d=r(h,d)):(n=iS(n,s),d=r(d,h)),function(l){return d(n(l))}}function RW(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),d=new Array(n),h=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++h<n;)s[h]=iS(e[h],e[h+1]),d[h]=r(t[h],t[h+1]);return function(l){var _=Jg(e,l,1,n)-1;return d[_](s[_](l))}}function ey(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Y_(){var e=Wk,t=Wk,r=Np,n,s,d,h=uo,l,_,S;function E(){var M=Math.min(e.length,t.length);return h!==uo&&(h=OW(e[0],e[M-1])),l=M>2?RW:DW,_=S=null,A}function A(M){return M==null||isNaN(M=+M)?d:(_||(_=l(e.map(n),t,r)))(n(h(M)))}return A.invert=function(M){return h(s((S||(S=l(t,e.map(n),Kv)))(M)))},A.domain=function(M){return arguments.length?(e=Array.from(M,Xv),E()):e.slice()},A.range=function(M){return arguments.length?(t=Array.from(M),E()):t.slice()},A.rangeRound=function(M){return t=Array.from(M),r=lT,E()},A.clamp=function(M){return arguments.length?(h=M?!0:uo,E()):h!==uo},A.interpolate=function(M){return arguments.length?(r=M,E()):r},A.unknown=function(M){return arguments.length?(d=M,A):d},function(M,L){return n=M,s=L,E()}}function uT(){return Y_()(uo,uo)}function zW(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Yv(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function pp(e){return e=Yv(Math.abs(e)),e?e[1]:NaN}function jW(e,t){return function(r,n){for(var s=r.length,d=[],h=0,l=e[0],_=0;s>0&&l>0&&(_+l+1>n&&(l=Math.max(1,n-_)),d.push(r.substring(s-=l,s+l)),!((_+=l+1)>n));)l=e[h=(h+1)%e.length];return d.reverse().join(t)}}function LW(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var BW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vg(e){if(!(t=BW.exec(e)))throw new Error("invalid format: "+e);var t;return new cT({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}vg.prototype=cT.prototype;function cT(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}cT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function NW(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var z5;function FW(e,t){var r=Yv(e,t);if(!r)return e+"";var n=r[0],s=r[1],d=s-(z5=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,h=n.length;return d===h?n:d>h?n+new Array(d-h+1).join("0"):d>0?n.slice(0,d)+"."+n.slice(d):"0."+new Array(1-d).join("0")+Yv(e,Math.max(0,t+d-1))[0]}function Gk(e,t){var r=Yv(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const Hk={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:zW,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Gk(e*100,t),r:Gk,s:FW,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Zk(e){return e}var Kk=Array.prototype.map,Xk=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function $W(e){var t=e.grouping===void 0||e.thousands===void 0?Zk:jW(Kk.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",d=e.numerals===void 0?Zk:LW(Kk.call(e.numerals,String)),h=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",_=e.nan===void 0?"NaN":e.nan+"";function S(A){A=vg(A);var M=A.fill,L=A.align,U=A.sign,N=A.symbol,B=A.zero,Z=A.width,J=A.comma,Q=A.precision,ie=A.trim,H=A.type;H==="n"?(J=!0,H="g"):Hk[H]||(Q===void 0&&(Q=12),ie=!0,H="g"),(B||M==="0"&&L==="=")&&(B=!0,M="0",L="=");var X=N==="$"?r:N==="#"&&/[boxX]/.test(H)?"0"+H.toLowerCase():"",se=N==="$"?n:/[%p]/.test(H)?h:"",fe=Hk[H],Se=/[defgprs%]/.test(H);Q=Q===void 0?6:/[gprs]/.test(H)?Math.max(1,Math.min(21,Q)):Math.max(0,Math.min(20,Q));function Be(xe){var $e=X,Fe=se,Ke,Xe,rt;if(H==="c")Fe=fe(xe)+Fe,xe="";else{xe=+xe;var Qe=xe<0||1/xe<0;if(xe=isNaN(xe)?_:fe(Math.abs(xe),Q),ie&&(xe=NW(xe)),Qe&&+xe==0&&U!=="+"&&(Qe=!1),$e=(Qe?U==="("?U:l:U==="-"||U==="("?"":U)+$e,Fe=(H==="s"?Xk[8+z5/3]:"")+Fe+(Qe&&U==="("?")":""),Se){for(Ke=-1,Xe=xe.length;++Ke<Xe;)if(rt=xe.charCodeAt(Ke),48>rt||rt>57){Fe=(rt===46?s+xe.slice(Ke+1):xe.slice(Ke))+Fe,xe=xe.slice(0,Ke);break}}}J&&!B&&(xe=t(xe,1/0));var We=$e.length+xe.length+Fe.length,tt=We<Z?new Array(Z-We+1).join(M):"";switch(J&&B&&(xe=t(tt+xe,tt.length?Z-Fe.length:1/0),tt=""),L){case"<":xe=$e+xe+Fe+tt;break;case"=":xe=$e+tt+xe+Fe;break;case"^":xe=tt.slice(0,We=tt.length>>1)+$e+xe+Fe+tt.slice(We);break;default:xe=tt+$e+xe+Fe;break}return d(xe)}return Be.toString=function(){return A+""},Be}function E(A,M){var L=S((A=vg(A),A.type="f",A)),U=Math.max(-8,Math.min(8,Math.floor(pp(M)/3)))*3,N=Math.pow(10,-U),B=Xk[8+U/3];return function(Z){return L(N*Z)+B}}return{format:S,formatPrefix:E}}var sv,hT,j5;VW({thousands:",",grouping:[3],currency:["$",""]});function VW(e){return sv=$W(e),hT=sv.format,j5=sv.formatPrefix,sv}function UW(e){return Math.max(0,-pp(Math.abs(e)))}function qW(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pp(t)/3)))*3-pp(Math.abs(e)))}function WW(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,pp(t)-pp(e))+1}function L5(e,t,r,n){var s=eS(e,t,r),d;switch(n=vg(n??",f"),n.type){case"s":{var h=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(d=qW(s,h))&&(n.precision=d),j5(n,h)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(d=WW(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=d-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(d=UW(s))&&(n.precision=d-(n.type==="%")*2);break}}return hT(n)}function ch(e){var t=e.domain;return e.ticks=function(r){var n=t();return J2(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return L5(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,d=n.length-1,h=n[s],l=n[d],_,S,E=10;for(l<h&&(S=h,h=l,l=S,S=s,s=d,d=S);E-- >0;){if(S=Q2(h,l,r),S===_)return n[s]=h,n[d]=l,t(n);if(S>0)h=Math.floor(h/S)*S,l=Math.ceil(l/S)*S;else if(S<0)h=Math.ceil(h*S)/S,l=Math.floor(l*S)/S;else break;_=S}return e},e}function Jv(){var e=uT();return e.copy=function(){return ey(e,Jv())},Bs.apply(e,arguments),ch(e)}function B5(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Xv),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return B5(e).unknown(t)},e=arguments.length?Array.from(e,Xv):[0,1],ch(r)}function N5(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],d=e[n],h;return d<s&&(h=r,r=n,n=h,h=s,s=d,d=h),e[r]=t.floor(s),e[n]=t.ceil(d),e}function Yk(e){return Math.log(e)}function Jk(e){return Math.exp(e)}function GW(e){return-Math.log(-e)}function HW(e){return-Math.exp(-e)}function ZW(e){return isFinite(e)?+("1e"+e):e<0?0:e}function KW(e){return e===10?ZW:e===Math.E?Math.exp:t=>Math.pow(e,t)}function XW(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Qk(e){return(t,r)=>-e(-t,r)}function fT(e){const t=e(Yk,Jk),r=t.domain;let n=10,s,d;function h(){return s=XW(n),d=KW(n),r()[0]<0?(s=Qk(s),d=Qk(d),e(GW,HW)):e(Yk,Jk),t}return t.base=function(l){return arguments.length?(n=+l,h()):n},t.domain=function(l){return arguments.length?(r(l),h()):r()},t.ticks=l=>{const _=r();let S=_[0],E=_[_.length-1];const A=E<S;A&&([S,E]=[E,S]);let M=s(S),L=s(E),U,N;const B=l==null?10:+l;let Z=[];if(!(n%1)&&L-M<B){if(M=Math.floor(M),L=Math.ceil(L),S>0){for(;M<=L;++M)for(U=1;U<n;++U)if(N=M<0?U/d(-M):U*d(M),!(N<S)){if(N>E)break;Z.push(N)}}else for(;M<=L;++M)for(U=n-1;U>=1;--U)if(N=M>0?U/d(-M):U*d(M),!(N<S)){if(N>E)break;Z.push(N)}Z.length*2<B&&(Z=J2(S,E,B))}else Z=J2(M,L,Math.min(L-M,B)).map(d);return A?Z.reverse():Z},t.tickFormat=(l,_)=>{if(l==null&&(l=10),_==null&&(_=n===10?"s":","),typeof _!="function"&&(!(n%1)&&(_=vg(_)).precision==null&&(_.trim=!0),_=hT(_)),l===1/0)return _;const S=Math.max(1,n*l/t.ticks().length);return E=>{let A=E/d(Math.round(s(E)));return A*n<n-.5&&(A*=n),A<=S?_(E):""}},t.nice=()=>r(N5(r(),{floor:l=>d(Math.floor(s(l))),ceil:l=>d(Math.ceil(s(l)))})),t}function F5(){const e=fT(Y_()).domain([1,10]);return e.copy=()=>ey(e,F5()).base(e.base()),Bs.apply(e,arguments),e}function eO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function tO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function dT(e){var t=1,r=e(eO(t),tO(t));return r.constant=function(n){return arguments.length?e(eO(t=+n),tO(t)):t},ch(r)}function $5(){var e=dT(Y_());return e.copy=function(){return ey(e,$5()).constant(e.constant())},Bs.apply(e,arguments)}function rO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function YW(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function JW(e){return e<0?-e*e:e*e}function pT(e){var t=e(uo,uo),r=1;function n(){return r===1?e(uo,uo):r===.5?e(YW,JW):e(rO(r),rO(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},ch(t)}function mT(){var e=pT(Y_());return e.copy=function(){return ey(e,mT()).exponent(e.exponent())},Bs.apply(e,arguments),e}function QW(){return mT.apply(null,arguments).exponent(.5)}function nO(e){return Math.sign(e)*e*e}function eG(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function V5(){var e=uT(),t=[0,1],r=!1,n;function s(d){var h=eG(e(d));return isNaN(h)?n:r?Math.round(h):h}return s.invert=function(d){return e.invert(nO(d))},s.domain=function(d){return arguments.length?(e.domain(d),s):e.domain()},s.range=function(d){return arguments.length?(e.range((t=Array.from(d,Xv)).map(nO)),s):t.slice()},s.rangeRound=function(d){return s.range(d).round(!0)},s.round=function(d){return arguments.length?(r=!!d,s):r},s.clamp=function(d){return arguments.length?(e.clamp(d),s):e.clamp()},s.unknown=function(d){return arguments.length?(n=d,s):n},s.copy=function(){return V5(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Bs.apply(s,arguments),ch(s)}function U5(){var e=[],t=[],r=[],n;function s(){var h=0,l=Math.max(1,t.length);for(r=new Array(l-1);++h<l;)r[h-1]=aW(e,h/l);return d}function d(h){return h==null||isNaN(h=+h)?n:t[Jg(r,h)]}return d.invertExtent=function(h){var l=t.indexOf(h);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},d.domain=function(h){if(!arguments.length)return e.slice();e=[];for(let l of h)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(rh),s()},d.range=function(h){return arguments.length?(t=Array.from(h),s()):t.slice()},d.unknown=function(h){return arguments.length?(n=h,d):n},d.quantiles=function(){return r.slice()},d.copy=function(){return U5().domain(e).range(t).unknown(n)},Bs.apply(d,arguments)}function q5(){var e=0,t=1,r=1,n=[.5],s=[0,1],d;function h(_){return _!=null&&_<=_?s[Jg(n,_,0,r)]:d}function l(){var _=-1;for(n=new Array(r);++_<r;)n[_]=((_+1)*t-(_-r)*e)/(r+1);return h}return h.domain=function(_){return arguments.length?([e,t]=_,e=+e,t=+t,l()):[e,t]},h.range=function(_){return arguments.length?(r=(s=Array.from(_)).length-1,l()):s.slice()},h.invertExtent=function(_){var S=s.indexOf(_);return S<0?[NaN,NaN]:S<1?[e,n[0]]:S>=r?[n[r-1],t]:[n[S-1],n[S]]},h.unknown=function(_){return arguments.length&&(d=_),h},h.thresholds=function(){return n.slice()},h.copy=function(){return q5().domain([e,t]).range(s).unknown(d)},Bs.apply(ch(h),arguments)}function W5(){var e=[.5],t=[0,1],r,n=1;function s(d){return d!=null&&d<=d?t[Jg(e,d,0,n)]:r}return s.domain=function(d){return arguments.length?(e=Array.from(d),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(d){return arguments.length?(t=Array.from(d),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(d){var h=t.indexOf(d);return[e[h-1],e[h]]},s.unknown=function(d){return arguments.length?(r=d,s):r},s.copy=function(){return W5().domain(e).range(t).unknown(r)},Bs.apply(s,arguments)}const vw=new Date,_w=new Date;function Di(e,t,r,n){function s(d){return e(d=arguments.length===0?new Date:new Date(+d)),d}return s.floor=d=>(e(d=new Date(+d)),d),s.ceil=d=>(e(d=new Date(d-1)),t(d,1),e(d),d),s.round=d=>{const h=s(d),l=s.ceil(d);return d-h<l-d?h:l},s.offset=(d,h)=>(t(d=new Date(+d),h==null?1:Math.floor(h)),d),s.range=(d,h,l)=>{const _=[];if(d=s.ceil(d),l=l==null?1:Math.floor(l),!(d<h)||!(l>0))return _;let S;do _.push(S=new Date(+d)),t(d,l),e(d);while(S<d&&d<h);return _},s.filter=d=>Di(h=>{if(h>=h)for(;e(h),!d(h);)h.setTime(h-1)},(h,l)=>{if(h>=h)if(l<0)for(;++l<=0;)for(;t(h,-1),!d(h););else for(;--l>=0;)for(;t(h,1),!d(h););}),r&&(s.count=(d,h)=>(vw.setTime(+d),_w.setTime(+h),e(vw),e(_w),Math.floor(r(vw,_w))),s.every=d=>(d=Math.floor(d),!isFinite(d)||!(d>0)?null:d>1?s.filter(n?h=>n(h)%d===0:h=>s.count(0,h)%d===0):s)),s}const Qv=Di(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Qv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Di(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Qv);Qv.range;const Yu=1e3,Rs=Yu*60,Ju=Rs*60,oc=Ju*24,gT=oc*7,iO=oc*30,xw=oc*365,Ef=Di(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Yu)},(e,t)=>(t-e)/Yu,e=>e.getUTCSeconds());Ef.range;const yT=Di(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yu)},(e,t)=>{e.setTime(+e+t*Rs)},(e,t)=>(t-e)/Rs,e=>e.getMinutes());yT.range;const vT=Di(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Rs)},(e,t)=>(t-e)/Rs,e=>e.getUTCMinutes());vT.range;const _T=Di(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yu-e.getMinutes()*Rs)},(e,t)=>{e.setTime(+e+t*Ju)},(e,t)=>(t-e)/Ju,e=>e.getHours());_T.range;const xT=Di(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ju)},(e,t)=>(t-e)/Ju,e=>e.getUTCHours());xT.range;const ty=Di(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Rs)/oc,e=>e.getDate()-1);ty.range;const J_=Di(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/oc,e=>e.getUTCDate()-1);J_.range;const G5=Di(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/oc,e=>Math.floor(e/oc));G5.range;function Uf(e){return Di(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Rs)/gT)}const Q_=Uf(0),e_=Uf(1),tG=Uf(2),rG=Uf(3),mp=Uf(4),nG=Uf(5),iG=Uf(6);Q_.range;e_.range;tG.range;rG.range;mp.range;nG.range;iG.range;function qf(e){return Di(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/gT)}const e0=qf(0),t_=qf(1),aG=qf(2),oG=qf(3),gp=qf(4),sG=qf(5),lG=qf(6);e0.range;t_.range;aG.range;oG.range;gp.range;sG.range;lG.range;const bT=Di(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());bT.range;const wT=Di(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());wT.range;const sc=Di(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());sc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Di(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});sc.range;const lc=Di(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());lc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Di(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});lc.range;function H5(e,t,r,n,s,d){const h=[[Ef,1,Yu],[Ef,5,5*Yu],[Ef,15,15*Yu],[Ef,30,30*Yu],[d,1,Rs],[d,5,5*Rs],[d,15,15*Rs],[d,30,30*Rs],[s,1,Ju],[s,3,3*Ju],[s,6,6*Ju],[s,12,12*Ju],[n,1,oc],[n,2,2*oc],[r,1,gT],[t,1,iO],[t,3,3*iO],[e,1,xw]];function l(S,E,A){const M=E<S;M&&([S,E]=[E,S]);const L=A&&typeof A.range=="function"?A:_(S,E,A),U=L?L.range(S,+E+1):[];return M?U.reverse():U}function _(S,E,A){const M=Math.abs(E-S)/A,L=iT(([,,B])=>B).right(h,M);if(L===h.length)return e.every(eS(S/xw,E/xw,A));if(L===0)return Qv.every(Math.max(eS(S,E,A),1));const[U,N]=h[M/h[L-1][2]<h[L][2]/M?L-1:L];return U.every(N)}return[l,_]}const[uG,cG]=H5(lc,wT,e0,G5,xT,vT),[hG,fG]=H5(sc,bT,Q_,ty,_T,yT);function bw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ww(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Om(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function dG(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,d=e.days,h=e.shortDays,l=e.months,_=e.shortMonths,S=Dm(s),E=Rm(s),A=Dm(d),M=Rm(d),L=Dm(h),U=Rm(h),N=Dm(l),B=Rm(l),Z=Dm(_),J=Rm(_),Q={a:Qe,A:We,b:tt,B:nt,c:null,d:cO,e:cO,f:jG,g:GG,G:ZG,H:DG,I:RG,j:zG,L:Z5,m:LG,M:BG,p:Ae,q:Ne,Q:dO,s:pO,S:NG,u:FG,U:$G,V:VG,w:UG,W:qG,x:null,X:null,y:WG,Y:HG,Z:KG,"%":fO},ie={a:yt,A:jt,b:Ut,B:rr,c:null,d:hO,e:hO,f:QG,g:uH,G:hH,H:XG,I:YG,j:JG,L:X5,m:eH,M:tH,p:cr,q:Jt,Q:dO,s:pO,S:rH,u:nH,U:iH,V:aH,w:oH,W:sH,x:null,X:null,y:lH,Y:cH,Z:fH,"%":fO},H={a:Be,A:xe,b:$e,B:Fe,c:Ke,d:lO,e:lO,f:MG,g:sO,G:oO,H:uO,I:uO,j:TG,L:CG,m:PG,M:AG,p:Se,q:SG,Q:kG,s:OG,S:EG,u:vG,U:_G,V:xG,w:yG,W:bG,x:Xe,X:rt,y:sO,Y:oO,Z:wG,"%":IG};Q.x=X(r,Q),Q.X=X(n,Q),Q.c=X(t,Q),ie.x=X(r,ie),ie.X=X(n,ie),ie.c=X(t,ie);function X(ht,Wt){return function(sr){var lt=[],Ir=-1,mr=0,Yr=ht.length,qe,dn,xi;for(sr instanceof Date||(sr=new Date(+sr));++Ir<Yr;)ht.charCodeAt(Ir)===37&&(lt.push(ht.slice(mr,Ir)),(dn=aO[qe=ht.charAt(++Ir)])!=null?qe=ht.charAt(++Ir):dn=qe==="e"?" ":"0",(xi=Wt[qe])&&(qe=xi(sr,dn)),lt.push(qe),mr=Ir+1);return lt.push(ht.slice(mr,Ir)),lt.join("")}}function se(ht,Wt){return function(sr){var lt=Om(1900,void 0,1),Ir=fe(lt,ht,sr+="",0),mr,Yr;if(Ir!=sr.length)return null;if("Q"in lt)return new Date(lt.Q);if("s"in lt)return new Date(lt.s*1e3+("L"in lt?lt.L:0));if(Wt&&!("Z"in lt)&&(lt.Z=0),"p"in lt&&(lt.H=lt.H%12+lt.p*12),lt.m===void 0&&(lt.m="q"in lt?lt.q:0),"V"in lt){if(lt.V<1||lt.V>53)return null;"w"in lt||(lt.w=1),"Z"in lt?(mr=ww(Om(lt.y,0,1)),Yr=mr.getUTCDay(),mr=Yr>4||Yr===0?t_.ceil(mr):t_(mr),mr=J_.offset(mr,(lt.V-1)*7),lt.y=mr.getUTCFullYear(),lt.m=mr.getUTCMonth(),lt.d=mr.getUTCDate()+(lt.w+6)%7):(mr=bw(Om(lt.y,0,1)),Yr=mr.getDay(),mr=Yr>4||Yr===0?e_.ceil(mr):e_(mr),mr=ty.offset(mr,(lt.V-1)*7),lt.y=mr.getFullYear(),lt.m=mr.getMonth(),lt.d=mr.getDate()+(lt.w+6)%7)}else("W"in lt||"U"in lt)&&("w"in lt||(lt.w="u"in lt?lt.u%7:"W"in lt?1:0),Yr="Z"in lt?ww(Om(lt.y,0,1)).getUTCDay():bw(Om(lt.y,0,1)).getDay(),lt.m=0,lt.d="W"in lt?(lt.w+6)%7+lt.W*7-(Yr+5)%7:lt.w+lt.U*7-(Yr+6)%7);return"Z"in lt?(lt.H+=lt.Z/100|0,lt.M+=lt.Z%100,ww(lt)):bw(lt)}}function fe(ht,Wt,sr,lt){for(var Ir=0,mr=Wt.length,Yr=sr.length,qe,dn;Ir<mr;){if(lt>=Yr)return-1;if(qe=Wt.charCodeAt(Ir++),qe===37){if(qe=Wt.charAt(Ir++),dn=H[qe in aO?Wt.charAt(Ir++):qe],!dn||(lt=dn(ht,sr,lt))<0)return-1}else if(qe!=sr.charCodeAt(lt++))return-1}return lt}function Se(ht,Wt,sr){var lt=S.exec(Wt.slice(sr));return lt?(ht.p=E.get(lt[0].toLowerCase()),sr+lt[0].length):-1}function Be(ht,Wt,sr){var lt=L.exec(Wt.slice(sr));return lt?(ht.w=U.get(lt[0].toLowerCase()),sr+lt[0].length):-1}function xe(ht,Wt,sr){var lt=A.exec(Wt.slice(sr));return lt?(ht.w=M.get(lt[0].toLowerCase()),sr+lt[0].length):-1}function $e(ht,Wt,sr){var lt=Z.exec(Wt.slice(sr));return lt?(ht.m=J.get(lt[0].toLowerCase()),sr+lt[0].length):-1}function Fe(ht,Wt,sr){var lt=N.exec(Wt.slice(sr));return lt?(ht.m=B.get(lt[0].toLowerCase()),sr+lt[0].length):-1}function Ke(ht,Wt,sr){return fe(ht,t,Wt,sr)}function Xe(ht,Wt,sr){return fe(ht,r,Wt,sr)}function rt(ht,Wt,sr){return fe(ht,n,Wt,sr)}function Qe(ht){return h[ht.getDay()]}function We(ht){return d[ht.getDay()]}function tt(ht){return _[ht.getMonth()]}function nt(ht){return l[ht.getMonth()]}function Ae(ht){return s[+(ht.getHours()>=12)]}function Ne(ht){return 1+~~(ht.getMonth()/3)}function yt(ht){return h[ht.getUTCDay()]}function jt(ht){return d[ht.getUTCDay()]}function Ut(ht){return _[ht.getUTCMonth()]}function rr(ht){return l[ht.getUTCMonth()]}function cr(ht){return s[+(ht.getUTCHours()>=12)]}function Jt(ht){return 1+~~(ht.getUTCMonth()/3)}return{format:function(ht){var Wt=X(ht+="",Q);return Wt.toString=function(){return ht},Wt},parse:function(ht){var Wt=se(ht+="",!1);return Wt.toString=function(){return ht},Wt},utcFormat:function(ht){var Wt=X(ht+="",ie);return Wt.toString=function(){return ht},Wt},utcParse:function(ht){var Wt=se(ht+="",!0);return Wt.toString=function(){return ht},Wt}}}var aO={"-":"",_:" ",0:"0"},Qi=/^\s*\d+/,pG=/^%/,mG=/[\\^$*+?|[\]().{}]/g;function Xr(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",d=s.length;return n+(d<r?new Array(r-d+1).join(t)+s:s)}function gG(e){return e.replace(mG,"\\$&")}function Dm(e){return new RegExp("^(?:"+e.map(gG).join("|")+")","i")}function Rm(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function yG(e,t,r){var n=Qi.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function vG(e,t,r){var n=Qi.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function _G(e,t,r){var n=Qi.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function xG(e,t,r){var n=Qi.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function bG(e,t,r){var n=Qi.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function oO(e,t,r){var n=Qi.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function sO(e,t,r){var n=Qi.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function wG(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function SG(e,t,r){var n=Qi.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function PG(e,t,r){var n=Qi.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function lO(e,t,r){var n=Qi.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function TG(e,t,r){var n=Qi.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function uO(e,t,r){var n=Qi.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function AG(e,t,r){var n=Qi.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function EG(e,t,r){var n=Qi.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function CG(e,t,r){var n=Qi.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function MG(e,t,r){var n=Qi.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function IG(e,t,r){var n=pG.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function kG(e,t,r){var n=Qi.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function OG(e,t,r){var n=Qi.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function cO(e,t){return Xr(e.getDate(),t,2)}function DG(e,t){return Xr(e.getHours(),t,2)}function RG(e,t){return Xr(e.getHours()%12||12,t,2)}function zG(e,t){return Xr(1+ty.count(sc(e),e),t,3)}function Z5(e,t){return Xr(e.getMilliseconds(),t,3)}function jG(e,t){return Z5(e,t)+"000"}function LG(e,t){return Xr(e.getMonth()+1,t,2)}function BG(e,t){return Xr(e.getMinutes(),t,2)}function NG(e,t){return Xr(e.getSeconds(),t,2)}function FG(e){var t=e.getDay();return t===0?7:t}function $G(e,t){return Xr(Q_.count(sc(e)-1,e),t,2)}function K5(e){var t=e.getDay();return t>=4||t===0?mp(e):mp.ceil(e)}function VG(e,t){return e=K5(e),Xr(mp.count(sc(e),e)+(sc(e).getDay()===4),t,2)}function UG(e){return e.getDay()}function qG(e,t){return Xr(e_.count(sc(e)-1,e),t,2)}function WG(e,t){return Xr(e.getFullYear()%100,t,2)}function GG(e,t){return e=K5(e),Xr(e.getFullYear()%100,t,2)}function HG(e,t){return Xr(e.getFullYear()%1e4,t,4)}function ZG(e,t){var r=e.getDay();return e=r>=4||r===0?mp(e):mp.ceil(e),Xr(e.getFullYear()%1e4,t,4)}function KG(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Xr(t/60|0,"0",2)+Xr(t%60,"0",2)}function hO(e,t){return Xr(e.getUTCDate(),t,2)}function XG(e,t){return Xr(e.getUTCHours(),t,2)}function YG(e,t){return Xr(e.getUTCHours()%12||12,t,2)}function JG(e,t){return Xr(1+J_.count(lc(e),e),t,3)}function X5(e,t){return Xr(e.getUTCMilliseconds(),t,3)}function QG(e,t){return X5(e,t)+"000"}function eH(e,t){return Xr(e.getUTCMonth()+1,t,2)}function tH(e,t){return Xr(e.getUTCMinutes(),t,2)}function rH(e,t){return Xr(e.getUTCSeconds(),t,2)}function nH(e){var t=e.getUTCDay();return t===0?7:t}function iH(e,t){return Xr(e0.count(lc(e)-1,e),t,2)}function Y5(e){var t=e.getUTCDay();return t>=4||t===0?gp(e):gp.ceil(e)}function aH(e,t){return e=Y5(e),Xr(gp.count(lc(e),e)+(lc(e).getUTCDay()===4),t,2)}function oH(e){return e.getUTCDay()}function sH(e,t){return Xr(t_.count(lc(e)-1,e),t,2)}function lH(e,t){return Xr(e.getUTCFullYear()%100,t,2)}function uH(e,t){return e=Y5(e),Xr(e.getUTCFullYear()%100,t,2)}function cH(e,t){return Xr(e.getUTCFullYear()%1e4,t,4)}function hH(e,t){var r=e.getUTCDay();return e=r>=4||r===0?gp(e):gp.ceil(e),Xr(e.getUTCFullYear()%1e4,t,4)}function fH(){return"+0000"}function fO(){return"%"}function dO(e){return+e}function pO(e){return Math.floor(+e/1e3)}var qd,J5,Q5;dH({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function dH(e){return qd=dG(e),J5=qd.format,qd.parse,Q5=qd.utcFormat,qd.utcParse,qd}function pH(e){return new Date(e)}function mH(e){return e instanceof Date?+e:+new Date(+e)}function ST(e,t,r,n,s,d,h,l,_,S){var E=uT(),A=E.invert,M=E.domain,L=S(".%L"),U=S(":%S"),N=S("%I:%M"),B=S("%I %p"),Z=S("%a %d"),J=S("%b %d"),Q=S("%B"),ie=S("%Y");function H(X){return(_(X)<X?L:l(X)<X?U:h(X)<X?N:d(X)<X?B:n(X)<X?s(X)<X?Z:J:r(X)<X?Q:ie)(X)}return E.invert=function(X){return new Date(A(X))},E.domain=function(X){return arguments.length?M(Array.from(X,mH)):M().map(pH)},E.ticks=function(X){var se=M();return e(se[0],se[se.length-1],X??10)},E.tickFormat=function(X,se){return se==null?H:S(se)},E.nice=function(X){var se=M();return(!X||typeof X.range!="function")&&(X=t(se[0],se[se.length-1],X??10)),X?M(N5(se,X)):E},E.copy=function(){return ey(E,ST(e,t,r,n,s,d,h,l,_,S))},E}function gH(){return Bs.apply(ST(hG,fG,sc,bT,Q_,ty,_T,yT,Ef,J5).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function yH(){return Bs.apply(ST(uG,cG,lc,wT,e0,J_,xT,vT,Ef,Q5).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function t0(){var e=0,t=1,r,n,s,d,h=uo,l=!1,_;function S(A){return A==null||isNaN(A=+A)?_:h(s===0?.5:(A=(d(A)-r)*s,l?Math.max(0,Math.min(1,A)):A))}S.domain=function(A){return arguments.length?([e,t]=A,r=d(e=+e),n=d(t=+t),s=r===n?0:1/(n-r),S):[e,t]},S.clamp=function(A){return arguments.length?(l=!!A,S):l},S.interpolator=function(A){return arguments.length?(h=A,S):h};function E(A){return function(M){var L,U;return arguments.length?([L,U]=M,h=A(L,U),S):[h(0),h(1)]}}return S.range=E(Np),S.rangeRound=E(lT),S.unknown=function(A){return arguments.length?(_=A,S):_},function(A){return d=A,r=A(e),n=A(t),s=r===n?0:1/(n-r),S}}function hh(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ez(){var e=ch(t0()(uo));return e.copy=function(){return hh(e,ez())},fc.apply(e,arguments)}function tz(){var e=fT(t0()).domain([1,10]);return e.copy=function(){return hh(e,tz()).base(e.base())},fc.apply(e,arguments)}function rz(){var e=dT(t0());return e.copy=function(){return hh(e,rz()).constant(e.constant())},fc.apply(e,arguments)}function PT(){var e=pT(t0());return e.copy=function(){return hh(e,PT()).exponent(e.exponent())},fc.apply(e,arguments)}function vH(){return PT.apply(null,arguments).exponent(.5)}function nz(){var e=[],t=uo;function r(n){if(n!=null&&!isNaN(n=+n))return t((Jg(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(rh),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,d)=>iW(e,d/n))},r.copy=function(){return nz(t).domain(e)},fc.apply(r,arguments)}function r0(){var e=0,t=.5,r=1,n=1,s,d,h,l,_,S=uo,E,A=!1,M;function L(N){return isNaN(N=+N)?M:(N=.5+((N=+E(N))-d)*(n*N<n*d?l:_),S(A?Math.max(0,Math.min(1,N)):N))}L.domain=function(N){return arguments.length?([e,t,r]=N,s=E(e=+e),d=E(t=+t),h=E(r=+r),l=s===d?0:.5/(d-s),_=d===h?0:.5/(h-d),n=d<s?-1:1,L):[e,t,r]},L.clamp=function(N){return arguments.length?(A=!!N,L):A},L.interpolator=function(N){return arguments.length?(S=N,L):S};function U(N){return function(B){var Z,J,Q;return arguments.length?([Z,J,Q]=B,S=IW(N,[Z,J,Q]),L):[S(0),S(.5),S(1)]}}return L.range=U(Np),L.rangeRound=U(lT),L.unknown=function(N){return arguments.length?(M=N,L):M},function(N){return E=N,s=N(e),d=N(t),h=N(r),l=s===d?0:.5/(d-s),_=d===h?0:.5/(h-d),n=d<s?-1:1,L}}function iz(){var e=ch(r0()(uo));return e.copy=function(){return hh(e,iz())},fc.apply(e,arguments)}function az(){var e=fT(r0()).domain([.1,1,10]);return e.copy=function(){return hh(e,az()).base(e.base())},fc.apply(e,arguments)}function oz(){var e=dT(r0());return e.copy=function(){return hh(e,oz()).constant(e.constant())},fc.apply(e,arguments)}function TT(){var e=pT(r0());return e.copy=function(){return hh(e,TT()).exponent(e.exponent())},fc.apply(e,arguments)}function _H(){return TT.apply(null,arguments).exponent(.5)}const mO=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:pg,scaleDiverging:iz,scaleDivergingLog:az,scaleDivergingPow:TT,scaleDivergingSqrt:_H,scaleDivergingSymlog:oz,scaleIdentity:B5,scaleImplicit:tS,scaleLinear:Jv,scaleLog:F5,scaleOrdinal:aT,scalePoint:Xm,scalePow:mT,scaleQuantile:U5,scaleQuantize:q5,scaleRadial:V5,scaleSequential:ez,scaleSequentialLog:tz,scaleSequentialPow:PT,scaleSequentialQuantile:nz,scaleSequentialSqrt:vH,scaleSequentialSymlog:rz,scaleSqrt:QW,scaleSymlog:$5,scaleThreshold:W5,scaleTime:gH,scaleUtc:yH,tickFormat:L5},Symbol.toStringTag,{value:"Module"}));var Sw,gO;function sz(){if(gO)return Sw;gO=1;var e=zp();function t(r,n,s){for(var d=-1,h=r.length;++d<h;){var l=r[d],_=n(l);if(_!=null&&(S===void 0?_===_&&!e(_):s(_,S)))var S=_,E=l}return E}return Sw=t,Sw}var Pw,yO;function xH(){if(yO)return Pw;yO=1;function e(t,r){return t>r}return Pw=e,Pw}var Tw,vO;function bH(){if(vO)return Tw;vO=1;var e=sz(),t=xH(),r=Lp();function n(s){return s&&s.length?e(s,r,t):void 0}return Tw=n,Tw}var wH=bH();const n0=fn(wH);var Aw,_O;function SH(){if(_O)return Aw;_O=1;function e(t,r){return t<r}return Aw=e,Aw}var Ew,xO;function PH(){if(xO)return Ew;xO=1;var e=sz(),t=SH(),r=Lp();function n(s){return s&&s.length?e(s,r,t):void 0}return Ew=n,Ew}var TH=PH();const i0=fn(TH);var Cw,bO;function AH(){if(bO)return Cw;bO=1;var e=$P(),t=uh(),r=m5(),n=Ao();function s(d,h){var l=n(d)?e:r;return l(d,t(h,3))}return Cw=s,Cw}var Mw,wO;function EH(){if(wO)return Mw;wO=1;var e=d5(),t=AH();function r(n,s){return e(t(n,s),1)}return Mw=r,Mw}var CH=EH();const MH=fn(CH);var Iw,SO;function IH(){if(SO)return Iw;SO=1;var e=eT();function t(r,n){return e(r,n)}return Iw=t,Iw}var kH=IH();const a0=fn(kH);var Fp=1e9,OH={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},ET,Ln=!0,Ls="[DecimalError] ",Of=Ls+"Invalid argument: ",AT=Ls+"Exponent out of range: ",$p=Math.floor,Sf=Math.pow,DH=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ts,Ji=1e7,Dn=7,lz=9007199254740991,r_=$p(lz/Dn),qt={};qt.absoluteValue=qt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};qt.comparedTo=qt.cmp=function(e){var t,r,n,s,d=this;if(e=new d.constructor(e),d.s!==e.s)return d.s||-e.s;if(d.e!==e.e)return d.e>e.e^d.s<0?1:-1;for(n=d.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(d.d[t]!==e.d[t])return d.d[t]>e.d[t]^d.s<0?1:-1;return n===s?0:n>s^d.s<0?1:-1};qt.decimalPlaces=qt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Dn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};qt.dividedBy=qt.div=function(e){return ic(this,new this.constructor(e))};qt.dividedToIntegerBy=qt.idiv=function(e){var t=this,r=t.constructor;return wn(ic(t,new r(e),0,1),r.precision)};qt.equals=qt.eq=function(e){return!this.cmp(e)};qt.exponent=function(){return _i(this)};qt.greaterThan=qt.gt=function(e){return this.cmp(e)>0};qt.greaterThanOrEqualTo=qt.gte=function(e){return this.cmp(e)>=0};qt.isInteger=qt.isint=function(){return this.e>this.d.length-2};qt.isNegative=qt.isneg=function(){return this.s<0};qt.isPositive=qt.ispos=function(){return this.s>0};qt.isZero=function(){return this.s===0};qt.lessThan=qt.lt=function(e){return this.cmp(e)<0};qt.lessThanOrEqualTo=qt.lte=function(e){return this.cmp(e)<1};qt.logarithm=qt.log=function(e){var t,r=this,n=r.constructor,s=n.precision,d=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(ts))throw Error(Ls+"NaN");if(r.s<1)throw Error(Ls+(r.s?"NaN":"-Infinity"));return r.eq(ts)?new n(0):(Ln=!1,t=ic(_g(r,d),_g(e,d),d),Ln=!0,wn(t,s))};qt.minus=qt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?hz(t,e):uz(t,(e.s=-e.s,e))};qt.modulo=qt.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Ls+"NaN");return r.s?(Ln=!1,t=ic(r,e,0,1).times(e),Ln=!0,r.minus(t)):wn(new n(r),s)};qt.naturalExponential=qt.exp=function(){return cz(this)};qt.naturalLogarithm=qt.ln=function(){return _g(this)};qt.negated=qt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};qt.plus=qt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?uz(t,e):hz(t,(e.s=-e.s,e))};qt.precision=qt.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Of+e);if(t=_i(s)+1,n=s.d.length-1,r=n*Dn+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};qt.squareRoot=qt.sqrt=function(){var e,t,r,n,s,d,h,l=this,_=l.constructor;if(l.s<1){if(!l.s)return new _(0);throw Error(Ls+"NaN")}for(e=_i(l),Ln=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=su(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=$p((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new _(t)):n=new _(s.toString()),r=_.precision,s=h=r+3;;)if(d=n,n=d.plus(ic(l,d,h+2)).times(.5),su(d.d).slice(0,h)===(t=su(n.d)).slice(0,h)){if(t=t.slice(h-3,h+1),s==h&&t=="4999"){if(wn(d,r+1,0),d.times(d).eq(l)){n=d;break}}else if(t!="9999")break;h+=4}return Ln=!0,wn(n,r)};qt.times=qt.mul=function(e){var t,r,n,s,d,h,l,_,S,E=this,A=E.constructor,M=E.d,L=(e=new A(e)).d;if(!E.s||!e.s)return new A(0);for(e.s*=E.s,r=E.e+e.e,_=M.length,S=L.length,_<S&&(d=M,M=L,L=d,h=_,_=S,S=h),d=[],h=_+S,n=h;n--;)d.push(0);for(n=S;--n>=0;){for(t=0,s=_+n;s>n;)l=d[s]+L[n]*M[s-n-1]+t,d[s--]=l%Ji|0,t=l/Ji|0;d[s]=(d[s]+t)%Ji|0}for(;!d[--h];)d.pop();return t?++r:d.shift(),e.d=d,e.e=r,Ln?wn(e,A.precision):e};qt.toDecimalPlaces=qt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(fu(e,0,Fp),t===void 0?t=n.rounding:fu(t,0,8),wn(r,e+_i(r)+1,t))};qt.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=jf(n,!0):(fu(e,0,Fp),t===void 0?t=s.rounding:fu(t,0,8),n=wn(new s(n),e+1,t),r=jf(n,!0,e+1)),r};qt.toFixed=function(e,t){var r,n,s=this,d=s.constructor;return e===void 0?jf(s):(fu(e,0,Fp),t===void 0?t=d.rounding:fu(t,0,8),n=wn(new d(s),e+_i(s)+1,t),r=jf(n.abs(),!1,e+_i(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};qt.toInteger=qt.toint=function(){var e=this,t=e.constructor;return wn(new t(e),_i(e)+1,t.rounding)};qt.toNumber=function(){return+this};qt.toPower=qt.pow=function(e){var t,r,n,s,d,h,l=this,_=l.constructor,S=12,E=+(e=new _(e));if(!e.s)return new _(ts);if(l=new _(l),!l.s){if(e.s<1)throw Error(Ls+"Infinity");return l}if(l.eq(ts))return l;if(n=_.precision,e.eq(ts))return wn(l,n);if(t=e.e,r=e.d.length-1,h=t>=r,d=l.s,h){if((r=E<0?-E:E)<=lz){for(s=new _(ts),t=Math.ceil(n/Dn+4),Ln=!1;r%2&&(s=s.times(l),TO(s.d,t)),r=$p(r/2),r!==0;)l=l.times(l),TO(l.d,t);return Ln=!0,e.s<0?new _(ts).div(s):wn(s,n)}}else if(d<0)throw Error(Ls+"NaN");return d=d<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Ln=!1,s=e.times(_g(l,n+S)),Ln=!0,s=cz(s),s.s=d,s};qt.toPrecision=function(e,t){var r,n,s=this,d=s.constructor;return e===void 0?(r=_i(s),n=jf(s,r<=d.toExpNeg||r>=d.toExpPos)):(fu(e,1,Fp),t===void 0?t=d.rounding:fu(t,0,8),s=wn(new d(s),e,t),r=_i(s),n=jf(s,e<=r||r<=d.toExpNeg,e)),n};qt.toSignificantDigits=qt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(fu(e,1,Fp),t===void 0?t=n.rounding:fu(t,0,8)),wn(new n(r),e,t)};qt.toString=qt.valueOf=qt.val=qt.toJSON=qt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=_i(e),r=e.constructor;return jf(e,t<=r.toExpNeg||t>=r.toExpPos)};function uz(e,t){var r,n,s,d,h,l,_,S,E=e.constructor,A=E.precision;if(!e.s||!t.s)return t.s||(t=new E(e)),Ln?wn(t,A):t;if(_=e.d,S=t.d,h=e.e,s=t.e,_=_.slice(),d=h-s,d){for(d<0?(n=_,d=-d,l=S.length):(n=S,s=h,l=_.length),h=Math.ceil(A/Dn),l=h>l?h+1:l+1,d>l&&(d=l,n.length=1),n.reverse();d--;)n.push(0);n.reverse()}for(l=_.length,d=S.length,l-d<0&&(d=l,n=S,S=_,_=n),r=0;d;)r=(_[--d]=_[d]+S[d]+r)/Ji|0,_[d]%=Ji;for(r&&(_.unshift(r),++s),l=_.length;_[--l]==0;)_.pop();return t.d=_,t.e=s,Ln?wn(t,A):t}function fu(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Of+e)}function su(e){var t,r,n,s=e.length-1,d="",h=e[0];if(s>0){for(d+=h,t=1;t<s;t++)n=e[t]+"",r=Dn-n.length,r&&(d+=Yc(r)),d+=n;h=e[t],n=h+"",r=Dn-n.length,r&&(d+=Yc(r))}else if(h===0)return"0";for(;h%10===0;)h/=10;return d+h}var ic=(function(){function e(n,s){var d,h=0,l=n.length;for(n=n.slice();l--;)d=n[l]*s+h,n[l]=d%Ji|0,h=d/Ji|0;return h&&n.unshift(h),n}function t(n,s,d,h){var l,_;if(d!=h)_=d>h?1:-1;else for(l=_=0;l<d;l++)if(n[l]!=s[l]){_=n[l]>s[l]?1:-1;break}return _}function r(n,s,d){for(var h=0;d--;)n[d]-=h,h=n[d]<s[d]?1:0,n[d]=h*Ji+n[d]-s[d];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,d,h){var l,_,S,E,A,M,L,U,N,B,Z,J,Q,ie,H,X,se,fe,Se=n.constructor,Be=n.s==s.s?1:-1,xe=n.d,$e=s.d;if(!n.s)return new Se(n);if(!s.s)throw Error(Ls+"Division by zero");for(_=n.e-s.e,se=$e.length,H=xe.length,L=new Se(Be),U=L.d=[],S=0;$e[S]==(xe[S]||0);)++S;if($e[S]>(xe[S]||0)&&--_,d==null?J=d=Se.precision:h?J=d+(_i(n)-_i(s))+1:J=d,J<0)return new Se(0);if(J=J/Dn+2|0,S=0,se==1)for(E=0,$e=$e[0],J++;(S<H||E)&&J--;S++)Q=E*Ji+(xe[S]||0),U[S]=Q/$e|0,E=Q%$e|0;else{for(E=Ji/($e[0]+1)|0,E>1&&($e=e($e,E),xe=e(xe,E),se=$e.length,H=xe.length),ie=se,N=xe.slice(0,se),B=N.length;B<se;)N[B++]=0;fe=$e.slice(),fe.unshift(0),X=$e[0],$e[1]>=Ji/2&&++X;do E=0,l=t($e,N,se,B),l<0?(Z=N[0],se!=B&&(Z=Z*Ji+(N[1]||0)),E=Z/X|0,E>1?(E>=Ji&&(E=Ji-1),A=e($e,E),M=A.length,B=N.length,l=t(A,N,M,B),l==1&&(E--,r(A,se<M?fe:$e,M))):(E==0&&(l=E=1),A=$e.slice()),M=A.length,M<B&&A.unshift(0),r(N,A,B),l==-1&&(B=N.length,l=t($e,N,se,B),l<1&&(E++,r(N,se<B?fe:$e,B))),B=N.length):l===0&&(E++,N=[0]),U[S++]=E,l&&N[0]?N[B++]=xe[ie]||0:(N=[xe[ie]],B=1);while((ie++<H||N[0]!==void 0)&&J--)}return U[0]||U.shift(),L.e=_,wn(L,h?d+_i(L)+1:d)}})();function cz(e,t){var r,n,s,d,h,l,_=0,S=0,E=e.constructor,A=E.precision;if(_i(e)>16)throw Error(AT+_i(e));if(!e.s)return new E(ts);for(Ln=!1,l=A,h=new E(.03125);e.abs().gte(.1);)e=e.times(h),S+=5;for(n=Math.log(Sf(2,S))/Math.LN10*2+5|0,l+=n,r=s=d=new E(ts),E.precision=l;;){if(s=wn(s.times(e),l),r=r.times(++_),h=d.plus(ic(s,r,l)),su(h.d).slice(0,l)===su(d.d).slice(0,l)){for(;S--;)d=wn(d.times(d),l);return E.precision=A,t==null?(Ln=!0,wn(d,A)):d}d=h}}function _i(e){for(var t=e.e*Dn,r=e.d[0];r>=10;r/=10)t++;return t}function kw(e,t,r){if(t>e.LN10.sd())throw Ln=!0,r&&(e.precision=r),Error(Ls+"LN10 precision limit exceeded");return wn(new e(e.LN10),t)}function Yc(e){for(var t="";e--;)t+="0";return t}function _g(e,t){var r,n,s,d,h,l,_,S,E,A=1,M=10,L=e,U=L.d,N=L.constructor,B=N.precision;if(L.s<1)throw Error(Ls+(L.s?"NaN":"-Infinity"));if(L.eq(ts))return new N(0);if(t==null?(Ln=!1,S=B):S=t,L.eq(10))return t==null&&(Ln=!0),kw(N,S);if(S+=M,N.precision=S,r=su(U),n=r.charAt(0),d=_i(L),Math.abs(d)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)L=L.times(e),r=su(L.d),n=r.charAt(0),A++;d=_i(L),n>1?(L=new N("0."+r),d++):L=new N(n+"."+r.slice(1))}else return _=kw(N,S+2,B).times(d+""),L=_g(new N(n+"."+r.slice(1)),S-M).plus(_),N.precision=B,t==null?(Ln=!0,wn(L,B)):L;for(l=h=L=ic(L.minus(ts),L.plus(ts),S),E=wn(L.times(L),S),s=3;;){if(h=wn(h.times(E),S),_=l.plus(ic(h,new N(s),S)),su(_.d).slice(0,S)===su(l.d).slice(0,S))return l=l.times(2),d!==0&&(l=l.plus(kw(N,S+2,B).times(d+""))),l=ic(l,new N(A),S),N.precision=B,t==null?(Ln=!0,wn(l,B)):l;l=_,s+=2}}function PO(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=$p(r/Dn),e.d=[],n=(r+1)%Dn,r<0&&(n+=Dn),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Dn;n<s;)e.d.push(+t.slice(n,n+=Dn));t=t.slice(n),n=Dn-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Ln&&(e.e>r_||e.e<-r_))throw Error(AT+r)}else e.s=0,e.e=0,e.d=[0];return e}function wn(e,t,r){var n,s,d,h,l,_,S,E,A=e.d;for(h=1,d=A[0];d>=10;d/=10)h++;if(n=t-h,n<0)n+=Dn,s=t,S=A[E=0];else{if(E=Math.ceil((n+1)/Dn),d=A.length,E>=d)return e;for(S=d=A[E],h=1;d>=10;d/=10)h++;n%=Dn,s=n-Dn+h}if(r!==void 0&&(d=Sf(10,h-s-1),l=S/d%10|0,_=t<0||A[E+1]!==void 0||S%d,_=r<4?(l||_)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||_||r==6&&(n>0?s>0?S/Sf(10,h-s):0:A[E-1])%10&1||r==(e.s<0?8:7))),t<1||!A[0])return _?(d=_i(e),A.length=1,t=t-d-1,A[0]=Sf(10,(Dn-t%Dn)%Dn),e.e=$p(-t/Dn)||0):(A.length=1,A[0]=e.e=e.s=0),e;if(n==0?(A.length=E,d=1,E--):(A.length=E+1,d=Sf(10,Dn-n),A[E]=s>0?(S/Sf(10,h-s)%Sf(10,s)|0)*d:0),_)for(;;)if(E==0){(A[0]+=d)==Ji&&(A[0]=1,++e.e);break}else{if(A[E]+=d,A[E]!=Ji)break;A[E--]=0,d=1}for(n=A.length;A[--n]===0;)A.pop();if(Ln&&(e.e>r_||e.e<-r_))throw Error(AT+_i(e));return e}function hz(e,t){var r,n,s,d,h,l,_,S,E,A,M=e.constructor,L=M.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new M(e),Ln?wn(t,L):t;if(_=e.d,A=t.d,n=t.e,S=e.e,_=_.slice(),h=S-n,h){for(E=h<0,E?(r=_,h=-h,l=A.length):(r=A,n=S,l=_.length),s=Math.max(Math.ceil(L/Dn),l)+2,h>s&&(h=s,r.length=1),r.reverse(),s=h;s--;)r.push(0);r.reverse()}else{for(s=_.length,l=A.length,E=s<l,E&&(l=s),s=0;s<l;s++)if(_[s]!=A[s]){E=_[s]<A[s];break}h=0}for(E&&(r=_,_=A,A=r,t.s=-t.s),l=_.length,s=A.length-l;s>0;--s)_[l++]=0;for(s=A.length;s>h;){if(_[--s]<A[s]){for(d=s;d&&_[--d]===0;)_[d]=Ji-1;--_[d],_[s]+=Ji}_[s]-=A[s]}for(;_[--l]===0;)_.pop();for(;_[0]===0;_.shift())--n;return _[0]?(t.d=_,t.e=n,Ln?wn(t,L):t):new M(0)}function jf(e,t,r){var n,s=_i(e),d=su(e.d),h=d.length;return t?(r&&(n=r-h)>0?d=d.charAt(0)+"."+d.slice(1)+Yc(n):h>1&&(d=d.charAt(0)+"."+d.slice(1)),d=d+(s<0?"e":"e+")+s):s<0?(d="0."+Yc(-s-1)+d,r&&(n=r-h)>0&&(d+=Yc(n))):s>=h?(d+=Yc(s+1-h),r&&(n=r-s-1)>0&&(d=d+"."+Yc(n))):((n=s+1)<h&&(d=d.slice(0,n)+"."+d.slice(n)),r&&(n=r-h)>0&&(s+1===h&&(d+="."),d+=Yc(n))),e.s<0?"-"+d:d}function TO(e,t){if(e.length>t)return e.length=t,!0}function fz(e){var t,r,n;function s(d){var h=this;if(!(h instanceof s))return new s(d);if(h.constructor=s,d instanceof s){h.s=d.s,h.e=d.e,h.d=(d=d.d)?d.slice():d;return}if(typeof d=="number"){if(d*0!==0)throw Error(Of+d);if(d>0)h.s=1;else if(d<0)d=-d,h.s=-1;else{h.s=0,h.e=0,h.d=[0];return}if(d===~~d&&d<1e7){h.e=0,h.d=[d];return}return PO(h,d.toString())}else if(typeof d!="string")throw Error(Of+d);if(d.charCodeAt(0)===45?(d=d.slice(1),h.s=-1):h.s=1,DH.test(d))PO(h,d);else throw Error(Of+d)}if(s.prototype=qt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=fz,s.config=s.set=RH,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function RH(e){if(!e||typeof e!="object")throw Error(Ls+"Object expected");var t,r,n,s=["precision",1,Fp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if($p(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Of+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Of+r+": "+n);return this}var ET=fz(OH);ts=new ET(1);const vn=ET;function zH(e){return NH(e)||BH(e)||LH(e)||jH()}function jH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LH(e,t){if(e){if(typeof e=="string")return aS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aS(e,t)}}function BH(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function NH(e){if(Array.isArray(e))return aS(e)}function aS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var FH=function(t){return t},dz={},pz=function(t){return t===dz},AO=function(t){return function r(){return arguments.length===0||arguments.length===1&&pz(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},$H=function e(t,r){return t===1?r:AO(function(){for(var n=arguments.length,s=new Array(n),d=0;d<n;d++)s[d]=arguments[d];var h=s.filter(function(l){return l!==dz}).length;return h>=t?r.apply(void 0,s):e(t-h,AO(function(){for(var l=arguments.length,_=new Array(l),S=0;S<l;S++)_[S]=arguments[S];var E=s.map(function(A){return pz(A)?_.shift():A});return r.apply(void 0,zH(E).concat(_))}))})},o0=function(t){return $H(t.length,t)},oS=function(t,r){for(var n=[],s=t;s<r;++s)n[s-t]=s;return n},VH=o0(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),UH=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return FH;var s=r.reverse(),d=s[0],h=s.slice(1);return function(){return h.reduce(function(l,_){return _(l)},d.apply(void 0,arguments))}},sS=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},mz=function(t){var r=null,n=null;return function(){for(var s=arguments.length,d=new Array(s),h=0;h<s;h++)d[h]=arguments[h];return r&&d.every(function(l,_){return l===r[_]})||(r=d,n=t.apply(void 0,d)),n}};function qH(e){var t;return e===0?t=1:t=Math.floor(new vn(e).abs().log(10).toNumber())+1,t}function WH(e,t,r){for(var n=new vn(e),s=0,d=[];n.lt(t)&&s<1e5;)d.push(n.toNumber()),n=n.add(r),s++;return d}var GH=o0(function(e,t,r){var n=+e,s=+t;return n+r*(s-n)}),HH=o0(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),ZH=o0(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const s0={rangeStep:WH,getDigitCount:qH,interpolateNumber:GH,uninterpolateNumber:HH,uninterpolateTruncation:ZH};function lS(e){return YH(e)||XH(e)||gz(e)||KH()}function KH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XH(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function YH(e){if(Array.isArray(e))return uS(e)}function xg(e,t){return eZ(e)||QH(e,t)||gz(e,t)||JH()}function JH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gz(e,t){if(e){if(typeof e=="string")return uS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uS(e,t)}}function uS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function QH(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,s=!1,d=void 0;try{for(var h=e[Symbol.iterator](),l;!(n=(l=h.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(_){s=!0,d=_}finally{try{!n&&h.return!=null&&h.return()}finally{if(s)throw d}}return r}}function eZ(e){if(Array.isArray(e))return e}function yz(e){var t=xg(e,2),r=t[0],n=t[1],s=r,d=n;return r>n&&(s=n,d=r),[s,d]}function vz(e,t,r){if(e.lte(0))return new vn(0);var n=s0.getDigitCount(e.toNumber()),s=new vn(10).pow(n),d=e.div(s),h=n!==1?.05:.1,l=new vn(Math.ceil(d.div(h).toNumber())).add(r).mul(h),_=l.mul(s);return t?_:new vn(Math.ceil(_))}function tZ(e,t,r){var n=1,s=new vn(e);if(!s.isint()&&r){var d=Math.abs(e);d<1?(n=new vn(10).pow(s0.getDigitCount(e)-1),s=new vn(Math.floor(s.div(n).toNumber())).mul(n)):d>1&&(s=new vn(Math.floor(e)))}else e===0?s=new vn(Math.floor((t-1)/2)):r||(s=new vn(Math.floor(e)));var h=Math.floor((t-1)/2),l=UH(VH(function(_){return s.add(new vn(_-h).mul(n)).toNumber()}),oS);return l(0,t)}function _z(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new vn(0),tickMin:new vn(0),tickMax:new vn(0)};var d=vz(new vn(t).sub(e).div(r-1),n,s),h;e<=0&&t>=0?h=new vn(0):(h=new vn(e).add(t).div(2),h=h.sub(new vn(h).mod(d)));var l=Math.ceil(h.sub(e).div(d).toNumber()),_=Math.ceil(new vn(t).sub(h).div(d).toNumber()),S=l+_+1;return S>r?_z(e,t,r,n,s+1):(S<r&&(_=t>0?_+(r-S):_,l=t>0?l:l+(r-S)),{step:d,tickMin:h.sub(new vn(l).mul(d)),tickMax:h.add(new vn(_).mul(d))})}function rZ(e){var t=xg(e,2),r=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=Math.max(s,2),l=yz([r,n]),_=xg(l,2),S=_[0],E=_[1];if(S===-1/0||E===1/0){var A=E===1/0?[S].concat(lS(oS(0,s-1).map(function(){return 1/0}))):[].concat(lS(oS(0,s-1).map(function(){return-1/0})),[E]);return r>n?sS(A):A}if(S===E)return tZ(S,s,d);var M=_z(S,E,h,d),L=M.step,U=M.tickMin,N=M.tickMax,B=s0.rangeStep(U,N.add(new vn(.1).mul(L)),L);return r>n?sS(B):B}function nZ(e,t){var r=xg(e,2),n=r[0],s=r[1],d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=yz([n,s]),l=xg(h,2),_=l[0],S=l[1];if(_===-1/0||S===1/0)return[n,s];if(_===S)return[_];var E=Math.max(t,2),A=vz(new vn(S).sub(_).div(E-1),d,0),M=[].concat(lS(s0.rangeStep(new vn(_),new vn(S).sub(new vn(.99).mul(A)),A)),[S]);return n>s?sS(M):M}var iZ=mz(rZ),aZ=mz(nZ),oZ="Invariant failed";function Lf(e,t){throw new Error(oZ)}var sZ=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function yp(e){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yp(e)}function n_(){return n_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n_.apply(this,arguments)}function lZ(e,t){return fZ(e)||hZ(e,t)||cZ(e,t)||uZ()}function uZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cZ(e,t){if(e){if(typeof e=="string")return EO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EO(e,t)}}function EO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,S=!1;try{if(d=(r=r.call(e)).next,t!==0)for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){S=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(S)throw s}}return l}}function fZ(e){if(Array.isArray(e))return e}function dZ(e,t){if(e==null)return{};var r=pZ(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function mZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wz(n.key),n)}}function yZ(e,t,r){return t&&gZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vZ(e,t,r){return t=i_(t),_Z(e,xz()?Reflect.construct(t,r||[],i_(e).constructor):t.apply(e,r))}function _Z(e,t){if(t&&(yp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xZ(e)}function xZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xz=function(){return!!e})()}function i_(e){return i_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},i_(e)}function bZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cS(e,t)}function cS(e,t){return cS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},cS(e,t)}function bz(e,t,r){return t=wz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wz(e){var t=wZ(e,"string");return yp(t)=="symbol"?t:t+""}function wZ(e,t){if(yp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ry=(function(e){function t(){return mZ(this,t),vZ(this,t,arguments)}return bZ(t,e),yZ(t,[{key:"render",value:function(){var n=this.props,s=n.offset,d=n.layout,h=n.width,l=n.dataKey,_=n.data,S=n.dataPointFormatter,E=n.xAxis,A=n.yAxis,M=dZ(n,sZ),L=$r(M,!1);this.props.direction==="x"&&E.type!=="number"&&Lf();var U=_.map(function(N){var B=S(N,l),Z=B.x,J=B.y,Q=B.value,ie=B.errorVal;if(!ie)return null;var H=[],X,se;if(Array.isArray(ie)){var fe=lZ(ie,2);X=fe[0],se=fe[1]}else X=se=ie;if(d==="vertical"){var Se=E.scale,Be=J+s,xe=Be+h,$e=Be-h,Fe=Se(Q-X),Ke=Se(Q+se);H.push({x1:Ke,y1:xe,x2:Ke,y2:$e}),H.push({x1:Fe,y1:Be,x2:Ke,y2:Be}),H.push({x1:Fe,y1:xe,x2:Fe,y2:$e})}else if(d==="horizontal"){var Xe=A.scale,rt=Z+s,Qe=rt-h,We=rt+h,tt=Xe(Q-X),nt=Xe(Q+se);H.push({x1:Qe,y1:nt,x2:We,y2:nt}),H.push({x1:rt,y1:tt,x2:rt,y2:nt}),H.push({x1:Qe,y1:tt,x2:We,y2:tt})}return ze.createElement(ui,n_({className:"recharts-errorBar",key:"bar-".concat(H.map(function(Ae){return"".concat(Ae.x1,"-").concat(Ae.x2,"-").concat(Ae.y1,"-").concat(Ae.y2)}))},L),H.map(function(Ae){return ze.createElement("line",n_({},Ae,{key:"line-".concat(Ae.x1,"-").concat(Ae.x2,"-").concat(Ae.y1,"-").concat(Ae.y2)}))}))});return ze.createElement(ui,{className:"recharts-errorBars"},U)}}])})(ze.Component);bz(ry,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});bz(ry,"displayName","ErrorBar");function bg(e){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}function CO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _f(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CO(Object(r),!0).forEach(function(n){SZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SZ(e,t,r){return t=PZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PZ(e){var t=TZ(e,"string");return bg(t)=="symbol"?t:t+""}function TZ(e,t){if(bg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sz=function(t){var r=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,d=t.legendContent,h=es(r,If);if(!h)return null;var l=If.defaultProps,_=l!==void 0?_f(_f({},l),h.props):{},S;return h.props&&h.props.payload?S=h.props&&h.props.payload:d==="children"?S=(n||[]).reduce(function(E,A){var M=A.item,L=A.props,U=L.sectors||L.data||[];return E.concat(U.map(function(N){return{type:h.props.iconType||M.props.legendType,value:N.name,color:N.fill,payload:N}}))},[]):S=(n||[]).map(function(E){var A=E.item,M=A.type.defaultProps,L=M!==void 0?_f(_f({},M),A.props):{},U=L.dataKey,N=L.name,B=L.legendType,Z=L.hide;return{inactive:Z,dataKey:U,type:_.iconType||B||"square",color:CT(A),value:N||U,payload:L}}),_f(_f(_f({},_),If.getWithHeight(h,s)),{},{payload:S,item:h})};function wg(e){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wg(e)}function MO(e){return MZ(e)||CZ(e)||EZ(e)||AZ()}function AZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EZ(e,t){if(e){if(typeof e=="string")return hS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hS(e,t)}}function CZ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function MZ(e){if(Array.isArray(e))return hS(e)}function hS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function IO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ei(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IO(Object(r),!0).forEach(function(n){ip(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ip(e,t,r){return t=IZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IZ(e){var t=kZ(e,"string");return wg(t)=="symbol"?t:t+""}function kZ(e,t){if(wg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function is(e,t,r){return Dr(e)||Dr(t)?r:Oi(t)?zs(e,t,r):Mr(t)?t(e):r}function Ym(e,t,r,n){var s=MH(e,function(l){return is(l,t)});if(r==="number"){var d=s.filter(function(l){return Ot(l)||parseFloat(l)});return d.length?[i0(d),n0(d)]:[1/0,-1/0]}var h=n?s.filter(function(l){return!Dr(l)}):s;return h.map(function(l){return Oi(l)||l instanceof Date?l:""})}var OZ=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,d=arguments.length>3?arguments[3]:void 0,h=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(d&&d.axisType==="angleAxis"&&Math.abs(Math.abs(d.range[1]-d.range[0])-360)<=1e-6)for(var _=d.range,S=0;S<l;S++){var E=S>0?s[S-1].coordinate:s[l-1].coordinate,A=s[S].coordinate,M=S>=l-1?s[0].coordinate:s[S+1].coordinate,L=void 0;if(gl(A-E)!==gl(M-A)){var U=[];if(gl(M-A)===gl(_[1]-_[0])){L=M;var N=A+_[1]-_[0];U[0]=Math.min(N,(N+E)/2),U[1]=Math.max(N,(N+E)/2)}else{L=E;var B=M+_[1]-_[0];U[0]=Math.min(A,(B+A)/2),U[1]=Math.max(A,(B+A)/2)}var Z=[Math.min(A,(L+A)/2),Math.max(A,(L+A)/2)];if(t>Z[0]&&t<=Z[1]||t>=U[0]&&t<=U[1]){h=s[S].index;break}}else{var J=Math.min(E,M),Q=Math.max(E,M);if(t>(J+A)/2&&t<=(Q+A)/2){h=s[S].index;break}}}else for(var ie=0;ie<l;ie++)if(ie===0&&t<=(n[ie].coordinate+n[ie+1].coordinate)/2||ie>0&&ie<l-1&&t>(n[ie].coordinate+n[ie-1].coordinate)/2&&t<=(n[ie].coordinate+n[ie+1].coordinate)/2||ie===l-1&&t>(n[ie].coordinate+n[ie-1].coordinate)/2){h=n[ie].index;break}return h},CT=function(t){var r,n=t,s=n.type.displayName,d=(r=t.type)!==null&&r!==void 0&&r.defaultProps?ei(ei({},t.type.defaultProps),t.props):t.props,h=d.stroke,l=d.fill,_;switch(s){case"Line":_=h;break;case"Area":case"Radar":_=h&&h!=="none"?h:l;break;default:_=l;break}return _},DZ=function(t){var r=t.barSize,n=t.totalSize,s=t.stackGroups,d=s===void 0?{}:s;if(!d)return{};for(var h={},l=Object.keys(d),_=0,S=l.length;_<S;_++)for(var E=d[l[_]].stackGroups,A=Object.keys(E),M=0,L=A.length;M<L;M++){var U=E[A[M]],N=U.items,B=U.cateAxisId,Z=N.filter(function(se){return rc(se.type).indexOf("Bar")>=0});if(Z&&Z.length){var J=Z[0].type.defaultProps,Q=J!==void 0?ei(ei({},J),Z[0].props):Z[0].props,ie=Q.barSize,H=Q[B];h[H]||(h[H]=[]);var X=Dr(ie)?r:ie;h[H].push({item:Z[0],stackList:Z.slice(1),barSize:Dr(X)?void 0:zf(X,n,0)})}}return h},RZ=function(t){var r=t.barGap,n=t.barCategoryGap,s=t.bandSize,d=t.sizeList,h=d===void 0?[]:d,l=t.maxBarSize,_=h.length;if(_<1)return null;var S=zf(r,s,0,!0),E,A=[];if(h[0].barSize===+h[0].barSize){var M=!1,L=s/_,U=h.reduce(function(ie,H){return ie+H.barSize||0},0);U+=(_-1)*S,U>=s&&(U-=(_-1)*S,S=0),U>=s&&L>0&&(M=!0,L*=.9,U=_*L);var N=(s-U)/2>>0,B={offset:N-S,size:0};E=h.reduce(function(ie,H){var X={item:H.item,position:{offset:B.offset+B.size+S,size:M?L:H.barSize}},se=[].concat(MO(ie),[X]);return B=se[se.length-1].position,H.stackList&&H.stackList.length&&H.stackList.forEach(function(fe){se.push({item:fe,position:B})}),se},A)}else{var Z=zf(n,s,0,!0);s-2*Z-(_-1)*S<=0&&(S=0);var J=(s-2*Z-(_-1)*S)/_;J>1&&(J>>=0);var Q=l===+l?Math.min(J,l):J;E=h.reduce(function(ie,H,X){var se=[].concat(MO(ie),[{item:H.item,position:{offset:Z+(J+S)*X+(J-Q)/2,size:Q}}]);return H.stackList&&H.stackList.length&&H.stackList.forEach(function(fe){se.push({item:fe,position:se[se.length-1].position})}),se},A)}return E},zZ=function(t,r,n,s){var d=n.children,h=n.width,l=n.margin,_=h-(l.left||0)-(l.right||0),S=Sz({children:d,legendWidth:_});if(S){var E=s||{},A=E.width,M=E.height,L=S.align,U=S.verticalAlign,N=S.layout;if((N==="vertical"||N==="horizontal"&&U==="middle")&&L!=="center"&&Ot(t[L]))return ei(ei({},t),{},ip({},L,t[L]+(A||0)));if((N==="horizontal"||N==="vertical"&&L==="center")&&U!=="middle"&&Ot(t[U]))return ei(ei({},t),{},ip({},U,t[U]+(M||0)))}return t},jZ=function(t,r,n){return Dr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},Pz=function(t,r,n,s,d){var h=r.props.children,l=js(h,ry).filter(function(S){return jZ(s,d,S.props.direction)});if(l&&l.length){var _=l.map(function(S){return S.props.dataKey});return t.reduce(function(S,E){var A=is(E,n);if(Dr(A))return S;var M=Array.isArray(A)?[i0(A),n0(A)]:[A,A],L=_.reduce(function(U,N){var B=is(E,N,0),Z=M[0]-Math.abs(Array.isArray(B)?B[0]:B),J=M[1]+Math.abs(Array.isArray(B)?B[1]:B);return[Math.min(Z,U[0]),Math.max(J,U[1])]},[1/0,-1/0]);return[Math.min(L[0],S[0]),Math.max(L[1],S[1])]},[1/0,-1/0])}return null},LZ=function(t,r,n,s,d){var h=r.map(function(l){return Pz(t,l,n,d,s)}).filter(function(l){return!Dr(l)});return h&&h.length?h.reduce(function(l,_){return[Math.min(l[0],_[0]),Math.max(l[1],_[1])]},[1/0,-1/0]):null},Tz=function(t,r,n,s,d){var h=r.map(function(_){var S=_.props.dataKey;return n==="number"&&S&&Pz(t,_,S,s)||Ym(t,S,n,d)});if(n==="number")return h.reduce(function(_,S){return[Math.min(_[0],S[0]),Math.max(_[1],S[1])]},[1/0,-1/0]);var l={};return h.reduce(function(_,S){for(var E=0,A=S.length;E<A;E++)l[S[E]]||(l[S[E]]=!0,_.push(S[E]));return _},[])},Az=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},Ez=function(t,r,n,s){if(s)return t.map(function(_){return _.coordinate});var d,h,l=t.map(function(_){return _.coordinate===r&&(d=!0),_.coordinate===n&&(h=!0),_.coordinate});return d||l.push(r),h||l.push(n),l},Qu=function(t,r,n){if(!t)return null;var s=t.scale,d=t.duplicateDomain,h=t.type,l=t.range,_=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,S=(r||n)&&h==="category"&&s.bandwidth?s.bandwidth()/_:0;if(S=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?gl(l[0]-l[1])*2*S:S,r&&(t.ticks||t.niceTicks)){var E=(t.ticks||t.niceTicks).map(function(A){var M=d?d.indexOf(A):A;return{coordinate:s(M)+S,value:A,offset:S}});return E.filter(function(A){return!Kg(A.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(A,M){return{coordinate:s(A)+S,value:A,index:M,offset:S}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(A){return{coordinate:s(A)+S,value:A,offset:S}}):s.domain().map(function(A,M){return{coordinate:s(A)+S,value:d?d[A]:A,index:M,offset:S}})},Ow=new WeakMap,lv=function(t,r){if(typeof r!="function")return t;Ow.has(t)||Ow.set(t,new WeakMap);var n=Ow.get(t);if(n.has(r))return n.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},BZ=function(t,r,n){var s=t.scale,d=t.type,h=t.layout,l=t.axisType;if(s==="auto")return h==="radial"&&l==="radiusAxis"?{scale:pg(),realScaleType:"band"}:h==="radial"&&l==="angleAxis"?{scale:Jv(),realScaleType:"linear"}:d==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Xm(),realScaleType:"point"}:d==="category"?{scale:pg(),realScaleType:"band"}:{scale:Jv(),realScaleType:"linear"};if(Rf(s)){var _="scale".concat(q_(s));return{scale:(mO[_]||Xm)(),realScaleType:mO[_]?_:"point"}}return Mr(s)?{scale:s}:{scale:Xm(),realScaleType:"point"}},kO=1e-4,NZ=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,s=t.range(),d=Math.min(s[0],s[1])-kO,h=Math.max(s[0],s[1])+kO,l=t(r[0]),_=t(r[n-1]);(l<d||l>h||_<d||_>h)&&t.domain([r[0],r[n-1]])}},FZ=function(t,r){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===r)return t[n].position;return null},$Z=function(t,r){if(!r||r.length!==2||!Ot(r[0])||!Ot(r[1]))return t;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),d=[t[0],t[1]];return(!Ot(t[0])||t[0]<n)&&(d[0]=n),(!Ot(t[1])||t[1]>s)&&(d[1]=s),d[0]>s&&(d[0]=s),d[1]<n&&(d[1]=n),d},VZ=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var d=0,h=0,l=0;l<r;++l){var _=Kg(t[l][n][1])?t[l][n][0]:t[l][n][1];_>=0?(t[l][n][0]=d,t[l][n][1]=d+_,d=t[l][n][1]):(t[l][n][0]=h,t[l][n][1]=h+_,h=t[l][n][1])}},UZ=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var d=0,h=0;h<r;++h){var l=Kg(t[h][n][1])?t[h][n][0]:t[h][n][1];l>=0?(t[h][n][0]=d,t[h][n][1]=d+l,d=t[h][n][1]):(t[h][n][0]=0,t[h][n][1]=0)}},qZ={sign:VZ,expand:A7,none:up,silhouette:E7,wiggle:C7,positive:UZ},WZ=function(t,r,n){var s=r.map(function(l){return l.props.dataKey}),d=qZ[n],h=T7().keys(s).value(function(l,_){return+is(l,_,0)}).order($2).offset(d);return h(t)},GZ=function(t,r,n,s,d,h){if(!t)return null;var l=h?r.reverse():r,_={},S=l.reduce(function(A,M){var L,U=(L=M.type)!==null&&L!==void 0&&L.defaultProps?ei(ei({},M.type.defaultProps),M.props):M.props,N=U.stackId,B=U.hide;if(B)return A;var Z=U[n],J=A[Z]||{hasStack:!1,stackGroups:{}};if(Oi(N)){var Q=J.stackGroups[N]||{numericAxisId:n,cateAxisId:s,items:[]};Q.items.push(M),J.hasStack=!0,J.stackGroups[N]=Q}else J.stackGroups[Xg("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[M]};return ei(ei({},A),{},ip({},Z,J))},_),E={};return Object.keys(S).reduce(function(A,M){var L=S[M];if(L.hasStack){var U={};L.stackGroups=Object.keys(L.stackGroups).reduce(function(N,B){var Z=L.stackGroups[B];return ei(ei({},N),{},ip({},B,{numericAxisId:n,cateAxisId:s,items:Z.items,stackedData:WZ(t,Z.items,d)}))},U)}return ei(ei({},A),{},ip({},M,L))},E)},HZ=function(t,r){var n=r.realScaleType,s=r.type,d=r.tickCount,h=r.originalDomain,l=r.allowDecimals,_=n||r.scale;if(_!=="auto"&&_!=="linear")return null;if(d&&s==="number"&&h&&(h[0]==="auto"||h[1]==="auto")){var S=t.domain();if(!S.length)return null;var E=iZ(S,d,l);return t.domain([i0(E),n0(E)]),{niceTicks:E}}if(d&&s==="number"){var A=t.domain(),M=aZ(A,d,l);return{niceTicks:M}}return null};function OO(e){var t=e.axis,r=e.ticks,n=e.bandSize,s=e.entry,d=e.index,h=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Dr(s[t.dataKey])){var l=Ov(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[d]?r[d].coordinate+n/2:null}var _=is(s,Dr(h)?t.dataKey:h);return Dr(_)?null:t.scale(_)}var DO=function(t){var r=t.axis,n=t.ticks,s=t.offset,d=t.bandSize,h=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+s:null;var _=is(h,r.dataKey,r.domain[l]);return Dr(_)?null:r.scale(_)-d/2+s},ZZ=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),d=Math.max(n[0],n[1]);return s<=0&&d>=0?0:d<0?d:s}return n[0]},KZ=function(t,r){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?ei(ei({},t.type.defaultProps),t.props):t.props,d=s.stackId;if(Oi(d)){var h=r[d];if(h){var l=h.items.indexOf(t);return l>=0?h.stackedData[l]:null}}return null},XZ=function(t){return t.reduce(function(r,n){return[i0(n.concat([r[0]]).filter(Ot)),n0(n.concat([r[1]]).filter(Ot))]},[1/0,-1/0])},Cz=function(t,r,n){return Object.keys(t).reduce(function(s,d){var h=t[d],l=h.stackedData,_=l.reduce(function(S,E){var A=XZ(E.slice(r,n+1));return[Math.min(S[0],A[0]),Math.max(S[1],A[1])]},[1/0,-1/0]);return[Math.min(_[0],s[0]),Math.max(_[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},RO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,zO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fS=function(t,r,n){if(Mr(t))return t(r,n);if(!Array.isArray(t))return r;var s=[];if(Ot(t[0]))s[0]=n?t[0]:Math.min(t[0],r[0]);else if(RO.test(t[0])){var d=+RO.exec(t[0])[1];s[0]=r[0]-d}else Mr(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(Ot(t[1]))s[1]=n?t[1]:Math.max(t[1],r[1]);else if(zO.test(t[1])){var h=+zO.exec(t[1])[1];s[1]=r[1]+h}else Mr(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},a_=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&r&&r.length>=2){for(var d=rT(r,function(A){return A.coordinate}),h=1/0,l=1,_=d.length;l<_;l++){var S=d[l],E=d[l-1];h=Math.min((S.coordinate||0)-(E.coordinate||0),h)}return h===1/0?0:h}return n?void 0:0},jO=function(t,r,n){return!t||!t.length||a0(t,zs(n,"type.defaultProps.domain"))?r:t},Mz=function(t,r){var n=t.type.defaultProps?ei(ei({},t.type.defaultProps),t.props):t.props,s=n.dataKey,d=n.name,h=n.unit,l=n.formatter,_=n.tooltipType,S=n.chartType,E=n.hide;return ei(ei({},$r(t,!1)),{},{dataKey:s,unit:h,formatter:l,name:d||s,color:CT(t),value:is(r,s),type:_,payload:r,chartType:S,hide:E})};function Sg(e){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sg(e)}function LO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function BO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(r),!0).forEach(function(n){YZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YZ(e,t,r){return t=JZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JZ(e){var t=QZ(e,"string");return Sg(t)=="symbol"?t:t+""}function QZ(e,t){if(Sg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o_=Math.PI/180,eK=function(t){return t*180/Math.PI},ya=function(t,r,n,s){return{x:t+Math.cos(-o_*s)*n,y:r+Math.sin(-o_*s)*n}},tK=function(t,r){var n=t.x,s=t.y,d=r.x,h=r.y;return Math.sqrt(Math.pow(n-d,2)+Math.pow(s-h,2))},rK=function(t,r){var n=t.x,s=t.y,d=r.cx,h=r.cy,l=tK({x:n,y:s},{x:d,y:h});if(l<=0)return{radius:l};var _=(n-d)/l,S=Math.acos(_);return s>h&&(S=2*Math.PI-S),{radius:l,angle:eK(S),angleInRadian:S}},nK=function(t){var r=t.startAngle,n=t.endAngle,s=Math.floor(r/360),d=Math.floor(n/360),h=Math.min(s,d);return{startAngle:r-h*360,endAngle:n-h*360}},iK=function(t,r){var n=r.startAngle,s=r.endAngle,d=Math.floor(n/360),h=Math.floor(s/360),l=Math.min(d,h);return t+l*360},NO=function(t,r){var n=t.x,s=t.y,d=rK({x:n,y:s},r),h=d.radius,l=d.angle,_=r.innerRadius,S=r.outerRadius;if(h<_||h>S)return!1;if(h===0)return!0;var E=nK(r),A=E.startAngle,M=E.endAngle,L=l,U;if(A<=M){for(;L>M;)L-=360;for(;L<A;)L+=360;U=L>=A&&L<=M}else{for(;L>A;)L-=360;for(;L<M;)L+=360;U=L>=M&&L<=A}return U?BO(BO({},r),{},{radius:h,angle:iK(L,r)}):null};function Pg(e){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pg(e)}var aK=["offset"];function oK(e){return cK(e)||uK(e)||lK(e)||sK()}function sK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lK(e,t){if(e){if(typeof e=="string")return dS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dS(e,t)}}function uK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cK(e){if(Array.isArray(e))return dS(e)}function dS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hK(e,t){if(e==null)return{};var r=fK(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function FO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ki(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FO(Object(r),!0).forEach(function(n){dK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dK(e,t,r){return t=pK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pK(e){var t=mK(e,"string");return Pg(t)=="symbol"?t:t+""}function mK(e,t){if(Pg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tg(){return Tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tg.apply(this,arguments)}var gK=function(t){var r=t.value,n=t.formatter,s=Dr(t.children)?r:t.children;return Mr(n)?n(s):s},yK=function(t,r){var n=gl(r-t),s=Math.min(Math.abs(r-t),360);return n*s},vK=function(t,r,n){var s=t.position,d=t.viewBox,h=t.offset,l=t.className,_=d,S=_.cx,E=_.cy,A=_.innerRadius,M=_.outerRadius,L=_.startAngle,U=_.endAngle,N=_.clockWise,B=(A+M)/2,Z=yK(L,U),J=Z>=0?1:-1,Q,ie;s==="insideStart"?(Q=L+J*h,ie=N):s==="insideEnd"?(Q=U-J*h,ie=!N):s==="end"&&(Q=U+J*h,ie=N),ie=Z<=0?ie:!ie;var H=ya(S,E,B,Q),X=ya(S,E,B,Q+(ie?1:-1)*359),se="M".concat(H.x,",").concat(H.y,`
    A`).concat(B,",").concat(B,",0,1,").concat(ie?0:1,`,
    `).concat(X.x,",").concat(X.y),fe=Dr(t.id)?Xg("recharts-radial-line-"):t.id;return ze.createElement("text",Tg({},n,{dominantBaseline:"central",className:Wr("recharts-radial-bar-label",l)}),ze.createElement("defs",null,ze.createElement("path",{id:fe,d:se})),ze.createElement("textPath",{xlinkHref:"#".concat(fe)},r))},_K=function(t){var r=t.viewBox,n=t.offset,s=t.position,d=r,h=d.cx,l=d.cy,_=d.innerRadius,S=d.outerRadius,E=d.startAngle,A=d.endAngle,M=(E+A)/2;if(s==="outside"){var L=ya(h,l,S+n,M),U=L.x,N=L.y;return{x:U,y:N,textAnchor:U>=h?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:h,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:h,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:h,y:l,textAnchor:"middle",verticalAnchor:"end"};var B=(_+S)/2,Z=ya(h,l,B,M),J=Z.x,Q=Z.y;return{x:J,y:Q,textAnchor:"middle",verticalAnchor:"middle"}},xK=function(t){var r=t.viewBox,n=t.parentViewBox,s=t.offset,d=t.position,h=r,l=h.x,_=h.y,S=h.width,E=h.height,A=E>=0?1:-1,M=A*s,L=A>0?"end":"start",U=A>0?"start":"end",N=S>=0?1:-1,B=N*s,Z=N>0?"end":"start",J=N>0?"start":"end";if(d==="top"){var Q={x:l+S/2,y:_-A*s,textAnchor:"middle",verticalAnchor:L};return ki(ki({},Q),n?{height:Math.max(_-n.y,0),width:S}:{})}if(d==="bottom"){var ie={x:l+S/2,y:_+E+M,textAnchor:"middle",verticalAnchor:U};return ki(ki({},ie),n?{height:Math.max(n.y+n.height-(_+E),0),width:S}:{})}if(d==="left"){var H={x:l-B,y:_+E/2,textAnchor:Z,verticalAnchor:"middle"};return ki(ki({},H),n?{width:Math.max(H.x-n.x,0),height:E}:{})}if(d==="right"){var X={x:l+S+B,y:_+E/2,textAnchor:J,verticalAnchor:"middle"};return ki(ki({},X),n?{width:Math.max(n.x+n.width-X.x,0),height:E}:{})}var se=n?{width:S,height:E}:{};return d==="insideLeft"?ki({x:l+B,y:_+E/2,textAnchor:J,verticalAnchor:"middle"},se):d==="insideRight"?ki({x:l+S-B,y:_+E/2,textAnchor:Z,verticalAnchor:"middle"},se):d==="insideTop"?ki({x:l+S/2,y:_+M,textAnchor:"middle",verticalAnchor:U},se):d==="insideBottom"?ki({x:l+S/2,y:_+E-M,textAnchor:"middle",verticalAnchor:L},se):d==="insideTopLeft"?ki({x:l+B,y:_+M,textAnchor:J,verticalAnchor:U},se):d==="insideTopRight"?ki({x:l+S-B,y:_+M,textAnchor:Z,verticalAnchor:U},se):d==="insideBottomLeft"?ki({x:l+B,y:_+E-M,textAnchor:J,verticalAnchor:L},se):d==="insideBottomRight"?ki({x:l+S-B,y:_+E-M,textAnchor:Z,verticalAnchor:L},se):jp(d)&&(Ot(d.x)||Tf(d.x))&&(Ot(d.y)||Tf(d.y))?ki({x:l+zf(d.x,S),y:_+zf(d.y,E),textAnchor:"end",verticalAnchor:"end"},se):ki({x:l+S/2,y:_+E/2,textAnchor:"middle",verticalAnchor:"middle"},se)},bK=function(t){return"cx"in t&&Ot(t.cx)};function Ba(e){var t=e.offset,r=t===void 0?5:t,n=hK(e,aK),s=ki({offset:r},n),d=s.viewBox,h=s.position,l=s.value,_=s.children,S=s.content,E=s.className,A=E===void 0?"":E,M=s.textBreakAll;if(!d||Dr(l)&&Dr(_)&&!Pe.isValidElement(S)&&!Mr(S))return null;if(Pe.isValidElement(S))return Pe.cloneElement(S,s);var L;if(Mr(S)){if(L=Pe.createElement(S,s),Pe.isValidElement(L))return L}else L=gK(s);var U=bK(d),N=$r(s,!0);if(U&&(h==="insideStart"||h==="insideEnd"||h==="end"))return vK(s,L,N);var B=U?_K(s):xK(s);return ze.createElement(Wv,Tg({className:Wr("recharts-label",A)},N,B,{breakAll:M}),L)}Ba.displayName="Label";var Iz=function(t){var r=t.cx,n=t.cy,s=t.angle,d=t.startAngle,h=t.endAngle,l=t.r,_=t.radius,S=t.innerRadius,E=t.outerRadius,A=t.x,M=t.y,L=t.top,U=t.left,N=t.width,B=t.height,Z=t.clockWise,J=t.labelViewBox;if(J)return J;if(Ot(N)&&Ot(B)){if(Ot(A)&&Ot(M))return{x:A,y:M,width:N,height:B};if(Ot(L)&&Ot(U))return{x:L,y:U,width:N,height:B}}return Ot(A)&&Ot(M)?{x:A,y:M,width:0,height:0}:Ot(r)&&Ot(n)?{cx:r,cy:n,startAngle:d||s||0,endAngle:h||s||0,innerRadius:S||0,outerRadius:E||_||l||0,clockWise:Z}:t.viewBox?t.viewBox:{}},wK=function(t,r){return t?t===!0?ze.createElement(Ba,{key:"label-implicit",viewBox:r}):Oi(t)?ze.createElement(Ba,{key:"label-implicit",viewBox:r,value:t}):Pe.isValidElement(t)?t.type===Ba?Pe.cloneElement(t,{key:"label-implicit",viewBox:r}):ze.createElement(Ba,{key:"label-implicit",content:t,viewBox:r}):Mr(t)?ze.createElement(Ba,{key:"label-implicit",content:t,viewBox:r}):jp(t)?ze.createElement(Ba,Tg({viewBox:r},t,{key:"label-implicit"})):null:null},SK=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,d=Iz(t),h=js(s,Ba).map(function(_,S){return Pe.cloneElement(_,{viewBox:r||d,key:"label-".concat(S)})});if(!n)return h;var l=wK(t.label,r||d);return[l].concat(oK(h))};Ba.parseViewBox=Iz;Ba.renderCallByParent=SK;var Dw,$O;function PK(){if($O)return Dw;$O=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return Dw=e,Dw}var TK=PK();const AK=fn(TK);function Ag(e){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ag(e)}var EK=["valueAccessor"],CK=["data","dataKey","clockWise","id","textBreakAll"];function MK(e){return DK(e)||OK(e)||kK(e)||IK()}function IK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kK(e,t){if(e){if(typeof e=="string")return pS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pS(e,t)}}function OK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function DK(e){if(Array.isArray(e))return pS(e)}function pS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s_(){return s_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s_.apply(this,arguments)}function VO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function UO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VO(Object(r),!0).forEach(function(n){RK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RK(e,t,r){return t=zK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zK(e){var t=jK(e,"string");return Ag(t)=="symbol"?t:t+""}function jK(e,t){if(Ag(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ag(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qO(e,t){if(e==null)return{};var r=LK(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function LK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var BK=function(t){return Array.isArray(t.value)?AK(t.value):t.value};function nh(e){var t=e.valueAccessor,r=t===void 0?BK:t,n=qO(e,EK),s=n.data,d=n.dataKey,h=n.clockWise,l=n.id,_=n.textBreakAll,S=qO(n,CK);return!s||!s.length?null:ze.createElement(ui,{className:"recharts-label-list"},s.map(function(E,A){var M=Dr(d)?r(E,A):is(E&&E.payload,d),L=Dr(l)?{}:{id:"".concat(l,"-").concat(A)};return ze.createElement(Ba,s_({},$r(E,!0),S,L,{parentViewBox:E.parentViewBox,value:M,textBreakAll:_,viewBox:Ba.parseViewBox(Dr(h)?E:UO(UO({},E),{},{clockWise:h})),key:"label-".concat(A),index:A}))}))}nh.displayName="LabelList";function NK(e,t){return e?e===!0?ze.createElement(nh,{key:"labelList-implicit",data:t}):ze.isValidElement(e)||Mr(e)?ze.createElement(nh,{key:"labelList-implicit",data:t,content:e}):jp(e)?ze.createElement(nh,s_({data:t},e,{key:"labelList-implicit"})):null:null}function FK(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=js(n,nh).map(function(h,l){return Pe.cloneElement(h,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var d=NK(e.label,t);return[d].concat(MK(s))}nh.renderCallByParent=FK;function Eg(e){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eg(e)}function mS(){return mS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mS.apply(this,arguments)}function WO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function GO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WO(Object(r),!0).forEach(function(n){$K(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $K(e,t,r){return t=VK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VK(e){var t=UK(e,"string");return Eg(t)=="symbol"?t:t+""}function UK(e,t){if(Eg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Eg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qK=function(t,r){var n=gl(r-t),s=Math.min(Math.abs(r-t),359.999);return n*s},uv=function(t){var r=t.cx,n=t.cy,s=t.radius,d=t.angle,h=t.sign,l=t.isExternal,_=t.cornerRadius,S=t.cornerIsExternal,E=_*(l?1:-1)+s,A=Math.asin(_/E)/o_,M=S?d:d+h*A,L=ya(r,n,E,M),U=ya(r,n,s,M),N=S?d-h*A:d,B=ya(r,n,E*Math.cos(A*o_),N);return{center:L,circleTangency:U,lineTangency:B,theta:A}},kz=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,d=t.outerRadius,h=t.startAngle,l=t.endAngle,_=qK(h,l),S=h+_,E=ya(r,n,d,h),A=ya(r,n,d,S),M="M ".concat(E.x,",").concat(E.y,`
    A `).concat(d,",").concat(d,`,0,
    `).concat(+(Math.abs(_)>180),",").concat(+(h>S),`,
    `).concat(A.x,",").concat(A.y,`
  `);if(s>0){var L=ya(r,n,s,h),U=ya(r,n,s,S);M+="L ".concat(U.x,",").concat(U.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(_)>180),",").concat(+(h<=S),`,
            `).concat(L.x,",").concat(L.y," Z")}else M+="L ".concat(r,",").concat(n," Z");return M},WK=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,d=t.outerRadius,h=t.cornerRadius,l=t.forceCornerRadius,_=t.cornerIsExternal,S=t.startAngle,E=t.endAngle,A=gl(E-S),M=uv({cx:r,cy:n,radius:d,angle:S,sign:A,cornerRadius:h,cornerIsExternal:_}),L=M.circleTangency,U=M.lineTangency,N=M.theta,B=uv({cx:r,cy:n,radius:d,angle:E,sign:-A,cornerRadius:h,cornerIsExternal:_}),Z=B.circleTangency,J=B.lineTangency,Q=B.theta,ie=_?Math.abs(S-E):Math.abs(S-E)-N-Q;if(ie<0)return l?"M ".concat(U.x,",").concat(U.y,`
        a`).concat(h,",").concat(h,",0,0,1,").concat(h*2,`,0
        a`).concat(h,",").concat(h,",0,0,1,").concat(-h*2,`,0
      `):kz({cx:r,cy:n,innerRadius:s,outerRadius:d,startAngle:S,endAngle:E});var H="M ".concat(U.x,",").concat(U.y,`
    A`).concat(h,",").concat(h,",0,0,").concat(+(A<0),",").concat(L.x,",").concat(L.y,`
    A`).concat(d,",").concat(d,",0,").concat(+(ie>180),",").concat(+(A<0),",").concat(Z.x,",").concat(Z.y,`
    A`).concat(h,",").concat(h,",0,0,").concat(+(A<0),",").concat(J.x,",").concat(J.y,`
  `);if(s>0){var X=uv({cx:r,cy:n,radius:s,angle:S,sign:A,isExternal:!0,cornerRadius:h,cornerIsExternal:_}),se=X.circleTangency,fe=X.lineTangency,Se=X.theta,Be=uv({cx:r,cy:n,radius:s,angle:E,sign:-A,isExternal:!0,cornerRadius:h,cornerIsExternal:_}),xe=Be.circleTangency,$e=Be.lineTangency,Fe=Be.theta,Ke=_?Math.abs(S-E):Math.abs(S-E)-Se-Fe;if(Ke<0&&h===0)return"".concat(H,"L").concat(r,",").concat(n,"Z");H+="L".concat($e.x,",").concat($e.y,`
      A`).concat(h,",").concat(h,",0,0,").concat(+(A<0),",").concat(xe.x,",").concat(xe.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(Ke>180),",").concat(+(A>0),",").concat(se.x,",").concat(se.y,`
      A`).concat(h,",").concat(h,",0,0,").concat(+(A<0),",").concat(fe.x,",").concat(fe.y,"Z")}else H+="L".concat(r,",").concat(n,"Z");return H},GK={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Oz=function(t){var r=GO(GO({},GK),t),n=r.cx,s=r.cy,d=r.innerRadius,h=r.outerRadius,l=r.cornerRadius,_=r.forceCornerRadius,S=r.cornerIsExternal,E=r.startAngle,A=r.endAngle,M=r.className;if(h<d||E===A)return null;var L=Wr("recharts-sector",M),U=h-d,N=zf(l,U,0,!0),B;return N>0&&Math.abs(E-A)<360?B=WK({cx:n,cy:s,innerRadius:d,outerRadius:h,cornerRadius:Math.min(N,U/2),forceCornerRadius:_,cornerIsExternal:S,startAngle:E,endAngle:A}):B=kz({cx:n,cy:s,innerRadius:d,outerRadius:h,startAngle:E,endAngle:A}),ze.createElement("path",mS({},$r(r,!0),{className:L,d:B,role:"img"}))};function Cg(e){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cg(e)}function gS(){return gS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gS.apply(this,arguments)}function HO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ZO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HO(Object(r),!0).forEach(function(n){HK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HK(e,t,r){return t=ZK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZK(e){var t=KK(e,"string");return Cg(t)=="symbol"?t:t+""}function KK(e,t){if(Cg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KO={curveBasisClosed:p7,curveBasisOpen:m7,curveBasis:d7,curveBumpX:QV,curveBumpY:e7,curveLinearClosed:g7,curveLinear:G_,curveMonotoneX:y7,curveMonotoneY:v7,curveNatural:_7,curveStep:x7,curveStepAfter:w7,curveStepBefore:b7},cv=function(t){return t.x===+t.x&&t.y===+t.y},zm=function(t){return t.x},jm=function(t){return t.y},XK=function(t,r){if(Mr(t))return t;var n="curve".concat(q_(t));return(n==="curveMonotone"||n==="curveBump")&&r?KO["".concat(n).concat(r==="vertical"?"Y":"X")]:KO[n]||G_},YK=function(t){var r=t.type,n=r===void 0?"linear":r,s=t.points,d=s===void 0?[]:s,h=t.baseLine,l=t.layout,_=t.connectNulls,S=_===void 0?!1:_,E=XK(n,l),A=S?d.filter(function(N){return cv(N)}):d,M;if(Array.isArray(h)){var L=S?h.filter(function(N){return cv(N)}):h,U=A.map(function(N,B){return ZO(ZO({},N),{},{base:L[B]})});return l==="vertical"?M=tv().y(jm).x1(zm).x0(function(N){return N.base.x}):M=tv().x(zm).y1(jm).y0(function(N){return N.base.y}),M.defined(cv).curve(E),M(U)}return l==="vertical"&&Ot(h)?M=tv().y(jm).x1(zm).x0(h):Ot(h)?M=tv().x(zm).y1(jm).y0(h):M=jR().x(zm).y(jm),M.defined(cv).curve(E),M(A)},yS=function(t){var r=t.className,n=t.points,s=t.path,d=t.pathRef;if((!n||!n.length)&&!s)return null;var h=n&&n.length?YK(t):s;return Pe.createElement("path",gS({},$r(t,!1),Dv(t),{className:Wr("recharts-curve",r),d:h,ref:d}))},Rw={exports:{}},zw,XO;function JK(){if(XO)return zw;XO=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return zw=e,zw}var jw,YO;function QK(){if(YO)return jw;YO=1;var e=JK();function t(){}function r(){}return r.resetWarningCache=t,jw=function(){function n(h,l,_,S,E,A){if(A!==e){var M=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw M.name="Invariant Violation",M}}n.isRequired=n;function s(){return n}var d={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return d.PropTypes=d,d},jw}var JO;function eX(){return JO||(JO=1,Rw.exports=QK()()),Rw.exports}var tX=eX();const un=fn(tX);var rX=Object.getOwnPropertyNames,nX=Object.getOwnPropertySymbols,iX=Object.prototype.hasOwnProperty;function QO(e,t){return function(n,s,d){return e(n,s,d)&&t(n,s,d)}}function hv(e){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,s);var d=s.cache,h=d.get(r),l=d.get(n);if(h&&l)return h===n&&l===r;d.set(r,n),d.set(n,r);var _=e(r,n,s);return d.delete(r),d.delete(n),_}}function aX(e){return e!=null?e[Symbol.toStringTag]:void 0}function e3(e){return rX(e).concat(nX(e))}var oX=Object.hasOwn||(function(e,t){return iX.call(e,t)});function Wf(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var sX="__v",lX="__o",uX="_owner",t3=Object.getOwnPropertyDescriptor,r3=Object.keys;function cX(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function hX(e,t){return Wf(e.getTime(),t.getTime())}function fX(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function dX(e,t){return e===t}function n3(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var s=new Array(n),d=e.entries(),h,l,_=0;(h=d.next())&&!h.done;){for(var S=t.entries(),E=!1,A=0;(l=S.next())&&!l.done;){if(s[A]){A++;continue}var M=h.value,L=l.value;if(r.equals(M[0],L[0],_,A,e,t,r)&&r.equals(M[1],L[1],M[0],L[0],e,t,r)){E=s[A]=!0;break}A++}if(!E)return!1;_++}return!0}var pX=Wf;function mX(e,t,r){var n=r3(e),s=n.length;if(r3(t).length!==s)return!1;for(;s-- >0;)if(!Dz(e,t,r,n[s]))return!1;return!0}function Lm(e,t,r){var n=e3(e),s=n.length;if(e3(t).length!==s)return!1;for(var d,h,l;s-- >0;)if(d=n[s],!Dz(e,t,r,d)||(h=t3(e,d),l=t3(t,d),(h||l)&&(!h||!l||h.configurable!==l.configurable||h.enumerable!==l.enumerable||h.writable!==l.writable)))return!1;return!0}function gX(e,t){return Wf(e.valueOf(),t.valueOf())}function yX(e,t){return e.source===t.source&&e.flags===t.flags}function i3(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var s=new Array(n),d=e.values(),h,l;(h=d.next())&&!h.done;){for(var _=t.values(),S=!1,E=0;(l=_.next())&&!l.done;){if(!s[E]&&r.equals(h.value,l.value,h.value,l.value,e,t,r)){S=s[E]=!0;break}E++}if(!S)return!1}return!0}function vX(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function _X(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Dz(e,t,r,n){return(n===uX||n===lX||n===sX)&&(e.$$typeof||t.$$typeof)?!0:oX(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var xX="[object Arguments]",bX="[object Boolean]",wX="[object Date]",SX="[object Error]",PX="[object Map]",TX="[object Number]",AX="[object Object]",EX="[object RegExp]",CX="[object Set]",MX="[object String]",IX="[object URL]",kX=Array.isArray,a3=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,o3=Object.assign,OX=Object.prototype.toString.call.bind(Object.prototype.toString);function DX(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,s=e.areFunctionsEqual,d=e.areMapsEqual,h=e.areNumbersEqual,l=e.areObjectsEqual,_=e.arePrimitiveWrappersEqual,S=e.areRegExpsEqual,E=e.areSetsEqual,A=e.areTypedArraysEqual,M=e.areUrlsEqual,L=e.unknownTagComparators;return function(N,B,Z){if(N===B)return!0;if(N==null||B==null)return!1;var J=typeof N;if(J!==typeof B)return!1;if(J!=="object")return J==="number"?h(N,B,Z):J==="function"?s(N,B,Z):!1;var Q=N.constructor;if(Q!==B.constructor)return!1;if(Q===Object)return l(N,B,Z);if(kX(N))return t(N,B,Z);if(a3!=null&&a3(N))return A(N,B,Z);if(Q===Date)return r(N,B,Z);if(Q===RegExp)return S(N,B,Z);if(Q===Map)return d(N,B,Z);if(Q===Set)return E(N,B,Z);var ie=OX(N);if(ie===wX)return r(N,B,Z);if(ie===EX)return S(N,B,Z);if(ie===PX)return d(N,B,Z);if(ie===CX)return E(N,B,Z);if(ie===AX)return typeof N.then!="function"&&typeof B.then!="function"&&l(N,B,Z);if(ie===IX)return M(N,B,Z);if(ie===SX)return n(N,B,Z);if(ie===xX)return l(N,B,Z);if(ie===bX||ie===TX||ie===MX)return _(N,B,Z);if(L){var H=L[ie];if(!H){var X=aX(N);X&&(H=L[X])}if(H)return H(N,B,Z)}return!1}}function RX(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,s={areArraysEqual:n?Lm:cX,areDatesEqual:hX,areErrorsEqual:fX,areFunctionsEqual:dX,areMapsEqual:n?QO(n3,Lm):n3,areNumbersEqual:pX,areObjectsEqual:n?Lm:mX,arePrimitiveWrappersEqual:gX,areRegExpsEqual:yX,areSetsEqual:n?QO(i3,Lm):i3,areTypedArraysEqual:n?Lm:vX,areUrlsEqual:_X,unknownTagComparators:void 0};if(r&&(s=o3({},s,r(s))),t){var d=hv(s.areArraysEqual),h=hv(s.areMapsEqual),l=hv(s.areObjectsEqual),_=hv(s.areSetsEqual);s=o3({},s,{areArraysEqual:d,areMapsEqual:h,areObjectsEqual:l,areSetsEqual:_})}return s}function zX(e){return function(t,r,n,s,d,h,l){return e(t,r,l)}}function jX(e){var t=e.circular,r=e.comparator,n=e.createState,s=e.equals,d=e.strict;if(n)return function(_,S){var E=n(),A=E.cache,M=A===void 0?t?new WeakMap:void 0:A,L=E.meta;return r(_,S,{cache:M,equals:s,meta:L,strict:d})};if(t)return function(_,S){return r(_,S,{cache:new WeakMap,equals:s,meta:void 0,strict:d})};var h={cache:void 0,equals:s,meta:void 0,strict:d};return function(_,S){return r(_,S,h)}}var LX=fh();fh({strict:!0});fh({circular:!0});fh({circular:!0,strict:!0});fh({createInternalComparator:function(){return Wf}});fh({strict:!0,createInternalComparator:function(){return Wf}});fh({circular:!0,createInternalComparator:function(){return Wf}});fh({circular:!0,createInternalComparator:function(){return Wf},strict:!0});function fh(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,s=e.createState,d=e.strict,h=d===void 0?!1:d,l=RX(e),_=DX(l),S=n?n(_):zX(_);return jX({circular:r,comparator:_,createState:s,equals:S,strict:h})}function BX(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function s3(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(d){r<0&&(r=d),d-r>t?(e(d),r=-1):BX(s)};requestAnimationFrame(n)}function vS(e){"@babel/helpers - typeof";return vS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vS(e)}function NX(e){return UX(e)||VX(e)||$X(e)||FX()}function FX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $X(e,t){if(e){if(typeof e=="string")return l3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l3(e,t)}}function l3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function VX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function UX(e){if(Array.isArray(e))return e}function qX(){var e={},t=function(){return null},r=!1,n=function s(d){if(!r){if(Array.isArray(d)){if(!d.length)return;var h=d,l=NX(h),_=l[0],S=l.slice(1);if(typeof _=="number"){s3(s.bind(null,S),_);return}s(_),s3(s.bind(null,S));return}vS(d)==="object"&&(e=d,t(e)),typeof d=="function"&&d()}};return{stop:function(){r=!0},start:function(d){r=!1,n(d)},subscribe:function(d){return t=d,function(){t=function(){return null}}}}}function Mg(e){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mg(e)}function u3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function c3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u3(Object(r),!0).forEach(function(n){Rz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rz(e,t,r){return t=WX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WX(e){var t=GX(e,"string");return Mg(t)==="symbol"?t:String(t)}function GX(e,t){if(Mg(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HX=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,s){return n.filter(function(d){return s.includes(d)})})},ZX=function(t){return t},KX=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Jm=function(t,r){return Object.keys(r).reduce(function(n,s){return c3(c3({},n),{},Rz({},s,t(s,r[s])))},{})},h3=function(t,r,n){return t.map(function(s){return"".concat(KX(s)," ").concat(r,"ms ").concat(n)}).join(",")};function XX(e,t){return QX(e)||JX(e,t)||zz(e,t)||YX()}function YX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,S=!1;try{if(d=(r=r.call(e)).next,t!==0)for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){S=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(S)throw s}}return l}}function QX(e){if(Array.isArray(e))return e}function eY(e){return nY(e)||rY(e)||zz(e)||tY()}function tY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zz(e,t){if(e){if(typeof e=="string")return _S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _S(e,t)}}function rY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nY(e){if(Array.isArray(e))return _S(e)}function _S(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l_=1e-4,jz=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},Lz=function(t,r){return t.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},f3=function(t,r){return function(n){var s=jz(t,r);return Lz(s,n)}},iY=function(t,r){return function(n){var s=jz(t,r),d=[].concat(eY(s.map(function(h,l){return h*l}).slice(1)),[0]);return Lz(d,n)}},d3=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0],d=r[1],h=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,d=0,h=1,l=1;break;case"ease":s=.25,d=.1,h=.25,l=1;break;case"ease-in":s=.42,d=0,h=1,l=1;break;case"ease-out":s=.42,d=0,h=.58,l=1;break;case"ease-in-out":s=0,d=0,h=.58,l=1;break;default:{var _=r[0].split("(");if(_[0]==="cubic-bezier"&&_[1].split(")")[0].split(",").length===4){var S=_[1].split(")")[0].split(",").map(function(B){return parseFloat(B)}),E=XX(S,4);s=E[0],d=E[1],h=E[2],l=E[3]}}}var A=f3(s,h),M=f3(d,l),L=iY(s,h),U=function(Z){return Z>1?1:Z<0?0:Z},N=function(Z){for(var J=Z>1?1:Z,Q=J,ie=0;ie<8;++ie){var H=A(Q)-J,X=L(Q);if(Math.abs(H-J)<l_||X<l_)return M(Q);Q=U(Q-H/X)}return M(Q)};return N.isStepper=!1,N},aY=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,s=t.damping,d=s===void 0?8:s,h=t.dt,l=h===void 0?17:h,_=function(E,A,M){var L=-(E-A)*n,U=M*d,N=M+(L-U)*l/1e3,B=M*l/1e3+E;return Math.abs(B-A)<l_&&Math.abs(N)<l_?[A,0]:[B,N]};return _.isStepper=!0,_.dt=l,_},oY=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return d3(s);case"spring":return aY();default:if(s.split("(")[0]==="cubic-bezier")return d3(s)}return typeof s=="function"?s:null};function Ig(e){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ig(e)}function p3(e){return uY(e)||lY(e)||Bz(e)||sY()}function sY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uY(e){if(Array.isArray(e))return bS(e)}function m3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ma(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m3(Object(r),!0).forEach(function(n){xS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xS(e,t,r){return t=cY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cY(e){var t=hY(e,"string");return Ig(t)==="symbol"?t:String(t)}function hY(e,t){if(Ig(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ig(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fY(e,t){return mY(e)||pY(e,t)||Bz(e,t)||dY()}function dY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bz(e,t){if(e){if(typeof e=="string")return bS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bS(e,t)}}function bS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,S=!1;try{if(d=(r=r.call(e)).next,t!==0)for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){S=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(S)throw s}}return l}}function mY(e){if(Array.isArray(e))return e}var u_=function(t,r,n){return t+(r-t)*n},wS=function(t){var r=t.from,n=t.to;return r!==n},gY=function e(t,r,n){var s=Jm(function(d,h){if(wS(h)){var l=t(h.from,h.to,h.velocity),_=fY(l,2),S=_[0],E=_[1];return ma(ma({},h),{},{from:S,velocity:E})}return h},r);return n<1?Jm(function(d,h){return wS(h)?ma(ma({},h),{},{velocity:u_(h.velocity,s[d].velocity,n),from:u_(h.from,s[d].from,n)}):h},r):e(t,s,n-1)};const yY=(function(e,t,r,n,s){var d=HX(e,t),h=d.reduce(function(B,Z){return ma(ma({},B),{},xS({},Z,[e[Z],t[Z]]))},{}),l=d.reduce(function(B,Z){return ma(ma({},B),{},xS({},Z,{from:e[Z],velocity:0,to:t[Z]}))},{}),_=-1,S,E,A=function(){return null},M=function(){return Jm(function(Z,J){return J.from},l)},L=function(){return!Object.values(l).filter(wS).length},U=function(Z){S||(S=Z);var J=Z-S,Q=J/r.dt;l=gY(r,l,Q),s(ma(ma(ma({},e),t),M())),S=Z,L()||(_=requestAnimationFrame(A))},N=function(Z){E||(E=Z);var J=(Z-E)/n,Q=Jm(function(H,X){return u_.apply(void 0,p3(X).concat([r(J)]))},h);if(s(ma(ma(ma({},e),t),Q)),J<1)_=requestAnimationFrame(A);else{var ie=Jm(function(H,X){return u_.apply(void 0,p3(X).concat([r(1)]))},h);s(ma(ma(ma({},e),t),ie))}};return A=r.isStepper?U:N,function(){return requestAnimationFrame(A),function(){cancelAnimationFrame(_)}}});function vp(e){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vp(e)}var vY=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function _Y(e,t){if(e==null)return{};var r=xY(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function xY(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,d;for(d=0;d<n.length;d++)s=n[d],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Lw(e){return PY(e)||SY(e)||wY(e)||bY()}function bY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wY(e,t){if(e){if(typeof e=="string")return SS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SS(e,t)}}function SY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function PY(e){if(Array.isArray(e))return SS(e)}function SS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function cl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g3(Object(r),!0).forEach(function(n){qm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qm(e,t,r){return t=Nz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Nz(n.key),n)}}function EY(e,t,r){return t&&AY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nz(e){var t=CY(e,"string");return vp(t)==="symbol"?t:String(t)}function CY(e,t){if(vp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PS(e,t)}function PS(e,t){return PS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},PS(e,t)}function IY(e){var t=kY();return function(){var n=c_(e),s;if(t){var d=c_(this).constructor;s=Reflect.construct(n,arguments,d)}else s=n.apply(this,arguments);return TS(this,s)}}function TS(e,t){if(t&&(vp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AS(e)}function AS(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kY(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function c_(e){return c_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},c_(e)}var uc=(function(e){MY(r,e);var t=IY(r);function r(n,s){var d;TY(this,r),d=t.call(this,n,s);var h=d.props,l=h.isActive,_=h.attributeName,S=h.from,E=h.to,A=h.steps,M=h.children,L=h.duration;if(d.handleStyleChange=d.handleStyleChange.bind(AS(d)),d.changeStyle=d.changeStyle.bind(AS(d)),!l||L<=0)return d.state={style:{}},typeof M=="function"&&(d.state={style:E}),TS(d);if(A&&A.length)d.state={style:A[0].style};else if(S){if(typeof M=="function")return d.state={style:S},TS(d);d.state={style:_?qm({},_,S):S}}else d.state={style:{}};return d}return EY(r,[{key:"componentDidMount",value:function(){var s=this.props,d=s.isActive,h=s.canBegin;this.mounted=!0,!(!d||!h)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var d=this.props,h=d.isActive,l=d.canBegin,_=d.attributeName,S=d.shouldReAnimate,E=d.to,A=d.from,M=this.state.style;if(l){if(!h){var L={style:_?qm({},_,E):E};this.state&&M&&(_&&M[_]!==E||!_&&M!==E)&&this.setState(L);return}if(!(LX(s.to,E)&&s.canBegin&&s.isActive)){var U=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var N=U||S?A:s.to;if(this.state&&M){var B={style:_?qm({},_,N):N};(_&&M[_]!==N||!_&&M!==N)&&this.setState(B)}this.runAnimation(cl(cl({},this.props),{},{from:N,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var d=this,h=s.from,l=s.to,_=s.duration,S=s.easing,E=s.begin,A=s.onAnimationEnd,M=s.onAnimationStart,L=yY(h,l,oY(S),_,this.changeStyle),U=function(){d.stopJSAnimation=L()};this.manager.start([M,E,U,_,A])}},{key:"runStepAnimation",value:function(s){var d=this,h=s.steps,l=s.begin,_=s.onAnimationStart,S=h[0],E=S.style,A=S.duration,M=A===void 0?0:A,L=function(N,B,Z){if(Z===0)return N;var J=B.duration,Q=B.easing,ie=Q===void 0?"ease":Q,H=B.style,X=B.properties,se=B.onAnimationEnd,fe=Z>0?h[Z-1]:B,Se=X||Object.keys(H);if(typeof ie=="function"||ie==="spring")return[].concat(Lw(N),[d.runJSAnimation.bind(d,{from:fe.style,to:H,duration:J,easing:ie}),J]);var Be=h3(Se,J,ie),xe=cl(cl(cl({},fe.style),H),{},{transition:Be});return[].concat(Lw(N),[xe,J,se]).filter(ZX)};return this.manager.start([_].concat(Lw(h.reduce(L,[E,Math.max(M,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=qX());var d=s.begin,h=s.duration,l=s.attributeName,_=s.to,S=s.easing,E=s.onAnimationStart,A=s.onAnimationEnd,M=s.steps,L=s.children,U=this.manager;if(this.unSubscribe=U.subscribe(this.handleStyleChange),typeof S=="function"||typeof L=="function"||S==="spring"){this.runJSAnimation(s);return}if(M.length>1){this.runStepAnimation(s);return}var N=l?qm({},l,_):_,B=h3(Object.keys(N),h,S);U.start([E,d,cl(cl({},N),{},{transition:B}),h,A])}},{key:"render",value:function(){var s=this.props,d=s.children;s.begin;var h=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var _=_Y(s,vY),S=Pe.Children.count(d),E=this.state.style;if(typeof d=="function")return d(E);if(!l||S===0||h<=0)return d;var A=function(L){var U=L.props,N=U.style,B=N===void 0?{}:N,Z=U.className,J=Pe.cloneElement(L,cl(cl({},_),{},{style:cl(cl({},B),E),className:Z}));return J};return S===1?A(Pe.Children.only(d)):ze.createElement("div",null,Pe.Children.map(d,function(M){return A(M)}))}}]),r})(Pe.PureComponent);uc.displayName="Animate";uc.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};uc.propTypes={from:un.oneOfType([un.object,un.string]),to:un.oneOfType([un.object,un.string]),attributeName:un.string,duration:un.number,begin:un.number,easing:un.oneOfType([un.string,un.func]),steps:un.arrayOf(un.shape({duration:un.number.isRequired,style:un.object.isRequired,easing:un.oneOfType([un.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),un.func]),properties:un.arrayOf("string"),onAnimationEnd:un.func})),children:un.oneOfType([un.node,un.func]),isActive:un.bool,canBegin:un.bool,onAnimationEnd:un.func,shouldReAnimate:un.bool,onAnimationStart:un.func,onAnimationReStart:un.func};function kg(e){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kg(e)}function h_(){return h_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h_.apply(this,arguments)}function OY(e,t){return jY(e)||zY(e,t)||RY(e,t)||DY()}function DY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RY(e,t){if(e){if(typeof e=="string")return y3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y3(e,t)}}function y3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,S=!1;try{if(d=(r=r.call(e)).next,t!==0)for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){S=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(S)throw s}}return l}}function jY(e){if(Array.isArray(e))return e}function v3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v3(Object(r),!0).forEach(function(n){LY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LY(e,t,r){return t=BY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BY(e){var t=NY(e,"string");return kg(t)=="symbol"?t:t+""}function NY(e,t){if(kg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var x3=function(t,r,n,s,d){var h=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,_=n>=0?1:-1,S=s>=0&&n>=0||s<0&&n<0?1:0,E;if(h>0&&d instanceof Array){for(var A=[0,0,0,0],M=0,L=4;M<L;M++)A[M]=d[M]>h?h:d[M];E="M".concat(t,",").concat(r+l*A[0]),A[0]>0&&(E+="A ".concat(A[0],",").concat(A[0],",0,0,").concat(S,",").concat(t+_*A[0],",").concat(r)),E+="L ".concat(t+n-_*A[1],",").concat(r),A[1]>0&&(E+="A ".concat(A[1],",").concat(A[1],",0,0,").concat(S,`,
        `).concat(t+n,",").concat(r+l*A[1])),E+="L ".concat(t+n,",").concat(r+s-l*A[2]),A[2]>0&&(E+="A ".concat(A[2],",").concat(A[2],",0,0,").concat(S,`,
        `).concat(t+n-_*A[2],",").concat(r+s)),E+="L ".concat(t+_*A[3],",").concat(r+s),A[3]>0&&(E+="A ".concat(A[3],",").concat(A[3],",0,0,").concat(S,`,
        `).concat(t,",").concat(r+s-l*A[3])),E+="Z"}else if(h>0&&d===+d&&d>0){var U=Math.min(h,d);E="M ".concat(t,",").concat(r+l*U,`
            A `).concat(U,",").concat(U,",0,0,").concat(S,",").concat(t+_*U,",").concat(r,`
            L `).concat(t+n-_*U,",").concat(r,`
            A `).concat(U,",").concat(U,",0,0,").concat(S,",").concat(t+n,",").concat(r+l*U,`
            L `).concat(t+n,",").concat(r+s-l*U,`
            A `).concat(U,",").concat(U,",0,0,").concat(S,",").concat(t+n-_*U,",").concat(r+s,`
            L `).concat(t+_*U,",").concat(r+s,`
            A `).concat(U,",").concat(U,",0,0,").concat(S,",").concat(t,",").concat(r+s-l*U," Z")}else E="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return E},FY=function(t,r){if(!t||!r)return!1;var n=t.x,s=t.y,d=r.x,h=r.y,l=r.width,_=r.height;if(Math.abs(l)>0&&Math.abs(_)>0){var S=Math.min(d,d+l),E=Math.max(d,d+l),A=Math.min(h,h+_),M=Math.max(h,h+_);return n>=S&&n<=E&&s>=A&&s<=M}return!1},$Y={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},MT=function(t){var r=_3(_3({},$Y),t),n=Pe.useRef(),s=Pe.useState(-1),d=OY(s,2),h=d[0],l=d[1];Pe.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var ie=n.current.getTotalLength();ie&&l(ie)}catch{}},[]);var _=r.x,S=r.y,E=r.width,A=r.height,M=r.radius,L=r.className,U=r.animationEasing,N=r.animationDuration,B=r.animationBegin,Z=r.isAnimationActive,J=r.isUpdateAnimationActive;if(_!==+_||S!==+S||E!==+E||A!==+A||E===0||A===0)return null;var Q=Wr("recharts-rectangle",L);return J?ze.createElement(uc,{canBegin:h>0,from:{width:E,height:A,x:_,y:S},to:{width:E,height:A,x:_,y:S},duration:N,animationEasing:U,isActive:J},function(ie){var H=ie.width,X=ie.height,se=ie.x,fe=ie.y;return ze.createElement(uc,{canBegin:h>0,from:"0px ".concat(h===-1?1:h,"px"),to:"".concat(h,"px 0px"),attributeName:"strokeDasharray",begin:B,duration:N,isActive:Z,easing:U},ze.createElement("path",h_({},$r(r,!0),{className:Q,d:x3(se,fe,H,X,M),ref:n})))}):ze.createElement("path",h_({},$r(r,!0),{className:Q,d:x3(_,S,E,A,M)}))};function ES(){return ES=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ES.apply(this,arguments)}var IT=function(t){var r=t.cx,n=t.cy,s=t.r,d=t.className,h=Wr("recharts-dot",d);return r===+r&&n===+n&&s===+s?Pe.createElement("circle",ES({},$r(t,!1),Dv(t),{className:h,cx:r,cy:n,r:s})):null};function Og(e){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Og(e)}var VY=["x","y","top","left","width","height","className"];function CS(){return CS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CS.apply(this,arguments)}function b3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function UY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b3(Object(r),!0).forEach(function(n){qY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qY(e,t,r){return t=WY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WY(e){var t=GY(e,"string");return Og(t)=="symbol"?t:t+""}function GY(e,t){if(Og(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HY(e,t){if(e==null)return{};var r=ZY(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ZY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var KY=function(t,r,n,s,d,h){return"M".concat(t,",").concat(d,"v").concat(s,"M").concat(h,",").concat(r,"h").concat(n)},XY=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,d=s===void 0?0:s,h=t.top,l=h===void 0?0:h,_=t.left,S=_===void 0?0:_,E=t.width,A=E===void 0?0:E,M=t.height,L=M===void 0?0:M,U=t.className,N=HY(t,VY),B=UY({x:n,y:d,top:l,left:S,width:A,height:L},N);return!Ot(n)||!Ot(d)||!Ot(A)||!Ot(L)||!Ot(l)||!Ot(S)?null:ze.createElement("path",CS({},$r(B,!0),{className:Wr("recharts-cross",U),d:KY(n,d,A,L,l,S)}))},Bw,w3;function YY(){if(w3)return Bw;w3=1;var e=a5(),t=e(Object.getPrototypeOf,Object);return Bw=t,Bw}var Nw,S3;function JY(){if(S3)return Nw;S3=1;var e=cc(),t=YY(),r=hc(),n="[object Object]",s=Function.prototype,d=Object.prototype,h=s.toString,l=d.hasOwnProperty,_=h.call(Object);function S(E){if(!r(E)||e(E)!=n)return!1;var A=t(E);if(A===null)return!0;var M=l.call(A,"constructor")&&A.constructor;return typeof M=="function"&&M instanceof M&&h.call(M)==_}return Nw=S,Nw}var QY=JY();const eJ=fn(QY);var Fw,P3;function tJ(){if(P3)return Fw;P3=1;var e=cc(),t=hc(),r="[object Boolean]";function n(s){return s===!0||s===!1||t(s)&&e(s)==r}return Fw=n,Fw}var rJ=tJ();const nJ=fn(rJ);function Dg(e){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dg(e)}function f_(){return f_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f_.apply(this,arguments)}function iJ(e,t){return lJ(e)||sJ(e,t)||oJ(e,t)||aJ()}function aJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oJ(e,t){if(e){if(typeof e=="string")return T3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T3(e,t)}}function T3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,S=!1;try{if(d=(r=r.call(e)).next,t!==0)for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){S=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(S)throw s}}return l}}function lJ(e){if(Array.isArray(e))return e}function A3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function E3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A3(Object(r),!0).forEach(function(n){uJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uJ(e,t,r){return t=cJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cJ(e){var t=hJ(e,"string");return Dg(t)=="symbol"?t:t+""}function hJ(e,t){if(Dg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var C3=function(t,r,n,s,d){var h=n-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-h/2,",").concat(r+d),l+="L ".concat(t+n-h/2-s,",").concat(r+d),l+="L ".concat(t,",").concat(r," Z"),l},fJ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},dJ=function(t){var r=E3(E3({},fJ),t),n=Pe.useRef(),s=Pe.useState(-1),d=iJ(s,2),h=d[0],l=d[1];Pe.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var Q=n.current.getTotalLength();Q&&l(Q)}catch{}},[]);var _=r.x,S=r.y,E=r.upperWidth,A=r.lowerWidth,M=r.height,L=r.className,U=r.animationEasing,N=r.animationDuration,B=r.animationBegin,Z=r.isUpdateAnimationActive;if(_!==+_||S!==+S||E!==+E||A!==+A||M!==+M||E===0&&A===0||M===0)return null;var J=Wr("recharts-trapezoid",L);return Z?ze.createElement(uc,{canBegin:h>0,from:{upperWidth:0,lowerWidth:0,height:M,x:_,y:S},to:{upperWidth:E,lowerWidth:A,height:M,x:_,y:S},duration:N,animationEasing:U,isActive:Z},function(Q){var ie=Q.upperWidth,H=Q.lowerWidth,X=Q.height,se=Q.x,fe=Q.y;return ze.createElement(uc,{canBegin:h>0,from:"0px ".concat(h===-1?1:h,"px"),to:"".concat(h,"px 0px"),attributeName:"strokeDasharray",begin:B,duration:N,easing:U},ze.createElement("path",f_({},$r(r,!0),{className:J,d:C3(se,fe,ie,H,X),ref:n})))}):ze.createElement("g",null,ze.createElement("path",f_({},$r(r,!0),{className:J,d:C3(_,S,E,A,M)})))},pJ=["option","shapeType","propTransformer","activeClassName","isActive"];function Rg(e){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rg(e)}function mJ(e,t){if(e==null)return{};var r=gJ(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function gJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function M3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function d_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M3(Object(r),!0).forEach(function(n){yJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yJ(e,t,r){return t=vJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vJ(e){var t=_J(e,"string");return Rg(t)=="symbol"?t:t+""}function _J(e,t){if(Rg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xJ(e,t){return d_(d_({},t),e)}function bJ(e,t){return e==="symbols"}function I3(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return ze.createElement(MT,r);case"trapezoid":return ze.createElement(dJ,r);case"sector":return ze.createElement(Oz,r);case"symbols":if(bJ(t))return ze.createElement(ZP,r);break;default:return null}}function wJ(e){return Pe.isValidElement(e)?e.props:e}function SJ(e){var t=e.option,r=e.shapeType,n=e.propTransformer,s=n===void 0?xJ:n,d=e.activeClassName,h=d===void 0?"recharts-active-shape":d,l=e.isActive,_=mJ(e,pJ),S;if(Pe.isValidElement(t))S=Pe.cloneElement(t,d_(d_({},_),wJ(t)));else if(Mr(t))S=t(_);else if(eJ(t)&&!nJ(t)){var E=s(t,_);S=ze.createElement(I3,{shapeType:r,elementProps:E})}else{var A=_;S=ze.createElement(I3,{shapeType:r,elementProps:A})}return l?ze.createElement(ui,{className:h},S):S}function l0(e,t){return t!=null&&"trapezoids"in e.props}function u0(e,t){return t!=null&&"sectors"in e.props}function zg(e,t){return t!=null&&"points"in e.props}function PJ(e,t){var r,n,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,d=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&d}function TJ(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function AJ(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function EJ(e,t){var r;return l0(e,t)?r=PJ:u0(e,t)?r=TJ:zg(e,t)&&(r=AJ),r}function CJ(e,t){var r;return l0(e,t)?r="trapezoids":u0(e,t)?r="sectors":zg(e,t)&&(r="points"),r}function MJ(e,t){if(l0(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(u0(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return zg(e,t)?t.payload:{}}function IJ(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=CJ(r,t),d=MJ(r,t),h=n.filter(function(_,S){var E=a0(d,_),A=r.props[s].filter(function(U){var N=EJ(r,t);return N(U,t)}),M=r.props[s].indexOf(A[A.length-1]),L=S===M;return E&&L}),l=n.indexOf(h[h.length-1]);return l}var $w,k3;function kJ(){if(k3)return $w;k3=1;var e=Math.ceil,t=Math.max;function r(n,s,d,h){for(var l=-1,_=t(e((s-n)/(d||1)),0),S=Array(_);_--;)S[h?_:++l]=n,n+=d;return S}return $w=r,$w}var Vw,O3;function Fz(){if(O3)return Vw;O3=1;var e=b5(),t=1/0,r=17976931348623157e292;function n(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var d=s<0?-1:1;return d*r}return s===s?s:0}return Vw=n,Vw}var Uw,D3;function OJ(){if(D3)return Uw;D3=1;var e=kJ(),t=X_(),r=Fz();function n(s){return function(d,h,l){return l&&typeof l!="number"&&t(d,h,l)&&(h=l=void 0),d=r(d),h===void 0?(h=d,d=0):h=r(h),l=l===void 0?d<h?1:-1:r(l),e(d,h,l,s)}}return Uw=n,Uw}var qw,R3;function DJ(){if(R3)return qw;R3=1;var e=OJ(),t=e();return qw=t,qw}var RJ=DJ();const p_=fn(RJ);function jg(e){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jg(e)}function z3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function j3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z3(Object(r),!0).forEach(function(n){$z(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $z(e,t,r){return t=zJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zJ(e){var t=jJ(e,"string");return jg(t)=="symbol"?t:t+""}function jJ(e,t){if(jg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LJ=["Webkit","Moz","O","ms"],BJ=function(t,r){var n=t.replace(/(\w)/,function(d){return d.toUpperCase()}),s=LJ.reduce(function(d,h){return j3(j3({},d),{},$z({},h+n,r))},{});return s[t]=r,s};function _p(e){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_p(e)}function m_(){return m_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m_.apply(this,arguments)}function L3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ww(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L3(Object(r),!0).forEach(function(n){Qo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Uz(n.key),n)}}function FJ(e,t,r){return t&&B3(e.prototype,t),r&&B3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $J(e,t,r){return t=g_(t),VJ(e,Vz()?Reflect.construct(t,r||[],g_(e).constructor):t.apply(e,r))}function VJ(e,t){if(t&&(_p(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UJ(e)}function UJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vz=function(){return!!e})()}function g_(e){return g_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},g_(e)}function qJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MS(e,t)}function MS(e,t){return MS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},MS(e,t)}function Qo(e,t,r){return t=Uz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uz(e){var t=WJ(e,"string");return _p(t)=="symbol"?t:t+""}function WJ(e,t){if(_p(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var GJ=function(t){var r=t.data,n=t.startIndex,s=t.endIndex,d=t.x,h=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var _=r.length,S=Xm().domain(p_(0,_)).range([d,d+h-l]),E=S.domain().map(function(A){return S(A)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:S(n),endX:S(s),scale:S,scaleValues:E}},N3=function(t){return t.changedTouches&&!!t.changedTouches.length},xp=(function(e){function t(r){var n;return NJ(this,t),n=$J(this,t,[r]),Qo(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),Qo(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),Qo(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,d=s.endIndex,h=s.onDragEnd,l=s.startIndex;h==null||h({endIndex:d,startIndex:l})}),n.detachDragEndListener()}),Qo(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Qo(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Qo(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Qo(n,"handleSlideDragStart",function(s){var d=N3(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:d.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return qJ(t,e),FJ(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,d=n.endX,h=this.state.scaleValues,l=this.props,_=l.gap,S=l.data,E=S.length-1,A=Math.min(s,d),M=Math.max(s,d),L=t.getIndexInRange(h,A),U=t.getIndexInRange(h,M);return{startIndex:L-L%_,endIndex:U===E?E:U-U%_}}},{key:"getTextOfTick",value:function(n){var s=this.props,d=s.data,h=s.tickFormatter,l=s.dataKey,_=is(d[n],l,n);return Mr(h)?h(_,n):_}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,d=s.slideMoveStartX,h=s.startX,l=s.endX,_=this.props,S=_.x,E=_.width,A=_.travellerWidth,M=_.startIndex,L=_.endIndex,U=_.onChange,N=n.pageX-d;N>0?N=Math.min(N,S+E-A-l,S+E-A-h):N<0&&(N=Math.max(N,S-h,S-l));var B=this.getIndex({startX:h+N,endX:l+N});(B.startIndex!==M||B.endIndex!==L)&&U&&U(B),this.setState({startX:h+N,endX:l+N,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var d=N3(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:d.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,d=s.brushMoveStartX,h=s.movingTravellerId,l=s.endX,_=s.startX,S=this.state[h],E=this.props,A=E.x,M=E.width,L=E.travellerWidth,U=E.onChange,N=E.gap,B=E.data,Z={startX:this.state.startX,endX:this.state.endX},J=n.pageX-d;J>0?J=Math.min(J,A+M-L-S):J<0&&(J=Math.max(J,A-S)),Z[h]=S+J;var Q=this.getIndex(Z),ie=Q.startIndex,H=Q.endIndex,X=function(){var fe=B.length-1;return h==="startX"&&(l>_?ie%N===0:H%N===0)||l<_&&H===fe||h==="endX"&&(l>_?H%N===0:ie%N===0)||l>_&&H===fe};this.setState(Qo(Qo({},h,S+J),"brushMoveStartX",n.pageX),function(){U&&X()&&U(Q)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var d=this,h=this.state,l=h.scaleValues,_=h.startX,S=h.endX,E=this.state[s],A=l.indexOf(E);if(A!==-1){var M=A+n;if(!(M===-1||M>=l.length)){var L=l[M];s==="startX"&&L>=S||s==="endX"&&L<=_||this.setState(Qo({},s,L),function(){d.props.onChange(d.getIndex({startX:d.state.startX,endX:d.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,d=n.y,h=n.width,l=n.height,_=n.fill,S=n.stroke;return ze.createElement("rect",{stroke:S,fill:_,x:s,y:d,width:h,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,d=n.y,h=n.width,l=n.height,_=n.data,S=n.children,E=n.padding,A=Pe.Children.only(S);return A?ze.cloneElement(A,{x:s,y:d,width:h,height:l,margin:E,compact:!0,data:_}):null}},{key:"renderTravellerLayer",value:function(n,s){var d,h,l=this,_=this.props,S=_.y,E=_.travellerWidth,A=_.height,M=_.traveller,L=_.ariaLabel,U=_.data,N=_.startIndex,B=_.endIndex,Z=Math.max(n,this.props.x),J=Ww(Ww({},$r(this.props,!1)),{},{x:Z,y:S,width:E,height:A}),Q=L||"Min value: ".concat((d=U[N])===null||d===void 0?void 0:d.name,", Max value: ").concat((h=U[B])===null||h===void 0?void 0:h.name);return ze.createElement(ui,{tabIndex:0,role:"slider","aria-label":Q,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(H){["ArrowLeft","ArrowRight"].includes(H.key)&&(H.preventDefault(),H.stopPropagation(),l.handleTravellerMoveKeyboard(H.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(M,J))}},{key:"renderSlide",value:function(n,s){var d=this.props,h=d.y,l=d.height,_=d.stroke,S=d.travellerWidth,E=Math.min(n,s)+S,A=Math.max(Math.abs(s-n)-S,0);return ze.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:_,fillOpacity:.2,x:E,y:h,width:A,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,d=n.endIndex,h=n.y,l=n.height,_=n.travellerWidth,S=n.stroke,E=this.state,A=E.startX,M=E.endX,L=5,U={pointerEvents:"none",fill:S};return ze.createElement(ui,{className:"recharts-brush-texts"},ze.createElement(Wv,m_({textAnchor:"end",verticalAnchor:"middle",x:Math.min(A,M)-L,y:h+l/2},U),this.getTextOfTick(s)),ze.createElement(Wv,m_({textAnchor:"start",verticalAnchor:"middle",x:Math.max(A,M)+_+L,y:h+l/2},U),this.getTextOfTick(d)))}},{key:"render",value:function(){var n=this.props,s=n.data,d=n.className,h=n.children,l=n.x,_=n.y,S=n.width,E=n.height,A=n.alwaysShowText,M=this.state,L=M.startX,U=M.endX,N=M.isTextActive,B=M.isSlideMoving,Z=M.isTravellerMoving,J=M.isTravellerFocused;if(!s||!s.length||!Ot(l)||!Ot(_)||!Ot(S)||!Ot(E)||S<=0||E<=0)return null;var Q=Wr("recharts-brush",d),ie=ze.Children.count(h)===1,H=BJ("userSelect","none");return ze.createElement(ui,{className:Q,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:H},this.renderBackground(),ie&&this.renderPanorama(),this.renderSlide(L,U),this.renderTravellerLayer(L,"startX"),this.renderTravellerLayer(U,"endX"),(N||B||Z||J||A)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,d=n.y,h=n.width,l=n.height,_=n.stroke,S=Math.floor(d+l/2)-1;return ze.createElement(ze.Fragment,null,ze.createElement("rect",{x:s,y:d,width:h,height:l,fill:_,stroke:"none"}),ze.createElement("line",{x1:s+1,y1:S,x2:s+h-1,y2:S,fill:"none",stroke:"#fff"}),ze.createElement("line",{x1:s+1,y1:S+2,x2:s+h-1,y2:S+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var d;return ze.isValidElement(n)?d=ze.cloneElement(n,s):Mr(n)?d=n(s):d=t.renderDefaultTraveller(s),d}},{key:"getDerivedStateFromProps",value:function(n,s){var d=n.data,h=n.width,l=n.x,_=n.travellerWidth,S=n.updateId,E=n.startIndex,A=n.endIndex;if(d!==s.prevData||S!==s.prevUpdateId)return Ww({prevData:d,prevTravellerWidth:_,prevUpdateId:S,prevX:l,prevWidth:h},d&&d.length?GJ({data:d,width:h,x:l,travellerWidth:_,startIndex:E,endIndex:A}):{scale:null,scaleValues:null});if(s.scale&&(h!==s.prevWidth||l!==s.prevX||_!==s.prevTravellerWidth)){s.scale.range([l,l+h-_]);var M=s.scale.domain().map(function(L){return s.scale(L)});return{prevData:d,prevTravellerWidth:_,prevUpdateId:S,prevX:l,prevWidth:h,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:M}}return null}},{key:"getIndexInRange",value:function(n,s){for(var d=n.length,h=0,l=d-1;l-h>1;){var _=Math.floor((h+l)/2);n[_]>s?l=_:h=_}return s>=n[l]?l:h}}])})(Pe.PureComponent);Qo(xp,"displayName","Brush");Qo(xp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Gw,F3;function HJ(){if(F3)return Gw;F3=1;var e=tT();function t(r,n){var s;return e(r,function(d,h,l){return s=n(d,h,l),!s}),!!s}return Gw=t,Gw}var Hw,$3;function ZJ(){if($3)return Hw;$3=1;var e=JR(),t=uh(),r=HJ(),n=Ao(),s=X_();function d(h,l,_){var S=n(h)?e:r;return _&&s(h,l,_)&&(l=void 0),S(h,t(l,3))}return Hw=d,Hw}var KJ=ZJ();const XJ=fn(KJ);var hu=function(t,r){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===r},Zw,V3;function YJ(){if(V3)return Zw;V3=1;var e=g5();function t(r,n,s){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[n]=s}return Zw=t,Zw}var Kw,U3;function JJ(){if(U3)return Kw;U3=1;var e=YJ(),t=p5(),r=uh();function n(s,d){var h={};return d=r(d,3),t(s,function(l,_,S){e(h,_,d(l,_,S))}),h}return Kw=n,Kw}var QJ=JJ();const eQ=fn(QJ);var Xw,q3;function tQ(){if(q3)return Xw;q3=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(!r(t[n],n,t))return!1;return!0}return Xw=e,Xw}var Yw,W3;function rQ(){if(W3)return Yw;W3=1;var e=tT();function t(r,n){var s=!0;return e(r,function(d,h,l){return s=!!n(d,h,l),s}),s}return Yw=t,Yw}var Jw,G3;function nQ(){if(G3)return Jw;G3=1;var e=tQ(),t=rQ(),r=uh(),n=Ao(),s=X_();function d(h,l,_){var S=n(h)?e:t;return _&&s(h,l,_)&&(l=void 0),S(h,r(l,3))}return Jw=d,Jw}var iQ=nQ();const qz=fn(iQ);var aQ=["x","y"];function Lg(e){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lg(e)}function IS(){return IS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},IS.apply(this,arguments)}function H3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H3(Object(r),!0).forEach(function(n){oQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oQ(e,t,r){return t=sQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sQ(e){var t=lQ(e,"string");return Lg(t)=="symbol"?t:t+""}function lQ(e,t){if(Lg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uQ(e,t){if(e==null)return{};var r=cQ(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function cQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function hQ(e,t){var r=e.x,n=e.y,s=uQ(e,aQ),d="".concat(r),h=parseInt(d,10),l="".concat(n),_=parseInt(l,10),S="".concat(t.height||s.height),E=parseInt(S,10),A="".concat(t.width||s.width),M=parseInt(A,10);return Bm(Bm(Bm(Bm(Bm({},t),s),h?{x:h}:{}),_?{y:_}:{}),{},{height:E,width:M,name:t.name,radius:t.radius})}function Z3(e){return ze.createElement(SJ,IS({shapeType:"rectangle",propTransformer:hQ,activeClassName:"recharts-active-bar"},e))}var fQ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var d=Ot(n)||xV(n);return d?t(n,s):(d||Lf(),r)}},dQ=["value","background"],Wz;function bp(e){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bp(e)}function pQ(e,t){if(e==null)return{};var r=mQ(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function y_(){return y_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y_.apply(this,arguments)}function K3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K3(Object(r),!0).forEach(function(n){eh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Hz(n.key),n)}}function yQ(e,t,r){return t&&X3(e.prototype,t),r&&X3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vQ(e,t,r){return t=v_(t),_Q(e,Gz()?Reflect.construct(t,r||[],v_(e).constructor):t.apply(e,r))}function _Q(e,t){if(t&&(bp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xQ(e)}function xQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gz=function(){return!!e})()}function v_(e){return v_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},v_(e)}function bQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kS(e,t)}function kS(e,t){return kS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},kS(e,t)}function eh(e,t,r){return t=Hz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hz(e){var t=wQ(e,"string");return bp(t)=="symbol"?t:t+""}function wQ(e,t){if(bp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ny=(function(e){function t(){var r;gQ(this,t);for(var n=arguments.length,s=new Array(n),d=0;d<n;d++)s[d]=arguments[d];return r=vQ(this,t,[].concat(s)),eh(r,"state",{isAnimationFinished:!1}),eh(r,"id",Xg("recharts-bar-")),eh(r,"handleAnimationEnd",function(){var h=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),h&&h()}),eh(r,"handleAnimationStart",function(){var h=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),h&&h()}),r}return bQ(t,e),yQ(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,d=this.props,h=d.shape,l=d.dataKey,_=d.activeIndex,S=d.activeBar,E=$r(this.props,!1);return n&&n.map(function(A,M){var L=M===_,U=L?S:h,N=vi(vi(vi({},E),A),{},{isActive:L,option:U,index:M,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return ze.createElement(ui,y_({className:"recharts-bar-rectangle"},Rv(s.props,A,M),{key:"rectangle-".concat(A==null?void 0:A.x,"-").concat(A==null?void 0:A.y,"-").concat(A==null?void 0:A.value,"-").concat(M)}),ze.createElement(Z3,N))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,d=s.data,h=s.layout,l=s.isAnimationActive,_=s.animationBegin,S=s.animationDuration,E=s.animationEasing,A=s.animationId,M=this.state.prevData;return ze.createElement(uc,{begin:_,duration:S,isActive:l,easing:E,from:{t:0},to:{t:1},key:"bar-".concat(A),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(L){var U=L.t,N=d.map(function(B,Z){var J=M&&M[Z];if(J){var Q=pl(J.x,B.x),ie=pl(J.y,B.y),H=pl(J.width,B.width),X=pl(J.height,B.height);return vi(vi({},B),{},{x:Q(U),y:ie(U),width:H(U),height:X(U)})}if(h==="horizontal"){var se=pl(0,B.height),fe=se(U);return vi(vi({},B),{},{y:B.y+B.height-fe,height:fe})}var Se=pl(0,B.width),Be=Se(U);return vi(vi({},B),{},{width:Be})});return ze.createElement(ui,null,n.renderRectanglesStatically(N))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,d=n.isAnimationActive,h=this.state.prevData;return d&&s&&s.length&&(!h||!a0(h,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,d=s.data,h=s.dataKey,l=s.activeIndex,_=$r(this.props.background,!1);return d.map(function(S,E){S.value;var A=S.background,M=pQ(S,dQ);if(!A)return null;var L=vi(vi(vi(vi(vi({},M),{},{fill:"#eee"},A),_),Rv(n.props,S,E)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:h,index:E,className:"recharts-bar-background-rectangle"});return ze.createElement(Z3,y_({key:"background-bar-".concat(E),option:n.props.background,isActive:E===l},L))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var d=this.props,h=d.data,l=d.xAxis,_=d.yAxis,S=d.layout,E=d.children,A=js(E,ry);if(!A)return null;var M=S==="vertical"?h[0].height/2:h[0].width/2,L=function(B,Z){var J=Array.isArray(B.value)?B.value[1]:B.value;return{x:B.x,y:B.y,value:J,errorVal:is(B,Z)}},U={clipPath:n?"url(#clipPath-".concat(s,")"):null};return ze.createElement(ui,U,A.map(function(N){return ze.cloneElement(N,{key:"error-bar-".concat(s,"-").concat(N.props.dataKey),data:h,xAxis:l,yAxis:_,layout:S,offset:M,dataPointFormatter:L})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,d=n.data,h=n.className,l=n.xAxis,_=n.yAxis,S=n.left,E=n.top,A=n.width,M=n.height,L=n.isAnimationActive,U=n.background,N=n.id;if(s||!d||!d.length)return null;var B=this.state.isAnimationFinished,Z=Wr("recharts-bar",h),J=l&&l.allowDataOverflow,Q=_&&_.allowDataOverflow,ie=J||Q,H=Dr(N)?this.id:N;return ze.createElement(ui,{className:Z},J||Q?ze.createElement("defs",null,ze.createElement("clipPath",{id:"clipPath-".concat(H)},ze.createElement("rect",{x:J?S:S-A/2,y:Q?E:E-M/2,width:J?A:A*2,height:Q?M:M*2}))):null,ze.createElement(ui,{className:"recharts-bar-rectangles",clipPath:ie?"url(#clipPath-".concat(H,")"):null},U?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(ie,H),(!L||B)&&nh.renderCallByParent(this.props,d))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])})(Pe.PureComponent);Wz=ny;eh(ny,"displayName","Bar");eh(ny,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Bp.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});eh(ny,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,s=e.bandSize,d=e.xAxis,h=e.yAxis,l=e.xAxisTicks,_=e.yAxisTicks,S=e.stackedData,E=e.dataStartIndex,A=e.displayedData,M=e.offset,L=FZ(n,r);if(!L)return null;var U=t.layout,N=r.type.defaultProps,B=N!==void 0?vi(vi({},N),r.props):r.props,Z=B.dataKey,J=B.children,Q=B.minPointSize,ie=U==="horizontal"?h:d,H=S?ie.scale.domain():null,X=ZZ({numericAxis:ie}),se=js(J,S5),fe=A.map(function(Se,Be){var xe,$e,Fe,Ke,Xe,rt;S?xe=$Z(S[E+Be],H):(xe=is(Se,Z),Array.isArray(xe)||(xe=[X,xe]));var Qe=fQ(Q,Wz.defaultProps.minPointSize)(xe[1],Be);if(U==="horizontal"){var We,tt=[h.scale(xe[0]),h.scale(xe[1])],nt=tt[0],Ae=tt[1];$e=DO({axis:d,ticks:l,bandSize:s,offset:L.offset,entry:Se,index:Be}),Fe=(We=Ae??nt)!==null&&We!==void 0?We:void 0,Ke=L.size;var Ne=nt-Ae;if(Xe=Number.isNaN(Ne)?0:Ne,rt={x:$e,y:h.y,width:Ke,height:h.height},Math.abs(Qe)>0&&Math.abs(Xe)<Math.abs(Qe)){var yt=gl(Xe||Qe)*(Math.abs(Qe)-Math.abs(Xe));Fe-=yt,Xe+=yt}}else{var jt=[d.scale(xe[0]),d.scale(xe[1])],Ut=jt[0],rr=jt[1];if($e=Ut,Fe=DO({axis:h,ticks:_,bandSize:s,offset:L.offset,entry:Se,index:Be}),Ke=rr-Ut,Xe=L.size,rt={x:d.x,y:Fe,width:d.width,height:Xe},Math.abs(Qe)>0&&Math.abs(Ke)<Math.abs(Qe)){var cr=gl(Ke||Qe)*(Math.abs(Qe)-Math.abs(Ke));Ke+=cr}}return vi(vi(vi({},Se),{},{x:$e,y:Fe,width:Ke,height:Xe,value:S?xe:xe[1],payload:Se,background:rt},se&&se[Be]&&se[Be].props),{},{tooltipPayload:[Mz(r,Se)],tooltipPosition:{x:$e+Ke/2,y:Fe+Xe/2}})});return vi({data:fe,layout:U},M)});function Bg(e){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bg(e)}function SQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Zz(n.key),n)}}function PQ(e,t,r){return t&&Y3(e.prototype,t),r&&Y3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function J3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J3(Object(r),!0).forEach(function(n){c0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c0(e,t,r){return t=Zz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zz(e){var t=TQ(e,"string");return Bg(t)=="symbol"?t:t+""}function TQ(e,t){if(Bg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AQ=function(t,r,n,s,d){var h=t.width,l=t.height,_=t.layout,S=t.children,E=Object.keys(r),A={left:n.left,leftMirror:n.left,right:h-n.right,rightMirror:h-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},M=!!es(S,ny);return E.reduce(function(L,U){var N=r[U],B=N.orientation,Z=N.domain,J=N.padding,Q=J===void 0?{}:J,ie=N.mirror,H=N.reversed,X="".concat(B).concat(ie?"Mirror":""),se,fe,Se,Be,xe;if(N.type==="number"&&(N.padding==="gap"||N.padding==="no-gap")){var $e=Z[1]-Z[0],Fe=1/0,Ke=N.categoricalDomain.sort(SV);if(Ke.forEach(function(jt,Ut){Ut>0&&(Fe=Math.min((jt||0)-(Ke[Ut-1]||0),Fe))}),Number.isFinite(Fe)){var Xe=Fe/$e,rt=N.layout==="vertical"?n.height:n.width;if(N.padding==="gap"&&(se=Xe*rt/2),N.padding==="no-gap"){var Qe=zf(t.barCategoryGap,Xe*rt),We=Xe*rt/2;se=We-Qe-(We-Qe)/rt*Qe}}}s==="xAxis"?fe=[n.left+(Q.left||0)+(se||0),n.left+n.width-(Q.right||0)-(se||0)]:s==="yAxis"?fe=_==="horizontal"?[n.top+n.height-(Q.bottom||0),n.top+(Q.top||0)]:[n.top+(Q.top||0)+(se||0),n.top+n.height-(Q.bottom||0)-(se||0)]:fe=N.range,H&&(fe=[fe[1],fe[0]]);var tt=BZ(N,d,M),nt=tt.scale,Ae=tt.realScaleType;nt.domain(Z).range(fe),NZ(nt);var Ne=HZ(nt,fl(fl({},N),{},{realScaleType:Ae}));s==="xAxis"?(xe=B==="top"&&!ie||B==="bottom"&&ie,Se=n.left,Be=A[X]-xe*N.height):s==="yAxis"&&(xe=B==="left"&&!ie||B==="right"&&ie,Se=A[X]-xe*N.width,Be=n.top);var yt=fl(fl(fl({},N),Ne),{},{realScaleType:Ae,x:Se,y:Be,scale:nt,width:s==="xAxis"?n.width:N.width,height:s==="yAxis"?n.height:N.height});return yt.bandSize=a_(yt,Ne),!N.hide&&s==="xAxis"?A[X]+=(xe?-1:1)*yt.height:N.hide||(A[X]+=(xe?-1:1)*yt.width),fl(fl({},L),{},c0({},U,yt))},{})},Kz=function(t,r){var n=t.x,s=t.y,d=r.x,h=r.y;return{x:Math.min(n,d),y:Math.min(s,h),width:Math.abs(d-n),height:Math.abs(h-s)}},EQ=function(t){var r=t.x1,n=t.y1,s=t.x2,d=t.y2;return Kz({x:r,y:n},{x:s,y:d})},Xz=(function(){function e(t){SQ(this,e),this.scale=t}return PQ(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,d=n.position;if(r!==void 0){if(d)switch(d){case"start":return this.scale(r);case"middle":{var h=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+h}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var _=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+_}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],d=n[n.length-1];return s<=d?r>=s&&r<=d:r>=d&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])})();c0(Xz,"EPS",1e-4);var kT=function(t){var r=Object.keys(t).reduce(function(n,s){return fl(fl({},n),{},c0({},s,Xz.create(t[s])))},{});return fl(fl({},r),{},{apply:function(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=d.bandAware,l=d.position;return eQ(s,function(_,S){return r[S].apply(_,{bandAware:h,position:l})})},isInRange:function(s){return qz(s,function(d,h){return r[h].isInRange(d)})}})};function CQ(e){return(e%180+180)%180}var MQ=function(t){var r=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,d=CQ(s),h=d*Math.PI/180,l=Math.atan(n/r),_=h>l&&h<Math.PI-l?n/Math.sin(h):r/Math.cos(h);return Math.abs(_)},Qw,Q3;function IQ(){if(Q3)return Qw;Q3=1;var e=uh(),t=Yg(),r=Z_();function n(s){return function(d,h,l){var _=Object(d);if(!t(d)){var S=e(h,3);d=r(d),h=function(A){return S(_[A],A,_)}}var E=s(d,h,l);return E>-1?_[S?d[E]:E]:void 0}}return Qw=n,Qw}var e2,e4;function kQ(){if(e4)return e2;e4=1;var e=Fz();function t(r){var n=e(r),s=n%1;return n===n?s?n-s:n:0}return e2=t,e2}var t2,t4;function OQ(){if(t4)return t2;t4=1;var e=u5(),t=uh(),r=kQ(),n=Math.max;function s(d,h,l){var _=d==null?0:d.length;if(!_)return-1;var S=l==null?0:r(l);return S<0&&(S=n(_+S,0)),e(d,t(h,3),S)}return t2=s,t2}var r2,r4;function DQ(){if(r4)return r2;r4=1;var e=IQ(),t=OQ(),r=e(t);return r2=r,r2}var RQ=DQ();const zQ=fn(RQ);var jQ=TR();const LQ=fn(jQ);var BQ=LQ(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),OT=Pe.createContext(void 0),DT=Pe.createContext(void 0),Yz=Pe.createContext(void 0),Jz=Pe.createContext({}),Qz=Pe.createContext(void 0),ej=Pe.createContext(0),tj=Pe.createContext(0),n4=function(t){var r=t.state,n=r.xAxisMap,s=r.yAxisMap,d=r.offset,h=t.clipPathId,l=t.children,_=t.width,S=t.height,E=BQ(d);return ze.createElement(OT.Provider,{value:n},ze.createElement(DT.Provider,{value:s},ze.createElement(Jz.Provider,{value:d},ze.createElement(Yz.Provider,{value:E},ze.createElement(Qz.Provider,{value:h},ze.createElement(ej.Provider,{value:S},ze.createElement(tj.Provider,{value:_},l)))))))},NQ=function(){return Pe.useContext(Qz)},rj=function(t){var r=Pe.useContext(OT);r==null&&Lf();var n=r[t];return n==null&&Lf(),n},FQ=function(){var t=Pe.useContext(OT);return Jc(t)},$Q=function(){var t=Pe.useContext(DT),r=zQ(t,function(n){return qz(n.domain,Number.isFinite)});return r||Jc(t)},nj=function(t){var r=Pe.useContext(DT);r==null&&Lf();var n=r[t];return n==null&&Lf(),n},VQ=function(){var t=Pe.useContext(Yz);return t},UQ=function(){return Pe.useContext(Jz)},RT=function(){return Pe.useContext(tj)},zT=function(){return Pe.useContext(ej)};function wp(e){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wp(e)}function qQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aj(n.key),n)}}function GQ(e,t,r){return t&&WQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function HQ(e,t,r){return t=__(t),ZQ(e,ij()?Reflect.construct(t,r||[],__(e).constructor):t.apply(e,r))}function ZQ(e,t){if(t&&(wp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KQ(e)}function KQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ij(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ij=function(){return!!e})()}function __(e){return __=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},__(e)}function XQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OS(e,t)}function OS(e,t){return OS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},OS(e,t)}function i4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function a4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i4(Object(r),!0).forEach(function(n){jT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jT(e,t,r){return t=aj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aj(e){var t=YQ(e,"string");return wp(t)=="symbol"?t:t+""}function YQ(e,t){if(wp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function JQ(e,t){return ree(e)||tee(e,t)||eee(e,t)||QQ()}function QQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eee(e,t){if(e){if(typeof e=="string")return o4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o4(e,t)}}function o4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,S=!1;try{if(d=(r=r.call(e)).next,t!==0)for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){S=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(S)throw s}}return l}}function ree(e){if(Array.isArray(e))return e}function DS(){return DS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DS.apply(this,arguments)}var nee=function(t,r){var n;return ze.isValidElement(t)?n=ze.cloneElement(t,r):Mr(t)?n=t(r):n=ze.createElement("line",DS({},r,{className:"recharts-reference-line-line"})),n},iee=function(t,r,n,s,d,h,l,_,S){var E=d.x,A=d.y,M=d.width,L=d.height;if(n){var U=S.y,N=t.y.apply(U,{position:h});if(hu(S,"discard")&&!t.y.isInRange(N))return null;var B=[{x:E+M,y:N},{x:E,y:N}];return _==="left"?B.reverse():B}if(r){var Z=S.x,J=t.x.apply(Z,{position:h});if(hu(S,"discard")&&!t.x.isInRange(J))return null;var Q=[{x:J,y:A+L},{x:J,y:A}];return l==="top"?Q.reverse():Q}if(s){var ie=S.segment,H=ie.map(function(X){return t.apply(X,{position:h})});return hu(S,"discard")&&XJ(H,function(X){return!t.isInRange(X)})?null:H}return null};function aee(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,d=e.yAxisId,h=e.shape,l=e.className,_=e.alwaysShow,S=NQ(),E=rj(s),A=nj(d),M=VQ();if(!S||!M)return null;nc(_===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var L=kT({x:E.scale,y:A.scale}),U=Oi(t),N=Oi(r),B=n&&n.length===2,Z=iee(L,U,N,B,M,e.position,E.orientation,A.orientation,e);if(!Z)return null;var J=JQ(Z,2),Q=J[0],ie=Q.x,H=Q.y,X=J[1],se=X.x,fe=X.y,Se=hu(e,"hidden")?"url(#".concat(S,")"):void 0,Be=a4(a4({clipPath:Se},$r(e,!0)),{},{x1:ie,y1:H,x2:se,y2:fe});return ze.createElement(ui,{className:Wr("recharts-reference-line",l)},nee(h,Be),Ba.renderCallByParent(e,EQ({x1:ie,y1:H,x2:se,y2:fe})))}var LT=(function(e){function t(){return qQ(this,t),HQ(this,t,arguments)}return XQ(t,e),GQ(t,[{key:"render",value:function(){return ze.createElement(aee,this.props)}}])})(ze.Component);jT(LT,"displayName","ReferenceLine");jT(LT,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function RS(){return RS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RS.apply(this,arguments)}function Sp(e){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sp(e)}function s4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function l4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s4(Object(r),!0).forEach(function(n){h0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function see(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sj(n.key),n)}}function lee(e,t,r){return t&&see(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uee(e,t,r){return t=x_(t),cee(e,oj()?Reflect.construct(t,r||[],x_(e).constructor):t.apply(e,r))}function cee(e,t){if(t&&(Sp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hee(e)}function hee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oj=function(){return!!e})()}function x_(e){return x_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},x_(e)}function fee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zS(e,t)}function zS(e,t){return zS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},zS(e,t)}function h0(e,t,r){return t=sj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sj(e){var t=dee(e,"string");return Sp(t)=="symbol"?t:t+""}function dee(e,t){if(Sp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var pee=function(t){var r=t.x,n=t.y,s=t.xAxis,d=t.yAxis,h=kT({x:s.scale,y:d.scale}),l=h.apply({x:r,y:n},{bandAware:!0});return hu(t,"discard")&&!h.isInRange(l)?null:l},f0=(function(e){function t(){return oee(this,t),uee(this,t,arguments)}return fee(t,e),lee(t,[{key:"render",value:function(){var n=this.props,s=n.x,d=n.y,h=n.r,l=n.alwaysShow,_=n.clipPathId,S=Oi(s),E=Oi(d);if(nc(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!S||!E)return null;var A=pee(this.props);if(!A)return null;var M=A.x,L=A.y,U=this.props,N=U.shape,B=U.className,Z=hu(this.props,"hidden")?"url(#".concat(_,")"):void 0,J=l4(l4({clipPath:Z},$r(this.props,!0)),{},{cx:M,cy:L});return ze.createElement(ui,{className:Wr("recharts-reference-dot",B)},t.renderDot(N,J),Ba.renderCallByParent(this.props,{x:M-h,y:L-h,width:2*h,height:2*h}))}}])})(ze.Component);h0(f0,"displayName","ReferenceDot");h0(f0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});h0(f0,"renderDot",function(e,t){var r;return ze.isValidElement(e)?r=ze.cloneElement(e,t):Mr(e)?r=e(t):r=ze.createElement(IT,RS({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function jS(){return jS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jS.apply(this,arguments)}function Pp(e){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function u4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function c4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u4(Object(r),!0).forEach(function(n){d0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uj(n.key),n)}}function yee(e,t,r){return t&&gee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vee(e,t,r){return t=b_(t),_ee(e,lj()?Reflect.construct(t,r||[],b_(e).constructor):t.apply(e,r))}function _ee(e,t){if(t&&(Pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xee(e)}function xee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lj=function(){return!!e})()}function b_(e){return b_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},b_(e)}function bee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LS(e,t)}function LS(e,t){return LS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},LS(e,t)}function d0(e,t,r){return t=uj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uj(e){var t=wee(e,"string");return Pp(t)=="symbol"?t:t+""}function wee(e,t){if(Pp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var See=function(t,r,n,s,d){var h=d.x1,l=d.x2,_=d.y1,S=d.y2,E=d.xAxis,A=d.yAxis;if(!E||!A)return null;var M=kT({x:E.scale,y:A.scale}),L={x:t?M.x.apply(h,{position:"start"}):M.x.rangeMin,y:n?M.y.apply(_,{position:"start"}):M.y.rangeMin},U={x:r?M.x.apply(l,{position:"end"}):M.x.rangeMax,y:s?M.y.apply(S,{position:"end"}):M.y.rangeMax};return hu(d,"discard")&&(!M.isInRange(L)||!M.isInRange(U))?null:Kz(L,U)},p0=(function(e){function t(){return mee(this,t),vee(this,t,arguments)}return bee(t,e),yee(t,[{key:"render",value:function(){var n=this.props,s=n.x1,d=n.x2,h=n.y1,l=n.y2,_=n.className,S=n.alwaysShow,E=n.clipPathId;nc(S===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var A=Oi(s),M=Oi(d),L=Oi(h),U=Oi(l),N=this.props.shape;if(!A&&!M&&!L&&!U&&!N)return null;var B=See(A,M,L,U,this.props);if(!B&&!N)return null;var Z=hu(this.props,"hidden")?"url(#".concat(E,")"):void 0;return ze.createElement(ui,{className:Wr("recharts-reference-area",_)},t.renderRect(N,c4(c4({clipPath:Z},$r(this.props,!0)),B)),Ba.renderCallByParent(this.props,B))}}])})(ze.Component);d0(p0,"displayName","ReferenceArea");d0(p0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});d0(p0,"renderRect",function(e,t){var r;return ze.isValidElement(e)?r=ze.cloneElement(e,t):Mr(e)?r=e(t):r=ze.createElement(MT,jS({},t,{className:"recharts-reference-area-rect"})),r});function cj(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function Pee(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return MQ(n,r)}function Tee(e,t,r){var n=r==="width",s=e.x,d=e.y,h=e.width,l=e.height;return t===1?{start:n?s:d,end:n?s+h:d+l}:{start:n?s+h:d+l,end:n?s:d}}function w_(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var d=r();return e*(t-e*d/2-n)>=0&&e*(t+e*d/2-s)<=0}function Aee(e,t){return cj(e,t+1)}function Eee(e,t,r,n,s){for(var d=(n||[]).slice(),h=t.start,l=t.end,_=0,S=1,E=h,A=function(){var U=n==null?void 0:n[_];if(U===void 0)return{v:cj(n,S)};var N=_,B,Z=function(){return B===void 0&&(B=r(U,N)),B},J=U.coordinate,Q=_===0||w_(e,J,Z,E,l);Q||(_=0,E=h,S+=1),Q&&(E=J+e*(Z()/2+s),_+=S)},M;S<=d.length;)if(M=A(),M)return M.v;return[]}function Ng(e){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ng(e)}function h4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function La(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h4(Object(r),!0).forEach(function(n){Cee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cee(e,t,r){return t=Mee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mee(e){var t=Iee(e,"string");return Ng(t)=="symbol"?t:t+""}function Iee(e,t){if(Ng(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kee(e,t,r,n,s){for(var d=(n||[]).slice(),h=d.length,l=t.start,_=t.end,S=function(M){var L=d[M],U,N=function(){return U===void 0&&(U=r(L,M)),U};if(M===h-1){var B=e*(L.coordinate+e*N()/2-_);d[M]=L=La(La({},L),{},{tickCoord:B>0?L.coordinate-B*e:L.coordinate})}else d[M]=L=La(La({},L),{},{tickCoord:L.coordinate});var Z=w_(e,L.tickCoord,N,l,_);Z&&(_=L.tickCoord-e*(N()/2+s),d[M]=La(La({},L),{},{isShow:!0}))},E=h-1;E>=0;E--)S(E);return d}function Oee(e,t,r,n,s,d){var h=(n||[]).slice(),l=h.length,_=t.start,S=t.end;if(d){var E=n[l-1],A=r(E,l-1),M=e*(E.coordinate+e*A/2-S);h[l-1]=E=La(La({},E),{},{tickCoord:M>0?E.coordinate-M*e:E.coordinate});var L=w_(e,E.tickCoord,function(){return A},_,S);L&&(S=E.tickCoord-e*(A/2+s),h[l-1]=La(La({},E),{},{isShow:!0}))}for(var U=d?l-1:l,N=function(J){var Q=h[J],ie,H=function(){return ie===void 0&&(ie=r(Q,J)),ie};if(J===0){var X=e*(Q.coordinate-e*H()/2-_);h[J]=Q=La(La({},Q),{},{tickCoord:X<0?Q.coordinate-X*e:Q.coordinate})}else h[J]=Q=La(La({},Q),{},{tickCoord:Q.coordinate});var se=w_(e,Q.tickCoord,H,_,S);se&&(_=Q.tickCoord+e*(H()/2+s),h[J]=La(La({},Q),{},{isShow:!0}))},B=0;B<U;B++)N(B);return h}function BT(e,t,r){var n=e.tick,s=e.ticks,d=e.viewBox,h=e.minTickGap,l=e.orientation,_=e.interval,S=e.tickFormatter,E=e.unit,A=e.angle;if(!s||!s.length||!n)return[];if(Ot(_)||Bp.isSsr)return Aee(s,typeof _=="number"&&Ot(_)?_:0);var M=[],L=l==="top"||l==="bottom"?"width":"height",U=E&&L==="width"?Km(E,{fontSize:t,letterSpacing:r}):{width:0,height:0},N=function(Q,ie){var H=Mr(S)?S(Q.value,ie):Q.value;return L==="width"?Pee(Km(H,{fontSize:t,letterSpacing:r}),U,A):Km(H,{fontSize:t,letterSpacing:r})[L]},B=s.length>=2?gl(s[1].coordinate-s[0].coordinate):1,Z=Tee(d,B,L);return _==="equidistantPreserveStart"?Eee(B,Z,N,s,h):(_==="preserveStart"||_==="preserveStartEnd"?M=Oee(B,Z,N,s,h,_==="preserveStartEnd"):M=kee(B,Z,N,s,h),M.filter(function(J){return J.isShow}))}var Dee=["viewBox"],Ree=["viewBox"],zee=["ticks"];function Tp(e){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tp(e)}function ep(){return ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ep.apply(this,arguments)}function f4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ii(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f4(Object(r),!0).forEach(function(n){NT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function n2(e,t){if(e==null)return{};var r=jee(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Lee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fj(n.key),n)}}function Bee(e,t,r){return t&&d4(e.prototype,t),r&&d4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nee(e,t,r){return t=S_(t),Fee(e,hj()?Reflect.construct(t,r||[],S_(e).constructor):t.apply(e,r))}function Fee(e,t){if(t&&(Tp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ee(e)}function $ee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hj=function(){return!!e})()}function S_(e){return S_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},S_(e)}function Vee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BS(e,t)}function BS(e,t){return BS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},BS(e,t)}function NT(e,t,r){return t=fj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fj(e){var t=Uee(e,"string");return Tp(t)=="symbol"?t:t+""}function Uee(e,t){if(Tp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Vp=(function(e){function t(r){var n;return Lee(this,t),n=Nee(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return Vee(t,e),Bee(t,[{key:"shouldComponentUpdate",value:function(n,s){var d=n.viewBox,h=n2(n,Dee),l=this.props,_=l.viewBox,S=n2(l,Ree);return!rp(d,_)||!rp(h,S)||!rp(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,d=s.x,h=s.y,l=s.width,_=s.height,S=s.orientation,E=s.tickSize,A=s.mirror,M=s.tickMargin,L,U,N,B,Z,J,Q=A?-1:1,ie=n.tickSize||E,H=Ot(n.tickCoord)?n.tickCoord:n.coordinate;switch(S){case"top":L=U=n.coordinate,B=h+ +!A*_,N=B-Q*ie,J=N-Q*M,Z=H;break;case"left":N=B=n.coordinate,U=d+ +!A*l,L=U-Q*ie,Z=L-Q*M,J=H;break;case"right":N=B=n.coordinate,U=d+ +A*l,L=U+Q*ie,Z=L+Q*M,J=H;break;default:L=U=n.coordinate,B=h+ +A*_,N=B+Q*ie,J=N+Q*M,Z=H;break}return{line:{x1:L,y1:N,x2:U,y2:B},tick:{x:Z,y:J}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,d=n.mirror,h;switch(s){case"left":h=d?"start":"end";break;case"right":h=d?"end":"start";break;default:h="middle";break}return h}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,d=n.mirror,h="end";switch(s){case"left":case"right":h="middle";break;case"top":h=d?"start":"end";break;default:h=d?"end":"start";break}return h}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,d=n.y,h=n.width,l=n.height,_=n.orientation,S=n.mirror,E=n.axisLine,A=Ii(Ii(Ii({},$r(this.props,!1)),$r(E,!1)),{},{fill:"none"});if(_==="top"||_==="bottom"){var M=+(_==="top"&&!S||_==="bottom"&&S);A=Ii(Ii({},A),{},{x1:s,y1:d+M*l,x2:s+h,y2:d+M*l})}else{var L=+(_==="left"&&!S||_==="right"&&S);A=Ii(Ii({},A),{},{x1:s+L*h,y1:d,x2:s+L*h,y2:d+l})}return ze.createElement("line",ep({},A,{className:Wr("recharts-cartesian-axis-line",zs(E,"className"))}))}},{key:"renderTicks",value:function(n,s,d){var h=this,l=this.props,_=l.tickLine,S=l.stroke,E=l.tick,A=l.tickFormatter,M=l.unit,L=BT(Ii(Ii({},this.props),{},{ticks:n}),s,d),U=this.getTickTextAnchor(),N=this.getTickVerticalAnchor(),B=$r(this.props,!1),Z=$r(E,!1),J=Ii(Ii({},B),{},{fill:"none"},$r(_,!1)),Q=L.map(function(ie,H){var X=h.getTickLineCoord(ie),se=X.line,fe=X.tick,Se=Ii(Ii(Ii(Ii({textAnchor:U,verticalAnchor:N},B),{},{stroke:"none",fill:S},Z),fe),{},{index:H,payload:ie,visibleTicksCount:L.length,tickFormatter:A});return ze.createElement(ui,ep({className:"recharts-cartesian-axis-tick",key:"tick-".concat(ie.value,"-").concat(ie.coordinate,"-").concat(ie.tickCoord)},Rv(h.props,ie,H)),_&&ze.createElement("line",ep({},J,se,{className:Wr("recharts-cartesian-axis-tick-line",zs(_,"className"))})),E&&t.renderTickItem(E,Se,"".concat(Mr(A)?A(ie.value,H):ie.value).concat(M||"")))});return ze.createElement("g",{className:"recharts-cartesian-axis-ticks"},Q)}},{key:"render",value:function(){var n=this,s=this.props,d=s.axisLine,h=s.width,l=s.height,_=s.ticksGenerator,S=s.className,E=s.hide;if(E)return null;var A=this.props,M=A.ticks,L=n2(A,zee),U=M;return Mr(_)&&(U=M&&M.length>0?_(this.props):_(L)),h<=0||l<=0||!U||!U.length?null:ze.createElement(ui,{className:Wr("recharts-cartesian-axis",S),ref:function(B){n.layerReference=B}},d&&this.renderAxisLine(),this.renderTicks(U,this.state.fontSize,this.state.letterSpacing),Ba.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,d){var h,l=Wr(s.className,"recharts-cartesian-axis-tick-value");return ze.isValidElement(n)?h=ze.cloneElement(n,Ii(Ii({},s),{},{className:l})):Mr(n)?h=n(Ii(Ii({},s),{},{className:l})):h=ze.createElement(Wv,ep({},s,{className:"recharts-cartesian-axis-tick-value"}),d),h}}])})(Pe.Component);NT(Vp,"displayName","CartesianAxis");NT(Vp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var qee=["x1","y1","x2","y2","key"],Wee=["offset"];function Bf(e){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bf(e)}function p4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Na(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p4(Object(r),!0).forEach(function(n){Gee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gee(e,t,r){return t=Hee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hee(e){var t=Zee(e,"string");return Bf(t)=="symbol"?t:t+""}function Zee(e,t){if(Bf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cf(){return Cf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cf.apply(this,arguments)}function m4(e,t){if(e==null)return{};var r=Kee(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Kee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Xee=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,s=t.x,d=t.y,h=t.width,l=t.height,_=t.ry;return ze.createElement("rect",{x:s,y:d,ry:_,width:h,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function dj(e,t){var r;if(ze.isValidElement(e))r=ze.cloneElement(e,t);else if(Mr(e))r=e(t);else{var n=t.x1,s=t.y1,d=t.x2,h=t.y2,l=t.key,_=m4(t,qee),S=$r(_,!1);S.offset;var E=m4(S,Wee);r=ze.createElement("line",Cf({},E,{x1:n,y1:s,x2:d,y2:h,fill:"none",key:l}))}return r}function Yee(e){var t=e.x,r=e.width,n=e.horizontal,s=n===void 0?!0:n,d=e.horizontalPoints;if(!s||!d||!d.length)return null;var h=d.map(function(l,_){var S=Na(Na({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(_),index:_});return dj(s,S)});return ze.createElement("g",{className:"recharts-cartesian-grid-horizontal"},h)}function Jee(e){var t=e.y,r=e.height,n=e.vertical,s=n===void 0?!0:n,d=e.verticalPoints;if(!s||!d||!d.length)return null;var h=d.map(function(l,_){var S=Na(Na({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(_),index:_});return dj(s,S)});return ze.createElement("g",{className:"recharts-cartesian-grid-vertical"},h)}function Qee(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,d=e.width,h=e.height,l=e.horizontalPoints,_=e.horizontal,S=_===void 0?!0:_;if(!S||!t||!t.length)return null;var E=l.map(function(M){return Math.round(M+s-s)}).sort(function(M,L){return M-L});s!==E[0]&&E.unshift(0);var A=E.map(function(M,L){var U=!E[L+1],N=U?s+h-M:E[L+1]-M;if(N<=0)return null;var B=L%t.length;return ze.createElement("rect",{key:"react-".concat(L),y:M,x:n,height:N,width:d,stroke:"none",fill:t[B],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ze.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},A)}function ete(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,d=e.x,h=e.y,l=e.width,_=e.height,S=e.verticalPoints;if(!r||!n||!n.length)return null;var E=S.map(function(M){return Math.round(M+d-d)}).sort(function(M,L){return M-L});d!==E[0]&&E.unshift(0);var A=E.map(function(M,L){var U=!E[L+1],N=U?d+l-M:E[L+1]-M;if(N<=0)return null;var B=L%n.length;return ze.createElement("rect",{key:"react-".concat(L),x:M,y:h,width:N,height:_,stroke:"none",fill:n[B],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return ze.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},A)}var tte=function(t,r){var n=t.xAxis,s=t.width,d=t.height,h=t.offset;return Ez(BT(Na(Na(Na({},Vp.defaultProps),n),{},{ticks:Qu(n,!0),viewBox:{x:0,y:0,width:s,height:d}})),h.left,h.left+h.width,r)},rte=function(t,r){var n=t.yAxis,s=t.width,d=t.height,h=t.offset;return Ez(BT(Na(Na(Na({},Vp.defaultProps),n),{},{ticks:Qu(n,!0),viewBox:{x:0,y:0,width:s,height:d}})),h.top,h.top+h.height,r)},Wd={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function pj(e){var t,r,n,s,d,h,l=RT(),_=zT(),S=UQ(),E=Na(Na({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Wd.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Wd.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Wd.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:Wd.horizontalFill,vertical:(d=e.vertical)!==null&&d!==void 0?d:Wd.vertical,verticalFill:(h=e.verticalFill)!==null&&h!==void 0?h:Wd.verticalFill,x:Ot(e.x)?e.x:S.left,y:Ot(e.y)?e.y:S.top,width:Ot(e.width)?e.width:S.width,height:Ot(e.height)?e.height:S.height}),A=E.x,M=E.y,L=E.width,U=E.height,N=E.syncWithTicks,B=E.horizontalValues,Z=E.verticalValues,J=FQ(),Q=$Q();if(!Ot(L)||L<=0||!Ot(U)||U<=0||!Ot(A)||A!==+A||!Ot(M)||M!==+M)return null;var ie=E.verticalCoordinatesGenerator||tte,H=E.horizontalCoordinatesGenerator||rte,X=E.horizontalPoints,se=E.verticalPoints;if((!X||!X.length)&&Mr(H)){var fe=B&&B.length,Se=H({yAxis:Q?Na(Na({},Q),{},{ticks:fe?B:Q.ticks}):void 0,width:l,height:_,offset:S},fe?!0:N);nc(Array.isArray(Se),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Bf(Se),"]")),Array.isArray(Se)&&(X=Se)}if((!se||!se.length)&&Mr(ie)){var Be=Z&&Z.length,xe=ie({xAxis:J?Na(Na({},J),{},{ticks:Be?Z:J.ticks}):void 0,width:l,height:_,offset:S},Be?!0:N);nc(Array.isArray(xe),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Bf(xe),"]")),Array.isArray(xe)&&(se=xe)}return ze.createElement("g",{className:"recharts-cartesian-grid"},ze.createElement(Xee,{fill:E.fill,fillOpacity:E.fillOpacity,x:E.x,y:E.y,width:E.width,height:E.height,ry:E.ry}),ze.createElement(Yee,Cf({},E,{offset:S,horizontalPoints:X,xAxis:J,yAxis:Q})),ze.createElement(Jee,Cf({},E,{offset:S,verticalPoints:se,xAxis:J,yAxis:Q})),ze.createElement(Qee,Cf({},E,{horizontalPoints:X})),ze.createElement(ete,Cf({},E,{verticalPoints:se})))}pj.displayName="CartesianGrid";var nte=["type","layout","connectNulls","ref"],ite=["key"];function Ap(e){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ap(e)}function g4(e,t){if(e==null)return{};var r=ate(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ate(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Qm(){return Qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qm.apply(this,arguments)}function y4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Jo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y4(Object(r),!0).forEach(function(n){dl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gd(e){return ute(e)||lte(e)||ste(e)||ote()}function ote(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ste(e,t){if(e){if(typeof e=="string")return NS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NS(e,t)}}function lte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ute(e){if(Array.isArray(e))return NS(e)}function NS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gj(n.key),n)}}function hte(e,t,r){return t&&v4(e.prototype,t),r&&v4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function fte(e,t,r){return t=P_(t),dte(e,mj()?Reflect.construct(t,r||[],P_(e).constructor):t.apply(e,r))}function dte(e,t){if(t&&(Ap(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pte(e)}function pte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mj=function(){return!!e})()}function P_(e){return P_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},P_(e)}function mte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FS(e,t)}function FS(e,t){return FS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},FS(e,t)}function dl(e,t,r){return t=gj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gj(e){var t=gte(e,"string");return Ap(t)=="symbol"?t:t+""}function gte(e,t){if(Ap(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Df=(function(e){function t(){var r;cte(this,t);for(var n=arguments.length,s=new Array(n),d=0;d<n;d++)s[d]=arguments[d];return r=fte(this,t,[].concat(s)),dl(r,"state",{isAnimationFinished:!0,totalLength:0}),dl(r,"generateSimpleStrokeDasharray",function(h,l){return"".concat(l,"px ").concat(h-l,"px")}),dl(r,"getStrokeDasharray",function(h,l,_){var S=_.reduce(function(Z,J){return Z+J});if(!S)return r.generateSimpleStrokeDasharray(l,h);for(var E=Math.floor(h/S),A=h%S,M=l-h,L=[],U=0,N=0;U<_.length;N+=_[U],++U)if(N+_[U]>A){L=[].concat(Gd(_.slice(0,U)),[A-N]);break}var B=L.length%2===0?[0,M]:[M];return[].concat(Gd(t.repeat(_,E)),Gd(L),B).map(function(Z){return"".concat(Z,"px")}).join(", ")}),dl(r,"id",Xg("recharts-line-")),dl(r,"pathRef",function(h){r.mainCurve=h}),dl(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),dl(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return mte(t,e),hte(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var d=this.props,h=d.points,l=d.xAxis,_=d.yAxis,S=d.layout,E=d.children,A=js(E,ry);if(!A)return null;var M=function(N,B){return{x:N.x,y:N.y,value:N.value,errorVal:is(N.payload,B)}},L={clipPath:n?"url(#clipPath-".concat(s,")"):null};return ze.createElement(ui,L,A.map(function(U){return ze.cloneElement(U,{key:"bar-".concat(U.props.dataKey),data:h,xAxis:l,yAxis:_,layout:S,dataPointFormatter:M})}))}},{key:"renderDots",value:function(n,s,d){var h=this.props.isAnimationActive;if(h&&!this.state.isAnimationFinished)return null;var l=this.props,_=l.dot,S=l.points,E=l.dataKey,A=$r(this.props,!1),M=$r(_,!0),L=S.map(function(N,B){var Z=Jo(Jo(Jo({key:"dot-".concat(B),r:3},A),M),{},{index:B,cx:N.x,cy:N.y,value:N.value,dataKey:E,payload:N.payload,points:S});return t.renderDotItem(_,Z)}),U={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(d,")"):null};return ze.createElement(ui,Qm({className:"recharts-line-dots",key:"dots"},U),L)}},{key:"renderCurveStatically",value:function(n,s,d,h){var l=this.props,_=l.type,S=l.layout,E=l.connectNulls;l.ref;var A=g4(l,nte),M=Jo(Jo(Jo({},$r(A,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(d,")"):null,points:n},h),{},{type:_,layout:S,connectNulls:E});return ze.createElement(yS,Qm({},M,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,s){var d=this,h=this.props,l=h.points,_=h.strokeDasharray,S=h.isAnimationActive,E=h.animationBegin,A=h.animationDuration,M=h.animationEasing,L=h.animationId,U=h.animateNewValues,N=h.width,B=h.height,Z=this.state,J=Z.prevPoints,Q=Z.totalLength;return ze.createElement(uc,{begin:E,duration:A,isActive:S,easing:M,from:{t:0},to:{t:1},key:"line-".concat(L),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(ie){var H=ie.t;if(J){var X=J.length/l.length,se=l.map(function($e,Fe){var Ke=Math.floor(Fe*X);if(J[Ke]){var Xe=J[Ke],rt=pl(Xe.x,$e.x),Qe=pl(Xe.y,$e.y);return Jo(Jo({},$e),{},{x:rt(H),y:Qe(H)})}if(U){var We=pl(N*2,$e.x),tt=pl(B/2,$e.y);return Jo(Jo({},$e),{},{x:We(H),y:tt(H)})}return Jo(Jo({},$e),{},{x:$e.x,y:$e.y})});return d.renderCurveStatically(se,n,s)}var fe=pl(0,Q),Se=fe(H),Be;if(_){var xe="".concat(_).split(/[,\s]+/gim).map(function($e){return parseFloat($e)});Be=d.getStrokeDasharray(Se,Q,xe)}else Be=d.generateSimpleStrokeDasharray(Q,Se);return d.renderCurveStatically(l,n,s,{strokeDasharray:Be})})}},{key:"renderCurve",value:function(n,s){var d=this.props,h=d.points,l=d.isAnimationActive,_=this.state,S=_.prevPoints,E=_.totalLength;return l&&h&&h.length&&(!S&&E>0||!a0(S,h))?this.renderCurveWithAnimation(n,s):this.renderCurveStatically(h,n,s)}},{key:"render",value:function(){var n,s=this.props,d=s.hide,h=s.dot,l=s.points,_=s.className,S=s.xAxis,E=s.yAxis,A=s.top,M=s.left,L=s.width,U=s.height,N=s.isAnimationActive,B=s.id;if(d||!l||!l.length)return null;var Z=this.state.isAnimationFinished,J=l.length===1,Q=Wr("recharts-line",_),ie=S&&S.allowDataOverflow,H=E&&E.allowDataOverflow,X=ie||H,se=Dr(B)?this.id:B,fe=(n=$r(h,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},Se=fe.r,Be=Se===void 0?3:Se,xe=fe.strokeWidth,$e=xe===void 0?2:xe,Fe=OV(h)?h:{},Ke=Fe.clipDot,Xe=Ke===void 0?!0:Ke,rt=Be*2+$e;return ze.createElement(ui,{className:Q},ie||H?ze.createElement("defs",null,ze.createElement("clipPath",{id:"clipPath-".concat(se)},ze.createElement("rect",{x:ie?M:M-L/2,y:H?A:A-U/2,width:ie?L:L*2,height:H?U:U*2})),!Xe&&ze.createElement("clipPath",{id:"clipPath-dots-".concat(se)},ze.createElement("rect",{x:M-rt/2,y:A-rt/2,width:L+rt,height:U+rt}))):null,!J&&this.renderCurve(X,se),this.renderErrorBar(X,se),(J||h)&&this.renderDots(X,Xe,se),(!N||Z)&&nh.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,s){for(var d=n.length%2!==0?[].concat(Gd(n),[0]):n,h=[],l=0;l<s;++l)h=[].concat(Gd(h),Gd(d));return h}},{key:"renderDotItem",value:function(n,s){var d;if(ze.isValidElement(n))d=ze.cloneElement(n,s);else if(Mr(n))d=n(s);else{var h=s.key,l=g4(s,ite),_=Wr("recharts-line-dot",typeof n!="boolean"?n.className:"");d=ze.createElement(IT,Qm({key:h},l,{className:_}))}return d}}])})(Pe.PureComponent);dl(Df,"displayName","Line");dl(Df,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Bp.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});dl(Df,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,s=e.xAxisTicks,d=e.yAxisTicks,h=e.dataKey,l=e.bandSize,_=e.displayedData,S=e.offset,E=t.layout,A=_.map(function(M,L){var U=is(M,h);return E==="horizontal"?{x:OO({axis:r,ticks:s,bandSize:l,entry:M,index:L}),y:Dr(U)?null:n.scale(U),value:U,payload:M}:{x:Dr(U)?null:r.scale(U),y:OO({axis:n,ticks:d,bandSize:l,entry:M,index:L}),value:U,payload:M}});return Jo({points:A,layout:E},S)});function Ep(e){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ep(e)}function yte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_j(n.key),n)}}function _te(e,t,r){return t&&vte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xte(e,t,r){return t=T_(t),bte(e,yj()?Reflect.construct(t,r||[],T_(e).constructor):t.apply(e,r))}function bte(e,t){if(t&&(Ep(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wte(e)}function wte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yj=function(){return!!e})()}function T_(e){return T_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},T_(e)}function Ste(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$S(e,t)}function $S(e,t){return $S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},$S(e,t)}function vj(e,t,r){return t=_j(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _j(e){var t=Pte(e,"string");return Ep(t)=="symbol"?t:t+""}function Pte(e,t){if(Ep(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function VS(){return VS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},VS.apply(this,arguments)}function Tte(e){var t=e.xAxisId,r=RT(),n=zT(),s=rj(t);return s==null?null:Pe.createElement(Vp,VS({},s,{className:Wr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(h){return Qu(h,!0)}}))}var m0=(function(e){function t(){return yte(this,t),xte(this,t,arguments)}return Ste(t,e),_te(t,[{key:"render",value:function(){return Pe.createElement(Tte,this.props)}}])})(Pe.Component);vj(m0,"displayName","XAxis");vj(m0,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Cp(e){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(e)}function Ate(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ete(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wj(n.key),n)}}function Cte(e,t,r){return t&&Ete(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mte(e,t,r){return t=A_(t),Ite(e,xj()?Reflect.construct(t,r||[],A_(e).constructor):t.apply(e,r))}function Ite(e,t){if(t&&(Cp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kte(e)}function kte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xj=function(){return!!e})()}function A_(e){return A_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},A_(e)}function Ote(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&US(e,t)}function US(e,t){return US=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},US(e,t)}function bj(e,t,r){return t=wj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wj(e){var t=Dte(e,"string");return Cp(t)=="symbol"?t:t+""}function Dte(e,t){if(Cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function qS(){return qS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qS.apply(this,arguments)}var Rte=function(t){var r=t.yAxisId,n=RT(),s=zT(),d=nj(r);return d==null?null:Pe.createElement(Vp,qS({},d,{className:Wr("recharts-".concat(d.axisType," ").concat(d.axisType),d.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return Qu(l,!0)}}))},Fg=(function(e){function t(){return Ate(this,t),Mte(this,t,arguments)}return Ote(t,e),Cte(t,[{key:"render",value:function(){return Pe.createElement(Rte,this.props)}}])})(Pe.Component);bj(Fg,"displayName","YAxis");bj(Fg,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function _4(e){return Bte(e)||Lte(e)||jte(e)||zte()}function zte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jte(e,t){if(e){if(typeof e=="string")return WS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WS(e,t)}}function Lte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Bte(e){if(Array.isArray(e))return WS(e)}function WS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var GS=function(t,r,n,s,d){var h=js(t,LT),l=js(t,f0),_=[].concat(_4(h),_4(l)),S=js(t,p0),E="".concat(s,"Id"),A=s[0],M=r;if(_.length&&(M=_.reduce(function(N,B){if(B.props[E]===n&&hu(B.props,"extendDomain")&&Ot(B.props[A])){var Z=B.props[A];return[Math.min(N[0],Z),Math.max(N[1],Z)]}return N},M)),S.length){var L="".concat(A,"1"),U="".concat(A,"2");M=S.reduce(function(N,B){if(B.props[E]===n&&hu(B.props,"extendDomain")&&Ot(B.props[L])&&Ot(B.props[U])){var Z=B.props[L],J=B.props[U];return[Math.min(N[0],Z,J),Math.max(N[1],Z,J)]}return N},M)}return d&&d.length&&(M=d.reduce(function(N,B){return Ot(B)?[Math.min(N[0],B),Math.max(N[1],B)]:N},M)),M},i2={exports:{}},x4;function Nte(){return x4||(x4=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(_,S,E){this.fn=_,this.context=S,this.once=E||!1}function d(_,S,E,A,M){if(typeof E!="function")throw new TypeError("The listener must be a function");var L=new s(E,A||_,M),U=r?r+S:S;return _._events[U]?_._events[U].fn?_._events[U]=[_._events[U],L]:_._events[U].push(L):(_._events[U]=L,_._eventsCount++),_}function h(_,S){--_._eventsCount===0?_._events=new n:delete _._events[S]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var S=[],E,A;if(this._eventsCount===0)return S;for(A in E=this._events)t.call(E,A)&&S.push(r?A.slice(1):A);return Object.getOwnPropertySymbols?S.concat(Object.getOwnPropertySymbols(E)):S},l.prototype.listeners=function(S){var E=r?r+S:S,A=this._events[E];if(!A)return[];if(A.fn)return[A.fn];for(var M=0,L=A.length,U=new Array(L);M<L;M++)U[M]=A[M].fn;return U},l.prototype.listenerCount=function(S){var E=r?r+S:S,A=this._events[E];return A?A.fn?1:A.length:0},l.prototype.emit=function(S,E,A,M,L,U){var N=r?r+S:S;if(!this._events[N])return!1;var B=this._events[N],Z=arguments.length,J,Q;if(B.fn){switch(B.once&&this.removeListener(S,B.fn,void 0,!0),Z){case 1:return B.fn.call(B.context),!0;case 2:return B.fn.call(B.context,E),!0;case 3:return B.fn.call(B.context,E,A),!0;case 4:return B.fn.call(B.context,E,A,M),!0;case 5:return B.fn.call(B.context,E,A,M,L),!0;case 6:return B.fn.call(B.context,E,A,M,L,U),!0}for(Q=1,J=new Array(Z-1);Q<Z;Q++)J[Q-1]=arguments[Q];B.fn.apply(B.context,J)}else{var ie=B.length,H;for(Q=0;Q<ie;Q++)switch(B[Q].once&&this.removeListener(S,B[Q].fn,void 0,!0),Z){case 1:B[Q].fn.call(B[Q].context);break;case 2:B[Q].fn.call(B[Q].context,E);break;case 3:B[Q].fn.call(B[Q].context,E,A);break;case 4:B[Q].fn.call(B[Q].context,E,A,M);break;default:if(!J)for(H=1,J=new Array(Z-1);H<Z;H++)J[H-1]=arguments[H];B[Q].fn.apply(B[Q].context,J)}}return!0},l.prototype.on=function(S,E,A){return d(this,S,E,A,!1)},l.prototype.once=function(S,E,A){return d(this,S,E,A,!0)},l.prototype.removeListener=function(S,E,A,M){var L=r?r+S:S;if(!this._events[L])return this;if(!E)return h(this,L),this;var U=this._events[L];if(U.fn)U.fn===E&&(!M||U.once)&&(!A||U.context===A)&&h(this,L);else{for(var N=0,B=[],Z=U.length;N<Z;N++)(U[N].fn!==E||M&&!U[N].once||A&&U[N].context!==A)&&B.push(U[N]);B.length?this._events[L]=B.length===1?B[0]:B:h(this,L)}return this},l.prototype.removeAllListeners=function(S){var E;return S?(E=r?r+S:S,this._events[E]&&h(this,E)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(i2)),i2.exports}var Fte=Nte();const $te=fn(Fte);var a2=new $te,o2="recharts.syncMouseEvents";function $g(e){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$g(e)}function Vte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ute(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Sj(n.key),n)}}function qte(e,t,r){return t&&Ute(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function s2(e,t,r){return t=Sj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sj(e){var t=Wte(e,"string");return $g(t)=="symbol"?t:t+""}function Wte(e,t){if($g(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($g(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Gte=(function(){function e(){Vte(this,e),s2(this,"activeIndex",0),s2(this,"coordinateList",[]),s2(this,"layout","horizontal")}return qte(e,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,d=s===void 0?null:s,h=r.container,l=h===void 0?null:h,_=r.layout,S=_===void 0?null:_,E=r.offset,A=E===void 0?null:E,M=r.mouseHandlerCallback,L=M===void 0?null:M;this.coordinateList=(n=d??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=S??this.layout,this.offset=A??this.offset,this.mouseHandlerCallback=L??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),d=s.x,h=s.y,l=s.height,_=this.coordinateList[this.activeIndex].coordinate,S=((r=window)===null||r===void 0?void 0:r.scrollX)||0,E=((n=window)===null||n===void 0?void 0:n.scrollY)||0,A=d+_+S,M=h+this.offset.top+l/2+E;this.mouseHandlerCallback({pageX:A,pageY:M})}}}])})();function Hte(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],s=e==null?void 0:e[1];if(n&&s&&Ot(n)&&Ot(s))return!0}return!1}function Zte(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function Pj(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,d=e.endAngle,h=ya(t,r,n,s),l=ya(t,r,n,d);return{points:[h,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:d}}function Kte(e,t,r){var n,s,d,h;if(e==="horizontal")n=t.x,d=n,s=r.top,h=r.top+r.height;else if(e==="vertical")s=t.y,h=s,n=r.left,d=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,_=t.cy,S=t.innerRadius,E=t.outerRadius,A=t.angle,M=ya(l,_,S,A),L=ya(l,_,E,A);n=M.x,s=M.y,d=L.x,h=L.y}else return Pj(t);return[{x:n,y:s},{x:d,y:h}]}function Vg(e){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vg(e)}function b4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b4(Object(r),!0).forEach(function(n){Xte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xte(e,t,r){return t=Yte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yte(e){var t=Jte(e,"string");return Vg(t)=="symbol"?t:t+""}function Jte(e,t){if(Vg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qte(e){var t,r,n=e.element,s=e.tooltipEventType,d=e.isActive,h=e.activeCoordinate,l=e.activePayload,_=e.offset,S=e.activeTooltipIndex,E=e.tooltipAxisBandSize,A=e.layout,M=e.chartName,L=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!L||!d||!h||M!=="ScatterChart"&&s!=="axis")return null;var U,N=yS;if(M==="ScatterChart")U=h,N=XY;else if(M==="BarChart")U=Zte(A,h,_,E),N=MT;else if(A==="radial"){var B=Pj(h),Z=B.cx,J=B.cy,Q=B.radius,ie=B.startAngle,H=B.endAngle;U={cx:Z,cy:J,startAngle:ie,endAngle:H,innerRadius:Q,outerRadius:Q},N=Oz}else U={points:Kte(A,h,_)},N=yS;var X=fv(fv(fv(fv({stroke:"#ccc",pointerEvents:"none"},_),U),$r(L,!1)),{},{payload:l,payloadIndex:S,className:Wr("recharts-tooltip-cursor",L.className)});return Pe.isValidElement(L)?Pe.cloneElement(L,X):Pe.createElement(N,X)}var ere=["item"],tre=["children","className","width","height","style","compact","title","desc"];function Mp(e){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mp(e)}function tp(){return tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tp.apply(this,arguments)}function w4(e,t){return ire(e)||nre(e,t)||Aj(e,t)||rre()}function rre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,S=!1;try{if(d=(r=r.call(e)).next,t!==0)for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){S=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(S)throw s}}return l}}function ire(e){if(Array.isArray(e))return e}function S4(e,t){if(e==null)return{};var r=are(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function are(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ore(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sre(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ej(n.key),n)}}function lre(e,t,r){return t&&sre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ure(e,t,r){return t=E_(t),cre(e,Tj()?Reflect.construct(t,r||[],E_(e).constructor):t.apply(e,r))}function cre(e,t){if(t&&(Mp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hre(e)}function hre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tj=function(){return!!e})()}function E_(e){return E_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},E_(e)}function fre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HS(e,t)}function HS(e,t){return HS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},HS(e,t)}function Ip(e){return mre(e)||pre(e)||Aj(e)||dre()}function dre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aj(e,t){if(e){if(typeof e=="string")return ZS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZS(e,t)}}function pre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mre(e){if(Array.isArray(e))return ZS(e)}function ZS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ot(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P4(Object(r),!0).forEach(function(n){fr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fr(e,t,r){return t=Ej(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ej(e){var t=gre(e,"string");return Mp(t)=="symbol"?t:t+""}function gre(e,t){if(Mp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yre={xAxis:["bottom","top"],yAxis:["left","right"]},vre={width:"100%",height:"100%"},Cj={x:0,y:0};function dv(e){return e}var _re=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},xre=function(t,r,n,s){var d=r.find(function(E){return E&&E.index===n});if(d){if(t==="horizontal")return{x:d.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:d.coordinate};if(t==="centric"){var h=d.coordinate,l=s.radius;return ot(ot(ot({},s),ya(s.cx,s.cy,l,h)),{},{angle:h,radius:l})}var _=d.coordinate,S=s.angle;return ot(ot(ot({},s),ya(s.cx,s.cy,_,S)),{},{angle:S,radius:_})}return Cj},g0=function(t,r){var n=r.graphicalItems,s=r.dataStartIndex,d=r.dataEndIndex,h=(n??[]).reduce(function(l,_){var S=_.props.data;return S&&S.length?[].concat(Ip(l),Ip(S)):l},[]);return h.length>0?h:t&&t.length&&Ot(s)&&Ot(d)?t.slice(s,d+1):[]};function Mj(e){return e==="number"?[0,"auto"]:void 0}var KS=function(t,r,n,s){var d=t.graphicalItems,h=t.tooltipAxis,l=g0(r,t);return n<0||!d||!d.length||n>=l.length?null:d.reduce(function(_,S){var E,A=(E=S.props.data)!==null&&E!==void 0?E:r;A&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(A=A.slice(t.dataStartIndex,t.dataEndIndex+1));var M;if(h.dataKey&&!h.allowDuplicatedCategory){var L=A===void 0?l:A;M=Ov(L,h.dataKey,s)}else M=A&&A[n]||l[n];return M?[].concat(Ip(_),[Mz(S,M)]):_},[])},T4=function(t,r,n,s){var d=s||{x:t.chartX,y:t.chartY},h=_re(d,n),l=t.orderedTooltipTicks,_=t.tooltipAxis,S=t.tooltipTicks,E=OZ(h,l,S,_);if(E>=0&&S){var A=S[E]&&S[E].value,M=KS(t,r,E,A),L=xre(n,l,E,d);return{activeTooltipIndex:E,activeLabel:A,activePayload:M,activeCoordinate:L}}return null},bre=function(t,r){var n=r.axes,s=r.graphicalItems,d=r.axisType,h=r.axisIdKey,l=r.stackGroups,_=r.dataStartIndex,S=r.dataEndIndex,E=t.layout,A=t.children,M=t.stackOffset,L=Az(E,d);return n.reduce(function(U,N){var B,Z=N.type.defaultProps!==void 0?ot(ot({},N.type.defaultProps),N.props):N.props,J=Z.type,Q=Z.dataKey,ie=Z.allowDataOverflow,H=Z.allowDuplicatedCategory,X=Z.scale,se=Z.ticks,fe=Z.includeHidden,Se=Z[h];if(U[Se])return U;var Be=g0(t.data,{graphicalItems:s.filter(function(Ne){var yt,jt=h in Ne.props?Ne.props[h]:(yt=Ne.type.defaultProps)===null||yt===void 0?void 0:yt[h];return jt===Se}),dataStartIndex:_,dataEndIndex:S}),xe=Be.length,$e,Fe,Ke;Hte(Z.domain,ie,J)&&($e=fS(Z.domain,null,ie),L&&(J==="number"||X!=="auto")&&(Ke=Ym(Be,Q,"category")));var Xe=Mj(J);if(!$e||$e.length===0){var rt,Qe=(rt=Z.domain)!==null&&rt!==void 0?rt:Xe;if(Q){if($e=Ym(Be,Q,J),J==="category"&&L){var We=wV($e);H&&We?(Fe=$e,$e=p_(0,xe)):H||($e=jO(Qe,$e,N).reduce(function(Ne,yt){return Ne.indexOf(yt)>=0?Ne:[].concat(Ip(Ne),[yt])},[]))}else if(J==="category")H?$e=$e.filter(function(Ne){return Ne!==""&&!Dr(Ne)}):$e=jO(Qe,$e,N).reduce(function(Ne,yt){return Ne.indexOf(yt)>=0||yt===""||Dr(yt)?Ne:[].concat(Ip(Ne),[yt])},[]);else if(J==="number"){var tt=LZ(Be,s.filter(function(Ne){var yt,jt,Ut=h in Ne.props?Ne.props[h]:(yt=Ne.type.defaultProps)===null||yt===void 0?void 0:yt[h],rr="hide"in Ne.props?Ne.props.hide:(jt=Ne.type.defaultProps)===null||jt===void 0?void 0:jt.hide;return Ut===Se&&(fe||!rr)}),Q,d,E);tt&&($e=tt)}L&&(J==="number"||X!=="auto")&&(Ke=Ym(Be,Q,"category"))}else L?$e=p_(0,xe):l&&l[Se]&&l[Se].hasStack&&J==="number"?$e=M==="expand"?[0,1]:Cz(l[Se].stackGroups,_,S):$e=Tz(Be,s.filter(function(Ne){var yt=h in Ne.props?Ne.props[h]:Ne.type.defaultProps[h],jt="hide"in Ne.props?Ne.props.hide:Ne.type.defaultProps.hide;return yt===Se&&(fe||!jt)}),J,E,!0);if(J==="number")$e=GS(A,$e,Se,d,se),Qe&&($e=fS(Qe,$e,ie));else if(J==="category"&&Qe){var nt=Qe,Ae=$e.every(function(Ne){return nt.indexOf(Ne)>=0});Ae&&($e=nt)}}return ot(ot({},U),{},fr({},Se,ot(ot({},Z),{},{axisType:d,domain:$e,categoricalDomain:Ke,duplicateDomain:Fe,originalDomain:(B=Z.domain)!==null&&B!==void 0?B:Xe,isCategorical:L,layout:E})))},{})},wre=function(t,r){var n=r.graphicalItems,s=r.Axis,d=r.axisType,h=r.axisIdKey,l=r.stackGroups,_=r.dataStartIndex,S=r.dataEndIndex,E=t.layout,A=t.children,M=g0(t.data,{graphicalItems:n,dataStartIndex:_,dataEndIndex:S}),L=M.length,U=Az(E,d),N=-1;return n.reduce(function(B,Z){var J=Z.type.defaultProps!==void 0?ot(ot({},Z.type.defaultProps),Z.props):Z.props,Q=J[h],ie=Mj("number");if(!B[Q]){N++;var H;return U?H=p_(0,L):l&&l[Q]&&l[Q].hasStack?(H=Cz(l[Q].stackGroups,_,S),H=GS(A,H,Q,d)):(H=fS(ie,Tz(M,n.filter(function(X){var se,fe,Se=h in X.props?X.props[h]:(se=X.type.defaultProps)===null||se===void 0?void 0:se[h],Be="hide"in X.props?X.props.hide:(fe=X.type.defaultProps)===null||fe===void 0?void 0:fe.hide;return Se===Q&&!Be}),"number",E),s.defaultProps.allowDataOverflow),H=GS(A,H,Q,d)),ot(ot({},B),{},fr({},Q,ot(ot({axisType:d},s.defaultProps),{},{hide:!0,orientation:zs(yre,"".concat(d,".").concat(N%2),null),domain:H,originalDomain:ie,isCategorical:U,layout:E})))}return B},{})},Sre=function(t,r){var n=r.axisType,s=n===void 0?"xAxis":n,d=r.AxisComp,h=r.graphicalItems,l=r.stackGroups,_=r.dataStartIndex,S=r.dataEndIndex,E=t.children,A="".concat(s,"Id"),M=js(E,d),L={};return M&&M.length?L=bre(t,{axes:M,graphicalItems:h,axisType:s,axisIdKey:A,stackGroups:l,dataStartIndex:_,dataEndIndex:S}):h&&h.length&&(L=wre(t,{Axis:d,graphicalItems:h,axisType:s,axisIdKey:A,stackGroups:l,dataStartIndex:_,dataEndIndex:S})),L},Pre=function(t){var r=Jc(t),n=Qu(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:rT(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:a_(r,n)}},A4=function(t){var r=t.children,n=t.defaultShowTooltip,s=es(r,xp),d=0,h=0;return t.data&&t.data.length!==0&&(h=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(d=s.props.startIndex),s.props.endIndex>=0&&(h=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:d,dataEndIndex:h,activeTooltipIndex:-1,isTooltipActive:!!n}},Tre=function(t){return!t||!t.length?!1:t.some(function(r){var n=rc(r&&r.type);return n&&n.indexOf("Bar")>=0})},E4=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Are=function(t,r){var n=t.props,s=t.graphicalItems,d=t.xAxisMap,h=d===void 0?{}:d,l=t.yAxisMap,_=l===void 0?{}:l,S=n.width,E=n.height,A=n.children,M=n.margin||{},L=es(A,xp),U=es(A,If),N=Object.keys(_).reduce(function(H,X){var se=_[X],fe=se.orientation;return!se.mirror&&!se.hide?ot(ot({},H),{},fr({},fe,H[fe]+se.width)):H},{left:M.left||0,right:M.right||0}),B=Object.keys(h).reduce(function(H,X){var se=h[X],fe=se.orientation;return!se.mirror&&!se.hide?ot(ot({},H),{},fr({},fe,zs(H,"".concat(fe))+se.height)):H},{top:M.top||0,bottom:M.bottom||0}),Z=ot(ot({},B),N),J=Z.bottom;L&&(Z.bottom+=L.props.height||xp.defaultProps.height),U&&r&&(Z=zZ(Z,s,n,r));var Q=S-Z.left-Z.right,ie=E-Z.top-Z.bottom;return ot(ot({brushBottom:J},Z),{},{width:Math.max(Q,0),height:Math.max(ie,0)})},Ere=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Cre=function(t){var r=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,d=s===void 0?"axis":s,h=t.validateTooltipEventTypes,l=h===void 0?["axis"]:h,_=t.axisComponents,S=t.legendContent,E=t.formatAxisMap,A=t.defaultProps,M=function(Z,J){var Q=J.graphicalItems,ie=J.stackGroups,H=J.offset,X=J.updateId,se=J.dataStartIndex,fe=J.dataEndIndex,Se=Z.barSize,Be=Z.layout,xe=Z.barGap,$e=Z.barCategoryGap,Fe=Z.maxBarSize,Ke=E4(Be),Xe=Ke.numericAxisName,rt=Ke.cateAxisName,Qe=Tre(Q),We=[];return Q.forEach(function(tt,nt){var Ae=g0(Z.data,{graphicalItems:[tt],dataStartIndex:se,dataEndIndex:fe}),Ne=tt.type.defaultProps!==void 0?ot(ot({},tt.type.defaultProps),tt.props):tt.props,yt=Ne.dataKey,jt=Ne.maxBarSize,Ut=Ne["".concat(Xe,"Id")],rr=Ne["".concat(rt,"Id")],cr={},Jt=_.reduce(function(Gn,Hn){var Ri=J["".concat(Hn.axisType,"Map")],co=Ne["".concat(Hn.axisType,"Id")];Ri&&Ri[co]||Hn.axisType==="zAxis"||Lf();var ci=Ri[co];return ot(ot({},Gn),{},fr(fr({},Hn.axisType,ci),"".concat(Hn.axisType,"Ticks"),Qu(ci)))},cr),ht=Jt[rt],Wt=Jt["".concat(rt,"Ticks")],sr=ie&&ie[Ut]&&ie[Ut].hasStack&&KZ(tt,ie[Ut].stackGroups),lt=rc(tt.type).indexOf("Bar")>=0,Ir=a_(ht,Wt),mr=[],Yr=Qe&&DZ({barSize:Se,stackGroups:ie,totalSize:Ere(Jt,rt)});if(lt){var qe,dn,xi=Dr(jt)?Fe:jt,vr=(qe=(dn=a_(ht,Wt,!0))!==null&&dn!==void 0?dn:xi)!==null&&qe!==void 0?qe:0;mr=RZ({barGap:xe,barCategoryGap:$e,bandSize:vr!==Ir?vr:Ir,sizeList:Yr[rr],maxBarSize:xi}),vr!==Ir&&(mr=mr.map(function(Gn){return ot(ot({},Gn),{},{position:ot(ot({},Gn.position),{},{offset:Gn.position.offset-vr/2})})}))}var Rr=tt&&tt.type&&tt.type.getComposedData;Rr&&We.push({props:ot(ot({},Rr(ot(ot({},Jt),{},{displayedData:Ae,props:Z,dataKey:yt,item:tt,bandSize:Ir,barPosition:mr,offset:H,stackedData:sr,layout:Be,dataStartIndex:se,dataEndIndex:fe}))),{},fr(fr(fr({key:tt.key||"item-".concat(nt)},Xe,Jt[Xe]),rt,Jt[rt]),"animationId",X)),childIndex:zV(tt,Z.children),item:tt})}),We},L=function(Z,J){var Q=Z.props,ie=Z.dataStartIndex,H=Z.dataEndIndex,X=Z.updateId;if(!XC({props:Q}))return null;var se=Q.children,fe=Q.layout,Se=Q.stackOffset,Be=Q.data,xe=Q.reverseStackOrder,$e=E4(fe),Fe=$e.numericAxisName,Ke=$e.cateAxisName,Xe=js(se,n),rt=GZ(Be,Xe,"".concat(Fe,"Id"),"".concat(Ke,"Id"),Se,xe),Qe=_.reduce(function(Ne,yt){var jt="".concat(yt.axisType,"Map");return ot(ot({},Ne),{},fr({},jt,Sre(Q,ot(ot({},yt),{},{graphicalItems:Xe,stackGroups:yt.axisType===Fe&&rt,dataStartIndex:ie,dataEndIndex:H}))))},{}),We=Are(ot(ot({},Qe),{},{props:Q,graphicalItems:Xe}),J==null?void 0:J.legendBBox);Object.keys(Qe).forEach(function(Ne){Qe[Ne]=E(Q,Qe[Ne],We,Ne.replace("Map",""),r)});var tt=Qe["".concat(Ke,"Map")],nt=Pre(tt),Ae=M(Q,ot(ot({},Qe),{},{dataStartIndex:ie,dataEndIndex:H,updateId:X,graphicalItems:Xe,stackGroups:rt,offset:We}));return ot(ot({formattedGraphicalItems:Ae,graphicalItems:Xe,offset:We,stackGroups:rt},nt),Qe)},U=(function(B){function Z(J){var Q,ie,H;return ore(this,Z),H=ure(this,Z,[J]),fr(H,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),fr(H,"accessibilityManager",new Gte),fr(H,"handleLegendBBoxUpdate",function(X){if(X){var se=H.state,fe=se.dataStartIndex,Se=se.dataEndIndex,Be=se.updateId;H.setState(ot({legendBBox:X},L({props:H.props,dataStartIndex:fe,dataEndIndex:Se,updateId:Be},ot(ot({},H.state),{},{legendBBox:X}))))}}),fr(H,"handleReceiveSyncEvent",function(X,se,fe){if(H.props.syncId===X){if(fe===H.eventEmitterSymbol&&typeof H.props.syncMethod!="function")return;H.applySyncEvent(se)}}),fr(H,"handleBrushChange",function(X){var se=X.startIndex,fe=X.endIndex;if(se!==H.state.dataStartIndex||fe!==H.state.dataEndIndex){var Se=H.state.updateId;H.setState(function(){return ot({dataStartIndex:se,dataEndIndex:fe},L({props:H.props,dataStartIndex:se,dataEndIndex:fe,updateId:Se},H.state))}),H.triggerSyncEvent({dataStartIndex:se,dataEndIndex:fe})}}),fr(H,"handleMouseEnter",function(X){var se=H.getMouseInfo(X);if(se){var fe=ot(ot({},se),{},{isTooltipActive:!0});H.setState(fe),H.triggerSyncEvent(fe);var Se=H.props.onMouseEnter;Mr(Se)&&Se(fe,X)}}),fr(H,"triggeredAfterMouseMove",function(X){var se=H.getMouseInfo(X),fe=se?ot(ot({},se),{},{isTooltipActive:!0}):{isTooltipActive:!1};H.setState(fe),H.triggerSyncEvent(fe);var Se=H.props.onMouseMove;Mr(Se)&&Se(fe,X)}),fr(H,"handleItemMouseEnter",function(X){H.setState(function(){return{isTooltipActive:!0,activeItem:X,activePayload:X.tooltipPayload,activeCoordinate:X.tooltipPosition||{x:X.cx,y:X.cy}}})}),fr(H,"handleItemMouseLeave",function(){H.setState(function(){return{isTooltipActive:!1}})}),fr(H,"handleMouseMove",function(X){X.persist(),H.throttleTriggeredAfterMouseMove(X)}),fr(H,"handleMouseLeave",function(X){H.throttleTriggeredAfterMouseMove.cancel();var se={isTooltipActive:!1};H.setState(se),H.triggerSyncEvent(se);var fe=H.props.onMouseLeave;Mr(fe)&&fe(se,X)}),fr(H,"handleOuterEvent",function(X){var se=RV(X),fe=zs(H.props,"".concat(se));if(se&&Mr(fe)){var Se,Be;/.*touch.*/i.test(se)?Be=H.getMouseInfo(X.changedTouches[0]):Be=H.getMouseInfo(X),fe((Se=Be)!==null&&Se!==void 0?Se:{},X)}}),fr(H,"handleClick",function(X){var se=H.getMouseInfo(X);if(se){var fe=ot(ot({},se),{},{isTooltipActive:!0});H.setState(fe),H.triggerSyncEvent(fe);var Se=H.props.onClick;Mr(Se)&&Se(fe,X)}}),fr(H,"handleMouseDown",function(X){var se=H.props.onMouseDown;if(Mr(se)){var fe=H.getMouseInfo(X);se(fe,X)}}),fr(H,"handleMouseUp",function(X){var se=H.props.onMouseUp;if(Mr(se)){var fe=H.getMouseInfo(X);se(fe,X)}}),fr(H,"handleTouchMove",function(X){X.changedTouches!=null&&X.changedTouches.length>0&&H.throttleTriggeredAfterMouseMove(X.changedTouches[0])}),fr(H,"handleTouchStart",function(X){X.changedTouches!=null&&X.changedTouches.length>0&&H.handleMouseDown(X.changedTouches[0])}),fr(H,"handleTouchEnd",function(X){X.changedTouches!=null&&X.changedTouches.length>0&&H.handleMouseUp(X.changedTouches[0])}),fr(H,"handleDoubleClick",function(X){var se=H.props.onDoubleClick;if(Mr(se)){var fe=H.getMouseInfo(X);se(fe,X)}}),fr(H,"handleContextMenu",function(X){var se=H.props.onContextMenu;if(Mr(se)){var fe=H.getMouseInfo(X);se(fe,X)}}),fr(H,"triggerSyncEvent",function(X){H.props.syncId!==void 0&&a2.emit(o2,H.props.syncId,X,H.eventEmitterSymbol)}),fr(H,"applySyncEvent",function(X){var se=H.props,fe=se.layout,Se=se.syncMethod,Be=H.state.updateId,xe=X.dataStartIndex,$e=X.dataEndIndex;if(X.dataStartIndex!==void 0||X.dataEndIndex!==void 0)H.setState(ot({dataStartIndex:xe,dataEndIndex:$e},L({props:H.props,dataStartIndex:xe,dataEndIndex:$e,updateId:Be},H.state)));else if(X.activeTooltipIndex!==void 0){var Fe=X.chartX,Ke=X.chartY,Xe=X.activeTooltipIndex,rt=H.state,Qe=rt.offset,We=rt.tooltipTicks;if(!Qe)return;if(typeof Se=="function")Xe=Se(We,X);else if(Se==="value"){Xe=-1;for(var tt=0;tt<We.length;tt++)if(We[tt].value===X.activeLabel){Xe=tt;break}}var nt=ot(ot({},Qe),{},{x:Qe.left,y:Qe.top}),Ae=Math.min(Fe,nt.x+nt.width),Ne=Math.min(Ke,nt.y+nt.height),yt=We[Xe]&&We[Xe].value,jt=KS(H.state,H.props.data,Xe),Ut=We[Xe]?{x:fe==="horizontal"?We[Xe].coordinate:Ae,y:fe==="horizontal"?Ne:We[Xe].coordinate}:Cj;H.setState(ot(ot({},X),{},{activeLabel:yt,activeCoordinate:Ut,activePayload:jt,activeTooltipIndex:Xe}))}else H.setState(X)}),fr(H,"renderCursor",function(X){var se,fe=H.state,Se=fe.isTooltipActive,Be=fe.activeCoordinate,xe=fe.activePayload,$e=fe.offset,Fe=fe.activeTooltipIndex,Ke=fe.tooltipAxisBandSize,Xe=H.getTooltipEventType(),rt=(se=X.props.active)!==null&&se!==void 0?se:Se,Qe=H.props.layout,We=X.key||"_recharts-cursor";return ze.createElement(Qte,{key:We,activeCoordinate:Be,activePayload:xe,activeTooltipIndex:Fe,chartName:r,element:X,isActive:rt,layout:Qe,offset:$e,tooltipAxisBandSize:Ke,tooltipEventType:Xe})}),fr(H,"renderPolarAxis",function(X,se,fe){var Se=zs(X,"type.axisType"),Be=zs(H.state,"".concat(Se,"Map")),xe=X.type.defaultProps,$e=xe!==void 0?ot(ot({},xe),X.props):X.props,Fe=Be&&Be[$e["".concat(Se,"Id")]];return Pe.cloneElement(X,ot(ot({},Fe),{},{className:Wr(Se,Fe.className),key:X.key||"".concat(se,"-").concat(fe),ticks:Qu(Fe,!0)}))}),fr(H,"renderPolarGrid",function(X){var se=X.props,fe=se.radialLines,Se=se.polarAngles,Be=se.polarRadius,xe=H.state,$e=xe.radiusAxisMap,Fe=xe.angleAxisMap,Ke=Jc($e),Xe=Jc(Fe),rt=Xe.cx,Qe=Xe.cy,We=Xe.innerRadius,tt=Xe.outerRadius;return Pe.cloneElement(X,{polarAngles:Array.isArray(Se)?Se:Qu(Xe,!0).map(function(nt){return nt.coordinate}),polarRadius:Array.isArray(Be)?Be:Qu(Ke,!0).map(function(nt){return nt.coordinate}),cx:rt,cy:Qe,innerRadius:We,outerRadius:tt,key:X.key||"polar-grid",radialLines:fe})}),fr(H,"renderLegend",function(){var X=H.state.formattedGraphicalItems,se=H.props,fe=se.children,Se=se.width,Be=se.height,xe=H.props.margin||{},$e=Se-(xe.left||0)-(xe.right||0),Fe=Sz({children:fe,formattedGraphicalItems:X,legendWidth:$e,legendContent:S});if(!Fe)return null;var Ke=Fe.item,Xe=S4(Fe,ere);return Pe.cloneElement(Ke,ot(ot({},Xe),{},{chartWidth:Se,chartHeight:Be,margin:xe,onBBoxUpdate:H.handleLegendBBoxUpdate}))}),fr(H,"renderTooltip",function(){var X,se=H.props,fe=se.children,Se=se.accessibilityLayer,Be=es(fe,ou);if(!Be)return null;var xe=H.state,$e=xe.isTooltipActive,Fe=xe.activeCoordinate,Ke=xe.activePayload,Xe=xe.activeLabel,rt=xe.offset,Qe=(X=Be.props.active)!==null&&X!==void 0?X:$e;return Pe.cloneElement(Be,{viewBox:ot(ot({},rt),{},{x:rt.left,y:rt.top}),active:Qe,label:Xe,payload:Qe?Ke:[],coordinate:Fe,accessibilityLayer:Se})}),fr(H,"renderBrush",function(X){var se=H.props,fe=se.margin,Se=se.data,Be=H.state,xe=Be.offset,$e=Be.dataStartIndex,Fe=Be.dataEndIndex,Ke=Be.updateId;return Pe.cloneElement(X,{key:X.key||"_recharts-brush",onChange:lv(H.handleBrushChange,X.props.onChange),data:Se,x:Ot(X.props.x)?X.props.x:xe.left,y:Ot(X.props.y)?X.props.y:xe.top+xe.height+xe.brushBottom-(fe.bottom||0),width:Ot(X.props.width)?X.props.width:xe.width,startIndex:$e,endIndex:Fe,updateId:"brush-".concat(Ke)})}),fr(H,"renderReferenceElement",function(X,se,fe){if(!X)return null;var Se=H,Be=Se.clipPathId,xe=H.state,$e=xe.xAxisMap,Fe=xe.yAxisMap,Ke=xe.offset,Xe=X.type.defaultProps||{},rt=X.props,Qe=rt.xAxisId,We=Qe===void 0?Xe.xAxisId:Qe,tt=rt.yAxisId,nt=tt===void 0?Xe.yAxisId:tt;return Pe.cloneElement(X,{key:X.key||"".concat(se,"-").concat(fe),xAxis:$e[We],yAxis:Fe[nt],viewBox:{x:Ke.left,y:Ke.top,width:Ke.width,height:Ke.height},clipPathId:Be})}),fr(H,"renderActivePoints",function(X){var se=X.item,fe=X.activePoint,Se=X.basePoint,Be=X.childIndex,xe=X.isRange,$e=[],Fe=se.props.key,Ke=se.item.type.defaultProps!==void 0?ot(ot({},se.item.type.defaultProps),se.item.props):se.item.props,Xe=Ke.activeDot,rt=Ke.dataKey,Qe=ot(ot({index:Be,dataKey:rt,cx:fe.x,cy:fe.y,r:4,fill:CT(se.item),strokeWidth:2,stroke:"#fff",payload:fe.payload,value:fe.value},$r(Xe,!1)),Dv(Xe));return $e.push(Z.renderActiveDot(Xe,Qe,"".concat(Fe,"-activePoint-").concat(Be))),Se?$e.push(Z.renderActiveDot(Xe,ot(ot({},Qe),{},{cx:Se.x,cy:Se.y}),"".concat(Fe,"-basePoint-").concat(Be))):xe&&$e.push(null),$e}),fr(H,"renderGraphicChild",function(X,se,fe){var Se=H.filterFormatItem(X,se,fe);if(!Se)return null;var Be=H.getTooltipEventType(),xe=H.state,$e=xe.isTooltipActive,Fe=xe.tooltipAxis,Ke=xe.activeTooltipIndex,Xe=xe.activeLabel,rt=H.props.children,Qe=es(rt,ou),We=Se.props,tt=We.points,nt=We.isRange,Ae=We.baseLine,Ne=Se.item.type.defaultProps!==void 0?ot(ot({},Se.item.type.defaultProps),Se.item.props):Se.item.props,yt=Ne.activeDot,jt=Ne.hide,Ut=Ne.activeBar,rr=Ne.activeShape,cr=!!(!jt&&$e&&Qe&&(yt||Ut||rr)),Jt={};Be!=="axis"&&Qe&&Qe.props.trigger==="click"?Jt={onClick:lv(H.handleItemMouseEnter,X.props.onClick)}:Be!=="axis"&&(Jt={onMouseLeave:lv(H.handleItemMouseLeave,X.props.onMouseLeave),onMouseEnter:lv(H.handleItemMouseEnter,X.props.onMouseEnter)});var ht=Pe.cloneElement(X,ot(ot({},Se.props),Jt));function Wt(Hn){return typeof Fe.dataKey=="function"?Fe.dataKey(Hn.payload):null}if(cr)if(Ke>=0){var sr,lt;if(Fe.dataKey&&!Fe.allowDuplicatedCategory){var Ir=typeof Fe.dataKey=="function"?Wt:"payload.".concat(Fe.dataKey.toString());sr=Ov(tt,Ir,Xe),lt=nt&&Ae&&Ov(Ae,Ir,Xe)}else sr=tt==null?void 0:tt[Ke],lt=nt&&Ae&&Ae[Ke];if(rr||Ut){var mr=X.props.activeIndex!==void 0?X.props.activeIndex:Ke;return[Pe.cloneElement(X,ot(ot(ot({},Se.props),Jt),{},{activeIndex:mr})),null,null]}if(!Dr(sr))return[ht].concat(Ip(H.renderActivePoints({item:Se,activePoint:sr,basePoint:lt,childIndex:Ke,isRange:nt})))}else{var Yr,qe=(Yr=H.getItemByXY(H.state.activeCoordinate))!==null&&Yr!==void 0?Yr:{graphicalItem:ht},dn=qe.graphicalItem,xi=dn.item,vr=xi===void 0?X:xi,Rr=dn.childIndex,Gn=ot(ot(ot({},Se.props),Jt),{},{activeIndex:Rr});return[Pe.cloneElement(vr,Gn),null,null]}return nt?[ht,null,null]:[ht,null]}),fr(H,"renderCustomized",function(X,se,fe){return Pe.cloneElement(X,ot(ot({key:"recharts-customized-".concat(fe)},H.props),H.state))}),fr(H,"renderMap",{CartesianGrid:{handler:dv,once:!0},ReferenceArea:{handler:H.renderReferenceElement},ReferenceLine:{handler:dv},ReferenceDot:{handler:H.renderReferenceElement},XAxis:{handler:dv},YAxis:{handler:dv},Brush:{handler:H.renderBrush,once:!0},Bar:{handler:H.renderGraphicChild},Line:{handler:H.renderGraphicChild},Area:{handler:H.renderGraphicChild},Radar:{handler:H.renderGraphicChild},RadialBar:{handler:H.renderGraphicChild},Scatter:{handler:H.renderGraphicChild},Pie:{handler:H.renderGraphicChild},Funnel:{handler:H.renderGraphicChild},Tooltip:{handler:H.renderCursor,once:!0},PolarGrid:{handler:H.renderPolarGrid,once:!0},PolarAngleAxis:{handler:H.renderPolarAxis},PolarRadiusAxis:{handler:H.renderPolarAxis},Customized:{handler:H.renderCustomized}}),H.clipPathId="".concat((Q=J.id)!==null&&Q!==void 0?Q:Xg("recharts"),"-clip"),H.throttleTriggeredAfterMouseMove=w5(H.triggeredAfterMouseMove,(ie=J.throttleDelay)!==null&&ie!==void 0?ie:1e3/60),H.state={},H}return fre(Z,B),lre(Z,[{key:"componentDidMount",value:function(){var Q,ie;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(Q=this.props.margin.left)!==null&&Q!==void 0?Q:0,top:(ie=this.props.margin.top)!==null&&ie!==void 0?ie:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var Q=this.props,ie=Q.children,H=Q.data,X=Q.height,se=Q.layout,fe=es(ie,ou);if(fe){var Se=fe.props.defaultIndex;if(!(typeof Se!="number"||Se<0||Se>this.state.tooltipTicks.length-1)){var Be=this.state.tooltipTicks[Se]&&this.state.tooltipTicks[Se].value,xe=KS(this.state,H,Se,Be),$e=this.state.tooltipTicks[Se].coordinate,Fe=(this.state.offset.top+X)/2,Ke=se==="horizontal",Xe=Ke?{x:$e,y:Fe}:{y:$e,x:Fe},rt=this.state.formattedGraphicalItems.find(function(We){var tt=We.item;return tt.type.name==="Scatter"});rt&&(Xe=ot(ot({},Xe),rt.props.points[Se].tooltipPosition),xe=rt.props.points[Se].tooltipPayload);var Qe={activeTooltipIndex:Se,isTooltipActive:!0,activeLabel:Be,activePayload:xe,activeCoordinate:Xe};this.setState(Qe),this.renderCursor(fe),this.accessibilityManager.setIndex(Se)}}}},{key:"getSnapshotBeforeUpdate",value:function(Q,ie){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==ie.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==Q.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==Q.margin){var H,X;this.accessibilityManager.setDetails({offset:{left:(H=this.props.margin.left)!==null&&H!==void 0?H:0,top:(X=this.props.margin.top)!==null&&X!==void 0?X:0}})}return null}},{key:"componentDidUpdate",value:function(Q){R2([es(Q.children,ou)],[es(this.props.children,ou)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var Q=es(this.props.children,ou);if(Q&&typeof Q.props.shared=="boolean"){var ie=Q.props.shared?"axis":"item";return l.indexOf(ie)>=0?ie:d}return d}},{key:"getMouseInfo",value:function(Q){if(!this.container)return null;var ie=this.container,H=ie.getBoundingClientRect(),X=wq(H),se={chartX:Math.round(Q.pageX-X.left),chartY:Math.round(Q.pageY-X.top)},fe=H.width/ie.offsetWidth||1,Se=this.inRange(se.chartX,se.chartY,fe);if(!Se)return null;var Be=this.state,xe=Be.xAxisMap,$e=Be.yAxisMap,Fe=this.getTooltipEventType(),Ke=T4(this.state,this.props.data,this.props.layout,Se);if(Fe!=="axis"&&xe&&$e){var Xe=Jc(xe).scale,rt=Jc($e).scale,Qe=Xe&&Xe.invert?Xe.invert(se.chartX):null,We=rt&&rt.invert?rt.invert(se.chartY):null;return ot(ot({},se),{},{xValue:Qe,yValue:We},Ke)}return Ke?ot(ot({},se),Ke):null}},{key:"inRange",value:function(Q,ie){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,X=this.props.layout,se=Q/H,fe=ie/H;if(X==="horizontal"||X==="vertical"){var Se=this.state.offset,Be=se>=Se.left&&se<=Se.left+Se.width&&fe>=Se.top&&fe<=Se.top+Se.height;return Be?{x:se,y:fe}:null}var xe=this.state,$e=xe.angleAxisMap,Fe=xe.radiusAxisMap;if($e&&Fe){var Ke=Jc($e);return NO({x:se,y:fe},Ke)}return null}},{key:"parseEventsOfWrapper",value:function(){var Q=this.props.children,ie=this.getTooltipEventType(),H=es(Q,ou),X={};H&&ie==="axis"&&(H.props.trigger==="click"?X={onClick:this.handleClick}:X={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var se=Dv(this.props,this.handleOuterEvent);return ot(ot({},se),X)}},{key:"addListener",value:function(){a2.on(o2,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){a2.removeListener(o2,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(Q,ie,H){for(var X=this.state.formattedGraphicalItems,se=0,fe=X.length;se<fe;se++){var Se=X[se];if(Se.item===Q||Se.props.key===Q.key||ie===rc(Se.item.type)&&H===Se.childIndex)return Se}return null}},{key:"renderClipPath",value:function(){var Q=this.clipPathId,ie=this.state.offset,H=ie.left,X=ie.top,se=ie.height,fe=ie.width;return ze.createElement("defs",null,ze.createElement("clipPath",{id:Q},ze.createElement("rect",{x:H,y:X,height:se,width:fe})))}},{key:"getXScales",value:function(){var Q=this.state.xAxisMap;return Q?Object.entries(Q).reduce(function(ie,H){var X=w4(H,2),se=X[0],fe=X[1];return ot(ot({},ie),{},fr({},se,fe.scale))},{}):null}},{key:"getYScales",value:function(){var Q=this.state.yAxisMap;return Q?Object.entries(Q).reduce(function(ie,H){var X=w4(H,2),se=X[0],fe=X[1];return ot(ot({},ie),{},fr({},se,fe.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(Q){var ie;return(ie=this.state.xAxisMap)===null||ie===void 0||(ie=ie[Q])===null||ie===void 0?void 0:ie.scale}},{key:"getYScaleByAxisId",value:function(Q){var ie;return(ie=this.state.yAxisMap)===null||ie===void 0||(ie=ie[Q])===null||ie===void 0?void 0:ie.scale}},{key:"getItemByXY",value:function(Q){var ie=this.state,H=ie.formattedGraphicalItems,X=ie.activeItem;if(H&&H.length)for(var se=0,fe=H.length;se<fe;se++){var Se=H[se],Be=Se.props,xe=Se.item,$e=xe.type.defaultProps!==void 0?ot(ot({},xe.type.defaultProps),xe.props):xe.props,Fe=rc(xe.type);if(Fe==="Bar"){var Ke=(Be.data||[]).find(function(We){return FY(Q,We)});if(Ke)return{graphicalItem:Se,payload:Ke}}else if(Fe==="RadialBar"){var Xe=(Be.data||[]).find(function(We){return NO(Q,We)});if(Xe)return{graphicalItem:Se,payload:Xe}}else if(l0(Se,X)||u0(Se,X)||zg(Se,X)){var rt=IJ({graphicalItem:Se,activeTooltipItem:X,itemData:$e.data}),Qe=$e.activeIndex===void 0?rt:$e.activeIndex;return{graphicalItem:ot(ot({},Se),{},{childIndex:Qe}),payload:zg(Se,X)?$e.data[rt]:Se.props.data[rt]}}}return null}},{key:"render",value:function(){var Q=this;if(!XC(this))return null;var ie=this.props,H=ie.children,X=ie.className,se=ie.width,fe=ie.height,Se=ie.style,Be=ie.compact,xe=ie.title,$e=ie.desc,Fe=S4(ie,tre),Ke=$r(Fe,!1);if(Be)return ze.createElement(n4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ze.createElement(j2,tp({},Ke,{width:se,height:fe,title:xe,desc:$e}),this.renderClipPath(),JC(H,this.renderMap)));if(this.props.accessibilityLayer){var Xe,rt;Ke.tabIndex=(Xe=this.props.tabIndex)!==null&&Xe!==void 0?Xe:0,Ke.role=(rt=this.props.role)!==null&&rt!==void 0?rt:"application",Ke.onKeyDown=function(We){Q.accessibilityManager.keyboardEvent(We)},Ke.onFocus=function(){Q.accessibilityManager.focus()}}var Qe=this.parseEventsOfWrapper();return ze.createElement(n4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ze.createElement("div",tp({className:Wr("recharts-wrapper",X),style:ot({position:"relative",cursor:"default",width:se,height:fe},Se)},Qe,{ref:function(tt){Q.container=tt}}),ze.createElement(j2,tp({},Ke,{width:se,height:fe,title:xe,desc:$e,style:vre}),this.renderClipPath(),JC(H,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(Pe.Component);fr(U,"displayName",r),fr(U,"defaultProps",ot({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},A)),fr(U,"getDerivedStateFromProps",function(B,Z){var J=B.dataKey,Q=B.data,ie=B.children,H=B.width,X=B.height,se=B.layout,fe=B.stackOffset,Se=B.margin,Be=Z.dataStartIndex,xe=Z.dataEndIndex;if(Z.updateId===void 0){var $e=A4(B);return ot(ot(ot({},$e),{},{updateId:0},L(ot(ot({props:B},$e),{},{updateId:0}),Z)),{},{prevDataKey:J,prevData:Q,prevWidth:H,prevHeight:X,prevLayout:se,prevStackOffset:fe,prevMargin:Se,prevChildren:ie})}if(J!==Z.prevDataKey||Q!==Z.prevData||H!==Z.prevWidth||X!==Z.prevHeight||se!==Z.prevLayout||fe!==Z.prevStackOffset||!rp(Se,Z.prevMargin)){var Fe=A4(B),Ke={chartX:Z.chartX,chartY:Z.chartY,isTooltipActive:Z.isTooltipActive},Xe=ot(ot({},T4(Z,Q,se)),{},{updateId:Z.updateId+1}),rt=ot(ot(ot({},Fe),Ke),Xe);return ot(ot(ot({},rt),L(ot({props:B},rt),Z)),{},{prevDataKey:J,prevData:Q,prevWidth:H,prevHeight:X,prevLayout:se,prevStackOffset:fe,prevMargin:Se,prevChildren:ie})}if(!R2(ie,Z.prevChildren)){var Qe,We,tt,nt,Ae=es(ie,xp),Ne=Ae&&(Qe=(We=Ae.props)===null||We===void 0?void 0:We.startIndex)!==null&&Qe!==void 0?Qe:Be,yt=Ae&&(tt=(nt=Ae.props)===null||nt===void 0?void 0:nt.endIndex)!==null&&tt!==void 0?tt:xe,jt=Ne!==Be||yt!==xe,Ut=!Dr(Q),rr=Ut&&!jt?Z.updateId:Z.updateId+1;return ot(ot({updateId:rr},L(ot(ot({props:B},Z),{},{updateId:rr,dataStartIndex:Ne,dataEndIndex:yt}),Z)),{},{prevChildren:ie,dataStartIndex:Ne,dataEndIndex:yt})}return null}),fr(U,"renderActiveDot",function(B,Z,J){var Q;return Pe.isValidElement(B)?Q=Pe.cloneElement(B,Z):Mr(B)?Q=B(Z):Q=ze.createElement(IT,Z),ze.createElement(ui,{className:"recharts-active-dot",key:J},Q)});var N=Pe.forwardRef(function(Z,J){return ze.createElement(U,tp({},Z,{ref:J}))});return N.displayName=U.displayName,N},Mre=Cre({chartName:"LineChart",GraphicalChild:Df,axisComponents:[{axisType:"xAxis",AxisComp:m0},{axisType:"yAxis",AxisComp:Fg}],formatAxisMap:AQ});function yl(e,t){return Array.from(e.getElementsByTagName(t))}function C_(e){return e[0]==="#"?e:`#${e}`}function Ire(e,t,r){return Array.from(e.getElementsByTagNameNS(r,t))}function as(e){return e==null||e.normalize(),(e==null?void 0:e.textContent)||""}function $a(e,t,r){const n=e.getElementsByTagName(t);return n.length?n[0]:null}function vl(e,t,r){const n={};if(!e)return n;const s=e.getElementsByTagName(t),d=s.length?s[0]:null;return d&&r?r(d,n):n}function kp(e,t,r){const n=as($a(e,t));return n&&r?r(n)||{}:{}}function Po(e,t,r){const n=Number.parseFloat(as($a(e,t)));if(!Number.isNaN(n))return r&&r(n),n}function y0(e,t){const r={};for(const n of t)kp(e,n,s=>{r[n]=s});return r}function Ij(e){return(e==null?void 0:e.nodeType)===1}function kj(e,t){const r={},n=t==="stroke"||t==="fill"?t:`${t}-color`;return e[0]==="#"&&(e=e.substring(1)),e.length===6||e.length===3?r[n]=`#${e}`:e.length===8&&(r[`${t}-opacity`]=Number.parseInt(e.substring(0,2),16)/255,r[n]=`#${e.substring(6,8)}${e.substring(4,6)}${e.substring(2,4)}`),r}function M_(e,t,r){const n={};return Po(e,t,s=>{n[r]=s}),n}function FT(e,t){return vl(e,"color",r=>kj(as(r),t))}function $T(e){return vl(e,"Icon",(t,r)=>(kp(t,"href",n=>{r.icon=n}),r))}function kre(e){return vl(e,"IconStyle",t=>Object.assign(FT(t,"icon"),M_(t,"scale","icon-scale"),M_(t,"heading","icon-heading"),vl(t,"hotSpot",r=>{const n=Number.parseFloat(r.getAttribute("x")||""),s=Number.parseFloat(r.getAttribute("y")||""),d=r.getAttribute("xunits")||"",h=r.getAttribute("yunits")||"";return!Number.isNaN(n)&&!Number.isNaN(s)?{"icon-offset":[n,s],"icon-offset-units":[d,h]}:{}}),$T(t)))}function Ore(e){return vl(e,"LabelStyle",t=>Object.assign(FT(t,"label"),M_(t,"scale","label-scale")))}function Dre(e){return vl(e,"LineStyle",t=>Object.assign(FT(t,"stroke"),M_(t,"width","stroke-width")))}function Rre(e){return vl(e,"PolyStyle",(t,r)=>Object.assign(r,vl(t,"color",n=>kj(as(n),"fill")),kp(t,"fill",n=>{if(n==="0")return{"fill-opacity":0}}),kp(t,"outline",n=>{if(n==="0")return{"stroke-opacity":0}})))}function v0(e){return Object.assign({},Rre(e),Dre(e),Ore(e),kre(e))}const zre=/\s*/g,jre=/^\s*|\s*$/g,Lre=/\s+/;function Oj(e){return e.replace(zre,"").split(",").map(Number.parseFloat).filter(t=>!Number.isNaN(t)).slice(0,3)}function XS(e){return e.replace(jre,"").split(Lre).map(Oj).filter(t=>t.length>=2)}function Bre(e){let t=yl(e,"coord");t.length===0&&(t=Ire(e,"coord","*"));const r=t.map(n=>as(n).split(" ").map(Number.parseFloat));return r.length===0?null:{geometry:r.length>2?{type:"LineString",coordinates:r}:{type:"Point",coordinates:r[0]},times:yl(e,"when").map(n=>as(n))}}function Dj(e){if(e.length===0)return e;const t=e[0],r=e[e.length-1];let n=!0;for(let s=0;s<Math.max(t.length,r.length);s++)if(t[s]!==r[s]){n=!1;break}return n?e:e.concat([e[0]])}function xv(e){return as($a(e,"coordinates"))}function Rj(e){let t=[],r=[];for(let n=0;n<e.childNodes.length;n++){const s=e.childNodes.item(n);if(Ij(s))switch(s.tagName){case"MultiGeometry":case"MultiTrack":case"gx:MultiTrack":{const d=Rj(s);t=t.concat(d.geometries),r=r.concat(d.coordTimes);break}case"Point":{const d=Oj(xv(s));d.length>=2&&t.push({type:"Point",coordinates:d});break}case"LinearRing":case"LineString":{const d=XS(xv(s));d.length>=2&&t.push({type:"LineString",coordinates:d});break}case"Polygon":{const d=[];for(const h of yl(s,"LinearRing")){const l=Dj(XS(xv(h)));l.length>=4&&d.push(l)}d.length&&t.push({type:"Polygon",coordinates:d});break}case"Track":case"gx:Track":{const d=Bre(s);if(!d)break;const{times:h,geometry:l}=d;t.push(l),h.length&&r.push(h);break}}}return{geometries:t,coordTimes:r}}const Hd=e=>Number(e),YS={string:e=>e,int:Hd,uint:Hd,short:Hd,ushort:Hd,float:Hd,double:Hd,bool:e=>!!e};function VT(e,t){return vl(e,"ExtendedData",(r,n)=>{for(const s of yl(r,"Data"))n[s.getAttribute("name")||""]=as($a(s,"value"));for(const s of yl(r,"SimpleData")){const d=s.getAttribute("name")||"",h=t[d]||YS.string;n[d]=h(as(s))}return n})}function UT(e){const t=$a(e,"description");for(const r of Array.from((t==null?void 0:t.childNodes)||[]))if(r.nodeType===4)return{description:{"@type":"html",value:as(r)}};return{}}function qT(e){return vl(e,"TimeSpan",t=>({timespan:{begin:as($a(t,"begin")),end:as($a(t,"end"))}}))}function WT(e){return vl(e,"TimeStamp",t=>({timestamp:as($a(t,"when"))}))}function GT(e,t){return kp(e,"styleUrl",r=>(r=C_(r),t[r]?Object.assign({styleUrl:r},t[r]):{styleUrl:r}))}var Ds;(function(e){e.ABSOLUTE="absolute",e.RELATIVE_TO_GROUND="relativeToGround",e.CLAMP_TO_GROUND="clampToGround",e.CLAMP_TO_SEAFLOOR="clampToSeaFloor",e.RELATIVE_TO_SEAFLOOR="relativeToSeaFloor"})(Ds||(Ds={}));function Nre(e){switch(e==null?void 0:e.textContent){case Ds.ABSOLUTE:return Ds.ABSOLUTE;case Ds.CLAMP_TO_GROUND:return Ds.CLAMP_TO_GROUND;case Ds.CLAMP_TO_SEAFLOOR:return Ds.CLAMP_TO_SEAFLOOR;case Ds.RELATIVE_TO_GROUND:return Ds.RELATIVE_TO_GROUND;case Ds.RELATIVE_TO_SEAFLOOR:return Ds.RELATIVE_TO_SEAFLOOR}return null}function Fre(e){return $a(e,"gx:LatLonQuad")?{geometry:{type:"Polygon",coordinates:[Dj(XS(xv(e)))]}}:Ure(e)}const $re=Math.PI/180;function Vre(e,t,r){const n=[(e[0]+e[2])/2,(e[1]+e[3])/2];return[t[0].map(s=>{const d=s[1]-n[1],h=s[0]-n[0],l=Math.sqrt(d**2+h**2),_=Math.atan2(d,h)+r*$re;return[n[0]+Math.cos(_)*l,n[1]+Math.sin(_)*l]})]}function Ure(e){const t=$a(e,"LatLonBox");if(t){const r=Po(t,"north"),n=Po(t,"west"),s=Po(t,"east"),d=Po(t,"south"),h=Po(t,"rotation");if(typeof r=="number"&&typeof d=="number"&&typeof n=="number"&&typeof s=="number"){const l=[n,d,s,r];let _=[[[n,r],[s,r],[s,d],[n,d],[n,r]]];return typeof h=="number"&&(_=Vre(l,_,h)),{bbox:l,geometry:{type:"Polygon",coordinates:_}}}}return null}function qre(e,t,r,n){var _;const s=Fre(e),d=(s==null?void 0:s.geometry)||null;if(!d&&n.skipNullGeometry)return null;const h={type:"Feature",geometry:d,properties:Object.assign({"@geometry-type":"groundoverlay"},y0(e,["name","address","visibility","open","phoneNumber","description"]),UT(e),GT(e,t),v0(e),$T(e),VT(e,r),qT(e),WT(e))};s!=null&&s.bbox&&(h.bbox=s.bbox),((_=h.properties)==null?void 0:_.visibility)!==void 0&&(h.properties.visibility=h.properties.visibility!=="0");const l=e.getAttribute("id");return l!==null&&l!==""&&(h.id=l),h}function Wre(e){const t=$a(e,"Region");return t?{coordinateBox:Hre(t),lod:Gre(e)}:null}function Gre(e){const t=$a(e,"Lod");return t?[Po(t,"minLodPixels")??-1,Po(t,"maxLodPixels")??-1,Po(t,"minFadeExtent")??null,Po(t,"maxFadeExtent")??null]:null}function Hre(e){const t=$a(e,"LatLonAltBox");if(t){const r=Po(t,"north"),n=Po(t,"west"),s=Po(t,"east"),d=Po(t,"south");if(Nre($a(t,"altitudeMode")||$a(t,"gx:altitudeMode"))&&console.debug("Encountered an unsupported feature of KML for togeojson: please contact developers for support of altitude mode."),typeof r=="number"&&typeof d=="number"&&typeof n=="number"&&typeof s=="number")return{bbox:[n,d,s,r],geometry:{type:"Polygon",coordinates:[[[n,r],[s,r],[s,d],[n,d],[n,r]]]}}}return null}function Zre(e){const t=$a(e,"Link");return t?y0(t,["href","refreshMode","refreshInterval","viewRefreshMode","viewRefreshTime","viewBoundScale","viewFormat","httpQuery"]):{}}function Kre(e,t,r,n){var _,S,E;const s=Wre(e),d=((_=s==null?void 0:s.coordinateBox)==null?void 0:_.geometry)||null;if(!d&&n.skipNullGeometry)return null;const h={type:"Feature",geometry:d,properties:Object.assign({"@geometry-type":"networklink"},y0(e,["name","address","visibility","open","phoneNumber","styleUrl","refreshVisibility","flyToView","description"]),UT(e),GT(e,t),v0(e),$T(e),VT(e,r),qT(e),WT(e),Zre(e),s!=null&&s.lod?{lod:s.lod}:{})};(S=s==null?void 0:s.coordinateBox)!=null&&S.bbox&&(h.bbox=s.coordinateBox.bbox),((E=h.properties)==null?void 0:E.visibility)!==void 0&&(h.properties.visibility=h.properties.visibility!=="0");const l=e.getAttribute("id");return l!==null&&l!==""&&(h.id=l),h}function Xre(e){return e.length===0?null:e.length===1?e[0]:{type:"GeometryCollection",geometries:e}}function Yre(e,t,r,n){var S;const{coordTimes:s,geometries:d}=Rj(e),h=Xre(d);if(!h&&n.skipNullGeometry)return null;const l={type:"Feature",geometry:h,properties:Object.assign(y0(e,["name","address","visibility","open","phoneNumber","description"]),UT(e),GT(e,t),v0(e),VT(e,r),qT(e),WT(e),s.length?{coordinateProperties:{times:s.length===1?s[0]:s}}:{})};((S=l.properties)==null?void 0:S.visibility)!==void 0&&(l.properties.visibility=l.properties.visibility!=="0");const _=e.getAttribute("id");return _!==null&&_!==""&&(l.id=_),l}function Jre(e){let t=e.getAttribute("id");const r=e.parentNode;return!t&&Ij(r)&&r.localName==="CascadingStyle"&&(t=r.getAttribute("kml:id")||r.getAttribute("id")),C_(t||"")}function Qre(e){const t={};for(const r of yl(e,"Style"))t[Jre(r)]=v0(r);for(const r of yl(e,"StyleMap")){const n=C_(r.getAttribute("id")||"");kp(r,"styleUrl",s=>{s=C_(s),t[s]&&(t[n]=t[s])})}return t}function ene(e){const t={};for(const r of yl(e,"SimpleField"))t[r.getAttribute("name")||""]=YS[r.getAttribute("type")||""]||YS.string;return t}function*tne(e,t={skipNullGeometry:!1}){const r=e,n=Qre(r),s=ene(r);for(const d of yl(r,"Placemark")){const h=Yre(d,n,s,t);h&&(yield h)}for(const d of yl(r,"GroundOverlay")){const h=qre(d,n,s,t);h&&(yield h)}for(const d of yl(r,"NetworkLink")){const h=Kre(d,n,s,t);h&&(yield h)}}function rne(e,t={skipNullGeometry:!1}){return{type:"FeatureCollection",features:Array.from(tne(e,t))}}const l2={Bengaluru:{center:[77.5946,12.9716],zoom:10,hazard:"Urban Floods",bounds:[[77.4,12.8],[78,13.2]]},Guwahati:{center:[91.7362,26.1445],zoom:11,hazard:"Compound Pluvial & Fluvial Floods",bounds:[[91.5,26],[91.9,26.3]]},Anantapur:{center:[77.6,14.6819],zoom:9,hazard:"Compound Flood & Drought",bounds:[[77.3,14.5],[78,15]]},Dordrecht:{center:[4.6667,51.8167],zoom:11,hazard:"Urban Floods & Evacuation Planning",bounds:[[4.5,51.7],[4.8,51.9]]},"Tilburg & Breda":{center:[4.8916,51.583],zoom:9,hazard:"Droughts & Urban Development",bounds:[[4.7,51.5],[5.2,51.7]]}},nne={Bengaluru:{alerts:[{id:1,level:"Moderate",text:"Heavy rainfall predicted, risk of waterlogging in low-lying areas."}],forecast:[{day:"Mon",rainfall:25,temp:28,humidity:85},{day:"Tue",rainfall:40,temp:27,humidity:90},{day:"Wed",rainfall:15,temp:29,humidity:80},{day:"Thu",rainfall:5,temp:30,humidity:75},{day:"Fri",rainfall:10,temp:31,humidity:70},{day:"Sat",rainfall:30,temp:29,humidity:88},{day:"Sun",rainfall:20,temp:28,humidity:82}],citizenReports:[{id:1,user:"A. Kumar",text:"Water level rising near Bellandur lake.",time:"1h ago"}]},Guwahati:{alerts:[{id:1,level:"High",text:"Brahmaputra river level approaching warning mark. Stay vigilant."}],forecast:[{day:"Mon",rainfall:50,temp:30,humidity:92},{day:"Tue",rainfall:65,temp:29,humidity:95},{day:"Wed",rainfall:30,temp:31,humidity:88},{day:"Thu",rainfall:20,temp:32,humidity:85},{day:"Fri",rainfall:25,temp:32,humidity:87},{day:"Sat",rainfall:45,temp:30,humidity:93},{day:"Sun",rainfall:55,temp:29,humidity:94}],citizenReports:[{id:1,user:"R. Das",text:"Anil Nagar area is already experiencing some waterlogging.",time:"45m ago"}]},Anantapur:{alerts:[{id:1,level:"Low",text:"Scattered thunderstorms possible later this week. No immediate drought relief expected."}],forecast:[{day:"Mon",rainfall:0,temp:35,humidity:40},{day:"Tue",rainfall:0,temp:36,humidity:38},{day:"Wed",rainfall:5,temp:34,humidity:50},{day:"Thu",rainfall:10,temp:33,humidity:55},{day:"Fri",rainfall:2,temp:35,humidity:45},{day:"Sat",rainfall:0,temp:37,humidity:35},{day:"Sun",rainfall:0,temp:36,humidity:37}],citizenReports:[{id:1,user:"Local Farmer",text:"Soil is extremely dry in Kalyandurg mandal.",time:"8h ago"}]},Dordrecht:{alerts:[{id:1,level:"Minor",text:"Elevated river levels due to North Sea tidal surge. No flooding expected."}],forecast:[{day:"Mon",rainfall:10,temp:18,humidity:75},{day:"Tue",rainfall:5,temp:19,humidity:70},{day:"Wed",rainfall:15,temp:17,humidity:85},{day:"Thu",rainfall:20,temp:16,humidity:88},{day:"Fri",rainfall:5,temp:20,humidity:65},{day:"Sat",rainfall:2,temp:21,humidity:60},{day:"Sun",rainfall:12,temp:19,humidity:78}],citizenReports:[{id:1,user:"Water Board",text:"All flood gates are operating normally.",time:"2h ago"}]},"Tilburg & Breda":{alerts:[{id:1,level:"Low",text:"Drought conditions persist. Water conservation measures remain in effect."}],forecast:[{day:"Mon",rainfall:2,temp:22,humidity:60},{day:"Tue",rainfall:0,temp:24,humidity:55},{day:"Wed",rainfall:0,temp:25,humidity:50},{day:"Thu",rainfall:5,temp:23,humidity:65},{day:"Fri",rainfall:8,temp:21,humidity:70},{day:"Sat",rainfall:1,temp:25,humidity:52},{day:"Sun",rainfall:0,temp:26,humidity:48}],citizenReports:[{id:1,user:"City Official",text:"Please continue to limit non-essential water usage.",time:"1d ago"}]}},u2="https://demotiles.maplibre.org/style.json",pv={Streets:u2,Satellite:u2,Bright:u2},ine={},ane="https://www.google.com/maps/d/kml?forcekml=1&mid=1GRr_qSOqCC8AdtNGTZG0nr6NlW9B3iY";function one(){const e=Pe.useRef(null),t=Pe.useRef(null),r=Pe.useRef(null),n=Pe.useRef(null),s=Pe.useRef(null),[d,h]=Pe.useState(null),[l,_]=Pe.useState(!1),[S,E]=Pe.useState("alerts"),[A,M]=Pe.useState(pv.Streets),[L,U]=Pe.useState(null),[N,B]=Pe.useState(!1);Pe.useEffect(()=>{if(t.current)return;const X=new ev.Map({container:e.current,style:A,center:[78.96,20.59],zoom:4});X.addControl(new ev.NavigationControl({showCompass:!1}),"top-right"),t.current=X},[]),Pe.useEffect(()=>{t.current&&t.current.setStyle(A)},[A]),Pe.useEffect(()=>{const X=t.current;if(!X)return;const se=()=>{Object.keys(ine).forEach(fe=>{X.getLayer(fe)&&X.removeLayer(fe),X.getSource(fe)&&X.removeSource(fe)})};return X.on("style.load",se),se(),()=>X.off("style.load",se)},[L,A]);const Z=async()=>{if(!s.current){const Be=await(await fetch(ane)).text(),xe=new DOMParser().parseFromString(Be,"text/xml");s.current=rne(xe)}const X=s.current,se=t.current;se.getSource("guw-sensors")||(se.addSource("guw-sensors",{type:"geojson",data:X}),se.addLayer({id:"guw-sensors",type:"circle",source:"guw-sensors",paint:{"circle-radius":6,"circle-color":"#00e5ff","circle-stroke-width":2,"circle-stroke-color":"#ffffff","circle-opacity":.95}}),se.addLayer({id:"guw-sensors-glow",type:"circle",source:"guw-sensors",paint:{"circle-radius":12,"circle-color":"#00e5ff","circle-opacity":.15}})),se.on("click","guw-sensors",Se=>{const Be=Se.features[0],xe=Be.properties.Name||Be.properties.name||"Sensor",Fe=(Be.properties.description||"").replace(/[\{\}@type"value":]|html|Sl\. No\.:/g,"").replace(/\n/g,"<br/>");n.current&&n.current.remove(),n.current=new ev.Popup({offset:15,closeButton:!0,closeOnMove:!0}).setLngLat(Be.geometry.coordinates).setHTML(`
          <div style="font-family:sans-serif;font-size:13px;max-width:240px">
            <div style="font-weight:600;color:#111;margin-bottom:4px">${xe}</div>
            <div style="line-height:1.3;color:#444;">${Fe}</div>
          </div>
        `).addTo(se)});const fe=X.features.filter(Se=>{var Be;return((Be=Se.geometry)==null?void 0:Be.type)==="Point"}).map(Se=>Se.geometry.coordinates);if(fe.length){const Se=fe.map(Fe=>Fe[0]),Be=fe.map(Fe=>Fe[1]),xe=[Math.min(...Se),Math.min(...Be)],$e=[Math.max(...Se),Math.max(...Be)];se.fitBounds([xe,$e],{padding:50})}},J=()=>{const X=t.current;X&&(n.current&&n.current.remove(),X.getLayer("guw-sensors-glow")&&X.removeLayer("guw-sensors-glow"),X.getLayer("guw-sensors")&&X.removeLayer("guw-sensors"),X.getSource("guw-sensors")&&X.removeSource("guw-sensors"))},Q=async()=>{N?(J(),B(!1)):(await Z(),B(!0))},ie=async X=>{const se=t.current;if(!se)return;if(!X){h(null),_(!1),r.current&&r.current.remove(),J(),se.flyTo({center:[78.96,20.59],zoom:4});return}const fe=l2[X];h(X),_(!0),E("alerts"),se.flyTo({center:fe.center,zoom:fe.zoom,essential:!0}),r.current&&r.current.remove(),r.current=new ev.Marker({color:"#E63946"}).setLngLat(fe.center).addTo(se);const[Se,Be]=fe.bounds,xe={type:"Feature",geometry:{type:"Polygon",coordinates:[[[Se[0],Se[1]],[Be[0],Se[1]],[Be[0],Be[1]],[Se[0],Be[1]],[Se[0],Se[1]]]]}};se.getSource("site-boundary")?se.getSource("site-boundary").setData(xe):(se.addSource("site-boundary",{type:"geojson",data:xe}),se.addLayer({id:"site-boundary-layer",type:"fill",source:"site-boundary",paint:{"fill-color":"#1D3557","fill-opacity":.25}})),X!=="Guwahati"?(J(),B(!1)):N&&await Z()},H=d?nne[d]:null;return K.jsxs("div",{className:"map-page-wrapper",children:[K.jsxs("div",{className:"map-top-bar",children:[K.jsx("div",{className:"map-logo",children:"LODESTAR Geo-Dashboard"}),K.jsxs("select",{className:"site-selector",onChange:X=>ie(X.target.value),value:d||"",children:[K.jsx("option",{value:"",children:"-- Select a Study Site --"}),Object.keys(l2).map(X=>K.jsx("option",{value:X,children:X},X))]})]}),K.jsx("div",{ref:e,className:"map-container-full"}),K.jsxs("div",{className:"map-controls-bottom-right",children:[K.jsxs("h4",{children:[K.jsx(h$,{})," Map Layers"]}),K.jsx("div",{className:"control-group",children:Object.keys(pv).map(X=>K.jsx("button",{className:`map-control-btn ${A===pv[X]?"active":""}`,onClick:()=>M(pv[X]),children:X},X))}),K.jsxs("h4",{children:[K.jsx(t$,{})," Weather Overlays"]}),K.jsx("div",{className:"control-group",children:K.jsxs("small",{style:{opacity:.7},children:["Add ",K.jsx("code",{children:"VITE_OPENWEATHERMAP_KEY"})," in ",K.jsx("code",{children:".env"})]})}),d==="Guwahati"&&K.jsxs(K.Fragment,{children:[K.jsx("h4",{children:"Data Layers"}),K.jsx("div",{className:"control-group",children:K.jsx("button",{className:`map-control-btn ${N?"active":""}`,onClick:Q,children:"Guwahati Water Sensors"})})]})]}),K.jsx("div",{className:`side-panel ${l?"open":""}`,children:H?K.jsxs(K.Fragment,{children:[K.jsx("button",{className:"panel-close-btn",onClick:()=>_(!1),children:K.jsx(xR,{})}),K.jsxs("div",{className:"panel-header",children:[K.jsx(f$,{})," ",K.jsx("h2",{children:d})]}),K.jsxs("p",{className:"panel-sub-header",children:["Focus: ",l2[d].hazard]}),K.jsxs("div",{className:"panel-tabs",children:[K.jsx("button",{className:S==="alerts"?"active":"",onClick:()=>E("alerts"),children:"Alerts"}),K.jsx("button",{className:S==="forecast"?"active":"",onClick:()=>E("forecast"),children:"Forecast"}),K.jsx("button",{className:S==="reports"?"active":"",onClick:()=>E("reports"),children:"Reports"})]}),K.jsxs("div",{className:"panel-content",children:[S==="alerts"&&K.jsx("div",{className:"panel-section",children:H.alerts.map(X=>K.jsxs("div",{className:`alert-item alert-${X.level.toLowerCase()}`,children:[K.jsxs("strong",{children:[X.level,":"]})," ",X.text]},X.id))}),S==="forecast"&&K.jsxs("div",{className:"panel-section",children:[K.jsx("h4",{className:"chart-title",children:"7-Day Forecast"}),K.jsx(mq,{width:"100%",height:250,children:K.jsxs(Mre,{data:H.forecast,children:[K.jsx(pj,{strokeDasharray:"3 3"}),K.jsx(m0,{dataKey:"day"}),K.jsx(Fg,{yAxisId:"left",stroke:"#8884d8"}),K.jsx(Fg,{yAxisId:"right",orientation:"right",stroke:"#82ca9d"}),K.jsx(ou,{}),K.jsx(If,{}),K.jsx(Df,{yAxisId:"left",type:"monotone",dataKey:"rainfall",stroke:"#3B82F6",strokeWidth:2}),K.jsx(Df,{yAxisId:"left",type:"monotone",dataKey:"temp",stroke:"#EF4444",strokeWidth:2}),K.jsx(Df,{yAxisId:"right",type:"monotone",dataKey:"humidity",stroke:"#82ca9d",strokeWidth:2})]})})]}),S==="reports"&&K.jsxs("div",{className:"panel-section",children:[K.jsx("div",{className:"reports-list",children:H.citizenReports.map(X=>K.jsxs("div",{className:"report-item",children:[K.jsxs("p",{children:['"',X.text,'"']}),K.jsxs("span",{children:["- ",X.user,", ",X.time]})]},X.id))}),K.jsx("button",{className:"cta-button panel-cta",children:"Submit a Report"})]})]})]}):K.jsx("div",{className:"panel-placeholder",children:K.jsx("p",{children:"Select a study site to view details."})})})]})}const sne=[{id:1,site:"Guwahati",hazard:"Flood",severity:"Severe",issued:"2025-07-31 01:00 IST",summary:"Brahmaputra river has crossed the warning level due to heavy upstream rainfall.",actions:"Evacuate low-lying areas near the riverbank. Move valuables to higher ground. Follow instructions from ASDMA."},{id:2,site:"Anantapur",hazard:"Drought",severity:"Moderate",issued:"2025-07-30 10:00 IST",summary:"Below-average monsoon rainfall continues. Soil moisture is critically low.",actions:"Implement water conservation measures. Farmers are advised to consider drought-resistant crops."},{id:3,site:"Bengaluru",hazard:"Flood",severity:"Moderate",issued:"2025-07-31 00:30 IST",summary:"Intense short-duration rainfall expected, leading to high risk of urban waterlogging.",actions:"Avoid travel in low-lying areas and underpasses. Ensure storm drains are clear of debris."},{id:4,site:"Dordrecht",hazard:"Flood",severity:"Minor",issued:"2025-07-30 11:00 CET",summary:"River levels are elevated due to North Sea tidal surge but are expected to remain below flood stage.",actions:"Monitor water levels and be aware of potential for minor coastal flooding."},{id:5,site:"Guwahati",hazard:"Compound",severity:"Extreme",issued:"2025-07-31 02:00 IST",summary:"Compound Event: Fluvial flooding from the river is now combined with pluvial (rainfall) flooding, overwhelming city drainage.",actions:"This is a high-risk situation. Seek shelter on higher floors or designated evacuation centers immediately."}],C4={Minor:1,Moderate:2,Severe:3,Extreme:4},lne={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},une={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};function cne(){const[e,t]=Pe.useState("All"),[r,n]=Pe.useState("All"),s=Pe.useMemo(()=>sne.filter(h=>e==="All"||h.site===e).filter(h=>r==="All"||h.hazard===r).sort((h,l)=>C4[l.severity]-C4[h.severity]),[e,r]),d=Pe.useMemo(()=>s.filter(h=>h.severity==="Severe"||h.severity==="Extreme").length,[s]);return K.jsxs("div",{children:[K.jsx("section",{className:"hero-section-about",children:K.jsxs("div",{className:"container",children:[K.jsx("h1",{className:"hero-title-about",children:"LODESTAR Alert Center"}),K.jsx("p",{className:"hero-subtitle-about",children:"A centralized hub for real-time, multi-hazard early warnings for our study sites in India and the Netherlands."})]})}),K.jsx("section",{className:"page-section",children:K.jsxs("div",{className:"container",children:[K.jsxs("div",{className:"controls-container",children:[K.jsxs("div",{className:"alert-controls",children:[K.jsxs("div",{className:"filter-group",children:[K.jsx(l$,{}),K.jsx("label",{children:"Filter by Site:"}),K.jsxs("select",{value:e,onChange:h=>t(h.target.value),children:[K.jsx("option",{children:"All"})," ",K.jsx("option",{children:"Bengaluru"})," ",K.jsx("option",{children:"Guwahati"}),K.jsx("option",{children:"Anantapur"})," ",K.jsx("option",{children:"Dordrecht"})," ",K.jsx("option",{children:"Tilburg & Breda"})]})]}),K.jsxs("div",{className:"filter-group",children:[K.jsx("label",{children:"Filter by Hazard:"}),K.jsxs("select",{value:r,onChange:h=>n(h.target.value),children:[K.jsx("option",{children:"All"})," ",K.jsx("option",{children:"Flood"}),K.jsx("option",{children:"Drought"})," ",K.jsx("option",{children:"Compound"})]})]})]}),K.jsxs("div",{className:"alert-summary",children:[K.jsxs("div",{children:[K.jsx("span",{children:s.length})," Total Active Alerts"]}),K.jsxs("div",{className:"summary-high-sev",children:[K.jsx("span",{children:d})," High-Severity Alerts"]})]})]}),K.jsx(Ur.div,{className:"alerts-list",variants:lne,initial:"hidden",animate:"visible",children:K.jsx(aP,{children:s.length>0?s.map(h=>K.jsxs(Ur.div,{variants:une,layout:!0,className:`alert-card-detailed sev-${h.severity.toLowerCase()}`,children:[K.jsxs("div",{className:"alert-card-header",children:[K.jsxs("div",{className:"alert-card-severity",children:[K.jsx(s$,{})," ",h.severity]}),K.jsxs("div",{className:"alert-card-location",children:[h.site," - ",h.hazard," Hazard"]})]}),K.jsxs("div",{className:"alert-card-body",children:[K.jsx("p",{className:"alert-summary-text",children:h.summary}),K.jsxs("div",{className:"alert-actions",children:[K.jsx("h4",{children:"Recommended Actions:"}),K.jsx("p",{children:h.actions})]})]}),K.jsxs("div",{className:"alert-card-footer",children:["Issued: ",h.issued]})]},h.id)):K.jsxs(Ur.div,{className:"no-alerts-found",initial:{opacity:0},animate:{opacity:1},children:[K.jsx(c$,{}),K.jsx("p",{children:"No active alerts match your current filter settings."})]})})})]})})]})}const hne={hidden:{opacity:0},visible:{opacity:1}},fne={hidden:{y:"-50px",opacity:0},visible:{y:"0",opacity:1,transition:{delay:.2,type:"spring",stiffness:120}},exit:{y:"50px",opacity:0}};function zj({isOpen:e,onClose:t}){return K.jsx(aP,{children:e&&K.jsx(Ur.div,{className:"modal-backdrop",variants:hne,initial:"hidden",animate:"visible",exit:"hidden",onClick:t,children:K.jsxs(Ur.div,{className:"coming-soon-box",variants:fne,onClick:r=>r.stopPropagation(),children:[K.jsx("button",{className:"modal-close-btn",onClick:t,children:K.jsx(xR,{})}),K.jsx(_$,{className:"coming-soon-icon"}),K.jsx("h2",{className:"coming-soon-title",children:"Feature in Development"}),K.jsx("p",{className:"coming-soon-text",children:"This data repository is a planned deliverable of the LODESTAR project. Our teams are currently developing the necessary infrastructure. Please check back for future updates!"}),K.jsx("button",{onClick:t,className:"cta-button",children:"Continue Exploring"})]})})})}const dne=[{icon:K.jsx(d$,{}),title:"Participatory Social Mapping",text:"We begin by mapping the social landscape of disaster risk. Through collaborative exercises, we identify 'Who knows what?' and 'Who needs to know what?' to ensure our tools address the right problems for the right people."},{icon:K.jsx(u$,{}),title:"Serious Gaming & Scenarios",text:"Interactive and immersive games built on realistic disaster scenarios are used to elicit tacit knowledge, test response strategies, and encourage creative problem-solving among diverse stakeholders."},{icon:K.jsx(o$,{}),title:"Horizontal Learning",text:"We foster an environment of peer-to-peer knowledge exchange, connecting citizens, experts, and officials. This breaks down hierarchies and ensures that all forms of knowledge are valued equally."}];function pne(){const[e,t]=Pe.useState(!1);return K.jsxs(K.Fragment,{children:[K.jsx(zj,{isOpen:e,onClose:()=>t(!1)}),K.jsxs("div",{className:"page-wrapper",children:[K.jsx("section",{className:"hero-section-about",children:K.jsxs("div",{className:"container",children:[K.jsx(Ur.h1,{className:"hero-title-about",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5},children:"Living Labs & Citizen Science"}),K.jsx(Ur.p,{className:"hero-subtitle-about",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:"Where community knowledge meets scientific innovation. This is the heart of LODESTAR's bottom-up approach to building disaster resilience."})]})}),K.jsx("section",{className:"page-section",children:K.jsxs("div",{className:"container",children:[K.jsx("h2",{className:"section-title",children:"What is a Living Lab?"}),K.jsx(Ur.div,{className:"text-block",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.6},children:K.jsx("p",{children:"A Living Lab is an open innovation environment where we co-create solutions in real-life contexts. It's a space where we bring together all stakeholders to ensure our Multi-Hazard Early Warning System (MH-EWS) matches the actual needs, cultures, and creative potentials of the end-users. This approach moves beyond traditional top-down systems to bridge the critical 'know-do' gap."})})]})}),K.jsx("section",{className:"page-section",children:K.jsxs("div",{className:"container",children:[K.jsx("h2",{className:"section-title",children:"Our Methods for Co-Creation"}),K.jsx("div",{className:"methods-grid",children:dne.map((r,n)=>K.jsxs(Ur.div,{className:"method-card",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.5,delay:n*.15},children:[K.jsx("div",{className:"method-icon",children:r.icon}),K.jsx("h3",{children:r.title}),K.jsx("p",{children:r.text})]},r.title))})]})}),K.jsx("section",{className:"page-section cta-section",children:K.jsxs("div",{className:"container",children:[K.jsx("h2",{className:"section-title cta-title",children:"Become a Citizen Scientist"}),K.jsx("p",{className:"cta-subtitle",children:"You can play a direct role in making your community safer. Heres how:"}),K.jsxs("div",{className:"participation-grid",children:[K.jsxs(Ur.div,{className:"participation-card",onClick:()=>t(!0),initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0,amount:.5},transition:{duration:.5,delay:.1},children:[K.jsx(e$,{className:"participation-icon"}),K.jsx("h4",{children:"Contribute Real-time Data"}),K.jsx("p",{children:"Use our upcoming mobile tools to share vital on-the-ground information like water levels."})]}),K.jsxs(Ur.div,{className:"participation-card",onClick:()=>t(!0),initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0,amount:.5},transition:{duration:.5,delay:.2},children:[K.jsx(x$,{className:"participation-icon"}),K.jsx("h4",{children:"Join a Workshop"}),K.jsx("p",{children:"Participate in our local Living Labs to share your experiences and test new tools."})]}),K.jsxs(Ur.div,{className:"participation-card",onClick:()=>t(!0),initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0,amount:.5},transition:{duration:.5,delay:.3},children:[K.jsx(r$,{className:"participation-icon"}),K.jsx("h4",{children:"Share Local Knowledge"}),K.jsx("p",{children:"Your knowledge of past events is invaluable for building more accurate models."})]})]})]})})]})]})}const mne=[{title:"Stop Disasters! (UNDRR)",url:"https://www.stopdisastersgame.org/game",blurb:"A multi-hazard simulation by UNDRR: protect cities from tsunami, earthquake, flood, wildfire and cyclone. Play online and test your risk-management strategy.",tags:["Multi-hazard","Strategy","Risk reduction"]},{title:"Disaster Master (Ready.gov)",url:"https://www.ready.gov/kids/games/data/dm-english/",blurb:"Youth-friendly game: face various disasters, build readiness and resilience through levels of play.",tags:["Preparedness","Youth education","Hazard awareness"]},{title:"Build a Kit Game (Ready.gov)",url:"https://www.ready.gov/kids/games/data/bak-english/index.html",blurb:"Interactive game where you build your emergency kit and choose how to act when disasters strike.",tags:["Emergency kit","Decision making","Awareness"]},{title:"The Disaster Response Game (ISR/NYAS)",url:"https://isr.nyas.org/games/disaster-response/",blurb:"Digital scenario game: wildfires, hurricanes, food-security crises. Hone rapid decision-making skills under pressure.",tags:["Crisis response","Decision-making","Preparedness"]}];function gne(){return K.jsxs("div",{className:"page-wrapper",children:[K.jsx("section",{className:"hero-section-about",children:K.jsxs("div",{className:"container",children:[K.jsx("h1",{className:"hero-title-about",children:"Serious Games Hub"}),K.jsx("p",{className:"hero-subtitle-about",children:"Dive straight into playable games that explore disaster risk, resilience and strategic response."})]})}),K.jsx("section",{className:"page-section",children:K.jsxs("div",{className:"container",children:[K.jsx("h2",{className:"section-title",children:"Play These Real-World Disaster Risk Games"}),K.jsx(Ur.div,{className:"games-portfolio",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},transition:{staggerChildren:.15},children:mne.map(e=>K.jsxs(Ur.div,{className:"game-card-detailed",variants:{hidden:{opacity:0,y:40},visible:{opacity:1,y:0}},children:[K.jsxs("div",{className:"game-card-header",children:[K.jsx("h3",{children:e.title}),K.jsx("span",{className:"game-status-tag",children:"Playable Online"})]}),K.jsxs("div",{className:"game-card-body",children:[K.jsx("p",{children:e.blurb}),K.jsx("div",{className:"game-card-meta",children:K.jsxs("div",{children:[K.jsx(g$,{})," ",K.jsx("strong",{children:"Focus:"})," ",e.tags.join(", ")]})})]}),K.jsx("div",{className:"game-card-footer",children:K.jsxs("a",{className:"cta-button",href:e.url,target:"_blank",rel:"noopener noreferrer",title:"Open game in new tab",children:[K.jsx(m$,{style:{marginRight:8}}),"Play"]})})]},e.title))})]})})]})}const yne=[{icon:K.jsx(lx,{}),title:"Pan-European Decision-Support Dashboard (A4EU)",summary:"A key dashboard from the ANYWHERE project developed by Wageningen University, serving as a model for LODESTAR's EWS.",source:"Wageningen University"},{icon:K.jsx(lx,{}),title:"Serious Games Catalogue & Facilitation Manual",summary:"A portfolio of physical and digital serious games with a manual for developing and facilitating them in stakeholder workshops.",source:"MetaMeta Research"},{icon:K.jsx(lx,{}),title:"Calibrated Hydrological Model (STORM V1)",summary:"A calibrated urban flood model for Bangalore, previously used for crowdsourcing studies and foundational to this project's modelling work.",source:"Indian Institute of Sciences"}],vne=[{icon:K.jsx(vv,{}),title:"Flood disaster subcultures in The Netherlands",summary:"Examines the social and cultural responses to flood risks in Dutch communities, providing crucial context for the project's socio-technical approach.",authors:"Engel, K., Frerks, G., Velotti, L., Warner, J., & Weijs, B."},{icon:K.jsx(vv,{}),title:"Science-policy interface on water scarcity in India",summary:"Investigates the communication and knowledge gaps between scientific research and policy-making regarding water scarcity in India.",authors:"Suparana Katyaini, Anamika Barua, and Rosa Duarte"},{icon:K.jsx(vv,{}),title:"Moving from drought hazard to drought impact forecasts",summary:"A foundational paper on advancing drought EWS from simply predicting hazards to forecasting their tangible, real-world impacts on communities.",authors:"Sutanto, S. J., Van der Weert, M., Wanders, N., et al."}];function _ne(){const[e,t]=Pe.useState(!1);return K.jsxs(K.Fragment,{children:[K.jsx(zj,{isOpen:e,onClose:()=>t(!1)}),K.jsxs("div",{children:[K.jsx("section",{className:"hero-section-about",children:K.jsxs("div",{className:"container",children:[K.jsx(Ur.h1,{className:"hero-title-about",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5},children:"Research & Knowledge Hub"}),K.jsx(Ur.p,{className:"hero-subtitle-about",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:"Access the project's deliverables, key publications, open data repositories, and foundational documents."})]})}),K.jsx("section",{className:"page-section",children:K.jsxs("div",{className:"container",children:[K.jsx("h2",{className:"section-title",children:"Project Deliverables & Tools"}),K.jsx(Ur.div,{className:"research-grid",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},transition:{staggerChildren:.15},children:yne.map(r=>K.jsxs(Ur.div,{className:"research-card",variants:{hidden:{opacity:0,y:50},visible:{opacity:1,y:0}},children:[K.jsx("div",{className:"research-card-icon",children:r.icon}),K.jsxs("div",{className:"research-card-content",children:[K.jsx("h3",{children:r.title}),K.jsx("p",{children:r.summary}),K.jsxs("span",{className:"research-card-source",children:["Source: ",r.source]})]})]},r.title))})]})}),K.jsx("section",{className:"page-section",children:K.jsxs("div",{className:"container",children:[K.jsx("h2",{className:"section-title",children:"Key Publications from the Consortium"}),K.jsx(Ur.div,{className:"research-grid",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},transition:{staggerChildren:.15},children:vne.map(r=>K.jsxs(Ur.div,{className:"research-card",variants:{hidden:{opacity:0,y:50},visible:{opacity:1,y:0}},children:[K.jsx("div",{className:"research-card-icon",children:r.icon}),K.jsxs("div",{className:"research-card-content",children:[K.jsx("h3",{children:r.title}),K.jsx("p",{children:r.summary}),K.jsxs("span",{className:"research-card-source",children:["Authors: ",r.authors]})]})]},r.title))})]})}),K.jsx("section",{className:"page-section",children:K.jsxs("div",{className:"container",children:[K.jsx("h2",{className:"section-title",children:"Data, Models & Open Science"}),K.jsx("div",{className:"text-block",children:K.jsx("p",{children:"LODESTAR is committed to the FAIR (Findable, Accessible, Interoperable, Reusable) guiding principles for scientific data management. We aim to make knowledge creation, transfer, and exchange transparent and interactive."})}),K.jsxs("div",{className:"data-grid",children:[K.jsxs("div",{className:"data-card",onClick:()=>t(!0),children:[K.jsx(i$,{}),K.jsx("h4",{children:"4TU.ResearchData"}),K.jsx("p",{children:"Processed data used for publications will be stored and made available via the 4TU research data centre."})]}),K.jsxs("div",{className:"data-card",onClick:()=>t(!0),children:[K.jsx(K8,{}),K.jsx("h4",{children:"GitHub Repository"}),K.jsx("p",{children:"Algorithms, scripts, and software developed during the project will be shared through platforms like GitHub."})]}),K.jsxs("a",{href:"https://www.undrr.org/implementing-sendai-framework",target:"_blank",rel:"noopener noreferrer",className:"data-card",children:[K.jsx(_R,{}),K.jsx("h4",{children:"Sendai Framework"}),K.jsx("p",{children:"The project's goals align with this key framework for Disaster Risk Reduction."})]})]})]})})]})]})}const c2=[{id:1,team:"Leadership",name:"Professor Anamika Barua",title:"Professor, Dept. of Humanities and Social Sciences",institution:"Indian Institute of Technology-Guwahati (IIT-G)",acronym:"IIT-G",institutionContext:"As one of India's top universities and a leading institute in engineering and disaster management, IIT-G provides the project's anchor in India.",role:"Indian Main Applicant (Principal Investigator)",projectContribution:"Leads the Indian consortium, provides overall project co-ordination, supervises PhD students, and is directly involved in Work Streams 1, 3 & 5.",keyPublication:{title:"Media reporting on conflicts and cooperation... for the Brahmaputra basin.",relevance:"This research provides critical insight into the socio-political context of water management, essential for the success of a cross-community EWS."},contact:{email:"abarua@iitg.ac.in",phone:"+91 361 258 2563"}},{id:2,team:"Leadership",name:"Dr. Jeroen F. Warner",title:"Associate Professor, Crisis and Disaster Studies",institution:"Wageningen University & Research (WUR)",acronym:"WUR",institutionContext:"A world-leading institution in life sciences and social sciences, WUR brings interdisciplinary expertise in water, climate, and disaster studies.",role:"Dutch Main Applicant (Principal Investigator)",projectContribution:"Leads the Dutch consortium, provides overall project co-ordination, supervises PhDs and is directly involved in Work Streams 3 & 5.",keyPublication:{title:"The politics of adaptive climate management: Scientific recipes and lived reality.",relevance:"This work is foundational to LODESTARs core mission, exploring the crucial intersection of scientific solutions and the lived experiences of at-risk communities."},contact:{email:"Jeroen.warner@wur.nl",phone:"(+31) 3174824720"}},{id:3,team:"Dutch",name:"Dr. Sumit Vij",title:"Assistant Professor",institution:"Wageningen University & Research",role:"Co-applicant & WS5 Lead",acronym:"WUR"},{id:4,team:"Dutch",name:"Dr. Jantsje van Loon-Steensma",title:"Professor of Applied Sciences",institution:"VHL University",role:"Co-applicant, Eco-DRR Expert",acronym:"VHL"},{id:5,team:"Dutch",name:"Dr. Spyridon Paparrizos",title:"Assistant Professor",institution:"Wageningen University",role:"Co-applicant & WS4 Co-lead",acronym:"WUR"},{id:6,team:"Dutch",name:"Dr. Frank van Steenbergen",title:"Managing Director",institution:"MetaMeta Research",role:"Partner & WS3 Lead",acronym:"MM"},{id:7,team:"Indian",name:"Dr. Roshan Karan Srivastav",title:"Assistant Professor",institution:"IIT Tirupati",role:"Co-applicant & WS4 Lead",acronym:"IIT-Tr"},{id:8,team:"Indian",name:"Dr. Rajarshi Das Bhowmik",title:"Assistant Professor",institution:"IISc Bangalore",role:"Co-applicant & WS2 Lead",acronym:"IISc"},{id:9,team:"Indian",name:"Dr. Indu K Murthy",title:"Principal Research Scientist",institution:"CSTEP",role:"Partner & WS3 Lead",acronym:"CSTEP"},{id:10,team:"Indian",name:"Dr. Anil Kumar Gupta",title:"Head of Division",institution:"NIDM",role:"Collaboration Partner",acronym:"NIDM"}],h2=({member:e})=>e.team==="Leadership"?K.jsxs(Ur.div,{className:"leader-card",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.6},children:[K.jsxs("div",{className:"leader-header",children:[K.jsx("div",{className:"leader-logo",children:e.acronym}),K.jsxs("div",{className:"leader-title-group",children:[K.jsx("h3",{children:e.name}),K.jsx("p",{children:e.title})]})]}),K.jsxs("div",{className:"leader-body",children:[K.jsx("p",{className:"leader-context",children:e.institutionContext}),K.jsxs("div",{className:"info-item",children:[K.jsx(J8,{}),K.jsxs("span",{children:[K.jsx("strong",{children:"Role in Project:"})," ",e.role]})]}),K.jsxs("div",{className:"info-item",children:[K.jsx(v$,{}),K.jsxs("span",{children:[K.jsx("strong",{children:"Primary Contribution:"})," ",e.projectContribution]})]}),K.jsxs("div",{className:"info-item",children:[K.jsx(vv,{}),K.jsxs("span",{children:[K.jsx("strong",{children:"Key Publication Insight:"}),' "',e.keyPublication.title,'"  ',K.jsx("em",{children:e.keyPublication.relevance})]})]})]}),K.jsxs("div",{className:"leader-footer",children:[K.jsxs("a",{href:`mailto:${e.contact.email}`,children:[K.jsx(a$,{})," Email"]}),K.jsxs("span",{children:[K.jsx(p$,{})," ",e.contact.phone]})]})]}):K.jsxs(Ur.div,{className:"member-card",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.5},transition:{duration:.5},children:[K.jsx("div",{className:"member-logo",children:e.acronym}),K.jsxs("div",{className:"member-info",children:[K.jsx("h4",{children:e.name}),K.jsx("p",{className:"member-title",children:e.title}),K.jsx("span",{className:"member-role-tag",children:e.role})]})]});function xne(){return K.jsxs("div",{children:[K.jsx("section",{className:"hero-section-about",children:K.jsxs("div",{className:"container",children:[K.jsx("h1",{className:"hero-title-about",children:"The LODESTAR Consortium"}),K.jsx("p",{className:"hero-subtitle-about",children:"A detailed overview of the dedicated, transdisciplinary team driving the project."})]})}),K.jsx("section",{className:"page-section",children:K.jsxs("div",{className:"container",children:[K.jsx("h2",{className:"section-title",children:"Project Leadership"}),K.jsx("div",{className:"leader-grid",children:c2.filter(e=>e.team==="Leadership").map(e=>K.jsx(h2,{member:e},e.id))})]})}),K.jsx("section",{className:"page-section",children:K.jsxs("div",{className:"consortium-grid",children:[K.jsxs("div",{className:"consortium-column",children:[K.jsx("h2",{className:"section-title",children:"Dutch Consortium"}),K.jsx("div",{className:"members-grid",children:c2.filter(e=>e.team==="Dutch").map(e=>K.jsx(h2,{member:e},e.id))})]}),K.jsxs("div",{className:"consortium-column",children:[K.jsx("h2",{className:"section-title",children:"Indian Consortium"}),K.jsx("div",{className:"members-grid",children:c2.filter(e=>e.team==="Indian").map(e=>K.jsx(h2,{member:e},e.id))})]})]})})]})}function bne(){const[e,t]=Pe.useState(!1),[r,n]=Pe.useState(""),[s,d]=Pe.useState(""),h=l=>{l.preventDefault(),r==="admin"&&s==="admin"?t(!0):console.error("Invalid credentials")};return K.jsxs("div",{children:[K.jsx("section",{className:"hero-section-about",children:K.jsxs("div",{className:"container",children:[K.jsx("h1",{className:"hero-title-about",children:"Admin Dashboard"}),K.jsx("p",{className:"hero-subtitle-about",children:"Content Management Panel"})]})}),K.jsx("section",{className:"page-section",children:K.jsx("div",{className:"container",children:e?K.jsxs("div",{className:"admin-controls",children:[K.jsxs("div",{className:"admin-card",children:[K.jsx("h4",{children:"Data Management"}),K.jsx("p",{children:"Push new real-time alerts to the EWS or update existing ones."}),K.jsx("button",{className:"cta-button",children:"Update Alerts"})]}),K.jsxs("div",{className:"admin-card",children:[K.jsx("h4",{children:"Upload Reports"}),K.jsx("p",{children:"Add new publications or project deliverables to the Research Hub."}),K.jsx("input",{type:"file"})]}),K.jsxs("div",{className:"admin-card",children:[K.jsx("h4",{children:"Living Lab Management"}),K.jsx("p",{children:"Update workshop schedules and post citizen science results."}),K.jsx("button",{className:"cta-button",children:"Manage Labs"})]})]}):K.jsxs("form",{className:"admin-login-form",onSubmit:h,children:[K.jsx("h3",{children:"Consortium Login"}),K.jsx("input",{type:"text",placeholder:"Username",value:r,onChange:l=>n(l.target.value),required:!0}),K.jsx("input",{type:"password",placeholder:"Password",value:s,onChange:l=>d(l.target.value),required:!0}),K.jsx("button",{type:"submit",className:"cta-button",children:"Login"})]})})})]})}const wne=()=>{const[e,t]=Pe.useState(!1),r="http://172.17.1.141:8080/web/client/login";return Pe.useEffect(()=>{const n=setTimeout(()=>{t(!0)},5e3);return()=>clearTimeout(n)},[]),K.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",minHeight:"calc(100vh - 80px)"},children:[" ",K.jsx("section",{className:"hero-section-about",style:{padding:"2rem 0",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:K.jsxs("div",{className:"container",children:[K.jsx("h1",{className:"hero-title-about",style:{marginBottom:"0.5rem"},children:"Internal Access Portal"}),K.jsxs("p",{className:"hero-subtitle-about",style:{maxWidth:"800px",margin:"0 auto",fontSize:"1.1rem",color:"#666"},children:[K.jsx("span",{style:{color:"#856404",fontWeight:"bold"},children:" Restricted Access:"})," IITG VPN connection is required to access this portal.",e&&K.jsx("span",{style:{marginLeft:"10px",animation:"fadeIn 0.5s"},children:K.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",style:{color:"#007bff",textDecoration:"underline",fontSize:"0.9em",cursor:"pointer"},children:"(Issue connecting? Open in new tab)"})})]})]})}),K.jsx("div",{className:"iframe-wrapper",style:{flex:1,width:"100%",position:"relative",display:"flex",flexDirection:"column"},children:K.jsx("iframe",{src:r,title:"Internal DB Portal",style:{flex:1,width:"100%",border:"none",display:"block"},onError:()=>t(!0)})})]})};function Sne(){return K.jsx("div",{className:"notfound-wrapper-themed",children:K.jsxs(Ur.div,{className:"notfound-container-themed",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:[K.jsxs("div",{className:"radar-container",children:[K.jsx(n$,{className:"radar-icon"}),K.jsx("div",{className:"radar-sweep"})]}),K.jsx("h1",{className:"notfound-title-themed",children:"404"}),K.jsx("h2",{className:"notfound-subtitle-themed",children:"Lost Signal"}),K.jsx("p",{className:"notfound-text-themed",children:"You've navigated to a data point that is off our forecast map. The requested page could not be found. Let's get you back to charted territory."}),K.jsx(eP,{to:"/",className:"cta-button",children:"Return to Dashboard"})]})})}function Pne(){return K.jsx(l6,{children:K.jsx(P$,{children:K.jsxs(e6,{children:[K.jsx(ks,{path:"/",element:K.jsx(E$,{})}),K.jsx(ks,{path:"/about",element:K.jsx(I$,{})}),K.jsx(ks,{path:"/maps",element:K.jsx(one,{})}),K.jsx(ks,{path:"/alerts",element:K.jsx(cne,{})}),K.jsx(ks,{path:"/living-labs",element:K.jsx(pne,{})}),K.jsx(ks,{path:"/serious-games",element:K.jsx(gne,{})}),K.jsx(ks,{path:"/research",element:K.jsx(_ne,{})}),K.jsx(ks,{path:"/team",element:K.jsx(xne,{})}),K.jsx(ks,{path:"/admin",element:K.jsx(bne,{})}),K.jsx(ks,{path:"/internal-access",element:K.jsx(wne,{})}),K.jsx(ks,{path:"*",element:K.jsx(Sne,{})})]})})})}cL.createRoot(document.getElementById("root")).render(K.jsx(ze.StrictMode,{children:K.jsx(Pne,{})}));
