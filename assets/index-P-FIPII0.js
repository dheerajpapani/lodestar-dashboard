(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))a(h);new MutationObserver(h=>{for(const g of h)if(g.type==="childList")for(const p of g.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function n(h){const g={};return h.integrity&&(g.integrity=h.integrity),h.referrerPolicy&&(g.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?g.credentials="include":h.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function a(h){if(h.ep)return;h.ep=!0;const g=n(h);fetch(h.href,g)}})();function Fl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var K_={exports:{}},Lm={},X_={exports:{}},Rr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xS;function O4(){if(xS)return Rr;xS=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),p=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.iterator;function R(ze){return ze===null||typeof ze!="object"?null:(ze=I&&ze[I]||ze["@@iterator"],typeof ze=="function"?ze:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,U={};function Z(ze,$e,Lt){this.props=ze,this.context=$e,this.refs=U,this.updater=Lt||z}Z.prototype.isReactComponent={},Z.prototype.setState=function(ze,$e){if(typeof ze!="object"&&typeof ze!="function"&&ze!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ze,$e,"setState")},Z.prototype.forceUpdate=function(ze){this.updater.enqueueForceUpdate(this,ze,"forceUpdate")};function Q(){}Q.prototype=Z.prototype;function le(ze,$e,Lt){this.props=ze,this.context=$e,this.refs=U,this.updater=Lt||z}var se=le.prototype=new Q;se.constructor=le,B(se,Z.prototype),se.isPureReactComponent=!0;var Ce=Array.isArray,be=Object.prototype.hasOwnProperty,Ae={current:null},Ne={key:!0,ref:!0,__self:!0,__source:!0};function Qe(ze,$e,Lt){var Xt,tr={},Pr=null,zr=null;if($e!=null)for(Xt in $e.ref!==void 0&&(zr=$e.ref),$e.key!==void 0&&(Pr=""+$e.key),$e)be.call($e,Xt)&&!Ne.hasOwnProperty(Xt)&&(tr[Xt]=$e[Xt]);var Ir=arguments.length-2;if(Ir===1)tr.children=Lt;else if(1<Ir){for(var lt=Array(Ir),Qt=0;Qt<Ir;Qt++)lt[Qt]=arguments[Qt+2];tr.children=lt}if(ze&&ze.defaultProps)for(Xt in Ir=ze.defaultProps,Ir)tr[Xt]===void 0&&(tr[Xt]=Ir[Xt]);return{$$typeof:e,type:ze,key:Pr,ref:zr,props:tr,_owner:Ae.current}}function ht(ze,$e){return{$$typeof:e,type:ze.type,key:$e,ref:ze.ref,props:ze.props,_owner:ze._owner}}function Et(ze){return typeof ze=="object"&&ze!==null&&ze.$$typeof===e}function vt(ze){var $e={"=":"=0",":":"=2"};return"$"+ze.replace(/[=:]/g,function(Lt){return $e[Lt]})}var It=/\/+/g;function Ft(ze,$e){return typeof ze=="object"&&ze!==null&&ze.key!=null?vt(""+ze.key):$e.toString(36)}function er(ze,$e,Lt,Xt,tr){var Pr=typeof ze;(Pr==="undefined"||Pr==="boolean")&&(ze=null);var zr=!1;if(ze===null)zr=!0;else switch(Pr){case"string":case"number":zr=!0;break;case"object":switch(ze.$$typeof){case e:case t:zr=!0}}if(zr)return zr=ze,tr=tr(zr),ze=Xt===""?"."+Ft(zr,0):Xt,Ce(tr)?(Lt="",ze!=null&&(Lt=ze.replace(It,"$&/")+"/"),er(tr,$e,Lt,"",function(Qt){return Qt})):tr!=null&&(Et(tr)&&(tr=ht(tr,Lt+(!tr.key||zr&&zr.key===tr.key?"":(""+tr.key).replace(It,"$&/")+"/")+ze)),$e.push(tr)),1;if(zr=0,Xt=Xt===""?".":Xt+":",Ce(ze))for(var Ir=0;Ir<ze.length;Ir++){Pr=ze[Ir];var lt=Xt+Ft(Pr,Ir);zr+=er(Pr,$e,Lt,lt,tr)}else if(lt=R(ze),typeof lt=="function")for(ze=lt.call(ze),Ir=0;!(Pr=ze.next()).done;)Pr=Pr.value,lt=Xt+Ft(Pr,Ir++),zr+=er(Pr,$e,Lt,lt,tr);else if(Pr==="object")throw $e=String(ze),Error("Objects are not valid as a React child (found: "+($e==="[object Object]"?"object with keys {"+Object.keys(ze).join(", ")+"}":$e)+"). If you meant to render a collection of children, use an array instead.");return zr}function lr(ze,$e,Lt){if(ze==null)return ze;var Xt=[],tr=0;return er(ze,Xt,"","",function(Pr){return $e.call(Lt,Pr,tr++)}),Xt}function vr(ze){if(ze._status===-1){var $e=ze._result;$e=$e(),$e.then(function(Lt){(ze._status===0||ze._status===-1)&&(ze._status=1,ze._result=Lt)},function(Lt){(ze._status===0||ze._status===-1)&&(ze._status=2,ze._result=Lt)}),ze._status===-1&&(ze._status=0,ze._result=$e)}if(ze._status===1)return ze._result.default;throw ze._result}var Mt={current:null},ut={transition:null},Ct={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:ut,ReactCurrentOwner:Ae};function wt(){throw Error("act(...) is not supported in production builds of React.")}return Rr.Children={map:lr,forEach:function(ze,$e,Lt){lr(ze,function(){$e.apply(this,arguments)},Lt)},count:function(ze){var $e=0;return lr(ze,function(){$e++}),$e},toArray:function(ze){return lr(ze,function($e){return $e})||[]},only:function(ze){if(!Et(ze))throw Error("React.Children.only expected to receive a single React element child.");return ze}},Rr.Component=Z,Rr.Fragment=n,Rr.Profiler=h,Rr.PureComponent=le,Rr.StrictMode=a,Rr.Suspense=P,Rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ct,Rr.act=wt,Rr.cloneElement=function(ze,$e,Lt){if(ze==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ze+".");var Xt=B({},ze.props),tr=ze.key,Pr=ze.ref,zr=ze._owner;if($e!=null){if($e.ref!==void 0&&(Pr=$e.ref,zr=Ae.current),$e.key!==void 0&&(tr=""+$e.key),ze.type&&ze.type.defaultProps)var Ir=ze.type.defaultProps;for(lt in $e)be.call($e,lt)&&!Ne.hasOwnProperty(lt)&&(Xt[lt]=$e[lt]===void 0&&Ir!==void 0?Ir[lt]:$e[lt])}var lt=arguments.length-2;if(lt===1)Xt.children=Lt;else if(1<lt){Ir=Array(lt);for(var Qt=0;Qt<lt;Qt++)Ir[Qt]=arguments[Qt+2];Xt.children=Ir}return{$$typeof:e,type:ze.type,key:tr,ref:Pr,props:Xt,_owner:zr}},Rr.createContext=function(ze){return ze={$$typeof:p,_currentValue:ze,_currentValue2:ze,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ze.Provider={$$typeof:g,_context:ze},ze.Consumer=ze},Rr.createElement=Qe,Rr.createFactory=function(ze){var $e=Qe.bind(null,ze);return $e.type=ze,$e},Rr.createRef=function(){return{current:null}},Rr.forwardRef=function(ze){return{$$typeof:o,render:ze}},Rr.isValidElement=Et,Rr.lazy=function(ze){return{$$typeof:C,_payload:{_status:-1,_result:ze},_init:vr}},Rr.memo=function(ze,$e){return{$$typeof:E,type:ze,compare:$e===void 0?null:$e}},Rr.startTransition=function(ze){var $e=ut.transition;ut.transition={};try{ze()}finally{ut.transition=$e}},Rr.unstable_act=wt,Rr.useCallback=function(ze,$e){return Mt.current.useCallback(ze,$e)},Rr.useContext=function(ze){return Mt.current.useContext(ze)},Rr.useDebugValue=function(){},Rr.useDeferredValue=function(ze){return Mt.current.useDeferredValue(ze)},Rr.useEffect=function(ze,$e){return Mt.current.useEffect(ze,$e)},Rr.useId=function(){return Mt.current.useId()},Rr.useImperativeHandle=function(ze,$e,Lt){return Mt.current.useImperativeHandle(ze,$e,Lt)},Rr.useInsertionEffect=function(ze,$e){return Mt.current.useInsertionEffect(ze,$e)},Rr.useLayoutEffect=function(ze,$e){return Mt.current.useLayoutEffect(ze,$e)},Rr.useMemo=function(ze,$e){return Mt.current.useMemo(ze,$e)},Rr.useReducer=function(ze,$e,Lt){return Mt.current.useReducer(ze,$e,Lt)},Rr.useRef=function(ze){return Mt.current.useRef(ze)},Rr.useState=function(ze){return Mt.current.useState(ze)},Rr.useSyncExternalStore=function(ze,$e,Lt){return Mt.current.useSyncExternalStore(ze,$e,Lt)},Rr.useTransition=function(){return Mt.current.useTransition()},Rr.version="18.3.1",Rr}var bS;function $p(){return bS||(bS=1,X_.exports=O4()),X_.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wS;function R4(){if(wS)return Lm;wS=1;var e=$p(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,h=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function p(o,P,E){var C,I={},R=null,z=null;E!==void 0&&(R=""+E),P.key!==void 0&&(R=""+P.key),P.ref!==void 0&&(z=P.ref);for(C in P)a.call(P,C)&&!g.hasOwnProperty(C)&&(I[C]=P[C]);if(o&&o.defaultProps)for(C in P=o.defaultProps,P)I[C]===void 0&&(I[C]=P[C]);return{$$typeof:t,type:o,key:R,ref:z,props:I,_owner:h.current}}return Lm.Fragment=n,Lm.jsx=p,Lm.jsxs=p,Lm}var SS;function z4(){return SS||(SS=1,K_.exports=R4()),K_.exports}var Y=z4(),H=$p();const qh=Fl(H);var xy={},Y_={exports:{}},bo={},Q_={exports:{}},J_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PS;function L4(){return PS||(PS=1,function(e){function t(ut,Ct){var wt=ut.length;ut.push(Ct);e:for(;0<wt;){var ze=wt-1>>>1,$e=ut[ze];if(0<h($e,Ct))ut[ze]=Ct,ut[wt]=$e,wt=ze;else break e}}function n(ut){return ut.length===0?null:ut[0]}function a(ut){if(ut.length===0)return null;var Ct=ut[0],wt=ut.pop();if(wt!==Ct){ut[0]=wt;e:for(var ze=0,$e=ut.length,Lt=$e>>>1;ze<Lt;){var Xt=2*(ze+1)-1,tr=ut[Xt],Pr=Xt+1,zr=ut[Pr];if(0>h(tr,wt))Pr<$e&&0>h(zr,tr)?(ut[ze]=zr,ut[Pr]=wt,ze=Pr):(ut[ze]=tr,ut[Xt]=wt,ze=Xt);else if(Pr<$e&&0>h(zr,wt))ut[ze]=zr,ut[Pr]=wt,ze=Pr;else break e}}return Ct}function h(ut,Ct){var wt=ut.sortIndex-Ct.sortIndex;return wt!==0?wt:ut.id-Ct.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;e.unstable_now=function(){return g.now()}}else{var p=Date,o=p.now();e.unstable_now=function(){return p.now()-o}}var P=[],E=[],C=1,I=null,R=3,z=!1,B=!1,U=!1,Z=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function se(ut){for(var Ct=n(E);Ct!==null;){if(Ct.callback===null)a(E);else if(Ct.startTime<=ut)a(E),Ct.sortIndex=Ct.expirationTime,t(P,Ct);else break;Ct=n(E)}}function Ce(ut){if(U=!1,se(ut),!B)if(n(P)!==null)B=!0,vr(be);else{var Ct=n(E);Ct!==null&&Mt(Ce,Ct.startTime-ut)}}function be(ut,Ct){B=!1,U&&(U=!1,Q(Qe),Qe=-1),z=!0;var wt=R;try{for(se(Ct),I=n(P);I!==null&&(!(I.expirationTime>Ct)||ut&&!vt());){var ze=I.callback;if(typeof ze=="function"){I.callback=null,R=I.priorityLevel;var $e=ze(I.expirationTime<=Ct);Ct=e.unstable_now(),typeof $e=="function"?I.callback=$e:I===n(P)&&a(P),se(Ct)}else a(P);I=n(P)}if(I!==null)var Lt=!0;else{var Xt=n(E);Xt!==null&&Mt(Ce,Xt.startTime-Ct),Lt=!1}return Lt}finally{I=null,R=wt,z=!1}}var Ae=!1,Ne=null,Qe=-1,ht=5,Et=-1;function vt(){return!(e.unstable_now()-Et<ht)}function It(){if(Ne!==null){var ut=e.unstable_now();Et=ut;var Ct=!0;try{Ct=Ne(!0,ut)}finally{Ct?Ft():(Ae=!1,Ne=null)}}else Ae=!1}var Ft;if(typeof le=="function")Ft=function(){le(It)};else if(typeof MessageChannel<"u"){var er=new MessageChannel,lr=er.port2;er.port1.onmessage=It,Ft=function(){lr.postMessage(null)}}else Ft=function(){Z(It,0)};function vr(ut){Ne=ut,Ae||(Ae=!0,Ft())}function Mt(ut,Ct){Qe=Z(function(){ut(e.unstable_now())},Ct)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ut){ut.callback=null},e.unstable_continueExecution=function(){B||z||(B=!0,vr(be))},e.unstable_forceFrameRate=function(ut){0>ut||125<ut?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ht=0<ut?Math.floor(1e3/ut):5},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_getFirstCallbackNode=function(){return n(P)},e.unstable_next=function(ut){switch(R){case 1:case 2:case 3:var Ct=3;break;default:Ct=R}var wt=R;R=Ct;try{return ut()}finally{R=wt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ut,Ct){switch(ut){case 1:case 2:case 3:case 4:case 5:break;default:ut=3}var wt=R;R=ut;try{return Ct()}finally{R=wt}},e.unstable_scheduleCallback=function(ut,Ct,wt){var ze=e.unstable_now();switch(typeof wt=="object"&&wt!==null?(wt=wt.delay,wt=typeof wt=="number"&&0<wt?ze+wt:ze):wt=ze,ut){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=wt+$e,ut={id:C++,callback:Ct,priorityLevel:ut,startTime:wt,expirationTime:$e,sortIndex:-1},wt>ze?(ut.sortIndex=wt,t(E,ut),n(P)===null&&ut===n(E)&&(U?(Q(Qe),Qe=-1):U=!0,Mt(Ce,wt-ze))):(ut.sortIndex=$e,t(P,ut),B||z||(B=!0,vr(be))),ut},e.unstable_shouldYield=vt,e.unstable_wrapCallback=function(ut){var Ct=R;return function(){var wt=R;R=Ct;try{return ut.apply(this,arguments)}finally{R=wt}}}}(J_)),J_}var TS;function j4(){return TS||(TS=1,Q_.exports=L4()),Q_.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CS;function N4(){if(CS)return bo;CS=1;var e=$p(),t=j4();function n(c){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+c,w=1;w<arguments.length;w++)m+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+c+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,h={};function g(c,m){p(c,m),p(c+"Capture",m)}function p(c,m){for(h[c]=m,c=0;c<m.length;c++)a.add(m[c])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),P=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C={},I={};function R(c){return P.call(I,c)?!0:P.call(C,c)?!1:E.test(c)?I[c]=!0:(C[c]=!0,!1)}function z(c,m,w,A){if(w!==null&&w.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return A?!1:w!==null?!w.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function B(c,m,w,A){if(m===null||typeof m>"u"||z(c,m,w,A))return!0;if(A)return!1;if(w!==null)switch(w.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function U(c,m,w,A,j,V,ae){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=A,this.attributeNamespace=j,this.mustUseProperty=w,this.propertyName=c,this.type=m,this.sanitizeURL=V,this.removeEmptyString=ae}var Z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){Z[c]=new U(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var m=c[0];Z[m]=new U(m,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){Z[c]=new U(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){Z[c]=new U(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){Z[c]=new U(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){Z[c]=new U(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){Z[c]=new U(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){Z[c]=new U(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){Z[c]=new U(c,5,!1,c.toLowerCase(),null,!1,!1)});var Q=/[\-:]([a-z])/g;function le(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var m=c.replace(Q,le);Z[m]=new U(m,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var m=c.replace(Q,le);Z[m]=new U(m,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var m=c.replace(Q,le);Z[m]=new U(m,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){Z[c]=new U(c,1,!1,c.toLowerCase(),null,!1,!1)}),Z.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){Z[c]=new U(c,1,!1,c.toLowerCase(),null,!0,!0)});function se(c,m,w,A){var j=Z.hasOwnProperty(m)?Z[m]:null;(j!==null?j.type!==0:A||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(B(m,w,j,A)&&(w=null),A||j===null?R(m)&&(w===null?c.removeAttribute(m):c.setAttribute(m,""+w)):j.mustUseProperty?c[j.propertyName]=w===null?j.type===3?!1:"":w:(m=j.attributeName,A=j.attributeNamespace,w===null?c.removeAttribute(m):(j=j.type,w=j===3||j===4&&w===!0?"":""+w,A?c.setAttributeNS(A,m,w):c.setAttribute(m,w))))}var Ce=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,be=Symbol.for("react.element"),Ae=Symbol.for("react.portal"),Ne=Symbol.for("react.fragment"),Qe=Symbol.for("react.strict_mode"),ht=Symbol.for("react.profiler"),Et=Symbol.for("react.provider"),vt=Symbol.for("react.context"),It=Symbol.for("react.forward_ref"),Ft=Symbol.for("react.suspense"),er=Symbol.for("react.suspense_list"),lr=Symbol.for("react.memo"),vr=Symbol.for("react.lazy"),Mt=Symbol.for("react.offscreen"),ut=Symbol.iterator;function Ct(c){return c===null||typeof c!="object"?null:(c=ut&&c[ut]||c["@@iterator"],typeof c=="function"?c:null)}var wt=Object.assign,ze;function $e(c){if(ze===void 0)try{throw Error()}catch(w){var m=w.stack.trim().match(/\n( *(at )?)/);ze=m&&m[1]||""}return`
`+ze+c}var Lt=!1;function Xt(c,m){if(!c||Lt)return"";Lt=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(et){var A=et}Reflect.construct(c,[],m)}else{try{m.call()}catch(et){A=et}c.call(m.prototype)}else{try{throw Error()}catch(et){A=et}c()}}catch(et){if(et&&A&&typeof et.stack=="string"){for(var j=et.stack.split(`
`),V=A.stack.split(`
`),ae=j.length-1,Pe=V.length-1;1<=ae&&0<=Pe&&j[ae]!==V[Pe];)Pe--;for(;1<=ae&&0<=Pe;ae--,Pe--)if(j[ae]!==V[Pe]){if(ae!==1||Pe!==1)do if(ae--,Pe--,0>Pe||j[ae]!==V[Pe]){var Oe=`
`+j[ae].replace(" at new "," at ");return c.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",c.displayName)),Oe}while(1<=ae&&0<=Pe);break}}}finally{Lt=!1,Error.prepareStackTrace=w}return(c=c?c.displayName||c.name:"")?$e(c):""}function tr(c){switch(c.tag){case 5:return $e(c.type);case 16:return $e("Lazy");case 13:return $e("Suspense");case 19:return $e("SuspenseList");case 0:case 2:case 15:return c=Xt(c.type,!1),c;case 11:return c=Xt(c.type.render,!1),c;case 1:return c=Xt(c.type,!0),c;default:return""}}function Pr(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case Ne:return"Fragment";case Ae:return"Portal";case ht:return"Profiler";case Qe:return"StrictMode";case Ft:return"Suspense";case er:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case vt:return(c.displayName||"Context")+".Consumer";case Et:return(c._context.displayName||"Context")+".Provider";case It:var m=c.render;return c=c.displayName,c||(c=m.displayName||m.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case lr:return m=c.displayName||null,m!==null?m:Pr(c.type)||"Memo";case vr:m=c._payload,c=c._init;try{return Pr(c(m))}catch{}}return null}function zr(c){var m=c.type;switch(c.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=m.render,c=c.displayName||c.name||"",m.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pr(m);case 8:return m===Qe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function Ir(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function lt(c){var m=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Qt(c){var m=lt(c)?"checked":"value",w=Object.getOwnPropertyDescriptor(c.constructor.prototype,m),A=""+c[m];if(!c.hasOwnProperty(m)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var j=w.get,V=w.set;return Object.defineProperty(c,m,{configurable:!0,get:function(){return j.call(this)},set:function(ae){A=""+ae,V.call(this,ae)}}),Object.defineProperty(c,m,{enumerable:w.enumerable}),{getValue:function(){return A},setValue:function(ae){A=""+ae},stopTracking:function(){c._valueTracker=null,delete c[m]}}}}function sr(c){c._valueTracker||(c._valueTracker=Qt(c))}function yt(c){if(!c)return!1;var m=c._valueTracker;if(!m)return!0;var w=m.getValue(),A="";return c&&(A=lt(c)?c.checked?"true":"false":c.value),c=A,c!==w?(m.setValue(c),!0):!1}function _r(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function Tr(c,m){var w=m.checked;return wt({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??c._wrapperState.initialChecked})}function Qr(c,m){var w=m.defaultValue==null?"":m.defaultValue,A=m.checked!=null?m.checked:m.defaultChecked;w=Ir(m.value!=null?m.value:w),c._wrapperState={initialChecked:A,initialValue:w,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function Pn(c,m){m=m.checked,m!=null&&se(c,"checked",m,!1)}function Jr(c,m){Pn(c,m);var w=Ir(m.value),A=m.type;if(w!=null)A==="number"?(w===0&&c.value===""||c.value!=w)&&(c.value=""+w):c.value!==""+w&&(c.value=""+w);else if(A==="submit"||A==="reset"){c.removeAttribute("value");return}m.hasOwnProperty("value")?fi(c,m.type,w):m.hasOwnProperty("defaultValue")&&fi(c,m.type,Ir(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(c.defaultChecked=!!m.defaultChecked)}function ri(c,m,w){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var A=m.type;if(!(A!=="submit"&&A!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+c._wrapperState.initialValue,w||m===c.value||(c.value=m),c.defaultValue=m}w=c.name,w!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,w!==""&&(c.name=w)}function fi(c,m,w){(m!=="number"||_r(c.ownerDocument)!==c)&&(w==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+w&&(c.defaultValue=""+w))}var Fa=Array.isArray;function oa(c,m,w,A){if(c=c.options,m){m={};for(var j=0;j<w.length;j++)m["$"+w[j]]=!0;for(w=0;w<c.length;w++)j=m.hasOwnProperty("$"+c[w].value),c[w].selected!==j&&(c[w].selected=j),j&&A&&(c[w].defaultSelected=!0)}else{for(w=""+Ir(w),m=null,j=0;j<c.length;j++){if(c[j].value===w){c[j].selected=!0,A&&(c[j].defaultSelected=!0);return}m!==null||c[j].disabled||(m=c[j])}m!==null&&(m.selected=!0)}}function Js(c,m){if(m.dangerouslySetInnerHTML!=null)throw Error(n(91));return wt({},m,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function as(c,m){var w=m.value;if(w==null){if(w=m.children,m=m.defaultValue,w!=null){if(m!=null)throw Error(n(92));if(Fa(w)){if(1<w.length)throw Error(n(93));w=w[0]}m=w}m==null&&(m=""),w=m}c._wrapperState={initialValue:Ir(w)}}function no(c,m){var w=Ir(m.value),A=Ir(m.defaultValue);w!=null&&(w=""+w,w!==c.value&&(c.value=w),m.defaultValue==null&&c.defaultValue!==w&&(c.defaultValue=w)),A!=null&&(c.defaultValue=""+A)}function os(c){var m=c.textContent;m===c._wrapperState.initialValue&&m!==""&&m!==null&&(c.value=m)}function io(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ei(c,m){return c==null||c==="http://www.w3.org/1999/xhtml"?io(m):c==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var sa,$l=function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,w,A,j){MSApp.execUnsafeLocalFunction(function(){return c(m,w,A,j)})}:c}(function(c,m){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=m;else{for(sa=sa||document.createElement("div"),sa.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=sa.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;m.firstChild;)c.appendChild(m.firstChild)}});function ss(c,m){if(m){var w=c.firstChild;if(w&&w===c.lastChild&&w.nodeType===3){w.nodeValue=m;return}}c.textContent=m}var la={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fe=["Webkit","ms","Moz","O"];Object.keys(la).forEach(function(c){Fe.forEach(function(m){m=m+c.charAt(0).toUpperCase()+c.substring(1),la[m]=la[c]})});function ie(c,m,w){return m==null||typeof m=="boolean"||m===""?"":w||typeof m!="number"||m===0||la.hasOwnProperty(c)&&la[c]?(""+m).trim():m+"px"}function oe(c,m){c=c.style;for(var w in m)if(m.hasOwnProperty(w)){var A=w.indexOf("--")===0,j=ie(w,m[w],A);w==="float"&&(w="cssFloat"),A?c.setProperty(w,j):c[w]=j}}var fe=wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(c,m){if(m){if(fe[c]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(n(137,c));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(n(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(n(61))}if(m.style!=null&&typeof m.style!="object")throw Error(n(62))}}function Ie(c,m){if(c.indexOf("-")===-1)return typeof m.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Le=null;function qe(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Re=null,Je=null,Xe=null;function Be(c){if(c=gl(c)){if(typeof Re!="function")throw Error(n(280));var m=c.stateNode;m&&(m=iu(m),Re(c.stateNode,c.type,m))}}function nt(c){Je?Xe?Xe.push(c):Xe=[c]:Je=c}function Me(){if(Je){var c=Je,m=Xe;if(Xe=Je=null,Be(c),m)for(c=0;c<m.length;c++)Be(m[c])}}function Pt(c,m){return c(m)}function Kt(){}var At=!1;function Bt(c,m,w){if(At)return c(m,w);At=!0;try{return Pt(c,m,w)}finally{At=!1,(Je!==null||Xe!==null)&&(Kt(),Me())}}function Yt(c,m){var w=c.stateNode;if(w===null)return null;var A=iu(w);if(A===null)return null;w=A[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(c=c.type,A=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!A;break e;default:c=!1}if(c)return null;if(w&&typeof w!="function")throw Error(n(231,m,typeof w));return w}var Wr=!1;if(o)try{var Ar={};Object.defineProperty(Ar,"passive",{get:function(){Wr=!0}}),window.addEventListener("test",Ar,Ar),window.removeEventListener("test",Ar,Ar)}catch{Wr=!1}function kr(c,m,w,A,j,V,ae,Pe,Oe){var et=Array.prototype.slice.call(arguments,3);try{m.apply(w,et)}catch(mt){this.onError(mt)}}var Zt=!1,xr=null,Tn=!1,ft=null,ni={onError:function(c){Zt=!0,xr=c}};function cn(c,m,w,A,j,V,ae,Pe,Oe){Zt=!1,xr=null,kr.apply(ni,arguments)}function ls(c,m,w,A,j,V,ae,Pe,Oe){if(cn.apply(this,arguments),Zt){if(Zt){var et=xr;Zt=!1,xr=null}else throw Error(n(198));Tn||(Tn=!0,ft=et)}}function ua(c){var m=c,w=c;if(c.alternate)for(;m.return;)m=m.return;else{c=m;do m=c,(m.flags&4098)!==0&&(w=m.return),c=m.return;while(c)}return m.tag===3?w:null}function bt(c){if(c.tag===13){var m=c.memoizedState;if(m===null&&(c=c.alternate,c!==null&&(m=c.memoizedState)),m!==null)return m.dehydrated}return null}function fr(c){if(ua(c)!==c)throw Error(n(188))}function yr(c){var m=c.alternate;if(!m){if(m=ua(c),m===null)throw Error(n(188));return m!==c?null:c}for(var w=c,A=m;;){var j=w.return;if(j===null)break;var V=j.alternate;if(V===null){if(A=j.return,A!==null){w=A;continue}break}if(j.child===V.child){for(V=j.child;V;){if(V===w)return fr(j),c;if(V===A)return fr(j),m;V=V.sibling}throw Error(n(188))}if(w.return!==A.return)w=j,A=V;else{for(var ae=!1,Pe=j.child;Pe;){if(Pe===w){ae=!0,w=j,A=V;break}if(Pe===A){ae=!0,A=j,w=V;break}Pe=Pe.sibling}if(!ae){for(Pe=V.child;Pe;){if(Pe===w){ae=!0,w=V,A=j;break}if(Pe===A){ae=!0,A=V,w=j;break}Pe=Pe.sibling}if(!ae)throw Error(n(189))}}if(w.alternate!==A)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?c:m}function Gi(c){return c=yr(c),c!==null?Nu(c):null}function Nu(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var m=Nu(c);if(m!==null)return m;c=c.sibling}return null}var Ba=t.unstable_scheduleCallback,pr=t.unstable_cancelCallback,Eo=t.unstable_shouldYield,el=t.unstable_requestPaint,br=t.unstable_now,Fu=t.unstable_getCurrentPriorityLevel,tl=t.unstable_ImmediatePriority,ao=t.unstable_UserBlockingPriority,us=t.unstable_NormalPriority,ca=t.unstable_LowPriority,nn=t.unstable_IdlePriority,Bu=null,qi=null;function ah(c){if(qi&&typeof qi.onCommitFiberRoot=="function")try{qi.onCommitFiberRoot(Bu,c,void 0,(c.current.flags&128)===128)}catch{}}var ii=Math.clz32?Math.clz32:Cf,cs=Math.log,Tf=Math.LN2;function Cf(c){return c>>>=0,c===0?32:31-(cs(c)/Tf|0)|0}var $u=64,Mo=4194304;function Vl(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Vu(c,m){var w=c.pendingLanes;if(w===0)return 0;var A=0,j=c.suspendedLanes,V=c.pingedLanes,ae=w&268435455;if(ae!==0){var Pe=ae&~j;Pe!==0?A=Vl(Pe):(V&=ae,V!==0&&(A=Vl(V)))}else ae=w&~j,ae!==0?A=Vl(ae):V!==0&&(A=Vl(V));if(A===0)return 0;if(m!==0&&m!==A&&(m&j)===0&&(j=A&-A,V=m&-m,j>=V||j===16&&(V&4194240)!==0))return m;if((A&4)!==0&&(A|=w&16),m=c.entangledLanes,m!==0)for(c=c.entanglements,m&=A;0<m;)w=31-ii(m),j=1<<w,A|=c[w],m&=~j;return A}function Uu(c,m){switch(c){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jp(c,m){for(var w=c.suspendedLanes,A=c.pingedLanes,j=c.expirationTimes,V=c.pendingLanes;0<V;){var ae=31-ii(V),Pe=1<<ae,Oe=j[ae];Oe===-1?((Pe&w)===0||(Pe&A)!==0)&&(j[ae]=Uu(Pe,m)):Oe<=m&&(c.expiredLanes|=Pe),V&=~Pe}}function oh(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function rl(){var c=$u;return $u<<=1,($u&4194240)===0&&($u=64),c}function Gu(c){for(var m=[],w=0;31>w;w++)m.push(c);return m}function nl(c,m,w){c.pendingLanes|=m,m!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,m=31-ii(m),c[m]=w}function Ef(c,m){var w=c.pendingLanes&~m;c.pendingLanes=m,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=m,c.mutableReadLanes&=m,c.entangledLanes&=m,m=c.entanglements;var A=c.eventTimes;for(c=c.expirationTimes;0<w;){var j=31-ii(w),V=1<<j;m[j]=0,A[j]=-1,c[j]=-1,w&=~V}}function Ul(c,m){var w=c.entangledLanes|=m;for(c=c.entanglements;w;){var A=31-ii(w),j=1<<A;j&m|c[A]&m&&(c[A]|=m),w&=~j}}var Lr=0;function $a(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var wr,Va,oo,hs,sh,qu=!1,Mi=[],pi=null,cr=null,Aa=null,ds=new Map,il=new Map,pn=[],Dn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ai(c,m){switch(c){case"focusin":case"focusout":pi=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":Aa=null;break;case"pointerover":case"pointerout":ds.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":il.delete(m.pointerId)}}function vn(c,m,w,A,j,V){return c===null||c.nativeEvent!==V?(c={blockedOn:m,domEventName:w,eventSystemFlags:A,nativeEvent:V,targetContainers:[j]},m!==null&&(m=gl(m),m!==null&&Va(m)),c):(c.eventSystemFlags|=A,m=c.targetContainers,j!==null&&m.indexOf(j)===-1&&m.push(j),c)}function hn(c,m,w,A,j){switch(m){case"focusin":return pi=vn(pi,c,m,w,A,j),!0;case"dragenter":return cr=vn(cr,c,m,w,A,j),!0;case"mouseover":return Aa=vn(Aa,c,m,w,A,j),!0;case"pointerover":var V=j.pointerId;return ds.set(V,vn(ds.get(V)||null,c,m,w,A,j)),!0;case"gotpointercapture":return V=j.pointerId,il.set(V,vn(il.get(V)||null,c,m,w,A,j)),!0}return!1}function Wu(c){var m=Oa(c.target);if(m!==null){var w=ua(m);if(w!==null){if(m=w.tag,m===13){if(m=bt(w),m!==null){c.blockedOn=m,sh(c.priority,function(){oo(w)});return}}else if(m===3&&w.stateNode.current.memoizedState.isDehydrated){c.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Sr(c){if(c.blockedOn!==null)return!1;for(var m=c.targetContainers;0<m.length;){var w=Ia(c.domEventName,c.eventSystemFlags,m[0],c.nativeEvent);if(w===null){w=c.nativeEvent;var A=new w.constructor(w.type,w);Le=A,w.target.dispatchEvent(A),Le=null}else return m=gl(w),m!==null&&Va(m),c.blockedOn=w,!1;m.shift()}return!0}function Ai(c,m,w){Sr(c)&&w.delete(m)}function hr(){qu=!1,pi!==null&&Sr(pi)&&(pi=null),cr!==null&&Sr(cr)&&(cr=null),Aa!==null&&Sr(Aa)&&(Aa=null),ds.forEach(Ai),il.forEach(Ai)}function ur(c,m){c.blockedOn===m&&(c.blockedOn=null,qu||(qu=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,hr)))}function Ua(c){function m(j){return ur(j,c)}if(0<Mi.length){ur(Mi[0],c);for(var w=1;w<Mi.length;w++){var A=Mi[w];A.blockedOn===c&&(A.blockedOn=null)}}for(pi!==null&&ur(pi,c),cr!==null&&ur(cr,c),Aa!==null&&ur(Aa,c),ds.forEach(m),il.forEach(m),w=0;w<pn.length;w++)A=pn[w],A.blockedOn===c&&(A.blockedOn=null);for(;0<pn.length&&(w=pn[0],w.blockedOn===null);)Wu(w),w.blockedOn===null&&pn.shift()}var Ut=Ce.ReactCurrentBatchConfig,so=!0;function Ii(c,m,w,A){var j=Lr,V=Ut.transition;Ut.transition=null;try{Lr=1,Wi(c,m,w,A)}finally{Lr=j,Ut.transition=V}}function Gl(c,m,w,A){var j=Lr,V=Ut.transition;Ut.transition=null;try{Lr=4,Wi(c,m,w,A)}finally{Lr=j,Ut.transition=V}}function Wi(c,m,w,A){if(so){var j=Ia(c,m,w,A);if(j===null)tu(c,m,A,ql,w),ai(c,A);else if(hn(j,c,m,w,A))A.stopPropagation();else if(ai(c,A),m&4&&-1<Dn.indexOf(c)){for(;j!==null;){var V=gl(j);if(V!==null&&wr(V),V=Ia(c,m,w,A),V===null&&tu(c,m,A,ql,w),V===j)break;j=V}j!==null&&A.stopPropagation()}else tu(c,m,A,null,w)}}var ql=null;function Ia(c,m,w,A){if(ql=null,c=qe(A),c=Oa(c),c!==null)if(m=ua(c),m===null)c=null;else if(w=m.tag,w===13){if(c=bt(m),c!==null)return c;c=null}else if(w===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;c=null}else m!==c&&(c=null);return ql=c,null}function id(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fu()){case tl:return 1;case ao:return 4;case us:case ca:return 16;case nn:return 536870912;default:return 16}default:return 16}}var Ao=null,al=null,fs=null;function ka(){if(fs)return fs;var c,m=al,w=m.length,A,j="value"in Ao?Ao.value:Ao.textContent,V=j.length;for(c=0;c<w&&m[c]===j[c];c++);var ae=w-c;for(A=1;A<=ae&&m[w-A]===j[V-A];A++);return fs=j.slice(c,1<A?1-A:void 0)}function Cn(c){var m=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&m===13&&(c=13)):c=m,c===10&&(c=13),32<=c||c===13?c:0}function Io(){return!0}function Wl(){return!1}function Zn(c){function m(w,A,j,V,ae){this._reactName=w,this._targetInst=j,this.type=A,this.nativeEvent=V,this.target=ae,this.currentTarget=null;for(var Pe in c)c.hasOwnProperty(Pe)&&(w=c[Pe],this[Pe]=w?w(V):V[Pe]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?Io:Wl,this.isPropagationStopped=Wl,this}return wt(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=Io)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=Io)},persist:function(){},isPersistent:Io}),m}var an={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ol=Zn(an),lo=wt({},an,{view:0,detail:0}),Zl=Zn(lo),ad,uo,ko,Hl=wt({},lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yl,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==ko&&(ko&&c.type==="mousemove"?(ad=c.screenX-ko.screenX,uo=c.screenY-ko.screenY):uo=ad=0,ko=c),ad)},movementY:function(c){return"movementY"in c?c.movementY:uo}}),Mf=Zn(Hl),ki=wt({},Hl,{dataTransfer:0}),Kl=Zn(ki),ha=wt({},lo,{relatedTarget:0}),mi=Zn(ha),od=wt({},an,{animationName:0,elapsedTime:0,pseudoElement:0}),Zu=Zn(od),Xl=wt({},an,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),sd=Zn(Xl),em=wt({},an,{data:0}),Af=Zn(em),tm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uh(c){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(c):(c=lh[c])?!!m[c]:!1}function Yl(){return uh}var Hu=wt({},lo,{key:function(c){if(c.key){var m=tm[c.key]||c.key;if(m!=="Unidentified")return m}return c.type==="keypress"?(c=Cn(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?rm[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yl,charCode:function(c){return c.type==="keypress"?Cn(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Cn(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),ld=Zn(Hu),ch=wt({},Hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ga=Zn(ch),nm=wt({},lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yl}),ud=Zn(nm),Ku=wt({},an,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xu=Zn(Ku),If=wt({},Hl,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Yu=Zn(If),kf=[9,13,27,32],ps=o&&"CompositionEvent"in window,Qu=null;o&&"documentMode"in document&&(Qu=document.documentMode);var Df=o&&"TextEvent"in window&&!Qu,Of=o&&(!ps||Qu&&8<Qu&&11>=Qu),Ju=" ",hh=!1;function cd(c,m){switch(c){case"keyup":return kf.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hd(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var ms=!1;function dd(c,m){switch(c){case"compositionend":return hd(m);case"keypress":return m.which!==32?null:(hh=!0,Ju);case"textInput":return c=m.data,c===Ju&&hh?null:c;default:return null}}function sl(c,m){if(ms)return c==="compositionend"||!ps&&cd(c,m)?(c=ka(),fs=al=Ao=null,ms=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return Of&&m.locale!=="ko"?null:m.data;default:return null}}var Rf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dh(c){var m=c&&c.nodeName&&c.nodeName.toLowerCase();return m==="input"?!!Rf[c.type]:m==="textarea"}function ll(c,m,w,A){nt(A),m=dl(m,"onChange"),0<m.length&&(w=new ol("onChange","change",null,w,A),c.push({event:w,listeners:m}))}var ec=null,gs=null;function im(c){wd(c,0)}function tc(c){var m=po(c);if(yt(m))return c}function zf(c,m){if(c==="change")return m}var fd=!1;if(o){var fh;if(o){var rc="oninput"in document;if(!rc){var Dr=document.createElement("div");Dr.setAttribute("oninput","return;"),rc=typeof Dr.oninput=="function"}fh=rc}else fh=!1;fd=fh&&(!document.documentMode||9<document.documentMode)}function nc(){ec&&(ec.detachEvent("onpropertychange",co),gs=ec=null)}function co(c){if(c.propertyName==="value"&&tc(gs)){var m=[];ll(m,gs,c,qe(c)),Bt(im,m)}}function pd(c,m,w){c==="focusin"?(nc(),ec=m,gs=w,ec.attachEvent("onpropertychange",co)):c==="focusout"&&nc()}function md(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return tc(gs)}function gd(c,m){if(c==="click")return tc(m)}function Lf(c,m){if(c==="input"||c==="change")return tc(m)}function yd(c,m){return c===m&&(c!==0||1/c===1/m)||c!==c&&m!==m}var oi=typeof Object.is=="function"?Object.is:yd;function ul(c,m){if(oi(c,m))return!0;if(typeof c!="object"||c===null||typeof m!="object"||m===null)return!1;var w=Object.keys(c),A=Object.keys(m);if(w.length!==A.length)return!1;for(A=0;A<w.length;A++){var j=w[A];if(!P.call(m,j)||!oi(c[j],m[j]))return!1}return!0}function jf(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Nf(c,m){var w=jf(c);c=0;for(var A;w;){if(w.nodeType===3){if(A=c+w.textContent.length,c<=m&&A>=m)return{node:w,offset:m-c};c=A}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=jf(w)}}function Ff(c,m){return c&&m?c===m?!0:c&&c.nodeType===3?!1:m&&m.nodeType===3?Ff(c,m.parentNode):"contains"in c?c.contains(m):c.compareDocumentPosition?!!(c.compareDocumentPosition(m)&16):!1:!1}function Bf(){for(var c=window,m=_r();m instanceof c.HTMLIFrameElement;){try{var w=typeof m.contentWindow.location.href=="string"}catch{w=!1}if(w)c=m.contentWindow;else break;m=_r(c.document)}return m}function ph(c){var m=c&&c.nodeName&&c.nodeName.toLowerCase();return m&&(m==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||m==="textarea"||c.contentEditable==="true")}function am(c){var m=Bf(),w=c.focusedElem,A=c.selectionRange;if(m!==w&&w&&w.ownerDocument&&Ff(w.ownerDocument.documentElement,w)){if(A!==null&&ph(w)){if(m=A.start,c=A.end,c===void 0&&(c=m),"selectionStart"in w)w.selectionStart=m,w.selectionEnd=Math.min(c,w.value.length);else if(c=(m=w.ownerDocument||document)&&m.defaultView||window,c.getSelection){c=c.getSelection();var j=w.textContent.length,V=Math.min(A.start,j);A=A.end===void 0?V:Math.min(A.end,j),!c.extend&&V>A&&(j=A,A=V,V=j),j=Nf(w,V);var ae=Nf(w,A);j&&ae&&(c.rangeCount!==1||c.anchorNode!==j.node||c.anchorOffset!==j.offset||c.focusNode!==ae.node||c.focusOffset!==ae.offset)&&(m=m.createRange(),m.setStart(j.node,j.offset),c.removeAllRanges(),V>A?(c.addRange(m),c.extend(ae.node,ae.offset)):(m.setEnd(ae.node,ae.offset),c.addRange(m)))}}for(m=[],c=w;c=c.parentNode;)c.nodeType===1&&m.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<m.length;w++)c=m[w],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var $f=o&&"documentMode"in document&&11>=document.documentMode,Do=null,Ql=null,ys=null,ic=!1;function vs(c,m,w){var A=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;ic||Do==null||Do!==_r(A)||(A=Do,"selectionStart"in A&&ph(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),ys&&ul(ys,A)||(ys=A,A=dl(Ql,"onSelect"),0<A.length&&(m=new ol("onSelect","select",null,m,w),c.push({event:m,listeners:A}),m.target=Do)))}function _s(c,m){var w={};return w[c.toLowerCase()]=m.toLowerCase(),w["Webkit"+c]="webkit"+m,w["Moz"+c]="moz"+m,w}var qa={animationend:_s("Animation","AnimationEnd"),animationiteration:_s("Animation","AnimationIteration"),animationstart:_s("Animation","AnimationStart"),transitionend:_s("Transition","TransitionEnd")},Zi={},vd={};o&&(vd=document.createElement("div").style,"AnimationEvent"in window||(delete qa.animationend.animation,delete qa.animationiteration.animation,delete qa.animationstart.animation),"TransitionEvent"in window||delete qa.transitionend.transition);function ac(c){if(Zi[c])return Zi[c];if(!qa[c])return c;var m=qa[c],w;for(w in m)if(m.hasOwnProperty(w)&&w in vd)return Zi[c]=m[w];return c}var mh=ac("animationend"),xs=ac("animationiteration"),oc=ac("animationstart"),sc=ac("transitionend"),Jl=new Map,cl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oo(c,m){Jl.set(c,m),g(m,[c])}for(var bs=0;bs<cl.length;bs++){var ws=cl[bs],_d=ws.toLowerCase(),xd=ws[0].toUpperCase()+ws.slice(1);Oo(_d,"on"+xd)}Oo(mh,"onAnimationEnd"),Oo(xs,"onAnimationIteration"),Oo(oc,"onAnimationStart"),Oo("dblclick","onDoubleClick"),Oo("focusin","onFocus"),Oo("focusout","onBlur"),Oo(sc,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hl=new Set("cancel close invalid load scroll toggle".split(" ").concat(mr));function bd(c,m,w){var A=c.type||"unknown-event";c.currentTarget=w,ls(A,m,void 0,c),c.currentTarget=null}function wd(c,m){m=(m&4)!==0;for(var w=0;w<c.length;w++){var A=c[w],j=A.event;A=A.listeners;e:{var V=void 0;if(m)for(var ae=A.length-1;0<=ae;ae--){var Pe=A[ae],Oe=Pe.instance,et=Pe.currentTarget;if(Pe=Pe.listener,Oe!==V&&j.isPropagationStopped())break e;bd(j,Pe,et),V=Oe}else for(ae=0;ae<A.length;ae++){if(Pe=A[ae],Oe=Pe.instance,et=Pe.currentTarget,Pe=Pe.listener,Oe!==V&&j.isPropagationStopped())break e;bd(j,Pe,et),V=Oe}}}if(Tn)throw c=ft,Tn=!1,ft=null,c}function Zr(c,m){var w=m[ru];w===void 0&&(w=m[ru]=new Set);var A=c+"__bubble";w.has(A)||(Pd(m,c,2,!1),w.add(A))}function Sd(c,m,w){var A=0;m&&(A|=4),Pd(w,c,A,m)}var gh="_reactListening"+Math.random().toString(36).slice(2);function eu(c){if(!c[gh]){c[gh]=!0,a.forEach(function(w){w!=="selectionchange"&&(hl.has(w)||Sd(w,!1,c),Sd(w,!0,c))});var m=c.nodeType===9?c:c.ownerDocument;m===null||m[gh]||(m[gh]=!0,Sd("selectionchange",!1,m))}}function Pd(c,m,w,A){switch(id(m)){case 1:var j=Ii;break;case 4:j=Gl;break;default:j=Wi}w=j.bind(null,m,w,c),j=void 0,!Wr||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(j=!0),A?j!==void 0?c.addEventListener(m,w,{capture:!0,passive:j}):c.addEventListener(m,w,!0):j!==void 0?c.addEventListener(m,w,{passive:j}):c.addEventListener(m,w,!1)}function tu(c,m,w,A,j){var V=A;if((m&1)===0&&(m&2)===0&&A!==null)e:for(;;){if(A===null)return;var ae=A.tag;if(ae===3||ae===4){var Pe=A.stateNode.containerInfo;if(Pe===j||Pe.nodeType===8&&Pe.parentNode===j)break;if(ae===4)for(ae=A.return;ae!==null;){var Oe=ae.tag;if((Oe===3||Oe===4)&&(Oe=ae.stateNode.containerInfo,Oe===j||Oe.nodeType===8&&Oe.parentNode===j))return;ae=ae.return}for(;Pe!==null;){if(ae=Oa(Pe),ae===null)return;if(Oe=ae.tag,Oe===5||Oe===6){A=V=ae;continue e}Pe=Pe.parentNode}}A=A.return}Bt(function(){var et=V,mt=qe(w),xt=[];e:{var dt=Jl.get(c);if(dt!==void 0){var kt=ol,zt=c;switch(c){case"keypress":if(Cn(w)===0)break e;case"keydown":case"keyup":kt=ld;break;case"focusin":zt="focus",kt=mi;break;case"focusout":zt="blur",kt=mi;break;case"beforeblur":case"afterblur":kt=mi;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":kt=Mf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":kt=Kl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":kt=ud;break;case mh:case xs:case oc:kt=Zu;break;case sc:kt=Xu;break;case"scroll":kt=Zl;break;case"wheel":kt=Yu;break;case"copy":case"cut":case"paste":kt=sd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":kt=Ga}var Vt=(m&4)!==0,An=!Vt&&c==="scroll",Ze=Vt?dt!==null?dt+"Capture":null:dt;Vt=[];for(var je=et,Ke;je!==null;){Ke=je;var St=Ke.stateNode;if(Ke.tag===5&&St!==null&&(Ke=St,Ze!==null&&(St=Yt(je,Ze),St!=null&&Vt.push(Ss(je,St,Ke)))),An)break;je=je.return}0<Vt.length&&(dt=new kt(dt,zt,null,w,mt),xt.push({event:dt,listeners:Vt}))}}if((m&7)===0){e:{if(dt=c==="mouseover"||c==="pointerover",kt=c==="mouseout"||c==="pointerout",dt&&w!==Le&&(zt=w.relatedTarget||w.fromElement)&&(Oa(zt)||zt[On]))break e;if((kt||dt)&&(dt=mt.window===mt?mt:(dt=mt.ownerDocument)?dt.defaultView||dt.parentWindow:window,kt?(zt=w.relatedTarget||w.toElement,kt=et,zt=zt?Oa(zt):null,zt!==null&&(An=ua(zt),zt!==An||zt.tag!==5&&zt.tag!==6)&&(zt=null)):(kt=null,zt=et),kt!==zt)){if(Vt=Mf,St="onMouseLeave",Ze="onMouseEnter",je="mouse",(c==="pointerout"||c==="pointerover")&&(Vt=Ga,St="onPointerLeave",Ze="onPointerEnter",je="pointer"),An=kt==null?dt:po(kt),Ke=zt==null?dt:po(zt),dt=new Vt(St,je+"leave",kt,w,mt),dt.target=An,dt.relatedTarget=Ke,St=null,Oa(mt)===et&&(Vt=new Vt(Ze,je+"enter",zt,w,mt),Vt.target=Ke,Vt.relatedTarget=An,St=Vt),An=St,kt&&zt)t:{for(Vt=kt,Ze=zt,je=0,Ke=Vt;Ke;Ke=ho(Ke))je++;for(Ke=0,St=Ze;St;St=ho(St))Ke++;for(;0<je-Ke;)Vt=ho(Vt),je--;for(;0<Ke-je;)Ze=ho(Ze),Ke--;for(;je--;){if(Vt===Ze||Ze!==null&&Vt===Ze.alternate)break t;Vt=ho(Vt),Ze=ho(Ze)}Vt=null}else Vt=null;kt!==null&&lc(xt,dt,kt,Vt,!1),zt!==null&&An!==null&&lc(xt,An,zt,Vt,!0)}}e:{if(dt=et?po(et):window,kt=dt.nodeName&&dt.nodeName.toLowerCase(),kt==="select"||kt==="input"&&dt.type==="file")var Wt=zf;else if(dh(dt))if(fd)Wt=Lf;else{Wt=md;var nr=pd}else(kt=dt.nodeName)&&kt.toLowerCase()==="input"&&(dt.type==="checkbox"||dt.type==="radio")&&(Wt=gd);if(Wt&&(Wt=Wt(c,et))){ll(xt,Wt,w,mt);break e}nr&&nr(c,dt,et),c==="focusout"&&(nr=dt._wrapperState)&&nr.controlled&&dt.type==="number"&&fi(dt,"number",dt.value)}switch(nr=et?po(et):window,c){case"focusin":(dh(nr)||nr.contentEditable==="true")&&(Do=nr,Ql=et,ys=null);break;case"focusout":ys=Ql=Do=null;break;case"mousedown":ic=!0;break;case"contextmenu":case"mouseup":case"dragend":ic=!1,vs(xt,w,mt);break;case"selectionchange":if($f)break;case"keydown":case"keyup":vs(xt,w,mt)}var ir;if(ps)e:{switch(c){case"compositionstart":var ar="onCompositionStart";break e;case"compositionend":ar="onCompositionEnd";break e;case"compositionupdate":ar="onCompositionUpdate";break e}ar=void 0}else ms?cd(c,w)&&(ar="onCompositionEnd"):c==="keydown"&&w.keyCode===229&&(ar="onCompositionStart");ar&&(Of&&w.locale!=="ko"&&(ms||ar!=="onCompositionStart"?ar==="onCompositionEnd"&&ms&&(ir=ka()):(Ao=mt,al="value"in Ao?Ao.value:Ao.textContent,ms=!0)),nr=dl(et,ar),0<nr.length&&(ar=new Af(ar,c,null,w,mt),xt.push({event:ar,listeners:nr}),ir?ar.data=ir:(ir=hd(w),ir!==null&&(ar.data=ir)))),(ir=Df?dd(c,w):sl(c,w))&&(et=dl(et,"onBeforeInput"),0<et.length&&(mt=new Af("onBeforeInput","beforeinput",null,w,mt),xt.push({event:mt,listeners:et}),mt.data=ir))}wd(xt,m)})}function Ss(c,m,w){return{instance:c,listener:m,currentTarget:w}}function dl(c,m){for(var w=m+"Capture",A=[];c!==null;){var j=c,V=j.stateNode;j.tag===5&&V!==null&&(j=V,V=Yt(c,w),V!=null&&A.unshift(Ss(c,V,j)),V=Yt(c,m),V!=null&&A.push(Ss(c,V,j))),c=c.return}return A}function ho(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function lc(c,m,w,A,j){for(var V=m._reactName,ae=[];w!==null&&w!==A;){var Pe=w,Oe=Pe.alternate,et=Pe.stateNode;if(Oe!==null&&Oe===A)break;Pe.tag===5&&et!==null&&(Pe=et,j?(Oe=Yt(w,V),Oe!=null&&ae.unshift(Ss(w,Oe,Pe))):j||(Oe=Yt(w,V),Oe!=null&&ae.push(Ss(w,Oe,Pe)))),w=w.return}ae.length!==0&&c.push({event:m,listeners:ae})}var Td=/\r\n?/g,uc=/\u0000|\uFFFD/g;function fl(c){return(typeof c=="string"?c:""+c).replace(Td,`
`).replace(uc,"")}function Ro(c,m,w){if(m=fl(m),fl(c)!==m&&w)throw Error(n(425))}function Ps(){}var cc=null,fo=null;function Cd(c,m){return c==="textarea"||c==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var yh=typeof setTimeout=="function"?setTimeout:void 0,vh=typeof clearTimeout=="function"?clearTimeout:void 0,_h=typeof Promise=="function"?Promise:void 0,Vf=typeof queueMicrotask=="function"?queueMicrotask:typeof _h<"u"?function(c){return _h.resolve(null).then(c).catch(Uf)}:yh;function Uf(c){setTimeout(function(){throw c})}function pl(c,m){var w=m,A=0;do{var j=w.nextSibling;if(c.removeChild(w),j&&j.nodeType===8)if(w=j.data,w==="/$"){if(A===0){c.removeChild(j),Ua(m);return}A--}else w!=="$"&&w!=="$?"&&w!=="$!"||A++;w=j}while(w);Ua(m)}function Wa(c){for(;c!=null;c=c.nextSibling){var m=c.nodeType;if(m===1||m===3)break;if(m===8){if(m=c.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return c}function hc(c){c=c.previousSibling;for(var m=0;c;){if(c.nodeType===8){var w=c.data;if(w==="$"||w==="$!"||w==="$?"){if(m===0)return c;m--}else w==="/$"&&m++}c=c.previousSibling}return null}var ml=Math.random().toString(36).slice(2),jr="__reactFiber$"+ml,Da="__reactProps$"+ml,On="__reactContainer$"+ml,ru="__reactEvents$"+ml,dc="__reactListeners$"+ml,nu="__reactHandles$"+ml;function Oa(c){var m=c[jr];if(m)return m;for(var w=c.parentNode;w;){if(m=w[On]||w[jr]){if(w=m.alternate,m.child!==null||w!==null&&w.child!==null)for(c=hc(c);c!==null;){if(w=c[jr])return w;c=hc(c)}return m}c=w,w=c.parentNode}return null}function gl(c){return c=c[jr]||c[On],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function po(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(n(33))}function iu(c){return c[Da]||null}var xh=[],yl=-1;function da(c){return{current:c}}function Ur(c){0>yl||(c.current=xh[yl],xh[yl]=null,yl--)}function Cr(c,m){yl++,xh[yl]=c.current,c.current=m}var Hn={},Kn=da(Hn),Di=da(!1),Ts=Hn;function Za(c,m){var w=c.type.contextTypes;if(!w)return Hn;var A=c.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===m)return A.__reactInternalMemoizedMaskedChildContext;var j={},V;for(V in w)j[V]=m[V];return A&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=m,c.__reactInternalMemoizedMaskedChildContext=j),j}function gi(c){return c=c.childContextTypes,c!=null}function vl(){Ur(Di),Ur(Kn)}function Ed(c,m,w){if(Kn.current!==Hn)throw Error(n(168));Cr(Kn,m),Cr(Di,w)}function fc(c,m,w){var A=c.stateNode;if(m=m.childContextTypes,typeof A.getChildContext!="function")return w;A=A.getChildContext();for(var j in A)if(!(j in m))throw Error(n(108,zr(c)||"Unknown",j));return wt({},w,A)}function _l(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Hn,Ts=Kn.current,Cr(Kn,c),Cr(Di,Di.current),!0}function xl(c,m,w){var A=c.stateNode;if(!A)throw Error(n(169));w?(c=fc(c,m,Ts),A.__reactInternalMemoizedMergedChildContext=c,Ur(Di),Ur(Kn),Cr(Kn,c)):Ur(Di),Cr(Di,w)}var Rn=null,Hi=!1,bh=!1;function yi(c){Rn===null?Rn=[c]:Rn.push(c)}function au(c){Hi=!0,yi(c)}function Cs(){if(!bh&&Rn!==null){bh=!0;var c=0,m=Lr;try{var w=Rn;for(Lr=1;c<w.length;c++){var A=w[c];do A=A(!0);while(A!==null)}Rn=null,Hi=!1}catch(j){throw Rn!==null&&(Rn=Rn.slice(c+1)),Ba(tl,Cs),j}finally{Lr=m,bh=!1}}return null}var zo=[],ou=0,su=null,Es=0,si=[],En=0,Tt=null,Ha=1,fa="";function Lo(c,m){zo[ou++]=Es,zo[ou++]=su,su=c,Es=m}function lu(c,m,w){si[En++]=Ha,si[En++]=fa,si[En++]=Tt,Tt=c;var A=Ha;c=fa;var j=32-ii(A)-1;A&=~(1<<j),w+=1;var V=32-ii(m)+j;if(30<V){var ae=j-j%5;V=(A&(1<<ae)-1).toString(32),A>>=ae,j-=ae,Ha=1<<32-ii(m)+j|w<<j|A,fa=V+c}else Ha=1<<V|w<<j|A,fa=c}function Ms(c){c.return!==null&&(Lo(c,1),lu(c,1,0))}function pc(c){for(;c===su;)su=zo[--ou],zo[ou]=null,Es=zo[--ou],zo[ou]=null;for(;c===Tt;)Tt=si[--En],si[En]=null,fa=si[--En],si[En]=null,Ha=si[--En],si[En]=null}var rr=null,Oi=null,on=!1,Ki=null;function Gf(c,m){var w=xo(5,null,null,0);w.elementType="DELETED",w.stateNode=m,w.return=c,m=c.deletions,m===null?(c.deletions=[w],c.flags|=16):m.push(w)}function qf(c,m){switch(c.tag){case 5:var w=c.type;return m=m.nodeType!==1||w.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(c.stateNode=m,rr=c,Oi=Wa(m.firstChild),!0):!1;case 6:return m=c.pendingProps===""||m.nodeType!==3?null:m,m!==null?(c.stateNode=m,rr=c,Oi=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(w=Tt!==null?{id:Ha,overflow:fa}:null,c.memoizedState={dehydrated:m,treeContext:w,retryLane:1073741824},w=xo(18,null,null,0),w.stateNode=m,w.return=c,c.child=w,rr=c,Oi=null,!0):!1;default:return!1}}function mc(c){return(c.mode&1)!==0&&(c.flags&128)===0}function uu(c){if(on){var m=Oi;if(m){var w=m;if(!qf(c,m)){if(mc(c))throw Error(n(418));m=Wa(w.nextSibling);var A=rr;m&&qf(c,m)?Gf(A,w):(c.flags=c.flags&-4097|2,on=!1,rr=c)}}else{if(mc(c))throw Error(n(418));c.flags=c.flags&-4097|2,on=!1,rr=c}}}function wh(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;rr=c}function gc(c){if(c!==rr)return!1;if(!on)return wh(c),on=!0,!1;var m;if((m=c.tag!==3)&&!(m=c.tag!==5)&&(m=c.type,m=m!=="head"&&m!=="body"&&!Cd(c.type,c.memoizedProps)),m&&(m=Oi)){if(mc(c))throw cu(),Error(n(418));for(;m;)Gf(c,m),m=Wa(m.nextSibling)}if(wh(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(n(317));e:{for(c=c.nextSibling,m=0;c;){if(c.nodeType===8){var w=c.data;if(w==="/$"){if(m===0){Oi=Wa(c.nextSibling);break e}m--}else w!=="$"&&w!=="$!"&&w!=="$?"||m++}c=c.nextSibling}Oi=null}}else Oi=rr?Wa(c.stateNode.nextSibling):null;return!0}function cu(){for(var c=Oi;c;)c=Wa(c.nextSibling)}function hu(){Oi=rr=null,on=!1}function yc(c){Ki===null?Ki=[c]:Ki.push(c)}var As=Ce.ReactCurrentBatchConfig;function Hr(c,m,w){if(c=w.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(n(309));var A=w.stateNode}if(!A)throw Error(n(147,c));var j=A,V=""+c;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===V?m.ref:(m=function(ae){var Pe=j.refs;ae===null?delete Pe[V]:Pe[V]=ae},m._stringRef=V,m)}if(typeof c!="string")throw Error(n(284));if(!w._owner)throw Error(n(290,c))}return c}function Is(c,m){throw c=Object.prototype.toString.call(m),Error(n(31,c==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":c))}function vc(c){var m=c._init;return m(c._payload)}function Sh(c){function m(Ze,je){if(c){var Ke=Ze.deletions;Ke===null?(Ze.deletions=[je],Ze.flags|=16):Ke.push(je)}}function w(Ze,je){if(!c)return null;for(;je!==null;)m(Ze,je),je=je.sibling;return null}function A(Ze,je){for(Ze=new Map;je!==null;)je.key!==null?Ze.set(je.key,je):Ze.set(je.index,je),je=je.sibling;return Ze}function j(Ze,je){return Ze=Cl(Ze,je),Ze.index=0,Ze.sibling=null,Ze}function V(Ze,je,Ke){return Ze.index=Ke,c?(Ke=Ze.alternate,Ke!==null?(Ke=Ke.index,Ke<je?(Ze.flags|=2,je):Ke):(Ze.flags|=2,je)):(Ze.flags|=1048576,je)}function ae(Ze){return c&&Ze.alternate===null&&(Ze.flags|=2),Ze}function Pe(Ze,je,Ke,St){return je===null||je.tag!==6?(je=lp(Ke,Ze.mode,St),je.return=Ze,je):(je=j(je,Ke),je.return=Ze,je)}function Oe(Ze,je,Ke,St){var Wt=Ke.type;return Wt===Ne?mt(Ze,je,Ke.props.children,St,Ke.key):je!==null&&(je.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===vr&&vc(Wt)===je.type)?(St=j(je,Ke.props),St.ref=Hr(Ze,je,Ke),St.return=Ze,St):(St=sp(Ke.type,Ke.key,Ke.props,null,Ze.mode,St),St.ref=Hr(Ze,je,Ke),St.return=Ze,St)}function et(Ze,je,Ke,St){return je===null||je.tag!==4||je.stateNode.containerInfo!==Ke.containerInfo||je.stateNode.implementation!==Ke.implementation?(je=Bd(Ke,Ze.mode,St),je.return=Ze,je):(je=j(je,Ke.children||[]),je.return=Ze,je)}function mt(Ze,je,Ke,St,Wt){return je===null||je.tag!==7?(je=zc(Ke,Ze.mode,St,Wt),je.return=Ze,je):(je=j(je,Ke),je.return=Ze,je)}function xt(Ze,je,Ke){if(typeof je=="string"&&je!==""||typeof je=="number")return je=lp(""+je,Ze.mode,Ke),je.return=Ze,je;if(typeof je=="object"&&je!==null){switch(je.$$typeof){case be:return Ke=sp(je.type,je.key,je.props,null,Ze.mode,Ke),Ke.ref=Hr(Ze,null,je),Ke.return=Ze,Ke;case Ae:return je=Bd(je,Ze.mode,Ke),je.return=Ze,je;case vr:var St=je._init;return xt(Ze,St(je._payload),Ke)}if(Fa(je)||Ct(je))return je=zc(je,Ze.mode,Ke,null),je.return=Ze,je;Is(Ze,je)}return null}function dt(Ze,je,Ke,St){var Wt=je!==null?je.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return Wt!==null?null:Pe(Ze,je,""+Ke,St);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case be:return Ke.key===Wt?Oe(Ze,je,Ke,St):null;case Ae:return Ke.key===Wt?et(Ze,je,Ke,St):null;case vr:return Wt=Ke._init,dt(Ze,je,Wt(Ke._payload),St)}if(Fa(Ke)||Ct(Ke))return Wt!==null?null:mt(Ze,je,Ke,St,null);Is(Ze,Ke)}return null}function kt(Ze,je,Ke,St,Wt){if(typeof St=="string"&&St!==""||typeof St=="number")return Ze=Ze.get(Ke)||null,Pe(je,Ze,""+St,Wt);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case be:return Ze=Ze.get(St.key===null?Ke:St.key)||null,Oe(je,Ze,St,Wt);case Ae:return Ze=Ze.get(St.key===null?Ke:St.key)||null,et(je,Ze,St,Wt);case vr:var nr=St._init;return kt(Ze,je,Ke,nr(St._payload),Wt)}if(Fa(St)||Ct(St))return Ze=Ze.get(Ke)||null,mt(je,Ze,St,Wt,null);Is(je,St)}return null}function zt(Ze,je,Ke,St){for(var Wt=null,nr=null,ir=je,ar=je=0,li=null;ir!==null&&ar<Ke.length;ar++){ir.index>ar?(li=ir,ir=null):li=ir.sibling;var Vr=dt(Ze,ir,Ke[ar],St);if(Vr===null){ir===null&&(ir=li);break}c&&ir&&Vr.alternate===null&&m(Ze,ir),je=V(Vr,je,ar),nr===null?Wt=Vr:nr.sibling=Vr,nr=Vr,ir=li}if(ar===Ke.length)return w(Ze,ir),on&&Lo(Ze,ar),Wt;if(ir===null){for(;ar<Ke.length;ar++)ir=xt(Ze,Ke[ar],St),ir!==null&&(je=V(ir,je,ar),nr===null?Wt=ir:nr.sibling=ir,nr=ir);return on&&Lo(Ze,ar),Wt}for(ir=A(Ze,ir);ar<Ke.length;ar++)li=kt(ir,Ze,ar,Ke[ar],St),li!==null&&(c&&li.alternate!==null&&ir.delete(li.key===null?ar:li.key),je=V(li,je,ar),nr===null?Wt=li:nr.sibling=li,nr=li);return c&&ir.forEach(function(js){return m(Ze,js)}),on&&Lo(Ze,ar),Wt}function Vt(Ze,je,Ke,St){var Wt=Ct(Ke);if(typeof Wt!="function")throw Error(n(150));if(Ke=Wt.call(Ke),Ke==null)throw Error(n(151));for(var nr=Wt=null,ir=je,ar=je=0,li=null,Vr=Ke.next();ir!==null&&!Vr.done;ar++,Vr=Ke.next()){ir.index>ar?(li=ir,ir=null):li=ir.sibling;var js=dt(Ze,ir,Vr.value,St);if(js===null){ir===null&&(ir=li);break}c&&ir&&js.alternate===null&&m(Ze,ir),je=V(js,je,ar),nr===null?Wt=js:nr.sibling=js,nr=js,ir=li}if(Vr.done)return w(Ze,ir),on&&Lo(Ze,ar),Wt;if(ir===null){for(;!Vr.done;ar++,Vr=Ke.next())Vr=xt(Ze,Vr.value,St),Vr!==null&&(je=V(Vr,je,ar),nr===null?Wt=Vr:nr.sibling=Vr,nr=Vr);return on&&Lo(Ze,ar),Wt}for(ir=A(Ze,ir);!Vr.done;ar++,Vr=Ke.next())Vr=kt(ir,Ze,ar,Vr.value,St),Vr!==null&&(c&&Vr.alternate!==null&&ir.delete(Vr.key===null?ar:Vr.key),je=V(Vr,je,ar),nr===null?Wt=Vr:nr.sibling=Vr,nr=Vr);return c&&ir.forEach(function(dy){return m(Ze,dy)}),on&&Lo(Ze,ar),Wt}function An(Ze,je,Ke,St){if(typeof Ke=="object"&&Ke!==null&&Ke.type===Ne&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case be:e:{for(var Wt=Ke.key,nr=je;nr!==null;){if(nr.key===Wt){if(Wt=Ke.type,Wt===Ne){if(nr.tag===7){w(Ze,nr.sibling),je=j(nr,Ke.props.children),je.return=Ze,Ze=je;break e}}else if(nr.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===vr&&vc(Wt)===nr.type){w(Ze,nr.sibling),je=j(nr,Ke.props),je.ref=Hr(Ze,nr,Ke),je.return=Ze,Ze=je;break e}w(Ze,nr);break}else m(Ze,nr);nr=nr.sibling}Ke.type===Ne?(je=zc(Ke.props.children,Ze.mode,St,Ke.key),je.return=Ze,Ze=je):(St=sp(Ke.type,Ke.key,Ke.props,null,Ze.mode,St),St.ref=Hr(Ze,je,Ke),St.return=Ze,Ze=St)}return ae(Ze);case Ae:e:{for(nr=Ke.key;je!==null;){if(je.key===nr)if(je.tag===4&&je.stateNode.containerInfo===Ke.containerInfo&&je.stateNode.implementation===Ke.implementation){w(Ze,je.sibling),je=j(je,Ke.children||[]),je.return=Ze,Ze=je;break e}else{w(Ze,je);break}else m(Ze,je);je=je.sibling}je=Bd(Ke,Ze.mode,St),je.return=Ze,Ze=je}return ae(Ze);case vr:return nr=Ke._init,An(Ze,je,nr(Ke._payload),St)}if(Fa(Ke))return zt(Ze,je,Ke,St);if(Ct(Ke))return Vt(Ze,je,Ke,St);Is(Ze,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"?(Ke=""+Ke,je!==null&&je.tag===6?(w(Ze,je.sibling),je=j(je,Ke),je.return=Ze,Ze=je):(w(Ze,je),je=lp(Ke,Ze.mode,St),je.return=Ze,Ze=je),ae(Ze)):w(Ze,je)}return An}var bl=Sh(!0),Md=Sh(!1),Ph=da(null),pa=null,jo=null,Dt=null;function Gt(){Dt=jo=pa=null}function du(c){var m=Ph.current;Ur(Ph),c._currentValue=m}function _c(c,m,w){for(;c!==null;){var A=c.alternate;if((c.childLanes&m)!==m?(c.childLanes|=m,A!==null&&(A.childLanes|=m)):A!==null&&(A.childLanes&m)!==m&&(A.childLanes|=m),c===w)break;c=c.return}}function mo(c,m){pa=c,Dt=jo=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&m)!==0&&(va=!0),c.firstContext=null)}function tn(c){var m=c._currentValue;if(Dt!==c)if(c={context:c,memoizedValue:m,next:null},jo===null){if(pa===null)throw Error(n(308));jo=c,pa.dependencies={lanes:0,firstContext:c}}else jo=jo.next=c;return m}var ks=null;function $n(c){ks===null?ks=[c]:ks.push(c)}function Ad(c,m,w,A){var j=m.interleaved;return j===null?(w.next=w,$n(m)):(w.next=j.next,j.next=w),m.interleaved=w,Ri(c,A)}function Ri(c,m){c.lanes|=m;var w=c.alternate;for(w!==null&&(w.lanes|=m),w=c,c=c.return;c!==null;)c.childLanes|=m,w=c.alternate,w!==null&&(w.childLanes|=m),w=c,c=c.return;return w.tag===3?w.stateNode:null}var Br=!1;function sn(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Id(c,m){c=c.updateQueue,m.updateQueue===c&&(m.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function vi(c,m){return{eventTime:c,lane:m,tag:0,payload:null,callback:null,next:null}}function zi(c,m,w){var A=c.updateQueue;if(A===null)return null;if(A=A.shared,(Fr&2)!==0){var j=A.pending;return j===null?m.next=m:(m.next=j.next,j.next=m),A.pending=m,Ri(c,w)}return j=A.interleaved,j===null?(m.next=m,$n(A)):(m.next=j.next,j.next=m),A.interleaved=m,Ri(c,w)}function fu(c,m,w){if(m=m.updateQueue,m!==null&&(m=m.shared,(w&4194240)!==0)){var A=m.lanes;A&=c.pendingLanes,w|=A,m.lanes=w,Ul(c,w)}}function xc(c,m){var w=c.updateQueue,A=c.alternate;if(A!==null&&(A=A.updateQueue,w===A)){var j=null,V=null;if(w=w.firstBaseUpdate,w!==null){do{var ae={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};V===null?j=V=ae:V=V.next=ae,w=w.next}while(w!==null);V===null?j=V=m:V=V.next=m}else j=V=m;w={baseState:A.baseState,firstBaseUpdate:j,lastBaseUpdate:V,shared:A.shared,effects:A.effects},c.updateQueue=w;return}c=w.lastBaseUpdate,c===null?w.firstBaseUpdate=m:c.next=m,w.lastBaseUpdate=m}function go(c,m,w,A){var j=c.updateQueue;Br=!1;var V=j.firstBaseUpdate,ae=j.lastBaseUpdate,Pe=j.shared.pending;if(Pe!==null){j.shared.pending=null;var Oe=Pe,et=Oe.next;Oe.next=null,ae===null?V=et:ae.next=et,ae=Oe;var mt=c.alternate;mt!==null&&(mt=mt.updateQueue,Pe=mt.lastBaseUpdate,Pe!==ae&&(Pe===null?mt.firstBaseUpdate=et:Pe.next=et,mt.lastBaseUpdate=Oe))}if(V!==null){var xt=j.baseState;ae=0,mt=et=Oe=null,Pe=V;do{var dt=Pe.lane,kt=Pe.eventTime;if((A&dt)===dt){mt!==null&&(mt=mt.next={eventTime:kt,lane:0,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null});e:{var zt=c,Vt=Pe;switch(dt=m,kt=w,Vt.tag){case 1:if(zt=Vt.payload,typeof zt=="function"){xt=zt.call(kt,xt,dt);break e}xt=zt;break e;case 3:zt.flags=zt.flags&-65537|128;case 0:if(zt=Vt.payload,dt=typeof zt=="function"?zt.call(kt,xt,dt):zt,dt==null)break e;xt=wt({},xt,dt);break e;case 2:Br=!0}}Pe.callback!==null&&Pe.lane!==0&&(c.flags|=64,dt=j.effects,dt===null?j.effects=[Pe]:dt.push(Pe))}else kt={eventTime:kt,lane:dt,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null},mt===null?(et=mt=kt,Oe=xt):mt=mt.next=kt,ae|=dt;if(Pe=Pe.next,Pe===null){if(Pe=j.shared.pending,Pe===null)break;dt=Pe,Pe=dt.next,dt.next=null,j.lastBaseUpdate=dt,j.shared.pending=null}}while(!0);if(mt===null&&(Oe=xt),j.baseState=Oe,j.firstBaseUpdate=et,j.lastBaseUpdate=mt,m=j.shared.interleaved,m!==null){j=m;do ae|=j.lane,j=j.next;while(j!==m)}else V===null&&(j.shared.lanes=0);Su|=ae,c.lanes=ae,c.memoizedState=xt}}function pu(c,m,w){if(c=m.effects,m.effects=null,c!==null)for(m=0;m<c.length;m++){var A=c[m],j=A.callback;if(j!==null){if(A.callback=null,A=w,typeof j!="function")throw Error(n(191,j));j.call(A)}}}var wl={},ma=da(wl),Sl=da(wl),_=da(wl);function r(c){if(c===wl)throw Error(n(174));return c}function s(c,m){switch(Cr(_,m),Cr(Sl,c),Cr(ma,wl),c=m.nodeType,c){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:Ei(null,"");break;default:c=c===8?m.parentNode:m,m=c.namespaceURI||null,c=c.tagName,m=Ei(m,c)}Ur(ma),Cr(ma,m)}function f(){Ur(ma),Ur(Sl),Ur(_)}function y(c){r(_.current);var m=r(ma.current),w=Ei(m,c.type);m!==w&&(Cr(Sl,c),Cr(ma,w))}function x(c){Sl.current===c&&(Ur(ma),Ur(Sl))}var T=da(0);function k(c){for(var m=c;m!==null;){if(m.tag===13){var w=m.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var O=[];function N(){for(var c=0;c<O.length;c++)O[c]._workInProgressVersionPrimary=null;O.length=0}var $=Ce.ReactCurrentDispatcher,W=Ce.ReactCurrentBatchConfig,q=0,K=null,re=null,ue=null,de=!1,pe=!1,me=0,we=0;function ye(){throw Error(n(321))}function Te(c,m){if(m===null)return!1;for(var w=0;w<m.length&&w<c.length;w++)if(!oi(c[w],m[w]))return!1;return!0}function Ee(c,m,w,A,j,V){if(q=V,K=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,$.current=c===null||c.memoizedState===null?Un:Wf,c=w(A,j),pe){V=0;do{if(pe=!1,me=0,25<=V)throw Error(n(301));V+=1,ue=re=null,m.updateQueue=null,$.current=om,c=w(A,j)}while(pe)}if($.current=Qn,m=re!==null&&re.next!==null,q=0,ue=re=K=null,de=!1,m)throw Error(n(300));return c}function ve(){var c=me!==0;return me=0,c}function De(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ue===null?K.memoizedState=ue=c:ue=ue.next=c,ue}function Ue(){if(re===null){var c=K.alternate;c=c!==null?c.memoizedState:null}else c=re.next;var m=ue===null?K.memoizedState:ue.next;if(m!==null)ue=m,re=c;else{if(c===null)throw Error(n(310));re=c,c={memoizedState:re.memoizedState,baseState:re.baseState,baseQueue:re.baseQueue,queue:re.queue,next:null},ue===null?K.memoizedState=ue=c:ue=ue.next=c}return ue}function Ve(c,m){return typeof m=="function"?m(c):m}function Ge(c){var m=Ue(),w=m.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=c;var A=re,j=A.baseQueue,V=w.pending;if(V!==null){if(j!==null){var ae=j.next;j.next=V.next,V.next=ae}A.baseQueue=j=V,w.pending=null}if(j!==null){V=j.next,A=A.baseState;var Pe=ae=null,Oe=null,et=V;do{var mt=et.lane;if((q&mt)===mt)Oe!==null&&(Oe=Oe.next={lane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),A=et.hasEagerState?et.eagerState:c(A,et.action);else{var xt={lane:mt,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null};Oe===null?(Pe=Oe=xt,ae=A):Oe=Oe.next=xt,K.lanes|=mt,Su|=mt}et=et.next}while(et!==null&&et!==V);Oe===null?ae=A:Oe.next=Pe,oi(A,m.memoizedState)||(va=!0),m.memoizedState=A,m.baseState=ae,m.baseQueue=Oe,w.lastRenderedState=A}if(c=w.interleaved,c!==null){j=c;do V=j.lane,K.lanes|=V,Su|=V,j=j.next;while(j!==c)}else j===null&&(w.lanes=0);return[m.memoizedState,w.dispatch]}function He(c){var m=Ue(),w=m.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=c;var A=w.dispatch,j=w.pending,V=m.memoizedState;if(j!==null){w.pending=null;var ae=j=j.next;do V=c(V,ae.action),ae=ae.next;while(ae!==j);oi(V,m.memoizedState)||(va=!0),m.memoizedState=V,m.baseQueue===null&&(m.baseState=V),w.lastRenderedState=V}return[V,A]}function _t(){}function gt(c,m){var w=K,A=Ue(),j=m(),V=!oi(A.memoizedState,j);if(V&&(A.memoizedState=j,va=!0),A=A.queue,Er(dr.bind(null,w,A,c),[c]),A.getSnapshot!==m||V||ue!==null&&ue.memoizedState.tag&1){if(w.flags|=2048,Xr(9,Ot.bind(null,w,A,j,m),void 0,null),zn===null)throw Error(n(349));(q&30)!==0||it(w,m,j)}return j}function it(c,m,w){c.flags|=16384,c={getSnapshot:m,value:w},m=K.updateQueue,m===null?(m={lastEffect:null,stores:null},K.updateQueue=m,m.stores=[c]):(w=m.stores,w===null?m.stores=[c]:w.push(c))}function Ot(c,m,w,A){m.value=w,m.getSnapshot=A,Or(m)&&ln(c)}function dr(c,m,w){return w(function(){Or(m)&&ln(c)})}function Or(c){var m=c.getSnapshot;c=c.value;try{var w=m();return!oi(c,w)}catch{return!0}}function ln(c){var m=Ri(c,1);m!==null&&Ra(m,c,1,-1)}function Gr(c){var m=De();return typeof c=="function"&&(c=c()),m.memoizedState=m.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ve,lastRenderedState:c},m.queue=c,c=c.dispatch=Ds.bind(null,K,c),[m.memoizedState,c]}function Xr(c,m,w,A){return c={tag:c,create:m,destroy:w,deps:A,next:null},m=K.updateQueue,m===null?(m={lastEffect:null,stores:null},K.updateQueue=m,m.lastEffect=c.next=c):(w=m.lastEffect,w===null?m.lastEffect=c.next=c:(A=w.next,w.next=c,c.next=A,m.lastEffect=c)),c}function Kr(){return Ue().memoizedState}function Nr(c,m,w,A){var j=De();K.flags|=c,j.memoizedState=Xr(1|m,w,void 0,A===void 0?null:A)}function $r(c,m,w,A){var j=Ue();A=A===void 0?null:A;var V=void 0;if(re!==null){var ae=re.memoizedState;if(V=ae.destroy,A!==null&&Te(A,ae.deps)){j.memoizedState=Xr(m,w,V,A);return}}K.flags|=c,j.memoizedState=Xr(1|m,w,V,A)}function Xn(c,m){return Nr(8390656,8,c,m)}function Er(c,m){return $r(2048,8,c,m)}function Vn(c,m){return $r(4,2,c,m)}function Yn(c,m){return $r(4,4,c,m)}function No(c,m){if(typeof m=="function")return c=c(),m(c),function(){m(null)};if(m!=null)return c=c(),m.current=c,function(){m.current=null}}function Fo(c,m,w){return w=w!=null?w.concat([c]):null,$r(4,4,No.bind(null,m,c),w)}function yo(){}function Ka(c,m){var w=Ue();m=m===void 0?null:m;var A=w.memoizedState;return A!==null&&m!==null&&Te(m,A[1])?A[0]:(w.memoizedState=[c,m],c)}function mu(c,m){var w=Ue();m=m===void 0?null:m;var A=w.memoizedState;return A!==null&&m!==null&&Te(m,A[1])?A[0]:(c=c(),w.memoizedState=[c,m],c)}function gu(c,m,w){return(q&21)===0?(c.baseState&&(c.baseState=!1,va=!0),c.memoizedState=w):(oi(w,m)||(w=rl(),K.lanes|=w,Su|=w,c.baseState=!0),m)}function yu(c,m){var w=Lr;Lr=w!==0&&4>w?w:4,c(!0);var A=W.transition;W.transition={};try{c(!1),m()}finally{Lr=w,W.transition=A}}function Li(){return Ue().memoizedState}function Xa(c,m,w){var A=Tl(c);if(w={lane:A,action:w,hasEagerState:!1,eagerState:null,next:null},Os(c))mn(m,w);else if(w=Ad(c,m,w,A),w!==null){var j=Ji();Ra(w,c,A,j),en(w,m,A)}}function Ds(c,m,w){var A=Tl(c),j={lane:A,action:w,hasEagerState:!1,eagerState:null,next:null};if(Os(c))mn(m,j);else{var V=c.alternate;if(c.lanes===0&&(V===null||V.lanes===0)&&(V=m.lastRenderedReducer,V!==null))try{var ae=m.lastRenderedState,Pe=V(ae,w);if(j.hasEagerState=!0,j.eagerState=Pe,oi(Pe,ae)){var Oe=m.interleaved;Oe===null?(j.next=j,$n(m)):(j.next=Oe.next,Oe.next=j),m.interleaved=j;return}}catch{}finally{}w=Ad(c,m,j,A),w!==null&&(j=Ji(),Ra(w,c,A,j),en(w,m,A))}}function Os(c){var m=c.alternate;return c===K||m!==null&&m===K}function mn(c,m){pe=de=!0;var w=c.pending;w===null?m.next=m:(m.next=w.next,w.next=m),c.pending=m}function en(c,m,w){if((w&4194240)!==0){var A=m.lanes;A&=c.pendingLanes,w|=A,m.lanes=w,Ul(c,w)}}var Qn={readContext:tn,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useInsertionEffect:ye,useLayoutEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useMutableSource:ye,useSyncExternalStore:ye,useId:ye,unstable_isNewReconciler:!1},Un={readContext:tn,useCallback:function(c,m){return De().memoizedState=[c,m===void 0?null:m],c},useContext:tn,useEffect:Xn,useImperativeHandle:function(c,m,w){return w=w!=null?w.concat([c]):null,Nr(4194308,4,No.bind(null,m,c),w)},useLayoutEffect:function(c,m){return Nr(4194308,4,c,m)},useInsertionEffect:function(c,m){return Nr(4,2,c,m)},useMemo:function(c,m){var w=De();return m=m===void 0?null:m,c=c(),w.memoizedState=[c,m],c},useReducer:function(c,m,w){var A=De();return m=w!==void 0?w(m):m,A.memoizedState=A.baseState=m,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:m},A.queue=c,c=c.dispatch=Xa.bind(null,K,c),[A.memoizedState,c]},useRef:function(c){var m=De();return c={current:c},m.memoizedState=c},useState:Gr,useDebugValue:yo,useDeferredValue:function(c){return De().memoizedState=c},useTransition:function(){var c=Gr(!1),m=c[0];return c=yu.bind(null,c[1]),De().memoizedState=c,[m,c]},useMutableSource:function(){},useSyncExternalStore:function(c,m,w){var A=K,j=De();if(on){if(w===void 0)throw Error(n(407));w=w()}else{if(w=m(),zn===null)throw Error(n(349));(q&30)!==0||it(A,m,w)}j.memoizedState=w;var V={value:w,getSnapshot:m};return j.queue=V,Xn(dr.bind(null,A,V,c),[c]),A.flags|=2048,Xr(9,Ot.bind(null,A,V,w,m),void 0,null),w},useId:function(){var c=De(),m=zn.identifierPrefix;if(on){var w=fa,A=Ha;w=(A&~(1<<32-ii(A)-1)).toString(32)+w,m=":"+m+"R"+w,w=me++,0<w&&(m+="H"+w.toString(32)),m+=":"}else w=we++,m=":"+m+"r"+w.toString(32)+":";return c.memoizedState=m},unstable_isNewReconciler:!1},Wf={readContext:tn,useCallback:Ka,useContext:tn,useEffect:Er,useImperativeHandle:Fo,useInsertionEffect:Vn,useLayoutEffect:Yn,useMemo:mu,useReducer:Ge,useRef:Kr,useState:function(){return Ge(Ve)},useDebugValue:yo,useDeferredValue:function(c){var m=Ue();return gu(m,re.memoizedState,c)},useTransition:function(){var c=Ge(Ve)[0],m=Ue().memoizedState;return[c,m]},useMutableSource:_t,useSyncExternalStore:gt,useId:Li,unstable_isNewReconciler:!1},om={readContext:tn,useCallback:Ka,useContext:tn,useEffect:Er,useImperativeHandle:Fo,useInsertionEffect:Vn,useLayoutEffect:Yn,useMemo:mu,useReducer:He,useRef:Kr,useState:function(){return He(Ve)},useDebugValue:yo,useDeferredValue:function(c){var m=Ue();return re===null?m.memoizedState=c:gu(m,re.memoizedState,c)},useTransition:function(){var c=He(Ve)[0],m=Ue().memoizedState;return[c,m]},useMutableSource:_t,useSyncExternalStore:gt,useId:Li,unstable_isNewReconciler:!1};function ga(c,m){if(c&&c.defaultProps){m=wt({},m),c=c.defaultProps;for(var w in c)m[w]===void 0&&(m[w]=c[w]);return m}return m}function Pl(c,m,w,A){m=c.memoizedState,w=w(A,m),w=w==null?m:wt({},m,w),c.memoizedState=w,c.lanes===0&&(c.updateQueue.baseState=w)}var Bo={isMounted:function(c){return(c=c._reactInternals)?ua(c)===c:!1},enqueueSetState:function(c,m,w){c=c._reactInternals;var A=Ji(),j=Tl(c),V=vi(A,j);V.payload=m,w!=null&&(V.callback=w),m=zi(c,V,j),m!==null&&(Ra(m,c,j,A),fu(m,c,j))},enqueueReplaceState:function(c,m,w){c=c._reactInternals;var A=Ji(),j=Tl(c),V=vi(A,j);V.tag=1,V.payload=m,w!=null&&(V.callback=w),m=zi(c,V,j),m!==null&&(Ra(m,c,j,A),fu(m,c,j))},enqueueForceUpdate:function(c,m){c=c._reactInternals;var w=Ji(),A=Tl(c),j=vi(w,A);j.tag=2,m!=null&&(j.callback=m),m=zi(c,j,A),m!==null&&(Ra(m,c,A,w),fu(m,c,A))}};function vo(c,m,w,A,j,V,ae){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(A,V,ae):m.prototype&&m.prototype.isPureReactComponent?!ul(w,A)||!ul(j,V):!0}function Jn(c,m,w){var A=!1,j=Hn,V=m.contextType;return typeof V=="object"&&V!==null?V=tn(V):(j=gi(m)?Ts:Kn.current,A=m.contextTypes,V=(A=A!=null)?Za(c,j):Hn),m=new m(w,V),c.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Bo,c.stateNode=m,m._reactInternals=c,A&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=j,c.__reactInternalMemoizedMaskedChildContext=V),m}function _o(c,m,w,A){c=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(w,A),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(w,A),m.state!==c&&Bo.enqueueReplaceState(m,m.state,null)}function bc(c,m,w,A){var j=c.stateNode;j.props=w,j.state=c.memoizedState,j.refs={},sn(c);var V=m.contextType;typeof V=="object"&&V!==null?j.context=tn(V):(V=gi(m)?Ts:Kn.current,j.context=Za(c,V)),j.state=c.memoizedState,V=m.getDerivedStateFromProps,typeof V=="function"&&(Pl(c,m,V,w),j.state=c.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(m=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),m!==j.state&&Bo.enqueueReplaceState(j,j.state,null),go(c,w,j,A),j.state=c.memoizedState),typeof j.componentDidMount=="function"&&(c.flags|=4194308)}function ya(c,m){try{var w="",A=m;do w+=tr(A),A=A.return;while(A);var j=w}catch(V){j=`
Error generating stack: `+V.message+`
`+V.stack}return{value:c,source:m,stack:j,digest:null}}function wc(c,m,w){return{value:c,source:null,stack:w??null,digest:m??null}}function Sc(c,m){try{console.error(m.value)}catch(w){setTimeout(function(){throw w})}}var Pc=typeof WeakMap=="function"?WeakMap:Map;function sm(c,m,w){w=vi(-1,w),w.tag=3,w.payload={element:null};var A=m.value;return w.callback=function(){ip||(ip=!0,bm=A),Sc(c,m)},w}function vu(c,m,w){w=vi(-1,w),w.tag=3;var A=c.type.getDerivedStateFromError;if(typeof A=="function"){var j=m.value;w.payload=function(){return A(j)},w.callback=function(){Sc(c,m)}}var V=c.stateNode;return V!==null&&typeof V.componentDidCatch=="function"&&(w.callback=function(){Sc(c,m),typeof A!="function"&&(Pu===null?Pu=new Set([this]):Pu.add(this));var ae=m.stack;this.componentDidCatch(m.value,{componentStack:ae!==null?ae:""})}),w}function _u(c,m,w){var A=c.pingCache;if(A===null){A=c.pingCache=new Pc;var j=new Set;A.set(m,j)}else j=A.get(m),j===void 0&&(j=new Set,A.set(m,j));j.has(w)||(j.add(w),c=iy.bind(null,c,m,w),m.then(c,c))}function lm(c){do{var m;if((m=c.tag===13)&&(m=c.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return c;c=c.return}while(c!==null);return null}function Ug(c,m,w,A,j){return(c.mode&1)===0?(c===m?c.flags|=65536:(c.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(m=vi(-1,1),m.tag=2,zi(w,m,1))),w.lanes|=1),c):(c.flags|=65536,c.lanes=j,c)}var um=Ce.ReactCurrentOwner,va=!1;function _a(c,m,w,A){m.child=c===null?Md(m,null,w,A):bl(m,c.child,w,A)}function cm(c,m,w,A,j){w=w.render;var V=m.ref;return mo(m,j),A=Ee(c,m,w,A,V,j),w=ve(),c!==null&&!va?(m.updateQueue=c.updateQueue,m.flags&=-2053,c.lanes&=~j,$o(c,m,j)):(on&&w&&Ms(m),m.flags|=1,_a(c,m,A,j),m.child)}function Gg(c,m,w,A,j){if(c===null){var V=w.type;return typeof V=="function"&&!Mm(V)&&V.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(m.tag=15,m.type=V,Zf(c,m,V,A,j)):(c=sp(w.type,null,A,m,m.mode,j),c.ref=m.ref,c.return=m,m.child=c)}if(V=c.child,(c.lanes&j)===0){var ae=V.memoizedProps;if(w=w.compare,w=w!==null?w:ul,w(ae,A)&&c.ref===m.ref)return $o(c,m,j)}return m.flags|=1,c=Cl(V,A),c.ref=m.ref,c.return=m,m.child=c}function Zf(c,m,w,A,j){if(c!==null){var V=c.memoizedProps;if(ul(V,A)&&c.ref===m.ref)if(va=!1,m.pendingProps=A=V,(c.lanes&j)!==0)(c.flags&131072)!==0&&(va=!0);else return m.lanes=c.lanes,$o(c,m,j)}return Kf(c,m,w,A,j)}function qg(c,m,w){var A=m.pendingProps,j=A.children,V=c!==null?c.memoizedState:null;if(A.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(Go,Qi),Qi|=w;else{if((w&1073741824)===0)return c=V!==null?V.baseLanes|w:w,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:c,cachePool:null,transitions:null},m.updateQueue=null,Cr(Go,Qi),Qi|=c,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},A=V!==null?V.baseLanes:w,Cr(Go,Qi),Qi|=A}else V!==null?(A=V.baseLanes|w,m.memoizedState=null):A=w,Cr(Go,Qi),Qi|=A;return _a(c,m,j,w),m.child}function Hf(c,m){var w=m.ref;(c===null&&w!==null||c!==null&&c.ref!==w)&&(m.flags|=512,m.flags|=2097152)}function Kf(c,m,w,A,j){var V=gi(w)?Ts:Kn.current;return V=Za(m,V),mo(m,j),w=Ee(c,m,w,A,V,j),A=ve(),c!==null&&!va?(m.updateQueue=c.updateQueue,m.flags&=-2053,c.lanes&=~j,$o(c,m,j)):(on&&A&&Ms(m),m.flags|=1,_a(c,m,w,j),m.child)}function hm(c,m,w,A,j){if(gi(w)){var V=!0;_l(m)}else V=!1;if(mo(m,j),m.stateNode===null)Jf(c,m),Jn(m,w,A),bc(m,w,A,j),A=!0;else if(c===null){var ae=m.stateNode,Pe=m.memoizedProps;ae.props=Pe;var Oe=ae.context,et=w.contextType;typeof et=="object"&&et!==null?et=tn(et):(et=gi(w)?Ts:Kn.current,et=Za(m,et));var mt=w.getDerivedStateFromProps,xt=typeof mt=="function"||typeof ae.getSnapshotBeforeUpdate=="function";xt||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(Pe!==A||Oe!==et)&&_o(m,ae,A,et),Br=!1;var dt=m.memoizedState;ae.state=dt,go(m,A,ae,j),Oe=m.memoizedState,Pe!==A||dt!==Oe||Di.current||Br?(typeof mt=="function"&&(Pl(m,w,mt,A),Oe=m.memoizedState),(Pe=Br||vo(m,w,Pe,A,dt,Oe,et))?(xt||typeof ae.UNSAFE_componentWillMount!="function"&&typeof ae.componentWillMount!="function"||(typeof ae.componentWillMount=="function"&&ae.componentWillMount(),typeof ae.UNSAFE_componentWillMount=="function"&&ae.UNSAFE_componentWillMount()),typeof ae.componentDidMount=="function"&&(m.flags|=4194308)):(typeof ae.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=A,m.memoizedState=Oe),ae.props=A,ae.state=Oe,ae.context=et,A=Pe):(typeof ae.componentDidMount=="function"&&(m.flags|=4194308),A=!1)}else{ae=m.stateNode,Id(c,m),Pe=m.memoizedProps,et=m.type===m.elementType?Pe:ga(m.type,Pe),ae.props=et,xt=m.pendingProps,dt=ae.context,Oe=w.contextType,typeof Oe=="object"&&Oe!==null?Oe=tn(Oe):(Oe=gi(w)?Ts:Kn.current,Oe=Za(m,Oe));var kt=w.getDerivedStateFromProps;(mt=typeof kt=="function"||typeof ae.getSnapshotBeforeUpdate=="function")||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(Pe!==xt||dt!==Oe)&&_o(m,ae,A,Oe),Br=!1,dt=m.memoizedState,ae.state=dt,go(m,A,ae,j);var zt=m.memoizedState;Pe!==xt||dt!==zt||Di.current||Br?(typeof kt=="function"&&(Pl(m,w,kt,A),zt=m.memoizedState),(et=Br||vo(m,w,et,A,dt,zt,Oe)||!1)?(mt||typeof ae.UNSAFE_componentWillUpdate!="function"&&typeof ae.componentWillUpdate!="function"||(typeof ae.componentWillUpdate=="function"&&ae.componentWillUpdate(A,zt,Oe),typeof ae.UNSAFE_componentWillUpdate=="function"&&ae.UNSAFE_componentWillUpdate(A,zt,Oe)),typeof ae.componentDidUpdate=="function"&&(m.flags|=4),typeof ae.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof ae.componentDidUpdate!="function"||Pe===c.memoizedProps&&dt===c.memoizedState||(m.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||Pe===c.memoizedProps&&dt===c.memoizedState||(m.flags|=1024),m.memoizedProps=A,m.memoizedState=zt),ae.props=A,ae.state=zt,ae.context=Oe,A=et):(typeof ae.componentDidUpdate!="function"||Pe===c.memoizedProps&&dt===c.memoizedState||(m.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||Pe===c.memoizedProps&&dt===c.memoizedState||(m.flags|=1024),A=!1)}return xu(c,m,w,A,V,j)}function xu(c,m,w,A,j,V){Hf(c,m);var ae=(m.flags&128)!==0;if(!A&&!ae)return j&&xl(m,w,!1),$o(c,m,V);A=m.stateNode,um.current=m;var Pe=ae&&typeof w.getDerivedStateFromError!="function"?null:A.render();return m.flags|=1,c!==null&&ae?(m.child=bl(m,c.child,null,V),m.child=bl(m,null,Pe,V)):_a(c,m,Pe,V),m.memoizedState=A.state,j&&xl(m,w,!0),m.child}function Wg(c){var m=c.stateNode;m.pendingContext?Ed(c,m.pendingContext,m.pendingContext!==m.context):m.context&&Ed(c,m.context,!1),s(c,m.containerInfo)}function Th(c,m,w,A,j){return hu(),yc(j),m.flags|=256,_a(c,m,w,A),m.child}var Ch={dehydrated:null,treeContext:null,retryLane:0};function Eh(c){return{baseLanes:c,cachePool:null,transitions:null}}function dm(c,m,w){var A=m.pendingProps,j=T.current,V=!1,ae=(m.flags&128)!==0,Pe;if((Pe=ae)||(Pe=c!==null&&c.memoizedState===null?!1:(j&2)!==0),Pe?(V=!0,m.flags&=-129):(c===null||c.memoizedState!==null)&&(j|=1),Cr(T,j&1),c===null)return uu(m),c=m.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((m.mode&1)===0?m.lanes=1:c.data==="$!"?m.lanes=8:m.lanes=1073741824,null):(ae=A.children,c=A.fallback,V?(A=m.mode,V=m.child,ae={mode:"hidden",children:ae},(A&1)===0&&V!==null?(V.childLanes=0,V.pendingProps=ae):V=Mu(ae,A,0,null),c=zc(c,A,w,null),V.return=m,c.return=m,V.sibling=c,m.child=V,m.child.memoizedState=Eh(w),m.memoizedState=Ch,c):Xf(m,ae));if(j=c.memoizedState,j!==null&&(Pe=j.dehydrated,Pe!==null))return P_(c,m,ae,A,Pe,j,w);if(V){V=A.fallback,ae=m.mode,j=c.child,Pe=j.sibling;var Oe={mode:"hidden",children:A.children};return(ae&1)===0&&m.child!==j?(A=m.child,A.childLanes=0,A.pendingProps=Oe,m.deletions=null):(A=Cl(j,Oe),A.subtreeFlags=j.subtreeFlags&14680064),Pe!==null?V=Cl(Pe,V):(V=zc(V,ae,w,null),V.flags|=2),V.return=m,A.return=m,A.sibling=V,m.child=A,A=V,V=m.child,ae=c.child.memoizedState,ae=ae===null?Eh(w):{baseLanes:ae.baseLanes|w,cachePool:null,transitions:ae.transitions},V.memoizedState=ae,V.childLanes=c.childLanes&~w,m.memoizedState=Ch,A}return V=c.child,c=V.sibling,A=Cl(V,{mode:"visible",children:A.children}),(m.mode&1)===0&&(A.lanes=w),A.return=m,A.sibling=null,c!==null&&(w=m.deletions,w===null?(m.deletions=[c],m.flags|=16):w.push(c)),m.child=A,m.memoizedState=null,A}function Xf(c,m){return m=Mu({mode:"visible",children:m},c.mode,0,null),m.return=c,c.child=m}function Yf(c,m,w,A){return A!==null&&yc(A),bl(m,c.child,null,w),c=Xf(m,m.pendingProps.children),c.flags|=2,m.memoizedState=null,c}function P_(c,m,w,A,j,V,ae){if(w)return m.flags&256?(m.flags&=-257,A=wc(Error(n(422))),Yf(c,m,ae,A)):m.memoizedState!==null?(m.child=c.child,m.flags|=128,null):(V=A.fallback,j=m.mode,A=Mu({mode:"visible",children:A.children},j,0,null),V=zc(V,j,ae,null),V.flags|=2,A.return=m,V.return=m,A.sibling=V,m.child=A,(m.mode&1)!==0&&bl(m,c.child,null,ae),m.child.memoizedState=Eh(ae),m.memoizedState=Ch,V);if((m.mode&1)===0)return Yf(c,m,ae,null);if(j.data==="$!"){if(A=j.nextSibling&&j.nextSibling.dataset,A)var Pe=A.dgst;return A=Pe,V=Error(n(419)),A=wc(V,A,void 0),Yf(c,m,ae,A)}if(Pe=(ae&c.childLanes)!==0,va||Pe){if(A=zn,A!==null){switch(ae&-ae){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=(j&(A.suspendedLanes|ae))!==0?0:j,j!==0&&j!==V.retryLane&&(V.retryLane=j,Ri(c,j),Ra(A,c,j,-1))}return Tm(),A=wc(Error(n(421))),Yf(c,m,ae,A)}return j.data==="$?"?(m.flags|=128,m.child=c.child,m=ay.bind(null,c),j._reactRetry=m,null):(c=V.treeContext,Oi=Wa(j.nextSibling),rr=m,on=!0,Ki=null,c!==null&&(si[En++]=Ha,si[En++]=fa,si[En++]=Tt,Ha=c.id,fa=c.overflow,Tt=m),m=Xf(m,A.children),m.flags|=4096,m)}function fm(c,m,w){c.lanes|=m;var A=c.alternate;A!==null&&(A.lanes|=m),_c(c.return,m,w)}function Qf(c,m,w,A,j){var V=c.memoizedState;V===null?c.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:A,tail:w,tailMode:j}:(V.isBackwards=m,V.rendering=null,V.renderingStartTime=0,V.last=A,V.tail=w,V.tailMode=j)}function pm(c,m,w){var A=m.pendingProps,j=A.revealOrder,V=A.tail;if(_a(c,m,A.children,w),A=T.current,(A&2)!==0)A=A&1|2,m.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=m.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&fm(c,w,m);else if(c.tag===19)fm(c,w,m);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===m)break e;for(;c.sibling===null;){if(c.return===null||c.return===m)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}A&=1}if(Cr(T,A),(m.mode&1)===0)m.memoizedState=null;else switch(j){case"forwards":for(w=m.child,j=null;w!==null;)c=w.alternate,c!==null&&k(c)===null&&(j=w),w=w.sibling;w=j,w===null?(j=m.child,m.child=null):(j=w.sibling,w.sibling=null),Qf(m,!1,j,w,V);break;case"backwards":for(w=null,j=m.child,m.child=null;j!==null;){if(c=j.alternate,c!==null&&k(c)===null){m.child=j;break}c=j.sibling,j.sibling=w,w=j,j=c}Qf(m,!0,w,null,V);break;case"together":Qf(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Jf(c,m){(m.mode&1)===0&&c!==null&&(c.alternate=null,m.alternate=null,m.flags|=2)}function $o(c,m,w){if(c!==null&&(m.dependencies=c.dependencies),Su|=m.lanes,(w&m.childLanes)===0)return null;if(c!==null&&m.child!==c.child)throw Error(n(153));if(m.child!==null){for(c=m.child,w=Cl(c,c.pendingProps),m.child=w,w.return=m;c.sibling!==null;)c=c.sibling,w=w.sibling=Cl(c,c.pendingProps),w.return=m;w.sibling=null}return m.child}function Zg(c,m,w){switch(m.tag){case 3:Wg(m),hu();break;case 5:y(m);break;case 1:gi(m.type)&&_l(m);break;case 4:s(m,m.stateNode.containerInfo);break;case 10:var A=m.type._context,j=m.memoizedProps.value;Cr(Ph,A._currentValue),A._currentValue=j;break;case 13:if(A=m.memoizedState,A!==null)return A.dehydrated!==null?(Cr(T,T.current&1),m.flags|=128,null):(w&m.child.childLanes)!==0?dm(c,m,w):(Cr(T,T.current&1),c=$o(c,m,w),c!==null?c.sibling:null);Cr(T,T.current&1);break;case 19:if(A=(w&m.childLanes)!==0,(c.flags&128)!==0){if(A)return pm(c,m,w);m.flags|=128}if(j=m.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),Cr(T,T.current),A)break;return null;case 22:case 23:return m.lanes=0,qg(c,m,w)}return $o(c,m,w)}var ep,Tc,Xi,mm;ep=function(c,m){for(var w=m.child;w!==null;){if(w.tag===5||w.tag===6)c.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===m)break;for(;w.sibling===null;){if(w.return===null||w.return===m)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Tc=function(){},Xi=function(c,m,w,A){var j=c.memoizedProps;if(j!==A){c=m.stateNode,r(ma.current);var V=null;switch(w){case"input":j=Tr(c,j),A=Tr(c,A),V=[];break;case"select":j=wt({},j,{value:void 0}),A=wt({},A,{value:void 0}),V=[];break;case"textarea":j=Js(c,j),A=Js(c,A),V=[];break;default:typeof j.onClick!="function"&&typeof A.onClick=="function"&&(c.onclick=Ps)}_e(w,A);var ae;w=null;for(et in j)if(!A.hasOwnProperty(et)&&j.hasOwnProperty(et)&&j[et]!=null)if(et==="style"){var Pe=j[et];for(ae in Pe)Pe.hasOwnProperty(ae)&&(w||(w={}),w[ae]="")}else et!=="dangerouslySetInnerHTML"&&et!=="children"&&et!=="suppressContentEditableWarning"&&et!=="suppressHydrationWarning"&&et!=="autoFocus"&&(h.hasOwnProperty(et)?V||(V=[]):(V=V||[]).push(et,null));for(et in A){var Oe=A[et];if(Pe=j?.[et],A.hasOwnProperty(et)&&Oe!==Pe&&(Oe!=null||Pe!=null))if(et==="style")if(Pe){for(ae in Pe)!Pe.hasOwnProperty(ae)||Oe&&Oe.hasOwnProperty(ae)||(w||(w={}),w[ae]="");for(ae in Oe)Oe.hasOwnProperty(ae)&&Pe[ae]!==Oe[ae]&&(w||(w={}),w[ae]=Oe[ae])}else w||(V||(V=[]),V.push(et,w)),w=Oe;else et==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Pe=Pe?Pe.__html:void 0,Oe!=null&&Pe!==Oe&&(V=V||[]).push(et,Oe)):et==="children"?typeof Oe!="string"&&typeof Oe!="number"||(V=V||[]).push(et,""+Oe):et!=="suppressContentEditableWarning"&&et!=="suppressHydrationWarning"&&(h.hasOwnProperty(et)?(Oe!=null&&et==="onScroll"&&Zr("scroll",c),V||Pe===Oe||(V=[])):(V=V||[]).push(et,Oe))}w&&(V=V||[]).push("style",w);var et=V;(m.updateQueue=et)&&(m.flags|=4)}},mm=function(c,m,w,A){w!==A&&(m.flags|=4)};function Cc(c,m){if(!on)switch(c.tailMode){case"hidden":m=c.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?c.tail=null:w.sibling=null;break;case"collapsed":w=c.tail;for(var A=null;w!==null;)w.alternate!==null&&(A=w),w=w.sibling;A===null?m||c.tail===null?c.tail=null:c.tail.sibling=null:A.sibling=null}}function Yi(c){var m=c.alternate!==null&&c.alternate.child===c.child,w=0,A=0;if(m)for(var j=c.child;j!==null;)w|=j.lanes|j.childLanes,A|=j.subtreeFlags&14680064,A|=j.flags&14680064,j.return=c,j=j.sibling;else for(j=c.child;j!==null;)w|=j.lanes|j.childLanes,A|=j.subtreeFlags,A|=j.flags,j.return=c,j=j.sibling;return c.subtreeFlags|=A,c.childLanes=w,m}function Hg(c,m,w){var A=m.pendingProps;switch(pc(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yi(m),null;case 1:return gi(m.type)&&vl(),Yi(m),null;case 3:return A=m.stateNode,f(),Ur(Di),Ur(Kn),N(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(c===null||c.child===null)&&(gc(m)?m.flags|=4:c===null||c.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Ki!==null&&(Dc(Ki),Ki=null))),Tc(c,m),Yi(m),null;case 5:x(m);var j=r(_.current);if(w=m.type,c!==null&&m.stateNode!=null)Xi(c,m,w,A,j),c.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!A){if(m.stateNode===null)throw Error(n(166));return Yi(m),null}if(c=r(ma.current),gc(m)){A=m.stateNode,w=m.type;var V=m.memoizedProps;switch(A[jr]=m,A[Da]=V,c=(m.mode&1)!==0,w){case"dialog":Zr("cancel",A),Zr("close",A);break;case"iframe":case"object":case"embed":Zr("load",A);break;case"video":case"audio":for(j=0;j<mr.length;j++)Zr(mr[j],A);break;case"source":Zr("error",A);break;case"img":case"image":case"link":Zr("error",A),Zr("load",A);break;case"details":Zr("toggle",A);break;case"input":Qr(A,V),Zr("invalid",A);break;case"select":A._wrapperState={wasMultiple:!!V.multiple},Zr("invalid",A);break;case"textarea":as(A,V),Zr("invalid",A)}_e(w,V),j=null;for(var ae in V)if(V.hasOwnProperty(ae)){var Pe=V[ae];ae==="children"?typeof Pe=="string"?A.textContent!==Pe&&(V.suppressHydrationWarning!==!0&&Ro(A.textContent,Pe,c),j=["children",Pe]):typeof Pe=="number"&&A.textContent!==""+Pe&&(V.suppressHydrationWarning!==!0&&Ro(A.textContent,Pe,c),j=["children",""+Pe]):h.hasOwnProperty(ae)&&Pe!=null&&ae==="onScroll"&&Zr("scroll",A)}switch(w){case"input":sr(A),ri(A,V,!0);break;case"textarea":sr(A),os(A);break;case"select":case"option":break;default:typeof V.onClick=="function"&&(A.onclick=Ps)}A=j,m.updateQueue=A,A!==null&&(m.flags|=4)}else{ae=j.nodeType===9?j:j.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=io(w)),c==="http://www.w3.org/1999/xhtml"?w==="script"?(c=ae.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof A.is=="string"?c=ae.createElement(w,{is:A.is}):(c=ae.createElement(w),w==="select"&&(ae=c,A.multiple?ae.multiple=!0:A.size&&(ae.size=A.size))):c=ae.createElementNS(c,w),c[jr]=m,c[Da]=A,ep(c,m,!1,!1),m.stateNode=c;e:{switch(ae=Ie(w,A),w){case"dialog":Zr("cancel",c),Zr("close",c),j=A;break;case"iframe":case"object":case"embed":Zr("load",c),j=A;break;case"video":case"audio":for(j=0;j<mr.length;j++)Zr(mr[j],c);j=A;break;case"source":Zr("error",c),j=A;break;case"img":case"image":case"link":Zr("error",c),Zr("load",c),j=A;break;case"details":Zr("toggle",c),j=A;break;case"input":Qr(c,A),j=Tr(c,A),Zr("invalid",c);break;case"option":j=A;break;case"select":c._wrapperState={wasMultiple:!!A.multiple},j=wt({},A,{value:void 0}),Zr("invalid",c);break;case"textarea":as(c,A),j=Js(c,A),Zr("invalid",c);break;default:j=A}_e(w,j),Pe=j;for(V in Pe)if(Pe.hasOwnProperty(V)){var Oe=Pe[V];V==="style"?oe(c,Oe):V==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Oe!=null&&$l(c,Oe)):V==="children"?typeof Oe=="string"?(w!=="textarea"||Oe!=="")&&ss(c,Oe):typeof Oe=="number"&&ss(c,""+Oe):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(h.hasOwnProperty(V)?Oe!=null&&V==="onScroll"&&Zr("scroll",c):Oe!=null&&se(c,V,Oe,ae))}switch(w){case"input":sr(c),ri(c,A,!1);break;case"textarea":sr(c),os(c);break;case"option":A.value!=null&&c.setAttribute("value",""+Ir(A.value));break;case"select":c.multiple=!!A.multiple,V=A.value,V!=null?oa(c,!!A.multiple,V,!1):A.defaultValue!=null&&oa(c,!!A.multiple,A.defaultValue,!0);break;default:typeof j.onClick=="function"&&(c.onclick=Ps)}switch(w){case"button":case"input":case"select":case"textarea":A=!!A.autoFocus;break e;case"img":A=!0;break e;default:A=!1}}A&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Yi(m),null;case 6:if(c&&m.stateNode!=null)mm(c,m,c.memoizedProps,A);else{if(typeof A!="string"&&m.stateNode===null)throw Error(n(166));if(w=r(_.current),r(ma.current),gc(m)){if(A=m.stateNode,w=m.memoizedProps,A[jr]=m,(V=A.nodeValue!==w)&&(c=rr,c!==null))switch(c.tag){case 3:Ro(A.nodeValue,w,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Ro(A.nodeValue,w,(c.mode&1)!==0)}V&&(m.flags|=4)}else A=(w.nodeType===9?w:w.ownerDocument).createTextNode(A),A[jr]=m,m.stateNode=A}return Yi(m),null;case 13:if(Ur(T),A=m.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(on&&Oi!==null&&(m.mode&1)!==0&&(m.flags&128)===0)cu(),hu(),m.flags|=98560,V=!1;else if(V=gc(m),A!==null&&A.dehydrated!==null){if(c===null){if(!V)throw Error(n(318));if(V=m.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(n(317));V[jr]=m}else hu(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Yi(m),V=!1}else Ki!==null&&(Dc(Ki),Ki=null),V=!0;if(!V)return m.flags&65536?m:null}return(m.flags&128)!==0?(m.lanes=w,m):(A=A!==null,A!==(c!==null&&c.memoizedState!==null)&&A&&(m.child.flags|=8192,(m.mode&1)!==0&&(c===null||(T.current&1)!==0?Mn===0&&(Mn=3):Tm())),m.updateQueue!==null&&(m.flags|=4),Yi(m),null);case 4:return f(),Tc(c,m),c===null&&eu(m.stateNode.containerInfo),Yi(m),null;case 10:return du(m.type._context),Yi(m),null;case 17:return gi(m.type)&&vl(),Yi(m),null;case 19:if(Ur(T),V=m.memoizedState,V===null)return Yi(m),null;if(A=(m.flags&128)!==0,ae=V.rendering,ae===null)if(A)Cc(V,!1);else{if(Mn!==0||c!==null&&(c.flags&128)!==0)for(c=m.child;c!==null;){if(ae=k(c),ae!==null){for(m.flags|=128,Cc(V,!1),A=ae.updateQueue,A!==null&&(m.updateQueue=A,m.flags|=4),m.subtreeFlags=0,A=w,w=m.child;w!==null;)V=w,c=A,V.flags&=14680066,ae=V.alternate,ae===null?(V.childLanes=0,V.lanes=c,V.child=null,V.subtreeFlags=0,V.memoizedProps=null,V.memoizedState=null,V.updateQueue=null,V.dependencies=null,V.stateNode=null):(V.childLanes=ae.childLanes,V.lanes=ae.lanes,V.child=ae.child,V.subtreeFlags=0,V.deletions=null,V.memoizedProps=ae.memoizedProps,V.memoizedState=ae.memoizedState,V.updateQueue=ae.updateQueue,V.type=ae.type,c=ae.dependencies,V.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),w=w.sibling;return Cr(T,T.current&1|2),m.child}c=c.sibling}V.tail!==null&&br()>kc&&(m.flags|=128,A=!0,Cc(V,!1),m.lanes=4194304)}else{if(!A)if(c=k(ae),c!==null){if(m.flags|=128,A=!0,w=c.updateQueue,w!==null&&(m.updateQueue=w,m.flags|=4),Cc(V,!0),V.tail===null&&V.tailMode==="hidden"&&!ae.alternate&&!on)return Yi(m),null}else 2*br()-V.renderingStartTime>kc&&w!==1073741824&&(m.flags|=128,A=!0,Cc(V,!1),m.lanes=4194304);V.isBackwards?(ae.sibling=m.child,m.child=ae):(w=V.last,w!==null?w.sibling=ae:m.child=ae,V.last=ae)}return V.tail!==null?(m=V.tail,V.rendering=m,V.tail=m.sibling,V.renderingStartTime=br(),m.sibling=null,w=T.current,Cr(T,A?w&1|2:w&1),m):(Yi(m),null);case 22:case 23:return Sm(),A=m.memoizedState!==null,c!==null&&c.memoizedState!==null!==A&&(m.flags|=8192),A&&(m.mode&1)!==0?(Qi&1073741824)!==0&&(Yi(m),m.subtreeFlags&6&&(m.flags|=8192)):Yi(m),null;case 24:return null;case 25:return null}throw Error(n(156,m.tag))}function T_(c,m){switch(pc(m),m.tag){case 1:return gi(m.type)&&vl(),c=m.flags,c&65536?(m.flags=c&-65537|128,m):null;case 3:return f(),Ur(Di),Ur(Kn),N(),c=m.flags,(c&65536)!==0&&(c&128)===0?(m.flags=c&-65537|128,m):null;case 5:return x(m),null;case 13:if(Ur(T),c=m.memoizedState,c!==null&&c.dehydrated!==null){if(m.alternate===null)throw Error(n(340));hu()}return c=m.flags,c&65536?(m.flags=c&-65537|128,m):null;case 19:return Ur(T),null;case 4:return f(),null;case 10:return du(m.type._context),null;case 22:case 23:return Sm(),null;case 24:return null;default:return null}}var tp=!1,ji=!1,C_=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function Ec(c,m){var w=c.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(A){xn(c,m,A)}else w.current=null}function rp(c,m,w){try{w()}catch(A){xn(c,m,A)}}var Kg=!1;function E_(c,m){if(cc=so,c=Bf(),ph(c)){if("selectionStart"in c)var w={start:c.selectionStart,end:c.selectionEnd};else e:{w=(w=c.ownerDocument)&&w.defaultView||window;var A=w.getSelection&&w.getSelection();if(A&&A.rangeCount!==0){w=A.anchorNode;var j=A.anchorOffset,V=A.focusNode;A=A.focusOffset;try{w.nodeType,V.nodeType}catch{w=null;break e}var ae=0,Pe=-1,Oe=-1,et=0,mt=0,xt=c,dt=null;t:for(;;){for(var kt;xt!==w||j!==0&&xt.nodeType!==3||(Pe=ae+j),xt!==V||A!==0&&xt.nodeType!==3||(Oe=ae+A),xt.nodeType===3&&(ae+=xt.nodeValue.length),(kt=xt.firstChild)!==null;)dt=xt,xt=kt;for(;;){if(xt===c)break t;if(dt===w&&++et===j&&(Pe=ae),dt===V&&++mt===A&&(Oe=ae),(kt=xt.nextSibling)!==null)break;xt=dt,dt=xt.parentNode}xt=kt}w=Pe===-1||Oe===-1?null:{start:Pe,end:Oe}}else w=null}w=w||{start:0,end:0}}else w=null;for(fo={focusedElem:c,selectionRange:w},so=!1,Nt=m;Nt!==null;)if(m=Nt,c=m.child,(m.subtreeFlags&1028)!==0&&c!==null)c.return=m,Nt=c;else for(;Nt!==null;){m=Nt;try{var zt=m.alternate;if((m.flags&1024)!==0)switch(m.tag){case 0:case 11:case 15:break;case 1:if(zt!==null){var Vt=zt.memoizedProps,An=zt.memoizedState,Ze=m.stateNode,je=Ze.getSnapshotBeforeUpdate(m.elementType===m.type?Vt:ga(m.type,Vt),An);Ze.__reactInternalSnapshotBeforeUpdate=je}break;case 3:var Ke=m.stateNode.containerInfo;Ke.nodeType===1?Ke.textContent="":Ke.nodeType===9&&Ke.documentElement&&Ke.removeChild(Ke.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(St){xn(m,m.return,St)}if(c=m.sibling,c!==null){c.return=m.return,Nt=c;break}Nt=m.return}return zt=Kg,Kg=!1,zt}function kd(c,m,w){var A=m.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var j=A=A.next;do{if((j.tag&c)===c){var V=j.destroy;j.destroy=void 0,V!==void 0&&rp(m,w,V)}j=j.next}while(j!==A)}}function Mh(c,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var w=m=m.next;do{if((w.tag&c)===c){var A=w.create;w.destroy=A()}w=w.next}while(w!==m)}}function Dd(c){var m=c.ref;if(m!==null){var w=c.stateNode;switch(c.tag){case 5:c=w;break;default:c=w}typeof m=="function"?m(c):m.current=c}}function gm(c){var m=c.alternate;m!==null&&(c.alternate=null,gm(m)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(m=c.stateNode,m!==null&&(delete m[jr],delete m[Da],delete m[ru],delete m[dc],delete m[nu])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function bu(c){return c.tag===5||c.tag===3||c.tag===4}function Ah(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||bu(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function ym(c,m,w){var A=c.tag;if(A===5||A===6)c=c.stateNode,m?w.nodeType===8?w.parentNode.insertBefore(c,m):w.insertBefore(c,m):(w.nodeType===8?(m=w.parentNode,m.insertBefore(c,w)):(m=w,m.appendChild(c)),w=w._reactRootContainer,w!=null||m.onclick!==null||(m.onclick=Ps));else if(A!==4&&(c=c.child,c!==null))for(ym(c,m,w),c=c.sibling;c!==null;)ym(c,m,w),c=c.sibling}function vm(c,m,w){var A=c.tag;if(A===5||A===6)c=c.stateNode,m?w.insertBefore(c,m):w.appendChild(c);else if(A!==4&&(c=c.child,c!==null))for(vm(c,m,w),c=c.sibling;c!==null;)vm(c,m,w),c=c.sibling}var Ni=null,Vo=!1;function wu(c,m,w){for(w=w.child;w!==null;)Xg(c,m,w),w=w.sibling}function Xg(c,m,w){if(qi&&typeof qi.onCommitFiberUnmount=="function")try{qi.onCommitFiberUnmount(Bu,w)}catch{}switch(w.tag){case 5:ji||Ec(w,m);case 6:var A=Ni,j=Vo;Ni=null,wu(c,m,w),Ni=A,Vo=j,Ni!==null&&(Vo?(c=Ni,w=w.stateNode,c.nodeType===8?c.parentNode.removeChild(w):c.removeChild(w)):Ni.removeChild(w.stateNode));break;case 18:Ni!==null&&(Vo?(c=Ni,w=w.stateNode,c.nodeType===8?pl(c.parentNode,w):c.nodeType===1&&pl(c,w),Ua(c)):pl(Ni,w.stateNode));break;case 4:A=Ni,j=Vo,Ni=w.stateNode.containerInfo,Vo=!0,wu(c,m,w),Ni=A,Vo=j;break;case 0:case 11:case 14:case 15:if(!ji&&(A=w.updateQueue,A!==null&&(A=A.lastEffect,A!==null))){j=A=A.next;do{var V=j,ae=V.destroy;V=V.tag,ae!==void 0&&((V&2)!==0||(V&4)!==0)&&rp(w,m,ae),j=j.next}while(j!==A)}wu(c,m,w);break;case 1:if(!ji&&(Ec(w,m),A=w.stateNode,typeof A.componentWillUnmount=="function"))try{A.props=w.memoizedProps,A.state=w.memoizedState,A.componentWillUnmount()}catch(Pe){xn(w,m,Pe)}wu(c,m,w);break;case 21:wu(c,m,w);break;case 22:w.mode&1?(ji=(A=ji)||w.memoizedState!==null,wu(c,m,w),ji=A):wu(c,m,w);break;default:wu(c,m,w)}}function Yg(c){var m=c.updateQueue;if(m!==null){c.updateQueue=null;var w=c.stateNode;w===null&&(w=c.stateNode=new C_),m.forEach(function(A){var j=k_.bind(null,c,A);w.has(A)||(w.add(A),A.then(j,j))})}}function Ya(c,m){var w=m.deletions;if(w!==null)for(var A=0;A<w.length;A++){var j=w[A];try{var V=c,ae=m,Pe=ae;e:for(;Pe!==null;){switch(Pe.tag){case 5:Ni=Pe.stateNode,Vo=!1;break e;case 3:Ni=Pe.stateNode.containerInfo,Vo=!0;break e;case 4:Ni=Pe.stateNode.containerInfo,Vo=!0;break e}Pe=Pe.return}if(Ni===null)throw Error(n(160));Xg(V,ae,j),Ni=null,Vo=!1;var Oe=j.alternate;Oe!==null&&(Oe.return=null),j.return=null}catch(et){xn(j,m,et)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)Qg(m,c),m=m.sibling}function Qg(c,m){var w=c.alternate,A=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Ya(m,c),Uo(c),A&4){try{kd(3,c,c.return),Mh(3,c)}catch(Vt){xn(c,c.return,Vt)}try{kd(5,c,c.return)}catch(Vt){xn(c,c.return,Vt)}}break;case 1:Ya(m,c),Uo(c),A&512&&w!==null&&Ec(w,w.return);break;case 5:if(Ya(m,c),Uo(c),A&512&&w!==null&&Ec(w,w.return),c.flags&32){var j=c.stateNode;try{ss(j,"")}catch(Vt){xn(c,c.return,Vt)}}if(A&4&&(j=c.stateNode,j!=null)){var V=c.memoizedProps,ae=w!==null?w.memoizedProps:V,Pe=c.type,Oe=c.updateQueue;if(c.updateQueue=null,Oe!==null)try{Pe==="input"&&V.type==="radio"&&V.name!=null&&Pn(j,V),Ie(Pe,ae);var et=Ie(Pe,V);for(ae=0;ae<Oe.length;ae+=2){var mt=Oe[ae],xt=Oe[ae+1];mt==="style"?oe(j,xt):mt==="dangerouslySetInnerHTML"?$l(j,xt):mt==="children"?ss(j,xt):se(j,mt,xt,et)}switch(Pe){case"input":Jr(j,V);break;case"textarea":no(j,V);break;case"select":var dt=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!V.multiple;var kt=V.value;kt!=null?oa(j,!!V.multiple,kt,!1):dt!==!!V.multiple&&(V.defaultValue!=null?oa(j,!!V.multiple,V.defaultValue,!0):oa(j,!!V.multiple,V.multiple?[]:"",!1))}j[Da]=V}catch(Vt){xn(c,c.return,Vt)}}break;case 6:if(Ya(m,c),Uo(c),A&4){if(c.stateNode===null)throw Error(n(162));j=c.stateNode,V=c.memoizedProps;try{j.nodeValue=V}catch(Vt){xn(c,c.return,Vt)}}break;case 3:if(Ya(m,c),Uo(c),A&4&&w!==null&&w.memoizedState.isDehydrated)try{Ua(m.containerInfo)}catch(Vt){xn(c,c.return,Vt)}break;case 4:Ya(m,c),Uo(c);break;case 13:Ya(m,c),Uo(c),j=c.child,j.flags&8192&&(V=j.memoizedState!==null,j.stateNode.isHidden=V,!V||j.alternate!==null&&j.alternate.memoizedState!==null||(zd=br())),A&4&&Yg(c);break;case 22:if(mt=w!==null&&w.memoizedState!==null,c.mode&1?(ji=(et=ji)||mt,Ya(m,c),ji=et):Ya(m,c),Uo(c),A&8192){if(et=c.memoizedState!==null,(c.stateNode.isHidden=et)&&!mt&&(c.mode&1)!==0)for(Nt=c,mt=c.child;mt!==null;){for(xt=Nt=mt;Nt!==null;){switch(dt=Nt,kt=dt.child,dt.tag){case 0:case 11:case 14:case 15:kd(4,dt,dt.return);break;case 1:Ec(dt,dt.return);var zt=dt.stateNode;if(typeof zt.componentWillUnmount=="function"){A=dt,w=dt.return;try{m=A,zt.props=m.memoizedProps,zt.state=m.memoizedState,zt.componentWillUnmount()}catch(Vt){xn(A,w,Vt)}}break;case 5:Ec(dt,dt.return);break;case 22:if(dt.memoizedState!==null){Mc(xt);continue}}kt!==null?(kt.return=dt,Nt=kt):Mc(xt)}mt=mt.sibling}e:for(mt=null,xt=c;;){if(xt.tag===5){if(mt===null){mt=xt;try{j=xt.stateNode,et?(V=j.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none"):(Pe=xt.stateNode,Oe=xt.memoizedProps.style,ae=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null,Pe.style.display=ie("display",ae))}catch(Vt){xn(c,c.return,Vt)}}}else if(xt.tag===6){if(mt===null)try{xt.stateNode.nodeValue=et?"":xt.memoizedProps}catch(Vt){xn(c,c.return,Vt)}}else if((xt.tag!==22&&xt.tag!==23||xt.memoizedState===null||xt===c)&&xt.child!==null){xt.child.return=xt,xt=xt.child;continue}if(xt===c)break e;for(;xt.sibling===null;){if(xt.return===null||xt.return===c)break e;mt===xt&&(mt=null),xt=xt.return}mt===xt&&(mt=null),xt.sibling.return=xt.return,xt=xt.sibling}}break;case 19:Ya(m,c),Uo(c),A&4&&Yg(c);break;case 21:break;default:Ya(m,c),Uo(c)}}function Uo(c){var m=c.flags;if(m&2){try{e:{for(var w=c.return;w!==null;){if(bu(w)){var A=w;break e}w=w.return}throw Error(n(160))}switch(A.tag){case 5:var j=A.stateNode;A.flags&32&&(ss(j,""),A.flags&=-33);var V=Ah(c);vm(c,V,j);break;case 3:case 4:var ae=A.stateNode.containerInfo,Pe=Ah(c);ym(c,Pe,ae);break;default:throw Error(n(161))}}catch(Oe){xn(c,c.return,Oe)}c.flags&=-3}m&4096&&(c.flags&=-4097)}function Od(c,m,w){Nt=c,Jg(c)}function Jg(c,m,w){for(var A=(c.mode&1)!==0;Nt!==null;){var j=Nt,V=j.child;if(j.tag===22&&A){var ae=j.memoizedState!==null||tp;if(!ae){var Pe=j.alternate,Oe=Pe!==null&&Pe.memoizedState!==null||ji;Pe=tp;var et=ji;if(tp=ae,(ji=Oe)&&!et)for(Nt=j;Nt!==null;)ae=Nt,Oe=ae.child,ae.tag===22&&ae.memoizedState!==null?_m(j):Oe!==null?(Oe.return=ae,Nt=Oe):_m(j);for(;V!==null;)Nt=V,Jg(V),V=V.sibling;Nt=j,tp=Pe,ji=et}_n(c)}else(j.subtreeFlags&8772)!==0&&V!==null?(V.return=j,Nt=V):_n(c)}}function _n(c){for(;Nt!==null;){var m=Nt;if((m.flags&8772)!==0){var w=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:ji||Mh(5,m);break;case 1:var A=m.stateNode;if(m.flags&4&&!ji)if(w===null)A.componentDidMount();else{var j=m.elementType===m.type?w.memoizedProps:ga(m.type,w.memoizedProps);A.componentDidUpdate(j,w.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var V=m.updateQueue;V!==null&&pu(m,V,A);break;case 3:var ae=m.updateQueue;if(ae!==null){if(w=null,m.child!==null)switch(m.child.tag){case 5:w=m.child.stateNode;break;case 1:w=m.child.stateNode}pu(m,ae,w)}break;case 5:var Pe=m.stateNode;if(w===null&&m.flags&4){w=Pe;var Oe=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":Oe.autoFocus&&w.focus();break;case"img":Oe.src&&(w.src=Oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var et=m.alternate;if(et!==null){var mt=et.memoizedState;if(mt!==null){var xt=mt.dehydrated;xt!==null&&Ua(xt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}ji||m.flags&512&&Dd(m)}catch(dt){xn(m,m.return,dt)}}if(m===c){Nt=null;break}if(w=m.sibling,w!==null){w.return=m.return,Nt=w;break}Nt=m.return}}function Mc(c){for(;Nt!==null;){var m=Nt;if(m===c){Nt=null;break}var w=m.sibling;if(w!==null){w.return=m.return,Nt=w;break}Nt=m.return}}function _m(c){for(;Nt!==null;){var m=Nt;try{switch(m.tag){case 0:case 11:case 15:var w=m.return;try{Mh(4,m)}catch(Oe){xn(m,w,Oe)}break;case 1:var A=m.stateNode;if(typeof A.componentDidMount=="function"){var j=m.return;try{A.componentDidMount()}catch(Oe){xn(m,j,Oe)}}var V=m.return;try{Dd(m)}catch(Oe){xn(m,V,Oe)}break;case 5:var ae=m.return;try{Dd(m)}catch(Oe){xn(m,ae,Oe)}}}catch(Oe){xn(m,m.return,Oe)}if(m===c){Nt=null;break}var Pe=m.sibling;if(Pe!==null){Pe.return=m.return,Nt=Pe;break}Nt=m.return}}var np=Math.ceil,Ac=Ce.ReactCurrentDispatcher,Ic=Ce.ReactCurrentOwner,Qa=Ce.ReactCurrentBatchConfig,Fr=0,zn=null,Ln=null,jn=0,Qi=0,Go=da(0),Mn=0,Rd=null,Su=0,Rs=0,xm=0,Ih=null,_i=null,zd=0,kc=1/0,zs=null,ip=!1,bm=null,Pu=null,ap=!1,Tu=null,kh=0,Dh=0,Ld=null,jd=-1,Oh=0;function Ji(){return(Fr&6)!==0?br():jd!==-1?jd:jd=br()}function Tl(c){return(c.mode&1)===0?1:(Fr&2)!==0&&jn!==0?jn&-jn:As.transition!==null?(Oh===0&&(Oh=rl()),Oh):(c=Lr,c!==0||(c=window.event,c=c===void 0?16:id(c.type)),c)}function Ra(c,m,w,A){if(50<Dh)throw Dh=0,Ld=null,Error(n(185));nl(c,w,A),((Fr&2)===0||c!==zn)&&(c===zn&&((Fr&2)===0&&(Rs|=w),Mn===4&&Ls(c,jn)),xa(c,A),w===1&&Fr===0&&(m.mode&1)===0&&(kc=br()+500,Hi&&Cs()))}function xa(c,m){var w=c.callbackNode;Jp(c,m);var A=Vu(c,c===zn?jn:0);if(A===0)w!==null&&pr(w),c.callbackNode=null,c.callbackPriority=0;else if(m=A&-A,c.callbackPriority!==m){if(w!=null&&pr(w),m===1)c.tag===0?au(Rh.bind(null,c)):yi(Rh.bind(null,c)),Vf(function(){(Fr&6)===0&&Cs()}),w=null;else{switch($a(A)){case 1:w=tl;break;case 4:w=ao;break;case 16:w=us;break;case 536870912:w=nn;break;default:w=us}w=oy(w,wm.bind(null,c))}c.callbackPriority=m,c.callbackNode=w}}function wm(c,m){if(jd=-1,Oh=0,(Fr&6)!==0)throw Error(n(327));var w=c.callbackNode;if(zh()&&c.callbackNode!==w)return null;var A=Vu(c,c===zn?jn:0);if(A===0)return null;if((A&30)!==0||(A&c.expiredLanes)!==0||m)m=Eu(c,A);else{m=A;var j=Fr;Fr|=2;var V=ey();(zn!==c||jn!==m)&&(zs=null,kc=br()+500,Cu(c,m));do try{A_();break}catch(Pe){Pm(c,Pe)}while(!0);Gt(),Ac.current=V,Fr=j,Ln!==null?m=0:(zn=null,jn=0,m=Mn)}if(m!==0){if(m===2&&(j=oh(c),j!==0&&(A=j,m=op(c,j))),m===1)throw w=Rd,Cu(c,0),Ls(c,A),xa(c,br()),w;if(m===6)Ls(c,A);else{if(j=c.current.alternate,(A&30)===0&&!M_(j)&&(m=Eu(c,A),m===2&&(V=oh(c),V!==0&&(A=V,m=op(c,V))),m===1))throw w=Rd,Cu(c,0),Ls(c,A),xa(c,br()),w;switch(c.finishedWork=j,c.finishedLanes=A,m){case 0:case 1:throw Error(n(345));case 2:Rc(c,_i,zs);break;case 3:if(Ls(c,A),(A&130023424)===A&&(m=zd+500-br(),10<m)){if(Vu(c,0)!==0)break;if(j=c.suspendedLanes,(j&A)!==A){Ji(),c.pingedLanes|=c.suspendedLanes&j;break}c.timeoutHandle=yh(Rc.bind(null,c,_i,zs),m);break}Rc(c,_i,zs);break;case 4:if(Ls(c,A),(A&4194240)===A)break;for(m=c.eventTimes,j=-1;0<A;){var ae=31-ii(A);V=1<<ae,ae=m[ae],ae>j&&(j=ae),A&=~V}if(A=j,A=br()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*np(A/1960))-A,10<A){c.timeoutHandle=yh(Rc.bind(null,c,_i,zs),A);break}Rc(c,_i,zs);break;case 5:Rc(c,_i,zs);break;default:throw Error(n(329))}}}return xa(c,br()),c.callbackNode===w?wm.bind(null,c):null}function op(c,m){var w=Ih;return c.current.memoizedState.isDehydrated&&(Cu(c,m).flags|=256),c=Eu(c,m),c!==2&&(m=_i,_i=w,m!==null&&Dc(m)),c}function Dc(c){_i===null?_i=c:_i.push.apply(_i,c)}function M_(c){for(var m=c;;){if(m.flags&16384){var w=m.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var A=0;A<w.length;A++){var j=w[A],V=j.getSnapshot;j=j.value;try{if(!oi(V(),j))return!1}catch{return!1}}}if(w=m.child,m.subtreeFlags&16384&&w!==null)w.return=m,m=w;else{if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Ls(c,m){for(m&=~xm,m&=~Rs,c.suspendedLanes|=m,c.pingedLanes&=~m,c=c.expirationTimes;0<m;){var w=31-ii(m),A=1<<w;c[w]=-1,m&=~A}}function Rh(c){if((Fr&6)!==0)throw Error(n(327));zh();var m=Vu(c,0);if((m&1)===0)return xa(c,br()),null;var w=Eu(c,m);if(c.tag!==0&&w===2){var A=oh(c);A!==0&&(m=A,w=op(c,A))}if(w===1)throw w=Rd,Cu(c,0),Ls(c,m),xa(c,br()),w;if(w===6)throw Error(n(345));return c.finishedWork=c.current.alternate,c.finishedLanes=m,Rc(c,_i,zs),xa(c,br()),null}function Nd(c,m){var w=Fr;Fr|=1;try{return c(m)}finally{Fr=w,Fr===0&&(kc=br()+500,Hi&&Cs())}}function Oc(c){Tu!==null&&Tu.tag===0&&(Fr&6)===0&&zh();var m=Fr;Fr|=1;var w=Qa.transition,A=Lr;try{if(Qa.transition=null,Lr=1,c)return c()}finally{Lr=A,Qa.transition=w,Fr=m,(Fr&6)===0&&Cs()}}function Sm(){Qi=Go.current,Ur(Go)}function Cu(c,m){c.finishedWork=null,c.finishedLanes=0;var w=c.timeoutHandle;if(w!==-1&&(c.timeoutHandle=-1,vh(w)),Ln!==null)for(w=Ln.return;w!==null;){var A=w;switch(pc(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&vl();break;case 3:f(),Ur(Di),Ur(Kn),N();break;case 5:x(A);break;case 4:f();break;case 13:Ur(T);break;case 19:Ur(T);break;case 10:du(A.type._context);break;case 22:case 23:Sm()}w=w.return}if(zn=c,Ln=c=Cl(c.current,null),jn=Qi=m,Mn=0,Rd=null,xm=Rs=Su=0,_i=Ih=null,ks!==null){for(m=0;m<ks.length;m++)if(w=ks[m],A=w.interleaved,A!==null){w.interleaved=null;var j=A.next,V=w.pending;if(V!==null){var ae=V.next;V.next=j,A.next=ae}w.pending=A}ks=null}return c}function Pm(c,m){do{var w=Ln;try{if(Gt(),$.current=Qn,de){for(var A=K.memoizedState;A!==null;){var j=A.queue;j!==null&&(j.pending=null),A=A.next}de=!1}if(q=0,ue=re=K=null,pe=!1,me=0,Ic.current=null,w===null||w.return===null){Mn=1,Rd=m,Ln=null;break}e:{var V=c,ae=w.return,Pe=w,Oe=m;if(m=jn,Pe.flags|=32768,Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var et=Oe,mt=Pe,xt=mt.tag;if((mt.mode&1)===0&&(xt===0||xt===11||xt===15)){var dt=mt.alternate;dt?(mt.updateQueue=dt.updateQueue,mt.memoizedState=dt.memoizedState,mt.lanes=dt.lanes):(mt.updateQueue=null,mt.memoizedState=null)}var kt=lm(ae);if(kt!==null){kt.flags&=-257,Ug(kt,ae,Pe,V,m),kt.mode&1&&_u(V,et,m),m=kt,Oe=et;var zt=m.updateQueue;if(zt===null){var Vt=new Set;Vt.add(Oe),m.updateQueue=Vt}else zt.add(Oe);break e}else{if((m&1)===0){_u(V,et,m),Tm();break e}Oe=Error(n(426))}}else if(on&&Pe.mode&1){var An=lm(ae);if(An!==null){(An.flags&65536)===0&&(An.flags|=256),Ug(An,ae,Pe,V,m),yc(ya(Oe,Pe));break e}}V=Oe=ya(Oe,Pe),Mn!==4&&(Mn=2),Ih===null?Ih=[V]:Ih.push(V),V=ae;do{switch(V.tag){case 3:V.flags|=65536,m&=-m,V.lanes|=m;var Ze=sm(V,Oe,m);xc(V,Ze);break e;case 1:Pe=Oe;var je=V.type,Ke=V.stateNode;if((V.flags&128)===0&&(typeof je.getDerivedStateFromError=="function"||Ke!==null&&typeof Ke.componentDidCatch=="function"&&(Pu===null||!Pu.has(Ke)))){V.flags|=65536,m&=-m,V.lanes|=m;var St=vu(V,Pe,m);xc(V,St);break e}}V=V.return}while(V!==null)}ny(w)}catch(Wt){m=Wt,Ln===w&&w!==null&&(Ln=w=w.return);continue}break}while(!0)}function ey(){var c=Ac.current;return Ac.current=Qn,c===null?Qn:c}function Tm(){(Mn===0||Mn===3||Mn===2)&&(Mn=4),zn===null||(Su&268435455)===0&&(Rs&268435455)===0||Ls(zn,jn)}function Eu(c,m){var w=Fr;Fr|=2;var A=ey();(zn!==c||jn!==m)&&(zs=null,Cu(c,m));do try{ty();break}catch(j){Pm(c,j)}while(!0);if(Gt(),Fr=w,Ac.current=A,Ln!==null)throw Error(n(261));return zn=null,jn=0,Mn}function ty(){for(;Ln!==null;)ry(Ln)}function A_(){for(;Ln!==null&&!Eo();)ry(Ln)}function ry(c){var m=Fd(c.alternate,c,Qi);c.memoizedProps=c.pendingProps,m===null?ny(c):Ln=m,Ic.current=null}function ny(c){var m=c;do{var w=m.alternate;if(c=m.return,(m.flags&32768)===0){if(w=Hg(w,m,Qi),w!==null){Ln=w;return}}else{if(w=T_(w,m),w!==null){w.flags&=32767,Ln=w;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Mn=6,Ln=null;return}}if(m=m.sibling,m!==null){Ln=m;return}Ln=m=c}while(m!==null);Mn===0&&(Mn=5)}function Rc(c,m,w){var A=Lr,j=Qa.transition;try{Qa.transition=null,Lr=1,I_(c,m,w,A)}finally{Qa.transition=j,Lr=A}return null}function I_(c,m,w,A){do zh();while(Tu!==null);if((Fr&6)!==0)throw Error(n(327));w=c.finishedWork;var j=c.finishedLanes;if(w===null)return null;if(c.finishedWork=null,c.finishedLanes=0,w===c.current)throw Error(n(177));c.callbackNode=null,c.callbackPriority=0;var V=w.lanes|w.childLanes;if(Ef(c,V),c===zn&&(Ln=zn=null,jn=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||ap||(ap=!0,oy(us,function(){return zh(),null})),V=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||V){V=Qa.transition,Qa.transition=null;var ae=Lr;Lr=1;var Pe=Fr;Fr|=4,Ic.current=null,E_(c,w),Qg(w,c),am(fo),so=!!cc,fo=cc=null,c.current=w,Od(w),el(),Fr=Pe,Lr=ae,Qa.transition=V}else c.current=w;if(ap&&(ap=!1,Tu=c,kh=j),V=c.pendingLanes,V===0&&(Pu=null),ah(w.stateNode),xa(c,br()),m!==null)for(A=c.onRecoverableError,w=0;w<m.length;w++)j=m[w],A(j.value,{componentStack:j.stack,digest:j.digest});if(ip)throw ip=!1,c=bm,bm=null,c;return(kh&1)!==0&&c.tag!==0&&zh(),V=c.pendingLanes,(V&1)!==0?c===Ld?Dh++:(Dh=0,Ld=c):Dh=0,Cs(),null}function zh(){if(Tu!==null){var c=$a(kh),m=Qa.transition,w=Lr;try{if(Qa.transition=null,Lr=16>c?16:c,Tu===null)var A=!1;else{if(c=Tu,Tu=null,kh=0,(Fr&6)!==0)throw Error(n(331));var j=Fr;for(Fr|=4,Nt=c.current;Nt!==null;){var V=Nt,ae=V.child;if((Nt.flags&16)!==0){var Pe=V.deletions;if(Pe!==null){for(var Oe=0;Oe<Pe.length;Oe++){var et=Pe[Oe];for(Nt=et;Nt!==null;){var mt=Nt;switch(mt.tag){case 0:case 11:case 15:kd(8,mt,V)}var xt=mt.child;if(xt!==null)xt.return=mt,Nt=xt;else for(;Nt!==null;){mt=Nt;var dt=mt.sibling,kt=mt.return;if(gm(mt),mt===et){Nt=null;break}if(dt!==null){dt.return=kt,Nt=dt;break}Nt=kt}}}var zt=V.alternate;if(zt!==null){var Vt=zt.child;if(Vt!==null){zt.child=null;do{var An=Vt.sibling;Vt.sibling=null,Vt=An}while(Vt!==null)}}Nt=V}}if((V.subtreeFlags&2064)!==0&&ae!==null)ae.return=V,Nt=ae;else e:for(;Nt!==null;){if(V=Nt,(V.flags&2048)!==0)switch(V.tag){case 0:case 11:case 15:kd(9,V,V.return)}var Ze=V.sibling;if(Ze!==null){Ze.return=V.return,Nt=Ze;break e}Nt=V.return}}var je=c.current;for(Nt=je;Nt!==null;){ae=Nt;var Ke=ae.child;if((ae.subtreeFlags&2064)!==0&&Ke!==null)Ke.return=ae,Nt=Ke;else e:for(ae=je;Nt!==null;){if(Pe=Nt,(Pe.flags&2048)!==0)try{switch(Pe.tag){case 0:case 11:case 15:Mh(9,Pe)}}catch(Wt){xn(Pe,Pe.return,Wt)}if(Pe===ae){Nt=null;break e}var St=Pe.sibling;if(St!==null){St.return=Pe.return,Nt=St;break e}Nt=Pe.return}}if(Fr=j,Cs(),qi&&typeof qi.onPostCommitFiberRoot=="function")try{qi.onPostCommitFiberRoot(Bu,c)}catch{}A=!0}return A}finally{Lr=w,Qa.transition=m}}return!1}function Cm(c,m,w){m=ya(w,m),m=sm(c,m,1),c=zi(c,m,1),m=Ji(),c!==null&&(nl(c,1,m),xa(c,m))}function xn(c,m,w){if(c.tag===3)Cm(c,c,w);else for(;m!==null;){if(m.tag===3){Cm(m,c,w);break}else if(m.tag===1){var A=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(Pu===null||!Pu.has(A))){c=ya(w,c),c=vu(m,c,1),m=zi(m,c,1),c=Ji(),m!==null&&(nl(m,1,c),xa(m,c));break}}m=m.return}}function iy(c,m,w){var A=c.pingCache;A!==null&&A.delete(m),m=Ji(),c.pingedLanes|=c.suspendedLanes&w,zn===c&&(jn&w)===w&&(Mn===4||Mn===3&&(jn&130023424)===jn&&500>br()-zd?Cu(c,0):xm|=w),xa(c,m)}function Em(c,m){m===0&&((c.mode&1)===0?m=1:(m=Mo,Mo<<=1,(Mo&130023424)===0&&(Mo=4194304)));var w=Ji();c=Ri(c,m),c!==null&&(nl(c,m,w),xa(c,w))}function ay(c){var m=c.memoizedState,w=0;m!==null&&(w=m.retryLane),Em(c,w)}function k_(c,m){var w=0;switch(c.tag){case 13:var A=c.stateNode,j=c.memoizedState;j!==null&&(w=j.retryLane);break;case 19:A=c.stateNode;break;default:throw Error(n(314))}A!==null&&A.delete(m),Em(c,w)}var Fd;Fd=function(c,m,w){if(c!==null)if(c.memoizedProps!==m.pendingProps||Di.current)va=!0;else{if((c.lanes&w)===0&&(m.flags&128)===0)return va=!1,Zg(c,m,w);va=(c.flags&131072)!==0}else va=!1,on&&(m.flags&1048576)!==0&&lu(m,Es,m.index);switch(m.lanes=0,m.tag){case 2:var A=m.type;Jf(c,m),c=m.pendingProps;var j=Za(m,Kn.current);mo(m,w),j=Ee(null,m,A,c,j,w);var V=ve();return m.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,gi(A)?(V=!0,_l(m)):V=!1,m.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,sn(m),j.updater=Bo,m.stateNode=j,j._reactInternals=m,bc(m,A,c,w),m=xu(null,m,A,!0,V,w)):(m.tag=0,on&&V&&Ms(m),_a(null,m,j,w),m=m.child),m;case 16:A=m.elementType;e:{switch(Jf(c,m),c=m.pendingProps,j=A._init,A=j(A._payload),m.type=A,j=m.tag=D_(A),c=ga(A,c),j){case 0:m=Kf(null,m,A,c,w);break e;case 1:m=hm(null,m,A,c,w);break e;case 11:m=cm(null,m,A,c,w);break e;case 14:m=Gg(null,m,A,ga(A.type,c),w);break e}throw Error(n(306,A,""))}return m;case 0:return A=m.type,j=m.pendingProps,j=m.elementType===A?j:ga(A,j),Kf(c,m,A,j,w);case 1:return A=m.type,j=m.pendingProps,j=m.elementType===A?j:ga(A,j),hm(c,m,A,j,w);case 3:e:{if(Wg(m),c===null)throw Error(n(387));A=m.pendingProps,V=m.memoizedState,j=V.element,Id(c,m),go(m,A,null,w);var ae=m.memoizedState;if(A=ae.element,V.isDehydrated)if(V={element:A,isDehydrated:!1,cache:ae.cache,pendingSuspenseBoundaries:ae.pendingSuspenseBoundaries,transitions:ae.transitions},m.updateQueue.baseState=V,m.memoizedState=V,m.flags&256){j=ya(Error(n(423)),m),m=Th(c,m,A,w,j);break e}else if(A!==j){j=ya(Error(n(424)),m),m=Th(c,m,A,w,j);break e}else for(Oi=Wa(m.stateNode.containerInfo.firstChild),rr=m,on=!0,Ki=null,w=Md(m,null,A,w),m.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(hu(),A===j){m=$o(c,m,w);break e}_a(c,m,A,w)}m=m.child}return m;case 5:return y(m),c===null&&uu(m),A=m.type,j=m.pendingProps,V=c!==null?c.memoizedProps:null,ae=j.children,Cd(A,j)?ae=null:V!==null&&Cd(A,V)&&(m.flags|=32),Hf(c,m),_a(c,m,ae,w),m.child;case 6:return c===null&&uu(m),null;case 13:return dm(c,m,w);case 4:return s(m,m.stateNode.containerInfo),A=m.pendingProps,c===null?m.child=bl(m,null,A,w):_a(c,m,A,w),m.child;case 11:return A=m.type,j=m.pendingProps,j=m.elementType===A?j:ga(A,j),cm(c,m,A,j,w);case 7:return _a(c,m,m.pendingProps,w),m.child;case 8:return _a(c,m,m.pendingProps.children,w),m.child;case 12:return _a(c,m,m.pendingProps.children,w),m.child;case 10:e:{if(A=m.type._context,j=m.pendingProps,V=m.memoizedProps,ae=j.value,Cr(Ph,A._currentValue),A._currentValue=ae,V!==null)if(oi(V.value,ae)){if(V.children===j.children&&!Di.current){m=$o(c,m,w);break e}}else for(V=m.child,V!==null&&(V.return=m);V!==null;){var Pe=V.dependencies;if(Pe!==null){ae=V.child;for(var Oe=Pe.firstContext;Oe!==null;){if(Oe.context===A){if(V.tag===1){Oe=vi(-1,w&-w),Oe.tag=2;var et=V.updateQueue;if(et!==null){et=et.shared;var mt=et.pending;mt===null?Oe.next=Oe:(Oe.next=mt.next,mt.next=Oe),et.pending=Oe}}V.lanes|=w,Oe=V.alternate,Oe!==null&&(Oe.lanes|=w),_c(V.return,w,m),Pe.lanes|=w;break}Oe=Oe.next}}else if(V.tag===10)ae=V.type===m.type?null:V.child;else if(V.tag===18){if(ae=V.return,ae===null)throw Error(n(341));ae.lanes|=w,Pe=ae.alternate,Pe!==null&&(Pe.lanes|=w),_c(ae,w,m),ae=V.sibling}else ae=V.child;if(ae!==null)ae.return=V;else for(ae=V;ae!==null;){if(ae===m){ae=null;break}if(V=ae.sibling,V!==null){V.return=ae.return,ae=V;break}ae=ae.return}V=ae}_a(c,m,j.children,w),m=m.child}return m;case 9:return j=m.type,A=m.pendingProps.children,mo(m,w),j=tn(j),A=A(j),m.flags|=1,_a(c,m,A,w),m.child;case 14:return A=m.type,j=ga(A,m.pendingProps),j=ga(A.type,j),Gg(c,m,A,j,w);case 15:return Zf(c,m,m.type,m.pendingProps,w);case 17:return A=m.type,j=m.pendingProps,j=m.elementType===A?j:ga(A,j),Jf(c,m),m.tag=1,gi(A)?(c=!0,_l(m)):c=!1,mo(m,w),Jn(m,A,j),bc(m,A,j,w),xu(null,m,A,!0,c,w);case 19:return pm(c,m,w);case 22:return qg(c,m,w)}throw Error(n(156,m.tag))};function oy(c,m){return Ba(c,m)}function sy(c,m,w,A){this.tag=c,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xo(c,m,w,A){return new sy(c,m,w,A)}function Mm(c){return c=c.prototype,!(!c||!c.isReactComponent)}function D_(c){if(typeof c=="function")return Mm(c)?1:0;if(c!=null){if(c=c.$$typeof,c===It)return 11;if(c===lr)return 14}return 2}function Cl(c,m){var w=c.alternate;return w===null?(w=xo(c.tag,m,c.key,c.mode),w.elementType=c.elementType,w.type=c.type,w.stateNode=c.stateNode,w.alternate=c,c.alternate=w):(w.pendingProps=m,w.type=c.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=c.flags&14680064,w.childLanes=c.childLanes,w.lanes=c.lanes,w.child=c.child,w.memoizedProps=c.memoizedProps,w.memoizedState=c.memoizedState,w.updateQueue=c.updateQueue,m=c.dependencies,w.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},w.sibling=c.sibling,w.index=c.index,w.ref=c.ref,w}function sp(c,m,w,A,j,V){var ae=2;if(A=c,typeof c=="function")Mm(c)&&(ae=1);else if(typeof c=="string")ae=5;else e:switch(c){case Ne:return zc(w.children,j,V,m);case Qe:ae=8,j|=8;break;case ht:return c=xo(12,w,m,j|2),c.elementType=ht,c.lanes=V,c;case Ft:return c=xo(13,w,m,j),c.elementType=Ft,c.lanes=V,c;case er:return c=xo(19,w,m,j),c.elementType=er,c.lanes=V,c;case Mt:return Mu(w,j,V,m);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case Et:ae=10;break e;case vt:ae=9;break e;case It:ae=11;break e;case lr:ae=14;break e;case vr:ae=16,A=null;break e}throw Error(n(130,c==null?c:typeof c,""))}return m=xo(ae,w,m,j),m.elementType=c,m.type=A,m.lanes=V,m}function zc(c,m,w,A){return c=xo(7,c,A,m),c.lanes=w,c}function Mu(c,m,w,A){return c=xo(22,c,A,m),c.elementType=Mt,c.lanes=w,c.stateNode={isHidden:!1},c}function lp(c,m,w){return c=xo(6,c,null,m),c.lanes=w,c}function Bd(c,m,w){return m=xo(4,c.children!==null?c.children:[],c.key,m),m.lanes=w,m.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},m}function ly(c,m,w,A,j){this.tag=m,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gu(0),this.expirationTimes=Gu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gu(0),this.identifierPrefix=A,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function Nn(c,m,w,A,j,V,ae,Pe,Oe){return c=new ly(c,m,w,Pe,Oe),m===1?(m=1,V===!0&&(m|=8)):m=0,V=xo(3,null,null,m),c.current=V,V.stateNode=c,V.memoizedState={element:A,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},sn(V),c}function Am(c,m,w){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ae,key:A==null?null:""+A,children:c,containerInfo:m,implementation:w}}function uy(c){if(!c)return Hn;c=c._reactInternals;e:{if(ua(c)!==c||c.tag!==1)throw Error(n(170));var m=c;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(gi(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(n(171))}if(c.tag===1){var w=c.type;if(gi(w))return fc(c,w,m)}return m}function Im(c,m,w,A,j,V,ae,Pe,Oe){return c=Nn(w,A,!0,c,j,V,ae,Pe,Oe),c.context=uy(null),w=c.current,A=Ji(),j=Tl(w),V=vi(A,j),V.callback=m??null,zi(w,V,j),c.current.lanes=j,nl(c,j,A),xa(c,A),c}function qo(c,m,w,A){var j=m.current,V=Ji(),ae=Tl(j);return w=uy(w),m.context===null?m.context=w:m.pendingContext=w,m=vi(V,ae),m.payload={element:c},A=A===void 0?null:A,A!==null&&(m.callback=A),c=zi(j,m,ae),c!==null&&(Ra(c,j,ae,V),fu(c,j,ae)),ae}function Lh(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function cy(c,m){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var w=c.retryLane;c.retryLane=w!==0&&w<m?w:m}}function km(c,m){cy(c,m),(c=c.alternate)&&cy(c,m)}function O_(){return null}var Dm=typeof reportError=="function"?reportError:function(c){console.error(c)};function $d(c){this._internalRoot=c}Vd.prototype.render=$d.prototype.render=function(c){var m=this._internalRoot;if(m===null)throw Error(n(409));qo(c,m,null,null)},Vd.prototype.unmount=$d.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var m=c.containerInfo;Oc(function(){qo(null,c,null,null)}),m[On]=null}};function Vd(c){this._internalRoot=c}Vd.prototype.unstable_scheduleHydration=function(c){if(c){var m=hs();c={blockedOn:null,target:c,priority:m};for(var w=0;w<pn.length&&m!==0&&m<pn[w].priority;w++);pn.splice(w,0,c),w===0&&Wu(c)}};function Lc(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function El(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function Ud(){}function up(c,m,w,A,j){if(j){if(typeof A=="function"){var V=A;A=function(){var et=Lh(ae);V.call(et)}}var ae=Im(m,A,c,0,null,!1,!1,"",Ud);return c._reactRootContainer=ae,c[On]=ae.current,eu(c.nodeType===8?c.parentNode:c),Oc(),ae}for(;j=c.lastChild;)c.removeChild(j);if(typeof A=="function"){var Pe=A;A=function(){var et=Lh(Oe);Pe.call(et)}}var Oe=Nn(c,0,!1,null,null,!1,!1,"",Ud);return c._reactRootContainer=Oe,c[On]=Oe.current,eu(c.nodeType===8?c.parentNode:c),Oc(function(){qo(m,Oe,w,A)}),Oe}function cp(c,m,w,A,j){var V=w._reactRootContainer;if(V){var ae=V;if(typeof j=="function"){var Pe=j;j=function(){var Oe=Lh(ae);Pe.call(Oe)}}qo(m,ae,c,j)}else ae=up(w,m,c,j,A);return Lh(ae)}wr=function(c){switch(c.tag){case 3:var m=c.stateNode;if(m.current.memoizedState.isDehydrated){var w=Vl(m.pendingLanes);w!==0&&(Ul(m,w|1),xa(m,br()),(Fr&6)===0&&(kc=br()+500,Cs()))}break;case 13:Oc(function(){var A=Ri(c,1);if(A!==null){var j=Ji();Ra(A,c,1,j)}}),km(c,1)}},Va=function(c){if(c.tag===13){var m=Ri(c,134217728);if(m!==null){var w=Ji();Ra(m,c,134217728,w)}km(c,134217728)}},oo=function(c){if(c.tag===13){var m=Tl(c),w=Ri(c,m);if(w!==null){var A=Ji();Ra(w,c,m,A)}km(c,m)}},hs=function(){return Lr},sh=function(c,m){var w=Lr;try{return Lr=c,m()}finally{Lr=w}},Re=function(c,m,w){switch(m){case"input":if(Jr(c,w),m=w.name,w.type==="radio"&&m!=null){for(w=c;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<w.length;m++){var A=w[m];if(A!==c&&A.form===c.form){var j=iu(A);if(!j)throw Error(n(90));yt(A),Jr(A,j)}}}break;case"textarea":no(c,w);break;case"select":m=w.value,m!=null&&oa(c,!!w.multiple,m,!1)}},Pt=Nd,Kt=Oc;var R_={usingClientEntryPoint:!1,Events:[gl,po,iu,nt,Me,Nd]},jh={findFiberByHostInstance:Oa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hy={bundleType:jh.bundleType,version:jh.version,rendererPackageName:jh.rendererPackageName,rendererConfig:jh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ce.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=Gi(c),c===null?null:c.stateNode},findFiberByHostInstance:jh.findFiberByHostInstance||O_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hp.isDisabled&&hp.supportsFiber)try{Bu=hp.inject(hy),qi=hp}catch{}}return bo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R_,bo.createPortal=function(c,m){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lc(m))throw Error(n(200));return Am(c,m,null,w)},bo.createRoot=function(c,m){if(!Lc(c))throw Error(n(299));var w=!1,A="",j=Dm;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onRecoverableError!==void 0&&(j=m.onRecoverableError)),m=Nn(c,1,!1,null,null,w,!1,A,j),c[On]=m.current,eu(c.nodeType===8?c.parentNode:c),new $d(m)},bo.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var m=c._reactInternals;if(m===void 0)throw typeof c.render=="function"?Error(n(188)):(c=Object.keys(c).join(","),Error(n(268,c)));return c=Gi(m),c=c===null?null:c.stateNode,c},bo.flushSync=function(c){return Oc(c)},bo.hydrate=function(c,m,w){if(!El(m))throw Error(n(200));return cp(null,c,m,!0,w)},bo.hydrateRoot=function(c,m,w){if(!Lc(c))throw Error(n(405));var A=w!=null&&w.hydratedSources||null,j=!1,V="",ae=Dm;if(w!=null&&(w.unstable_strictMode===!0&&(j=!0),w.identifierPrefix!==void 0&&(V=w.identifierPrefix),w.onRecoverableError!==void 0&&(ae=w.onRecoverableError)),m=Im(m,null,c,1,w??null,j,!1,V,ae),c[On]=m.current,eu(c),A)for(c=0;c<A.length;c++)w=A[c],j=w._getVersion,j=j(w._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[w,j]:m.mutableSourceEagerHydrationData.push(w,j);return new Vd(m)},bo.render=function(c,m,w){if(!El(m))throw Error(n(200));return cp(null,c,m,!1,w)},bo.unmountComponentAtNode=function(c){if(!El(c))throw Error(n(40));return c._reactRootContainer?(Oc(function(){cp(null,null,c,!1,function(){c._reactRootContainer=null,c[On]=null})}),!0):!1},bo.unstable_batchedUpdates=Nd,bo.unstable_renderSubtreeIntoContainer=function(c,m,w,A){if(!El(w))throw Error(n(200));if(c==null||c._reactInternals===void 0)throw Error(n(38));return cp(c,m,w,!1,A)},bo.version="18.3.1-next-f1338f8080-20240426",bo}var ES;function FM(){if(ES)return Y_.exports;ES=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Y_.exports=N4(),Y_.exports}var MS;function F4(){if(MS)return xy;MS=1;var e=FM();return xy.createRoot=e.createRoot,xy.hydrateRoot=e.hydrateRoot,xy}var B4=F4();const $4=Fl(B4);var jm={},AS;function V4(){if(AS)return jm;AS=1,Object.defineProperty(jm,"__esModule",{value:!0}),jm.parse=p,jm.serialize=E;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,h=Object.prototype.toString,g=(()=>{const R=function(){};return R.prototype=Object.create(null),R})();function p(R,z){const B=new g,U=R.length;if(U<2)return B;const Z=z?.decode||C;let Q=0;do{const le=R.indexOf("=",Q);if(le===-1)break;const se=R.indexOf(";",Q),Ce=se===-1?U:se;if(le>Ce){Q=R.lastIndexOf(";",le-1)+1;continue}const be=o(R,Q,le),Ae=P(R,le,be),Ne=R.slice(be,Ae);if(B[Ne]===void 0){let Qe=o(R,le+1,Ce),ht=P(R,Ce,Qe);const Et=Z(R.slice(Qe,ht));B[Ne]=Et}Q=Ce+1}while(Q<U);return B}function o(R,z,B){do{const U=R.charCodeAt(z);if(U!==32&&U!==9)return z}while(++z<B);return B}function P(R,z,B){for(;z>B;){const U=R.charCodeAt(--z);if(U!==32&&U!==9)return z+1}return B}function E(R,z,B){const U=B?.encode||encodeURIComponent;if(!e.test(R))throw new TypeError(`argument name is invalid: ${R}`);const Z=U(z);if(!t.test(Z))throw new TypeError(`argument val is invalid: ${z}`);let Q=R+"="+Z;if(!B)return Q;if(B.maxAge!==void 0){if(!Number.isInteger(B.maxAge))throw new TypeError(`option maxAge is invalid: ${B.maxAge}`);Q+="; Max-Age="+B.maxAge}if(B.domain){if(!n.test(B.domain))throw new TypeError(`option domain is invalid: ${B.domain}`);Q+="; Domain="+B.domain}if(B.path){if(!a.test(B.path))throw new TypeError(`option path is invalid: ${B.path}`);Q+="; Path="+B.path}if(B.expires){if(!I(B.expires)||!Number.isFinite(B.expires.valueOf()))throw new TypeError(`option expires is invalid: ${B.expires}`);Q+="; Expires="+B.expires.toUTCString()}if(B.httpOnly&&(Q+="; HttpOnly"),B.secure&&(Q+="; Secure"),B.partitioned&&(Q+="; Partitioned"),B.priority)switch(typeof B.priority=="string"?B.priority.toLowerCase():void 0){case"low":Q+="; Priority=Low";break;case"medium":Q+="; Priority=Medium";break;case"high":Q+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${B.priority}`)}if(B.sameSite)switch(typeof B.sameSite=="string"?B.sameSite.toLowerCase():B.sameSite){case!0:case"strict":Q+="; SameSite=Strict";break;case"lax":Q+="; SameSite=Lax";break;case"none":Q+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${B.sameSite}`)}return Q}function C(R){if(R.indexOf("%")===-1)return R;try{return decodeURIComponent(R)}catch{return R}}function I(R){return h.call(R)==="[object Date]"}return jm}V4();var IS="popstate";function U4(e={}){function t(h,g){let{pathname:p="/",search:o="",hash:P=""}=vf(h.location.hash.substring(1));return!p.startsWith("/")&&!p.startsWith(".")&&(p="/"+p),r1("",{pathname:p,search:o,hash:P},g.state&&g.state.usr||null,g.state&&g.state.key||"default")}function n(h,g){let p=h.document.querySelector("base"),o="";if(p&&p.getAttribute("href")){let P=h.location.href,E=P.indexOf("#");o=E===-1?P:P.slice(0,E)}return o+"#"+(typeof g=="string"?g:ag(g))}function a(h,g){jl(h.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(g)})`)}return q4(t,n,a,e)}function qn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function jl(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function G4(){return Math.random().toString(36).substring(2,10)}function kS(e,t){return{usr:e.state,key:e.key,idx:t}}function r1(e,t,n=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?vf(t):t,state:n,key:t&&t.key||a||G4()}}function ag({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function vf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function q4(e,t,n,a={}){let{window:h=document.defaultView,v5Compat:g=!1}=a,p=h.history,o="POP",P=null,E=C();E==null&&(E=0,p.replaceState({...p.state,idx:E},""));function C(){return(p.state||{idx:null}).idx}function I(){o="POP";let Z=C(),Q=Z==null?null:Z-E;E=Z,P&&P({action:o,location:U.location,delta:Q})}function R(Z,Q){o="PUSH";let le=r1(U.location,Z,Q);n&&n(le,Z),E=C()+1;let se=kS(le,E),Ce=U.createHref(le);try{p.pushState(se,"",Ce)}catch(be){if(be instanceof DOMException&&be.name==="DataCloneError")throw be;h.location.assign(Ce)}g&&P&&P({action:o,location:U.location,delta:1})}function z(Z,Q){o="REPLACE";let le=r1(U.location,Z,Q);n&&n(le,Z),E=C();let se=kS(le,E),Ce=U.createHref(le);p.replaceState(se,"",Ce),g&&P&&P({action:o,location:U.location,delta:0})}function B(Z){return W4(Z)}let U={get action(){return o},get location(){return e(h,p)},listen(Z){if(P)throw new Error("A history only accepts one active listener");return h.addEventListener(IS,I),P=Z,()=>{h.removeEventListener(IS,I),P=null}},createHref(Z){return t(h,Z)},createURL:B,encodeLocation(Z){let Q=B(Z);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:R,replace:z,go(Z){return p.go(Z)}};return U}function W4(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),qn(n,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:ag(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function BM(e,t,n="/"){return Z4(e,t,n,!1)}function Z4(e,t,n,a){let h=typeof t=="string"?vf(t):t,g=Wc(h.pathname||"/",n);if(g==null)return null;let p=$M(e);H4(p);let o=null;for(let P=0;o==null&&P<p.length;++P){let E=aR(g);o=nR(p[P],E,a)}return o}function $M(e,t=[],n=[],a=""){let h=(g,p,o)=>{let P={relativePath:o===void 0?g.path||"":o,caseSensitive:g.caseSensitive===!0,childrenIndex:p,route:g};P.relativePath.startsWith("/")&&(qn(P.relativePath.startsWith(a),`Absolute route path "${P.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),P.relativePath=P.relativePath.slice(a.length));let E=Uc([a,P.relativePath]),C=n.concat(P);g.children&&g.children.length>0&&(qn(g.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),$M(g.children,t,C,E)),!(g.path==null&&!g.index)&&t.push({path:E,score:tR(E,g.index),routesMeta:C})};return e.forEach((g,p)=>{if(g.path===""||!g.path?.includes("?"))h(g,p);else for(let o of VM(g.path))h(g,p,o)}),t}function VM(e){let t=e.split("/");if(t.length===0)return[];let[n,...a]=t,h=n.endsWith("?"),g=n.replace(/\?$/,"");if(a.length===0)return h?[g,""]:[g];let p=VM(a.join("/")),o=[];return o.push(...p.map(P=>P===""?g:[g,P].join("/"))),h&&o.push(...p),o.map(P=>e.startsWith("/")&&P===""?"/":P)}function H4(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:rR(t.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var K4=/^:[\w-]+$/,X4=3,Y4=2,Q4=1,J4=10,eR=-2,DS=e=>e==="*";function tR(e,t){let n=e.split("/"),a=n.length;return n.some(DS)&&(a+=eR),t&&(a+=Y4),n.filter(h=>!DS(h)).reduce((h,g)=>h+(K4.test(g)?X4:g===""?Q4:J4),a)}function rR(e,t){return e.length===t.length&&e.slice(0,-1).every((a,h)=>a===t[h])?e[e.length-1]-t[t.length-1]:0}function nR(e,t,n=!1){let{routesMeta:a}=e,h={},g="/",p=[];for(let o=0;o<a.length;++o){let P=a[o],E=o===a.length-1,C=g==="/"?t:t.slice(g.length)||"/",I=Ky({path:P.relativePath,caseSensitive:P.caseSensitive,end:E},C),R=P.route;if(!I&&E&&n&&!a[a.length-1].route.index&&(I=Ky({path:P.relativePath,caseSensitive:P.caseSensitive,end:!1},C)),!I)return null;Object.assign(h,I.params),p.push({params:h,pathname:Uc([g,I.pathname]),pathnameBase:uR(Uc([g,I.pathnameBase])),route:R}),I.pathnameBase!=="/"&&(g=Uc([g,I.pathnameBase]))}return p}function Ky(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=iR(e.path,e.caseSensitive,e.end),h=t.match(n);if(!h)return null;let g=h[0],p=g.replace(/(.)\/+$/,"$1"),o=h.slice(1);return{params:a.reduce((E,{paramName:C,isOptional:I},R)=>{if(C==="*"){let B=o[R]||"";p=g.slice(0,g.length-B.length).replace(/(.)\/+$/,"$1")}const z=o[R];return I&&!z?E[C]=void 0:E[C]=(z||"").replace(/%2F/g,"/"),E},{}),pathname:g,pathnameBase:p,pattern:e}}function iR(e,t=!1,n=!0){jl(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],h="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,o,P)=>(a.push({paramName:o,isOptional:P!=null}),P?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),h+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?h+="\\/*$":e!==""&&e!=="/"&&(h+="(?:(?=\\/|$))"),[new RegExp(h,t?void 0:"i"),a]}function aR(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return jl(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Wc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,a=e.charAt(n);return a&&a!=="/"?null:e.slice(n)||"/"}function oR(e,t="/"){let{pathname:n,search:a="",hash:h=""}=typeof e=="string"?vf(e):e;return{pathname:n?n.startsWith("/")?n:sR(n,t):t,search:cR(a),hash:hR(h)}}function sR(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(h=>{h===".."?n.length>1&&n.pop():h!=="."&&n.push(h)}),n.length>1?n.join("/"):"/"}function e0(e,t,n,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lR(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function UM(e){let t=lR(e);return t.map((n,a)=>a===t.length-1?n.pathname:n.pathnameBase)}function GM(e,t,n,a=!1){let h;typeof e=="string"?h=vf(e):(h={...e},qn(!h.pathname||!h.pathname.includes("?"),e0("?","pathname","search",h)),qn(!h.pathname||!h.pathname.includes("#"),e0("#","pathname","hash",h)),qn(!h.search||!h.search.includes("#"),e0("#","search","hash",h)));let g=e===""||h.pathname==="",p=g?"/":h.pathname,o;if(p==null)o=n;else{let I=t.length-1;if(!a&&p.startsWith("..")){let R=p.split("/");for(;R[0]==="..";)R.shift(),I-=1;h.pathname=R.join("/")}o=I>=0?t[I]:"/"}let P=oR(h,o),E=p&&p!=="/"&&p.endsWith("/"),C=(g||p===".")&&n.endsWith("/");return!P.pathname.endsWith("/")&&(E||C)&&(P.pathname+="/"),P}var Uc=e=>e.join("/").replace(/\/\/+/g,"/"),uR=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),cR=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,hR=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function dR(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var qM=["POST","PUT","PATCH","DELETE"];new Set(qM);var fR=["GET",...qM];new Set(fR);var Vp=H.createContext(null);Vp.displayName="DataRouter";var Nv=H.createContext(null);Nv.displayName="DataRouterState";var WM=H.createContext({isTransitioning:!1});WM.displayName="ViewTransition";var pR=H.createContext(new Map);pR.displayName="Fetchers";var mR=H.createContext(null);mR.displayName="Await";var ju=H.createContext(null);ju.displayName="Navigation";var Pg=H.createContext(null);Pg.displayName="Location";var Jc=H.createContext({outlet:null,matches:[],isDataRoute:!1});Jc.displayName="Route";var vb=H.createContext(null);vb.displayName="RouteError";function gR(e,{relative:t}={}){qn(Tg(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=H.useContext(ju),{hash:h,pathname:g,search:p}=Cg(e,{relative:t}),o=g;return n!=="/"&&(o=g==="/"?n:Uc([n,g])),a.createHref({pathname:o,search:p,hash:h})}function Tg(){return H.useContext(Pg)!=null}function Yh(){return qn(Tg(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(Pg).location}var ZM="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function HM(e){H.useContext(ju).static||H.useLayoutEffect(e)}function yR(){let{isDataRoute:e}=H.useContext(Jc);return e?IR():vR()}function vR(){qn(Tg(),"useNavigate() may be used only in the context of a <Router> component.");let e=H.useContext(Vp),{basename:t,navigator:n}=H.useContext(ju),{matches:a}=H.useContext(Jc),{pathname:h}=Yh(),g=JSON.stringify(UM(a)),p=H.useRef(!1);return HM(()=>{p.current=!0}),H.useCallback((P,E={})=>{if(jl(p.current,ZM),!p.current)return;if(typeof P=="number"){n.go(P);return}let C=GM(P,JSON.parse(g),h,E.relative==="path");e==null&&t!=="/"&&(C.pathname=C.pathname==="/"?t:Uc([t,C.pathname])),(E.replace?n.replace:n.push)(C,E.state,E)},[t,n,g,h,e])}H.createContext(null);function Cg(e,{relative:t}={}){let{matches:n}=H.useContext(Jc),{pathname:a}=Yh(),h=JSON.stringify(UM(n));return H.useMemo(()=>GM(e,JSON.parse(h),a,t==="path"),[e,h,a,t])}function _R(e,t){return KM(e,t)}function KM(e,t,n,a){qn(Tg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=H.useContext(ju),{matches:g}=H.useContext(Jc),p=g[g.length-1],o=p?p.params:{},P=p?p.pathname:"/",E=p?p.pathnameBase:"/",C=p&&p.route;{let Q=C&&C.path||"";XM(P,!C||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${P}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let I=Yh(),R;if(t){let Q=typeof t=="string"?vf(t):t;qn(E==="/"||Q.pathname?.startsWith(E),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),R=Q}else R=I;let z=R.pathname||"/",B=z;if(E!=="/"){let Q=E.replace(/^\//,"").split("/");B="/"+z.replace(/^\//,"").split("/").slice(Q.length).join("/")}let U=BM(e,{pathname:B});jl(C||U!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),jl(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Z=PR(U&&U.map(Q=>Object.assign({},Q,{params:Object.assign({},o,Q.params),pathname:Uc([E,h.encodeLocation?h.encodeLocation(Q.pathname).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?E:Uc([E,h.encodeLocation?h.encodeLocation(Q.pathnameBase).pathname:Q.pathnameBase])})),g,n,a);return t&&Z?H.createElement(Pg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},Z):Z}function xR(){let e=AR(),t=dR(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",h={padding:"0.5rem",backgroundColor:a},g={padding:"2px 4px",backgroundColor:a},p=null;return console.error("Error handled by React Router default ErrorBoundary:",e),p=H.createElement(H.Fragment,null,H.createElement("p",null,"💿 Hey developer 👋"),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:g},"ErrorBoundary")," or"," ",H.createElement("code",{style:g},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},t),n?H.createElement("pre",{style:h},n):null,p)}var bR=H.createElement(xR,null),wR=class extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?H.createElement(Jc.Provider,{value:this.props.routeContext},H.createElement(vb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function SR({routeContext:e,match:t,children:n}){let a=H.useContext(Vp);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),H.createElement(Jc.Provider,{value:e},n)}function PR(e,t=[],n=null,a=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let h=e,g=n?.errors;if(g!=null){let P=h.findIndex(E=>E.route.id&&g?.[E.route.id]!==void 0);qn(P>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(g).join(",")}`),h=h.slice(0,Math.min(h.length,P+1))}let p=!1,o=-1;if(n)for(let P=0;P<h.length;P++){let E=h[P];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(o=P),E.route.id){let{loaderData:C,errors:I}=n,R=E.route.loader&&!C.hasOwnProperty(E.route.id)&&(!I||I[E.route.id]===void 0);if(E.route.lazy||R){p=!0,o>=0?h=h.slice(0,o+1):h=[h[0]];break}}}return h.reduceRight((P,E,C)=>{let I,R=!1,z=null,B=null;n&&(I=g&&E.route.id?g[E.route.id]:void 0,z=E.route.errorElement||bR,p&&(o<0&&C===0?(XM("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,B=null):o===C&&(R=!0,B=E.route.hydrateFallbackElement||null)));let U=t.concat(h.slice(0,C+1)),Z=()=>{let Q;return I?Q=z:R?Q=B:E.route.Component?Q=H.createElement(E.route.Component,null):E.route.element?Q=E.route.element:Q=P,H.createElement(SR,{match:E,routeContext:{outlet:P,matches:U,isDataRoute:n!=null},children:Q})};return n&&(E.route.ErrorBoundary||E.route.errorElement||C===0)?H.createElement(wR,{location:n.location,revalidation:n.revalidation,component:z,error:I,children:Z(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):Z()},null)}function _b(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TR(e){let t=H.useContext(Vp);return qn(t,_b(e)),t}function CR(e){let t=H.useContext(Nv);return qn(t,_b(e)),t}function ER(e){let t=H.useContext(Jc);return qn(t,_b(e)),t}function xb(e){let t=ER(e),n=t.matches[t.matches.length-1];return qn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function MR(){return xb("useRouteId")}function AR(){let e=H.useContext(vb),t=CR("useRouteError"),n=xb("useRouteError");return e!==void 0?e:t.errors?.[n]}function IR(){let{router:e}=TR("useNavigate"),t=xb("useNavigate"),n=H.useRef(!1);return HM(()=>{n.current=!0}),H.useCallback(async(h,g={})=>{jl(n.current,ZM),n.current&&(typeof h=="number"?e.navigate(h):await e.navigate(h,{fromRouteId:t,...g}))},[e,t])}var OS={};function XM(e,t,n){!t&&!OS[e]&&(OS[e]=!0,jl(!1,n))}H.memo(kR);function kR({routes:e,future:t,state:n}){return KM(e,void 0,n,t)}function Dl(e){qn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function DR({basename:e="/",children:t=null,location:n,navigationType:a="POP",navigator:h,static:g=!1}){qn(!Tg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=e.replace(/^\/*/,"/"),o=H.useMemo(()=>({basename:p,navigator:h,static:g,future:{}}),[p,h,g]);typeof n=="string"&&(n=vf(n));let{pathname:P="/",search:E="",hash:C="",state:I=null,key:R="default"}=n,z=H.useMemo(()=>{let B=Wc(P,p);return B==null?null:{location:{pathname:B,search:E,hash:C,state:I,key:R},navigationType:a}},[p,P,E,C,I,R,a]);return jl(z!=null,`<Router basename="${p}"> is not able to match the URL "${P}${E}${C}" because it does not start with the basename, so the <Router> won't render anything.`),z==null?null:H.createElement(ju.Provider,{value:o},H.createElement(Pg.Provider,{children:t,value:z}))}function OR({children:e,location:t}){return _R(n1(e),t)}function n1(e,t=[]){let n=[];return H.Children.forEach(e,(a,h)=>{if(!H.isValidElement(a))return;let g=[...t,h];if(a.type===H.Fragment){n.push.apply(n,n1(a.props.children,g));return}qn(a.type===Dl,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),qn(!a.props.index||!a.props.children,"An index route cannot have child routes.");let p={id:a.props.id||g.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(p.children=n1(a.props.children,g)),n.push(p)}),n}var By="get",$y="application/x-www-form-urlencoded";function Fv(e){return e!=null&&typeof e.tagName=="string"}function RR(e){return Fv(e)&&e.tagName.toLowerCase()==="button"}function zR(e){return Fv(e)&&e.tagName.toLowerCase()==="form"}function LR(e){return Fv(e)&&e.tagName.toLowerCase()==="input"}function jR(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function NR(e,t){return e.button===0&&(!t||t==="_self")&&!jR(e)}var by=null;function FR(){if(by===null)try{new FormData(document.createElement("form"),0),by=!1}catch{by=!0}return by}var BR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function t0(e){return e!=null&&!BR.has(e)?(jl(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$y}"`),null):e}function $R(e,t){let n,a,h,g,p;if(zR(e)){let o=e.getAttribute("action");a=o?Wc(o,t):null,n=e.getAttribute("method")||By,h=t0(e.getAttribute("enctype"))||$y,g=new FormData(e)}else if(RR(e)||LR(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let P=e.getAttribute("formaction")||o.getAttribute("action");if(a=P?Wc(P,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||By,h=t0(e.getAttribute("formenctype"))||t0(o.getAttribute("enctype"))||$y,g=new FormData(o,e),!FR()){let{name:E,type:C,value:I}=e;if(C==="image"){let R=E?`${E}.`:"";g.append(`${R}x`,"0"),g.append(`${R}y`,"0")}else E&&g.append(E,I)}}else{if(Fv(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=By,a=null,h=$y,p=e}return g&&h==="text/plain"&&(p=g,g=void 0),{action:a,method:n.toLowerCase(),encType:h,formData:g,body:p}}function bb(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function VR(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function UR(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function GR(e,t,n){let a=await Promise.all(e.map(async h=>{let g=t.routes[h.route.id];if(g){let p=await VR(g,n);return p.links?p.links():[]}return[]}));return HR(a.flat(1).filter(UR).filter(h=>h.rel==="stylesheet"||h.rel==="preload").map(h=>h.rel==="stylesheet"?{...h,rel:"prefetch",as:"style"}:{...h,rel:"prefetch"}))}function RS(e,t,n,a,h,g){let p=(P,E)=>n[E]?P.route.id!==n[E].route.id:!0,o=(P,E)=>n[E].pathname!==P.pathname||n[E].route.path?.endsWith("*")&&n[E].params["*"]!==P.params["*"];return g==="assets"?t.filter((P,E)=>p(P,E)||o(P,E)):g==="data"?t.filter((P,E)=>{let C=a.routes[P.route.id];if(!C||!C.hasLoader)return!1;if(p(P,E)||o(P,E))return!0;if(P.route.shouldRevalidate){let I=P.route.shouldRevalidate({currentUrl:new URL(h.pathname+h.search+h.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:P.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function qR(e,t,{includeHydrateFallback:n}={}){return WR(e.map(a=>{let h=t.routes[a.route.id];if(!h)return[];let g=[h.module];return h.clientActionModule&&(g=g.concat(h.clientActionModule)),h.clientLoaderModule&&(g=g.concat(h.clientLoaderModule)),n&&h.hydrateFallbackModule&&(g=g.concat(h.hydrateFallbackModule)),h.imports&&(g=g.concat(h.imports)),g}).flat(1))}function WR(e){return[...new Set(e)]}function ZR(e){let t={},n=Object.keys(e).sort();for(let a of n)t[a]=e[a];return t}function HR(e,t){let n=new Set;return new Set(t),e.reduce((a,h)=>{let g=JSON.stringify(ZR(h));return n.has(g)||(n.add(g),a.push({key:g,link:h})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var KR=new Set([100,101,204,205]);function XR(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&Wc(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function YM(){let e=H.useContext(Vp);return bb(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function YR(){let e=H.useContext(Nv);return bb(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var wb=H.createContext(void 0);wb.displayName="FrameworkContext";function QM(){let e=H.useContext(wb);return bb(e,"You must render this element inside a <HydratedRouter> element"),e}function QR(e,t){let n=H.useContext(wb),[a,h]=H.useState(!1),[g,p]=H.useState(!1),{onFocus:o,onBlur:P,onMouseEnter:E,onMouseLeave:C,onTouchStart:I}=t,R=H.useRef(null);H.useEffect(()=>{if(e==="render"&&p(!0),e==="viewport"){let U=Q=>{Q.forEach(le=>{p(le.isIntersecting)})},Z=new IntersectionObserver(U,{threshold:.5});return R.current&&Z.observe(R.current),()=>{Z.disconnect()}}},[e]),H.useEffect(()=>{if(a){let U=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout(U)}}},[a]);let z=()=>{h(!0)},B=()=>{h(!1),p(!1)};return n?e!=="intent"?[g,R,{}]:[g,R,{onFocus:Nm(o,z),onBlur:Nm(P,B),onMouseEnter:Nm(E,z),onMouseLeave:Nm(C,B),onTouchStart:Nm(I,z)}]:[!1,R,{}]}function Nm(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function JR({page:e,...t}){let{router:n}=YM(),a=H.useMemo(()=>BM(n.routes,e,n.basename),[n.routes,e,n.basename]);return a?H.createElement(tz,{page:e,matches:a,...t}):null}function ez(e){let{manifest:t,routeModules:n}=QM(),[a,h]=H.useState([]);return H.useEffect(()=>{let g=!1;return GR(e,t,n).then(p=>{g||h(p)}),()=>{g=!0}},[e,t,n]),a}function tz({page:e,matches:t,...n}){let a=Yh(),{manifest:h,routeModules:g}=QM(),{basename:p}=YM(),{loaderData:o,matches:P}=YR(),E=H.useMemo(()=>RS(e,t,P,h,a,"data"),[e,t,P,h,a]),C=H.useMemo(()=>RS(e,t,P,h,a,"assets"),[e,t,P,h,a]),I=H.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let B=new Set,U=!1;if(t.forEach(Q=>{let le=h.routes[Q.route.id];!le||!le.hasLoader||(!E.some(se=>se.route.id===Q.route.id)&&Q.route.id in o&&g[Q.route.id]?.shouldRevalidate||le.hasClientLoader?U=!0:B.add(Q.route.id))}),B.size===0)return[];let Z=XR(e,p);return U&&B.size>0&&Z.searchParams.set("_routes",t.filter(Q=>B.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[Z.pathname+Z.search]},[p,o,a,h,E,t,e,g]),R=H.useMemo(()=>qR(C,h),[C,h]),z=ez(C);return H.createElement(H.Fragment,null,I.map(B=>H.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...n})),R.map(B=>H.createElement("link",{key:B,rel:"modulepreload",href:B,...n})),z.map(({key:B,link:U})=>H.createElement("link",{key:B,...U})))}function rz(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var JM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{JM&&(window.__reactRouterVersion="7.6.2")}catch{}function nz({basename:e,children:t,window:n}){let a=H.useRef();a.current==null&&(a.current=U4({window:n,v5Compat:!0}));let h=a.current,[g,p]=H.useState({action:h.action,location:h.location}),o=H.useCallback(P=>{H.startTransition(()=>p(P))},[p]);return H.useLayoutEffect(()=>h.listen(o),[h,o]),H.createElement(DR,{basename:e,children:t,location:g.location,navigationType:g.action,navigator:h})}var eA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bv=H.forwardRef(function({onClick:t,discover:n="render",prefetch:a="none",relative:h,reloadDocument:g,replace:p,state:o,target:P,to:E,preventScrollReset:C,viewTransition:I,...R},z){let{basename:B}=H.useContext(ju),U=typeof E=="string"&&eA.test(E),Z,Q=!1;if(typeof E=="string"&&U&&(Z=E,JM))try{let ht=new URL(window.location.href),Et=E.startsWith("//")?new URL(ht.protocol+E):new URL(E),vt=Wc(Et.pathname,B);Et.origin===ht.origin&&vt!=null?E=vt+Et.search+Et.hash:Q=!0}catch{jl(!1,`<Link to="${E}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let le=gR(E,{relative:h}),[se,Ce,be]=QR(a,R),Ae=oz(E,{replace:p,state:o,target:P,preventScrollReset:C,relative:h,viewTransition:I});function Ne(ht){t&&t(ht),ht.defaultPrevented||Ae(ht)}let Qe=H.createElement("a",{...R,...be,href:Z||le,onClick:Q||g?t:Ne,ref:rz(z,Ce),target:P,"data-discover":!U&&n==="render"?"true":void 0});return se&&!U?H.createElement(H.Fragment,null,Qe,H.createElement(JR,{page:le})):Qe});Bv.displayName="Link";var Nc=H.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:a="",end:h=!1,style:g,to:p,viewTransition:o,children:P,...E},C){let I=Cg(p,{relative:E.relative}),R=Yh(),z=H.useContext(Nv),{navigator:B,basename:U}=H.useContext(ju),Z=z!=null&&hz(I)&&o===!0,Q=B.encodeLocation?B.encodeLocation(I).pathname:I.pathname,le=R.pathname,se=z&&z.navigation&&z.navigation.location?z.navigation.location.pathname:null;n||(le=le.toLowerCase(),se=se?se.toLowerCase():null,Q=Q.toLowerCase()),se&&U&&(se=Wc(se,U)||se);const Ce=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let be=le===Q||!h&&le.startsWith(Q)&&le.charAt(Ce)==="/",Ae=se!=null&&(se===Q||!h&&se.startsWith(Q)&&se.charAt(Q.length)==="/"),Ne={isActive:be,isPending:Ae,isTransitioning:Z},Qe=be?t:void 0,ht;typeof a=="function"?ht=a(Ne):ht=[a,be?"active":null,Ae?"pending":null,Z?"transitioning":null].filter(Boolean).join(" ");let Et=typeof g=="function"?g(Ne):g;return H.createElement(Bv,{...E,"aria-current":Qe,className:ht,ref:C,style:Et,to:p,viewTransition:o},typeof P=="function"?P(Ne):P)});Nc.displayName="NavLink";var iz=H.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:a,replace:h,state:g,method:p=By,action:o,onSubmit:P,relative:E,preventScrollReset:C,viewTransition:I,...R},z)=>{let B=uz(),U=cz(o,{relative:E}),Z=p.toLowerCase()==="get"?"get":"post",Q=typeof o=="string"&&eA.test(o),le=se=>{if(P&&P(se),se.defaultPrevented)return;se.preventDefault();let Ce=se.nativeEvent.submitter,be=Ce?.getAttribute("formmethod")||p;B(Ce||se.currentTarget,{fetcherKey:t,method:be,navigate:n,replace:h,state:g,relative:E,preventScrollReset:C,viewTransition:I})};return H.createElement("form",{ref:z,method:Z,action:U,onSubmit:a?P:le,...R,"data-discover":!Q&&e==="render"?"true":void 0})});iz.displayName="Form";function az(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tA(e){let t=H.useContext(Vp);return qn(t,az(e)),t}function oz(e,{target:t,replace:n,state:a,preventScrollReset:h,relative:g,viewTransition:p}={}){let o=yR(),P=Yh(),E=Cg(e,{relative:g});return H.useCallback(C=>{if(NR(C,t)){C.preventDefault();let I=n!==void 0?n:ag(P)===ag(E);o(e,{replace:I,state:a,preventScrollReset:h,relative:g,viewTransition:p})}},[P,o,E,n,a,t,e,h,g,p])}var sz=0,lz=()=>`__${String(++sz)}__`;function uz(){let{router:e}=tA("useSubmit"),{basename:t}=H.useContext(ju),n=MR();return H.useCallback(async(a,h={})=>{let{action:g,method:p,encType:o,formData:P,body:E}=$R(a,t);if(h.navigate===!1){let C=h.fetcherKey||lz();await e.fetch(C,n,h.action||g,{preventScrollReset:h.preventScrollReset,formData:P,body:E,formMethod:h.method||p,formEncType:h.encType||o,flushSync:h.flushSync})}else await e.navigate(h.action||g,{preventScrollReset:h.preventScrollReset,formData:P,body:E,formMethod:h.method||p,formEncType:h.encType||o,replace:h.replace,state:h.state,fromRouteId:n,flushSync:h.flushSync,viewTransition:h.viewTransition})},[e,t,n])}function cz(e,{relative:t}={}){let{basename:n}=H.useContext(ju),a=H.useContext(Jc);qn(a,"useFormAction must be used inside a RouteContext");let[h]=a.matches.slice(-1),g={...Cg(e||".",{relative:t})},p=Yh();if(e==null){g.search=p.search;let o=new URLSearchParams(g.search),P=o.getAll("index");if(P.some(C=>C==="")){o.delete("index"),P.filter(I=>I).forEach(I=>o.append("index",I));let C=o.toString();g.search=C?`?${C}`:""}}return(!e||e===".")&&h.route.index&&(g.search=g.search?g.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(g.pathname=g.pathname==="/"?n:Uc([n,g.pathname])),ag(g)}function hz(e,t={}){let n=H.useContext(WM);qn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=tA("useViewTransitionState"),h=Cg(e,{relative:t.relative});if(!n.isTransitioning)return!1;let g=Wc(n.currentLocation.pathname,a)||n.currentLocation.pathname,p=Wc(n.nextLocation.pathname,a)||n.nextLocation.pathname;return Ky(h.pathname,p)!=null||Ky(h.pathname,g)!=null}[...KR];var rA=FM();const Sb=H.createContext({});function Pb(e){const t=H.useRef(null);return t.current===null&&(t.current=e()),t.current}const Tb=typeof window<"u",nA=Tb?H.useLayoutEffect:H.useEffect,$v=H.createContext(null);function Cb(e,t){e.indexOf(t)===-1&&e.push(t)}function Eb(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Zc=(e,t,n)=>n>t?t:n<e?e:n;let Mb=()=>{};const Hc={},iA=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function aA(e){return typeof e=="object"&&e!==null}const oA=e=>/^0[^.\s]+$/u.test(e);function Ab(e){let t;return()=>(t===void 0&&(t=e()),t)}const Zs=e=>e,dz=(e,t)=>n=>t(e(n)),Eg=(...e)=>e.reduce(dz),og=(e,t,n)=>{const a=t-e;return a===0?1:(n-e)/a};class Ib{constructor(){this.subscriptions=[]}add(t){return Cb(this.subscriptions,t),()=>Eb(this.subscriptions,t)}notify(t,n,a){const h=this.subscriptions.length;if(h)if(h===1)this.subscriptions[0](t,n,a);else for(let g=0;g<h;g++){const p=this.subscriptions[g];p&&p(t,n,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ku=e=>e*1e3,Du=e=>e/1e3;function sA(e,t){return t?e*(1e3/t):0}const lA=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,fz=1e-7,pz=12;function mz(e,t,n,a,h){let g,p,o=0;do p=t+(n-t)/2,g=lA(p,a,h)-e,g>0?n=p:t=p;while(Math.abs(g)>fz&&++o<pz);return p}function Mg(e,t,n,a){if(e===t&&n===a)return Zs;const h=g=>mz(g,0,1,e,n);return g=>g===0||g===1?g:lA(h(g),t,a)}const uA=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,cA=e=>t=>1-e(1-t),hA=Mg(.33,1.53,.69,.99),kb=cA(hA),dA=uA(kb),fA=e=>(e*=2)<1?.5*kb(e):.5*(2-Math.pow(2,-10*(e-1))),Db=e=>1-Math.sin(Math.acos(e)),pA=cA(Db),mA=uA(Db),gz=Mg(.42,0,1,1),yz=Mg(0,0,.58,1),gA=Mg(.42,0,.58,1),vz=e=>Array.isArray(e)&&typeof e[0]!="number",yA=e=>Array.isArray(e)&&typeof e[0]=="number",_z={linear:Zs,easeIn:gz,easeInOut:gA,easeOut:yz,circIn:Db,circInOut:mA,circOut:pA,backIn:kb,backInOut:dA,backOut:hA,anticipate:fA},xz=e=>typeof e=="string",zS=e=>{if(yA(e)){Mb(e.length===4);const[t,n,a,h]=e;return Mg(t,n,a,h)}else if(xz(e))return _z[e];return e},wy=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function bz(e,t){let n=new Set,a=new Set,h=!1,g=!1;const p=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function P(C){p.has(C)&&(E.schedule(C),e()),C(o)}const E={schedule:(C,I=!1,R=!1)=>{const B=R&&h?n:a;return I&&p.add(C),B.has(C)||B.add(C),C},cancel:C=>{a.delete(C),p.delete(C)},process:C=>{if(o=C,h){g=!0;return}h=!0,[n,a]=[a,n],n.forEach(P),n.clear(),h=!1,g&&(g=!1,E.process(C))}};return E}const wz=40;function vA(e,t){let n=!1,a=!0;const h={delta:0,timestamp:0,isProcessing:!1},g=()=>n=!0,p=wy.reduce((se,Ce)=>(se[Ce]=bz(g),se),{}),{setup:o,read:P,resolveKeyframes:E,preUpdate:C,update:I,preRender:R,render:z,postRender:B}=p,U=()=>{const se=Hc.useManualTiming?h.timestamp:performance.now();n=!1,Hc.useManualTiming||(h.delta=a?1e3/60:Math.max(Math.min(se-h.timestamp,wz),1)),h.timestamp=se,h.isProcessing=!0,o.process(h),P.process(h),E.process(h),C.process(h),I.process(h),R.process(h),z.process(h),B.process(h),h.isProcessing=!1,n&&t&&(a=!1,e(U))},Z=()=>{n=!0,a=!0,h.isProcessing||e(U)};return{schedule:wy.reduce((se,Ce)=>{const be=p[Ce];return se[Ce]=(Ae,Ne=!1,Qe=!1)=>(n||Z(),be.schedule(Ae,Ne,Qe)),se},{}),cancel:se=>{for(let Ce=0;Ce<wy.length;Ce++)p[wy[Ce]].cancel(se)},state:h,steps:p}}const{schedule:Fn,cancel:Zh,state:Sa,steps:r0}=vA(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zs,!0);let Vy;function Sz(){Vy=void 0}const So={now:()=>(Vy===void 0&&So.set(Sa.isProcessing||Hc.useManualTiming?Sa.timestamp:performance.now()),Vy),set:e=>{Vy=e,queueMicrotask(Sz)}},_A=e=>t=>typeof t=="string"&&t.startsWith(e),Ob=_A("--"),Pz=_A("var(--"),Rb=e=>Pz(e)?Tz.test(e.split("/*")[0].trim()):!1,Tz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Up={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},sg={...Up,transform:e=>Zc(0,1,e)},Sy={...Up,default:1},Ym=e=>Math.round(e*1e5)/1e5,zb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Cz(e){return e==null}const Ez=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Lb=(e,t)=>n=>!!(typeof n=="string"&&Ez.test(n)&&n.startsWith(e)||t&&!Cz(n)&&Object.prototype.hasOwnProperty.call(n,t)),xA=(e,t,n)=>a=>{if(typeof a!="string")return a;const[h,g,p,o]=a.match(zb);return{[e]:parseFloat(h),[t]:parseFloat(g),[n]:parseFloat(p),alpha:o!==void 0?parseFloat(o):1}},Mz=e=>Zc(0,255,e),n0={...Up,transform:e=>Math.round(Mz(e))},Jd={test:Lb("rgb","red"),parse:xA("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:a=1})=>"rgba("+n0.transform(e)+", "+n0.transform(t)+", "+n0.transform(n)+", "+Ym(sg.transform(a))+")"};function Az(e){let t="",n="",a="",h="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),a=e.substring(5,7),h=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),a=e.substring(3,4),h=e.substring(4,5),t+=t,n+=n,a+=a,h+=h),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(a,16),alpha:h?parseInt(h,16)/255:1}}const i1={test:Lb("#"),parse:Az,transform:Jd.transform},Ag=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Vh=Ag("deg"),Ou=Ag("%"),gr=Ag("px"),Iz=Ag("vh"),kz=Ag("vw"),LS={...Ou,parse:e=>Ou.parse(e)/100,transform:e=>Ou.transform(e*100)},bp={test:Lb("hsl","hue"),parse:xA("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:a=1})=>"hsla("+Math.round(e)+", "+Ou.transform(Ym(t))+", "+Ou.transform(Ym(n))+", "+Ym(sg.transform(a))+")"},Ti={test:e=>Jd.test(e)||i1.test(e)||bp.test(e),parse:e=>Jd.test(e)?Jd.parse(e):bp.test(e)?bp.parse(e):i1.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Jd.transform(e):bp.transform(e),getAnimatableNone:e=>{const t=Ti.parse(e);return t.alpha=0,Ti.transform(t)}},Dz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Oz(e){return isNaN(e)&&typeof e=="string"&&(e.match(zb)?.length||0)+(e.match(Dz)?.length||0)>0}const bA="number",wA="color",Rz="var",zz="var(",jS="${}",Lz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function lg(e){const t=e.toString(),n=[],a={color:[],number:[],var:[]},h=[];let g=0;const o=t.replace(Lz,P=>(Ti.test(P)?(a.color.push(g),h.push(wA),n.push(Ti.parse(P))):P.startsWith(zz)?(a.var.push(g),h.push(Rz),n.push(P)):(a.number.push(g),h.push(bA),n.push(parseFloat(P))),++g,jS)).split(jS);return{values:n,split:o,indexes:a,types:h}}function SA(e){return lg(e).values}function PA(e){const{split:t,types:n}=lg(e),a=t.length;return h=>{let g="";for(let p=0;p<a;p++)if(g+=t[p],h[p]!==void 0){const o=n[p];o===bA?g+=Ym(h[p]):o===wA?g+=Ti.transform(h[p]):g+=h[p]}return g}}const jz=e=>typeof e=="number"?0:Ti.test(e)?Ti.getAnimatableNone(e):e;function Nz(e){const t=SA(e);return PA(e)(t.map(jz))}const Hh={test:Oz,parse:SA,createTransformer:PA,getAnimatableNone:Nz};function i0(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Fz({hue:e,saturation:t,lightness:n,alpha:a}){e/=360,t/=100,n/=100;let h=0,g=0,p=0;if(!t)h=g=p=n;else{const o=n<.5?n*(1+t):n+t-n*t,P=2*n-o;h=i0(P,o,e+1/3),g=i0(P,o,e),p=i0(P,o,e-1/3)}return{red:Math.round(h*255),green:Math.round(g*255),blue:Math.round(p*255),alpha:a}}function Xy(e,t){return n=>n>0?t:e}const Gn=(e,t,n)=>e+(t-e)*n,a0=(e,t,n)=>{const a=e*e,h=n*(t*t-a)+a;return h<0?0:Math.sqrt(h)},Bz=[i1,Jd,bp],$z=e=>Bz.find(t=>t.test(e));function NS(e){const t=$z(e);if(!t)return!1;let n=t.parse(e);return t===bp&&(n=Fz(n)),n}const FS=(e,t)=>{const n=NS(e),a=NS(t);if(!n||!a)return Xy(e,t);const h={...n};return g=>(h.red=a0(n.red,a.red,g),h.green=a0(n.green,a.green,g),h.blue=a0(n.blue,a.blue,g),h.alpha=Gn(n.alpha,a.alpha,g),Jd.transform(h))},a1=new Set(["none","hidden"]);function Vz(e,t){return a1.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function Uz(e,t){return n=>Gn(e,t,n)}function jb(e){return typeof e=="number"?Uz:typeof e=="string"?Rb(e)?Xy:Ti.test(e)?FS:Wz:Array.isArray(e)?TA:typeof e=="object"?Ti.test(e)?FS:Gz:Xy}function TA(e,t){const n=[...e],a=n.length,h=e.map((g,p)=>jb(g)(g,t[p]));return g=>{for(let p=0;p<a;p++)n[p]=h[p](g);return n}}function Gz(e,t){const n={...e,...t},a={};for(const h in n)e[h]!==void 0&&t[h]!==void 0&&(a[h]=jb(e[h])(e[h],t[h]));return h=>{for(const g in a)n[g]=a[g](h);return n}}function qz(e,t){const n=[],a={color:0,var:0,number:0};for(let h=0;h<t.values.length;h++){const g=t.types[h],p=e.indexes[g][a[g]],o=e.values[p]??0;n[h]=o,a[g]++}return n}const Wz=(e,t)=>{const n=Hh.createTransformer(t),a=lg(e),h=lg(t);return a.indexes.var.length===h.indexes.var.length&&a.indexes.color.length===h.indexes.color.length&&a.indexes.number.length>=h.indexes.number.length?a1.has(e)&&!h.values.length||a1.has(t)&&!a.values.length?Vz(e,t):Eg(TA(qz(a,h),h.values),n):Xy(e,t)};function CA(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Gn(e,t,n):jb(e)(e,t)}const Zz=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Fn.update(t,n),stop:()=>Zh(t),now:()=>Sa.isProcessing?Sa.timestamp:So.now()}},EA=(e,t,n=10)=>{let a="";const h=Math.max(Math.round(t/n),2);for(let g=0;g<h;g++)a+=Math.round(e(g/(h-1))*1e4)/1e4+", ";return`linear(${a.substring(0,a.length-2)})`},Yy=2e4;function Nb(e){let t=0;const n=50;let a=e.next(t);for(;!a.done&&t<Yy;)t+=n,a=e.next(t);return t>=Yy?1/0:t}function Hz(e,t=100,n){const a=n({...e,keyframes:[0,t]}),h=Math.min(Nb(a),Yy);return{type:"keyframes",ease:g=>a.next(h*g).value/t,duration:Du(h)}}const Kz=5;function MA(e,t,n){const a=Math.max(t-Kz,0);return sA(n-e(a),t-a)}const ti={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},o0=.001;function Xz({duration:e=ti.duration,bounce:t=ti.bounce,velocity:n=ti.velocity,mass:a=ti.mass}){let h,g,p=1-t;p=Zc(ti.minDamping,ti.maxDamping,p),e=Zc(ti.minDuration,ti.maxDuration,Du(e)),p<1?(h=E=>{const C=E*p,I=C*e,R=C-n,z=o1(E,p),B=Math.exp(-I);return o0-R/z*B},g=E=>{const I=E*p*e,R=I*n+n,z=Math.pow(p,2)*Math.pow(E,2)*e,B=Math.exp(-I),U=o1(Math.pow(E,2),p);return(-h(E)+o0>0?-1:1)*((R-z)*B)/U}):(h=E=>{const C=Math.exp(-E*e),I=(E-n)*e+1;return-o0+C*I},g=E=>{const C=Math.exp(-E*e),I=(n-E)*(e*e);return C*I});const o=5/e,P=Qz(h,g,o);if(e=ku(e),isNaN(P))return{stiffness:ti.stiffness,damping:ti.damping,duration:e};{const E=Math.pow(P,2)*a;return{stiffness:E,damping:p*2*Math.sqrt(a*E),duration:e}}}const Yz=12;function Qz(e,t,n){let a=n;for(let h=1;h<Yz;h++)a=a-e(a)/t(a);return a}function o1(e,t){return e*Math.sqrt(1-t*t)}const Jz=["duration","bounce"],e5=["stiffness","damping","mass"];function BS(e,t){return t.some(n=>e[n]!==void 0)}function t5(e){let t={velocity:ti.velocity,stiffness:ti.stiffness,damping:ti.damping,mass:ti.mass,isResolvedFromDuration:!1,...e};if(!BS(e,e5)&&BS(e,Jz))if(e.visualDuration){const n=e.visualDuration,a=2*Math.PI/(n*1.2),h=a*a,g=2*Zc(.05,1,1-(e.bounce||0))*Math.sqrt(h);t={...t,mass:ti.mass,stiffness:h,damping:g}}else{const n=Xz(e);t={...t,...n,mass:ti.mass},t.isResolvedFromDuration=!0}return t}function Qy(e=ti.visualDuration,t=ti.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:a,restDelta:h}=n;const g=n.keyframes[0],p=n.keyframes[n.keyframes.length-1],o={done:!1,value:g},{stiffness:P,damping:E,mass:C,duration:I,velocity:R,isResolvedFromDuration:z}=t5({...n,velocity:-Du(n.velocity||0)}),B=R||0,U=E/(2*Math.sqrt(P*C)),Z=p-g,Q=Du(Math.sqrt(P/C)),le=Math.abs(Z)<5;a||(a=le?ti.restSpeed.granular:ti.restSpeed.default),h||(h=le?ti.restDelta.granular:ti.restDelta.default);let se;if(U<1){const be=o1(Q,U);se=Ae=>{const Ne=Math.exp(-U*Q*Ae);return p-Ne*((B+U*Q*Z)/be*Math.sin(be*Ae)+Z*Math.cos(be*Ae))}}else if(U===1)se=be=>p-Math.exp(-Q*be)*(Z+(B+Q*Z)*be);else{const be=Q*Math.sqrt(U*U-1);se=Ae=>{const Ne=Math.exp(-U*Q*Ae),Qe=Math.min(be*Ae,300);return p-Ne*((B+U*Q*Z)*Math.sinh(Qe)+be*Z*Math.cosh(Qe))/be}}const Ce={calculatedDuration:z&&I||null,next:be=>{const Ae=se(be);if(z)o.done=be>=I;else{let Ne=be===0?B:0;U<1&&(Ne=be===0?ku(B):MA(se,be,Ae));const Qe=Math.abs(Ne)<=a,ht=Math.abs(p-Ae)<=h;o.done=Qe&&ht}return o.value=o.done?p:Ae,o},toString:()=>{const be=Math.min(Nb(Ce),Yy),Ae=EA(Ne=>Ce.next(be*Ne).value,be,30);return be+"ms "+Ae},toTransition:()=>{}};return Ce}Qy.applyToOptions=e=>{const t=Hz(e,100,Qy);return e.ease=t.ease,e.duration=ku(t.duration),e.type="keyframes",e};function s1({keyframes:e,velocity:t=0,power:n=.8,timeConstant:a=325,bounceDamping:h=10,bounceStiffness:g=500,modifyTarget:p,min:o,max:P,restDelta:E=.5,restSpeed:C}){const I=e[0],R={done:!1,value:I},z=Qe=>o!==void 0&&Qe<o||P!==void 0&&Qe>P,B=Qe=>o===void 0?P:P===void 0||Math.abs(o-Qe)<Math.abs(P-Qe)?o:P;let U=n*t;const Z=I+U,Q=p===void 0?Z:p(Z);Q!==Z&&(U=Q-I);const le=Qe=>-U*Math.exp(-Qe/a),se=Qe=>Q+le(Qe),Ce=Qe=>{const ht=le(Qe),Et=se(Qe);R.done=Math.abs(ht)<=E,R.value=R.done?Q:Et};let be,Ae;const Ne=Qe=>{z(R.value)&&(be=Qe,Ae=Qy({keyframes:[R.value,B(R.value)],velocity:MA(se,Qe,R.value),damping:h,stiffness:g,restDelta:E,restSpeed:C}))};return Ne(0),{calculatedDuration:null,next:Qe=>{let ht=!1;return!Ae&&be===void 0&&(ht=!0,Ce(Qe),Ne(Qe)),be!==void 0&&Qe>=be?Ae.next(Qe-be):(!ht&&Ce(Qe),R)}}}function r5(e,t,n){const a=[],h=n||Hc.mix||CA,g=e.length-1;for(let p=0;p<g;p++){let o=h(e[p],e[p+1]);if(t){const P=Array.isArray(t)?t[p]||Zs:t;o=Eg(P,o)}a.push(o)}return a}function n5(e,t,{clamp:n=!0,ease:a,mixer:h}={}){const g=e.length;if(Mb(g===t.length),g===1)return()=>t[0];if(g===2&&t[0]===t[1])return()=>t[1];const p=e[0]===e[1];e[0]>e[g-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=r5(t,a,h),P=o.length,E=C=>{if(p&&C<e[0])return t[0];let I=0;if(P>1)for(;I<e.length-2&&!(C<e[I+1]);I++);const R=og(e[I],e[I+1],C);return o[I](R)};return n?C=>E(Zc(e[0],e[g-1],C)):E}function i5(e,t){const n=e[e.length-1];for(let a=1;a<=t;a++){const h=og(0,t,a);e.push(Gn(n,1,h))}}function a5(e){const t=[0];return i5(t,e.length-1),t}function o5(e,t){return e.map(n=>n*t)}function s5(e,t){return e.map(()=>t||gA).splice(0,e.length-1)}function Qm({duration:e=300,keyframes:t,times:n,ease:a="easeInOut"}){const h=vz(a)?a.map(zS):zS(a),g={done:!1,value:t[0]},p=o5(n&&n.length===t.length?n:a5(t),e),o=n5(p,t,{ease:Array.isArray(h)?h:s5(t,h)});return{calculatedDuration:e,next:P=>(g.value=o(P),g.done=P>=e,g)}}const l5=e=>e!==null;function Fb(e,{repeat:t,repeatType:n="loop"},a,h=1){const g=e.filter(l5),o=h<0||t&&n!=="loop"&&t%2===1?0:g.length-1;return!o||a===void 0?g[o]:a}const u5={decay:s1,inertia:s1,tween:Qm,keyframes:Qm,spring:Qy};function AA(e){typeof e.type=="string"&&(e.type=u5[e.type])}class Bb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const c5=e=>e/100;class $b extends Bb{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==So.now()&&this.tick(So.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;AA(t);const{type:n=Qm,repeat:a=0,repeatDelay:h=0,repeatType:g,velocity:p=0}=t;let{keyframes:o}=t;const P=n||Qm;P!==Qm&&typeof o[0]!="number"&&(this.mixKeyframes=Eg(c5,CA(o[0],o[1])),o=[0,100]);const E=P({...t,keyframes:o});g==="mirror"&&(this.mirroredGenerator=P({...t,keyframes:[...o].reverse(),velocity:-p})),E.calculatedDuration===null&&(E.calculatedDuration=Nb(E));const{calculatedDuration:C}=E;this.calculatedDuration=C,this.resolvedDuration=C+h,this.totalDuration=this.resolvedDuration*(a+1)-h,this.generator=E}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:a,totalDuration:h,mixKeyframes:g,mirroredGenerator:p,resolvedDuration:o,calculatedDuration:P}=this;if(this.startTime===null)return a.next(0);const{delay:E=0,keyframes:C,repeat:I,repeatType:R,repeatDelay:z,type:B,onUpdate:U,finalKeyframe:Z}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-h/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const Q=this.currentTime-E*(this.playbackSpeed>=0?1:-1),le=this.playbackSpeed>=0?Q<0:Q>h;this.currentTime=Math.max(Q,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let se=this.currentTime,Ce=a;if(I){const Qe=Math.min(this.currentTime,h)/o;let ht=Math.floor(Qe),Et=Qe%1;!Et&&Qe>=1&&(Et=1),Et===1&&ht--,ht=Math.min(ht,I+1),!!(ht%2)&&(R==="reverse"?(Et=1-Et,z&&(Et-=z/o)):R==="mirror"&&(Ce=p)),se=Zc(0,1,Et)*o}const be=le?{done:!1,value:C[0]}:Ce.next(se);g&&(be.value=g(be.value));let{done:Ae}=be;!le&&P!==null&&(Ae=this.playbackSpeed>=0?this.currentTime>=h:this.currentTime<=0);const Ne=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Ae);return Ne&&B!==s1&&(be.value=Fb(C,this.options,Z,this.speed)),U&&U(be.value),Ne&&this.finish(),be}then(t,n){return this.finished.then(t,n)}get duration(){return Du(this.calculatedDuration)}get time(){return Du(this.currentTime)}set time(t){t=ku(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(So.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Du(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=Zz,startTime:n}=this.options;this.driver||(this.driver=t(h=>this.tick(h))),this.options.onPlay?.();const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=n??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(So.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function h5(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const ef=e=>e*180/Math.PI,l1=e=>{const t=ef(Math.atan2(e[1],e[0]));return u1(t)},d5={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:l1,rotateZ:l1,skewX:e=>ef(Math.atan(e[1])),skewY:e=>ef(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},u1=e=>(e=e%360,e<0&&(e+=360),e),$S=l1,VS=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),US=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),f5={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:VS,scaleY:US,scale:e=>(VS(e)+US(e))/2,rotateX:e=>u1(ef(Math.atan2(e[6],e[5]))),rotateY:e=>u1(ef(Math.atan2(-e[2],e[0]))),rotateZ:$S,rotate:$S,skewX:e=>ef(Math.atan(e[4])),skewY:e=>ef(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function c1(e){return e.includes("scale")?1:0}function h1(e,t){if(!e||e==="none")return c1(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,h;if(n)a=f5,h=n;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=d5,h=o}if(!h)return c1(t);const g=a[t],p=h[1].split(",").map(m5);return typeof g=="function"?g(p):p[g]}const p5=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return h1(n,t)};function m5(e){return parseFloat(e.trim())}const Gp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],qp=new Set(Gp),GS=e=>e===Up||e===gr,g5=new Set(["x","y","z"]),y5=Gp.filter(e=>!g5.has(e));function v5(e){const t=[];return y5.forEach(n=>{const a=e.getValue(n);a!==void 0&&(t.push([n,a.get()]),a.set(n.startsWith("scale")?1:0))}),t}const sf={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>h1(t,"x"),y:(e,{transform:t})=>h1(t,"y")};sf.translateX=sf.x;sf.translateY=sf.y;const lf=new Set;let d1=!1,f1=!1,p1=!1;function IA(){if(f1){const e=Array.from(lf).filter(a=>a.needsMeasurement),t=new Set(e.map(a=>a.element)),n=new Map;t.forEach(a=>{const h=v5(a);h.length&&(n.set(a,h),a.render())}),e.forEach(a=>a.measureInitialState()),t.forEach(a=>{a.render();const h=n.get(a);h&&h.forEach(([g,p])=>{a.getValue(g)?.set(p)})}),e.forEach(a=>a.measureEndState()),e.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}f1=!1,d1=!1,lf.forEach(e=>e.complete(p1)),lf.clear()}function kA(){lf.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(f1=!0)})}function _5(){p1=!0,kA(),IA(),p1=!1}class Vb{constructor(t,n,a,h,g,p=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=a,this.motionValue=h,this.element=g,this.isAsync=p}scheduleResolve(){this.state="scheduled",this.isAsync?(lf.add(this),d1||(d1=!0,Fn.read(kA),Fn.resolveKeyframes(IA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:a,motionValue:h}=this;if(t[0]===null){const g=h?.get(),p=t[t.length-1];if(g!==void 0)t[0]=g;else if(a&&n){const o=a.readValue(n,p);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=p),h&&g===void 0&&h.set(t[0])}h5(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),lf.delete(this)}cancel(){this.state==="scheduled"&&(lf.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const x5=e=>e.startsWith("--");function b5(e,t,n){x5(t)?e.style.setProperty(t,n):e.style[t]=n}const w5=Ab(()=>window.ScrollTimeline!==void 0),S5={};function P5(e,t){const n=Ab(e);return()=>S5[t]??n()}const DA=P5(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Hm=([e,t,n,a])=>`cubic-bezier(${e}, ${t}, ${n}, ${a})`,qS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Hm([0,.65,.55,1]),circOut:Hm([.55,0,1,.45]),backIn:Hm([.31,.01,.66,-.59]),backOut:Hm([.33,1.53,.69,.99])};function OA(e,t){if(e)return typeof e=="function"?DA()?EA(e,t):"ease-out":yA(e)?Hm(e):Array.isArray(e)?e.map(n=>OA(n,t)||qS.easeOut):qS[e]}function T5(e,t,n,{delay:a=0,duration:h=300,repeat:g=0,repeatType:p="loop",ease:o="easeOut",times:P}={},E=void 0){const C={[t]:n};P&&(C.offset=P);const I=OA(o,h);Array.isArray(I)&&(C.easing=I);const R={delay:a,duration:h,easing:Array.isArray(I)?"linear":I,fill:"both",iterations:g+1,direction:p==="reverse"?"alternate":"normal"};return E&&(R.pseudoElement=E),e.animate(C,R)}function RA(e){return typeof e=="function"&&"applyToOptions"in e}function C5({type:e,...t}){return RA(e)&&DA()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class E5 extends Bb{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:a,keyframes:h,pseudoElement:g,allowFlatten:p=!1,finalKeyframe:o,onComplete:P}=t;this.isPseudoElement=!!g,this.allowFlatten=p,this.options=t,Mb(typeof t.type!="string");const E=C5(t);this.animation=T5(n,a,h,E,g),E.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!g){const C=Fb(h,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(C):b5(n,a,C),this.animation.cancel()}P?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Du(Number(t))}get time(){return Du(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ku(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&w5()?(this.animation.timeline=t,Zs):n(this)}}const zA={anticipate:fA,backInOut:dA,circInOut:mA};function M5(e){return e in zA}function A5(e){typeof e.ease=="string"&&M5(e.ease)&&(e.ease=zA[e.ease])}const WS=10;class I5 extends E5{constructor(t){A5(t),AA(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:a,onComplete:h,element:g,...p}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const o=new $b({...p,autoplay:!1}),P=ku(this.finishedTime??this.time);n.setWithVelocity(o.sample(P-WS).value,o.sample(P).value,WS),o.stop()}}const ZS=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Hh.test(e)||e==="0")&&!e.startsWith("url("));function k5(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function D5(e,t,n,a){const h=e[0];if(h===null)return!1;if(t==="display"||t==="visibility")return!0;const g=e[e.length-1],p=ZS(h,t),o=ZS(g,t);return!p||!o?!1:k5(e)||(n==="spring"||RA(n))&&a}function m1(e){e.duration=0,e.type}const O5=new Set(["opacity","clipPath","filter","transform"]),R5=Ab(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function z5(e){const{motionValue:t,name:n,repeatDelay:a,repeatType:h,damping:g,type:p}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:P,transformTemplate:E}=t.owner.getProps();return R5()&&n&&O5.has(n)&&(n!=="transform"||!E)&&!P&&!a&&h!=="mirror"&&g!==0&&p!=="inertia"}const L5=40;class j5 extends Bb{constructor({autoplay:t=!0,delay:n=0,type:a="keyframes",repeat:h=0,repeatDelay:g=0,repeatType:p="loop",keyframes:o,name:P,motionValue:E,element:C,...I}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=So.now();const R={autoplay:t,delay:n,type:a,repeat:h,repeatDelay:g,repeatType:p,name:P,motionValue:E,element:C,...I},z=C?.KeyframeResolver||Vb;this.keyframeResolver=new z(o,(B,U,Z)=>this.onKeyframesResolved(B,U,R,!Z),P,E,C),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,a,h){this.keyframeResolver=void 0;const{name:g,type:p,velocity:o,delay:P,isHandoff:E,onUpdate:C}=a;this.resolvedAt=So.now(),D5(t,g,p,o)||((Hc.instantAnimations||!P)&&C?.(Fb(t,a,n)),t[0]=t[t.length-1],m1(a),a.repeat=0);const R={startTime:h?this.resolvedAt?this.resolvedAt-this.createdAt>L5?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...a,keyframes:t},z=!E&&z5(R)?new I5({...R,element:R.motionValue.owner.current}):new $b(R);z.finished.then(()=>this.notifyFinished()).catch(Zs),this.pendingTimeline&&(this.stopTimeline=z.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=z}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),_5()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const N5=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function F5(e){const t=N5.exec(e);if(!t)return[,];const[,n,a,h]=t;return[`--${n??a}`,h]}function LA(e,t,n=1){const[a,h]=F5(e);if(!a)return;const g=window.getComputedStyle(t).getPropertyValue(a);if(g){const p=g.trim();return iA(p)?parseFloat(p):p}return Rb(h)?LA(h,t,n+1):h}function Ub(e,t){return e?.[t]??e?.default??e}const jA=new Set(["width","height","top","left","right","bottom",...Gp]),B5={test:e=>e==="auto",parse:e=>e},NA=e=>t=>t.test(e),FA=[Up,gr,Ou,Vh,kz,Iz,B5],HS=e=>FA.find(NA(e));function $5(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||oA(e):!0}const V5=new Set(["brightness","contrast","saturate","opacity"]);function U5(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[a]=n.match(zb)||[];if(!a)return e;const h=n.replace(a,"");let g=V5.has(t)?1:0;return a!==n&&(g*=100),t+"("+g+h+")"}const G5=/\b([a-z-]*)\(.*?\)/gu,g1={...Hh,getAnimatableNone:e=>{const t=e.match(G5);return t?t.map(U5).join(" "):e}},KS={...Up,transform:Math.round},q5={rotate:Vh,rotateX:Vh,rotateY:Vh,rotateZ:Vh,scale:Sy,scaleX:Sy,scaleY:Sy,scaleZ:Sy,skew:Vh,skewX:Vh,skewY:Vh,distance:gr,translateX:gr,translateY:gr,translateZ:gr,x:gr,y:gr,z:gr,perspective:gr,transformPerspective:gr,opacity:sg,originX:LS,originY:LS,originZ:gr},Gb={borderWidth:gr,borderTopWidth:gr,borderRightWidth:gr,borderBottomWidth:gr,borderLeftWidth:gr,borderRadius:gr,radius:gr,borderTopLeftRadius:gr,borderTopRightRadius:gr,borderBottomRightRadius:gr,borderBottomLeftRadius:gr,width:gr,maxWidth:gr,height:gr,maxHeight:gr,top:gr,right:gr,bottom:gr,left:gr,padding:gr,paddingTop:gr,paddingRight:gr,paddingBottom:gr,paddingLeft:gr,margin:gr,marginTop:gr,marginRight:gr,marginBottom:gr,marginLeft:gr,backgroundPositionX:gr,backgroundPositionY:gr,...q5,zIndex:KS,fillOpacity:sg,strokeOpacity:sg,numOctaves:KS},W5={...Gb,color:Ti,backgroundColor:Ti,outlineColor:Ti,fill:Ti,stroke:Ti,borderColor:Ti,borderTopColor:Ti,borderRightColor:Ti,borderBottomColor:Ti,borderLeftColor:Ti,filter:g1,WebkitFilter:g1},BA=e=>W5[e];function $A(e,t){let n=BA(e);return n!==g1&&(n=Hh),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Z5=new Set(["auto","none","0"]);function H5(e,t,n){let a=0,h;for(;a<e.length&&!h;){const g=e[a];typeof g=="string"&&!Z5.has(g)&&lg(g).values.length&&(h=e[a]),a++}if(h&&n)for(const g of t)e[g]=$A(n,h)}class K5 extends Vb{constructor(t,n,a,h,g){super(t,n,a,h,g,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:a}=this;if(!n||!n.current)return;super.readKeyframes();for(let P=0;P<t.length;P++){let E=t[P];if(typeof E=="string"&&(E=E.trim(),Rb(E))){const C=LA(E,n.current);C!==void 0&&(t[P]=C),P===t.length-1&&(this.finalKeyframe=E)}}if(this.resolveNoneKeyframes(),!jA.has(a)||t.length!==2)return;const[h,g]=t,p=HS(h),o=HS(g);if(p!==o)if(GS(p)&&GS(o))for(let P=0;P<t.length;P++){const E=t[P];typeof E=="string"&&(t[P]=parseFloat(E))}else sf[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,a=[];for(let h=0;h<t.length;h++)(t[h]===null||$5(t[h]))&&a.push(h);a.length&&H5(t,a,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:a}=this;if(!t||!t.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=sf[a](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const h=n[n.length-1];h!==void 0&&t.getValue(a,h).jump(h,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:a}=this;if(!t||!t.current)return;const h=t.getValue(n);h&&h.jump(this.measuredOrigin,!1);const g=a.length-1,p=a[g];a[g]=sf[n](t.measureViewportBox(),window.getComputedStyle(t.current)),p!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=p),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,P])=>{t.getValue(o).set(P)}),this.resolveNoneKeyframes()}}function X5(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let a=document;const h=n?.[e]??a.querySelectorAll(e);return h?Array.from(h):[]}return Array.from(e)}const VA=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function UA(e){return aA(e)&&"offsetHeight"in e}const XS=30,Y5=e=>!isNaN(parseFloat(e));class Q5{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=a=>{const h=So.now();if(this.updatedAt!==h&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const g of this.dependents)g.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=So.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Y5(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Ib);const a=this.events[t].add(n);return t==="change"?()=>{a(),Fn.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,a){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-a}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=So.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>XS)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,XS);return sA(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function kp(e,t){return new Q5(e,t)}const{schedule:qb}=vA(queueMicrotask,!1),Ol={x:!1,y:!1};function GA(){return Ol.x||Ol.y}function J5(e){return e==="x"||e==="y"?Ol[e]?null:(Ol[e]=!0,()=>{Ol[e]=!1}):Ol.x||Ol.y?null:(Ol.x=Ol.y=!0,()=>{Ol.x=Ol.y=!1})}function qA(e,t){const n=X5(e),a=new AbortController,h={passive:!0,...t,signal:a.signal};return[n,h,()=>a.abort()]}function YS(e){return!(e.pointerType==="touch"||GA())}function eL(e,t,n={}){const[a,h,g]=qA(e,n),p=o=>{if(!YS(o))return;const{target:P}=o,E=t(P,o);if(typeof E!="function"||!P)return;const C=I=>{YS(I)&&(E(I),P.removeEventListener("pointerleave",C))};P.addEventListener("pointerleave",C,h)};return a.forEach(o=>{o.addEventListener("pointerenter",p,h)}),g}const WA=(e,t)=>t?e===t?!0:WA(e,t.parentElement):!1,Wb=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,tL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function rL(e){return tL.has(e.tagName)||e.tabIndex!==-1}const Uy=new WeakSet;function QS(e){return t=>{t.key==="Enter"&&e(t)}}function s0(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const nL=(e,t)=>{const n=e.currentTarget;if(!n)return;const a=QS(()=>{if(Uy.has(n))return;s0(n,"down");const h=QS(()=>{s0(n,"up")}),g=()=>s0(n,"cancel");n.addEventListener("keyup",h,t),n.addEventListener("blur",g,t)});n.addEventListener("keydown",a,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",a),t)};function JS(e){return Wb(e)&&!GA()}function iL(e,t,n={}){const[a,h,g]=qA(e,n),p=o=>{const P=o.currentTarget;if(!JS(o))return;Uy.add(P);const E=t(P,o),C=(z,B)=>{window.removeEventListener("pointerup",I),window.removeEventListener("pointercancel",R),Uy.has(P)&&Uy.delete(P),JS(z)&&typeof E=="function"&&E(z,{success:B})},I=z=>{C(z,P===window||P===document||n.useGlobalTarget||WA(P,z.target))},R=z=>{C(z,!1)};window.addEventListener("pointerup",I,h),window.addEventListener("pointercancel",R,h)};return a.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",p,h),UA(o)&&(o.addEventListener("focus",E=>nL(E,h)),!rL(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),g}function ZA(e){return aA(e)&&"ownerSVGElement"in e}function aL(e){return ZA(e)&&e.tagName==="svg"}const Na=e=>!!(e&&e.getVelocity),oL=[...FA,Ti,Hh],sL=e=>oL.find(NA(e)),Zb=H.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class lL extends H.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const a=n.offsetParent,h=UA(a)&&a.offsetWidth||0,g=this.props.sizeRef.current;g.height=n.offsetHeight||0,g.width=n.offsetWidth||0,g.top=n.offsetTop,g.left=n.offsetLeft,g.right=h-g.width-g.left}return null}componentDidUpdate(){}render(){return this.props.children}}function uL({children:e,isPresent:t,anchorX:n,root:a}){const h=H.useId(),g=H.useRef(null),p=H.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=H.useContext(Zb);return H.useInsertionEffect(()=>{const{width:P,height:E,top:C,left:I,right:R}=p.current;if(t||!g.current||!P||!E)return;const z=n==="left"?`left: ${I}`:`right: ${R}`;g.current.dataset.motionPopId=h;const B=document.createElement("style");o&&(B.nonce=o);const U=a??document.head;return U.appendChild(B),B.sheet&&B.sheet.insertRule(`
          [data-motion-pop-id="${h}"] {
            position: absolute !important;
            width: ${P}px !important;
            height: ${E}px !important;
            ${z}px !important;
            top: ${C}px !important;
          }
        `),()=>{U.contains(B)&&U.removeChild(B)}},[t]),Y.jsx(lL,{isPresent:t,childRef:g,sizeRef:p,children:H.cloneElement(e,{ref:g})})}const cL=({children:e,initial:t,isPresent:n,onExitComplete:a,custom:h,presenceAffectsLayout:g,mode:p,anchorX:o,root:P})=>{const E=Pb(hL),C=H.useId();let I=!0,R=H.useMemo(()=>(I=!1,{id:C,initial:t,isPresent:n,custom:h,onExitComplete:z=>{E.set(z,!0);for(const B of E.values())if(!B)return;a&&a()},register:z=>(E.set(z,!1),()=>E.delete(z))}),[n,E,a]);return g&&I&&(R={...R}),H.useMemo(()=>{E.forEach((z,B)=>E.set(B,!1))},[n]),H.useEffect(()=>{!n&&!E.size&&a&&a()},[n]),p==="popLayout"&&(e=Y.jsx(uL,{isPresent:n,anchorX:o,root:P,children:e})),Y.jsx($v.Provider,{value:R,children:e})};function hL(){return new Map}function HA(e=!0){const t=H.useContext($v);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:a,register:h}=t,g=H.useId();H.useEffect(()=>{if(e)return h(g)},[e]);const p=H.useCallback(()=>e&&a&&a(g),[g,a,e]);return!n&&a?[!1,p]:[!0]}const Py=e=>e.key||"";function eP(e){const t=[];return H.Children.forEach(e,n=>{H.isValidElement(n)&&t.push(n)}),t}const Hb=({children:e,custom:t,initial:n=!0,onExitComplete:a,presenceAffectsLayout:h=!0,mode:g="sync",propagate:p=!1,anchorX:o="left",root:P})=>{const[E,C]=HA(p),I=H.useMemo(()=>eP(e),[e]),R=p&&!E?[]:I.map(Py),z=H.useRef(!0),B=H.useRef(I),U=Pb(()=>new Map),[Z,Q]=H.useState(I),[le,se]=H.useState(I);nA(()=>{z.current=!1,B.current=I;for(let Ae=0;Ae<le.length;Ae++){const Ne=Py(le[Ae]);R.includes(Ne)?U.delete(Ne):U.get(Ne)!==!0&&U.set(Ne,!1)}},[le,R.length,R.join("-")]);const Ce=[];if(I!==Z){let Ae=[...I];for(let Ne=0;Ne<le.length;Ne++){const Qe=le[Ne],ht=Py(Qe);R.includes(ht)||(Ae.splice(Ne,0,Qe),Ce.push(Qe))}return g==="wait"&&Ce.length&&(Ae=Ce),se(eP(Ae)),Q(I),null}const{forceRender:be}=H.useContext(Sb);return Y.jsx(Y.Fragment,{children:le.map(Ae=>{const Ne=Py(Ae),Qe=p&&!E?!1:I===le||R.includes(Ne),ht=()=>{if(U.has(Ne))U.set(Ne,!0);else return;let Et=!0;U.forEach(vt=>{vt||(Et=!1)}),Et&&(be?.(),se(B.current),p&&C?.(),a&&a())};return Y.jsx(cL,{isPresent:Qe,initial:!z.current||n?void 0:!1,custom:t,presenceAffectsLayout:h,mode:g,root:P,onExitComplete:Qe?void 0:ht,anchorX:o,children:Ae},Ne)})})},KA=H.createContext({strict:!1}),tP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Dp={};for(const e in tP)Dp[e]={isEnabled:t=>tP[e].some(n=>!!t[n])};function dL(e){for(const t in e)Dp[t]={...Dp[t],...e[t]}}const fL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Jy(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||fL.has(e)}let XA=e=>!Jy(e);function pL(e){typeof e=="function"&&(XA=t=>t.startsWith("on")?!Jy(t):e(t))}try{pL(require("@emotion/is-prop-valid").default)}catch{}function mL(e,t,n){const a={};for(const h in e)h==="values"&&typeof e.values=="object"||(XA(h)||n===!0&&Jy(h)||!t&&!Jy(h)||e.draggable&&h.startsWith("onDrag"))&&(a[h]=e[h]);return a}const Vv=H.createContext({});function Uv(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function ug(e){return typeof e=="string"||Array.isArray(e)}const Kb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Xb=["initial",...Kb];function Gv(e){return Uv(e.animate)||Xb.some(t=>ug(e[t]))}function YA(e){return!!(Gv(e)||e.variants)}function gL(e,t){if(Gv(e)){const{initial:n,animate:a}=e;return{initial:n===!1||ug(n)?n:void 0,animate:ug(a)?a:void 0}}return e.inherit!==!1?t:{}}function yL(e){const{initial:t,animate:n}=gL(e,H.useContext(Vv));return H.useMemo(()=>({initial:t,animate:n}),[rP(t),rP(n)])}function rP(e){return Array.isArray(e)?e.join(" "):e}const cg={};function vL(e){for(const t in e)cg[t]=e[t],Ob(t)&&(cg[t].isCSSVariable=!0)}function QA(e,{layout:t,layoutId:n}){return qp.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!cg[e]||e==="opacity")}const _L={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xL=Gp.length;function bL(e,t,n){let a="",h=!0;for(let g=0;g<xL;g++){const p=Gp[g],o=e[p];if(o===void 0)continue;let P=!0;if(typeof o=="number"?P=o===(p.startsWith("scale")?1:0):P=parseFloat(o)===0,!P||n){const E=VA(o,Gb[p]);if(!P){h=!1;const C=_L[p]||p;a+=`${C}(${E}) `}n&&(t[p]=E)}}return a=a.trim(),n?a=n(t,h?"":a):h&&(a="none"),a}function Yb(e,t,n){const{style:a,vars:h,transformOrigin:g}=e;let p=!1,o=!1;for(const P in t){const E=t[P];if(qp.has(P)){p=!0;continue}else if(Ob(P)){h[P]=E;continue}else{const C=VA(E,Gb[P]);P.startsWith("origin")?(o=!0,g[P]=C):a[P]=C}}if(t.transform||(p||n?a.transform=bL(t,e.transform,n):a.transform&&(a.transform="none")),o){const{originX:P="50%",originY:E="50%",originZ:C=0}=g;a.transformOrigin=`${P} ${E} ${C}`}}const Qb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function JA(e,t,n){for(const a in t)!Na(t[a])&&!QA(a,n)&&(e[a]=t[a])}function wL({transformTemplate:e},t){return H.useMemo(()=>{const n=Qb();return Yb(n,t,e),Object.assign({},n.vars,n.style)},[t])}function SL(e,t){const n=e.style||{},a={};return JA(a,n,e),Object.assign(a,wL(e,t)),a}function PL(e,t){const n={},a=SL(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=a,n}const TL={offset:"stroke-dashoffset",array:"stroke-dasharray"},CL={offset:"strokeDashoffset",array:"strokeDasharray"};function EL(e,t,n=1,a=0,h=!0){e.pathLength=1;const g=h?TL:CL;e[g.offset]=gr.transform(-a);const p=gr.transform(t),o=gr.transform(n);e[g.array]=`${p} ${o}`}function eI(e,{attrX:t,attrY:n,attrScale:a,pathLength:h,pathSpacing:g=1,pathOffset:p=0,...o},P,E,C){if(Yb(e,o,E),P){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:I,style:R}=e;I.transform&&(R.transform=I.transform,delete I.transform),(R.transform||I.transformOrigin)&&(R.transformOrigin=I.transformOrigin??"50% 50%",delete I.transformOrigin),R.transform&&(R.transformBox=C?.transformBox??"fill-box",delete I.transformBox),t!==void 0&&(I.x=t),n!==void 0&&(I.y=n),a!==void 0&&(I.scale=a),h!==void 0&&EL(I,h,g,p,!1)}const tI=()=>({...Qb(),attrs:{}}),rI=e=>typeof e=="string"&&e.toLowerCase()==="svg";function ML(e,t,n,a){const h=H.useMemo(()=>{const g=tI();return eI(g,t,rI(a),e.transformTemplate,e.style),{...g.attrs,style:{...g.style}}},[t]);if(e.style){const g={};JA(g,e.style,e),h.style={...g,...h.style}}return h}const AL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Jb(e){return typeof e!="string"||e.includes("-")?!1:!!(AL.indexOf(e)>-1||/[A-Z]/u.test(e))}function IL(e,t,n,{latestValues:a},h,g=!1){const o=(Jb(e)?ML:PL)(t,a,h,e),P=mL(t,typeof e=="string",g),E=e!==H.Fragment?{...P,...o,ref:n}:{},{children:C}=t,I=H.useMemo(()=>Na(C)?C.get():C,[C]);return H.createElement(e,{...E,children:I})}function nP(e){const t=[{},{}];return e?.values.forEach((n,a)=>{t[0][a]=n.get(),t[1][a]=n.getVelocity()}),t}function ew(e,t,n,a){if(typeof t=="function"){const[h,g]=nP(a);t=t(n!==void 0?n:e.custom,h,g)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[h,g]=nP(a);t=t(n!==void 0?n:e.custom,h,g)}return t}function Gy(e){return Na(e)?e.get():e}function kL({scrapeMotionValuesFromProps:e,createRenderState:t},n,a,h){return{latestValues:DL(n,a,h,e),renderState:t()}}function DL(e,t,n,a){const h={},g=a(e,{});for(const R in g)h[R]=Gy(g[R]);let{initial:p,animate:o}=e;const P=Gv(e),E=YA(e);t&&E&&!P&&e.inherit!==!1&&(p===void 0&&(p=t.initial),o===void 0&&(o=t.animate));let C=n?n.initial===!1:!1;C=C||p===!1;const I=C?o:p;if(I&&typeof I!="boolean"&&!Uv(I)){const R=Array.isArray(I)?I:[I];for(let z=0;z<R.length;z++){const B=ew(e,R[z]);if(B){const{transitionEnd:U,transition:Z,...Q}=B;for(const le in Q){let se=Q[le];if(Array.isArray(se)){const Ce=C?se.length-1:0;se=se[Ce]}se!==null&&(h[le]=se)}for(const le in U)h[le]=U[le]}}}return h}const nI=e=>(t,n)=>{const a=H.useContext(Vv),h=H.useContext($v),g=()=>kL(e,t,a,h);return n?g():Pb(g)};function tw(e,t,n){const{style:a}=e,h={};for(const g in a)(Na(a[g])||t.style&&Na(t.style[g])||QA(g,e)||n?.getValue(g)?.liveStyle!==void 0)&&(h[g]=a[g]);return h}const OL=nI({scrapeMotionValuesFromProps:tw,createRenderState:Qb});function iI(e,t,n){const a=tw(e,t,n);for(const h in e)if(Na(e[h])||Na(t[h])){const g=Gp.indexOf(h)!==-1?"attr"+h.charAt(0).toUpperCase()+h.substring(1):h;a[g]=e[h]}return a}const RL=nI({scrapeMotionValuesFromProps:iI,createRenderState:tI}),zL=Symbol.for("motionComponentSymbol");function wp(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function LL(e,t,n){return H.useCallback(a=>{a&&e.onMount&&e.onMount(a),t&&(a?t.mount(a):t.unmount()),n&&(typeof n=="function"?n(a):wp(n)&&(n.current=a))},[t])}const rw=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),jL="framerAppearId",aI="data-"+rw(jL),oI=H.createContext({});function NL(e,t,n,a,h){const{visualElement:g}=H.useContext(Vv),p=H.useContext(KA),o=H.useContext($v),P=H.useContext(Zb).reducedMotion,E=H.useRef(null);a=a||p.renderer,!E.current&&a&&(E.current=a(e,{visualState:t,parent:g,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:P}));const C=E.current,I=H.useContext(oI);C&&!C.projection&&h&&(C.type==="html"||C.type==="svg")&&FL(E.current,n,h,I);const R=H.useRef(!1);H.useInsertionEffect(()=>{C&&R.current&&C.update(n,o)});const z=n[aI],B=H.useRef(!!z&&!window.MotionHandoffIsComplete?.(z)&&window.MotionHasOptimisedAnimation?.(z));return nA(()=>{C&&(R.current=!0,window.MotionIsMounted=!0,C.updateFeatures(),C.scheduleRenderMicrotask(),B.current&&C.animationState&&C.animationState.animateChanges())}),H.useEffect(()=>{C&&(!B.current&&C.animationState&&C.animationState.animateChanges(),B.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(z)}),B.current=!1),C.enteringChildren=void 0)}),C}function FL(e,t,n,a){const{layoutId:h,layout:g,drag:p,dragConstraints:o,layoutScroll:P,layoutRoot:E,layoutCrossfade:C}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:sI(e.parent)),e.projection.setOptions({layoutId:h,layout:g,alwaysMeasureLayout:!!p||o&&wp(o),visualElement:e,animationType:typeof g=="string"?g:"both",initialPromotionConfig:a,crossfade:C,layoutScroll:P,layoutRoot:E})}function sI(e){if(e)return e.options.allowProjection!==!1?e.projection:sI(e.parent)}function l0(e,{forwardMotionProps:t=!1}={},n,a){n&&dL(n);const h=Jb(e)?RL:OL;function g(o,P){let E;const C={...H.useContext(Zb),...o,layoutId:BL(o)},{isStatic:I}=C,R=yL(o),z=h(o,I);if(!I&&Tb){$L();const B=VL(C);E=B.MeasureLayout,R.visualElement=NL(e,z,C,a,B.ProjectionNode)}return Y.jsxs(Vv.Provider,{value:R,children:[E&&R.visualElement?Y.jsx(E,{visualElement:R.visualElement,...C}):null,IL(e,o,LL(z,R.visualElement,P),z,I,t)]})}g.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const p=H.forwardRef(g);return p[zL]=e,p}function BL({layoutId:e}){const t=H.useContext(Sb).id;return t&&e!==void 0?t+"-"+e:e}function $L(e,t){H.useContext(KA).strict}function VL(e){const{drag:t,layout:n}=Dp;if(!t&&!n)return{};const a={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function UL(e,t){if(typeof Proxy>"u")return l0;const n=new Map,a=(g,p)=>l0(g,p,e,t),h=(g,p)=>a(g,p);return new Proxy(h,{get:(g,p)=>p==="create"?a:(n.has(p)||n.set(p,l0(p,void 0,e,t)),n.get(p))})}function lI({top:e,left:t,right:n,bottom:a}){return{x:{min:t,max:n},y:{min:e,max:a}}}function GL({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function qL(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),a=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:a.y,right:a.x}}function u0(e){return e===void 0||e===1}function y1({scale:e,scaleX:t,scaleY:n}){return!u0(e)||!u0(t)||!u0(n)}function Kd(e){return y1(e)||uI(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function uI(e){return iP(e.x)||iP(e.y)}function iP(e){return e&&e!=="0%"}function ev(e,t,n){const a=e-n,h=t*a;return n+h}function aP(e,t,n,a,h){return h!==void 0&&(e=ev(e,h,a)),ev(e,n,a)+t}function v1(e,t=0,n=1,a,h){e.min=aP(e.min,t,n,a,h),e.max=aP(e.max,t,n,a,h)}function cI(e,{x:t,y:n}){v1(e.x,t.translate,t.scale,t.originPoint),v1(e.y,n.translate,n.scale,n.originPoint)}const oP=.999999999999,sP=1.0000000000001;function WL(e,t,n,a=!1){const h=n.length;if(!h)return;t.x=t.y=1;let g,p;for(let o=0;o<h;o++){g=n[o],p=g.projectionDelta;const{visualElement:P}=g.options;P&&P.props.style&&P.props.style.display==="contents"||(a&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Pp(e,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),p&&(t.x*=p.x.scale,t.y*=p.y.scale,cI(e,p)),a&&Kd(g.latestValues)&&Pp(e,g.latestValues))}t.x<sP&&t.x>oP&&(t.x=1),t.y<sP&&t.y>oP&&(t.y=1)}function Sp(e,t){e.min=e.min+t,e.max=e.max+t}function lP(e,t,n,a,h=.5){const g=Gn(e.min,e.max,h);v1(e,t,n,g,a)}function Pp(e,t){lP(e.x,t.x,t.scaleX,t.scale,t.originX),lP(e.y,t.y,t.scaleY,t.scale,t.originY)}function hI(e,t){return lI(qL(e.getBoundingClientRect(),t))}function ZL(e,t,n){const a=hI(e,n),{scroll:h}=t;return h&&(Sp(a.x,h.offset.x),Sp(a.y,h.offset.y)),a}const uP=()=>({translate:0,scale:1,origin:0,originPoint:0}),Tp=()=>({x:uP(),y:uP()}),cP=()=>({min:0,max:0}),hi=()=>({x:cP(),y:cP()}),_1={current:null},dI={current:!1};function HL(){if(dI.current=!0,!!Tb)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>_1.current=e.matches;e.addEventListener("change",t),t()}else _1.current=!1}const KL=new WeakMap;function XL(e,t,n){for(const a in t){const h=t[a],g=n[a];if(Na(h))e.addValue(a,h);else if(Na(g))e.addValue(a,kp(h,{owner:e}));else if(g!==h)if(e.hasValue(a)){const p=e.getValue(a);p.liveStyle===!0?p.jump(h):p.hasAnimated||p.set(h)}else{const p=e.getStaticValue(a);e.addValue(a,kp(p!==void 0?p:h,{owner:e}))}}for(const a in n)t[a]===void 0&&e.removeValue(a);return t}const hP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class YL{scrapeMotionValuesFromProps(t,n,a){return{}}constructor({parent:t,props:n,presenceContext:a,reducedMotionConfig:h,blockInitialAnimation:g,visualState:p},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Vb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const R=So.now();this.renderScheduledAt<R&&(this.renderScheduledAt=R,Fn.render(this.render,!1,!0))};const{latestValues:P,renderState:E}=p;this.latestValues=P,this.baseTarget={...P},this.initialValues=n.initial?{...P}:{},this.renderState=E,this.parent=t,this.props=n,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=h,this.options=o,this.blockInitialAnimation=!!g,this.isControllingVariants=Gv(n),this.isVariantNode=YA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:C,...I}=this.scrapeMotionValuesFromProps(n,{},this);for(const R in I){const z=I[R];P[R]!==void 0&&Na(z)&&z.set(P[R])}}mount(t){this.current=t,KL.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,a)=>this.bindToMotionValue(a,n)),dI.current||HL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_1.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Zh(this.notifyUpdate),Zh(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const a=qp.has(t);a&&this.onBindTransform&&this.onBindTransform();const h=n.on("change",p=>{this.latestValues[t]=p,this.props.onUpdate&&Fn.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let g;window.MotionCheckAppearSync&&(g=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{h(),g&&g(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Dp){const n=Dp[t];if(!n)continue;const{isEnabled:a,Feature:h}=n;if(!this.features[t]&&h&&a(this.props)&&(this.features[t]=new h(this)),this.features[t]){const g=this.features[t];g.isMounted?g.update():(g.mount(),g.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hi()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let a=0;a<hP.length;a++){const h=hP[a];this.propEventSubscriptions[h]&&(this.propEventSubscriptions[h](),delete this.propEventSubscriptions[h]);const g="on"+h,p=t[g];p&&(this.propEventSubscriptions[h]=this.on(h,p))}this.prevMotionValues=XL(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const a=this.values.get(t);n!==a&&(a&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&n!==void 0&&(a=kp(n===null?void 0:n,{owner:this}),this.addValue(t,a)),a}readValue(t,n){let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(iA(a)||oA(a))?a=parseFloat(a):!sL(a)&&Hh.test(n)&&(a=$A(t,n)),this.setBaseTarget(t,Na(a)?a.get():a)),Na(a)?a.get():a}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let a;if(typeof n=="string"||typeof n=="object"){const g=ew(this.props,n,this.presenceContext?.custom);g&&(a=g[t])}if(n&&a!==void 0)return a;const h=this.getBaseTargetFromProps(this.props,t);return h!==void 0&&!Na(h)?h:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Ib),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){qb.render(this.render)}}class fI extends YL{constructor(){super(...arguments),this.KeyframeResolver=K5}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:a}){delete n[t],delete a[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Na(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function pI(e,{style:t,vars:n},a,h){const g=e.style;let p;for(p in t)g[p]=t[p];h?.applyProjectionStyles(g,a);for(p in n)g.setProperty(p,n[p])}function QL(e){return window.getComputedStyle(e)}class JL extends fI{constructor(){super(...arguments),this.type="html",this.renderInstance=pI}readValueFromInstance(t,n){if(qp.has(n))return this.projection?.isProjecting?c1(n):p5(t,n);{const a=QL(t),h=(Ob(n)?a.getPropertyValue(n):a[n])||0;return typeof h=="string"?h.trim():h}}measureInstanceViewportBox(t,{transformPagePoint:n}){return hI(t,n)}build(t,n,a){Yb(t,n,a.transformTemplate)}scrapeMotionValuesFromProps(t,n,a){return tw(t,n,a)}}const mI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ej(e,t,n,a){pI(e,t,void 0,a);for(const h in t.attrs)e.setAttribute(mI.has(h)?h:rw(h),t.attrs[h])}class tj extends fI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=hi}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(qp.has(n)){const a=BA(n);return a&&a.default||0}return n=mI.has(n)?n:rw(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,a){return iI(t,n,a)}build(t,n,a){eI(t,n,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(t,n,a,h){ej(t,n,a,h)}mount(t){this.isSVGTag=rI(t.tagName),super.mount(t)}}const rj=(e,t)=>Jb(e)?new tj(t):new JL(t,{allowProjection:e!==H.Fragment});function Mp(e,t,n){const a=e.getProps();return ew(a,t,n!==void 0?n:a.custom,e)}const x1=e=>Array.isArray(e);function nj(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,kp(n))}function ij(e){return x1(e)?e[e.length-1]||0:e}function aj(e,t){const n=Mp(e,t);let{transitionEnd:a={},transition:h={},...g}=n||{};g={...g,...a};for(const p in g){const o=ij(g[p]);nj(e,p,o)}}function oj(e){return!!(Na(e)&&e.add)}function b1(e,t){const n=e.getValue("willChange");if(oj(n))return n.add(t);if(!n&&Hc.WillChange){const a=new Hc.WillChange("auto");e.addValue("willChange",a),a.add(t)}}function gI(e){return e.props[aI]}const sj=e=>e!==null;function lj(e,{repeat:t,repeatType:n="loop"},a){const h=e.filter(sj),g=t&&n!=="loop"&&t%2===1?0:h.length-1;return h[g]}const uj={type:"spring",stiffness:500,damping:25,restSpeed:10},cj=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),hj={type:"keyframes",duration:.8},dj={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},fj=(e,{keyframes:t})=>t.length>2?hj:qp.has(e)?e.startsWith("scale")?cj(t[1]):uj:dj;function pj({when:e,delay:t,delayChildren:n,staggerChildren:a,staggerDirection:h,repeat:g,repeatType:p,repeatDelay:o,from:P,elapsed:E,...C}){return!!Object.keys(C).length}const nw=(e,t,n,a={},h,g)=>p=>{const o=Ub(a,e)||{},P=o.delay||a.delay||0;let{elapsed:E=0}=a;E=E-ku(P);const C={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-E,onUpdate:R=>{t.set(R),o.onUpdate&&o.onUpdate(R)},onComplete:()=>{p(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:g?void 0:h};pj(o)||Object.assign(C,fj(e,C)),C.duration&&(C.duration=ku(C.duration)),C.repeatDelay&&(C.repeatDelay=ku(C.repeatDelay)),C.from!==void 0&&(C.keyframes[0]=C.from);let I=!1;if((C.type===!1||C.duration===0&&!C.repeatDelay)&&(m1(C),C.delay===0&&(I=!0)),(Hc.instantAnimations||Hc.skipAnimations)&&(I=!0,m1(C),C.delay=0),C.allowFlatten=!o.type&&!o.ease,I&&!g&&t.get()!==void 0){const R=lj(C.keyframes,o);if(R!==void 0){Fn.update(()=>{C.onUpdate(R),C.onComplete()});return}}return o.isSync?new $b(C):new j5(C)};function mj({protectedKeys:e,needsAnimating:t},n){const a=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,a}function yI(e,t,{delay:n=0,transitionOverride:a,type:h}={}){let{transition:g=e.getDefaultTransition(),transitionEnd:p,...o}=t;a&&(g=a);const P=[],E=h&&e.animationState&&e.animationState.getState()[h];for(const C in o){const I=e.getValue(C,e.latestValues[C]??null),R=o[C];if(R===void 0||E&&mj(E,C))continue;const z={delay:n,...Ub(g||{},C)},B=I.get();if(B!==void 0&&!I.isAnimating&&!Array.isArray(R)&&R===B&&!z.velocity)continue;let U=!1;if(window.MotionHandoffAnimation){const Q=gI(e);if(Q){const le=window.MotionHandoffAnimation(Q,C,Fn);le!==null&&(z.startTime=le,U=!0)}}b1(e,C),I.start(nw(C,I,R,e.shouldReduceMotion&&jA.has(C)?{type:!1}:z,e,U));const Z=I.animation;Z&&P.push(Z)}return p&&Promise.all(P).then(()=>{Fn.update(()=>{p&&aj(e,p)})}),P}function vI(e,t,n,a=0,h=1){const g=Array.from(e).sort((E,C)=>E.sortNodePosition(C)).indexOf(t),p=e.size,o=(p-1)*a;return typeof n=="function"?n(g,p):h===1?g*a:o-g*a}function w1(e,t,n={}){const a=Mp(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:h=e.getDefaultTransition()||{}}=a||{};n.transitionOverride&&(h=n.transitionOverride);const g=a?()=>Promise.all(yI(e,a,n)):()=>Promise.resolve(),p=e.variantChildren&&e.variantChildren.size?(P=0)=>{const{delayChildren:E=0,staggerChildren:C,staggerDirection:I}=h;return gj(e,t,P,E,C,I,n)}:()=>Promise.resolve(),{when:o}=h;if(o){const[P,E]=o==="beforeChildren"?[g,p]:[p,g];return P().then(()=>E())}else return Promise.all([g(),p(n.delay)])}function gj(e,t,n=0,a=0,h=0,g=1,p){const o=[];for(const P of e.variantChildren)P.notify("AnimationStart",t),o.push(w1(P,t,{...p,delay:n+(typeof a=="function"?0:a)+vI(e.variantChildren,P,a,h,g)}).then(()=>P.notify("AnimationComplete",t)));return Promise.all(o)}function yj(e,t,n={}){e.notify("AnimationStart",t);let a;if(Array.isArray(t)){const h=t.map(g=>w1(e,g,n));a=Promise.all(h)}else if(typeof t=="string")a=w1(e,t,n);else{const h=typeof t=="function"?Mp(e,t,n.custom):t;a=Promise.all(yI(e,h,n))}return a.then(()=>{e.notify("AnimationComplete",t)})}function _I(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let a=0;a<n;a++)if(t[a]!==e[a])return!1;return!0}const vj=Xb.length;function xI(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?xI(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<vj;n++){const a=Xb[n],h=e.props[a];(ug(h)||h===!1)&&(t[a]=h)}return t}const _j=[...Kb].reverse(),xj=Kb.length;function bj(e){return t=>Promise.all(t.map(({animation:n,options:a})=>yj(e,n,a)))}function wj(e){let t=bj(e),n=dP(),a=!0;const h=P=>(E,C)=>{const I=Mp(e,C,P==="exit"?e.presenceContext?.custom:void 0);if(I){const{transition:R,transitionEnd:z,...B}=I;E={...E,...B,...z}}return E};function g(P){t=P(e)}function p(P){const{props:E}=e,C=xI(e.parent)||{},I=[],R=new Set;let z={},B=1/0;for(let Z=0;Z<xj;Z++){const Q=_j[Z],le=n[Q],se=E[Q]!==void 0?E[Q]:C[Q],Ce=ug(se),be=Q===P?le.isActive:null;be===!1&&(B=Z);let Ae=se===C[Q]&&se!==E[Q]&&Ce;if(Ae&&a&&e.manuallyAnimateOnMount&&(Ae=!1),le.protectedKeys={...z},!le.isActive&&be===null||!se&&!le.prevProp||Uv(se)||typeof se=="boolean")continue;const Ne=Sj(le.prevProp,se);let Qe=Ne||Q===P&&le.isActive&&!Ae&&Ce||Z>B&&Ce,ht=!1;const Et=Array.isArray(se)?se:[se];let vt=Et.reduce(h(Q),{});be===!1&&(vt={});const{prevResolvedValues:It={}}=le,Ft={...It,...vt},er=Mt=>{Qe=!0,R.has(Mt)&&(ht=!0,R.delete(Mt)),le.needsAnimating[Mt]=!0;const ut=e.getValue(Mt);ut&&(ut.liveStyle=!1)};for(const Mt in Ft){const ut=vt[Mt],Ct=It[Mt];if(z.hasOwnProperty(Mt))continue;let wt=!1;x1(ut)&&x1(Ct)?wt=!_I(ut,Ct):wt=ut!==Ct,wt?ut!=null?er(Mt):R.add(Mt):ut!==void 0&&R.has(Mt)?er(Mt):le.protectedKeys[Mt]=!0}le.prevProp=se,le.prevResolvedValues=vt,le.isActive&&(z={...z,...vt}),a&&e.blockInitialAnimation&&(Qe=!1);const lr=Ae&&Ne;Qe&&(!lr||ht)&&I.push(...Et.map(Mt=>{const ut={type:Q};if(typeof Mt=="string"&&a&&!lr&&e.manuallyAnimateOnMount&&e.parent){const{parent:Ct}=e,wt=Mp(Ct,Mt);if(Ct.enteringChildren&&wt){const{delayChildren:ze}=wt.transition||{};ut.delay=vI(Ct.enteringChildren,e,ze)}}return{animation:Mt,options:ut}}))}if(R.size){const Z={};if(typeof E.initial!="boolean"){const Q=Mp(e,Array.isArray(E.initial)?E.initial[0]:E.initial);Q&&Q.transition&&(Z.transition=Q.transition)}R.forEach(Q=>{const le=e.getBaseTarget(Q),se=e.getValue(Q);se&&(se.liveStyle=!0),Z[Q]=le??null}),I.push({animation:Z})}let U=!!I.length;return a&&(E.initial===!1||E.initial===E.animate)&&!e.manuallyAnimateOnMount&&(U=!1),a=!1,U?t(I):Promise.resolve()}function o(P,E){if(n[P].isActive===E)return Promise.resolve();e.variantChildren?.forEach(I=>I.animationState?.setActive(P,E)),n[P].isActive=E;const C=p(P);for(const I in n)n[I].protectedKeys={};return C}return{animateChanges:p,setActive:o,setAnimateFunction:g,getState:()=>n,reset:()=>{n=dP(),a=!0}}}function Sj(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!_I(t,e):!1}function Hd(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function dP(){return{animate:Hd(!0),whileInView:Hd(),whileHover:Hd(),whileTap:Hd(),whileDrag:Hd(),whileFocus:Hd(),exit:Hd()}}class Qh{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Pj extends Qh{constructor(t){super(t),t.animationState||(t.animationState=wj(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Uv(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Tj=0;class Cj extends Qh{constructor(){super(...arguments),this.id=Tj++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const h=this.node.animationState.setActive("exit",!t);n&&!t&&h.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Ej={animation:{Feature:Pj},exit:{Feature:Cj}};function hg(e,t,n,a={passive:!0}){return e.addEventListener(t,n,a),()=>e.removeEventListener(t,n)}function Ig(e){return{point:{x:e.pageX,y:e.pageY}}}const Mj=e=>t=>Wb(t)&&e(t,Ig(t));function Jm(e,t,n,a){return hg(e,t,Mj(n),a)}const bI=1e-4,Aj=1-bI,Ij=1+bI,wI=.01,kj=0-wI,Dj=0+wI;function to(e){return e.max-e.min}function Oj(e,t,n){return Math.abs(e-t)<=n}function fP(e,t,n,a=.5){e.origin=a,e.originPoint=Gn(t.min,t.max,e.origin),e.scale=to(n)/to(t),e.translate=Gn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=Aj&&e.scale<=Ij||isNaN(e.scale))&&(e.scale=1),(e.translate>=kj&&e.translate<=Dj||isNaN(e.translate))&&(e.translate=0)}function eg(e,t,n,a){fP(e.x,t.x,n.x,a?a.originX:void 0),fP(e.y,t.y,n.y,a?a.originY:void 0)}function pP(e,t,n){e.min=n.min+t.min,e.max=e.min+to(t)}function Rj(e,t,n){pP(e.x,t.x,n.x),pP(e.y,t.y,n.y)}function mP(e,t,n){e.min=t.min-n.min,e.max=e.min+to(t)}function tg(e,t,n){mP(e.x,t.x,n.x),mP(e.y,t.y,n.y)}function Us(e){return[e("x"),e("y")]}const SI=({current:e})=>e?e.ownerDocument.defaultView:null,gP=(e,t)=>Math.abs(e-t);function zj(e,t){const n=gP(e.x,t.x),a=gP(e.y,t.y);return Math.sqrt(n**2+a**2)}class PI{constructor(t,n,{transformPagePoint:a,contextWindow:h=window,dragSnapToOrigin:g=!1,distanceThreshold:p=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=h0(this.lastMoveEventInfo,this.history),z=this.startEvent!==null,B=zj(R.offset,{x:0,y:0})>=this.distanceThreshold;if(!z&&!B)return;const{point:U}=R,{timestamp:Z}=Sa;this.history.push({...U,timestamp:Z});const{onStart:Q,onMove:le}=this.handlers;z||(Q&&Q(this.lastMoveEvent,R),this.startEvent=this.lastMoveEvent),le&&le(this.lastMoveEvent,R)},this.handlePointerMove=(R,z)=>{this.lastMoveEvent=R,this.lastMoveEventInfo=c0(z,this.transformPagePoint),Fn.update(this.updatePoint,!0)},this.handlePointerUp=(R,z)=>{this.end();const{onEnd:B,onSessionEnd:U,resumeAnimation:Z}=this.handlers;if(this.dragSnapToOrigin&&Z&&Z(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Q=h0(R.type==="pointercancel"?this.lastMoveEventInfo:c0(z,this.transformPagePoint),this.history);this.startEvent&&B&&B(R,Q),U&&U(R,Q)},!Wb(t))return;this.dragSnapToOrigin=g,this.handlers=n,this.transformPagePoint=a,this.distanceThreshold=p,this.contextWindow=h||window;const o=Ig(t),P=c0(o,this.transformPagePoint),{point:E}=P,{timestamp:C}=Sa;this.history=[{...E,timestamp:C}];const{onSessionStart:I}=n;I&&I(t,h0(P,this.history)),this.removeListeners=Eg(Jm(this.contextWindow,"pointermove",this.handlePointerMove),Jm(this.contextWindow,"pointerup",this.handlePointerUp),Jm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Zh(this.updatePoint)}}function c0(e,t){return t?{point:t(e.point)}:e}function yP(e,t){return{x:e.x-t.x,y:e.y-t.y}}function h0({point:e},t){return{point:e,delta:yP(e,TI(t)),offset:yP(e,Lj(t)),velocity:jj(t,.1)}}function Lj(e){return e[0]}function TI(e){return e[e.length-1]}function jj(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,a=null;const h=TI(e);for(;n>=0&&(a=e[n],!(h.timestamp-a.timestamp>ku(t)));)n--;if(!a)return{x:0,y:0};const g=Du(h.timestamp-a.timestamp);if(g===0)return{x:0,y:0};const p={x:(h.x-a.x)/g,y:(h.y-a.y)/g};return p.x===1/0&&(p.x=0),p.y===1/0&&(p.y=0),p}function Nj(e,{min:t,max:n},a){return t!==void 0&&e<t?e=a?Gn(t,e,a.min):Math.max(e,t):n!==void 0&&e>n&&(e=a?Gn(n,e,a.max):Math.min(e,n)),e}function vP(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Fj(e,{top:t,left:n,bottom:a,right:h}){return{x:vP(e.x,n,h),y:vP(e.y,t,a)}}function _P(e,t){let n=t.min-e.min,a=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,a]=[a,n]),{min:n,max:a}}function Bj(e,t){return{x:_P(e.x,t.x),y:_P(e.y,t.y)}}function $j(e,t){let n=.5;const a=to(e),h=to(t);return h>a?n=og(t.min,t.max-a,e.min):a>h&&(n=og(e.min,e.max-h,t.min)),Zc(0,1,n)}function Vj(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const S1=.35;function Uj(e=S1){return e===!1?e=0:e===!0&&(e=S1),{x:xP(e,"left","right"),y:xP(e,"top","bottom")}}function xP(e,t,n){return{min:bP(e,t),max:bP(e,n)}}function bP(e,t){return typeof e=="number"?e:e[t]||0}const Gj=new WeakMap;class qj{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hi(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:a}={}){const{presenceContext:h}=this.visualElement;if(h&&h.isPresent===!1)return;const g=I=>{const{dragSnapToOrigin:R}=this.getProps();R?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ig(I).point)},p=(I,R)=>{const{drag:z,dragPropagation:B,onDragStart:U}=this.getProps();if(z&&!B&&(this.openDragLock&&this.openDragLock(),this.openDragLock=J5(z),!this.openDragLock))return;this.latestPointerEvent=I,this.latestPanInfo=R,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Us(Q=>{let le=this.getAxisMotionValue(Q).get()||0;if(Ou.test(le)){const{projection:se}=this.visualElement;if(se&&se.layout){const Ce=se.layout.layoutBox[Q];Ce&&(le=to(Ce)*(parseFloat(le)/100))}}this.originPoint[Q]=le}),U&&Fn.postRender(()=>U(I,R)),b1(this.visualElement,"transform");const{animationState:Z}=this.visualElement;Z&&Z.setActive("whileDrag",!0)},o=(I,R)=>{this.latestPointerEvent=I,this.latestPanInfo=R;const{dragPropagation:z,dragDirectionLock:B,onDirectionLock:U,onDrag:Z}=this.getProps();if(!z&&!this.openDragLock)return;const{offset:Q}=R;if(B&&this.currentDirection===null){this.currentDirection=Wj(Q),this.currentDirection!==null&&U&&U(this.currentDirection);return}this.updateAxis("x",R.point,Q),this.updateAxis("y",R.point,Q),this.visualElement.render(),Z&&Z(I,R)},P=(I,R)=>{this.latestPointerEvent=I,this.latestPanInfo=R,this.stop(I,R),this.latestPointerEvent=null,this.latestPanInfo=null},E=()=>Us(I=>this.getAnimationState(I)==="paused"&&this.getAxisMotionValue(I).animation?.play()),{dragSnapToOrigin:C}=this.getProps();this.panSession=new PI(t,{onSessionStart:g,onStart:p,onMove:o,onSessionEnd:P,resumeAnimation:E},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:C,distanceThreshold:a,contextWindow:SI(this.visualElement)})}stop(t,n){const a=t||this.latestPointerEvent,h=n||this.latestPanInfo,g=this.isDragging;if(this.cancel(),!g||!h||!a)return;const{velocity:p}=h;this.startAnimation(p);const{onDragEnd:o}=this.getProps();o&&Fn.postRender(()=>o(a,h))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,a){const{drag:h}=this.getProps();if(!a||!Ty(t,h,this.currentDirection))return;const g=this.getAxisMotionValue(t);let p=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(p=Nj(p,this.constraints[t],this.elastic[t])),g.set(p)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,h=this.constraints;t&&wp(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&a?this.constraints=Fj(a.layoutBox,t):this.constraints=!1,this.elastic=Uj(n),h!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Us(g=>{this.constraints!==!1&&this.getAxisMotionValue(g)&&(this.constraints[g]=Vj(a.layoutBox[g],this.constraints[g]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!wp(t))return!1;const a=t.current,{projection:h}=this.visualElement;if(!h||!h.layout)return!1;const g=ZL(a,h.root,this.visualElement.getTransformPagePoint());let p=Bj(h.layout.layoutBox,g);if(n){const o=n(GL(p));this.hasMutatedConstraints=!!o,o&&(p=lI(o))}return p}startAnimation(t){const{drag:n,dragMomentum:a,dragElastic:h,dragTransition:g,dragSnapToOrigin:p,onDragTransitionEnd:o}=this.getProps(),P=this.constraints||{},E=Us(C=>{if(!Ty(C,n,this.currentDirection))return;let I=P&&P[C]||{};p&&(I={min:0,max:0});const R=h?200:1e6,z=h?40:1e7,B={type:"inertia",velocity:a?t[C]:0,bounceStiffness:R,bounceDamping:z,timeConstant:750,restDelta:1,restSpeed:10,...g,...I};return this.startAxisValueAnimation(C,B)});return Promise.all(E).then(o)}startAxisValueAnimation(t,n){const a=this.getAxisMotionValue(t);return b1(this.visualElement,t),a.start(nw(t,a,0,n,this.visualElement,!1))}stopAnimation(){Us(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Us(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,a=this.visualElement.getProps(),h=a[n];return h||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){Us(n=>{const{drag:a}=this.getProps();if(!Ty(n,a,this.currentDirection))return;const{projection:h}=this.visualElement,g=this.getAxisMotionValue(n);if(h&&h.layout){const{min:p,max:o}=h.layout.layoutBox[n];g.set(t[n]-Gn(p,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:a}=this.visualElement;if(!wp(n)||!a||!this.constraints)return;this.stopAnimation();const h={x:0,y:0};Us(p=>{const o=this.getAxisMotionValue(p);if(o&&this.constraints!==!1){const P=o.get();h[p]=$j({min:P,max:P},this.constraints[p])}});const{transformTemplate:g}=this.visualElement.getProps();this.visualElement.current.style.transform=g?g({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),Us(p=>{if(!Ty(p,t,null))return;const o=this.getAxisMotionValue(p),{min:P,max:E}=this.constraints[p];o.set(Gn(P,E,h[p]))})}addListeners(){if(!this.visualElement.current)return;Gj.set(this.visualElement,this);const t=this.visualElement.current,n=Jm(t,"pointerdown",P=>{const{drag:E,dragListener:C=!0}=this.getProps();E&&C&&this.start(P)}),a=()=>{const{dragConstraints:P}=this.getProps();wp(P)&&P.current&&(this.constraints=this.resolveRefConstraints())},{projection:h}=this.visualElement,g=h.addEventListener("measure",a);h&&!h.layout&&(h.root&&h.root.updateScroll(),h.updateLayout()),Fn.read(a);const p=hg(window,"resize",()=>this.scalePositionWithinConstraints()),o=h.addEventListener("didUpdate",({delta:P,hasLayoutChanged:E})=>{this.isDragging&&E&&(Us(C=>{const I=this.getAxisMotionValue(C);I&&(this.originPoint[C]+=P[C].translate,I.set(I.get()+P[C].translate))}),this.visualElement.render())});return()=>{p(),n(),g(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:a=!1,dragPropagation:h=!1,dragConstraints:g=!1,dragElastic:p=S1,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:a,dragPropagation:h,dragConstraints:g,dragElastic:p,dragMomentum:o}}}function Ty(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Wj(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Zj extends Qh{constructor(t){super(t),this.removeGroupControls=Zs,this.removeListeners=Zs,this.controls=new qj(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zs}unmount(){this.removeGroupControls(),this.removeListeners()}}const wP=e=>(t,n)=>{e&&Fn.postRender(()=>e(t,n))};class Hj extends Qh{constructor(){super(...arguments),this.removePointerDownListener=Zs}onPointerDown(t){this.session=new PI(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:SI(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:a,onPanEnd:h}=this.node.getProps();return{onSessionStart:wP(t),onStart:wP(n),onMove:a,onEnd:(g,p)=>{delete this.session,h&&Fn.postRender(()=>h(g,p))}}}mount(){this.removePointerDownListener=Jm(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const qy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function SP(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Fm={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(gr.test(e))e=parseFloat(e);else return e;const n=SP(e,t.target.x),a=SP(e,t.target.y);return`${n}% ${a}%`}},Kj={correct:(e,{treeScale:t,projectionDelta:n})=>{const a=e,h=Hh.parse(e);if(h.length>5)return a;const g=Hh.createTransformer(e),p=typeof h[0]!="number"?1:0,o=n.x.scale*t.x,P=n.y.scale*t.y;h[0+p]/=o,h[1+p]/=P;const E=Gn(o,P,.5);return typeof h[2+p]=="number"&&(h[2+p]/=E),typeof h[3+p]=="number"&&(h[3+p]/=E),g(h)}};let d0=!1;class Xj extends H.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:a,layoutId:h}=this.props,{projection:g}=t;vL(Yj),g&&(n.group&&n.group.add(g),a&&a.register&&h&&a.register(g),d0&&g.root.didUpdate(),g.addEventListener("animationComplete",()=>{this.safeToRemove()}),g.setOptions({...g.options,onExitComplete:()=>this.safeToRemove()})),qy.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:a,drag:h,isPresent:g}=this.props,{projection:p}=a;return p&&(p.isPresent=g,d0=!0,h||t.layoutDependency!==n||n===void 0||t.isPresent!==g?p.willUpdate():this.safeToRemove(),t.isPresent!==g&&(g?p.promote():p.relegate()||Fn.postRender(()=>{const o=p.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),qb.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:a}=this.props,{projection:h}=t;d0=!0,h&&(h.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(h),a&&a.deregister&&a.deregister(h))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function CI(e){const[t,n]=HA(),a=H.useContext(Sb);return Y.jsx(Xj,{...e,layoutGroup:a,switchLayoutGroup:H.useContext(oI),isPresent:t,safeToRemove:n})}const Yj={borderRadius:{...Fm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fm,borderTopRightRadius:Fm,borderBottomLeftRadius:Fm,borderBottomRightRadius:Fm,boxShadow:Kj};function Qj(e,t,n){const a=Na(e)?e:kp(e);return a.start(nw("",a,t,n)),a.animation}const Jj=(e,t)=>e.depth-t.depth;class e6{constructor(){this.children=[],this.isDirty=!1}add(t){Cb(this.children,t),this.isDirty=!0}remove(t){Eb(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Jj),this.isDirty=!1,this.children.forEach(t)}}function t6(e,t){const n=So.now(),a=({timestamp:h})=>{const g=h-n;g>=t&&(Zh(a),e(g-t))};return Fn.setup(a,!0),()=>Zh(a)}const EI=["TopLeft","TopRight","BottomLeft","BottomRight"],r6=EI.length,PP=e=>typeof e=="string"?parseFloat(e):e,TP=e=>typeof e=="number"||gr.test(e);function n6(e,t,n,a,h,g){h?(e.opacity=Gn(0,n.opacity??1,i6(a)),e.opacityExit=Gn(t.opacity??1,0,a6(a))):g&&(e.opacity=Gn(t.opacity??1,n.opacity??1,a));for(let p=0;p<r6;p++){const o=`border${EI[p]}Radius`;let P=CP(t,o),E=CP(n,o);if(P===void 0&&E===void 0)continue;P||(P=0),E||(E=0),P===0||E===0||TP(P)===TP(E)?(e[o]=Math.max(Gn(PP(P),PP(E),a),0),(Ou.test(E)||Ou.test(P))&&(e[o]+="%")):e[o]=E}(t.rotate||n.rotate)&&(e.rotate=Gn(t.rotate||0,n.rotate||0,a))}function CP(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const i6=MI(0,.5,pA),a6=MI(.5,.95,Zs);function MI(e,t,n){return a=>a<e?0:a>t?1:n(og(e,t,a))}function EP(e,t){e.min=t.min,e.max=t.max}function Ns(e,t){EP(e.x,t.x),EP(e.y,t.y)}function MP(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function AP(e,t,n,a,h){return e-=t,e=ev(e,1/n,a),h!==void 0&&(e=ev(e,1/h,a)),e}function o6(e,t=0,n=1,a=.5,h,g=e,p=e){if(Ou.test(t)&&(t=parseFloat(t),t=Gn(p.min,p.max,t/100)-p.min),typeof t!="number")return;let o=Gn(g.min,g.max,a);e===g&&(o-=t),e.min=AP(e.min,t,n,o,h),e.max=AP(e.max,t,n,o,h)}function IP(e,t,[n,a,h],g,p){o6(e,t[n],t[a],t[h],t.scale,g,p)}const s6=["x","scaleX","originX"],l6=["y","scaleY","originY"];function kP(e,t,n,a){IP(e.x,t,s6,n?n.x:void 0,a?a.x:void 0),IP(e.y,t,l6,n?n.y:void 0,a?a.y:void 0)}function DP(e){return e.translate===0&&e.scale===1}function AI(e){return DP(e.x)&&DP(e.y)}function OP(e,t){return e.min===t.min&&e.max===t.max}function u6(e,t){return OP(e.x,t.x)&&OP(e.y,t.y)}function RP(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function II(e,t){return RP(e.x,t.x)&&RP(e.y,t.y)}function zP(e){return to(e.x)/to(e.y)}function LP(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class c6{constructor(){this.members=[]}add(t){Cb(this.members,t),t.scheduleRender()}remove(t){if(Eb(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(h=>t===h);if(n===0)return!1;let a;for(let h=n;h>=0;h--){const g=this.members[h];if(g.isPresent!==!1){a=g;break}}return a?(this.promote(a),!0):!1}promote(t,n){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,n&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:h}=t.options;h===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:a}=t;n.onExitComplete&&n.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function h6(e,t,n){let a="";const h=e.x.translate/t.x,g=e.y.translate/t.y,p=n?.z||0;if((h||g||p)&&(a=`translate3d(${h}px, ${g}px, ${p}px) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:E,rotate:C,rotateX:I,rotateY:R,skewX:z,skewY:B}=n;E&&(a=`perspective(${E}px) ${a}`),C&&(a+=`rotate(${C}deg) `),I&&(a+=`rotateX(${I}deg) `),R&&(a+=`rotateY(${R}deg) `),z&&(a+=`skewX(${z}deg) `),B&&(a+=`skewY(${B}deg) `)}const o=e.x.scale*t.x,P=e.y.scale*t.y;return(o!==1||P!==1)&&(a+=`scale(${o}, ${P})`),a||"none"}const f0=["","X","Y","Z"],d6=1e3;let f6=0;function p0(e,t,n,a){const{latestValues:h}=t;h[e]&&(n[e]=h[e],t.setStaticValue(e,0),a&&(a[e]=0))}function kI(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=gI(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:h,layoutId:g}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Fn,!(h||g))}const{parent:a}=e;a&&!a.hasCheckedOptimisedAppear&&kI(a)}function DI({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:a,resetTransform:h}){return class{constructor(p={},o=t?.()){this.id=f6++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(g6),this.nodes.forEach(x6),this.nodes.forEach(b6),this.nodes.forEach(y6)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=p,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let P=0;P<this.path.length;P++)this.path[P].shouldResetTransform=!0;this.root===this&&(this.nodes=new e6)}addEventListener(p,o){return this.eventHandlers.has(p)||this.eventHandlers.set(p,new Ib),this.eventHandlers.get(p).add(o)}notifyListeners(p,...o){const P=this.eventHandlers.get(p);P&&P.notify(...o)}hasListeners(p){return this.eventHandlers.has(p)}mount(p){if(this.instance)return;this.isSVG=ZA(p)&&!aL(p),this.instance=p;const{layoutId:o,layout:P,visualElement:E}=this.options;if(E&&!E.current&&E.mount(p),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(P||o)&&(this.isLayoutDirty=!0),e){let C,I=0;const R=()=>this.root.updateBlockedByResize=!1;Fn.read(()=>{I=window.innerWidth}),e(p,()=>{const z=window.innerWidth;z!==I&&(I=z,this.root.updateBlockedByResize=!0,C&&C(),C=t6(R,250),qy.hasAnimatedSinceResize&&(qy.hasAnimatedSinceResize=!1,this.nodes.forEach(FP)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&E&&(o||P)&&this.addEventListener("didUpdate",({delta:C,hasLayoutChanged:I,hasRelativeLayoutChanged:R,layout:z})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const B=this.options.transition||E.getDefaultTransition()||C6,{onLayoutAnimationStart:U,onLayoutAnimationComplete:Z}=E.getProps(),Q=!this.targetLayout||!II(this.targetLayout,z),le=!I&&R;if(this.options.layoutRoot||this.resumeFrom||le||I&&(Q||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const se={...Ub(B,"layout"),onPlay:U,onComplete:Z};(E.shouldReduceMotion||this.options.layoutRoot)&&(se.delay=0,se.type=!1),this.startAnimation(se),this.setAnimationOrigin(C,le)}else I||FP(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=z})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const p=this.getStack();p&&p.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Zh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(w6),this.animationId++)}getTransformTemplate(){const{visualElement:p}=this.options;return p&&p.getProps().transformTemplate}willUpdate(p=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&kI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let C=0;C<this.path.length;C++){const I=this.path[C];I.shouldResetTransform=!0,I.updateScroll("snapshot"),I.options.layoutRoot&&I.willUpdate(!1)}const{layoutId:o,layout:P}=this.options;if(o===void 0&&!P)return;const E=this.getTransformTemplate();this.prevTransformTemplateValue=E?E(this.latestValues,""):void 0,this.updateSnapshot(),p&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(jP);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(NP);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(_6),this.nodes.forEach(p6),this.nodes.forEach(m6)):this.nodes.forEach(NP),this.clearAllSnapshots();const o=So.now();Sa.delta=Zc(0,1e3/60,o-Sa.timestamp),Sa.timestamp=o,Sa.isProcessing=!0,r0.update.process(Sa),r0.preRender.process(Sa),r0.render.process(Sa),Sa.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,qb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(v6),this.sharedNodes.forEach(S6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Fn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Fn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!to(this.snapshot.measuredBox.x)&&!to(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let P=0;P<this.path.length;P++)this.path[P].updateScroll();const p=this.layout;this.layout=this.measure(!1),this.layoutCorrected=hi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,p?p.layoutBox:void 0)}updateScroll(p="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===p&&(o=!1),o&&this.instance){const P=a(this.instance);this.scroll={animationId:this.root.animationId,phase:p,isRoot:P,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:P}}}resetTransform(){if(!h)return;const p=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!AI(this.projectionDelta),P=this.getTransformTemplate(),E=P?P(this.latestValues,""):void 0,C=E!==this.prevTransformTemplateValue;p&&this.instance&&(o||Kd(this.latestValues)||C)&&(h(this.instance,E),this.shouldResetTransform=!1,this.scheduleRender())}measure(p=!0){const o=this.measurePageBox();let P=this.removeElementScroll(o);return p&&(P=this.removeTransform(P)),E6(P),{animationId:this.root.animationId,measuredBox:o,layoutBox:P,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:p}=this.options;if(!p)return hi();const o=p.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(M6))){const{scroll:E}=this.root;E&&(Sp(o.x,E.offset.x),Sp(o.y,E.offset.y))}return o}removeElementScroll(p){const o=hi();if(Ns(o,p),this.scroll?.wasRoot)return o;for(let P=0;P<this.path.length;P++){const E=this.path[P],{scroll:C,options:I}=E;E!==this.root&&C&&I.layoutScroll&&(C.wasRoot&&Ns(o,p),Sp(o.x,C.offset.x),Sp(o.y,C.offset.y))}return o}applyTransform(p,o=!1){const P=hi();Ns(P,p);for(let E=0;E<this.path.length;E++){const C=this.path[E];!o&&C.options.layoutScroll&&C.scroll&&C!==C.root&&Pp(P,{x:-C.scroll.offset.x,y:-C.scroll.offset.y}),Kd(C.latestValues)&&Pp(P,C.latestValues)}return Kd(this.latestValues)&&Pp(P,this.latestValues),P}removeTransform(p){const o=hi();Ns(o,p);for(let P=0;P<this.path.length;P++){const E=this.path[P];if(!E.instance||!Kd(E.latestValues))continue;y1(E.latestValues)&&E.updateSnapshot();const C=hi(),I=E.measurePageBox();Ns(C,I),kP(o,E.latestValues,E.snapshot?E.snapshot.layoutBox:void 0,C)}return Kd(this.latestValues)&&kP(o,this.latestValues),o}setTargetDelta(p){this.targetDelta=p,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(p){this.options={...this.options,...p,crossfade:p.crossfade!==void 0?p.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Sa.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(p=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const P=!!this.resumingFrom||this!==o;if(!(p||P&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:C,layoutId:I}=this.options;if(!(!this.layout||!(C||I))){if(this.resolvedRelativeTargetAt=Sa.timestamp,!this.targetDelta&&!this.relativeTarget){const R=this.getClosestProjectingParent();R&&R.layout&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hi(),this.relativeTargetOrigin=hi(),tg(this.relativeTargetOrigin,this.layout.layoutBox,R.layout.layoutBox),Ns(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=hi(),this.targetWithTransforms=hi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Rj(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ns(this.target,this.layout.layoutBox),cI(this.target,this.targetDelta)):Ns(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const R=this.getClosestProjectingParent();R&&!!R.resumingFrom==!!this.resumingFrom&&!R.options.layoutScroll&&R.target&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hi(),this.relativeTargetOrigin=hi(),tg(this.relativeTargetOrigin,this.target,R.target),Ns(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||y1(this.parent.latestValues)||uI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const p=this.getLead(),o=!!this.resumingFrom||this!==p;let P=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(P=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(P=!1),this.resolvedRelativeTargetAt===Sa.timestamp&&(P=!1),P)return;const{layout:E,layoutId:C}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(E||C))return;Ns(this.layoutCorrected,this.layout.layoutBox);const I=this.treeScale.x,R=this.treeScale.y;WL(this.layoutCorrected,this.treeScale,this.path,o),p.layout&&!p.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(p.target=p.layout.layoutBox,p.targetWithTransforms=hi());const{target:z}=p;if(!z){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(MP(this.prevProjectionDelta.x,this.projectionDelta.x),MP(this.prevProjectionDelta.y,this.projectionDelta.y)),eg(this.projectionDelta,this.layoutCorrected,z,this.latestValues),(this.treeScale.x!==I||this.treeScale.y!==R||!LP(this.projectionDelta.x,this.prevProjectionDelta.x)||!LP(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",z))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(p=!0){if(this.options.visualElement?.scheduleRender(),p){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Tp(),this.projectionDelta=Tp(),this.projectionDeltaWithTransform=Tp()}setAnimationOrigin(p,o=!1){const P=this.snapshot,E=P?P.latestValues:{},C={...this.latestValues},I=Tp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const R=hi(),z=P?P.source:void 0,B=this.layout?this.layout.source:void 0,U=z!==B,Z=this.getStack(),Q=!Z||Z.members.length<=1,le=!!(U&&!Q&&this.options.crossfade===!0&&!this.path.some(T6));this.animationProgress=0;let se;this.mixTargetDelta=Ce=>{const be=Ce/1e3;BP(I.x,p.x,be),BP(I.y,p.y,be),this.setTargetDelta(I),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(tg(R,this.layout.layoutBox,this.relativeParent.layout.layoutBox),P6(this.relativeTarget,this.relativeTargetOrigin,R,be),se&&u6(this.relativeTarget,se)&&(this.isProjectionDirty=!1),se||(se=hi()),Ns(se,this.relativeTarget)),U&&(this.animationValues=C,n6(C,E,this.latestValues,be,le,Q)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=be},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(p){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Zh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fn.update(()=>{qy.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=kp(0)),this.currentAnimation=Qj(this.motionValue,[0,1e3],{...p,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),p.onUpdate&&p.onUpdate(o)},onStop:()=>{},onComplete:()=>{p.onComplete&&p.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const p=this.getStack();p&&p.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(d6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const p=this.getLead();let{targetWithTransforms:o,target:P,layout:E,latestValues:C}=p;if(!(!o||!P||!E)){if(this!==p&&this.layout&&E&&OI(this.options.animationType,this.layout.layoutBox,E.layoutBox)){P=this.target||hi();const I=to(this.layout.layoutBox.x);P.x.min=p.target.x.min,P.x.max=P.x.min+I;const R=to(this.layout.layoutBox.y);P.y.min=p.target.y.min,P.y.max=P.y.min+R}Ns(o,P),Pp(o,C),eg(this.projectionDeltaWithTransform,this.layoutCorrected,o,C)}}registerSharedNode(p,o){this.sharedNodes.has(p)||this.sharedNodes.set(p,new c6),this.sharedNodes.get(p).add(o);const E=o.options.initialPromotionConfig;o.promote({transition:E?E.transition:void 0,preserveFollowOpacity:E&&E.shouldPreserveFollowOpacity?E.shouldPreserveFollowOpacity(o):void 0})}isLead(){const p=this.getStack();return p?p.lead===this:!0}getLead(){const{layoutId:p}=this.options;return p?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:p}=this.options;return p?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:p}=this.options;if(p)return this.root.sharedNodes.get(p)}promote({needsReset:p,transition:o,preserveFollowOpacity:P}={}){const E=this.getStack();E&&E.promote(this,P),p&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const p=this.getStack();return p?p.relegate(this):!1}resetSkewAndRotation(){const{visualElement:p}=this.options;if(!p)return;let o=!1;const{latestValues:P}=p;if((P.z||P.rotate||P.rotateX||P.rotateY||P.rotateZ||P.skewX||P.skewY)&&(o=!0),!o)return;const E={};P.z&&p0("z",p,E,this.animationValues);for(let C=0;C<f0.length;C++)p0(`rotate${f0[C]}`,p,E,this.animationValues),p0(`skew${f0[C]}`,p,E,this.animationValues);p.render();for(const C in E)p.setStaticValue(C,E[C]),this.animationValues&&(this.animationValues[C]=E[C]);p.scheduleRender()}applyProjectionStyles(p,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){p.visibility="hidden";return}const P=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,p.visibility="",p.opacity="",p.pointerEvents=Gy(o?.pointerEvents)||"",p.transform=P?P(this.latestValues,""):"none";return}const E=this.getLead();if(!this.projectionDelta||!this.layout||!E.target){this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=Gy(o?.pointerEvents)||""),this.hasProjected&&!Kd(this.latestValues)&&(p.transform=P?P({},""):"none",this.hasProjected=!1);return}p.visibility="";const C=E.animationValues||E.latestValues;this.applyTransformsToTarget();let I=h6(this.projectionDeltaWithTransform,this.treeScale,C);P&&(I=P(C,I)),p.transform=I;const{x:R,y:z}=this.projectionDelta;p.transformOrigin=`${R.origin*100}% ${z.origin*100}% 0`,E.animationValues?p.opacity=E===this?C.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:C.opacityExit:p.opacity=E===this?C.opacity!==void 0?C.opacity:"":C.opacityExit!==void 0?C.opacityExit:0;for(const B in cg){if(C[B]===void 0)continue;const{correct:U,applyTo:Z,isCSSVariable:Q}=cg[B],le=I==="none"?C[B]:U(C[B],E);if(Z){const se=Z.length;for(let Ce=0;Ce<se;Ce++)p[Z[Ce]]=le}else Q?this.options.visualElement.renderState.vars[B]=le:p[B]=le}this.options.layoutId&&(p.pointerEvents=E===this?Gy(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(p=>p.currentAnimation?.stop()),this.root.nodes.forEach(jP),this.root.sharedNodes.clear()}}}function p6(e){e.updateLayout()}function m6(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=e.layout,{animationType:h}=e.options,g=t.source!==e.layout.source;h==="size"?Us(C=>{const I=g?t.measuredBox[C]:t.layoutBox[C],R=to(I);I.min=n[C].min,I.max=I.min+R}):OI(h,t.layoutBox,n)&&Us(C=>{const I=g?t.measuredBox[C]:t.layoutBox[C],R=to(n[C]);I.max=I.min+R,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[C].max=e.relativeTarget[C].min+R)});const p=Tp();eg(p,n,t.layoutBox);const o=Tp();g?eg(o,e.applyTransform(a,!0),t.measuredBox):eg(o,n,t.layoutBox);const P=!AI(p);let E=!1;if(!e.resumeFrom){const C=e.getClosestProjectingParent();if(C&&!C.resumeFrom){const{snapshot:I,layout:R}=C;if(I&&R){const z=hi();tg(z,t.layoutBox,I.layoutBox);const B=hi();tg(B,n,R.layoutBox),II(z,B)||(E=!0),C.options.layoutRoot&&(e.relativeTarget=B,e.relativeTargetOrigin=z,e.relativeParent=C)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:o,layoutDelta:p,hasLayoutChanged:P,hasRelativeLayoutChanged:E})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function g6(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function y6(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function v6(e){e.clearSnapshot()}function jP(e){e.clearMeasurements()}function NP(e){e.isLayoutDirty=!1}function _6(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function FP(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function x6(e){e.resolveTargetDelta()}function b6(e){e.calcProjection()}function w6(e){e.resetSkewAndRotation()}function S6(e){e.removeLeadSnapshot()}function BP(e,t,n){e.translate=Gn(t.translate,0,n),e.scale=Gn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function $P(e,t,n,a){e.min=Gn(t.min,n.min,a),e.max=Gn(t.max,n.max,a)}function P6(e,t,n,a){$P(e.x,t.x,n.x,a),$P(e.y,t.y,n.y,a)}function T6(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const C6={duration:.45,ease:[.4,0,.1,1]},VP=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),UP=VP("applewebkit/")&&!VP("chrome/")?Math.round:Zs;function GP(e){e.min=UP(e.min),e.max=UP(e.max)}function E6(e){GP(e.x),GP(e.y)}function OI(e,t,n){return e==="position"||e==="preserve-aspect"&&!Oj(zP(t),zP(n),.2)}function M6(e){return e!==e.root&&e.scroll?.wasRoot}const A6=DI({attachResizeListener:(e,t)=>hg(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),m0={current:void 0},RI=DI({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!m0.current){const e=new A6({});e.mount(window),e.setOptions({layoutScroll:!0}),m0.current=e}return m0.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),I6={pan:{Feature:Hj},drag:{Feature:Zj,ProjectionNode:RI,MeasureLayout:CI}};function qP(e,t,n){const{props:a}=e;e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",n==="Start");const h="onHover"+n,g=a[h];g&&Fn.postRender(()=>g(t,Ig(t)))}class k6 extends Qh{mount(){const{current:t}=this.node;t&&(this.unmount=eL(t,(n,a)=>(qP(this.node,a,"Start"),h=>qP(this.node,h,"End"))))}unmount(){}}class D6 extends Qh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Eg(hg(this.node.current,"focus",()=>this.onFocus()),hg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function WP(e,t,n){const{props:a}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&a.whileTap&&e.animationState.setActive("whileTap",n==="Start");const h="onTap"+(n==="End"?"":n),g=a[h];g&&Fn.postRender(()=>g(t,Ig(t)))}class O6 extends Qh{mount(){const{current:t}=this.node;t&&(this.unmount=iL(t,(n,a)=>(WP(this.node,a,"Start"),(h,{success:g})=>WP(this.node,h,g?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const P1=new WeakMap,g0=new WeakMap,R6=e=>{const t=P1.get(e.target);t&&t(e)},z6=e=>{e.forEach(R6)};function L6({root:e,...t}){const n=e||document;g0.has(n)||g0.set(n,{});const a=g0.get(n),h=JSON.stringify(t);return a[h]||(a[h]=new IntersectionObserver(z6,{root:e,...t})),a[h]}function j6(e,t,n){const a=L6(t);return P1.set(e,n),a.observe(e),()=>{P1.delete(e),a.unobserve(e)}}const N6={some:0,all:1};class F6 extends Qh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:a,amount:h="some",once:g}=t,p={root:n?n.current:void 0,rootMargin:a,threshold:typeof h=="number"?h:N6[h]},o=P=>{const{isIntersecting:E}=P;if(this.isInView===E||(this.isInView=E,g&&!E&&this.hasEnteredView))return;E&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",E);const{onViewportEnter:C,onViewportLeave:I}=this.node.getProps(),R=E?C:I;R&&R(P)};return j6(this.node.current,p,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(B6(t,n))&&this.startObserver()}unmount(){}}function B6({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const $6={inView:{Feature:F6},tap:{Feature:O6},focus:{Feature:D6},hover:{Feature:k6}},V6={layout:{ProjectionNode:RI,MeasureLayout:CI}},U6={...Ej,...$6,...I6,...V6},qr=UL(U6,rj);function G6(){const[e,t]=H.useState(()=>localStorage.getItem("theme")==="dark");return H.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),Y.jsx("div",{className:"theme-switch-sun-moon","data-dark-mode":e,onClick:()=>t(!e),title:"Toggle theme",children:Y.jsx(qr.div,{className:"theme-switch-handle",layout:!0,transition:{type:"spring",stiffness:500,damping:30},children:Y.jsx("div",{className:"theme-switch-moon-crescent"})})})}function q6(){return Y.jsx("header",{className:"navbar",children:Y.jsxs("div",{className:"nav-container",children:[Y.jsx(Nc,{to:"/",className:"nav-logo",children:"LODESTAR"}),Y.jsxs("nav",{className:"nav-menu",children:[Y.jsx(Nc,{to:"/about",className:"nav-links",children:"About"}),Y.jsx(Nc,{to:"/maps",className:"nav-links",children:"Map"}),Y.jsx(Nc,{to:"/alerts",className:"nav-links",children:"Alerts"}),Y.jsx(Nc,{to:"/living-labs",className:"nav-links",children:"Living Labs"}),Y.jsx(Nc,{to:"/serious-games",className:"nav-links",children:"Serious Games"}),Y.jsx(Nc,{to:"/research",className:"nav-links",children:"Research"}),Y.jsx(Nc,{to:"/team",className:"nav-links",children:"Team"})]}),Y.jsx("div",{className:"nav-action-item",children:Y.jsx(G6,{})})]})})}var zI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ZP=qh.createContext&&qh.createContext(zI),W6=["attr","size","title"];function Z6(e,t){if(e==null)return{};var n=H6(e,t),a,h;if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(h=0;h<g.length;h++)a=g[h],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function H6(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function tv(){return tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tv.apply(this,arguments)}function HP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function rv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HP(Object(n),!0).forEach(function(a){K6(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HP(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function K6(e,t,n){return t=X6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X6(e){var t=Y6(e,"string");return typeof t=="symbol"?t:t+""}function Y6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LI(e){return e&&e.map((t,n)=>qh.createElement(t.tag,rv({key:n},t.attr),LI(t.child)))}function rn(e){return t=>qh.createElement(Q6,tv({attr:rv({},e.attr)},t),LI(e.child))}function Q6(e){var t=n=>{var{attr:a,size:h,title:g}=e,p=Z6(e,W6),o=h||n.size||"1em",P;return n.className&&(P=n.className),e.className&&(P=(P?P+" ":"")+e.className),qh.createElement("svg",tv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,p,{className:P,style:rv(rv({color:e.color||n.color},n.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),g&&qh.createElement("title",null,g),e.children)};return ZP!==void 0?qh.createElement(ZP.Consumer,null,n=>t(n)):t(zI)}function jI(e){return rn({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(e)}function J6(e){return rn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(e)}function eN(e){return rn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(e)}function Wy(e){return rn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"},child:[]}]})(e)}function NI(e){return rn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M208 0c-29.9 0-54.7 20.5-61.8 48.2-.8 0-1.4-.2-2.2-.2-35.3 0-64 28.7-64 64 0 4.8.6 9.5 1.7 14C52.5 138 32 166.6 32 200c0 12.6 3.2 24.3 8.3 34.9C16.3 248.7 0 274.3 0 304c0 33.3 20.4 61.9 49.4 73.9-.9 4.6-1.4 9.3-1.4 14.1 0 39.8 32.2 72 72 72 4.1 0 8.1-.5 12-1.2 9.6 28.5 36.2 49.2 68 49.2 39.8 0 72-32.2 72-72V64c0-35.3-28.7-64-64-64zm368 304c0-29.7-16.3-55.3-40.3-69.1 5.2-10.6 8.3-22.3 8.3-34.9 0-33.4-20.5-62-49.7-74 1-4.5 1.7-9.2 1.7-14 0-35.3-28.7-64-64-64-.8 0-1.5.2-2.2.2C422.7 20.5 397.9 0 368 0c-35.3 0-64 28.6-64 64v376c0 39.8 32.2 72 72 72 31.8 0 58.4-20.7 68-49.2 3.9.7 7.9 1.2 12 1.2 39.8 0 72-32.2 72-72 0-4.8-.5-9.5-1.4-14.1 29-12 49.4-40.6 49.4-73.9z"},child:[]}]})(e)}function tN(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M320 336c0 8.84-7.16 16-16 16h-96c-8.84 0-16-7.16-16-16v-48H0v144c0 25.6 22.4 48 48 48h416c25.6 0 48-22.4 48-48V288H320v48zm144-208h-80V80c0-25.6-22.4-48-48-48H176c-25.6 0-48 22.4-48 48v48H48c-25.6 0-48 22.4-48 48v80h512v-80c0-25.6-22.4-48-48-48zm-144 0H192V96h128v32z"},child:[]}]})(e)}function rN(e){return rn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M150.94 192h33.73c11.01 0 18.61-10.83 14.86-21.18-4.93-13.58-7.55-27.98-7.55-42.82s2.62-29.24 7.55-42.82C203.29 74.83 195.68 64 184.67 64h-33.73c-7.01 0-13.46 4.49-15.41 11.23C130.64 92.21 128 109.88 128 128c0 18.12 2.64 35.79 7.54 52.76 1.94 6.74 8.39 11.24 15.4 11.24zM89.92 23.34C95.56 12.72 87.97 0 75.96 0H40.63c-6.27 0-12.14 3.59-14.74 9.31C9.4 45.54 0 85.65 0 128c0 24.75 3.12 68.33 26.69 118.86 2.62 5.63 8.42 9.14 14.61 9.14h34.84c12.02 0 19.61-12.74 13.95-23.37-49.78-93.32-16.71-178.15-.17-209.29zM614.06 9.29C611.46 3.58 605.6 0 599.33 0h-35.42c-11.98 0-19.66 12.66-14.02 23.25 18.27 34.29 48.42 119.42.28 209.23-5.72 10.68 1.8 23.52 13.91 23.52h35.23c6.27 0 12.13-3.58 14.73-9.29C630.57 210.48 640 170.36 640 128s-9.42-82.48-25.94-118.71zM489.06 64h-33.73c-11.01 0-18.61 10.83-14.86 21.18 4.93 13.58 7.55 27.98 7.55 42.82s-2.62 29.24-7.55 42.82c-3.76 10.35 3.85 21.18 14.86 21.18h33.73c7.02 0 13.46-4.49 15.41-11.24 4.9-16.97 7.53-34.64 7.53-52.76 0-18.12-2.64-35.79-7.54-52.76-1.94-6.75-8.39-11.24-15.4-11.24zm-116.3 100.12c7.05-10.29 11.2-22.71 11.2-36.12 0-35.35-28.63-64-63.96-64-35.32 0-63.96 28.65-63.96 64 0 13.41 4.15 25.83 11.2 36.12l-130.5 313.41c-3.4 8.15.46 17.52 8.61 20.92l29.51 12.31c8.15 3.4 17.52-.46 20.91-8.61L244.96 384h150.07l49.2 118.15c3.4 8.16 12.76 12.01 20.91 8.61l29.51-12.31c8.15-3.4 12-12.77 8.61-20.92l-130.5-313.41zM271.62 320L320 203.81 368.38 320h-96.76z"},child:[]}]})(e)}function nN(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(e)}function iN(e){return rn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M510.5 225.5c-6.9-37.2-39.3-65.5-78.5-65.5-12.3 0-23.9 3-34.3 8-17.4-24.1-45.6-40-77.7-40-53 0-96 43-96 96 0 .5.2 1.1.2 1.6C187.6 233 160 265.2 160 304c0 44.2 35.8 80 80 80h256c44.2 0 80-35.8 80-80 0-39.2-28.2-71.7-65.5-78.5zm-386.4 34.4c-37.4-37.4-37.4-98.3 0-135.8 34.6-34.6 89.1-36.8 126.7-7.4 20-12.9 43.6-20.7 69.2-20.7.7 0 1.3.2 2 .2l8.9-26.7c3.4-10.2-6.3-19.8-16.5-16.4l-75.3 25.1-35.5-71c-4.8-9.6-18.5-9.6-23.3 0l-35.5 71-75.3-25.1c-10.2-3.4-19.8 6.3-16.4 16.5l25.1 75.3-71 35.5c-9.6 4.8-9.6 18.5 0 23.3l71 35.5-25.1 75.3c-3.4 10.2 6.3 19.8 16.5 16.5l59.2-19.7c-.2-2.4-.7-4.7-.7-7.2 0-12.5 2.3-24.5 6.2-35.9-3.6-2.7-7.1-5.2-10.2-8.3zm69.8-58c4.3-24.5 15.8-46.4 31.9-64-9.8-6.2-21.4-9.9-33.8-9.9-35.3 0-64 28.7-64 64 0 18.7 8.2 35.4 21.1 47.1 11.3-15.9 26.6-28.9 44.8-37.2zm330.6 216.2c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8zm-96 0c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8zm-96 0c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8zm-96 0c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8z"},child:[]}]})(e)}function aN(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128 272c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(e)}function oN(e){return rn({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M225.38 233.37c-12.5 12.5-12.5 32.76 0 45.25 12.49 12.5 32.76 12.5 45.25 0 12.5-12.5 12.5-32.76 0-45.25-12.5-12.49-32.76-12.49-45.25 0zM248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm126.14 148.05L308.17 300.4a31.938 31.938 0 0 1-15.77 15.77l-144.34 65.97c-16.65 7.61-33.81-9.55-26.2-26.2l65.98-144.35a31.938 31.938 0 0 1 15.77-15.77l144.34-65.97c16.65-7.6 33.8 9.55 26.19 26.2z"},child:[]}]})(e)}function sN(e){return rn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"},child:[]}]})(e)}function FI(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(e)}function lN(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 168v-16c0-13.255 10.745-24 24-24h360V80c0-21.367 25.899-32.042 40.971-16.971l80 80c9.372 9.373 9.372 24.569 0 33.941l-80 80C409.956 271.982 384 261.456 384 240v-48H24c-13.255 0-24-10.745-24-24zm488 152H128v-48c0-21.314-25.862-32.08-40.971-16.971l-80 80c-9.372 9.373-9.372 24.569 0 33.941l80 80C102.057 463.997 128 453.437 128 432v-48h360c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24z"},child:[]}]})(e)}function uN(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function cN(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"},child:[]}]})(e)}function hN(e){return rn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480.07 96H160a160 160 0 1 0 114.24 272h91.52A160 160 0 1 0 480.07 96zM248 268a12 12 0 0 1-12 12h-52v52a12 12 0 0 1-12 12h-24a12 12 0 0 1-12-12v-52H84a12 12 0 0 1-12-12v-24a12 12 0 0 1 12-12h52v-52a12 12 0 0 1 12-12h24a12 12 0 0 1 12 12v52h52a12 12 0 0 1 12 12zm216 76a40 40 0 1 1 40-40 40 40 0 0 1-40 40zm64-96a40 40 0 1 1 40-40 40 40 0 0 1-40 40z"},child:[]}]})(e)}function BI(e){return rn({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"},child:[]}]})(e)}function dN(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(e)}function fN(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M12.41 148.02l232.94 105.67c6.8 3.09 14.49 3.09 21.29 0l232.94-105.67c16.55-7.51 16.55-32.52 0-40.03L266.65 2.31a25.607 25.607 0 0 0-21.29 0L12.41 107.98c-16.55 7.51-16.55 32.53 0 40.04zm487.18 88.28l-58.09-26.33-161.64 73.27c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.51 209.97l-58.1 26.33c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 276.3c16.55-7.5 16.55-32.5 0-40zm0 127.8l-57.87-26.23-161.86 73.37c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.29 337.87 12.41 364.1c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 404.1c16.55-7.5 16.55-32.5 0-40z"},child:[]}]})(e)}function pN(e){return rn({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(e)}function mN(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M507.31 84.69L464 41.37c-6-6-14.14-9.37-22.63-9.37H288V16c0-8.84-7.16-16-16-16h-32c-8.84 0-16 7.16-16 16v16H56c-13.25 0-24 10.75-24 24v80c0 13.25 10.75 24 24 24h385.37c8.49 0 16.62-3.37 22.63-9.37l43.31-43.31c6.25-6.26 6.25-16.38 0-22.63zM224 496c0 8.84 7.16 16 16 16h32c8.84 0 16-7.16 16-16V384h-64v112zm232-272H288v-32h-64v32H70.63c-8.49 0-16.62 3.37-22.63 9.37L4.69 276.69c-6.25 6.25-6.25 16.38 0 22.63L48 342.63c6 6 14.14 9.37 22.63 9.37H456c13.25 0 24-10.75 24-24v-80c0-13.25-10.75-24-24-24z"},child:[]}]})(e)}function gN(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(e)}function yN(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(e)}function vN(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M139.61 35.5a12 12 0 0 0-17 0L58.93 98.81l-22.7-22.12a12 12 0 0 0-17 0L3.53 92.41a12 12 0 0 0 0 17l47.59 47.4a12.78 12.78 0 0 0 17.61 0l15.59-15.62L156.52 69a12.09 12.09 0 0 0 .09-17zm0 159.19a12 12 0 0 0-17 0l-63.68 63.72-22.7-22.1a12 12 0 0 0-17 0L3.53 252a12 12 0 0 0 0 17L51 316.5a12.77 12.77 0 0 0 17.6 0l15.7-15.69 72.2-72.22a12 12 0 0 0 .09-16.9zM64 368c-26.49 0-48.59 21.5-48.59 48S37.53 464 64 464a48 48 0 0 0 0-96zm432 16H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(e)}function $I(e){return rn({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function _N(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"},child:[]}]})(e)}function xN(e){return rn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function VI(e){return rn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}function y0(e){return rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(e)}function bN(){return Y.jsxs("footer",{className:"footer",children:[Y.jsxs("div",{className:"footer-content container",children:[Y.jsxs("div",{className:"footer-logo-group",children:[Y.jsx(BI,{}),Y.jsx("h3",{children:"LODESTAR Project"})]}),Y.jsx("p",{className:"footer-description",children:"A collaborative India-Netherlands initiative to build a low-cost, multi-hazard early warning system for communities at risk."}),Y.jsxs("div",{className:"footer-links",children:[Y.jsx("a",{href:"https://www.wur.nl/en/wageningen-university.htm",target:"_blank",rel:"noopener noreferrer",children:"Wageningen University & Research"}),Y.jsx("span",{children:"•"}),Y.jsx("a",{href:"https://www.iitg.ac.in/",target:"_blank",rel:"noopener noreferrer",children:"IIT Guwahati"})]})]}),Y.jsxs("div",{className:"footer-bottom-bar",children:[Y.jsx("p",{children:"© 2025 LODESTAR Project Consortium | Funded by DST (India) & NWO (Netherlands)"}),Y.jsxs("div",{className:"footer-credits",children:[Y.jsx("span",{children:"Dashboard by Dheeraj Papani"}),Y.jsxs("div",{className:"footer-social-links",children:[Y.jsx("a",{href:"mailto:dheerajpapani@gmail.com",title:"Email",target:"_blank",rel:"noopener noreferrer",children:Y.jsx(FI,{})}),Y.jsx("a",{href:"https://www.linkedin.com/in/dheeraj-papani-507693274/",title:"LinkedIn",target:"_blank",rel:"noopener noreferrer",children:Y.jsx(J6,{})}),Y.jsx("a",{href:"https://github.com/dheerajpapani",title:"GitHub",target:"_blank",rel:"noopener noreferrer",children:Y.jsx(jI,{})})]})]})]})]})}function wN(){const[e,t]=H.useState(!1),n=()=>{window.scrollY>window.innerHeight?t(!0):t(!1)},a=()=>{window.scrollTo({top:0,behavior:"smooth"})};return H.useEffect(()=>(window.addEventListener("scroll",n),()=>{window.removeEventListener("scroll",n)}),[]),Y.jsx(Hb,{children:e&&Y.jsx(qr.button,{onClick:a,className:"scroll-to-top-btn","aria-label":"Scroll to top",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},children:Y.jsx("span",{className:"scroll-to-top-arrow"})})})}function SN({children:e}){const n=Yh().pathname!=="/maps";return Y.jsxs("div",{className:"app-container",children:[Y.jsx(q6,{}),Y.jsx("main",{className:"main-content",children:e}),n&&Y.jsx(bN,{}),Y.jsx(wN,{})]})}const PN=[{name:"Bengaluru, India",hazard:"Urban Floods",country:"India"},{name:"Guwahati, India",hazard:"Compound Pluvial & Fluvial Floods",country:"India"},{name:"Anantapur, India",hazard:"Compound Flood & Drought Events",country:"India"},{name:"Dordrecht, NL",hazard:"Urban Floods & Evacuation Planning",country:"Netherlands"},{name:"Tilburg & Breda, NL",hazard:"Droughts & Urban Development",country:"Netherlands"}],TN=[{icon:Y.jsx(rN,{}),title:"Early Warning System",text:"Developing a multi-hazard EWS for both single and compound events."},{icon:Y.jsx(VI,{}),title:"Living Labs",text:"Co-creating solutions through participatory workshops with citizens and experts."},{icon:Y.jsx(NI,{}),title:"Citizen Science",text:"Integrating local knowledge and real-time, user-submitted data into scientific models."},{icon:Y.jsx(yN,{}),title:"Disaster Management",text:"Enhancing the resilience of at-risk communities against extreme climate events."}];function CN(){return Y.jsxs("div",{children:[Y.jsxs("section",{className:"hero-section",children:[Y.jsx("div",{className:"hero-background-shape"}),Y.jsxs("div",{className:"container hero-content",children:[Y.jsx("h1",{className:"hero-title",children:"LODESTAR"}),Y.jsx("p",{className:"hero-subtitle",children:"Low-cost Disaster & Emergency Services for Communities At Risk"}),Y.jsx("p",{className:"hero-description",children:"A collaborative India-Netherlands project to build a reliable, low-cost, multi-hazard early warning system for floods and droughts, integrating advanced technology with community-led citizen science."})]})]}),Y.jsx("section",{className:"concepts-section",children:Y.jsxs("div",{className:"container",children:[Y.jsx("h2",{className:"section-title",children:"Core Concepts"}),Y.jsx("div",{className:"concepts-grid",children:TN.map(e=>Y.jsxs("div",{className:"concept-card",children:[Y.jsx("div",{className:"concept-icon",children:e.icon}),Y.jsx("h3",{className:"concept-title",children:e.title}),Y.jsx("p",{className:"concept-text",children:e.text})]},e.title))})]})}),Y.jsxs(qr.section,{className:"cta-map-section",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0,amount:.5},transition:{duration:.8},children:[Y.jsx("div",{className:"cta-map-overlay"}),Y.jsxs("div",{className:"container cta-map-content",children:[Y.jsx("h2",{children:"Explore the Geo-Dashboard"}),Y.jsx("p",{children:"View real-time data, forecasts, and active alerts on our interactive map."}),Y.jsxs(Bv,{to:"/maps",className:"cta-map-button",children:["Launch Interactive Map ",Y.jsx(eN,{})]})]})]}),Y.jsx("section",{className:"sites-section",children:Y.jsxs("div",{className:"container",children:[Y.jsx("h2",{className:"section-title",children:"Our Study Sites"}),Y.jsx("div",{className:"sites-grid",children:PN.map(e=>Y.jsxs("div",{className:"site-card-home",children:[Y.jsx("div",{className:`site-flag ${e.country.toLowerCase()}`}),Y.jsx("h3",{className:"site-name",children:e.name}),Y.jsxs("p",{className:"site-hazard",children:[Y.jsx("strong",{children:"Focus:"})," ",e.hazard]})]},e.name))})]})})]})}const EN=[{id:"RO1",text:"To develop socio-technical disaster and emergency (early warning) services (MH-EWS dashboards) to address the challenges of extreme compound disaster events in India and the Netherlands."},{id:"RO2",text:"To improve flood and drought modelling and user interface by focusing on innovative technologies, to arrive at an integrated MH-EWS for floods and/or droughts."},{id:"RO3",text:"To develop socio-cultural and management innovations via living labs, necessary for implementing new technologies and accelerating uptake, while ensuring long-term sustainability."}],MN=[{title:"WS 1: Disaster Context & Knowledge Gaps",description:"Sets the disaster context by taking stock of existing systems and identifying socio-technical knowledge gaps in flood and drought management to build a foundation for the project."},{title:"WS 2: Real-time Data Assimilation",description:"Conducts real-time hydrometeorological data assimilation using computer vision-based algorithms and extended weather forecasts, leveraging low-cost sensors and citizen science."},{title:"WS 3: Citizen Science & Living Labs",description:"Creates synergy between citizens, academics, and professionals using 'living labs' and 'serious games' to facilitate knowledge exchange, co-create solutions, and ensure the EWS meets user needs."},{title:"WS 4: Integrated Dashboard & Forecasting",description:"Develops a multi-hazard forecast framework using an ensemble of models (AI/ML, process-based) to co-create a user-centric, integrated MH-EWS dashboard for mobile and web."},{title:"WS 5: Capacity Building & Internationalization",description:"Builds the disaster management capacity of all partners and external stakeholders in India and the Netherlands through training, workshops, summer academies, and international outreach."}];function AN(){return Y.jsxs("div",{children:[Y.jsx(qr.section,{className:"hero-section-about",initial:{opacity:0},animate:{opacity:1},transition:{duration:.7},children:Y.jsxs("div",{className:"container",children:[Y.jsx("h1",{className:"hero-title-about",children:"About The LODESTAR Project"}),Y.jsx("p",{className:"hero-subtitle-about",children:"Understanding the vision, objectives, and methodology behind our collaborative effort to build disaster resilience."})]})}),Y.jsx("section",{className:"page-section",children:Y.jsx("div",{className:"container",children:Y.jsxs("div",{className:"about-grid",children:[Y.jsx(qr.div,{className:"about-grid-title",initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0,amount:.5},transition:{duration:.6},children:Y.jsx("h2",{children:"The Challenge & Our Vision"})}),Y.jsxs("div",{className:"about-grid-content",children:[Y.jsxs(qr.div,{className:"text-block",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.6},children:[Y.jsx("h4",{children:"The Challenge"}),Y.jsx("p",{children:`Existing Early Warning Systems often lack sufficient lead times and fail to integrate crucial community knowledge. This creates a "know-do gap," where warnings don't translate into effective local actions.`})]}),Y.jsxs(qr.div,{className:"text-block",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.6,delay:.2},children:[Y.jsx("h4",{children:"Our Vision"}),Y.jsx("p",{children:`LODESTAR's vision is to co-create a low-cost, multi-hazard EWS using a "living labs" approach. This makes the system more comprehensive, participatory, and responsive, improving disaster preparedness for all.`})]})]}),Y.jsx(qr.div,{className:"about-grid-title",initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0,amount:.5},transition:{duration:.6},children:Y.jsx("h2",{children:"Our Core Objectives"})}),Y.jsx("div",{className:"about-grid-content",children:Y.jsx("div",{className:"objectives-list",children:EN.map((e,t)=>Y.jsxs(qr.div,{className:"objective-card",initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0,amount:.5},transition:{duration:.5,delay:t*.1},children:[Y.jsx("div",{className:"objective-id",children:e.id}),Y.jsx("p",{children:e.text})]},e.id))})}),Y.jsx(qr.div,{className:"about-grid-title",initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0,amount:.5},transition:{duration:.6},children:Y.jsx("h2",{children:"Our Approach"})}),Y.jsx("div",{className:"about-grid-content",children:Y.jsx("div",{className:"timeline",children:MN.map((e,t)=>Y.jsxs(qr.div,{className:"timeline-item",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0,amount:.5},transition:{duration:.8,delay:t*.15},children:[Y.jsx("div",{className:"timeline-dot"}),Y.jsxs("div",{className:"timeline-content",children:[Y.jsxs("span",{className:"timeline-step",children:["Step ",t+1]}),Y.jsx("h4",{children:e.title}),Y.jsx("p",{children:e.description})]})]},e.title))})})]})})})]})}var Zy={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.6.0/LICENSE.txt
 */var IN=Zy.exports,KP;function kN(){return KP||(KP=1,function(e,t){(function(n,a){e.exports=a()})(IN,function(){var n={},a={};function h(p,o,P){if(a[p]=P,p==="index"){var E="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",C={};return a.shared(C),a.index(n,C),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([E],{type:"text/javascript"}))),n}}h("shared",["exports"],function(p){function o(u,i,l,d){return new(l||(l=Promise))(function(v,b){function S(L){try{D(d.next(L))}catch(F){b(F)}}function M(L){try{D(d.throw(L))}catch(F){b(F)}}function D(L){var F;L.done?v(L.value):(F=L.value,F instanceof l?F:new l(function(G){G(F)})).then(S,M)}D((d=d.apply(u,i||[])).next())})}function P(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var E,C;function I(){if(C)return E;function u(i,l){this.x=i,this.y=l}return C=1,E=u,u.prototype={clone:function(){return new u(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,l){return this.clone()._rotateAround(i,l)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var l=i.x-this.x,d=i.y-this.y;return l*l+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,l){return Math.atan2(this.x*l-this.y*i,this.x*i+this.y*l)},_matMult:function(i){var l=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=l,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var l=Math.cos(i),d=Math.sin(i),v=d*this.x+l*this.y;return this.x=l*this.x-d*this.y,this.y=v,this},_rotateAround:function(i,l){var d=Math.cos(i),v=Math.sin(i),b=l.y+v*(this.x-l.x)+d*(this.y-l.y);return this.x=l.x+d*(this.x-l.x)-v*(this.y-l.y),this.y=b,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(i){return i instanceof u?i:Array.isArray(i)?new u(i[0],i[1]):i},E}typeof SuppressedError=="function"&&SuppressedError;var R,z,B=P(I()),U=function(){if(z)return R;function u(i,l,d,v){this.cx=3*i,this.bx=3*(d-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(v-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=l,this.p2x=d,this.p2y=v}return z=1,R=u,u.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,l){if(l===void 0&&(l=1e-6),i<0)return 0;if(i>1)return 1;for(var d=i,v=0;v<8;v++){var b=this.sampleCurveX(d)-i;if(Math.abs(b)<l)return d;var S=this.sampleCurveDerivativeX(d);if(Math.abs(S)<1e-6)break;d-=b/S}var M=0,D=1;for(d=i,v=0;v<20&&(b=this.sampleCurveX(d),!(Math.abs(b-i)<l));v++)i>b?M=d:D=d,d=.5*(D-M)+M;return d},solve:function(i,l){return this.sampleCurveY(this.solveCurveX(i,l))}},R}(),Z=P(U);let Q,le;function se(){return Q==null&&(Q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Q}function Ce(){if(le==null&&(le=!1,se())){const i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let d=0;d<5*5;d++){const v=4*d;i.fillStyle=`rgb(${v},${v+1},${v+2})`,i.fillRect(d%5,Math.floor(d/5),1,1)}const l=i.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&l[d]!==d){le=!0;break}}}return le||!1}var be=1e-6,Ae=typeof Float32Array<"u"?Float32Array:Array;function Ne(){var u=new Ae(9);return Ae!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0),u[0]=1,u[4]=1,u[8]=1,u}function Qe(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function ht(){var u=new Ae(3);return Ae!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u}function Et(u){return Math.hypot(u[0],u[1],u[2])}function vt(u,i,l){var d=new Ae(3);return d[0]=u,d[1]=i,d[2]=l,d}function It(u,i,l){return u[0]=i[0]+l[0],u[1]=i[1]+l[1],u[2]=i[2]+l[2],u}function Ft(u,i,l){return u[0]=i[0]*l,u[1]=i[1]*l,u[2]=i[2]*l,u}function er(u,i,l){var d=i[0],v=i[1],b=i[2],S=l[0],M=l[1],D=l[2];return u[0]=v*D-b*M,u[1]=b*S-d*D,u[2]=d*M-v*S,u}Math.hypot||(Math.hypot=function(){for(var u=0,i=arguments.length;i--;)u+=arguments[i]*arguments[i];return Math.sqrt(u)});var lr,vr=Et;function Mt(u,i,l){var d=i[0],v=i[1],b=i[2],S=i[3];return u[0]=l[0]*d+l[4]*v+l[8]*b+l[12]*S,u[1]=l[1]*d+l[5]*v+l[9]*b+l[13]*S,u[2]=l[2]*d+l[6]*v+l[10]*b+l[14]*S,u[3]=l[3]*d+l[7]*v+l[11]*b+l[15]*S,u}function ut(){var u=new Ae(4);return Ae!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0),u[3]=1,u}function Ct(u,i,l,d){var v=.5*Math.PI/180;i*=v,l*=v,d*=v;var b=Math.sin(i),S=Math.cos(i),M=Math.sin(l),D=Math.cos(l),L=Math.sin(d),F=Math.cos(d);return u[0]=b*D*F-S*M*L,u[1]=S*M*F+b*D*L,u[2]=S*D*L-b*M*F,u[3]=S*D*F+b*M*L,u}function wt(){var u=new Ae(2);return Ae!=Float32Array&&(u[0]=0,u[1]=0),u}function ze(u,i){var l=new Ae(2);return l[0]=u,l[1]=i,l}ht(),lr=new Ae(4),Ae!=Float32Array&&(lr[0]=0,lr[1]=0,lr[2]=0,lr[3]=0),ht(),vt(1,0,0),vt(0,1,0),ut(),ut(),Ne(),wt();const $e=8192;function Lt(u,i,l){return i*($e/(u.tileSize*Math.pow(2,l-u.tileID.overscaledZ)))}function Xt(u,i){return(u%i+i)%i}function tr(u,i,l){return u*(1-l)+i*l}function Pr(u){if(u<=0)return 0;if(u>=1)return 1;const i=u*u,l=i*u;return 4*(u<.5?l:3*(u-i)+l-.75)}function zr(u,i,l,d){const v=new Z(u,i,l,d);return b=>v.solve(b)}const Ir=zr(.25,.1,.25,1);function lt(u,i,l){return Math.min(l,Math.max(i,u))}function Qt(u,i,l){const d=l-i,v=((u-i)%d+d)%d+i;return v===i?l:v}function sr(u,...i){for(const l of i)for(const d in l)u[d]=l[d];return u}let yt=1;function _r(u,i,l){const d={};for(const v in u)d[v]=i.call(this,u[v],v,u);return d}function Tr(u,i,l){const d={};for(const v in u)i.call(this,u[v],v,u)&&(d[v]=u[v]);return d}function Qr(u){return Array.isArray(u)?u.map(Qr):typeof u=="object"&&u?_r(u,Qr):u}const Pn={};function Jr(u){Pn[u]||(typeof console<"u"&&console.warn(u),Pn[u]=!0)}function ri(u,i,l){return(l.y-u.y)*(i.x-u.x)>(i.y-u.y)*(l.x-u.x)}function fi(u){return typeof WorkerGlobalScope<"u"&&u!==void 0&&u instanceof WorkerGlobalScope}let Fa=null;function oa(u){return typeof ImageBitmap<"u"&&u instanceof ImageBitmap}const Js="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function as(u,i,l,d,v){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const b=new VideoFrame(u,{timestamp:0});try{const S=b?.format;if(!S||!S.startsWith("BGR")&&!S.startsWith("RGB"))throw new Error(`Unrecognized format ${S}`);const M=S.startsWith("BGR"),D=new Uint8ClampedArray(d*v*4);if(yield b.copyTo(D,function(L,F,G,X,ee){const te=4*Math.max(1,0),ne=(Math.max(0,G)-G)*X*4+te,he=4*X,ge=Math.max(0,F),ke=Math.max(0,G);return{rect:{x:ge,y:ke,width:Math.min(L.width,F+X)-ge,height:Math.min(L.height,G+ee)-ke},layout:[{offset:ne,stride:he}]}}(u,i,l,d,v)),M)for(let L=0;L<D.length;L+=4){const F=D[L];D[L]=D[L+2],D[L+2]=F}return D}finally{b.close()}})}let no,os;function io(u,i,l,d){return u.addEventListener(i,l,d),{unsubscribe:()=>{u.removeEventListener(i,l,d)}}}function Ei(u){return u*Math.PI/180}function sa(u){return u/Math.PI*180}const $l={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},ss={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},la="AbortError";function Fe(){return new Error(la)}const ie={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function oe(u){return ie.REGISTERED_PROTOCOLS[u.substring(0,u.indexOf("://"))]}const fe="global-dispatcher";class _e extends Error{constructor(i,l,d,v){super(`AJAXError: ${l} (${i}): ${d}`),this.status=i,this.statusText=l,this.url=d,this.body=v}}const Ie=()=>fi(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Le=function(u,i){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){const d=oe(u.url);if(d)return d(u,i);if(fi(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,targetMapId:fe},i)}if(!(/^file:/.test(l=u.url)||/^file:/.test(Ie())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,v){return o(this,void 0,void 0,function*(){const b=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:Ie(),signal:v.signal});let S,M;d.type!=="json"||b.headers.has("Accept")||b.headers.set("Accept","application/json");try{S=yield fetch(b)}catch(L){throw new _e(0,L.message,d.url,new Blob)}if(!S.ok){const L=yield S.blob();throw new _e(S.status,S.statusText,d.url,L)}M=d.type==="arrayBuffer"||d.type==="image"?S.arrayBuffer():d.type==="json"?S.json():S.text();const D=yield M;if(v.signal.aborted)throw Fe();return{data:D,cacheControl:S.headers.get("Cache-Control"),expires:S.headers.get("Expires")}})}(u,i);if(fi(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,mustQueue:!0,targetMapId:fe},i)}var l;return function(d,v){return new Promise((b,S)=>{var M;const D=new XMLHttpRequest;D.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(D.responseType="arraybuffer");for(const L in d.headers)D.setRequestHeader(L,d.headers[L]);d.type==="json"&&(D.responseType="text",!((M=d.headers)===null||M===void 0)&&M.Accept||D.setRequestHeader("Accept","application/json")),D.withCredentials=d.credentials==="include",D.onerror=()=>{S(new Error(D.statusText))},D.onload=()=>{if(!v.signal.aborted)if((D.status>=200&&D.status<300||D.status===0)&&D.response!==null){let L=D.response;if(d.type==="json")try{L=JSON.parse(D.response)}catch(F){return void S(F)}b({data:L,cacheControl:D.getResponseHeader("Cache-Control"),expires:D.getResponseHeader("Expires")})}else{const L=new Blob([D.response],{type:D.getResponseHeader("Content-Type")});S(new _e(D.status,D.statusText,d.url,L))}},v.signal.addEventListener("abort",()=>{D.abort(),S(Fe())}),D.send(d.body)})}(u,i)};function qe(u){if(!u||u.indexOf("://")<=0||u.indexOf("data:image/")===0||u.indexOf("blob:")===0)return!0;const i=new URL(u),l=window.location;return i.protocol===l.protocol&&i.host===l.host}function Re(u,i,l){l[u]&&l[u].indexOf(i)!==-1||(l[u]=l[u]||[],l[u].push(i))}function Je(u,i,l){if(l&&l[u]){const d=l[u].indexOf(i);d!==-1&&l[u].splice(d,1)}}class Xe{constructor(i,l={}){sr(this,l),this.type=i}}class Be extends Xe{constructor(i,l={}){super("error",sr({error:i},l))}}class nt{on(i,l){return this._listeners=this._listeners||{},Re(i,l,this._listeners),{unsubscribe:()=>{this.off(i,l)}}}off(i,l){return Je(i,l,this._listeners),Je(i,l,this._oneTimeListeners),this}once(i,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},Re(i,l,this._oneTimeListeners),this):new Promise(d=>this.once(i,d))}fire(i,l){typeof i=="string"&&(i=new Xe(i,l||{}));const d=i.type;if(this.listens(d)){i.target=this;const v=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const M of v)M.call(this,i);const b=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const M of b)Je(d,M,this._oneTimeListeners),M.call(this,i);const S=this._eventedParent;S&&(sr(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),S.fire(i))}else i instanceof Be&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,l){return this._eventedParent=i,this._eventedParentData=l,this}}var Me={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Pt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Kt(u,i){const l={};for(const d in u)d!=="ref"&&(l[d]=u[d]);return Pt.forEach(d=>{d in i&&(l[d]=i[d])}),l}function At(u,i){if(Array.isArray(u)){if(!Array.isArray(i)||u.length!==i.length)return!1;for(let l=0;l<u.length;l++)if(!At(u[l],i[l]))return!1;return!0}if(typeof u=="object"&&u!==null&&i!==null){if(typeof i!="object"||Object.keys(u).length!==Object.keys(i).length)return!1;for(const l in u)if(!At(u[l],i[l]))return!1;return!0}return u===i}function Bt(u,i){u.push(i)}function Yt(u,i,l){Bt(l,{command:"addSource",args:[u,i[u]]})}function Wr(u,i,l){Bt(i,{command:"removeSource",args:[u]}),l[u]=!0}function Ar(u,i,l,d){Wr(u,l,d),Yt(u,i,l)}function kr(u,i,l){let d;for(d in u[l])if(Object.prototype.hasOwnProperty.call(u[l],d)&&d!=="data"&&!At(u[l][d],i[l][d]))return!1;for(d in i[l])if(Object.prototype.hasOwnProperty.call(i[l],d)&&d!=="data"&&!At(u[l][d],i[l][d]))return!1;return!0}function Zt(u,i,l,d,v,b){u=u||{},i=i||{};for(const S in u)Object.prototype.hasOwnProperty.call(u,S)&&(At(u[S],i[S])||l.push({command:b,args:[d,S,i[S],v]}));for(const S in i)Object.prototype.hasOwnProperty.call(i,S)&&!Object.prototype.hasOwnProperty.call(u,S)&&(At(u[S],i[S])||l.push({command:b,args:[d,S,i[S],v]}))}function xr(u){return u.id}function Tn(u,i){return u[i.id]=i,u}class ft{constructor(i,l,d,v){this.message=(i?`${i}: `:"")+d,v&&(this.identifier=v),l!=null&&l.__line__&&(this.line=l.__line__)}}function ni(u,...i){for(const l of i)for(const d in l)u[d]=l[d];return u}class cn extends Error{constructor(i,l){super(l),this.message=l,this.key=i}}class ls{constructor(i,l=[]){this.parent=i,this.bindings={};for(const[d,v]of l)this.bindings[d]=v}concat(i){return new ls(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const ua={kind:"null"},bt={kind:"number"},fr={kind:"string"},yr={kind:"boolean"},Gi={kind:"color"},Nu={kind:"projectionDefinition"},Ba={kind:"object"},pr={kind:"value"},Eo={kind:"collator"},el={kind:"formatted"},br={kind:"padding"},Fu={kind:"colorArray"},tl={kind:"numberArray"},ao={kind:"resolvedImage"},us={kind:"variableAnchorOffsetCollection"};function ca(u,i){return{kind:"array",itemType:u,N:i}}function nn(u){if(u.kind==="array"){const i=nn(u.itemType);return typeof u.N=="number"?`array<${i}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${i}>`}return u.kind}const Bu=[ua,bt,fr,yr,Gi,Nu,el,Ba,ca(pr),br,tl,Fu,ao,us];function qi(u,i){if(i.kind==="error")return null;if(u.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!qi(u.itemType,i.itemType))&&(typeof u.N!="number"||u.N===i.N))return null}else{if(u.kind===i.kind)return null;if(u.kind==="value"){for(const l of Bu)if(!qi(l,i))return null}}return`Expected ${nn(u)} but found ${nn(i)} instead.`}function ah(u,i){return i.some(l=>l.kind===u.kind)}function ii(u,i){return i.some(l=>l==="null"?u===null:l==="array"?Array.isArray(u):l==="object"?u&&!Array.isArray(u)&&typeof u=="object":l===typeof u)}function cs(u,i){return u.kind==="array"&&i.kind==="array"?u.itemType.kind===i.itemType.kind&&typeof u.N=="number":u.kind===i.kind}const Tf=.96422,Cf=.82521,$u=4/29,Mo=6/29,Vl=3*Mo*Mo,Vu=Mo*Mo*Mo,Uu=Math.PI/180,Jp=180/Math.PI;function oh(u){return(u%=360)<0&&(u+=360),u}function rl([u,i,l,d]){let v,b;const S=nl((.2225045*(u=Gu(u))+.7168786*(i=Gu(i))+.0606169*(l=Gu(l)))/1);u===i&&i===l?v=b=S:(v=nl((.4360747*u+.3850649*i+.1430804*l)/Tf),b=nl((.0139322*u+.0971045*i+.7141733*l)/Cf));const M=116*S-16;return[M<0?0:M,500*(v-S),200*(S-b),d]}function Gu(u){return u<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function nl(u){return u>Vu?Math.pow(u,1/3):u/Vl+$u}function Ef([u,i,l,d]){let v=(u+16)/116,b=isNaN(i)?v:v+i/500,S=isNaN(l)?v:v-l/200;return v=1*Lr(v),b=Tf*Lr(b),S=Cf*Lr(S),[Ul(3.1338561*b-1.6168667*v-.4906146*S),Ul(-.9787684*b+1.9161415*v+.033454*S),Ul(.0719453*b-.2289914*v+1.4052427*S),d]}function Ul(u){return(u=u<=.00304?12.92*u:1.055*Math.pow(u,1/2.4)-.055)<0?0:u>1?1:u}function Lr(u){return u>Mo?u*u*u:Vl*(u-$u)}const $a=Object.hasOwn||function(u,i){return Object.prototype.hasOwnProperty.call(u,i)};function wr(u,i){return $a(u,i)?u[i]:void 0}function Va(u){return parseInt(u.padEnd(2,u),16)/255}function oo(u,i){return hs(i?u/100:u,0,1)}function hs(u,i,l){return Math.min(Math.max(i,u),l)}function sh(u){return!u.some(Number.isNaN)}const qu={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Mi(u,i,l){return u+l*(i-u)}function pi(u,i,l){return u.map((d,v)=>Mi(d,i[v],l))}class cr{constructor(i,l,d,v=1,b=!0){this.r=i,this.g=l,this.b=d,this.a=v,b||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[i,l,d,v]))}static parse(i){if(i instanceof cr)return i;if(typeof i!="string")return;const l=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const v=wr(qu,d);if(v){const[S,M,D]=v;return[S/255,M/255,D/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const S=d.length<6?1:2;let M=1;return[Va(d.slice(M,M+=S)),Va(d.slice(M,M+=S)),Va(d.slice(M,M+=S)),Va(d.slice(M,M+S)||"ff")]}if(d.startsWith("rgb")){const S=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){const[M,D,L,F,G,X,ee,te,ne,he,ge,ke]=S,xe=[F||" ",ee||" ",he].join("");if(xe==="  "||xe==="  /"||xe===",,"||xe===",,,"){const J=[L,X,ne].join(""),ce=J==="%%%"?100:J===""?255:0;if(ce){const Se=[hs(+D/ce,0,1),hs(+G/ce,0,1),hs(+te/ce,0,1),ge?oo(+ge,ke):1];if(sh(Se))return Se}}return}}const b=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[S,M,D,L,F,G,X,ee,te]=b,ne=[D||" ",F||" ",X].join("");if(ne==="  "||ne==="  /"||ne===",,"||ne===",,,"){const he=[+M,hs(+L,0,100),hs(+G,0,100),ee?oo(+ee,te):1];if(sh(he))return function([ge,ke,xe,J]){function ce(Se){const We=(Se+ge/30)%12,at=ke*Math.min(xe,1-xe);return xe-at*Math.max(-1,Math.min(We-3,9-We,1))}return ge=oh(ge),ke/=100,xe/=100,[ce(0),ce(8),ce(4),J]}(he)}}}(i);return l?new cr(...l,!1):void 0}get rgb(){const{r:i,g:l,b:d,a:v}=this,b=v||1/0;return this.overwriteGetter("rgb",[i/b,l/b,d/b,v])}get hcl(){return this.overwriteGetter("hcl",function(i){const[l,d,v,b]=rl(i),S=Math.sqrt(d*d+v*v);return[Math.round(1e4*S)?oh(Math.atan2(v,d)*Jp):NaN,S,l,b]}(this.rgb))}get lab(){return this.overwriteGetter("lab",rl(this.rgb))}overwriteGetter(i,l){return Object.defineProperty(this,i,{value:l}),l}toString(){const[i,l,d,v]=this.rgb;return`rgba(${[i,l,d].map(b=>Math.round(255*b)).join(",")},${v})`}static interpolate(i,l,d,v="rgb"){switch(v){case"rgb":{const[b,S,M,D]=pi(i.rgb,l.rgb,d);return new cr(b,S,M,D,!1)}case"hcl":{const[b,S,M,D]=i.hcl,[L,F,G,X]=l.hcl;let ee,te;if(isNaN(b)||isNaN(L))isNaN(b)?isNaN(L)?ee=NaN:(ee=L,M!==1&&M!==0||(te=F)):(ee=b,G!==1&&G!==0||(te=S));else{let xe=L-b;L>b&&xe>180?xe-=360:L<b&&b-L>180&&(xe+=360),ee=b+d*xe}const[ne,he,ge,ke]=function([xe,J,ce,Se]){return xe=isNaN(xe)?0:xe*Uu,Ef([ce,Math.cos(xe)*J,Math.sin(xe)*J,Se])}([ee,te??Mi(S,F,d),Mi(M,G,d),Mi(D,X,d)]);return new cr(ne,he,ge,ke,!1)}case"lab":{const[b,S,M,D]=Ef(pi(i.lab,l.lab,d));return new cr(b,S,M,D,!1)}}}}cr.black=new cr(0,0,0,1),cr.white=new cr(1,1,1,1),cr.transparent=new cr(0,0,0,0),cr.red=new cr(1,0,0,1);class Aa{constructor(i,l,d){this.sensitivity=i?l?"variant":"case":l?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,l){return this.collator.compare(i,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const ds=["bottom","center","top"];class il{constructor(i,l,d,v,b,S){this.text=i,this.image=l,this.scale=d,this.fontStack=v,this.textColor=b,this.verticalAlign=S}}class pn{constructor(i){this.sections=i}static fromString(i){return new pn([new il(i,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof pn?i:pn.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class Dn{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Dn)return i;if(typeof i=="number")return new Dn([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(const l of i)if(typeof l!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new Dn(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,d){return new Dn(pi(i.values,l.values,d))}}class ai{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof ai)return i;if(typeof i=="number")return new ai([i]);if(Array.isArray(i)){for(const l of i)if(typeof l!="number")return;return new ai(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,d){return new ai(pi(i.values,l.values,d))}}class vn{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof vn)return i;if(typeof i=="string"){const d=cr.parse(i);return d?new vn([d]):void 0}if(!Array.isArray(i))return;const l=[];for(const d of i){if(typeof d!="string")return;const v=cr.parse(d);if(!v)return;l.push(v)}return new vn(l)}toString(){return JSON.stringify(this.values)}static interpolate(i,l,d,v="rgb"){const b=[];if(i.values.length!=l.values.length)throw new Error(`colorArray: Arrays have mismatched length (${i.values.length} vs. ${l.values.length}), cannot interpolate.`);for(let S=0;S<i.values.length;S++)b.push(cr.interpolate(i.values[S],l.values[S],d,v));return new vn(b)}}class hn extends Error{constructor(i){super(i),this.name="RuntimeError"}toJSON(){return this.message}}const Wu=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Sr{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Sr)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let l=0;l<i.length;l+=2){const d=i[l],v=i[l+1];if(typeof d!="string"||!Wu.has(d)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new Sr(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,d){const v=i.values,b=l.values;if(v.length!==b.length)throw new hn(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${l.toString()}`);const S=[];for(let M=0;M<v.length;M+=2){if(v[M]!==b[M])throw new hn(`Cannot interpolate values containing mismatched anchors. from[${M}]: ${v[M]}, to[${M}]: ${b[M]}`);S.push(v[M]);const[D,L]=v[M+1],[F,G]=b[M+1];S.push([Mi(D,F,d),Mi(L,G,d)])}return new Sr(S)}}class Ai{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new Ai({name:i,available:!1}):null}}class hr{constructor(i,l,d){this.from=i,this.to=l,this.transition=d}static interpolate(i,l,d){return new hr(i,l,d)}static parse(i){return i instanceof hr?i:Array.isArray(i)&&i.length===3&&typeof i[0]=="string"&&typeof i[1]=="string"&&typeof i[2]=="number"?new hr(i[0],i[1],i[2]):typeof i=="object"&&typeof i.from=="string"&&typeof i.to=="string"&&typeof i.transition=="number"?new hr(i.from,i.to,i.transition):typeof i=="string"?new hr(i,i,1):void 0}}function ur(u,i,l,d){return typeof u=="number"&&u>=0&&u<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof l=="number"&&l>=0&&l<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[u,i,l,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[u,i,l,d]:[u,i,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ua(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof hr||u instanceof cr||u instanceof Aa||u instanceof pn||u instanceof Dn||u instanceof ai||u instanceof vn||u instanceof Sr||u instanceof Ai)return!0;if(Array.isArray(u)){for(const i of u)if(!Ua(i))return!1;return!0}if(typeof u=="object"){for(const i in u)if(!Ua(u[i]))return!1;return!0}return!1}function Ut(u){if(u===null)return ua;if(typeof u=="string")return fr;if(typeof u=="boolean")return yr;if(typeof u=="number")return bt;if(u instanceof cr)return Gi;if(u instanceof hr)return Nu;if(u instanceof Aa)return Eo;if(u instanceof pn)return el;if(u instanceof Dn)return br;if(u instanceof ai)return tl;if(u instanceof vn)return Fu;if(u instanceof Sr)return us;if(u instanceof Ai)return ao;if(Array.isArray(u)){const i=u.length;let l;for(const d of u){const v=Ut(d);if(l){if(l===v)continue;l=pr;break}l=v}return ca(l||pr,i)}return Ba}function so(u){const i=typeof u;return u===null?"":i==="string"||i==="number"||i==="boolean"?String(u):u instanceof cr||u instanceof hr||u instanceof pn||u instanceof Dn||u instanceof ai||u instanceof vn||u instanceof Sr||u instanceof Ai?u.toString():JSON.stringify(u)}class Ii{constructor(i,l){this.type=i,this.value=l}static parse(i,l){if(i.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Ua(i[1]))return l.error("invalid value");const d=i[1];let v=Ut(d);const b=l.expectedType;return v.kind!=="array"||v.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(v=b),new Ii(v,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Gl={string:fr,number:bt,boolean:yr,object:Ba};class Wi{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let d,v=1;const b=i[0];if(b==="array"){let M,D;if(i.length>2){const L=i[1];if(typeof L!="string"||!(L in Gl)||L==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);M=Gl[L],v++}else M=pr;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return l.error('The length argument to "array" must be a positive integer literal',2);D=i[2],v++}d=ca(M,D)}else{if(!Gl[b])throw new Error(`Types doesn't contain name = ${b}`);d=Gl[b]}const S=[];for(;v<i.length;v++){const M=l.parse(i[v],v,pr);if(!M)return null;S.push(M)}return new Wi(d,S)}evaluate(i){for(let l=0;l<this.args.length;l++){const d=this.args[l].evaluate(i);if(!qi(this.type,Ut(d)))return d;if(l===this.args.length-1)throw new hn(`Expected value to be of type ${nn(this.type)}, but found ${nn(Ut(d))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const ql={"to-boolean":yr,"to-color":Gi,"to-number":bt,"to-string":fr};class Ia{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const d=i[0];if(!ql[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&i.length!==2)return l.error("Expected one argument.");const v=ql[d],b=[];for(let S=1;S<i.length;S++){const M=l.parse(i[S],S,pr);if(!M)return null;b.push(M)}return new Ia(v,b)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let l,d;for(const v of this.args){if(l=v.evaluate(i),d=null,l instanceof cr)return l;if(typeof l=="string"){const b=i.parseColor(l);if(b)return b}else if(Array.isArray(l)&&(d=l.length<3||l.length>4?`Invalid rgba value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:ur(l[0],l[1],l[2],l[3]),!d))return new cr(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new hn(d||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const d of this.args){l=d.evaluate(i);const v=Dn.parse(l);if(v)return v}throw new hn(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"numberArray":{let l;for(const d of this.args){l=d.evaluate(i);const v=ai.parse(l);if(v)return v}throw new hn(`Could not parse numberArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"colorArray":{let l;for(const d of this.args){l=d.evaluate(i);const v=vn.parse(l);if(v)return v}throw new hn(`Could not parse colorArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const d of this.args){l=d.evaluate(i);const v=Sr.parse(l);if(v)return v}throw new hn(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const d of this.args){if(l=d.evaluate(i),l===null)return 0;const v=Number(l);if(!isNaN(v))return v}throw new hn(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return pn.fromString(so(this.args[0].evaluate(i)));case"resolvedImage":return Ai.fromString(so(this.args[0].evaluate(i)));case"projectionDefinition":return this.args[0].evaluate(i);default:return so(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const id=["Unknown","Point","LineString","Polygon"];class Ao{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?id[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let l=this._parseColorCache.get(i);return l||(l=cr.parse(i),this._parseColorCache.set(i,l)),l}}class al{constructor(i,l,d=[],v,b=new ls,S=[]){this.registry=i,this.path=d,this.key=d.map(M=>`[${M}]`).join(""),this.scope=b,this.errors=S,this.expectedType=v,this._isConstant=l}parse(i,l,d,v,b={}){return l?this.concat(l,d,v)._parse(i,b):this._parse(i,b)}_parse(i,l){function d(v,b,S){return S==="assert"?new Wi(b,[v]):S==="coerce"?new Ia(b,[v]):v}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=i[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const b=this.registry[v];if(b){let S=b.parse(i,this);if(!S)return null;if(this.expectedType){const M=this.expectedType,D=S.type;if(M.kind!=="string"&&M.kind!=="number"&&M.kind!=="boolean"&&M.kind!=="object"&&M.kind!=="array"||D.kind!=="value"){if(M.kind==="projectionDefinition"&&["string","array"].includes(D.kind)||["color","formatted","resolvedImage"].includes(M.kind)&&["value","string"].includes(D.kind)||["padding","numberArray"].includes(M.kind)&&["value","number","array"].includes(D.kind)||M.kind==="colorArray"&&["value","string","array"].includes(D.kind)||M.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(D.kind))S=d(S,M,l.typeAnnotation||"coerce");else if(this.checkSubtype(M,D))return null}else S=d(S,M,l.typeAnnotation||"assert")}if(!(S instanceof Ii)&&S.type.kind!=="resolvedImage"&&this._isConstant(S)){const M=new Ao;try{S=new Ii(S.type,S.evaluate(M))}catch(D){return this.error(D.message),null}}return S}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,l,d){const v=typeof i=="number"?this.path.concat(i):this.path,b=d?this.scope.concat(d):this.scope;return new al(this.registry,this._isConstant,v,l||null,b,this.errors)}error(i,...l){const d=`${this.key}${l.map(v=>`[${v}]`).join("")}`;this.errors.push(new cn(d,i))}checkSubtype(i,l){const d=qi(i,l);return d&&this.error(d),d}}class fs{constructor(i,l){this.type=l.type,this.bindings=[].concat(i),this.result=l}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const l of this.bindings)i(l[1]);i(this.result)}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const d=[];for(let b=1;b<i.length-1;b+=2){const S=i[b];if(typeof S!="string")return l.error(`Expected string, but found ${typeof S} instead.`,b);if(/[^a-zA-Z0-9_]/.test(S))return l.error("Variable names must contain only alphanumeric characters or '_'.",b);const M=l.parse(i[b+1],b+1);if(!M)return null;d.push([S,M])}const v=l.parse(i[i.length-1],i.length-1,l.expectedType,d);return v?new fs(d,v):null}outputDefined(){return this.result.outputDefined()}}class ka{constructor(i,l){this.type=l.type,this.name=i,this.boundExpression=l}static parse(i,l){if(i.length!==2||typeof i[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const d=i[1];return l.scope.has(d)?new ka(d,l.scope.get(d)):l.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class Cn{constructor(i,l,d){this.type=i,this.index=l,this.input=d}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const d=l.parse(i[1],1,bt),v=l.parse(i[2],2,ca(l.expectedType||pr));return d&&v?new Cn(v.type.itemType,d,v):null}evaluate(i){const l=this.index.evaluate(i),d=this.input.evaluate(i);if(l<0)throw new hn(`Array index out of bounds: ${l} < 0.`);if(l>=d.length)throw new hn(`Array index out of bounds: ${l} > ${d.length-1}.`);if(l!==Math.floor(l))throw new hn(`Array index must be an integer, but found ${l} instead.`);return d[l]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class Io{constructor(i,l){this.type=yr,this.needle=i,this.haystack=l}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const d=l.parse(i[1],1,pr),v=l.parse(i[2],2,pr);return d&&v?ah(d.type,[yr,fr,bt,ua,pr])?new Io(d,v):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${nn(d.type)} instead`):null}evaluate(i){const l=this.needle.evaluate(i),d=this.haystack.evaluate(i);if(!d)return!1;if(!ii(l,["boolean","string","number","null"]))throw new hn(`Expected first argument to be of type boolean, string, number or null, but found ${nn(Ut(l))} instead.`);if(!ii(d,["string","array"]))throw new hn(`Expected second argument to be of type array or string, but found ${nn(Ut(d))} instead.`);return d.indexOf(l)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class Wl{constructor(i,l,d){this.type=bt,this.needle=i,this.haystack=l,this.fromIndex=d}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const d=l.parse(i[1],1,pr),v=l.parse(i[2],2,pr);if(!d||!v)return null;if(!ah(d.type,[yr,fr,bt,ua,pr]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${nn(d.type)} instead`);if(i.length===4){const b=l.parse(i[3],3,bt);return b?new Wl(d,v,b):null}return new Wl(d,v)}evaluate(i){const l=this.needle.evaluate(i),d=this.haystack.evaluate(i);if(!ii(l,["boolean","string","number","null"]))throw new hn(`Expected first argument to be of type boolean, string, number or null, but found ${nn(Ut(l))} instead.`);let v;if(this.fromIndex&&(v=this.fromIndex.evaluate(i)),ii(d,["string"])){const b=d.indexOf(l,v);return b===-1?-1:[...d.slice(0,b)].length}if(ii(d,["array"]))return d.indexOf(l,v);throw new hn(`Expected second argument to be of type array or string, but found ${nn(Ut(d))} instead.`)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class Zn{constructor(i,l,d,v,b,S){this.inputType=i,this.type=l,this.input=d,this.cases=v,this.outputs=b,this.otherwise=S}static parse(i,l){if(i.length<5)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return l.error("Expected an even number of arguments.");let d,v;l.expectedType&&l.expectedType.kind!=="value"&&(v=l.expectedType);const b={},S=[];for(let L=2;L<i.length-1;L+=2){let F=i[L];const G=i[L+1];Array.isArray(F)||(F=[F]);const X=l.concat(L);if(F.length===0)return X.error("Expected at least one branch label.");for(const te of F){if(typeof te!="number"&&typeof te!="string")return X.error("Branch labels must be numbers or strings.");if(typeof te=="number"&&Math.abs(te)>Number.MAX_SAFE_INTEGER)return X.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof te=="number"&&Math.floor(te)!==te)return X.error("Numeric branch labels must be integer values.");if(d){if(X.checkSubtype(d,Ut(te)))return null}else d=Ut(te);if(b[String(te)]!==void 0)return X.error("Branch labels must be unique.");b[String(te)]=S.length}const ee=l.parse(G,L,v);if(!ee)return null;v=v||ee.type,S.push(ee)}const M=l.parse(i[1],1,pr);if(!M)return null;const D=l.parse(i[i.length-1],i.length-1,v);return D?M.type.kind!=="value"&&l.concat(1).checkSubtype(d,M.type)?null:new Zn(d,v,M,b,S,D):null}evaluate(i){const l=this.input.evaluate(i);return(Ut(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class an{constructor(i,l,d){this.type=i,this.branches=l,this.otherwise=d}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return l.error("Expected an odd number of arguments.");let d;l.expectedType&&l.expectedType.kind!=="value"&&(d=l.expectedType);const v=[];for(let S=1;S<i.length-1;S+=2){const M=l.parse(i[S],S,yr);if(!M)return null;const D=l.parse(i[S+1],S+1,d);if(!D)return null;v.push([M,D]),d=d||D.type}const b=l.parse(i[i.length-1],i.length-1,d);if(!b)return null;if(!d)throw new Error("Can't infer output type");return new an(d,v,b)}evaluate(i){for(const[l,d]of this.branches)if(l.evaluate(i))return d.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[l,d]of this.branches)i(l),i(d);i(this.otherwise)}outputDefined(){return this.branches.every(([i,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class ol{constructor(i,l,d,v){this.type=i,this.input=l,this.beginIndex=d,this.endIndex=v}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const d=l.parse(i[1],1,pr),v=l.parse(i[2],2,bt);if(!d||!v)return null;if(!ah(d.type,[ca(pr),fr,pr]))return l.error(`Expected first argument to be of type array or string, but found ${nn(d.type)} instead`);if(i.length===4){const b=l.parse(i[3],3,bt);return b?new ol(d.type,d,v,b):null}return new ol(d.type,d,v)}evaluate(i){const l=this.input.evaluate(i),d=this.beginIndex.evaluate(i);let v;if(this.endIndex&&(v=this.endIndex.evaluate(i)),ii(l,["string"]))return[...l].slice(d,v).join("");if(ii(l,["array"]))return l.slice(d,v);throw new hn(`Expected first argument to be of type array or string, but found ${nn(Ut(l))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function lo(u,i){const l=u.length-1;let d,v,b=0,S=l,M=0;for(;b<=S;)if(M=Math.floor((b+S)/2),d=u[M],v=u[M+1],d<=i){if(M===l||i<v)return M;b=M+1}else{if(!(d>i))throw new hn("Input is not a number.");S=M-1}return 0}class Zl{constructor(i,l,d){this.type=i,this.input=l,this.labels=[],this.outputs=[];for(const[v,b]of d)this.labels.push(v),this.outputs.push(b)}static parse(i,l){if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");const d=l.parse(i[1],1,bt);if(!d)return null;const v=[];let b=null;l.expectedType&&l.expectedType.kind!=="value"&&(b=l.expectedType);for(let S=1;S<i.length;S+=2){const M=S===1?-1/0:i[S],D=i[S+1],L=S,F=S+1;if(typeof M!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(v.length&&v[v.length-1][0]>=M)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',L);const G=l.parse(D,F,b);if(!G)return null;b=b||G.type,v.push([M,G])}return new Zl(b,d,v)}evaluate(i){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(i);const v=this.input.evaluate(i);if(v<=l[0])return d[0].evaluate(i);const b=l.length;return v>=l[b-1]?d[b-1].evaluate(i):d[lo(l,v)].evaluate(i)}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function ad(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var uo,ko,Hl=function(){if(ko)return uo;function u(i,l,d,v){this.cx=3*i,this.bx=3*(d-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(v-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=l,this.p2x=d,this.p2y=v}return ko=1,uo=u,u.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,l){if(l===void 0&&(l=1e-6),i<0)return 0;if(i>1)return 1;for(var d=i,v=0;v<8;v++){var b=this.sampleCurveX(d)-i;if(Math.abs(b)<l)return d;var S=this.sampleCurveDerivativeX(d);if(Math.abs(S)<1e-6)break;d-=b/S}var M=0,D=1;for(d=i,v=0;v<20&&(b=this.sampleCurveX(d),!(Math.abs(b-i)<l));v++)i>b?M=d:D=d,d=.5*(D-M)+M;return d},solve:function(i,l){return this.sampleCurveY(this.solveCurveX(i,l))}},uo}(),Mf=ad(Hl);class ki{constructor(i,l,d,v,b){this.type=i,this.operator=l,this.interpolation=d,this.input=v,this.labels=[],this.outputs=[];for(const[S,M]of b)this.labels.push(S),this.outputs.push(M)}static interpolationFactor(i,l,d,v){let b=0;if(i.name==="exponential")b=Kl(l,i.base,d,v);else if(i.name==="linear")b=Kl(l,1,d,v);else if(i.name==="cubic-bezier"){const S=i.controlPoints;b=new Mf(S[0],S[1],S[2],S[3]).solve(Kl(l,1,d,v))}return b}static parse(i,l){let[d,v,b,...S]=i;if(!Array.isArray(v)||v.length===0)return l.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const L=v[1];if(typeof L!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:L}}else{if(v[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const L=v.slice(1);if(L.length!==4||L.some(F=>typeof F!="number"||F<0||F>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:L}}}if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(b=l.parse(b,2,bt),!b)return null;const M=[];let D=null;d!=="interpolate-hcl"&&d!=="interpolate-lab"||l.expectedType==Fu?l.expectedType&&l.expectedType.kind!=="value"&&(D=l.expectedType):D=Gi;for(let L=0;L<S.length;L+=2){const F=S[L],G=S[L+1],X=L+3,ee=L+4;if(typeof F!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',X);if(M.length&&M[M.length-1][0]>=F)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',X);const te=l.parse(G,ee,D);if(!te)return null;D=D||te.type,M.push([F,te])}return cs(D,bt)||cs(D,Nu)||cs(D,Gi)||cs(D,br)||cs(D,tl)||cs(D,Fu)||cs(D,us)||cs(D,ca(bt))?new ki(D,d,v,b,M):l.error(`Type ${nn(D)} is not interpolatable.`)}evaluate(i){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(i);const v=this.input.evaluate(i);if(v<=l[0])return d[0].evaluate(i);const b=l.length;if(v>=l[b-1])return d[b-1].evaluate(i);const S=lo(l,v),M=ki.interpolationFactor(this.interpolation,v,l[S],l[S+1]),D=d[S].evaluate(i),L=d[S+1].evaluate(i);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Mi(D,L,M);case"color":return cr.interpolate(D,L,M);case"padding":return Dn.interpolate(D,L,M);case"colorArray":return vn.interpolate(D,L,M);case"numberArray":return ai.interpolate(D,L,M);case"variableAnchorOffsetCollection":return Sr.interpolate(D,L,M);case"array":return pi(D,L,M);case"projectionDefinition":return hr.interpolate(D,L,M)}case"interpolate-hcl":switch(this.type.kind){case"color":return cr.interpolate(D,L,M,"hcl");case"colorArray":return vn.interpolate(D,L,M,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return cr.interpolate(D,L,M,"lab");case"colorArray":return vn.interpolate(D,L,M,"lab")}}}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function Kl(u,i,l,d){const v=d-l,b=u-l;return v===0?0:i===1?b/v:(Math.pow(i,b)-1)/(Math.pow(i,v)-1)}const ha={color:cr.interpolate,number:Mi,padding:Dn.interpolate,numberArray:ai.interpolate,colorArray:vn.interpolate,variableAnchorOffsetCollection:Sr.interpolate,array:pi};class mi{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let d=null;const v=l.expectedType;v&&v.kind!=="value"&&(d=v);const b=[];for(const M of i.slice(1)){const D=l.parse(M,1+b.length,d,void 0,{typeAnnotation:"omit"});if(!D)return null;d=d||D.type,b.push(D)}if(!d)throw new Error("No output type");const S=v&&b.some(M=>qi(v,M.type));return new mi(S?pr:d,b)}evaluate(i){let l,d=null,v=0;for(const b of this.args)if(v++,d=b.evaluate(i),d&&d instanceof Ai&&!d.available&&(l||(l=d.name),d=null,v===this.args.length&&(d=l)),d!==null)break;return d}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}function od(u,i){return u==="=="||u==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Zu(u,i,l,d){return d.compare(i,l)===0}function Xl(u,i,l){const d=u!=="=="&&u!=="!=";return class UI{constructor(b,S,M){this.type=yr,this.lhs=b,this.rhs=S,this.collator=M,this.hasUntypedArgument=b.type.kind==="value"||S.type.kind==="value"}static parse(b,S){if(b.length!==3&&b.length!==4)return S.error("Expected two or three arguments.");const M=b[0];let D=S.parse(b[1],1,pr);if(!D)return null;if(!od(M,D.type))return S.concat(1).error(`"${M}" comparisons are not supported for type '${nn(D.type)}'.`);let L=S.parse(b[2],2,pr);if(!L)return null;if(!od(M,L.type))return S.concat(2).error(`"${M}" comparisons are not supported for type '${nn(L.type)}'.`);if(D.type.kind!==L.type.kind&&D.type.kind!=="value"&&L.type.kind!=="value")return S.error(`Cannot compare types '${nn(D.type)}' and '${nn(L.type)}'.`);d&&(D.type.kind==="value"&&L.type.kind!=="value"?D=new Wi(L.type,[D]):D.type.kind!=="value"&&L.type.kind==="value"&&(L=new Wi(D.type,[L])));let F=null;if(b.length===4){if(D.type.kind!=="string"&&L.type.kind!=="string"&&D.type.kind!=="value"&&L.type.kind!=="value")return S.error("Cannot use collator to compare non-string types.");if(F=S.parse(b[3],3,Eo),!F)return null}return new UI(D,L,F)}evaluate(b){const S=this.lhs.evaluate(b),M=this.rhs.evaluate(b);if(d&&this.hasUntypedArgument){const D=Ut(S),L=Ut(M);if(D.kind!==L.kind||D.kind!=="string"&&D.kind!=="number")throw new hn(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${D.kind}, ${L.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const D=Ut(S),L=Ut(M);if(D.kind!=="string"||L.kind!=="string")return i(b,S,M)}return this.collator?l(b,S,M,this.collator.evaluate(b)):i(b,S,M)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}}}const sd=Xl("==",function(u,i,l){return i===l},Zu),em=Xl("!=",function(u,i,l){return i!==l},function(u,i,l,d){return!Zu(0,i,l,d)}),Af=Xl("<",function(u,i,l){return i<l},function(u,i,l,d){return d.compare(i,l)<0}),tm=Xl(">",function(u,i,l){return i>l},function(u,i,l,d){return d.compare(i,l)>0}),rm=Xl("<=",function(u,i,l){return i<=l},function(u,i,l,d){return d.compare(i,l)<=0}),lh=Xl(">=",function(u,i,l){return i>=l},function(u,i,l,d){return d.compare(i,l)>=0});class uh{constructor(i,l,d){this.type=Eo,this.locale=d,this.caseSensitive=i,this.diacriticSensitive=l}static parse(i,l){if(i.length!==2)return l.error("Expected one argument.");const d=i[1];if(typeof d!="object"||Array.isArray(d))return l.error("Collator options argument must be an object.");const v=l.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,yr);if(!v)return null;const b=l.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,yr);if(!b)return null;let S=null;return d.locale&&(S=l.parse(d.locale,1,fr),!S)?null:new uh(v,b,S)}evaluate(i){return new Aa(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class Yl{constructor(i,l,d,v,b){this.type=fr,this.number=i,this.locale=l,this.currency=d,this.minFractionDigits=v,this.maxFractionDigits=b}static parse(i,l){if(i.length!==3)return l.error("Expected two arguments.");const d=l.parse(i[1],1,bt);if(!d)return null;const v=i[2];if(typeof v!="object"||Array.isArray(v))return l.error("NumberFormat options argument must be an object.");let b=null;if(v.locale&&(b=l.parse(v.locale,1,fr),!b))return null;let S=null;if(v.currency&&(S=l.parse(v.currency,1,fr),!S))return null;let M=null;if(v["min-fraction-digits"]&&(M=l.parse(v["min-fraction-digits"],1,bt),!M))return null;let D=null;return v["max-fraction-digits"]&&(D=l.parse(v["max-fraction-digits"],1,bt),!D)?null:new Yl(d,b,S,M,D)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class Hu{constructor(i){this.type=el,this.sections=i}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const d=i[1];if(!Array.isArray(d)&&typeof d=="object")return l.error("First argument must be an image or text section.");const v=[];let b=!1;for(let S=1;S<=i.length-1;++S){const M=i[S];if(b&&typeof M=="object"&&!Array.isArray(M)){b=!1;let D=null;if(M["font-scale"]&&(D=l.parse(M["font-scale"],1,bt),!D))return null;let L=null;if(M["text-font"]&&(L=l.parse(M["text-font"],1,ca(fr)),!L))return null;let F=null;if(M["text-color"]&&(F=l.parse(M["text-color"],1,Gi),!F))return null;let G=null;if(M["vertical-align"]){if(typeof M["vertical-align"]=="string"&&!ds.includes(M["vertical-align"]))return l.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${M["vertical-align"]}' instead.`);if(G=l.parse(M["vertical-align"],1,fr),!G)return null}const X=v[v.length-1];X.scale=D,X.font=L,X.textColor=F,X.verticalAlign=G}else{const D=l.parse(i[S],1,pr);if(!D)return null;const L=D.type.kind;if(L!=="string"&&L!=="value"&&L!=="null"&&L!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,v.push({content:D,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Hu(v)}evaluate(i){return new pn(this.sections.map(l=>{const d=l.content.evaluate(i);return Ut(d)===ao?new il("",d,null,null,null,l.verticalAlign?l.verticalAlign.evaluate(i):null):new il(so(d),null,l.scale?l.scale.evaluate(i):null,l.font?l.font.evaluate(i).join(","):null,l.textColor?l.textColor.evaluate(i):null,l.verticalAlign?l.verticalAlign.evaluate(i):null)}))}eachChild(i){for(const l of this.sections)i(l.content),l.scale&&i(l.scale),l.font&&i(l.font),l.textColor&&i(l.textColor),l.verticalAlign&&i(l.verticalAlign)}outputDefined(){return!1}}class ld{constructor(i){this.type=ao,this.input=i}static parse(i,l){if(i.length!==2)return l.error("Expected two arguments.");const d=l.parse(i[1],1,fr);return d?new ld(d):l.error("No image name provided.")}evaluate(i){const l=this.input.evaluate(i),d=Ai.fromString(l);return d&&i.availableImages&&(d.available=i.availableImages.indexOf(l)>-1),d}eachChild(i){i(this.input)}outputDefined(){return!1}}class ch{constructor(i){this.type=bt,this.input=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const d=l.parse(i[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${nn(d.type)} instead.`):new ch(d):null}evaluate(i){const l=this.input.evaluate(i);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new hn(`Expected value to be of type string or array, but found ${nn(Ut(l))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}const Ga=8192;function nm(u,i){const l=(180+u[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,v=Math.pow(2,i.z);return[Math.round(l*v*Ga),Math.round(d*v*Ga)]}function ud(u,i){const l=Math.pow(2,i.z);return[(v=(u[0]/Ga+i.x)/l,360*v-180),(d=(u[1]/Ga+i.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,v}function Ku(u,i){u[0]=Math.min(u[0],i[0]),u[1]=Math.min(u[1],i[1]),u[2]=Math.max(u[2],i[0]),u[3]=Math.max(u[3],i[1])}function Xu(u,i){return!(u[0]<=i[0]||u[2]>=i[2]||u[1]<=i[1]||u[3]>=i[3])}function If(u,i,l){const d=u[0]-i[0],v=u[1]-i[1],b=u[0]-l[0],S=u[1]-l[1];return d*S-b*v==0&&d*b<=0&&v*S<=0}function Yu(u,i,l,d){return(v=[d[0]-l[0],d[1]-l[1]])[0]*(b=[i[0]-u[0],i[1]-u[1]])[1]-v[1]*b[0]!=0&&!(!Ju(u,i,l,d)||!Ju(l,d,u,i));var v,b}function kf(u,i,l){for(const d of l)for(let v=0;v<d.length-1;++v)if(Yu(u,i,d[v],d[v+1]))return!0;return!1}function ps(u,i,l=!1){let d=!1;for(const M of i)for(let D=0;D<M.length-1;D++){if(If(u,M[D],M[D+1]))return l;(b=M[D])[1]>(v=u)[1]!=(S=M[D+1])[1]>v[1]&&v[0]<(S[0]-b[0])*(v[1]-b[1])/(S[1]-b[1])+b[0]&&(d=!d)}var v,b,S;return d}function Qu(u,i){for(const l of i)if(ps(u,l))return!0;return!1}function Df(u,i){for(const l of u)if(!ps(l,i))return!1;for(let l=0;l<u.length-1;++l)if(kf(u[l],u[l+1],i))return!1;return!0}function Of(u,i){for(const l of i)if(Df(u,l))return!0;return!1}function Ju(u,i,l,d){const v=d[0]-l[0],b=d[1]-l[1],S=(u[0]-l[0])*b-v*(u[1]-l[1]),M=(i[0]-l[0])*b-v*(i[1]-l[1]);return S>0&&M<0||S<0&&M>0}function hh(u,i,l){const d=[];for(let v=0;v<u.length;v++){const b=[];for(let S=0;S<u[v].length;S++){const M=nm(u[v][S],l);Ku(i,M),b.push(M)}d.push(b)}return d}function cd(u,i,l){const d=[];for(let v=0;v<u.length;v++){const b=hh(u[v],i,l);d.push(b)}return d}function hd(u,i,l,d){if(u[0]<l[0]||u[0]>l[2]){const v=.5*d;let b=u[0]-l[0]>v?-d:l[0]-u[0]>v?d:0;b===0&&(b=u[0]-l[2]>v?-d:l[2]-u[0]>v?d:0),u[0]+=b}Ku(i,u)}function ms(u,i,l,d){const v=Math.pow(2,d.z)*Ga,b=[d.x*Ga,d.y*Ga],S=[];for(const M of u)for(const D of M){const L=[D.x+b[0],D.y+b[1]];hd(L,i,l,v),S.push(L)}return S}function dd(u,i,l,d){const v=Math.pow(2,d.z)*Ga,b=[d.x*Ga,d.y*Ga],S=[];for(const D of u){const L=[];for(const F of D){const G=[F.x+b[0],F.y+b[1]];Ku(i,G),L.push(G)}S.push(L)}if(i[2]-i[0]<=v/2){(M=i)[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(const D of S)for(const L of D)hd(L,i,l,v)}var M;return S}class sl{constructor(i,l){this.type=yr,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Ua(i[1])){const d=i[1];if(d.type==="FeatureCollection"){const v=[];for(const b of d.features){const{type:S,coordinates:M}=b.geometry;S==="Polygon"&&v.push(M),S==="MultiPolygon"&&v.push(...M)}if(v.length)return new sl(d,{type:"MultiPolygon",coordinates:v})}else if(d.type==="Feature"){const v=d.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new sl(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new sl(d,d)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(l,d){const v=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],S=l.canonicalID();if(d.type==="Polygon"){const M=hh(d.coordinates,b,S),D=ms(l.geometry(),v,b,S);if(!Xu(v,b))return!1;for(const L of D)if(!ps(L,M))return!1}if(d.type==="MultiPolygon"){const M=cd(d.coordinates,b,S),D=ms(l.geometry(),v,b,S);if(!Xu(v,b))return!1;for(const L of D)if(!Qu(L,M))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(l,d){const v=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],S=l.canonicalID();if(d.type==="Polygon"){const M=hh(d.coordinates,b,S),D=dd(l.geometry(),v,b,S);if(!Xu(v,b))return!1;for(const L of D)if(!Df(L,M))return!1}if(d.type==="MultiPolygon"){const M=cd(d.coordinates,b,S),D=dd(l.geometry(),v,b,S);if(!Xu(v,b))return!1;for(const L of D)if(!Of(L,M))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Rf=class{constructor(u=[],i=(l,d)=>l<d?-1:l>d?1:0){if(this.data=u,this.length=this.data.length,this.compare=i,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:i,compare:l}=this,d=i[u];for(;u>0;){const v=u-1>>1,b=i[v];if(l(d,b)>=0)break;i[u]=b,u=v}i[u]=d}_down(u){const{data:i,compare:l}=this,d=this.length>>1,v=i[u];for(;u<d;){let b=1+(u<<1);const S=b+1;if(S<this.length&&l(i[S],i[b])<0&&(b=S),l(i[b],v)>=0)break;i[u]=i[b],u=b}i[u]=v}};function dh(u,i,l=0,d=u.length-1,v=ec){for(;d>l;){if(d-l>600){const D=d-l+1,L=i-l+1,F=Math.log(D),G=.5*Math.exp(2*F/3),X=.5*Math.sqrt(F*G*(D-G)/D)*(L-D/2<0?-1:1);dh(u,i,Math.max(l,Math.floor(i-L*G/D+X)),Math.min(d,Math.floor(i+(D-L)*G/D+X)),v)}const b=u[i];let S=l,M=d;for(ll(u,l,i),v(u[d],b)>0&&ll(u,l,d);S<M;){for(ll(u,S,M),S++,M--;v(u[S],b)<0;)S++;for(;v(u[M],b)>0;)M--}v(u[l],b)===0?ll(u,l,M):(M++,ll(u,M,d)),M<=i&&(l=M+1),i<=M&&(d=M-1)}}function ll(u,i,l){const d=u[i];u[i]=u[l],u[l]=d}function ec(u,i){return u<i?-1:u>i?1:0}function gs(u,i){if(u.length<=1)return[u];const l=[];let d,v;for(const b of u){const S=tc(b);S!==0&&(b.area=Math.abs(S),v===void 0&&(v=S<0),v===S<0?(d&&l.push(d),d=[b]):d.push(b))}if(d&&l.push(d),i>1)for(let b=0;b<l.length;b++)l[b].length<=i||(dh(l[b],i,1,l[b].length-1,im),l[b]=l[b].slice(0,i));return l}function im(u,i){return i.area-u.area}function tc(u){let i=0;for(let l,d,v=0,b=u.length,S=b-1;v<b;S=v++)l=u[v],d=u[S],i+=(d.x-l.x)*(l.y+d.y);return i}const zf=1/298.257223563,fd=zf*(2-zf),fh=Math.PI/180;class rc{constructor(i){const l=6378.137*fh*1e3,d=Math.cos(i*fh),v=1/(1-fd*(1-d*d)),b=Math.sqrt(v);this.kx=l*b*d,this.ky=l*b*v*(1-fd)}distance(i,l){const d=this.wrap(i[0]-l[0])*this.kx,v=(i[1]-l[1])*this.ky;return Math.sqrt(d*d+v*v)}pointOnLine(i,l){let d,v,b,S,M=1/0;for(let D=0;D<i.length-1;D++){let L=i[D][0],F=i[D][1],G=this.wrap(i[D+1][0]-L)*this.kx,X=(i[D+1][1]-F)*this.ky,ee=0;G===0&&X===0||(ee=(this.wrap(l[0]-L)*this.kx*G+(l[1]-F)*this.ky*X)/(G*G+X*X),ee>1?(L=i[D+1][0],F=i[D+1][1]):ee>0&&(L+=G/this.kx*ee,F+=X/this.ky*ee)),G=this.wrap(l[0]-L)*this.kx,X=(l[1]-F)*this.ky;const te=G*G+X*X;te<M&&(M=te,d=L,v=F,b=D,S=ee)}return{point:[d,v],index:b,t:Math.max(0,Math.min(1,S))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function Dr(u,i){return i[0]-u[0]}function nc(u){return u[1]-u[0]+1}function co(u,i){return u[1]>=u[0]&&u[1]<i}function pd(u,i){if(u[0]>u[1])return[null,null];const l=nc(u);if(i){if(l===2)return[u,null];const v=Math.floor(l/2);return[[u[0],u[0]+v],[u[0]+v,u[1]]]}if(l===1)return[u,null];const d=Math.floor(l/2)-1;return[[u[0],u[0]+d],[u[0]+d+1,u[1]]]}function md(u,i){if(!co(i,u.length))return[1/0,1/0,-1/0,-1/0];const l=[1/0,1/0,-1/0,-1/0];for(let d=i[0];d<=i[1];++d)Ku(l,u[d]);return l}function gd(u){const i=[1/0,1/0,-1/0,-1/0];for(const l of u)for(const d of l)Ku(i,d);return i}function Lf(u){return u[0]!==-1/0&&u[1]!==-1/0&&u[2]!==1/0&&u[3]!==1/0}function yd(u,i,l){if(!Lf(u)||!Lf(i))return NaN;let d=0,v=0;return u[2]<i[0]&&(d=i[0]-u[2]),u[0]>i[2]&&(d=u[0]-i[2]),u[1]>i[3]&&(v=u[1]-i[3]),u[3]<i[1]&&(v=i[1]-u[3]),l.distance([0,0],[d,v])}function oi(u,i,l){const d=l.pointOnLine(i,u);return l.distance(u,d.point)}function ul(u,i,l,d,v){const b=Math.min(oi(u,[l,d],v),oi(i,[l,d],v)),S=Math.min(oi(l,[u,i],v),oi(d,[u,i],v));return Math.min(b,S)}function jf(u,i,l,d,v){if(!co(i,u.length)||!co(d,l.length))return 1/0;let b=1/0;for(let S=i[0];S<i[1];++S){const M=u[S],D=u[S+1];for(let L=d[0];L<d[1];++L){const F=l[L],G=l[L+1];if(Yu(M,D,F,G))return 0;b=Math.min(b,ul(M,D,F,G,v))}}return b}function Nf(u,i,l,d,v){if(!co(i,u.length)||!co(d,l.length))return NaN;let b=1/0;for(let S=i[0];S<=i[1];++S)for(let M=d[0];M<=d[1];++M)if(b=Math.min(b,v.distance(u[S],l[M])),b===0)return b;return b}function Ff(u,i,l){if(ps(u,i,!0))return 0;let d=1/0;for(const v of i){const b=v[0],S=v[v.length-1];if(b!==S&&(d=Math.min(d,oi(u,[S,b],l)),d===0))return d;const M=l.pointOnLine(v,u);if(d=Math.min(d,l.distance(u,M.point)),d===0)return d}return d}function Bf(u,i,l,d){if(!co(i,u.length))return NaN;for(let b=i[0];b<=i[1];++b)if(ps(u[b],l,!0))return 0;let v=1/0;for(let b=i[0];b<i[1];++b){const S=u[b],M=u[b+1];for(const D of l)for(let L=0,F=D.length,G=F-1;L<F;G=L++){const X=D[G],ee=D[L];if(Yu(S,M,X,ee))return 0;v=Math.min(v,ul(S,M,X,ee,d))}}return v}function ph(u,i){for(const l of u)for(const d of l)if(ps(d,i,!0))return!0;return!1}function am(u,i,l,d=1/0){const v=gd(u),b=gd(i);if(d!==1/0&&yd(v,b,l)>=d)return d;if(Xu(v,b)){if(ph(u,i))return 0}else if(ph(i,u))return 0;let S=1/0;for(const M of u)for(let D=0,L=M.length,F=L-1;D<L;F=D++){const G=M[F],X=M[D];for(const ee of i)for(let te=0,ne=ee.length,he=ne-1;te<ne;he=te++){const ge=ee[he],ke=ee[te];if(Yu(G,X,ge,ke))return 0;S=Math.min(S,ul(G,X,ge,ke,l))}}return S}function $f(u,i,l,d,v,b){if(!b)return;const S=yd(md(d,b),v,l);S<i&&u.push([S,b,[0,0]])}function Do(u,i,l,d,v,b,S){if(!b||!S)return;const M=yd(md(d,b),md(v,S),l);M<i&&u.push([M,b,S])}function Ql(u,i,l,d,v=1/0){let b=Math.min(d.distance(u[0],l[0][0]),v);if(b===0)return b;const S=new Rf([[0,[0,u.length-1],[0,0]]],Dr),M=gd(l);for(;S.length>0;){const D=S.pop();if(D[0]>=b)continue;const L=D[1],F=i?50:100;if(nc(L)<=F){if(!co(L,u.length))return NaN;if(i){const G=Bf(u,L,l,d);if(isNaN(G)||G===0)return G;b=Math.min(b,G)}else for(let G=L[0];G<=L[1];++G){const X=Ff(u[G],l,d);if(b=Math.min(b,X),b===0)return 0}}else{const G=pd(L,i);$f(S,b,d,u,M,G[0]),$f(S,b,d,u,M,G[1])}}return b}function ys(u,i,l,d,v,b=1/0){let S=Math.min(b,v.distance(u[0],l[0]));if(S===0)return S;const M=new Rf([[0,[0,u.length-1],[0,l.length-1]]],Dr);for(;M.length>0;){const D=M.pop();if(D[0]>=S)continue;const L=D[1],F=D[2],G=i?50:100,X=d?50:100;if(nc(L)<=G&&nc(F)<=X){if(!co(L,u.length)&&co(F,l.length))return NaN;let ee;if(i&&d)ee=jf(u,L,l,F,v),S=Math.min(S,ee);else if(i&&!d){const te=u.slice(L[0],L[1]+1);for(let ne=F[0];ne<=F[1];++ne)if(ee=oi(l[ne],te,v),S=Math.min(S,ee),S===0)return S}else if(!i&&d){const te=l.slice(F[0],F[1]+1);for(let ne=L[0];ne<=L[1];++ne)if(ee=oi(u[ne],te,v),S=Math.min(S,ee),S===0)return S}else ee=Nf(u,L,l,F,v),S=Math.min(S,ee)}else{const ee=pd(L,i),te=pd(F,d);Do(M,S,v,u,l,ee[0],te[0]),Do(M,S,v,u,l,ee[0],te[1]),Do(M,S,v,u,l,ee[1],te[0]),Do(M,S,v,u,l,ee[1],te[1])}}return S}function ic(u){return u.type==="MultiPolygon"?u.coordinates.map(i=>({type:"Polygon",coordinates:i})):u.type==="MultiLineString"?u.coordinates.map(i=>({type:"LineString",coordinates:i})):u.type==="MultiPoint"?u.coordinates.map(i=>({type:"Point",coordinates:i})):[u]}class vs{constructor(i,l){this.type=bt,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Ua(i[1])){const d=i[1];if(d.type==="FeatureCollection")return new vs(d,d.features.map(v=>ic(v.geometry)).flat());if(d.type==="Feature")return new vs(d,ic(d.geometry));if("type"in d&&"coordinates"in d)return new vs(d,ic(d))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(l,d){const v=l.geometry(),b=v.flat().map(D=>ud([D.x,D.y],l.canonical));if(v.length===0)return NaN;const S=new rc(b[0][1]);let M=1/0;for(const D of d){switch(D.type){case"Point":M=Math.min(M,ys(b,!1,[D.coordinates],!1,S,M));break;case"LineString":M=Math.min(M,ys(b,!1,D.coordinates,!0,S,M));break;case"Polygon":M=Math.min(M,Ql(b,!1,D.coordinates,S,M))}if(M===0)return M}return M}(i,this.geometries);if(i.geometryType()==="LineString")return function(l,d){const v=l.geometry(),b=v.flat().map(D=>ud([D.x,D.y],l.canonical));if(v.length===0)return NaN;const S=new rc(b[0][1]);let M=1/0;for(const D of d){switch(D.type){case"Point":M=Math.min(M,ys(b,!0,[D.coordinates],!1,S,M));break;case"LineString":M=Math.min(M,ys(b,!0,D.coordinates,!0,S,M));break;case"Polygon":M=Math.min(M,Ql(b,!0,D.coordinates,S,M))}if(M===0)return M}return M}(i,this.geometries);if(i.geometryType()==="Polygon")return function(l,d){const v=l.geometry();if(v.length===0||v[0].length===0)return NaN;const b=gs(v,0).map(D=>D.map(L=>L.map(F=>ud([F.x,F.y],l.canonical)))),S=new rc(b[0][0][0][1]);let M=1/0;for(const D of d)for(const L of b){switch(D.type){case"Point":M=Math.min(M,Ql([D.coordinates],!1,L,S,M));break;case"LineString":M=Math.min(M,Ql(D.coordinates,!0,L,S,M));break;case"Polygon":M=Math.min(M,am(L,D.coordinates,S,M))}if(M===0)return M}return M}(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class _s{constructor(i){this.type=pr,this.key=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const d=i[1];return d==null?l.error("Global state property must be defined."):typeof d!="string"?l.error(`Global state property must be string, but found ${typeof i[1]} instead.`):new _s(d)}evaluate(i){var l;const d=(l=i.globals)===null||l===void 0?void 0:l.globalState;return d&&Object.keys(d).length!==0?wr(d,this.key):null}eachChild(){}outputDefined(){return!1}}const qa={"==":sd,"!=":em,">":tm,"<":Af,">=":lh,"<=":rm,array:Wi,at:Cn,boolean:Wi,case:an,coalesce:mi,collator:uh,format:Hu,image:ld,in:Io,"index-of":Wl,interpolate:ki,"interpolate-hcl":ki,"interpolate-lab":ki,length:ch,let:fs,literal:Ii,match:Zn,number:Wi,"number-format":Yl,object:Wi,slice:ol,step:Zl,string:Wi,"to-boolean":Ia,"to-color":Ia,"to-number":Ia,"to-string":Ia,var:ka,within:sl,distance:vs,"global-state":_s};class Zi{constructor(i,l,d,v){this.name=i,this.type=l,this._evaluate=d,this.args=v}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,l){const d=i[0],v=Zi.definitions[d];if(!v)return l.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const b=Array.isArray(v)?v[0]:v.type,S=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,M=S.filter(([L])=>!Array.isArray(L)||L.length===i.length-1);let D=null;for(const[L,F]of M){D=new al(l.registry,oc,l.path,null,l.scope);const G=[];let X=!1;for(let ee=1;ee<i.length;ee++){const te=i[ee],ne=Array.isArray(L)?L[ee-1]:L.type,he=D.parse(te,1+G.length,ne);if(!he){X=!0;break}G.push(he)}if(!X)if(Array.isArray(L)&&L.length!==G.length)D.error(`Expected ${L.length} arguments, but found ${G.length} instead.`);else{for(let ee=0;ee<G.length;ee++){const te=Array.isArray(L)?L[ee]:L.type,ne=G[ee];D.concat(ee+1).checkSubtype(te,ne.type)}if(D.errors.length===0)return new Zi(d,b,F,G)}}if(M.length===1)l.errors.push(...D.errors);else{const L=(M.length?M:S).map(([G])=>{return X=G,Array.isArray(X)?`(${X.map(nn).join(", ")})`:`(${nn(X.type)}...)`;var X}).join(" | "),F=[];for(let G=1;G<i.length;G++){const X=l.parse(i[G],1+F.length);if(!X)return null;F.push(nn(X.type))}l.error(`Expected arguments of type ${L}, but found (${F.join(", ")}) instead.`)}return null}static register(i,l){Zi.definitions=l;for(const d in l)i[d]=Zi}}function vd(u,[i,l,d,v]){i=i.evaluate(u),l=l.evaluate(u),d=d.evaluate(u);const b=v?v.evaluate(u):1,S=ur(i,l,d,b);if(S)throw new hn(S);return new cr(i/255,l/255,d/255,b,!1)}function ac(u,i){return u in i}function mh(u,i){const l=i[u];return l===void 0?null:l}function xs(u){return{type:u}}function oc(u){if(u instanceof ka)return oc(u.boundExpression);if(u instanceof Zi&&u.name==="error"||u instanceof uh||u instanceof sl||u instanceof vs||u instanceof _s)return!1;const i=u instanceof Ia||u instanceof Wi;let l=!0;return u.eachChild(d=>{l=i?l&&oc(d):l&&d instanceof Ii}),!!l&&sc(u)&&cl(u,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function sc(u){if(u instanceof Zi&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof sl||u instanceof vs)return!1;let i=!0;return u.eachChild(l=>{i&&!sc(l)&&(i=!1)}),i}function Jl(u){if(u instanceof Zi&&u.name==="feature-state")return!1;let i=!0;return u.eachChild(l=>{i&&!Jl(l)&&(i=!1)}),i}function cl(u,i){if(u instanceof Zi&&i.indexOf(u.name)>=0)return!1;let l=!0;return u.eachChild(d=>{l&&!cl(d,i)&&(l=!1)}),l}function Oo(u){return{result:"success",value:u}}function bs(u){return{result:"error",value:u}}function ws(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function _d(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function xd(u){return!!u.expression&&u.expression.interpolated}function mr(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function hl(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)&&Ut(u)===Ba}function bd(u){return u}function wd(u,i){const l=u.stops&&typeof u.stops[0][0]=="object",d=l||!(l||u.property!==void 0),v=u.type||(xd(i)?"exponential":"interval"),b=function(F){switch(F.type){case"color":return cr.parse;case"padding":return Dn.parse;case"numberArray":return ai.parse;case"colorArray":return vn.parse;default:return null}}(i);if(b&&((u=ni({},u)).stops&&(u.stops=u.stops.map(F=>[F[0],b(F[1])])),u.default=b(u.default?u.default:i.default)),u.colorSpace&&(S=u.colorSpace)!=="rgb"&&S!=="hcl"&&S!=="lab")throw new Error(`Unknown color space: "${u.colorSpace}"`);var S;const M=function(F){switch(F){case"exponential":return eu;case"interval":return gh;case"categorical":return Sd;case"identity":return Pd;default:throw new Error(`Unknown function type "${F}"`)}}(v);let D,L;if(v==="categorical"){D=Object.create(null);for(const F of u.stops)D[F[0]]=F[1];L=typeof u.stops[0][0]}if(l){const F={},G=[];for(let te=0;te<u.stops.length;te++){const ne=u.stops[te],he=ne[0].zoom;F[he]===void 0&&(F[he]={zoom:he,type:u.type,property:u.property,default:u.default,stops:[]},G.push(he)),F[he].stops.push([ne[0].value,ne[1]])}const X=[];for(const te of G)X.push([F[te].zoom,wd(F[te],i)]);const ee={name:"linear"};return{kind:"composite",interpolationType:ee,interpolationFactor:ki.interpolationFactor.bind(void 0,ee),zoomStops:X.map(te=>te[0]),evaluate:({zoom:te},ne)=>eu({stops:X,base:u.base},i,te).evaluate(te,ne)}}if(d){const F=v==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:F,interpolationFactor:ki.interpolationFactor.bind(void 0,F),zoomStops:u.stops.map(G=>G[0]),evaluate:({zoom:G})=>M(u,i,G,D,L)}}return{kind:"source",evaluate(F,G){const X=G&&G.properties?G.properties[u.property]:void 0;return X===void 0?Zr(u.default,i.default):M(u,i,X,D,L)}}}function Zr(u,i,l){return u!==void 0?u:i!==void 0?i:l!==void 0?l:void 0}function Sd(u,i,l,d,v){return Zr(typeof l===v?d[l]:void 0,u.default,i.default)}function gh(u,i,l){if(mr(l)!=="number")return Zr(u.default,i.default);const d=u.stops.length;if(d===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[d-1][0])return u.stops[d-1][1];const v=lo(u.stops.map(b=>b[0]),l);return u.stops[v][1]}function eu(u,i,l){const d=u.base!==void 0?u.base:1;if(mr(l)!=="number")return Zr(u.default,i.default);const v=u.stops.length;if(v===1||l<=u.stops[0][0])return u.stops[0][1];if(l>=u.stops[v-1][0])return u.stops[v-1][1];const b=lo(u.stops.map(F=>F[0]),l),S=function(F,G,X,ee){const te=ee-X,ne=F-X;return te===0?0:G===1?ne/te:(Math.pow(G,ne)-1)/(Math.pow(G,te)-1)}(l,d,u.stops[b][0],u.stops[b+1][0]),M=u.stops[b][1],D=u.stops[b+1][1],L=ha[i.type]||bd;return typeof M.evaluate=="function"?{evaluate(...F){const G=M.evaluate.apply(void 0,F),X=D.evaluate.apply(void 0,F);if(G!==void 0&&X!==void 0)return L(G,X,S,u.colorSpace)}}:L(M,D,S,u.colorSpace)}function Pd(u,i,l){switch(i.type){case"color":l=cr.parse(l);break;case"formatted":l=pn.fromString(l.toString());break;case"resolvedImage":l=Ai.fromString(l.toString());break;case"padding":l=Dn.parse(l);break;case"colorArray":l=vn.parse(l);break;case"numberArray":l=ai.parse(l);break;default:mr(l)===i.type||i.type==="enum"&&i.values[l]||(l=void 0)}return Zr(l,u.default,i.default)}Zi.register(qa,{error:[{kind:"error"},[fr],(u,[i])=>{throw new hn(i.evaluate(u))}],typeof:[fr,[pr],(u,[i])=>nn(Ut(i.evaluate(u)))],"to-rgba":[ca(bt,4),[Gi],(u,[i])=>{const[l,d,v,b]=i.evaluate(u).rgb;return[255*l,255*d,255*v,b]}],rgb:[Gi,[bt,bt,bt],vd],rgba:[Gi,[bt,bt,bt,bt],vd],has:{type:yr,overloads:[[[fr],(u,[i])=>ac(i.evaluate(u),u.properties())],[[fr,Ba],(u,[i,l])=>ac(i.evaluate(u),l.evaluate(u))]]},get:{type:pr,overloads:[[[fr],(u,[i])=>mh(i.evaluate(u),u.properties())],[[fr,Ba],(u,[i,l])=>mh(i.evaluate(u),l.evaluate(u))]]},"feature-state":[pr,[fr],(u,[i])=>mh(i.evaluate(u),u.featureState||{})],properties:[Ba,[],u=>u.properties()],"geometry-type":[fr,[],u=>u.geometryType()],id:[pr,[],u=>u.id()],zoom:[bt,[],u=>u.globals.zoom],"heatmap-density":[bt,[],u=>u.globals.heatmapDensity||0],elevation:[bt,[],u=>u.globals.elevation||0],"line-progress":[bt,[],u=>u.globals.lineProgress||0],accumulated:[pr,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[bt,xs(bt),(u,i)=>{let l=0;for(const d of i)l+=d.evaluate(u);return l}],"*":[bt,xs(bt),(u,i)=>{let l=1;for(const d of i)l*=d.evaluate(u);return l}],"-":{type:bt,overloads:[[[bt,bt],(u,[i,l])=>i.evaluate(u)-l.evaluate(u)],[[bt],(u,[i])=>-i.evaluate(u)]]},"/":[bt,[bt,bt],(u,[i,l])=>i.evaluate(u)/l.evaluate(u)],"%":[bt,[bt,bt],(u,[i,l])=>i.evaluate(u)%l.evaluate(u)],ln2:[bt,[],()=>Math.LN2],pi:[bt,[],()=>Math.PI],e:[bt,[],()=>Math.E],"^":[bt,[bt,bt],(u,[i,l])=>Math.pow(i.evaluate(u),l.evaluate(u))],sqrt:[bt,[bt],(u,[i])=>Math.sqrt(i.evaluate(u))],log10:[bt,[bt],(u,[i])=>Math.log(i.evaluate(u))/Math.LN10],ln:[bt,[bt],(u,[i])=>Math.log(i.evaluate(u))],log2:[bt,[bt],(u,[i])=>Math.log(i.evaluate(u))/Math.LN2],sin:[bt,[bt],(u,[i])=>Math.sin(i.evaluate(u))],cos:[bt,[bt],(u,[i])=>Math.cos(i.evaluate(u))],tan:[bt,[bt],(u,[i])=>Math.tan(i.evaluate(u))],asin:[bt,[bt],(u,[i])=>Math.asin(i.evaluate(u))],acos:[bt,[bt],(u,[i])=>Math.acos(i.evaluate(u))],atan:[bt,[bt],(u,[i])=>Math.atan(i.evaluate(u))],min:[bt,xs(bt),(u,i)=>Math.min(...i.map(l=>l.evaluate(u)))],max:[bt,xs(bt),(u,i)=>Math.max(...i.map(l=>l.evaluate(u)))],abs:[bt,[bt],(u,[i])=>Math.abs(i.evaluate(u))],round:[bt,[bt],(u,[i])=>{const l=i.evaluate(u);return l<0?-Math.round(-l):Math.round(l)}],floor:[bt,[bt],(u,[i])=>Math.floor(i.evaluate(u))],ceil:[bt,[bt],(u,[i])=>Math.ceil(i.evaluate(u))],"filter-==":[yr,[fr,pr],(u,[i,l])=>u.properties()[i.value]===l.value],"filter-id-==":[yr,[pr],(u,[i])=>u.id()===i.value],"filter-type-==":[yr,[fr],(u,[i])=>u.geometryType()===i.value],"filter-<":[yr,[fr,pr],(u,[i,l])=>{const d=u.properties()[i.value],v=l.value;return typeof d==typeof v&&d<v}],"filter-id-<":[yr,[pr],(u,[i])=>{const l=u.id(),d=i.value;return typeof l==typeof d&&l<d}],"filter->":[yr,[fr,pr],(u,[i,l])=>{const d=u.properties()[i.value],v=l.value;return typeof d==typeof v&&d>v}],"filter-id->":[yr,[pr],(u,[i])=>{const l=u.id(),d=i.value;return typeof l==typeof d&&l>d}],"filter-<=":[yr,[fr,pr],(u,[i,l])=>{const d=u.properties()[i.value],v=l.value;return typeof d==typeof v&&d<=v}],"filter-id-<=":[yr,[pr],(u,[i])=>{const l=u.id(),d=i.value;return typeof l==typeof d&&l<=d}],"filter->=":[yr,[fr,pr],(u,[i,l])=>{const d=u.properties()[i.value],v=l.value;return typeof d==typeof v&&d>=v}],"filter-id->=":[yr,[pr],(u,[i])=>{const l=u.id(),d=i.value;return typeof l==typeof d&&l>=d}],"filter-has":[yr,[pr],(u,[i])=>i.value in u.properties()],"filter-has-id":[yr,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[yr,[ca(fr)],(u,[i])=>i.value.indexOf(u.geometryType())>=0],"filter-id-in":[yr,[ca(pr)],(u,[i])=>i.value.indexOf(u.id())>=0],"filter-in-small":[yr,[fr,ca(pr)],(u,[i,l])=>l.value.indexOf(u.properties()[i.value])>=0],"filter-in-large":[yr,[fr,ca(pr)],(u,[i,l])=>function(d,v,b,S){for(;b<=S;){const M=b+S>>1;if(v[M]===d)return!0;v[M]>d?S=M-1:b=M+1}return!1}(u.properties()[i.value],l.value,0,l.value.length-1)],all:{type:yr,overloads:[[[yr,yr],(u,[i,l])=>i.evaluate(u)&&l.evaluate(u)],[xs(yr),(u,i)=>{for(const l of i)if(!l.evaluate(u))return!1;return!0}]]},any:{type:yr,overloads:[[[yr,yr],(u,[i,l])=>i.evaluate(u)||l.evaluate(u)],[xs(yr),(u,i)=>{for(const l of i)if(l.evaluate(u))return!0;return!1}]]},"!":[yr,[yr],(u,[i])=>!i.evaluate(u)],"is-supported-script":[yr,[fr],(u,[i])=>{const l=u.globals&&u.globals.isSupportedScript;return!l||l(i.evaluate(u))}],upcase:[fr,[fr],(u,[i])=>i.evaluate(u).toUpperCase()],downcase:[fr,[fr],(u,[i])=>i.evaluate(u).toLowerCase()],concat:[fr,xs(pr),(u,i)=>i.map(l=>so(l.evaluate(u))).join("")],"resolved-locale":[fr,[Eo],(u,[i])=>i.evaluate(u).resolvedLocale()]});class tu{constructor(i,l){this.expression=i,this._warningHistory={},this._evaluator=new Ao,this._defaultValue=l?function(d){if(d.type==="color"&&hl(d.default))return new cr(0,0,0,0);switch(d.type){case"color":return cr.parse(d.default)||null;case"padding":return Dn.parse(d.default)||null;case"numberArray":return ai.parse(d.default)||null;case"colorArray":return vn.parse(d.default)||null;case"variableAnchorOffsetCollection":return Sr.parse(d.default)||null;case"projectionDefinition":return hr.parse(d.default)||null;default:return d.default===void 0?null:d.default}}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(i,l,d,v,b,S){return this._evaluator.globals=i,this._evaluator.feature=l,this._evaluator.featureState=d,this._evaluator.canonical=v,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=S,this.expression.evaluate(this._evaluator)}evaluate(i,l,d,v,b,S){this._evaluator.globals=i,this._evaluator.feature=l||null,this._evaluator.featureState=d||null,this._evaluator.canonical=v,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=S||null;try{const M=this.expression.evaluate(this._evaluator);if(M==null||typeof M=="number"&&M!=M)return this._defaultValue;if(this._enumValues&&!(M in this._enumValues))throw new hn(`Expected value to be one of ${Object.keys(this._enumValues).map(D=>JSON.stringify(D)).join(", ")}, but found ${JSON.stringify(M)} instead.`);return M}catch(M){return this._warningHistory[M.message]||(this._warningHistory[M.message]=!0,typeof console<"u"&&console.warn(M.message)),this._defaultValue}}}function Ss(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in qa}function dl(u,i){const l=new al(qa,oc,[],i?function(v){const b={color:Gi,string:fr,number:bt,enum:fr,boolean:yr,formatted:el,padding:br,numberArray:tl,colorArray:Fu,projectionDefinition:Nu,resolvedImage:ao,variableAnchorOffsetCollection:us};return v.type==="array"?ca(b[v.value]||pr,v.length):b[v.type]}(i):void 0),d=l.parse(u,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?Oo(new tu(d,i)):bs(l.errors)}class ho{constructor(i,l){this.kind=i,this._styleExpression=l,this.isStateDependent=i!=="constant"&&!Jl(l.expression),this.globalStateRefs=Ro(l.expression)}evaluateWithoutErrorHandling(i,l,d,v,b,S){return this._styleExpression.evaluateWithoutErrorHandling(i,l,d,v,b,S)}evaluate(i,l,d,v,b,S){return this._styleExpression.evaluate(i,l,d,v,b,S)}}class lc{constructor(i,l,d,v){this.kind=i,this.zoomStops=d,this._styleExpression=l,this.isStateDependent=i!=="camera"&&!Jl(l.expression),this.globalStateRefs=Ro(l.expression),this.interpolationType=v}evaluateWithoutErrorHandling(i,l,d,v,b,S){return this._styleExpression.evaluateWithoutErrorHandling(i,l,d,v,b,S)}evaluate(i,l,d,v,b,S){return this._styleExpression.evaluate(i,l,d,v,b,S)}interpolationFactor(i,l,d){return this.interpolationType?ki.interpolationFactor(this.interpolationType,i,l,d):0}}function Td(u,i){const l=dl(u,i);if(l.result==="error")return l;const d=l.value.expression,v=sc(d);if(!v&&!ws(i))return bs([new cn("","data expressions not supported")]);const b=cl(d,["zoom"]);if(!b&&!_d(i))return bs([new cn("","zoom expressions not supported")]);const S=fl(d);return S||b?S instanceof cn?bs([S]):S instanceof ki&&!xd(i)?bs([new cn("",'"interpolate" expressions cannot be used with this property')]):Oo(S?new lc(v?"camera":"composite",l.value,S.labels,S instanceof ki?S.interpolation:void 0):new ho(v?"constant":"source",l.value)):bs([new cn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class uc{constructor(i,l){this._parameters=i,this._specification=l,ni(this,wd(this._parameters,this._specification))}static deserialize(i){return new uc(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function fl(u){let i=null;if(u instanceof fs)i=fl(u.result);else if(u instanceof mi){for(const l of u.args)if(i=fl(l),i)break}else(u instanceof Zl||u instanceof ki)&&u.input instanceof Zi&&u.input.name==="zoom"&&(i=u);return i instanceof cn||u.eachChild(l=>{const d=fl(l);d instanceof cn?i=d:!i&&d?i=new cn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&d&&i!==d&&(i=new cn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function Ro(u,i=new Set){return u instanceof _s&&i.add(u.key),u.eachChild(l=>{Ro(l,i)}),i}function Ps(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const i of u.slice(1))if(!Ps(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const cc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function fo(u){if(u==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Ps(u)||(u=vh(u));const i=dl(u,cc);if(i.result==="error")throw new Error(i.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,d,v)=>i.value.evaluate(l,d,{},v),needGeometry:yh(u),getGlobalStateRefs:()=>Ro(i.value.expression)}}function Cd(u,i){return u<i?-1:u>i?1:0}function yh(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let i=1;i<u.length;i++)if(yh(u[i]))return!0;return!1}function vh(u){if(!u)return!0;const i=u[0];return u.length<=1?i!=="any":i==="=="?_h(u[1],u[2],"=="):i==="!="?pl(_h(u[1],u[2],"==")):i==="<"||i===">"||i==="<="||i===">="?_h(u[1],u[2],i):i==="any"?(l=u.slice(1),["any"].concat(l.map(vh))):i==="all"?["all"].concat(u.slice(1).map(vh)):i==="none"?["all"].concat(u.slice(1).map(vh).map(pl)):i==="in"?Vf(u[1],u.slice(2)):i==="!in"?pl(Vf(u[1],u.slice(2))):i==="has"?Uf(u[1]):i!=="!has"||pl(Uf(u[1]));var l}function _h(u,i,l){switch(u){case"$type":return[`filter-type-${l}`,i];case"$id":return[`filter-id-${l}`,i];default:return[`filter-${l}`,u,i]}}function Vf(u,i){if(i.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(l=>typeof l!=typeof i[0])?["filter-in-large",u,["literal",i.sort(Cd)]]:["filter-in-small",u,["literal",i]]}}function Uf(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function pl(u){return["!",u]}function Wa(u){const i=typeof u;if(i==="number"||i==="boolean"||i==="string"||u==null)return JSON.stringify(u);if(Array.isArray(u)){let v="[";for(const b of u)v+=`${Wa(b)},`;return`${v}]`}const l=Object.keys(u).sort();let d="{";for(let v=0;v<l.length;v++)d+=`${JSON.stringify(l[v])}:${Wa(u[l[v]])},`;return`${d}}`}function hc(u){let i="";for(const l of Pt)i+=`/${Wa(u[l])}`;return i}function ml(u){const i=u.value;return i?[new ft(u.key,i,"constants have been deprecated as of v8")]:[]}function jr(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function Da(u){if(Array.isArray(u))return u.map(Da);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const i={};for(const l in u)i[l]=Da(u[l]);return i}return jr(u)}function On(u){const i=u.key,l=u.value,d=u.valueSpec||{},v=u.objectElementValidators||{},b=u.style,S=u.styleSpec,M=u.validateSpec;let D=[];const L=mr(l);if(L!=="object")return[new ft(i,l,`object expected, ${L} found`)];for(const F in l){const G=F.split(".")[0],X=wr(d,G)||d["*"];let ee;if(wr(v,G))ee=v[G];else if(wr(d,G))ee=M;else if(v["*"])ee=v["*"];else{if(!d["*"]){D.push(new ft(i,l[F],`unknown property "${F}"`));continue}ee=M}D=D.concat(ee({key:(i&&`${i}.`)+F,value:l[F],valueSpec:X,style:b,styleSpec:S,object:l,objectKey:F,validateSpec:M},l))}for(const F in d)v[F]||d[F].required&&d[F].default===void 0&&l[F]===void 0&&D.push(new ft(i,l,`missing required property "${F}"`));return D}function ru(u){const i=u.value,l=u.valueSpec,d=u.style,v=u.styleSpec,b=u.key,S=u.arrayElementValidator||u.validateSpec;if(mr(i)!=="array")return[new ft(b,i,`array expected, ${mr(i)} found`)];if(l.length&&i.length!==l.length)return[new ft(b,i,`array length ${l.length} expected, length ${i.length} found`)];if(l["min-length"]&&i.length<l["min-length"])return[new ft(b,i,`array length at least ${l["min-length"]} expected, length ${i.length} found`)];let M={type:l.value,values:l.values};v.$version<7&&(M.function=l.function),mr(l.value)==="object"&&(M=l.value);let D=[];for(let L=0;L<i.length;L++)D=D.concat(S({array:i,arrayIndex:L,value:i[L],valueSpec:M,validateSpec:u.validateSpec,style:d,styleSpec:v,key:`${b}[${L}]`}));return D}function dc(u){const i=u.key,l=u.value,d=u.valueSpec;let v=mr(l);return v==="number"&&l!=l&&(v="NaN"),v!=="number"?[new ft(i,l,`number expected, ${v} found`)]:"minimum"in d&&l<d.minimum?[new ft(i,l,`${l} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&l>d.maximum?[new ft(i,l,`${l} is greater than the maximum value ${d.maximum}`)]:[]}function nu(u){const i=u.valueSpec,l=jr(u.value.type);let d,v,b,S={};const M=l!=="categorical"&&u.value.property===void 0,D=!M,L=mr(u.value.stops)==="array"&&mr(u.value.stops[0])==="array"&&mr(u.value.stops[0][0])==="object",F=On({key:u.key,value:u.value,valueSpec:u.styleSpec.function,validateSpec:u.validateSpec,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(ee){if(l==="identity")return[new ft(ee.key,ee.value,'identity function may not have a "stops" property')];let te=[];const ne=ee.value;return te=te.concat(ru({key:ee.key,value:ne,valueSpec:ee.valueSpec,validateSpec:ee.validateSpec,style:ee.style,styleSpec:ee.styleSpec,arrayElementValidator:G})),mr(ne)==="array"&&ne.length===0&&te.push(new ft(ee.key,ne,"array must have at least one stop")),te},default:function(ee){return ee.validateSpec({key:ee.key,value:ee.value,valueSpec:i,validateSpec:ee.validateSpec,style:ee.style,styleSpec:ee.styleSpec})}}});return l==="identity"&&M&&F.push(new ft(u.key,u.value,'missing required property "property"')),l==="identity"||u.value.stops||F.push(new ft(u.key,u.value,'missing required property "stops"')),l==="exponential"&&u.valueSpec.expression&&!xd(u.valueSpec)&&F.push(new ft(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(D&&!ws(u.valueSpec)?F.push(new ft(u.key,u.value,"property functions not supported")):M&&!_d(u.valueSpec)&&F.push(new ft(u.key,u.value,"zoom functions not supported"))),l!=="categorical"&&!L||u.value.property!==void 0||F.push(new ft(u.key,u.value,'"property" property is required')),F;function G(ee){let te=[];const ne=ee.value,he=ee.key;if(mr(ne)!=="array")return[new ft(he,ne,`array expected, ${mr(ne)} found`)];if(ne.length!==2)return[new ft(he,ne,`array length 2 expected, length ${ne.length} found`)];if(L){if(mr(ne[0])!=="object")return[new ft(he,ne,`object expected, ${mr(ne[0])} found`)];if(ne[0].zoom===void 0)return[new ft(he,ne,"object stop key must have zoom")];if(ne[0].value===void 0)return[new ft(he,ne,"object stop key must have value")];if(b&&b>jr(ne[0].zoom))return[new ft(he,ne[0].zoom,"stop zoom values must appear in ascending order")];jr(ne[0].zoom)!==b&&(b=jr(ne[0].zoom),v=void 0,S={}),te=te.concat(On({key:`${he}[0]`,value:ne[0],valueSpec:{zoom:{}},validateSpec:ee.validateSpec,style:ee.style,styleSpec:ee.styleSpec,objectElementValidators:{zoom:dc,value:X}}))}else te=te.concat(X({key:`${he}[0]`,value:ne[0],validateSpec:ee.validateSpec,style:ee.style,styleSpec:ee.styleSpec},ne));return Ss(Da(ne[1]))?te.concat([new ft(`${he}[1]`,ne[1],"expressions are not allowed in function stops.")]):te.concat(ee.validateSpec({key:`${he}[1]`,value:ne[1],valueSpec:i,validateSpec:ee.validateSpec,style:ee.style,styleSpec:ee.styleSpec}))}function X(ee,te){const ne=mr(ee.value),he=jr(ee.value),ge=ee.value!==null?ee.value:te;if(d){if(ne!==d)return[new ft(ee.key,ge,`${ne} stop domain type must match previous stop domain type ${d}`)]}else d=ne;if(ne!=="number"&&ne!=="string"&&ne!=="boolean")return[new ft(ee.key,ge,"stop domain value must be a number, string, or boolean")];if(ne!=="number"&&l!=="categorical"){let ke=`number expected, ${ne} found`;return ws(i)&&l===void 0&&(ke+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ft(ee.key,ge,ke)]}return l!=="categorical"||ne!=="number"||isFinite(he)&&Math.floor(he)===he?l!=="categorical"&&ne==="number"&&v!==void 0&&he<v?[new ft(ee.key,ge,"stop domain values must appear in ascending order")]:(v=he,l==="categorical"&&he in S?[new ft(ee.key,ge,"stop domain values must be unique")]:(S[he]=!0,[])):[new ft(ee.key,ge,`integer expected, found ${he}`)]}}function Oa(u){const i=(u.expressionContext==="property"?Td:dl)(Da(u.value),u.valueSpec);if(i.result==="error")return i.value.map(d=>new ft(`${u.key}${d.key}`,u.value,d.message));const l=i.value.expression||i.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!l.outputDefined())return[new ft(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!Jl(l))return[new ft(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!Jl(l))return[new ft(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!cl(l,["zoom","feature-state"]))return[new ft(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!sc(l))return[new ft(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function gl(u){const i=u.key,l=u.value,d=mr(l);return d!=="string"?[new ft(i,l,`color expected, ${d} found`)]:cr.parse(String(l))?[]:[new ft(i,l,`color expected, "${l}" found`)]}function po(u){const i=u.key,l=u.value,d=u.valueSpec,v=[];return Array.isArray(d.values)?d.values.indexOf(jr(l))===-1&&v.push(new ft(i,l,`expected one of [${d.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(d.values).indexOf(jr(l))===-1&&v.push(new ft(i,l,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(l)} found`)),v}function iu(u){return Ps(Da(u.value))?Oa(ni({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):xh(u)}function xh(u){const i=u.value,l=u.key;if(mr(i)!=="array")return[new ft(l,i,`array expected, ${mr(i)} found`)];const d=u.styleSpec;let v,b=[];if(i.length<1)return[new ft(l,i,"filter array must have at least 1 element")];switch(b=b.concat(po({key:`${l}[0]`,value:i[0],valueSpec:d.filter_operator,style:u.style,styleSpec:u.styleSpec})),jr(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&jr(i[1])==="$type"&&b.push(new ft(l,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&b.push(new ft(l,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(v=mr(i[1]),v!=="string"&&b.push(new ft(`${l}[1]`,i[1],`string expected, ${v} found`)));for(let S=2;S<i.length;S++)v=mr(i[S]),jr(i[1])==="$type"?b=b.concat(po({key:`${l}[${S}]`,value:i[S],valueSpec:d.geometry_type,style:u.style,styleSpec:u.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&b.push(new ft(`${l}[${S}]`,i[S],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let S=1;S<i.length;S++)b=b.concat(xh({key:`${l}[${S}]`,value:i[S],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":v=mr(i[1]),i.length!==2?b.push(new ft(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):v!=="string"&&b.push(new ft(`${l}[1]`,i[1],`string expected, ${v} found`))}return b}function yl(u,i){const l=u.key,d=u.validateSpec,v=u.style,b=u.styleSpec,S=u.value,M=u.objectKey,D=b[`${i}_${u.layerType}`];if(!D)return[];const L=M.match(/^(.*)-transition$/);if(i==="paint"&&L&&D[L[1]]&&D[L[1]].transition)return d({key:l,value:S,valueSpec:b.transition,style:v,styleSpec:b});const F=u.valueSpec||D[M];if(!F)return[new ft(l,S,`unknown property "${M}"`)];let G;if(mr(S)==="string"&&ws(F)&&!F.tokens&&(G=/^{([^}]+)}$/.exec(S)))return[new ft(l,S,`"${M}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(G[1])} }\`.`)];const X=[];return u.layerType==="symbol"&&(M==="text-field"&&v&&!v.glyphs&&X.push(new ft(l,S,'use of "text-field" requires a style "glyphs" property')),M==="text-font"&&hl(Da(S))&&jr(S.type)==="identity"&&X.push(new ft(l,S,'"text-font" does not support identity functions'))),X.concat(d({key:u.key,value:S,valueSpec:F,style:v,styleSpec:b,expressionContext:"property",propertyType:i,propertyKey:M}))}function da(u){return yl(u,"paint")}function Ur(u){return yl(u,"layout")}function Cr(u){let i=[];const l=u.value,d=u.key,v=u.style,b=u.styleSpec;if(mr(l)!=="object")return[new ft(d,l,`object expected, ${mr(l)} found`)];l.type||l.ref||i.push(new ft(d,l,'either "type" or "ref" is required'));let S=jr(l.type);const M=jr(l.ref);if(l.id){const D=jr(l.id);for(let L=0;L<u.arrayIndex;L++){const F=v.layers[L];jr(F.id)===D&&i.push(new ft(d,l.id,`duplicate layer id "${l.id}", previously used at line ${F.id.__line__}`))}}if("ref"in l){let D;["type","source","source-layer","filter","layout"].forEach(L=>{L in l&&i.push(new ft(d,l[L],`"${L}" is prohibited for ref layers`))}),v.layers.forEach(L=>{jr(L.id)===M&&(D=L)}),D?D.ref?i.push(new ft(d,l.ref,"ref cannot reference another ref layer")):S=jr(D.type):i.push(new ft(d,l.ref,`ref layer "${M}" not found`))}else if(S!=="background")if(l.source){const D=v.sources&&v.sources[l.source],L=D&&jr(D.type);D?L==="vector"&&S==="raster"?i.push(new ft(d,l.source,`layer "${l.id}" requires a raster source`)):L!=="raster-dem"&&S==="hillshade"||L!=="raster-dem"&&S==="color-relief"?i.push(new ft(d,l.source,`layer "${l.id}" requires a raster-dem source`)):L==="raster"&&S!=="raster"?i.push(new ft(d,l.source,`layer "${l.id}" requires a vector source`)):L!=="vector"||l["source-layer"]?L==="raster-dem"&&S!=="hillshade"&&S!=="color-relief"?i.push(new ft(d,l.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):S!=="line"||!l.paint||!l.paint["line-gradient"]||L==="geojson"&&D.lineMetrics||i.push(new ft(d,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new ft(d,l,`layer "${l.id}" must specify a "source-layer"`)):i.push(new ft(d,l.source,`source "${l.source}" not found`))}else i.push(new ft(d,l,'missing required property "source"'));return i=i.concat(On({key:d,value:l,valueSpec:b.layer,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,objectElementValidators:{"*":()=>[],type:()=>u.validateSpec({key:`${d}.type`,value:l.type,valueSpec:b.layer.type,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,object:l,objectKey:"type"}),filter:iu,layout:D=>On({layer:l,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":L=>Ur(ni({layerType:S},L))}}),paint:D=>On({layer:l,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":L=>da(ni({layerType:S},L))}})}})),i}function Hn(u){const i=u.value,l=u.key,d=mr(i);return d!=="string"?[new ft(l,i,`string expected, ${d} found`)]:[]}const Kn={promoteId:function({key:u,value:i}){if(mr(i)==="string")return Hn({key:u,value:i});{const l=[];for(const d in i)l.push(...Hn({key:`${u}.${d}`,value:i[d]}));return l}}};function Di(u){const i=u.value,l=u.key,d=u.styleSpec,v=u.style,b=u.validateSpec;if(!i.type)return[new ft(l,i,'"type" is required')];const S=jr(i.type);let M;switch(S){case"vector":case"raster":return M=On({key:l,value:i,valueSpec:d[`source_${S.replace("-","_")}`],style:u.style,styleSpec:d,objectElementValidators:Kn,validateSpec:b}),M;case"raster-dem":return M=function(D){var L;const F=(L=D.sourceName)!==null&&L!==void 0?L:"",G=D.value,X=D.styleSpec,ee=X.source_raster_dem,te=D.style;let ne=[];const he=mr(G);if(G===void 0)return ne;if(he!=="object")return ne.push(new ft("source_raster_dem",G,`object expected, ${he} found`)),ne;const ge=jr(G.encoding)==="custom",ke=["redFactor","greenFactor","blueFactor","baseShift"],xe=D.value.encoding?`"${D.value.encoding}"`:"Default";for(const J in G)!ge&&ke.includes(J)?ne.push(new ft(J,G[J],`In "${F}": "${J}" is only valid when "encoding" is set to "custom". ${xe} encoding found`)):ee[J]?ne=ne.concat(D.validateSpec({key:J,value:G[J],valueSpec:ee[J],validateSpec:D.validateSpec,style:te,styleSpec:X})):ne.push(new ft(J,G[J],`unknown property "${J}"`));return ne}({sourceName:l,value:i,style:u.style,styleSpec:d,validateSpec:b}),M;case"geojson":if(M=On({key:l,value:i,valueSpec:d.source_geojson,style:v,styleSpec:d,validateSpec:b,objectElementValidators:Kn}),i.cluster)for(const D in i.clusterProperties){const[L,F]=i.clusterProperties[D],G=typeof L=="string"?[L,["accumulated"],["get",D]]:L;M.push(...Oa({key:`${l}.${D}.map`,value:F,expressionContext:"cluster-map"})),M.push(...Oa({key:`${l}.${D}.reduce`,value:G,expressionContext:"cluster-reduce"}))}return M;case"video":return On({key:l,value:i,valueSpec:d.source_video,style:v,validateSpec:b,styleSpec:d});case"image":return On({key:l,value:i,valueSpec:d.source_image,style:v,validateSpec:b,styleSpec:d});case"canvas":return[new ft(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return po({key:`${l}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Ts(u){const i=u.value,l=u.styleSpec,d=l.light,v=u.style;let b=[];const S=mr(i);if(i===void 0)return b;if(S!=="object")return b=b.concat([new ft("light",i,`object expected, ${S} found`)]),b;for(const M in i){const D=M.match(/^(.*)-transition$/);b=b.concat(D&&d[D[1]]&&d[D[1]].transition?u.validateSpec({key:M,value:i[M],valueSpec:l.transition,validateSpec:u.validateSpec,style:v,styleSpec:l}):d[M]?u.validateSpec({key:M,value:i[M],valueSpec:d[M],validateSpec:u.validateSpec,style:v,styleSpec:l}):[new ft(M,i[M],`unknown property "${M}"`)])}return b}function Za(u){const i=u.value,l=u.styleSpec,d=l.sky,v=u.style,b=mr(i);if(i===void 0)return[];if(b!=="object")return[new ft("sky",i,`object expected, ${b} found`)];let S=[];for(const M in i)S=S.concat(d[M]?u.validateSpec({key:M,value:i[M],valueSpec:d[M],style:v,styleSpec:l}):[new ft(M,i[M],`unknown property "${M}"`)]);return S}function gi(u){const i=u.value,l=u.styleSpec,d=l.terrain,v=u.style;let b=[];const S=mr(i);if(i===void 0)return b;if(S!=="object")return b=b.concat([new ft("terrain",i,`object expected, ${S} found`)]),b;for(const M in i)b=b.concat(d[M]?u.validateSpec({key:M,value:i[M],valueSpec:d[M],validateSpec:u.validateSpec,style:v,styleSpec:l}):[new ft(M,i[M],`unknown property "${M}"`)]);return b}function vl(u){let i=[];const l=u.value,d=u.key;if(Array.isArray(l)){const v=[],b=[];for(const S in l)l[S].id&&v.includes(l[S].id)&&i.push(new ft(d,l,`all the sprites' ids must be unique, but ${l[S].id} is duplicated`)),v.push(l[S].id),l[S].url&&b.includes(l[S].url)&&i.push(new ft(d,l,`all the sprites' URLs must be unique, but ${l[S].url} is duplicated`)),b.push(l[S].url),i=i.concat(On({key:`${d}[${S}]`,value:l[S],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:u.validateSpec}));return i}return Hn({key:d,value:l})}function Ed(u){return i=u.value,i&&i.constructor===Object?[]:[new ft(u.key,u.value,`object expected, ${mr(u.value)} found`)];var i}const fc={"*":()=>[],array:ru,boolean:function(u){const i=u.value,l=u.key,d=mr(i);return d!=="boolean"?[new ft(l,i,`boolean expected, ${d} found`)]:[]},number:dc,color:gl,constants:ml,enum:po,filter:iu,function:nu,layer:Cr,object:On,source:Di,light:Ts,sky:Za,terrain:gi,projection:function(u){const i=u.value,l=u.styleSpec,d=l.projection,v=u.style,b=mr(i);if(i===void 0)return[];if(b!=="object")return[new ft("projection",i,`object expected, ${b} found`)];let S=[];for(const M in i)S=S.concat(d[M]?u.validateSpec({key:M,value:i[M],valueSpec:d[M],style:v,styleSpec:l}):[new ft(M,i[M],`unknown property "${M}"`)]);return S},projectionDefinition:function(u){const i=u.key;let l=u.value;l=l instanceof String?l.valueOf():l;const d=mr(l);return d!=="array"||function(v){return Array.isArray(v)&&v.length===3&&typeof v[0]=="string"&&typeof v[1]=="string"&&typeof v[2]=="number"}(l)||function(v){return!!["interpolate","step","literal"].includes(v[0])}(l)?["array","string"].includes(d)?[]:[new ft(i,l,`projection expected, invalid type "${d}" found`)]:[new ft(i,l,`projection expected, invalid array ${JSON.stringify(l)} found`)]},string:Hn,formatted:function(u){return Hn(u).length===0?[]:Oa(u)},resolvedImage:function(u){return Hn(u).length===0?[]:Oa(u)},padding:function(u){const i=u.key,l=u.value;if(mr(l)==="array"){if(l.length<1||l.length>4)return[new ft(i,l,`padding requires 1 to 4 values; ${l.length} values found`)];const d={type:"number"};let v=[];for(let b=0;b<l.length;b++)v=v.concat(u.validateSpec({key:`${i}[${b}]`,value:l[b],validateSpec:u.validateSpec,valueSpec:d}));return v}return dc({key:i,value:l,valueSpec:{}})},numberArray:function(u){const i=u.key,l=u.value;if(mr(l)==="array"){const d={type:"number"};if(l.length<1)return[new ft(i,l,"array length at least 1 expected, length 0 found")];let v=[];for(let b=0;b<l.length;b++)v=v.concat(u.validateSpec({key:`${i}[${b}]`,value:l[b],validateSpec:u.validateSpec,valueSpec:d}));return v}return dc({key:i,value:l,valueSpec:{}})},colorArray:function(u){const i=u.key,l=u.value;if(mr(l)==="array"){if(l.length<1)return[new ft(i,l,"array length at least 1 expected, length 0 found")];let d=[];for(let v=0;v<l.length;v++)d=d.concat(gl({key:`${i}[${v}]`,value:l[v]}));return d}return gl({key:i,value:l})},variableAnchorOffsetCollection:function(u){const i=u.key,l=u.value,d=mr(l),v=u.styleSpec;if(d!=="array"||l.length<1||l.length%2!=0)return[new ft(i,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let b=[];for(let S=0;S<l.length;S+=2)b=b.concat(po({key:`${i}[${S}]`,value:l[S],valueSpec:v.layout_symbol["text-anchor"]})),b=b.concat(ru({key:`${i}[${S+1}]`,value:l[S+1],valueSpec:{length:2,value:"number"},validateSpec:u.validateSpec,style:u.style,styleSpec:v}));return b},sprite:vl,state:Ed};function _l(u){const i=u.value,l=u.valueSpec,d=u.styleSpec;return u.validateSpec=_l,l.expression&&hl(jr(i))?nu(u):l.expression&&Ss(Da(i))?Oa(u):l.type&&fc[l.type]?fc[l.type](u):On(ni({},u,{valueSpec:l.type?d[l.type]:l}))}function xl(u){const i=u.value,l=u.key,d=Hn(u);return d.length||(i.indexOf("{fontstack}")===-1&&d.push(new ft(l,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&d.push(new ft(l,i,'"glyphs" url must include a "{range}" token'))),d}function Rn(u,i=Me){let l=[];return l=l.concat(_l({key:"",value:u,valueSpec:i.$root,styleSpec:i,style:u,validateSpec:_l,objectElementValidators:{glyphs:xl,"*":()=>[]}})),u.constants&&(l=l.concat(ml({key:"constants",value:u.constants}))),bh(l)}function Hi(u){return function(i){return u({...i,validateSpec:_l})}}function bh(u){return[].concat(u).sort((i,l)=>i.line-l.line)}function yi(u){return function(...i){return bh(u.apply(this,i))}}Rn.source=yi(Hi(Di)),Rn.sprite=yi(Hi(vl)),Rn.glyphs=yi(Hi(xl)),Rn.light=yi(Hi(Ts)),Rn.sky=yi(Hi(Za)),Rn.terrain=yi(Hi(gi)),Rn.state=yi(Hi(Ed)),Rn.layer=yi(Hi(Cr)),Rn.filter=yi(Hi(iu)),Rn.paintProperty=yi(Hi(da)),Rn.layoutProperty=yi(Hi(Ur));const au=Rn,Cs=au.light,zo=au.sky,ou=au.paintProperty,su=au.layoutProperty;function Es(u,i){let l=!1;if(i&&i.length)for(const d of i)u.fire(new Be(new Error(d.message))),l=!0;return l}class si{constructor(i,l,d){const v=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const S=new Int32Array(this.arrayBuffer);i=S[0],this.d=(l=S[1])+2*(d=S[2]);for(let D=0;D<this.d*this.d;D++){const L=S[3+D],F=S[3+D+1];v.push(L===F?null:S.subarray(L,F))}const M=S[3+v.length+1];this.keys=S.subarray(S[3+v.length],M),this.bboxes=S.subarray(M),this.insert=this._insertReadonly}else{this.d=l+2*d;for(let S=0;S<this.d*this.d;S++)v.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=i,this.padding=d,this.scale=l/i,this.uid=0;const b=d/l*i;this.min=-b,this.max=i+b}insert(i,l,d,v,b){this._forEachCell(l,d,v,b,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(b)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,l,d,v,b,S){this.cells[b].push(S)}query(i,l,d,v,b){const S=this.min,M=this.max;if(i<=S&&l<=S&&M<=d&&M<=v&&!b)return Array.prototype.slice.call(this.keys);{const D=[];return this._forEachCell(i,l,d,v,this._queryCell,D,{},b),D}}_queryCell(i,l,d,v,b,S,M,D){const L=this.cells[b];if(L!==null){const F=this.keys,G=this.bboxes;for(let X=0;X<L.length;X++){const ee=L[X];if(M[ee]===void 0){const te=4*ee;(D?D(G[te+0],G[te+1],G[te+2],G[te+3]):i<=G[te+2]&&l<=G[te+3]&&d>=G[te+0]&&v>=G[te+1])?(M[ee]=!0,S.push(F[ee])):M[ee]=!1}}}}_forEachCell(i,l,d,v,b,S,M,D){const L=this._convertToCellCoord(i),F=this._convertToCellCoord(l),G=this._convertToCellCoord(d),X=this._convertToCellCoord(v);for(let ee=L;ee<=G;ee++)for(let te=F;te<=X;te++){const ne=this.d*te+ee;if((!D||D(this._convertFromCellCoord(ee),this._convertFromCellCoord(te),this._convertFromCellCoord(ee+1),this._convertFromCellCoord(te+1)))&&b.call(this,i,l,d,v,ne,S,M,D))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,l=3+this.cells.length+1+1;let d=0;for(let S=0;S<this.cells.length;S++)d+=this.cells[S].length;const v=new Int32Array(l+d+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let b=l;for(let S=0;S<i.length;S++){const M=i[S];v[3+S]=b,v.set(M,b),b+=M.length}return v[3+i.length]=b,v.set(this.keys,b),b+=this.keys.length,v[3+i.length+1]=b,v.set(this.bboxes,b),b+=this.bboxes.length,v.buffer}static serialize(i,l){const d=i.toArrayBuffer();return l&&l.push(d),{buffer:d}}static deserialize(i){return new si(i.buffer)}}const En={};function Tt(u,i,l={}){if(En[u])throw new Error(`${u} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:u,writeable:!1}),En[u]={klass:i,omit:l.omit||[],shallow:l.shallow||[]}}Tt("Object",Object),Tt("Set",Set),Tt("TransferableGridIndex",si),Tt("Color",cr),Tt("Error",Error),Tt("AJAXError",_e),Tt("ResolvedImage",Ai),Tt("StylePropertyFunction",uc),Tt("StyleExpression",tu,{omit:["_evaluator"]}),Tt("ZoomDependentExpression",lc),Tt("ZoomConstantExpression",ho),Tt("CompoundExpression",Zi,{omit:["_evaluate"]});for(const u in qa)qa[u]._classRegistryKey||Tt(`Expression_${u}`,qa[u]);function Ha(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function fa(u){return u.$name||u.constructor._classRegistryKey}function Lo(u){return!function(i){if(i===null||typeof i!="object")return!1;const l=fa(i);return!(!l||l==="Object")}(u)&&(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||u instanceof Error||Ha(u)||oa(u)||ArrayBuffer.isView(u)||u instanceof ImageData)}function lu(u,i){if(Lo(u))return(Ha(u)||oa(u))&&i&&i.push(u),ArrayBuffer.isView(u)&&i&&i.push(u.buffer),u instanceof ImageData&&i&&i.push(u.data.buffer),u;if(Array.isArray(u)){const b=[];for(const S of u)b.push(lu(S,i));return b}if(typeof u!="object")throw new Error("can't serialize object of type "+typeof u);const l=fa(u);if(!l)throw new Error(`can't serialize object of unregistered class ${u.constructor.name}`);if(!En[l])throw new Error(`${l} is not registered.`);const{klass:d}=En[l],v=d.serialize?d.serialize(u,i):{};if(d.serialize){if(i&&v===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const b in u){if(!u.hasOwnProperty(b)||En[l].omit.indexOf(b)>=0)continue;const S=u[b];v[b]=En[l].shallow.indexOf(b)>=0?S:lu(S,i)}u instanceof Error&&(v.message=u.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(v.$name=l),v}function Ms(u){if(Lo(u))return u;if(Array.isArray(u))return u.map(Ms);if(typeof u!="object")throw new Error("can't deserialize object of type "+typeof u);const i=fa(u)||"Object";if(!En[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:l}=En[i];if(!l)throw new Error(`can't deserialize unregistered class ${i}`);if(l.deserialize)return l.deserialize(u);const d=Object.create(l.prototype);for(const v of Object.keys(u)){if(v==="$name")continue;const b=u[v];d[v]=En[i].shallow.indexOf(v)>=0?b:Ms(b)}return d}class pc{constructor(){this.first=!0}update(i,l){const d=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=l),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=d,!0))}}const rr={"Latin-1 Supplement":u=>u>=128&&u<=255,"Hangul Jamo":u=>u>=4352&&u<=4607,Khmer:u=>u>=6016&&u<=6143,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Hiragana:u=>u>=12352&&u<=12447,Katakana:u=>u>=12448&&u<=12543,Kanbun:u=>u>=12688&&u<=12703,"CJK Strokes":u=>u>=12736&&u<=12783,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"CJK Unified Ideographs":u=>u>=19968&&u<=40959,"Hangul Syllables":u=>u>=44032&&u<=55215,"Private Use Area":u=>u>=57344&&u<=63743,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519};function Oi(u){for(const i of u)if(uu(i.charCodeAt(0)))return!0;return!1}function on(u){for(const i of u)if(!qf(i.charCodeAt(0)))return!1;return!0}function Ki(u){const i=u.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch{return null}}).filter(l=>l);return new RegExp(i.join("|"),"u")}const Gf=Ki(["Arab","Dupl","Mong","Ougr","Syrc"]);function qf(u){return!Gf.test(String.fromCodePoint(u))}const mc=Ki(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function uu(u){return!(u!==746&&u!==747&&(u<4352||!(rr["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||rr["CJK Compatibility"](u)||rr["CJK Strokes"](u)||!(!rr["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||rr["Enclosed CJK Letters and Months"](u)||rr["Ideographic Description Characters"](u)||rr.Kanbun(u)||rr.Katakana(u)&&u!==12540||!(!rr["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!rr["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||rr["Vertical Forms"](u)||rr["Yijing Hexagram Symbols"](u)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(u))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(u))||mc.test(String.fromCodePoint(u)))))}function wh(u){return!(uu(u)||function(i){return!!(rr["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||rr["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||rr["Letterlike Symbols"](i)||rr["Number Forms"](i)||rr["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||rr["Control Pictures"](i)&&i!==9251||rr["Optical Character Recognition"](i)||rr["Enclosed Alphanumerics"](i)||rr["Geometric Shapes"](i)||rr["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||rr["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||rr["CJK Symbols and Punctuation"](i)||rr.Katakana(i)||rr["Private Use Area"](i)||rr["CJK Compatibility Forms"](i)||rr["Small Form Variants"](i)||rr["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(u))}const gc=Ki(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function cu(u){return gc.test(String.fromCodePoint(u))}function hu(u,i){return!(!i&&cu(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||rr.Khmer(u))}function yc(u){for(const i of u)if(cu(i.charCodeAt(0)))return!0;return!1}const As=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(u){this.pluginStatus=u.pluginStatus,this.pluginURL=u.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(u){if(As.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=u.applyArabicShaping,this.processBidirectionalText=u.processBidirectionalText,this.processStyledBidirectionalText=u.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(u,i){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(u.pluginStatus!=="loading")return this.setState(u),u;const l=u.pluginURL,d=new Promise(b=>{this.loadScriptResolve=b});i(l);const v=new Promise(b=>setTimeout(()=>b(),this.TIMEOUT));if(yield Promise.race([d,v]),this.isParsed()){const b={pluginStatus:"loaded",pluginURL:l};return this.setState(b),b}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${l}`)})}};class Hr{constructor(i,l){this.zoom=i,l?(this.now=l.now||0,this.fadeDuration=l.fadeDuration||0,this.zoomHistory=l.zoomHistory||new pc,this.transition=l.transition||{},this.globalState=l.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new pc,this.transition={},this.globalState={})}isSupportedScript(i){return function(l,d){for(const v of l)if(!hu(v.charCodeAt(0),d))return!1;return!0}(i,As.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,l=i-Math.floor(i),d=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*l}}}class Is{constructor(i,l){this.property=i,this.value=l,this.expression=function(d,v){if(hl(d))return new uc(d,v);if(Ss(d)){const b=Td(d,v);if(b.result==="error")throw new Error(b.value.map(S=>`${S.key}: ${S.message}`).join(", "));return b.value}{let b=d;return v.type==="color"&&typeof d=="string"?b=cr.parse(d):v.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?v.type!=="numberArray"||typeof d!="number"&&!Array.isArray(d)?v.type!=="colorArray"||typeof d!="string"&&!Array.isArray(d)?v.type==="variableAnchorOffsetCollection"&&Array.isArray(d)?b=Sr.parse(d):v.type==="projectionDefinition"&&typeof d=="string"&&(b=hr.parse(d)):b=vn.parse(d):b=ai.parse(d):b=Dn.parse(d),{globalStateRefs:new Set,kind:"constant",evaluate:()=>b}}}(l===void 0?i.specification.default:l,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(i,l,d){return this.property.possiblyEvaluate(this,i,l,d)}}class vc{constructor(i){this.property=i,this.value=new Is(i,void 0)}transitioned(i,l){return new bl(this.property,this.value,l,sr({},i.transition,this.transition),i.now)}untransitioned(){return new bl(this.property,this.value,null,{},0)}}class Sh{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return Qr(this._values[i].value.value)}setValue(i,l){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new vc(this._values[i].property)),this._values[i].value=new Is(this._values[i].property,l===null?void 0:Qr(l))}getTransition(i){return Qr(this._values[i].transition)}setTransition(i,l){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new vc(this._values[i].property)),this._values[i].transition=Qr(l)||void 0}serialize(){const i={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(i[l]=d);const v=this.getTransition(l);v!==void 0&&(i[`${l}-transition`]=v)}return i}transitioned(i,l){const d=new Md(this._properties);for(const v of Object.keys(this._values))d._values[v]=this._values[v].transitioned(i,l._values[v]);return d}untransitioned(){const i=new Md(this._properties);for(const l of Object.keys(this._values))i._values[l]=this._values[l].untransitioned();return i}}class bl{constructor(i,l,d,v,b){this.property=i,this.value=l,this.begin=b+v.delay||0,this.end=this.begin+v.duration||0,i.specification.transition&&(v.delay||v.duration)&&(this.prior=d)}possiblyEvaluate(i,l,d){const v=i.now||0,b=this.value.possiblyEvaluate(i,l,d),S=this.prior;if(S){if(v>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(v<this.begin)return S.possiblyEvaluate(i,l,d);{const M=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(S.possiblyEvaluate(i,l,d),b,Pr(M))}}return b}}class Md{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,l,d){const v=new jo(this._properties);for(const b of Object.keys(this._values))v._values[b]=this._values[b].possiblyEvaluate(i,l,d);return v}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class Ph{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}hasValue(i){return this._values[i].value!==void 0}getValue(i){return Qr(this._values[i].value)}setValue(i,l){this._values[i]=new Is(this._values[i].property,l===null?void 0:Qr(l))}serialize(){const i={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(i[l]=d)}return i}possiblyEvaluate(i,l,d){const v=new jo(this._properties);for(const b of Object.keys(this._values))v._values[b]=this._values[b].possiblyEvaluate(i,l,d);return v}}class pa{constructor(i,l,d){this.property=i,this.value=l,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,l,d,v){return this.property.evaluate(this.value,this.parameters,i,l,d,v)}}class jo{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Dt{constructor(i){this.specification=i}possiblyEvaluate(i,l){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(l)}interpolate(i,l,d){const v=ha[this.specification.type];return v?v(i,l,d):i}}class Gt{constructor(i,l){this.specification=i,this.overrides=l}possiblyEvaluate(i,l,d,v){return new pa(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(l,null,{},d,v)}:i.expression,l)}interpolate(i,l,d){if(i.value.kind!=="constant"||l.value.kind!=="constant")return i;if(i.value.value===void 0||l.value.value===void 0)return new pa(this,{kind:"constant",value:void 0},i.parameters);const v=ha[this.specification.type];if(v){const b=v(i.value.value,l.value.value,d);return new pa(this,{kind:"constant",value:b},i.parameters)}return i}evaluate(i,l,d,v,b,S){return i.kind==="constant"?i.value:i.evaluate(l,d,v,b,S)}}class du extends Gt{possiblyEvaluate(i,l,d,v){if(i.value===void 0)return new pa(this,{kind:"constant",value:void 0},l);if(i.expression.kind==="constant"){const b=i.expression.evaluate(l,null,{},d,v),S=i.property.specification.type==="resolvedImage"&&typeof b!="string"?b.name:b,M=this._calculate(S,S,S,l);return new pa(this,{kind:"constant",value:M},l)}if(i.expression.kind==="camera"){const b=this._calculate(i.expression.evaluate({zoom:l.zoom-1}),i.expression.evaluate({zoom:l.zoom}),i.expression.evaluate({zoom:l.zoom+1}),l);return new pa(this,{kind:"constant",value:b},l)}return new pa(this,i.expression,l)}evaluate(i,l,d,v,b,S){if(i.kind==="source"){const M=i.evaluate(l,d,v,b,S);return this._calculate(M,M,M,l)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(l.zoom)-1},d,v),i.evaluate({zoom:Math.floor(l.zoom)},d,v),i.evaluate({zoom:Math.floor(l.zoom)+1},d,v),l):i.value}_calculate(i,l,d,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:d,to:l}}interpolate(i){return i}}class _c{constructor(i){this.specification=i}possiblyEvaluate(i,l,d,v){if(i.value!==void 0){if(i.expression.kind==="constant"){const b=i.expression.evaluate(l,null,{},d,v);return this._calculate(b,b,b,l)}return this._calculate(i.expression.evaluate(new Hr(Math.floor(l.zoom-1),l)),i.expression.evaluate(new Hr(Math.floor(l.zoom),l)),i.expression.evaluate(new Hr(Math.floor(l.zoom+1),l)),l)}}_calculate(i,l,d,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:d,to:l}}interpolate(i){return i}}class mo{constructor(i){this.specification=i}possiblyEvaluate(i,l,d,v){return!!i.expression.evaluate(l,null,{},d,v)}interpolate(){return!1}}class tn{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in i){const d=i[l];d.specification.overridable&&this.overridableProperties.push(l);const v=this.defaultPropertyValues[l]=new Is(d,void 0),b=this.defaultTransitionablePropertyValues[l]=new vc(d);this.defaultTransitioningPropertyValues[l]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=v.possiblyEvaluate({})}}}Tt("DataDrivenProperty",Gt),Tt("DataConstantProperty",Dt),Tt("CrossFadedDataDrivenProperty",du),Tt("CrossFadedProperty",_c),Tt("ColorRampProperty",mo);const ks="-transition";class $n extends nt{constructor(i,l){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter,this._featureFilter=fo(i.filter)),l.layout&&(this._unevaluatedLayout=new Ph(l.layout)),l.paint)){this._transitionablePaint=new Sh(l.paint);for(const d in i.paint)this.setPaintProperty(d,i.paint[d],{validate:!1});for(const d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new jo(l.paint)}}setFilter(i){this.filter=i,this._featureFilter=fo(i)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}getLayoutAffectingGlobalStateRefs(){const i=new Set;if(this._unevaluatedLayout)for(const l in this._unevaluatedLayout._values){const d=this._unevaluatedLayout._values[l];for(const v of d.getGlobalStateRefs())i.add(v)}for(const l of this._featureFilter.getGlobalStateRefs())i.add(l);return i}setLayoutProperty(i,l,d={}){l!=null&&this._validate(su,`layers.${this.id}.layout.${i}`,i,l,d)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)}getPaintProperty(i){return i.endsWith(ks)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,l,d={}){if(l!=null&&this._validate(ou,`layers.${this.id}.paint.${i}`,i,l,d))return!1;if(i.endsWith(ks))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;{const v=this._transitionablePaint._values[i],b=v.property.specification["property-type"]==="cross-faded-data-driven",S=v.value.isDataDriven(),M=v.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);const D=this._transitionablePaint._values[i].value;return D.isDataDriven()||S||b||this._handleOverridablePaintPropertyUpdate(i,M,D)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,l,d){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,l){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),Tr(i,(l,d)=>!(l===void 0||d==="layout"&&!Object.keys(l).length||d==="paint"&&!Object.keys(l).length))}_validate(i,l,d,v,b={}){return(!b||b.validate!==!1)&&Es(this,i.call(au,{key:l,layerType:this.type,objectKey:d,value:v,styleSpec:Me,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const l=this.paint.get(i);if(l instanceof pa&&ws(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const Ad={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ri{constructor(i,l){this._structArray=i,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Br{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,l){return i._trim(),l&&(i.isTransferred=!0,l.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const l=Object.create(this.prototype);return l.arrayBuffer=i.arrayBuffer,l.length=i.length,l.capacity=i.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function sn(u,i=1){let l=0,d=0;return{members:u.map(v=>{const b=Ad[v.type].BYTES_PER_ELEMENT,S=l=Id(l,Math.max(i,b)),M=v.components||1;return d=Math.max(d,b),l+=b*M,{name:v.name,type:v.type,components:M,offset:S}}),size:Id(l,Math.max(d,i)),alignment:i}}function Id(u,i){return Math.ceil(u/i)*i}class vi extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l){const d=this.length;return this.resize(d+1),this.emplace(d,i,l)}emplace(i,l,d){const v=2*i;return this.int16[v+0]=l,this.int16[v+1]=d,i}}vi.prototype.bytesPerElement=4,Tt("StructArrayLayout2i4",vi);class zi extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,d)}emplace(i,l,d,v){const b=3*i;return this.int16[b+0]=l,this.int16[b+1]=d,this.int16[b+2]=v,i}}zi.prototype.bytesPerElement=6,Tt("StructArrayLayout3i6",zi);class fu extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d,v){const b=this.length;return this.resize(b+1),this.emplace(b,i,l,d,v)}emplace(i,l,d,v,b){const S=4*i;return this.int16[S+0]=l,this.int16[S+1]=d,this.int16[S+2]=v,this.int16[S+3]=b,i}}fu.prototype.bytesPerElement=8,Tt("StructArrayLayout4i8",fu);class xc extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d,v,b,S){const M=this.length;return this.resize(M+1),this.emplace(M,i,l,d,v,b,S)}emplace(i,l,d,v,b,S,M){const D=6*i;return this.int16[D+0]=l,this.int16[D+1]=d,this.int16[D+2]=v,this.int16[D+3]=b,this.int16[D+4]=S,this.int16[D+5]=M,i}}xc.prototype.bytesPerElement=12,Tt("StructArrayLayout2i4i12",xc);class go extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d,v,b,S){const M=this.length;return this.resize(M+1),this.emplace(M,i,l,d,v,b,S)}emplace(i,l,d,v,b,S,M){const D=4*i,L=8*i;return this.int16[D+0]=l,this.int16[D+1]=d,this.uint8[L+4]=v,this.uint8[L+5]=b,this.uint8[L+6]=S,this.uint8[L+7]=M,i}}go.prototype.bytesPerElement=8,Tt("StructArrayLayout2i4ub8",go);class pu extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l){const d=this.length;return this.resize(d+1),this.emplace(d,i,l)}emplace(i,l,d){const v=2*i;return this.float32[v+0]=l,this.float32[v+1]=d,i}}pu.prototype.bytesPerElement=8,Tt("StructArrayLayout2f8",pu);class wl extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d,v,b,S,M,D,L,F){const G=this.length;return this.resize(G+1),this.emplace(G,i,l,d,v,b,S,M,D,L,F)}emplace(i,l,d,v,b,S,M,D,L,F,G){const X=10*i;return this.uint16[X+0]=l,this.uint16[X+1]=d,this.uint16[X+2]=v,this.uint16[X+3]=b,this.uint16[X+4]=S,this.uint16[X+5]=M,this.uint16[X+6]=D,this.uint16[X+7]=L,this.uint16[X+8]=F,this.uint16[X+9]=G,i}}wl.prototype.bytesPerElement=20,Tt("StructArrayLayout10ui20",wl);class ma extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d,v,b,S,M,D,L,F,G,X){const ee=this.length;return this.resize(ee+1),this.emplace(ee,i,l,d,v,b,S,M,D,L,F,G,X)}emplace(i,l,d,v,b,S,M,D,L,F,G,X,ee){const te=12*i;return this.int16[te+0]=l,this.int16[te+1]=d,this.int16[te+2]=v,this.int16[te+3]=b,this.uint16[te+4]=S,this.uint16[te+5]=M,this.uint16[te+6]=D,this.uint16[te+7]=L,this.int16[te+8]=F,this.int16[te+9]=G,this.int16[te+10]=X,this.int16[te+11]=ee,i}}ma.prototype.bytesPerElement=24,Tt("StructArrayLayout4i4ui4i24",ma);class Sl extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,d)}emplace(i,l,d,v){const b=3*i;return this.float32[b+0]=l,this.float32[b+1]=d,this.float32[b+2]=v,i}}Sl.prototype.bytesPerElement=12,Tt("StructArrayLayout3f12",Sl);class _ extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint32[1*i+0]=l,i}}_.prototype.bytesPerElement=4,Tt("StructArrayLayout1ul4",_);class r extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d,v,b,S,M,D,L){const F=this.length;return this.resize(F+1),this.emplace(F,i,l,d,v,b,S,M,D,L)}emplace(i,l,d,v,b,S,M,D,L,F){const G=10*i,X=5*i;return this.int16[G+0]=l,this.int16[G+1]=d,this.int16[G+2]=v,this.int16[G+3]=b,this.int16[G+4]=S,this.int16[G+5]=M,this.uint32[X+3]=D,this.uint16[G+8]=L,this.uint16[G+9]=F,i}}r.prototype.bytesPerElement=20,Tt("StructArrayLayout6i1ul2ui20",r);class s extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d,v,b,S){const M=this.length;return this.resize(M+1),this.emplace(M,i,l,d,v,b,S)}emplace(i,l,d,v,b,S,M){const D=6*i;return this.int16[D+0]=l,this.int16[D+1]=d,this.int16[D+2]=v,this.int16[D+3]=b,this.int16[D+4]=S,this.int16[D+5]=M,i}}s.prototype.bytesPerElement=12,Tt("StructArrayLayout2i2i2i12",s);class f extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d,v,b){const S=this.length;return this.resize(S+1),this.emplace(S,i,l,d,v,b)}emplace(i,l,d,v,b,S){const M=4*i,D=8*i;return this.float32[M+0]=l,this.float32[M+1]=d,this.float32[M+2]=v,this.int16[D+6]=b,this.int16[D+7]=S,i}}f.prototype.bytesPerElement=16,Tt("StructArrayLayout2f1f2i16",f);class y extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d,v,b,S){const M=this.length;return this.resize(M+1),this.emplace(M,i,l,d,v,b,S)}emplace(i,l,d,v,b,S,M){const D=16*i,L=4*i,F=8*i;return this.uint8[D+0]=l,this.uint8[D+1]=d,this.float32[L+1]=v,this.float32[L+2]=b,this.int16[F+6]=S,this.int16[F+7]=M,i}}y.prototype.bytesPerElement=16,Tt("StructArrayLayout2ub2f2i16",y);class x extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,d)}emplace(i,l,d,v){const b=3*i;return this.uint16[b+0]=l,this.uint16[b+1]=d,this.uint16[b+2]=v,i}}x.prototype.bytesPerElement=6,Tt("StructArrayLayout3ui6",x);class T extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,v,b,S,M,D,L,F,G,X,ee,te,ne,he,ge){const ke=this.length;return this.resize(ke+1),this.emplace(ke,i,l,d,v,b,S,M,D,L,F,G,X,ee,te,ne,he,ge)}emplace(i,l,d,v,b,S,M,D,L,F,G,X,ee,te,ne,he,ge,ke){const xe=24*i,J=12*i,ce=48*i;return this.int16[xe+0]=l,this.int16[xe+1]=d,this.uint16[xe+2]=v,this.uint16[xe+3]=b,this.uint32[J+2]=S,this.uint32[J+3]=M,this.uint32[J+4]=D,this.uint16[xe+10]=L,this.uint16[xe+11]=F,this.uint16[xe+12]=G,this.float32[J+7]=X,this.float32[J+8]=ee,this.uint8[ce+36]=te,this.uint8[ce+37]=ne,this.uint8[ce+38]=he,this.uint32[J+10]=ge,this.int16[xe+22]=ke,i}}T.prototype.bytesPerElement=48,Tt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",T);class k extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,v,b,S,M,D,L,F,G,X,ee,te,ne,he,ge,ke,xe,J,ce,Se,We,at,Ye,tt,ct,ot){const pt=this.length;return this.resize(pt+1),this.emplace(pt,i,l,d,v,b,S,M,D,L,F,G,X,ee,te,ne,he,ge,ke,xe,J,ce,Se,We,at,Ye,tt,ct,ot)}emplace(i,l,d,v,b,S,M,D,L,F,G,X,ee,te,ne,he,ge,ke,xe,J,ce,Se,We,at,Ye,tt,ct,ot,pt){const rt=32*i,Rt=16*i;return this.int16[rt+0]=l,this.int16[rt+1]=d,this.int16[rt+2]=v,this.int16[rt+3]=b,this.int16[rt+4]=S,this.int16[rt+5]=M,this.int16[rt+6]=D,this.int16[rt+7]=L,this.uint16[rt+8]=F,this.uint16[rt+9]=G,this.uint16[rt+10]=X,this.uint16[rt+11]=ee,this.uint16[rt+12]=te,this.uint16[rt+13]=ne,this.uint16[rt+14]=he,this.uint16[rt+15]=ge,this.uint16[rt+16]=ke,this.uint16[rt+17]=xe,this.uint16[rt+18]=J,this.uint16[rt+19]=ce,this.uint16[rt+20]=Se,this.uint16[rt+21]=We,this.uint16[rt+22]=at,this.uint32[Rt+12]=Ye,this.float32[Rt+13]=tt,this.float32[Rt+14]=ct,this.uint16[rt+30]=ot,this.uint16[rt+31]=pt,i}}k.prototype.bytesPerElement=64,Tt("StructArrayLayout8i15ui1ul2f2ui64",k);class O extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.float32[1*i+0]=l,i}}O.prototype.bytesPerElement=4,Tt("StructArrayLayout1f4",O);class N extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,d)}emplace(i,l,d,v){const b=3*i;return this.uint16[6*i+0]=l,this.float32[b+1]=d,this.float32[b+2]=v,i}}N.prototype.bytesPerElement=12,Tt("StructArrayLayout1ui2f12",N);class $ extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,d)}emplace(i,l,d,v){const b=4*i;return this.uint32[2*i+0]=l,this.uint16[b+2]=d,this.uint16[b+3]=v,i}}$.prototype.bytesPerElement=8,Tt("StructArrayLayout1ul2ui8",$);class W extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l){const d=this.length;return this.resize(d+1),this.emplace(d,i,l)}emplace(i,l,d){const v=2*i;return this.uint16[v+0]=l,this.uint16[v+1]=d,i}}W.prototype.bytesPerElement=4,Tt("StructArrayLayout2ui4",W);class q extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint16[1*i+0]=l,i}}q.prototype.bytesPerElement=2,Tt("StructArrayLayout1ui2",q);class K extends Br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,v){const b=this.length;return this.resize(b+1),this.emplace(b,i,l,d,v)}emplace(i,l,d,v,b){const S=4*i;return this.float32[S+0]=l,this.float32[S+1]=d,this.float32[S+2]=v,this.float32[S+3]=b,i}}K.prototype.bytesPerElement=16,Tt("StructArrayLayout4f16",K);class re extends Ri{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new B(this.anchorPointX,this.anchorPointY)}}re.prototype.size=20;class ue extends r{get(i){return new re(this,i)}}Tt("CollisionBoxArray",ue);class de extends Ri{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}de.prototype.size=48;class pe extends T{get(i){return new de(this,i)}}Tt("PlacedSymbolArray",pe);class me extends Ri{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}me.prototype.size=64;class we extends k{get(i){return new me(this,i)}}Tt("SymbolInstanceArray",we);class ye extends O{getoffsetX(i){return this.float32[1*i+0]}}Tt("GlyphOffsetArray",ye);class Te extends zi{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}Tt("SymbolLineVertexArray",Te);class Ee extends Ri{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ee.prototype.size=12;class ve extends N{get(i){return new Ee(this,i)}}Tt("TextAnchorOffsetArray",ve);class De extends Ri{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}De.prototype.size=8;class Ue extends ${get(i){return new De(this,i)}}Tt("FeatureIndexArray",Ue);class Ve extends vi{}class Ge extends vi{}class He extends vi{}class _t extends xc{}class gt extends go{}class it extends pu{}class Ot extends wl{}class dr extends ma{}class Or extends Sl{}class ln extends _{}class Gr extends s{}class Xr extends y{}class Kr extends x{}class Nr extends W{}const $r=sn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Xn}=$r;class Er{constructor(i=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=i}prepareSegment(i,l,d,v){const b=this.segments[this.segments.length-1];return i>Er.MAX_VERTEX_ARRAY_LENGTH&&Jr(`Max vertices per segment is ${Er.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Er.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!b||b.vertexLength+i>Er.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==v?this.createNewSegment(l,d,v):b}createNewSegment(i,l,d){const v={vertexOffset:i.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0,vaos:{}};return d!==void 0&&(v.sortKey=d),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(v),v}getOrCreateLatestSegment(i,l,d){return this.prepareSegment(0,i,l,d)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const i of this.segments)for(const l in i.vaos)i.vaos[l].destroy()}static simpleSegment(i,l,d,v){return new Er([{vertexOffset:i,primitiveOffset:l,vertexLength:d,primitiveLength:v,vaos:{},sortKey:0}])}}function Vn(u,i){return 256*(u=lt(Math.floor(u),0,255))+lt(Math.floor(i),0,255)}Er.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Tt("SegmentVector",Er);const Yn=sn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var No,Fo,yo,Ka={exports:{}},mu={exports:{}},gu={exports:{}},yu=function(){if(yo)return Ka.exports;yo=1;var u=(No||(No=1,mu.exports=function(l,d){var v,b,S,M,D,L,F,G;for(b=l.length-(v=3&l.length),S=d,D=3432918353,L=461845907,G=0;G<b;)F=255&l.charCodeAt(G)|(255&l.charCodeAt(++G))<<8|(255&l.charCodeAt(++G))<<16|(255&l.charCodeAt(++G))<<24,++G,S=27492+(65535&(M=5*(65535&(S=(S^=F=(65535&(F=(F=(65535&F)*D+(((F>>>16)*D&65535)<<16)&4294967295)<<15|F>>>17))*L+(((F>>>16)*L&65535)<<16)&4294967295)<<13|S>>>19))+((5*(S>>>16)&65535)<<16)&4294967295))+((58964+(M>>>16)&65535)<<16);switch(F=0,v){case 3:F^=(255&l.charCodeAt(G+2))<<16;case 2:F^=(255&l.charCodeAt(G+1))<<8;case 1:S^=F=(65535&(F=(F=(65535&(F^=255&l.charCodeAt(G)))*D+(((F>>>16)*D&65535)<<16)&4294967295)<<15|F>>>17))*L+(((F>>>16)*L&65535)<<16)&4294967295}return S^=l.length,S=2246822507*(65535&(S^=S>>>16))+((2246822507*(S>>>16)&65535)<<16)&4294967295,S=3266489909*(65535&(S^=S>>>13))+((3266489909*(S>>>16)&65535)<<16)&4294967295,(S^=S>>>16)>>>0}),mu.exports),i=(Fo||(Fo=1,gu.exports=function(l,d){for(var v,b=l.length,S=d^b,M=0;b>=4;)v=1540483477*(65535&(v=255&l.charCodeAt(M)|(255&l.charCodeAt(++M))<<8|(255&l.charCodeAt(++M))<<16|(255&l.charCodeAt(++M))<<24))+((1540483477*(v>>>16)&65535)<<16),S=1540483477*(65535&S)+((1540483477*(S>>>16)&65535)<<16)^(v=1540483477*(65535&(v^=v>>>24))+((1540483477*(v>>>16)&65535)<<16)),b-=4,++M;switch(b){case 3:S^=(255&l.charCodeAt(M+2))<<16;case 2:S^=(255&l.charCodeAt(M+1))<<8;case 1:S=1540483477*(65535&(S^=255&l.charCodeAt(M)))+((1540483477*(S>>>16)&65535)<<16)}return S=1540483477*(65535&(S^=S>>>13))+((1540483477*(S>>>16)&65535)<<16),(S^=S>>>15)>>>0}),gu.exports);return Ka.exports=u,Ka.exports.murmur3=u,Ka.exports.murmur2=i,Ka.exports}(),Li=P(yu);class Xa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,l,d,v){this.ids.push(Ds(i)),this.positions.push(l,d,v)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=Ds(i);let d=0,v=this.ids.length-1;for(;d<v;){const S=d+v>>1;this.ids[S]>=l?v=S:d=S+1}const b=[];for(;this.ids[d]===l;)b.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return b}static serialize(i,l){const d=new Float64Array(i.ids),v=new Uint32Array(i.positions);return Os(d,v,0,d.length-1),l&&l.push(d.buffer,v.buffer),{ids:d,positions:v}}static deserialize(i){const l=new Xa;return l.ids=i.ids,l.positions=i.positions,l.indexed=!0,l}}function Ds(u){const i=+u;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:Li(String(u))}function Os(u,i,l,d){for(;l<d;){const v=u[l+d>>1];let b=l-1,S=d+1;for(;;){do b++;while(u[b]<v);do S--;while(u[S]>v);if(b>=S)break;mn(u,b,S),mn(i,3*b,3*S),mn(i,3*b+1,3*S+1),mn(i,3*b+2,3*S+2)}S-l<d-S?(Os(u,i,l,S),l=S+1):(Os(u,i,S+1,d),d=S)}}function mn(u,i,l){const d=u[i];u[i]=u[l],u[l]=d}Tt("FeaturePositionMap",Xa);class en{constructor(i,l){this.gl=i.gl,this.location=l}}class Qn extends en{constructor(i,l){super(i,l),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class Un extends en{constructor(i,l){super(i,l),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class Wf extends en{constructor(i,l){super(i,l),this.current=cr.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const om=new Float32Array(16);function ga(u){return[Vn(255*u.r,255*u.g),Vn(255*u.b,255*u.a)]}class Pl{constructor(i,l,d){this.value=i,this.uniformNames=l.map(v=>`u_${v}`),this.type=d}setUniform(i,l,d){i.set(d.constantOr(this.value))}getBinding(i,l,d){return this.type==="color"?new Wf(i,l):new Qn(i,l)}}class Bo{constructor(i,l){this.uniformNames=l.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=i.tlbr}setUniform(i,l,d,v){const b=v==="u_pattern_to"?this.patternTo:v==="u_pattern_from"?this.patternFrom:v==="u_pixel_ratio_to"?this.pixelRatioTo:v==="u_pixel_ratio_from"?this.pixelRatioFrom:null;b&&i.set(b)}getBinding(i,l,d){return d.substr(0,9)==="u_pattern"?new Un(i,l):new Qn(i,l)}}class vo{constructor(i,l,d,v){this.expression=i,this.type=d,this.maxValue=0,this.paintVertexAttributes=l.map(b=>({name:`a_${b}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new v}populatePaintArray(i,l,d,v,b){const S=this.paintVertexArray.length,M=this.expression.evaluate(new Hr(0),l,{},v,[],b);this.paintVertexArray.resize(i),this._setPaintValue(S,i,M)}updatePaintArray(i,l,d,v){const b=this.expression.evaluate({zoom:0},d,v);this._setPaintValue(i,l,b)}_setPaintValue(i,l,d){if(this.type==="color"){const v=ga(d);for(let b=i;b<l;b++)this.paintVertexArray.emplace(b,v[0],v[1])}else{for(let v=i;v<l;v++)this.paintVertexArray.emplace(v,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Jn{constructor(i,l,d,v,b,S){this.expression=i,this.uniformNames=l.map(M=>`u_${M}_t`),this.type=d,this.useIntegerZoom=v,this.zoom=b,this.maxValue=0,this.paintVertexAttributes=l.map(M=>({name:`a_${M}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new S}populatePaintArray(i,l,d,v,b){const S=this.expression.evaluate(new Hr(this.zoom),l,{},v,[],b),M=this.expression.evaluate(new Hr(this.zoom+1),l,{},v,[],b),D=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(D,i,S,M)}updatePaintArray(i,l,d,v){const b=this.expression.evaluate({zoom:this.zoom},d,v),S=this.expression.evaluate({zoom:this.zoom+1},d,v);this._setPaintValue(i,l,b,S)}_setPaintValue(i,l,d,v){if(this.type==="color"){const b=ga(d),S=ga(v);for(let M=i;M<l;M++)this.paintVertexArray.emplace(M,b[0],b[1],S[0],S[1])}else{for(let b=i;b<l;b++)this.paintVertexArray.emplace(b,d,v);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(v))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,l){const d=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,v=lt(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);i.set(v)}getBinding(i,l,d){return new Qn(i,l)}}class _o{constructor(i,l,d,v,b,S){this.expression=i,this.type=l,this.useIntegerZoom=d,this.zoom=v,this.layerId=S,this.zoomInPaintVertexArray=new b,this.zoomOutPaintVertexArray=new b}populatePaintArray(i,l,d){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(v,i,l.patterns&&l.patterns[this.layerId],d)}updatePaintArray(i,l,d,v,b){this._setPaintValues(i,l,d.patterns&&d.patterns[this.layerId],b)}_setPaintValues(i,l,d,v){if(!v||!d)return;const{min:b,mid:S,max:M}=d,D=v[b],L=v[S],F=v[M];if(D&&L&&F)for(let G=i;G<l;G++)this.zoomInPaintVertexArray.emplace(G,L.tl[0],L.tl[1],L.br[0],L.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],L.pixelRatio,D.pixelRatio),this.zoomOutPaintVertexArray.emplace(G,L.tl[0],L.tl[1],L.br[0],L.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],L.pixelRatio,F.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,Yn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,Yn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class bc{constructor(i,l,d){this.binders={},this._buffers=[];const v=[];for(const b in i.paint._values){if(!d(b))continue;const S=i.paint.get(b);if(!(S instanceof pa&&ws(S.property.specification)))continue;const M=wc(b,i.type),D=S.value,L=S.property.specification.type,F=S.property.useIntegerZoom,G=S.property.specification["property-type"],X=G==="cross-faded"||G==="cross-faded-data-driven";if(D.kind==="constant")this.binders[b]=X?new Bo(D.value,M):new Pl(D.value,M,L),v.push(`/u_${b}`);else if(D.kind==="source"||X){const ee=Sc(b,L,"source");this.binders[b]=X?new _o(D,L,F,l,ee,i.id):new vo(D,M,L,ee),v.push(`/a_${b}`)}else{const ee=Sc(b,L,"composite");this.binders[b]=new Jn(D,M,L,F,l,ee),v.push(`/z_${b}`)}}this.cacheKey=v.sort().join("")}getMaxValue(i){const l=this.binders[i];return l instanceof vo||l instanceof Jn?l.maxValue:0}populatePaintArrays(i,l,d,v,b){for(const S in this.binders){const M=this.binders[S];(M instanceof vo||M instanceof Jn||M instanceof _o)&&M.populatePaintArray(i,l,d,v,b)}}setConstantPatternPositions(i,l){for(const d in this.binders){const v=this.binders[d];v instanceof Bo&&v.setConstantPatternPositions(i,l)}}updatePaintArrays(i,l,d,v,b){let S=!1;for(const M in i){const D=l.getPositions(M);for(const L of D){const F=d.feature(L.index);for(const G in this.binders){const X=this.binders[G];if((X instanceof vo||X instanceof Jn||X instanceof _o)&&X.expression.isStateDependent===!0){const ee=v.paint.get(G);X.expression=ee.value,X.updatePaintArray(L.start,L.end,F,i[M],b),S=!0}}}}return S}defines(){const i=[];for(const l in this.binders){const d=this.binders[l];(d instanceof Pl||d instanceof Bo)&&i.push(...d.uniformNames.map(v=>`#define HAS_UNIFORM_${v}`))}return i}getBinderAttributes(){const i=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof vo||d instanceof Jn)for(let v=0;v<d.paintVertexAttributes.length;v++)i.push(d.paintVertexAttributes[v].name);else if(d instanceof _o)for(let v=0;v<Yn.members.length;v++)i.push(Yn.members[v].name)}return i}getBinderUniforms(){const i=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof Pl||d instanceof Bo||d instanceof Jn)for(const v of d.uniformNames)i.push(v)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,l){const d=[];for(const v in this.binders){const b=this.binders[v];if(b instanceof Pl||b instanceof Bo||b instanceof Jn){for(const S of b.uniformNames)if(l[S]){const M=b.getBinding(i,l[S],S);d.push({name:S,property:v,binding:M})}}}return d}setUniforms(i,l,d,v){for(const{name:b,property:S,binding:M}of l)this.binders[S].setUniform(M,v,d.get(S),b)}updatePaintBuffers(i){this._buffers=[];for(const l in this.binders){const d=this.binders[l];if(i&&d instanceof _o){const v=i.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(d instanceof vo||d instanceof Jn)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(i){for(const l in this.binders){const d=this.binders[l];(d instanceof vo||d instanceof Jn||d instanceof _o)&&d.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const l=this.binders[i];(l instanceof vo||l instanceof Jn||l instanceof _o)&&l.destroy()}}}class ya{constructor(i,l,d=()=>!0){this.programConfigurations={};for(const v of i)this.programConfigurations[v.id]=new bc(v,l,d);this.needsUpload=!1,this._featureMap=new Xa,this._bufferOffset=0}populatePaintArrays(i,l,d,v,b,S){for(const M in this.programConfigurations)this.programConfigurations[M].populatePaintArrays(i,l,v,b,S);l.id!==void 0&&this._featureMap.add(l.id,d,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,l,d,v){for(const b of d)this.needsUpload=this.programConfigurations[b.id].updatePaintArrays(i,this._featureMap,l,b,v)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function wc(u,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${i}-`,"").replace(/-/g,"_")]}function Sc(u,i,l){const d={color:{source:pu,composite:K},number:{source:O,composite:pu}},v=function(b){return{"line-pattern":{source:Ot,composite:Ot},"fill-pattern":{source:Ot,composite:Ot},"fill-extrusion-pattern":{source:Ot,composite:Ot}}[b]}(u);return v&&v[l]||d[i][l]}Tt("ConstantBinder",Pl),Tt("CrossFadedConstantBinder",Bo),Tt("SourceExpressionBinder",vo),Tt("CrossFadedCompositeBinder",_o),Tt("CompositeExpressionBinder",Jn),Tt("ProgramConfiguration",bc,{omit:["_buffers"]}),Tt("ProgramConfigurationSet",ya);const Pc=Math.pow(2,14)-1,sm=-Pc-1;function vu(u){const i=$e/u.extent,l=u.loadGeometry();for(let d=0;d<l.length;d++){const v=l[d];for(let b=0;b<v.length;b++){const S=v[b],M=Math.round(S.x*i),D=Math.round(S.y*i);S.x=lt(M,sm,Pc),S.y=lt(D,sm,Pc),(M<S.x||M>S.x+1||D<S.y||D>S.y+1)&&Jr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function _u(u,i){return{type:u.type,id:u.id,properties:u.properties,geometry:i?vu(u):[]}}const lm=-32768;function Ug(u,i,l,d,v){u.emplaceBack(lm+8*i+d,lm+8*l+v)}class um{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new Ge,this.indexArray=new Kr,this.segments=new Er,this.programConfigurations=new ya(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,d){const v=this.layers[0],b=[];let S=null,M=!1,D=v.type==="heatmap";if(v.type==="circle"){const F=v;S=F.layout.get("circle-sort-key"),M=!S.isConstant(),D=D||F.paint.get("circle-pitch-alignment")==="map"}const L=D?l.subdivisionGranularity.circle:1;for(const{feature:F,id:G,index:X,sourceLayerIndex:ee}of i){const te=this.layers[0]._featureFilter.needGeometry,ne=_u(F,te);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom,{globalState:this.globalState}),ne,d))continue;const he=M?S.evaluate(ne,{},d):void 0,ge={id:G,properties:F.properties,type:F.type,sourceLayerIndex:ee,index:X,geometry:te?ne.geometry:vu(F),patterns:{},sortKey:he};b.push(ge)}M&&b.sort((F,G)=>F.sortKey-G.sortKey);for(const F of b){const{geometry:G,index:X,sourceLayerIndex:ee}=F,te=i[X].feature;this.addFeature(F,G,X,d,L),l.featureIndex.insert(te,G,X,ee,this.index)}}update(i,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Xn),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,l,d,v,b=1){let S;switch(b){case 1:S=[0,7];break;case 3:S=[0,2,5,7];break;case 5:S=[0,1,3,4,6,7];break;case 7:S=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${b}; valid values are 1, 3, 5, 7.`)}const M=S.length;for(const D of l)for(const L of D){const F=L.x,G=L.y;if(F<0||F>=$e||G<0||G>=$e)continue;const X=this.segments.prepareSegment(M*M,this.layoutVertexArray,this.indexArray,i.sortKey),ee=X.vertexLength;for(let te=0;te<M;te++)for(let ne=0;ne<M;ne++)Ug(this.layoutVertexArray,F,G,S[ne],S[te]);for(let te=0;te<M-1;te++)for(let ne=0;ne<M-1;ne++){const he=ee+te*M+ne,ge=ee+(te+1)*M+ne;this.indexArray.emplaceBack(he,ge+1,he+1),this.indexArray.emplaceBack(he,ge,ge+1)}X.vertexLength+=M*M,X.primitiveLength+=(M-1)*(M-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,{},v)}}function va(u,i){for(let l=0;l<u.length;l++)if(xu(i,u[l]))return!0;for(let l=0;l<i.length;l++)if(xu(u,i[l]))return!0;return!!Zf(u,i)}function _a(u,i,l){return!!xu(u,i)||!!Hf(i,u,l)}function cm(u,i){if(u.length===1)return hm(i,u[0]);for(let l=0;l<i.length;l++){const d=i[l];for(let v=0;v<d.length;v++)if(xu(u,d[v]))return!0}for(let l=0;l<u.length;l++)if(hm(i,u[l]))return!0;for(let l=0;l<i.length;l++)if(Zf(u,i[l]))return!0;return!1}function Gg(u,i,l){if(u.length>1){if(Zf(u,i))return!0;for(let d=0;d<i.length;d++)if(Hf(i[d],u,l))return!0}for(let d=0;d<u.length;d++)if(Hf(u[d],i,l))return!0;return!1}function Zf(u,i){if(u.length===0||i.length===0)return!1;for(let l=0;l<u.length-1;l++){const d=u[l],v=u[l+1];for(let b=0;b<i.length-1;b++)if(qg(d,v,i[b],i[b+1]))return!0}return!1}function qg(u,i,l,d){return ri(u,l,d)!==ri(i,l,d)&&ri(u,i,l)!==ri(u,i,d)}function Hf(u,i,l){const d=l*l;if(i.length===1)return u.distSqr(i[0])<d;for(let v=1;v<i.length;v++)if(Kf(u,i[v-1],i[v])<d)return!0;return!1}function Kf(u,i,l){const d=i.distSqr(l);if(d===0)return u.distSqr(i);const v=((u.x-i.x)*(l.x-i.x)+(u.y-i.y)*(l.y-i.y))/d;return u.distSqr(v<0?i:v>1?l:l.sub(i)._mult(v)._add(i))}function hm(u,i){let l,d,v,b=!1;for(let S=0;S<u.length;S++){l=u[S];for(let M=0,D=l.length-1;M<l.length;D=M++)d=l[M],v=l[D],d.y>i.y!=v.y>i.y&&i.x<(v.x-d.x)*(i.y-d.y)/(v.y-d.y)+d.x&&(b=!b)}return b}function xu(u,i){let l=!1;for(let d=0,v=u.length-1;d<u.length;v=d++){const b=u[d],S=u[v];b.y>i.y!=S.y>i.y&&i.x<(S.x-b.x)*(i.y-b.y)/(S.y-b.y)+b.x&&(l=!l)}return l}function Wg(u,i,l){const d=l[0],v=l[2];if(u.x<d.x&&i.x<d.x||u.x>v.x&&i.x>v.x||u.y<d.y&&i.y<d.y||u.y>v.y&&i.y>v.y)return!1;const b=ri(u,i,l[0]);return b!==ri(u,i,l[1])||b!==ri(u,i,l[2])||b!==ri(u,i,l[3])}function Th(u,i,l){const d=i.paint.get(u).value;return d.kind==="constant"?d.value:l.programConfigurations.get(i.id).getMaxValue(u)}function Ch(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function Eh(u,i,l,d,v){if(!i[0]&&!i[1])return u;const b=B.convert(i)._mult(v);l==="viewport"&&b._rotate(-d);const S=[];for(let M=0;M<u.length;M++)S.push(u[M].sub(b));return S}let dm,Xf;Tt("CircleBucket",um,{omit:["layers"]});var Yf={get paint(){return Xf=Xf||new tn({"circle-radius":new Gt(Me.paint_circle["circle-radius"]),"circle-color":new Gt(Me.paint_circle["circle-color"]),"circle-blur":new Gt(Me.paint_circle["circle-blur"]),"circle-opacity":new Gt(Me.paint_circle["circle-opacity"]),"circle-translate":new Dt(Me.paint_circle["circle-translate"]),"circle-translate-anchor":new Dt(Me.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Dt(Me.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Dt(Me.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Gt(Me.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Gt(Me.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Gt(Me.paint_circle["circle-stroke-opacity"])})},get layout(){return dm=dm||new tn({"circle-sort-key":new Gt(Me.layout_circle["circle-sort-key"])})}};class P_ extends $n{constructor(i){super(i,Yf)}createBucket(i){return new um(i)}queryRadius(i){const l=i;return Th("circle-radius",this,l)+Th("circle-stroke-width",this,l)+Ch(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:d,geometry:v,transform:b,pixelsToTileUnits:S,unwrappedTileID:M,getElevation:D}){const L=Eh(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-b.bearingInRadians,S),F=this.paint.get("circle-radius").evaluate(l,d)+this.paint.get("circle-stroke-width").evaluate(l,d),G=this.paint.get("circle-pitch-alignment")==="map",X=G?L:function(te,ne,he,ge){return te.map(ke=>fm(ke,ne,he,ge))}(L,b,M,D),ee=G?F*S:F;for(const te of v)for(const ne of te){const he=G?ne:fm(ne,b,M,D);let ge=ee;const ke=b.projectTileCoordinates(ne.x,ne.y,M,D).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ge*=ke/b.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ge*=b.cameraToCenterDistance/ke),_a(X,he,ge))return!0}return!1}}function fm(u,i,l,d){const v=i.projectTileCoordinates(u.x,u.y,l,d).point;return new B((.5*v.x+.5)*i.width,(.5*-v.y+.5)*i.height)}class Qf extends um{}let pm;Tt("HeatmapBucket",Qf,{omit:["layers"]});var Jf={get paint(){return pm=pm||new tn({"heatmap-radius":new Gt(Me.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Gt(Me.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Dt(Me.paint_heatmap["heatmap-intensity"]),"heatmap-color":new mo(Me.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Dt(Me.paint_heatmap["heatmap-opacity"])})}};function $o(u,{width:i,height:l},d,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==i*l*d)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${i*l*d}`)}else v=new Uint8Array(i*l*d);return u.width=i,u.height=l,u.data=v,u}function Zg(u,{width:i,height:l},d){if(i===u.width&&l===u.height)return;const v=$o({},{width:i,height:l},d);ep(u,v,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,i),height:Math.min(u.height,l)},d),u.width=i,u.height=l,u.data=v.data}function ep(u,i,l,d,v,b){if(v.width===0||v.height===0)return i;if(v.width>u.width||v.height>u.height||l.x>u.width-v.width||l.y>u.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>i.width||v.height>i.height||d.x>i.width-v.width||d.y>i.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const S=u.data,M=i.data;if(S===M)throw new Error("srcData equals dstData, so image is already copied");for(let D=0;D<v.height;D++){const L=((l.y+D)*u.width+l.x)*b,F=((d.y+D)*i.width+d.x)*b;for(let G=0;G<v.width*b;G++)M[F+G]=S[L+G]}return i}class Tc{constructor(i,l){$o(this,i,1,l)}resize(i){Zg(this,i,1)}clone(){return new Tc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,d,v,b){ep(i,l,d,v,b,1)}}class Xi{constructor(i,l){$o(this,i,4,l)}resize(i){Zg(this,i,4)}replace(i,l){l?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new Xi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,d,v,b){ep(i,l,d,v,b,4)}setPixel(i,l,d){const v=4*(i*this.width+l);this.data[v+0]=Math.round(255*d.r/d.a),this.data[v+1]=Math.round(255*d.g/d.a),this.data[v+2]=Math.round(255*d.b/d.a),this.data[v+3]=Math.round(255*d.a)}}function mm(u){const i={},l=u.resolution||256,d=u.clips?u.clips.length:1,v=u.image||new Xi({width:l,height:d});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const b=(S,M,D)=>{i[u.evaluationKey]=D;const L=u.expression.evaluate(i);v.setPixel(S/4/l,M/4,L)};if(u.clips)for(let S=0,M=0;S<d;++S,M+=4*l)for(let D=0,L=0;D<l;D++,L+=4){const F=D/(l-1),{start:G,end:X}=u.clips[S];b(M,L,G*(1-F)+X*F)}else for(let S=0,M=0;S<l;S++,M+=4)b(0,M,S/(l-1));return v}Tt("AlphaImage",Tc),Tt("RGBAImage",Xi);const Cc="big-fb";class Yi extends $n{createBucket(i){return new Qf(i)}constructor(i){super(i,Jf),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=mm({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Cc)&&this.heatmapFbos.delete(Cc)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Hg;var T_={get paint(){return Hg=Hg||new tn({"hillshade-illumination-direction":new Dt(Me.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Dt(Me.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Dt(Me.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Dt(Me.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Dt(Me.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Dt(Me.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Dt(Me.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Dt(Me.paint_hillshade["hillshade-method"])})}};class tp extends $n{constructor(i){super(i,T_),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let i=this.paint.get("hillshade-illumination-direction").values,l=this.paint.get("hillshade-illumination-altitude").values,d=this.paint.get("hillshade-highlight-color").values,v=this.paint.get("hillshade-shadow-color").values;const b=Math.max(i.length,l.length,d.length,v.length);i=i.concat(Array(b-i.length).fill(i.at(-1))),l=l.concat(Array(b-l.length).fill(l.at(-1))),d=d.concat(Array(b-d.length).fill(d.at(-1))),v=v.concat(Array(b-v.length).fill(v.at(-1)));const S=l.map(Ei);return{directionRadians:i.map(Ei),altitudeRadians:S,shadowColor:v,highlightColor:d}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let ji;var C_={get paint(){return ji=ji||new tn({"color-relief-opacity":new Dt(Me["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new mo(Me["paint_color-relief"]["color-relief-color"])})}};class Nt{constructor(i,l,d,v){this.context=i,this.format=d,this.texture=i.gl.createTexture(),this.update(l,v)}update(i,l,d){const{width:v,height:b}=i,S=!(this.size&&this.size[0]===v&&this.size[1]===b||d),{context:M}=this,{gl:D}=M;if(this.useMipmap=!!(l&&l.useMipmap),D.bindTexture(D.TEXTURE_2D,this.texture),M.pixelStoreUnpackFlipY.set(!1),M.pixelStoreUnpack.set(1),M.pixelStoreUnpackPremultiplyAlpha.set(this.format===D.RGBA&&(!l||l.premultiply!==!1)),S)this.size=[v,b],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||oa(i)?D.texImage2D(D.TEXTURE_2D,0,this.format,this.format,D.UNSIGNED_BYTE,i):D.texImage2D(D.TEXTURE_2D,0,this.format,v,b,0,this.format,D.UNSIGNED_BYTE,i.data);else{const{x:L,y:F}=d||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||oa(i)?D.texSubImage2D(D.TEXTURE_2D,0,L,F,D.RGBA,D.UNSIGNED_BYTE,i):D.texSubImage2D(D.TEXTURE_2D,0,L,F,v,b,D.RGBA,D.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&D.generateMipmap(D.TEXTURE_2D),M.pixelStoreUnpackFlipY.setDefault(),M.pixelStoreUnpack.setDefault(),M.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(i,l,d){const{context:v}=this,{gl:b}=v;b.bindTexture(b.TEXTURE_2D,this.texture),d!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=b.LINEAR),i!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,i),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,d||i),this.filter=i),l!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,l),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class Ec{constructor(i,l,d,v=1,b=1,S=1,M=0){if(this.uid=i,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void Jr(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const D=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=b,this.blueFactor=S,this.baseShift=M;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let L=0;L<D;L++)this.data[this._idx(-1,L)]=this.data[this._idx(0,L)],this.data[this._idx(D,L)]=this.data[this._idx(D-1,L)],this.data[this._idx(L,-1)]=this.data[this._idx(L,0)],this.data[this._idx(L,D)]=this.data[this._idx(L,D-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(D,-1)]=this.data[this._idx(D-1,0)],this.data[this._idx(-1,D)]=this.data[this._idx(0,D-1)],this.data[this._idx(D,D)]=this.data[this._idx(D-1,D-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let L=0;L<D;L++)for(let F=0;F<D;F++){const G=this.get(L,F);G>this.max&&(this.max=G),G<this.min&&(this.min=G)}}get(i,l){const d=new Uint8Array(this.data.buffer),v=4*this._idx(i,l);return this.unpack(d[v],d[v+1],d[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,l){if(i<-1||i>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(i+1)}unpack(i,l,d){return i*this.redFactor+l*this.greenFactor+d*this.blueFactor-this.baseShift}pack(i){return rp(i,this.getUnpackVector())}getPixels(){return new Xi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,l,d){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let v=l*this.dim,b=l*this.dim+this.dim,S=d*this.dim,M=d*this.dim+this.dim;switch(l){case-1:v=b-1;break;case 1:b=v+1}switch(d){case-1:S=M-1;break;case 1:M=S+1}const D=-l*this.dim,L=-d*this.dim;for(let F=S;F<M;F++)for(let G=v;G<b;G++)this.data[this._idx(G,F)]=i.data[this._idx(G+D,F+L)]}}function rp(u,i){const l=i[0],d=i[1],v=i[2],b=i[3],S=Math.min(l,d,v),M=Math.round((u+b)/S);return{r:Math.floor(M*S/l)%256,g:Math.floor(M*S/d)%256,b:Math.floor(M*S/v)%256}}Tt("DEMData",Ec);class Kg extends $n{constructor(i){super(i,C_)}_createColorRamp(i){const l={elevationStops:[],colorStops:[]},d=this._transitionablePaint._values["color-relief-color"].value.expression;if(d instanceof ho&&d._styleExpression.expression instanceof ki){this.colorRampExpression=d;const S=d._styleExpression.expression;l.elevationStops=S.labels,l.colorStops=[];for(const M of l.elevationStops)l.colorStops.push(S.evaluate({globals:{elevation:M}}))}if(l.elevationStops.length<1&&(l.elevationStops=[0],l.colorStops=[cr.transparent]),l.elevationStops.length<2&&(l.elevationStops.push(l.elevationStops[0]+1),l.colorStops.push(l.colorStops[0])),l.elevationStops.length<=i)return l;const v={elevationStops:[],colorStops:[]},b=(l.elevationStops.length-1)/(i-1);for(let S=0;S<l.elevationStops.length-.5;S+=b)v.elevationStops.push(l.elevationStops[Math.round(S)]),v.colorStops.push(l.colorStops[Math.round(S)]);return Jr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),v}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(i,l,d){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const v=this._createColorRamp(l),b=new Xi({width:v.colorStops.length,height:1}),S=new Xi({width:v.colorStops.length,height:1});for(let M=0;M<v.elevationStops.length;M++){const D=rp(v.elevationStops[M],d);S.setPixel(0,M,new cr(D.r/255,D.g/255,D.b/255,1)),b.setPixel(0,M,v.colorStops[M])}return this.colorRampTextures={elevationTexture:new Nt(i,S,i.gl.RGBA),colorTexture:new Nt(i,b,i.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const E_=sn([{name:"a_pos",components:2,type:"Int16"}],4),{members:kd}=E_;function Mh(u,i,l){const d=l.patternDependencies;let v=!1;for(const b of i){const S=b.paint.get(`${u}-pattern`);S.isConstant()||(v=!0);const M=S.constantOr(null);M&&(v=!0,d[M.to]=!0,d[M.from]=!0)}return v}function Dd(u,i,l,d,v){const b=v.patternDependencies;for(const S of i){const M=S.paint.get(`${u}-pattern`).value;if(M.kind!=="constant"){let D=M.evaluate({zoom:d-1},l,{},v.availableImages),L=M.evaluate({zoom:d},l,{},v.availableImages),F=M.evaluate({zoom:d+1},l,{},v.availableImages);D=D&&D.name?D.name:D,L=L&&L.name?L.name:L,F=F&&F.name?F.name:F,b[D]=!0,b[L]=!0,b[F]=!0,l.patterns[S.id]={min:D,mid:L,max:F}}}return l}function gm(u,i,l,d,v){let b;if(v===function(S,M,D,L){let F=0;for(let G=M,X=D-L;G<D;G+=L)F+=(S[X]-S[G])*(S[G+1]+S[X+1]),X=G;return F}(u,i,l,d)>0)for(let S=i;S<l;S+=d)b=Fr(S/d|0,u[S],u[S+1],b);else for(let S=l-d;S>=i;S-=d)b=Fr(S/d|0,u[S],u[S+1],b);return b&&Mc(b,b.next)&&(zn(b),b=b.next),b}function bu(u,i){if(!u)return u;i||(i=u);let l,d=u;do if(l=!1,d.steiner||!Mc(d,d.next)&&_n(d.prev,d,d.next)!==0)d=d.next;else{if(zn(d),d=i=d.prev,d===d.next)break;l=!0}while(l||d!==i);return i}function Ah(u,i,l,d,v,b,S){if(!u)return;!S&&b&&function(D,L,F,G){let X=D;do X.z===0&&(X.z=Ya(X.x,X.y,L,F,G)),X.prevZ=X.prev,X.nextZ=X.next,X=X.next;while(X!==D);X.prevZ.nextZ=null,X.prevZ=null,function(ee){let te,ne=1;do{let he,ge=ee;ee=null;let ke=null;for(te=0;ge;){te++;let xe=ge,J=0;for(let Se=0;Se<ne&&(J++,xe=xe.nextZ,xe);Se++);let ce=ne;for(;J>0||ce>0&&xe;)J!==0&&(ce===0||!xe||ge.z<=xe.z)?(he=ge,ge=ge.nextZ,J--):(he=xe,xe=xe.nextZ,ce--),ke?ke.nextZ=he:ee=he,he.prevZ=ke,ke=he;ge=xe}ke.nextZ=null,ne*=2}while(te>1)}(X)}(u,d,v,b);let M=u;for(;u.prev!==u.next;){const D=u.prev,L=u.next;if(b?vm(u,d,v,b):ym(u))i.push(D.i,u.i,L.i),zn(u),u=L.next,M=L.next;else if((u=L)===M){S?S===1?Ah(u=Ni(bu(u),i),i,l,d,v,b,2):S===2&&Vo(u,i,l,d,v,b):Ah(bu(u),i,l,d,v,b,1);break}}}function ym(u){const i=u.prev,l=u,d=u.next;if(_n(i,l,d)>=0)return!1;const v=i.x,b=l.x,S=d.x,M=i.y,D=l.y,L=d.y,F=Math.min(v,b,S),G=Math.min(M,D,L),X=Math.max(v,b,S),ee=Math.max(M,D,L);let te=d.next;for(;te!==i;){if(te.x>=F&&te.x<=X&&te.y>=G&&te.y<=ee&&Od(v,M,b,D,S,L,te.x,te.y)&&_n(te.prev,te,te.next)>=0)return!1;te=te.next}return!0}function vm(u,i,l,d){const v=u.prev,b=u,S=u.next;if(_n(v,b,S)>=0)return!1;const M=v.x,D=b.x,L=S.x,F=v.y,G=b.y,X=S.y,ee=Math.min(M,D,L),te=Math.min(F,G,X),ne=Math.max(M,D,L),he=Math.max(F,G,X),ge=Ya(ee,te,i,l,d),ke=Ya(ne,he,i,l,d);let xe=u.prevZ,J=u.nextZ;for(;xe&&xe.z>=ge&&J&&J.z<=ke;){if(xe.x>=ee&&xe.x<=ne&&xe.y>=te&&xe.y<=he&&xe!==v&&xe!==S&&Od(M,F,D,G,L,X,xe.x,xe.y)&&_n(xe.prev,xe,xe.next)>=0||(xe=xe.prevZ,J.x>=ee&&J.x<=ne&&J.y>=te&&J.y<=he&&J!==v&&J!==S&&Od(M,F,D,G,L,X,J.x,J.y)&&_n(J.prev,J,J.next)>=0))return!1;J=J.nextZ}for(;xe&&xe.z>=ge;){if(xe.x>=ee&&xe.x<=ne&&xe.y>=te&&xe.y<=he&&xe!==v&&xe!==S&&Od(M,F,D,G,L,X,xe.x,xe.y)&&_n(xe.prev,xe,xe.next)>=0)return!1;xe=xe.prevZ}for(;J&&J.z<=ke;){if(J.x>=ee&&J.x<=ne&&J.y>=te&&J.y<=he&&J!==v&&J!==S&&Od(M,F,D,G,L,X,J.x,J.y)&&_n(J.prev,J,J.next)>=0)return!1;J=J.nextZ}return!0}function Ni(u,i){let l=u;do{const d=l.prev,v=l.next.next;!Mc(d,v)&&_m(d,l,l.next,v)&&Ic(d,v)&&Ic(v,d)&&(i.push(d.i,l.i,v.i),zn(l),zn(l.next),l=u=v),l=l.next}while(l!==u);return bu(l)}function Vo(u,i,l,d,v,b){let S=u;do{let M=S.next.next;for(;M!==S.prev;){if(S.i!==M.i&&Jg(S,M)){let D=Qa(S,M);return S=bu(S,S.next),D=bu(D,D.next),Ah(S,i,l,d,v,b,0),void Ah(D,i,l,d,v,b,0)}M=M.next}S=S.next}while(S!==u)}function wu(u,i){let l=u.x-i.x;return l===0&&(l=u.y-i.y,l===0)&&(l=(u.next.y-u.y)/(u.next.x-u.x)-(i.next.y-i.y)/(i.next.x-i.x)),l}function Xg(u,i){const l=function(v,b){let S=b;const M=v.x,D=v.y;let L,F=-1/0;if(Mc(v,S))return S;do{if(Mc(v,S.next))return S.next;if(D<=S.y&&D>=S.next.y&&S.next.y!==S.y){const ne=S.x+(D-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(ne<=M&&ne>F&&(F=ne,L=S.x<S.next.x?S:S.next,ne===M))return L}S=S.next}while(S!==b);if(!L)return null;const G=L,X=L.x,ee=L.y;let te=1/0;S=L;do{if(M>=S.x&&S.x>=X&&M!==S.x&&Uo(D<ee?M:F,D,X,ee,D<ee?F:M,D,S.x,S.y)){const ne=Math.abs(D-S.y)/(M-S.x);Ic(S,v)&&(ne<te||ne===te&&(S.x>L.x||S.x===L.x&&Yg(L,S)))&&(L=S,te=ne)}S=S.next}while(S!==G);return L}(u,i);if(!l)return i;const d=Qa(l,u);return bu(d,d.next),bu(l,l.next)}function Yg(u,i){return _n(u.prev,u,i.prev)<0&&_n(i.next,u,u.next)<0}function Ya(u,i,l,d,v){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-l)*v|0)|u<<8))|u<<4))|u<<2))|u<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-d)*v|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function Qg(u){let i=u,l=u;do(i.x<l.x||i.x===l.x&&i.y<l.y)&&(l=i),i=i.next;while(i!==u);return l}function Uo(u,i,l,d,v,b,S,M){return(v-S)*(i-M)>=(u-S)*(b-M)&&(u-S)*(d-M)>=(l-S)*(i-M)&&(l-S)*(b-M)>=(v-S)*(d-M)}function Od(u,i,l,d,v,b,S,M){return!(u===S&&i===M)&&Uo(u,i,l,d,v,b,S,M)}function Jg(u,i){return u.next.i!==i.i&&u.prev.i!==i.i&&!function(l,d){let v=l;do{if(v.i!==l.i&&v.next.i!==l.i&&v.i!==d.i&&v.next.i!==d.i&&_m(v,v.next,l,d))return!0;v=v.next}while(v!==l);return!1}(u,i)&&(Ic(u,i)&&Ic(i,u)&&function(l,d){let v=l,b=!1;const S=(l.x+d.x)/2,M=(l.y+d.y)/2;do v.y>M!=v.next.y>M&&v.next.y!==v.y&&S<(v.next.x-v.x)*(M-v.y)/(v.next.y-v.y)+v.x&&(b=!b),v=v.next;while(v!==l);return b}(u,i)&&(_n(u.prev,u,i.prev)||_n(u,i.prev,i))||Mc(u,i)&&_n(u.prev,u,u.next)>0&&_n(i.prev,i,i.next)>0)}function _n(u,i,l){return(i.y-u.y)*(l.x-i.x)-(i.x-u.x)*(l.y-i.y)}function Mc(u,i){return u.x===i.x&&u.y===i.y}function _m(u,i,l,d){const v=Ac(_n(u,i,l)),b=Ac(_n(u,i,d)),S=Ac(_n(l,d,u)),M=Ac(_n(l,d,i));return v!==b&&S!==M||!(v!==0||!np(u,l,i))||!(b!==0||!np(u,d,i))||!(S!==0||!np(l,u,d))||!(M!==0||!np(l,i,d))}function np(u,i,l){return i.x<=Math.max(u.x,l.x)&&i.x>=Math.min(u.x,l.x)&&i.y<=Math.max(u.y,l.y)&&i.y>=Math.min(u.y,l.y)}function Ac(u){return u>0?1:u<0?-1:0}function Ic(u,i){return _n(u.prev,u,u.next)<0?_n(u,i,u.next)>=0&&_n(u,u.prev,i)>=0:_n(u,i,u.prev)<0||_n(u,u.next,i)<0}function Qa(u,i){const l=Ln(u.i,u.x,u.y),d=Ln(i.i,i.x,i.y),v=u.next,b=i.prev;return u.next=i,i.prev=u,l.next=v,v.prev=l,d.next=l,l.prev=d,b.next=d,d.prev=b,d}function Fr(u,i,l,d){const v=Ln(u,i,l);return d?(v.next=d.next,v.prev=d,d.next.prev=v,d.next=v):(v.prev=v,v.next=v),v}function zn(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function Ln(u,i,l){return{i:u,x:i,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class jn{constructor(i,l){if(l>i)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=i,this._minGranularity=l}getGranularityForZoomLevel(i){return Math.max(Math.floor(this._baseZoomGranularity/(1<<i)),this._minGranularity,1)}}class Qi{constructor(i){this.fill=i.fill,this.line=i.line,this.tile=i.tile,this.stencil=i.stencil,this.circle=i.circle}}Qi.noSubdivision=new Qi({fill:new jn(0,0),line:new jn(0,0),tile:new jn(0,0),stencil:new jn(0,0),circle:1}),Tt("SubdivisionGranularityExpression",jn),Tt("SubdivisionGranularitySetting",Qi);const Go=-32768,Mn=32767;class Rd{constructor(i,l){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=i,this._granularityCellSize=$e/i,this._canonical=l}_getKey(i,l){return(i+=32768)<<16|l+32768}_vertexToIndex(i,l){if(i<-32768||l<-32768||i>32767||l>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const d=0|Math.round(i),v=0|Math.round(l),b=this._getKey(d,v);if(this._vertexDictionary.has(b))return this._vertexDictionary.get(b);const S=this._vertexBuffer.length/2;return this._vertexDictionary.set(b,S),this._vertexBuffer.push(d,v),S}_subdivideTrianglesScanline(i){if(this._granularity<2)return function(v,b){const S=[];for(let M=0;M<b.length;M+=3){const D=b[M],L=b[M+1],F=b[M+2],G=v[2*D],X=v[2*D+1];(v[2*L]-G)*(v[2*F+1]-X)-(v[2*L+1]-X)*(v[2*F]-G)>0?(S.push(D),S.push(F),S.push(L)):(S.push(D),S.push(L),S.push(F))}return S}(this._vertexBuffer,i);const l=[],d=i.length;for(let v=0;v<d;v+=3){const b=[i[v+0],i[v+1],i[v+2]],S=[this._vertexBuffer[2*i[v+0]+0],this._vertexBuffer[2*i[v+0]+1],this._vertexBuffer[2*i[v+1]+0],this._vertexBuffer[2*i[v+1]+1],this._vertexBuffer[2*i[v+2]+0],this._vertexBuffer[2*i[v+2]+1]];let M=1/0,D=1/0,L=-1/0,F=-1/0;for(let ne=0;ne<3;ne++){const he=S[2*ne],ge=S[2*ne+1];M=Math.min(M,he),L=Math.max(L,he),D=Math.min(D,ge),F=Math.max(F,ge)}if(M===L||D===F)continue;const G=Math.floor(M/this._granularityCellSize),X=Math.ceil(L/this._granularityCellSize),ee=Math.floor(D/this._granularityCellSize),te=Math.ceil(F/this._granularityCellSize);if(G!==X||ee!==te)for(let ne=ee;ne<te;ne++){const he=this._scanlineGenerateVertexRingForCellRow(ne,S,b);xm(this._vertexBuffer,he,l)}else l.push(...b)}return l}_scanlineGenerateVertexRingForCellRow(i,l,d){const v=i*this._granularityCellSize,b=v+this._granularityCellSize,S=[];for(let M=0;M<3;M++){const D=l[2*M],L=l[2*M+1],F=l[2*(M+1)%6],G=l[(2*(M+1)+1)%6],X=l[2*(M+2)%6],ee=l[(2*(M+2)+1)%6],te=F-D,ne=G-L,he=te===0,ge=ne===0,ke=(v-L)/ne,xe=(b-L)/ne,J=Math.min(ke,xe),ce=Math.max(ke,xe);if(!ge&&(J>=1||ce<=0)||ge&&(L<v||L>b)){G>=v&&G<=b&&S.push(d[(M+1)%3]);continue}!ge&&J>0&&S.push(this._vertexToIndex(D+te*J,L+ne*J));const Se=D+te*Math.max(J,0),We=D+te*Math.min(ce,1);he||this._generateIntraEdgeVertices(S,D,L,F,G,Se,We),!ge&&ce<1&&S.push(this._vertexToIndex(D+te*ce,L+ne*ce)),(ge||G>=v&&G<=b)&&S.push(d[(M+1)%3]),!ge&&(G<=v||G>=b)&&this._generateInterEdgeVertices(S,D,L,F,G,X,ee,We,v,b)}return S}_generateIntraEdgeVertices(i,l,d,v,b,S,M){const D=v-l,L=b-d,F=L===0,G=F?Math.min(l,v):Math.min(S,M),X=F?Math.max(l,v):Math.max(S,M),ee=Math.floor(G/this._granularityCellSize)+1,te=Math.ceil(X/this._granularityCellSize)-1;if(F?l<v:S<M)for(let ne=ee;ne<=te;ne++){const he=ne*this._granularityCellSize;i.push(this._vertexToIndex(he,d+L*(he-l)/D))}else for(let ne=te;ne>=ee;ne--){const he=ne*this._granularityCellSize;i.push(this._vertexToIndex(he,d+L*(he-l)/D))}}_generateInterEdgeVertices(i,l,d,v,b,S,M,D,L,F){const G=b-d,X=S-v,ee=M-b,te=(L-b)/ee,ne=(F-b)/ee,he=Math.min(te,ne),ge=Math.max(te,ne),ke=v+X*he;let xe=Math.floor(Math.min(ke,D)/this._granularityCellSize)+1,J=Math.ceil(Math.max(ke,D)/this._granularityCellSize)-1,ce=D<ke;const Se=ee===0;if(Se&&(M===L||M===F))return;if(Se||he>=1||ge<=0){const at=d-M,Ye=S+(l-S)*Math.min((L-M)/at,(F-M)/at);xe=Math.floor(Math.min(Ye,D)/this._granularityCellSize)+1,J=Math.ceil(Math.max(Ye,D)/this._granularityCellSize)-1,ce=D<Ye}const We=G>0?F:L;if(ce)for(let at=xe;at<=J;at++)i.push(this._vertexToIndex(at*this._granularityCellSize,We));else for(let at=J;at>=xe;at--)i.push(this._vertexToIndex(at*this._granularityCellSize,We))}_generateOutline(i){const l=[];for(const d of i){const v=Rs(d,this._granularity,!0),b=this._pointArrayToIndices(v),S=[];for(let M=1;M<b.length;M++)S.push(b[M-1]),S.push(b[M]);l.push(S)}return l}_handlePoles(i){let l=!1,d=!1;this._canonical&&(this._canonical.y===0&&(l=!0),this._canonical.y===(1<<this._canonical.z)-1&&(d=!0)),(l||d)&&this._fillPoles(i,l,d)}_ensureNoPoleVertices(){const i=this._vertexBuffer;for(let l=0;l<i.length;l+=2){const d=i[l+1];d===Go&&(i[l+1]=-32767),d===Mn&&(i[l+1]=32766)}}_generatePoleQuad(i,l,d,v,b,S){v>b!=(S===Go)?(i.push(l),i.push(d),i.push(this._vertexToIndex(v,S)),i.push(d),i.push(this._vertexToIndex(b,S)),i.push(this._vertexToIndex(v,S))):(i.push(d),i.push(l),i.push(this._vertexToIndex(v,S)),i.push(this._vertexToIndex(b,S)),i.push(d),i.push(this._vertexToIndex(v,S)))}_fillPoles(i,l,d){const v=this._vertexBuffer,b=$e,S=i.length;for(let M=2;M<S;M+=3){const D=i[M-2],L=i[M-1],F=i[M],G=v[2*D],X=v[2*D+1],ee=v[2*L],te=v[2*L+1],ne=v[2*F],he=v[2*F+1];l&&(X===0&&te===0&&this._generatePoleQuad(i,D,L,G,ee,Go),te===0&&he===0&&this._generatePoleQuad(i,L,F,ee,ne,Go),he===0&&X===0&&this._generatePoleQuad(i,F,D,ne,G,Go)),d&&(X===b&&te===b&&this._generatePoleQuad(i,D,L,G,ee,Mn),te===b&&he===b&&this._generatePoleQuad(i,L,F,ee,ne,Mn),he===b&&X===b&&this._generatePoleQuad(i,F,D,ne,G,Mn))}}_initializeVertices(i){for(let l=0;l<i.length;l+=2)this._vertexToIndex(i[l],i[l+1])}subdividePolygonInternal(i,l){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:d,holeIndices:v}=function(M){const D=[],L=[];for(const F of M)if(F.length!==0){F!==M[0]&&D.push(L.length/2);for(let G=0;G<F.length;G++)L.push(F[G].x),L.push(F[G].y)}return{flattened:L,holeIndices:D}}(i);let b;this._initializeVertices(d);try{const M=function(L,F,G=2){const X=F&&F.length,ee=X?F[0]*G:L.length;let te=gm(L,0,ee,G,!0);const ne=[];if(!te||te.next===te.prev)return ne;let he,ge,ke;if(X&&(te=function(xe,J,ce,Se){const We=[];for(let at=0,Ye=J.length;at<Ye;at++){const tt=gm(xe,J[at]*Se,at<Ye-1?J[at+1]*Se:xe.length,Se,!1);tt===tt.next&&(tt.steiner=!0),We.push(Qg(tt))}We.sort(wu);for(let at=0;at<We.length;at++)ce=Xg(We[at],ce);return ce}(L,F,te,G)),L.length>80*G){he=1/0,ge=1/0;let xe=-1/0,J=-1/0;for(let ce=G;ce<ee;ce+=G){const Se=L[ce],We=L[ce+1];Se<he&&(he=Se),We<ge&&(ge=We),Se>xe&&(xe=Se),We>J&&(J=We)}ke=Math.max(xe-he,J-ge),ke=ke!==0?32767/ke:0}return Ah(te,ne,G,he,ge,ke,0),ne}(d,v),D=this._convertIndices(d,M);b=this._subdivideTrianglesScanline(D)}catch(M){console.error(M)}let S=[];return l&&(S=this._generateOutline(i)),this._ensureNoPoleVertices(),this._handlePoles(b),{verticesFlattened:this._vertexBuffer,indicesTriangles:b,indicesLineList:S}}_convertIndices(i,l){const d=[];for(let v=0;v<l.length;v++)d.push(this._vertexToIndex(i[2*l[v]],i[2*l[v]+1]));return d}_pointArrayToIndices(i){const l=[];for(let d=0;d<i.length;d++){const v=i[d];l.push(this._vertexToIndex(v.x,v.y))}return l}}function Su(u,i,l,d=!0){return new Rd(l,i).subdividePolygonInternal(u,d)}function Rs(u,i,l=!1){if(!u||u.length<1)return[];if(u.length<2)return[];const d=u[0],v=u[u.length-1],b=l&&(d.x!==v.x||d.y!==v.y);if(i<2)return b?[...u,u[0]]:[...u];const S=Math.floor($e/i),M=[];M.push(new B(u[0].x,u[0].y));const D=u.length,L=b?D:D-1;for(let F=0;F<L;F++){const G=u[F],X=F<D-1?u[F+1]:u[0],ee=G.x,te=G.y,ne=X.x,he=X.y,ge=ee!==ne,ke=te!==he;if(!ge&&!ke)continue;const xe=ne-ee,J=he-te,ce=Math.abs(xe),Se=Math.abs(J);let We=ee,at=te;for(;;){const tt=xe>0?(Math.floor(We/S)+1)*S:(Math.ceil(We/S)-1)*S,ct=J>0?(Math.floor(at/S)+1)*S:(Math.ceil(at/S)-1)*S,ot=Math.abs(We-tt),pt=Math.abs(at-ct),rt=Math.abs(We-ne),Rt=Math.abs(at-he),Ht=ge?ot/ce:Number.POSITIVE_INFINITY,qt=ke?pt/Se:Number.POSITIVE_INFINITY;if((rt<=ot||!ge)&&(Rt<=pt||!ke))break;if(Ht<qt&&ge||!ke){We=tt,at+=J*Ht;const jt=new B(We,Math.round(at));M[M.length-1].x===jt.x&&M[M.length-1].y===jt.y||M.push(jt)}else{We+=xe*qt,at=ct;const jt=new B(Math.round(We),at);M[M.length-1].x===jt.x&&M[M.length-1].y===jt.y||M.push(jt)}}const Ye=new B(ne,he);M[M.length-1].x===Ye.x&&M[M.length-1].y===Ye.y||M.push(Ye)}return M}function xm(u,i,l){if(i.length===0)throw new Error("Subdivision vertex ring is empty.");let d=0,v=u[2*i[0]];for(let D=1;D<i.length;D++){const L=u[2*i[D]];L<v&&(v=L,d=D)}const b=i.length;let S=d,M=(S+1)%b;for(;;){const D=S-1>=0?S-1:b-1,L=(M+1)%b,F=u[2*i[D]],G=u[2*i[L]],X=u[2*i[S]],ee=u[2*i[S]+1],te=u[2*i[M]+1];let ne=!1;if(F<G)ne=!0;else if(F>G)ne=!1;else{const he=te-ee,ge=-(u[2*i[M]]-X),ke=ee<te?1:-1;((F-X)*he+(u[2*i[D]+1]-ee)*ge)*ke>((G-X)*he+(u[2*i[L]+1]-ee)*ge)*ke&&(ne=!0)}if(ne){const he=i[D],ge=i[S],ke=i[M];he!==ge&&he!==ke&&ge!==ke&&l.push(ke,ge,he),S--,S<0&&(S=b-1)}else{const he=i[L],ge=i[S],ke=i[M];he!==ge&&he!==ke&&ge!==ke&&l.push(ke,ge,he),M++,M>=b&&(M=0)}if(D===L)break}}function Ih(u,i,l,d,v,b,S,M,D){const L=v.length/2,F=S&&M&&D;if(L<Er.MAX_VERTEX_ARRAY_LENGTH){const G=i.prepareSegment(L,l,d),X=G.vertexLength;for(let ne=0;ne<b.length;ne+=3)d.emplaceBack(X+b[ne],X+b[ne+1],X+b[ne+2]);let ee,te;G.vertexLength+=L,G.primitiveLength+=b.length/3,F&&(te=S.prepareSegment(L,l,M),ee=te.vertexLength,te.vertexLength+=L);for(let ne=0;ne<v.length;ne+=2)u(v[ne],v[ne+1]);if(F)for(let ne=0;ne<D.length;ne++){const he=D[ne];for(let ge=1;ge<he.length;ge+=2)M.emplaceBack(ee+he[ge-1],ee+he[ge]);te.primitiveLength+=he.length/2}}else(function(G,X,ee,te,ne,he){const ge=[];for(let Se=0;Se<te.length/2;Se++)ge.push(-1);const ke={count:0};let xe=0,J=G.getOrCreateLatestSegment(X,ee),ce=J.vertexLength;for(let Se=2;Se<ne.length;Se+=3){const We=ne[Se-2],at=ne[Se-1],Ye=ne[Se];let tt=ge[We]<xe,ct=ge[at]<xe,ot=ge[Ye]<xe;J.vertexLength+((tt?1:0)+(ct?1:0)+(ot?1:0))>Er.MAX_VERTEX_ARRAY_LENGTH&&(J=G.createNewSegment(X,ee),xe=ke.count,tt=!0,ct=!0,ot=!0,ce=0);const pt=_i(ge,te,he,ke,We,tt,J),rt=_i(ge,te,he,ke,at,ct,J),Rt=_i(ge,te,he,ke,Ye,ot,J);ee.emplaceBack(ce+pt-xe,ce+rt-xe,ce+Rt-xe),J.primitiveLength++}})(i,l,d,v,b,u),F&&function(G,X,ee,te,ne,he){const ge=[];for(let Se=0;Se<te.length/2;Se++)ge.push(-1);const ke={count:0};let xe=0,J=G.getOrCreateLatestSegment(X,ee),ce=J.vertexLength;for(let Se=0;Se<ne.length;Se++){const We=ne[Se];for(let at=1;at<ne[Se].length;at+=2){const Ye=We[at-1],tt=We[at];let ct=ge[Ye]<xe,ot=ge[tt]<xe;J.vertexLength+((ct?1:0)+(ot?1:0))>Er.MAX_VERTEX_ARRAY_LENGTH&&(J=G.createNewSegment(X,ee),xe=ke.count,ct=!0,ot=!0,ce=0);const pt=_i(ge,te,he,ke,Ye,ct,J),rt=_i(ge,te,he,ke,tt,ot,J);ee.emplaceBack(ce+pt-xe,ce+rt-xe),J.primitiveLength++}}}(S,l,M,v,D,u),i.forceNewSegmentOnNextPrepare(),S?.forceNewSegmentOnNextPrepare()}function _i(u,i,l,d,v,b,S){if(b){const M=d.count;return l(i[2*v],i[2*v+1]),u[v]=d.count,d.count++,S.vertexLength++,M}return u[v]}class zd{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new He,this.indexArray=new Kr,this.indexArray2=new Nr,this.programConfigurations=new ya(i.layers,i.zoom),this.segments=new Er,this.segments2=new Er,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,d){this.hasPattern=Mh("fill",this.layers,l);const v=this.layers[0].layout.get("fill-sort-key"),b=!v.isConstant(),S=[];for(const{feature:M,id:D,index:L,sourceLayerIndex:F}of i){const G=this.layers[0]._featureFilter.needGeometry,X=_u(M,G);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom,{globalState:this.globalState}),X,d))continue;const ee=b?v.evaluate(X,{},d,l.availableImages):void 0,te={id:D,properties:M.properties,type:M.type,sourceLayerIndex:F,index:L,geometry:G?X.geometry:vu(M),patterns:{},sortKey:ee};S.push(te)}b&&S.sort((M,D)=>M.sortKey-D.sortKey);for(const M of S){const{geometry:D,index:L,sourceLayerIndex:F}=M;if(this.hasPattern){const G=Dd("fill",this.layers,M,this.zoom,l);this.patternFeatures.push(G)}else this.addFeature(M,D,L,d,{},l.subdivisionGranularity);l.featureIndex.insert(i[L].feature,D,L,F,this.index)}}update(i,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,d)}addFeatures(i,l,d){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,l,d,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,kd),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,l,d,v,b,S){for(const M of gs(l,500)){const D=Su(M,v,S.fill.getGranularityForZoomLevel(v.z)),L=this.layoutVertexArray;Ih((F,G)=>{L.emplaceBack(F,G)},this.segments,this.layoutVertexArray,this.indexArray,D.verticesFlattened,D.indicesTriangles,this.segments2,this.indexArray2,D.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,b,v)}}let kc,zs;Tt("FillBucket",zd,{omit:["layers","patternFeatures"]});var ip={get paint(){return zs=zs||new tn({"fill-antialias":new Dt(Me.paint_fill["fill-antialias"]),"fill-opacity":new Gt(Me.paint_fill["fill-opacity"]),"fill-color":new Gt(Me.paint_fill["fill-color"]),"fill-outline-color":new Gt(Me.paint_fill["fill-outline-color"]),"fill-translate":new Dt(Me.paint_fill["fill-translate"]),"fill-translate-anchor":new Dt(Me.paint_fill["fill-translate-anchor"]),"fill-pattern":new du(Me.paint_fill["fill-pattern"])})},get layout(){return kc=kc||new tn({"fill-sort-key":new Gt(Me.layout_fill["fill-sort-key"])})}};class bm extends $n{constructor(i){super(i,ip)}recalculate(i,l){super.recalculate(i,l);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new zd(i)}queryRadius(){return Ch(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:i,geometry:l,transform:d,pixelsToTileUnits:v}){return cm(Eh(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-d.bearingInRadians,v),l)}isTileClipped(){return!0}}const Pu=sn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),ap=sn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Tu}=Pu;var kh,Dh,Ld,jd,Oh,Ji,Tl,Ra={};function xa(){if(Dh)return kh;Dh=1;var u=I();function i(v,b,S,M,D){this.properties={},this.extent=S,this.type=0,this._pbf=v,this._geometry=-1,this._keys=M,this._values=D,v.readFields(l,this,b)}function l(v,b,S){v==1?b.id=S.readVarint():v==2?function(M,D){for(var L=M.readVarint()+M.pos;M.pos<L;){var F=D._keys[M.readVarint()],G=D._values[M.readVarint()];D.properties[F]=G}}(S,b):v==3?b.type=S.readVarint():v==4&&(b._geometry=S.pos)}function d(v){for(var b,S,M=0,D=0,L=v.length,F=L-1;D<L;F=D++)M+=((S=v[F]).x-(b=v[D]).x)*(b.y+S.y);return M}return kh=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var v=this._pbf;v.pos=this._geometry;for(var b,S=v.readVarint()+v.pos,M=1,D=0,L=0,F=0,G=[];v.pos<S;){if(D<=0){var X=v.readVarint();M=7&X,D=X>>3}if(D--,M===1||M===2)L+=v.readSVarint(),F+=v.readSVarint(),M===1&&(b&&G.push(b),b=[]),b.push(new u(L,F));else{if(M!==7)throw new Error("unknown command "+M);b&&b.push(b[0].clone())}}return b&&G.push(b),G},i.prototype.bbox=function(){var v=this._pbf;v.pos=this._geometry;for(var b=v.readVarint()+v.pos,S=1,M=0,D=0,L=0,F=1/0,G=-1/0,X=1/0,ee=-1/0;v.pos<b;){if(M<=0){var te=v.readVarint();S=7&te,M=te>>3}if(M--,S===1||S===2)(D+=v.readSVarint())<F&&(F=D),D>G&&(G=D),(L+=v.readSVarint())<X&&(X=L),L>ee&&(ee=L);else if(S!==7)throw new Error("unknown command "+S)}return[F,X,G,ee]},i.prototype.toGeoJSON=function(v,b,S){var M,D,L=this.extent*Math.pow(2,S),F=this.extent*v,G=this.extent*b,X=this.loadGeometry(),ee=i.types[this.type];function te(ge){for(var ke=0;ke<ge.length;ke++){var xe=ge[ke];ge[ke]=[360*(xe.x+F)/L-180,360/Math.PI*Math.atan(Math.exp((180-360*(xe.y+G)/L)*Math.PI/180))-90]}}switch(this.type){case 1:var ne=[];for(M=0;M<X.length;M++)ne[M]=X[M][0];te(X=ne);break;case 2:for(M=0;M<X.length;M++)te(X[M]);break;case 3:for(X=function(ge){var ke=ge.length;if(ke<=1)return[ge];for(var xe,J,ce=[],Se=0;Se<ke;Se++){var We=d(ge[Se]);We!==0&&(J===void 0&&(J=We<0),J===We<0?(xe&&ce.push(xe),xe=[ge[Se]]):xe.push(ge[Se]))}return xe&&ce.push(xe),ce}(X),M=0;M<X.length;M++)for(D=0;D<X[M].length;D++)te(X[M][D])}X.length===1?X=X[0]:ee="Multi"+ee;var he={type:"Feature",geometry:{type:ee,coordinates:X},properties:this.properties};return"id"in this&&(he.id=this.id),he},kh}function wm(){if(jd)return Ld;jd=1;var u=xa();function i(d,v){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(l,this,v),this.length=this._features.length}function l(d,v,b){d===15?v.version=b.readVarint():d===1?v.name=b.readString():d===5?v.extent=b.readVarint():d===2?v._features.push(b.pos):d===3?v._keys.push(b.readString()):d===4&&v._values.push(function(S){for(var M=null,D=S.readVarint()+S.pos;S.pos<D;){var L=S.readVarint()>>3;M=L===1?S.readString():L===2?S.readFloat():L===3?S.readDouble():L===4?S.readVarint64():L===5?S.readVarint():L===6?S.readSVarint():L===7?S.readBoolean():null}return M}(b))}return Ld=i,i.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var v=this._pbf.readVarint()+this._pbf.pos;return new u(this._pbf,v,this.extent,this._keys,this._values)},Ld}function op(){return Tl||(Tl=1,Ra.VectorTile=function(){if(Ji)return Oh;Ji=1;var u=wm();function i(l,d,v){if(l===3){var b=new u(v,v.readVarint()+v.pos);b.length&&(d[b.name]=b)}}return Oh=function(l,d){this.layers=l.readFields(i,{},d)},Oh}(),Ra.VectorTileFeature=xa(),Ra.VectorTileLayer=wm()),Ra}var Dc=P(op());const M_=Dc.VectorTileFeature.types,Ls=Math.pow(2,13);function Rh(u,i,l,d,v,b,S,M){u.emplaceBack(i,l,2*Math.floor(d*Ls)+S,v*Ls*2,b*Ls*2,Math.round(M))}class Nd{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new _t,this.centroidVertexArray=new Ve,this.indexArray=new Kr,this.programConfigurations=new ya(i.layers,i.zoom),this.segments=new Er,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,d){this.features=[],this.hasPattern=Mh("fill-extrusion",this.layers,l);for(const{feature:v,id:b,index:S,sourceLayerIndex:M}of i){const D=this.layers[0]._featureFilter.needGeometry,L=_u(v,D);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom,{globalState:this.globalState}),L,d))continue;const F={id:b,sourceLayerIndex:M,index:S,geometry:D?L.geometry:vu(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(Dd("fill-extrusion",this.layers,F,this.zoom,l)):this.addFeature(F,F.geometry,S,d,{},l.subdivisionGranularity),l.featureIndex.insert(v,F.geometry,S,M,this.index,!0)}}addFeatures(i,l,d){for(const v of this.features){const{geometry:b}=v;this.addFeature(v,b,v.index,l,d,i.subdivisionGranularity)}}update(i,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Tu),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,ap.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,l,d,v,b,S){for(const M of gs(l,500)){const D={x:0,y:0,sampleCount:0},L=this.layoutVertexArray.length;this.processPolygon(D,v,i,M,S);const F=this.layoutVertexArray.length-L,G=Math.floor(D.x/D.sampleCount),X=Math.floor(D.y/D.sampleCount);for(let ee=0;ee<F;ee++)this.centroidVertexArray.emplaceBack(G,X)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,b,v)}processPolygon(i,l,d,v,b){if(v.length<1||Cu(v[0]))return;for(const G of v)G.length!==0&&Oc(i,G);const S={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},M=b.fill.getGranularityForZoomLevel(l.z),D=M_[d.type]==="Polygon";for(const G of v){if(G.length===0||Cu(G))continue;const X=Rs(G,M,D);this._generateSideFaces(X,S)}if(!D)return;const L=Su(v,l,M,!1),F=this.layoutVertexArray;Ih((G,X)=>{Rh(F,G,X,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,L.verticesFlattened,L.indicesTriangles)}_generateSideFaces(i,l){let d=0;for(let v=1;v<i.length;v++){const b=i[v],S=i[v-1];if(Sm(b,S))continue;l.segment.vertexLength+4>Er.MAX_VERTEX_ARRAY_LENGTH&&(l.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const M=b.sub(S)._perp()._unit(),D=S.dist(b);d+D>32768&&(d=0),Rh(this.layoutVertexArray,b.x,b.y,M.x,M.y,0,0,d),Rh(this.layoutVertexArray,b.x,b.y,M.x,M.y,0,1,d),d+=D,Rh(this.layoutVertexArray,S.x,S.y,M.x,M.y,0,0,d),Rh(this.layoutVertexArray,S.x,S.y,M.x,M.y,0,1,d);const L=l.segment.vertexLength;this.indexArray.emplaceBack(L,L+2,L+1),this.indexArray.emplaceBack(L+1,L+2,L+3),l.segment.vertexLength+=4,l.segment.primitiveLength+=2}}}function Oc(u,i){for(let l=0;l<i.length;l++){const d=i[l];l===i.length-1&&i[0].x===d.x&&i[0].y===d.y||(u.x+=d.x,u.y+=d.y,u.sampleCount++)}}function Sm(u,i){return u.x===i.x&&(u.x<0||u.x>$e)||u.y===i.y&&(u.y<0||u.y>$e)}function Cu(u){return u.every(i=>i.x<0)||u.every(i=>i.x>$e)||u.every(i=>i.y<0)||u.every(i=>i.y>$e)}let Pm;Tt("FillExtrusionBucket",Nd,{omit:["layers","features"]});var ey={get paint(){return Pm=Pm||new tn({"fill-extrusion-opacity":new Dt(Me["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Gt(Me["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Dt(Me["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Dt(Me["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new du(Me["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Gt(Me["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Gt(Me["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Dt(Me["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Tm extends $n{constructor(i){super(i,ey)}createBucket(i){return new Nd(i)}queryRadius(){return Ch(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:d,geometry:v,transform:b,pixelsToTileUnits:S,pixelPosMatrix:M}){const D=Eh(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-b.bearingInRadians,S),L=this.paint.get("fill-extrusion-height").evaluate(l,d),F=this.paint.get("fill-extrusion-base").evaluate(l,d),G=function(ee,te){const ne=[];for(const he of ee){const ge=[he.x,he.y,0,1];Mt(ge,ge,te),ne.push(new B(ge[0]/ge[3],ge[1]/ge[3]))}return ne}(D,M),X=function(ee,te,ne,he){const ge=[],ke=[],xe=he[8]*te,J=he[9]*te,ce=he[10]*te,Se=he[11]*te,We=he[8]*ne,at=he[9]*ne,Ye=he[10]*ne,tt=he[11]*ne;for(const ct of ee){const ot=[],pt=[];for(const rt of ct){const Rt=rt.x,Ht=rt.y,qt=he[0]*Rt+he[4]*Ht+he[12],jt=he[1]*Rt+he[5]*Ht+he[13],Mr=he[2]*Rt+he[6]*Ht+he[14],In=he[3]*Rt+he[7]*Ht+he[15],ui=Mr+ce,ta=In+Se,Zo=qt+We,Ja=jt+at,Fi=Mr+Ye,bn=In+tt,xi=new B((qt+xe)/ta,(jt+J)/ta);xi.z=ui/ta,ot.push(xi);const Bi=new B(Zo/bn,Ja/bn);Bi.z=Fi/bn,pt.push(Bi)}ge.push(ot),ke.push(pt)}return[ge,ke]}(v,F,L,M);return function(ee,te,ne){let he=1/0;cm(ne,te)&&(he=ty(ne,te[0]));for(let ge=0;ge<te.length;ge++){const ke=te[ge],xe=ee[ge];for(let J=0;J<ke.length-1;J++){const ce=ke[J],Se=[ce,ke[J+1],xe[J+1],xe[J],ce];va(ne,Se)&&(he=Math.min(he,ty(ne,Se)))}}return he!==1/0&&he}(X[0],X[1],G)}}function Eu(u,i){return u.x*i.x+u.y*i.y}function ty(u,i){if(u.length===1){let l=0;const d=i[l++];let v;for(;!v||d.equals(v);)if(v=i[l++],!v)return 1/0;for(;l<i.length;l++){const b=i[l],S=u[0],M=v.sub(d),D=b.sub(d),L=S.sub(d),F=Eu(M,M),G=Eu(M,D),X=Eu(D,D),ee=Eu(L,M),te=Eu(L,D),ne=F*X-G*G,he=(X*ee-G*te)/ne,ge=(F*te-G*ee)/ne,ke=d.z*(1-he-ge)+v.z*he+b.z*ge;if(isFinite(ke))return ke}return 1/0}{let l=1/0;for(const d of i)l=Math.min(l,d.z);return l}}const A_=sn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:ry}=A_,ny=sn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Rc}=ny,I_=Dc.VectorTileFeature.types,zh=Math.cos(Math.PI/180*37.5),Cm=Math.pow(2,14)/.5;class xn{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new gt,this.layoutVertexArray2=new it,this.indexArray=new Kr,this.programConfigurations=new ya(i.layers,i.zoom),this.segments=new Er,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,d){this.hasPattern=Mh("line",this.layers,l);const v=this.layers[0].layout.get("line-sort-key"),b=!v.isConstant(),S=[];for(const{feature:M,id:D,index:L,sourceLayerIndex:F}of i){const G=this.layers[0]._featureFilter.needGeometry,X=_u(M,G);if(!this.layers[0]._featureFilter.filter(new Hr(this.zoom,{globalState:this.globalState}),X,d))continue;const ee=b?v.evaluate(X,{},d):void 0,te={id:D,properties:M.properties,type:M.type,sourceLayerIndex:F,index:L,geometry:G?X.geometry:vu(M),patterns:{},sortKey:ee};S.push(te)}b&&S.sort((M,D)=>M.sortKey-D.sortKey);for(const M of S){const{geometry:D,index:L,sourceLayerIndex:F}=M;if(this.hasPattern){const G=Dd("line",this.layers,M,this.zoom,l);this.patternFeatures.push(G)}else this.addFeature(M,D,L,d,{},l.subdivisionGranularity);l.featureIndex.insert(i[L].feature,D,L,F,this.index)}}update(i,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,d)}addFeatures(i,l,d){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,l,d,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,Rc)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,ry),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,l,d,v,b,S){const M=this.layers[0].layout,D=M.get("line-join").evaluate(i,{}),L=M.get("line-cap"),F=M.get("line-miter-limit"),G=M.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const X of l)this.addLine(X,i,D,L,F,G,v,S);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,b,v)}addLine(i,l,d,v,b,S,M,D){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,i=Rs(i,M?D.line.getGranularityForZoomLevel(M.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let xe=0;xe<i.length-1;xe++)this.totalDistance+=i[xe].dist(i[xe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const L=I_[l.type]==="Polygon";let F=i.length;for(;F>=2&&i[F-1].equals(i[F-2]);)F--;let G=0;for(;G<F-1&&i[G].equals(i[G+1]);)G++;if(F<(L?3:2))return;d==="bevel"&&(b=1.05);const X=this.overscaling<=16?122880/(512*this.overscaling):0,ee=this.segments.prepareSegment(10*F,this.layoutVertexArray,this.indexArray);let te,ne,he,ge,ke;this.e1=this.e2=-1,L&&(te=i[F-2],ke=i[G].sub(te)._unit()._perp());for(let xe=G;xe<F;xe++){if(he=xe===F-1?L?i[G+1]:void 0:i[xe+1],he&&i[xe].equals(he))continue;ke&&(ge=ke),te&&(ne=te),te=i[xe],ke=he?he.sub(te)._unit()._perp():ge,ge=ge||ke;let J=ge.add(ke);J.x===0&&J.y===0||J._unit();const ce=ge.x*ke.x+ge.y*ke.y,Se=J.x*ke.x+J.y*ke.y,We=Se!==0?1/Se:1/0,at=2*Math.sqrt(2-2*Se),Ye=Se<zh&&ne&&he,tt=ge.x*ke.y-ge.y*ke.x>0;if(Ye&&xe>G){const pt=te.dist(ne);if(pt>2*X){const rt=te.sub(te.sub(ne)._mult(X/pt)._round());this.updateDistance(ne,rt),this.addCurrentVertex(rt,ge,0,0,ee),ne=rt}}const ct=ne&&he;let ot=ct?d:L?"butt":v;if(ct&&ot==="round"&&(We<S?ot="miter":We<=2&&(ot="fakeround")),ot==="miter"&&We>b&&(ot="bevel"),ot==="bevel"&&(We>2&&(ot="flipbevel"),We<b&&(ot="miter")),ne&&this.updateDistance(ne,te),ot==="miter")J._mult(We),this.addCurrentVertex(te,J,0,0,ee);else if(ot==="flipbevel"){if(We>100)J=ke.mult(-1);else{const pt=We*ge.add(ke).mag()/ge.sub(ke).mag();J._perp()._mult(pt*(tt?-1:1))}this.addCurrentVertex(te,J,0,0,ee),this.addCurrentVertex(te,J.mult(-1),0,0,ee)}else if(ot==="bevel"||ot==="fakeround"){const pt=-Math.sqrt(We*We-1),rt=tt?pt:0,Rt=tt?0:pt;if(ne&&this.addCurrentVertex(te,ge,rt,Rt,ee),ot==="fakeround"){const Ht=Math.round(180*at/Math.PI/20);for(let qt=1;qt<Ht;qt++){let jt=qt/Ht;if(jt!==.5){const In=jt-.5;jt+=jt*In*(jt-1)*((1.0904+ce*(ce*(3.55645-1.43519*ce)-3.2452))*In*In+(.848013+ce*(.215638*ce-1.06021)))}const Mr=ke.sub(ge)._mult(jt)._add(ge)._unit()._mult(tt?-1:1);this.addHalfVertex(te,Mr.x,Mr.y,!1,tt,0,ee)}}he&&this.addCurrentVertex(te,ke,-rt,-Rt,ee)}else if(ot==="butt")this.addCurrentVertex(te,J,0,0,ee);else if(ot==="square"){const pt=ne?1:-1;this.addCurrentVertex(te,J,pt,pt,ee)}else ot==="round"&&(ne&&(this.addCurrentVertex(te,ge,0,0,ee),this.addCurrentVertex(te,ge,1,1,ee,!0)),he&&(this.addCurrentVertex(te,ke,-1,-1,ee,!0),this.addCurrentVertex(te,ke,0,0,ee)));if(Ye&&xe<F-1){const pt=te.dist(he);if(pt>2*X){const rt=te.add(he.sub(te)._mult(X/pt)._round());this.updateDistance(te,rt),this.addCurrentVertex(rt,ke,0,0,ee),te=rt}}}}addCurrentVertex(i,l,d,v,b,S=!1){const M=l.y*v-l.x,D=-l.y-l.x*v;this.addHalfVertex(i,l.x+l.y*d,l.y-l.x*d,S,!1,d,b),this.addHalfVertex(i,M,D,S,!0,-v,b),this.distance>Cm/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,l,d,v,b,S))}addHalfVertex({x:i,y:l},d,v,b,S,M,D){const L=.5*(this.lineClips?this.scaledDistance*(Cm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(b?1:0),(l<<1)+(S?1:0),Math.round(63*d)+128,Math.round(63*v)+128,1+(M===0?0:M<0?-1:1)|(63&L)<<2,L>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const F=D.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,F,this.e2),D.primitiveLength++),S?this.e2=F:this.e1=F}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,l){this.distance+=i.dist(l),this.updateScaledDistance()}}let iy,Em;Tt("LineBucket",xn,{omit:["layers","patternFeatures"]});var ay={get paint(){return Em=Em||new tn({"line-opacity":new Gt(Me.paint_line["line-opacity"]),"line-color":new Gt(Me.paint_line["line-color"]),"line-translate":new Dt(Me.paint_line["line-translate"]),"line-translate-anchor":new Dt(Me.paint_line["line-translate-anchor"]),"line-width":new Gt(Me.paint_line["line-width"]),"line-gap-width":new Gt(Me.paint_line["line-gap-width"]),"line-offset":new Gt(Me.paint_line["line-offset"]),"line-blur":new Gt(Me.paint_line["line-blur"]),"line-dasharray":new _c(Me.paint_line["line-dasharray"]),"line-pattern":new du(Me.paint_line["line-pattern"]),"line-gradient":new mo(Me.paint_line["line-gradient"])})},get layout(){return iy=iy||new tn({"line-cap":new Dt(Me.layout_line["line-cap"]),"line-join":new Gt(Me.layout_line["line-join"]),"line-miter-limit":new Dt(Me.layout_line["line-miter-limit"]),"line-round-limit":new Dt(Me.layout_line["line-round-limit"]),"line-sort-key":new Gt(Me.layout_line["line-sort-key"])})}};class k_ extends Gt{possiblyEvaluate(i,l){return l=new Hr(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(i,l)}evaluate(i,l,d,v){return l=sr({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(i,l,d,v)}}let Fd;class oy extends $n{constructor(i){super(i,ay),this.gradientVersion=0,Fd||(Fd=new k_(ay.paint.properties["line-width"].specification),Fd.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof Zl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,l){super.recalculate(i,l),this.paint._values["line-floorwidth"]=Fd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new xn(i)}queryRadius(i){const l=i,d=sy(Th("line-width",this,l),Th("line-gap-width",this,l)),v=Th("line-offset",this,l);return d/2+Math.abs(v)+Ch(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:d,geometry:v,transform:b,pixelsToTileUnits:S}){const M=Eh(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-b.bearingInRadians,S),D=S/2*sy(this.paint.get("line-width").evaluate(l,d),this.paint.get("line-gap-width").evaluate(l,d)),L=this.paint.get("line-offset").evaluate(l,d);return L&&(v=function(F,G){const X=[];for(let ee=0;ee<F.length;ee++){const te=F[ee],ne=[];for(let he=0;he<te.length;he++){const ge=te[he-1],ke=te[he],xe=te[he+1],J=he===0?new B(0,0):ke.sub(ge)._unit()._perp(),ce=he===te.length-1?new B(0,0):xe.sub(ke)._unit()._perp(),Se=J._add(ce)._unit(),We=Se.x*ce.x+Se.y*ce.y;We!==0&&Se._mult(1/We),ne.push(Se._mult(G)._add(ke))}X.push(ne)}return X}(v,L*S)),function(F,G,X){for(let ee=0;ee<G.length;ee++){const te=G[ee];if(F.length>=3){for(let ne=0;ne<te.length;ne++)if(xu(F,te[ne]))return!0}if(Gg(F,te,X))return!0}return!1}(M,v,D)}isTileClipped(){return!0}}function sy(u,i){return i>0?i+2*u:u}const xo=sn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Mm=sn([{name:"a_projected_pos",components:3,type:"Float32"}],4);sn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const D_=sn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);sn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Cl=sn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),sp=sn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function zc(u,i,l){return u.sections.forEach(d=>{d.text=function(v,b,S){const M=b.layout.get("text-transform").evaluate(S,{});return M==="uppercase"?v=v.toLocaleUpperCase():M==="lowercase"&&(v=v.toLocaleLowerCase()),As.applyArabicShaping&&(v=As.applyArabicShaping(v)),v}(d.text,i,l)}),u}sn([{name:"triangle",components:3,type:"Uint16"}]),sn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),sn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),sn([{type:"Float32",name:"offsetX"}]),sn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),sn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Mu={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var lp,Bd,ly,Nn=24,Am={};function uy(){return lp||(lp=1,Am.read=function(u,i,l,d,v){var b,S,M=8*v-d-1,D=(1<<M)-1,L=D>>1,F=-7,G=l?v-1:0,X=l?-1:1,ee=u[i+G];for(G+=X,b=ee&(1<<-F)-1,ee>>=-F,F+=M;F>0;b=256*b+u[i+G],G+=X,F-=8);for(S=b&(1<<-F)-1,b>>=-F,F+=d;F>0;S=256*S+u[i+G],G+=X,F-=8);if(b===0)b=1-L;else{if(b===D)return S?NaN:1/0*(ee?-1:1);S+=Math.pow(2,d),b-=L}return(ee?-1:1)*S*Math.pow(2,b-d)},Am.write=function(u,i,l,d,v,b){var S,M,D,L=8*b-v-1,F=(1<<L)-1,G=F>>1,X=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,ee=d?0:b-1,te=d?1:-1,ne=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(M=isNaN(i)?1:0,S=F):(S=Math.floor(Math.log(i)/Math.LN2),i*(D=Math.pow(2,-S))<1&&(S--,D*=2),(i+=S+G>=1?X/D:X*Math.pow(2,1-G))*D>=2&&(S++,D/=2),S+G>=F?(M=0,S=F):S+G>=1?(M=(i*D-1)*Math.pow(2,v),S+=G):(M=i*Math.pow(2,G-1)*Math.pow(2,v),S=0));v>=8;u[l+ee]=255&M,ee+=te,M/=256,v-=8);for(S=S<<v|M,L+=v;L>0;u[l+ee]=255&S,ee+=te,S/=256,L-=8);u[l+ee-te]|=128*ne}),Am}function Im(){if(ly)return Bd;ly=1,Bd=i;var u=uy();function i(J){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(J)?J:new Uint8Array(J||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var l=4294967296,d=1/l,v=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function b(J){return J.type===i.Bytes?J.readVarint()+J.pos:J.pos+1}function S(J,ce,Se){return Se?4294967296*ce+(J>>>0):4294967296*(ce>>>0)+(J>>>0)}function M(J,ce,Se){var We=ce<=16383?1:ce<=2097151?2:ce<=268435455?3:Math.floor(Math.log(ce)/(7*Math.LN2));Se.realloc(We);for(var at=Se.pos-1;at>=J;at--)Se.buf[at+We]=Se.buf[at]}function D(J,ce){for(var Se=0;Se<J.length;Se++)ce.writeVarint(J[Se])}function L(J,ce){for(var Se=0;Se<J.length;Se++)ce.writeSVarint(J[Se])}function F(J,ce){for(var Se=0;Se<J.length;Se++)ce.writeFloat(J[Se])}function G(J,ce){for(var Se=0;Se<J.length;Se++)ce.writeDouble(J[Se])}function X(J,ce){for(var Se=0;Se<J.length;Se++)ce.writeBoolean(J[Se])}function ee(J,ce){for(var Se=0;Se<J.length;Se++)ce.writeFixed32(J[Se])}function te(J,ce){for(var Se=0;Se<J.length;Se++)ce.writeSFixed32(J[Se])}function ne(J,ce){for(var Se=0;Se<J.length;Se++)ce.writeFixed64(J[Se])}function he(J,ce){for(var Se=0;Se<J.length;Se++)ce.writeSFixed64(J[Se])}function ge(J,ce){return(J[ce]|J[ce+1]<<8|J[ce+2]<<16)+16777216*J[ce+3]}function ke(J,ce,Se){J[Se]=ce,J[Se+1]=ce>>>8,J[Se+2]=ce>>>16,J[Se+3]=ce>>>24}function xe(J,ce){return(J[ce]|J[ce+1]<<8|J[ce+2]<<16)+(J[ce+3]<<24)}return i.prototype={destroy:function(){this.buf=null},readFields:function(J,ce,Se){for(Se=Se||this.length;this.pos<Se;){var We=this.readVarint(),at=We>>3,Ye=this.pos;this.type=7&We,J(at,ce,this),this.pos===Ye&&this.skip(We)}return ce},readMessage:function(J,ce){return this.readFields(J,ce,this.readVarint()+this.pos)},readFixed32:function(){var J=ge(this.buf,this.pos);return this.pos+=4,J},readSFixed32:function(){var J=xe(this.buf,this.pos);return this.pos+=4,J},readFixed64:function(){var J=ge(this.buf,this.pos)+ge(this.buf,this.pos+4)*l;return this.pos+=8,J},readSFixed64:function(){var J=ge(this.buf,this.pos)+xe(this.buf,this.pos+4)*l;return this.pos+=8,J},readFloat:function(){var J=u.read(this.buf,this.pos,!0,23,4);return this.pos+=4,J},readDouble:function(){var J=u.read(this.buf,this.pos,!0,52,8);return this.pos+=8,J},readVarint:function(J){var ce,Se,We=this.buf;return ce=127&(Se=We[this.pos++]),Se<128?ce:(ce|=(127&(Se=We[this.pos++]))<<7,Se<128?ce:(ce|=(127&(Se=We[this.pos++]))<<14,Se<128?ce:(ce|=(127&(Se=We[this.pos++]))<<21,Se<128?ce:function(at,Ye,tt){var ct,ot,pt=tt.buf;if(ct=(112&(ot=pt[tt.pos++]))>>4,ot<128||(ct|=(127&(ot=pt[tt.pos++]))<<3,ot<128)||(ct|=(127&(ot=pt[tt.pos++]))<<10,ot<128)||(ct|=(127&(ot=pt[tt.pos++]))<<17,ot<128)||(ct|=(127&(ot=pt[tt.pos++]))<<24,ot<128)||(ct|=(1&(ot=pt[tt.pos++]))<<31,ot<128))return S(at,ct,Ye);throw new Error("Expected varint not more than 10 bytes")}(ce|=(15&(Se=We[this.pos]))<<28,J,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var J=this.readVarint();return J%2==1?(J+1)/-2:J/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var J=this.readVarint()+this.pos,ce=this.pos;return this.pos=J,J-ce>=12&&v?function(Se,We,at){return v.decode(Se.subarray(We,at))}(this.buf,ce,J):function(Se,We,at){for(var Ye="",tt=We;tt<at;){var ct,ot,pt,rt=Se[tt],Rt=null,Ht=rt>239?4:rt>223?3:rt>191?2:1;if(tt+Ht>at)break;Ht===1?rt<128&&(Rt=rt):Ht===2?(192&(ct=Se[tt+1]))==128&&(Rt=(31&rt)<<6|63&ct)<=127&&(Rt=null):Ht===3?(ot=Se[tt+2],(192&(ct=Se[tt+1]))==128&&(192&ot)==128&&((Rt=(15&rt)<<12|(63&ct)<<6|63&ot)<=2047||Rt>=55296&&Rt<=57343)&&(Rt=null)):Ht===4&&(ot=Se[tt+2],pt=Se[tt+3],(192&(ct=Se[tt+1]))==128&&(192&ot)==128&&(192&pt)==128&&((Rt=(15&rt)<<18|(63&ct)<<12|(63&ot)<<6|63&pt)<=65535||Rt>=1114112)&&(Rt=null)),Rt===null?(Rt=65533,Ht=1):Rt>65535&&(Rt-=65536,Ye+=String.fromCharCode(Rt>>>10&1023|55296),Rt=56320|1023&Rt),Ye+=String.fromCharCode(Rt),tt+=Ht}return Ye}(this.buf,ce,J)},readBytes:function(){var J=this.readVarint()+this.pos,ce=this.buf.subarray(this.pos,J);return this.pos=J,ce},readPackedVarint:function(J,ce){if(this.type!==i.Bytes)return J.push(this.readVarint(ce));var Se=b(this);for(J=J||[];this.pos<Se;)J.push(this.readVarint(ce));return J},readPackedSVarint:function(J){if(this.type!==i.Bytes)return J.push(this.readSVarint());var ce=b(this);for(J=J||[];this.pos<ce;)J.push(this.readSVarint());return J},readPackedBoolean:function(J){if(this.type!==i.Bytes)return J.push(this.readBoolean());var ce=b(this);for(J=J||[];this.pos<ce;)J.push(this.readBoolean());return J},readPackedFloat:function(J){if(this.type!==i.Bytes)return J.push(this.readFloat());var ce=b(this);for(J=J||[];this.pos<ce;)J.push(this.readFloat());return J},readPackedDouble:function(J){if(this.type!==i.Bytes)return J.push(this.readDouble());var ce=b(this);for(J=J||[];this.pos<ce;)J.push(this.readDouble());return J},readPackedFixed32:function(J){if(this.type!==i.Bytes)return J.push(this.readFixed32());var ce=b(this);for(J=J||[];this.pos<ce;)J.push(this.readFixed32());return J},readPackedSFixed32:function(J){if(this.type!==i.Bytes)return J.push(this.readSFixed32());var ce=b(this);for(J=J||[];this.pos<ce;)J.push(this.readSFixed32());return J},readPackedFixed64:function(J){if(this.type!==i.Bytes)return J.push(this.readFixed64());var ce=b(this);for(J=J||[];this.pos<ce;)J.push(this.readFixed64());return J},readPackedSFixed64:function(J){if(this.type!==i.Bytes)return J.push(this.readSFixed64());var ce=b(this);for(J=J||[];this.pos<ce;)J.push(this.readSFixed64());return J},skip:function(J){var ce=7&J;if(ce===i.Varint)for(;this.buf[this.pos++]>127;);else if(ce===i.Bytes)this.pos=this.readVarint()+this.pos;else if(ce===i.Fixed32)this.pos+=4;else{if(ce!==i.Fixed64)throw new Error("Unimplemented type: "+ce);this.pos+=8}},writeTag:function(J,ce){this.writeVarint(J<<3|ce)},realloc:function(J){for(var ce=this.length||16;ce<this.pos+J;)ce*=2;if(ce!==this.length){var Se=new Uint8Array(ce);Se.set(this.buf),this.buf=Se,this.length=ce}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(J){this.realloc(4),ke(this.buf,J,this.pos),this.pos+=4},writeSFixed32:function(J){this.realloc(4),ke(this.buf,J,this.pos),this.pos+=4},writeFixed64:function(J){this.realloc(8),ke(this.buf,-1&J,this.pos),ke(this.buf,Math.floor(J*d),this.pos+4),this.pos+=8},writeSFixed64:function(J){this.realloc(8),ke(this.buf,-1&J,this.pos),ke(this.buf,Math.floor(J*d),this.pos+4),this.pos+=8},writeVarint:function(J){(J=+J||0)>268435455||J<0?function(ce,Se){var We,at;if(ce>=0?(We=ce%4294967296|0,at=ce/4294967296|0):(at=~(-ce/4294967296),4294967295^(We=~(-ce%4294967296))?We=We+1|0:(We=0,at=at+1|0)),ce>=18446744073709552e3||ce<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Se.realloc(10),function(Ye,tt,ct){ct.buf[ct.pos++]=127&Ye|128,Ye>>>=7,ct.buf[ct.pos++]=127&Ye|128,Ye>>>=7,ct.buf[ct.pos++]=127&Ye|128,Ye>>>=7,ct.buf[ct.pos++]=127&Ye|128,ct.buf[ct.pos]=127&(Ye>>>=7)}(We,0,Se),function(Ye,tt){var ct=(7&Ye)<<4;tt.buf[tt.pos++]|=ct|((Ye>>>=3)?128:0),Ye&&(tt.buf[tt.pos++]=127&Ye|((Ye>>>=7)?128:0),Ye&&(tt.buf[tt.pos++]=127&Ye|((Ye>>>=7)?128:0),Ye&&(tt.buf[tt.pos++]=127&Ye|((Ye>>>=7)?128:0),Ye&&(tt.buf[tt.pos++]=127&Ye|((Ye>>>=7)?128:0),Ye&&(tt.buf[tt.pos++]=127&Ye)))))}(at,Se)}(J,this):(this.realloc(4),this.buf[this.pos++]=127&J|(J>127?128:0),J<=127||(this.buf[this.pos++]=127&(J>>>=7)|(J>127?128:0),J<=127||(this.buf[this.pos++]=127&(J>>>=7)|(J>127?128:0),J<=127||(this.buf[this.pos++]=J>>>7&127))))},writeSVarint:function(J){this.writeVarint(J<0?2*-J-1:2*J)},writeBoolean:function(J){this.writeVarint(!!J)},writeString:function(J){J=String(J),this.realloc(4*J.length),this.pos++;var ce=this.pos;this.pos=function(We,at,Ye){for(var tt,ct,ot=0;ot<at.length;ot++){if((tt=at.charCodeAt(ot))>55295&&tt<57344){if(!ct){tt>56319||ot+1===at.length?(We[Ye++]=239,We[Ye++]=191,We[Ye++]=189):ct=tt;continue}if(tt<56320){We[Ye++]=239,We[Ye++]=191,We[Ye++]=189,ct=tt;continue}tt=ct-55296<<10|tt-56320|65536,ct=null}else ct&&(We[Ye++]=239,We[Ye++]=191,We[Ye++]=189,ct=null);tt<128?We[Ye++]=tt:(tt<2048?We[Ye++]=tt>>6|192:(tt<65536?We[Ye++]=tt>>12|224:(We[Ye++]=tt>>18|240,We[Ye++]=tt>>12&63|128),We[Ye++]=tt>>6&63|128),We[Ye++]=63&tt|128)}return Ye}(this.buf,J,this.pos);var Se=this.pos-ce;Se>=128&&M(ce,Se,this),this.pos=ce-1,this.writeVarint(Se),this.pos+=Se},writeFloat:function(J){this.realloc(4),u.write(this.buf,J,this.pos,!0,23,4),this.pos+=4},writeDouble:function(J){this.realloc(8),u.write(this.buf,J,this.pos,!0,52,8),this.pos+=8},writeBytes:function(J){var ce=J.length;this.writeVarint(ce),this.realloc(ce);for(var Se=0;Se<ce;Se++)this.buf[this.pos++]=J[Se]},writeRawMessage:function(J,ce){this.pos++;var Se=this.pos;J(ce,this);var We=this.pos-Se;We>=128&&M(Se,We,this),this.pos=Se-1,this.writeVarint(We),this.pos+=We},writeMessage:function(J,ce,Se){this.writeTag(J,i.Bytes),this.writeRawMessage(ce,Se)},writePackedVarint:function(J,ce){ce.length&&this.writeMessage(J,D,ce)},writePackedSVarint:function(J,ce){ce.length&&this.writeMessage(J,L,ce)},writePackedBoolean:function(J,ce){ce.length&&this.writeMessage(J,X,ce)},writePackedFloat:function(J,ce){ce.length&&this.writeMessage(J,F,ce)},writePackedDouble:function(J,ce){ce.length&&this.writeMessage(J,G,ce)},writePackedFixed32:function(J,ce){ce.length&&this.writeMessage(J,ee,ce)},writePackedSFixed32:function(J,ce){ce.length&&this.writeMessage(J,te,ce)},writePackedFixed64:function(J,ce){ce.length&&this.writeMessage(J,ne,ce)},writePackedSFixed64:function(J,ce){ce.length&&this.writeMessage(J,he,ce)},writeBytesField:function(J,ce){this.writeTag(J,i.Bytes),this.writeBytes(ce)},writeFixed32Field:function(J,ce){this.writeTag(J,i.Fixed32),this.writeFixed32(ce)},writeSFixed32Field:function(J,ce){this.writeTag(J,i.Fixed32),this.writeSFixed32(ce)},writeFixed64Field:function(J,ce){this.writeTag(J,i.Fixed64),this.writeFixed64(ce)},writeSFixed64Field:function(J,ce){this.writeTag(J,i.Fixed64),this.writeSFixed64(ce)},writeVarintField:function(J,ce){this.writeTag(J,i.Varint),this.writeVarint(ce)},writeSVarintField:function(J,ce){this.writeTag(J,i.Varint),this.writeSVarint(ce)},writeStringField:function(J,ce){this.writeTag(J,i.Bytes),this.writeString(ce)},writeFloatField:function(J,ce){this.writeTag(J,i.Fixed32),this.writeFloat(ce)},writeDoubleField:function(J,ce){this.writeTag(J,i.Fixed64),this.writeDouble(ce)},writeBooleanField:function(J,ce){this.writeVarintField(J,!!ce)}},Bd}var qo,Lh=P(Im());function cy(u,i,l){u===1&&l.readMessage(km,i)}function km(u,i,l){if(u===3){const{id:d,bitmap:v,width:b,height:S,left:M,top:D,advance:L}=l.readMessage(O_,{});i.push({id:d,bitmap:new Tc({width:b+6,height:S+6},v),metrics:{width:b,height:S,left:M,top:D,advance:L}})}}function O_(u,i,l){u===1?i.id=l.readVarint():u===2?i.bitmap=l.readBytes():u===3?i.width=l.readVarint():u===4?i.height=l.readVarint():u===5?i.left=l.readSVarint():u===6?i.top=l.readSVarint():u===7&&(i.advance=l.readVarint())}function Dm(u){let i=0,l=0;for(const S of u)i+=S.w*S.h,l=Math.max(l,S.w);u.sort((S,M)=>M.h-S.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),l),h:1/0}];let v=0,b=0;for(const S of u)for(let M=d.length-1;M>=0;M--){const D=d[M];if(!(S.w>D.w||S.h>D.h)){if(S.x=D.x,S.y=D.y,b=Math.max(b,S.y+S.h),v=Math.max(v,S.x+S.w),S.w===D.w&&S.h===D.h){const L=d.pop();M<d.length&&(d[M]=L)}else S.h===D.h?(D.x+=S.w,D.w-=S.w):S.w===D.w?(D.y+=S.h,D.h-=S.h):(d.push({x:D.x+S.w,y:D.y,w:D.w-S.w,h:S.h}),D.y+=S.h,D.h-=S.h);break}}return{w:v,h:b,fill:i/(v*b)||0}}class $d{constructor(i,{pixelRatio:l,version:d,stretchX:v,stretchY:b,content:S,textFitWidth:M,textFitHeight:D}){this.paddedRect=i,this.pixelRatio=l,this.stretchX=v,this.stretchY=b,this.content=S,this.version=d,this.textFitWidth=M,this.textFitHeight=D}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Vd{constructor(i,l){const d={},v={};this.haveRenderCallbacks=[];const b=[];this.addImages(i,d,b),this.addImages(l,v,b);const{w:S,h:M}=Dm(b),D=new Xi({width:S||1,height:M||1});for(const L in i){const F=i[L],G=d[L].paddedRect;Xi.copy(F.data,D,{x:0,y:0},{x:G.x+1,y:G.y+1},F.data)}for(const L in l){const F=l[L],G=v[L].paddedRect,X=G.x+1,ee=G.y+1,te=F.data.width,ne=F.data.height;Xi.copy(F.data,D,{x:0,y:0},{x:X,y:ee},F.data),Xi.copy(F.data,D,{x:0,y:ne-1},{x:X,y:ee-1},{width:te,height:1}),Xi.copy(F.data,D,{x:0,y:0},{x:X,y:ee+ne},{width:te,height:1}),Xi.copy(F.data,D,{x:te-1,y:0},{x:X-1,y:ee},{width:1,height:ne}),Xi.copy(F.data,D,{x:0,y:0},{x:X+te,y:ee},{width:1,height:ne})}this.image=D,this.iconPositions=d,this.patternPositions=v}addImages(i,l,d){for(const v in i){const b=i[v],S={x:0,y:0,w:b.data.width+2,h:b.data.height+2};d.push(S),l[v]=new $d(S,b),b.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(i,l){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in i.updatedImages)this.patchUpdatedImage(this.iconPositions[d],i.getImage(d),l),this.patchUpdatedImage(this.patternPositions[d],i.getImage(d),l)}patchUpdatedImage(i,l,d){if(!i||!l||i.version===l.version)return;i.version=l.version;const[v,b]=i.tl;d.update(l.data,void 0,{x:v,y:b})}}Tt("ImagePosition",$d),Tt("ImageAtlas",Vd),p.an=void 0,(qo=p.an||(p.an={}))[qo.none=0]="none",qo[qo.horizontal=1]="horizontal",qo[qo.vertical=2]="vertical",qo[qo.horizontalOnly=3]="horizontalOnly";class Lc{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(i,l,d){const v=new Lc;return v.scale=i||1,v.fontStack=l,v.verticalAlign=d||"bottom",v}static forImage(i,l){const d=new Lc;return d.imageName=i,d.verticalAlign=l||"bottom",d}}class El{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,l){const d=new El;for(let v=0;v<i.sections.length;v++){const b=i.sections[v];b.image?d.addImageSection(b):d.addTextSection(b,l)}return d}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let l="";for(let d=0;d<i.length;d++){const v=i.charCodeAt(d+1)||null,b=i.charCodeAt(d-1)||null;l+=v&&wh(v)&&!Mu[i[d+1]]||b&&wh(b)&&!Mu[i[d-1]]||!Mu[i[d]]?i[d]:Mu[i[d]]}return l}(this.text)}trim(){let i=0;for(let d=0;d<this.text.length&&up[this.text.charCodeAt(d)];d++)i++;let l=this.text.length;for(let d=this.text.length-1;d>=0&&d>=i&&up[this.text.charCodeAt(d)];d--)l--;this.text=this.text.substring(i,l),this.sectionIndex=this.sectionIndex.slice(i,l)}substring(i,l){const d=new El;return d.text=this.text.substring(i,l),d.sectionIndex=this.sectionIndex.slice(i,l),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,l)=>Math.max(i,this.sections[l].scale),0)}getMaxImageSize(i){let l=0,d=0;for(let v=0;v<this.length();v++){const b=this.getSection(v);if(b.imageName){const S=i[b.imageName];if(!S)continue;const M=S.displaySize;l=Math.max(l,M[0]),d=Math.max(d,M[1])}}return{maxImageWidth:l,maxImageHeight:d}}addTextSection(i,l){this.text+=i.text,this.sections.push(Lc.forText(i.scale,i.fontStack||l,i.verticalAlign));const d=this.sections.length-1;for(let v=0;v<i.text.length;++v)this.sectionIndex.push(d)}addImageSection(i){const l=i.image?i.image.name:"";if(l.length===0)return void Jr("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Lc.forImage(l,i.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Jr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ud(u,i,l,d,v,b,S,M,D,L,F,G,X,ee,te){const ne=El.fromFeature(u,v);let he;G===p.an.vertical&&ne.verticalizePunctuation();const{processBidirectionalText:ge,processStyledBidirectionalText:ke}=As;if(ge&&ne.sections.length===1){he=[];const ce=ge(ne.toString(),w(ne,L,b,i,d,ee));for(const Se of ce){const We=new El;We.text=Se,We.sections=ne.sections;for(let at=0;at<Se.length;at++)We.sectionIndex.push(0);he.push(We)}}else if(ke){he=[];const ce=ke(ne.text,ne.sectionIndex,w(ne,L,b,i,d,ee));for(const Se of ce){const We=new El;We.text=Se[0],We.sectionIndex=Se[1],We.sections=ne.sections,he.push(We)}}else he=function(ce,Se){const We=[],at=ce.text;let Ye=0;for(const tt of Se)We.push(ce.substring(Ye,tt)),Ye=tt;return Ye<at.length&&We.push(ce.substring(Ye,at.length)),We}(ne,w(ne,L,b,i,d,ee));const xe=[],J={positionedLines:xe,text:ne.toString(),top:F[1],bottom:F[1],left:F[0],right:F[0],writingMode:G,iconsInText:!1,verticalizable:!1};return function(ce,Se,We,at,Ye,tt,ct,ot,pt,rt,Rt,Ht){let qt=0,jt=0,Mr=0,In=0;const ui=ot==="right"?1:ot==="left"?0:.5,ta=Nn/Ht;let Zo=0;for(const bn of Ye){bn.trim();const xi=bn.getMaxScale(),Bi={positionedGlyphs:[],lineOffset:0};ce.positionedLines[Zo]=Bi;const $i=Bi.positionedGlyphs;let za=0;if(!bn.length()){jt+=tt,++Zo;continue}const Ho=j(at,bn,ta);for(let eo=0;eo<bn.length();eo++){const ci=bn.getSection(eo),wi=bn.getSectionIndex(eo),Si=bn.getCharCode(eo),ei=ae(pt,Rt,Si);let dn;if(ci.imageName){if(ce.iconsInText=!0,ci.scale=ci.scale*ta,dn=Oe(ci,ei,xi,Ho,at),!dn)continue;za=Math.max(za,dn.imageOffset)}else if(dn=Pe(ci,Si,ei,Ho,Se,We),!dn)continue;const{rect:Ml,metrics:pp,baselineOffset:Al}=dn;$i.push({glyph:Si,imageName:ci.imageName,x:qt,y:jt+Al+-17,vertical:ei,scale:ci.scale,fontStack:ci.fontStack,sectionIndex:wi,metrics:pp,rect:Ml}),ei?(ce.verticalizable=!0,qt+=(ci.imageName?pp.advance:Nn)*ci.scale+rt):qt+=pp.advance*ci.scale+rt}$i.length!==0&&(Mr=Math.max(qt-rt,Mr),et($i,0,$i.length-1,ui)),qt=0,Bi.lineOffset=Math.max(za,(xi-1)*Nn);const bi=tt*xi+za;jt+=bi,In=Math.max(bi,In),++Zo}const{horizontalAlign:Ja,verticalAlign:Fi}=A(ct);(function(bn,xi,Bi,$i,za,Ho,bi,eo,ci){const wi=(xi-Bi)*za;let Si=0;Si=Ho!==bi?-eo*$i- -17:-$i*ci*bi+.5*bi;for(const ei of bn)for(const dn of ei.positionedGlyphs)dn.x+=wi,dn.y+=Si})(ce.positionedLines,ui,Ja,Fi,Mr,In,tt,jt,Ye.length),ce.top+=-Fi*jt,ce.bottom=ce.top+jt,ce.left+=-Ja*Mr,ce.right=ce.left+Mr}(J,i,l,d,he,S,M,D,G,L,X,te),!function(ce){for(const Se of ce)if(Se.positionedGlyphs.length!==0)return!1;return!0}(xe)&&J}const up={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},cp={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},R_={40:!0};function jh(u,i,l,d,v,b){if(i.imageName){const S=d[i.imageName];return S?S.displaySize[0]*i.scale*Nn/b+v:0}{const S=l[i.fontStack],M=S&&S[u];return M?M.metrics.advance*i.scale+v:0}}function hy(u,i,l,d){const v=Math.pow(u-i,2);return d?u<i?v/2:2*v:v+Math.abs(l)*l}function hp(u,i,l){let d=0;return u===10&&(d-=1e4),l&&(d+=150),u!==40&&u!==65288||(d+=50),i!==41&&i!==65289||(d+=50),d}function c(u,i,l,d,v,b){let S=null,M=hy(i,l,v,b);for(const D of d){const L=hy(i-D.x,l,v,b)+D.badness;L<=M&&(S=D,M=L)}return{index:u,x:i,priorBreak:S,badness:M}}function m(u){return u?m(u.priorBreak).concat(u.index):[]}function w(u,i,l,d,v,b){if(!u)return[];const S=[],M=function(G,X,ee,te,ne,he){let ge=0;for(let ke=0;ke<G.length();ke++){const xe=G.getSection(ke);ge+=jh(G.getCharCode(ke),xe,te,ne,X,he)}return ge/Math.max(1,Math.ceil(ge/ee))}(u,i,l,d,v,b),D=u.text.indexOf("​")>=0;let L=0;for(let G=0;G<u.length();G++){const X=u.getSection(G),ee=u.getCharCode(G);if(up[ee]||(L+=jh(ee,X,d,v,i,b)),G<u.length()-1){const te=!((F=ee)<11904)&&(!!rr["CJK Compatibility Forms"](F)||!!rr["CJK Compatibility"](F)||!!rr["CJK Strokes"](F)||!!rr["CJK Symbols and Punctuation"](F)||!!rr["Enclosed CJK Letters and Months"](F)||!!rr["Halfwidth and Fullwidth Forms"](F)||!!rr["Ideographic Description Characters"](F)||!!rr["Vertical Forms"](F)||mc.test(String.fromCodePoint(F)));(cp[ee]||te||X.imageName||G!==u.length()-2&&R_[u.getCharCode(G+1)])&&S.push(c(G+1,L,M,S,hp(ee,u.getCharCode(G+1),te&&D),!1))}}var F;return m(c(u.length(),L,M,S,0,!0))}function A(u){let i=.5,l=.5;switch(u){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:i,verticalAlign:l}}function j(u,i,l){const d=i.getMaxScale()*Nn,{maxImageWidth:v,maxImageHeight:b}=i.getMaxImageSize(u),S=Math.max(d,b*l);return{verticalLineContentWidth:Math.max(d,v*l),horizontalLineContentHeight:S}}function V(u){switch(u){case"top":return 0;case"center":return .5;default:return 1}}function ae(u,i,l){return!(u===p.an.horizontal||!i&&!uu(l)||i&&(up[l]||(d=l,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(d)))));var d}function Pe(u,i,l,d,v,b){const S=b[u.fontStack],M=function(L,F,G,X){if(L&&L.rect)return L;const ee=F[G.fontStack],te=ee&&ee[X];return te?{rect:null,metrics:te.metrics}:null}(S&&S[i],v,u,i);if(M===null)return null;let D;if(l)D=d.verticalLineContentWidth-u.scale*Nn;else{const L=V(u.verticalAlign);D=(d.horizontalLineContentHeight-u.scale*Nn)*L}return{rect:M.rect,metrics:M.metrics,baselineOffset:D}}function Oe(u,i,l,d,v){const b=v[u.imageName];if(!b)return null;const S=b.paddedRect,M=b.displaySize,D={width:M[0],height:M[1],left:1,top:-3,advance:i?M[1]:M[0]};let L;if(i)L=d.verticalLineContentWidth-M[1]*u.scale;else{const F=V(u.verticalAlign);L=(d.horizontalLineContentHeight-M[1]*u.scale)*F}return{rect:S,metrics:D,baselineOffset:L,imageOffset:(i?M[0]:M[1])*u.scale-Nn*l}}function et(u,i,l,d){if(d===0)return;const v=u[l],b=(u[l].x+v.metrics.advance*v.scale)*d;for(let S=i;S<=l;S++)u[S].x-=b}function mt(u,i,l){const{horizontalAlign:d,verticalAlign:v}=A(l),b=i[0]-u.displaySize[0]*d,S=i[1]-u.displaySize[1]*v;return{image:u,top:S,bottom:S+u.displaySize[1],left:b,right:b+u.displaySize[0]}}function xt(u){var i,l;let d=u.left,v=u.top,b=u.right-d,S=u.bottom-v;const M=(i=u.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",D=(l=u.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",L=(u.image.content[2]-u.image.content[0])/(u.image.content[3]-u.image.content[1]);if(D==="proportional"){if(M==="stretchOnly"&&b/S<L||M==="proportional"){const F=Math.ceil(S*L);d*=F/b,b=F}}else if(M==="proportional"&&D==="stretchOnly"&&L!==0&&b/S>L){const F=Math.ceil(b/L);v*=F/S,S=F}return{x1:d,y1:v,x2:d+b,y2:v+S}}function dt(u,i,l,d,v,b){const S=u.image;let M;if(S.content){const he=S.content,ge=S.pixelRatio||1;M=[he[0]/ge,he[1]/ge,S.displaySize[0]-he[2]/ge,S.displaySize[1]-he[3]/ge]}const D=i.left*b,L=i.right*b;let F,G,X,ee;l==="width"||l==="both"?(ee=v[0]+D-d[3],G=v[0]+L+d[1]):(ee=v[0]+(D+L-S.displaySize[0])/2,G=ee+S.displaySize[0]);const te=i.top*b,ne=i.bottom*b;return l==="height"||l==="both"?(F=v[1]+te-d[0],X=v[1]+ne+d[2]):(F=v[1]+(te+ne-S.displaySize[1])/2,X=F+S.displaySize[1]),{image:S,top:F,right:G,bottom:X,left:ee,collisionPadding:M}}const kt=128,zt=32640;function Vt(u,i){const{expression:l}=i;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new Hr(u+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:v}=l;let b=0;for(;b<d.length&&d[b]<=u;)b++;b=Math.max(0,b-1);let S=b;for(;S<d.length&&d[S]<u+1;)S++;S=Math.min(d.length-1,S);const M=d[b],D=d[S];return l.kind==="composite"?{kind:"composite",minZoom:M,maxZoom:D,interpolationType:v}:{kind:"camera",minZoom:M,maxZoom:D,minSize:l.evaluate(new Hr(M)),maxSize:l.evaluate(new Hr(D)),interpolationType:v}}}function An(u,i,l){let d="never";const v=u.get(i);return v?d=v:u.get(l)&&(d="always"),d}const Ze=Dc.VectorTileFeature.types,je=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ke(u,i,l,d,v,b,S,M,D,L,F,G,X){const ee=M?Math.min(zt,Math.round(M[0])):0,te=M?Math.min(zt,Math.round(M[1])):0;u.emplaceBack(i,l,Math.round(32*d),Math.round(32*v),b,S,(ee<<1)+(D?1:0),te,16*L,16*F,256*G,256*X)}function St(u,i,l){u.emplaceBack(i.x,i.y,l),u.emplaceBack(i.x,i.y,l),u.emplaceBack(i.x,i.y,l),u.emplaceBack(i.x,i.y,l)}function Wt(u){for(const i of u.sections)if(yc(i.text))return!0;return!1}class nr{constructor(i){this.layoutVertexArray=new dr,this.indexArray=new Kr,this.programConfigurations=i,this.segments=new Er,this.dynamicLayoutVertexArray=new Or,this.opacityVertexArray=new ln,this.hasVisibleVertices=!1,this.placedSymbolArray=new pe}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,l,d,v){this.isEmpty()||(d&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,xo.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,Mm.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,je,!0),this.opacityVertexBuffer.itemSize=1),(d||v)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Tt("SymbolBuffers",nr);class ir{constructor(i,l,d){this.layoutVertexArray=new i,this.layoutAttributes=l,this.indexArray=new d,this.segments=new Er,this.collisionVertexArray=new Xr}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,D_.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Tt("CollisionBuffers",ir);class ar{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(S=>S.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Vt(this.zoom,l["text-size"]),this.iconSizeData=Vt(this.zoom,l["icon-size"]);const d=this.layers[0].layout,v=d.get("symbol-sort-key"),b=d.get("symbol-z-order");this.canOverlap=An(d,"text-overlap","text-allow-overlap")!=="never"||An(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(S=>p.an[S])),this.stateDependentLayerIds=this.layers.filter(S=>S.isStateDependent()).map(S=>S.id),this.sourceID=i.sourceID}createArrays(){this.text=new nr(new ya(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new nr(new ya(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new ye,this.lineVertexArray=new Te,this.symbolInstances=new we,this.textAnchorOffsets=new ve}calculateGlyphDependencies(i,l,d,v,b){for(let S=0;S<i.length;S++)if(l[i.charCodeAt(S)]=!0,(d||v)&&b){const M=Mu[i.charAt(S)];M&&(l[M.charCodeAt(0)]=!0)}}populate(i,l,d){const v=this.layers[0],b=v.layout,S=b.get("text-font"),M=b.get("text-field"),D=b.get("icon-image"),L=(M.value.kind!=="constant"||M.value.value instanceof pn&&!M.value.value.isEmpty()||M.value.value.toString().length>0)&&(S.value.kind!=="constant"||S.value.value.length>0),F=D.value.kind!=="constant"||!!D.value.value||Object.keys(D.parameters).length>0,G=b.get("symbol-sort-key");if(this.features=[],!L&&!F)return;const X=l.iconDependencies,ee=l.glyphDependencies,te=l.availableImages,ne=new Hr(this.zoom,{globalState:this.globalState});for(const{feature:he,id:ge,index:ke,sourceLayerIndex:xe}of i){const J=v._featureFilter.needGeometry,ce=_u(he,J);if(!v._featureFilter.filter(ne,ce,d))continue;let Se,We;if(J||(ce.geometry=vu(he)),L){const Ye=v.getValueAndResolveTokens("text-field",ce,d,te),tt=pn.factory(Ye),ct=this.hasRTLText=this.hasRTLText||Wt(tt);(!ct||As.getRTLTextPluginStatus()==="unavailable"||ct&&As.isParsed())&&(Se=zc(tt,v,ce))}if(F){const Ye=v.getValueAndResolveTokens("icon-image",ce,d,te);We=Ye instanceof Ai?Ye:Ai.fromString(Ye)}if(!Se&&!We)continue;const at=this.sortFeaturesByKey?G.evaluate(ce,{},d):void 0;if(this.features.push({id:ge,text:Se,icon:We,index:ke,sourceLayerIndex:xe,geometry:ce.geometry,properties:he.properties,type:Ze[he.type],sortKey:at}),We&&(X[We.name]=!0),Se){const Ye=S.evaluate(ce,{},d).join(","),tt=b.get("text-rotation-alignment")!=="viewport"&&b.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(p.an.vertical)>=0;for(const ct of Se.sections)if(ct.image)X[ct.image.name]=!0;else{const ot=Oi(Se.toString()),pt=ct.fontStack||Ye,rt=ee[pt]=ee[pt]||{};this.calculateGlyphDependencies(ct.text,rt,tt,this.allowVerticalPlacement,ot)}}}b.get("symbol-placement")==="line"&&(this.features=function(he){const ge={},ke={},xe=[];let J=0;function ce(Ye){xe.push(he[Ye]),J++}function Se(Ye,tt,ct){const ot=ke[Ye];return delete ke[Ye],ke[tt]=ot,xe[ot].geometry[0].pop(),xe[ot].geometry[0]=xe[ot].geometry[0].concat(ct[0]),ot}function We(Ye,tt,ct){const ot=ge[tt];return delete ge[tt],ge[Ye]=ot,xe[ot].geometry[0].shift(),xe[ot].geometry[0]=ct[0].concat(xe[ot].geometry[0]),ot}function at(Ye,tt,ct){const ot=ct?tt[0][tt[0].length-1]:tt[0][0];return`${Ye}:${ot.x}:${ot.y}`}for(let Ye=0;Ye<he.length;Ye++){const tt=he[Ye],ct=tt.geometry,ot=tt.text?tt.text.toString():null;if(!ot){ce(Ye);continue}const pt=at(ot,ct),rt=at(ot,ct,!0);if(pt in ke&&rt in ge&&ke[pt]!==ge[rt]){const Rt=We(pt,rt,ct),Ht=Se(pt,rt,xe[Rt].geometry);delete ge[pt],delete ke[rt],ke[at(ot,xe[Ht].geometry,!0)]=Ht,xe[Rt].geometry=null}else pt in ke?Se(pt,rt,ct):rt in ge?We(pt,rt,ct):(ce(Ye),ge[pt]=J-1,ke[rt]=J-1)}return xe.filter(Ye=>Ye.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((he,ge)=>he.sortKey-ge.sortKey)}update(i,l,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,l,this.layers,d),this.icon.programConfigurations.updatePaintArrays(i,l,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,l){const d=this.lineVertexArray.length;if(i.segment!==void 0){let v=i.dist(l[i.segment+1]),b=i.dist(l[i.segment]);const S={};for(let M=i.segment+1;M<l.length;M++)S[M]={x:l[M].x,y:l[M].y,tileUnitDistanceFromAnchor:v},M<l.length-1&&(v+=l[M+1].dist(l[M]));for(let M=i.segment||0;M>=0;M--)S[M]={x:l[M].x,y:l[M].y,tileUnitDistanceFromAnchor:b},M>0&&(b+=l[M-1].dist(l[M]));for(let M=0;M<l.length;M++){const D=S[M];this.lineVertexArray.emplaceBack(D.x,D.y,D.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(i,l,d,v,b,S,M,D,L,F,G,X){const ee=i.indexArray,te=i.layoutVertexArray,ne=i.segments.prepareSegment(4*l.length,te,ee,this.canOverlap?S.sortKey:void 0),he=this.glyphOffsetArray.length,ge=ne.vertexLength,ke=this.allowVerticalPlacement&&M===p.an.vertical?Math.PI/2:0,xe=S.text&&S.text.sections;for(let J=0;J<l.length;J++){const{tl:ce,tr:Se,bl:We,br:at,tex:Ye,pixelOffsetTL:tt,pixelOffsetBR:ct,minFontScaleX:ot,minFontScaleY:pt,glyphOffset:rt,isSDF:Rt,sectionIndex:Ht}=l[J],qt=ne.vertexLength,jt=rt[1];Ke(te,D.x,D.y,ce.x,jt+ce.y,Ye.x,Ye.y,d,Rt,tt.x,tt.y,ot,pt),Ke(te,D.x,D.y,Se.x,jt+Se.y,Ye.x+Ye.w,Ye.y,d,Rt,ct.x,tt.y,ot,pt),Ke(te,D.x,D.y,We.x,jt+We.y,Ye.x,Ye.y+Ye.h,d,Rt,tt.x,ct.y,ot,pt),Ke(te,D.x,D.y,at.x,jt+at.y,Ye.x+Ye.w,Ye.y+Ye.h,d,Rt,ct.x,ct.y,ot,pt),St(i.dynamicLayoutVertexArray,D,ke),ee.emplaceBack(qt,qt+2,qt+1),ee.emplaceBack(qt+1,qt+2,qt+3),ne.vertexLength+=4,ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(rt[0]),J!==l.length-1&&Ht===l[J+1].sectionIndex||i.programConfigurations.populatePaintArrays(te.length,S,S.index,{},X,xe&&xe[Ht])}i.placedSymbolArray.emplaceBack(D.x,D.y,he,this.glyphOffsetArray.length-he,ge,L,F,D.segment,d?d[0]:0,d?d[1]:0,v[0],v[1],M,0,!1,0,G)}_addCollisionDebugVertex(i,l,d,v,b,S){return l.emplaceBack(0,0),i.emplaceBack(d.x,d.y,v,b,Math.round(S.x),Math.round(S.y))}addCollisionDebugVertices(i,l,d,v,b,S,M){const D=b.segments.prepareSegment(4,b.layoutVertexArray,b.indexArray),L=D.vertexLength,F=b.layoutVertexArray,G=b.collisionVertexArray,X=M.anchorX,ee=M.anchorY;this._addCollisionDebugVertex(F,G,S,X,ee,new B(i,l)),this._addCollisionDebugVertex(F,G,S,X,ee,new B(d,l)),this._addCollisionDebugVertex(F,G,S,X,ee,new B(d,v)),this._addCollisionDebugVertex(F,G,S,X,ee,new B(i,v)),D.vertexLength+=4;const te=b.indexArray;te.emplaceBack(L,L+1),te.emplaceBack(L+1,L+2),te.emplaceBack(L+2,L+3),te.emplaceBack(L+3,L),D.primitiveLength+=4}addDebugCollisionBoxes(i,l,d,v){for(let b=i;b<l;b++){const S=this.collisionBoxArray.get(b);this.addCollisionDebugVertices(S.x1,S.y1,S.x2,S.y2,v?this.textCollisionBox:this.iconCollisionBox,S.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ir(Gr,Cl.members,Nr),this.iconCollisionBox=new ir(Gr,Cl.members,Nr);for(let i=0;i<this.symbolInstances.length;i++){const l=this.symbolInstances.get(i);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(i,l,d,v,b,S,M,D,L){const F={};for(let G=l;G<d;G++){const X=i.get(G);F.textBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},F.textFeatureIndex=X.featureIndex;break}for(let G=v;G<b;G++){const X=i.get(G);F.verticalTextBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},F.verticalTextFeatureIndex=X.featureIndex;break}for(let G=S;G<M;G++){const X=i.get(G);F.iconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},F.iconFeatureIndex=X.featureIndex;break}for(let G=D;G<L;G++){const X=i.get(G);F.verticalIconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},F.verticalIconFeatureIndex=X.featureIndex;break}return F}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const d=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,l){const d=i.placedSymbolArray.get(l),v=d.vertexStartIndex+4*d.numGlyphs;for(let b=d.vertexStartIndex;b<v;b+=4)i.indexArray.emplaceBack(b,b+2,b+1),i.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(i),d=Math.cos(i),v=[],b=[],S=[];for(let M=0;M<this.symbolInstances.length;++M){S.push(M);const D=this.symbolInstances.get(M);v.push(0|Math.round(l*D.anchorX+d*D.anchorY)),b.push(D.featureIndex)}return S.sort((M,D)=>v[M]-v[D]||b[D]-b[M]),S}addToSortKeyRanges(i,l){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===l?d.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const d=this.symbolInstances.get(l);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((v,b,S)=>{v>=0&&S.indexOf(v)===b&&this.addIndicesForPlacedSymbol(this.text,v)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let li,Vr;Tt("SymbolBucket",ar,{omit:["layers","collisionBoxArray","features","compareText"]}),ar.MAX_GLYPHS=65535,ar.addDynamicAttributes=St;var js={get paint(){return Vr=Vr||new tn({"icon-opacity":new Gt(Me.paint_symbol["icon-opacity"]),"icon-color":new Gt(Me.paint_symbol["icon-color"]),"icon-halo-color":new Gt(Me.paint_symbol["icon-halo-color"]),"icon-halo-width":new Gt(Me.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Gt(Me.paint_symbol["icon-halo-blur"]),"icon-translate":new Dt(Me.paint_symbol["icon-translate"]),"icon-translate-anchor":new Dt(Me.paint_symbol["icon-translate-anchor"]),"text-opacity":new Gt(Me.paint_symbol["text-opacity"]),"text-color":new Gt(Me.paint_symbol["text-color"],{runtimeType:Gi,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new Gt(Me.paint_symbol["text-halo-color"]),"text-halo-width":new Gt(Me.paint_symbol["text-halo-width"]),"text-halo-blur":new Gt(Me.paint_symbol["text-halo-blur"]),"text-translate":new Dt(Me.paint_symbol["text-translate"]),"text-translate-anchor":new Dt(Me.paint_symbol["text-translate-anchor"])})},get layout(){return li=li||new tn({"symbol-placement":new Dt(Me.layout_symbol["symbol-placement"]),"symbol-spacing":new Dt(Me.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Dt(Me.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Gt(Me.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Dt(Me.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Dt(Me.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Dt(Me.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Dt(Me.layout_symbol["icon-ignore-placement"]),"icon-optional":new Dt(Me.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Dt(Me.layout_symbol["icon-rotation-alignment"]),"icon-size":new Gt(Me.layout_symbol["icon-size"]),"icon-text-fit":new Dt(Me.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Dt(Me.layout_symbol["icon-text-fit-padding"]),"icon-image":new Gt(Me.layout_symbol["icon-image"]),"icon-rotate":new Gt(Me.layout_symbol["icon-rotate"]),"icon-padding":new Gt(Me.layout_symbol["icon-padding"]),"icon-keep-upright":new Dt(Me.layout_symbol["icon-keep-upright"]),"icon-offset":new Gt(Me.layout_symbol["icon-offset"]),"icon-anchor":new Gt(Me.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Dt(Me.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Dt(Me.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Dt(Me.layout_symbol["text-rotation-alignment"]),"text-field":new Gt(Me.layout_symbol["text-field"]),"text-font":new Gt(Me.layout_symbol["text-font"]),"text-size":new Gt(Me.layout_symbol["text-size"]),"text-max-width":new Gt(Me.layout_symbol["text-max-width"]),"text-line-height":new Dt(Me.layout_symbol["text-line-height"]),"text-letter-spacing":new Gt(Me.layout_symbol["text-letter-spacing"]),"text-justify":new Gt(Me.layout_symbol["text-justify"]),"text-radial-offset":new Gt(Me.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Dt(Me.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Gt(Me.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Gt(Me.layout_symbol["text-anchor"]),"text-max-angle":new Dt(Me.layout_symbol["text-max-angle"]),"text-writing-mode":new Dt(Me.layout_symbol["text-writing-mode"]),"text-rotate":new Gt(Me.layout_symbol["text-rotate"]),"text-padding":new Dt(Me.layout_symbol["text-padding"]),"text-keep-upright":new Dt(Me.layout_symbol["text-keep-upright"]),"text-transform":new Gt(Me.layout_symbol["text-transform"]),"text-offset":new Gt(Me.layout_symbol["text-offset"]),"text-allow-overlap":new Dt(Me.layout_symbol["text-allow-overlap"]),"text-overlap":new Dt(Me.layout_symbol["text-overlap"]),"text-ignore-placement":new Dt(Me.layout_symbol["text-ignore-placement"]),"text-optional":new Dt(Me.layout_symbol["text-optional"])})}};class dy{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:ua,this.defaultValue=i}evaluate(i){if(i.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(i.formattedSection))return l.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Tt("FormatSectionOverride",dy,{omit:["defaultValue"]});class fy extends $n{constructor(i){super(i,js)}recalculate(i,l){if(super.recalculate(i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const v=[];for(const b of d)v.indexOf(b)<0&&v.push(b);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,l,d,v){const b=this.layout.get(i).evaluate(l,{},d,v),S=this._unevaluatedLayout._values[i];return S.isDataDriven()||Ss(S.value)||!b?b:function(M,D){return D.replace(/{([^{}]+)}/g,(L,F)=>M&&F in M?String(M[F]):"")}(l.properties,b)}createBucket(i){return new ar(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const i of js.paint.overridableProperties){if(!fy.hasPaintOverride(this.layout,i))continue;const l=this.paint.get(i),d=new dy(l),v=new tu(d,l.property.specification);let b=null;b=l.value.kind==="constant"||l.value.kind==="source"?new ho("source",v):new lc("composite",v,l.value.zoomStops),this.paint._values[i]=new pa(l.property,b,l.parameters)}}_handleOverridablePaintPropertyUpdate(i,l,d){return!(!this.layout||l.isDataDriven()||d.isDataDriven())&&fy.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,l){const d=i.get("text-field"),v=js.paint.properties[l];let b=!1;const S=M=>{for(const D of M)if(v.overrides&&v.overrides.hasOverride(D))return void(b=!0)};if(d.value.kind==="constant"&&d.value.value instanceof pn)S(d.value.value.sections);else if(d.value.kind==="source"){const M=L=>{b||(L instanceof Ii&&Ut(L.value)===el?S(L.value.sections):L instanceof Hu?S(L.sections):L.eachChild(M))},D=d.value;D._styleExpression&&M(D._styleExpression.expression)}return b}}let N2;var a4={get paint(){return N2=N2||new tn({"background-color":new Dt(Me.paint_background["background-color"]),"background-pattern":new _c(Me.paint_background["background-pattern"]),"background-opacity":new Dt(Me.paint_background["background-opacity"])})}};class o4 extends $n{constructor(i){super(i,a4)}}let F2;var s4={get paint(){return F2=F2||new tn({"raster-opacity":new Dt(Me.paint_raster["raster-opacity"]),"raster-hue-rotate":new Dt(Me.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Dt(Me.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Dt(Me.paint_raster["raster-brightness-max"]),"raster-saturation":new Dt(Me.paint_raster["raster-saturation"]),"raster-contrast":new Dt(Me.paint_raster["raster-contrast"]),"raster-resampling":new Dt(Me.paint_raster["raster-resampling"]),"raster-fade-duration":new Dt(Me.paint_raster["raster-fade-duration"])})}};class l4 extends $n{constructor(i){super(i,s4)}}class u4 extends $n{constructor(i){super(i,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class c4{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const h4={once:!0},z_=63710088e-1;class Nh{constructor(i,l){if(isNaN(i)||isNaN(l))throw new Error(`Invalid LngLat object: (${i}, ${l})`);if(this.lng=+i,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Nh(Qt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const l=Math.PI/180,d=this.lat*l,v=i.lat*l,b=Math.sin(d)*Math.sin(v)+Math.cos(d)*Math.cos(v)*Math.cos((i.lng-this.lng)*l);return z_*Math.acos(Math.min(b,1))}static convert(i){if(i instanceof Nh)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Nh(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Nh(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const B2=2*Math.PI*z_;function $2(u){return B2*Math.cos(u*Math.PI/180)}function V2(u){return(180+u)/360}function U2(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function G2(u,i){return u/$2(i)}function L_(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function q2(u,i){return u*$2(L_(i))}class Om{constructor(i,l,d=0){this.x=+i,this.y=+l,this.z=+d}static fromLngLat(i,l=0){const d=Nh.convert(i);return new Om(V2(d.lng),U2(d.lat),G2(l,d.lat))}toLngLat(){return new Nh(360*this.x-180,L_(this.y))}toAltitude(){return q2(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/B2*(i=L_(this.y),1/Math.cos(i*Math.PI/180));var i}}function W2(u,i,l){var d=2*Math.PI*6378137/256/Math.pow(2,l);return[u*d-2*Math.PI*6378137/2,i*d-2*Math.PI*6378137/2]}class j_{constructor(i,l,d){if(!function(v,b,S){return!(v<0||v>25||S<0||S>=Math.pow(2,v)||b<0||b>=Math.pow(2,v))}(i,l,d))throw new Error(`x=${l}, y=${d}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=l,this.y=d,this.key=dp(0,i,i,l,d)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,l,d){const v=(S=this.y,M=this.z,D=W2(256*(b=this.x),256*(S=Math.pow(2,M)-S-1),M),L=W2(256*(b+1),256*(S+1),M),D[0]+","+D[1]+","+L[0]+","+L[1]);var b,S,M,D,L;const F=function(G,X,ee){let te,ne="";for(let he=G;he>0;he--)te=1<<he-1,ne+=(X&te?1:0)+(ee&te?2:0);return ne}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,F).replace(/{bbox-epsg-3857}/g,v)}isChildOf(i){const l=this.z-i.z;return l>0&&i.x===this.x>>l&&i.y===this.y>>l}getTilePoint(i){const l=Math.pow(2,this.z);return new B((i.x*l-this.x)*$e,(i.y*l-this.y)*$e)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Z2{constructor(i,l){this.wrap=i,this.canonical=l,this.key=dp(i,l.z,l.z,l.x,l.y)}}class Wo{constructor(i,l,d,v,b){if(this.terrainRttPosMatrix32f=null,i<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${d}`);this.overscaledZ=i,this.wrap=l,this.canonical=new j_(d,+v,+b),this.key=dp(l,i,d,v,b)}clone(){return new Wo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-i;return i>this.canonical.z?new Wo(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wo(i,this.wrap,i,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(i,l){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-i;return i>this.canonical.z?dp(this.wrap*+l,i,this.canonical.z,this.canonical.x,this.canonical.y):dp(this.wrap*+l,i,i,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(i){if(i.wrap!==this.wrap)return!1;const l=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>l&&i.canonical.y===this.canonical.y>>l}children(i){if(this.overscaledZ>=i)return[new Wo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,d=2*this.canonical.x,v=2*this.canonical.y;return[new Wo(l,this.wrap,l,d,v),new Wo(l,this.wrap,l,d+1,v),new Wo(l,this.wrap,l,d,v+1),new Wo(l,this.wrap,l,d+1,v+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Wo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Wo(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Z2(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new Om(i.x-this.wrap,i.y))}}function dp(u,i,l,d,v){(u*=2)<0&&(u=-1*u-1);const b=1<<l;return(b*b*u+b*v+d).toString(36)+l.toString(36)+i.toString(36)}Tt("CanonicalTileID",j_),Tt("OverscaledTileID",Wo,{omit:["terrainRttPosMatrix32f"]});class Gd{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(i){return this.minX=Math.min(this.minX,i.x),this.minY=Math.min(this.minY,i.y),this.maxX=Math.max(this.maxX,i.x),this.maxY=Math.max(this.maxY,i.y),this}expandBy(i){return this.minX-=i,this.minY-=i,this.maxX+=i,this.maxY+=i,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(i){return this.expandBy(-i)}map(i){const l=new Gd;return l.extend(i(new B(this.minX,this.minY))),l.extend(i(new B(this.maxX,this.minY))),l.extend(i(new B(this.minX,this.maxY))),l.extend(i(new B(this.maxX,this.maxY))),l}static fromPoints(i){const l=new Gd;for(const d of i)l.extend(d);return l}contains(i){return i.x>=this.minX&&i.x<=this.maxX&&i.y>=this.minY&&i.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(i){return!this.empty()&&!i.empty()&&i.minX>=this.minX&&i.maxX<=this.maxX&&i.minY>=this.minY&&i.maxY<=this.maxY}intersects(i){return!this.empty()&&!i.empty()&&i.minX<=this.maxX&&i.maxX>=this.minX&&i.minY<=this.maxY&&i.maxY>=this.minY}}class H2{constructor(i){this._stringToNumber={},this._numberToString=[];for(let l=0;l<i.length;l++){const d=i[l];this._stringToNumber[d]=l,this._numberToString[l]=d}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class K2{constructor(i,l,d,v,b){this.type="Feature",this._vectorTileFeature=i,i._z=l,i._x=d,i._y=v,this.properties=i.properties,this.id=b}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(i[l]=this[l]);return i}}class X2{constructor(i,l){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new si($e,16,0),this.grid3D=new si($e,16,0),this.featureIndexArray=new Ue,this.promoteId=l}insert(i,l,d,v,b,S){const M=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,v,b);const D=S?this.grid3D:this.grid;for(let L=0;L<l.length;L++){const F=l[L],G=[1/0,1/0,-1/0,-1/0];for(let X=0;X<F.length;X++){const ee=F[X];G[0]=Math.min(G[0],ee.x),G[1]=Math.min(G[1],ee.y),G[2]=Math.max(G[2],ee.x),G[3]=Math.max(G[3],ee.y)}G[0]<$e&&G[1]<$e&&G[2]>=0&&G[3]>=0&&D.insert(M,G[0],G[1],G[2],G[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Dc.VectorTile(new Lh(this.rawTileData)).layers,this.sourceLayerCoder=new H2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,l,d,v){this.loadVTLayers();const b=i.params,S=$e/i.tileSize/i.scale,M=fo(b.filter),D=i.queryGeometry,L=i.queryPadding*S,F=Gd.fromPoints(D),G=this.grid.query(F.minX-L,F.minY-L,F.maxX+L,F.maxY+L),X=Gd.fromPoints(i.cameraQueryGeometry).expandBy(L),ee=this.grid3D.query(X.minX,X.minY,X.maxX,X.maxY,(he,ge,ke,xe)=>function(J,ce,Se,We,at){for(const tt of J)if(ce<=tt.x&&Se<=tt.y&&We>=tt.x&&at>=tt.y)return!0;const Ye=[new B(ce,Se),new B(ce,at),new B(We,at),new B(We,Se)];if(J.length>2){for(const tt of Ye)if(xu(J,tt))return!0}for(let tt=0;tt<J.length-1;tt++)if(Wg(J[tt],J[tt+1],Ye))return!0;return!1}(i.cameraQueryGeometry,he-L,ge-L,ke+L,xe+L));for(const he of ee)G.push(he);G.sort(d4);const te={};let ne;for(let he=0;he<G.length;he++){const ge=G[he];if(ge===ne)continue;ne=ge;const ke=this.featureIndexArray.get(ge);let xe=null;this.loadMatchingFeature(te,ke.bucketIndex,ke.sourceLayerIndex,ke.featureIndex,M,b.layers,b.availableImages,l,d,v,(J,ce,Se)=>(xe||(xe=vu(J)),ce.queryIntersectsFeature({queryGeometry:D,feature:J,featureState:Se,geometry:xe,zoom:this.z,transform:i.transform,pixelsToTileUnits:S,pixelPosMatrix:i.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:i.getElevation})))}return te}loadMatchingFeature(i,l,d,v,b,S,M,D,L,F,G){const X=this.bucketLayerIDs[l];if(S&&!X.some(he=>S.has(he)))return;const ee=this.sourceLayerCoder.decode(d),te=this.vtLayers[ee].feature(v);if(b.needGeometry){const he=_u(te,!0);if(!b.filter(new Hr(this.tileID.overscaledZ),he,this.tileID.canonical))return}else if(!b.filter(new Hr(this.tileID.overscaledZ),te))return;const ne=this.getId(te,ee);for(let he=0;he<X.length;he++){const ge=X[he];if(S&&!S.has(ge))continue;const ke=D[ge];if(!ke)continue;let xe={};ne&&F&&(xe=F.getState(ke.sourceLayer||"_geojsonTileLayer",ne));const J=sr({},L[ge]);J.paint=Y2(J.paint,ke.paint,te,xe,M),J.layout=Y2(J.layout,ke.layout,te,xe,M);const ce=!G||G(te,ke,xe);if(!ce)continue;const Se=new K2(te,this.z,this.x,this.y,ne);Se.layer=J;let We=i[ge];We===void 0&&(We=i[ge]=[]),We.push({featureIndex:v,feature:Se,intersectionZ:ce})}}lookupSymbolFeatures(i,l,d,v,b,S,M,D){const L={};this.loadVTLayers();const F=fo(b);for(const G of i)this.loadMatchingFeature(L,d,v,G,F,S,M,D,l);return L}hasLayer(i){for(const l of this.bucketLayerIDs)for(const d of l)if(i===d)return!0;return!1}getId(i,l){var d;let v=i.id;return this.promoteId&&(v=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof v=="boolean"&&(v=Number(v)),v===void 0&&(!((d=i.properties)===null||d===void 0)&&d.cluster)&&this.promoteId&&(v=Number(i.properties.cluster_id))),v}}function Y2(u,i,l,d,v){return _r(u,(b,S)=>{const M=i instanceof jo?i.get(S):null;return M&&M.evaluate?M.evaluate(l,d,v):M})}function d4(u,i){return i-u}function Q2(u,i,l,d,v){const b=[];for(let S=0;S<u.length;S++){const M=u[S];let D;for(let L=0;L<M.length-1;L++){let F=M[L],G=M[L+1];F.x<i&&G.x<i||(F.x<i?F=new B(i,F.y+(i-F.x)/(G.x-F.x)*(G.y-F.y))._round():G.x<i&&(G=new B(i,F.y+(i-F.x)/(G.x-F.x)*(G.y-F.y))._round()),F.y<l&&G.y<l||(F.y<l?F=new B(F.x+(l-F.y)/(G.y-F.y)*(G.x-F.x),l)._round():G.y<l&&(G=new B(F.x+(l-F.y)/(G.y-F.y)*(G.x-F.x),l)._round()),F.x>=d&&G.x>=d||(F.x>=d?F=new B(d,F.y+(d-F.x)/(G.x-F.x)*(G.y-F.y))._round():G.x>=d&&(G=new B(d,F.y+(d-F.x)/(G.x-F.x)*(G.y-F.y))._round()),F.y>=v&&G.y>=v||(F.y>=v?F=new B(F.x+(v-F.y)/(G.y-F.y)*(G.x-F.x),v)._round():G.y>=v&&(G=new B(F.x+(v-F.y)/(G.y-F.y)*(G.x-F.x),v)._round()),D&&F.equals(D[D.length-1])||(D=[F],b.push(D)),D.push(G)))))}}return b}Tt("FeatureIndex",X2,{omit:["rawTileData","sourceLayerCoder"]});class Fh extends B{constructor(i,l,d,v){super(i,l),this.angle=d,v!==void 0&&(this.segment=v)}clone(){return new Fh(this.x,this.y,this.angle,this.segment)}}function J2(u,i,l,d,v){if(i.segment===void 0||l===0)return!0;let b=i,S=i.segment+1,M=0;for(;M>-l/2;){if(S--,S<0)return!1;M-=u[S].dist(b),b=u[S]}M+=u[S].dist(u[S+1]),S++;const D=[];let L=0;for(;M<l/2;){const F=u[S],G=u[S+1];if(!G)return!1;let X=u[S-1].angleTo(F)-F.angleTo(G);for(X=Math.abs((X+3*Math.PI)%(2*Math.PI)-Math.PI),D.push({distance:M,angleDelta:X}),L+=X;M-D[0].distance>d;)L-=D.shift().angleDelta;if(L>v)return!1;S++,M+=F.dist(G)}return!0}function eS(u){let i=0;for(let l=0;l<u.length-1;l++)i+=u[l].dist(u[l+1]);return i}function tS(u,i,l){return u?.6*i*l:0}function rS(u,i){return Math.max(u?u.right-u.left:0,i?i.right-i.left:0)}function f4(u,i,l,d,v,b){const S=tS(l,v,b),M=rS(l,d)*b;let D=0;const L=eS(u)/2;for(let F=0;F<u.length-1;F++){const G=u[F],X=u[F+1],ee=G.dist(X);if(D+ee>L){const te=(L-D)/ee,ne=ha.number(G.x,X.x,te),he=ha.number(G.y,X.y,te),ge=new Fh(ne,he,X.angleTo(G),F);return ge._round(),!S||J2(u,ge,M,S,i)?ge:void 0}D+=ee}}function p4(u,i,l,d,v,b,S,M,D){const L=tS(d,b,S),F=rS(d,v),G=F*S,X=u[0].x===0||u[0].x===D||u[0].y===0||u[0].y===D;return i-G<i/4&&(i=G+i/4),nS(u,X?i/2*M%i:(F/2+2*b)*S*M%i,i,L,l,G,X,!1,D)}function nS(u,i,l,d,v,b,S,M,D){const L=b/2,F=eS(u);let G=0,X=i-l,ee=[];for(let te=0;te<u.length-1;te++){const ne=u[te],he=u[te+1],ge=ne.dist(he),ke=he.angleTo(ne);for(;X+l<G+ge;){X+=l;const xe=(X-G)/ge,J=ha.number(ne.x,he.x,xe),ce=ha.number(ne.y,he.y,xe);if(J>=0&&J<D&&ce>=0&&ce<D&&X-L>=0&&X+L<=F){const Se=new Fh(J,ce,ke,te);Se._round(),d&&!J2(u,Se,b,d,v)||ee.push(Se)}}G+=ge}return M||ee.length||S||(ee=nS(u,G/2,l,d,v,b,S,!0,D)),ee}function iS(u,i,l,d){const v=[],b=u.image,S=b.pixelRatio,M=b.paddedRect.w-2,D=b.paddedRect.h-2;let L={x1:u.left,y1:u.top,x2:u.right,y2:u.bottom};const F=b.stretchX||[[0,M]],G=b.stretchY||[[0,D]],X=(rt,Rt)=>rt+Rt[1]-Rt[0],ee=F.reduce(X,0),te=G.reduce(X,0),ne=M-ee,he=D-te;let ge=0,ke=ee,xe=0,J=te,ce=0,Se=ne,We=0,at=he;if(b.content&&d){const rt=b.content,Rt=rt[2]-rt[0],Ht=rt[3]-rt[1];(b.textFitWidth||b.textFitHeight)&&(L=xt(u)),ge=py(F,0,rt[0]),xe=py(G,0,rt[1]),ke=py(F,rt[0],rt[2]),J=py(G,rt[1],rt[3]),ce=rt[0]-ge,We=rt[1]-xe,Se=Rt-ke,at=Ht-J}const Ye=L.x1,tt=L.y1,ct=L.x2-Ye,ot=L.y2-tt,pt=(rt,Rt,Ht,qt)=>{const jt=my(rt.stretch-ge,ke,ct,Ye),Mr=gy(rt.fixed-ce,Se,rt.stretch,ee),In=my(Rt.stretch-xe,J,ot,tt),ui=gy(Rt.fixed-We,at,Rt.stretch,te),ta=my(Ht.stretch-ge,ke,ct,Ye),Zo=gy(Ht.fixed-ce,Se,Ht.stretch,ee),Ja=my(qt.stretch-xe,J,ot,tt),Fi=gy(qt.fixed-We,at,qt.stretch,te),bn=new B(jt,In),xi=new B(ta,In),Bi=new B(ta,Ja),$i=new B(jt,Ja),za=new B(Mr/S,ui/S),Ho=new B(Zo/S,Fi/S),bi=i*Math.PI/180;if(bi){const wi=Math.sin(bi),Si=Math.cos(bi),ei=[Si,-wi,wi,Si];bn._matMult(ei),xi._matMult(ei),$i._matMult(ei),Bi._matMult(ei)}const eo=rt.stretch+rt.fixed,ci=Rt.stretch+Rt.fixed;return{tl:bn,tr:xi,bl:$i,br:Bi,tex:{x:b.paddedRect.x+1+eo,y:b.paddedRect.y+1+ci,w:Ht.stretch+Ht.fixed-eo,h:qt.stretch+qt.fixed-ci},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:za,pixelOffsetBR:Ho,minFontScaleX:Se/S/ct,minFontScaleY:at/S/ot,isSDF:l}};if(d&&(b.stretchX||b.stretchY)){const rt=aS(F,ne,ee),Rt=aS(G,he,te);for(let Ht=0;Ht<rt.length-1;Ht++){const qt=rt[Ht],jt=rt[Ht+1];for(let Mr=0;Mr<Rt.length-1;Mr++)v.push(pt(qt,Rt[Mr],jt,Rt[Mr+1]))}}else v.push(pt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:M+1},{fixed:0,stretch:D+1}));return v}function py(u,i,l){let d=0;for(const v of u)d+=Math.max(i,Math.min(l,v[1]))-Math.max(i,Math.min(l,v[0]));return d}function aS(u,i,l){const d=[{fixed:-1,stretch:0}];for(const[v,b]of u){const S=d[d.length-1];d.push({fixed:v-S.stretch,stretch:S.stretch}),d.push({fixed:v-S.stretch,stretch:S.stretch+(b-v)})}return d.push({fixed:i+1,stretch:l}),d}function my(u,i,l,d){return u/i*l+d}function gy(u,i,l,d){return u-i*l/d}Tt("Anchor",Fh);class yy{constructor(i,l,d,v,b,S,M,D,L,F){var G;if(this.boxStartIndex=i.length,L){let X=S.top,ee=S.bottom;const te=S.collisionPadding;te&&(X-=te[1],ee+=te[3]);let ne=ee-X;ne>0&&(ne=Math.max(10,ne),this.circleDiameter=ne)}else{const X=!((G=S.image)===null||G===void 0)&&G.content&&(S.image.textFitWidth||S.image.textFitHeight)?xt(S):{x1:S.left,y1:S.top,x2:S.right,y2:S.bottom};X.y1=X.y1*M-D[0],X.y2=X.y2*M+D[2],X.x1=X.x1*M-D[3],X.x2=X.x2*M+D[1];const ee=S.collisionPadding;if(ee&&(X.x1-=ee[0]*M,X.y1-=ee[1]*M,X.x2+=ee[2]*M,X.y2+=ee[3]*M),F){const te=new B(X.x1,X.y1),ne=new B(X.x2,X.y1),he=new B(X.x1,X.y2),ge=new B(X.x2,X.y2),ke=F*Math.PI/180;te._rotate(ke),ne._rotate(ke),he._rotate(ke),ge._rotate(ke),X.x1=Math.min(te.x,ne.x,he.x,ge.x),X.x2=Math.max(te.x,ne.x,he.x,ge.x),X.y1=Math.min(te.y,ne.y,he.y,ge.y),X.y2=Math.max(te.y,ne.y,he.y,ge.y)}i.emplaceBack(l.x,l.y,X.x1,X.y1,X.x2,X.y2,d,v,b)}this.boxEndIndex=i.length}}class m4{constructor(i=[],l=(d,v)=>d<v?-1:d>v?1:0){if(this.data=i,this.length=this.data.length,this.compare=l,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:l,compare:d}=this,v=l[i];for(;i>0;){const b=i-1>>1,S=l[b];if(d(v,S)>=0)break;l[i]=S,i=b}l[i]=v}_down(i){const{data:l,compare:d}=this,v=this.length>>1,b=l[i];for(;i<v;){let S=1+(i<<1);const M=S+1;if(M<this.length&&d(l[M],l[S])<0&&(S=M),d(l[S],b)>=0)break;l[i]=l[S],i=S}l[i]=b}}function g4(u,i=1,l=!1){const d=Gd.fromPoints(u[0]),v=Math.min(d.width(),d.height());let b=v/2;const S=new m4([],y4),{minX:M,minY:D,maxX:L,maxY:F}=d;if(v===0)return new B(M,D);for(let ee=M;ee<L;ee+=v)for(let te=D;te<F;te+=v)S.push(new fp(ee+b,te+b,b,u));let G=function(ee){let te=0,ne=0,he=0;const ge=ee[0];for(let ke=0,xe=ge.length,J=xe-1;ke<xe;J=ke++){const ce=ge[ke],Se=ge[J],We=ce.x*Se.y-Se.x*ce.y;ne+=(ce.x+Se.x)*We,he+=(ce.y+Se.y)*We,te+=3*We}return new fp(ne/te,he/te,0,ee)}(u),X=S.length;for(;S.length;){const ee=S.pop();(ee.d>G.d||!G.d)&&(G=ee,l&&console.log("found best %d after %d probes",Math.round(1e4*ee.d)/1e4,X)),ee.max-G.d<=i||(b=ee.h/2,S.push(new fp(ee.p.x-b,ee.p.y-b,b,u)),S.push(new fp(ee.p.x+b,ee.p.y-b,b,u)),S.push(new fp(ee.p.x-b,ee.p.y+b,b,u)),S.push(new fp(ee.p.x+b,ee.p.y+b,b,u)),X+=4)}return l&&(console.log(`num probes: ${X}`),console.log(`best distance: ${G.d}`)),G.p}function y4(u,i){return i.max-u.max}function fp(u,i,l,d){this.p=new B(u,i),this.h=l,this.d=function(v,b){let S=!1,M=1/0;for(let D=0;D<b.length;D++){const L=b[D];for(let F=0,G=L.length,X=G-1;F<G;X=F++){const ee=L[F],te=L[X];ee.y>v.y!=te.y>v.y&&v.x<(te.x-ee.x)*(v.y-ee.y)/(te.y-ee.y)+ee.x&&(S=!S),M=Math.min(M,Kf(v,ee,te))}}return(S?1:-1)*Math.sqrt(M)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var ea;p.aD=void 0,(ea=p.aD||(p.aD={}))[ea.center=1]="center",ea[ea.left=2]="left",ea[ea.right=3]="right",ea[ea.top=4]="top",ea[ea.bottom=5]="bottom",ea[ea["top-left"]=6]="top-left",ea[ea["top-right"]=7]="top-right",ea[ea["bottom-left"]=8]="bottom-left",ea[ea["bottom-right"]=9]="bottom-right";const N_=Number.POSITIVE_INFINITY;function oS(u,i){return i[1]!==N_?function(l,d,v){let b=0,S=0;switch(d=Math.abs(d),v=Math.abs(v),l){case"top-right":case"top-left":case"top":S=v-7;break;case"bottom-right":case"bottom-left":case"bottom":S=7-v}switch(l){case"top-right":case"bottom-right":case"right":b=-d;break;case"top-left":case"bottom-left":case"left":b=d}return[b,S]}(u,i[0],i[1]):function(l,d){let v=0,b=0;d<0&&(d=0);const S=d/Math.SQRT2;switch(l){case"top-right":case"top-left":b=S-7;break;case"bottom-right":case"bottom-left":b=7-S;break;case"bottom":b=7-d;break;case"top":b=d-7}switch(l){case"top-right":case"bottom-right":v=-S;break;case"top-left":case"bottom-left":v=S;break;case"left":v=d;break;case"right":v=-d}return[v,b]}(u,i[0])}function sS(u,i,l){var d;const v=u.layout,b=(d=v.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(i,{},l);if(b){const M=b.values,D=[];for(let L=0;L<M.length;L+=2){const F=D[L]=M[L],G=M[L+1].map(X=>X*Nn);F.startsWith("top")?G[1]-=7:F.startsWith("bottom")&&(G[1]+=7),D[L+1]=G}return new Sr(D)}const S=v.get("text-variable-anchor");if(S){let M;M=u._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(i,{},l)*Nn,N_]:v.get("text-offset").evaluate(i,{},l).map(L=>L*Nn);const D=[];for(const L of S)D.push(L,oS(L,M));return new Sr(D)}return null}function F_(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function v4(u,i,l,d,v,b,S,M,D,L,F,G){let X=b.textMaxSize.evaluate(i,{});X===void 0&&(X=S);const ee=u.layers[0].layout,te=ee.get("icon-offset").evaluate(i,{},F),ne=uS(l.horizontal),he=S/24,ge=u.tilePixelRatio*he,ke=u.tilePixelRatio*X/24,xe=u.tilePixelRatio*M,J=u.tilePixelRatio*ee.get("symbol-spacing"),ce=ee.get("text-padding")*u.tilePixelRatio,Se=function(Ht,qt,jt,Mr=1){const In=Ht.get("icon-padding").evaluate(qt,{},jt),ui=In&&In.values;return[ui[0]*Mr,ui[1]*Mr,ui[2]*Mr,ui[3]*Mr]}(ee,i,F,u.tilePixelRatio),We=ee.get("text-max-angle")/180*Math.PI,at=ee.get("text-rotation-alignment")!=="viewport"&&ee.get("symbol-placement")!=="point",Ye=ee.get("icon-rotation-alignment")==="map"&&ee.get("symbol-placement")!=="point",tt=ee.get("symbol-placement"),ct=J/2,ot=ee.get("icon-text-fit");let pt;d&&ot!=="none"&&(u.allowVerticalPlacement&&l.vertical&&(pt=dt(d,l.vertical,ot,ee.get("icon-text-fit-padding"),te,he)),ne&&(d=dt(d,ne,ot,ee.get("icon-text-fit-padding"),te,he)));const rt=F?G.line.getGranularityForZoomLevel(F.z):1,Rt=(Ht,qt)=>{qt.x<0||qt.x>=$e||qt.y<0||qt.y>=$e||function(jt,Mr,In,ui,ta,Zo,Ja,Fi,bn,xi,Bi,$i,za,Ho,bi,eo,ci,wi,Si,ei,dn,Ml,pp,Al,b4){const mp=jt.addToLineVertexArray(Mr,In);let qd,gp,yp,vp,fS=0,pS=0,mS=0,gS=0,Z_=-1,H_=-1;const jc={};let yS=Li("");if(jt.allowVerticalPlacement&&ui.vertical){const ba=Fi.layout.get("text-rotate").evaluate(dn,{},Al)+90;yp=new yy(bn,Mr,xi,Bi,$i,ui.vertical,za,Ho,bi,ba),Ja&&(vp=new yy(bn,Mr,xi,Bi,$i,Ja,ci,wi,bi,ba))}if(ta){const ba=Fi.layout.get("icon-rotate").evaluate(dn,{}),Ko=Fi.layout.get("icon-text-fit")!=="none",Wd=iS(ta,ba,pp,Ko),kl=Ja?iS(Ja,ba,pp,Ko):void 0;gp=new yy(bn,Mr,xi,Bi,$i,ta,ci,wi,!1,ba),fS=4*Wd.length;const Zd=jt.iconSizeData;let Au=null;Zd.kind==="source"?(Au=[kt*Fi.layout.get("icon-size").evaluate(dn,{})],Au[0]>zt&&Jr(`${jt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Zd.kind==="composite"&&(Au=[kt*Ml.compositeIconSizes[0].evaluate(dn,{},Al),kt*Ml.compositeIconSizes[1].evaluate(dn,{},Al)],(Au[0]>zt||Au[1]>zt)&&Jr(`${jt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),jt.addSymbols(jt.icon,Wd,Au,ei,Si,dn,p.an.none,Mr,mp.lineStartIndex,mp.lineLength,-1,Al),Z_=jt.icon.placedSymbolArray.length-1,kl&&(pS=4*kl.length,jt.addSymbols(jt.icon,kl,Au,ei,Si,dn,p.an.vertical,Mr,mp.lineStartIndex,mp.lineLength,-1,Al),H_=jt.icon.placedSymbolArray.length-1)}const vS=Object.keys(ui.horizontal);for(const ba of vS){const Ko=ui.horizontal[ba];if(!qd){yS=Li(Ko.text);const kl=Fi.layout.get("text-rotate").evaluate(dn,{},Al);qd=new yy(bn,Mr,xi,Bi,$i,Ko,za,Ho,bi,kl)}const Wd=Ko.positionedLines.length===1;if(mS+=lS(jt,Mr,Ko,Zo,Fi,bi,dn,eo,mp,ui.vertical?p.an.horizontal:p.an.horizontalOnly,Wd?vS:[ba],jc,Z_,Ml,Al),Wd)break}ui.vertical&&(gS+=lS(jt,Mr,ui.vertical,Zo,Fi,bi,dn,eo,mp,p.an.vertical,["vertical"],jc,H_,Ml,Al));const w4=qd?qd.boxStartIndex:jt.collisionBoxArray.length,S4=qd?qd.boxEndIndex:jt.collisionBoxArray.length,P4=yp?yp.boxStartIndex:jt.collisionBoxArray.length,T4=yp?yp.boxEndIndex:jt.collisionBoxArray.length,C4=gp?gp.boxStartIndex:jt.collisionBoxArray.length,E4=gp?gp.boxEndIndex:jt.collisionBoxArray.length,M4=vp?vp.boxStartIndex:jt.collisionBoxArray.length,A4=vp?vp.boxEndIndex:jt.collisionBoxArray.length;let Il=-1;const _y=(ba,Ko)=>ba&&ba.circleDiameter?Math.max(ba.circleDiameter,Ko):Ko;Il=_y(qd,Il),Il=_y(yp,Il),Il=_y(gp,Il),Il=_y(vp,Il);const _S=Il>-1?1:0;_S&&(Il*=b4/Nn),jt.glyphOffsetArray.length>=ar.MAX_GLYPHS&&Jr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),dn.sortKey!==void 0&&jt.addToSortKeyRanges(jt.symbolInstances.length,dn.sortKey);const I4=sS(Fi,dn,Al),[k4,D4]=function(ba,Ko){const Wd=ba.length,kl=Ko?.values;if(kl?.length>0)for(let Zd=0;Zd<kl.length;Zd+=2){const Au=kl[Zd+1];ba.emplaceBack(p.aD[kl[Zd]],Au[0],Au[1])}return[Wd,ba.length]}(jt.textAnchorOffsets,I4);jt.symbolInstances.emplaceBack(Mr.x,Mr.y,jc.right>=0?jc.right:-1,jc.center>=0?jc.center:-1,jc.left>=0?jc.left:-1,jc.vertical||-1,Z_,H_,yS,w4,S4,P4,T4,C4,E4,M4,A4,xi,mS,gS,fS,pS,_S,0,za,Il,k4,D4)}(u,qt,Ht,l,d,v,pt,u.layers[0],u.collisionBoxArray,i.index,i.sourceLayerIndex,u.index,ge,[ce,ce,ce,ce],at,D,xe,Se,Ye,te,i,b,L,F,S)};if(tt==="line")for(const Ht of Q2(i.geometry,0,0,$e,$e)){const qt=Rs(Ht,rt),jt=p4(qt,J,We,l.vertical||ne,d,24,ke,u.overscaling,$e);for(const Mr of jt)ne&&_4(u,ne.text,ct,Mr)||Rt(qt,Mr)}else if(tt==="line-center"){for(const Ht of i.geometry)if(Ht.length>1){const qt=Rs(Ht,rt),jt=f4(qt,We,l.vertical||ne,d,24,ke);jt&&Rt(qt,jt)}}else if(i.type==="Polygon")for(const Ht of gs(i.geometry,0)){const qt=g4(Ht,16);Rt(Rs(Ht[0],rt,!0),new Fh(qt.x,qt.y,0))}else if(i.type==="LineString")for(const Ht of i.geometry){const qt=Rs(Ht,rt);Rt(qt,new Fh(qt[0].x,qt[0].y,0))}else if(i.type==="Point")for(const Ht of i.geometry)for(const qt of Ht)Rt([qt],new Fh(qt.x,qt.y,0))}function lS(u,i,l,d,v,b,S,M,D,L,F,G,X,ee,te){const ne=function(ke,xe,J,ce,Se,We,at,Ye){const tt=ce.layout.get("text-rotate").evaluate(We,{})*Math.PI/180,ct=[];for(const ot of xe.positionedLines)for(const pt of ot.positionedGlyphs){if(!pt.rect)continue;const rt=pt.rect||{};let Rt=4,Ht=!0,qt=1,jt=0;const Mr=(Se||Ye)&&pt.vertical,In=pt.metrics.advance*pt.scale/2;if(Ye&&xe.verticalizable&&(jt=ot.lineOffset/2-(pt.imageName?-(Nn-pt.metrics.width*pt.scale)/2:(pt.scale-1)*Nn)),pt.imageName){const wi=at[pt.imageName];Ht=wi.sdf,qt=wi.pixelRatio,Rt=1/qt}const ui=Se?[pt.x+In,pt.y]:[0,0];let ta=Se?[0,0]:[pt.x+In+J[0],pt.y+J[1]-jt],Zo=[0,0];Mr&&(Zo=ta,ta=[0,0]);const Ja=pt.metrics.isDoubleResolution?2:1,Fi=(pt.metrics.left-Rt)*pt.scale-In+ta[0],bn=(-pt.metrics.top-Rt)*pt.scale+ta[1],xi=Fi+rt.w/Ja*pt.scale/qt,Bi=bn+rt.h/Ja*pt.scale/qt,$i=new B(Fi,bn),za=new B(xi,bn),Ho=new B(Fi,Bi),bi=new B(xi,Bi);if(Mr){const wi=new B(-In,In- -17),Si=-Math.PI/2,ei=12-In,dn=new B(22-ei,-(pt.imageName?ei:0)),Ml=new B(...Zo);$i._rotateAround(Si,wi)._add(dn)._add(Ml),za._rotateAround(Si,wi)._add(dn)._add(Ml),Ho._rotateAround(Si,wi)._add(dn)._add(Ml),bi._rotateAround(Si,wi)._add(dn)._add(Ml)}if(tt){const wi=Math.sin(tt),Si=Math.cos(tt),ei=[Si,-wi,wi,Si];$i._matMult(ei),za._matMult(ei),Ho._matMult(ei),bi._matMult(ei)}const eo=new B(0,0),ci=new B(0,0);ct.push({tl:$i,tr:za,bl:Ho,br:bi,tex:rt,writingMode:xe.writingMode,glyphOffset:ui,sectionIndex:pt.sectionIndex,isSDF:Ht,pixelOffsetTL:eo,pixelOffsetBR:ci,minFontScaleX:0,minFontScaleY:0})}return ct}(0,l,M,v,b,S,d,u.allowVerticalPlacement),he=u.textSizeData;let ge=null;he.kind==="source"?(ge=[kt*v.layout.get("text-size").evaluate(S,{})],ge[0]>zt&&Jr(`${u.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):he.kind==="composite"&&(ge=[kt*ee.compositeTextSizes[0].evaluate(S,{},te),kt*ee.compositeTextSizes[1].evaluate(S,{},te)],(ge[0]>zt||ge[1]>zt)&&Jr(`${u.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),u.addSymbols(u.text,ne,ge,M,b,S,L,i,D.lineStartIndex,D.lineLength,X,te);for(const ke of F)G[ke]=u.text.placedSymbolArray.length-1;return 4*ne.length}function uS(u){for(const i in u)return u[i];return null}function _4(u,i,l,d){const v=u.compareText;if(i in v){const b=v[i];for(let S=b.length-1;S>=0;S--)if(d.dist(b[S])<l)return!0}else v[i]=[];return v[i].push(d),!1}const cS=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class B_{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,d]=new Uint8Array(i,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=d>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const b=cS[15&d];if(!b)throw new Error("Unrecognized array type.");const[S]=new Uint16Array(i,2,1),[M]=new Uint32Array(i,4,1);return new B_(M,S,b,i)}constructor(i,l=64,d=Float64Array,v){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=d,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const b=cS.indexOf(this.ArrayType),S=2*i*this.ArrayType.BYTES_PER_ELEMENT,M=i*this.IndexArrayType.BYTES_PER_ELEMENT,D=(8-M%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${d}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+M+D,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+S+M+D),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+M+D,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=i)}add(i,l){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=i,this.coords[this._pos++]=l,d}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return $_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,l,d,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:S,nodeSize:M}=this,D=[0,b.length-1,0],L=[];for(;D.length;){const F=D.pop()||0,G=D.pop()||0,X=D.pop()||0;if(G-X<=M){for(let he=X;he<=G;he++){const ge=S[2*he],ke=S[2*he+1];ge>=i&&ge<=d&&ke>=l&&ke<=v&&L.push(b[he])}continue}const ee=X+G>>1,te=S[2*ee],ne=S[2*ee+1];te>=i&&te<=d&&ne>=l&&ne<=v&&L.push(b[ee]),(F===0?i<=te:l<=ne)&&(D.push(X),D.push(ee-1),D.push(1-F)),(F===0?d>=te:v>=ne)&&(D.push(ee+1),D.push(G),D.push(1-F))}return L}within(i,l,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:b,nodeSize:S}=this,M=[0,v.length-1,0],D=[],L=d*d;for(;M.length;){const F=M.pop()||0,G=M.pop()||0,X=M.pop()||0;if(G-X<=S){for(let he=X;he<=G;he++)dS(b[2*he],b[2*he+1],i,l)<=L&&D.push(v[he]);continue}const ee=X+G>>1,te=b[2*ee],ne=b[2*ee+1];dS(te,ne,i,l)<=L&&D.push(v[ee]),(F===0?i-d<=te:l-d<=ne)&&(M.push(X),M.push(ee-1),M.push(1-F)),(F===0?i+d>=te:l+d>=ne)&&(M.push(ee+1),M.push(G),M.push(1-F))}return D}}function $_(u,i,l,d,v,b){if(v-d<=l)return;const S=d+v>>1;hS(u,i,S,d,v,b),$_(u,i,l,d,S-1,1-b),$_(u,i,l,S+1,v,1-b)}function hS(u,i,l,d,v,b){for(;v>d;){if(v-d>600){const L=v-d+1,F=l-d+1,G=Math.log(L),X=.5*Math.exp(2*G/3),ee=.5*Math.sqrt(G*X*(L-X)/L)*(F-L/2<0?-1:1);hS(u,i,l,Math.max(d,Math.floor(l-F*X/L+ee)),Math.min(v,Math.floor(l+(L-F)*X/L+ee)),b)}const S=i[2*l+b];let M=d,D=v;for(Rm(u,i,d,l),i[2*v+b]>S&&Rm(u,i,d,v);M<D;){for(Rm(u,i,M,D),M++,D--;i[2*M+b]<S;)M++;for(;i[2*D+b]>S;)D--}i[2*d+b]===S?Rm(u,i,d,D):(D++,Rm(u,i,D,v)),D<=l&&(d=D+1),l<=D&&(v=D-1)}}function Rm(u,i,l,d){V_(u,l,d),V_(i,2*l,2*d),V_(i,2*l+1,2*d+1)}function V_(u,i,l){const d=u[i];u[i]=u[l],u[l]=d}function dS(u,i,l,d){const v=u-l,b=i-d;return v*v+b*b}var U_;p.cw=void 0,(U_=p.cw||(p.cw={})).create="create",U_.load="load",U_.fullLoad="fullLoad";let vy=null,zm=[];const G_=1e3/60,q_="loadTime",W_="fullLoadTime",x4={mark(u){performance.mark(u)},frame(u){const i=u;vy!=null&&zm.push(i-vy),vy=i},clearMetrics(){vy=null,zm=[],performance.clearMeasures(q_),performance.clearMeasures(W_);for(const u in p.cw)performance.clearMarks(p.cw[u])},getPerformanceMetrics(){performance.measure(q_,p.cw.create,p.cw.load),performance.measure(W_,p.cw.create,p.cw.fullLoad);const u=performance.getEntriesByName(q_)[0].duration,i=performance.getEntriesByName(W_)[0].duration,l=zm.length,d=1/(zm.reduce((b,S)=>b+S,0)/l/1e3),v=zm.filter(b=>b>G_).reduce((b,S)=>b+(S-G_)/G_,0);return{loadTime:u,fullLoadTime:i,fps:d,percentDroppedFrames:v/(l+v)*100,totalFrames:l}}};p.$=$e,p.A=Ae,p.B=function([u,i,l]){return i+=90,i*=Math.PI/180,l*=Math.PI/180,{x:u*Math.cos(i)*Math.sin(l),y:u*Math.sin(i)*Math.sin(l),z:u*Math.cos(l)}},p.C=ha,p.D=Dt,p.E=nt,p.F=Hr,p.G=zo,p.H=function(u){if(Fa==null){const i=u.navigator?u.navigator.userAgent:null;Fa=!!u.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Fa},p.I=$d,p.J=class{constructor(u,i){this.target=u,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new c4(()=>this.process()),this.subscription=io(this.target,"message",l=>this.receive(l),!1),this.globalScope=fi(self)?u:window}registerMessageHandler(u,i){this.messageHandlers[u]=i}sendAsync(u,i){return new Promise((l,d)=>{const v=Math.round(1e18*Math.random()).toString(36).substring(0,10),b=i?io(i.signal,"abort",()=>{b?.unsubscribe(),delete this.resolveRejects[v];const D={id:v,type:"<cancel>",origin:location.origin,targetMapId:u.targetMapId,sourceMapId:this.mapId};this.target.postMessage(D)},h4):null;this.resolveRejects[v]={resolve:D=>{b?.unsubscribe(),l(D)},reject:D=>{b?.unsubscribe(),d(D)}};const S=[],M=Object.assign(Object.assign({},u),{id:v,sourceMapId:this.mapId,origin:location.origin,data:lu(u.data,S)});this.target.postMessage(M,{transfer:S})})}receive(u){const i=u.data,l=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!=="resource://android"&&location.origin!=="resource://android"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[l];const d=this.abortControllers[l];return delete this.abortControllers[l],void(d&&d.abort())}if(fi(self)||i.mustQueue)return this.tasks[l]=i,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,i)}}process(){if(this.taskQueue.length===0)return;const u=this.taskQueue.shift(),i=this.tasks[u];delete this.tasks[u],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(u,i)}processTask(u,i){return o(this,void 0,void 0,function*(){if(i.type==="<response>"){const v=this.resolveRejects[u];return delete this.resolveRejects[u],v?void(i.error?v.reject(Ms(i.error)):v.resolve(Ms(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(u,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const l=Ms(i.data),d=new AbortController;this.abortControllers[u]=d;try{const v=yield this.messageHandlers[i.type](i.sourceMapId,l,d);this.completeTask(u,null,v)}catch(v){this.completeTask(u,v)}})}completeTask(u,i,l){const d=[];delete this.abortControllers[u];const v={id:u,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?lu(i):null,data:lu(l,d)};this.target.postMessage(v,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},p.K=fe,p.L=function(){var u=new Ae(16);return Ae!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},p.M=function(u,i,l){var d,v,b,S,M,D,L,F,G,X,ee,te,ne=l[0],he=l[1],ge=l[2];return i===u?(u[12]=i[0]*ne+i[4]*he+i[8]*ge+i[12],u[13]=i[1]*ne+i[5]*he+i[9]*ge+i[13],u[14]=i[2]*ne+i[6]*he+i[10]*ge+i[14],u[15]=i[3]*ne+i[7]*he+i[11]*ge+i[15]):(v=i[1],b=i[2],S=i[3],M=i[4],D=i[5],L=i[6],F=i[7],G=i[8],X=i[9],ee=i[10],te=i[11],u[0]=d=i[0],u[1]=v,u[2]=b,u[3]=S,u[4]=M,u[5]=D,u[6]=L,u[7]=F,u[8]=G,u[9]=X,u[10]=ee,u[11]=te,u[12]=d*ne+M*he+G*ge+i[12],u[13]=v*ne+D*he+X*ge+i[13],u[14]=b*ne+L*he+ee*ge+i[14],u[15]=S*ne+F*he+te*ge+i[15]),u},p.N=function(u,i,l){var d=l[0],v=l[1],b=l[2];return u[0]=i[0]*d,u[1]=i[1]*d,u[2]=i[2]*d,u[3]=i[3]*d,u[4]=i[4]*v,u[5]=i[5]*v,u[6]=i[6]*v,u[7]=i[7]*v,u[8]=i[8]*b,u[9]=i[9]*b,u[10]=i[10]*b,u[11]=i[11]*b,u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15],u},p.O=function(u,i,l){var d=i[0],v=i[1],b=i[2],S=i[3],M=i[4],D=i[5],L=i[6],F=i[7],G=i[8],X=i[9],ee=i[10],te=i[11],ne=i[12],he=i[13],ge=i[14],ke=i[15],xe=l[0],J=l[1],ce=l[2],Se=l[3];return u[0]=xe*d+J*M+ce*G+Se*ne,u[1]=xe*v+J*D+ce*X+Se*he,u[2]=xe*b+J*L+ce*ee+Se*ge,u[3]=xe*S+J*F+ce*te+Se*ke,u[4]=(xe=l[4])*d+(J=l[5])*M+(ce=l[6])*G+(Se=l[7])*ne,u[5]=xe*v+J*D+ce*X+Se*he,u[6]=xe*b+J*L+ce*ee+Se*ge,u[7]=xe*S+J*F+ce*te+Se*ke,u[8]=(xe=l[8])*d+(J=l[9])*M+(ce=l[10])*G+(Se=l[11])*ne,u[9]=xe*v+J*D+ce*X+Se*he,u[10]=xe*b+J*L+ce*ee+Se*ge,u[11]=xe*S+J*F+ce*te+Se*ke,u[12]=(xe=l[12])*d+(J=l[13])*M+(ce=l[14])*G+(Se=l[15])*ne,u[13]=xe*v+J*D+ce*X+Se*he,u[14]=xe*b+J*L+ce*ee+Se*ge,u[15]=xe*S+J*F+ce*te+Se*ke,u},p.P=B,p.Q=function(u,i){const l={};for(let d=0;d<i.length;d++){const v=i[d];v in u&&(l[v]=u[v])}return l},p.R=Xi,p.S=Nh,p.T=Nt,p.U=U2,p.V=V2,p.W=se,p.X=Ce,p.Y=as,p.Z=Wo,p._=o,p.a=ie,p.a$=function(u,i,l){return u[0]=i[0]*l,u[1]=i[1]*l,u[2]=i[2]*l,u[3]=i[3]*l,u},p.a0=Om,p.a1=Gd,p.a2=25,p.a3=j_,p.a4=u=>{const i=window.document.createElement("video");return i.muted=!0,new Promise(l=>{i.onloadstart=()=>{l(i)};for(const d of u){const v=window.document.createElement("source");qe(d)||(i.crossOrigin="Anonymous"),v.src=d,i.appendChild(v)}})},p.a5=ft,p.a6=function(){return yt++},p.a7=ue,p.a8=ar,p.a9=fo,p.aA=Nn,p.aB=Lt,p.aC=function(u,i,l,d,v=!1){if(!l[0]&&!l[1])return[0,0];const b=v?d==="map"?-u.bearingInRadians:0:d==="viewport"?u.bearingInRadians:0;if(b){const S=Math.sin(b),M=Math.cos(b);l=[l[0]*M-l[1]*S,l[0]*S+l[1]*M]}return[v?l[0]:Lt(i,l[0],u.zoom),v?l[1]:Lt(i,l[1],u.zoom)]},p.aE=An,p.aF=F_,p.aG=A,p.aH=B_,p.aI=sn,p.aJ=Qi,p.aK=Ve,p.aL=Er,p.aM=Kr,p.aN=Qt,p.aO=sa,p.aP=q2,p.aQ=Ft,p.aR=It,p.aS=function(u){var i=new Ae(3);return i[0]=u[0],i[1]=u[1],i[2]=u[2],i},p.aT=function(u,i,l){return u[0]=i[0]-l[0],u[1]=i[1]-l[1],u[2]=i[2]-l[2],u},p.aU=function(u,i){var l=i[0],d=i[1],v=i[2],b=l*l+d*d+v*v;return b>0&&(b=1/Math.sqrt(b)),u[0]=i[0]*b,u[1]=i[1]*b,u[2]=i[2]*b,u},p.aV=er,p.aW=function(u,i){return u[0]*i[0]+u[1]*i[1]+u[2]*i[2]},p.aX=function(u,i,l){return u[0]=i[0]*l[0],u[1]=i[1]*l[1],u[2]=i[2]*l[2],u[3]=i[3]*l[3],u},p.aY=Et,p.aZ=function(u,i,l){const d=i[0]*l[0]+i[1]*l[1]+i[2]*l[2];return d===0?null:(-(u[0]*l[0]+u[1]*l[1]+u[2]*l[2])-l[3])/d},p.a_=vr,p.aa=_u,p.ab=K2,p.ac=function(u){const i={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,d,v,b)=>{const S=v||b;return i[d]=!S||S.toLowerCase(),""}),i["max-age"]){const l=parseInt(i["max-age"],10);isNaN(l)?delete i["max-age"]:i["max-age"]=l}return i},p.ad=Ei,p.ae=function(u){return Math.pow(2,u)},p.af=Qe,p.ag=lt,p.ah=85.051129,p.ai=G2,p.aj=function(u){return Math.log(u)/Math.LN2},p.ak=function(u){var i=u[0],l=u[1];return i*i+l*l},p.al=function(u,i){const l=[];for(const d in u)d in i||l.push(d);return l},p.am=function(u,i){let l=0,d=0;if(u.kind==="constant")d=u.layoutSize;else if(u.kind!=="source"){const{interpolationType:v,minZoom:b,maxZoom:S}=u,M=v?lt(ki.interpolationFactor(v,i,b,S),0,1):0;u.kind==="camera"?d=ha.number(u.minSize,u.maxSize,M):l=M}return{uSizeT:l,uSize:d}},p.ao=function(u,{uSize:i,uSizeT:l},{lowerSize:d,upperSize:v}){return u.kind==="source"?d/kt:u.kind==="composite"?ha.number(d/kt,v/kt,l):i},p.ap=function(u,i){var l=i[0],d=i[1],v=i[2],b=i[3],S=i[4],M=i[5],D=i[6],L=i[7],F=i[8],G=i[9],X=i[10],ee=i[11],te=i[12],ne=i[13],he=i[14],ge=i[15],ke=l*M-d*S,xe=l*D-v*S,J=l*L-b*S,ce=d*D-v*M,Se=d*L-b*M,We=v*L-b*D,at=F*ne-G*te,Ye=F*he-X*te,tt=F*ge-ee*te,ct=G*he-X*ne,ot=G*ge-ee*ne,pt=X*ge-ee*he,rt=ke*pt-xe*ot+J*ct+ce*tt-Se*Ye+We*at;return rt?(u[0]=(M*pt-D*ot+L*ct)*(rt=1/rt),u[1]=(v*ot-d*pt-b*ct)*rt,u[2]=(ne*We-he*Se+ge*ce)*rt,u[3]=(X*Se-G*We-ee*ce)*rt,u[4]=(D*tt-S*pt-L*Ye)*rt,u[5]=(l*pt-v*tt+b*Ye)*rt,u[6]=(he*J-te*We-ge*xe)*rt,u[7]=(F*We-X*J+ee*xe)*rt,u[8]=(S*ot-M*tt+L*at)*rt,u[9]=(d*tt-l*ot-b*at)*rt,u[10]=(te*Se-ne*J+ge*ke)*rt,u[11]=(G*J-F*Se-ee*ke)*rt,u[12]=(M*Ye-S*ct-D*at)*rt,u[13]=(l*ct-d*Ye+v*at)*rt,u[14]=(ne*xe-te*ce-he*ke)*rt,u[15]=(F*ce-G*xe+X*ke)*rt,u):null},p.aq=wt,p.ar=function(u){return Math.hypot(u[0],u[1])},p.as=function(u){return u[0]=0,u[1]=0,u},p.at=function(u,i,l){return u[0]=i[0]*l,u[1]=i[1]*l,u},p.au=St,p.av=Mt,p.aw=function(u,i,l,d){const v=i.y-u.y,b=i.x-u.x,S=d.y-l.y,M=d.x-l.x,D=S*b-M*v;if(D===0)return null;const L=(M*(u.y-l.y)-S*(u.x-l.x))/D;return new B(u.x+L*b,u.y+L*v)},p.ax=Q2,p.ay=va,p.az=function(u){let i=1/0,l=1/0,d=-1/0,v=-1/0;for(const b of u)i=Math.min(i,b.x),l=Math.min(l,b.y),d=Math.max(d,b.x),v=Math.max(v,b.y);return[i,l,d,v]},p.b=oa,p.b$=sp,p.b0=function(u,i){return u[0]*i[0]+u[1]*i[1]+u[2]*i[2]+u[3]},p.b1=Z2,p.b2=dp,p.b3=function(u,i,l,d,v){var b,S=1/Math.tan(i/2);return u[0]=S/l,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=S,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,v!=null&&v!==1/0?(u[10]=(v+d)*(b=1/(d-v)),u[14]=2*v*d*b):(u[10]=-1,u[14]=-2*d),u},p.b4=function(u){var i=new Ae(16);return i[0]=u[0],i[1]=u[1],i[2]=u[2],i[3]=u[3],i[4]=u[4],i[5]=u[5],i[6]=u[6],i[7]=u[7],i[8]=u[8],i[9]=u[9],i[10]=u[10],i[11]=u[11],i[12]=u[12],i[13]=u[13],i[14]=u[14],i[15]=u[15],i},p.b5=function(u,i,l){var d=Math.sin(l),v=Math.cos(l),b=i[0],S=i[1],M=i[2],D=i[3],L=i[4],F=i[5],G=i[6],X=i[7];return i!==u&&(u[8]=i[8],u[9]=i[9],u[10]=i[10],u[11]=i[11],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15]),u[0]=b*v+L*d,u[1]=S*v+F*d,u[2]=M*v+G*d,u[3]=D*v+X*d,u[4]=L*v-b*d,u[5]=F*v-S*d,u[6]=G*v-M*d,u[7]=X*v-D*d,u},p.b6=function(u,i,l){var d=Math.sin(l),v=Math.cos(l),b=i[4],S=i[5],M=i[6],D=i[7],L=i[8],F=i[9],G=i[10],X=i[11];return i!==u&&(u[0]=i[0],u[1]=i[1],u[2]=i[2],u[3]=i[3],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15]),u[4]=b*v+L*d,u[5]=S*v+F*d,u[6]=M*v+G*d,u[7]=D*v+X*d,u[8]=L*v-b*d,u[9]=F*v-S*d,u[10]=G*v-M*d,u[11]=X*v-D*d,u},p.b7=function(){const u=new Float32Array(16);return Qe(u),u},p.b8=function(){const u=new Float64Array(16);return Qe(u),u},p.b9=function(){return new Float64Array(16)},p.bA=function(u){return u[0]=0,u[1]=0,u[2]=0,u},p.bB=function(u,i,l,d){const v=Math.sqrt(u*u+i*i),b=Math.sqrt(l*l+d*d);u/=v,i/=v,l/=b,d/=b;const S=Math.acos(u*l+i*d);return-i*l+u*d>0?S:-S},p.bC=function(u,i){const l=Xt(u,2*Math.PI),d=Xt(i,2*Math.PI);return Math.min(Math.abs(l-d),Math.abs(l-d+2*Math.PI),Math.abs(l-d-2*Math.PI))},p.bD=function(){const u={},i=Me.$version;for(const l in Me.$root){const d=Me.$root[l];if(d.required){let v=null;v=l==="version"?i:d.type==="array"?[]:{},v!=null&&(u[l]=v)}}return u},p.bE=pc,p.bF=Ie,p.bG=function u(i,l){if(Array.isArray(i)){if(!Array.isArray(l)||i.length!==l.length)return!1;for(let d=0;d<i.length;d++)if(!u(i[d],l[d]))return!1;return!0}if(typeof i=="object"&&i!==null&&l!==null){if(typeof l!="object"||Object.keys(i).length!==Object.keys(l).length)return!1;for(const d in i)if(!u(i[d],l[d]))return!1;return!0}return i===l},p.bH=function(u){u=u.slice();const i=Object.create(null);for(let l=0;l<u.length;l++)i[u[l].id]=u[l];for(let l=0;l<u.length;l++)"ref"in u[l]&&(u[l]=Kt(u[l],i[u[l].ref]));return u},p.bI=function(u){if(u.type==="custom")return new u4(u);switch(u.type){case"background":return new o4(u);case"circle":return new P_(u);case"color-relief":return new Kg(u);case"fill":return new bm(u);case"fill-extrusion":return new Tm(u);case"heatmap":return new Yi(u);case"hillshade":return new tp(u);case"line":return new oy(u);case"raster":return new l4(u);case"symbol":return new fy(u)}},p.bJ=Qr,p.bK=function(u,i){if(!u)return[{command:"setStyle",args:[i]}];let l=[];try{if(!At(u.version,i.version))return[{command:"setStyle",args:[i]}];At(u.center,i.center)||l.push({command:"setCenter",args:[i.center]}),At(u.state,i.state)||l.push({command:"setGlobalState",args:[i.state]}),At(u.centerAltitude,i.centerAltitude)||l.push({command:"setCenterAltitude",args:[i.centerAltitude]}),At(u.zoom,i.zoom)||l.push({command:"setZoom",args:[i.zoom]}),At(u.bearing,i.bearing)||l.push({command:"setBearing",args:[i.bearing]}),At(u.pitch,i.pitch)||l.push({command:"setPitch",args:[i.pitch]}),At(u.roll,i.roll)||l.push({command:"setRoll",args:[i.roll]}),At(u.sprite,i.sprite)||l.push({command:"setSprite",args:[i.sprite]}),At(u.glyphs,i.glyphs)||l.push({command:"setGlyphs",args:[i.glyphs]}),At(u.transition,i.transition)||l.push({command:"setTransition",args:[i.transition]}),At(u.light,i.light)||l.push({command:"setLight",args:[i.light]}),At(u.terrain,i.terrain)||l.push({command:"setTerrain",args:[i.terrain]}),At(u.sky,i.sky)||l.push({command:"setSky",args:[i.sky]}),At(u.projection,i.projection)||l.push({command:"setProjection",args:[i.projection]});const d={},v=[];(function(S,M,D,L){let F;for(F in M=M||{},S=S||{})Object.prototype.hasOwnProperty.call(S,F)&&(Object.prototype.hasOwnProperty.call(M,F)||Wr(F,D,L));for(F in M)Object.prototype.hasOwnProperty.call(M,F)&&(Object.prototype.hasOwnProperty.call(S,F)?At(S[F],M[F])||(S[F].type==="geojson"&&M[F].type==="geojson"&&kr(S,M,F)?Bt(D,{command:"setGeoJSONSourceData",args:[F,M[F].data]}):Ar(F,M,D,L)):Yt(F,M,D))})(u.sources,i.sources,v,d);const b=[];u.layers&&u.layers.forEach(S=>{"source"in S&&d[S.source]?l.push({command:"removeLayer",args:[S.id]}):b.push(S)}),l=l.concat(v),function(S,M,D){M=M||[];const L=(S=S||[]).map(xr),F=M.map(xr),G=S.reduce(Tn,{}),X=M.reduce(Tn,{}),ee=L.slice(),te=Object.create(null);let ne,he,ge,ke,xe;for(let J=0,ce=0;J<L.length;J++)ne=L[J],Object.prototype.hasOwnProperty.call(X,ne)?ce++:(Bt(D,{command:"removeLayer",args:[ne]}),ee.splice(ee.indexOf(ne,ce),1));for(let J=0,ce=0;J<F.length;J++)ne=F[F.length-1-J],ee[ee.length-1-J]!==ne&&(Object.prototype.hasOwnProperty.call(G,ne)?(Bt(D,{command:"removeLayer",args:[ne]}),ee.splice(ee.lastIndexOf(ne,ee.length-ce),1)):ce++,ke=ee[ee.length-J],Bt(D,{command:"addLayer",args:[X[ne],ke]}),ee.splice(ee.length-J,0,ne),te[ne]=!0);for(let J=0;J<F.length;J++)if(ne=F[J],he=G[ne],ge=X[ne],!te[ne]&&!At(he,ge))if(At(he.source,ge.source)&&At(he["source-layer"],ge["source-layer"])&&At(he.type,ge.type)){for(xe in Zt(he.layout,ge.layout,D,ne,null,"setLayoutProperty"),Zt(he.paint,ge.paint,D,ne,null,"setPaintProperty"),At(he.filter,ge.filter)||Bt(D,{command:"setFilter",args:[ne,ge.filter]}),At(he.minzoom,ge.minzoom)&&At(he.maxzoom,ge.maxzoom)||Bt(D,{command:"setLayerZoomRange",args:[ne,ge.minzoom,ge.maxzoom]}),he)Object.prototype.hasOwnProperty.call(he,xe)&&xe!=="layout"&&xe!=="paint"&&xe!=="filter"&&xe!=="metadata"&&xe!=="minzoom"&&xe!=="maxzoom"&&(xe.indexOf("paint.")===0?Zt(he[xe],ge[xe],D,ne,xe.slice(6),"setPaintProperty"):At(he[xe],ge[xe])||Bt(D,{command:"setLayerProperty",args:[ne,xe,ge[xe]]}));for(xe in ge)Object.prototype.hasOwnProperty.call(ge,xe)&&!Object.prototype.hasOwnProperty.call(he,xe)&&xe!=="layout"&&xe!=="paint"&&xe!=="filter"&&xe!=="metadata"&&xe!=="minzoom"&&xe!=="maxzoom"&&(xe.indexOf("paint.")===0?Zt(he[xe],ge[xe],D,ne,xe.slice(6),"setPaintProperty"):At(he[xe],ge[xe])||Bt(D,{command:"setLayerProperty",args:[ne,xe,ge[xe]]}))}else Bt(D,{command:"removeLayer",args:[ne]}),ke=ee[ee.lastIndexOf(ne)+1],Bt(D,{command:"addLayer",args:[ge,ke]})}(b,i.layers,l)}catch(d){console.warn("Unable to compute style diff:",d),l=[{command:"setStyle",args:[i]}]}return l},p.bL=function(u){const i=[],l=u.id;return l===void 0&&i.push({message:`layers.${l}: missing required property "id"`}),u.render===void 0&&i.push({message:`layers.${l}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&i.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),i},p.bM=_r,p.bN=Tr,p.bO=class extends en{constructor(u,i){super(u,i),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},p.bP=Wf,p.bQ=class extends en{constructor(u,i){super(u,i),this.current=om}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let i=1;i<16;i++)if(u[i]!==this.current[i]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},p.bR=Un,p.bS=class extends en{constructor(u,i){super(u,i),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},p.bT=class extends en{constructor(u,i){super(u,i),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},p.bU=Ne,p.bV=function(u,i){var l=Math.sin(i),d=Math.cos(i);return u[0]=d,u[1]=l,u[2]=0,u[3]=-l,u[4]=d,u[5]=0,u[6]=0,u[7]=0,u[8]=1,u},p.bW=function(u,i,l){var d=i[0],v=i[1],b=i[2];return u[0]=d*l[0]+v*l[3]+b*l[6],u[1]=d*l[1]+v*l[4]+b*l[7],u[2]=d*l[2]+v*l[5]+b*l[8],u},p.bX=function(u,i,l,d,v,b,S){var M=1/(i-l),D=1/(d-v),L=1/(b-S);return u[0]=-2*M,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*D,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*L,u[11]=0,u[12]=(i+l)*M,u[13]=(v+d)*D,u[14]=(S+b)*L,u[15]=1,u},p.bY=class extends en{constructor(u,i){super(u,i),this.current=new Array}set(u){if(u!=this.current){this.current=u;const i=new Float32Array(4*u.length);for(let l=0;l<u.length;l++)i[4*l]=u[l].r,i[4*l+1]=u[l].g,i[4*l+2]=u[l].b,i[4*l+3]=u[l].a;this.gl.uniform4fv(this.location,i)}}},p.bZ=class extends en{constructor(u,i){super(u,i),this.current=new Array}set(u){if(u!=this.current){this.current=u;const i=new Float32Array(u);this.gl.uniform1fv(this.location,i)}}},p.b_=class extends f{},p.ba=function(u,i,l){const d=new Float64Array(4);return Ct(d,u,i-90,l),d},p.bb=function(u,i,l,d){var v,b,S,M,D,L=i[0],F=i[1],G=i[2],X=i[3],ee=l[0],te=l[1],ne=l[2],he=l[3];return(b=L*ee+F*te+G*ne+X*he)<0&&(b=-b,ee=-ee,te=-te,ne=-ne,he=-he),1-b>be?(v=Math.acos(b),S=Math.sin(v),M=Math.sin((1-d)*v)/S,D=Math.sin(d*v)/S):(M=1-d,D=d),u[0]=M*L+D*ee,u[1]=M*F+D*te,u[2]=M*G+D*ne,u[3]=M*X+D*he,u},p.bc=function(u){const i=new Float64Array(9);var l,d,v,b,S,M,D,L,F,G,X,ee,te,ne,he,ge,ke,xe;G=(v=(d=u)[0])*(D=v+v),X=(b=d[1])*D,te=(S=d[2])*D,ne=S*(L=b+b),ge=(M=d[3])*D,ke=M*L,xe=M*(F=S+S),(l=i)[0]=1-(ee=b*L)-(he=S*F),l[3]=X-xe,l[6]=te+ke,l[1]=X+xe,l[4]=1-G-he,l[7]=ne-ge,l[2]=te-ke,l[5]=ne+ge,l[8]=1-G-ee;const J=sa(-Math.asin(lt(i[2],-1,1)));let ce,Se;return Math.hypot(i[5],i[8])<.001?(ce=0,Se=-sa(Math.atan2(i[3],i[4]))):(ce=sa(i[5]===0&&i[8]===0?0:Math.atan2(i[5],i[8])),Se=sa(i[1]===0&&i[0]===0?0:Math.atan2(i[1],i[0]))),{roll:ce,pitch:J+90,bearing:Se}},p.bd=function(u,i){return u.roll==i.roll&&u.pitch==i.pitch&&u.bearing==i.bearing},p.be=cr,p.bf=Qn,p.bg=Go,p.bh=Mn,p.bi=jn,p.bj=tr,p.bk=Pr,p.bl=hr,p.bm=function(u,i,l,d,v){return tr(d,v,lt((u-i)/(l-i),0,1))},p.bn=Xt,p.bo=function(){return new Float64Array(3)},p.bp=function(u,i,l,d){return u[0]=i[0]+l[0]*d,u[1]=i[1]+l[1]*d,u[2]=i[2]+l[2]*d,u},p.bq=Ct,p.br=function(u,i,l){var d=l[0],v=l[1],b=l[2],S=i[0],M=i[1],D=i[2],L=v*D-b*M,F=b*S-d*D,G=d*M-v*S,X=v*G-b*F,ee=b*L-d*G,te=d*F-v*L,ne=2*l[3];return F*=ne,G*=ne,ee*=2,te*=2,u[0]=S+(L*=ne)+(X*=2),u[1]=M+F+ee,u[2]=D+G+te,u},p.bs=function(u,i,l){const d=(v=[u[0],u[1],u[2],i[0],i[1],i[2],l[0],l[1],l[2]])[0]*((F=v[8])*(S=v[4])-(M=v[5])*(L=v[7]))+v[1]*(-F*(b=v[3])+M*(D=v[6]))+v[2]*(L*b-S*D);var v,b,S,M,D,L,F;if(d===0)return null;const G=er([],[i[0],i[1],i[2]],[l[0],l[1],l[2]]),X=er([],[l[0],l[1],l[2]],[u[0],u[1],u[2]]),ee=er([],[u[0],u[1],u[2]],[i[0],i[1],i[2]]),te=Ft([],G,-u[3]);return It(te,te,Ft([],X,-i[3])),It(te,te,Ft([],ee,-l[3])),Ft(te,te,1/d),te},p.bt=z_,p.bu=function(){return new Float64Array(4)},p.bv=function(u,i,l,d){var v=[],b=[];return v[0]=i[0]-l[0],v[1]=i[1]-l[1],v[2]=i[2]-l[2],b[0]=v[0]*Math.cos(d)-v[1]*Math.sin(d),b[1]=v[0]*Math.sin(d)+v[1]*Math.cos(d),b[2]=v[2],u[0]=b[0]+l[0],u[1]=b[1]+l[1],u[2]=b[2]+l[2],u},p.bw=function(u,i,l,d){var v=[],b=[];return v[0]=i[0]-l[0],v[1]=i[1]-l[1],v[2]=i[2]-l[2],b[0]=v[0],b[1]=v[1]*Math.cos(d)-v[2]*Math.sin(d),b[2]=v[1]*Math.sin(d)+v[2]*Math.cos(d),u[0]=b[0]+l[0],u[1]=b[1]+l[1],u[2]=b[2]+l[2],u},p.bx=function(u,i,l,d){var v=[],b=[];return v[0]=i[0]-l[0],v[1]=i[1]-l[1],v[2]=i[2]-l[2],b[0]=v[2]*Math.sin(d)+v[0]*Math.cos(d),b[1]=v[1],b[2]=v[2]*Math.cos(d)-v[0]*Math.sin(d),u[0]=b[0]+l[0],u[1]=b[1]+l[1],u[2]=b[2]+l[2],u},p.by=function(u,i,l){var d=Math.sin(l),v=Math.cos(l),b=i[0],S=i[1],M=i[2],D=i[3],L=i[8],F=i[9],G=i[10],X=i[11];return i!==u&&(u[4]=i[4],u[5]=i[5],u[6]=i[6],u[7]=i[7],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15]),u[0]=b*v-L*d,u[1]=S*v-F*d,u[2]=M*v-G*d,u[3]=D*v-X*d,u[8]=b*d+L*v,u[9]=S*d+F*v,u[10]=M*d+G*v,u[11]=D*d+X*v,u},p.bz=function(u,i){const l=Xt(u,360),d=Xt(i,360),v=d-l,b=d>l?v-360:v+360;return Math.abs(v)<Math.abs(b)?v:b},p.c=Fe,p.c0=class extends x{},p.c1=Cc,p.c2=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},p.c3=mm,p.c4=function(u,i,l){var d=i[0],v=i[1],b=i[2],S=l[3]*d+l[7]*v+l[11]*b+l[15];return u[0]=(l[0]*d+l[4]*v+l[8]*b+l[12])/(S=S||1),u[1]=(l[1]*d+l[5]*v+l[9]*b+l[13])/S,u[2]=(l[2]*d+l[6]*v+l[10]*b+l[14])/S,u},p.c5=class extends fu{},p.c6=class extends q{},p.c7=function(u,i){return u[0]===i[0]&&u[1]===i[1]&&u[2]===i[2]&&u[3]===i[3]&&u[4]===i[4]&&u[5]===i[5]&&u[6]===i[6]&&u[7]===i[7]&&u[8]===i[8]&&u[9]===i[9]&&u[10]===i[10]&&u[11]===i[11]&&u[12]===i[12]&&u[13]===i[13]&&u[14]===i[14]&&u[15]===i[15]},p.c8=function(u,i){var l=u[0],d=u[1],v=u[2],b=u[3],S=u[4],M=u[5],D=u[6],L=u[7],F=u[8],G=u[9],X=u[10],ee=u[11],te=u[12],ne=u[13],he=u[14],ge=u[15],ke=i[0],xe=i[1],J=i[2],ce=i[3],Se=i[4],We=i[5],at=i[6],Ye=i[7],tt=i[8],ct=i[9],ot=i[10],pt=i[11],rt=i[12],Rt=i[13],Ht=i[14],qt=i[15];return Math.abs(l-ke)<=be*Math.max(1,Math.abs(l),Math.abs(ke))&&Math.abs(d-xe)<=be*Math.max(1,Math.abs(d),Math.abs(xe))&&Math.abs(v-J)<=be*Math.max(1,Math.abs(v),Math.abs(J))&&Math.abs(b-ce)<=be*Math.max(1,Math.abs(b),Math.abs(ce))&&Math.abs(S-Se)<=be*Math.max(1,Math.abs(S),Math.abs(Se))&&Math.abs(M-We)<=be*Math.max(1,Math.abs(M),Math.abs(We))&&Math.abs(D-at)<=be*Math.max(1,Math.abs(D),Math.abs(at))&&Math.abs(L-Ye)<=be*Math.max(1,Math.abs(L),Math.abs(Ye))&&Math.abs(F-tt)<=be*Math.max(1,Math.abs(F),Math.abs(tt))&&Math.abs(G-ct)<=be*Math.max(1,Math.abs(G),Math.abs(ct))&&Math.abs(X-ot)<=be*Math.max(1,Math.abs(X),Math.abs(ot))&&Math.abs(ee-pt)<=be*Math.max(1,Math.abs(ee),Math.abs(pt))&&Math.abs(te-rt)<=be*Math.max(1,Math.abs(te),Math.abs(rt))&&Math.abs(ne-Rt)<=be*Math.max(1,Math.abs(ne),Math.abs(Rt))&&Math.abs(he-Ht)<=be*Math.max(1,Math.abs(he),Math.abs(Ht))&&Math.abs(ge-qt)<=be*Math.max(1,Math.abs(ge),Math.abs(qt))},p.c9=function(u,i){return u[0]=i[0],u[1]=i[1],u[2]=i[2],u[3]=i[3],u[4]=i[4],u[5]=i[5],u[6]=i[6],u[7]=i[7],u[8]=i[8],u[9]=i[9],u[10]=i[10],u[11]=i[11],u[12]=i[12],u[13]=i[13],u[14]=i[14],u[15]=i[15],u},p.cA=function(u){delete ie.REGISTERED_PROTOCOLS[u]},p.cB=function(u,i){const l={};for(let v=0;v<u.length;v++){const b=i&&i[u[v].id]||hc(u[v]);i&&(i[u[v].id]=b);let S=l[b];S||(S=l[b]=[]),S.push(u[v])}const d=[];for(const v in l)d.push(l[v]);return d},p.cC=Tt,p.cD=H2,p.cE=X2,p.cF=Vd,p.cG=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=$e/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;const i=u.bucket.layers[0],l=i.layout,d=i._unevaluatedLayout._values,v={layoutIconSize:d["icon-size"].possiblyEvaluate(new Hr(u.bucket.zoom+1),u.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new Hr(u.bucket.zoom+1),u.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new Hr(18))};if(u.bucket.textSizeData.kind==="composite"){const{minZoom:L,maxZoom:F}=u.bucket.textSizeData;v.compositeTextSizes=[d["text-size"].possiblyEvaluate(new Hr(L),u.canonical),d["text-size"].possiblyEvaluate(new Hr(F),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){const{minZoom:L,maxZoom:F}=u.bucket.iconSizeData;v.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new Hr(L),u.canonical),d["icon-size"].possiblyEvaluate(new Hr(F),u.canonical)]}const b=l.get("text-line-height")*Nn,S=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",M=l.get("text-keep-upright"),D=l.get("text-size");for(const L of u.bucket.features){const F=l.get("text-font").evaluate(L,{},u.canonical).join(","),G=D.evaluate(L,{},u.canonical),X=v.layoutTextSize.evaluate(L,{},u.canonical),ee=v.layoutIconSize.evaluate(L,{},u.canonical),te={horizontal:{},vertical:void 0},ne=L.text;let he,ge=[0,0];if(ne){const J=ne.toString(),ce=l.get("text-letter-spacing").evaluate(L,{},u.canonical)*Nn,Se=on(J)?ce:0,We=l.get("text-anchor").evaluate(L,{},u.canonical),at=sS(i,L,u.canonical);if(!at){const ot=l.get("text-radial-offset").evaluate(L,{},u.canonical);ge=ot?oS(We,[ot*Nn,N_]):l.get("text-offset").evaluate(L,{},u.canonical).map(pt=>pt*Nn)}let Ye=S?"center":l.get("text-justify").evaluate(L,{},u.canonical);const tt=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(L,{},u.canonical)*Nn:1/0,ct=()=>{u.bucket.allowVerticalPlacement&&Oi(J)&&(te.vertical=Ud(ne,u.glyphMap,u.glyphPositions,u.imagePositions,F,tt,b,We,"left",Se,ge,p.an.vertical,!0,X,G))};if(!S&&at){const ot=new Set;if(Ye==="auto")for(let rt=0;rt<at.values.length;rt+=2)ot.add(F_(at.values[rt]));else ot.add(Ye);let pt=!1;for(const rt of ot)if(!te.horizontal[rt])if(pt)te.horizontal[rt]=te.horizontal[0];else{const Rt=Ud(ne,u.glyphMap,u.glyphPositions,u.imagePositions,F,tt,b,"center",rt,Se,ge,p.an.horizontal,!1,X,G);Rt&&(te.horizontal[rt]=Rt,pt=Rt.positionedLines.length===1)}ct()}else{Ye==="auto"&&(Ye=F_(We));const ot=Ud(ne,u.glyphMap,u.glyphPositions,u.imagePositions,F,tt,b,We,Ye,Se,ge,p.an.horizontal,!1,X,G);ot&&(te.horizontal[Ye]=ot),ct(),Oi(J)&&S&&M&&(te.vertical=Ud(ne,u.glyphMap,u.glyphPositions,u.imagePositions,F,tt,b,We,Ye,Se,ge,p.an.vertical,!1,X,G))}}let ke=!1;if(L.icon&&L.icon.name){const J=u.imageMap[L.icon.name];J&&(he=mt(u.imagePositions[L.icon.name],l.get("icon-offset").evaluate(L,{},u.canonical),l.get("icon-anchor").evaluate(L,{},u.canonical)),ke=!!J.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=ke:u.bucket.sdfIcons!==ke&&Jr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(J.pixelRatio!==u.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}const xe=uS(te.horizontal)||te.vertical;u.bucket.iconsInText=!!xe&&xe.iconsInText,(xe||he)&&v4(u.bucket,L,te,he,u.imageMap,v,X,ee,ge,ke,u.canonical,u.subdivisionGranularity)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},p.cH=xn,p.cI=zd,p.cJ=Nd,p.cK=Dc,p.cL=Lh,p.cM=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},p.cN=function(u,i,l,d,v){return o(this,void 0,void 0,function*(){if(Ce())try{return yield as(u,i,l,d,v)}catch{}return function(b,S,M,D,L){const F=b.width,G=b.height;no&&os||(no=new OffscreenCanvas(F,G),os=no.getContext("2d",{willReadFrequently:!0})),no.width=F,no.height=G,os.drawImage(b,0,0,F,G);const X=os.getImageData(S,M,D,L);return os.clearRect(0,0,F,G),X.data}(u,i,l,d,v)})},p.cO=Ec,p.cP=P,p.cQ=I,p.cR=op,p.cS=Im,p.cT=dl,p.cU=As,p.ca=u=>u.type==="symbol",p.cb=u=>u.type==="circle",p.cc=u=>u.type==="heatmap",p.cd=u=>u.type==="line",p.ce=u=>u.type==="fill",p.cf=u=>u.type==="fill-extrusion",p.cg=u=>u.type==="hillshade",p.ch=u=>u.type==="color-relief",p.ci=u=>u.type==="raster",p.cj=u=>u.type==="background",p.ck=u=>u.type==="custom",p.cl=zr,p.cm=function(u,i,l){const d=ze(i.x-l.x,i.y-l.y),v=ze(u.x-l.x,u.y-l.y);var b,S;return sa(Math.atan2(d[0]*v[1]-d[1]*v[0],(b=d)[0]*(S=v)[0]+b[1]*S[1]))},p.cn=Ir,p.co=function(u,i){return ss[i]&&(u instanceof MouseEvent||u instanceof WheelEvent)},p.cp=function(u,i){return $l[i]&&"touches"in u},p.cq=function(u){return $l[u]||ss[u]},p.cr=function(u,i,l){var d=i[0],v=i[1];return u[0]=l[0]*d+l[4]*v+l[12],u[1]=l[1]*d+l[5]*v+l[13],u},p.cs=function(u,i){const{x:l,y:d}=Om.fromLngLat(i);return!(u<0||u>25||d<0||d>=1||l<0||l>=1)},p.ct=function(u,i){return u[0]=i[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=i[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=i[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},p.cu=class extends zi{},p.cv=x4,p.cx=function(u){return u.message===la},p.cy=_e,p.cz=function(u,i){ie.REGISTERED_PROTOCOLS[u]=i},p.d=qe,p.e=sr,p.f=u=>o(void 0,void 0,void 0,function*(){if(u.byteLength===0)return createImageBitmap(new ImageData(1,1));const i=new Blob([new Uint8Array(u)],{type:"image/png"});try{return createImageBitmap(i)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),p.g=oe,p.h=u=>new Promise((i,l)=>{const d=new Image;d.onload=()=>{i(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=Js})},d.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(u)],{type:"image/png"});d.src=u.byteLength?URL.createObjectURL(v):Js}),p.i=fi,p.j=(u,i)=>Le(sr(u,{type:"json"}),i),p.k=Be,p.l=Xe,p.m=Le,p.n=(u,i)=>Le(sr(u,{type:"arrayBuffer"}),i),p.o=function(u){return new Lh(u).readFields(cy,[])},p.p=Dm,p.q=Tc,p.r=tn,p.s=io,p.t=Sh,p.u=rr,p.v=Me,p.w=Jr,p.x=Cs,p.y=Es,p.z=au}),h("worker",["./shared"],function(p){class o{constructor(ie){this.keyCache={},ie&&this.replace(ie)}replace(ie){this._layerConfigs={},this._layers={},this.update(ie,[])}update(ie,oe){for(const _e of ie){this._layerConfigs[_e.id]=_e;const Ie=this._layers[_e.id]=p.bI(_e);Ie._featureFilter=p.a9(Ie.filter),this.keyCache[_e.id]&&delete this.keyCache[_e.id]}for(const _e of oe)delete this.keyCache[_e],delete this._layerConfigs[_e],delete this._layers[_e];this.familiesBySource={};const fe=p.cB(Object.values(this._layerConfigs),this.keyCache);for(const _e of fe){const Ie=_e.map(Be=>this._layers[Be.id]),Le=Ie[0];if(Le.visibility==="none")continue;const qe=Le.source||"";let Re=this.familiesBySource[qe];Re||(Re=this.familiesBySource[qe]={});const Je=Le.sourceLayer||"_geojsonTileLayer";let Xe=Re[Je];Xe||(Xe=Re[Je]=[]),Xe.push(Ie)}}}class P{constructor(ie){const oe={},fe=[];for(const qe in ie){const Re=ie[qe],Je=oe[qe]={};for(const Xe in Re){const Be=Re[+Xe];if(!Be||Be.bitmap.width===0||Be.bitmap.height===0)continue;const nt={x:0,y:0,w:Be.bitmap.width+2,h:Be.bitmap.height+2};fe.push(nt),Je[Xe]={rect:nt,metrics:Be.metrics}}}const{w:_e,h:Ie}=p.p(fe),Le=new p.q({width:_e||1,height:Ie||1});for(const qe in ie){const Re=ie[qe];for(const Je in Re){const Xe=Re[+Je];if(!Xe||Xe.bitmap.width===0||Xe.bitmap.height===0)continue;const Be=oe[qe][Je].rect;p.q.copy(Xe.bitmap,Le,{x:0,y:0},{x:Be.x+1,y:Be.y+1},Xe.bitmap)}}this.image=Le,this.positions=oe}}p.cC("GlyphAtlas",P);class E{constructor(ie){this.tileID=new p.Z(ie.tileID.overscaledZ,ie.tileID.wrap,ie.tileID.canonical.z,ie.tileID.canonical.x,ie.tileID.canonical.y),this.uid=ie.uid,this.zoom=ie.zoom,this.pixelRatio=ie.pixelRatio,this.tileSize=ie.tileSize,this.source=ie.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ie.showCollisionBoxes,this.collectResourceTiming=!!ie.collectResourceTiming,this.returnDependencies=!!ie.returnDependencies,this.promoteId=ie.promoteId,this.inFlightDependencies=[],this.globalState=ie.globalState}parse(ie,oe,fe,_e,Ie){return p._(this,void 0,void 0,function*(){this.status="parsing",this.data=ie,this.collisionBoxArray=new p.a7;const Le=new p.cD(Object.keys(ie.layers).sort()),qe=new p.cE(this.tileID,this.promoteId);qe.bucketLayerIDs=[];const Re={},Je={featureIndex:qe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:fe,subdivisionGranularity:Ie},Xe=oe.familiesBySource[this.source];for(const Zt in Xe){const xr=ie.layers[Zt];if(!xr)continue;xr.version===1&&p.w(`Vector tile source "${this.source}" layer "${Zt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Tn=Le.encode(Zt),ft=[];for(let ni=0;ni<xr.length;ni++){const cn=xr.feature(ni),ls=qe.getId(cn,Zt);ft.push({feature:cn,id:ls,index:ni,sourceLayerIndex:Tn})}for(const ni of Xe[Zt]){const cn=ni[0];cn.source!==this.source&&p.w(`layer.source = ${cn.source} does not equal this.source = ${this.source}`),cn.minzoom&&this.zoom<Math.floor(cn.minzoom)||cn.maxzoom&&this.zoom>=cn.maxzoom||cn.visibility!=="none"&&(C(ni,this.zoom,fe),(Re[cn.id]=cn.createBucket({index:qe.bucketLayerIDs.length,layers:ni,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Tn,sourceID:this.source,globalState:this.globalState})).populate(ft,Je,this.tileID.canonical),qe.bucketLayerIDs.push(ni.map(ls=>ls.id)))}}const Be=p.bM(Je.glyphDependencies,Zt=>Object.keys(Zt).map(Number));this.inFlightDependencies.forEach(Zt=>Zt?.abort()),this.inFlightDependencies=[];let nt=Promise.resolve({});if(Object.keys(Be).length){const Zt=new AbortController;this.inFlightDependencies.push(Zt),nt=_e.sendAsync({type:"GG",data:{stacks:Be,source:this.source,tileID:this.tileID,type:"glyphs"}},Zt)}const Me=Object.keys(Je.iconDependencies);let Pt=Promise.resolve({});if(Me.length){const Zt=new AbortController;this.inFlightDependencies.push(Zt),Pt=_e.sendAsync({type:"GI",data:{icons:Me,source:this.source,tileID:this.tileID,type:"icons"}},Zt)}const Kt=Object.keys(Je.patternDependencies);let At=Promise.resolve({});if(Kt.length){const Zt=new AbortController;this.inFlightDependencies.push(Zt),At=_e.sendAsync({type:"GI",data:{icons:Kt,source:this.source,tileID:this.tileID,type:"patterns"}},Zt)}const[Bt,Yt,Wr]=yield Promise.all([nt,Pt,At]),Ar=new P(Bt),kr=new p.cF(Yt,Wr);for(const Zt in Re){const xr=Re[Zt];xr instanceof p.a8?(C(xr.layers,this.zoom,fe),p.cG({bucket:xr,glyphMap:Bt,glyphPositions:Ar.positions,imageMap:Yt,imagePositions:kr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Je.subdivisionGranularity})):xr.hasPattern&&(xr instanceof p.cH||xr instanceof p.cI||xr instanceof p.cJ)&&(C(xr.layers,this.zoom,fe),xr.addFeatures(Je,this.tileID.canonical,kr.patternPositions))}return this.status="done",{buckets:Object.values(Re).filter(Zt=>!Zt.isEmpty()),featureIndex:qe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ar.image,imageAtlas:kr,glyphMap:this.returnDependencies?Bt:null,iconMap:this.returnDependencies?Yt:null,glyphPositions:this.returnDependencies?Ar.positions:null}})}}function C(Fe,ie,oe){const fe=new p.F(ie);for(const _e of Fe)_e.recalculate(fe,oe)}class I{constructor(ie,oe,fe){this.actor=ie,this.layerIndex=oe,this.availableImages=fe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ie,oe){return p._(this,void 0,void 0,function*(){const fe=yield p.n(ie.request,oe);try{return{vectorTile:new p.cK.VectorTile(new p.cL(fe.data)),rawData:fe.data,cacheControl:fe.cacheControl,expires:fe.expires}}catch(_e){const Ie=new Uint8Array(fe.data);let Le=`Unable to parse the tile at ${ie.request.url}, `;throw Le+=Ie[0]===31&&Ie[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${_e.message}`,new Error(Le)}})}loadTile(ie){return p._(this,void 0,void 0,function*(){const oe=ie.uid,fe=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new p.cM(ie.request),_e=new E(ie);this.loading[oe]=_e;const Ie=new AbortController;_e.abort=Ie;try{const Le=yield this.loadVectorTile(ie,Ie);if(delete this.loading[oe],!Le)return null;const qe=Le.rawData,Re={};Le.expires&&(Re.expires=Le.expires),Le.cacheControl&&(Re.cacheControl=Le.cacheControl);const Je={};if(fe){const Be=fe.finish();Be&&(Je.resourceTiming=JSON.parse(JSON.stringify(Be)))}_e.vectorTile=Le.vectorTile;const Xe=_e.parse(Le.vectorTile,this.layerIndex,this.availableImages,this.actor,ie.subdivisionGranularity);this.loaded[oe]=_e,this.fetching[oe]={rawTileData:qe,cacheControl:Re,resourceTiming:Je};try{const Be=yield Xe;return p.e({rawTileData:qe.slice(0)},Be,Re,Je)}finally{delete this.fetching[oe]}}catch(Le){throw delete this.loading[oe],_e.status="done",this.loaded[oe]=_e,Le}})}reloadTile(ie){return p._(this,void 0,void 0,function*(){const oe=ie.uid;if(!this.loaded||!this.loaded[oe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const fe=this.loaded[oe];if(fe.showCollisionBoxes=ie.showCollisionBoxes,fe.globalState=ie.globalState,fe.status==="parsing"){const _e=yield fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,ie.subdivisionGranularity);let Ie;if(this.fetching[oe]){const{rawTileData:Le,cacheControl:qe,resourceTiming:Re}=this.fetching[oe];delete this.fetching[oe],Ie=p.e({rawTileData:Le.slice(0)},_e,qe,Re)}else Ie=_e;return Ie}if(fe.status==="done"&&fe.vectorTile)return fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,ie.subdivisionGranularity)})}abortTile(ie){return p._(this,void 0,void 0,function*(){const oe=this.loading,fe=ie.uid;oe&&oe[fe]&&oe[fe].abort&&(oe[fe].abort.abort(),delete oe[fe])})}removeTile(ie){return p._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ie.uid]&&delete this.loaded[ie.uid]})}}class R{constructor(){this.loaded={}}loadTile(ie){return p._(this,void 0,void 0,function*(){const{uid:oe,encoding:fe,rawImageData:_e,redFactor:Ie,greenFactor:Le,blueFactor:qe,baseShift:Re}=ie,Je=_e.width+2,Xe=_e.height+2,Be=p.b(_e)?new p.R({width:Je,height:Xe},yield p.cN(_e,-1,-1,Je,Xe)):_e,nt=new p.cO(oe,Be,fe,Ie,Le,qe,Re);return this.loaded=this.loaded||{},this.loaded[oe]=nt,nt})}removeTile(ie){const oe=this.loaded,fe=ie.uid;oe&&oe[fe]&&delete oe[fe]}}var z,B,U=function(){if(B)return z;function Fe(oe,fe){if(oe.length!==0){ie(oe[0],fe);for(var _e=1;_e<oe.length;_e++)ie(oe[_e],!fe)}}function ie(oe,fe){for(var _e=0,Ie=0,Le=0,qe=oe.length,Re=qe-1;Le<qe;Re=Le++){var Je=(oe[Le][0]-oe[Re][0])*(oe[Re][1]+oe[Le][1]),Xe=_e+Je;Ie+=Math.abs(_e)>=Math.abs(Je)?_e-Xe+Je:Je-Xe+_e,_e=Xe}_e+Ie>=0!=!!fe&&oe.reverse()}return B=1,z=function oe(fe,_e){var Ie,Le=fe&&fe.type;if(Le==="FeatureCollection")for(Ie=0;Ie<fe.features.length;Ie++)oe(fe.features[Ie],_e);else if(Le==="GeometryCollection")for(Ie=0;Ie<fe.geometries.length;Ie++)oe(fe.geometries[Ie],_e);else if(Le==="Feature")oe(fe.geometry,_e);else if(Le==="Polygon")Fe(fe.coordinates,_e);else if(Le==="MultiPolygon")for(Ie=0;Ie<fe.coordinates.length;Ie++)Fe(fe.coordinates[Ie],_e);return fe}}(),Z=p.cP(U);const Q=p.cK.VectorTileFeature.prototype.toGeoJSON;class le{constructor(ie){this._feature=ie,this.extent=p.$,this.type=ie.type,this.properties=ie.tags,"id"in ie&&!isNaN(ie.id)&&(this.id=parseInt(ie.id,10))}loadGeometry(){if(this._feature.type===1){const ie=[];for(const oe of this._feature.geometry)ie.push([new p.P(oe[0],oe[1])]);return ie}{const ie=[];for(const oe of this._feature.geometry){const fe=[];for(const _e of oe)fe.push(new p.P(_e[0],_e[1]));ie.push(fe)}return ie}}toGeoJSON(ie,oe,fe){return Q.call(this,ie,oe,fe)}}class se{constructor(ie){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=p.$,this.length=ie.length,this._features=ie}feature(ie){return new le(this._features[ie])}}var Ce,be,Ae,Ne={exports:{}},Qe=function(){if(Ae)return Ne.exports;Ae=1;var Fe=p.cS(),ie=function(){if(be)return Ce;be=1;var Xe=p.cQ(),Be=p.cR().VectorTileFeature;function nt(Pt,Kt){this.options=Kt||{},this.features=Pt,this.length=Pt.length}function Me(Pt,Kt){this.id=typeof Pt.id=="number"?Pt.id:void 0,this.type=Pt.type,this.rawGeometry=Pt.type===1?[Pt.geometry]:Pt.geometry,this.properties=Pt.tags,this.extent=Kt||4096}return Ce=nt,nt.prototype.feature=function(Pt){return new Me(this.features[Pt],this.options.extent)},Me.prototype.loadGeometry=function(){var Pt=this.rawGeometry;this.geometry=[];for(var Kt=0;Kt<Pt.length;Kt++){for(var At=Pt[Kt],Bt=[],Yt=0;Yt<At.length;Yt++)Bt.push(new Xe(At[Yt][0],At[Yt][1]));this.geometry.push(Bt)}return this.geometry},Me.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Pt=this.geometry,Kt=1/0,At=-1/0,Bt=1/0,Yt=-1/0,Wr=0;Wr<Pt.length;Wr++)for(var Ar=Pt[Wr],kr=0;kr<Ar.length;kr++){var Zt=Ar[kr];Kt=Math.min(Kt,Zt.x),At=Math.max(At,Zt.x),Bt=Math.min(Bt,Zt.y),Yt=Math.max(Yt,Zt.y)}return[Kt,Bt,At,Yt]},Me.prototype.toGeoJSON=Be.prototype.toGeoJSON,Ce}();function oe(Xe){var Be=new Fe;return function(nt,Me){for(var Pt in nt.layers)Me.writeMessage(3,fe,nt.layers[Pt])}(Xe,Be),Be.finish()}function fe(Xe,Be){var nt;Be.writeVarintField(15,Xe.version||1),Be.writeStringField(1,Xe.name||""),Be.writeVarintField(5,Xe.extent||4096);var Me={keys:[],values:[],keycache:{},valuecache:{}};for(nt=0;nt<Xe.length;nt++)Me.feature=Xe.feature(nt),Be.writeMessage(2,_e,Me);var Pt=Me.keys;for(nt=0;nt<Pt.length;nt++)Be.writeStringField(3,Pt[nt]);var Kt=Me.values;for(nt=0;nt<Kt.length;nt++)Be.writeMessage(4,Je,Kt[nt])}function _e(Xe,Be){var nt=Xe.feature;nt.id!==void 0&&Be.writeVarintField(1,nt.id),Be.writeMessage(2,Ie,Xe),Be.writeVarintField(3,nt.type),Be.writeMessage(4,Re,nt)}function Ie(Xe,Be){var nt=Xe.feature,Me=Xe.keys,Pt=Xe.values,Kt=Xe.keycache,At=Xe.valuecache;for(var Bt in nt.properties){var Yt=nt.properties[Bt],Wr=Kt[Bt];if(Yt!==null){Wr===void 0&&(Me.push(Bt),Kt[Bt]=Wr=Me.length-1),Be.writeVarint(Wr);var Ar=typeof Yt;Ar!=="string"&&Ar!=="boolean"&&Ar!=="number"&&(Yt=JSON.stringify(Yt));var kr=Ar+":"+Yt,Zt=At[kr];Zt===void 0&&(Pt.push(Yt),At[kr]=Zt=Pt.length-1),Be.writeVarint(Zt)}}}function Le(Xe,Be){return(Be<<3)+(7&Xe)}function qe(Xe){return Xe<<1^Xe>>31}function Re(Xe,Be){for(var nt=Xe.loadGeometry(),Me=Xe.type,Pt=0,Kt=0,At=nt.length,Bt=0;Bt<At;Bt++){var Yt=nt[Bt],Wr=1;Me===1&&(Wr=Yt.length),Be.writeVarint(Le(1,Wr));for(var Ar=Me===3?Yt.length-1:Yt.length,kr=0;kr<Ar;kr++){kr===1&&Me!==1&&Be.writeVarint(Le(2,Ar-1));var Zt=Yt[kr].x-Pt,xr=Yt[kr].y-Kt;Be.writeVarint(qe(Zt)),Be.writeVarint(qe(xr)),Pt+=Zt,Kt+=xr}Me===3&&Be.writeVarint(Le(7,1))}}function Je(Xe,Be){var nt=typeof Xe;nt==="string"?Be.writeStringField(1,Xe):nt==="boolean"?Be.writeBooleanField(7,Xe):nt==="number"&&(Xe%1!=0?Be.writeDoubleField(3,Xe):Xe<0?Be.writeSVarintField(6,Xe):Be.writeVarintField(5,Xe))}return Ne.exports=oe,Ne.exports.fromVectorTileJs=oe,Ne.exports.fromGeojsonVt=function(Xe,Be){Be=Be||{};var nt={};for(var Me in Xe)nt[Me]=new ie(Xe[Me].features,Be),nt[Me].name=Me,nt[Me].version=Be.version,nt[Me].extent=Be.extent;return oe({layers:nt})},Ne.exports.GeoJSONWrapper=ie,Ne.exports}(),ht=p.cP(Qe);const Et={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Fe=>Fe},vt=Math.fround||(It=new Float32Array(1),Fe=>(It[0]=+Fe,It[0]));var It;class Ft{constructor(ie){this.options=Object.assign(Object.create(Et),ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ie){const{log:oe,minZoom:fe,maxZoom:_e}=this.options;oe&&console.time("total time");const Ie=`prepare ${ie.length} points`;oe&&console.time(Ie),this.points=ie;const Le=[];for(let Re=0;Re<ie.length;Re++){const Je=ie[Re];if(!Je.geometry)continue;const[Xe,Be]=Je.geometry.coordinates,nt=vt(vr(Xe)),Me=vt(Mt(Be));Le.push(nt,Me,1/0,Re,-1,1),this.options.reduce&&Le.push(0)}let qe=this.trees[_e+1]=this._createTree(Le);oe&&console.timeEnd(Ie);for(let Re=_e;Re>=fe;Re--){const Je=+Date.now();qe=this.trees[Re]=this._createTree(this._cluster(qe,Re)),oe&&console.log("z%d: %d clusters in %dms",Re,qe.numItems,+Date.now()-Je)}return oe&&console.timeEnd("total time"),this}getClusters(ie,oe){let fe=((ie[0]+180)%360+360)%360-180;const _e=Math.max(-90,Math.min(90,ie[1]));let Ie=ie[2]===180?180:((ie[2]+180)%360+360)%360-180;const Le=Math.max(-90,Math.min(90,ie[3]));if(ie[2]-ie[0]>=360)fe=-180,Ie=180;else if(fe>Ie){const Be=this.getClusters([fe,_e,180,Le],oe),nt=this.getClusters([-180,_e,Ie,Le],oe);return Be.concat(nt)}const qe=this.trees[this._limitZoom(oe)],Re=qe.range(vr(fe),Mt(Le),vr(Ie),Mt(_e)),Je=qe.data,Xe=[];for(const Be of Re){const nt=this.stride*Be;Xe.push(Je[nt+5]>1?er(Je,nt,this.clusterProps):this.points[Je[nt+3]])}return Xe}getChildren(ie){const oe=this._getOriginId(ie),fe=this._getOriginZoom(ie),_e="No cluster with the specified id.",Ie=this.trees[fe];if(!Ie)throw new Error(_e);const Le=Ie.data;if(oe*this.stride>=Le.length)throw new Error(_e);const qe=this.options.radius/(this.options.extent*Math.pow(2,fe-1)),Re=Ie.within(Le[oe*this.stride],Le[oe*this.stride+1],qe),Je=[];for(const Xe of Re){const Be=Xe*this.stride;Le[Be+4]===ie&&Je.push(Le[Be+5]>1?er(Le,Be,this.clusterProps):this.points[Le[Be+3]])}if(Je.length===0)throw new Error(_e);return Je}getLeaves(ie,oe,fe){const _e=[];return this._appendLeaves(_e,ie,oe=oe||10,fe=fe||0,0),_e}getTile(ie,oe,fe){const _e=this.trees[this._limitZoom(ie)],Ie=Math.pow(2,ie),{extent:Le,radius:qe}=this.options,Re=qe/Le,Je=(fe-Re)/Ie,Xe=(fe+1+Re)/Ie,Be={features:[]};return this._addTileFeatures(_e.range((oe-Re)/Ie,Je,(oe+1+Re)/Ie,Xe),_e.data,oe,fe,Ie,Be),oe===0&&this._addTileFeatures(_e.range(1-Re/Ie,Je,1,Xe),_e.data,Ie,fe,Ie,Be),oe===Ie-1&&this._addTileFeatures(_e.range(0,Je,Re/Ie,Xe),_e.data,-1,fe,Ie,Be),Be.features.length?Be:null}getClusterExpansionZoom(ie){let oe=this._getOriginZoom(ie)-1;for(;oe<=this.options.maxZoom;){const fe=this.getChildren(ie);if(oe++,fe.length!==1)break;ie=fe[0].properties.cluster_id}return oe}_appendLeaves(ie,oe,fe,_e,Ie){const Le=this.getChildren(oe);for(const qe of Le){const Re=qe.properties;if(Re&&Re.cluster?Ie+Re.point_count<=_e?Ie+=Re.point_count:Ie=this._appendLeaves(ie,Re.cluster_id,fe,_e,Ie):Ie<_e?Ie++:ie.push(qe),ie.length===fe)break}return Ie}_createTree(ie){const oe=new p.aH(ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let fe=0;fe<ie.length;fe+=this.stride)oe.add(ie[fe],ie[fe+1]);return oe.finish(),oe.data=ie,oe}_addTileFeatures(ie,oe,fe,_e,Ie,Le){for(const qe of ie){const Re=qe*this.stride,Je=oe[Re+5]>1;let Xe,Be,nt;if(Je)Xe=lr(oe,Re,this.clusterProps),Be=oe[Re],nt=oe[Re+1];else{const Kt=this.points[oe[Re+3]];Xe=Kt.properties;const[At,Bt]=Kt.geometry.coordinates;Be=vr(At),nt=Mt(Bt)}const Me={type:1,geometry:[[Math.round(this.options.extent*(Be*Ie-fe)),Math.round(this.options.extent*(nt*Ie-_e))]],tags:Xe};let Pt;Pt=Je||this.options.generateId?oe[Re+3]:this.points[oe[Re+3]].id,Pt!==void 0&&(Me.id=Pt),Le.features.push(Me)}}_limitZoom(ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+ie),this.options.maxZoom+1))}_cluster(ie,oe){const{radius:fe,extent:_e,reduce:Ie,minPoints:Le}=this.options,qe=fe/(_e*Math.pow(2,oe)),Re=ie.data,Je=[],Xe=this.stride;for(let Be=0;Be<Re.length;Be+=Xe){if(Re[Be+2]<=oe)continue;Re[Be+2]=oe;const nt=Re[Be],Me=Re[Be+1],Pt=ie.within(Re[Be],Re[Be+1],qe),Kt=Re[Be+5];let At=Kt;for(const Bt of Pt){const Yt=Bt*Xe;Re[Yt+2]>oe&&(At+=Re[Yt+5])}if(At>Kt&&At>=Le){let Bt,Yt=nt*Kt,Wr=Me*Kt,Ar=-1;const kr=(Be/Xe<<5)+(oe+1)+this.points.length;for(const Zt of Pt){const xr=Zt*Xe;if(Re[xr+2]<=oe)continue;Re[xr+2]=oe;const Tn=Re[xr+5];Yt+=Re[xr]*Tn,Wr+=Re[xr+1]*Tn,Re[xr+4]=kr,Ie&&(Bt||(Bt=this._map(Re,Be,!0),Ar=this.clusterProps.length,this.clusterProps.push(Bt)),Ie(Bt,this._map(Re,xr)))}Re[Be+4]=kr,Je.push(Yt/At,Wr/At,1/0,kr,-1,At),Ie&&Je.push(Ar)}else{for(let Bt=0;Bt<Xe;Bt++)Je.push(Re[Be+Bt]);if(At>1)for(const Bt of Pt){const Yt=Bt*Xe;if(!(Re[Yt+2]<=oe)){Re[Yt+2]=oe;for(let Wr=0;Wr<Xe;Wr++)Je.push(Re[Yt+Wr])}}}}return Je}_getOriginId(ie){return ie-this.points.length>>5}_getOriginZoom(ie){return(ie-this.points.length)%32}_map(ie,oe,fe){if(ie[oe+5]>1){const Le=this.clusterProps[ie[oe+6]];return fe?Object.assign({},Le):Le}const _e=this.points[ie[oe+3]].properties,Ie=this.options.map(_e);return fe&&Ie===_e?Object.assign({},Ie):Ie}}function er(Fe,ie,oe){return{type:"Feature",id:Fe[ie+3],properties:lr(Fe,ie,oe),geometry:{type:"Point",coordinates:[(fe=Fe[ie],360*(fe-.5)),ut(Fe[ie+1])]}};var fe}function lr(Fe,ie,oe){const fe=Fe[ie+5],_e=fe>=1e4?`${Math.round(fe/1e3)}k`:fe>=1e3?Math.round(fe/100)/10+"k":fe,Ie=Fe[ie+6],Le=Ie===-1?{}:Object.assign({},oe[Ie]);return Object.assign(Le,{cluster:!0,cluster_id:Fe[ie+3],point_count:fe,point_count_abbreviated:_e})}function vr(Fe){return Fe/360+.5}function Mt(Fe){const ie=Math.sin(Fe*Math.PI/180),oe=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return oe<0?0:oe>1?1:oe}function ut(Fe){const ie=(180-360*Fe)*Math.PI/180;return 360*Math.atan(Math.exp(ie))/Math.PI-90}function Ct(Fe,ie,oe,fe){let _e=fe;const Ie=ie+(oe-ie>>1);let Le,qe=oe-ie;const Re=Fe[ie],Je=Fe[ie+1],Xe=Fe[oe],Be=Fe[oe+1];for(let nt=ie+3;nt<oe;nt+=3){const Me=wt(Fe[nt],Fe[nt+1],Re,Je,Xe,Be);if(Me>_e)Le=nt,_e=Me;else if(Me===_e){const Pt=Math.abs(nt-Ie);Pt<qe&&(Le=nt,qe=Pt)}}_e>fe&&(Le-ie>3&&Ct(Fe,ie,Le,fe),Fe[Le+2]=_e,oe-Le>3&&Ct(Fe,Le,oe,fe))}function wt(Fe,ie,oe,fe,_e,Ie){let Le=_e-oe,qe=Ie-fe;if(Le!==0||qe!==0){const Re=((Fe-oe)*Le+(ie-fe)*qe)/(Le*Le+qe*qe);Re>1?(oe=_e,fe=Ie):Re>0&&(oe+=Le*Re,fe+=qe*Re)}return Le=Fe-oe,qe=ie-fe,Le*Le+qe*qe}function ze(Fe,ie,oe,fe){const _e={id:Fe??null,type:ie,geometry:oe,tags:fe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ie==="Point"||ie==="MultiPoint"||ie==="LineString")$e(_e,oe);else if(ie==="Polygon")$e(_e,oe[0]);else if(ie==="MultiLineString")for(const Ie of oe)$e(_e,Ie);else if(ie==="MultiPolygon")for(const Ie of oe)$e(_e,Ie[0]);return _e}function $e(Fe,ie){for(let oe=0;oe<ie.length;oe+=3)Fe.minX=Math.min(Fe.minX,ie[oe]),Fe.minY=Math.min(Fe.minY,ie[oe+1]),Fe.maxX=Math.max(Fe.maxX,ie[oe]),Fe.maxY=Math.max(Fe.maxY,ie[oe+1])}function Lt(Fe,ie,oe,fe){if(!ie.geometry)return;const _e=ie.geometry.coordinates;if(_e&&_e.length===0)return;const Ie=ie.geometry.type,Le=Math.pow(oe.tolerance/((1<<oe.maxZoom)*oe.extent),2);let qe=[],Re=ie.id;if(oe.promoteId?Re=ie.properties[oe.promoteId]:oe.generateId&&(Re=fe||0),Ie==="Point")Xt(_e,qe);else if(Ie==="MultiPoint")for(const Je of _e)Xt(Je,qe);else if(Ie==="LineString")tr(_e,qe,Le,!1);else if(Ie==="MultiLineString"){if(oe.lineMetrics){for(const Je of _e)qe=[],tr(Je,qe,Le,!1),Fe.push(ze(Re,"LineString",qe,ie.properties));return}Pr(_e,qe,Le,!1)}else if(Ie==="Polygon")Pr(_e,qe,Le,!0);else{if(Ie!=="MultiPolygon"){if(Ie==="GeometryCollection"){for(const Je of ie.geometry.geometries)Lt(Fe,{id:Re,geometry:Je,properties:ie.properties},oe,fe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Je of _e){const Xe=[];Pr(Je,Xe,Le,!0),qe.push(Xe)}}Fe.push(ze(Re,Ie,qe,ie.properties))}function Xt(Fe,ie){ie.push(zr(Fe[0]),Ir(Fe[1]),0)}function tr(Fe,ie,oe,fe){let _e,Ie,Le=0;for(let Re=0;Re<Fe.length;Re++){const Je=zr(Fe[Re][0]),Xe=Ir(Fe[Re][1]);ie.push(Je,Xe,0),Re>0&&(Le+=fe?(_e*Xe-Je*Ie)/2:Math.sqrt(Math.pow(Je-_e,2)+Math.pow(Xe-Ie,2))),_e=Je,Ie=Xe}const qe=ie.length-3;ie[2]=1,Ct(ie,0,qe,oe),ie[qe+2]=1,ie.size=Math.abs(Le),ie.start=0,ie.end=ie.size}function Pr(Fe,ie,oe,fe){for(let _e=0;_e<Fe.length;_e++){const Ie=[];tr(Fe[_e],Ie,oe,fe),ie.push(Ie)}}function zr(Fe){return Fe/360+.5}function Ir(Fe){const ie=Math.sin(Fe*Math.PI/180),oe=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return oe<0?0:oe>1?1:oe}function lt(Fe,ie,oe,fe,_e,Ie,Le,qe){if(fe/=ie,Ie>=(oe/=ie)&&Le<fe)return Fe;if(Le<oe||Ie>=fe)return null;const Re=[];for(const Je of Fe){const Xe=Je.geometry;let Be=Je.type;const nt=_e===0?Je.minX:Je.minY,Me=_e===0?Je.maxX:Je.maxY;if(nt>=oe&&Me<fe){Re.push(Je);continue}if(Me<oe||nt>=fe)continue;let Pt=[];if(Be==="Point"||Be==="MultiPoint")Qt(Xe,Pt,oe,fe,_e);else if(Be==="LineString")sr(Xe,Pt,oe,fe,_e,!1,qe.lineMetrics);else if(Be==="MultiLineString")_r(Xe,Pt,oe,fe,_e,!1);else if(Be==="Polygon")_r(Xe,Pt,oe,fe,_e,!0);else if(Be==="MultiPolygon")for(const Kt of Xe){const At=[];_r(Kt,At,oe,fe,_e,!0),At.length&&Pt.push(At)}if(Pt.length){if(qe.lineMetrics&&Be==="LineString"){for(const Kt of Pt)Re.push(ze(Je.id,Be,Kt,Je.tags));continue}Be!=="LineString"&&Be!=="MultiLineString"||(Pt.length===1?(Be="LineString",Pt=Pt[0]):Be="MultiLineString"),Be!=="Point"&&Be!=="MultiPoint"||(Be=Pt.length===3?"Point":"MultiPoint"),Re.push(ze(Je.id,Be,Pt,Je.tags))}}return Re.length?Re:null}function Qt(Fe,ie,oe,fe,_e){for(let Ie=0;Ie<Fe.length;Ie+=3){const Le=Fe[Ie+_e];Le>=oe&&Le<=fe&&Tr(ie,Fe[Ie],Fe[Ie+1],Fe[Ie+2])}}function sr(Fe,ie,oe,fe,_e,Ie,Le){let qe=yt(Fe);const Re=_e===0?Qr:Pn;let Je,Xe,Be=Fe.start;for(let At=0;At<Fe.length-3;At+=3){const Bt=Fe[At],Yt=Fe[At+1],Wr=Fe[At+2],Ar=Fe[At+3],kr=Fe[At+4],Zt=_e===0?Bt:Yt,xr=_e===0?Ar:kr;let Tn=!1;Le&&(Je=Math.sqrt(Math.pow(Bt-Ar,2)+Math.pow(Yt-kr,2))),Zt<oe?xr>oe&&(Xe=Re(qe,Bt,Yt,Ar,kr,oe),Le&&(qe.start=Be+Je*Xe)):Zt>fe?xr<fe&&(Xe=Re(qe,Bt,Yt,Ar,kr,fe),Le&&(qe.start=Be+Je*Xe)):Tr(qe,Bt,Yt,Wr),xr<oe&&Zt>=oe&&(Xe=Re(qe,Bt,Yt,Ar,kr,oe),Tn=!0),xr>fe&&Zt<=fe&&(Xe=Re(qe,Bt,Yt,Ar,kr,fe),Tn=!0),!Ie&&Tn&&(Le&&(qe.end=Be+Je*Xe),ie.push(qe),qe=yt(Fe)),Le&&(Be+=Je)}let nt=Fe.length-3;const Me=Fe[nt],Pt=Fe[nt+1],Kt=_e===0?Me:Pt;Kt>=oe&&Kt<=fe&&Tr(qe,Me,Pt,Fe[nt+2]),nt=qe.length-3,Ie&&nt>=3&&(qe[nt]!==qe[0]||qe[nt+1]!==qe[1])&&Tr(qe,qe[0],qe[1],qe[2]),qe.length&&ie.push(qe)}function yt(Fe){const ie=[];return ie.size=Fe.size,ie.start=Fe.start,ie.end=Fe.end,ie}function _r(Fe,ie,oe,fe,_e,Ie){for(const Le of Fe)sr(Le,ie,oe,fe,_e,Ie,!1)}function Tr(Fe,ie,oe,fe){Fe.push(ie,oe,fe)}function Qr(Fe,ie,oe,fe,_e,Ie){const Le=(Ie-ie)/(fe-ie);return Tr(Fe,Ie,oe+(_e-oe)*Le,1),Le}function Pn(Fe,ie,oe,fe,_e,Ie){const Le=(Ie-oe)/(_e-oe);return Tr(Fe,ie+(fe-ie)*Le,Ie,1),Le}function Jr(Fe,ie){const oe=[];for(let fe=0;fe<Fe.length;fe++){const _e=Fe[fe],Ie=_e.type;let Le;if(Ie==="Point"||Ie==="MultiPoint"||Ie==="LineString")Le=ri(_e.geometry,ie);else if(Ie==="MultiLineString"||Ie==="Polygon"){Le=[];for(const qe of _e.geometry)Le.push(ri(qe,ie))}else if(Ie==="MultiPolygon"){Le=[];for(const qe of _e.geometry){const Re=[];for(const Je of qe)Re.push(ri(Je,ie));Le.push(Re)}}oe.push(ze(_e.id,Ie,Le,_e.tags))}return oe}function ri(Fe,ie){const oe=[];oe.size=Fe.size,Fe.start!==void 0&&(oe.start=Fe.start,oe.end=Fe.end);for(let fe=0;fe<Fe.length;fe+=3)oe.push(Fe[fe]+ie,Fe[fe+1],Fe[fe+2]);return oe}function fi(Fe,ie){if(Fe.transformed)return Fe;const oe=1<<Fe.z,fe=Fe.x,_e=Fe.y;for(const Ie of Fe.features){const Le=Ie.geometry,qe=Ie.type;if(Ie.geometry=[],qe===1)for(let Re=0;Re<Le.length;Re+=2)Ie.geometry.push(Fa(Le[Re],Le[Re+1],ie,oe,fe,_e));else for(let Re=0;Re<Le.length;Re++){const Je=[];for(let Xe=0;Xe<Le[Re].length;Xe+=2)Je.push(Fa(Le[Re][Xe],Le[Re][Xe+1],ie,oe,fe,_e));Ie.geometry.push(Je)}}return Fe.transformed=!0,Fe}function Fa(Fe,ie,oe,fe,_e,Ie){return[Math.round(oe*(Fe*fe-_e)),Math.round(oe*(ie*fe-Ie))]}function oa(Fe,ie,oe,fe,_e){const Ie=ie===_e.maxZoom?0:_e.tolerance/((1<<ie)*_e.extent),Le={features:[],numPoints:0,numSimplified:0,numFeatures:Fe.length,source:null,x:oe,y:fe,z:ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const qe of Fe)Js(Le,qe,Ie,_e);return Le}function Js(Fe,ie,oe,fe){const _e=ie.geometry,Ie=ie.type,Le=[];if(Fe.minX=Math.min(Fe.minX,ie.minX),Fe.minY=Math.min(Fe.minY,ie.minY),Fe.maxX=Math.max(Fe.maxX,ie.maxX),Fe.maxY=Math.max(Fe.maxY,ie.maxY),Ie==="Point"||Ie==="MultiPoint")for(let qe=0;qe<_e.length;qe+=3)Le.push(_e[qe],_e[qe+1]),Fe.numPoints++,Fe.numSimplified++;else if(Ie==="LineString")as(Le,_e,Fe,oe,!1,!1);else if(Ie==="MultiLineString"||Ie==="Polygon")for(let qe=0;qe<_e.length;qe++)as(Le,_e[qe],Fe,oe,Ie==="Polygon",qe===0);else if(Ie==="MultiPolygon")for(let qe=0;qe<_e.length;qe++){const Re=_e[qe];for(let Je=0;Je<Re.length;Je++)as(Le,Re[Je],Fe,oe,!0,Je===0)}if(Le.length){let qe=ie.tags||null;if(Ie==="LineString"&&fe.lineMetrics){qe={};for(const Je in ie.tags)qe[Je]=ie.tags[Je];qe.mapbox_clip_start=_e.start/_e.size,qe.mapbox_clip_end=_e.end/_e.size}const Re={geometry:Le,type:Ie==="Polygon"||Ie==="MultiPolygon"?3:Ie==="LineString"||Ie==="MultiLineString"?2:1,tags:qe};ie.id!==null&&(Re.id=ie.id),Fe.features.push(Re)}}function as(Fe,ie,oe,fe,_e,Ie){const Le=fe*fe;if(fe>0&&ie.size<(_e?Le:fe))return void(oe.numPoints+=ie.length/3);const qe=[];for(let Re=0;Re<ie.length;Re+=3)(fe===0||ie[Re+2]>Le)&&(oe.numSimplified++,qe.push(ie[Re],ie[Re+1])),oe.numPoints++;_e&&function(Re,Je){let Xe=0;for(let Be=0,nt=Re.length,Me=nt-2;Be<nt;Me=Be,Be+=2)Xe+=(Re[Be]-Re[Me])*(Re[Be+1]+Re[Me+1]);if(Xe>0===Je)for(let Be=0,nt=Re.length;Be<nt/2;Be+=2){const Me=Re[Be],Pt=Re[Be+1];Re[Be]=Re[nt-2-Be],Re[Be+1]=Re[nt-1-Be],Re[nt-2-Be]=Me,Re[nt-1-Be]=Pt}}(qe,Ie),Fe.push(qe)}const no={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class os{constructor(ie,oe){const fe=(oe=this.options=function(Ie,Le){for(const qe in Le)Ie[qe]=Le[qe];return Ie}(Object.create(no),oe)).debug;if(fe&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");let _e=function(Ie,Le){const qe=[];if(Ie.type==="FeatureCollection")for(let Re=0;Re<Ie.features.length;Re++)Lt(qe,Ie.features[Re],Le,Re);else Lt(qe,Ie.type==="Feature"?Ie:{geometry:Ie},Le);return qe}(ie,oe);this.tiles={},this.tileCoords=[],fe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),_e=function(Ie,Le){const qe=Le.buffer/Le.extent;let Re=Ie;const Je=lt(Ie,1,-1-qe,qe,0,-1,2,Le),Xe=lt(Ie,1,1-qe,2+qe,0,-1,2,Le);return(Je||Xe)&&(Re=lt(Ie,1,-qe,1+qe,0,-1,2,Le)||[],Je&&(Re=Jr(Je,1).concat(Re)),Xe&&(Re=Re.concat(Jr(Xe,-1)))),Re}(_e,oe),_e.length&&this.splitTile(_e,0,0,0),fe&&(_e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ie,oe,fe,_e,Ie,Le,qe){const Re=[ie,oe,fe,_e],Je=this.options,Xe=Je.debug;for(;Re.length;){_e=Re.pop(),fe=Re.pop(),oe=Re.pop(),ie=Re.pop();const Be=1<<oe,nt=io(oe,fe,_e);let Me=this.tiles[nt];if(!Me&&(Xe>1&&console.time("creation"),Me=this.tiles[nt]=oa(ie,oe,fe,_e,Je),this.tileCoords.push({z:oe,x:fe,y:_e}),Xe)){Xe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,fe,_e,Me.numFeatures,Me.numPoints,Me.numSimplified),console.timeEnd("creation"));const Tn=`z${oe}`;this.stats[Tn]=(this.stats[Tn]||0)+1,this.total++}if(Me.source=ie,Ie==null){if(oe===Je.indexMaxZoom||Me.numPoints<=Je.indexMaxPoints)continue}else{if(oe===Je.maxZoom||oe===Ie)continue;if(Ie!=null){const Tn=Ie-oe;if(fe!==Le>>Tn||_e!==qe>>Tn)continue}}if(Me.source=null,ie.length===0)continue;Xe>1&&console.time("clipping");const Pt=.5*Je.buffer/Je.extent,Kt=.5-Pt,At=.5+Pt,Bt=1+Pt;let Yt=null,Wr=null,Ar=null,kr=null,Zt=lt(ie,Be,fe-Pt,fe+At,0,Me.minX,Me.maxX,Je),xr=lt(ie,Be,fe+Kt,fe+Bt,0,Me.minX,Me.maxX,Je);ie=null,Zt&&(Yt=lt(Zt,Be,_e-Pt,_e+At,1,Me.minY,Me.maxY,Je),Wr=lt(Zt,Be,_e+Kt,_e+Bt,1,Me.minY,Me.maxY,Je),Zt=null),xr&&(Ar=lt(xr,Be,_e-Pt,_e+At,1,Me.minY,Me.maxY,Je),kr=lt(xr,Be,_e+Kt,_e+Bt,1,Me.minY,Me.maxY,Je),xr=null),Xe>1&&console.timeEnd("clipping"),Re.push(Yt||[],oe+1,2*fe,2*_e),Re.push(Wr||[],oe+1,2*fe,2*_e+1),Re.push(Ar||[],oe+1,2*fe+1,2*_e),Re.push(kr||[],oe+1,2*fe+1,2*_e+1)}}getTile(ie,oe,fe){ie=+ie,oe=+oe,fe=+fe;const _e=this.options,{extent:Ie,debug:Le}=_e;if(ie<0||ie>24)return null;const qe=1<<ie,Re=io(ie,oe=oe+qe&qe-1,fe);if(this.tiles[Re])return fi(this.tiles[Re],Ie);Le>1&&console.log("drilling down to z%d-%d-%d",ie,oe,fe);let Je,Xe=ie,Be=oe,nt=fe;for(;!Je&&Xe>0;)Xe--,Be>>=1,nt>>=1,Je=this.tiles[io(Xe,Be,nt)];return Je&&Je.source?(Le>1&&(console.log("found parent tile z%d-%d-%d",Xe,Be,nt),console.time("drilling down")),this.splitTile(Je.source,Xe,Be,nt,ie,oe,fe),Le>1&&console.timeEnd("drilling down"),this.tiles[Re]?fi(this.tiles[Re],Ie):null):null}}function io(Fe,ie,oe){return 32*((1<<Fe)*oe+ie)+Fe}function Ei(Fe,ie){return ie?Fe.properties[ie]:Fe.id}function sa(Fe,ie){if(Fe==null)return!0;if(Fe.type==="Feature")return Ei(Fe,ie)!=null;if(Fe.type==="FeatureCollection"){const oe=new Set;for(const fe of Fe.features){const _e=Ei(fe,ie);if(_e==null||oe.has(_e))return!1;oe.add(_e)}return!0}return!1}function $l(Fe,ie){const oe=new Map;if(Fe!=null)if(Fe.type==="Feature")oe.set(Ei(Fe,ie),Fe);else for(const fe of Fe.features)oe.set(Ei(fe,ie),fe);return oe}class ss extends I{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ie,oe){return p._(this,void 0,void 0,function*(){const fe=ie.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const _e=this._geoJSONIndex.getTile(fe.z,fe.x,fe.y);if(!_e)return null;const Ie=new se(_e.features);let Le=ht(Ie);return Le.byteOffset===0&&Le.byteLength===Le.buffer.byteLength||(Le=new Uint8Array(Le)),{vectorTile:Ie,rawData:Le.buffer}})}loadData(ie){return p._(this,void 0,void 0,function*(){var oe;(oe=this._pendingRequest)===null||oe===void 0||oe.abort();const fe=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new p.cM(ie.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ie,this._pendingRequest),this._geoJSONIndex=ie.cluster?new Ft(function({superclusterOptions:Le,clusterProperties:qe}){if(!qe||!Le)return Le;const Re={},Je={},Xe={accumulated:null,zoom:0},Be={properties:null},nt=Object.keys(qe);for(const Me of nt){const[Pt,Kt]=qe[Me],At=p.cT(Kt),Bt=p.cT(typeof Pt=="string"?[Pt,["accumulated"],["get",Me]]:Pt);Re[Me]=At.value,Je[Me]=Bt.value}return Le.map=Me=>{Be.properties=Me;const Pt={};for(const Kt of nt)Pt[Kt]=Re[Kt].evaluate(Xe,Be);return Pt},Le.reduce=(Me,Pt)=>{Be.properties=Pt;for(const Kt of nt)Xe.accumulated=Me[Kt],Me[Kt]=Je[Kt].evaluate(Xe,Be)},Le}(ie)).load((yield this._pendingData).features):(_e=yield this._pendingData,new os(_e,ie.geojsonVtOptions)),this.loaded={};const Ie={};if(fe){const Le=fe.finish();Le&&(Ie.resourceTiming={},Ie.resourceTiming[ie.source]=JSON.parse(JSON.stringify(Le)))}return Ie}catch(Ie){if(delete this._pendingRequest,p.cx(Ie))return{abandoned:!0};throw Ie}var _e})}getData(){return p._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ie){const oe=this.loaded;return oe&&oe[ie.uid]?super.reloadTile(ie):this.loadTile(ie)}loadAndProcessGeoJSON(ie,oe){return p._(this,void 0,void 0,function*(){let fe=yield this.loadGeoJSON(ie,oe);if(delete this._pendingRequest,typeof fe!="object")throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(Z(fe,!0),ie.filter){const _e=p.cT(ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(_e.result==="error")throw new Error(_e.value.map(Le=>`${Le.key}: ${Le.message}`).join(", "));fe={type:"FeatureCollection",features:fe.features.filter(Le=>_e.value.evaluate({zoom:0},Le))}}return fe})}loadGeoJSON(ie,oe){return p._(this,void 0,void 0,function*(){const{promoteId:fe}=ie;if(ie.request){const _e=yield p.j(ie.request,oe);return this._dataUpdateable=sa(_e.data,fe)?$l(_e.data,fe):void 0,_e.data}if(typeof ie.data=="string")try{const _e=JSON.parse(ie.data);return this._dataUpdateable=sa(_e,fe)?$l(_e,fe):void 0,_e}catch{throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`)}if(!ie.dataDiff)throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ie.source}`);return function(_e,Ie,Le){var qe,Re,Je,Xe;if(Ie.removeAll&&_e.clear(),Ie.remove)for(const Be of Ie.remove)_e.delete(Be);if(Ie.add)for(const Be of Ie.add){const nt=Ei(Be,Le);nt!=null&&_e.set(nt,Be)}if(Ie.update)for(const Be of Ie.update){let nt=_e.get(Be.id);if(nt==null)continue;const Me=!Be.removeAllProperties&&(((qe=Be.removeProperties)===null||qe===void 0?void 0:qe.length)>0||((Re=Be.addOrUpdateProperties)===null||Re===void 0?void 0:Re.length)>0);if((Be.newGeometry||Be.removeAllProperties||Me)&&(nt=Object.assign({},nt),_e.set(Be.id,nt),Me&&(nt.properties=Object.assign({},nt.properties))),Be.newGeometry&&(nt.geometry=Be.newGeometry),Be.removeAllProperties)nt.properties={};else if(((Je=Be.removeProperties)===null||Je===void 0?void 0:Je.length)>0)for(const Pt of Be.removeProperties)Object.prototype.hasOwnProperty.call(nt.properties,Pt)&&delete nt.properties[Pt];if(((Xe=Be.addOrUpdateProperties)===null||Xe===void 0?void 0:Xe.length)>0)for(const{key:Pt,value:Kt}of Be.addOrUpdateProperties)nt.properties[Pt]=Kt}}(this._dataUpdateable,ie.dataDiff,fe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ie){return p._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ie){return this._geoJSONIndex.getClusterExpansionZoom(ie.clusterId)}getClusterChildren(ie){return this._geoJSONIndex.getChildren(ie.clusterId)}getClusterLeaves(ie){return this._geoJSONIndex.getLeaves(ie.clusterId,ie.limit,ie.offset)}}class la{constructor(ie){this.self=ie,this.actor=new p.J(ie),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(oe,fe)=>{if(this.externalWorkerSourceTypes[oe])throw new Error(`Worker source with name "${oe}" already registered.`);this.externalWorkerSourceTypes[oe]=fe},this.self.addProtocol=p.cz,this.self.removeProtocol=p.cA,this.self.registerRTLTextPlugin=oe=>{p.cU.setMethods(oe)},this.actor.registerMessageHandler("LDT",(oe,fe)=>this._getDEMWorkerSource(oe,fe.source).loadTile(fe)),this.actor.registerMessageHandler("RDT",(oe,fe)=>p._(this,void 0,void 0,function*(){this._getDEMWorkerSource(oe,fe.source).removeTile(fe)})),this.actor.registerMessageHandler("GCEZ",(oe,fe)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,fe.type,fe.source).getClusterExpansionZoom(fe)})),this.actor.registerMessageHandler("GCC",(oe,fe)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,fe.type,fe.source).getClusterChildren(fe)})),this.actor.registerMessageHandler("GCL",(oe,fe)=>p._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,fe.type,fe.source).getClusterLeaves(fe)})),this.actor.registerMessageHandler("LD",(oe,fe)=>this._getWorkerSource(oe,fe.type,fe.source).loadData(fe)),this.actor.registerMessageHandler("GD",(oe,fe)=>this._getWorkerSource(oe,fe.type,fe.source).getData()),this.actor.registerMessageHandler("LT",(oe,fe)=>this._getWorkerSource(oe,fe.type,fe.source).loadTile(fe)),this.actor.registerMessageHandler("RT",(oe,fe)=>this._getWorkerSource(oe,fe.type,fe.source).reloadTile(fe)),this.actor.registerMessageHandler("AT",(oe,fe)=>this._getWorkerSource(oe,fe.type,fe.source).abortTile(fe)),this.actor.registerMessageHandler("RMT",(oe,fe)=>this._getWorkerSource(oe,fe.type,fe.source).removeTile(fe)),this.actor.registerMessageHandler("RS",(oe,fe)=>p._(this,void 0,void 0,function*(){if(!this.workerSources[oe]||!this.workerSources[oe][fe.type]||!this.workerSources[oe][fe.type][fe.source])return;const _e=this.workerSources[oe][fe.type][fe.source];delete this.workerSources[oe][fe.type][fe.source],_e.removeSource!==void 0&&_e.removeSource(fe)})),this.actor.registerMessageHandler("RM",oe=>p._(this,void 0,void 0,function*(){delete this.layerIndexes[oe],delete this.availableImages[oe],delete this.workerSources[oe],delete this.demWorkerSources[oe]})),this.actor.registerMessageHandler("SR",(oe,fe)=>p._(this,void 0,void 0,function*(){this.referrer=fe})),this.actor.registerMessageHandler("SRPS",(oe,fe)=>this._syncRTLPluginState(oe,fe)),this.actor.registerMessageHandler("IS",(oe,fe)=>p._(this,void 0,void 0,function*(){this.self.importScripts(fe)})),this.actor.registerMessageHandler("SI",(oe,fe)=>this._setImages(oe,fe)),this.actor.registerMessageHandler("UL",(oe,fe)=>p._(this,void 0,void 0,function*(){this._getLayerIndex(oe).update(fe.layers,fe.removedIds)})),this.actor.registerMessageHandler("SL",(oe,fe)=>p._(this,void 0,void 0,function*(){this._getLayerIndex(oe).replace(fe)}))}_setImages(ie,oe){return p._(this,void 0,void 0,function*(){this.availableImages[ie]=oe;for(const fe in this.workerSources[ie]){const _e=this.workerSources[ie][fe];for(const Ie in _e)_e[Ie].availableImages=oe}})}_syncRTLPluginState(ie,oe){return p._(this,void 0,void 0,function*(){return yield p.cU.syncState(oe,this.self.importScripts)})}_getAvailableImages(ie){let oe=this.availableImages[ie];return oe||(oe=[]),oe}_getLayerIndex(ie){let oe=this.layerIndexes[ie];return oe||(oe=this.layerIndexes[ie]=new o),oe}_getWorkerSource(ie,oe,fe){if(this.workerSources[ie]||(this.workerSources[ie]={}),this.workerSources[ie][oe]||(this.workerSources[ie][oe]={}),!this.workerSources[ie][oe][fe]){const _e={sendAsync:(Ie,Le)=>(Ie.targetMapId=ie,this.actor.sendAsync(Ie,Le))};switch(oe){case"vector":this.workerSources[ie][oe][fe]=new I(_e,this._getLayerIndex(ie),this._getAvailableImages(ie));break;case"geojson":this.workerSources[ie][oe][fe]=new ss(_e,this._getLayerIndex(ie),this._getAvailableImages(ie));break;default:this.workerSources[ie][oe][fe]=new this.externalWorkerSourceTypes[oe](_e,this._getLayerIndex(ie),this._getAvailableImages(ie))}}return this.workerSources[ie][oe][fe]}_getDEMWorkerSource(ie,oe){return this.demWorkerSources[ie]||(this.demWorkerSources[ie]={}),this.demWorkerSources[ie][oe]||(this.demWorkerSources[ie][oe]=new R),this.demWorkerSources[ie][oe]}}return p.i(self)&&(self.worker=new la(self)),la}),h("index",["exports","./shared"],function(p,o){var P="5.6.0";function E(){var _=new o.A(4);return o.A!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_}let C,I;const R={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(_,r,s){const f=requestAnimationFrame(x=>{y(),r(x)}),{unsubscribe:y}=o.s(_.signal,"abort",()=>{y(),cancelAnimationFrame(f),s(o.c())},!1)},frameAsync(_){return new Promise((r,s)=>{this.frame(_,r,s)})},getImageData(_,r=0){return this.getImageCanvasContext(_).getImageData(-r,-r,_.width+2*r,_.height+2*r)},getImageCanvasContext(_){const r=window.document.createElement("canvas"),s=r.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return r.width=_.width,r.height=_.height,s.drawImage(_,0,0,_.width,_.height),s},resolveURL:_=>(C||(C=document.createElement("a")),C.href=_,C.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}};class z{static testProp(r){if(!z.docStyle)return r[0];for(let s=0;s<r.length;s++)if(r[s]in z.docStyle)return r[s];return r[0]}static create(r,s,f){const y=window.document.createElement(r);return s!==void 0&&(y.className=s),f&&f.appendChild(y),y}static createNS(r,s){return window.document.createElementNS(r,s)}static disableDrag(){z.docStyle&&z.selectProp&&(z.userSelect=z.docStyle[z.selectProp],z.docStyle[z.selectProp]="none")}static enableDrag(){z.docStyle&&z.selectProp&&(z.docStyle[z.selectProp]=z.userSelect)}static setTransform(r,s){r.style[z.transformProp]=s}static addEventListener(r,s,f,y={}){r.addEventListener(s,f,"passive"in y?y:y.capture)}static removeEventListener(r,s,f,y={}){r.removeEventListener(s,f,"passive"in y?y:y.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",z.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",z.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",z.suppressClickInternal,!0)},0)}static getScale(r){const s=r.getBoundingClientRect();return{x:s.width/r.offsetWidth||1,y:s.height/r.offsetHeight||1,boundingClientRect:s}}static getPoint(r,s,f){const y=s.boundingClientRect;return new o.P((f.clientX-y.left)/s.x-r.clientLeft,(f.clientY-y.top)/s.y-r.clientTop)}static mousePos(r,s){const f=z.getScale(r);return z.getPoint(r,f,s)}static touchPos(r,s){const f=[],y=z.getScale(r);for(let x=0;x<s.length;x++)f.push(z.getPoint(r,y,s[x]));return f}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){const s=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),f=s.querySelectorAll("script");for(const y of f)y.remove();return z.clean(s),s.innerHTML}static isPossiblyDangerous(r,s){const f=s.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!f.includes("javascript:")&&!f.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){const s=r.children;for(const f of s)z.removeAttributes(f),z.clean(f)}static removeAttributes(r){for(const{name:s,value:f}of r.attributes)z.isPossiblyDangerous(s,f)&&r.removeAttribute(s)}}z.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,z.selectProp=z.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),z.transformProp=z.testProp(["transform","WebkitTransform"]);const B={supported:!1,testSupport:function(_){!Q&&Z&&(le?se(_):U=_)}};let U,Z,Q=!1,le=!1;function se(_){const r=_.createTexture();_.bindTexture(_.TEXTURE_2D,r);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,Z),_.isContextLost())return;B.supported=!0}catch{}_.deleteTexture(r),Q=!0}var Ce;typeof document<"u"&&(Z=document.createElement("img"),Z.onload=()=>{U&&se(U),U=null,le=!0},Z.onerror=()=>{Q=!0,U=null},Z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let r,s,f,y;_.resetRequestQueue=()=>{r=[],s=0,f=0,y={}},_.addThrottleControl=O=>{const N=f++;return y[N]=O,N},_.removeThrottleControl=O=>{delete y[O],T()},_.getImage=(O,N,$=!0)=>new Promise((W,q)=>{B.supported&&(O.headers||(O.headers={}),O.headers.accept="image/webp,*/*"),o.e(O,{type:"image"}),r.push({abortController:N,requestParameters:O,supportImageRefresh:$,state:"queued",onError:K=>{q(K)},onSuccess:K=>{W(K)}}),T()});const x=O=>o._(this,void 0,void 0,function*(){O.state="running";const{requestParameters:N,supportImageRefresh:$,onError:W,onSuccess:q,abortController:K}=O,re=$===!1&&!o.i(self)&&!o.g(N.url)&&(!N.headers||Object.keys(N.headers).reduce((pe,me)=>pe&&me==="accept",!0));s++;const ue=re?k(N,K):o.m(N,K);try{const pe=yield ue;delete O.abortController,O.state="completed",pe.data instanceof HTMLImageElement||o.b(pe.data)?q(pe):pe.data&&q({data:yield(de=pe.data,typeof createImageBitmap=="function"?o.f(de):o.h(de)),cacheControl:pe.cacheControl,expires:pe.expires})}catch(pe){delete O.abortController,W(pe)}finally{s--,T()}var de}),T=()=>{const O=(()=>{for(const N of Object.keys(y))if(y[N]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let N=s;N<O&&r.length>0;N++){const $=r.shift();$.abortController.signal.aborted?N--:x($)}},k=(O,N)=>new Promise(($,W)=>{const q=new Image,K=O.url,re=O.credentials;re&&re==="include"?q.crossOrigin="use-credentials":(re&&re==="same-origin"||!o.d(K))&&(q.crossOrigin="anonymous"),N.signal.addEventListener("abort",()=>{q.src="",W(o.c())}),q.fetchPriority="high",q.onload=()=>{q.onerror=q.onload=null,$({data:q})},q.onerror=()=>{q.onerror=q.onload=null,N.signal.aborted||W(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},q.src=K})}(Ce||(Ce={})),Ce.resetRequestQueue();class be{constructor(r){this._transformRequestFn=r}transformRequest(r,s){return this._transformRequestFn&&this._transformRequestFn(r,s)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function Ae(_){const r=[];if(typeof _=="string")r.push({id:"default",url:_});else if(_&&_.length>0){const s=[];for(const{id:f,url:y}of _){const x=`${f}${y}`;s.indexOf(x)===-1&&(s.push(x),r.push({id:f,url:y}))}}return r}function Ne(_,r,s){try{const f=new URL(_);return f.pathname+=`${r}${s}`,f.toString()}catch{throw new Error(`Invalid sprite URL "${_}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Qe(_){const{userImage:r}=_;return!!(r&&r.render&&r.render())&&(_.data.replace(new Uint8Array(r.data.buffer)),!0)}class ht extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:s,promiseResolve:f}of this.requestors)f(this._getImagesForIds(s));this.requestors=[]}}getImage(r){const s=this.images[r];if(s&&!s.data&&s.spriteData){const f=s.spriteData;s.data=new o.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),s.spriteData=null}return s}addImage(r,s){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,s)&&(this.images[r]=s)}_validate(r,s){let f=!0;const y=s.data||s.spriteData;return this._validateStretch(s.stretchX,y&&y.width)||(this.fire(new o.k(new Error(`Image "${r}" has invalid "stretchX" value`))),f=!1),this._validateStretch(s.stretchY,y&&y.height)||(this.fire(new o.k(new Error(`Image "${r}" has invalid "stretchY" value`))),f=!1),this._validateContent(s.content,s)||(this.fire(new o.k(new Error(`Image "${r}" has invalid "content" value`))),f=!1),f}_validateStretch(r,s){if(!r)return!0;let f=0;for(const y of r){if(y[0]<f||y[1]<y[0]||s<y[1])return!1;f=y[1]}return!0}_validateContent(r,s){if(!r)return!0;if(r.length!==4)return!1;const f=s.spriteData,y=f&&f.width||s.data.width,x=f&&f.height||s.data.height;return!(r[0]<0||y<r[0]||r[1]<0||x<r[1]||r[2]<0||y<r[2]||r[3]<0||x<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,s,f=!0){const y=this.getImage(r);if(f&&(y.data.width!==s.data.width||y.data.height!==s.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${s.data.width}x${s.data.height}).`);s.version=y.version+1,this.images[r]=s,this.updatedImages[r]=!0}removeImage(r){const s=this.images[r];delete this.images[r],delete this.patterns[r],s.userImage&&s.userImage.onRemove&&s.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((s,f)=>{let y=!0;if(!this.isLoaded())for(const x of r)this.images[x]||(y=!1);this.isLoaded()||y?s(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:s})})}_getImagesForIds(r){const s={};for(const f of r){let y=this.getImage(f);y||(this.fire(new o.l("styleimagemissing",{id:f})),y=this.getImage(f)),y?s[f]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:o.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return s}getPixelSize(){const{width:r,height:s}=this.atlasImage;return{width:r,height:s}}getPattern(r){const s=this.patterns[r],f=this.getImage(r);if(!f)return null;if(s&&s.position.version===f.version)return s.position;if(s)s.position.version=f.version;else{const y={w:f.data.width+2,h:f.data.height+2,x:0,y:0},x=new o.I(y,f);this.patterns[r]={bin:y,position:x}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const s=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.T(r,this.atlasImage,s.RGBA),this.atlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const x in this.patterns)r.push(this.patterns[x].bin);const{w:s,h:f}=o.p(r),y=this.atlasImage;y.resize({width:s||1,height:f||1});for(const x in this.patterns){const{bin:T}=this.patterns[x],k=T.x+1,O=T.y+1,N=this.getImage(x).data,$=N.width,W=N.height;o.R.copy(N,y,{x:0,y:0},{x:k,y:O},{width:$,height:W}),o.R.copy(N,y,{x:0,y:W-1},{x:k,y:O-1},{width:$,height:1}),o.R.copy(N,y,{x:0,y:0},{x:k,y:O+W},{width:$,height:1}),o.R.copy(N,y,{x:$-1,y:0},{x:k-1,y:O},{width:1,height:W}),o.R.copy(N,y,{x:0,y:0},{x:k+$,y:O},{width:1,height:W})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const s of r){if(this.callbackDispatchedThisFrame[s])continue;this.callbackDispatchedThisFrame[s]=!0;const f=this.getImage(s);f||o.w(`Image with ID: "${s}" was not found`),Qe(f)&&this.updateImage(s,f)}}}const Et=1e20;function vt(_,r,s,f,y,x,T,k,O){for(let N=r;N<r+f;N++)It(_,s*x+N,x,y,T,k,O);for(let N=s;N<s+y;N++)It(_,N*x+r,1,f,T,k,O)}function It(_,r,s,f,y,x,T){x[0]=0,T[0]=-1e20,T[1]=Et,y[0]=_[r];for(let k=1,O=0,N=0;k<f;k++){y[k]=_[r+k*s];const $=k*k;do{const W=x[O];N=(y[k]-y[W]+$-W*W)/(k-W)/2}while(N<=T[O]&&--O>-1);O++,x[O]=k,T[O]=N,T[O+1]=Et}for(let k=0,O=0;k<f;k++){for(;T[O+1]<k;)O++;const N=x[O],$=k-N;_[r+k*s]=y[N]+$*$}}class Ft{constructor(r,s){this.requestManager=r,this.localIdeographFontFamily=s,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return o._(this,void 0,void 0,function*(){const s=[];for(const x in r)for(const T of r[x])s.push(this._getAndCacheGlyphsPromise(x,T));const f=yield Promise.all(s),y={};for(const{stack:x,id:T,glyph:k}of f)y[x]||(y[x]={}),y[x][T]=k&&{id:k.id,bitmap:k.bitmap.clone(),metrics:k.metrics};return y})}_getAndCacheGlyphsPromise(r,s){return o._(this,void 0,void 0,function*(){let f=this.entries[r];f||(f=this.entries[r]={glyphs:{},requests:{},ranges:{}});let y=f.glyphs[s];if(y!==void 0)return{stack:r,id:s,glyph:y};if(y=this._tinySDF(f,r,s),y)return f.glyphs[s]=y,{stack:r,id:s,glyph:y};const x=Math.floor(s/256);if(256*x>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[x])return{stack:r,id:s,glyph:y};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[x]){const k=Ft.loadGlyphRange(r,x,this.url,this.requestManager);f.requests[x]=k}const T=yield f.requests[x];for(const k in T)this._doesCharSupportLocalGlyph(+k)||(f.glyphs[+k]=T[+k]);return f.ranges[x]=!0,{stack:r,id:s,glyph:T[s]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))||o.u["CJK Unified Ideographs"](r)||o.u["Hangul Syllables"](r)||o.u.Hiragana(r)||o.u.Katakana(r)||o.u["CJK Symbols and Punctuation"](r)||o.u["Halfwidth and Fullwidth Forms"](r))}_tinySDF(r,s,f){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(f))return;let x=r.tinySDF;if(!x){let k="400";/bold/i.test(s)?k="900":/medium/i.test(s)?k="500":/light/i.test(s)&&(k="200"),x=r.tinySDF=new Ft.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:k})}const T=x.draw(String.fromCharCode(f));return{id:f,bitmap:new o.q({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ft.loadGlyphRange=function(_,r,s,f){return o._(this,void 0,void 0,function*(){const y=256*r,x=y+255,T=f.transformRequest(s.replace("{fontstack}",_).replace("{range}",`${y}-${x}`),"Glyphs"),k=yield o.n(T,new AbortController);if(!k||!k.data)throw new Error(`Could not load glyph range. range: ${r}, ${y}-${x}`);const O={};for(const N of o.o(k.data))O[N.id]=N;return O})},Ft.TinySDF=class{constructor({fontSize:_=24,buffer:r=3,radius:s=8,cutoff:f=.25,fontFamily:y="sans-serif",fontWeight:x="normal",fontStyle:T="normal"}={}){this.buffer=r,this.cutoff=f,this.radius=s;const k=this.size=_+4*r,O=this._createCanvas(k),N=this.ctx=O.getContext("2d",{willReadFrequently:!0});N.font=`${T} ${x} ${_}px ${y}`,N.textBaseline="alphabetic",N.textAlign="left",N.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Uint16Array(k)}_createCanvas(_){const r=document.createElement("canvas");return r.width=r.height=_,r}draw(_){const{width:r,actualBoundingBoxAscent:s,actualBoundingBoxDescent:f,actualBoundingBoxLeft:y,actualBoundingBoxRight:x}=this.ctx.measureText(_),T=Math.ceil(s),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-y))),O=Math.min(this.size-this.buffer,T+Math.ceil(f)),N=k+2*this.buffer,$=O+2*this.buffer,W=Math.max(N*$,0),q=new Uint8ClampedArray(W),K={data:q,width:N,height:$,glyphWidth:k,glyphHeight:O,glyphTop:T,glyphLeft:0,glyphAdvance:r};if(k===0||O===0)return K;const{ctx:re,buffer:ue,gridInner:de,gridOuter:pe}=this;re.clearRect(ue,ue,k,O),re.fillText(_,ue,ue+T);const me=re.getImageData(ue,ue,k,O);pe.fill(Et,0,W),de.fill(0,0,W);for(let we=0;we<O;we++)for(let ye=0;ye<k;ye++){const Te=me.data[4*(we*k+ye)+3]/255;if(Te===0)continue;const Ee=(we+ue)*N+ye+ue;if(Te===1)pe[Ee]=0,de[Ee]=Et;else{const ve=.5-Te;pe[Ee]=ve>0?ve*ve:0,de[Ee]=ve<0?ve*ve:0}}vt(pe,0,0,N,$,N,this.f,this.v,this.z),vt(de,ue,ue,k,O,N,this.f,this.v,this.z);for(let we=0;we<W;we++){const ye=Math.sqrt(pe[we])-Math.sqrt(de[we]);q[we]=Math.round(255-255*(ye/this.radius+this.cutoff))}return K}};class er{constructor(){this.specification=o.v.light.position}possiblyEvaluate(r,s){return o.B(r.expression.evaluate(s))}interpolate(r,s,f){return{x:o.C.number(r.x,s.x,f),y:o.C.number(r.y,s.y,f),z:o.C.number(r.z,s.z,f)}}}let lr;class vr extends o.E{constructor(r){super(),lr=lr||new o.r({anchor:new o.D(o.v.light.anchor),position:new er,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.t(lr),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,s={}){if(!this._validate(o.x,r,s))for(const f in r){const y=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),y):this._transitionable.setValue(f,y)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,s,f){return(!f||f.validate!==!1)&&o.y(this,r.call(o.z,{value:s,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}const Mt=new o.r({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class ut extends o.E{constructor(r){super(),this._transitionable=new o.t(Mt),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0))}setSky(r,s={}){if(!this._validate(o.G,r,s)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const f in r){const y=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),y):this._transitionable.setValue(f,y)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,s,f={}){return f?.validate!==!1&&o.y(this,r.call(o.z,o.e({value:s,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class Ct{constructor(r,s){this.width=r,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,s){const f=r.join(",")+String(s);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,s)),this.dashEntry[f]}getDashRanges(r,s,f){const y=[];let x=r.length%2==1?-r[r.length-1]*f:0,T=r[0]*f,k=!0;y.push({left:x,right:T,isDash:k,zeroLength:r[0]===0});let O=r[0];for(let N=1;N<r.length;N++){k=!k;const $=r[N];x=O*f,O+=$,T=O*f,y.push({left:x,right:T,isDash:k,zeroLength:$===0})}return y}addRoundDash(r,s,f){const y=s/2;for(let x=-f;x<=f;x++){const T=this.width*(this.nextRow+f+x);let k=0,O=r[k];for(let N=0;N<this.width;N++){N/O.right>1&&(O=r[++k]);const $=Math.abs(N-O.left),W=Math.abs(N-O.right),q=Math.min($,W);let K;const re=x/f*(y+1);if(O.isDash){const ue=y-Math.abs(re);K=Math.sqrt(q*q+ue*ue)}else K=y-Math.sqrt(q*q+re*re);this.data[T+N]=Math.max(0,Math.min(255,K+128))}}}addRegularDash(r){for(let k=r.length-1;k>=0;--k){const O=r[k],N=r[k+1];O.zeroLength?r.splice(k,1):N&&N.isDash===O.isDash&&(N.left=O.left,r.splice(k,1))}const s=r[0],f=r[r.length-1];s.isDash===f.isDash&&(s.left=f.left-this.width,f.right=s.right+this.width);const y=this.width*this.nextRow;let x=0,T=r[x];for(let k=0;k<this.width;k++){k/T.right>1&&(T=r[++x]);const O=Math.abs(k-T.left),N=Math.abs(k-T.right),$=Math.min(O,N);this.data[y+k]=Math.max(0,Math.min(255,(T.isDash?$:-$)+128))}}addDash(r,s){const f=s?7:0,y=2*f+1;if(this.nextRow+y>this.height)return o.w("LineAtlas out of space"),null;let x=0;for(let k=0;k<r.length;k++)x+=r[k];if(x!==0){const k=this.width/x,O=this.getDashRanges(r,this.width,k);s?this.addRoundDash(O,k,f):this.addRegularDash(O)}const T={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:x};return this.nextRow+=y,this.dirty=!0,T}bind(r){const s=r.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))}}const wt="maplibre_preloaded_worker_pool";class ze{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<ze.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(s=>{s.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[wt]}numActive(){return Object.keys(this.active).length}}const $e=Math.floor(R.hardwareConcurrency/2);let Lt,Xt;function tr(){return Lt||(Lt=new ze),Lt}ze.workerCount=o.H(globalThis)?Math.max(Math.min($e,3),1):1;class Pr{constructor(r,s){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=s;const f=this.workerPool.acquire(s);for(let y=0;y<f.length;y++){const x=new o.J(f[y],s);x.name=`Worker ${y}`,this.actors.push(x)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,s){const f=[];for(const y of this.actors)f.push(y.sendAsync({type:r,data:s}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(s=>{s.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,s){for(const f of this.actors)f.registerMessageHandler(r,s)}}function zr(){return Xt||(Xt=new Pr(tr(),o.K),Xt.registerMessageHandler("GR",(_,r,s)=>o.m(r,s))),Xt}function Ir(_,r){const s=o.L();return o.M(s,s,[1,1,0]),o.N(s,s,[.5*_.width,.5*_.height,1]),_.calculatePosMatrix?o.O(s,s,_.calculatePosMatrix(r.toUnwrapped())):s}function lt(_,r,s,f,y,x,T){var k;const O=function(q,K,re){if(q)for(const ue of q){const de=K[ue];if(de&&de.source===re&&de.type==="fill-extrusion")return!0}else for(const ue in K){const de=K[ue];if(de.source===re&&de.type==="fill-extrusion")return!0}return!1}((k=y?.layers)!==null&&k!==void 0?k:null,r,_.id),N=x.maxPitchScaleFactor(),$=_.tilesIn(f,N,O);$.sort(Qt);const W=[];for(const q of $)W.push({wrappedTileID:q.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(r,s,_._state,q.queryGeometry,q.cameraQueryGeometry,q.scale,y,x,N,Ir(_.transform,q.tileID),T?(K,re)=>T(q.tileID,K,re):void 0)});return function(q,K){for(const re in q)for(const ue of q[re])sr(ue,K);return q}(function(q){const K={},re={};for(const ue of q){const de=ue.queryResults,pe=ue.wrappedTileID,me=re[pe]=re[pe]||{};for(const we in de){const ye=de[we],Te=me[we]=me[we]||{},Ee=K[we]=K[we]||[];for(const ve of ye)Te[ve.featureIndex]||(Te[ve.featureIndex]=!0,Ee.push(ve))}}return K}(W),_)}function Qt(_,r){const s=_.tileID,f=r.tileID;return s.overscaledZ-f.overscaledZ||s.canonical.y-f.canonical.y||s.wrap-f.wrap||s.canonical.x-f.canonical.x}function sr(_,r){const s=_.feature,f=r.getFeatureState(s.layer["source-layer"],s.id);s.source=s.layer.source,s.layer["source-layer"]&&(s.sourceLayer=s.layer["source-layer"]),s.state=f}function yt(_,r,s){return o._(this,void 0,void 0,function*(){let f=_;if(_.url?f=(yield o.j(r.transformRequest(_.url,"Source"),s)).data:yield R.frameAsync(s),!f)return null;const y=o.Q(o.e(f,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(y.vectorLayerIds=f.vector_layers.map(x=>x.id)),y})}class _r{constructor(r,s){r&&(s?this.setSouthWest(r).setNorthEast(s):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof o.S?new o.S(r.lng,r.lat):o.S.convert(r),this}setSouthWest(r){return this._sw=r instanceof o.S?new o.S(r.lng,r.lat):o.S.convert(r),this}extend(r){const s=this._sw,f=this._ne;let y,x;if(r instanceof o.S)y=r,x=r;else{if(!(r instanceof _r))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(_r.convert(r)):this.extend(o.S.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(o.S.convert(r)):this;if(y=r._sw,x=r._ne,!y||!x)return this}return s||f?(s.lng=Math.min(y.lng,s.lng),s.lat=Math.min(y.lat,s.lat),f.lng=Math.max(x.lng,f.lng),f.lat=Math.max(x.lat,f.lat)):(this._sw=new o.S(y.lng,y.lat),this._ne=new o.S(x.lng,x.lat)),this}getCenter(){return new o.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.S(this.getWest(),this.getNorth())}getSouthEast(){return new o.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:s,lat:f}=o.S.convert(r);let y=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&y}static convert(r){return r instanceof _r?r:r&&new _r(r)}static fromLngLat(r,s=0){const f=360*s/40075017,y=f/Math.cos(Math.PI/180*r.lat);return new _r(new o.S(r.lng-y,r.lat-f),new o.S(r.lng+y,r.lat+f))}adjustAntiMeridian(){const r=new o.S(this._sw.lng,this._sw.lat),s=new o.S(this._ne.lng,this._ne.lat);return new _r(r,r.lng>s.lng?new o.S(s.lng+360,s.lat):s)}}class Tr{constructor(r,s,f){this.bounds=_r.convert(this.validateBounds(r)),this.minzoom=s||0,this.maxzoom=f||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const s=Math.pow(2,r.z),f=Math.floor(o.V(this.bounds.getWest())*s),y=Math.floor(o.U(this.bounds.getNorth())*s),x=Math.ceil(o.V(this.bounds.getEast())*s),T=Math.ceil(o.U(this.bounds.getSouth())*s);return r.x>=f&&r.x<x&&r.y>=y&&r.y<T}}class Qr extends o.E{constructor(r,s,f,y){if(super(),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.Q(s,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},s),this._collectResourceTiming=s.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield yt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(o.e(this,r),r.bounds&&(this.tileBounds=new Tr(r.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new o.k(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(r){return o._(this,void 0,void 0,function*(){const s=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(s,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};f.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((x,T)=>{r.reloadPromise={resolve:x,reject:T}})}else r.actor=this.dispatcher.getActor(),y="LT";r.abortController=new AbortController;try{const x=yield r.actor.sendAsync({type:y,data:f},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,x)}catch(x){if(delete r.abortController,r.aborted)return;if(x&&x.status!==404)throw x;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,s){if(s&&s.resourceTiming&&(r.resourceTiming=s.resourceTiming),s&&this.map._refreshExpiredTiles&&r.setExpiryData(s),r.loadVectorData(s,this.map.painter),r.reloadPromise){const f=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(f.resolve).catch(f.reject)}}abortTile(r){return o._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return o._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Pn extends o.E{constructor(r,s,f,y){super(),this.id=r,this.dispatcher=f,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},s),o.e(this,o.Q(s,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(r=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const s=yield yt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,s&&(o.e(this,s),s.bounds&&(this.tileBounds=new Tr(s.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(s){this._tileJSONRequest=null,this.fire(new o.k(s))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return o.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return o._(this,void 0,void 0,function*(){const s=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const f=yield Ce.getImage(this.map._requestManager.transformRequest(s,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&(f.cacheControl||f.expires)&&r.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const y=this.map.painter.context,x=y.gl,T=f.data;r.texture=this.map.painter.getTileTexture(T.width),r.texture?r.texture.update(T,{useMipmap:!0}):(r.texture=new o.T(y,T,x.RGBA,{useMipmap:!0}),r.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(f){if(delete r.abortController,r.aborted)r.state="unloaded";else if(f)throw r.state="errored",f}})}abortTile(r){return o._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return o._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class Jr extends Pn{constructor(r,s,f,y){super(r,s,f,y),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox",this.redFactor=s.redFactor,this.greenFactor=s.greenFactor,this.blueFactor=s.blueFactor,this.baseShift=s.baseShift}loadTile(r){return o._(this,void 0,void 0,function*(){const s=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(s,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const y=yield Ce.getImage(f,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(y&&y.data){const x=y.data;this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&r.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const T=o.b(x)&&o.W()?x:yield this.readImageNow(x),k={type:this.type,uid:r.uid,source:this.id,rawImageData:T,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const O=yield r.actor.sendAsync({type:"LDT",data:k});r.dem=O,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(y){if(delete r.abortController,r.aborted)r.state="unloaded";else if(y)throw r.state="errored",y}})}readImageNow(r){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.X()){const s=r.width+2,f=r.height+2;try{return new o.R({width:s,height:f},yield o.Y(r,-1,-1,s,f))}catch{}}return R.getImageData(r,1)})}_getNeighboringTiles(r){const s=r.canonical,f=Math.pow(2,s.z),y=(s.x-1+f)%f,x=s.x===0?r.wrap-1:r.wrap,T=(s.x+1+f)%f,k=s.x+1===f?r.wrap+1:r.wrap,O={};return O[new o.Z(r.overscaledZ,x,s.z,y,s.y).key]={backfilled:!1},O[new o.Z(r.overscaledZ,k,s.z,T,s.y).key]={backfilled:!1},s.y>0&&(O[new o.Z(r.overscaledZ,x,s.z,y,s.y-1).key]={backfilled:!1},O[new o.Z(r.overscaledZ,r.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},O[new o.Z(r.overscaledZ,k,s.z,T,s.y-1).key]={backfilled:!1}),s.y+1<f&&(O[new o.Z(r.overscaledZ,x,s.z,y,s.y+1).key]={backfilled:!1},O[new o.Z(r.overscaledZ,r.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},O[new o.Z(r.overscaledZ,k,s.z,T,s.y+1).key]={backfilled:!1}),O}unloadTile(r){return o._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class ri extends o.E{constructor(r,s,f,y){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(y),this._data=s.data,this._options=o.e({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId,s.clusterMaxZoom!==void 0&&this.maxzoom<=s.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${s.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(s.buffer!==void 0?s.buffer:128),tolerance:this._pixelsToTileUnits(s.tolerance!==void 0?s.tolerance:.375),extent:o.$,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(s.clusterMaxZoom),minPoints:Math.max(2,s.clusterMinPoints||2),extent:o.$,radius:this._pixelsToTileUnits(s.clusterRadius||50),log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(o.$/this.tileSize)}_getClusterMaxZoom(r){const s=r?Math.round(r):this.maxzoom-1;return Number.isInteger(r)||r===void 0||o.w(`Integer expected for option 'clusterMaxZoom': provided value "${r}" rounded to "${s}"`),s}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return o._(this,void 0,void 0,function*(){const r=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}getCoordinatesFromGeometry(r){return r.type==="GeometryCollection"?r.geometries.map(s=>s.coordinates).flat(1/0):r.coordinates.flat(1/0)}getBounds(){return o._(this,void 0,void 0,function*(){const r=new _r,s=yield this.getData();let f;switch(s.type){case"FeatureCollection":f=s.features.map(y=>this.getCoordinatesFromGeometry(y.geometry)).flat(1/0);break;case"Feature":f=this.getCoordinatesFromGeometry(s.geometry);break;default:f=this.getCoordinatesFromGeometry(s)}if(f.length==0)return r;for(let y=0;y<f.length-1;y+=2)r.extend([f[y],f[y+1]]);return r})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(r.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,s,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:s,offset:f}})}_updateWorkerData(r){return o._(this,void 0,void 0,function*(){const s=o.e({type:this.type},this.workerOptions);r?s.dataDiff=r:typeof this._data=="string"?(s.request=this.map._requestManager.transformRequest(R.resolveURL(this._data),"Source"),s.request.collectResourceTiming=this._collectResourceTiming):s.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.l("dataloading",{dataType:"source"}));try{const f=yield this.actor.sendAsync({type:"LD",data:s});if(this._pendingLoads--,this._removed||f.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));let y=null;f.resourceTiming&&f.resourceTiming[this.id]&&(y=f.resourceTiming[this.id].slice(0));const x={dataType:"source"};this._collectResourceTiming&&y&&y.length>0&&o.e(x,{resourceTiming:y}),this.fire(new o.l("data",Object.assign(Object.assign({},x),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},x),{sourceDataType:"content"})))}catch(f){if(this._pendingLoads--,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(f))}})}loaded(){return this._pendingLoads===0}loadTile(r){return o._(this,void 0,void 0,function*(){const s=r.actor?"RT":"LT";r.actor=this.actor;const f={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};r.abortController=new AbortController;const y=yield this.actor.sendAsync({type:s,data:f},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(y,this.map.painter,s==="RT")})}abortTile(r){return o._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return o._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class fi extends o.E{constructor(r,s,f,y){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=f,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=s}load(r){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const s=yield Ce.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,s&&s.data&&(this.image=s.data,r&&(this.coordinates=r),this._finishLoading())}catch(s){this._request=null,this._loaded=!0,this.fire(new o.k(s))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const s=r.map(o.a0.fromLngLat);var f;return this.tileID=function(y){const x=o.a1.fromPoints(y),T=x.width(),k=x.height(),O=Math.max(T,k),N=Math.max(0,Math.floor(-Math.log(O)/Math.LN2)),$=Math.pow(2,N);return new o.a3(N,Math.floor((x.minX+x.maxX)/2*$),Math.floor((x.minY+x.maxY)/2*$))}(s),this.terrainTileRanges=this._getOverlappingTileRanges(s),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=s.map(y=>this.tileID.getTilePoint(y)._round()),this.flippedWindingOrder=((f=this.tileCoords)[1].x-f[0].x)*(f[2].y-f[0].y)-(f[1].y-f[0].y)*(f[2].x-f[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,s=r.gl;this.texture||(this.texture=new o.T(r,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));let f=!1;for(const y in this.tiles){const x=this.tiles[y];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,f=!0)}f&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){const{minX:s,minY:f,maxX:y,maxY:x}=o.a1.fromPoints(r),T={};for(let k=0;k<=o.a2;k++){const O=Math.pow(2,k),N=Math.floor(s*O),$=Math.floor(f*O),W=Math.floor(y*O),q=Math.floor(x*O);T[k]={minTileX:N,minTileY:$,maxTileX:W,maxTileY:q}}return T}}class Fa extends fi{constructor(r,s,f,y){super(r,s,f,y),this.roundZoom=!0,this.type="video",this.options=s}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const s of r.urls)this.urls.push(this.map._requestManager.transformRequest(s,"Source").url);try{const s=yield o.a4(this.urls);if(this._loaded=!0,!s)return;this.video=s,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(s){this.fire(new o.k(s))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const s=this.video.seekable;r<s.start(0)||r>s.end(0)?this.fire(new o.k(new o.a5(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,s=r.gl;this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(r,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));let f=!1;for(const y in this.tiles){const x=this.tiles[y];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,f=!0)}f&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class oa extends fi{constructor(r,s,f,y){super(r,s,f,y),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(T=>typeof T!="number"))||this.fire(new o.k(new o.a5(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.a5(`sources.${r}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new o.k(new o.a5(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.a5(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.a5(`sources.${r}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context,f=s.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.T(s,this.canvas,f.RGBA,{premultiply:!0});let y=!1;for(const x in this.tiles){const T=this.tiles[x];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,y=!0)}y&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Js={},as=_=>{switch(_){case"geojson":return ri;case"image":return fi;case"raster":return Pn;case"raster-dem":return Jr;case"vector":return Qr;case"video":return Fa;case"canvas":return oa}return Js[_]},no="RTLPluginLoaded";class os extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=zr()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(s=>{throw this.status="error",s})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return o._(this,arguments,void 0,function*(s,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=R.resolveURL(s),!this.url)throw new Error(`requested url ${s} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(no))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let io=null;function Ei(){return io||(io=new os),io}class sa{constructor(r,s){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=o.a6(),this.uses=0,this.tileSize=s,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const s=r+this.timeAdded;s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,s,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(y,x){const T={};if(!x)return T;for(const k of y){const O=k.layerIds.map(N=>x.getLayer(N)).filter(Boolean);if(O.length!==0){k.layers=O,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(N=>O.filter($=>$.id===N)[0]));for(const N of O)T[N.id]=k}}return T}(r.buckets,s?.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const x=this.buckets[y];if(x instanceof o.a8){if(this.hasSymbolBuckets=!0,!f)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const x=this.buckets[y];if(x instanceof o.a8&&x.hasRTLText){this.hasRTLText=!0,Ei().lazyLoad();break}}this.queryPadding=0;for(const y in this.buckets){const x=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(y).queryRadius(x))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new o.a7}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const f in this.buckets){const y=this.buckets[f];y.uploadPending()&&y.upload(r)}const s=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new o.T(r,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(r,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,s,f,y,x,T,k,O,N,$,W){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:x,scale:T,tileSize:this.tileSize,pixelPosMatrix:$,transform:O,params:k,queryPadding:this.queryPadding*N,getElevation:W},r,s,f):{}}querySourceFeatures(r,s){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const y=f.loadVTLayers(),x=s&&s.sourceLayer?s.sourceLayer:"",T=y._geojsonTileLayer||y[x];if(!T)return;const k=o.a9(s&&s.filter),{z:O,x:N,y:$}=this.tileID.canonical,W={z:O,x:N,y:$};for(let q=0;q<T.length;q++){const K=T.feature(q);if(k.needGeometry){const de=o.aa(K,!0);if(!k.filter(new o.F(this.tileID.overscaledZ),de,this.tileID.canonical))continue}else if(!k.filter(new o.F(this.tileID.overscaledZ),K))continue;const re=f.getId(K,x),ue=new o.ab(K,O,N,$,re);ue.tile=W,r.push(ue)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const s=this.expirationTime;if(r.cacheControl){const f=o.ac(r.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const f=Date.now();let y=!1;if(this.expirationTime>f)y=!1;else if(s)if(this.expirationTime<s)y=!0;else{const x=this.expirationTime-s;x?this.expirationTime=f+Math.max(x,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!s.style.hasLayer(y))continue;const x=this.buckets[y],T=x.layers[0].sourceLayer||"_geojsonTileLayer",k=f[T],O=r[T];if(!k||!O||Object.keys(O).length===0)continue;x.update(O,k,this.imageAtlas&&this.imageAtlas.patternPositions||{});const N=s&&s.style&&s.style.getLayer(y);N&&(this.queryPadding=Math.max(this.queryPadding,N.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<R.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=R.now()+r}setDependencies(r,s){const f={};for(const y of s)f[y]=!0;this.dependencies[r]=f}hasDependency(r,s){for(const f of r){const y=this.dependencies[f];if(y){for(const x of s)if(y[x])return!0}}return!1}}class $l{constructor(r,s){this.max=r,this.onRemove=s,this.reset()}reset(){for(const r in this.data)for(const s of this.data[r])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(r,s,f){const y=r.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const x={value:s,timeout:void 0};if(f!==void 0&&(x.timeout=setTimeout(()=>{this.remove(r,x)},f)),this.data[y].push(x),this.order.push(y),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const s=this.data[r].shift();return s.timeout&&clearTimeout(s.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),s.value}getByKey(r){const s=this.data[r];return s?s[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,s){if(!this.has(r))return this;const f=r.wrapped().key,y=s===void 0?0:this.data[f].indexOf(s),x=this.data[f][y];return this.data[f].splice(y,1),x.timeout&&clearTimeout(x.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(x.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(r){const s=[];for(const f in this.data)for(const y of this.data[f])r(y.value)||s.push(y);for(const f of s)this.remove(f.value.tileID,f)}}class ss{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,s,f){const y=String(s);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][y]=this.stateChanges[r][y]||{},o.e(this.stateChanges[r][y],f),this.deletedStates[r]===null){this.deletedStates[r]={};for(const x in this.state[r])x!==y&&(this.deletedStates[r][x]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][y]===null){this.deletedStates[r][y]={};for(const x in this.state[r][y])f[x]||(this.deletedStates[r][y][x]=null)}else for(const x in f)this.deletedStates[r]&&this.deletedStates[r][y]&&this.deletedStates[r][y][x]===null&&delete this.deletedStates[r][y][x]}removeFeatureState(r,s,f){if(this.deletedStates[r]===null)return;const y=String(s);if(this.deletedStates[r]=this.deletedStates[r]||{},f&&s!==void 0)this.deletedStates[r][y]!==null&&(this.deletedStates[r][y]=this.deletedStates[r][y]||{},this.deletedStates[r][y][f]=null);else if(s!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][y])for(f in this.deletedStates[r][y]={},this.stateChanges[r][y])this.deletedStates[r][y][f]=null;else this.deletedStates[r][y]=null;else this.deletedStates[r]=null}getState(r,s){const f=String(s),y=o.e({},(this.state[r]||{})[f],(this.stateChanges[r]||{})[f]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const x=this.deletedStates[r][s];if(x===null)return{};for(const T in x)delete y[T]}return y}initializeTileState(r,s){r.setFeatureState(this.state,s)}coalesceChanges(r,s){const f={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const x={};for(const T in this.stateChanges[y])this.state[y][T]||(this.state[y][T]={}),o.e(this.state[y][T],this.stateChanges[y][T]),x[T]=this.state[y][T];f[y]=x}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const x={};if(this.deletedStates[y]===null)for(const T in this.state[y])x[T]={},this.state[y][T]={};else for(const T in this.deletedStates[y]){if(this.deletedStates[y][T]===null)this.state[y][T]={};else for(const k of Object.keys(this.deletedStates[y][T]))delete this.state[y][T][k];x[T]=this.state[y][T]}f[y]=f[y]||{},o.e(f[y],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const y in r)r[y].setFeatureState(f,s)}}const la=89.25;function Fe(_,r){const s=o.ag(r.lat,-85.051129,o.ah);return new o.P(o.V(r.lng)*_,o.U(s)*_)}function ie(_,r){return new o.a0(r.x/_,r.y/_).toLngLat()}function oe(_){return _.cameraToCenterDistance*Math.min(.85*Math.tan(o.ad(90-_.pitch)),Math.tan(o.ad(la-_.pitch)))}function fe(_,r){const s=_.canonical,f=r/o.ae(s.z),y=s.x+Math.pow(2,s.z)*_.wrap,x=o.af(new Float64Array(16));return o.M(x,x,[y*f,s.y*f,0]),o.N(x,x,[f/o.$,f/o.$,1]),x}function _e(_,r,s,f,y){const x=o.a0.fromLngLat(_,r),T=y*o.ai(1,_.lat),k=T*Math.cos(o.ad(s)),O=Math.sqrt(T*T-k*k),N=O*Math.sin(o.ad(-f)),$=O*Math.cos(o.ad(-f));return new o.a0(x.x+N,x.y+$,x.z+k)}function Ie(_,r,s){const f=r.intersectsFrustum(_);if(!s||f===0)return f;const y=r.intersectsPlane(s);return y===0?0:f===2&&y===2?2:1}function Le(_,r,s){let f=0;const y=(s-r)/10;for(let x=0;x<10;x++)f+=y*Math.pow(Math.cos(r+(x+.5)/10*(s-r)),_);return f}function qe(_,r){return function(s,f,y,x,T){const k=2*((_-1)/o.aj(Math.cos(o.ad(la-T))/Math.cos(o.ad(la)))-1),O=Math.acos(y/x),N=2*Le(k-1,0,o.ad(T/2)),$=Math.min(o.ad(la),O+o.ad(T/2)),W=Le(k-1,Math.min($,O-o.ad(T/2)),$),q=Math.atan(f/y),K=Math.hypot(f,y);let re=s;return re+=o.aj(x/K/Math.max(.5,Math.cos(o.ad(T/2)))),re+=k*o.aj(Math.cos(q))/2,re-=o.aj(Math.max(1,W/N/r))/2,re}}const Re=qe(9.314,3);function Je(_,r){const s=(r.roundZoom?Math.round:Math.floor)(_.zoom+o.aj(_.tileSize/r.tileSize));return Math.max(0,s)}function Xe(_,r){const s=_.getCameraFrustum(),f=_.getClippingPlane(),y=_.screenPointToMercatorCoordinate(_.getCameraPoint()),x=o.a0.fromLngLat(_.center,_.elevation);y.z=x.z+Math.cos(_.pitchInRadians)*_.cameraToCenterDistance/_.worldSize;const T=_.getCoveringTilesDetailsProvider(),k=T.allowVariableZoom(_,r),O=Je(_,r),N=r.minzoom||0,$=r.maxzoom!==void 0?r.maxzoom:_.maxZoom,W=Math.min(Math.max(0,O),$),q=Math.pow(2,W),K=[q*y.x,q*y.y,0],re=[q*x.x,q*x.y,0],ue=Math.hypot(x.x-y.x,x.y-y.y),de=Math.abs(x.z-y.z),pe=Math.hypot(ue,de),me=Te=>({zoom:0,x:0,y:0,wrap:Te,fullyVisible:!1}),we=[],ye=[];if(_.renderWorldCopies&&T.allowWorldCopies())for(let Te=1;Te<=3;Te++)we.push(me(-Te)),we.push(me(Te));for(we.push(me(0));we.length>0;){const Te=we.pop(),Ee=Te.x,ve=Te.y;let De=Te.fullyVisible;const Ue={x:Ee,y:ve,z:Te.zoom},Ve=T.getTileBoundingVolume(Ue,Te.wrap,_.elevation,r);if(!De){const gt=Ie(s,Ve,f);if(gt===0)continue;De=gt===2}const Ge=T.distanceToTile2d(y.x,y.y,Ue,Ve);let He=O;k&&(He=(r.calculateTileZoom||Re)(_.zoom+o.aj(_.tileSize/r.tileSize),Ge,de,pe,_.fov)),He=(r.roundZoom?Math.round:Math.floor)(He),He=Math.max(0,He);const _t=Math.min(He,$);if(Te.wrap=T.getWrap(x,Ue,Te.wrap),Te.zoom>=_t){if(Te.zoom<N)continue;const gt=W-Te.zoom,it=K[0]-.5-(Ee<<gt),Ot=K[1]-.5-(ve<<gt),dr=r.reparseOverscaled?Math.max(Te.zoom,He):Te.zoom;ye.push({tileID:new o.Z(Te.zoom===$?dr:Te.zoom,Te.wrap,Te.zoom,Ee,ve),distanceSq:o.ak([re[0]-.5-Ee,re[1]-.5-ve]),tileDistanceToCamera:Math.sqrt(it*it+Ot*Ot)})}else for(let gt=0;gt<4;gt++)we.push({zoom:Te.zoom+1,x:(Ee<<1)+gt%2,y:(ve<<1)+(gt>>1),wrap:Te.wrap,fullyVisible:De})}return ye.sort((Te,Ee)=>Te.distanceSq-Ee.distanceSq).map(Te=>Te.tileID)}const Be=o.a1.fromPoints([new o.P(0,0),new o.P(o.$,o.$)]);class nt extends o.E{constructor(r,s,f){super(),this.id=r,this.dispatcher=f,this.on("data",y=>this._dataHandler(y)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((y,x,T,k)=>{const O=new(as(x.type))(y,x,T,k);if(O.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${O.id}`);return O})(r,s,f,this),this._tiles={},this._cache=new $l(0,y=>this._unloadTile(y)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ss,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const s=this._tiles[r];if(s.state!=="loaded"&&s.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,s,f){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,s,f)}catch(y){r.state="errored",y.status!==404?this._source.fire(new o.k(y,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new o.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const s in this._tiles){const f=this._tiles[s];f.upload(r),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Me).map(r=>r.key)}getRenderableIds(r){const s=[];for(const f in this._tiles)this._isIdRenderable(f,r)&&s.push(this._tiles[f]);return r?s.sort((f,y)=>{const x=f.tileID,T=y.tileID,k=new o.P(x.canonical.x,x.canonical.y)._rotate(-this.transform.bearingInRadians),O=new o.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians);return x.overscaledZ-T.overscaledZ||O.y-k.y||O.x-k.x}).map(f=>f.tileID.key):s.map(f=>f.tileID).sort(Me).map(f=>f.key)}hasRenderableParent(r){const s=this.findLoadedParent(r,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(r,s){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(s||!this._tiles[r].holdingForFade())}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const s in this._tiles)r?this._reloadTile(s,"expired"):this._tiles[s].state!=="errored"&&this._reloadTile(s,"reloading")}}_reloadTile(r,s){return o._(this,void 0,void 0,function*(){const f=this._tiles[r];f&&(f.state!=="loading"&&(f.state=s),yield this._loadTile(f,r,s))})}_tileLoaded(r,s,f){r.timeAdded=R.now(),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(s,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const s=this.getRenderableIds();for(let y=0;y<s.length;y++){const x=s[y];if(r.neighboringTiles&&r.neighboringTiles[x]){const T=this.getTileByID(x);f(r,T),f(T,r)}}function f(y,x){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let T=x.tileID.canonical.x-y.tileID.canonical.x;const k=x.tileID.canonical.y-y.tileID.canonical.y,O=Math.pow(2,y.tileID.canonical.z),N=x.tileID.key;T===0&&k===0||Math.abs(k)>1||(Math.abs(T)>1&&(Math.abs(T+O)===1?T+=O:Math.abs(T-O)===1&&(T-=O)),x.dem&&y.dem&&(y.dem.backfillBorder(x.dem,T,k),y.neighboringTiles&&y.neighboringTiles[N]&&(y.neighboringTiles[N].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,s,f,y){for(const x in this._tiles){let T=this._tiles[x];if(y[x]||!T.hasData()||T.tileID.overscaledZ<=s||T.tileID.overscaledZ>f)continue;let k=T.tileID;for(;T&&T.tileID.overscaledZ>s+1;){const N=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[N.key],T&&T.hasData()&&(k=N)}let O=k;for(;O.overscaledZ>s;)if(O=O.scaledTo(O.overscaledZ-1),r[O.key]||r[O.canonical.key]){y[k.key]=k;break}}}findLoadedParent(r,s){if(r.key in this._loadedParentTiles){const f=this._loadedParentTiles[r.key];return f&&f.tileID.overscaledZ>=s?f:null}for(let f=r.overscaledZ-1;f>=s;f--){const y=r.scaledTo(f),x=this._getLoadedTile(y);if(x)return x}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const s=this._tiles[r.key];return s&&s.hasData()?s:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const s=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,y=Math.floor(s*f*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(x)}handleWrapJump(r){const s=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,s){const f={};for(const y in this._tiles){const x=this._tiles[y];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+s),f[x.tileID.key]=x}this._tiles=f;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}_updateCoveredAndRetainedTiles(r,s,f,y,x,T){const k={},O={},N=Object.keys(r),$=R.now();for(const W of N){const q=r[W],K=this._tiles[W];if(!K||K.fadeEndTime!==0&&K.fadeEndTime<=$)continue;const re=this.findLoadedParent(q,s),ue=this.findLoadedSibling(q),de=re||ue||null;de&&(this._addTile(de.tileID),k[de.tileID.key]=de.tileID),O[W]=q}this._retainLoadedChildren(O,y,f,r);for(const W in k)r[W]||(this._coveredTiles[W]=!0,r[W]=k[W]);if(T){const W={},q={};for(const K of x)this._tiles[K.key].hasData()?W[K.key]=K:q[K.key]=K;for(const K in q){const re=q[K].children(this._source.maxzoom);this._tiles[re[0].key]&&this._tiles[re[1].key]&&this._tiles[re[2].key]&&this._tiles[re[3].key]&&(W[re[0].key]=r[re[0].key]=re[0],W[re[1].key]=r[re[1].key]=re[1],W[re[2].key]=r[re[2].key]=re[2],W[re[3].key]=r[re[3].key]=re[3],delete q[K])}for(const K in q){const re=q[K],ue=this.findLoadedParent(re,this._source.minzoom),de=this.findLoadedSibling(re),pe=ue||de||null;if(pe){W[pe.tileID.key]=r[pe.tileID.key]=pe.tileID;for(const me in W)W[me].isChildOf(pe.tileID)&&delete W[me]}}for(const K in this._tiles)W[K]||(this._coveredTiles[K]=!0)}}update(r,s){if(!this._sourceLoaded||this._paused)return;let f;this.transform=r,this.terrain=s,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map($=>new o.Z($.canonical.z,$.wrap,$.canonical.z,$.canonical.x,$.canonical.y)):(f=Xe(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:s,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(f=f.filter($=>this._source.hasTile($)))):f=[];const y=Je(r,this._source),x=Math.max(y-nt.maxOverzooming,this._source.minzoom),T=Math.max(y+nt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const $={};for(const W of f)if(W.canonical.z>this._source.minzoom){const q=W.scaledTo(W.canonical.z-1);$[q.key]=q;const K=W.scaledTo(Math.max(this._source.minzoom,Math.min(W.canonical.z,5)));$[K.key]=K}f=f.concat(Object.values($))}const k=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,k&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const O=this._updateRetainedTiles(f,y);Pt(this._source.type)&&this._updateCoveredAndRetainedTiles(O,x,T,y,f,s);for(const $ in O)this._tiles[$].clearFadeHold();const N=o.al(this._tiles,O);for(const $ of N){const W=this._tiles[$];W.hasSymbolBuckets&&!W.holdingForFade()?W.setHoldDuration(this.map._fadeDuration):W.hasSymbolBuckets&&!W.symbolFadeFinished()||this._removeTile($)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,s){var f;const y={},x={},T=Math.max(s-nt.maxOverzooming,this._source.minzoom),k=Math.max(s+nt.maxUnderzooming,this._source.minzoom),O={};for(const N of r){const $=this._addTile(N);y[N.key]=N,$.hasData()||s<this._source.maxzoom&&(O[N.key]=N)}this._retainLoadedChildren(O,s,k,y);for(const N of r){let $=this._tiles[N.key];if($.hasData())continue;if(s+1>this._source.maxzoom){const q=N.children(this._source.maxzoom)[0],K=this.getTile(q);if(K&&K.hasData()){y[q.key]=q;continue}}else{const q=N.children(this._source.maxzoom);if(y[q[0].key]&&y[q[1].key]&&y[q[2].key]&&y[q[3].key])continue}let W=$.wasRequested();for(let q=N.overscaledZ-1;q>=T;--q){const K=N.scaledTo(q);if(x[K.key])break;if(x[K.key]=!0,$=this.getTile(K),!$&&W&&($=this._addTile(K)),$){const re=$.hasData();if((re||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||W)&&(y[K.key]=K),W=$.wasRequested(),re)break}}}return y}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const s=[];let f,y=this._tiles[r].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){f=this._loadedParentTiles[y.key];break}s.push(y.key);const x=y.scaledTo(y.overscaledZ-1);if(f=this._getLoadedTile(x),f)break;y=x}for(const x of s)this._loadedParentTiles[x]=f}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const s=this._tiles[r].tileID,f=this._getLoadedTile(s);this._loadedSiblingTiles[s.key]=f}}_addTile(r){let s=this._tiles[r.key];if(s)return s;s=this._cache.getAndRemove(r),s&&(this._setTileReloadTimer(r.key,s),s.tileID=r,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,s)));const f=s;return s||(s=new sa(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(s,r.key,s.state)),s.uses++,this._tiles[r.key]=s,f||this._source.fire(new o.l("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s}_setTileReloadTimer(r,s){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const f=s.getExpiryTimeout();f&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},f))}refreshTiles(r){for(const s in this._tiles)(this._isIdRenderable(s)||this._tiles[s].state=="errored")&&r.some(f=>f.equals(this._tiles[s].tileID.canonical))&&this._reloadTile(s,"expired")}_removeTile(r){const s=this._tiles[r];s&&(s.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),s.uses>0||(s.hasData()&&s.state!=="reloading"?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}_dataHandler(r){const s=r.sourceDataType;r.dataType==="source"&&s==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&s==="content"&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,s,f){const y=[],x=this.transform;if(!x)return y;const T=x.getCoveringTilesDetailsProvider().allowWorldCopies(),k=f?x.getCameraQueryGeometry(r):r,O=K=>x.screenPointToMercatorCoordinate(K,this.terrain),N=this.transformBbox(r,O,!T),$=this.transformBbox(k,O,!T),W=this.getIds(),q=o.a1.fromPoints($);for(let K=0;K<W.length;K++){const re=this._tiles[W[K]];if(re.holdingForFade())continue;const ue=T?[re.tileID]:[re.tileID.unwrapTo(-1),re.tileID.unwrapTo(0)],de=Math.pow(2,x.zoom-re.tileID.overscaledZ),pe=s*re.queryPadding*o.$/re.tileSize/de;for(const me of ue){const we=q.map(ye=>me.getTilePoint(new o.a0(ye.x,ye.y)));if(we.expandBy(pe),we.intersects(Be)){const ye=N.map(Ee=>me.getTilePoint(Ee)),Te=$.map(Ee=>me.getTilePoint(Ee));y.push({tile:re,tileID:T?me:me.unwrapTo(0),queryGeometry:ye,cameraQueryGeometry:Te,scale:de})}}}return y}transformBbox(r,s,f){let y=r.map(s);if(f){const x=o.a1.fromPoints(r);x.shrinkBy(.001*Math.min(x.width(),x.height()));const T=x.map(s);o.a1.fromPoints(y).covers(T)||(y=y.map(k=>k.x>.5?new o.a0(k.x-1,k.y,k.z):k))}return y}getVisibleCoordinates(r){const s=this.getRenderableIds(r).map(f=>this._tiles[f].tileID);return this.transform&&this.transform.populateCache(s),s}hasTransition(){if(this._source.hasTransition())return!0;if(Pt(this._source.type)){const r=R.now();for(const s in this._tiles)if(this._tiles[s].fadeEndTime>=r)return!0}return!1}setFeatureState(r,s,f){this._state.updateState(r=r||"_geojsonTileLayer",s,f)}removeFeatureState(r,s,f){this._state.removeFeatureState(r=r||"_geojsonTileLayer",s,f)}getFeatureState(r,s){return this._state.getState(r=r||"_geojsonTileLayer",s)}setDependencies(r,s,f){const y=this._tiles[r];y&&y.setDependencies(s,f)}reloadTilesForDependencies(r,s){for(const f in this._tiles)this._tiles[f].hasDependency(r,s)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(r,s))}}function Me(_,r){const s=Math.abs(2*_.wrap)-+(_.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return _.overscaledZ-r.overscaledZ||f-s||r.canonical.y-_.canonical.y||r.canonical.x-_.canonical.x}function Pt(_){return _==="raster"||_==="image"||_==="video"}nt.maxOverzooming=10,nt.maxUnderzooming=3;class Kt{constructor(r,s){this.reset(r,s)}reset(r,s){this.points=r||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=o.ag(r,0,1);let s=1,f=this._distances[s];const y=r*this.paddedLength+this.padding;for(;f<y&&s<this._distances.length;)f=this._distances[++s];const x=s-1,T=this._distances[x],k=f-T,O=k>0?(y-T)/k:0;return this.points[x].mult(1-O).add(this.points[s].mult(O))}}function At(_,r){let s=!0;return _==="always"||_!=="never"&&r!=="never"||(s=!1),s}class Bt{constructor(r,s,f){const y=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(s/f);for(let T=0;T<this.xCellCount*this.yCellCount;T++)y.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=s,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,s,f,y,x){this._forEachCell(s,f,y,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(s),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(x)}insertCircle(r,s,f,y){this._forEachCell(s-y,f-y,s+y,f+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(s),this.circles.push(f),this.circles.push(y)}_insertBoxCell(r,s,f,y,x,T){this.boxCells[x].push(T)}_insertCircleCell(r,s,f,y,x,T){this.circleCells[x].push(T)}_query(r,s,f,y,x,T,k){if(f<0||r>this.width||y<0||s>this.height)return[];const O=[];if(r<=0&&s<=0&&this.width<=f&&this.height<=y){if(x)return[{key:null,x1:r,y1:s,x2:f,y2:y}];for(let N=0;N<this.boxKeys.length;N++)O.push({key:this.boxKeys[N],x1:this.bboxes[4*N],y1:this.bboxes[4*N+1],x2:this.bboxes[4*N+2],y2:this.bboxes[4*N+3]});for(let N=0;N<this.circleKeys.length;N++){const $=this.circles[3*N],W=this.circles[3*N+1],q=this.circles[3*N+2];O.push({key:this.circleKeys[N],x1:$-q,y1:W-q,x2:$+q,y2:W+q})}}else this._forEachCell(r,s,f,y,this._queryCell,O,{hitTest:x,overlapMode:T,seenUids:{box:{},circle:{}}},k);return O}query(r,s,f,y){return this._query(r,s,f,y,!1,null)}hitTest(r,s,f,y,x,T){return this._query(r,s,f,y,!0,x,T).length>0}hitTestCircle(r,s,f,y,x){const T=r-f,k=r+f,O=s-f,N=s+f;if(k<0||T>this.width||N<0||O>this.height)return!1;const $=[];return this._forEachCell(T,O,k,N,this._queryCellCircle,$,{hitTest:!0,overlapMode:y,circle:{x:r,y:s,radius:f},seenUids:{box:{},circle:{}}},x),$.length>0}_queryCell(r,s,f,y,x,T,k,O){const{seenUids:N,hitTest:$,overlapMode:W}=k,q=this.boxCells[x];if(q!==null){const re=this.bboxes;for(const ue of q)if(!N.box[ue]){N.box[ue]=!0;const de=4*ue,pe=this.boxKeys[ue];if(r<=re[de+2]&&s<=re[de+3]&&f>=re[de+0]&&y>=re[de+1]&&(!O||O(pe))&&(!$||!At(W,pe.overlapMode))&&(T.push({key:pe,x1:re[de],y1:re[de+1],x2:re[de+2],y2:re[de+3]}),$))return!0}}const K=this.circleCells[x];if(K!==null){const re=this.circles;for(const ue of K)if(!N.circle[ue]){N.circle[ue]=!0;const de=3*ue,pe=this.circleKeys[ue];if(this._circleAndRectCollide(re[de],re[de+1],re[de+2],r,s,f,y)&&(!O||O(pe))&&(!$||!At(W,pe.overlapMode))){const me=re[de],we=re[de+1],ye=re[de+2];if(T.push({key:pe,x1:me-ye,y1:we-ye,x2:me+ye,y2:we+ye}),$)return!0}}}return!1}_queryCellCircle(r,s,f,y,x,T,k,O){const{circle:N,seenUids:$,overlapMode:W}=k,q=this.boxCells[x];if(q!==null){const re=this.bboxes;for(const ue of q)if(!$.box[ue]){$.box[ue]=!0;const de=4*ue,pe=this.boxKeys[ue];if(this._circleAndRectCollide(N.x,N.y,N.radius,re[de+0],re[de+1],re[de+2],re[de+3])&&(!O||O(pe))&&!At(W,pe.overlapMode))return T.push(!0),!0}}const K=this.circleCells[x];if(K!==null){const re=this.circles;for(const ue of K)if(!$.circle[ue]){$.circle[ue]=!0;const de=3*ue,pe=this.circleKeys[ue];if(this._circlesCollide(re[de],re[de+1],re[de+2],N.x,N.y,N.radius)&&(!O||O(pe))&&!At(W,pe.overlapMode))return T.push(!0),!0}}}_forEachCell(r,s,f,y,x,T,k,O){const N=this._convertToXCellCoord(r),$=this._convertToYCellCoord(s),W=this._convertToXCellCoord(f),q=this._convertToYCellCoord(y);for(let K=N;K<=W;K++)for(let re=$;re<=q;re++)if(x.call(this,r,s,f,y,this.xCellCount*re+K,T,k,O))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,s,f,y,x,T){const k=y-r,O=x-s,N=f+T;return N*N>k*k+O*O}_circleAndRectCollide(r,s,f,y,x,T,k){const O=(T-y)/2,N=Math.abs(r-(y+O));if(N>O+f)return!1;const $=(k-x)/2,W=Math.abs(s-(x+$));if(W>$+f)return!1;if(N<=O||W<=$)return!0;const q=N-O,K=W-$;return q*q+K*K<=f*f}}function Yt(_,r,s){const f=o.L();if(!_){const{vecSouth:W,vecEast:q}=Ar(r),K=E();K[0]=q[0],K[1]=q[1],K[2]=W[0],K[3]=W[1],y=K,($=(T=(x=K)[0])*(N=x[3])-(O=x[2])*(k=x[1]))&&(y[0]=N*($=1/$),y[1]=-k*$,y[2]=-O*$,y[3]=T*$),f[0]=K[0],f[1]=K[1],f[4]=K[2],f[5]=K[3]}var y,x,T,k,O,N,$;return o.N(f,f,[1/s,1/s,1]),f}function Wr(_,r,s,f){if(_){const y=o.L();if(!r){const{vecSouth:x,vecEast:T}=Ar(s);y[0]=T[0],y[1]=T[1],y[4]=x[0],y[5]=x[1]}return o.N(y,y,[f,f,1]),y}return s.pixelsToClipSpaceMatrix}function Ar(_){const r=Math.cos(_.rollInRadians),s=Math.sin(_.rollInRadians),f=Math.cos(_.pitchInRadians),y=Math.cos(_.bearingInRadians),x=Math.sin(_.bearingInRadians),T=o.aq();T[0]=-y*f*s-x*r,T[1]=-x*f*s+y*r;const k=o.ar(T);k<1e-9?o.as(T):o.at(T,T,1/k);const O=o.aq();O[0]=y*f*r-x*s,O[1]=x*f*r+y*s;const N=o.ar(O);return N<1e-9?o.as(O):o.at(O,O,1/N),{vecEast:O,vecSouth:T}}function kr(_,r,s,f){let y;f?(y=[_,r,f(_,r),1],o.av(y,y,s)):(y=[_,r,0,1],el(y,y,s));const x=y[3];return{point:new o.P(y[0]/x,y[1]/x),signedDistanceFromCamera:x,isOccluded:!1}}function Zt(_,r){return .5+_/r*.5}function xr(_,r){return _.x>=-r[0]&&_.x<=r[0]&&_.y>=-r[1]&&_.y<=r[1]}function Tn(_,r,s,f,y,x,T,k,O,N,$,W,q){const K=s?_.textSizeData:_.iconSizeData,re=o.am(K,r.transform.zoom),ue=[256/r.width*2+1,256/r.height*2+1],de=s?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;de.clear();const pe=_.lineVertexArray,me=s?_.text.placedSymbolArray:_.icon.placedSymbolArray,we=r.transform.width/r.transform.height;let ye=!1;for(let Te=0;Te<me.length;Te++){const Ee=me.get(Te);if(Ee.hidden||Ee.writingMode===o.an.vertical&&!ye){Eo(Ee.numGlyphs,de);continue}ye=!1;const ve=new o.P(Ee.anchorX,Ee.anchorY),De={getElevation:q,pitchedLabelPlaneMatrix:f,lineVertexArray:pe,pitchWithMap:x,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:ve,unwrappedTileID:O,width:N,height:$,translation:W},Ue=yr(Ee.anchorX,Ee.anchorY,De);if(!xr(Ue.point,ue)){Eo(Ee.numGlyphs,de);continue}const Ve=Zt(r.transform.cameraToCenterDistance,Ue.signedDistanceFromCamera),Ge=o.ao(K,re,Ee),He=x?Ge*r.transform.getPitchedTextCorrection(Ee.anchorX,Ee.anchorY,O)/Ve:Ge*Ve,_t=cn({projectionContext:De,pitchedLabelPlaneMatrixInverse:y,symbol:Ee,fontSize:He,flip:!1,keepUpright:T,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:de,aspectRatio:we,rotateToLine:k});ye=_t.useVertical,(_t.notEnoughRoom||ye||_t.needsFlipping&&cn({projectionContext:De,pitchedLabelPlaneMatrixInverse:y,symbol:Ee,fontSize:He,flip:!0,keepUpright:T,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:de,aspectRatio:we,rotateToLine:k}).notEnoughRoom)&&Eo(Ee.numGlyphs,de)}s?_.text.dynamicLayoutVertexBuffer.updateData(de):_.icon.dynamicLayoutVertexBuffer.updateData(de)}function ft(_,r,s,f,y,x,T,k){const O=x.glyphStartIndex+x.numGlyphs,N=x.lineStartIndex,$=x.lineStartIndex+x.lineLength,W=r.getoffsetX(x.glyphStartIndex),q=r.getoffsetX(O-1),K=Ba(_*W,s,f,y,x.segment,N,$,k,T);if(!K)return null;const re=Ba(_*q,s,f,y,x.segment,N,$,k,T);return re?k.projectionCache.anyProjectionOccluded?null:{first:K,last:re}:null}function ni(_,r,s,f){return _===o.an.horizontal&&Math.abs(s.y-r.y)>Math.abs(s.x-r.x)*f?{useVertical:!0}:(_===o.an.vertical?r.y<s.y:r.x>s.x)?{needsFlipping:!0}:null}function cn(_){const{projectionContext:r,pitchedLabelPlaneMatrixInverse:s,symbol:f,fontSize:y,flip:x,keepUpright:T,glyphOffsetArray:k,dynamicLayoutVertexArray:O,aspectRatio:N,rotateToLine:$}=_,W=y/24,q=f.lineOffsetX*W,K=f.lineOffsetY*W;let re;if(f.numGlyphs>1){const ue=f.glyphStartIndex+f.numGlyphs,de=f.lineStartIndex,pe=f.lineStartIndex+f.lineLength,me=ft(W,k,q,K,x,f,$,r);if(!me)return{notEnoughRoom:!0};const we=fr(me.first.point.x,me.first.point.y,r,s),ye=fr(me.last.point.x,me.last.point.y,r,s);if(T&&!x){const Te=ni(f.writingMode,we,ye,N);if(Te)return Te}re=[me.first];for(let Te=f.glyphStartIndex+1;Te<ue-1;Te++){const Ee=Ba(W*k.getoffsetX(Te),q,K,x,f.segment,de,pe,r,$);if(!Ee)return{notEnoughRoom:!0};re.push(Ee)}re.push(me.last)}else{if(T&&!x){const de=bt(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,pe=f.lineStartIndex+f.segment+1,me=new o.P(r.lineVertexArray.getx(pe),r.lineVertexArray.gety(pe)),we=bt(me.x,me.y,r),ye=we.signedDistanceFromCamera>0?we.point:ls(r.tileAnchorPoint,me,de,1,r),Te=fr(de.x,de.y,r,s),Ee=fr(ye.x,ye.y,r,s),ve=ni(f.writingMode,Te,Ee,N);if(ve)return ve}const ue=Ba(W*k.getoffsetX(f.glyphStartIndex),q,K,x,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,r,$);if(!ue||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};re=[ue]}for(const ue of re)o.au(O,ue.point,ue.angle);return{}}function ls(_,r,s,f,y){const x=_.add(_.sub(r)._unit()),T=bt(x.x,x.y,y).point,k=s.sub(T);return s.add(k._mult(f/k.mag()))}function ua(_,r,s){const f=r.projectionCache;if(f.projections[_])return f.projections[_];const y=new o.P(r.lineVertexArray.getx(_),r.lineVertexArray.gety(_)),x=bt(y.x,y.y,r);if(x.signedDistanceFromCamera>0)return f.projections[_]=x.point,f.anyProjectionOccluded=f.anyProjectionOccluded||x.isOccluded,x.point;const T=_-s.direction;return ls(s.distanceFromAnchor===0?r.tileAnchorPoint:new o.P(r.lineVertexArray.getx(T),r.lineVertexArray.gety(T)),y,s.previousVertex,s.absOffsetX-s.distanceFromAnchor+1,r)}function bt(_,r,s){const f=_+s.translation[0],y=r+s.translation[1];let x;return s.pitchWithMap?(x=kr(f,y,s.pitchedLabelPlaneMatrix,s.getElevation),x.isOccluded=!1):(x=s.transform.projectTileCoordinates(f,y,s.unwrappedTileID,s.getElevation),x.point.x=(.5*x.point.x+.5)*s.width,x.point.y=(.5*-x.point.y+.5)*s.height),x}function fr(_,r,s,f){if(s.pitchWithMap){const y=[_,r,0,1];return o.av(y,y,f),s.transform.projectTileCoordinates(y[0]/y[3],y[1]/y[3],s.unwrappedTileID,s.getElevation).point}return{x:_/s.width*2-1,y:r/s.height*2-1}}function yr(_,r,s){return s.transform.projectTileCoordinates(_,r,s.unwrappedTileID,s.getElevation)}function Gi(_,r,s){return _._unit()._perp()._mult(r*s)}function Nu(_,r,s,f,y,x,T,k,O){if(k.projectionCache.offsets[_])return k.projectionCache.offsets[_];const N=s.add(r);if(_+O.direction<f||_+O.direction>=y)return k.projectionCache.offsets[_]=N,N;const $=ua(_+O.direction,k,O),W=Gi($.sub(s),T,O.direction),q=s.add(W),K=$.add(W);return k.projectionCache.offsets[_]=o.aw(x,N,q,K)||N,k.projectionCache.offsets[_]}function Ba(_,r,s,f,y,x,T,k,O){const N=f?_-r:_+r;let $=N>0?1:-1,W=0;f&&($*=-1,W=Math.PI),$<0&&(W+=Math.PI);let q,K=$>0?x+y:x+y+1;k.projectionCache.cachedAnchorPoint?q=k.projectionCache.cachedAnchorPoint:(q=bt(k.tileAnchorPoint.x,k.tileAnchorPoint.y,k).point,k.projectionCache.cachedAnchorPoint=q);let re,ue,de=q,pe=q,me=0,we=0;const ye=Math.abs(N),Te=[];let Ee;for(;me+we<=ye;){if(K+=$,K<x||K>=T)return null;me+=we,pe=de,ue=re;const Ue={absOffsetX:ye,direction:$,distanceFromAnchor:me,previousVertex:pe};if(de=ua(K,k,Ue),s===0)Te.push(pe),Ee=de.sub(pe);else{let Ve;const Ge=de.sub(pe);Ve=Ge.mag()===0?Gi(ua(K+$,k,Ue).sub(de),s,$):Gi(Ge,s,$),ue||(ue=pe.add(Ve)),re=Nu(K,Ve,de,x,T,ue,s,k,Ue),Te.push(ue),Ee=re.sub(ue)}we=Ee.mag()}const ve=Ee._mult((ye-me)/we)._add(ue||pe),De=W+Math.atan2(de.y-pe.y,de.x-pe.x);return Te.push(ve),{point:ve,angle:O?De:0,path:Te}}const pr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Eo(_,r){for(let s=0;s<_;s++){const f=r.length;r.resize(f+4),r.float32.set(pr,3*f)}}function el(_,r,s){const f=r[0],y=r[1];return _[0]=s[0]*f+s[4]*y+s[12],_[1]=s[1]*f+s[5]*y+s[13],_[3]=s[3]*f+s[7]*y+s[15],_}const br=100;class Fu{constructor(r,s=new Bt(r.width+200,r.height+200,25),f=new Bt(r.width+200,r.height+200,25)){this.transform=r,this.grid=s,this.ignoredGrid=f,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+br,this.screenBottomBoundary=r.height+br,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,s,f,y,x,T,k,O,N,$,W,q){const K=this.projectAndGetPerspectiveRatio(r.anchorPointX+O[0],r.anchorPointY+O[1],x,$,q),re=f*K.perspectiveRatio;let ue;if(T||k)ue=this._projectCollisionBox(r,re,y,x,T,k,O,K,$,W,q);else{const Ee=K.x+(W?W.x*re:0),ve=K.y+(W?W.y*re:0);ue={allPointsOccluded:!1,box:[Ee+r.x1*re,ve+r.y1*re,Ee+r.x2*re,ve+r.y2*re]}}const[de,pe,me,we]=ue.box,ye=T?ue.allPointsOccluded:K.isOccluded;let Te=ye;return Te||(Te=K.perspectiveRatio<this.perspectiveRatioCutoff),Te||(Te=!this.isInsideGrid(de,pe,me,we)),Te||s!=="always"&&this.grid.hitTest(de,pe,me,we,s,N)?{box:[de,pe,me,we],placeable:!1,offscreen:!1,occluded:ye}:{box:[de,pe,me,we],placeable:!0,offscreen:this.isOffscreen(de,pe,me,we),occluded:ye}}placeCollisionCircles(r,s,f,y,x,T,k,O,N,$,W,q,K,re){const ue=[],de=new o.P(s.anchorX,s.anchorY),pe=this.getPerspectiveRatio(de.x,de.y,T,re),me=(N?x*this.transform.getPitchedTextCorrection(s.anchorX,s.anchorY,T)/pe:x*pe)/o.aA,we={getElevation:re,pitchedLabelPlaneMatrix:k,lineVertexArray:f,pitchWithMap:N,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:de,unwrappedTileID:T,width:this.transform.width,height:this.transform.height,translation:K},ye=ft(me,y,s.lineOffsetX*me,s.lineOffsetY*me,!1,s,!1,we);let Te=!1,Ee=!1,ve=!0;if(ye){const De=.5*W*pe+q,Ue=new o.P(-100,-100),Ve=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Ge=new Kt,He=ye.first,_t=ye.last;let gt=[];for(let dr=He.path.length-1;dr>=1;dr--)gt.push(He.path[dr]);for(let dr=1;dr<_t.path.length;dr++)gt.push(_t.path[dr]);const it=2.5*De;if(N){const dr=this.projectPathToScreenSpace(gt,we);gt=dr.some(Or=>Or.signedDistanceFromCamera<=0)?[]:dr.map(Or=>Or.point)}let Ot=[];if(gt.length>0){const dr=gt[0].clone(),Or=gt[0].clone();for(let ln=1;ln<gt.length;ln++)dr.x=Math.min(dr.x,gt[ln].x),dr.y=Math.min(dr.y,gt[ln].y),Or.x=Math.max(Or.x,gt[ln].x),Or.y=Math.max(Or.y,gt[ln].y);Ot=dr.x>=Ue.x&&Or.x<=Ve.x&&dr.y>=Ue.y&&Or.y<=Ve.y?[gt]:Or.x<Ue.x||dr.x>Ve.x||Or.y<Ue.y||dr.y>Ve.y?[]:o.ax([gt],Ue.x,Ue.y,Ve.x,Ve.y)}for(const dr of Ot){Ge.reset(dr,.25*De);let Or=0;Or=Ge.length<=.5*De?1:Math.ceil(Ge.paddedLength/it)+1;for(let ln=0;ln<Or;ln++){const Gr=ln/Math.max(Or-1,1),Xr=Ge.lerp(Gr),Kr=Xr.x+br,Nr=Xr.y+br;ue.push(Kr,Nr,De,0);const $r=Kr-De,Xn=Nr-De,Er=Kr+De,Vn=Nr+De;if(ve=ve&&this.isOffscreen($r,Xn,Er,Vn),Ee=Ee||this.isInsideGrid($r,Xn,Er,Vn),r!=="always"&&this.grid.hitTestCircle(Kr,Nr,De,r,$)&&(Te=!0,!O))return{circles:[],offscreen:!1,collisionDetected:Te}}}}return{circles:!O&&Te||!Ee||pe<this.perspectiveRatioCutoff?[]:ue,offscreen:ve,collisionDetected:Te}}projectPathToScreenSpace(r,s){const f=function(y,x){const T=o.L();return o.ap(T,x.pitchedLabelPlaneMatrix),y.map(k=>{const O=kr(k.x,k.y,T,x.getElevation),N=x.transform.projectTileCoordinates(O.point.x,O.point.y,x.unwrappedTileID,x.getElevation);return N.point.x=(.5*N.point.x+.5)*x.width,N.point.y=(.5*-N.point.y+.5)*x.height,N})}(r,s);return function(y){let x=0,T=0,k=0,O=0;for(let N=0;N<y.length;N++)y[N].isOccluded?(k=N+1,O=0):(O++,O>T&&(T=O,x=k));return y.slice(x,x+T)}(f)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const s=[],f=new o.a1;for(const W of r){const q=new o.P(W.x+br,W.y+br);f.extend(q),s.push(q)}const{minX:y,minY:x,maxX:T,maxY:k}=f,O=this.grid.query(y,x,T,k).concat(this.ignoredGrid.query(y,x,T,k)),N={},$={};for(const W of O){const q=W.key;if(N[q.bucketInstanceId]===void 0&&(N[q.bucketInstanceId]={}),N[q.bucketInstanceId][q.featureIndex])continue;const K=[new o.P(W.x1,W.y1),new o.P(W.x2,W.y1),new o.P(W.x2,W.y2),new o.P(W.x1,W.y2)];o.ay(s,K)&&(N[q.bucketInstanceId][q.featureIndex]=!0,$[q.bucketInstanceId]===void 0&&($[q.bucketInstanceId]=[]),$[q.bucketInstanceId].push(q.featureIndex))}return $}insertCollisionBox(r,s,f,y,x,T){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:x,collisionGroupID:T,overlapMode:s},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,s,f,y,x,T){const k=f?this.ignoredGrid:this.grid,O={bucketInstanceId:y,featureIndex:x,collisionGroupID:T,overlapMode:s};for(let N=0;N<r.length;N+=4)k.insertCircle(O,r[N],r[N+1],r[N+2])}projectAndGetPerspectiveRatio(r,s,f,y,x){if(x){let T;y?(T=[r,s,y(r,s),1],o.av(T,T,x)):(T=[r,s,0,1],el(T,T,x));const k=T[3];return{x:(T[0]/k+1)/2*this.transform.width+br,y:(-T[1]/k+1)/2*this.transform.height+br,perspectiveRatio:.5+this.transform.cameraToCenterDistance/k*.5,isOccluded:!1,signedDistanceFromCamera:k}}{const T=this.transform.projectTileCoordinates(r,s,f,y);return{x:(T.point.x+1)/2*this.transform.width+br,y:(1-T.point.y)/2*this.transform.height+br,perspectiveRatio:.5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5,isOccluded:T.isOccluded,signedDistanceFromCamera:T.signedDistanceFromCamera}}}getPerspectiveRatio(r,s,f,y){const x=this.transform.projectTileCoordinates(r,s,f,y);return .5+this.transform.cameraToCenterDistance/x.signedDistanceFromCamera*.5}isOffscreen(r,s,f,y){return f<br||r>=this.screenRightBoundary||y<br||s>this.screenBottomBoundary}isInsideGrid(r,s,f,y){return f>=0&&r<this.gridRightBoundary&&y>=0&&s<this.gridBottomBoundary}getViewportMatrix(){const r=o.af([]);return o.M(r,r,[-100,-100,0]),r}_projectCollisionBox(r,s,f,y,x,T,k,O,N,$,W){let q=1,K=0,re=0,ue=1;const de=r.anchorPointX+k[0],pe=r.anchorPointY+k[1];if(T&&!x){const gt=this.projectAndGetPerspectiveRatio(de+1,pe,y,N,W),it=gt.x-O.x,Ot=Math.atan((gt.y-O.y)/it)+(it<0?Math.PI:0),dr=Math.sin(Ot),Or=Math.cos(Ot);q=Or,K=dr,re=-dr,ue=Or}else if(!T&&x){const gt=Ar(this.transform);q=gt.vecEast[0],K=gt.vecEast[1],re=gt.vecSouth[0],ue=gt.vecSouth[1]}let me=O.x,we=O.y,ye=s;x&&(me=de,we=pe,ye=Math.pow(2,-(this.transform.zoom-f.overscaledZ)),ye*=this.transform.getPitchedTextCorrection(de,pe,y),$||(ye*=o.ag(.5+O.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),$&&(me+=q*$.x*ye+re*$.y*ye,we+=K*$.x*ye+ue*$.y*ye);const Te=r.x1*ye,Ee=r.x2*ye,ve=(Te+Ee)/2,De=r.y1*ye,Ue=r.y2*ye,Ve=(De+Ue)/2,Ge=[{offsetX:Te,offsetY:De},{offsetX:ve,offsetY:De},{offsetX:Ee,offsetY:De},{offsetX:Ee,offsetY:Ve},{offsetX:Ee,offsetY:Ue},{offsetX:ve,offsetY:Ue},{offsetX:Te,offsetY:Ue},{offsetX:Te,offsetY:Ve}];let He=[];for(const{offsetX:gt,offsetY:it}of Ge)He.push(new o.P(me+q*gt+re*it,we+K*gt+ue*it));let _t=!1;if(x){const gt=He.map(it=>this.projectAndGetPerspectiveRatio(it.x,it.y,y,N,W));_t=gt.some(it=>!it.isOccluded),He=gt.map(it=>new o.P(it.x,it.y))}else _t=!0;return{box:o.az(He),allPointsOccluded:!_t}}}class tl{constructor(r,s,f,y){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?s:-s))):y&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class ao{constructor(r,s,f,y,x){this.text=new tl(r?r.text:null,s,f,x),this.icon=new tl(r?r.icon:null,s,y,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class us{constructor(r,s,f){this.text=r,this.icon=s,this.skipFade=f}}class ca{constructor(r,s,f,y,x){this.bucketInstanceId=r,this.featureIndex=s,this.sourceLayerIndex=f,this.bucketIndex=y,this.tileID=x}}class nn{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const s=++this.maxGroupID;this.collisionGroups[r]={ID:s,predicate:f=>f.collisionGroupID===s}}return this.collisionGroups[r]}}function Bu(_,r,s,f,y){const{horizontalAlign:x,verticalAlign:T}=o.aG(_);return new o.P(-(x-.5)*r+f[0]*y,-(T-.5)*s+f[1]*y)}class qi{constructor(r,s,f,y,x){this.transform=r.clone(),this.terrain=s,this.collisionIndex=new Fu(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new nn(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const s=this.terrain;return s?(f,y)=>s.getElevation(r,f,y):null}getBucketParts(r,s,f,y){const x=f.getBucket(s),T=f.latestFeatureIndex;if(!x||!T||s.id!==x.layerIds[0])return;const k=f.collisionBoxArray,O=x.layers[0].layout,N=x.layers[0].paint,$=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),W=f.tileSize/o.$,q=f.tileID.toUnwrapped(),K=O.get("text-rotation-alignment")==="map",re=o.aB(f,1,this.transform.zoom),ue=o.aC(this.collisionIndex.transform,f,N.get("text-translate"),N.get("text-translate-anchor")),de=o.aC(this.collisionIndex.transform,f,N.get("icon-translate"),N.get("icon-translate-anchor")),pe=Yt(K,this.transform,re);this.retainedQueryData[x.bucketInstanceId]=new ca(x.bucketInstanceId,T,x.sourceLayerIndex,x.index,f.tileID);const me={bucket:x,layout:O,translationText:ue,translationIcon:de,unwrappedTileID:q,pitchedLabelPlaneMatrix:pe,scale:$,textPixelRatio:W,holdingForFade:f.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:o.am(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(y)for(const we of x.sortKeyRanges){const{sortKey:ye,symbolInstanceStart:Te,symbolInstanceEnd:Ee}=we;r.push({sortKey:ye,symbolInstanceStart:Te,symbolInstanceEnd:Ee,parameters:me})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:me})}attemptAnchorPlacement(r,s,f,y,x,T,k,O,N,$,W,q,K,re,ue,de,pe,me,we,ye){const Te=o.aD[r.textAnchor],Ee=[r.textOffset0,r.textOffset1],ve=Bu(Te,f,y,Ee,x),De=this.collisionIndex.placeCollisionBox(s,q,O,N,$,k,T,de,W.predicate,we,ve,ye);if((!me||this.collisionIndex.placeCollisionBox(me,q,O,N,$,k,T,pe,W.predicate,we,ve,ye).placeable)&&De.placeable){let Ue;if(this.prevPlacement&&this.prevPlacement.variableOffsets[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID].text&&(Ue=this.prevPlacement.variableOffsets[K.crossTileID].anchor),K.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[K.crossTileID]={textOffset:Ee,width:f,height:y,anchor:Te,textBoxScale:x,prevAnchor:Ue},this.markUsedJustification(re,Te,K,ue),re.allowVerticalPlacement&&(this.markUsedOrientation(re,ue,K),this.placedOrientations[K.crossTileID]=ue),{shift:ve,placedGlyphBoxes:De}}}placeLayerBucketPart(r,s,f){const{bucket:y,layout:x,translationText:T,translationIcon:k,unwrappedTileID:O,pitchedLabelPlaneMatrix:N,textPixelRatio:$,holdingForFade:W,collisionBoxArray:q,partiallyEvaluatedTextSize:K,collisionGroup:re}=r.parameters,ue=x.get("text-optional"),de=x.get("icon-optional"),pe=o.aE(x,"text-overlap","text-allow-overlap"),me=pe==="always",we=o.aE(x,"icon-overlap","icon-allow-overlap"),ye=we==="always",Te=x.get("text-rotation-alignment")==="map",Ee=x.get("text-pitch-alignment")==="map",ve=x.get("icon-text-fit")!=="none",De=x.get("symbol-z-order")==="viewport-y",Ue=me&&(ye||!y.hasIconData()||de),Ve=ye&&(me||!y.hasTextData()||ue);!y.collisionArrays&&q&&y.deserializeCollisionBoxes(q);const Ge=this.retainedQueryData[y.bucketInstanceId].tileID,He=this._getTerrainElevationFunc(Ge),_t=this.transform.getFastPathSimpleProjectionMatrix(Ge),gt=(it,Ot,dr)=>{var Or,ln;if(s[it.crossTileID])return;if(W)return void(this.placements[it.crossTileID]=new us(!1,!1,!1));let Gr=!1,Xr=!1,Kr=!0,Nr=null,$r={box:null,placeable:!1,offscreen:null,occluded:!1},Xn={placeable:!1},Er=null,Vn=null,Yn=null,No=0,Fo=0,yo=0;Ot.textFeatureIndex?No=Ot.textFeatureIndex:it.useRuntimeCollisionCircles&&(No=it.featureIndex),Ot.verticalTextFeatureIndex&&(Fo=Ot.verticalTextFeatureIndex);const Ka=Ot.textBox;if(Ka){const Li=mn=>{let en=o.an.horizontal;if(y.allowVerticalPlacement&&!mn&&this.prevPlacement){const Qn=this.prevPlacement.placedOrientations[it.crossTileID];Qn&&(this.placedOrientations[it.crossTileID]=Qn,en=Qn,this.markUsedOrientation(y,en,it))}return en},Xa=(mn,en)=>{if(y.allowVerticalPlacement&&it.numVerticalGlyphVertices>0&&Ot.verticalTextBox){for(const Qn of y.writingModes)if(Qn===o.an.vertical?($r=en(),Xn=$r):$r=mn(),$r&&$r.placeable)break}else $r=mn()},Ds=it.textAnchorOffsetStartIndex,Os=it.textAnchorOffsetEndIndex;if(Os===Ds){const mn=(en,Qn)=>{const Un=this.collisionIndex.placeCollisionBox(en,pe,$,Ge,O,Ee,Te,T,re.predicate,He,void 0,_t);return Un&&Un.placeable&&(this.markUsedOrientation(y,Qn,it),this.placedOrientations[it.crossTileID]=Qn),Un};Xa(()=>mn(Ka,o.an.horizontal),()=>{const en=Ot.verticalTextBox;return y.allowVerticalPlacement&&it.numVerticalGlyphVertices>0&&en?mn(en,o.an.vertical):{box:null,offscreen:null}}),Li($r&&$r.placeable)}else{let mn=o.aD[(ln=(Or=this.prevPlacement)===null||Or===void 0?void 0:Or.variableOffsets[it.crossTileID])===null||ln===void 0?void 0:ln.anchor];const en=(Un,Wf,om)=>{const ga=Un.x2-Un.x1,Pl=Un.y2-Un.y1,Bo=it.textBoxScale,vo=ve&&we==="never"?Wf:null;let Jn=null,_o=pe==="never"?1:2,bc="never";mn&&_o++;for(let ya=0;ya<_o;ya++){for(let wc=Ds;wc<Os;wc++){const Sc=y.textAnchorOffsets.get(wc);if(mn&&Sc.textAnchor!==mn)continue;const Pc=this.attemptAnchorPlacement(Sc,Un,ga,Pl,Bo,Te,Ee,$,Ge,O,re,bc,it,y,om,T,k,vo,He);if(Pc&&(Jn=Pc.placedGlyphBoxes,Jn&&Jn.placeable))return Gr=!0,Nr=Pc.shift,Jn}mn?mn=null:bc=pe}return f&&!Jn&&(Jn={box:this.collisionIndex.placeCollisionBox(Ka,"always",$,Ge,O,Ee,Te,T,re.predicate,He,void 0,_t).box,offscreen:!1,placeable:!1,occluded:!1}),Jn};Xa(()=>en(Ka,Ot.iconBox,o.an.horizontal),()=>{const Un=Ot.verticalTextBox;return y.allowVerticalPlacement&&(!$r||!$r.placeable)&&it.numVerticalGlyphVertices>0&&Un?en(Un,Ot.verticalIconBox,o.an.vertical):{box:null,occluded:!0,offscreen:null}}),$r&&(Gr=$r.placeable,Kr=$r.offscreen);const Qn=Li($r&&$r.placeable);if(!Gr&&this.prevPlacement){const Un=this.prevPlacement.variableOffsets[it.crossTileID];Un&&(this.variableOffsets[it.crossTileID]=Un,this.markUsedJustification(y,Un.anchor,it,Qn))}}}if(Er=$r,Gr=Er&&Er.placeable,Kr=Er&&Er.offscreen,it.useRuntimeCollisionCircles){const Li=y.text.placedSymbolArray.get(it.centerJustifiedTextSymbolIndex),Xa=o.ao(y.textSizeData,K,Li),Ds=x.get("text-padding");Vn=this.collisionIndex.placeCollisionCircles(pe,Li,y.lineVertexArray,y.glyphOffsetArray,Xa,O,N,f,Ee,re.predicate,it.collisionCircleDiameter,Ds,T,He),Vn.circles.length&&Vn.collisionDetected&&!f&&o.w("Collisions detected, but collision boxes are not shown"),Gr=me||Vn.circles.length>0&&!Vn.collisionDetected,Kr=Kr&&Vn.offscreen}if(Ot.iconFeatureIndex&&(yo=Ot.iconFeatureIndex),Ot.iconBox){const Li=Xa=>this.collisionIndex.placeCollisionBox(Xa,we,$,Ge,O,Ee,Te,k,re.predicate,He,ve&&Nr?Nr:void 0,_t);Xn&&Xn.placeable&&Ot.verticalIconBox?(Yn=Li(Ot.verticalIconBox),Xr=Yn.placeable):(Yn=Li(Ot.iconBox),Xr=Yn.placeable),Kr=Kr&&Yn.offscreen}const mu=ue||it.numHorizontalGlyphVertices===0&&it.numVerticalGlyphVertices===0,gu=de||it.numIconVertices===0;mu||gu?gu?mu||(Xr=Xr&&Gr):Gr=Xr&&Gr:Xr=Gr=Xr&&Gr;const yu=Xr&&Yn.placeable;if(Gr&&Er.placeable&&this.collisionIndex.insertCollisionBox(Er.box,pe,x.get("text-ignore-placement"),y.bucketInstanceId,Xn&&Xn.placeable&&Fo?Fo:No,re.ID),yu&&this.collisionIndex.insertCollisionBox(Yn.box,we,x.get("icon-ignore-placement"),y.bucketInstanceId,yo,re.ID),Vn&&Gr&&this.collisionIndex.insertCollisionCircles(Vn.circles,pe,x.get("text-ignore-placement"),y.bucketInstanceId,No,re.ID),f&&this.storeCollisionData(y.bucketInstanceId,dr,Ot,Er,Yn,Vn),it.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[it.crossTileID]=new us((Gr||Ue)&&!Er?.occluded,(Xr||Ve)&&!Yn?.occluded,Kr||y.justReloaded),s[it.crossTileID]=!0};if(De){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const it=y.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Ot=it.length-1;Ot>=0;--Ot){const dr=it[Ot];gt(y.symbolInstances.get(dr),y.collisionArrays[dr],dr)}}else for(let it=r.symbolInstanceStart;it<r.symbolInstanceEnd;it++)gt(y.symbolInstances.get(it),y.collisionArrays[it],it);y.justReloaded=!1}storeCollisionData(r,s,f,y,x,T){if(f.textBox||f.iconBox){let k,O;this.collisionBoxArrays.has(r)?k=this.collisionBoxArrays.get(r):(k=new Map,this.collisionBoxArrays.set(r,k)),k.has(s)?O=k.get(s):(O={text:null,icon:null},k.set(s,O)),f.textBox&&(O.text=y.box),f.iconBox&&(O.icon=x.box)}if(T){let k=this.collisionCircleArrays[r];k===void 0&&(k=this.collisionCircleArrays[r]=[]);for(let O=0;O<T.circles.length;O+=4)k.push(T.circles[O+0]-br),k.push(T.circles[O+1]-br),k.push(T.circles[O+2]),k.push(T.collisionDetected?1:0)}}markUsedJustification(r,s,f,y){let x;x=y===o.an.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[o.aF(s)];const T=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const k of T)k>=0&&(r.text.placedSymbolArray.get(k).crossTileID=x>=0&&k!==x?0:f.crossTileID)}markUsedOrientation(r,s,f){const y=s===o.an.horizontal||s===o.an.horizontalOnly?s:0,x=s===o.an.vertical?s:0,T=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const k of T)r.text.placedSymbolArray.get(k).placedOrientation=y;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const s=this.prevPlacement;let f=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;const y=s?s.symbolFadeChange(r):1,x=s?s.opacities:{},T=s?s.variableOffsets:{},k=s?s.placedOrientations:{};for(const O in this.placements){const N=this.placements[O],$=x[O];$?(this.opacities[O]=new ao($,y,N.text,N.icon),f=f||N.text!==$.text.placed||N.icon!==$.icon.placed):(this.opacities[O]=new ao(null,y,N.text,N.icon,N.skipFade),f=f||N.text||N.icon)}for(const O in x){const N=x[O];if(!this.opacities[O]){const $=new ao(N,y,!1,!1);$.isHidden()||(this.opacities[O]=$,f=f||N.text.placed||N.icon.placed)}}for(const O in T)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=T[O]);for(const O in k)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=k[O]);if(s&&s.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:r)}updateLayerOpacities(r,s){const f={};for(const y of s){const x=y.getBucket(r);x&&y.latestFeatureIndex&&r.id===x.layerIds[0]&&this.updateBucketOpacities(x,y.tileID,f,y.collisionBoxArray)}}updateBucketOpacities(r,s,f,y){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const x=r.layers[0],T=x.layout,k=new ao(null,0,!1,!1,!0),O=T.get("text-allow-overlap"),N=T.get("icon-allow-overlap"),$=x._unevaluatedLayout.hasValue("text-variable-anchor")||x._unevaluatedLayout.hasValue("text-variable-anchor-offset"),W=T.get("text-rotation-alignment")==="map",q=T.get("text-pitch-alignment")==="map",K=T.get("icon-text-fit")!=="none",re=new ao(null,0,O&&(N||!r.hasIconData()||T.get("icon-optional")),N&&(O||!r.hasTextData()||T.get("text-optional")),!0);!r.collisionArrays&&y&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(y);const ue=(pe,me,we)=>{for(let ye=0;ye<me/4;ye++)pe.opacityVertexArray.emplaceBack(we);pe.hasVisibleVertices=pe.hasVisibleVertices||we!==Uu},de=this.collisionBoxArrays.get(r.bucketInstanceId);for(let pe=0;pe<r.symbolInstances.length;pe++){const me=r.symbolInstances.get(pe),{numHorizontalGlyphVertices:we,numVerticalGlyphVertices:ye,crossTileID:Te}=me;let Ee=this.opacities[Te];f[Te]?Ee=k:Ee||(Ee=re,this.opacities[Te]=Ee),f[Te]=!0;const ve=me.numIconVertices>0,De=this.placedOrientations[me.crossTileID],Ue=De===o.an.vertical,Ve=De===o.an.horizontal||De===o.an.horizontalOnly;if(we>0||ye>0){const He=Vu(Ee.text);ue(r.text,we,Ue?Uu:He),ue(r.text,ye,Ve?Uu:He);const _t=Ee.text.isHidden();[me.rightJustifiedTextSymbolIndex,me.centerJustifiedTextSymbolIndex,me.leftJustifiedTextSymbolIndex].forEach(Ot=>{Ot>=0&&(r.text.placedSymbolArray.get(Ot).hidden=_t||Ue?1:0)}),me.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(me.verticalPlacedTextSymbolIndex).hidden=_t||Ve?1:0);const gt=this.variableOffsets[me.crossTileID];gt&&this.markUsedJustification(r,gt.anchor,me,De);const it=this.placedOrientations[me.crossTileID];it&&(this.markUsedJustification(r,"left",me,it),this.markUsedOrientation(r,it,me))}if(ve){const He=Vu(Ee.icon),_t=!(K&&me.verticalPlacedIconSymbolIndex&&Ue);me.placedIconSymbolIndex>=0&&(ue(r.icon,me.numIconVertices,_t?He:Uu),r.icon.placedSymbolArray.get(me.placedIconSymbolIndex).hidden=Ee.icon.isHidden()),me.verticalPlacedIconSymbolIndex>=0&&(ue(r.icon,me.numVerticalIconVertices,_t?Uu:He),r.icon.placedSymbolArray.get(me.verticalPlacedIconSymbolIndex).hidden=Ee.icon.isHidden())}const Ge=de&&de.has(pe)?de.get(pe):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const He=r.collisionArrays[pe];if(He){let _t=new o.P(0,0);if(He.textBox||He.verticalTextBox){let gt=!0;if($){const it=this.variableOffsets[Te];it?(_t=Bu(it.anchor,it.width,it.height,it.textOffset,it.textBoxScale),W&&_t._rotate(q?-this.transform.bearingInRadians:this.transform.bearingInRadians)):gt=!1}if(He.textBox||He.verticalTextBox){let it;He.textBox&&(it=Ue),He.verticalTextBox&&(it=Ve),ah(r.textCollisionBox.collisionVertexArray,Ee.text.placed,!gt||it,Ge.text,_t.x,_t.y)}}if(He.iconBox||He.verticalIconBox){const gt=!!(!Ve&&He.verticalIconBox);let it;He.iconBox&&(it=gt),He.verticalIconBox&&(it=!gt),ah(r.iconCollisionBox.collisionVertexArray,Ee.icon.placed,it,Ge.icon,K?_t.x:0,K?_t.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,s){const f=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*f>r}setStale(){this.stale=!0}}function ah(_,r,s,f,y,x){f&&f.length!==0||(f=[0,0,0,0]);const T=f[0]-br,k=f[1]-br,O=f[2]-br,N=f[3]-br;_.emplaceBack(r?1:0,s?1:0,y||0,x||0,T,k),_.emplaceBack(r?1:0,s?1:0,y||0,x||0,O,k),_.emplaceBack(r?1:0,s?1:0,y||0,x||0,O,N),_.emplaceBack(r?1:0,s?1:0,y||0,x||0,T,N)}const ii=Math.pow(2,25),cs=Math.pow(2,24),Tf=Math.pow(2,17),Cf=Math.pow(2,16),$u=Math.pow(2,9),Mo=Math.pow(2,8),Vl=Math.pow(2,1);function Vu(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const r=_.placed?1:0,s=Math.floor(127*_.opacity);return s*ii+r*cs+s*Tf+r*Cf+s*$u+r*Mo+s*Vl+r}const Uu=0;class Jp{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,s,f,y,x){const T=this._bucketParts;for(;this._currentTileIndex<r.length;)if(s.getBucketParts(T,y,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((k,O)=>k.sortKey-O.sortKey));this._currentPartIndex<T.length;)if(s.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,x())return!0;return!1}}class oh{constructor(r,s,f,y,x,T,k,O){this.placement=new qi(r,s,T,k,O),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(r,s,f){const y=R.now(),x=()=>!this._forceFullPlacement&&R.now()-y>2;for(;this._currentPlacementIndex>=0;){const T=s[r[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=k)&&(!T.maxzoom||T.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new Jp(T)),this._inProgressLayer.continuePlacement(f[T.source],this.placement,this._showCollisionBoxes,T,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const rl=512/o.$/2;class Gu{constructor(r,s,f){this.tileID=r,this.bucketInstanceId=f,this._symbolsByKey={};const y=new Map;for(let x=0;x<s.length;x++){const T=s.get(x),k=T.key,O=y.get(k);O?O.push(T):y.set(k,[T])}for(const[x,T]of y){const k={positions:T.map(O=>({x:Math.floor(O.anchorX*rl),y:Math.floor(O.anchorY*rl)})),crossTileIDs:T.map(O=>O.crossTileID)};if(k.positions.length>128){const O=new o.aH(k.positions.length,16,Uint16Array);for(const{x:N,y:$}of k.positions)O.add(N,$);O.finish(),delete k.positions,k.index=O}this._symbolsByKey[x]=k}}getScaledCoordinates(r,s){const{x:f,y,z:x}=this.tileID.canonical,{x:T,y:k,z:O}=s.canonical,N=rl/Math.pow(2,O-x),$=(k*o.$+r.anchorY)*N,W=y*o.$*rl;return{x:Math.floor((T*o.$+r.anchorX)*N-f*o.$*rl),y:Math.floor($-W)}}findMatches(r,s,f){const y=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z);for(let x=0;x<r.length;x++){const T=r.get(x);if(T.crossTileID)continue;const k=this._symbolsByKey[T.key];if(!k)continue;const O=this.getScaledCoordinates(T,s);if(k.index){const N=k.index.range(O.x-y,O.y-y,O.x+y,O.y+y).sort();for(const $ of N){const W=k.crossTileIDs[$];if(!f[W]){f[W]=!0,T.crossTileID=W;break}}}else if(k.positions)for(let N=0;N<k.positions.length;N++){const $=k.positions[N],W=k.crossTileIDs[N];if(Math.abs($.x-O.x)<=y&&Math.abs($.y-O.y)<=y&&!f[W]){f[W]=!0,T.crossTileID=W;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class nl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ef{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const s=Math.round((r-this.lng)/360);if(s!==0)for(const f in this.indexes){const y=this.indexes[f],x={};for(const T in y){const k=y[T];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+s),x[k.tileID.key]=k}this.indexes[f]=x}this.lng=r}addBucket(r,s,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let x=0;x<s.symbolInstances.length;x++)s.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const y=this.usedCrossTileIDs[r.overscaledZ];for(const x in this.indexes){const T=this.indexes[x];if(Number(x)>r.overscaledZ)for(const k in T){const O=T[k];O.tileID.isChildOf(r)&&O.findMatches(s.symbolInstances,r,y)}else{const k=T[r.scaledTo(Number(x)).key];k&&k.findMatches(s.symbolInstances,r,y)}}for(let x=0;x<s.symbolInstances.length;x++){const T=s.symbolInstances.get(x);T.crossTileID||(T.crossTileID=f.generate(),y[T.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Gu(r,s.symbolInstances,s.bucketInstanceId),!0}removeBucketCrossTileIDs(r,s){for(const f of s.getCrossTileIDsLists())for(const y of f)delete this.usedCrossTileIDs[r][y]}removeStaleBuckets(r){let s=!1;for(const f in this.indexes){const y=this.indexes[f];for(const x in y)r[y[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,y[x]),delete y[x],s=!0)}return s}}class Ul{constructor(){this.layerIndexes={},this.crossTileIDs=new nl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,s,f){let y=this.layerIndexes[r.id];y===void 0&&(y=this.layerIndexes[r.id]=new Ef);let x=!1;const T={};y.handleWrapJump(f);for(const k of s){const O=k.getBucket(r);O&&r.id===O.layerIds[0]&&(O.bucketInstanceId||(O.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(k.tileID,O,this.crossTileIDs)&&(x=!0),T[O.bucketInstanceId]=!0)}return y.removeStaleBuckets(T)&&(x=!0),x}pruneUnusedLayers(r){const s={};r.forEach(f=>{s[f]=!0});for(const f in this.layerIndexes)s[f]||delete this.layerIndexes[f]}}var Lr="void main() {fragColor=vec4(1.0);}";const $a={prelude:wr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:wr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:wr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:wr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:wr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:wr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:wr(Lr,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:wr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:wr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:wr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:wr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:wr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(textureSize(u_elevation_stops,0)[0]);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int num_elevation_stops=textureSize(u_elevation_stops,0)[0];int r=(num_elevation_stops-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(textureSize(u_color_stops,0)[0]);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:wr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:wr(Lr,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:wr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:wr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:wr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:wr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:wr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:wr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:wr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:wr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:wr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:wr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:wr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:wr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:wr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:wr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:wr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:wr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:wr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:wr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:wr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:wr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:wr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:wr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function wr(_,r){const s=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=r.match(/in ([\w]+) ([\w]+)/g),y=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=x?x.concat(y):y,k={};return{fragmentSource:_=_.replace(s,(O,N,$,W,q)=>(k[q]=!0,N==="define"?`
#ifndef HAS_UNIFORM_u_${q}
in ${$} ${W} ${q};
#else
uniform ${$} ${W} u_${q};
#endif
`:`
#ifdef HAS_UNIFORM_u_${q}
    ${$} ${W} ${q} = u_${q};
#endif
`)),vertexSource:r=r.replace(s,(O,N,$,W,q)=>{const K=W==="float"?"vec2":"vec4",re=q.match(/color/)?"color":K;return k[q]?N==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
in ${$} ${K} a_${q};
out ${$} ${W} ${q};
#else
uniform ${$} ${W} u_${q};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = a_${q};
#else
    ${$} ${W} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = unpack_mix_${re}(a_${q}, u_${q}_t);
#else
    ${$} ${W} ${q} = u_${q};
#endif
`:N==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
in ${$} ${K} a_${q};
#else
uniform ${$} ${W} u_${q};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${$} ${W} ${q} = a_${q};
#else
    ${$} ${W} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${$} ${W} ${q} = unpack_mix_${re}(a_${q}, u_${q}_t);
#else
    ${$} ${W} ${q} = u_${q};
#endif
`}),staticAttributes:f,staticUniforms:T}}class Va{constructor(r,s,f){this.vertexBuffer=r,this.indexBuffer=s,this.segments=f}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var oo=o.aI([{name:"a_pos",type:"Int16",components:2}]);const hs="#define PROJECTION_MERCATOR",sh="mercator";class qu{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return sh}get shaderDefine(){return hs}get shaderPreludeCode(){return $a.projectionMercator}get vertexShaderPreludeCode(){return $a.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aJ.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,s,f,y,x){if(this._cachedMesh)return this._cachedMesh;const T=new o.aK;T.emplaceBack(0,0),T.emplaceBack(o.$,0),T.emplaceBack(0,o.$),T.emplaceBack(o.$,o.$);const k=r.createVertexBuffer(T,oo.members),O=o.aL.simpleSegment(0,0,4,2),N=new o.aM;N.emplaceBack(1,0,2),N.emplaceBack(1,2,3);const $=r.createIndexBuffer(N);return this._cachedMesh=new Va(k,$,O),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class Mi{constructor(r=0,s=0,f=0,y=0){if(isNaN(r)||r<0||isNaN(s)||s<0||isNaN(f)||f<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=s,this.left=f,this.right=y}interpolate(r,s,f){return s.top!=null&&r.top!=null&&(this.top=o.C.number(r.top,s.top,f)),s.bottom!=null&&r.bottom!=null&&(this.bottom=o.C.number(r.bottom,s.bottom,f)),s.left!=null&&r.left!=null&&(this.left=o.C.number(r.left,s.left,f)),s.right!=null&&r.right!=null&&(this.right=o.C.number(r.right,s.right,f)),this}getCenter(r,s){const f=o.ag((this.left+r-this.right)/2,0,r),y=o.ag((this.top+s-this.bottom)/2,0,s);return new o.P(f,y)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Mi(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function pi(_,r){if(!_.renderWorldCopies||_.lngRange)return;const s=r.lng-_.center.lng;r.lng+=s>180?-360:s<-180?360:0}function cr(_){return Math.max(0,Math.floor(_))}class Aa{constructor(r,s,f,y,x,T){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=T===void 0||!!T,this._minZoom=s||0,this._maxZoom=f||22,this._minPitch=y??0,this._maxPitch=x??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=cr(this._zoom),this._scale=o.ae(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Mi,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,s,f){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=cr(this._zoom),this._scale=o.ae(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new Mi(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!f&&r.autoCalculateNearFarZ,s&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){const s=o.aN(r,-180,180)*Math.PI/180;var f,y,x,T,k,O,N,$,W;this._bearingInRadians!==s&&(this._unmodified=!1,this._bearingInRadians=s,this._calcMatrices(),this._rotationMatrix=E(),f=this._rotationMatrix,x=-this._bearingInRadians,T=(y=this._rotationMatrix)[0],k=y[1],O=y[2],N=y[3],$=Math.sin(x),W=Math.cos(x),f[0]=T*W+O*$,f[1]=k*W+N*$,f[2]=T*-$+O*W,f[3]=k*-$+N*W)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){const s=o.ag(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==s&&(this._unmodified=!1,this._pitchInRadians=s,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){const s=r/180*Math.PI;this._rollInRadians!==s&&(this._unmodified=!1,this._rollInRadians=s,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aO(this._fovInRadians)}setFov(r){r=o.ag(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=o.ad(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){const s=this.getConstrained(this._center,r).zoom;this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this._tileZoom=Math.max(0,Math.floor(s)),this._scale=o.ae(s),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,s){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=s,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,s,f){this._unmodified=!1,this._edgeInsets.interpolate(r,s,f),this._constrain(),this._calcMatrices()}resize(r,s,f=!0){this._width=r,this._height=s,f&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new _r([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,o.ah])}getConstrained(r,s){return this._callbacks.getConstrained(r,s)}getCameraQueryGeometry(r,s){if(s.length===1)return[s[0],r];{const{minX:f,minY:y,maxX:x,maxY:T}=o.a1.fromPoints(s).extend(r);return[new o.P(f,y),new o.P(x,y),new o.P(x,T),new o.P(f,T),new o.P(f,y)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:s,zoom:f}=this.getConstrained(this.center,this.zoom);this.setCenter(s),this.setZoom(f),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=o.af(new Float64Array(16));o.N(r,r,[this._width/2,-this._height/2,1]),o.M(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=o.af(new Float64Array(16)),o.N(r,r,[1,-1,1]),o.M(r,r,[-1,-1,0]),o.N(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,s,f,y){const x=f!==void 0?f:this.bearing,T=y=y!==void 0?y:this.pitch,k=o.a0.fromLngLat(r,s),O=-Math.cos(o.ad(T)),N=Math.sin(o.ad(T)),$=N*Math.sin(o.ad(x)),W=-N*Math.cos(o.ad(x));let q=this.elevation;const K=s-q;let re;O*K>=0||Math.abs(O)<.1?(re=1e4,q=s+re*O):re=-K/O;let ue,de,pe=o.aP(1,k.y),me=0;do{if(me+=1,me>10)break;de=re/pe,ue=new o.a0(k.x+$*de,k.y+W*de),pe=1/ue.meterInMercatorCoordinateUnits()}while(Math.abs(re-de*pe)>1e-12);return{center:ue.toLngLat(),elevation:q,zoom:o.aj(this.height/2/Math.tan(this.fovInRadians/2)/de/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;const s=o.ai(1,this.center.lat)*this.worldSize,f=this.cameraToCenterDistance/s,y=o.a0.fromLngLat(this.center,this.elevation),x=_e(this.center,this.elevation,this.pitch,this.bearing,f);this._elevation=r;const T=this.calculateCenterFromCameraLngLatAlt(x.toLngLat(),o.aP(x.z,y.y),this.bearing,this.pitch);this._elevation=T.elevation,this._center=T.center,this.setZoom(T.zoom)}getCameraPoint(){const r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const r=o.ai(1,this.center.lat)*this.worldSize;return _e(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];const s=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/s,r.canonical.y/s,1/s/o.$,1/s/o.$]}}class ds{constructor(r,s){this.min=r,this.max=s,this.center=o.aQ([],o.aR([],this.min,this.max),.5)}quadrant(r){const s=[r%2==0,r<2],f=o.aS(this.min),y=o.aS(this.max);for(let x=0;x<s.length;x++)f[x]=s[x]?this.min[x]:this.center[x],y[x]=s[x]?this.center[x]:this.max[x];return y[2]=this.max[2],new ds(f,y)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let s=!0;for(let f=0;f<r.planes.length;f++){const y=this.intersectsPlane(r.planes[f]);if(y===0)return 0;y===1&&(s=!1)}return s?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let s=r[3],f=r[3];for(let y=0;y<3;y++)r[y]>0?(s+=r[y]*this.min[y],f+=r[y]*this.max[y]):(f+=r[y]*this.min[y],s+=r[y]*this.max[y]);return s>=0?2:f<0?0:1}}class il{distanceToTile2d(r,s,f,y){const x=y.distanceX([r,s]),T=y.distanceY([r,s]);return Math.hypot(x,T)}getWrap(r,s,f){return f}getTileBoundingVolume(r,s,f,y){var x,T;let k=f,O=f;if(y?.terrain){const $=new o.Z(r.z,s,r.z,r.x,r.y),W=y.terrain.getMinMaxElevation($);k=(x=W.minElevation)!==null&&x!==void 0?x:f,O=(T=W.maxElevation)!==null&&T!==void 0?T:f}const N=1<<r.z;return new ds([s+r.x/N,r.y/N,k],[s+(r.x+1)/N,(r.y+1)/N,O])}allowVariableZoom(r,s){const f=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,y=o.ag(78.5-f/2,0,60);return!!s.terrain||r.pitch>y}allowWorldCopies(){return!0}prepareNextFrame(){}}class pn{constructor(r,s,f){this.points=r,this.planes=s,this.aabb=f}static fromInvProjectionMatrix(r,s=1,f=0,y,x){const T=x?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],k=Math.pow(2,f),O=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(q=>function(K,re,ue,de){const pe=o.av([],K,re),me=1/pe[3]/ue*de;return o.aX(pe,pe,[me,me,1/pe[3],me])}(q,r,s,k));y&&function(q,K,re,ue){const de=ue?4:0,pe=ue?0:4;let me=0;const we=[],ye=[];for(let ve=0;ve<4;ve++){const De=o.aT([],q[ve+pe],q[ve+de]),Ue=o.aY(De);o.aQ(De,De,1/Ue),we.push(Ue),ye.push(De)}for(let ve=0;ve<4;ve++){const De=o.aZ(q[ve+de],ye[ve],re);me=De!==null&&De>=0?Math.max(me,De):Math.max(me,we[ve])}const Te=function(ve,De){const Ue=o.aT([],ve[De[0]],ve[De[1]]),Ve=o.aT([],ve[De[2]],ve[De[1]]),Ge=[0,0,0,0];return o.aU(Ge,o.aV([],Ue,Ve)),Ge[3]=-o.aW(Ge,ve[De[0]]),Ge}(q,K),Ee=function(ve,De){const Ue=o.a_(ve),Ve=o.a$([],ve,1/Ue),Ge=o.aT([],De,o.aQ([],Ve,o.aW(De,Ve))),He=o.a_(Ge);if(He>0){const _t=Math.sqrt(1-Ve[3]*Ve[3]),gt=o.aQ([],Ve,-Ve[3]),it=o.aR([],gt,o.aQ([],Ge,_t/He));return o.b0(De,it)}return null}(re,Te);if(Ee!==null){const ve=Ee/o.aW(ye[0],Te);me=Math.min(me,ve)}for(let ve=0;ve<4;ve++){const De=Math.min(me,we[ve]);q[ve+pe]=[q[ve+de][0]+ye[ve][0]*De,q[ve+de][1]+ye[ve][1]*De,q[ve+de][2]+ye[ve][2]*De,1]}}(O,T[0],y,x);const N=T.map(q=>{const K=o.aT([],O[q[0]],O[q[1]]),re=o.aT([],O[q[2]],O[q[1]]),ue=o.aU([],o.aV([],K,re)),de=-o.aW(ue,O[q[1]]);return ue.concat(de)}),$=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],W=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const q of O)for(let K=0;K<3;K++)$[K]=Math.min($[K],q[K]),W[K]=Math.max(W[K],q[K]);return new pn(O,N,new ds($,W))}}class Dn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,s,f){return this._helper.interpolatePadding(r,s,f)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,s,f=!0){this._helper.resize(r,s,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,s){this._helper.overrideNearFarZ(r,s)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,s){}constructor(r,s,f,y,x){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Aa({calcMatrices:()=>{this._calcMatrices()},getConstrained:(T,k)=>this.getConstrained(T,k)},r,s,f,y,x),this._coveringTilesDetailsProvider=new il}clone(){const r=new Dn;return r.apply(this),r}apply(r,s,f){this._helper.apply(r,s,f)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){const s=[new o.b1(0,r)];if(this._helper._renderWorldCopies){const f=this.screenPointToMercatorCoordinate(new o.P(0,0)),y=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),x=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),T=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),k=Math.floor(Math.min(f.x,y.x,x.x,T.x)),O=Math.floor(Math.max(f.x,y.x,x.x,T.x)),N=1;for(let $=k-N;$<=O+N;$++)$!==0&&s.push(new o.b1($,r))}return s}getCameraFrustum(){return pn.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){const s=this.screenPointToLocation(this.centerPoint,r),f=r?r.getElevationForLngLatZoom(s,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(f)}setLocationAtPoint(r,s){const f=o.ai(this.elevation,this.center.lat),y=this.screenPointToMercatorCoordinateAtZ(s,f),x=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,f),T=o.a0.fromLngLat(r),k=new o.a0(T.x-(y.x-x.x),T.y-(y.y-x.y));this.setCenter(k?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,s){return s?this.coordinatePoint(o.a0.fromLngLat(r),s.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.a0.fromLngLat(r))}screenPointToLocation(r,s){var f;return(f=this.screenPointToMercatorCoordinate(r,s))===null||f===void 0?void 0:f.toLngLat()}screenPointToMercatorCoordinate(r,s){if(s){const f=s.pointCoordinate(r);if(f!=null)return f}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,s){const f=s||0,y=[r.x,r.y,0,1],x=[r.x,r.y,1,1];o.av(y,y,this._pixelMatrixInverse),o.av(x,x,this._pixelMatrixInverse);const T=y[3],k=x[3],O=y[1]/T,N=x[1]/k,$=y[2]/T,W=x[2]/k,q=$===W?0:(f-$)/(W-$);return new o.a0(o.C.number(y[0]/T,x[0]/k,q)/this.worldSize,o.C.number(O,N,q)/this.worldSize,f)}coordinatePoint(r,s=0,f=this._pixelMatrix){const y=[r.x*this.worldSize,r.y*this.worldSize,s,1];return o.av(y,y,f),new o.P(y[0]/y[3],y[1]/y[3])}getBounds(){const r=Math.max(0,this._helper._height/2-oe(this));return new _r().extend(this.screenPointToLocation(new o.P(0,r))).extend(this.screenPointToLocation(new o.P(this._helper._width,r))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(r,s){return s?s.pointCoordinate(r)!=null:r.y>this.height/2-oe(this)}calculatePosMatrix(r,s=!1,f){var y;const x=(y=r.key)!==null&&y!==void 0?y:o.b2(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),T=s?this._alignedPosMatrixCache:this._posMatrixCache;if(T.has(x)){const N=T.get(x);return f?N.f32:N.f64}const k=fe(r,this.worldSize);o.O(k,s?this._alignedProjMatrix:this._viewProjMatrix,k);const O={f64:k,f32:new Float32Array(k)};return T.set(x,O),f?O.f32:O.f64}calculateFogMatrix(r){const s=r.key,f=this._fogMatrixCacheF32;if(f.has(s))return f.get(s);const y=fe(r,this.worldSize);return o.O(y,this._fogMatrix,y),f.set(s,new Float32Array(y)),f.get(s)}getConstrained(r,s){s=o.ag(+s,this.minZoom,this.maxZoom);const f={center:new o.S(r.lng,r.lat),zoom:s};let y=this._helper._lngRange;this._helper._renderWorldCopies||y!==null||(y=[-179.9999999999,180-1e-10]);const x=this.tileSize*o.ae(f.zoom);let T=0,k=x,O=0,N=x,$=0,W=0;const{x:q,y:K}=this.size;if(this._helper._latRange){const we=this._helper._latRange;T=o.U(we[1])*x,k=o.U(we[0])*x,k-T<K&&($=K/(k-T))}y&&(O=o.aN(o.V(y[0])*x,0,x),N=o.aN(o.V(y[1])*x,0,x),N<O&&(N+=x),N-O<q&&(W=q/(N-O)));const{x:re,y:ue}=Fe(x,r);let de,pe;const me=Math.max(W||0,$||0);if(me){const we=new o.P(W?(N+O)/2:re,$?(k+T)/2:ue);return f.center=ie(x,we).wrap(),f.zoom+=o.aj(me),f}if(this._helper._latRange){const we=K/2;ue-we<T&&(pe=T+we),ue+we>k&&(pe=k-we)}if(y){const we=(O+N)/2;let ye=re;this._helper._renderWorldCopies&&(ye=o.aN(re,we-x/2,we+x/2));const Te=q/2;ye-Te<O&&(de=O+Te),ye+Te>N&&(de=N-Te)}if(de!==void 0||pe!==void 0){const we=new o.P(de??re,pe??ue);f.center=ie(x,we).wrap()}return f}calculateCenterFromCameraLngLatAlt(r,s,f,y){return this._helper.calculateCenterFromCameraLngLatAlt(r,s,f,y)}_calculateNearFarZIfNeeded(r,s,f){if(!this._helper.autoCalculateNearFarZ)return;const y=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),x=r-y*this._helper._pixelPerMeter/Math.cos(s),T=y<0?x:r,k=Math.PI/2+this.pitchInRadians,O=o.ad(this.fov)*(Math.abs(Math.cos(o.ad(this.roll)))*this.height+Math.abs(Math.sin(o.ad(this.roll)))*this.width)/this.height*(.5+f.y/this.height),N=Math.sin(O)*T/Math.sin(o.ag(Math.PI-k-O,.01,Math.PI-.01)),$=oe(this),W=Math.atan($/this._helper.cameraToCenterDistance),q=o.ad(.75),K=W>q?2*W*(.5+f.y/(2*$)):q,re=Math.sin(K)*T/Math.sin(o.ag(Math.PI-k-K,.01,Math.PI-.01)),ue=Math.min(N,re);this._helper._farZ=1.01*(Math.cos(Math.PI/2-s)*ue+T),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const r=this.centerOffset,s=Fe(this.worldSize,this.center),f=s.x,y=s.y;this._helper._pixelPerMeter=o.ai(1,this.center.lat)*this.worldSize;const x=o.ad(Math.min(this.pitch,la)),T=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(x));let k;this._calculateNearFarZIfNeeded(T,x,r),k=new Float64Array(16),o.b3(k,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.ap(this._invProjMatrix,k),k[8]=2*-r.x/this._helper._width,k[9]=2*r.y/this._helper._height,this._projectionMatrix=o.b4(k),o.N(k,k,[1,-1,1]),o.M(k,k,[0,0,-this._helper.cameraToCenterDistance]),o.b5(k,k,-this.rollInRadians),o.b6(k,k,this.pitchInRadians),o.b5(k,k,-this.bearingInRadians),o.M(k,k,[-f,-y,0]),this._mercatorMatrix=o.N([],k,[this.worldSize,this.worldSize,this.worldSize]),o.N(k,k,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,k),o.M(k,k,[0,0,-this.elevation]),this._viewProjMatrix=k,this._invViewProjMatrix=o.ap([],k);const O=[0,0,-1,1];o.av(O,O,this._invViewProjMatrix),this._cameraPosition=[O[0]/O[3],O[1]/O[3],O[2]/O[3]],this._fogMatrix=new Float64Array(16),o.b3(this._fogMatrix,this.fovInRadians,this.width/this.height,T,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,o.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.b5(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.b6(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.b5(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.M(this._fogMatrix,this._fogMatrix,[-f,-y,0]),o.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,k);const N=this._helper._width%2/2,$=this._helper._height%2/2,W=Math.cos(this.bearingInRadians),q=Math.sin(-this.bearingInRadians),K=f-Math.round(f)+W*N+q*$,re=y-Math.round(y)+W*$+q*N,ue=new Float64Array(k);if(o.M(ue,ue,[K>.5?K-1:K,re>.5?re-1:re,0]),this._alignedProjMatrix=ue,k=o.ap(new Float64Array(16),this._pixelMatrix),!k)throw new Error("failed to invert matrix");this._pixelMatrixInverse=k,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const r=this.screenPointToMercatorCoordinate(new o.P(0,0)),s=[r.x*this.worldSize,r.y*this.worldSize,0,1];return o.av(s,s,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const r=o.ai(1,this.center.lat)*this.worldSize;return _e(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,s){const f=o.a0.fromLngLat(r),y=[f.x*this.worldSize,f.y*this.worldSize,s,1];return o.av(y,y,this._viewProjMatrix),y[2]/y[3]}getProjectionData(r){const{overscaledTileID:s,aligned:f,applyTerrainMatrix:y}=r,x=this._helper.getMercatorTileCoordinates(s),T=s?this.calculatePosMatrix(s,f,!0):null;let k;return k=s&&s.terrainRttPosMatrix32f&&y?s.terrainRttPosMatrix32f:T||o.b7(),{mainMatrix:k,tileMercatorCoords:x,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:k}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,s,f){return 1}transformLightDirection(r){return o.aS(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,s,f,y){const x=this.calculatePosMatrix(f);let T;y?(T=[r,s,y(r,s),1],o.av(T,T,x)):(T=[r,s,0,1],el(T,T,x));const k=T[3];return{point:new o.P(T[0]/k,T[1]/k),signedDistanceFromCamera:k,isOccluded:!1}}populateCache(r){for(const s of r)this.calculatePosMatrix(s)}getMatrixForModel(r,s){const f=o.a0.fromLngLat(r,s),y=f.meterInMercatorCoordinateUnits(),x=o.b8();return o.M(x,x,[f.x,f.y,f.z]),o.b5(x,x,Math.PI),o.b6(x,x,Math.PI/2),o.N(x,x,[-y,y,y]),x}getProjectionDataForCustomLayer(r=!0){const s=new o.Z(0,0,0,0,0),f=this.getProjectionData({overscaledTileID:s,applyGlobeMatrix:r}),y=fe(s,this.worldSize);o.O(y,this._viewProjMatrix,y),f.tileMercatorCoords=[0,0,1,1];const x=[o.$,o.$,this.worldSize/this._helper.pixelsPerMeter],T=o.b9();return o.N(T,y,x),f.fallbackMatrix=T,f.mainMatrix=T,f}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function ai(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function vn(_){if(_.useSlerp)if(_.k<1){const r=o.ba(_.startEulerAngles.roll,_.startEulerAngles.pitch,_.startEulerAngles.bearing),s=o.ba(_.endEulerAngles.roll,_.endEulerAngles.pitch,_.endEulerAngles.bearing),f=new Float64Array(4);o.bb(f,r,s,_.k);const y=o.bc(f);_.tr.setRoll(y.roll),_.tr.setPitch(y.pitch),_.tr.setBearing(y.bearing)}else _.tr.setRoll(_.endEulerAngles.roll),_.tr.setPitch(_.endEulerAngles.pitch),_.tr.setBearing(_.endEulerAngles.bearing);else _.tr.setRoll(o.C.number(_.startEulerAngles.roll,_.endEulerAngles.roll,_.k)),_.tr.setPitch(o.C.number(_.startEulerAngles.pitch,_.endEulerAngles.pitch,_.k)),_.tr.setBearing(o.C.number(_.startEulerAngles.bearing,_.endEulerAngles.bearing,_.k))}function hn(_,r,s,f,y){const x=y.padding,T=Fe(y.worldSize,s.getNorthWest()),k=Fe(y.worldSize,s.getNorthEast()),O=Fe(y.worldSize,s.getSouthEast()),N=Fe(y.worldSize,s.getSouthWest()),$=o.ad(-f),W=T.rotate($),q=k.rotate($),K=O.rotate($),re=N.rotate($),ue=new o.P(Math.max(W.x,q.x,re.x,K.x),Math.max(W.y,q.y,re.y,K.y)),de=new o.P(Math.min(W.x,q.x,re.x,K.x),Math.min(W.y,q.y,re.y,K.y)),pe=ue.sub(de),me=(y.width-(x.left+x.right+r.left+r.right))/pe.x,we=(y.height-(x.top+x.bottom+r.top+r.bottom))/pe.y;if(we<0||me<0)return void ai();const ye=Math.min(o.aj(y.scale*Math.min(me,we)),_.maxZoom),Te=o.P.convert(_.offset),Ee=new o.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(o.ad(f)),ve=Te.add(Ee).mult(y.scale/o.ae(ye));return{center:ie(y.worldSize,T.add(O).div(2).sub(ve)),zoom:ye,bearing:f}}class Wu{get useGlobeControls(){return!1}handlePanInertia(r,s){return{easingOffset:r,easingCenter:s.center}}handleMapControlsRollPitchBearingZoom(r,s){r.bearingDelta&&s.setBearing(s.bearing+r.bearingDelta),r.pitchDelta&&s.setPitch(s.pitch+r.pitchDelta),r.rollDelta&&s.setRoll(s.roll+r.rollDelta),r.zoomDelta&&s.setZoom(s.zoom+r.zoomDelta)}handleMapControlsPan(r,s,f){r.around.distSqr(s.centerPoint)<.01||s.setLocationAtPoint(f,r.around)}cameraForBoxAndBearing(r,s,f,y,x){return hn(r,s,f,y,x)}handleJumpToCenterZoom(r,s){r.zoom!==(s.zoom!==void 0?+s.zoom:r.zoom)&&r.setZoom(+s.zoom),s.center!==void 0&&r.setCenter(o.S.convert(s.center))}handleEaseTo(r,s){const f=r.zoom,y=r.padding,x={roll:r.roll,pitch:r.pitch,bearing:r.bearing},T={roll:s.roll===void 0?r.roll:s.roll,pitch:s.pitch===void 0?r.pitch:s.pitch,bearing:s.bearing===void 0?r.bearing:s.bearing},k=s.zoom!==void 0,O=!r.isPaddingEqual(s.padding);let N=!1;const $=k?+s.zoom:r.zoom;let W=r.centerPoint.add(s.offsetAsPoint);const q=r.screenPointToLocation(W),{center:K,zoom:re}=r.getConstrained(o.S.convert(s.center||q),$??f);pi(r,K);const ue=Fe(r.worldSize,q),de=Fe(r.worldSize,K).sub(ue),pe=o.ae(re-f);return N=re!==f,{easeFunc:me=>{if(N&&r.setZoom(o.C.number(f,re,me)),o.bd(x,T)||vn({startEulerAngles:x,endEulerAngles:T,tr:r,k:me,useSlerp:x.roll!=T.roll}),O&&(r.interpolatePadding(y,s.padding,me),W=r.centerPoint.add(s.offsetAsPoint)),s.around)r.setLocationAtPoint(s.around,s.aroundPoint);else{const we=o.ae(r.zoom-f),ye=re>f?Math.min(2,pe):Math.max(.5,pe),Te=Math.pow(ye,1-me),Ee=ie(r.worldSize,ue.add(de.mult(me*Te)).mult(we));r.setLocationAtPoint(r.renderWorldCopies?Ee.wrap():Ee,W)}},isZooming:N,elevationCenter:K}}handleFlyTo(r,s){const f=s.zoom!==void 0,y=r.zoom,x=r.getConstrained(o.S.convert(s.center||s.locationAtOffset),f?+s.zoom:y),T=x.center,k=x.zoom;pi(r,T);const O=Fe(r.worldSize,s.locationAtOffset),N=Fe(r.worldSize,T).sub(O),$=N.mag(),W=o.ae(k-y);let q;if(s.minZoom!==void 0){const K=Math.min(+s.minZoom,y,k),re=r.getConstrained(T,K).zoom;q=o.ae(re-y)}return{easeFunc:(K,re,ue,de)=>{r.setZoom(K===1?k:y+o.aj(re));const pe=K===1?T:ie(r.worldSize,O.add(N.mult(ue)).mult(re));r.setLocationAtPoint(r.renderWorldCopies?pe.wrap():pe,de)},scaleOfZoom:W,targetCenter:T,scaleOfMinZoom:q,pixelPathLength:$}}}class Sr{constructor(r,s,f){this.blendFunction=r,this.blendColor=s,this.mask=f}}Sr.Replace=[1,0],Sr.disabled=new Sr(Sr.Replace,o.be.transparent,[!1,!1,!1,!1]),Sr.unblended=new Sr(Sr.Replace,o.be.transparent,[!0,!0,!0,!0]),Sr.alphaBlended=new Sr([1,771],o.be.transparent,[!0,!0,!0,!0]);const Ai=2305;class hr{constructor(r,s,f){this.enable=r,this.mode=s,this.frontFace=f}}hr.disabled=new hr(!1,1029,Ai),hr.backCCW=new hr(!0,1029,Ai),hr.frontCCW=new hr(!0,1028,Ai);class ur{constructor(r,s,f){this.func=r,this.mask=s,this.range=f}}ur.ReadOnly=!1,ur.ReadWrite=!0,ur.disabled=new ur(519,ur.ReadOnly,[0,1]);const Ua=7680;class Ut{constructor(r,s,f,y,x,T){this.test=r,this.ref=s,this.mask=f,this.fail=y,this.depthFail=x,this.pass=T}}Ut.disabled=new Ut({func:519,mask:0},0,0,Ua,Ua,Ua);const so=new WeakMap;function Ii(_){var r;if(so.has(_))return so.get(_);{const s=(r=_.getParameter(_.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return so.set(_,s),s}}class Gl{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;const s=r.context,f=s.gl;this._texFormat=f.RGBA,this._texType=f.UNSIGNED_BYTE;const y=new o.aK;y.emplaceBack(-1,-1),y.emplaceBack(2,-1),y.emplaceBack(-1,2);const x=new o.aM;x.emplaceBack(0,1,2),this._fullscreenTriangle=new Va(s.createVertexBuffer(y,oo.members),s.createIndexBuffer(x),o.aL.simpleSegment(0,0,y.length,x.length)),this._resultBuffer=new Uint8Array(4),s.activeTexture.set(f.TEXTURE1);const T=f.createTexture();f.bindTexture(f.TEXTURE_2D,T),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texImage2D(f.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=s.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(T),Ii(f)&&(this._pbo=f.createBuffer(),f.bindBuffer(f.PIXEL_PACK_BUFFER,this._pbo),f.bufferData(f.PIXEL_PACK_BUFFER,4,f.STREAM_READ),f.bindBuffer(f.PIXEL_PACK_BUFFER,null))}destroy(){const r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,s){const f=this._updateCount;return this._readbackQueue?f>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():f>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,s),this._updateCount++,this._measuredError}_bindFramebuffer(){const r=this._cachedRenderContext.context,s=r.gl;r.activeTexture.set(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,s){const f=this._cachedRenderContext.context,y=f.gl;if(this._bindFramebuffer(),f.viewport.set([0,0,this._texWidth,this._texHeight]),f.clear({color:o.be.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(f,y.TRIANGLES,ur.disabled,Ut.disabled,Sr.unblended,hr.disabled,((x,T)=>({u_input:x,u_output_expected:T}))(r,s),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Ii(y)){y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.readBuffer(y.COLOR_ATTACHMENT0),y.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),y.bindBuffer(y.PIXEL_PACK_BUFFER,null);const x=y.fenceSync(y.SYNC_GPU_COMMANDS_COMPLETE,0);y.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:x}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Ii(r)){const s=r.clientWaitSync(this._readbackQueue.sync,0,0);if(s===r.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(s===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Gl._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let s=0;return s+=r[0]/256,s+=r[1]/65536,s+=r[2]/16777216,r[3]<127&&(s=-s),s/128}}const Wi=o.$/128;function ql(_,r){const s=_.granularity!==void 0?Math.max(_.granularity,1):1,f=s+(_.generateBorders?2:0),y=s+(_.extendToNorthPole||_.generateBorders?1:0)+(_.extendToSouthPole||_.generateBorders?1:0),x=f+1,T=y+1,k=_.generateBorders?-1:0,O=_.generateBorders||_.extendToNorthPole?-1:0,N=s+(_.generateBorders?1:0),$=s+(_.generateBorders||_.extendToSouthPole?1:0),W=x*T,q=f*y*6,K=x*T>65536;if(K&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const re=K||r==="32bit",ue=new Int16Array(2*W);let de=0;for(let we=O;we<=$;we++)for(let ye=k;ye<=N;ye++){let Te=ye/s*o.$;ye===-1&&(Te=-64),ye===s+1&&(Te=o.$+Wi);let Ee=we/s*o.$;we===-1&&(Ee=_.extendToNorthPole?o.bg:-64),we===s+1&&(Ee=_.extendToSouthPole?o.bh:o.$+Wi),ue[de++]=Te,ue[de++]=Ee}const pe=re?new Uint32Array(q):new Uint16Array(q);let me=0;for(let we=0;we<y;we++)for(let ye=0;ye<f;ye++){const Te=ye+1+we*x,Ee=ye+(we+1)*x,ve=ye+1+(we+1)*x;pe[me++]=ye+we*x,pe[me++]=Ee,pe[me++]=Te,pe[me++]=Te,pe[me++]=Ee,pe[me++]=ve}return{vertices:ue.buffer.slice(0),indices:pe.buffer.slice(0),uses32bitIndices:re}}const Ia=new o.aJ({fill:new o.bi(128,2),line:new o.bi(512,0),tile:new o.bi(128,32),stencil:new o.bi(128,1),circle:3});class id{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return $a.projectionGlobe}get vertexShaderPreludeCode(){return $a.projectionMercator.vertexSource}get subdivisionGranularity(){return Ia}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new Gl(r));const s=o.U(this._errorQueryLatitudeDegrees),f=2*Math.atan(Math.exp(Math.PI-s*Math.PI*2))-.5*Math.PI,y=this._errorMeasurement.updateErrorLoop(s,f),x=R.now();y!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=y,this._errorMeasurementLastChangeTime=x);const T=Math.min(Math.max((x-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bj(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bk(T))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,s,f,y,x){const T=(x==="stencil"?Ia.stencil:Ia.tile).getGranularityForZoomLevel(s.z);return this._getMesh(r,{granularity:T,generateBorders:f,extendToNorthPole:s.y===0&&y,extendToSouthPole:s.y===(1<<s.z)-1&&y})}_getMesh(r,s){const f=this._getMeshKey(s);if(f in this._tileMeshCache)return this._tileMeshCache[f];const y=function(x,T){const k=ql(T,"16bit"),O=o.aK.deserialize({arrayBuffer:k.vertices,length:k.vertices.byteLength/2/2}),N=o.aM.deserialize({arrayBuffer:k.indices,length:k.indices.byteLength/2/3});return new Va(x.createVertexBuffer(O,oo.members),x.createIndexBuffer(N),o.aL.simpleSegment(0,0,O.length,N.length))}(r,s);return this._tileMeshCache[f]=y,y}recalculate(r){}hasTransition(){const r=R.now();let s=!1;return s=s||(r-this._errorMeasurementLastChangeTime)/1e3<.7,s=s||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,s}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}const Ao=new o.r({type:new o.D(o.v.projection.type)});class al extends o.E{constructor(r){super(),this._transitionable=new o.t(Ao),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0)),this._mercatorProjection=new qu,this._verticalPerspectiveProjection=new id}get transitionState(){const r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof o.bl){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,s,f,y,x){return this.currentProjection.getMeshFromTileID(r,s,f,y,x)}setProjection(r){this._transitionable.setValue("type",r?.type||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function fs(_){const r=Io(_.worldSize,_.center.lat);return 2*Math.PI*r}function ka(_,r,s,f,y){const x=1/(1<<y),T=r/o.$*x+f*x,k=o.bn((_/o.$*x+s*x)*Math.PI*2+Math.PI,2*Math.PI),O=2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI,N=Math.cos(O),$=new Float64Array(3);return $[0]=Math.sin(k)*N,$[1]=Math.sin(O),$[2]=Math.cos(k)*N,$}function Cn(_){return function(r,s){const f=Math.cos(s),y=new Float64Array(3);return y[0]=Math.sin(r)*f,y[1]=Math.sin(s),y[2]=Math.cos(r)*f,y}(_.lng*Math.PI/180,_.lat*Math.PI/180)}function Io(_,r){return _/(2*Math.PI)/Math.cos(r*Math.PI/180)}function Wl(_){const r=Math.asin(_[1])/Math.PI*180,s=Math.sqrt(_[0]*_[0]+_[2]*_[2]);if(s>1e-6){const f=_[0]/s,y=Math.acos(_[2]/s),x=(f>0?y:-y)/Math.PI*180;return new o.S(o.aN(x,-180,180),r)}return new o.S(0,r)}function Zn(_){return Math.cos(_*Math.PI/180)}function an(_,r){const s=Zn(_),f=Zn(r);return o.aj(f/s)}function ol(_,r){const s=_.rotate(r.bearingInRadians),f=r.zoom+an(r.center.lat,0),y=o.bj(1/Zn(r.center.lat),1/Zn(Math.min(Math.abs(r.center.lat),60)),o.bm(f,7,3,0,1)),x=360/fs({worldSize:r.worldSize,center:{lat:r.center.lat}});return new o.S(r.center.lng-s.x*x*y,o.ag(r.center.lat+s.y*x,-85.051129,o.ah))}function lo(_){const r=.5*_,s=Math.sin(r),f=Math.cos(r);return Math.log(s+f)-Math.log(f-s)}function Zl(_,r,s,f){const y=_.lat+s*f;if(Math.abs(s)>1){const x=(Math.sign(_.lat+s)!==Math.sign(_.lat)?-Math.abs(_.lat):Math.abs(_.lat))*Math.PI/180,T=Math.abs(_.lat+s)*Math.PI/180,k=lo(x+f*(T-x)),O=lo(x),N=lo(T);return new o.S(_.lng+r*((k-O)/(N-O)),y)}return new o.S(_.lng+r*f,y)}class ad{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=r}swapBuffers(){if(!this._hadAnyChanges)return;const r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(r,s,f,y){const x=`${r.z}_${r.x}_${r.y}_${y?.terrain?"t":""}`,T=this._cache.get(x);if(T)return T;const k=this._cachePrevious.get(x);if(k)return this._cache.set(x,k),k;const O=this._boundingVolumeFactory(r,s,f,y);return this._cache.set(x,O),this._hadAnyChanges=!0,O}}class uo{constructor(r,s,f,y){this.min=f,this.max=y,this.points=r,this.planes=s}static fromAabb(r,s){const f=[];for(let y=0;y<8;y++)f.push([1&~y?r[0]:s[0],(y>>1&1)==1?s[1]:r[1],(y>>2&1)==1?s[2]:r[2]]);return new uo(f,[[-1,0,0,s[0]],[1,0,0,-r[0]],[0,-1,0,s[1]],[0,1,0,-r[1]],[0,0,-1,s[2]],[0,0,1,-r[2]]],r,s)}static fromCenterSizeAngles(r,s,f){const y=o.bq([],f[0],f[1],f[2]),x=o.br([],[s[0],0,0],y),T=o.br([],[0,s[1],0],y),k=o.br([],[0,0,s[2]],y),O=[...r],N=[...r];for(let W=0;W<8;W++)for(let q=0;q<3;q++){const K=r[q]+x[q]*(1&~W?-1:1)+T[q]*((W>>1&1)==1?1:-1)+k[q]*((W>>2&1)==1?1:-1);O[q]=Math.min(O[q],K),N[q]=Math.max(N[q],K)}const $=[];for(let W=0;W<8;W++){const q=[...r];o.aR(q,q,o.aQ([],x,1&~W?-1:1)),o.aR(q,q,o.aQ([],T,(W>>1&1)==1?1:-1)),o.aR(q,q,o.aQ([],k,(W>>2&1)==1?1:-1)),$.push(q)}return new uo($,[[...x,-o.aW(x,$[0])],[...T,-o.aW(T,$[0])],[...k,-o.aW(k,$[0])],[-x[0],-x[1],-x[2],-o.aW(x,$[7])],[-T[0],-T[1],-T[2],-o.aW(T,$[7])],[-k[0],-k[1],-k[2],-o.aW(k,$[7])]],O,N)}intersectsFrustum(r){let s=!0;const f=this.points.length,y=this.planes.length,x=r.planes.length,T=r.points.length;for(let k=0;k<x;k++){const O=r.planes[k];let N=0;for(let $=0;$<f;$++){const W=this.points[$];O[0]*W[0]+O[1]*W[1]+O[2]*W[2]+O[3]>=0&&N++}if(N===0)return 0;N<f&&(s=!1)}if(s)return 2;for(let k=0;k<y;k++){const O=this.planes[k];let N=0;for(let $=0;$<T;$++){const W=r.points[$];O[0]*W[0]+O[1]*W[1]+O[2]*W[2]+O[3]>=0&&N++}if(N===0)return 0}return 1}intersectsPlane(r){const s=this.points.length;let f=0;for(let y=0;y<s;y++){const x=this.points[y];r[0]*x[0]+r[1]*x[1]+r[2]*x[2]+r[3]>=0&&f++}return f===s?2:f===0?0:1}}function ko(_,r,s){const f=_-r;return f<0?-f:Math.max(0,f-s)}function Hl(_,r,s,f,y){const x=_-s;let T;return T=x<0?Math.min(-x,1+x-y):x>1?Math.min(Math.max(x-y,0),1-x):0,Math.max(T,ko(r,f,y))}class Mf{constructor(){this._boundingVolumeCache=new ad(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(r,s,f,y){const x=1<<f.z,T=1/x,k=f.x/x,O=f.y/x;let N=2;return N=Math.min(N,Hl(r,s,k,O,T)),N=Math.min(N,Hl(r,s,k+.5,-O-T,T)),N=Math.min(N,Hl(r,s,k+.5,2-O-T,T)),N}getWrap(r,s,f){const y=1<<s.z,x=1/y,T=s.x/y,k=ko(r.x,T,x),O=ko(r.x,T-1,x),N=ko(r.x,T+1,x),$=Math.min(k,O,N);return $===N?1:$===O?-1:0}allowVariableZoom(r,s){return Je(r,s)>4}allowWorldCopies(){return!1}getTileBoundingVolume(r,s,f,y){return this._boundingVolumeCache.getTileBoundingVolume(r,s,f,y)}_computeTileBoundingVolume(r,s,f,y){var x,T;let k=f,O=f;if(y?.terrain){const N=new o.Z(r.z,s,r.z,r.x,r.y),$=y.terrain.getMinMaxElevation(N);k=(x=$.minElevation)!==null&&x!==void 0?x:f,O=(T=$.maxElevation)!==null&&T!==void 0?T:f}if(k/=o.bt,O/=o.bt,k+=1,O+=1,r.z<=0)return uo.fromAabb([-O,-O,-O],[O,O,O]);if(r.z===1)return uo.fromAabb([r.x===0?-O:0,r.y===0?0:-O,-O],[r.x===0?0:O,r.y===0?O:0,O]);{const N=[ka(0,0,r.x,r.y,r.z),ka(o.$,0,r.x,r.y,r.z),ka(o.$,o.$,r.x,r.y,r.z),ka(0,o.$,r.x,r.y,r.z)],$=[];for(const Ge of N)$.push(o.aQ([],Ge,O));if(O!==k)for(const Ge of N)$.push(o.aQ([],Ge,k));r.y===0&&$.push([0,1,0]),r.y===(1<<r.z)-1&&$.push([0,-1,0]);const W=[1,1,1],q=[-1,-1,-1];for(const Ge of $)for(let He=0;He<3;He++)W[He]=Math.min(W[He],Ge[He]),q[He]=Math.max(q[He],Ge[He]);const K=ka(o.$/2,o.$/2,r.x,r.y,r.z),re=o.aV([],[0,1,0],K);o.aU(re,re);const ue=o.aV([],K,re);o.aU(ue,ue);const de=o.aV([],N[2],N[1]);o.aU(de,de);const pe=o.aV([],N[0],N[3]);o.aU(pe,pe),$.push(o.aQ([],K,O)),r.y>=(1<<r.z)/2&&$.push(o.aQ([],ka(o.$/2,0,r.x,r.y,r.z),O)),r.y<(1<<r.z)/2&&$.push(o.aQ([],ka(o.$/2,o.$,r.x,r.y,r.z),O));const me=ki(K,$),we=ki(ue,$),ye=[-K[0],-K[1],-K[2],me.max],Te=[K[0],K[1],K[2],-me.min],Ee=[-ue[0],-ue[1],-ue[2],we.max],ve=[ue[0],ue[1],ue[2],-we.min],De=[...de,0],Ue=[...pe,0],Ve=[];return r.y===0?Ve.push(o.bs(Ue,De,ye),o.bs(Ue,De,Te)):Ve.push(o.bs(Ee,De,ye),o.bs(Ee,De,Te),o.bs(Ee,Ue,ye),o.bs(Ee,Ue,Te)),r.y===(1<<r.z)-1?Ve.push(o.bs(Ue,De,ye),o.bs(Ue,De,Te)):Ve.push(o.bs(ve,De,ye),o.bs(ve,De,Te),o.bs(ve,Ue,ye),o.bs(ve,Ue,Te)),new uo(Ve,[ye,Te,Ee,ve,De,Ue],W,q)}}}function ki(_,r){let s=1/0,f=-1/0;for(const y of r){const x=o.aW(_,y);s=Math.min(s,x),f=Math.max(f,x)}return{min:s,max:f}}class Kl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,s,f){return this._helper.interpolatePadding(r,s,f)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,s){this._helper.resize(r,s)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,s){this._helper.overrideNearFarZ(r,s)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=o.bu(),this._projectionMatrix=o.b8(),this._globeViewProjMatrix32f=o.b7(),this._globeViewProjMatrixNoCorrection=o.b8(),this._globeViewProjMatrixNoCorrectionInverted=o.b8(),this._globeProjMatrixInverted=o.b8(),this._cameraPosition=o.bo(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Aa({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,s)=>this.getConstrained(r,s)}),this._coveringTilesDetailsProvider=new Mf}clone(){const r=new Kl;return r.apply(this),r}apply(r,s){this._globeLatitudeErrorCorrectionRadians=s||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const r=o.bo();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){const{overscaledTileID:s,applyGlobeMatrix:f}=r,y=this._helper.getMercatorTileCoordinates(s);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:y,clippingPlane:this._cachedClippingPlane,projectionTransition:f?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){const s=this.pitchInRadians,f=this.cameraToCenterDistance/r,y=Math.sin(s)*f,x=Math.cos(s)*f+1,T=1/Math.sqrt(y*y+x*x)*1;let k=-y,O=x;const N=Math.sqrt(k*k+O*O);k/=N,O/=N;const $=[0,k,O];o.bv($,$,[0,0,0],-this.bearingInRadians),o.bw($,$,[0,0,0],-1*this.center.lat*Math.PI/180),o.bx($,$,[0,0,0],this.center.lng*Math.PI/180);const W=1/o.aY($);return o.aQ($,$,W),[...$,-T*W]}isLocationOccluded(r){return!this.isSurfacePointVisible(Cn(r))}transformLightDirection(r){const s=this._helper._center.lng*Math.PI/180,f=this._helper._center.lat*Math.PI/180,y=Math.cos(f),x=[Math.sin(s)*y,Math.sin(f),Math.cos(s)*y],T=[x[2],0,-x[0]],k=[0,0,0];o.aV(k,T,x),o.aU(T,T),o.aU(k,k);const O=[0,0,0];return o.aU(O,[T[0]*r[0]+k[0]*r[1]+x[0]*r[2],T[1]*r[0]+k[1]*r[1]+x[1]*r[2],T[2]*r[0]+k[2]*r[1]+x[2]*r[2]]),O}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,s,f){const y=function(k,O,N){const $=1/(1<<N.z);return new o.a0(k/o.$*$+N.x*$,O/o.$*$+N.y*$)}(r,s,f.canonical),x=(T=y.y,[o.bn(y.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI]);var T;return this.getCircleRadiusCorrection()/Math.cos(x[1])}projectTileCoordinates(r,s,f,y){const x=f.canonical,T=ka(r,s,x.x,x.y,x.z),k=1+(y?y(r,s):0)/o.bt,O=[T[0]*k,T[1]*k,T[2]*k,1];o.av(O,O,this._globeViewProjMatrixNoCorrection);const N=this._cachedClippingPlane,$=N[0]*T[0]+N[1]*T[1]+N[2]*T[2]+N[3]<0;return{point:new o.P(O[0]/O[3],O[1]/O[3]),signedDistanceFromCamera:O[3],isOccluded:$}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const r=Io(this.worldSize,this.center.lat),s=o.b9(),f=o.b9();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),o.b3(s,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const y=this.centerOffset;s[8]=2*-y.x/this._helper._width,s[9]=2*y.y/this._helper._height,this._projectionMatrix=o.b4(s),this._globeProjMatrixInverted=o.b9(),o.ap(this._globeProjMatrixInverted,s),o.M(s,s,[0,0,-this.cameraToCenterDistance]),o.b5(s,s,this.rollInRadians),o.b6(s,s,-this.pitchInRadians),o.b5(s,s,this.bearingInRadians),o.M(s,s,[0,0,-r]);const x=o.bo();x[0]=r,x[1]=r,x[2]=r,o.b6(f,s,this.center.lat*Math.PI/180),o.by(f,f,-this.center.lng*Math.PI/180),o.N(f,f,x),this._globeViewProjMatrixNoCorrection=f,o.b6(s,s,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.by(s,s,-this.center.lng*Math.PI/180),o.N(s,s,x),this._globeViewProjMatrix32f=new Float32Array(s),this._globeViewProjMatrixNoCorrectionInverted=o.b9(),o.ap(this._globeViewProjMatrixNoCorrectionInverted,f);const T=o.bo();this._cameraPosition=o.bo(),this._cameraPosition[2]=this.cameraToCenterDistance/r,o.bv(this._cameraPosition,this._cameraPosition,T,-this.rollInRadians),o.bw(this._cameraPosition,this._cameraPosition,T,this.pitchInRadians),o.bv(this._cameraPosition,this._cameraPosition,T,-this.bearingInRadians),o.aR(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bw(this._cameraPosition,this._cameraPosition,T,-this.center.lat*Math.PI/180),o.bx(this._cameraPosition,this._cameraPosition,T,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);const k=o.b4(this._globeViewProjMatrixNoCorrectionInverted);o.N(k,k,[1,1,-1]),this._cachedFrustum=pn.fromInvProjectionMatrix(k,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(r){o.w("calculateFogMatrix is not supported on globe projection.");const s=o.b9();return o.af(s),s}getVisibleUnwrappedCoordinates(r){return[new o.b1(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,s){if(!this._globeViewProjMatrixNoCorrection)return 1;const f=Cn(r);o.aQ(f,f,1+s/o.bt);const y=o.bu();return o.av(y,[f[0],f[1],f[2],1],this._globeViewProjMatrixNoCorrection),y[2]/y[3]}populateCache(r){}getBounds(){const r=.5*this.width,s=.5*this.height,f=[new o.P(0,0),new o.P(r,0),new o.P(this.width,0),new o.P(this.width,s),new o.P(this.width,this.height),new o.P(r,this.height),new o.P(0,this.height),new o.P(0,s)],y=[];for(const W of f)y.push(this.unprojectScreenPoint(W));let x=0,T=0,k=0,O=0;const N=this.center;for(const W of y){const q=o.bz(N.lng,W.lng),K=o.bz(N.lat,W.lat);q<T&&(T=q),q>x&&(x=q),K<O&&(O=K),K>k&&(k=K)}const $=[N.lng+T,N.lat+O,N.lng+x,N.lat+k];return this.isSurfacePointOnScreen([0,1,0])&&($[3]=90,$[0]=-180,$[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&($[1]=-90,$[0]=-180,$[2]=180),new _r($)}getConstrained(r,s){const f=o.ag(r.lat,-85.051129,o.ah),y=o.ag(+s,this.minZoom+an(0,f),this.maxZoom);return{center:new o.S(r.lng,f),zoom:y}}calculateCenterFromCameraLngLatAlt(r,s,f,y){return this._helper.calculateCenterFromCameraLngLatAlt(r,s,f,y)}setLocationAtPoint(r,s){const f=Cn(this.unprojectScreenPoint(s)),y=Cn(r),x=o.bo();o.bA(x);const T=o.bo();o.bx(T,f,x,-this.center.lng*Math.PI/180),o.bw(T,T,x,this.center.lat*Math.PI/180);const k=y[0]*y[0]+y[2]*y[2],O=T[0]*T[0];if(k<O)return;const N=Math.sqrt(k-O),$=-N,W=o.bB(y[0],y[2],T[0],N),q=o.bB(y[0],y[2],T[0],$),K=o.bo();o.bx(K,y,x,-W);const re=o.bB(K[1],K[2],T[1],T[2]),ue=o.bo();o.bx(ue,y,x,-q);const de=o.bB(ue[1],ue[2],T[1],T[2]),pe=.5*Math.PI,me=re>=-pe&&re<=pe,we=de>=-pe&&de<=pe;let ye,Te;if(me&&we){const Ue=this.center.lng*Math.PI/180,Ve=this.center.lat*Math.PI/180;o.bC(W,Ue)+o.bC(re,Ve)<o.bC(q,Ue)+o.bC(de,Ve)?(ye=W,Te=re):(ye=q,Te=de)}else if(me)ye=W,Te=re;else{if(!we)return;ye=q,Te=de}const Ee=ye/Math.PI*180,ve=Te/Math.PI*180,De=this.center.lat;this.setCenter(new o.S(Ee,o.ag(ve,-90,90))),this.setZoom(this.zoom+an(De,this.center.lat))}locationToScreenPoint(r,s){const f=Cn(r);if(s){const y=s.getElevationForLngLatZoom(r,this._helper._tileZoom);o.aQ(f,f,1+y/o.bt)}return this._projectSurfacePointToScreen(f)}_projectSurfacePointToScreen(r){const s=o.bu();return o.av(s,[...r,1],this._globeViewProjMatrixNoCorrection),s[0]/=s[3],s[1]/=s[3],new o.P((.5*s[0]+.5)*this.width,(.5*-s[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,s){if(s){const f=s.pointCoordinate(r);if(f)return f}return o.a0.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,s){var f;return(f=this.screenPointToMercatorCoordinate(r,s))===null||f===void 0?void 0:f.toLngLat()}isPointOnMapSurface(r,s){const f=this._cameraPosition,y=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(f,y)}getRayDirectionFromPixel(r){const s=o.bu();s[0]=r.x/this.width*2-1,s[1]=-1*(r.y/this.height*2-1),s[2]=1,s[3]=1,o.av(s,s,this._globeViewProjMatrixNoCorrectionInverted),s[0]/=s[3],s[1]/=s[3],s[2]/=s[3];const f=o.bo();f[0]=s[0]-this._cameraPosition[0],f[1]=s[1]-this._cameraPosition[1],f[2]=s[2]-this._cameraPosition[2];const y=o.bo();return o.aU(y,f),y}isSurfacePointVisible(r){const s=this._cachedClippingPlane;return s[0]*r[0]+s[1]*r[1]+s[2]*r[2]+s[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;const s=o.bu();return o.av(s,[...r,1],this._globeViewProjMatrixNoCorrection),s[0]/=s[3],s[1]/=s[3],s[2]/=s[3],s[0]>-1&&s[0]<1&&s[1]>-1&&s[1]<1&&s[2]>-1&&s[2]<1}rayPlanetIntersection(r,s){const f=o.aW(r,s),y=o.bo(),x=o.bo();o.aQ(x,s,f),o.aT(y,r,x);const T=1-o.aW(y,y);if(T<0)return null;const k=o.aW(r,r)-1,O=-f+(f<0?1:-1)*Math.sqrt(T),N=k/O,$=O;return{tMin:Math.min(N,$),tMax:Math.max(N,$)}}unprojectScreenPoint(r){const s=this._cameraPosition,f=this.getRayDirectionFromPixel(r),y=this.rayPlanetIntersection(s,f);if(y){const $=o.bo();o.aR($,s,[f[0]*y.tMin,f[1]*y.tMin,f[2]*y.tMin]);const W=o.bo();return o.aU(W,$),Wl(W)}const x=this._cachedClippingPlane,T=x[0]*f[0]+x[1]*f[1]+x[2]*f[2],k=-o.b0(x,s)/T,O=o.bo();if(k>0)o.aR(O,s,[f[0]*k,f[1]*k,f[2]*k]);else{const $=o.bo();o.aR($,s,[2*f[0],2*f[1],2*f[2]]);const W=o.b0(this._cachedClippingPlane,$);o.aT(O,$,[this._cachedClippingPlane[0]*W,this._cachedClippingPlane[1]*W,this._cachedClippingPlane[2]*W])}const N=function($){const W=o.bo();return W[0]=$[0]*-$[3],W[1]=$[1]*-$[3],W[2]=$[2]*-$[3],{center:W,radius:Math.sqrt(1-$[3]*$[3])}}(x);return Wl(function($,W,q){const K=o.bo();o.aT(K,q,$);const re=o.bo();return o.bp(re,$,K,W/o.a_(K)),re}(N.center,N.radius,O))}getMatrixForModel(r,s){const f=o.S.convert(r),y=1/o.bt,x=o.b8();return o.by(x,x,f.lng/180*Math.PI),o.b6(x,x,-f.lat/180*Math.PI),o.M(x,x,[0,0,1+s/o.bt]),o.b6(x,x,.5*Math.PI),o.N(x,x,[y,y,y]),x}getProjectionDataForCustomLayer(r=!0){const s=this.getProjectionData({overscaledTileID:new o.Z(0,0,0,0,0),applyGlobeMatrix:r});return s.tileMercatorCoords=[0,0,1,1],s}getFastPathSimpleProjectionMatrix(r){}}class ha{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,s,f){return this._helper.interpolatePadding(r,s,f)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,s,f=!0){this._helper.resize(r,s,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,s){this._helper.overrideNearFarZ(r,s)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,s){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=s,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Aa({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,s)=>this.getConstrained(r,s)}),this._globeness=1,this._mercatorTransform=new Dn,this._verticalPerspectiveTransform=new Kl}clone(){const r=new ha;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){const s=this._mercatorTransform.getProjectionData(r),f=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?f.mainMatrix:s.mainMatrix,clippingPlane:f.clippingPlane,tileMercatorCoords:f.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:s.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return o.bj(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bj(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,s,f){const y=this._mercatorTransform.getPitchedTextCorrection(r,s,f),x=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,s,f);return o.bj(y,x,this._globeness)}projectTileCoordinates(r,s,f,y){return this.currentTransform.projectTileCoordinates(r,s,f,y)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,s){return this.currentTransform.lngLatToCameraDepth(r,s)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,s){return this.currentTransform.getConstrained(r,s)}calculateCenterFromCameraLngLatAlt(r,s,f,y){return this._helper.calculateCenterFromCameraLngLatAlt(r,s,f,y)}setLocationAtPoint(r,s){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,s),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,s),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,s){return this.currentTransform.locationToScreenPoint(r,s)}screenPointToMercatorCoordinate(r,s){return this.currentTransform.screenPointToMercatorCoordinate(r,s)}screenPointToLocation(r,s){return this.currentTransform.screenPointToLocation(r,s)}isPointOnMapSurface(r,s){return this.currentTransform.isPointOnMapSurface(r,s)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,s){return this.currentTransform.getMatrixForModel(r,s)}getProjectionDataForCustomLayer(r=!0){const s=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return s;const f=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return f.fallbackMatrix=s.mainMatrix,f}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class mi{get useGlobeControls(){return!0}handlePanInertia(r,s){const f=ol(r,s);return Math.abs(f.lng-s.center.lng)>180&&(f.lng=s.center.lng+179.5*Math.sign(f.lng-s.center.lng)),{easingCenter:f,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,s){const f=r.around,y=s.screenPointToLocation(f);r.bearingDelta&&s.setBearing(s.bearing+r.bearingDelta),r.pitchDelta&&s.setPitch(s.pitch+r.pitchDelta),r.rollDelta&&s.setRoll(s.roll+r.rollDelta);const x=s.zoom;r.zoomDelta&&s.setZoom(s.zoom+r.zoomDelta);const T=s.zoom-x;if(T===0)return;const k=o.bz(s.center.lng,y.lng),O=k/(Math.abs(k/180)+1),N=o.bz(s.center.lat,y.lat),$=s.getRayDirectionFromPixel(f),W=s.cameraPosition,q=-1*o.aW(W,$),K=o.bo();o.aR(K,W,[$[0]*q,$[1]*q,$[2]*q]);const re=o.aY(K)-1,ue=Math.exp(.5*-Math.max(re-.3,0)),de=Io(s.worldSize,s.center.lat)/Math.min(s.width,s.height),pe=o.bm(de,.9,.5,1,.25),me=(1-o.ae(-T))*Math.min(ue,pe),we=s.center.lat,ye=s.zoom,Te=new o.S(s.center.lng+O*me,o.ag(s.center.lat+N*me,-85.051129,o.ah));s.setLocationAtPoint(y,f);const Ee=s.center,ve=o.bm(Math.abs(k),45,85,0,1),De=o.bm(de,.75,.35,0,1),Ue=Math.pow(Math.max(ve,De),.25),Ve=o.bz(Ee.lng,Te.lng),Ge=o.bz(Ee.lat,Te.lat);s.setCenter(new o.S(Ee.lng+Ve*Ue,Ee.lat+Ge*Ue).wrap()),s.setZoom(ye+an(we,s.center.lat))}handleMapControlsPan(r,s,f){if(!r.panDelta)return;const y=s.center.lat,x=s.zoom;s.setCenter(ol(r.panDelta,s).wrap()),s.setZoom(x+an(y,s.center.lat))}cameraForBoxAndBearing(r,s,f,y,x){const T=hn(r,s,f,y,x),k=s.left/x.width*2-1,O=(x.width-s.right)/x.width*2-1,N=s.top/x.height*-2+1,$=(x.height-s.bottom)/x.height*-2+1,W=o.bz(f.getWest(),f.getEast())<0,q=W?f.getEast():f.getWest(),K=W?f.getWest():f.getEast(),re=Math.max(f.getNorth(),f.getSouth()),ue=Math.min(f.getNorth(),f.getSouth()),de=q+.5*o.bz(q,K),pe=re+.5*o.bz(re,ue),me=x.clone();me.setCenter(T.center),me.setBearing(T.bearing),me.setPitch(0),me.setRoll(0),me.setZoom(T.zoom);const we=me.modelViewProjectionMatrix,ye=[Cn(f.getNorthWest()),Cn(f.getNorthEast()),Cn(f.getSouthWest()),Cn(f.getSouthEast()),Cn(new o.S(K,pe)),Cn(new o.S(q,pe)),Cn(new o.S(de,re)),Cn(new o.S(de,ue))],Te=Cn(T.center);let Ee=Number.POSITIVE_INFINITY;for(const ve of ye)k<0&&(Ee=mi.getLesserNonNegativeNonNull(Ee,mi.solveVectorScale(ve,Te,we,"x",k))),O>0&&(Ee=mi.getLesserNonNegativeNonNull(Ee,mi.solveVectorScale(ve,Te,we,"x",O))),N>0&&(Ee=mi.getLesserNonNegativeNonNull(Ee,mi.solveVectorScale(ve,Te,we,"y",N))),$<0&&(Ee=mi.getLesserNonNegativeNonNull(Ee,mi.solveVectorScale(ve,Te,we,"y",$)));if(Number.isFinite(Ee)&&Ee!==0)return T.zoom=me.zoom+o.aj(Ee),T;ai()}handleJumpToCenterZoom(r,s){const f=r.center.lat,y=r.getConstrained(s.center?o.S.convert(s.center):r.center,r.zoom).center;r.setCenter(y.wrap());const x=s.zoom!==void 0?+s.zoom:r.zoom+an(f,y.lat);r.zoom!==x&&r.setZoom(x)}handleEaseTo(r,s){const f=r.zoom,y=r.center,x=r.padding,T={roll:r.roll,pitch:r.pitch,bearing:r.bearing},k={roll:s.roll===void 0?r.roll:s.roll,pitch:s.pitch===void 0?r.pitch:s.pitch,bearing:s.bearing===void 0?r.bearing:s.bearing},O=s.zoom!==void 0,N=!r.isPaddingEqual(s.padding);let $=!1;const W=s.center?o.S.convert(s.center):y,q=r.getConstrained(W,f).center;pi(r,q);const K=r.clone();K.setCenter(q),K.setZoom(O?+s.zoom:f+an(y.lat,W.lat)),K.setBearing(s.bearing);const re=new o.P(o.ag(r.centerPoint.x+s.offsetAsPoint.x,0,r.width),o.ag(r.centerPoint.y+s.offsetAsPoint.y,0,r.height));K.setLocationAtPoint(q,re);const ue=(s.offset&&s.offsetAsPoint.mag())>0?K.center:q,de=O?+s.zoom:f+an(y.lat,ue.lat),pe=f+an(y.lat,0),me=de+an(ue.lat,0),we=o.bz(y.lng,ue.lng),ye=o.bz(y.lat,ue.lat),Te=o.ae(me-pe);return $=de!==f,{easeFunc:Ee=>{if(o.bd(T,k)||vn({startEulerAngles:T,endEulerAngles:k,tr:r,k:Ee,useSlerp:T.roll!=k.roll}),N&&r.interpolatePadding(x,s.padding,Ee),s.around)o.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(s.around,s.aroundPoint);else{const ve=me>pe?Math.min(2,Te):Math.max(.5,Te),De=Math.pow(ve,1-Ee),Ue=Zl(y,we,ye,Ee*De);r.setCenter(Ue.wrap())}if($){const ve=o.C.number(pe,me,Ee)+an(0,r.center.lat);r.setZoom(ve)}},isZooming:$,elevationCenter:ue}}handleFlyTo(r,s){const f=s.zoom!==void 0,y=r.center,x=r.zoom,T=r.padding,k=!r.isPaddingEqual(s.padding),O=r.getConstrained(o.S.convert(s.center||s.locationAtOffset),x).center,N=f?+s.zoom:r.zoom+an(r.center.lat,O.lat),$=r.clone();$.setCenter(O),$.setZoom(N),$.setBearing(s.bearing);const W=new o.P(o.ag(r.centerPoint.x+s.offsetAsPoint.x,0,r.width),o.ag(r.centerPoint.y+s.offsetAsPoint.y,0,r.height));$.setLocationAtPoint(O,W);const q=$.center;pi(r,q);const K=function(ye,Te,Ee){const ve=Cn(Te),De=Cn(Ee),Ue=o.aW(ve,De),Ve=Math.acos(Ue),Ge=fs(ye);return Ve/(2*Math.PI)*Ge}(r,y,q),re=x+an(y.lat,0),ue=N+an(q.lat,0),de=o.ae(ue-re);let pe;if(typeof s.minZoom=="number"){const ye=+s.minZoom+an(q.lat,0),Te=Math.min(ye,re,ue)+an(0,q.lat),Ee=r.getConstrained(q,Te).zoom+an(q.lat,0);pe=o.ae(Ee-re)}const me=o.bz(y.lng,q.lng),we=o.bz(y.lat,q.lat);return{easeFunc:(ye,Te,Ee,ve)=>{const De=Zl(y,me,we,Ee);k&&r.interpolatePadding(T,s.padding,ye);const Ue=ye===1?q:De;r.setCenter(Ue.wrap());const Ve=re+o.aj(Te);r.setZoom(ye===1?N:Ve+an(0,Ue.lat))},scaleOfZoom:de,targetCenter:q,scaleOfMinZoom:pe,pixelPathLength:K}}static solveVectorScale(r,s,f,y,x){const T=y==="x"?[f[0],f[4],f[8],f[12]]:[f[1],f[5],f[9],f[13]],k=[f[3],f[7],f[11],f[15]],O=r[0]*T[0]+r[1]*T[1]+r[2]*T[2],N=r[0]*k[0]+r[1]*k[1]+r[2]*k[2],$=s[0]*T[0]+s[1]*T[1]+s[2]*T[2],W=s[0]*k[0]+s[1]*k[1]+s[2]*k[2];return $+x*N===O+x*W||k[3]*(O-$)+T[3]*(W-N)+O*W==$*N?null:($+T[3]-x*W-x*k[3])/($-O-x*W+x*N)}static getLesserNonNegativeNonNull(r,s){return s!==null&&s>=0&&s<r?s:r}}class od{constructor(r){this._globe=r,this._mercatorCameraHelper=new Wu,this._verticalPerspectiveCameraHelper=new mi}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,s){return this.currentHelper.handlePanInertia(r,s)}handleMapControlsRollPitchBearingZoom(r,s){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,s)}handleMapControlsPan(r,s,f){this.currentHelper.handleMapControlsPan(r,s,f)}cameraForBoxAndBearing(r,s,f,y,x){return this.currentHelper.cameraForBoxAndBearing(r,s,f,y,x)}handleJumpToCenterZoom(r,s){this.currentHelper.handleJumpToCenterZoom(r,s)}handleEaseTo(r,s){return this.currentHelper.handleEaseTo(r,s)}handleFlyTo(r,s){return this.currentHelper.handleFlyTo(r,s)}}const Zu=(_,r)=>o.y(_,r&&r.filter(s=>s.identifier!=="source.canvas")),Xl=o.bD();class sd extends o.E{constructor(r,s={}){super(),this._rtlPluginLoaded=()=>{for(const f in this.sourceCaches){const y=this.sourceCaches[f].getSource().type;y!=="vector"&&y!=="geojson"||this.sourceCaches[f].reload()}},this.map=r,this.dispatcher=new Pr(tr(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(f,y)=>this.getGlyphs(f,y)),this.dispatcher.registerMessageHandler("GI",(f,y)=>this.getImages(f,y)),this.imageManager=new ht,this.imageManager.setEventedParent(this),this.glyphManager=new Ft(r._requestManager,s.localIdeographFontFamily),this.lineAtlas=new Ct(256,512),this.crossTileSymbolIndex=new Ul,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bE,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",o.bF()),Ei().on(no,this._rtlPluginLoaded),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;const y=this.sourceCaches[f.sourceId];if(!y)return;const x=y.getSource();if(x&&x.vectorLayerIds)for(const T in this._layers){const k=this._layers[T];k.source===x.id&&this._validateLayer(k)}})}setGlobalStateProperty(r,s){var f,y,x;this._checkLoaded();const T=s===null?(x=(y=(f=this.stylesheet.state)===null||f===void 0?void 0:f[r])===null||y===void 0?void 0:y.default)!==null&&x!==void 0?x:null:s;if(o.bG(T,this._globalState[r]))return this;this._globalState[r]=T;const k=this._findGlobalStateAffectedSources([r]);for(const O in this.sourceCaches)k.has(O)&&(this._reloadSource(O),this._changed=!0)}getGlobalState(){return this._globalState}setGlobalState(r){this._checkLoaded();const s=[];for(const y in r)!o.bG(this._globalState[y],r[y].default)&&(s.push(y),this._globalState[y]=r[y].default);const f=this._findGlobalStateAffectedSources(s);for(const y in this.sourceCaches)f.has(y)&&(this._reloadSource(y),this._changed=!0)}_findGlobalStateAffectedSources(r){if(r.length===0)return new Set;const s=new Set;for(const f in this._layers){const y=this._layers[f],x=y.getLayoutAffectingGlobalStateRefs();for(const T of r)x.has(T)&&s.add(y.source)}return s}loadURL(r,s={},f){this.fire(new o.l("dataloading",{dataType:"style"})),s.validate=typeof s.validate!="boolean"||s.validate;const y=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const x=this._loadStyleRequest;o.j(y,this._loadStyleRequest).then(T=>{this._loadStyleRequest=null,this._load(T.data,s,f)}).catch(T=>{this._loadStyleRequest=null,T&&!x.signal.aborted&&this.fire(new o.k(T))})}loadJSON(r,s={},f){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,R.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,s.validate=s.validate!==!1,this._load(r,s,f)}).catch(()=>{})}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(Xl,{validate:!1})}_load(r,s,f){var y,x,T;const k=s.transformStyle?s.transformStyle(f,r):r;if(!s.validate||!Zu(this,o.z(k))){this._loaded=!0,this.stylesheet=k;for(const O in k.sources)this.addSource(O,k.sources[O],{validate:!1});k.sprite?this._loadSprite(k.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(k.glyphs),this._createLayers(),this.light=new vr(this.stylesheet.light),this._setProjectionInternal(((y=this.stylesheet.projection)===null||y===void 0?void 0:y.type)||"mercator"),this.sky=new ut(this.stylesheet.sky),this.map.setTerrain((x=this.stylesheet.terrain)!==null&&x!==void 0?x:null),this.setGlobalState((T=this.stylesheet.state)!==null&&T!==void 0?T:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){const r=o.bH(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(s=>s.id),this._layers={},this._serializedLayers=null;for(const s of r){const f=o.bI(s);f.setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=f}}_loadSprite(r,s=!1,f=void 0){let y;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(x,T,k,O){return o._(this,void 0,void 0,function*(){const N=Ae(x),$=k>1?"@2x":"",W={},q={};for(const{id:K,url:re}of N){const ue=T.transformRequest(Ne(re,$,".json"),"SpriteJSON");W[K]=o.j(ue,O);const de=T.transformRequest(Ne(re,$,".png"),"SpriteImage");q[K]=Ce.getImage(de,O)}return yield Promise.all([...Object.values(W),...Object.values(q)]),function(K,re){return o._(this,void 0,void 0,function*(){const ue={};for(const de in K){ue[de]={};const pe=R.getImageCanvasContext((yield re[de]).data),me=(yield K[de]).data;for(const we in me){const{width:ye,height:Te,x:Ee,y:ve,sdf:De,pixelRatio:Ue,stretchX:Ve,stretchY:Ge,content:He,textFitWidth:_t,textFitHeight:gt}=me[we];ue[de][we]={data:null,pixelRatio:Ue,sdf:De,stretchX:Ve,stretchY:Ge,content:He,textFitWidth:_t,textFitHeight:gt,spriteData:{width:ye,height:Te,x:Ee,y:ve,context:pe}}}}return ue})}(W,q)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(x=>{if(this._spriteRequest=null,x)for(const T in x){this._spritesImagesIds[T]=[];const k=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(O=>!(O in x)):[];for(const O of k)this.imageManager.removeImage(O),this._changedImages[O]=!0;for(const O in x[T]){const N=T==="default"?O:`${T}:${O}`;this._spritesImagesIds[T].push(N),N in this.imageManager.images?this.imageManager.updateImage(N,x[T][O],!1):this.imageManager.addImage(N,x[T][O]),s&&(this._changedImages[N]=!0)}}}).catch(x=>{this._spriteRequest=null,y=x,this.fire(new o.k(y))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),s&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),f&&f(y)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(r){const s=this.sourceCaches[r.source];if(!s)return;const f=r.sourceLayer;if(!f)return;const y=s.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(f)===-1)&&this.fire(new o.k(new Error(`Source layer "${f}" does not exist on source "${y.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,s=!1){const f=this._serializedAllLayers();if(!r||r.length===0)return Object.values(s?o.bJ(f):f);const y=[];for(const x of r)if(f[x]){const T=s?o.bJ(f[x]):f[x];y.push(T)}return y}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const s=Object.keys(this._layers);for(const f of s){const y=this._layers[f];y.type!=="custom"&&(r[f]=y.serialize())}return r}hasTransitions(){var r,s,f;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((s=this.sky)===null||s===void 0)&&s.hasTransition()||!((f=this.projection)===null||f===void 0)&&f.hasTransition())return!0;for(const y in this.sourceCaches)if(this.sourceCaches[y].hasTransition())return!0;for(const y in this._layers)if(this._layers[y].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const s=this._changed;if(s){const y=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(y.length||x.length)&&this._updateWorkerLayers(y,x);for(const T in this._updatedSources){const k=this._updatedSources[T];if(k==="reload")this._reloadSource(T);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const f={};for(const y in this.sourceCaches){const x=this.sourceCaches[y];f[y]=x.used,x.used=!1}for(const y of this._order){const x=this._layers[y];x.recalculate(r,this._availableImages),!x.isHidden(r.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const y in f){const x=this.sourceCaches[y];!!f[y]!=!!x.used&&x.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,s&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,s){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:s})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,s={}){var f;this._checkLoaded();const y=this.serialize();if(r=s.transformStyle?s.transformStyle(y,r):r,((f=s.validate)===null||f===void 0||f)&&Zu(this,o.z(r)))return!1;(r=o.bJ(r)).layers=o.bH(r.layers);const x=o.bK(y,r),T=this._getOperationsToPerform(x);if(T.unimplemented.length>0)throw new Error(`Unimplemented: ${T.unimplemented.join(", ")}.`);if(T.operations.length===0)return!1;for(const k of T.operations)k();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const s=[],f=[];for(const y of r)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":s.push(()=>this.addLayer.apply(this,y.args));break;case"removeLayer":s.push(()=>this.removeLayer.apply(this,y.args));break;case"setPaintProperty":s.push(()=>this.setPaintProperty.apply(this,y.args));break;case"setLayoutProperty":s.push(()=>this.setLayoutProperty.apply(this,y.args));break;case"setFilter":s.push(()=>this.setFilter.apply(this,y.args));break;case"addSource":s.push(()=>this.addSource.apply(this,y.args));break;case"removeSource":s.push(()=>this.removeSource.apply(this,y.args));break;case"setLayerZoomRange":s.push(()=>this.setLayerZoomRange.apply(this,y.args));break;case"setLight":s.push(()=>this.setLight.apply(this,y.args));break;case"setGeoJSONSourceData":s.push(()=>this.setGeoJSONSourceData.apply(this,y.args));break;case"setGlyphs":s.push(()=>this.setGlyphs.apply(this,y.args));break;case"setSprite":s.push(()=>this.setSprite.apply(this,y.args));break;case"setTerrain":s.push(()=>this.map.setTerrain.apply(this,y.args));break;case"setSky":s.push(()=>this.setSky.apply(this,y.args));break;case"setProjection":this.setProjection.apply(this,y.args);break;case"setGlobalState":s.push(()=>this.setGlobalState.apply(this,y.args));break;case"setTransition":s.push(()=>{});break;default:f.push(y.command)}return{operations:s,unimplemented:f}}addImage(r,s){if(this.getImage(r))return this.fire(new o.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,s),this._afterImageUpdated(r)}updateImage(r,s){this.imageManager.updateImage(r,s)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new o.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,s,f={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!s.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(s).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(s.type)>=0&&this._validate(o.z.source,`sources.${r}`,s,null,f))return;this.map&&this.map._collectResourceTiming&&(s.collectResourceTiming=!0);const y=this.sourceCaches[r]=new nt(r,s,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:r})),y.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===r)return this.fire(new o.k(new Error(`Source "${r}" cannot be removed while layer "${f}" is using it.`)));const s=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],s.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),s.setEventedParent(null),s.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,s){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const f=this.sourceCaches[r].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(s),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,s,f={}){this._checkLoaded();const y=r.id;if(this.getLayer(y))return void this.fire(new o.k(new Error(`Layer "${y}" already exists on this map.`)));let x;if(r.type==="custom"){if(Zu(this,o.bL(r)))return;x=o.bI(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(y,r.source),r=o.bJ(r),r=o.e(r,{source:y})),this._validate(o.z.layer,`layers.${y}`,r,{arrayIndex:-1},f))return;x=o.bI(r),this._validateLayer(x),x.setEventedParent(this,{layer:{id:y}})}const T=s?this._order.indexOf(s):this._order.length;if(s&&T===-1)this.fire(new o.k(new Error(`Cannot add layer "${y}" before non-existing layer "${s}".`)));else{if(this._order.splice(T,0,y),this._layerOrderChanged=!0,this._layers[y]=x,this._removedLayers[y]&&x.source&&x.type!=="custom"){const k=this._removedLayers[y];delete this._removedLayers[y],k.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(r,s){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new o.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===s)return;const f=this._order.indexOf(r);this._order.splice(f,1);const y=s?this._order.indexOf(s):this._order.length;s&&y===-1?this.fire(new o.k(new Error(`Cannot move layer "${r}" before non-existing layer "${s}".`))):(this._order.splice(y,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const s=this._layers[r];if(!s)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${r}".`)));s.setEventedParent(null);const f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=s,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],s.onRemove&&s.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,s,f){this._checkLoaded();const y=this.getLayer(r);y?y.minzoom===s&&y.maxzoom===f||(s!=null&&(y.minzoom=s),f!=null&&(y.maxzoom=f),this._updateLayer(y)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,s,f={}){this._checkLoaded();const y=this.getLayer(r);if(y){if(!o.bG(y.filter,s))return s==null?(y.setFilter(void 0),void this._updateLayer(y)):void(this._validate(o.z.filter,`layers.${y.id}.filter`,s,null,f)||(y.setFilter(o.bJ(s)),this._updateLayer(y)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return o.bJ(this.getLayer(r).filter)}setLayoutProperty(r,s,f,y={}){this._checkLoaded();const x=this.getLayer(r);x?o.bG(x.getLayoutProperty(s),f)||(x.setLayoutProperty(s,f,y),this._updateLayer(x)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,s){const f=this.getLayer(r);if(f)return f.getLayoutProperty(s);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,s,f,y={}){this._checkLoaded();const x=this.getLayer(r);x?o.bG(x.getPaintProperty(s),f)||(x.setPaintProperty(s,f,y)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new o.k(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,s){return this.getLayer(r).getPaintProperty(s)}setFeatureState(r,s){this._checkLoaded();const f=r.source,y=r.sourceLayer,x=this.sourceCaches[f];if(x===void 0)return void this.fire(new o.k(new Error(`The source '${f}' does not exist in the map's style.`)));const T=x.getSource().type;T==="geojson"&&y?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||y?(r.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),x.setFeatureState(y,r.id,s)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,s){this._checkLoaded();const f=r.source,y=this.sourceCaches[f];if(y===void 0)return void this.fire(new o.k(new Error(`The source '${f}' does not exist in the map's style.`)));const x=y.getSource().type,T=x==="vector"?r.sourceLayer:void 0;x!=="vector"||T?s&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(T,r.id,s):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const s=r.source,f=r.sourceLayer,y=this.sourceCaches[s];if(y!==void 0)return y.getSource().type!=="vector"||f?(r.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),y.getFeatureState(f,r.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${s}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=o.bM(this.sourceCaches,x=>x.serialize()),s=this._serializeByIds(this._order,!0),f=this.map.getTerrain()||void 0,y=this.stylesheet;return o.bN({version:y.version,name:y.name,metadata:y.metadata,light:y.light,sky:y.sky,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,projection:y.projection,sources:r,layers:s,terrain:f},x=>x!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const s=T=>this._layers[T].type==="fill-extrusion",f={},y=[];for(let T=this._order.length-1;T>=0;T--){const k=this._order[T];if(s(k)){f[k]=T;for(const O of r){const N=O[k];if(N)for(const $ of N)y.push($)}}}y.sort((T,k)=>k.intersectionZ-T.intersectionZ);const x=[];for(let T=this._order.length-1;T>=0;T--){const k=this._order[T];if(s(k))for(let O=y.length-1;O>=0;O--){const N=y[O].feature;if(f[N.layer.id]<T)break;x.push(N),y.pop()}else for(const O of r){const N=O[k];if(N)for(const $ of N)x.push($.feature)}}return x}queryRenderedFeatures(r,s,f){s&&s.filter&&this._validate(o.z.filter,"queryRenderedFeatures.filter",s.filter,null,s);const y={};if(s&&s.layers){if(!(Array.isArray(s.layers)||s.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const N of s.layers){const $=this._layers[N];if(!$)return this.fire(new o.k(new Error(`The layer '${N}' does not exist in the map's style and cannot be queried for features.`))),[];y[$.source]=!0}}const x=[];s.availableImages=this._availableImages;const T=this._serializedAllLayers(),k=s.layers instanceof Set?s.layers:Array.isArray(s.layers)?new Set(s.layers):null,O=Object.assign(Object.assign({},s),{layers:k});for(const N in this.sourceCaches)s.layers&&!y[N]||x.push(lt(this.sourceCaches[N],this._layers,T,r,O,f,this.map.terrain?($,W,q)=>this.map.terrain.getElevation($,W,q):void 0));return this.placement&&x.push(function(N,$,W,q,K,re,ue){const de={},pe=re.queryRenderedSymbols(q),me=[];for(const we of Object.keys(pe).map(Number))me.push(ue[we]);me.sort(Qt);for(const we of me){const ye=we.featureIndex.lookupSymbolFeatures(pe[we.bucketInstanceId],$,we.bucketIndex,we.sourceLayerIndex,K.filter,K.layers,K.availableImages,N);for(const Te in ye){const Ee=de[Te]=de[Te]||[],ve=ye[Te];ve.sort((De,Ue)=>{const Ve=we.featureSortOrder;if(Ve){const Ge=Ve.indexOf(De.featureIndex);return Ve.indexOf(Ue.featureIndex)-Ge}return Ue.featureIndex-De.featureIndex});for(const De of ve)Ee.push(De)}}return function(we,ye,Te){for(const Ee in we)for(const ve of we[Ee])sr(ve,Te[ye[Ee].source]);return we}(de,N,W)}(this._layers,T,this.sourceCaches,r,O,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(r,s){s&&s.filter&&this._validate(o.z.filter,"querySourceFeatures.filter",s.filter,null,s);const f=this.sourceCaches[r];return f?function(y,x){const T=y.getRenderableIds().map(N=>y.getTileByID(N)),k=[],O={};for(let N=0;N<T.length;N++){const $=T[N],W=$.tileID.canonical.key;O[W]||(O[W]=!0,$.querySourceFeatures(k,x))}return k}(f,s):[]}getLight(){return this.light.getLight()}setLight(r,s={}){this._checkLoaded();const f=this.light.getLight();let y=!1;for(const T in r)if(!o.bG(r[T],f[T])){y=!0;break}if(!y)return;const x={now:R.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,s),this.light.updateTransitions(x)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,s={}){this._checkLoaded();const f=this.getSky();let y=!1;if(!r&&!f)return;if(r&&!f)y=!0;else if(!r&&f)y=!0;else for(const T in r)if(!o.bG(r[T],f[T])){y=!0;break}if(!y)return;const x={now:R.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,s),this.sky.updateTransitions(x)}_setProjectionInternal(r){const s=function(f){if(Array.isArray(f)){const y=new al({type:f});return{projection:y,transform:new ha,cameraHelper:new od(y)}}switch(f){case"mercator":return{projection:new qu,transform:new Dn,cameraHelper:new Wu};case"globe":{const y=new al({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:y,transform:new ha,cameraHelper:new od(y)}}case"vertical-perspective":return{projection:new id,transform:new Kl,cameraHelper:new mi};default:return o.w(`Unknown projection name: ${f}. Falling back to mercator projection.`),{projection:new qu,transform:new Dn,cameraHelper:new Wu}}}(r);this.projection=s.projection,this.map.migrateProjection(s.transform,s.cameraHelper);for(const f in this.sourceCaches)this.sourceCaches[f].reload()}_validate(r,s,f,y,x={}){return(!x||x.validate!==!1)&&Zu(this,r.call(o.z,o.e({key:s,style:this.serialize(),value:f,styleSpec:o.v},y)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ei().off(no,this._rtlPluginLoaded);for(const s in this._layers)this._layers[s].setEventedParent(null);for(const s in this.sourceCaches){const f=this.sourceCaches[s];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const s in this.sourceCaches)this.sourceCaches[s].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,s,f,y,x=!1){let T=!1,k=!1;const O={};for(const N of this._order){const $=this._layers[N];if($.type!=="symbol")continue;if(!O[$.source]){const q=this.sourceCaches[$.source];O[$.source]=q.getRenderableIds(!0).map(K=>q.getTileByID(K)).sort((K,re)=>re.tileID.overscaledZ-K.tileID.overscaledZ||(K.tileID.isLessThan(re.tileID)?-1:1))}const W=this.crossTileSymbolIndex.addLayer($,O[$.source],r.center.lng);T=T||W}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(R.now(),r.zoom))&&(this.pauseablePlacement=new oh(r,this.map.terrain,this._order,x,s,f,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(R.now()),k=!0),T&&this.pauseablePlacement.placement.setStale()),k||T)for(const N of this._order){const $=this._layers[N];$.type==="symbol"&&this.placement.updateLayerOpacities($,O[$.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(R.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,s){return o._(this,void 0,void 0,function*(){const f=yield this.imageManager.getImages(s.icons);this._updateTilesForChangedImages();const y=this.sourceCaches[s.source];return y&&y.setDependencies(s.tileID.key,s.type,s.icons),f})}getGlyphs(r,s){return o._(this,void 0,void 0,function*(){const f=yield this.glyphManager.getGlyphs(s.stacks),y=this.sourceCaches[s.source];return y&&y.setDependencies(s.tileID.key,s.type,[""]),f})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,s={}){this._checkLoaded(),r&&this._validate(o.z.glyphs,"glyphs",r,null,s)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,s,f={},y){this._checkLoaded();const x=[{id:r,url:s}],T=[...Ae(this.stylesheet.sprite),...x];this._validate(o.z.sprite,"sprite",T,null,f)||(this.stylesheet.sprite=T,this._loadSprite(x,!0,y))}removeSprite(r){this._checkLoaded();const s=Ae(this.stylesheet.sprite);if(s.find(f=>f.id===r)){if(this._spritesImagesIds[r])for(const f of this._spritesImagesIds[r])this.imageManager.removeImage(f),this._changedImages[f]=!0;s.splice(s.findIndex(f=>f.id===r),1),this.stylesheet.sprite=s.length>0?s:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return Ae(this.stylesheet.sprite)}setSprite(r,s={},f){this._checkLoaded(),r&&this._validate(o.z.sprite,"sprite",r,null,s)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,f):(this._unloadSprite(),f&&f(null)))}}var em=o.aI([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Af{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,s,f,y,x,T,k,O,N){this.context=r;let $=this.boundPaintVertexBuffers.length!==y.length;for(let W=0;!$&&W<y.length;W++)this.boundPaintVertexBuffers[W]!==y[W]&&($=!0);!this.vao||this.boundProgram!==s||this.boundLayoutVertexBuffer!==f||$||this.boundIndexBuffer!==x||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==O||this.boundDynamicVertexBuffer3!==N?this.freshBind(s,f,y,x,T,k,O,N):(r.bindVertexArray.set(this.vao),k&&k.bind(),x&&x.dynamicDraw&&x.bind(),O&&O.bind(),N&&N.bind())}freshBind(r,s,f,y,x,T,k,O){const N=r.numAttributes,$=this.context,W=$.gl;this.vao&&this.destroy(),this.vao=$.createVertexArray(),$.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=y,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=O,s.enableAttributes(W,r);for(const q of f)q.enableAttributes(W,r);T&&T.enableAttributes(W,r),k&&k.enableAttributes(W,r),O&&O.enableAttributes(W,r),s.bind(),s.setVertexAttribPointers(W,r,x);for(const q of f)q.bind(),q.setVertexAttribPointers(W,r,x);T&&(T.bind(),T.setVertexAttribPointers(W,r,x)),y&&y.bind(),k&&(k.bind(),k.setVertexAttribPointers(W,r,x)),O&&(O.bind(),O.setVertexAttribPointers(W,r,x)),$.currentNumAttributes=N}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const tm=(_,r,s,f,y)=>({u_texture:0,u_ele_delta:_,u_fog_matrix:r,u_fog_color:s?s.properties.get("fog-color"):o.be.white,u_fog_ground_blend:s?s.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:y?0:s?s.calculateFogBlendOpacity(f):0,u_horizon_color:s?s.properties.get("horizon-color"):o.be.white,u_horizon_fog_blend:s?s.properties.get("horizon-fog-blend"):1,u_is_globe_mode:y?1:0}),rm={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function lh(_){const r=[];for(let s=0;s<_.length;s++){if(_[s]===null)continue;const f=_[s].split(" ");r.push(f.pop())}return r}class uh{constructor(r,s,f,y,x,T,k,O,N=[]){const $=r.gl;this.program=$.createProgram();const W=lh(s.staticAttributes),q=f?f.getBinderAttributes():[],K=W.concat(q),re=$a.prelude.staticUniforms?lh($a.prelude.staticUniforms):[],ue=k.staticUniforms?lh(k.staticUniforms):[],de=s.staticUniforms?lh(s.staticUniforms):[],pe=f?f.getBinderUniforms():[],me=re.concat(ue).concat(de).concat(pe),we=[];for(const Ve of me)we.indexOf(Ve)<0&&we.push(Ve);const ye=f?f.defines():[];Ii($)&&ye.unshift("#version 300 es"),x&&ye.push("#define OVERDRAW_INSPECTOR;"),T&&ye.push("#define TERRAIN3D;"),O&&ye.push(O),N&&ye.push(...N);let Te=ye.concat($a.prelude.fragmentSource,k.fragmentSource,s.fragmentSource).join(`
`),Ee=ye.concat($a.prelude.vertexSource,k.vertexSource,s.vertexSource).join(`
`);Ii($)||(Te=function(Ve){return Ve.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Te),Ee=function(Ve){return Ve.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Ee));const ve=$.createShader($.FRAGMENT_SHADER);if($.isContextLost())return void(this.failedToCreate=!0);if($.shaderSource(ve,Te),$.compileShader(ve),!$.getShaderParameter(ve,$.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${$.getShaderInfoLog(ve)}`);$.attachShader(this.program,ve);const De=$.createShader($.VERTEX_SHADER);if($.isContextLost())return void(this.failedToCreate=!0);if($.shaderSource(De,Ee),$.compileShader(De),!$.getShaderParameter(De,$.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${$.getShaderInfoLog(De)}`);$.attachShader(this.program,De),this.attributes={};const Ue={};this.numAttributes=K.length;for(let Ve=0;Ve<this.numAttributes;Ve++)K[Ve]&&($.bindAttribLocation(this.program,Ve,K[Ve]),this.attributes[K[Ve]]=Ve);if($.linkProgram(this.program),!$.getProgramParameter(this.program,$.LINK_STATUS))throw new Error(`Program failed to link: ${$.getProgramInfoLog(this.program)}`);$.deleteShader(De),$.deleteShader(ve);for(let Ve=0;Ve<we.length;Ve++){const Ge=we[Ve];if(Ge&&!Ue[Ge]){const He=$.getUniformLocation(this.program,Ge);He&&(Ue[Ge]=He)}}this.fixedUniforms=y(r,Ue),this.terrainUniforms=((Ve,Ge)=>({u_depth:new o.bO(Ve,Ge.u_depth),u_terrain:new o.bO(Ve,Ge.u_terrain),u_terrain_dim:new o.bf(Ve,Ge.u_terrain_dim),u_terrain_matrix:new o.bQ(Ve,Ge.u_terrain_matrix),u_terrain_unpack:new o.bR(Ve,Ge.u_terrain_unpack),u_terrain_exaggeration:new o.bf(Ve,Ge.u_terrain_exaggeration)}))(r,Ue),this.projectionUniforms=((Ve,Ge)=>({u_projection_matrix:new o.bQ(Ve,Ge.u_projection_matrix),u_projection_tile_mercator_coords:new o.bR(Ve,Ge.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bR(Ve,Ge.u_projection_clipping_plane),u_projection_transition:new o.bf(Ve,Ge.u_projection_transition),u_projection_fallback_matrix:new o.bQ(Ve,Ge.u_projection_fallback_matrix)}))(r,Ue),this.binderUniforms=f?f.getUniforms(r,Ue):[]}draw(r,s,f,y,x,T,k,O,N,$,W,q,K,re,ue,de,pe,me,we){const ye=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(y),r.setColorMode(x),r.setCullFace(T),O){r.activeTexture.set(ye.TEXTURE2),ye.bindTexture(ye.TEXTURE_2D,O.depthTexture),r.activeTexture.set(ye.TEXTURE3),ye.bindTexture(ye.TEXTURE_2D,O.texture);for(const Ee in this.terrainUniforms)this.terrainUniforms[Ee].set(O[Ee])}if(N)for(const Ee in N)this.projectionUniforms[rm[Ee]].set(N[Ee]);if(k)for(const Ee in this.fixedUniforms)this.fixedUniforms[Ee].set(k[Ee]);de&&de.setUniforms(r,this.binderUniforms,re,{zoom:ue});let Te=0;switch(s){case ye.LINES:Te=2;break;case ye.TRIANGLES:Te=3;break;case ye.LINE_STRIP:Te=1}for(const Ee of K.get()){const ve=Ee.vaos||(Ee.vaos={});(ve[$]||(ve[$]=new Af)).bind(r,this,W,de?de.getPaintVertexBuffers():[],q,Ee.vertexOffset,pe,me,we),ye.drawElements(s,Ee.primitiveLength*Te,ye.UNSIGNED_SHORT,Ee.primitiveOffset*Te*2)}}}function Yl(_,r,s){const f=1/o.aB(s,1,r.transform.tileZoom),y=Math.pow(2,s.tileID.overscaledZ),x=s.tileSize*Math.pow(2,r.transform.tileZoom)/y,T=x*(s.tileID.canonical.x+s.tileID.wrap*y),k=x*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_scale:[f,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[T>>16,k>>16],u_pixel_coord_lower:[65535&T,65535&k]}}const Hu=(_,r,s,f)=>{const y=_.style.light,x=y.properties.get("position"),T=[x.x,x.y,x.z],k=o.bU();y.properties.get("anchor")==="viewport"&&o.bV(k,_.transform.bearingInRadians),o.bW(T,T,k);const O=_.transform.transformLightDirection(T),N=y.properties.get("color");return{u_lightpos:T,u_lightpos_globe:O,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[N.r,N.g,N.b],u_vertical_gradient:+r,u_opacity:s,u_fill_translate:f}},ld=(_,r,s,f,y,x,T)=>o.e(Hu(_,r,s,f),Yl(x,_,T),{u_height_factor:-Math.pow(2,y.overscaledZ)/T.tileSize/8}),ch=(_,r,s,f)=>o.e(Yl(r,_,s),{u_fill_translate:f}),Ga=(_,r)=>({u_world:_,u_fill_translate:r}),nm=(_,r,s,f,y)=>o.e(ch(_,r,s,y),{u_world:f}),ud=(_,r,s,f,y)=>{const x=_.transform;let T,k,O=0;if(s.paint.get("circle-pitch-alignment")==="map"){const N=o.aB(r,1,x.zoom);T=!0,k=[N,N],O=N/(o.$*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*y}else T=!1,k=x.pixelsToGLUnits;return{u_camera_to_center_distance:x.cameraToCenterDistance,u_scale_with_map:+(s.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+T,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:k,u_globe_extrude_scale:O,u_translate:f}},Ku=_=>({u_pixel_extrude_scale:[1/_.width,1/_.height]}),Xu=_=>({u_viewport_size:[_.width,_.height]}),If=(_,r=1)=>({u_color:_,u_overlay:0,u_overlay_scale:r}),Yu=(_,r,s,f)=>{const y=o.aB(_,1,r)/(o.$*Math.pow(2,_.tileID.overscaledZ))*2*Math.PI*f;return{u_extrude_scale:o.aB(_,1,r),u_intensity:s,u_globe_extrude_scale:y}},kf=(_,r,s,f)=>{const y=o.L();o.bX(y,0,_.width,_.height,0,0,1);const x=_.context.gl;return{u_matrix:y,u_world:[x.drawingBufferWidth,x.drawingBufferHeight],u_image:s,u_color_ramp:f,u_opacity:r.paint.get("heatmap-opacity")}},ps=(_,r,s)=>{const f=s.paint.get("hillshade-accent-color");let y;switch(s.paint.get("hillshade-method")){case"basic":y=4;break;case"combined":y=1;break;case"igor":y=2;break;case"multidirectional":y=3;break;default:y=0}const x=s.getIlluminationProperties();for(let T=0;T<x.directionRadians.length;T++)s.paint.get("hillshade-illumination-anchor")==="viewport"&&(x.directionRadians[T]+=_.transform.bearingInRadians);return{u_image:0,u_latrange:Df(0,r.tileID),u_exaggeration:s.paint.get("hillshade-exaggeration"),u_altitudes:x.altitudeRadians,u_azimuths:x.directionRadians,u_accent:f,u_method:y,u_highlights:x.highlightColor,u_shadows:x.shadowColor}},Qu=(_,r)=>{const s=r.stride,f=o.L();return o.bX(f,0,o.$,-8192,0,0,1),o.M(f,f,[0,-8192,0]),{u_matrix:f,u_image:1,u_dimension:[s,s],u_zoom:_.overscaledZ,u_unpack:r.getUnpackVector()}};function Df(_,r){const s=Math.pow(2,r.canonical.z),f=r.canonical.y;return[new o.a0(0,f/s).toLngLat().lat,new o.a0(0,(f+1)/s).toLngLat().lat]}const Of=(_,r)=>({u_image:0,u_unpack:r.getUnpackVector(),u_dimension:[r.stride,r.stride],u_elevation_stops:1,u_color_stops:4,u_opacity:_.paint.get("color-relief-opacity")}),Ju=(_,r,s,f)=>{const y=_.transform;return{u_translation:dd(_,r,s),u_ratio:f/o.aB(r,1,y.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},hh=(_,r,s,f,y)=>o.e(Ju(_,r,s,f),{u_image:0,u_image_height:y}),cd=(_,r,s,f,y)=>{const x=_.transform,T=ms(r,x);return{u_translation:dd(_,r,s),u_texsize:r.imageAtlasTexture.size,u_ratio:f/o.aB(r,1,x.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[T,y.fromScale,y.toScale],u_fade:y.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},hd=(_,r,s,f,y,x)=>{const T=_.lineAtlas,k=ms(r,_.transform),O=s.layout.get("line-cap")==="round",N=T.getDash(y.from,O),$=T.getDash(y.to,O),W=N.width*x.fromScale,q=$.width*x.toScale;return o.e(Ju(_,r,s,f),{u_patternscale_a:[k/W,-N.height/2],u_patternscale_b:[k/q,-$.height/2],u_sdfgamma:T.width/(256*Math.min(W,q)*_.pixelRatio)/2,u_image:0,u_tex_y_a:N.y,u_tex_y_b:$.y,u_mix:x.t})};function ms(_,r){return 1/o.aB(_,1,r.tileZoom)}function dd(_,r,s){return o.aC(_.transform,r,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}const sl=(_,r,s,f,y)=>{return{u_tl_parent:_,u_scale_parent:r,u_buffer_scale:1,u_fade_t:s.mix,u_opacity:s.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(T=f.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(x=f.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:Rf(f.paint.get("raster-hue-rotate")),u_coords_top:[y[0].x,y[0].y,y[1].x,y[1].y],u_coords_bottom:[y[3].x,y[3].y,y[2].x,y[2].y]};var x,T};function Rf(_){_*=Math.PI/180;const r=Math.sin(_),s=Math.cos(_);return[(2*s+1)/3,(-Math.sqrt(3)*r-s+1)/3,(Math.sqrt(3)*r-s+1)/3]}const dh=(_,r,s,f,y,x,T,k,O,N,$,W,q)=>{const K=T.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_pitch:K.pitch/360*2*Math.PI,u_rotate_symbol:+s,u_aspect_ratio:K.width/K.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_label_plane_matrix:k,u_coord_matrix:O,u_is_text:+$,u_pitch_with_map:+f,u_is_along_line:y,u_is_variable_anchor:x,u_texsize:W,u_texture:0,u_translation:N,u_pitched_scale:q}},ll=(_,r,s,f,y,x,T,k,O,N,$,W,q,K)=>{const re=T.transform;return o.e(dh(_,r,s,f,y,x,T,k,O,N,$,W,K),{u_gamma_scale:f?Math.cos(re.pitch*Math.PI/180)*re.cameraToCenterDistance:1,u_device_pixel_ratio:T.pixelRatio,u_is_halo:1})},ec=(_,r,s,f,y,x,T,k,O,N,$,W,q)=>o.e(ll(_,r,s,f,y,x,T,k,O,N,!0,$,0,q),{u_texsize_icon:W,u_texture_icon:1}),gs=(_,r)=>({u_opacity:_,u_color:r}),im=(_,r,s,f,y)=>o.e(function(x,T,k,O){const N=k.imageManager.getPattern(x.from.toString()),$=k.imageManager.getPattern(x.to.toString()),{width:W,height:q}=k.imageManager.getPixelSize(),K=Math.pow(2,O.tileID.overscaledZ),re=O.tileSize*Math.pow(2,k.transform.tileZoom)/K,ue=re*(O.tileID.canonical.x+O.tileID.wrap*K),de=re*O.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:N.tl,u_pattern_br_a:N.br,u_pattern_tl_b:$.tl,u_pattern_br_b:$.br,u_texsize:[W,q],u_mix:T.t,u_pattern_size_a:N.displaySize,u_pattern_size_b:$.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/o.aB(O,1,k.transform.tileZoom),u_pixel_coord_upper:[ue>>16,de>>16],u_pixel_coord_lower:[65535&ue,65535&de]}}(s,y,r,f),{u_opacity:_}),tc=(_,r)=>{},zf={fillExtrusion:(_,r)=>({u_lightpos:new o.bS(_,r.u_lightpos),u_lightpos_globe:new o.bS(_,r.u_lightpos_globe),u_lightintensity:new o.bf(_,r.u_lightintensity),u_lightcolor:new o.bS(_,r.u_lightcolor),u_vertical_gradient:new o.bf(_,r.u_vertical_gradient),u_opacity:new o.bf(_,r.u_opacity),u_fill_translate:new o.bT(_,r.u_fill_translate)}),fillExtrusionPattern:(_,r)=>({u_lightpos:new o.bS(_,r.u_lightpos),u_lightpos_globe:new o.bS(_,r.u_lightpos_globe),u_lightintensity:new o.bf(_,r.u_lightintensity),u_lightcolor:new o.bS(_,r.u_lightcolor),u_vertical_gradient:new o.bf(_,r.u_vertical_gradient),u_height_factor:new o.bf(_,r.u_height_factor),u_opacity:new o.bf(_,r.u_opacity),u_fill_translate:new o.bT(_,r.u_fill_translate),u_image:new o.bO(_,r.u_image),u_texsize:new o.bT(_,r.u_texsize),u_pixel_coord_upper:new o.bT(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.bT(_,r.u_pixel_coord_lower),u_scale:new o.bS(_,r.u_scale),u_fade:new o.bf(_,r.u_fade)}),fill:(_,r)=>({u_fill_translate:new o.bT(_,r.u_fill_translate)}),fillPattern:(_,r)=>({u_image:new o.bO(_,r.u_image),u_texsize:new o.bT(_,r.u_texsize),u_pixel_coord_upper:new o.bT(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.bT(_,r.u_pixel_coord_lower),u_scale:new o.bS(_,r.u_scale),u_fade:new o.bf(_,r.u_fade),u_fill_translate:new o.bT(_,r.u_fill_translate)}),fillOutline:(_,r)=>({u_world:new o.bT(_,r.u_world),u_fill_translate:new o.bT(_,r.u_fill_translate)}),fillOutlinePattern:(_,r)=>({u_world:new o.bT(_,r.u_world),u_image:new o.bO(_,r.u_image),u_texsize:new o.bT(_,r.u_texsize),u_pixel_coord_upper:new o.bT(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.bT(_,r.u_pixel_coord_lower),u_scale:new o.bS(_,r.u_scale),u_fade:new o.bf(_,r.u_fade),u_fill_translate:new o.bT(_,r.u_fill_translate)}),circle:(_,r)=>({u_camera_to_center_distance:new o.bf(_,r.u_camera_to_center_distance),u_scale_with_map:new o.bO(_,r.u_scale_with_map),u_pitch_with_map:new o.bO(_,r.u_pitch_with_map),u_extrude_scale:new o.bT(_,r.u_extrude_scale),u_device_pixel_ratio:new o.bf(_,r.u_device_pixel_ratio),u_globe_extrude_scale:new o.bf(_,r.u_globe_extrude_scale),u_translate:new o.bT(_,r.u_translate)}),collisionBox:(_,r)=>({u_pixel_extrude_scale:new o.bT(_,r.u_pixel_extrude_scale)}),collisionCircle:(_,r)=>({u_viewport_size:new o.bT(_,r.u_viewport_size)}),debug:(_,r)=>({u_color:new o.bP(_,r.u_color),u_overlay:new o.bO(_,r.u_overlay),u_overlay_scale:new o.bf(_,r.u_overlay_scale)}),depth:tc,clippingMask:tc,heatmap:(_,r)=>({u_extrude_scale:new o.bf(_,r.u_extrude_scale),u_intensity:new o.bf(_,r.u_intensity),u_globe_extrude_scale:new o.bf(_,r.u_globe_extrude_scale)}),heatmapTexture:(_,r)=>({u_matrix:new o.bQ(_,r.u_matrix),u_world:new o.bT(_,r.u_world),u_image:new o.bO(_,r.u_image),u_color_ramp:new o.bO(_,r.u_color_ramp),u_opacity:new o.bf(_,r.u_opacity)}),hillshade:(_,r)=>({u_image:new o.bO(_,r.u_image),u_latrange:new o.bT(_,r.u_latrange),u_exaggeration:new o.bf(_,r.u_exaggeration),u_altitudes:new o.bZ(_,r.u_altitudes),u_azimuths:new o.bZ(_,r.u_azimuths),u_accent:new o.bP(_,r.u_accent),u_method:new o.bO(_,r.u_method),u_shadows:new o.bY(_,r.u_shadows),u_highlights:new o.bY(_,r.u_highlights)}),hillshadePrepare:(_,r)=>({u_matrix:new o.bQ(_,r.u_matrix),u_image:new o.bO(_,r.u_image),u_dimension:new o.bT(_,r.u_dimension),u_zoom:new o.bf(_,r.u_zoom),u_unpack:new o.bR(_,r.u_unpack)}),colorRelief:(_,r)=>({u_image:new o.bO(_,r.u_image),u_unpack:new o.bR(_,r.u_unpack),u_dimension:new o.bT(_,r.u_dimension),u_elevation_stops:new o.bO(_,r.u_elevation_stops),u_color_stops:new o.bO(_,r.u_color_stops),u_opacity:new o.bf(_,r.u_opacity)}),line:(_,r)=>({u_translation:new o.bT(_,r.u_translation),u_ratio:new o.bf(_,r.u_ratio),u_device_pixel_ratio:new o.bf(_,r.u_device_pixel_ratio),u_units_to_pixels:new o.bT(_,r.u_units_to_pixels)}),lineGradient:(_,r)=>({u_translation:new o.bT(_,r.u_translation),u_ratio:new o.bf(_,r.u_ratio),u_device_pixel_ratio:new o.bf(_,r.u_device_pixel_ratio),u_units_to_pixels:new o.bT(_,r.u_units_to_pixels),u_image:new o.bO(_,r.u_image),u_image_height:new o.bf(_,r.u_image_height)}),linePattern:(_,r)=>({u_translation:new o.bT(_,r.u_translation),u_texsize:new o.bT(_,r.u_texsize),u_ratio:new o.bf(_,r.u_ratio),u_device_pixel_ratio:new o.bf(_,r.u_device_pixel_ratio),u_image:new o.bO(_,r.u_image),u_units_to_pixels:new o.bT(_,r.u_units_to_pixels),u_scale:new o.bS(_,r.u_scale),u_fade:new o.bf(_,r.u_fade)}),lineSDF:(_,r)=>({u_translation:new o.bT(_,r.u_translation),u_ratio:new o.bf(_,r.u_ratio),u_device_pixel_ratio:new o.bf(_,r.u_device_pixel_ratio),u_units_to_pixels:new o.bT(_,r.u_units_to_pixels),u_patternscale_a:new o.bT(_,r.u_patternscale_a),u_patternscale_b:new o.bT(_,r.u_patternscale_b),u_sdfgamma:new o.bf(_,r.u_sdfgamma),u_image:new o.bO(_,r.u_image),u_tex_y_a:new o.bf(_,r.u_tex_y_a),u_tex_y_b:new o.bf(_,r.u_tex_y_b),u_mix:new o.bf(_,r.u_mix)}),raster:(_,r)=>({u_tl_parent:new o.bT(_,r.u_tl_parent),u_scale_parent:new o.bf(_,r.u_scale_parent),u_buffer_scale:new o.bf(_,r.u_buffer_scale),u_fade_t:new o.bf(_,r.u_fade_t),u_opacity:new o.bf(_,r.u_opacity),u_image0:new o.bO(_,r.u_image0),u_image1:new o.bO(_,r.u_image1),u_brightness_low:new o.bf(_,r.u_brightness_low),u_brightness_high:new o.bf(_,r.u_brightness_high),u_saturation_factor:new o.bf(_,r.u_saturation_factor),u_contrast_factor:new o.bf(_,r.u_contrast_factor),u_spin_weights:new o.bS(_,r.u_spin_weights),u_coords_top:new o.bR(_,r.u_coords_top),u_coords_bottom:new o.bR(_,r.u_coords_bottom)}),symbolIcon:(_,r)=>({u_is_size_zoom_constant:new o.bO(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bO(_,r.u_is_size_feature_constant),u_size_t:new o.bf(_,r.u_size_t),u_size:new o.bf(_,r.u_size),u_camera_to_center_distance:new o.bf(_,r.u_camera_to_center_distance),u_pitch:new o.bf(_,r.u_pitch),u_rotate_symbol:new o.bO(_,r.u_rotate_symbol),u_aspect_ratio:new o.bf(_,r.u_aspect_ratio),u_fade_change:new o.bf(_,r.u_fade_change),u_label_plane_matrix:new o.bQ(_,r.u_label_plane_matrix),u_coord_matrix:new o.bQ(_,r.u_coord_matrix),u_is_text:new o.bO(_,r.u_is_text),u_pitch_with_map:new o.bO(_,r.u_pitch_with_map),u_is_along_line:new o.bO(_,r.u_is_along_line),u_is_variable_anchor:new o.bO(_,r.u_is_variable_anchor),u_texsize:new o.bT(_,r.u_texsize),u_texture:new o.bO(_,r.u_texture),u_translation:new o.bT(_,r.u_translation),u_pitched_scale:new o.bf(_,r.u_pitched_scale)}),symbolSDF:(_,r)=>({u_is_size_zoom_constant:new o.bO(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bO(_,r.u_is_size_feature_constant),u_size_t:new o.bf(_,r.u_size_t),u_size:new o.bf(_,r.u_size),u_camera_to_center_distance:new o.bf(_,r.u_camera_to_center_distance),u_pitch:new o.bf(_,r.u_pitch),u_rotate_symbol:new o.bO(_,r.u_rotate_symbol),u_aspect_ratio:new o.bf(_,r.u_aspect_ratio),u_fade_change:new o.bf(_,r.u_fade_change),u_label_plane_matrix:new o.bQ(_,r.u_label_plane_matrix),u_coord_matrix:new o.bQ(_,r.u_coord_matrix),u_is_text:new o.bO(_,r.u_is_text),u_pitch_with_map:new o.bO(_,r.u_pitch_with_map),u_is_along_line:new o.bO(_,r.u_is_along_line),u_is_variable_anchor:new o.bO(_,r.u_is_variable_anchor),u_texsize:new o.bT(_,r.u_texsize),u_texture:new o.bO(_,r.u_texture),u_gamma_scale:new o.bf(_,r.u_gamma_scale),u_device_pixel_ratio:new o.bf(_,r.u_device_pixel_ratio),u_is_halo:new o.bO(_,r.u_is_halo),u_translation:new o.bT(_,r.u_translation),u_pitched_scale:new o.bf(_,r.u_pitched_scale)}),symbolTextAndIcon:(_,r)=>({u_is_size_zoom_constant:new o.bO(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bO(_,r.u_is_size_feature_constant),u_size_t:new o.bf(_,r.u_size_t),u_size:new o.bf(_,r.u_size),u_camera_to_center_distance:new o.bf(_,r.u_camera_to_center_distance),u_pitch:new o.bf(_,r.u_pitch),u_rotate_symbol:new o.bO(_,r.u_rotate_symbol),u_aspect_ratio:new o.bf(_,r.u_aspect_ratio),u_fade_change:new o.bf(_,r.u_fade_change),u_label_plane_matrix:new o.bQ(_,r.u_label_plane_matrix),u_coord_matrix:new o.bQ(_,r.u_coord_matrix),u_is_text:new o.bO(_,r.u_is_text),u_pitch_with_map:new o.bO(_,r.u_pitch_with_map),u_is_along_line:new o.bO(_,r.u_is_along_line),u_is_variable_anchor:new o.bO(_,r.u_is_variable_anchor),u_texsize:new o.bT(_,r.u_texsize),u_texsize_icon:new o.bT(_,r.u_texsize_icon),u_texture:new o.bO(_,r.u_texture),u_texture_icon:new o.bO(_,r.u_texture_icon),u_gamma_scale:new o.bf(_,r.u_gamma_scale),u_device_pixel_ratio:new o.bf(_,r.u_device_pixel_ratio),u_is_halo:new o.bO(_,r.u_is_halo),u_translation:new o.bT(_,r.u_translation),u_pitched_scale:new o.bf(_,r.u_pitched_scale)}),background:(_,r)=>({u_opacity:new o.bf(_,r.u_opacity),u_color:new o.bP(_,r.u_color)}),backgroundPattern:(_,r)=>({u_opacity:new o.bf(_,r.u_opacity),u_image:new o.bO(_,r.u_image),u_pattern_tl_a:new o.bT(_,r.u_pattern_tl_a),u_pattern_br_a:new o.bT(_,r.u_pattern_br_a),u_pattern_tl_b:new o.bT(_,r.u_pattern_tl_b),u_pattern_br_b:new o.bT(_,r.u_pattern_br_b),u_texsize:new o.bT(_,r.u_texsize),u_mix:new o.bf(_,r.u_mix),u_pattern_size_a:new o.bT(_,r.u_pattern_size_a),u_pattern_size_b:new o.bT(_,r.u_pattern_size_b),u_scale_a:new o.bf(_,r.u_scale_a),u_scale_b:new o.bf(_,r.u_scale_b),u_pixel_coord_upper:new o.bT(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.bT(_,r.u_pixel_coord_lower),u_tile_units_to_pixels:new o.bf(_,r.u_tile_units_to_pixels)}),terrain:(_,r)=>({u_texture:new o.bO(_,r.u_texture),u_ele_delta:new o.bf(_,r.u_ele_delta),u_fog_matrix:new o.bQ(_,r.u_fog_matrix),u_fog_color:new o.bP(_,r.u_fog_color),u_fog_ground_blend:new o.bf(_,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.bf(_,r.u_fog_ground_blend_opacity),u_horizon_color:new o.bP(_,r.u_horizon_color),u_horizon_fog_blend:new o.bf(_,r.u_horizon_fog_blend),u_is_globe_mode:new o.bf(_,r.u_is_globe_mode)}),terrainDepth:(_,r)=>({u_ele_delta:new o.bf(_,r.u_ele_delta)}),terrainCoords:(_,r)=>({u_texture:new o.bO(_,r.u_texture),u_terrain_coords_id:new o.bf(_,r.u_terrain_coords_id),u_ele_delta:new o.bf(_,r.u_ele_delta)}),projectionErrorMeasurement:(_,r)=>({u_input:new o.bf(_,r.u_input),u_output_expected:new o.bf(_,r.u_output_expected)}),atmosphere:(_,r)=>({u_sun_pos:new o.bS(_,r.u_sun_pos),u_atmosphere_blend:new o.bf(_,r.u_atmosphere_blend),u_globe_position:new o.bS(_,r.u_globe_position),u_globe_radius:new o.bf(_,r.u_globe_radius),u_inv_proj_matrix:new o.bQ(_,r.u_inv_proj_matrix)}),sky:(_,r)=>({u_sky_color:new o.bP(_,r.u_sky_color),u_horizon_color:new o.bP(_,r.u_horizon_color),u_horizon:new o.bT(_,r.u_horizon),u_horizon_normal:new o.bT(_,r.u_horizon_normal),u_sky_horizon_blend:new o.bf(_,r.u_sky_horizon_blend),u_sky_blend:new o.bf(_,r.u_sky_blend)})};class fd{constructor(r,s,f){this.context=r;const y=r.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const s=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const fh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class rc{constructor(r,s,f,y){this.length=s.length,this.attributes=f,this.itemSize=s.bytesPerElement,this.dynamicDraw=y,this.context=r;const x=r.gl;this.buffer=x.createBuffer(),r.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,s){for(let f=0;f<this.attributes.length;f++){const y=s.attributes[this.attributes[f].name];y!==void 0&&r.enableVertexAttribArray(y)}}setVertexAttribPointers(r,s,f){for(let y=0;y<this.attributes.length;y++){const x=this.attributes[y],T=s.attributes[x.name];T!==void 0&&r.vertexAttribPointer(T,x.components,r[fh[x.type]],!1,this.itemSize,x.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Dr{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class nc extends Dr{getDefault(){return o.be.transparent}set(r){const s=this.current;(r.r!==s.r||r.g!==s.g||r.b!==s.b||r.a!==s.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class co extends Dr{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class pd extends Dr{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class md extends Dr{getDefault(){return[!0,!0,!0,!0]}set(r){const s=this.current;(r[0]!==s[0]||r[1]!==s[1]||r[2]!==s[2]||r[3]!==s[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class gd extends Dr{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Lf extends Dr{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class yd extends Dr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const s=this.current;(r.func!==s.func||r.ref!==s.ref||r.mask!==s.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class oi extends Dr{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const s=this.current;(r[0]!==s[0]||r[1]!==s[1]||r[2]!==s[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class ul extends Dr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;r?s.enable(s.STENCIL_TEST):s.disable(s.STENCIL_TEST),this.current=r,this.dirty=!1}}class jf extends Dr{getDefault(){return[0,1]}set(r){const s=this.current;(r[0]!==s[0]||r[1]!==s[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Nf extends Dr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;r?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST),this.current=r,this.dirty=!1}}class Ff extends Dr{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Bf extends Dr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;r?s.enable(s.BLEND):s.disable(s.BLEND),this.current=r,this.dirty=!1}}class ph extends Dr{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const s=this.current;(r[0]!==s[0]||r[1]!==s[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class am extends Dr{getDefault(){return o.be.transparent}set(r){const s=this.current;(r.r!==s.r||r.g!==s.g||r.b!==s.b||r.a!==s.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class $f extends Dr{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Do extends Dr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;r?s.enable(s.CULL_FACE):s.disable(s.CULL_FACE),this.current=r,this.dirty=!1}}class Ql extends Dr{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class ys extends Dr{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class ic extends Dr{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class vs extends Dr{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class _s extends Dr{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const s=this.current;(r[0]!==s[0]||r[1]!==s[1]||r[2]!==s[2]||r[3]!==s[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class qa extends Dr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;s.bindFramebuffer(s.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Zi extends Dr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;s.bindRenderbuffer(s.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class vd extends Dr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;s.bindTexture(s.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class ac extends Dr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;s.bindBuffer(s.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class mh extends Dr{getDefault(){return null}set(r){const s=this.gl;s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class xs extends Dr{getDefault(){return null}set(r){var s;if(r===this.current&&!this.dirty)return;const f=this.gl;Ii(f)?f.bindVertexArray(r):(s=f.getExtension("OES_vertex_array_object"))===null||s===void 0||s.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class oc extends Dr{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class sc extends Dr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Jl extends Dr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class cl extends Dr{constructor(r,s){super(r),this.context=r,this.parent=s}getDefault(){return null}}class Oo extends cl{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class bs extends cl{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class ws extends cl{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,r),this.current=r,this.dirty=!1}}const _d="Framebuffer is not complete";class xd{constructor(r,s,f,y,x){this.context=r,this.width=s,this.height=f;const T=r.gl,k=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new Oo(r,k),y)this.depthAttachment=x?new ws(r,k):new bs(r,k);else if(x)throw new Error("Stencil cannot be set without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error(_d)}destroy(){const r=this.context.gl,s=this.colorAttachment.get();if(s&&r.deleteTexture(s),this.depthAttachment){const f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)}}class mr{constructor(r){var s,f;if(this.gl=r,this.clearColor=new nc(this),this.clearDepth=new co(this),this.clearStencil=new pd(this),this.colorMask=new md(this),this.depthMask=new gd(this),this.stencilMask=new Lf(this),this.stencilFunc=new yd(this),this.stencilOp=new oi(this),this.stencilTest=new ul(this),this.depthRange=new jf(this),this.depthTest=new Nf(this),this.depthFunc=new Ff(this),this.blend=new Bf(this),this.blendFunc=new ph(this),this.blendColor=new am(this),this.blendEquation=new $f(this),this.cullFace=new Do(this),this.cullFaceSide=new Ql(this),this.frontFace=new ys(this),this.program=new ic(this),this.activeTexture=new vs(this),this.viewport=new _s(this),this.bindFramebuffer=new qa(this),this.bindRenderbuffer=new Zi(this),this.bindTexture=new vd(this),this.bindVertexBuffer=new ac(this),this.bindElementBuffer=new mh(this),this.bindVertexArray=new xs(this),this.pixelStoreUnpack=new oc(this),this.pixelStoreUnpackPremultiplyAlpha=new sc(this),this.pixelStoreUnpackFlipY=new Jl(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Ii(r)){this.HALF_FLOAT=r.HALF_FLOAT;const y=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(s=r.RGBA16F)!==null&&s!==void 0?s:y?.RGBA16F_EXT,this.RGB16F=(f=r.RGB16F)!==null&&f!==void 0?f:y?.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const y=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=y?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,s){return new fd(this,r,s)}createVertexBuffer(r,s,f){return new rc(this,r,s,f)}createRenderbuffer(r,s,f){const y=this.gl,x=y.createRenderbuffer();return this.bindRenderbuffer.set(x),y.renderbufferStorage(y.RENDERBUFFER,r,s,f),this.bindRenderbuffer.set(null),x}createFramebuffer(r,s,f,y){return new xd(this,r,s,f,y)}clear({color:r,depth:s,stencil:f}){const y=this.gl;let x=0;r&&(x|=y.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),s!==void 0&&(x|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(s),this.depthMask.set(!0)),f!==void 0&&(x|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),y.clear(x)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){o.bG(r.blendFunction,Sr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Ii(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var s;return Ii(this.gl)?this.gl.deleteVertexArray(r):(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let hl;function bd(_,r,s,f,y){const x=_.context,T=_.transform,k=x.gl,O=_.useProgram("collisionBox"),N=[];let $=0,W=0;for(let pe=0;pe<f.length;pe++){const me=f[pe],we=r.getTile(me).getBucket(s);if(!we)continue;const ye=y?we.textCollisionBox:we.iconCollisionBox,Te=we.collisionCircleArray;Te.length>0&&(N.push({circleArray:Te,circleOffset:W,coord:me}),$+=Te.length/4,W=$),ye&&O.draw(x,k.LINES,ur.disabled,Ut.disabled,_.colorModeForRenderPass(),hr.disabled,Ku(_.transform),_.style.map.terrain&&_.style.map.terrain.getTerrainData(me),T.getProjectionData({overscaledTileID:me,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),s.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,null,_.transform.zoom,null,null,ye.collisionVertexBuffer)}if(!y||!N.length)return;const q=_.useProgram("collisionCircle"),K=new o.b_;K.resize(4*$),K._trim();let re=0;for(const pe of N)for(let me=0;me<pe.circleArray.length/4;me++){const we=4*me,ye=pe.circleArray[we+0],Te=pe.circleArray[we+1],Ee=pe.circleArray[we+2],ve=pe.circleArray[we+3];K.emplace(re++,ye,Te,Ee,ve,0),K.emplace(re++,ye,Te,Ee,ve,1),K.emplace(re++,ye,Te,Ee,ve,2),K.emplace(re++,ye,Te,Ee,ve,3)}(!hl||hl.length<2*$)&&(hl=function(pe){const me=2*pe,we=new o.c0;we.resize(me),we._trim();for(let ye=0;ye<me;ye++){const Te=6*ye;we.uint16[Te+0]=4*ye+0,we.uint16[Te+1]=4*ye+1,we.uint16[Te+2]=4*ye+2,we.uint16[Te+3]=4*ye+2,we.uint16[Te+4]=4*ye+3,we.uint16[Te+5]=4*ye+0}return we}($));const ue=x.createIndexBuffer(hl,!0),de=x.createVertexBuffer(K,o.b$.members,!0);for(const pe of N){const me=Xu(_.transform);q.draw(x,k.TRIANGLES,ur.disabled,Ut.disabled,_.colorModeForRenderPass(),hr.disabled,me,_.style.map.terrain&&_.style.map.terrain.getTerrainData(pe.coord),null,s.id,de,ue,o.aL.simpleSegment(0,2*pe.circleOffset,pe.circleArray.length,pe.circleArray.length/2),null,_.transform.zoom,null,null,null)}de.destroy(),ue.destroy()}const wd=o.af(new Float32Array(16));function Zr(_,r,s,f,y,x){const{horizontalAlign:T,verticalAlign:k}=o.aG(_);return new o.P((-(T-.5)*r/y+f[0])*x,(-(k-.5)*s/y+f[1])*x)}function Sd(_,r,s,f,y,x){const T=r.tileAnchorPoint.add(new o.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let k=f.mult(x);s||(k=k.rotate(-y));const O=T.add(k);return kr(O.x,O.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(s){const k=bt(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(_),O=Math.atan(k.y/k.x)+(k.x<0?Math.PI:0);return _.add(f.rotate(O))}return _.add(f)}function gh(_,r,s,f,y,x,T,k,O,N,$,W){const q=_.text.placedSymbolArray,K=_.text.dynamicLayoutVertexArray,re=_.icon.dynamicLayoutVertexArray,ue={};K.clear();for(let de=0;de<q.length;de++){const pe=q.get(de),me=pe.hidden||!pe.crossTileID||_.allowVerticalPlacement&&!pe.placedOrientation?null:f[pe.crossTileID];if(me){const we=new o.P(pe.anchorX,pe.anchorY),ye={getElevation:W,width:y.width,height:y.height,pitchedLabelPlaneMatrix:x,pitchWithMap:s,transform:y,tileAnchorPoint:we,translation:N,unwrappedTileID:$},Te=s?yr(we.x,we.y,ye):bt(we.x,we.y,ye),Ee=Zt(y.cameraToCenterDistance,Te.signedDistanceFromCamera);let ve=o.ao(_.textSizeData,k,pe)*Ee/o.aA;s&&(ve*=_.tilePixelRatio/T);const{width:De,height:Ue,anchor:Ve,textOffset:Ge,textBoxScale:He}=me,_t=Zr(Ve,De,Ue,Ge,He,ve),gt=y.getPitchedTextCorrection(we.x+N[0],we.y+N[1],$),it=Sd(Te.point,ye,r,_t,-y.bearingInRadians,gt),Ot=_.allowVerticalPlacement&&pe.placedOrientation===o.an.vertical?Math.PI/2:0;for(let dr=0;dr<pe.numGlyphs;dr++)o.au(K,it,Ot);O&&pe.associatedIconIndex>=0&&(ue[pe.associatedIconIndex]={shiftedAnchor:it,angle:Ot})}else Eo(pe.numGlyphs,K)}if(O){re.clear();const de=_.icon.placedSymbolArray;for(let pe=0;pe<de.length;pe++){const me=de.get(pe);if(me.hidden)Eo(me.numGlyphs,re);else{const we=ue[pe];if(we)for(let ye=0;ye<me.numGlyphs;ye++)o.au(re,we.shiftedAnchor,we.angle);else Eo(me.numGlyphs,re)}}_.icon.dynamicLayoutVertexBuffer.updateData(re)}_.text.dynamicLayoutVertexBuffer.updateData(K)}function eu(_,r,s){return s.iconsInText&&r?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Pd(_,r,s,f,y,x,T,k,O,N,$,W,q){const K=_.context,re=K.gl,ue=_.transform,de=k==="map",pe=O==="map",me=k!=="viewport"&&s.layout.get("symbol-placement")!=="point",we=de&&!pe&&!me,ye=!s.layout.get("symbol-sort-key").isConstant();let Te=!1;const Ee=_.getDepthModeForSublayer(0,ur.ReadOnly),ve=s._unevaluatedLayout.hasValue("text-variable-anchor")||s._unevaluatedLayout.hasValue("text-variable-anchor-offset"),De=[],Ue=ue.getCircleRadiusCorrection();for(const Ve of f){const Ge=r.getTile(Ve),He=Ge.getBucket(s);if(!He)continue;const _t=y?He.text:He.icon;if(!_t||!_t.segments.get().length||!_t.hasVisibleVertices)continue;const gt=_t.programConfigurations.get(s.id),it=y||He.sdfIcons,Ot=y?He.textSizeData:He.iconSizeData,dr=pe||ue.pitch!==0,Or=_.useProgram(eu(it,y,He),gt),ln=o.am(Ot,ue.zoom),Gr=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ve);let Xr,Kr,Nr,$r,Xn=[0,0],Er=null;if(y)Kr=Ge.glyphAtlasTexture,Nr=re.LINEAR,Xr=Ge.glyphAtlasTexture.size,He.iconsInText&&(Xn=Ge.imageAtlasTexture.size,Er=Ge.imageAtlasTexture,$r=dr||_.options.rotating||_.options.zooming||Ot.kind==="composite"||Ot.kind==="camera"?re.LINEAR:re.NEAREST);else{const mn=s.layout.get("icon-size").constantOr(0)!==1||He.iconsNeedLinear;Kr=Ge.imageAtlasTexture,Nr=it||_.options.rotating||_.options.zooming||mn||dr?re.LINEAR:re.NEAREST,Xr=Ge.imageAtlasTexture.size}const Vn=o.aB(Ge,1,_.transform.zoom),Yn=Yt(de,_.transform,Vn),No=o.L();o.ap(No,Yn);const Fo=Wr(pe,de,_.transform,Vn),yo=o.aC(ue,Ge,x,T),Ka=ue.getProjectionData({overscaledTileID:Ve,applyGlobeMatrix:!q,applyTerrainMatrix:!0}),mu=ve&&He.hasTextData(),gu=s.layout.get("icon-text-fit")!=="none"&&mu&&He.hasIconData();if(me){const mn=_.style.map.terrain?(Qn,Un)=>_.style.map.terrain.getElevation(Ve,Qn,Un):null,en=s.layout.get("text-rotation-alignment")==="map";Tn(He,_,y,Yn,No,pe,N,en,Ve.toUnwrapped(),ue.width,ue.height,yo,mn)}const yu=y&&ve||gu,Li=me||yu?wd:pe?Yn:_.transform.clipSpaceToPixelsMatrix,Xa=it&&s.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ds;Ds=it?He.iconsInText?ec(Ot.kind,ln,we,pe,me,yu,_,Li,Fo,yo,Xr,Xn,Ue):ll(Ot.kind,ln,we,pe,me,yu,_,Li,Fo,yo,y,Xr,0,Ue):dh(Ot.kind,ln,we,pe,me,yu,_,Li,Fo,yo,y,Xr,Ue);const Os={program:Or,buffers:_t,uniformValues:Ds,projectionData:Ka,atlasTexture:Kr,atlasTextureIcon:Er,atlasInterpolation:Nr,atlasInterpolationIcon:$r,isSDF:it,hasHalo:Xa};if(ye&&He.canOverlap){Te=!0;const mn=_t.segments.get();for(const en of mn)De.push({segments:new o.aL([en]),sortKey:en.sortKey,state:Os,terrainData:Gr})}else De.push({segments:_t.segments,sortKey:0,state:Os,terrainData:Gr})}Te&&De.sort((Ve,Ge)=>Ve.sortKey-Ge.sortKey);for(const Ve of De){const Ge=Ve.state;if(K.activeTexture.set(re.TEXTURE0),Ge.atlasTexture.bind(Ge.atlasInterpolation,re.CLAMP_TO_EDGE),Ge.atlasTextureIcon&&(K.activeTexture.set(re.TEXTURE1),Ge.atlasTextureIcon&&Ge.atlasTextureIcon.bind(Ge.atlasInterpolationIcon,re.CLAMP_TO_EDGE)),Ge.isSDF){const He=Ge.uniformValues;Ge.hasHalo&&(He.u_is_halo=1,tu(Ge.buffers,Ve.segments,s,_,Ge.program,Ee,$,W,He,Ge.projectionData,Ve.terrainData)),He.u_is_halo=0}tu(Ge.buffers,Ve.segments,s,_,Ge.program,Ee,$,W,Ge.uniformValues,Ge.projectionData,Ve.terrainData)}}function tu(_,r,s,f,y,x,T,k,O,N,$){const W=f.context;y.draw(W,W.gl.TRIANGLES,x,T,k,hr.backCCW,O,$,N,s.id,_.layoutVertexBuffer,_.indexBuffer,r,s.paint,f.transform.zoom,_.programConfigurations.get(s.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function Ss(_,r,s,f,y){const x=_.context,T=x.gl,k=Ut.disabled,O=new Sr([T.ONE,T.ONE],o.be.transparent,[!0,!0,!0,!0]),N=r.getBucket(s);if(!N)return;const $=f.key;let W=s.heatmapFbos.get($);W||(W=ho(x,r.tileSize,r.tileSize),s.heatmapFbos.set($,W)),x.bindFramebuffer.set(W.framebuffer),x.viewport.set([0,0,r.tileSize,r.tileSize]),x.clear({color:o.be.transparent});const q=N.programConfigurations.get(s.id),K=_.useProgram("heatmap",q,!y),re=_.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ue=_.style.map.terrain.getTerrainData(f);K.draw(x,T.TRIANGLES,ur.disabled,k,O,hr.disabled,Yu(r,_.transform.zoom,s.paint.get("heatmap-intensity"),1),ue,re,s.id,N.layoutVertexBuffer,N.indexBuffer,N.segments,s.paint,_.transform.zoom,q)}function dl(_,r,s,f,y){const x=_.context,T=x.gl,k=_.transform;x.setColorMode(_.colorModeForRenderPass());const O=lc(x,r),N=s.key,$=r.heatmapFbos.get(N);if(!$)return;x.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,$.colorAttachment.get()),x.activeTexture.set(T.TEXTURE1),O.bind(T.LINEAR,T.CLAMP_TO_EDGE);const W=k.getProjectionData({overscaledTileID:s,applyTerrainMatrix:y,applyGlobeMatrix:!f});_.useProgram("heatmapTexture").draw(x,T.TRIANGLES,ur.disabled,Ut.disabled,_.colorModeForRenderPass(),hr.disabled,kf(_,r,0,1),null,W,r.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,r.paint,k.zoom),$.destroy(),r.heatmapFbos.delete(N)}function ho(_,r,s){var f,y;const x=_.gl,T=x.createTexture();x.bindTexture(x.TEXTURE_2D,T),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.LINEAR);const k=(f=_.HALF_FLOAT)!==null&&f!==void 0?f:x.UNSIGNED_BYTE,O=(y=_.RGBA16F)!==null&&y!==void 0?y:x.RGBA;x.texImage2D(x.TEXTURE_2D,0,O,r,s,0,x.RGBA,k,null);const N=_.createFramebuffer(r,s,!1,!1);return N.colorAttachment.set(T),N}function lc(_,r){return r.colorRampTexture||(r.colorRampTexture=new o.T(_,r.colorRamp,_.gl.RGBA)),r.colorRampTexture}function Td(_,r,s,f,y){if(!s||!f||!f.imageAtlas)return;const x=f.imageAtlas.patternPositions;let T=x[s.to.toString()],k=x[s.from.toString()];if(!T&&k&&(T=k),!k&&T&&(k=T),!T||!k){const O=y.getPaintProperty(r);T=x[O],k=x[O]}T&&k&&_.setConstantPatternPositions(T,k)}function uc(_,r,s,f,y,x,T,k){const O=_.context.gl,N="fill-pattern",$=s.paint.get(N),W=$&&$.constantOr(1),q=s.getCrossfadeParameters();let K,re,ue,de,pe;const me=_.transform,we=s.paint.get("fill-translate"),ye=s.paint.get("fill-translate-anchor");T?(re=W&&!s.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",K=O.LINES):(re=W?"fillPattern":"fill",K=O.TRIANGLES);const Te=$.constantOr(null);for(const Ee of f){const ve=r.getTile(Ee);if(W&&!ve.patternsLoaded())continue;const De=ve.getBucket(s);if(!De)continue;const Ue=De.programConfigurations.get(s.id),Ve=_.useProgram(re,Ue),Ge=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ee);W&&(_.context.activeTexture.set(O.TEXTURE0),ve.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Ue.updatePaintBuffers(q)),Td(Ue,N,Te,ve,s);const He=me.getProjectionData({overscaledTileID:Ee,applyGlobeMatrix:!k,applyTerrainMatrix:!0}),_t=o.aC(me,ve,we,ye);if(T){de=De.indexBuffer2,pe=De.segments2;const it=[O.drawingBufferWidth,O.drawingBufferHeight];ue=re==="fillOutlinePattern"&&W?nm(_,q,ve,it,_t):Ga(it,_t)}else de=De.indexBuffer,pe=De.segments,ue=W?ch(_,q,ve,_t):{u_fill_translate:_t};const gt=_.stencilModeForClipping(Ee);Ve.draw(_.context,K,y,gt,x,hr.backCCW,ue,Ge,He,s.id,De.layoutVertexBuffer,de,pe,s.paint,_.transform.zoom,Ue)}}function fl(_,r,s,f,y,x,T,k){const O=_.context,N=O.gl,$="fill-extrusion-pattern",W=s.paint.get($),q=W.constantOr(1),K=s.getCrossfadeParameters(),re=s.paint.get("fill-extrusion-opacity"),ue=W.constantOr(null),de=_.transform;for(const pe of f){const me=r.getTile(pe),we=me.getBucket(s);if(!we)continue;const ye=_.style.map.terrain&&_.style.map.terrain.getTerrainData(pe),Te=we.programConfigurations.get(s.id),Ee=_.useProgram(q?"fillExtrusionPattern":"fillExtrusion",Te);q&&(_.context.activeTexture.set(N.TEXTURE0),me.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),Te.updatePaintBuffers(K));const ve=de.getProjectionData({overscaledTileID:pe,applyGlobeMatrix:!k,applyTerrainMatrix:!0});Td(Te,$,ue,me,s);const De=o.aC(de,me,s.paint.get("fill-extrusion-translate"),s.paint.get("fill-extrusion-translate-anchor")),Ue=s.paint.get("fill-extrusion-vertical-gradient"),Ve=q?ld(_,Ue,re,De,pe,K,me):Hu(_,Ue,re,De);Ee.draw(O,O.gl.TRIANGLES,y,x,T,hr.backCCW,Ve,ye,ve,s.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,s.paint,_.transform.zoom,Te,_.style.map.terrain&&we.centroidVertexBuffer)}}function Ro(_,r,s,f,y,x,T,k,O){var N;const $=_.style.projection,W=_.context,q=_.transform,K=W.gl,re=[`#define NUM_ILLUMINATION_SOURCES ${s.paint.get("hillshade-highlight-color").values.length}`],ue=_.useProgram("hillshade",null,!1,re),de=!_.options.moving;for(const pe of f){const me=r.getTile(pe),we=me.fbo;if(!we)continue;const ye=$.getMeshFromTileID(W,pe.canonical,k,!0,"raster"),Te=(N=_.style.map.terrain)===null||N===void 0?void 0:N.getTerrainData(pe);W.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,we.colorAttachment.get());const Ee=q.getProjectionData({overscaledTileID:pe,aligned:de,applyGlobeMatrix:!O,applyTerrainMatrix:!0});ue.draw(W,K.TRIANGLES,x,y[pe.overscaledZ],T,hr.backCCW,ps(_,me,s),Te,Ee,s.id,ye.vertexBuffer,ye.indexBuffer,ye.segments)}}function Ps(_,r,s,f,y,x,T,k,O){var N;const $=_.style.projection,W=_.context,q=_.transform,K=W.gl,re=_.useProgram("colorRelief"),ue=!_.options.moving;let de=!0;for(const pe of f){const me=r.getTile(pe),we=me.dem;if(de){const Ue=K.getParameter(K.MAX_TEXTURE_SIZE),{elevationTexture:Ve,colorTexture:Ge}=s.getColorRampTextures(W,Ue,we.getUnpackVector());W.activeTexture.set(K.TEXTURE1),Ve.bind(K.NEAREST,K.CLAMP_TO_EDGE),W.activeTexture.set(K.TEXTURE4),Ge.bind(K.LINEAR,K.CLAMP_TO_EDGE),de=!1}if(!we||!we.data)continue;const ye=we.stride,Te=we.getPixels();if(W.activeTexture.set(K.TEXTURE0),W.pixelStoreUnpackPremultiplyAlpha.set(!1),me.demTexture=me.demTexture||_.getTileTexture(ye),me.demTexture){const Ue=me.demTexture;Ue.update(Te,{premultiply:!1}),Ue.bind(K.LINEAR,K.CLAMP_TO_EDGE)}else me.demTexture=new o.T(W,Te,K.RGBA,{premultiply:!1}),me.demTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE);const Ee=$.getMeshFromTileID(W,pe.canonical,k,!0,"raster"),ve=(N=_.style.map.terrain)===null||N===void 0?void 0:N.getTerrainData(pe),De=q.getProjectionData({overscaledTileID:pe,aligned:ue,applyGlobeMatrix:!O,applyTerrainMatrix:!0});re.draw(W,K.TRIANGLES,x,y[pe.overscaledZ],T,hr.backCCW,Of(s,me.dem),ve,De,s.id,Ee.vertexBuffer,Ee.indexBuffer,Ee.segments)}}const cc=[new o.P(0,0),new o.P(o.$,0),new o.P(o.$,o.$),new o.P(0,o.$)];function fo(_,r,s,f,y,x,T,k,O=!1,N=!1){const $=f[f.length-1].overscaledZ,W=_.context,q=W.gl,K=_.useProgram("raster"),re=_.transform,ue=_.style.projection,de=_.colorModeForRenderPass(),pe=!_.options.moving;for(const me of f){const we=_.getDepthModeForSublayer(me.overscaledZ-$,s.paint.get("raster-opacity")===1?ur.ReadWrite:ur.ReadOnly,q.LESS),ye=r.getTile(me);ye.registerFadeDuration(s.paint.get("raster-fade-duration"));const Te=r.findLoadedParent(me,0),Ee=r.findLoadedSibling(me),ve=Cd(ye,Te||Ee||null,r,s,_.transform,_.style.map.terrain);let De,Ue;const Ve=s.paint.get("raster-resampling")==="nearest"?q.NEAREST:q.LINEAR;W.activeTexture.set(q.TEXTURE0),ye.texture.bind(Ve,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),W.activeTexture.set(q.TEXTURE1),Te?(Te.texture.bind(Ve,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),De=Math.pow(2,Te.tileID.overscaledZ-ye.tileID.overscaledZ),Ue=[ye.tileID.canonical.x*De%1,ye.tileID.canonical.y*De%1]):ye.texture.bind(Ve,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),ye.texture.useMipmap&&W.extTextureFilterAnisotropic&&_.transform.pitch>20&&q.texParameterf(q.TEXTURE_2D,W.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,W.extTextureFilterAnisotropicMax);const Ge=_.style.map.terrain&&_.style.map.terrain.getTerrainData(me),He=re.getProjectionData({overscaledTileID:me,aligned:pe,applyGlobeMatrix:!N,applyTerrainMatrix:!0}),_t=sl(Ue||[0,0],De||1,ve,s,k),gt=ue.getMeshFromTileID(W,me.canonical,x,T,"raster");K.draw(W,q.TRIANGLES,we,y?y[me.overscaledZ]:Ut.disabled,de,O?hr.frontCCW:hr.backCCW,_t,Ge,He,s.id,gt.vertexBuffer,gt.indexBuffer,gt.segments)}}function Cd(_,r,s,f,y,x){const T=f.paint.get("raster-fade-duration");if(!x&&T>0){const k=R.now(),O=(k-_.timeAdded)/T,N=r?(k-r.timeAdded)/T:-1,$=s.getSource(),W=Je(y,{tileSize:$.tileSize,roundZoom:$.roundZoom}),q=!r||Math.abs(r.tileID.overscaledZ-W)>Math.abs(_.tileID.overscaledZ-W),K=q&&_.refreshedUponExpiration?1:o.ag(q?O:1-N,0,1);return _.refreshedUponExpiration&&O>=1&&(_.refreshedUponExpiration=!1),r?{opacity:1,mix:1-K}:{opacity:K,mix:0}}return{opacity:1,mix:0}}const yh=new o.be(1,0,0,1),vh=new o.be(0,1,0,1),_h=new o.be(0,0,1,1),Vf=new o.be(1,0,1,1),Uf=new o.be(0,1,1,1);function pl(_,r,s,f){hc(_,0,r+s/2,_.transform.width,s,f)}function Wa(_,r,s,f){hc(_,r-s/2,0,s,_.transform.height,f)}function hc(_,r,s,f,y,x){const T=_.context,k=T.gl;k.enable(k.SCISSOR_TEST),k.scissor(r*_.pixelRatio,s*_.pixelRatio,f*_.pixelRatio,y*_.pixelRatio),T.clear({color:x}),k.disable(k.SCISSOR_TEST)}function ml(_,r,s){const f=_.context,y=f.gl,x=_.useProgram("debug"),T=ur.disabled,k=Ut.disabled,O=_.colorModeForRenderPass(),N="$debug",$=_.style.map.terrain&&_.style.map.terrain.getTerrainData(s);f.activeTexture.set(y.TEXTURE0);const W=r.getTileByID(s.key).latestRawTileData,q=Math.floor((W&&W.byteLength||0)/1024),K=r.getTile(s).tileSize,re=512/Math.min(K,512)*(s.overscaledZ/_.transform.zoom)*.5;let ue=s.canonical.toString();s.overscaledZ!==s.canonical.z&&(ue+=` => ${s.overscaledZ}`),function(pe,me){pe.initDebugOverlayCanvas();const we=pe.debugOverlayCanvas,ye=pe.context.gl,Te=pe.debugOverlayCanvas.getContext("2d");Te.clearRect(0,0,we.width,we.height),Te.shadowColor="white",Te.shadowBlur=2,Te.lineWidth=1.5,Te.strokeStyle="white",Te.textBaseline="top",Te.font="bold 36px Open Sans, sans-serif",Te.fillText(me,5,5),Te.strokeText(me,5,5),pe.debugOverlayTexture.update(we),pe.debugOverlayTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE)}(_,`${ue} ${q}kB`);const de=_.transform.getProjectionData({overscaledTileID:s,applyGlobeMatrix:!0,applyTerrainMatrix:!0});x.draw(f,y.TRIANGLES,T,k,Sr.alphaBlended,hr.disabled,If(o.be.transparent,re),null,de,N,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),x.draw(f,y.LINE_STRIP,T,k,O,hr.disabled,If(o.be.red),$,de,N,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function jr(_,r,s,f){const{isRenderingGlobe:y}=f,x=_.context,T=x.gl,k=_.transform,O=_.colorModeForRenderPass(),N=_.getDepthModeFor3D(),$=_.useProgram("terrain");x.bindFramebuffer.set(null),x.viewport.set([0,0,_.width,_.height]);for(const W of s){const q=r.getTerrainMesh(W.tileID),K=_.renderToTexture.getTexture(W),re=r.getTerrainData(W.tileID);x.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,K.texture);const ue=r.getMeshFrameDelta(k.zoom),de=k.calculateFogMatrix(W.tileID.toUnwrapped()),pe=tm(ue,de,_.style.sky,k.pitch,y),me=k.getProjectionData({overscaledTileID:W.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});$.draw(x,T.TRIANGLES,N,Ut.disabled,O,hr.backCCW,pe,re,me,"terrain",q.vertexBuffer,q.indexBuffer,q.segments)}}function Da(_,r){if(!r.mesh){const s=new o.aK;s.emplaceBack(-1,-1),s.emplaceBack(1,-1),s.emplaceBack(1,1),s.emplaceBack(-1,1);const f=new o.aM;f.emplaceBack(0,1,2),f.emplaceBack(0,2,3),r.mesh=new Va(_.createVertexBuffer(s,oo.members),_.createIndexBuffer(f),o.aL.simpleSegment(0,0,s.length,f.length))}return r.mesh}class On{constructor(r,s){this.context=new mr(r),this.transform=s,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.af(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=nt.maxUnderzooming+nt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ul}resize(r,s,f){if(this.width=Math.floor(r*f),this.height=Math.floor(s*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const r=this.context,s=new o.aK;s.emplaceBack(0,0),s.emplaceBack(o.$,0),s.emplaceBack(0,o.$),s.emplaceBack(o.$,o.$),this.tileExtentBuffer=r.createVertexBuffer(s,oo.members),this.tileExtentSegments=o.aL.simpleSegment(0,0,4,2);const f=new o.aK;f.emplaceBack(0,0),f.emplaceBack(o.$,0),f.emplaceBack(0,o.$),f.emplaceBack(o.$,o.$),this.debugBuffer=r.createVertexBuffer(f,oo.members),this.debugSegments=o.aL.simpleSegment(0,0,4,5);const y=new o.c5;y.emplaceBack(0,0,0,0),y.emplaceBack(o.$,0,o.$,0),y.emplaceBack(0,o.$,0,o.$),y.emplaceBack(o.$,o.$,o.$,o.$),this.rasterBoundsBuffer=r.createVertexBuffer(y,em.members),this.rasterBoundsSegments=o.aL.simpleSegment(0,0,4,2);const x=new o.aK;x.emplaceBack(0,0),x.emplaceBack(o.$,0),x.emplaceBack(0,o.$),x.emplaceBack(o.$,o.$),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(x,oo.members),this.rasterBoundsSegmentsPosOnly=o.aL.simpleSegment(0,0,4,5);const T=new o.aK;T.emplaceBack(0,0),T.emplaceBack(1,0),T.emplaceBack(0,1),T.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(T,oo.members),this.viewportSegments=o.aL.simpleSegment(0,0,4,2);const k=new o.c6;k.emplaceBack(0),k.emplaceBack(1),k.emplaceBack(3),k.emplaceBack(2),k.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(k);const O=new o.aM;O.emplaceBack(1,0,2),O.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(O);const N=this.context.gl;this.stencilClearMode=new Ut({func:N.ALWAYS,mask:0},0,255,N.ZERO,N.ZERO,N.ZERO),this.tileExtentMesh=new Va(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const r=this.context,s=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=o.L();o.bX(f,0,this.width,this.height,0,0,1),o.N(f,f,[s.drawingBufferWidth,s.drawingBufferHeight,0]);const y={mainMatrix:f,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:f};this.useProgram("clippingMask",null,!0).draw(r,s.TRIANGLES,ur.disabled,this.stencilClearMode,Sr.disabled,hr.disabled,null,null,y,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,s,f){if(this.currentStencilSource===r.source||!r.isTileClipped()||!s||!s.length)return;this.currentStencilSource=r.source,this.nextStencilID+s.length>256&&this.clearStencil();const y=this.context;y.setColorMode(Sr.disabled),y.setDepthMode(ur.disabled);const x={};for(const T of s)x[T.key]=this.nextStencilID++;this._renderTileMasks(x,s,f,!0),this._renderTileMasks(x,s,f,!1),this._tileClippingMaskIDs=x}_renderTileMasks(r,s,f,y){const x=this.context,T=x.gl,k=this.style.projection,O=this.transform,N=this.useProgram("clippingMask");for(const $ of s){const W=r[$.key],q=this.style.map.terrain&&this.style.map.terrain.getTerrainData($),K=k.getMeshFromTileID(this.context,$.canonical,y,!0,"stencil"),re=O.getProjectionData({overscaledTileID:$,applyGlobeMatrix:!f,applyTerrainMatrix:!0});N.draw(x,T.TRIANGLES,ur.disabled,new Ut({func:T.ALWAYS,mask:0},W,255,T.KEEP,T.KEEP,T.REPLACE),Sr.disabled,f?hr.disabled:hr.backCCW,null,q,re,"$clipping",K.vertexBuffer,K.indexBuffer,K.segments)}}_renderTilesDepthBuffer(){const r=this.context,s=r.gl,f=this.style.projection,y=this.transform,x=this.useProgram("depth"),T=this.getDepthModeFor3D(),k=Xe(y,{tileSize:y.tileSize});for(const O of k){const N=this.style.map.terrain&&this.style.map.terrain.getTerrainData(O),$=f.getMeshFromTileID(this.context,O.canonical,!0,!0,"raster"),W=y.getProjectionData({overscaledTileID:O,applyGlobeMatrix:!0,applyTerrainMatrix:!0});x.draw(r,s.TRIANGLES,T,Ut.disabled,Sr.disabled,hr.backCCW,null,N,W,"$clipping",$.vertexBuffer,$.indexBuffer,$.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,s=this.context.gl;return new Ut({func:s.NOTEQUAL,mask:255},r,255,s.KEEP,s.KEEP,s.REPLACE)}stencilModeForClipping(r){const s=this.context.gl;return new Ut({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,s.KEEP,s.KEEP,s.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){const s=this.context.gl,f=r.sort((T,k)=>k.overscaledZ-T.overscaledZ),y=f[f.length-1].overscaledZ,x=f[0].overscaledZ-y+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const T={};for(let k=0;k<x;k++)T[k+y]=new Ut({func:s.GEQUAL,mask:255},k+this.nextStencilID,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID+=x,[T,f]}return[{[y]:Ut.disabled},f]}stencilConfigForOverlapTwoPass(r){const s=this.context.gl,f=r.sort((T,k)=>k.overscaledZ-T.overscaledZ),y=f[f.length-1].overscaledZ,x=f[0].overscaledZ-y+1;if(this.clearStencil(),x>1){const T={},k={};for(let O=0;O<x;O++)T[O+y]=new Ut({func:s.GREATER,mask:255},x+1+O,255,s.KEEP,s.KEEP,s.REPLACE),k[O+y]=new Ut({func:s.GREATER,mask:255},1+O,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID=2*x+1,[T,k,f]}return this.nextStencilID=3,[{[y]:new Ut({func:s.GREATER,mask:255},2,255,s.KEEP,s.KEEP,s.REPLACE)},{[y]:new Ut({func:s.GREATER,mask:255},1,255,s.KEEP,s.KEEP,s.REPLACE)},f]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Sr([r.CONSTANT_COLOR,r.ONE],new o.be(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Sr.unblended:Sr.alphaBlended}getDepthModeForSublayer(r,s,f){if(!this.opaquePassEnabledForLayer())return ur.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new ur(f||this.context.gl.LEQUAL,s,[y,y])}getDepthModeFor3D(){return new ur(this.context.gl.LEQUAL,ur.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,s){var f,y;this.style=r,this.options=s,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(R.now()),this.imageManager.beginFrame();const x=this.style._order,T=this.style.sourceCaches,k={},O={},N={},$={isRenderingToTexture:!1,isRenderingGlobe:((f=r.projection)===null||f===void 0?void 0:f.transitionState)>0};for(const q in T){const K=T[q];K.used&&K.prepare(this.context),k[q]=K.getVisibleCoordinates(!1),O[q]=k[q].slice().reverse(),N[q]=K.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let q=0;q<x.length;q++)if(this.style._layers[x[q]].is3D()){this.opaquePassCutoff=q;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const q of x){const K=this.style._layers[q];if(!K.hasOffscreenPass()||K.isHidden(this.transform.zoom))continue;const re=O[K.source];(K.type==="custom"||re.length)&&this.renderLayer(this,T[K.source],K,re,$)}if((y=this.style.projection)===null||y===void 0||y.updateGPUdependent({context:this.context,useProgram:q=>this.useProgram(q)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?o.be.black:o.be.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(q,K){const re=q.context,ue=re.gl,de=((Ee,ve,De)=>{const Ue=Math.cos(ve.rollInRadians),Ve=Math.sin(ve.rollInRadians),Ge=oe(ve),He=ve.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ee.properties.get("sky-color"),u_horizon_color:Ee.properties.get("horizon-color"),u_horizon:[(ve.width/2-Ge*Ve)*De,(ve.height/2+Ge*Ue)*De],u_horizon_normal:[-Ve,Ue],u_sky_horizon_blend:Ee.properties.get("sky-horizon-blend")*ve.height/2*De,u_sky_blend:He}})(K,q.style.map.transform,q.pixelRatio),pe=new ur(ue.LEQUAL,ur.ReadWrite,[0,1]),me=Ut.disabled,we=q.colorModeForRenderPass(),ye=q.useProgram("sky"),Te=Da(re,K);ye.draw(re,ue.TRIANGLES,pe,me,we,hr.disabled,de,null,void 0,"sky",Te.vertexBuffer,Te.indexBuffer,Te.segments)}(this,this.style.sky),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=x.length-1;this.currentLayer>=0;this.currentLayer--){const q=this.style._layers[x[this.currentLayer]],K=T[q.source],re=k[q.source];this._renderTileClippingMasks(q,re,!1),this.renderLayer(this,K,q,re,$)}this.renderPass="translucent";let W=!1;for(this.currentLayer=0;this.currentLayer<x.length;this.currentLayer++){const q=this.style._layers[x[this.currentLayer]],K=T[q.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(q,$))continue;this.opaquePassEnabledForLayer()||W||(W=!0,$.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const re=(q.type==="symbol"?N:O)[q.source];this._renderTileClippingMasks(q,k[q.source],!!this.renderToTexture),this.renderLayer(this,K,q,re,$)}if($.isRenderingGlobe&&function(q,K,re){const ue=q.context,de=ue.gl,pe=q.useProgram("atmosphere"),me=new ur(de.LEQUAL,ur.ReadOnly,[0,1]),we=q.transform,ye=function(He,_t){const gt=He.properties.get("position"),it=[-gt.x,-gt.y,-gt.z],Ot=o.af(new Float64Array(16));return He.properties.get("anchor")==="map"&&(o.b5(Ot,Ot,_t.rollInRadians),o.b6(Ot,Ot,-_t.pitchInRadians),o.b5(Ot,Ot,_t.bearingInRadians),o.b6(Ot,Ot,_t.center.lat*Math.PI/180),o.by(Ot,Ot,-_t.center.lng*Math.PI/180)),o.c4(it,it,Ot),it}(re,q.transform),Te=we.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ee=K.properties.get("atmosphere-blend")*Te.projectionTransition;if(Ee===0)return;const ve=Io(we.worldSize,we.center.lat),De=we.inverseProjectionMatrix,Ue=new Float64Array(4);Ue[3]=1,o.av(Ue,Ue,we.modelViewProjectionMatrix),Ue[0]/=Ue[3],Ue[1]/=Ue[3],Ue[2]/=Ue[3],Ue[3]=1,o.av(Ue,Ue,De),Ue[0]/=Ue[3],Ue[1]/=Ue[3],Ue[2]/=Ue[3],Ue[3]=1;const Ve=((He,_t,gt,it,Ot)=>({u_sun_pos:He,u_atmosphere_blend:_t,u_globe_position:gt,u_globe_radius:it,u_inv_proj_matrix:Ot}))(ye,Ee,[Ue[0],Ue[1],Ue[2]],ve,De),Ge=Da(ue,K);pe.draw(ue,de.TRIANGLES,me,Ut.disabled,Sr.alphaBlended,hr.disabled,Ve,null,null,"atmosphere",Ge.vertexBuffer,Ge.indexBuffer,Ge.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const q=function(K,re){let ue=null;const de=Object.values(K._layers).flatMap(ye=>ye.source&&!ye.isHidden(re)?[K.sourceCaches[ye.source]]:[]),pe=de.filter(ye=>ye.getSource().type==="vector"),me=de.filter(ye=>ye.getSource().type!=="vector"),we=ye=>{(!ue||ue.getSource().maxzoom<ye.getSource().maxzoom)&&(ue=ye)};return pe.forEach(ye=>we(ye)),ue||me.forEach(ye=>we(ye)),ue}(this.style,this.transform.zoom);q&&function(K,re,ue){for(let de=0;de<ue.length;de++)ml(K,re,ue[de])}(this,q,q.getVisibleCoordinates())}this.options.showPadding&&function(q){const K=q.transform.padding;pl(q,q.transform.height-(K.top||0),3,yh),pl(q,K.bottom||0,3,vh),Wa(q,K.left||0,3,_h),Wa(q,q.transform.width-(K.right||0),3,Vf);const re=q.transform.centerPoint;(function(ue,de,pe,me){hc(ue,de-1,pe-10,2,20,me),hc(ue,de-10,pe-1,20,2,me)})(q,re.x,q.transform.height-re.y,Uf)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const s=this.terrainFacilitator.matrix,f=this.transform.modelViewProjectionMatrix;let y=this.terrainFacilitator.dirty;y||(y=r?!o.c7(s,f):!o.c8(s,f)),y||(y=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),y&&(o.c9(s,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(x,T){const k=x.context,O=k.gl,N=x.transform,$=Sr.unblended,W=new ur(O.LEQUAL,ur.ReadWrite,[0,1]),q=T.sourceCache.getRenderableTiles(),K=x.useProgram("terrainDepth");k.bindFramebuffer.set(T.getFramebuffer("depth").framebuffer),k.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),k.clear({color:o.be.transparent,depth:1});for(const re of q){const ue=T.getTerrainMesh(re.tileID),de=T.getTerrainData(re.tileID),pe=N.getProjectionData({overscaledTileID:re.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),me={u_ele_delta:T.getMeshFrameDelta(N.zoom)};K.draw(k,O.TRIANGLES,W,Ut.disabled,$,hr.backCCW,me,de,pe,"terrain",ue.vertexBuffer,ue.indexBuffer,ue.segments)}k.bindFramebuffer.set(null),k.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain),function(x,T){const k=x.context,O=k.gl,N=x.transform,$=Sr.unblended,W=new ur(O.LEQUAL,ur.ReadWrite,[0,1]),q=T.getCoordsTexture(),K=T.sourceCache.getRenderableTiles(),re=x.useProgram("terrainCoords");k.bindFramebuffer.set(T.getFramebuffer("coords").framebuffer),k.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),k.clear({color:o.be.transparent,depth:1}),T.coordsIndex=[];for(const ue of K){const de=T.getTerrainMesh(ue.tileID),pe=T.getTerrainData(ue.tileID);k.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,q.texture);const me={u_terrain_coords_id:(255-T.coordsIndex.length)/255,u_texture:0,u_ele_delta:T.getMeshFrameDelta(N.zoom)},we=N.getProjectionData({overscaledTileID:ue.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});re.draw(k,O.TRIANGLES,W,Ut.disabled,$,hr.backCCW,me,pe,we,"terrain",de.vertexBuffer,de.indexBuffer,de.segments),T.coordsIndex.push(ue.tileID.key)}k.bindFramebuffer.set(null),k.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain))}renderLayer(r,s,f,y,x){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||(y||[]).length)&&(this.id=f.id,o.ca(f)?function(T,k,O,N,$,W){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:q}=W,K=Ut.disabled,re=T.colorModeForRenderPass();(O._unevaluatedLayout.hasValue("text-variable-anchor")||O._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ue,de,pe,me,we,ye,Te,Ee,ve){const De=de.transform,Ue=de.style.map.terrain,Ve=we==="map",Ge=ye==="map";for(const He of ue){const _t=me.getTile(He),gt=_t.getBucket(pe);if(!gt||!gt.text||!gt.text.segments.get().length)continue;const it=o.am(gt.textSizeData,De.zoom),Ot=o.aB(_t,1,de.transform.zoom),dr=Yt(Ve,de.transform,Ot),Or=pe.layout.get("icon-text-fit")!=="none"&&gt.hasIconData();if(it){const ln=Math.pow(2,De.zoom-_t.tileID.overscaledZ),Gr=Ue?(Xr,Kr)=>Ue.getElevation(He,Xr,Kr):null;gh(gt,Ve,Ge,ve,De,dr,ln,it,Or,o.aC(De,_t,Te,Ee),He.toUnwrapped(),Gr)}}}(N,T,O,k,O.layout.get("text-rotation-alignment"),O.layout.get("text-pitch-alignment"),O.paint.get("text-translate"),O.paint.get("text-translate-anchor"),$),O.paint.get("icon-opacity").constantOr(1)!==0&&Pd(T,k,O,N,!1,O.paint.get("icon-translate"),O.paint.get("icon-translate-anchor"),O.layout.get("icon-rotation-alignment"),O.layout.get("icon-pitch-alignment"),O.layout.get("icon-keep-upright"),K,re,q),O.paint.get("text-opacity").constantOr(1)!==0&&Pd(T,k,O,N,!0,O.paint.get("text-translate"),O.paint.get("text-translate-anchor"),O.layout.get("text-rotation-alignment"),O.layout.get("text-pitch-alignment"),O.layout.get("text-keep-upright"),K,re,q),k.map.showCollisionBoxes&&(bd(T,k,O,N,!0),bd(T,k,O,N,!1))}(r,s,f,y,this.style.placement.variableOffsets,x):o.cb(f)?function(T,k,O,N,$){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:W}=$,q=O.paint.get("circle-opacity"),K=O.paint.get("circle-stroke-width"),re=O.paint.get("circle-stroke-opacity"),ue=!O.layout.get("circle-sort-key").isConstant();if(q.constantOr(1)===0&&(K.constantOr(1)===0||re.constantOr(1)===0))return;const de=T.context,pe=de.gl,me=T.transform,we=T.getDepthModeForSublayer(0,ur.ReadOnly),ye=Ut.disabled,Te=T.colorModeForRenderPass(),Ee=[],ve=me.getCircleRadiusCorrection();for(let De=0;De<N.length;De++){const Ue=N[De],Ve=k.getTile(Ue),Ge=Ve.getBucket(O);if(!Ge)continue;const He=O.paint.get("circle-translate"),_t=O.paint.get("circle-translate-anchor"),gt=o.aC(me,Ve,He,_t),it=Ge.programConfigurations.get(O.id),Ot=T.useProgram("circle",it),dr=Ge.layoutVertexBuffer,Or=Ge.indexBuffer,ln=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Ue),Gr={programConfiguration:it,program:Ot,layoutVertexBuffer:dr,indexBuffer:Or,uniformValues:ud(T,Ve,O,gt,ve),terrainData:ln,projectionData:me.getProjectionData({overscaledTileID:Ue,applyGlobeMatrix:!W,applyTerrainMatrix:!0})};if(ue){const Xr=Ge.segments.get();for(const Kr of Xr)Ee.push({segments:new o.aL([Kr]),sortKey:Kr.sortKey,state:Gr})}else Ee.push({segments:Ge.segments,sortKey:0,state:Gr})}ue&&Ee.sort((De,Ue)=>De.sortKey-Ue.sortKey);for(const De of Ee){const{programConfiguration:Ue,program:Ve,layoutVertexBuffer:Ge,indexBuffer:He,uniformValues:_t,terrainData:gt,projectionData:it}=De.state;Ve.draw(de,pe.TRIANGLES,we,ye,Te,hr.backCCW,_t,gt,it,O.id,Ge,He,De.segments,O.paint,T.transform.zoom,Ue)}}(r,s,f,y,x):o.cc(f)?function(T,k,O,N,$){if(O.paint.get("heatmap-opacity")===0)return;const W=T.context,{isRenderingToTexture:q,isRenderingGlobe:K}=$;if(T.style.map.terrain){for(const re of N){const ue=k.getTile(re);k.hasRenderableParent(re)||(T.renderPass==="offscreen"?Ss(T,ue,O,re,K):T.renderPass==="translucent"&&dl(T,O,re,q,K))}W.viewport.set([0,0,T.width,T.height])}else T.renderPass==="offscreen"?function(re,ue,de,pe){const me=re.context,we=me.gl,ye=re.transform,Te=Ut.disabled,Ee=new Sr([we.ONE,we.ONE],o.be.transparent,[!0,!0,!0,!0]);(function(ve,De,Ue){const Ve=ve.gl;ve.activeTexture.set(Ve.TEXTURE1),ve.viewport.set([0,0,De.width/4,De.height/4]);let Ge=Ue.heatmapFbos.get(o.c1);Ge?(Ve.bindTexture(Ve.TEXTURE_2D,Ge.colorAttachment.get()),ve.bindFramebuffer.set(Ge.framebuffer)):(Ge=ho(ve,De.width/4,De.height/4),Ue.heatmapFbos.set(o.c1,Ge))})(me,re,de),me.clear({color:o.be.transparent});for(let ve=0;ve<pe.length;ve++){const De=pe[ve];if(ue.hasRenderableParent(De))continue;const Ue=ue.getTile(De),Ve=Ue.getBucket(de);if(!Ve)continue;const Ge=Ve.programConfigurations.get(de.id),He=re.useProgram("heatmap",Ge),_t=ye.getProjectionData({overscaledTileID:De,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),gt=ye.getCircleRadiusCorrection();He.draw(me,we.TRIANGLES,ur.disabled,Te,Ee,hr.backCCW,Yu(Ue,ye.zoom,de.paint.get("heatmap-intensity"),gt),null,_t,de.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,de.paint,ye.zoom,Ge)}me.viewport.set([0,0,re.width,re.height])}(T,k,O,N):T.renderPass==="translucent"&&function(re,ue){const de=re.context,pe=de.gl;de.setColorMode(re.colorModeForRenderPass());const me=ue.heatmapFbos.get(o.c1);me&&(de.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,me.colorAttachment.get()),de.activeTexture.set(pe.TEXTURE1),lc(de,ue).bind(pe.LINEAR,pe.CLAMP_TO_EDGE),re.useProgram("heatmapTexture").draw(de,pe.TRIANGLES,ur.disabled,Ut.disabled,re.colorModeForRenderPass(),hr.disabled,kf(re,ue,0,1),null,null,ue.id,re.viewportBuffer,re.quadTriangleIndexBuffer,re.viewportSegments,ue.paint,re.transform.zoom))}(T,O)}(r,s,f,y,x):o.cd(f)?function(T,k,O,N,$){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:W}=$,q=O.paint.get("line-opacity"),K=O.paint.get("line-width");if(q.constantOr(1)===0||K.constantOr(1)===0)return;const re=T.getDepthModeForSublayer(0,ur.ReadOnly),ue=T.colorModeForRenderPass(),de=O.paint.get("line-dasharray"),pe=O.paint.get("line-pattern"),me=pe.constantOr(1),we=O.paint.get("line-gradient"),ye=O.getCrossfadeParameters(),Te=me?"linePattern":de?"lineSDF":we?"lineGradient":"line",Ee=T.context,ve=Ee.gl,De=T.transform;let Ue=!0;for(const Ve of N){const Ge=k.getTile(Ve);if(me&&!Ge.patternsLoaded())continue;const He=Ge.getBucket(O);if(!He)continue;const _t=He.programConfigurations.get(O.id),gt=T.context.program.get(),it=T.useProgram(Te,_t),Ot=Ue||it.program!==gt,dr=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Ve),Or=pe.constantOr(null);if(Or&&Ge.imageAtlas){const Nr=Ge.imageAtlas,$r=Nr.patternPositions[Or.to.toString()],Xn=Nr.patternPositions[Or.from.toString()];$r&&Xn&&_t.setConstantPatternPositions($r,Xn)}const ln=De.getProjectionData({overscaledTileID:Ve,applyGlobeMatrix:!W,applyTerrainMatrix:!0}),Gr=De.getPixelScale(),Xr=me?cd(T,Ge,O,Gr,ye):de?hd(T,Ge,O,Gr,de,ye):we?hh(T,Ge,O,Gr,He.lineClipsArray.length):Ju(T,Ge,O,Gr);if(me)Ee.activeTexture.set(ve.TEXTURE0),Ge.imageAtlasTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),_t.updatePaintBuffers(ye);else if(de&&(Ot||T.lineAtlas.dirty))Ee.activeTexture.set(ve.TEXTURE0),T.lineAtlas.bind(Ee);else if(we){const Nr=He.gradients[O.id];let $r=Nr.texture;if(O.gradientVersion!==Nr.version){let Xn=256;if(O.stepInterpolant){const Er=k.getSource().maxzoom,Vn=Ve.canonical.z===Er?Math.ceil(1<<T.transform.maxZoom-Ve.canonical.z):1;Xn=o.ag(o.c2(He.maxLineLength/o.$*1024*Vn),256,Ee.maxTextureSize)}Nr.gradient=o.c3({expression:O.gradientExpression(),evaluationKey:"lineProgress",resolution:Xn,image:Nr.gradient||void 0,clips:He.lineClipsArray}),Nr.texture?Nr.texture.update(Nr.gradient):Nr.texture=new o.T(Ee,Nr.gradient,ve.RGBA),Nr.version=O.gradientVersion,$r=Nr.texture}Ee.activeTexture.set(ve.TEXTURE0),$r.bind(O.stepInterpolant?ve.NEAREST:ve.LINEAR,ve.CLAMP_TO_EDGE)}const Kr=T.stencilModeForClipping(Ve);it.draw(Ee,ve.TRIANGLES,re,Kr,ue,hr.disabled,Xr,dr,ln,O.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,O.paint,T.transform.zoom,_t,He.layoutVertexBuffer2),Ue=!1}}(r,s,f,y,x):o.ce(f)?function(T,k,O,N,$){const W=O.paint.get("fill-color"),q=O.paint.get("fill-opacity");if(q.constantOr(1)===0)return;const{isRenderingToTexture:K}=$,re=T.colorModeForRenderPass(),ue=O.paint.get("fill-pattern"),de=T.opaquePassEnabledForLayer()&&!ue.constantOr(1)&&W.constantOr(o.be.transparent).a===1&&q.constantOr(0)===1?"opaque":"translucent";if(T.renderPass===de){const pe=T.getDepthModeForSublayer(1,T.renderPass==="opaque"?ur.ReadWrite:ur.ReadOnly);uc(T,k,O,N,pe,re,!1,K)}if(T.renderPass==="translucent"&&O.paint.get("fill-antialias")){const pe=T.getDepthModeForSublayer(O.getPaintProperty("fill-outline-color")?2:0,ur.ReadOnly);uc(T,k,O,N,pe,re,!0,K)}}(r,s,f,y,x):o.cf(f)?function(T,k,O,N,$){const W=O.paint.get("fill-extrusion-opacity");if(W===0)return;const{isRenderingToTexture:q}=$;if(T.renderPass==="translucent"){const K=new ur(T.context.gl.LEQUAL,ur.ReadWrite,T.depthRangeFor3D);if(W!==1||O.paint.get("fill-extrusion-pattern").constantOr(1))fl(T,k,O,N,K,Ut.disabled,Sr.disabled,q),fl(T,k,O,N,K,T.stencilModeFor3D(),T.colorModeForRenderPass(),q);else{const re=T.colorModeForRenderPass();fl(T,k,O,N,K,Ut.disabled,re,q)}}}(r,s,f,y,x):o.cg(f)?function(T,k,O,N,$){if(T.renderPass!=="offscreen"&&T.renderPass!=="translucent")return;const{isRenderingToTexture:W}=$,q=T.context,K=T.style.projection.useSubdivision,re=T.getDepthModeForSublayer(0,ur.ReadOnly),ue=T.colorModeForRenderPass();if(T.renderPass==="offscreen")(function(de,pe,me,we,ye,Te,Ee){const ve=de.context,De=ve.gl;for(const Ue of me){const Ve=pe.getTile(Ue),Ge=Ve.dem;if(!Ge||!Ge.data||!Ve.needsHillshadePrepare)continue;const He=Ge.dim,_t=Ge.stride,gt=Ge.getPixels();if(ve.activeTexture.set(De.TEXTURE1),ve.pixelStoreUnpackPremultiplyAlpha.set(!1),Ve.demTexture=Ve.demTexture||de.getTileTexture(_t),Ve.demTexture){const Ot=Ve.demTexture;Ot.update(gt,{premultiply:!1}),Ot.bind(De.NEAREST,De.CLAMP_TO_EDGE)}else Ve.demTexture=new o.T(ve,gt,De.RGBA,{premultiply:!1}),Ve.demTexture.bind(De.NEAREST,De.CLAMP_TO_EDGE);ve.activeTexture.set(De.TEXTURE0);let it=Ve.fbo;if(!it){const Ot=new o.T(ve,{width:He,height:He,data:null},De.RGBA);Ot.bind(De.LINEAR,De.CLAMP_TO_EDGE),it=Ve.fbo=ve.createFramebuffer(He,He,!0,!1),it.colorAttachment.set(Ot.texture)}ve.bindFramebuffer.set(it.framebuffer),ve.viewport.set([0,0,He,He]),de.useProgram("hillshadePrepare").draw(ve,De.TRIANGLES,ye,Te,Ee,hr.disabled,Qu(Ve.tileID,Ge),null,null,we.id,de.rasterBoundsBuffer,de.quadTriangleIndexBuffer,de.rasterBoundsSegments),Ve.needsHillshadePrepare=!1}})(T,k,N,O,re,Ut.disabled,ue),q.viewport.set([0,0,T.width,T.height]);else if(T.renderPass==="translucent")if(K){const[de,pe,me]=T.stencilConfigForOverlapTwoPass(N);Ro(T,k,O,me,de,re,ue,!1,W),Ro(T,k,O,me,pe,re,ue,!0,W)}else{const[de,pe]=T.getStencilConfigForOverlapAndUpdateStencilID(N);Ro(T,k,O,pe,de,re,ue,!1,W)}}(r,s,f,y,x):o.ch(f)?function(T,k,O,N,$){if(T.renderPass!=="translucent"||!N.length)return;const{isRenderingToTexture:W}=$,q=T.style.projection.useSubdivision,K=T.getDepthModeForSublayer(0,ur.ReadOnly),re=T.colorModeForRenderPass();if(q){const[ue,de,pe]=T.stencilConfigForOverlapTwoPass(N);Ps(T,k,O,pe,ue,K,re,!1,W),Ps(T,k,O,pe,de,K,re,!0,W)}else{const[ue,de]=T.getStencilConfigForOverlapAndUpdateStencilID(N);Ps(T,k,O,de,ue,K,re,!1,W)}}(r,s,f,y,x):o.ci(f)?function(T,k,O,N,$){if(T.renderPass!=="translucent"||O.paint.get("raster-opacity")===0||!N.length)return;const{isRenderingToTexture:W}=$,q=k.getSource(),K=T.style.projection.useSubdivision;if(q instanceof fi)fo(T,k,O,N,null,!1,!1,q.tileCoords,q.flippedWindingOrder,W);else if(K){const[re,ue,de]=T.stencilConfigForOverlapTwoPass(N);fo(T,k,O,de,re,!1,!0,cc,!1,W),fo(T,k,O,de,ue,!0,!0,cc,!1,W)}else{const[re,ue]=T.getStencilConfigForOverlapAndUpdateStencilID(N);fo(T,k,O,ue,re,!1,!0,cc,!1,W)}}(r,s,f,y,x):o.cj(f)?function(T,k,O,N,$){const W=O.paint.get("background-color"),q=O.paint.get("background-opacity");if(q===0)return;const{isRenderingToTexture:K}=$,re=T.context,ue=re.gl,de=T.style.projection,pe=T.transform,me=pe.tileSize,we=O.paint.get("background-pattern");if(T.isPatternMissing(we))return;const ye=!we&&W.a===1&&q===1&&T.opaquePassEnabledForLayer()?"opaque":"translucent";if(T.renderPass!==ye)return;const Te=Ut.disabled,Ee=T.getDepthModeForSublayer(0,ye==="opaque"?ur.ReadWrite:ur.ReadOnly),ve=T.colorModeForRenderPass(),De=T.useProgram(we?"backgroundPattern":"background"),Ue=N||Xe(pe,{tileSize:me,terrain:T.style.map.terrain});we&&(re.activeTexture.set(ue.TEXTURE0),T.imageManager.bind(T.context));const Ve=O.getCrossfadeParameters();for(const Ge of Ue){const He=pe.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!K,applyTerrainMatrix:!0}),_t=we?im(q,T,we,{tileID:Ge,tileSize:me},Ve):gs(q,W),gt=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Ge),it=de.getMeshFromTileID(re,Ge.canonical,!1,!0,"raster");De.draw(re,ue.TRIANGLES,Ee,Te,ve,hr.backCCW,_t,gt,He,O.id,it.vertexBuffer,it.indexBuffer,it.segments)}}(r,0,f,y,x):o.ck(f)&&function(T,k,O,N){const{isRenderingGlobe:$}=N,W=T.context,q=O.implementation,K=T.style.projection,re=T.transform,ue=re.getProjectionDataForCustomLayer($),de={farZ:re.farZ,nearZ:re.nearZ,fov:re.fov*Math.PI/180,modelViewProjectionMatrix:re.modelViewProjectionMatrix,projectionMatrix:re.projectionMatrix,shaderData:{variantName:K.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${K.shaderPreludeCode.vertexSource}`,define:K.shaderDefine},defaultProjectionData:ue},pe=q.renderingMode?q.renderingMode:"2d";if(T.renderPass==="offscreen"){const me=q.prerender;me&&(T.setCustomLayerDefaults(),W.setColorMode(T.colorModeForRenderPass()),me.call(q,W.gl,de),W.setDirty(),T.setBaseState())}else if(T.renderPass==="translucent"){T.setCustomLayerDefaults(),W.setColorMode(T.colorModeForRenderPass()),W.setStencilMode(Ut.disabled);const me=pe==="3d"?T.getDepthModeFor3D():T.getDepthModeForSublayer(0,ur.ReadOnly);W.setDepthMode(me),q.render(W.gl,de),W.setDirty(),T.setBaseState(),W.bindFramebuffer.set(null)}}(r,0,f,x))}saveTileTexture(r){const s=this._tileTextures[r.size[0]];s?s.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const s=this._tileTextures[r];return s&&s.length>0?s.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const s=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!s||!f}useProgram(r,s,f=!1,y=[]){this.cache=this.cache||{};const x=!!this.style.map.terrain,T=this.style.projection,k=f?$a.projectionMercator:T.shaderPreludeCode,O=f?hs:T.shaderDefine,N=r+(s?s.cacheKey:"")+`/${f?sh:T.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(x?"/terrain":"")+(y?`/${y.join("/")}`:"");return this.cache[N]||(this.cache[N]=new uh(this.context,$a[r],s,zf[r],this._showOverdrawInspector,x,k,O,y)),this.cache[N]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:s}=this.context.gl;return this.width!==r||this.height!==s}}function ru(_,r){let s,f=!1,y=null,x=null;const T=()=>{y=null,f&&(_.apply(x,s),y=setTimeout(T,r),f=!1)};return(...k)=>(f=!0,x=this,s=k,y||T(),y)}class dc{constructor(r){this._getCurrentHash=()=>{const s=window.location.hash.replace("#","");if(this._hashName){let f;return s.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(f=y)}),(f&&f[1]||"").split("/")}return s.split("/")},this._onHashChange=()=>{const s=this._getCurrentHash();if(!this._isValidHash(s))return!1;const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(s[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+s[2],+s[1]],zoom:+s[0],bearing:f,pitch:+(s[4]||0)}),!0},this._updateHashUnthrottled=()=>{const s=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,s)},this._removeHash=()=>{const s=this._getCurrentHash();if(s.length===0)return;const f=s.join("/");let y=f;y.split("&").length>0&&(y=y.split("&")[0]),this._hashName&&(y=`${this._hashName}=${f}`);let x=window.location.hash.replace(y,"");x.startsWith("#&")?x=x.slice(0,1)+x.slice(2):x==="#"&&(x="");let T=window.location.href.replace(/(#.+)?$/,x);T=T.replace("&&","&"),window.history.replaceState(window.history.state,null,T)},this._updateHash=ru(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const s=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,y=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,y),T=Math.round(s.lng*x)/x,k=Math.round(s.lat*x)/x,O=this._map.getBearing(),N=this._map.getPitch();let $="";if($+=r?`/${T}/${k}/${f}`:`${f}/${k}/${T}`,(O||N)&&($+="/"+Math.round(10*O)/10),N&&($+=`/${Math.round(N)}`),this._hashName){const W=this._hashName;let q=!1;const K=window.location.hash.slice(1).split("&").map(re=>{const ue=re.split("=")[0];return ue===W?(q=!0,`${ue}=${$}`):re}).filter(re=>re);return q||K.push(`${W}=${$}`),`#${K.join("&")}`}return`#${$}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new o.S(+r[2],+r[1])}catch{return!1}const s=+r[0],f=+(r[3]||0),y=+(r[4]||0);return s>=this._map.getMinZoom()&&s<=this._map.getMaxZoom()&&f>=-180&&f<=180&&y>=this._map.getMinPitch()&&y<=this._map.getMaxPitch()}}const nu={linearity:.3,easing:o.cl(0,0,.3,1)},Oa=o.e({deceleration:2500,maxSpeed:1400},nu),gl=o.e({deceleration:20,maxSpeed:1400},nu),po=o.e({deceleration:1e3,maxSpeed:360},nu),iu=o.e({deceleration:1e3,maxSpeed:90},nu),xh=o.e({deceleration:1e3,maxSpeed:360},nu);class yl{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:R.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,s=R.now();for(;r.length>0&&s-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const s={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)s.zoom+=x.zoomDelta||0,s.bearing+=x.bearingDelta||0,s.pitch+=x.pitchDelta||0,s.roll+=x.rollDelta||0,x.panDelta&&s.pan._add(x.panDelta),x.around&&(s.around=x.around),x.pinchAround&&(s.pinchAround=x.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(s.pan.mag()){const x=Ur(s.pan.mag(),f,o.e({},Oa,r||{})),T=s.pan.mult(x.amount/s.pan.mag()),k=this._map.cameraHelper.handlePanInertia(T,this._map.transform);y.center=k.easingCenter,y.offset=k.easingOffset,da(y,x)}if(s.zoom){const x=Ur(s.zoom,f,gl);y.zoom=this._map.transform.zoom+x.amount,da(y,x)}if(s.bearing){const x=Ur(s.bearing,f,po);y.bearing=this._map.transform.bearing+o.ag(x.amount,-179,179),da(y,x)}if(s.pitch){const x=Ur(s.pitch,f,iu);y.pitch=this._map.transform.pitch+x.amount,da(y,x)}if(s.roll){const x=Ur(s.roll,f,xh);y.roll=this._map.transform.roll+o.ag(x.amount,-179,179),da(y,x)}if(y.zoom||y.bearing){const x=s.pinchAround===void 0?s.around:s.pinchAround;y.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),o.e(y,{noMoveStart:!0})}}function da(_,r){(!_.duration||_.duration<r.duration)&&(_.duration=r.duration,_.easing=r.easing)}function Ur(_,r,s){const{maxSpeed:f,linearity:y,deceleration:x}=s,T=o.ag(_*y/(r/1e3),-f,f),k=Math.abs(T)/(x*y);return{easing:s.easing,duration:1e3*k,amount:T*(k/2)}}class Cr extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,s,f,y={}){f=f instanceof MouseEvent?f:new MouseEvent(r,f);const x=z.mousePos(s.getCanvas(),f),T=s.unproject(x);super(r,o.e({point:x,lngLat:T,originalEvent:f},y)),this._defaultPrevented=!1,this.target=s}}class Hn extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,s,f){const y=r==="touchend"?f.changedTouches:f.touches,x=z.touchPos(s.getCanvasContainer(),y),T=x.map(O=>s.unproject(O)),k=x.reduce((O,N,$,W)=>O.add(N.div(W.length)),new o.P(0,0));super(r,{points:x,point:k,lngLats:T,lngLat:s.unproject(k),originalEvent:f}),this._defaultPrevented=!1}}class Kn extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,s,f){super(r,{originalEvent:f}),this._defaultPrevented=!1}}class Di{constructor(r,s){this._map=r,this._clickTolerance=s.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Kn(r.type,this._map,r))}mousedown(r,s){return this._mousedownPos=s,this._firePreventable(new Cr(r.type,this._map,r))}mouseup(r){this._map.fire(new Cr(r.type,this._map,r))}click(r,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new Cr(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Cr(r.type,this._map,r))}mouseover(r){this._map.fire(new Cr(r.type,this._map,r))}mouseout(r){this._map.fire(new Cr(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Hn(r.type,this._map,r))}touchmove(r){this._map.fire(new Hn(r.type,this._map,r))}touchend(r){this._map.fire(new Hn(r.type,this._map,r))}touchcancel(r){this._map.fire(new Hn(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ts{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Cr(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Cr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new Cr(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Za{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(o.P.convert(r),this._map.terrain)}}class gi{constructor(r,s){this._map=r,this._tr=new Za(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=s.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,s){this.isEnabled()&&r.shiftKey&&r.button===0&&(z.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)}mousemoveWindow(r,s){if(!this._active)return;const f=s;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=f,this._box||(this._box=z.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const x=Math.min(y.x,f.x),T=Math.max(y.x,f.x),k=Math.min(y.y,f.y),O=Math.max(y.y,f.y);z.setTransform(this._box,`translate(${x}px,${k}px)`),this._box.style.width=T-x+"px",this._box.style.height=O-k+"px"}mouseupWindow(r,s){if(!this._active||r.button!==0)return;const f=this._startPos,y=s;if(this.reset(),z.suppressClick(),f.x!==y.x||f.y!==y.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:r})),{cameraAnimation:x=>x.fitScreenCoordinates(f,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(z.remove(this._box),this._box=null),z.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,s){return this._map.fire(new o.l(r,{originalEvent:s}))}}function vl(_,r){if(_.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${r.length}`);const s={};for(let f=0;f<_.length;f++)s[_[f].identifier]=r[f];return s}class Ed{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,s,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=function(y){const x=new o.P(0,0);for(const T of y)x._add(T);return x.div(y.length)}(s),this.touches=vl(f,s)))}touchmove(r,s,f){if(this.aborted||!this.centroid)return;const y=vl(f,s);for(const x in this.touches){const T=y[x];(!T||T.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(r,s,f){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class fc{constructor(r){this.singleTap=new Ed(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,s,f){this.singleTap.touchstart(r,s,f)}touchmove(r,s,f){this.singleTap.touchmove(r,s,f)}touchend(r,s,f){const y=this.singleTap.touchend(r,s,f);if(y){const x=r.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(y)<30;if(x&&T||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class _l{constructor(r){this._tr=new Za(r),this._zoomIn=new fc({numTouches:1,numTaps:2}),this._zoomOut=new fc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,s,f){this._zoomIn.touchstart(r,s,f),this._zoomOut.touchstart(r,s,f)}touchmove(r,s,f){this._zoomIn.touchmove(r,s,f),this._zoomOut.touchmove(r,s,f)}touchend(r,s,f){const y=this._zoomIn.touchend(r,s,f),x=this._zoomOut.touchend(r,s,f),T=this._tr;return y?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(y)},{originalEvent:r})}):x?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(x)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xl{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const s=this._moveFunction(...r);if(s.bearingDelta||s.pitchDelta||s.rollDelta||s.around||s.panDelta)return this._active=!0,s}dragStart(r,s){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(s)?s[0]:s,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,s){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const y=Array.isArray(s)?s[0]:s;return!this._moved&&y.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(f,y))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&z.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Rn=0,Hi=2,bh={[Rn]:1,[Hi]:2};class yi{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const s=z.mouseButton(r);this._eventButton=s}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(s,f){const y=bh[f];return s.buttons===void 0||(s.buttons&y)!==y}(r,this._eventButton)}isValidEndEvent(r){return z.mouseButton(r)===this._eventButton}}class au{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class Cs{constructor(r=new yi({checkCorrectEvent:()=>!0}),s=new au){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=s}_executeRelevantHandler(r,s,f){return r instanceof MouseEvent?s(r):typeof TouchEvent<"u"&&r instanceof TouchEvent?f(r):void 0}startMove(r){this._executeRelevantHandler(r,s=>this.mouseMoveStateManager.startMove(s),s=>this.oneFingerTouchMoveStateManager.startMove(s))}endMove(r){this._executeRelevantHandler(r,s=>this.mouseMoveStateManager.endMove(s),s=>this.oneFingerTouchMoveStateManager.endMove(s))}isValidStartEvent(r){return this._executeRelevantHandler(r,s=>this.mouseMoveStateManager.isValidStartEvent(s),s=>this.oneFingerTouchMoveStateManager.isValidStartEvent(s))}isValidMoveEvent(r){return this._executeRelevantHandler(r,s=>this.mouseMoveStateManager.isValidMoveEvent(s),s=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(s))}isValidEndEvent(r){return this._executeRelevantHandler(r,s=>this.mouseMoveStateManager.isValidEndEvent(s),s=>this.oneFingerTouchMoveStateManager.isValidEndEvent(s))}}const zo=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=r=>{r.preventDefault()}};class ou{constructor(r,s){this._clickTolerance=r.clickTolerance||1,this._map=s,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,s,f){return this._calculateTransform(r,s,f)}touchmove(r,s,f){if(this._active){if(!this._shouldBePrevented(f.length))return r.preventDefault(),this._calculateTransform(r,s,f);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,s,f){this._calculateTransform(r,s,f),this._active&&this._shouldBePrevented(f.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,s,f){f.length>0&&(this._active=!0);const y=vl(f,s),x=new o.P(0,0),T=new o.P(0,0);let k=0;for(const N in y){const $=y[N],W=this._touches[N];W&&(x._add($),T._add($.sub(W)),k++,y[N]=$)}if(this._touches=y,this._shouldBePrevented(k)||!T.mag())return;const O=T.div(k);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(k),panDelta:O}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class su{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,s,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([s[0],s[1]]))}touchmove(r,s,f){if(!this._firstTwoTouches)return;r.preventDefault();const[y,x]=this._firstTwoTouches,T=Es(f,s,y),k=Es(f,s,x);if(!T||!k)return;const O=this._aroundCenter?null:T.add(k).div(2);return this._move([T,k],O,r)}touchend(r,s,f){if(!this._firstTwoTouches)return;const[y,x]=this._firstTwoTouches,T=Es(f,s,y),k=Es(f,s,x);T&&k||(this._active&&z.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Es(_,r,s){for(let f=0;f<_.length;f++)if(_[f].identifier===s)return r[f]}function si(_,r){return Math.log(_/r)/Math.LN2}class En extends su{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,s){const f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(si(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:si(this._distance,f),pinchAround:s}}}function Tt(_,r){return 180*_.angleWith(r)/Math.PI}class Ha extends su{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,s,f){const y=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Tt(this._vector,y),pinchAround:s}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const s=25/(Math.PI*this._minDiameter)*360,f=Tt(r,this._startVector);return Math.abs(f)<s}}function fa(_){return Math.abs(_.y)>Math.abs(_.x)}class Lo extends su{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,s,f){super.touchstart(r,s,f),this._currentTouchCount=f.length}_start(r){this._lastPoints=r,fa(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,s,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const y=r[0].sub(this._lastPoints[0]),x=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,x,f.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(y.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(r,s,f){if(this._valid!==void 0)return this._valid;const y=r.mag()>=2,x=s.mag()>=2;if(!y&&!x)return;if(!y||!x)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const T=r.y>0==s.y>0;return fa(r)&&fa(s)&&T}}const lu={panStep:100,bearingStep:15,pitchStep:10};class Ms{constructor(r){this._tr=new Za(r);const s=lu;this._panStep=s.panStep,this._bearingStep=s.bearingStep,this._pitchStep=s.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let s=0,f=0,y=0,x=0,T=0;switch(r.keyCode){case 61:case 107:case 171:case 187:s=1;break;case 189:case 109:case 173:s=-1;break;case 37:r.shiftKey?f=-1:(r.preventDefault(),x=-1);break;case 39:r.shiftKey?f=1:(r.preventDefault(),x=1);break;case 38:r.shiftKey?y=1:(r.preventDefault(),T=-1);break;case 40:r.shiftKey?y=-1:(r.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(f=0,y=0),{cameraAnimation:k=>{const O=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:pc,zoom:s?Math.round(O.zoom)+s*(r.shiftKey?2:1):O.zoom,bearing:O.bearing+f*this._bearingStep,pitch:O.pitch+y*this._pitchStep,offset:[-x*this._panStep,-T*this._panStep],center:O.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function pc(_){return _*(2-_)}const rr=4.000244140625,Oi=1/450;class on{constructor(r,s){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=r,this._tr=new Za(r),this._triggerRenderFrame=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Oi}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let s=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const f=R.now(),y=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,s!==0&&s%rr==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(y*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),r.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=r,this._delta-=s,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const s=z.mousePos(this._map.getCanvas(),r),f=this._tr;this._aroundPoint=this._aroundCenter?f.transform.locationToScreenPoint(o.S.convert(f.center)):s,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const k=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=k),typeof this._targetZoom=="number"&&(this._targetZoom+=k)}if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>rr?this._wheelZoomRate:this._defaultZoomRate;let O=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&O!==0&&(O=1/O);const N=typeof this._targetZoom!="number"?r.scale:o.ae(this._targetZoom);this._targetZoom=r.getConstrained(r.getCameraLngLat(),o.aj(N*O)).zoom,this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const s=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,f=this._startZoom,y=this._easing;let x,T=!1;if(this._type==="wheel"&&f&&y){const k=R.now()-this._lastWheelEventTime,O=Math.min((k+5)/200,1),N=y(O);x=o.C.number(f,s,N),O<1?this._frameId||(this._frameId=!0):T=!0}else x=s,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=x,{noInertia:!0,needsRenderFrame:!T,zoomDelta:x-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let s=o.cn;if(this._prevEase){const f=this._prevEase,y=(R.now()-f.start)/f.duration,x=f.easing(y+.01)-f.easing(y),T=.27/Math.sqrt(x*x+1e-4)*.01,k=Math.sqrt(.0729-T*T);s=o.cl(T,k,.25,1)}return this._prevEase={start:R.now(),duration:r,easing:s},s}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ki{constructor(r,s){this._clickZoom=r,this._tapZoom=s}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Gf{constructor(r){this._tr=new Za(r),this.reset()}reset(){this._active=!1}dblclick(r,s){return r.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(s)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qf{constructor(){this._tap=new fc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,s,f){if(!this._swipePoint)if(this._tapTime){const y=s[0],x=r.timeStamp-this._tapTime<500,T=this._tapPoint.dist(y)<30;x&&T?f.length>0&&(this._swipePoint=y,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(r,s,f)}touchmove(r,s,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const y=s[0],x=y.y-this._swipePoint.y;return this._swipePoint=y,r.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(r,s,f)}touchend(r,s,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const y=this._tap.touchend(r,s,f);y&&(this._tapTime=r.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mc{constructor(r,s,f){this._el=r,this._mousePan=s,this._touchPan=f}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class uu{constructor(r,s,f,y){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=s,this._mousePitch=f,this._mouseRoll=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class wh{constructor(r,s,f,y){this._el=r,this._touchZoom=s,this._touchRotate=f,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class gc{constructor(r,s){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=s,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=z.create("div","maplibregl-cooperative-gesture-screen",r);let s=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(s=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=s,this._container.appendChild(y);const x=document.createElement("div");x.className="maplibregl-mobile-message",x.textContent=f,this._container.appendChild(x),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(z.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,s){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:r,originalEvent:s})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const cu=_=>_.zoom||_.drag||_.roll||_.pitch||_.rotate;class hu extends o.l{}function yc(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta||_.rollDelta}class As{constructor(r,s){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,x)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=y.type==="renderFrame"?void 0:y,k={needsRenderFrame:!1},O={},N={};for(const{handlerName:q,handler:K,allowed:re}of this._handlers){if(!K.isEnabled())continue;let ue;if(this._blockedByActive(N,re,q))K.reset();else if(K[x||y.type]){if(o.co(y,x||y.type)){const de=z.mousePos(this._map.getCanvas(),y);ue=K[x||y.type](y,de)}else if(o.cp(y,x||y.type)){const de=this._getMapTouches(y.touches),pe=z.touchPos(this._map.getCanvas(),de);ue=K[x||y.type](y,pe,de)}else o.cq(x||y.type)||(ue=K[x||y.type](y));this.mergeHandlerResult(k,O,ue,q,T),ue&&ue.needsRenderFrame&&this._triggerRenderFrame()}(ue||K.isActive())&&(N[q]=K)}const $={};for(const q in this._previousActiveHandlers)N[q]||($[q]=T);this._previousActiveHandlers=N,(Object.keys($).length||yc(k))&&(this._changes.push([k,O,$]),this._triggerRenderFrame()),(Object.keys(N).length||yc(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:W}=k;W&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],W(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new yl(r),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,x,T]of this._listeners)z.addEventListener(y,x,y===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[r,s,f]of this._listeners)z.removeEventListener(r,s,r===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(r){const s=this._map,f=s.getCanvasContainer();this._add("mapEvent",new Di(s,r));const y=s.boxZoom=new gi(s,r);this._add("boxZoom",y),r.interactive&&r.boxZoom&&y.enable();const x=s.cooperativeGestures=new gc(s,r.cooperativeGestures);this._add("cooperativeGestures",x),r.cooperativeGestures&&x.enable();const T=new _l(s),k=new Gf(s);s.doubleClickZoom=new Ki(k,T),this._add("tapZoom",T),this._add("clickZoom",k),r.interactive&&r.doubleClickZoom&&s.doubleClickZoom.enable();const O=new qf;this._add("tapDragZoom",O);const N=s.touchPitch=new Lo(s);this._add("touchPitch",N),r.interactive&&r.touchPitch&&s.touchPitch.enable(r.touchPitch);const $=()=>s.project(s.getCenter()),W=function({enable:ye,clickTolerance:Te,aroundCenter:Ee=!0,minPixelCenterThreshold:ve=100,rotateDegreesPerPixelMoved:De=.8},Ue){const Ve=new yi({checkCorrectEvent:Ge=>z.mouseButton(Ge)===0&&Ge.ctrlKey||z.mouseButton(Ge)===2&&!Ge.ctrlKey});return new xl({clickTolerance:Te,move:(Ge,He)=>{const _t=Ue();if(Ee&&Math.abs(_t.y-Ge.y)>ve)return{bearingDelta:o.cm(new o.P(Ge.x,He.y),He,_t)};let gt=(He.x-Ge.x)*De;return Ee&&He.y<_t.y&&(gt=-gt),{bearingDelta:gt}},moveStateManager:Ve,enable:ye,assignEvents:zo})}(r,$),q=function({enable:ye,clickTolerance:Te,pitchDegreesPerPixelMoved:Ee=-.5}){const ve=new yi({checkCorrectEvent:De=>z.mouseButton(De)===0&&De.ctrlKey||z.mouseButton(De)===2});return new xl({clickTolerance:Te,move:(De,Ue)=>({pitchDelta:(Ue.y-De.y)*Ee}),moveStateManager:ve,enable:ye,assignEvents:zo})}(r),K=function({enable:ye,clickTolerance:Te,rollDegreesPerPixelMoved:Ee=.3},ve){const De=new yi({checkCorrectEvent:Ue=>z.mouseButton(Ue)===2&&Ue.ctrlKey});return new xl({clickTolerance:Te,move:(Ue,Ve)=>{const Ge=ve();let He=(Ve.x-Ue.x)*Ee;return Ve.y<Ge.y&&(He=-He),{rollDelta:He}},moveStateManager:De,enable:ye,assignEvents:zo})}(r,$);s.dragRotate=new uu(r,W,q,K),this._add("mouseRotate",W,["mousePitch"]),this._add("mousePitch",q,["mouseRotate","mouseRoll"]),this._add("mouseRoll",K,["mousePitch"]),r.interactive&&r.dragRotate&&s.dragRotate.enable();const re=function({enable:ye,clickTolerance:Te}){const Ee=new yi({checkCorrectEvent:ve=>z.mouseButton(ve)===0&&!ve.ctrlKey});return new xl({clickTolerance:Te,move:(ve,De)=>({around:De,panDelta:De.sub(ve)}),activateOnStart:!0,moveStateManager:Ee,enable:ye,assignEvents:zo})}(r),ue=new ou(r,s);s.dragPan=new mc(f,re,ue),this._add("mousePan",re),this._add("touchPan",ue,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&s.dragPan.enable(r.dragPan);const de=new Ha,pe=new En;s.touchZoomRotate=new wh(f,pe,de,O),this._add("touchRotate",de,["touchPan","touchZoom"]),this._add("touchZoom",pe,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&s.touchZoomRotate.enable(r.touchZoomRotate);const me=s.scrollZoom=new on(s,()=>this._triggerRenderFrame());this._add("scrollZoom",me,["mousePan"]),r.interactive&&r.scrollZoom&&s.scrollZoom.enable(r.scrollZoom);const we=s.keyboard=new Ms(s);this._add("keyboard",we),r.interactive&&r.keyboard&&s.keyboard.enable(),this._add("blockableMapEvent",new Ts(s))}_add(r,s,f){this._handlers.push({handlerName:r,handler:s,allowed:f}),this._handlersById[r]=s}stop(r){if(!this._updatingCamera){for(const{handler:s}of this._handlers)s.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!cu(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,s,f){for(const y in r)if(y!==f&&(!s||s.indexOf(y)<0))return!0;return!1}_getMapTouches(r){const s=[];for(const f of r)this._el.contains(f.target)&&s.push(f);return s}mergeHandlerResult(r,s,f,y,x){if(!f)return;o.e(r,f);const T={handlerName:y,originalEvent:f.originalEvent||x};f.zoomDelta!==void 0&&(s.zoom=T),f.panDelta!==void 0&&(s.drag=T),f.rollDelta!==void 0&&(s.roll=T),f.pitchDelta!==void 0&&(s.pitch=T),f.bearingDelta!==void 0&&(s.rotate=T)}_applyChanges(){const r={},s={},f={};for(const[y,x,T]of this._changes)y.panDelta&&(r.panDelta=(r.panDelta||new o.P(0,0))._add(y.panDelta)),y.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+y.pitchDelta),y.rollDelta&&(r.rollDelta=(r.rollDelta||0)+y.rollDelta),y.around!==void 0&&(r.around=y.around),y.pinchAround!==void 0&&(r.pinchAround=y.pinchAround),y.noInertia&&(r.noInertia=y.noInertia),o.e(s,x),o.e(f,T);this._updateMapTransform(r,s,f),this._changes=[]}_updateMapTransform(r,s,f){const y=this._map,x=y._getTransformForUpdate(),T=y.terrain;if(!(yc(r)||T&&this._terrainMovement))return this._fireEvents(s,f,!0);y._stop(!0);let{panDelta:k,zoomDelta:O,bearingDelta:N,pitchDelta:$,rollDelta:W,around:q,pinchAround:K}=r;K!==void 0&&(q=K),q=q||y.transform.centerPoint,T&&!x.isPointOnMapSurface(q)&&(q=x.centerPoint);const re={panDelta:k,zoomDelta:O,rollDelta:W,pitchDelta:$,bearingDelta:N,around:q};this._map.cameraHelper.useGlobeControls&&!x.isPointOnMapSurface(q)&&(q=x.centerPoint);const ue=q.distSqr(x.centerPoint)<.01?x.center:x.screenPointToLocation(k?q.sub(k):q);T?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(re,x),this._terrainMovement||!s.drag&&!s.zoom?s.drag&&this._terrainMovement?x.setCenter(x.screenPointToLocation(x.centerPoint.sub(k))):this._map.cameraHelper.handleMapControlsPan(re,x,ue):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(re,x,ue))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(re,x),this._map.cameraHelper.handleMapControlsPan(re,x,ue)),y._applyUpdatedTransform(x),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(s,f,!0)}_fireEvents(r,s,f){const y=cu(this._eventsInProgress),x=cu(r),T={};for(const W in r){const{originalEvent:q}=r[W];this._eventsInProgress[W]||(T[`${W}start`]=q),this._eventsInProgress[W]=r[W]}!y&&x&&this._fireEvent("movestart",x.originalEvent);for(const W in T)this._fireEvent(W,T[W]);x&&this._fireEvent("move",x.originalEvent);for(const W in r){const{originalEvent:q}=r[W];this._fireEvent(W,q)}const k={};let O;for(const W in this._eventsInProgress){const{handlerName:q,originalEvent:K}=this._eventsInProgress[W];this._handlersById[q].isActive()||(delete this._eventsInProgress[W],O=s[q]||K,k[`${W}end`]=O)}for(const W in k)this._fireEvent(W,k[W]);const N=cu(this._eventsInProgress),$=(y||x)&&!N;if($&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const W=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&W.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(W)}if(f&&$){this._updatingCamera=!0;const W=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),q=K=>K!==0&&-this._bearingSnap<K&&K<this._bearingSnap;!W||!W.essential&&R.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:O})),q(this._map.getBearing())&&this._map.resetNorth()):(q(W.bearing||this._map.getBearing())&&(W.bearing=0),W.freezeElevation=!0,this._map.easeTo(W,{originalEvent:O})),this._updatingCamera=!1}}_fireEvent(r,s){this._map.fire(new o.l(r,s?{originalEvent:s}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new hu("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Hr extends o.E{constructor(r,s,f){super(),this._renderFrameCallback=()=>{const y=Math.min((R.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(y)),y<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=f.bearingSnap,this.cameraHelper=s,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(r,s){r.apply(this.transform),this.transform=r,this.cameraHelper=s}getCenter(){return new o.S(this.transform.center.lng,this.transform.center.lat)}setCenter(r,s){return this.jumpTo({center:r},s)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,s){return this.jumpTo({elevation:r},s),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,s,f){return r=o.P.convert(r).mult(-1),this.panTo(this.transform.center,o.e({offset:r},s),f)}panTo(r,s,f){return this.easeTo(o.e({center:r},s),f)}getZoom(){return this.transform.zoom}setZoom(r,s){return this.jumpTo({zoom:r},s),this}zoomTo(r,s,f){return this.easeTo(o.e({zoom:r},s),f)}zoomIn(r,s){return this.zoomTo(this.getZoom()+1,r,s),this}zoomOut(r,s){return this.zoomTo(this.getZoom()-1,r,s),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,s){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new o.l("movestart",s)).fire(new o.l("move",s)).fire(new o.l("moveend",s))),this}getBearing(){return this.transform.bearing}setBearing(r,s){return this.jumpTo({bearing:r},s),this}getPadding(){return this.transform.padding}setPadding(r,s){return this.jumpTo({padding:r},s),this}rotateTo(r,s,f){return this.easeTo(o.e({bearing:r},s),f)}resetNorth(r,s){return this.rotateTo(0,o.e({duration:1e3},r),s),this}resetNorthPitch(r,s){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},r),s),this}snapToNorth(r,s){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,s):this}getPitch(){return this.transform.pitch}setPitch(r,s){return this.jumpTo({pitch:r},s),this}getRoll(){return this.transform.roll}setRoll(r,s){return this.jumpTo({roll:r},s),this}cameraForBounds(r,s){r=_r.convert(r).adjustAntiMeridian();const f=s&&s.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),f,s)}_cameraForBoxAndBearing(r,s,f,y){const x={top:0,bottom:0,right:0,left:0};if(typeof(y=o.e({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const N=y.padding;y.padding={top:N,bottom:N,right:N,left:N}}const T=o.e(x,y.padding);y.padding=T;const k=this.transform,O=new _r(r,s);return this.cameraHelper.cameraForBoxAndBearing(y,T,O,f,k)}fitBounds(r,s,f){return this._fitInternal(this.cameraForBounds(r,s),s,f)}fitScreenCoordinates(r,s,f,y,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(r)),this.transform.screenPointToLocation(o.P.convert(s)),f,y),y,x)}_fitInternal(r,s,f){return r?(delete(s=o.e(r,s)).padding,s.linear?this.easeTo(s,f):this.flyTo(s,f)):this}jumpTo(r,s){this.stop();const f=this._getTransformForUpdate();let y=!1,x=!1,T=!1;const k=f.zoom;this.cameraHelper.handleJumpToCenterZoom(f,r);const O=f.zoom!==k;return"elevation"in r&&f.elevation!==+r.elevation&&f.setElevation(+r.elevation),"bearing"in r&&f.bearing!==+r.bearing&&(y=!0,f.setBearing(+r.bearing)),"pitch"in r&&f.pitch!==+r.pitch&&(x=!0,f.setPitch(+r.pitch)),"roll"in r&&f.roll!==+r.roll&&(T=!0,f.setRoll(+r.roll)),r.padding==null||f.isPaddingEqual(r.padding)||f.setPadding(r.padding),this._applyUpdatedTransform(f),this.fire(new o.l("movestart",s)).fire(new o.l("move",s)),O&&this.fire(new o.l("zoomstart",s)).fire(new o.l("zoom",s)).fire(new o.l("zoomend",s)),y&&this.fire(new o.l("rotatestart",s)).fire(new o.l("rotate",s)).fire(new o.l("rotateend",s)),x&&this.fire(new o.l("pitchstart",s)).fire(new o.l("pitch",s)).fire(new o.l("pitchend",s)),T&&this.fire(new o.l("rollstart",s)).fire(new o.l("roll",s)).fire(new o.l("rollend",s)),this.fire(new o.l("moveend",s))}calculateCameraOptionsFromTo(r,s,f,y=0){const x=o.a0.fromLngLat(r,s),T=o.a0.fromLngLat(f,y),k=T.x-x.x,O=T.y-x.y,N=T.z-x.z,$=Math.hypot(k,O,N);if($===0)throw new Error("Can't calculate camera options with same From and To");const W=Math.hypot(k,O),q=o.aj(this.transform.cameraToCenterDistance/$/this.transform.tileSize),K=180*Math.atan2(k,-O)/Math.PI;let re=180*Math.acos(W/$)/Math.PI;return re=N<0?90-re:90+re,{center:T.toLngLat(),elevation:y,zoom:q,pitch:re,bearing:K}}calculateCameraOptionsFromCameraLngLatAltRotation(r,s,f,y,x){const T=this.transform.calculateCenterFromCameraLngLatAlt(r,s,f,y);return{center:T.center,elevation:T.elevation,zoom:T.zoom,bearing:f,pitch:y,roll:x}}easeTo(r,s){this._stop(!1,r.easeId),((r=o.e({offset:[0,0],duration:500,easing:o.cn},r)).animate===!1||!r.essential&&R.prefersReducedMotion)&&(r.duration=0);const f=this._getTransformForUpdate(),y=this.getBearing(),x=f.pitch,T=f.roll,k="bearing"in r?this._normalizeBearing(r.bearing,y):y,O="pitch"in r?+r.pitch:x,N="roll"in r?this._normalizeBearing(r.roll,T):T,$="padding"in r?r.padding:f.padding,W=o.P.convert(r.offset);let q,K;r.around&&(q=o.S.convert(r.around),K=f.locationToScreenPoint(q));const re={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ue=this.cameraHelper.handleEaseTo(f,{bearing:k,pitch:O,roll:N,padding:$,around:q,aroundPoint:K,offsetAsPoint:W,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||y!==k,this._pitching=this._pitching||O!==x,this._rolling=this._rolling||N!==T,this._padding=!f.isPaddingEqual($),this._zooming=this._zooming||ue.isZooming,this._easeId=r.easeId,this._prepareEase(s,r.noMoveStart,re),this.terrain&&this._prepareElevation(ue.elevationCenter),this._ease(de=>{ue.easeFunc(de),this.terrain&&!r.freezeElevation&&this._updateElevation(de),this._applyUpdatedTransform(f),this._fireMoveEvents(s)},de=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(s,de)},r),this}_prepareEase(r,s,f={}){this._moving=!0,s||f.moving||this.fire(new o.l("movestart",r)),this._zooming&&!f.zooming&&this.fire(new o.l("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new o.l("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new o.l("pitchstart",r)),this._rolling&&!f.rolling&&this.fire(new o.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const s=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&s!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(f-(s-(f*r+this._elevationStart))/(1-r)),this._elevationTarget=s}this.transform.setElevation(o.C.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};const s=r.getCameraLngLat(),f=r.getCameraAltitude(),y=this.terrain?this.terrain.getElevationForLngLatZoom(s,r.zoom):0;if(f<y){const x=this.calculateCameraOptionsFromTo(s,y,r.center,r.elevation);return{pitch:x.pitch,zoom:x.zoom}}return{}}_applyUpdatedTransform(r){const s=[];if(s.push(y=>this._elevateCameraIfInsideTerrain(y)),this.transformCameraUpdate&&s.push(y=>this.transformCameraUpdate(y)),!s.length)return;const f=r.clone();for(const y of s){const x=f.clone(),{center:T,zoom:k,roll:O,pitch:N,bearing:$,elevation:W}=y(x);T&&x.setCenter(T),W!==void 0&&x.setElevation(W),k!==void 0&&x.setZoom(k),O!==void 0&&x.setRoll(O),N!==void 0&&x.setPitch(N),$!==void 0&&x.setBearing($),f.apply(x)}this.transform.apply(f)}_fireMoveEvents(r){this.fire(new o.l("move",r)),this._zooming&&this.fire(new o.l("zoom",r)),this._rotating&&this.fire(new o.l("rotate",r)),this._pitching&&this.fire(new o.l("pitch",r)),this._rolling&&this.fire(new o.l("roll",r))}_afterEase(r,s){if(this._easeId&&s&&this._easeId===s)return;delete this._easeId;const f=this._zooming,y=this._rotating,x=this._pitching,T=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,f&&this.fire(new o.l("zoomend",r)),y&&this.fire(new o.l("rotateend",r)),x&&this.fire(new o.l("pitchend",r)),T&&this.fire(new o.l("rollend",r)),this.fire(new o.l("moveend",r))}flyTo(r,s){if(!r.essential&&R.prefersReducedMotion){const He=o.Q(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(He,s)}this.stop(),r=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.cn},r);const f=this._getTransformForUpdate(),y=f.bearing,x=f.pitch,T=f.roll,k=f.padding,O="bearing"in r?this._normalizeBearing(r.bearing,y):y,N="pitch"in r?+r.pitch:x,$="roll"in r?this._normalizeBearing(r.roll,T):T,W="padding"in r?r.padding:f.padding,q=o.P.convert(r.offset);let K=f.centerPoint.add(q);const re=f.screenPointToLocation(K),ue=this.cameraHelper.handleFlyTo(f,{bearing:O,pitch:N,roll:$,padding:W,locationAtOffset:re,offsetAsPoint:q,center:r.center,minZoom:r.minZoom,zoom:r.zoom});let de=r.curve;const pe=Math.max(f.width,f.height),me=pe/ue.scaleOfZoom,we=ue.pixelPathLength;typeof ue.scaleOfMinZoom=="number"&&(de=Math.sqrt(pe/ue.scaleOfMinZoom/we*2));const ye=de*de;function Te(He){const _t=(me*me-pe*pe+(He?-1:1)*ye*ye*we*we)/(2*(He?me:pe)*ye*we);return Math.log(Math.sqrt(_t*_t+1)-_t)}function Ee(He){return(Math.exp(He)-Math.exp(-He))/2}function ve(He){return(Math.exp(He)+Math.exp(-He))/2}const De=Te(!1);let Ue=function(He){return ve(De)/ve(De+de*He)},Ve=function(He){return pe*((ve(De)*(Ee(_t=De+de*He)/ve(_t))-Ee(De))/ye)/we;var _t},Ge=(Te(!0)-De)/de;if(Math.abs(we)<2e-6||!isFinite(Ge)){if(Math.abs(pe-me)<1e-6)return this.easeTo(r,s);const He=me<pe?-1:1;Ge=Math.abs(Math.log(me/pe))/de,Ve=()=>0,Ue=_t=>Math.exp(He*de*_t)}return r.duration="duration"in r?+r.duration:1e3*Ge/("screenSpeed"in r?+r.screenSpeed/de:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=y!==O,this._pitching=N!==x,this._rolling=$!==T,this._padding=!f.isPaddingEqual(W),this._prepareEase(s,!1),this.terrain&&this._prepareElevation(ue.targetCenter),this._ease(He=>{const _t=He*Ge,gt=1/Ue(_t),it=Ve(_t);this._rotating&&f.setBearing(o.C.number(y,O,He)),this._pitching&&f.setPitch(o.C.number(x,N,He)),this._rolling&&f.setRoll(o.C.number(T,$,He)),this._padding&&(f.interpolatePadding(k,W,He),K=f.centerPoint.add(q)),ue.easeFunc(He,gt,it,K),this.terrain&&!r.freezeElevation&&this._updateElevation(He),this._applyUpdatedTransform(f),this._fireMoveEvents(s)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(s)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,s){var f;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,s)}return r||(f=this.handlers)===null||f===void 0||f.stop(!1),this}_ease(r,s,f){f.animate===!1||f.duration===0?(r(1),s()):(this._easeStart=R.now(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=s,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,s){r=o.aN(r,-180,180);const f=Math.abs(r-s);return Math.abs(r-360-s)<f&&(r-=360),Math.abs(r+360-s)<f&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(o.S.convert(r),this.transform.tileZoom):null}}const Is={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class vc{constructor(r=Is){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=s=>{!s||s.sourceDataType!=="metadata"&&s.sourceDataType!=="visibility"&&s.dataType!=="style"&&s.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=z.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=z.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=z.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){z.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,s){const f=this._map._getUIString(`AttributionControl.${s}`);r.title=f,r.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const s=this._map.style.sourceCaches;for(const y in s){const x=s[y];if(x.used||x.usedForTerrain){const T=x.getSource();T.attribution&&r.indexOf(T.attribution)<0&&r.push(T.attribution)}}r=r.filter(y=>String(y).trim()),r.sort((y,x)=>y.length-x.length),r=r.filter((y,x)=>{for(let T=x+1;T<r.length;T++)if(r[T].indexOf(y)>=0)return!1;return!0});const f=r.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,r.length?(this._innerContainer.innerHTML=z.sanitize(f),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Sh{constructor(r={}){this._updateCompact=()=>{const s=this._container.children;if(s.length){const f=s[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=z.create("div","maplibregl-ctrl");const s=z.create("a","maplibregl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://maplibre.org/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){z.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class bl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const s=++this._id;return this._queue.push({callback:r,id:s,cancelled:!1}),s}remove(r){const s=this._currentlyRunning,f=s?this._queue.concat(s):this._queue;for(const y of f)if(y.id===r)return void(y.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const s=this._currentlyRunning=this._queue;this._queue=[];for(const f of s)if(!f.cancelled&&(f.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Md=o.aI([{name:"a_pos3d",type:"Int16",components:3}]);class Ph extends o.E{constructor(r){super(),this._lastTilesetChange=R.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*2**this.deltaZoom,r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,s){this.sourceCache.update(r,s),this._renderableTilesKeys=[];const f={};for(const y of Xe(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:s,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))f[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.terrainRttPosMatrix32f=new Float64Array(16),o.bX(y.terrainRttPosMatrix32f,0,o.$,o.$,0,0,1),this._tiles[y.key]=new sa(y,this.tileSize),this._lastTilesetChange=R.now());for(const y in this._tiles)f[y]||delete this._tiles[y]}freeRtt(r){for(const s in this._tiles){const f=this._tiles[s];(!r||f.tileID.equals(r)||f.tileID.isChildOf(r)||r.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,s){return s?this._getTerrainCoordsForTileRanges(r,s):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){const s={};for(const f of this._renderableTilesKeys){const y=this._tiles[f].tileID,x=r.clone(),T=o.b9();if(y.canonical.equals(r.canonical))o.bX(T,0,o.$,o.$,0,0,1);else if(y.canonical.isChildOf(r.canonical)){const k=y.canonical.z-r.canonical.z,O=y.canonical.x-(y.canonical.x>>k<<k),N=y.canonical.y-(y.canonical.y>>k<<k),$=o.$>>k;o.bX(T,0,$,$,0,0,1),o.M(T,T,[-O*$,-N*$,0])}else{if(!r.canonical.isChildOf(y.canonical))continue;{const k=r.canonical.z-y.canonical.z,O=r.canonical.x-(r.canonical.x>>k<<k),N=r.canonical.y-(r.canonical.y>>k<<k),$=o.$>>k;o.bX(T,0,o.$,o.$,0,0,1),o.M(T,T,[O*$,N*$,0]),o.N(T,T,[1/2**k,1/2**k,0])}}x.terrainRttPosMatrix32f=new Float32Array(T),s[f]=x}return s}_getTerrainCoordsForTileRanges(r,s){const f={};for(const y of this._renderableTilesKeys){const x=this._tiles[y].tileID;if(!this._isWithinTileRanges(x,s))continue;const T=r.clone(),k=o.b9();if(x.canonical.z===r.canonical.z){const O=r.canonical.x-x.canonical.x,N=r.canonical.y-x.canonical.y;o.bX(k,0,o.$,o.$,0,0,1),o.M(k,k,[O*o.$,N*o.$,0])}else if(x.canonical.z>r.canonical.z){const O=x.canonical.z-r.canonical.z,N=x.canonical.x-(x.canonical.x>>O<<O),$=x.canonical.y-(x.canonical.y>>O<<O),W=r.canonical.x-(x.canonical.x>>O),q=r.canonical.y-(x.canonical.y>>O),K=o.$>>O;o.bX(k,0,K,K,0,0,1),o.M(k,k,[-N*K+W*o.$,-$*K+q*o.$,0])}else{const O=r.canonical.z-x.canonical.z,N=r.canonical.x-(r.canonical.x>>O<<O),$=r.canonical.y-(r.canonical.y>>O<<O),W=(r.canonical.x>>O)-x.canonical.x,q=(r.canonical.y>>O)-x.canonical.y,K=o.$<<O;o.bX(k,0,K,K,0,0,1),o.M(k,k,[N*o.$+W*K,$*o.$+q*K,0])}T.terrainRttPosMatrix32f=new Float32Array(k),f[y]=T}return f}getSourceTile(r,s){const f=this.sourceCache._source;let y=r.overscaledZ-this.deltaZoom;if(y>f.maxzoom&&(y=f.maxzoom),y<f.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(y).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!x||!x.dem)&&s)for(;y>=f.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(r.scaledTo(y--).key);return x}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,s){return s[r.canonical.z]&&r.canonical.x>=s[r.canonical.z].minTileX&&r.canonical.x<=s[r.canonical.z].maxTileX&&r.canonical.y>=s[r.canonical.z].minTileY&&r.canonical.y<=s[r.canonical.z].maxTileY}}class pa{constructor(r,s,f){this._meshCache={},this.painter=r,this.sourceCache=new Ph(s),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,s,f,y=o.$){var x;if(!(s>=0&&s<y&&f>=0&&f<y))return 0;const T=this.getTerrainData(r),k=(x=T.tile)===null||x===void 0?void 0:x.dem;if(!k)return 0;const O=o.cr([],[s/y*o.$,f/y*o.$],T.u_terrain_matrix),N=[O[0]*k.dim,O[1]*k.dim],$=Math.floor(N[0]),W=Math.floor(N[1]),q=N[0]-$,K=N[1]-W;return k.get($,W)*(1-q)*(1-K)+k.get($+1,W)*q*(1-K)+k.get($,W+1)*(1-q)*K+k.get($+1,W+1)*q*K}getElevationForLngLatZoom(r,s){if(!o.cs(s,r.wrap()))return 0;const{tileID:f,mercatorX:y,mercatorY:x}=this._getOverscaledTileIDFromLngLatZoom(r,s);return this.getElevation(f,y%o.$,x%o.$,o.$)}getElevation(r,s,f,y=o.$){return this.getDEMElevation(r,s,f,y)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const y=this.painter.context,x=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new o.T(y,x,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new o.T(y,new o.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.af([])}const s=this.sourceCache.getSourceTile(r,!0);if(s&&s.dem&&(!s.demTexture||s.needsTerrainPrepare)){const y=this.painter.context;s.demTexture=this.painter.getTileTexture(s.dem.stride),s.demTexture?s.demTexture.update(s.dem.getPixels(),{premultiply:!1}):s.demTexture=new o.T(y,s.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),s.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),s.needsTerrainPrepare=!1}const f=s&&s+s.tileID.key+r.key;if(f&&!this._demMatrixCache[f]){const y=this.sourceCache.sourceCache._source.maxzoom;let x=r.canonical.z-s.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=y?x=r.canonical.z-y:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=r.canonical.x-(r.canonical.x>>x<<x),k=r.canonical.y-(r.canonical.y>>x<<x),O=o.ct(new Float64Array(16),[1/(o.$<<x),1/(o.$<<x),0]);o.M(O,O,[T*o.$,k*o.$,0]),this._demMatrixCache[r.key]={matrix:O,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:s&&s.dem&&s.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:s&&s.dem&&s.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(s&&s.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:s}}getFramebuffer(r){const s=this.painter,f=s.width/devicePixelRatio,y=s.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new o.T(s.context,{width:f,height:y,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new o.T(s.context,{width:f,height:y,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=s.context.createFramebuffer(f,y,!0,!1),this._fbo.depthAttachment.set(s.context.createRenderbuffer(s.context.gl.DEPTH_COMPONENT16,f,y))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const s=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,T=0;x<this._coordsTextureSize;x++)for(let k=0;k<this._coordsTextureSize;k++,T+=4)s[T+0]=255&k,s[T+1]=255&x,s[T+2]=k>>8<<4|x>>8,s[T+3]=0;const f=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(s.buffer)),y=new o.T(r,f,r.gl.RGBA,{premultiply:!1});return y.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const s=new Uint8Array(4),f=this.painter.context,y=f.gl,x=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),T=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),k=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(x,k-T-1,1,1,y.RGBA,y.UNSIGNED_BYTE,s),f.bindFramebuffer.set(null);const O=s[0]+(s[2]>>4<<8),N=s[1]+((15&s[2])<<8),$=this.coordsIndex[255-s[3]],W=$&&this.sourceCache.getTileByID($);if(!W)return null;const q=this._coordsTextureSize,K=(1<<W.tileID.canonical.z)*q;return new o.a0((W.tileID.canonical.x*q+O)/K+W.tileID.wrap,(W.tileID.canonical.y*q+N)/K,this.getElevation(W.tileID,O,N,q))}depthAtPoint(r){const s=new Uint8Array(4),f=this.painter.context,y=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,s),f.bindFramebuffer.set(null),(s[0]/16777216+s[1]/65536+s[2]/256+s[3])/256}getTerrainMesh(r){var s;const f=((s=this.painter.style.projection)===null||s===void 0?void 0:s.transitionState)>0,y=f&&r.canonical.y===0,x=f&&r.canonical.y===(1<<r.canonical.z)-1,T=`m_${y?"n":""}_${x?"s":""}`;if(this._meshCache[T])return this._meshCache[T];const k=this.painter.context,O=new o.cu,N=new o.aM,$=this.meshSize,W=o.$/$,q=$*$;for(let ve=0;ve<=$;ve++)for(let De=0;De<=$;De++)O.emplaceBack(De*W,ve*W,0);for(let ve=0;ve<q;ve+=$+1)for(let De=0;De<$;De++)N.emplaceBack(De+ve,$+De+ve+1,$+De+ve+2),N.emplaceBack(De+ve,$+De+ve+2,De+ve+1);const K=O.length,re=K+($+1),ue=($+1)*$,de=y?o.bg:0,pe=y?0:1,me=x?o.bh:o.$,we=x?0:1;for(let ve=0;ve<=$;ve++)O.emplaceBack(ve*W,de,pe);for(let ve=0;ve<=$;ve++)O.emplaceBack(ve*W,me,we);for(let ve=0;ve<$;ve++)N.emplaceBack(ue+ve,re+ve,re+ve+1),N.emplaceBack(ue+ve,re+ve+1,ue+ve+1),N.emplaceBack(0+ve,K+ve+1,K+ve),N.emplaceBack(0+ve,0+ve+1,K+ve+1);const ye=O.length,Te=ye+2*($+1);for(const ve of[0,1])for(let De=0;De<=$;De++)for(const Ue of[0,1])O.emplaceBack(ve*o.$,De*W,Ue);for(let ve=0;ve<2*$;ve+=2)N.emplaceBack(ye+ve,ye+ve+1,ye+ve+3),N.emplaceBack(ye+ve,ye+ve+3,ye+ve+2),N.emplaceBack(Te+ve,Te+ve+3,Te+ve+1),N.emplaceBack(Te+ve,Te+ve+2,Te+ve+3);const Ee=new Va(k.createVertexBuffer(O,Md.members),k.createIndexBuffer(N),o.aL.simpleSegment(0,0,O.length,N.length));return this._meshCache[T]=Ee,Ee}getMeshFrameDelta(r){return 2*Math.PI*o.bt/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,s){var f;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(r,s);return(f=this.getMinMaxElevation(y).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(r){const s=this.getTerrainData(r).tile,f={minElevation:null,maxElevation:null};return s&&s.dem&&(f.minElevation=s.dem.min*this.exaggeration,f.maxElevation=s.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(r,s){const f=o.a0.fromLngLat(r.wrap()),y=(1<<s)*o.$,x=f.x*y,T=f.y*y,k=Math.floor(x/o.$),O=Math.floor(T/o.$);return{tileID:new o.Z(s,0,s,k,O),mercatorX:x,mercatorY:T}}}class jo{constructor(r,s,f){this._context=r,this._size=s,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const s=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new o.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),s.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),s.colorAttachment.set(f.texture),{id:r,fbo:s,texture:f,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(s=>r.id!==s),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const s of this._recentlyUsed)if(!this._objects[s].inUse)return this._objects[s];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const Dt={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Gt{constructor(r,s){this.painter=r,this.terrain=s,this.pool=new jo(r.context,30,s.sourceCache.tileSize*s.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,s){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(f=>!r._layers[f].isHidden(s)),this._coordsAscending={};for(const f in r.sourceCaches){this._coordsAscending[f]={};const y=r.sourceCaches[f].getVisibleCoordinates(),x=r.sourceCaches[f].getSource(),T=x instanceof fi?x.terrainTileRanges:null;for(const k of y){const O=this.terrain.sourceCache.getTerrainCoords(k,T);for(const N in O)this._coordsAscending[f][N]||(this._coordsAscending[f][N]=[]),this._coordsAscending[f][N].push(O[N])}}this._coordsAscendingStr={};for(const f of r._order){const y=r._layers[f],x=y.source;if(Dt[y.type]&&!this._coordsAscendingStr[x]){this._coordsAscendingStr[x]={};for(const T in this._coordsAscending[x])this._coordsAscendingStr[x][T]=this._coordsAscending[x][T].map(k=>k.key).sort().join()}}for(const f of this._renderableTiles)for(const y in this._coordsAscendingStr){const x=this._coordsAscendingStr[y][f.tileID.key];x&&x!==f.rttCoords[y]&&(f.rtt=[])}}renderLayer(r,s){if(r.isHidden(this.painter.transform.zoom))return!1;const f=Object.assign(Object.assign({},s),{isRenderingToTexture:!0}),y=r.type,x=this.painter,T=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Dt[y]&&(this._prevType&&Dt[this._prevType]||this._stacks.push([]),this._prevType=y,this._stacks[this._stacks.length-1].push(r.id),!T))return!0;if(Dt[this._prevType]||Dt[y]&&T){this._prevType=y;const k=this._stacks.length-1,O=this._stacks[k]||[];for(const N of this._renderableTiles){if(this.pool.isFull()&&(jr(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(N),N.rtt[k]){const W=this.pool.getObjectForId(N.rtt[k].id);if(W.stamp===N.rtt[k].stamp){this.pool.useObject(W);continue}}const $=this.pool.getOrCreateFreeObject();this.pool.useObject($),this.pool.stampObject($),N.rtt[k]={id:$.id,stamp:$.stamp},x.context.bindFramebuffer.set($.fbo.framebuffer),x.context.clear({color:o.be.transparent,stencil:0}),x.currentStencilSource=void 0;for(let W=0;W<O.length;W++){const q=x.style._layers[O[W]],K=q.source?this._coordsAscending[q.source][N.tileID.key]:[N.tileID];x.context.viewport.set([0,0,$.fbo.width,$.fbo.height]),x._renderTileClippingMasks(q,K,!0),x.renderLayer(x,x.style.sourceCaches[q.source],q,K,f),q.source&&(N.rttCoords[q.source]=this._coordsAscendingStr[q.source][N.tileID.key])}}return jr(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects(),Dt[y]}return!1}}const du={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},_c=P,mo={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Is,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},tn={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class ks{constructor(r,s,f=!1){this.mousedown=x=>{this.startMove(x,z.mousePos(this.element,x)),z.addEventListener(window,"mousemove",this.mousemove),z.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=x=>{this.move(x,z.mousePos(this.element,x))},this.mouseup=x=>{this._rotatePitchHanlder.dragEnd(x),this.offTemp()},this.touchstart=x=>{x.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=z.touchPos(this.element,x.targetTouches)[0],this.startMove(x,this._startPos),z.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.addEventListener(window,"touchend",this.touchend))},this.touchmove=x=>{x.targetTouches.length!==1?this.reset():(this._lastPos=z.touchPos(this.element,x.targetTouches)[0],this.move(x,this._lastPos))},this.touchend=x=>{x.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=s;const y=new Cs;this._rotatePitchHanlder=new xl({clickTolerance:3,move:(x,T)=>{const k=s.getBoundingClientRect(),O=new o.P((k.bottom-k.top)/2,(k.right-k.left)/2);return{bearingDelta:o.cm(new o.P(x.x,T.y),T,O),pitchDelta:f?-.5*(T.y-x.y):void 0}},moveStateManager:y,enable:!0,assignEvents:()=>{}}),this.map=r,z.addEventListener(s,"mousedown",this.mousedown),z.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),z.addEventListener(s,"touchcancel",this.reset)}startMove(r,s){this._rotatePitchHanlder.dragStart(r,s),z.disableDrag()}move(r,s){const f=this.map,{bearingDelta:y,pitchDelta:x}=this._rotatePitchHanlder.dragMove(r,s)||{};y&&f.setBearing(f.getBearing()+y),x&&f.setPitch(f.getPitch()+x)}off(){const r=this.element;z.removeEventListener(r,"mousedown",this.mousedown),z.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),z.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.removeEventListener(window,"touchend",this.touchend),z.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){z.enableDrag(),z.removeEventListener(window,"mousemove",this.mousemove),z.removeEventListener(window,"mouseup",this.mouseup),z.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),z.removeEventListener(window,"touchend",this.touchend)}}let $n;function Ad(_,r,s,f=!1){if(f||!s.getCoveringTilesDetailsProvider().allowWorldCopies())return _?.wrap();const y=new o.S(_.lng,_.lat);if(_=new o.S(_.lng,_.lat),r){const x=new o.S(_.lng-360,_.lat),T=new o.S(_.lng+360,_.lat),k=s.locationToScreenPoint(_).distSqr(r);s.locationToScreenPoint(x).distSqr(r)<k?_=x:s.locationToScreenPoint(T).distSqr(r)<k&&(_=T)}for(;Math.abs(_.lng-s.center.lng)>180;){const x=s.locationToScreenPoint(_);if(x.x>=0&&x.y>=0&&x.x<=s.width&&x.y<=s.height)break;_.lng>s.center.lng?_.lng-=360:_.lng+=360}return _.lng!==y.lng&&s.isPointOnMapSurface(s.locationToScreenPoint(_))?_:y}const Ri={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Br(_,r,s){const f=_.classList;for(const y in Ri)f.remove(`maplibregl-${s}-anchor-${y}`);f.add(`maplibregl-${s}-anchor-${r}`)}class sn extends o.E{constructor(r){if(super(),this._onKeyPress=s=>{const f=s.code,y=s.charCode||s.keyCode;f!=="Space"&&f!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=s=>{const f=s.originalEvent.target,y=this._element;this._popup&&(f===y||y.contains(f))&&this.togglePopup()},this._update=s=>{if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();(s?.type==="terrain"||s?.type==="render"&&!f)&&this._map.once("render",this._update),this._lngLat=Ad(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let x="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?x="rotateX(0deg)":this._pitchAlignment==="map"&&(x=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||s&&s.type!=="moveend"||(this._pos=this._pos.round()),z.setTransform(this._element,`${Ri[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${x} ${y}`),R.frameAsync(new AbortController).then(()=>{this._updateOpacity(s&&s.type==="moveend")}).catch(()=>{})},this._onMove=s=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=s.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=s.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=s=>{this._element.contains(s.originalEvent.target)&&(s.preventDefault(),this._positionDelta=s.point.sub(this._pos).add(this._offset),this._pointerdownPos=s.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r?.opacity,r?.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=o.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=z.create("div");const s=z.createNS("http://www.w3.org/2000/svg","svg"),f=41,y=27;s.setAttributeNS(null,"display","block"),s.setAttributeNS(null,"height",`${f}px`),s.setAttributeNS(null,"width",`${y}px`),s.setAttributeNS(null,"viewBox",`0 0 ${y} ${f}`);const x=z.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const T=z.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const k=z.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");const O=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const pe of O){const me=z.createNS("http://www.w3.org/2000/svg","ellipse");me.setAttributeNS(null,"opacity","0.04"),me.setAttributeNS(null,"cx","10.5"),me.setAttributeNS(null,"cy","5.80029008"),me.setAttributeNS(null,"rx",pe.rx),me.setAttributeNS(null,"ry",pe.ry),k.appendChild(me)}const N=z.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"fill",this._color);const $=z.createNS("http://www.w3.org/2000/svg","path");$.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),N.appendChild($);const W=z.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"opacity","0.25"),W.setAttributeNS(null,"fill","#000000");const q=z.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),W.appendChild(q);const K=z.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"transform","translate(6.0, 7.0)"),K.setAttributeNS(null,"fill","#FFFFFF");const re=z.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ue=z.createNS("http://www.w3.org/2000/svg","circle");ue.setAttributeNS(null,"fill","#000000"),ue.setAttributeNS(null,"opacity","0.25"),ue.setAttributeNS(null,"cx","5.5"),ue.setAttributeNS(null,"cy","5.5"),ue.setAttributeNS(null,"r","5.4999962");const de=z.createNS("http://www.w3.org/2000/svg","circle");de.setAttributeNS(null,"fill","#FFFFFF"),de.setAttributeNS(null,"cx","5.5"),de.setAttributeNS(null,"cy","5.5"),de.setAttributeNS(null,"r","5.4999962"),re.appendChild(ue),re.appendChild(de),T.appendChild(k),T.appendChild(N),T.appendChild(W),T.appendChild(K),T.appendChild(re),s.appendChild(T),s.setAttributeNS(null,"height",f*this._scale+"px"),s.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(s),this._offset=o.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",s=>{s.preventDefault()}),this._element.addEventListener("mousedown",s=>{s.preventDefault()}),Br(this._element,this._anchor,"marker"),r&&r.className)for(const s of r.className.split(" "))this._element.classList.add(s);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),z.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=o.S.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const y=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var s,f;const y=(s=this._map)===null||s===void 0?void 0:s.terrain,x=this._map.transform.isLocationOccluded(this._lngLat);if(!y||x){const K=x?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==K&&(this._element.style.opacity=K))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const T=this._map,k=T.terrain.depthAtPoint(this._pos),O=T.terrain.getElevationForLngLatZoom(this._lngLat,T.transform.tileZoom);if(T.transform.lngLatToCameraDepth(this._lngLat,O)-k<.006)return void(this._element.style.opacity=this._opacity);const N=-this._offset.y/T.transform.pixelsPerMeter,$=Math.sin(T.getPitch()*Math.PI/180)*N,W=T.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),q=T.transform.lngLatToCameraDepth(this._lngLat,O+$)-W>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&q&&this._popup.remove(),this._element.style.opacity=q?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=o.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,s){return(this._opacity===void 0||r===void 0&&s===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),s!==void 0&&(this._opacityWhenCovered=s),this._map&&this._updateOpacity(!0),this}}const Id={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let vi=0,zi=!1;const fu={maxWidth:100,unit:"metric"};function xc(_,r,s){const f=s&&s.maxWidth||100,y=_._container.clientHeight/2,x=_._container.clientWidth/2,T=_.unproject([x-f/2,y]),k=_.unproject([x+f/2,y]),O=Math.round(_.project(k).x-_.project(T).x),N=Math.min(f,O,_._container.clientWidth),$=T.distanceTo(k);if(s&&s.unit==="imperial"){const W=3.2808*$;W>5280?go(r,N,W/5280,_._getUIString("ScaleControl.Miles")):go(r,N,W,_._getUIString("ScaleControl.Feet"))}else s&&s.unit==="nautical"?go(r,N,$/1852,_._getUIString("ScaleControl.NauticalMiles")):$>=1e3?go(r,N,$/1e3,_._getUIString("ScaleControl.Kilometers")):go(r,N,$,_._getUIString("ScaleControl.Meters"))}function go(_,r,s,f){const y=function(x){const T=Math.pow(10,`${Math.floor(x)}`.length-1);let k=x/T;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(O){const N=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*N)/N}(k),T*k}(s);_.style.width=r*(y/s)+"px",_.innerHTML=`${y}&nbsp;${f}`}const pu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},wl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ma(_){if(_){if(typeof _=="number"){const r=Math.round(Math.abs(_)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,_),"top-left":new o.P(r,r),"top-right":new o.P(-r,r),bottom:new o.P(0,-_),"bottom-left":new o.P(r,-r),"bottom-right":new o.P(-r,-r),left:new o.P(_,0),right:new o.P(-_,0)}}if(_ instanceof o.P||Array.isArray(_)){const r=o.P.convert(_);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:o.P.convert(_.center||[0,0]),top:o.P.convert(_.top||[0,0]),"top-left":o.P.convert(_["top-left"]||[0,0]),"top-right":o.P.convert(_["top-right"]||[0,0]),bottom:o.P.convert(_.bottom||[0,0]),"bottom-left":o.P.convert(_["bottom-left"]||[0,0]),"bottom-right":o.P.convert(_["bottom-right"]||[0,0]),left:o.P.convert(_.left||[0,0]),right:o.P.convert(_.right||[0,0])}}return ma(new o.P(0,0))}const Sl=P;p.AJAXError=o.cy,p.Event=o.l,p.Evented=o.E,p.LngLat=o.S,p.MercatorCoordinate=o.a0,p.Point=o.P,p.addProtocol=o.cz,p.config=o.a,p.removeProtocol=o.cA,p.AttributionControl=vc,p.BoxZoomHandler=gi,p.CanvasSource=oa,p.CooperativeGesturesHandler=gc,p.DoubleClickZoomHandler=Ki,p.DragPanHandler=mc,p.DragRotateHandler=uu,p.EdgeInsets=Mi,p.FullscreenControl=class extends o.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var r;let s=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=s?.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)s=s.shadowRoot.fullscreenElement;s===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){z.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=z.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);z.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},p.GeoJSONSource=ri,p.GeolocateControl=class extends o.E{constructor(_){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{const s=new o.S(r.coords.longitude,r.coords.latitude),f=r.coords.accuracy,y=this._map.getBearing(),x=o.e({bearing:y},this.options.fitBoundsOptions),T=_r.fromLngLat(s,f);this._map.fitBounds(T,x,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const s=new o.S(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(s).addTo(this._map),this._userLocationDotMarker.setLngLat(s).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&zi)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=z.create("button","maplibregl-ctrl-geolocate",this._container),z.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}else{const s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=z.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new sn({element:this._dotElement}),this._circleElement=z.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new sn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",s=>{s.geolocateSource||this._watchState!=="ACTIVE_LOCK"||s.originalEvent&&s.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))})}},this.options=o.e({},Id,_)}onAdd(_){return this._map=_,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(r=!1){if($n!==void 0&&!r)return $n;if(window.navigator.permissions===void 0)return $n=!!window.navigator.geolocation,$n;try{$n=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{$n=!!window.navigator.geolocation}return $n})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),z.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,vi=0,zi=!1}_isOutOfMapMaxBounds(_){const r=this._map.getMaxBounds(),s=_.coords;return r&&(s.longitude<r.getWest()||s.longitude>r.getEast()||s.latitude<r.getSouth()||s.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const _=this._map.getBounds(),r=_.getSouthEast(),s=_.getNorthEast(),f=r.distanceTo(s),y=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":vi--,zi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),vi++,vi>1?(_={maximumAge:6e5,timeout:0},zi=!0):(_=this.options.positionOptions,zi=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},p.GlobeControl=class{constructor(){this._toggleProjection=()=>{var _;const r=(_=this._map.getProjection())===null||_===void 0?void 0:_.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var _;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((_=this._map.getProjection())===null||_===void 0?void 0:_.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(_){return this._map=_,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=z.create("button","maplibregl-ctrl-globe",this._container),z.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){z.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},p.Hash=dc,p.ImageSource=fi,p.KeyboardHandler=Ms,p.LngLatBounds=_r,p.LogoControl=Sh,p.Map=class extends Hr{constructor(_){var r,s;o.cv.mark(o.cw.create);const f=Object.assign(Object.assign(Object.assign({},mo),_),{canvasContextAttributes:Object.assign(Object.assign({},mo.canvasContextAttributes),_.canvasContextAttributes)});if(f.minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const y=new Dn,x=new Wu;if(f.minZoom!==void 0&&y.setMinZoom(f.minZoom),f.maxZoom!==void 0&&y.setMaxZoom(f.maxZoom),f.minPitch!==void 0&&y.setMinPitch(f.minPitch),f.maxPitch!==void 0&&y.setMaxPitch(f.maxPitch),f.renderWorldCopies!==void 0&&y.setRenderWorldCopies(f.renderWorldCopies),super(y,x,{bearingSnap:f.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new bl,this._controls=[],this._mapId=o.a6(),this._contextLost=k=>{k.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.l("webglcontextlost",{originalEvent:k}))},this._contextRestored=k=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:k}))},this._onMapScroll=k=>{if(k.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=f.interactive,this._maxTileCacheSize=f.maxTileCacheSize,this._maxTileCacheZoomLevels=f.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},f.canvasContextAttributes),this._trackResize=f.trackResize===!0,this._bearingSnap=f.bearingSnap,this._centerClampedToGround=f.centerClampedToGround,this._refreshExpiredTiles=f.refreshExpiredTiles===!0,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions===!0,this._collectResourceTiming=f.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},du),f.locale),this._clickTolerance=f.clickTolerance,this._overridePixelRatio=f.pixelRatio,this._maxCanvasSize=f.maxCanvasSize,this.transformCameraUpdate=f.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=f.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Ce.addThrottleControl(()=>this.isMoving()),this._requestManager=new be(f.transformRequest),typeof f.container=="string"){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let k=!1;const O=ru(N=>{this._trackResize&&!this._removed&&(this.resize(N),this.redraw())},50);this._resizeObserver=new ResizeObserver(N=>{k?O(N):k=!0}),this._resizeObserver.observe(this._container)}this.handlers=new As(this,f),this._hash=f.hash&&new dc(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,elevation:f.elevation,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,roll:f.roll}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,o.e({},f.fitBoundsOptions,{duration:0}))));const T=typeof f.style=="string"||((s=(r=f.style)===null||r===void 0?void 0:r.projection)===null||s===void 0?void 0:s.type)!=="globe";this.resize(null,T),this._localIdeographFontFamily=f.localIdeographFontFamily,this._validateStyle=f.validateStyle,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new vc(typeof f.attributionControl=="boolean"?void 0:f.attributionControl)),f.maplibreLogo&&this.addControl(new Sh,f.logoPosition),this.on("style.load",()=>{if(T||this._resizeTransform(),this.transform.unmodified){const k=o.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(k)}}),this.on("data",k=>{this._update(k.dataType==="style"),this.fire(new o.l(`${k.dataType}data`,k))}),this.on("dataloading",k=>{this.fire(new o.l(`${k.dataType}dataloading`,k))}),this.on("dataabort",k=>{this.fire(new o.l("sourcedataabort",k))})}_getMapId(){return this._mapId}setGlobalStateProperty(_,r){return this.style.setGlobalStateProperty(_,r),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(_,r){if(r===void 0&&(r=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const s=_.onAdd(this);this._controls.push(_);const f=this._controlPositions[r];return r.indexOf("bottom")!==-1?f.insertBefore(s,f.firstChild):f.appendChild(s),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(_);return r>-1&&this._controls.splice(r,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,r,s,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,r,s,f)}resize(_,r=!0){const[s,f]=this._containerDimensions(),y=this._getClampedPixelRatio(s,f);if(this._resizeCanvas(s,f,y),this.painter.resize(s,f,y),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const k=this._getClampedPixelRatio(s,f);this._resizeCanvas(s,f,k),this.painter.resize(s,f,k)}this._resizeTransform(r);const x=!this._moving;return x&&(this.stop(),this.fire(new o.l("movestart",_)).fire(new o.l("move",_))),this.fire(new o.l("resize",_)),x&&this.fire(new o.l("moveend",_)),this}_resizeTransform(_=!0){var r;const[s,f]=this._containerDimensions();this.transform.resize(s,f,_),(r=this._requestedCameraState)===null||r===void 0||r.resize(s,f,_)}_getClampedPixelRatio(_,r){const{0:s,1:f}=this._maxCanvasSize,y=this.getPixelRatio(),x=_*y,T=r*y;return Math.min(x>s?s/x:1,T>f?f/T:1)*y}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(_r.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.setMinZoom(_),this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.setMaxZoom(_),this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.setMinPitch(_),this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(_>=this.transform.minPitch)return this.transform.setMaxPitch(_),this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.setRenderWorldCopies(_),this._update()}project(_){return this.transform.locationToScreenPoint(o.S.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.screenPointToLocation(o.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,r,s){if(_==="mouseenter"||_==="mouseover"){let f=!1;return{layers:r,listener:s,delegates:{mousemove:x=>{const T=r.filter(O=>this.getLayer(O)),k=T.length!==0?this.queryRenderedFeatures(x.point,{layers:T}):[];k.length?f||(f=!0,s.call(this,new Cr(_,this,x.originalEvent,{features:k}))):f=!1},mouseout:()=>{f=!1}}}}if(_==="mouseleave"||_==="mouseout"){let f=!1;return{layers:r,listener:s,delegates:{mousemove:T=>{const k=r.filter(O=>this.getLayer(O));(k.length!==0?this.queryRenderedFeatures(T.point,{layers:k}):[]).length?f=!0:f&&(f=!1,s.call(this,new Cr(_,this,T.originalEvent)))},mouseout:T=>{f&&(f=!1,s.call(this,new Cr(_,this,T.originalEvent)))}}}}{const f=y=>{const x=r.filter(k=>this.getLayer(k)),T=x.length!==0?this.queryRenderedFeatures(y.point,{layers:x}):[];T.length&&(y.features=T,s.call(this,y),delete y.features)};return{layers:r,listener:s,delegates:{[_]:f}}}}_saveDelegatedListener(_,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(r)}_removeDelegatedListener(_,r,s){if(!this._delegatedListeners||!this._delegatedListeners[_])return;const f=this._delegatedListeners[_];for(let y=0;y<f.length;y++){const x=f[y];if(x.listener===s&&x.layers.length===r.length&&x.layers.every(T=>r.includes(T))){for(const T in x.delegates)this.off(T,x.delegates[T]);return void f.splice(y,1)}}}on(_,r,s){if(s===void 0)return super.on(_,r);const f=typeof r=="string"?[r]:r,y=this._createDelegatedListener(_,f,s);this._saveDelegatedListener(_,y);for(const x in y.delegates)this.on(x,y.delegates[x]);return{unsubscribe:()=>{this._removeDelegatedListener(_,f,s)}}}once(_,r,s){if(s===void 0)return super.once(_,r);const f=typeof r=="string"?[r]:r,y=this._createDelegatedListener(_,f,s);for(const x in y.delegates){const T=y.delegates[x];y.delegates[x]=(...k)=>{this._removeDelegatedListener(_,f,s),T(...k)}}this._saveDelegatedListener(_,y);for(const x in y.delegates)this.once(x,y.delegates[x]);return this}off(_,r,s){return s===void 0?super.off(_,r):(this._removeDelegatedListener(_,typeof r=="string"?[r]:r,s),this)}queryRenderedFeatures(_,r){if(!this.style)return[];let s;const f=_ instanceof o.P||Array.isArray(_),y=f?_:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(f?{}:_)||{},y instanceof o.P||typeof y[0]=="number")s=[o.P.convert(y)];else{const x=o.P.convert(y[0]),T=o.P.convert(y[1]);s=[x,new o.P(T.x,x.y),T,new o.P(x.x,T.y),x]}return this.style.queryRenderedFeatures(s,r,this.transform)}querySourceFeatures(_,r){return this.style.querySourceFeatures(_,r)}setStyle(_,r){return(r=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(_,r))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const r=this._locale[_];if(r==null)throw new Error(`Missing UI string '${_}'`);return r}_updateStyle(_,r){var s,f;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,r));const y=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new sd(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,r,y):this.style.loadJSON(_,r,y),this):((f=(s=this.style)===null||s===void 0?void 0:s.projection)===null||f===void 0||f.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new sd(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,r){if(typeof _=="string"){const s=this._requestManager.transformRequest(_,"Style");o.j(s,new AbortController).then(f=>{this._updateDiff(f.data,r)}).catch(f=>{f&&this.fire(new o.k(f))})}else typeof _=="object"&&this._updateDiff(_,r)}_updateDiff(_,r){try{this.style.setState(_,r)&&this._update(!0)}catch(s){o.w(`Unable to perform style diff: ${s.message||s.error||s}.  Rebuilding the style from scratch.`),this._updateStyle(_,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(_,r){return this._lazyInitEmptyStyle(),this.style.addSource(_,r),this._update(!0)}isSourceLoaded(_){const r=this.style&&this.style.sourceCaches[_];if(r!==void 0)return r.loaded();this.fire(new o.k(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const r=this.style.sourceCaches[_.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&r.reload();for(const s in this.style._layers){const f=this.style._layers[s];f.type==="hillshade"&&f.source===_.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),f.type==="color-relief"&&f.source===_.source&&o.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new pa(this.painter,r,_),this.painter.renderToTexture=new Gt(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=s=>{var f;s.dataType==="style"?this.terrain.sourceCache.freeRtt():s.dataType==="source"&&s.tile&&(s.sourceId!==_.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((f=s.source)===null||f===void 0?void 0:f.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(s.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:_})),this}getTerrain(){var _,r;return(r=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const r in _){const s=_[r]._tiles;for(const f in s){const y=s[f];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}setSourceTileLodParams(_,r,s){if(s){const f=this.getSource(s);if(!f)throw new Error(`There is no source with ID "${s}", cannot set LOD parameters`);f.calculateTileZoom=qe(Math.max(1,_),Math.max(1,r))}else for(const f in this.style.sourceCaches)this.style.sourceCaches[f].getSource().calculateTileZoom=qe(Math.max(1,_),Math.max(1,r));return this._update(!0),this}refreshTiles(_,r){const s=this.style.sourceCaches[_];if(!s)throw new Error(`There is no source cache with ID "${_}", cannot refresh tile`);r===void 0?s.reload(!0):s.refreshTiles(r.map(f=>new o.a3(f.z,f.x,f.y)))}addImage(_,r,s={}){const{pixelRatio:f=1,sdf:y=!1,stretchX:x,stretchY:T,content:k,textFitWidth:O,textFitHeight:N}=s;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||o.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:$,height:W,data:q}=r,K=r;return this.style.addImage(_,{data:new o.R({width:$,height:W},new Uint8Array(q)),pixelRatio:f,stretchX:x,stretchY:T,content:k,textFitWidth:O,textFitHeight:N,sdf:y,version:0,userImage:K}),K.onAdd&&K.onAdd(this,_),this}}{const{width:$,height:W,data:q}=R.getImageData(r);this.style.addImage(_,{data:new o.R({width:$,height:W},q),pixelRatio:f,stretchX:x,stretchY:T,content:k,textFitWidth:O,textFitHeight:N,sdf:y,version:0})}}updateImage(_,r){const s=this.style.getImage(_);if(!s)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=r instanceof HTMLImageElement||o.b(r)?R.getImageData(r):r,{width:y,height:x,data:T}=f;if(y===void 0||x===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==s.data.width||x!==s.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(r instanceof HTMLImageElement||o.b(r));return s.data.replace(T,k),this.style.updateImage(_,s),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return Ce.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,r){return this._lazyInitEmptyStyle(),this.style.addLayer(_,r),this._update(!0)}moveLayer(_,r){return this.style.moveLayer(_,r),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,r,s){return this.style.setLayerZoomRange(_,r,s),this._update(!0)}setFilter(_,r,s={}){return this.style.setFilter(_,r,s),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,r,s,f={}){return this.style.setPaintProperty(_,r,s,f),this._update(!0)}getPaintProperty(_,r){return this.style.getPaintProperty(_,r)}setLayoutProperty(_,r,s,f={}){return this.style.setLayoutProperty(_,r,s,f),this._update(!0)}getLayoutProperty(_,r){return this.style.getLayoutProperty(_,r)}setGlyphs(_,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,r,s={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,r,s,f=>{f||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,r,s=>{s||this._update(!0)}),this}setLight(_,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(_,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(_,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,r){return this.style.setFeatureState(_,r),this._update()}removeFeatureState(_,r){return this.style.removeFeatureState(_,r),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,r=0;return this._container&&(_=this._container.clientWidth||400,r=this._container.clientHeight||300),[_,r]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const r=this._canvasContainer=z.create("div","maplibregl-canvas-container",_);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=z.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const s=this._containerDimensions(),f=this._getClampedPixelRatio(s[0],s[1]);this._resizeCanvas(s[0],s[1],f);const y=this._controlContainer=z.create("div","maplibregl-control-container",_),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{x[T]=z.create("div",`maplibregl-ctrl-${T} `,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,r,s){this._canvas.width=Math.floor(s*_),this._canvas.height=Math.floor(s*r),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const _=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let r=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{r={requestedAttributes:_},f&&(r.statusMessage=f.statusMessage,r.type=f.type)},{once:!0});let s=null;if(s=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,_):this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_),!s){const f="Failed to initialize WebGL";throw r?(r.message=f,new Error(JSON.stringify(r))):new Error(f)}this.painter=new On(s,this.transform),B.testSupport(s)}migrateProjection(_,r){super.migrateProjection(_,r),this.painter.transform=_,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){var r,s,f,y,x;const T=this._idleTriggered?this._fadeDuration:0,k=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let O=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const W=this.transform.zoom,q=R.now();this.style.zoomHistory.update(W,q);const K=new o.F(W,{now:q,fadeDuration:T,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),re=K.crossFadingFactor();re===1&&re===this._crossFadingFactor||(O=!0,this._crossFadingFactor=re),this.style.update(K)}const N=((s=this.style.projection)===null||s===void 0?void 0:s.transitionState)>0!==k;(f=this.style.projection)===null||f===void 0||f.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((y=this.style.projection)===null||y===void 0?void 0:y.transitionState,(x=this.style.projection)===null||x===void 0?void 0:x.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||N)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,T,this._crossSourceCollisions,N),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:T,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cv.mark(o.cw.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||O)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const $=this._sourcesDirty||this._styleDirty||this._placementDirty;return $||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||$||(this._fullyLoaded=!0,o.cv.mark(o.cw.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const s of this._controls)s.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Ce.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r?.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),z.remove(this._canvasContainer),z.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cv.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,R.frame(this._frameRequest,_=>{o.cv.frame(_),this._frameRequest=null;try{this._render(_)}catch(r){if(!o.cx(r)&&!function(s){return s.message===_d}(r))throw r}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return _c}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(_){return this._lazyInitEmptyStyle(),this.style.setProjection(_),this._update(!0)}},p.MapMouseEvent=Cr,p.MapTouchEvent=Hn,p.MapWheelEvent=Kn,p.Marker=sn,p.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const r=this._map.getZoom(),s=r===this._map.getMaxZoom(),f=r===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,s)=>{const f=this._map._getUIString(`NavigationControl.${s}`);r.title=f,r.setAttribute("aria-label",f)},this.options=o.e({},tn,_),this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),z.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),z.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=z.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ks(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){z.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,r){const s=z.create("button",_,this._container);return s.type="button",s.addEventListener("click",r),s}},p.Popup=class extends o.E{constructor(_){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&z.remove(this._content),this._container&&(z.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=z.create("div","maplibregl-popup",this._map.getContainer()),this._tip=z.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Ad(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;const s=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let f=this.options.anchor;const y=ma(this.options.offset);if(!f){const T=this._container.offsetWidth,k=this._container.offsetHeight;let O;O=s.y+y.bottom.y<k?["top"]:s.y>this._map.transform.height-k?["bottom"]:[],s.x<T/2?O.push("left"):s.x>this._map.transform.width-T/2&&O.push("right"),f=O.length===0?"bottom":O.join("-")}let x=s.add(y[f]);this.options.subpixelPositioning||(x=x.round()),z.setTransform(this._container,`${Ri[f]} translate(${x.x}px,${x.y}px)`),Br(this._container,f,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(pu),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=o.S.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const r=document.createDocumentFragment(),s=document.createElement("body");let f;for(s.innerHTML=_;f=s.firstChild,f;)r.appendChild(f);return this.setDOMContent(r)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=z.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=z.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(wl);_&&_.focus()}},p.RasterDEMTileSource=Jr,p.RasterTileSource=Pn,p.ScaleControl=class{constructor(_){this._onMove=()=>{xc(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,xc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},fu),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){z.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},p.ScrollZoomHandler=on,p.Style=sd,p.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=z.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=z.create("button","maplibregl-ctrl-terrain",this._container),z.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){z.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},p.TwoFingersTouchPitchHandler=Lo,p.TwoFingersTouchRotateHandler=Ha,p.TwoFingersTouchZoomHandler=En,p.TwoFingersTouchZoomRotateHandler=wh,p.VectorTileSource=Qr,p.VideoSource=Fa,p.addSourceType=(_,r)=>o._(void 0,void 0,void 0,function*(){if(as(_))throw new Error(`A source type called "${_}" already exists.`);((s,f)=>{Js[s]=f})(_,r)}),p.clearPrewarmedResources=function(){const _=Lt;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(wt),Lt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},p.createTileMesh=ql,p.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},p.getRTLTextPluginStatus=function(){return Ei().getRTLTextPluginStatus()},p.getVersion=function(){return Sl},p.getWorkerCount=function(){return ze.workerCount},p.getWorkerUrl=function(){return o.a.WORKER_URL},p.importScriptInWorkers=function(_){return zr().broadcast("IS",_)},p.prewarm=function(){tr().acquire(wt)},p.setMaxParallelImageRequests=function(_){o.a.MAX_PARALLEL_IMAGE_REQUESTS=_},p.setRTLTextPlugin=function(_,r){return Ei().setRTLTextPlugin(_,r)},p.setWorkerCount=function(_){ze.workerCount=_},p.setWorkerUrl=function(_){o.a.WORKER_URL=_}});var g=n;return g})}(Zy)),Zy.exports}var DN=kN();const v0=Fl(DN);function GI(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var h=e.length;for(t=0;t<h;t++)e[t]&&(n=GI(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function gn(){for(var e,t,n=0,a="",h=arguments.length;n<h;n++)(e=arguments[n])&&(t=GI(e))&&(a&&(a+=" "),a+=t);return a}var _0={},x0={},XP;function ON(){return XP||(XP=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t}(x0)),x0}var b0={},YP;function qI(){return YP||(YP=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t}(b0)),b0}var w0={},QP;function WI(){return QP||(QP=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t}(w0)),w0}var S0={},JP;function iw(){return JP||(JP=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const a=[],h=n.length;if(h===0)return a;let g=0,p="",o="",P=!1;for(n.charCodeAt(0)===46&&(a.push(""),g++);g<h;){const E=n[g];o?E==="\\"&&g+1<h?(g++,p+=n[g]):E===o?o="":p+=E:P?E==='"'||E==="'"?o=E:E==="]"?(P=!1,a.push(p),p=""):p+=E:E==="["?(P=!0,p&&(a.push(p),p="")):E==="."?p&&(a.push(p),p=""):p+=E,g++}return p&&a.push(p),a}e.toPath=t}(S0)),S0}var eT;function aw(){return eT||(eT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ON(),n=qI(),a=WI(),h=iw();function g(o,P,E){if(o==null)return E;switch(typeof P){case"string":{if(t.isUnsafeProperty(P))return E;const C=o[P];return C===void 0?n.isDeepKey(P)?g(o,h.toPath(P),E):E:C}case"number":case"symbol":{typeof P=="number"&&(P=a.toKey(P));const C=o[P];return C===void 0?E:C}default:{if(Array.isArray(P))return p(o,P,E);if(Object.is(P?.valueOf(),-0)?P="-0":P=String(P),t.isUnsafeProperty(P))return E;const C=o[P];return C===void 0?E:C}}}function p(o,P,E){if(P.length===0)return E;let C=o;for(let I=0;I<P.length;I++){if(C==null||t.isUnsafeProperty(P[I]))return E;C=C[P[I]]}return C===void 0?E:C}e.get=g}(_0)),_0}var P0,tT;function RN(){return tT||(tT=1,P0=aw().get),P0}var zN=RN();const pf=Fl(zN);var T0={exports:{}},fn={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rT;function LN(){if(rT)return fn;rT=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),p=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.for("react.view_transition"),z=Symbol.for("react.client.reference");function B(U){if(typeof U=="object"&&U!==null){var Z=U.$$typeof;switch(Z){case e:switch(U=U.type,U){case n:case h:case a:case P:case E:case R:return U;default:switch(U=U&&U.$$typeof,U){case p:case o:case I:case C:return U;case g:return U;default:return Z}}case t:return Z}}}return fn.ContextConsumer=g,fn.ContextProvider=p,fn.Element=e,fn.ForwardRef=o,fn.Fragment=n,fn.Lazy=I,fn.Memo=C,fn.Portal=t,fn.Profiler=h,fn.StrictMode=a,fn.Suspense=P,fn.SuspenseList=E,fn.isContextConsumer=function(U){return B(U)===g},fn.isContextProvider=function(U){return B(U)===p},fn.isElement=function(U){return typeof U=="object"&&U!==null&&U.$$typeof===e},fn.isForwardRef=function(U){return B(U)===o},fn.isFragment=function(U){return B(U)===n},fn.isLazy=function(U){return B(U)===I},fn.isMemo=function(U){return B(U)===C},fn.isPortal=function(U){return B(U)===t},fn.isProfiler=function(U){return B(U)===h},fn.isStrictMode=function(U){return B(U)===a},fn.isSuspense=function(U){return B(U)===P},fn.isSuspenseList=function(U){return B(U)===E},fn.isValidElementType=function(U){return typeof U=="string"||typeof U=="function"||U===n||U===h||U===a||U===P||U===E||typeof U=="object"&&U!==null&&(U.$$typeof===I||U.$$typeof===C||U.$$typeof===p||U.$$typeof===g||U.$$typeof===o||U.$$typeof===z||U.getModuleId!==void 0)},fn.typeOf=B,fn}var nT;function jN(){return nT||(nT=1,T0.exports=LN()),T0.exports}var NN=jN(),qs=e=>e===0?0:e>0?1:-1,Hs=e=>typeof e=="number"&&e!=+e,tf=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Jt=e=>(typeof e=="number"||e instanceof Number)&&!Hs(e),zu=e=>Jt(e)||typeof e=="string",FN=0,dg=e=>{var t=++FN;return"".concat(e||"").concat(t)},Kh=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Jt(t)&&typeof t!="string")return a;var g;if(tf(t)){if(n==null)return a;var p=t.indexOf("%");g=n*parseFloat(t.slice(0,p))/100}else g=+t;return Hs(g)&&(g=a),h&&n!=null&&g>n&&(g=n),g},ZI=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},a=0;a<t;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},Bm=(e,t)=>Jt(e)&&Jt(t)?n=>e+n*(t-e):()=>t;function HI(e,t,n){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):pf(a,t))===n)}var di=e=>e===null||typeof e>"u",kg=e=>di(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),BN=["viewBox","children"],$N=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],iT=["points","pathLength"],C0={svg:BN,polygon:iT,polyline:iT},ow=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],sw=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(H.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(h=>{ow.includes(h)&&(a[h]=g=>n[h](n,g))}),a},VN=(e,t,n)=>a=>(e(t,n,a),null),KI=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(h=>{var g=e[h];ow.includes(h)&&typeof g=="function"&&(a||(a={}),a[h]=VN(g,t,n))}),a},aT=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",oT=null,E0=null,XI=e=>{if(e===oT&&Array.isArray(E0))return E0;var t=[];return H.Children.forEach(e,n=>{di(n)||(NN.isFragment(n)?t=t.concat(XI(n.props.children)):t.push(n))}),E0=t,oT=e,t};function YI(e,t){var n=[],a=[];return Array.isArray(t)?a=t.map(h=>aT(h)):a=[aT(t)],XI(e).forEach(h=>{var g=pf(h,"type.displayName")||pf(h,"type.name");a.indexOf(g)!==-1&&n.push(h)}),n}var QI=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,UN=(e,t,n,a)=>{var h,g=(h=a&&C0?.[a])!==null&&h!==void 0?h:[];return t.startsWith("data-")||typeof e!="function"&&(a&&g.includes(t)||$N.includes(t))||n&&ow.includes(t)},Sn=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(H.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var h={};return Object.keys(a).forEach(g=>{var p;UN((p=a)===null||p===void 0?void 0:p[g],g,t,n)&&(h[g]=a[g])}),h},GN=["children","width","height","viewBox","className","style","title","desc"];function T1(){return T1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},T1.apply(null,arguments)}function qN(e,t){if(e==null)return{};var n,a,h=WN(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)n=g[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(h[n]=e[n])}return h}function WN(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var lw=H.forwardRef((e,t)=>{var{children:n,width:a,height:h,viewBox:g,className:p,style:o,title:P,desc:E}=e,C=qN(e,GN),I=g||{width:a,height:h,x:0,y:0},R=gn("recharts-surface",p);return H.createElement("svg",T1({},Sn(C,!0,"svg"),{className:R,width:a,height:h,style:o,viewBox:"".concat(I.x," ").concat(I.y," ").concat(I.width," ").concat(I.height),ref:t}),H.createElement("title",null,P),H.createElement("desc",null,E),n)}),ZN=["children","className"];function C1(){return C1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},C1.apply(null,arguments)}function HN(e,t){if(e==null)return{};var n,a,h=KN(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)n=g[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(h[n]=e[n])}return h}function KN(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Xh=H.forwardRef((e,t)=>{var{children:n,className:a}=e,h=HN(e,ZN),g=gn("recharts-layer",a);return H.createElement("g",C1({className:g},Sn(h,!0),{ref:t}),n)}),JI=H.createContext(null),XN=()=>H.useContext(JI);function wn(e){return function(){return e}}const ek=Math.cos,nv=Math.sin,Bl=Math.sqrt,iv=Math.PI,qv=2*iv,E1=Math.PI,M1=2*E1,Xd=1e-6,YN=M1-Xd;function tk(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function QN(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return tk;const n=10**t;return function(a){this._+=a[0];for(let h=1,g=a.length;h<g;++h)this._+=Math.round(arguments[h]*n)/n+a[h]}}class JN{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?tk:QN(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,a,h){this._append`Q${+t},${+n},${this._x1=+a},${this._y1=+h}`}bezierCurveTo(t,n,a,h,g,p){this._append`C${+t},${+n},${+a},${+h},${this._x1=+g},${this._y1=+p}`}arcTo(t,n,a,h,g){if(t=+t,n=+n,a=+a,h=+h,g=+g,g<0)throw new Error(`negative radius: ${g}`);let p=this._x1,o=this._y1,P=a-t,E=h-n,C=p-t,I=o-n,R=C*C+I*I;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(R>Xd)if(!(Math.abs(I*P-E*C)>Xd)||!g)this._append`L${this._x1=t},${this._y1=n}`;else{let z=a-p,B=h-o,U=P*P+E*E,Z=z*z+B*B,Q=Math.sqrt(U),le=Math.sqrt(R),se=g*Math.tan((E1-Math.acos((U+R-Z)/(2*Q*le)))/2),Ce=se/le,be=se/Q;Math.abs(Ce-1)>Xd&&this._append`L${t+Ce*C},${n+Ce*I}`,this._append`A${g},${g},0,0,${+(I*z>C*B)},${this._x1=t+be*P},${this._y1=n+be*E}`}}arc(t,n,a,h,g,p){if(t=+t,n=+n,a=+a,p=!!p,a<0)throw new Error(`negative radius: ${a}`);let o=a*Math.cos(h),P=a*Math.sin(h),E=t+o,C=n+P,I=1^p,R=p?h-g:g-h;this._x1===null?this._append`M${E},${C}`:(Math.abs(this._x1-E)>Xd||Math.abs(this._y1-C)>Xd)&&this._append`L${E},${C}`,a&&(R<0&&(R=R%M1+M1),R>YN?this._append`A${a},${a},0,1,${I},${t-o},${n-P}A${a},${a},0,1,${I},${this._x1=E},${this._y1=C}`:R>Xd&&this._append`A${a},${a},0,${+(R>=E1)},${I},${this._x1=t+a*Math.cos(g)},${this._y1=n+a*Math.sin(g)}`)}rect(t,n,a,h){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${a=+a}v${+h}h${-a}Z`}toString(){return this._}}function uw(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);t=a}return e},()=>new JN(t)}function cw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function rk(e){this._context=e}rk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Wv(e){return new rk(e)}function nk(e){return e[0]}function ik(e){return e[1]}function ak(e,t){var n=wn(!0),a=null,h=Wv,g=null,p=uw(o);e=typeof e=="function"?e:e===void 0?nk:wn(e),t=typeof t=="function"?t:t===void 0?ik:wn(t);function o(P){var E,C=(P=cw(P)).length,I,R=!1,z;for(a==null&&(g=h(z=p())),E=0;E<=C;++E)!(E<C&&n(I=P[E],E,P))===R&&((R=!R)?g.lineStart():g.lineEnd()),R&&g.point(+e(I,E,P),+t(I,E,P));if(z)return g=null,z+""||null}return o.x=function(P){return arguments.length?(e=typeof P=="function"?P:wn(+P),o):e},o.y=function(P){return arguments.length?(t=typeof P=="function"?P:wn(+P),o):t},o.defined=function(P){return arguments.length?(n=typeof P=="function"?P:wn(!!P),o):n},o.curve=function(P){return arguments.length?(h=P,a!=null&&(g=h(a)),o):h},o.context=function(P){return arguments.length?(P==null?a=g=null:g=h(a=P),o):a},o}function Cy(e,t,n){var a=null,h=wn(!0),g=null,p=Wv,o=null,P=uw(E);e=typeof e=="function"?e:e===void 0?nk:wn(+e),t=typeof t=="function"?t:wn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?ik:wn(+n);function E(I){var R,z,B,U=(I=cw(I)).length,Z,Q=!1,le,se=new Array(U),Ce=new Array(U);for(g==null&&(o=p(le=P())),R=0;R<=U;++R){if(!(R<U&&h(Z=I[R],R,I))===Q)if(Q=!Q)z=R,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),B=R-1;B>=z;--B)o.point(se[B],Ce[B]);o.lineEnd(),o.areaEnd()}Q&&(se[R]=+e(Z,R,I),Ce[R]=+t(Z,R,I),o.point(a?+a(Z,R,I):se[R],n?+n(Z,R,I):Ce[R]))}if(le)return o=null,le+""||null}function C(){return ak().defined(h).curve(p).context(g)}return E.x=function(I){return arguments.length?(e=typeof I=="function"?I:wn(+I),a=null,E):e},E.x0=function(I){return arguments.length?(e=typeof I=="function"?I:wn(+I),E):e},E.x1=function(I){return arguments.length?(a=I==null?null:typeof I=="function"?I:wn(+I),E):a},E.y=function(I){return arguments.length?(t=typeof I=="function"?I:wn(+I),n=null,E):t},E.y0=function(I){return arguments.length?(t=typeof I=="function"?I:wn(+I),E):t},E.y1=function(I){return arguments.length?(n=I==null?null:typeof I=="function"?I:wn(+I),E):n},E.lineX0=E.lineY0=function(){return C().x(e).y(t)},E.lineY1=function(){return C().x(e).y(n)},E.lineX1=function(){return C().x(a).y(t)},E.defined=function(I){return arguments.length?(h=typeof I=="function"?I:wn(!!I),E):h},E.curve=function(I){return arguments.length?(p=I,g!=null&&(o=p(g)),E):p},E.context=function(I){return arguments.length?(I==null?g=o=null:o=p(g=I),E):g},E}class ok{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function eF(e){return new ok(e,!0)}function tF(e){return new ok(e,!1)}const hw={draw(e,t){const n=Bl(t/iv);e.moveTo(n,0),e.arc(0,0,n,0,qv)}},rF={draw(e,t){const n=Bl(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},sk=Bl(1/3),nF=sk*2,iF={draw(e,t){const n=Bl(t/nF),a=n*sk;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},aF={draw(e,t){const n=Bl(t),a=-n/2;e.rect(a,a,n,n)}},oF=.8908130915292852,lk=nv(iv/10)/nv(7*iv/10),sF=nv(qv/10)*lk,lF=-ek(qv/10)*lk,uF={draw(e,t){const n=Bl(t*oF),a=sF*n,h=lF*n;e.moveTo(0,-n),e.lineTo(a,h);for(let g=1;g<5;++g){const p=qv*g/5,o=ek(p),P=nv(p);e.lineTo(P*n,-o*n),e.lineTo(o*a-P*h,P*a+o*h)}e.closePath()}},M0=Bl(3),cF={draw(e,t){const n=-Bl(t/(M0*3));e.moveTo(0,n*2),e.lineTo(-M0*n,-n),e.lineTo(M0*n,-n),e.closePath()}},Fs=-.5,Bs=Bl(3)/2,A1=1/Bl(12),hF=(A1/2+1)*3,dF={draw(e,t){const n=Bl(t/hF),a=n/2,h=n*A1,g=a,p=n*A1+n,o=-g,P=p;e.moveTo(a,h),e.lineTo(g,p),e.lineTo(o,P),e.lineTo(Fs*a-Bs*h,Bs*a+Fs*h),e.lineTo(Fs*g-Bs*p,Bs*g+Fs*p),e.lineTo(Fs*o-Bs*P,Bs*o+Fs*P),e.lineTo(Fs*a+Bs*h,Fs*h-Bs*a),e.lineTo(Fs*g+Bs*p,Fs*p-Bs*g),e.lineTo(Fs*o+Bs*P,Fs*P-Bs*o),e.closePath()}};function fF(e,t){let n=null,a=uw(h);e=typeof e=="function"?e:wn(e||hw),t=typeof t=="function"?t:wn(t===void 0?64:+t);function h(){let g;if(n||(n=g=a()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),g)return n=null,g+""||null}return h.type=function(g){return arguments.length?(e=typeof g=="function"?g:wn(g),h):e},h.size=function(g){return arguments.length?(t=typeof g=="function"?g:wn(+g),h):t},h.context=function(g){return arguments.length?(n=g??null,h):n},h}function av(){}function ov(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function uk(e){this._context=e}uk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ov(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ov(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pF(e){return new uk(e)}function ck(e){this._context=e}ck.prototype={areaStart:av,areaEnd:av,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ov(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mF(e){return new ck(e)}function hk(e){this._context=e}hk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:ov(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gF(e){return new hk(e)}function dk(e){this._context=e}dk.prototype={areaStart:av,areaEnd:av,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function yF(e){return new dk(e)}function sT(e){return e<0?-1:1}function lT(e,t,n){var a=e._x1-e._x0,h=t-e._x1,g=(e._y1-e._y0)/(a||h<0&&-0),p=(n-e._y1)/(h||a<0&&-0),o=(g*h+p*a)/(a+h);return(sT(g)+sT(p))*Math.min(Math.abs(g),Math.abs(p),.5*Math.abs(o))||0}function uT(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function A0(e,t,n){var a=e._x0,h=e._y0,g=e._x1,p=e._y1,o=(g-a)/3;e._context.bezierCurveTo(a+o,h+o*t,g-o,p-o*n,g,p)}function sv(e){this._context=e}sv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:A0(this,this._t0,uT(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,A0(this,uT(this,n=lT(this,e,t)),n);break;default:A0(this,this._t0,n=lT(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function fk(e){this._context=new pk(e)}(fk.prototype=Object.create(sv.prototype)).point=function(e,t){sv.prototype.point.call(this,t,e)};function pk(e){this._context=e}pk.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,h,g){this._context.bezierCurveTo(t,e,a,n,g,h)}};function vF(e){return new sv(e)}function _F(e){return new fk(e)}function mk(e){this._context=e}mk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var a=cT(e),h=cT(t),g=0,p=1;p<n;++g,++p)this._context.bezierCurveTo(a[0][g],h[0][g],a[1][g],h[1][g],e[p],t[p]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function cT(e){var t,n=e.length-1,a,h=new Array(n),g=new Array(n),p=new Array(n);for(h[0]=0,g[0]=2,p[0]=e[0]+2*e[1],t=1;t<n-1;++t)h[t]=1,g[t]=4,p[t]=4*e[t]+2*e[t+1];for(h[n-1]=2,g[n-1]=7,p[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)a=h[t]/g[t-1],g[t]-=a,p[t]-=a*p[t-1];for(h[n-1]=p[n-1]/g[n-1],t=n-2;t>=0;--t)h[t]=(p[t]-h[t+1])/g[t];for(g[n-1]=(e[n]+h[n-1])/2,t=0;t<n-1;++t)g[t]=2*e[t+1]-h[t+1];return[h,g]}function xF(e){return new mk(e)}function Zv(e,t){this._context=e,this._t=t}Zv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function bF(e){return new Zv(e,.5)}function wF(e){return new Zv(e,0)}function SF(e){return new Zv(e,1)}function Op(e,t){if((p=e.length)>1)for(var n=1,a,h,g=e[t[0]],p,o=g.length;n<p;++n)for(h=g,g=e[t[n]],a=0;a<o;++a)g[a][1]+=g[a][0]=isNaN(h[a][1])?h[a][0]:h[a][1]}function I1(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function PF(e,t){return e[t]}function TF(e){const t=[];return t.key=e,t}function CF(){var e=wn([]),t=I1,n=Op,a=PF;function h(g){var p=Array.from(e.apply(this,arguments),TF),o,P=p.length,E=-1,C;for(const I of g)for(o=0,++E;o<P;++o)(p[o][E]=[0,+a(I,p[o].key,E,g)]).data=I;for(o=0,C=cw(t(p));o<P;++o)p[C[o]].index=o;return n(p,C),p}return h.keys=function(g){return arguments.length?(e=typeof g=="function"?g:wn(Array.from(g)),h):e},h.value=function(g){return arguments.length?(a=typeof g=="function"?g:wn(+g),h):a},h.order=function(g){return arguments.length?(t=g==null?I1:typeof g=="function"?g:wn(Array.from(g)),h):t},h.offset=function(g){return arguments.length?(n=g??Op,h):n},h}function EF(e,t){if((a=e.length)>0){for(var n,a,h=0,g=e[0].length,p;h<g;++h){for(p=n=0;n<a;++n)p+=e[n][h][1]||0;if(p)for(n=0;n<a;++n)e[n][h][1]/=p}Op(e,t)}}function MF(e,t){if((h=e.length)>0){for(var n=0,a=e[t[0]],h,g=a.length;n<g;++n){for(var p=0,o=0;p<h;++p)o+=e[p][n][1]||0;a[n][1]+=a[n][0]=-o/2}Op(e,t)}}function AF(e,t){if(!(!((p=e.length)>0)||!((g=(h=e[t[0]]).length)>0))){for(var n=0,a=1,h,g,p;a<g;++a){for(var o=0,P=0,E=0;o<p;++o){for(var C=e[t[o]],I=C[a][1]||0,R=C[a-1][1]||0,z=(I-R)/2,B=0;B<o;++B){var U=e[t[B]],Z=U[a][1]||0,Q=U[a-1][1]||0;z+=Z-Q}P+=I,E+=z*I}h[a-1][1]+=h[a-1][0]=n,P&&(n-=E/P)}h[a-1][1]+=h[a-1][0]=n,Op(e,t)}}var IF=["type","size","sizeType"];function k1(){return k1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},k1.apply(null,arguments)}function hT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function dT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hT(Object(n),!0).forEach(function(a){kF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hT(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function kF(e,t,n){return(t=DF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DF(e){var t=OF(e,"string");return typeof t=="symbol"?t:t+""}function OF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RF(e,t){if(e==null)return{};var n,a,h=zF(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)n=g[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(h[n]=e[n])}return h}function zF(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var gk={symbolCircle:hw,symbolCross:rF,symbolDiamond:iF,symbolSquare:aF,symbolStar:uF,symbolTriangle:cF,symbolWye:dF},LF=Math.PI/180,jF=e=>{var t="symbol".concat(kg(e));return gk[t]||hw},NF=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*LF;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},FF=(e,t)=>{gk["symbol".concat(kg(e))]=t},yk=e=>{var{type:t="circle",size:n=64,sizeType:a="area"}=e,h=RF(e,IF),g=dT(dT({},h),{},{type:t,size:n,sizeType:a}),p=()=>{var I=jF(t),R=fF().type(I).size(NF(n,a,t));return R()},{className:o,cx:P,cy:E}=g,C=Sn(g,!0);return P===+P&&E===+E&&n===+n?H.createElement("path",k1({},C,{className:gn("recharts-symbols",o),transform:"translate(".concat(P,", ").concat(E,")"),d:p()})):null};yk.registerSymbol=FF;function D1(){return D1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},D1.apply(null,arguments)}function fT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function BF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fT(Object(n),!0).forEach(function(a){dw(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fT(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function dw(e,t,n){return(t=$F(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $F(e){var t=VF(e,"string");return typeof t=="symbol"?t:t+""}function VF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $s=32;class fw extends H.PureComponent{renderIcon(t,n){var{inactiveColor:a}=this.props,h=$s/2,g=$s/6,p=$s/3,o=t.inactive?a:t.color,P=n??t.type;if(P==="none")return null;if(P==="plainline")return H.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:h,x2:$s,y2:h,className:"recharts-legend-icon"});if(P==="line")return H.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(h,"h").concat(p,`
            A`).concat(g,",").concat(g,",0,1,1,").concat(2*p,",").concat(h,`
            H`).concat($s,"M").concat(2*p,",").concat(h,`
            A`).concat(g,",").concat(g,",0,1,1,").concat(p,",").concat(h),className:"recharts-legend-icon"});if(P==="rect")return H.createElement("path",{stroke:"none",fill:o,d:"M0,".concat($s/8,"h").concat($s,"v").concat($s*3/4,"h").concat(-$s,"z"),className:"recharts-legend-icon"});if(H.isValidElement(t.legendIcon)){var E=BF({},t);return delete E.legendIcon,H.cloneElement(t.legendIcon,E)}return H.createElement(yk,{fill:o,cx:h,cy:h,size:$s,sizeType:"diameter",type:P})}renderItems(){var{payload:t,iconSize:n,layout:a,formatter:h,inactiveColor:g,iconType:p}=this.props,o={x:0,y:0,width:$s,height:$s},P={display:a==="horizontal"?"inline-block":"block",marginRight:10},E={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((C,I)=>{var R=C.formatter||h,z=gn({"recharts-legend-item":!0,["legend-item-".concat(I)]:!0,inactive:C.inactive});if(C.type==="none")return null;var B=C.inactive?g:C.color,U=R?R(C.value,C,I):C.value;return H.createElement("li",D1({className:z,style:P,key:"legend-item-".concat(I)},KI(this.props,C,I)),H.createElement(lw,{width:n,height:n,viewBox:o,style:E,"aria-label":"".concat(U," legend icon")},this.renderIcon(C,p)),H.createElement("span",{className:"recharts-legend-item-text",style:{color:B}},U))})}render(){var{payload:t,layout:n,align:a}=this.props;if(!t||!t.length)return null;var h={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return H.createElement("ul",{className:"recharts-default-legend",style:h},this.renderItems())}}dw(fw,"displayName","Legend");dw(fw,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var I0={},k0={},pT;function UF(){return pT||(pT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){const h=new Map;for(let g=0;g<n.length;g++){const p=n[g],o=a(p);h.has(o)||h.set(o,p)}return Array.from(h.values())}e.uniqBy=t}(k0)),k0}var D0={},mT;function vk(){return mT||(mT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t}(D0)),D0}var O0={},R0={},z0={},gT;function GF(){return gT||(gT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t}(z0)),z0}var yT;function pw(){return yT||(yT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GF();function n(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=n}(R0)),R0}var L0={},vT;function qF(){return vT||(vT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t}(L0)),L0}var _T;function WF(){return _T||(_T=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pw(),n=qF();function a(h){return n.isObjectLike(h)&&t.isArrayLike(h)}e.isArrayLikeObject=a}(O0)),O0}var j0={},N0={},xT;function ZF(){return xT||(xT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aw();function n(a){return function(h){return t.get(h,a)}}e.property=n}(N0)),N0}var F0={},B0={},$0={},V0={},bT;function _k(){return bT||(bT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t}(V0)),V0}var U0={},wT;function xk(){return wT||(wT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t}(U0)),U0}var G0={},ST;function mw(){return ST||(ST=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){return n===a||Number.isNaN(n)&&Number.isNaN(a)}e.eq=t}(G0)),G0}var PT;function HF(){return PT||(PT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gw(),n=_k(),a=xk(),h=mw();function g(I,R,z){return typeof z!="function"?t.isMatch(I,R):p(I,R,function B(U,Z,Q,le,se,Ce){const be=z(U,Z,Q,le,se,Ce);return be!==void 0?!!be:p(U,Z,B,Ce)},new Map)}function p(I,R,z,B){if(R===I)return!0;switch(typeof R){case"object":return o(I,R,z,B);case"function":return Object.keys(R).length>0?p(I,{...R},z,B):h.eq(I,R);default:return n.isObject(I)?typeof R=="string"?R==="":!0:h.eq(I,R)}}function o(I,R,z,B){if(R==null)return!0;if(Array.isArray(R))return E(I,R,z,B);if(R instanceof Map)return P(I,R,z,B);if(R instanceof Set)return C(I,R,z,B);const U=Object.keys(R);if(I==null)return U.length===0;if(U.length===0)return!0;if(B&&B.has(R))return B.get(R)===I;B&&B.set(R,I);try{for(let Z=0;Z<U.length;Z++){const Q=U[Z];if(!a.isPrimitive(I)&&!(Q in I)||R[Q]===void 0&&I[Q]!==void 0||R[Q]===null&&I[Q]!==null||!z(I[Q],R[Q],Q,I,R,B))return!1}return!0}finally{B&&B.delete(R)}}function P(I,R,z,B){if(R.size===0)return!0;if(!(I instanceof Map))return!1;for(const[U,Z]of R.entries()){const Q=I.get(U);if(z(Q,Z,U,I,R,B)===!1)return!1}return!0}function E(I,R,z,B){if(R.length===0)return!0;if(!Array.isArray(I))return!1;const U=new Set;for(let Z=0;Z<R.length;Z++){const Q=R[Z];let le=!1;for(let se=0;se<I.length;se++){if(U.has(se))continue;const Ce=I[se];let be=!1;if(z(Ce,Q,Z,I,R,B)&&(be=!0),be){U.add(se),le=!0;break}}if(!le)return!1}return!0}function C(I,R,z,B){return R.size===0?!0:I instanceof Set?E([...I],[...R],z,B):!1}e.isMatchWith=g,e.isSetMatch=C}($0)),$0}var TT;function gw(){return TT||(TT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HF();function n(a,h){return t.isMatchWith(a,h,()=>{})}e.isMatch=n}(B0)),B0}var q0={},W0={},Z0={},CT;function bk(){return CT||(CT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(a=>Object.prototype.propertyIsEnumerable.call(n,a))}e.getSymbols=t}(Z0)),Z0}var H0={},ET;function yw(){return ET||(ET=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t}(H0)),H0}var K0={},MT;function vw(){return MT||(MT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",a="[object Number]",h="[object Boolean]",g="[object Arguments]",p="[object Symbol]",o="[object Date]",P="[object Map]",E="[object Set]",C="[object Array]",I="[object Function]",R="[object ArrayBuffer]",z="[object Object]",B="[object Error]",U="[object DataView]",Z="[object Uint8Array]",Q="[object Uint8ClampedArray]",le="[object Uint16Array]",se="[object Uint32Array]",Ce="[object BigUint64Array]",be="[object Int8Array]",Ae="[object Int16Array]",Ne="[object Int32Array]",Qe="[object BigInt64Array]",ht="[object Float32Array]",Et="[object Float64Array]";e.argumentsTag=g,e.arrayBufferTag=R,e.arrayTag=C,e.bigInt64ArrayTag=Qe,e.bigUint64ArrayTag=Ce,e.booleanTag=h,e.dataViewTag=U,e.dateTag=o,e.errorTag=B,e.float32ArrayTag=ht,e.float64ArrayTag=Et,e.functionTag=I,e.int16ArrayTag=Ae,e.int32ArrayTag=Ne,e.int8ArrayTag=be,e.mapTag=P,e.numberTag=a,e.objectTag=z,e.regexpTag=t,e.setTag=E,e.stringTag=n,e.symbolTag=p,e.uint16ArrayTag=le,e.uint32ArrayTag=se,e.uint8ArrayTag=Z,e.uint8ClampedArrayTag=Q}(K0)),K0}var X0={},AT;function KF(){return AT||(AT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t}(X0)),X0}var IT;function wk(){return IT||(IT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bk(),n=yw(),a=vw(),h=xk(),g=KF();function p(C,I){return o(C,void 0,C,new Map,I)}function o(C,I,R,z=new Map,B=void 0){const U=B?.(C,I,R,z);if(U!=null)return U;if(h.isPrimitive(C))return C;if(z.has(C))return z.get(C);if(Array.isArray(C)){const Z=new Array(C.length);z.set(C,Z);for(let Q=0;Q<C.length;Q++)Z[Q]=o(C[Q],Q,R,z,B);return Object.hasOwn(C,"index")&&(Z.index=C.index),Object.hasOwn(C,"input")&&(Z.input=C.input),Z}if(C instanceof Date)return new Date(C.getTime());if(C instanceof RegExp){const Z=new RegExp(C.source,C.flags);return Z.lastIndex=C.lastIndex,Z}if(C instanceof Map){const Z=new Map;z.set(C,Z);for(const[Q,le]of C)Z.set(Q,o(le,Q,R,z,B));return Z}if(C instanceof Set){const Z=new Set;z.set(C,Z);for(const Q of C)Z.add(o(Q,void 0,R,z,B));return Z}if(typeof Buffer<"u"&&Buffer.isBuffer(C))return C.subarray();if(g.isTypedArray(C)){const Z=new(Object.getPrototypeOf(C)).constructor(C.length);z.set(C,Z);for(let Q=0;Q<C.length;Q++)Z[Q]=o(C[Q],Q,R,z,B);return Z}if(C instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&C instanceof SharedArrayBuffer)return C.slice(0);if(C instanceof DataView){const Z=new DataView(C.buffer.slice(0),C.byteOffset,C.byteLength);return z.set(C,Z),P(Z,C,R,z,B),Z}if(typeof File<"u"&&C instanceof File){const Z=new File([C],C.name,{type:C.type});return z.set(C,Z),P(Z,C,R,z,B),Z}if(C instanceof Blob){const Z=new Blob([C],{type:C.type});return z.set(C,Z),P(Z,C,R,z,B),Z}if(C instanceof Error){const Z=new C.constructor;return z.set(C,Z),Z.message=C.message,Z.name=C.name,Z.stack=C.stack,Z.cause=C.cause,P(Z,C,R,z,B),Z}if(typeof C=="object"&&E(C)){const Z=Object.create(Object.getPrototypeOf(C));return z.set(C,Z),P(Z,C,R,z,B),Z}return C}function P(C,I,R=C,z,B){const U=[...Object.keys(I),...t.getSymbols(I)];for(let Z=0;Z<U.length;Z++){const Q=U[Z],le=Object.getOwnPropertyDescriptor(C,Q);(le==null||le.writable)&&(C[Q]=o(I[Q],Q,R,z,B))}}function E(C){switch(n.getTag(C)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=p,e.cloneDeepWithImpl=o,e.copyProperties=P}(W0)),W0}var kT;function XF(){return kT||(kT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wk();function n(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=n}(q0)),q0}var DT;function YF(){return DT||(DT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gw(),n=XF();function a(h){return h=n.cloneDeep(h),g=>t.isMatch(g,h)}e.matches=a}(F0)),F0}var Y0={},Q0={},J0={},OT;function QF(){return OT||(OT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wk(),n=vw();function a(h,g){return t.cloneDeepWith(h,(p,o,P,E)=>{const C=g?.(p,o,P,E);if(C!=null)return C;if(typeof h=="object")switch(Object.prototype.toString.call(h)){case n.numberTag:case n.stringTag:case n.booleanTag:{const I=new h.constructor(h?.valueOf());return t.copyProperties(I,h),I}case n.argumentsTag:{const I={};return t.copyProperties(I,h),I.length=h.length,I[Symbol.iterator]=h[Symbol.iterator],I}default:return}})}e.cloneDeepWith=a}(J0)),J0}var RT;function JF(){return RT||(RT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QF();function n(a){return t.cloneDeepWith(a)}e.cloneDeep=n}(Q0)),Q0}var ex={},tx={},zT;function Sk(){return zT||(zT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(a,h=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<h;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=n}(tx)),tx}var rx={},LT;function eB(){return LT||(LT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yw();function n(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=n}(rx)),rx}var jT;function tB(){return jT||(jT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qI(),n=Sk(),a=eB(),h=iw();function g(p,o){let P;if(Array.isArray(o)?P=o:typeof o=="string"&&t.isDeepKey(o)&&p?.[o]==null?P=h.toPath(o):P=[o],P.length===0)return!1;let E=p;for(let C=0;C<P.length;C++){const I=P[C];if((E==null||!Object.hasOwn(E,I))&&!((Array.isArray(E)||a.isArguments(E))&&n.isIndex(I)&&I<E.length))return!1;E=E[I]}return!0}e.has=g}(ex)),ex}var NT;function rB(){return NT||(NT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gw(),n=WI(),a=JF(),h=aw(),g=tB();function p(o,P){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return P=a.cloneDeep(P),function(E){const C=h.get(E,o);return C===void 0?g.has(E,o):P===void 0?C===void 0:t.isMatch(C,P)}}e.matchesProperty=p}(Y0)),Y0}var FT;function nB(){return FT||(FT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vk(),n=ZF(),a=YF(),h=rB();function g(p){if(p==null)return t.identity;switch(typeof p){case"function":return p;case"object":return Array.isArray(p)&&p.length===2?h.matchesProperty(p[0],p[1]):a.matches(p);case"string":case"symbol":case"number":return n.property(p)}}e.iteratee=g}(j0)),j0}var BT;function iB(){return BT||(BT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UF(),n=vk(),a=WF(),h=nB();function g(p,o=n.identity){return a.isArrayLikeObject(p)?t.uniqBy(Array.from(p),h.iteratee(o)):[]}e.uniqBy=g}(I0)),I0}var nx,$T;function aB(){return $T||($T=1,nx=iB().uniqBy),nx}var oB=aB();const VT=Fl(oB);function Pk(e,t,n){return t===!0?VT(e,n):typeof t=="function"?VT(e,t):e}var ix={exports:{}},ax={},ox={exports:{}},sx={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UT;function sB(){if(UT)return sx;UT=1;var e=$p();function t(I,R){return I===R&&(I!==0||1/I===1/R)||I!==I&&R!==R}var n=typeof Object.is=="function"?Object.is:t,a=e.useState,h=e.useEffect,g=e.useLayoutEffect,p=e.useDebugValue;function o(I,R){var z=R(),B=a({inst:{value:z,getSnapshot:R}}),U=B[0].inst,Z=B[1];return g(function(){U.value=z,U.getSnapshot=R,P(U)&&Z({inst:U})},[I,z,R]),h(function(){return P(U)&&Z({inst:U}),I(function(){P(U)&&Z({inst:U})})},[I]),p(z),z}function P(I){var R=I.getSnapshot;I=I.value;try{var z=R();return!n(I,z)}catch{return!0}}function E(I,R){return R()}var C=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?E:o;return sx.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:C,sx}var GT;function lB(){return GT||(GT=1,ox.exports=sB()),ox.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qT;function uB(){if(qT)return ax;qT=1;var e=$p(),t=lB();function n(E,C){return E===C&&(E!==0||1/E===1/C)||E!==E&&C!==C}var a=typeof Object.is=="function"?Object.is:n,h=t.useSyncExternalStore,g=e.useRef,p=e.useEffect,o=e.useMemo,P=e.useDebugValue;return ax.useSyncExternalStoreWithSelector=function(E,C,I,R,z){var B=g(null);if(B.current===null){var U={hasValue:!1,value:null};B.current=U}else U=B.current;B=o(function(){function Q(Ae){if(!le){if(le=!0,se=Ae,Ae=R(Ae),z!==void 0&&U.hasValue){var Ne=U.value;if(z(Ne,Ae))return Ce=Ne}return Ce=Ae}if(Ne=Ce,a(se,Ae))return Ne;var Qe=R(Ae);return z!==void 0&&z(Ne,Qe)?(se=Ae,Ne):(se=Ae,Ce=Qe)}var le=!1,se,Ce,be=I===void 0?null:I;return[function(){return Q(C())},be===null?void 0:function(){return Q(be())}]},[C,I,R,z]);var Z=h(E,B[0],B[1]);return p(function(){U.hasValue=!0,U.value=Z},[Z]),P(Z),Z},ax}var WT;function cB(){return WT||(WT=1,ix.exports=uB()),ix.exports}var hB=cB(),_w=H.createContext(null),dB=e=>e,Ca=()=>{var e=H.useContext(_w);return e?e.store.dispatch:dB},Hy=()=>{},fB=()=>Hy,pB=(e,t)=>e===t;function or(e){var t=H.useContext(_w);return hB.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:fB,t?t.store.getState:Hy,t?t.store.getState:Hy,t?e:Hy,pB)}function mB(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function gB(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function yB(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${n}]`)}}var ZT=e=>Array.isArray(e)?e:[e];function vB(e){const t=Array.isArray(e[0])?e[0]:e;return yB(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function _B(e,t){const n=[],{length:a}=e;for(let h=0;h<a;h++)n.push(e[h].apply(null,t));return n}var xB=class{constructor(e){this.value=e}deref(){return this.value}},bB=typeof WeakRef<"u"?WeakRef:xB,wB=0,HT=1;function Ey(){return{s:wB,v:void 0,o:null,p:null}}function Tk(e,t={}){let n=Ey();const{resultEqualityCheck:a}=t;let h,g=0;function p(){let o=n;const{length:P}=arguments;for(let I=0,R=P;I<R;I++){const z=arguments[I];if(typeof z=="function"||typeof z=="object"&&z!==null){let B=o.o;B===null&&(o.o=B=new WeakMap);const U=B.get(z);U===void 0?(o=Ey(),B.set(z,o)):o=U}else{let B=o.p;B===null&&(o.p=B=new Map);const U=B.get(z);U===void 0?(o=Ey(),B.set(z,o)):o=U}}const E=o;let C;if(o.s===HT)C=o.v;else if(C=e.apply(null,arguments),g++,a){const I=h?.deref?.()??h;I!=null&&a(I,C)&&(C=I,g!==0&&g--),h=typeof C=="object"&&C!==null||typeof C=="function"?new bB(C):C}return E.s=HT,E.v=C,C}return p.clearCache=()=>{n=Ey(),p.resetResultsCount()},p.resultsCount=()=>g,p.resetResultsCount=()=>{g=0},p}function SB(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...h)=>{let g=0,p=0,o,P={},E=h.pop();typeof E=="object"&&(P=E,E=h.pop()),mB(E,`createSelector expects an output function after the inputs, but received: [${typeof E}]`);const C={...n,...P},{memoize:I,memoizeOptions:R=[],argsMemoize:z=Tk,argsMemoizeOptions:B=[]}=C,U=ZT(R),Z=ZT(B),Q=vB(h),le=I(function(){return g++,E.apply(null,arguments)},...U),se=z(function(){p++;const be=_B(Q,arguments);return o=le.apply(null,be),o},...Z);return Object.assign(se,{resultFunc:E,memoizedResultFunc:le,dependencies:Q,dependencyRecomputations:()=>p,resetDependencyRecomputations:()=>{p=0},lastResult:()=>o,recomputations:()=>g,resetRecomputations:()=>{g=0},memoize:I,argsMemoize:z})};return Object.assign(a,{withTypes:()=>a}),a}var st=SB(Tk),PB=Object.assign((e,t=st)=>{gB(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),a=n.map(g=>e[g]);return t(a,(...g)=>g.reduce((p,o,P)=>(p[n[P]]=o,p),{}))},{withTypes:()=>PB}),lx={},ux={},cx={},KT;function TB(){return KT||(KT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const n=(a,h,g)=>{if(a!==h){const p=t(a),o=t(h);if(p===o&&p===0){if(a<h)return g==="desc"?1:-1;if(a>h)return g==="desc"?-1:1}return g==="desc"?o-p:p-o}return 0};e.compareValues=n}(cx)),cx}var hx={},dx={},XT;function Ck(){return XT||(XT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t}(dx)),dx}var YT;function CB(){return YT||(YT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ck(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function h(g,p){return Array.isArray(g)?!1:typeof g=="number"||typeof g=="boolean"||g==null||t.isSymbol(g)?!0:typeof g=="string"&&(a.test(g)||!n.test(g))||p!=null&&Object.hasOwn(p,g)}e.isKey=h}(hx)),hx}var QT;function EB(){return QT||(QT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TB(),n=CB(),a=iw();function h(g,p,o,P){if(g==null)return[];o=P?void 0:o,Array.isArray(g)||(g=Object.values(g)),Array.isArray(p)||(p=p==null?[null]:[p]),p.length===0&&(p=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(z=>String(z));const E=(z,B)=>{let U=z;for(let Z=0;Z<B.length&&U!=null;++Z)U=U[B[Z]];return U},C=(z,B)=>B==null||z==null?B:typeof z=="object"&&"key"in z?Object.hasOwn(B,z.key)?B[z.key]:E(B,z.path):typeof z=="function"?z(B):Array.isArray(z)?E(B,z):typeof B=="object"?B[z]:B,I=p.map(z=>(Array.isArray(z)&&z.length===1&&(z=z[0]),z==null||typeof z=="function"||Array.isArray(z)||n.isKey(z)?z:{key:z,path:a.toPath(z)}));return g.map(z=>({original:z,criteria:I.map(B=>C(B,z))})).slice().sort((z,B)=>{for(let U=0;U<I.length;U++){const Z=t.compareValues(z.criteria[U],B.criteria[U],o[U]);if(Z!==0)return Z}return 0}).map(z=>z.original)}e.orderBy=h}(ux)),ux}var fx={},JT;function MB(){return JT||(JT=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a=1){const h=[],g=Math.floor(a),p=(o,P)=>{for(let E=0;E<o.length;E++){const C=o[E];Array.isArray(C)&&P<g?p(C,P+1):h.push(C)}};return p(n,0),h}e.flatten=t}(fx)),fx}var px={},eC;function Ek(){return eC||(eC=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Sk(),n=pw(),a=_k(),h=mw();function g(p,o,P){return a.isObject(P)&&(typeof o=="number"&&n.isArrayLike(P)&&t.isIndex(o)&&o<P.length||typeof o=="string"&&o in P)?h.eq(P[o],p):!1}e.isIterateeCall=g}(px)),px}var tC;function AB(){return tC||(tC=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EB(),n=MB(),a=Ek();function h(g,...p){const o=p.length;return o>1&&a.isIterateeCall(g,p[0],p[1])?p=[]:o>2&&a.isIterateeCall(p[0],p[1],p[2])&&(p=[p[0]]),t.orderBy(g,n.flatten(p),["asc"])}e.sortBy=h}(lx)),lx}var mx,rC;function IB(){return rC||(rC=1,mx=AB().sortBy),mx}var kB=IB();const Hv=Fl(kB);var Mk=e=>e.legend.settings,DB=e=>e.legend.size,OB=e=>e.legend.payload,RB=st([OB,Mk],(e,t)=>{var{itemSorter:n}=t,a=e.flat(1);return n?Hv(a,n):a});function zB(){return or(RB)}var My=1;function Ak(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=H.useState({height:0,left:0,top:0,width:0}),a=H.useCallback(h=>{if(h!=null){var g=h.getBoundingClientRect(),p={height:g.height,left:g.left,top:g.top,width:g.width};(Math.abs(p.height-t.height)>My||Math.abs(p.left-t.left)>My||Math.abs(p.top-t.top)>My||Math.abs(p.width-t.width)>My)&&n({height:p.height,left:p.left,top:p.top,width:p.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function wa(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var LB=typeof Symbol=="function"&&Symbol.observable||"@@observable",nC=LB,gx=()=>Math.random().toString(36).substring(7).split("").join("."),jB={INIT:`@@redux/INIT${gx()}`,REPLACE:`@@redux/REPLACE${gx()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${gx()}`},lv=jB;function xw(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Ik(e,t,n){if(typeof e!="function")throw new Error(wa(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(wa(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(wa(1));return n(Ik)(e,t)}let a=e,h=t,g=new Map,p=g,o=0,P=!1;function E(){p===g&&(p=new Map,g.forEach((Z,Q)=>{p.set(Q,Z)}))}function C(){if(P)throw new Error(wa(3));return h}function I(Z){if(typeof Z!="function")throw new Error(wa(4));if(P)throw new Error(wa(5));let Q=!0;E();const le=o++;return p.set(le,Z),function(){if(Q){if(P)throw new Error(wa(6));Q=!1,E(),p.delete(le),g=null}}}function R(Z){if(!xw(Z))throw new Error(wa(7));if(typeof Z.type>"u")throw new Error(wa(8));if(typeof Z.type!="string")throw new Error(wa(17));if(P)throw new Error(wa(9));try{P=!0,h=a(h,Z)}finally{P=!1}return(g=p).forEach(le=>{le()}),Z}function z(Z){if(typeof Z!="function")throw new Error(wa(10));a=Z,R({type:lv.REPLACE})}function B(){const Z=I;return{subscribe(Q){if(typeof Q!="object"||Q===null)throw new Error(wa(11));function le(){const Ce=Q;Ce.next&&Ce.next(C())}return le(),{unsubscribe:Z(le)}},[nC](){return this}}}return R({type:lv.INIT}),{dispatch:R,subscribe:I,getState:C,replaceReducer:z,[nC]:B}}function NB(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:lv.INIT})>"u")throw new Error(wa(12));if(typeof n(void 0,{type:lv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(wa(13))})}function kk(e){const t=Object.keys(e),n={};for(let g=0;g<t.length;g++){const p=t[g];typeof e[p]=="function"&&(n[p]=e[p])}const a=Object.keys(n);let h;try{NB(n)}catch(g){h=g}return function(p={},o){if(h)throw h;let P=!1;const E={};for(let C=0;C<a.length;C++){const I=a[C],R=n[I],z=p[I],B=R(z,o);if(typeof B>"u")throw o&&o.type,new Error(wa(14));E[I]=B,P=P||B!==z}return P=P||a.length!==Object.keys(p).length,P?E:p}}function uv(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...a)=>t(n(...a)))}function FB(...e){return t=>(n,a)=>{const h=t(n,a);let g=()=>{throw new Error(wa(15))};const p={getState:h.getState,dispatch:(P,...E)=>g(P,...E)},o=e.map(P=>P(p));return g=uv(...o)(h.dispatch),{...h,dispatch:g}}}function Dk(e){return xw(e)&&"type"in e&&typeof e.type=="string"}var Ok=Symbol.for("immer-nothing"),iC=Symbol.for("immer-draftable"),ns=Symbol.for("immer-state");function zl(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Rp=Object.getPrototypeOf;function mf(e){return!!e&&!!e[ns]}function Kc(e){return e?Rk(e)||Array.isArray(e)||!!e[iC]||!!e.constructor?.[iC]||Xv(e)||Yv(e):!1}var BB=Object.prototype.constructor.toString();function Rk(e){if(!e||typeof e!="object")return!1;const t=Rp(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===BB}function cv(e,t){Kv(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,a)=>t(a,n,e))}function Kv(e){const t=e[ns];return t?t.type_:Array.isArray(e)?1:Xv(e)?2:Yv(e)?3:0}function O1(e,t){return Kv(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function zk(e,t,n){const a=Kv(e);a===2?e.set(t,n):a===3?e.add(n):e[t]=n}function $B(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Xv(e){return e instanceof Map}function Yv(e){return e instanceof Set}function Yd(e){return e.copy_||e.base_}function R1(e,t){if(Xv(e))return new Map(e);if(Yv(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Rk(e);if(t===!0||t==="class_only"&&!n){const a=Object.getOwnPropertyDescriptors(e);delete a[ns];let h=Reflect.ownKeys(a);for(let g=0;g<h.length;g++){const p=h[g],o=a[p];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(a[p]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[p]})}return Object.create(Rp(e),a)}else{const a=Rp(e);if(a!==null&&n)return{...e};const h=Object.create(a);return Object.assign(h,e)}}function bw(e,t=!1){return Qv(e)||mf(e)||!Kc(e)||(Kv(e)>1&&(e.set=e.add=e.clear=e.delete=VB),Object.freeze(e),t&&Object.entries(e).forEach(([n,a])=>bw(a,!0))),e}function VB(){zl(2)}function Qv(e){return Object.isFrozen(e)}var UB={};function gf(e){const t=UB[e];return t||zl(0,e),t}var fg;function Lk(){return fg}function GB(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function aC(e,t){t&&(gf("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function z1(e){L1(e),e.drafts_.forEach(qB),e.drafts_=null}function L1(e){e===fg&&(fg=e.parent_)}function oC(e){return fg=GB(fg,e)}function qB(e){const t=e[ns];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function sC(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ns].modified_&&(z1(t),zl(4)),Kc(e)&&(e=hv(t,e),t.parent_||dv(t,e)),t.patches_&&gf("Patches").generateReplacementPatches_(n[ns].base_,e,t.patches_,t.inversePatches_)):e=hv(t,n,[]),z1(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ok?e:void 0}function hv(e,t,n){if(Qv(t))return t;const a=t[ns];if(!a)return cv(t,(h,g)=>lC(e,a,t,h,g,n)),t;if(a.scope_!==e)return t;if(!a.modified_)return dv(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const h=a.copy_;let g=h,p=!1;a.type_===3&&(g=new Set(h),h.clear(),p=!0),cv(g,(o,P)=>lC(e,a,h,o,P,n,p)),dv(e,h,!1),n&&e.patches_&&gf("Patches").generatePatches_(a,n,e.patches_,e.inversePatches_)}return a.copy_}function lC(e,t,n,a,h,g,p){if(mf(h)){const o=g&&t&&t.type_!==3&&!O1(t.assigned_,a)?g.concat(a):void 0,P=hv(e,h,o);if(zk(n,a,P),mf(P))e.canAutoFreeze_=!1;else return}else p&&n.add(h);if(Kc(h)&&!Qv(h)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;hv(e,h),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,a)&&dv(e,h)}}function dv(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&bw(t,n)}function WB(e,t){const n=Array.isArray(e),a={type_:n?1:0,scope_:t?t.scope_:Lk(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let h=a,g=ww;n&&(h=[a],g=pg);const{revoke:p,proxy:o}=Proxy.revocable(h,g);return a.draft_=o,a.revoke_=p,o}var ww={get(e,t){if(t===ns)return e;const n=Yd(e);if(!O1(n,t))return ZB(e,n,t);const a=n[t];return e.finalized_||!Kc(a)?a:a===yx(e.base_,t)?(vx(e),e.copy_[t]=N1(a,e)):a},has(e,t){return t in Yd(e)},ownKeys(e){return Reflect.ownKeys(Yd(e))},set(e,t,n){const a=jk(Yd(e),t);if(a?.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const h=yx(Yd(e),t),g=h?.[ns];if(g&&g.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if($B(n,h)&&(n!==void 0||O1(e.base_,t)))return!0;vx(e),j1(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return yx(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,vx(e),j1(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Yd(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:n[t]}},defineProperty(){zl(11)},getPrototypeOf(e){return Rp(e.base_)},setPrototypeOf(){zl(12)}},pg={};cv(ww,(e,t)=>{pg[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});pg.deleteProperty=function(e,t){return pg.set.call(this,e,t,void 0)};pg.set=function(e,t,n){return ww.set.call(this,e[0],t,n,e[0])};function yx(e,t){const n=e[ns];return(n?Yd(n):e)[t]}function ZB(e,t,n){const a=jk(t,n);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}function jk(e,t){if(!(t in e))return;let n=Rp(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=Rp(n)}}function j1(e){e.modified_||(e.modified_=!0,e.parent_&&j1(e.parent_))}function vx(e){e.copy_||(e.copy_=R1(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var HB=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,a)=>{if(typeof t=="function"&&typeof n!="function"){const g=n;n=t;const p=this;return function(P=g,...E){return p.produce(P,C=>n.call(this,C,...E))}}typeof n!="function"&&zl(6),a!==void 0&&typeof a!="function"&&zl(7);let h;if(Kc(t)){const g=oC(this),p=N1(t,void 0);let o=!0;try{h=n(p),o=!1}finally{o?z1(g):L1(g)}return aC(g,a),sC(h,g)}else if(!t||typeof t!="object"){if(h=n(t),h===void 0&&(h=t),h===Ok&&(h=void 0),this.autoFreeze_&&bw(h,!0),a){const g=[],p=[];gf("Patches").generateReplacementPatches_(t,h,g,p),a(g,p)}return h}else zl(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(p,...o)=>this.produceWithPatches(p,P=>t(P,...o));let a,h;return[this.produce(t,n,(p,o)=>{a=p,h=o}),a,h]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Kc(e)||zl(8),mf(e)&&(e=Gc(e));const t=oC(this),n=N1(e,void 0);return n[ns].isManual_=!0,L1(t),n}finishDraft(e,t){const n=e&&e[ns];(!n||!n.isManual_)&&zl(9);const{scope_:a}=n;return aC(a,t),sC(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const h=t[n];if(h.path.length===0&&h.op==="replace"){e=h.value;break}}n>-1&&(t=t.slice(n+1));const a=gf("Patches").applyPatches_;return mf(e)?a(e,t):this.produce(e,h=>a(h,t))}};function N1(e,t){const n=Xv(e)?gf("MapSet").proxyMap_(e,t):Yv(e)?gf("MapSet").proxySet_(e,t):WB(e,t);return(t?t.scope_:Lk()).drafts_.push(n),n}function Gc(e){return mf(e)||zl(10,e),Nk(e)}function Nk(e){if(!Kc(e)||Qv(e))return e;const t=e[ns];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=R1(e,t.scope_.immer_.useStrictShallowCopy_)}else n=R1(e,!0);return cv(n,(a,h)=>{zk(n,a,Nk(h))}),t&&(t.finalized_=!1),n}var is=new HB,Fk=is.produce;is.produceWithPatches.bind(is);is.setAutoFreeze.bind(is);is.setUseStrictShallowCopy.bind(is);is.applyPatches.bind(is);is.createDraft.bind(is);is.finishDraft.bind(is);function Bk(e){return({dispatch:n,getState:a})=>h=>g=>typeof g=="function"?g(n,a,e):h(g)}var KB=Bk(),XB=Bk,YB=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?uv:uv.apply(null,arguments)};function Ks(e,t){function n(...a){if(t){let h=t(...a);if(!h)throw new Error(ts(0));return{type:e,payload:h.payload,..."meta"in h&&{meta:h.meta},..."error"in h&&{error:h.error}}}return{type:e,payload:a[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=a=>Dk(a)&&a.type===e,n}var $k=class Km extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Km.prototype)}static get[Symbol.species](){return Km}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Km(...t[0].concat(this)):new Km(...t.concat(this))}};function uC(e){return Kc(e)?Fk(e,()=>{}):e}function Ay(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function QB(e){return typeof e=="boolean"}var JB=()=>function(t){const{thunk:n=!0,immutableCheck:a=!0,serializableCheck:h=!0,actionCreatorCheck:g=!0}=t??{};let p=new $k;return n&&(QB(n)?p.push(KB):p.push(XB(n.extraArgument))),p},e8="RTK_autoBatch",cC=e=>t=>{setTimeout(t,e)},t8=(e={type:"raf"})=>t=>(...n)=>{const a=t(...n);let h=!0,g=!1,p=!1;const o=new Set,P=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:cC(10):e.type==="callback"?e.queueNotification:cC(e.timeout),E=()=>{p=!1,g&&(g=!1,o.forEach(C=>C()))};return Object.assign({},a,{subscribe(C){const I=()=>h&&C(),R=a.subscribe(I);return o.add(C),()=>{R(),o.delete(C)}},dispatch(C){try{return h=!C?.meta?.[e8],g=!h,g&&(p||(p=!0,P(E))),a.dispatch(C)}finally{h=!0}}})},r8=e=>function(n){const{autoBatch:a=!0}=n??{};let h=new $k(e);return a&&h.push(t8(typeof a=="object"?a:void 0)),h};function n8(e){const t=JB(),{reducer:n=void 0,middleware:a,devTools:h=!0,preloadedState:g=void 0,enhancers:p=void 0}=e||{};let o;if(typeof n=="function")o=n;else if(xw(n))o=kk(n);else throw new Error(ts(1));let P;typeof a=="function"?P=a(t):P=t();let E=uv;h&&(E=YB({trace:!1,...typeof h=="object"&&h}));const C=FB(...P),I=r8(C);let R=typeof p=="function"?p(I):I();const z=E(...R);return Ik(o,g,z)}function Vk(e){const t={},n=[];let a;const h={addCase(g,p){const o=typeof g=="string"?g:g.type;if(!o)throw new Error(ts(28));if(o in t)throw new Error(ts(29));return t[o]=p,h},addMatcher(g,p){return n.push({matcher:g,reducer:p}),h},addDefaultCase(g){return a=g,h}};return e(h),[t,n,a]}function i8(e){return typeof e=="function"}function a8(e,t){let[n,a,h]=Vk(t),g;if(i8(e))g=()=>uC(e());else{const o=uC(e);g=()=>o}function p(o=g(),P){let E=[n[P.type],...a.filter(({matcher:C})=>C(P)).map(({reducer:C})=>C)];return E.filter(C=>!!C).length===0&&(E=[h]),E.reduce((C,I)=>{if(I)if(mf(C)){const z=I(C,P);return z===void 0?C:z}else{if(Kc(C))return Fk(C,R=>I(R,P));{const R=I(C,P);if(R===void 0){if(C===null)return C;throw Error("A case reducer on a non-draftable value must not return undefined")}return R}}return C},o)}return p.getInitialState=g,p}var o8="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",s8=(e=21)=>{let t="",n=e;for(;n--;)t+=o8[Math.random()*64|0];return t},l8=Symbol.for("rtk-slice-createasyncthunk");function u8(e,t){return`${e}/${t}`}function c8({creators:e}={}){const t=e?.asyncThunk?.[l8];return function(a){const{name:h,reducerPath:g=h}=a;if(!h)throw new Error(ts(11));const p=(typeof a.reducers=="function"?a.reducers(d8()):a.reducers)||{},o=Object.keys(p),P={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},E={addCase(se,Ce){const be=typeof se=="string"?se:se.type;if(!be)throw new Error(ts(12));if(be in P.sliceCaseReducersByType)throw new Error(ts(13));return P.sliceCaseReducersByType[be]=Ce,E},addMatcher(se,Ce){return P.sliceMatchers.push({matcher:se,reducer:Ce}),E},exposeAction(se,Ce){return P.actionCreators[se]=Ce,E},exposeCaseReducer(se,Ce){return P.sliceCaseReducersByName[se]=Ce,E}};o.forEach(se=>{const Ce=p[se],be={reducerName:se,type:u8(h,se),createNotation:typeof a.reducers=="function"};p8(Ce)?g8(be,Ce,E,t):f8(be,Ce,E)});function C(){const[se={},Ce=[],be=void 0]=typeof a.extraReducers=="function"?Vk(a.extraReducers):[a.extraReducers],Ae={...se,...P.sliceCaseReducersByType};return a8(a.initialState,Ne=>{for(let Qe in Ae)Ne.addCase(Qe,Ae[Qe]);for(let Qe of P.sliceMatchers)Ne.addMatcher(Qe.matcher,Qe.reducer);for(let Qe of Ce)Ne.addMatcher(Qe.matcher,Qe.reducer);be&&Ne.addDefaultCase(be)})}const I=se=>se,R=new Map,z=new WeakMap;let B;function U(se,Ce){return B||(B=C()),B(se,Ce)}function Z(){return B||(B=C()),B.getInitialState()}function Q(se,Ce=!1){function be(Ne){let Qe=Ne[se];return typeof Qe>"u"&&Ce&&(Qe=Ay(z,be,Z)),Qe}function Ae(Ne=I){const Qe=Ay(R,Ce,()=>new WeakMap);return Ay(Qe,Ne,()=>{const ht={};for(const[Et,vt]of Object.entries(a.selectors??{}))ht[Et]=h8(vt,Ne,()=>Ay(z,Ne,Z),Ce);return ht})}return{reducerPath:se,getSelectors:Ae,get selectors(){return Ae(be)},selectSlice:be}}const le={name:h,reducer:U,actions:P.actionCreators,caseReducers:P.sliceCaseReducersByName,getInitialState:Z,...Q(g),injectInto(se,{reducerPath:Ce,...be}={}){const Ae=Ce??g;return se.inject({reducerPath:Ae,reducer:U},be),{...le,...Q(Ae,!0)}}};return le}}function h8(e,t,n,a){function h(g,...p){let o=t(g);return typeof o>"u"&&a&&(o=n()),e(o,...p)}return h.unwrapped=e,h}var Ys=c8();function d8(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function f8({type:e,reducerName:t,createNotation:n},a,h){let g,p;if("reducer"in a){if(n&&!m8(a))throw new Error(ts(17));g=a.reducer,p=a.prepare}else g=a;h.addCase(e,g).exposeCaseReducer(t,g).exposeAction(t,p?Ks(e,p):Ks(e))}function p8(e){return e._reducerDefinitionType==="asyncThunk"}function m8(e){return e._reducerDefinitionType==="reducerWithPrepare"}function g8({type:e,reducerName:t},n,a,h){if(!h)throw new Error(ts(18));const{payloadCreator:g,fulfilled:p,pending:o,rejected:P,settled:E,options:C}=n,I=h(e,g,C);a.exposeAction(t,I),p&&a.addCase(I.fulfilled,p),o&&a.addCase(I.pending,o),P&&a.addCase(I.rejected,P),E&&a.addMatcher(I.settled,E),a.exposeCaseReducer(t,{fulfilled:p||Iy,pending:o||Iy,rejected:P||Iy,settled:E||Iy})}function Iy(){}var y8="task",Uk="listener",Gk="completed",Sw="cancelled",v8=`task-${Sw}`,_8=`task-${Gk}`,F1=`${Uk}-${Sw}`,x8=`${Uk}-${Gk}`,Jv=class{constructor(e){this.code=e,this.message=`${y8} ${Sw} (reason: ${e})`}name="TaskAbortError";message},Pw=(e,t)=>{if(typeof e!="function")throw new TypeError(ts(32))},fv=()=>{},qk=(e,t=fv)=>(e.catch(t),e),Wk=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),uf=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},cf=e=>{if(e.aborted){const{reason:t}=e;throw new Jv(t)}};function Zk(e,t){let n=fv;return new Promise((a,h)=>{const g=()=>h(new Jv(e.reason));if(e.aborted){g();return}n=Wk(e,g),t.finally(()=>n()).then(a,h)}).finally(()=>{n=fv})}var b8=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Jv?"cancelled":"rejected",error:n}}finally{t?.()}},pv=e=>t=>qk(Zk(e,t).then(n=>(cf(e),n))),Hk=e=>{const t=pv(e);return n=>t(new Promise(a=>setTimeout(a,n)))},{assign:Ap}=Object,hC={},e_="listenerMiddleware",w8=(e,t)=>{const n=a=>Wk(e,()=>uf(a,e.reason));return(a,h)=>{Pw(a);const g=new AbortController;n(g);const p=b8(async()=>{cf(e),cf(g.signal);const o=await a({pause:pv(g.signal),delay:Hk(g.signal),signal:g.signal});return cf(g.signal),o},()=>uf(g,_8));return h?.autoJoin&&t.push(p.catch(fv)),{result:pv(e)(p),cancel(){uf(g,v8)}}}},S8=(e,t)=>{const n=async(a,h)=>{cf(t);let g=()=>{};const o=[new Promise((P,E)=>{let C=e({predicate:a,effect:(I,R)=>{R.unsubscribe(),P([I,R.getState(),R.getOriginalState()])}});g=()=>{C(),E()}})];h!=null&&o.push(new Promise(P=>setTimeout(P,h,null)));try{const P=await Zk(t,Promise.race(o));return cf(t),P}finally{g()}};return(a,h)=>qk(n(a,h))},Kk=e=>{let{type:t,actionCreator:n,matcher:a,predicate:h,effect:g}=e;if(t)h=Ks(t).match;else if(n)t=n.type,h=n.match;else if(a)h=a;else if(!h)throw new Error(ts(21));return Pw(g),{predicate:h,type:t,effect:g}},Xk=Ap(e=>{const{type:t,predicate:n,effect:a}=Kk(e);return{id:s8(),effect:a,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ts(22))}}},{withTypes:()=>Xk}),dC=(e,t)=>{const{type:n,effect:a,predicate:h}=Kk(t);return Array.from(e.values()).find(g=>(typeof n=="string"?g.type===n:g.predicate===h)&&g.effect===a)},B1=e=>{e.pending.forEach(t=>{uf(t,F1)})},P8=e=>()=>{e.forEach(B1),e.clear()},fC=(e,t,n)=>{try{e(t,n)}catch(a){setTimeout(()=>{throw a},0)}},Yk=Ap(Ks(`${e_}/add`),{withTypes:()=>Yk}),T8=Ks(`${e_}/removeAll`),Qk=Ap(Ks(`${e_}/remove`),{withTypes:()=>Qk}),C8=(...e)=>{console.error(`${e_}/error`,...e)},Dg=(e={})=>{const t=new Map,{extra:n,onError:a=C8}=e;Pw(a);const h=C=>(C.unsubscribe=()=>t.delete(C.id),t.set(C.id,C),I=>{C.unsubscribe(),I?.cancelActive&&B1(C)}),g=C=>{const I=dC(t,C)??Xk(C);return h(I)};Ap(g,{withTypes:()=>g});const p=C=>{const I=dC(t,C);return I&&(I.unsubscribe(),C.cancelActive&&B1(I)),!!I};Ap(p,{withTypes:()=>p});const o=async(C,I,R,z)=>{const B=new AbortController,U=S8(g,B.signal),Z=[];try{C.pending.add(B),await Promise.resolve(C.effect(I,Ap({},R,{getOriginalState:z,condition:(Q,le)=>U(Q,le).then(Boolean),take:U,delay:Hk(B.signal),pause:pv(B.signal),extra:n,signal:B.signal,fork:w8(B.signal,Z),unsubscribe:C.unsubscribe,subscribe:()=>{t.set(C.id,C)},cancelActiveListeners:()=>{C.pending.forEach((Q,le,se)=>{Q!==B&&(uf(Q,F1),se.delete(Q))})},cancel:()=>{uf(B,F1),C.pending.delete(B)},throwIfCancelled:()=>{cf(B.signal)}})))}catch(Q){Q instanceof Jv||fC(a,Q,{raisedBy:"effect"})}finally{await Promise.all(Z),uf(B,x8),C.pending.delete(B)}},P=P8(t);return{middleware:C=>I=>R=>{if(!Dk(R))return I(R);if(Yk.match(R))return g(R.payload);if(T8.match(R)){P();return}if(Qk.match(R))return p(R.payload);let z=C.getState();const B=()=>{if(z===hC)throw new Error(ts(23));return z};let U;try{if(U=I(R),t.size>0){const Z=C.getState(),Q=Array.from(t.values());for(const le of Q){let se=!1;try{se=le.predicate(R,Z,z)}catch(Ce){se=!1,fC(a,Ce,{raisedBy:"predicate"})}se&&o(le,R,C,B)}}}finally{z=hC}return U},startListening:g,stopListening:p,clearListeners:P}};function ts(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var E8={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Jk=Ys({name:"chartLayout",initialState:E8,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:M8,setLayout:A8,setChartSize:I8,setScale:k8}=Jk.actions,D8=Jk.reducer;function pC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function mC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(n),!0).forEach(function(a){O8(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function O8(e,t,n){return(t=R8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R8(e){var t=z8(e,"string");return typeof t=="symbol"?t:t+""}function z8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mv=Math.PI/180,L8=e=>e*180/Math.PI,Ta=(e,t,n,a)=>({x:e+Math.cos(-mv*a)*n,y:t+Math.sin(-mv*a)*n}),j8=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},N8=(e,t)=>{var{x:n,y:a}=e,{x:h,y:g}=t;return Math.sqrt((n-h)**2+(a-g)**2)},F8=(e,t)=>{var{x:n,y:a}=e,{cx:h,cy:g}=t,p=N8({x:n,y:a},{x:h,y:g});if(p<=0)return{radius:p,angle:0};var o=(n-h)/p,P=Math.acos(o);return a>g&&(P=2*Math.PI-P),{radius:p,angle:L8(P),angleInRadian:P}},B8=e=>{var{startAngle:t,endAngle:n}=e,a=Math.floor(t/360),h=Math.floor(n/360),g=Math.min(a,h);return{startAngle:t-g*360,endAngle:n-g*360}},$8=(e,t)=>{var{startAngle:n,endAngle:a}=t,h=Math.floor(n/360),g=Math.floor(a/360),p=Math.min(h,g);return e+p*360},V8=(e,t)=>{var{x:n,y:a}=e,{radius:h,angle:g}=F8({x:n,y:a},t),{innerRadius:p,outerRadius:o}=t;if(h<p||h>o||h===0)return null;var{startAngle:P,endAngle:E}=B8(t),C=g,I;if(P<=E){for(;C>E;)C-=360;for(;C<P;)C+=360;I=C>=P&&C<=E}else{for(;C>P;)C-=360;for(;C<E;)C+=360;I=C>=E&&C<=P}return I?mC(mC({},t),{},{radius:h,angle:$8(C,t)}):null};function gC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function Gs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(n),!0).forEach(function(a){U8(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function U8(e,t,n){return(t=G8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G8(e){var t=q8(e,"string");return typeof t=="symbol"?t:t+""}function q8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rs(e,t,n){return di(e)||di(t)?n:zu(t)?pf(e,t,n):typeof t=="function"?t(e):n}var W8=(e,t,n,a,h)=>{var g,p=-1,o=(g=t?.length)!==null&&g!==void 0?g:0;if(o<=1||e==null)return 0;if(a==="angleAxis"&&h!=null&&Math.abs(Math.abs(h[1]-h[0])-360)<=1e-6)for(var P=0;P<o;P++){var E=P>0?n[P-1].coordinate:n[o-1].coordinate,C=n[P].coordinate,I=P>=o-1?n[0].coordinate:n[P+1].coordinate,R=void 0;if(qs(C-E)!==qs(I-C)){var z=[];if(qs(I-C)===qs(h[1]-h[0])){R=I;var B=C+h[1]-h[0];z[0]=Math.min(B,(B+E)/2),z[1]=Math.max(B,(B+E)/2)}else{R=E;var U=I+h[1]-h[0];z[0]=Math.min(C,(U+C)/2),z[1]=Math.max(C,(U+C)/2)}var Z=[Math.min(C,(R+C)/2),Math.max(C,(R+C)/2)];if(e>Z[0]&&e<=Z[1]||e>=z[0]&&e<=z[1]){({index:p}=n[P]);break}}else{var Q=Math.min(E,I),le=Math.max(E,I);if(e>(Q+C)/2&&e<=(le+C)/2){({index:p}=n[P]);break}}}else if(t){for(var se=0;se<o;se++)if(se===0&&e<=(t[se].coordinate+t[se+1].coordinate)/2||se>0&&se<o-1&&e>(t[se].coordinate+t[se-1].coordinate)/2&&e<=(t[se].coordinate+t[se+1].coordinate)/2||se===o-1&&e>(t[se].coordinate+t[se-1].coordinate)/2){({index:p}=t[se]);break}}return p},Z8=(e,t,n)=>{if(t&&n){var{width:a,height:h}=n,{align:g,verticalAlign:p,layout:o}=t;if((o==="vertical"||o==="horizontal"&&p==="middle")&&g!=="center"&&Jt(e[g]))return Gs(Gs({},e),{},{[g]:e[g]+(a||0)});if((o==="horizontal"||o==="vertical"&&g==="center")&&p!=="middle"&&Jt(e[p]))return Gs(Gs({},e),{},{[p]:e[p]+(h||0)})}return e},Jh=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",e3=(e,t,n,a)=>{if(a)return e.map(o=>o.coordinate);var h,g,p=e.map(o=>(o.coordinate===t&&(h=!0),o.coordinate===n&&(g=!0),o.coordinate));return h||p.push(t),g||p.push(n),p},t3=(e,t,n)=>{if(!e)return null;var{duplicateDomain:a,type:h,range:g,scale:p,realScaleType:o,isCategorical:P,categoricalDomain:E,tickCount:C,ticks:I,niceTicks:R,axisType:z}=e;if(!p)return null;var B=o==="scaleBand"&&p.bandwidth?p.bandwidth()/2:2,U=h==="category"&&p.bandwidth?p.bandwidth()/B:0;if(U=z==="angleAxis"&&g&&g.length>=2?qs(g[0]-g[1])*2*U:U,I||R){var Z=(I||R||[]).map((Q,le)=>{var se=a?a.indexOf(Q):Q;return{coordinate:p(se)+U,value:Q,offset:U,index:le}});return Z.filter(Q=>!Hs(Q.coordinate))}return P&&E?E.map((Q,le)=>({coordinate:p(Q)+U,value:Q,index:le,offset:U})):p.ticks&&C!=null?p.ticks(C).map((Q,le)=>({coordinate:p(Q)+U,value:Q,offset:U,index:le})):p.domain().map((Q,le)=>({coordinate:p(Q)+U,value:a?a[Q]:Q,index:le,offset:U}))},yC=1e-4,H8=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,a=e.range(),h=Math.min(a[0],a[1])-yC,g=Math.max(a[0],a[1])+yC,p=e(t[0]),o=e(t[n-1]);(p<h||p>g||o<h||o>g)&&e.domain([t[0],t[n-1]])}},K8=e=>{var t=e.length;if(!(t<=0))for(var n=0,a=e[0].length;n<a;++n)for(var h=0,g=0,p=0;p<t;++p){var o=Hs(e[p][n][1])?e[p][n][0]:e[p][n][1];o>=0?(e[p][n][0]=h,e[p][n][1]=h+o,h=e[p][n][1]):(e[p][n][0]=g,e[p][n][1]=g+o,g=e[p][n][1])}},X8=e=>{var t=e.length;if(!(t<=0))for(var n=0,a=e[0].length;n<a;++n)for(var h=0,g=0;g<t;++g){var p=Hs(e[g][n][1])?e[g][n][0]:e[g][n][1];p>=0?(e[g][n][0]=h,e[g][n][1]=h+p,h=e[g][n][1]):(e[g][n][0]=0,e[g][n][1]=0)}},Y8={sign:K8,expand:EF,none:Op,silhouette:MF,wiggle:AF,positive:X8},Q8=(e,t,n)=>{var a=Y8[n],h=CF().keys(t).value((g,p)=>+rs(g,p,0)).order(I1).offset(a);return h(e)};function J8(e){return e==null?void 0:String(e)}function vC(e){var{axis:t,ticks:n,bandSize:a,entry:h,index:g,dataKey:p}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!di(h[t.dataKey])){var o=HI(n,"value",h[t.dataKey]);if(o)return o.coordinate+a/2}return n[g]?n[g].coordinate+a/2:null}var P=rs(h,di(p)?t.dataKey:p);return di(P)?null:t.scale(P)}var e$=e=>{var t=e.flat(2).filter(Jt);return[Math.min(...t),Math.max(...t)]},t$=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],r$=(e,t,n)=>{if(e!=null)return t$(Object.keys(e).reduce((a,h)=>{var g=e[h],{stackedData:p}=g,o=p.reduce((P,E)=>{var C=e$(E.slice(t,n+1));return[Math.min(P[0],C[0]),Math.max(P[1],C[1])]},[1/0,-1/0]);return[Math.min(o[0],a[0]),Math.max(o[1],a[1])]},[1/0,-1/0]))},_C=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,xC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,$1=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&t&&t.length>=2){for(var h=Hv(t,C=>C.coordinate),g=1/0,p=1,o=h.length;p<o;p++){var P=h[p],E=h[p-1];g=Math.min((P.coordinate||0)-(E.coordinate||0),g)}return g===1/0?0:g}return n?void 0:0};function bC(e){var{tooltipEntrySettings:t,dataKey:n,payload:a,value:h,name:g}=e;return Gs(Gs({},t),{},{dataKey:n,payload:a,value:h,name:g})}function r3(e,t){if(e)return String(e);if(typeof t=="string")return t}function n$(e,t,n,a,h){if(n==="horizontal"||n==="vertical"){var g=e>=h.left&&e<=h.left+h.width&&t>=h.top&&t<=h.top+h.height;return g?{x:e,y:t}:null}return a?V8({x:e,y:t},a):null}var i$=(e,t,n,a)=>{var h=t.find(E=>E&&E.index===n);if(h){if(e==="horizontal")return{x:h.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:h.coordinate};if(e==="centric"){var g=h.coordinate,{radius:p}=a;return Gs(Gs(Gs({},a),Ta(a.cx,a.cy,p,g)),{},{angle:g,radius:p})}var o=h.coordinate,{angle:P}=a;return Gs(Gs(Gs({},a),Ta(a.cx,a.cy,o,P)),{},{angle:P,radius:o})}return{x:0,y:0}},a$=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,eh=e=>e.layout.width,th=e=>e.layout.height,o$=e=>e.layout.scale,n3=e=>e.layout.margin,Tw=st(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Cw=st(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),s$="data-recharts-item-index",l$="data-recharts-item-data-key",t_=60;function wC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function Bh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wC(Object(n),!0).forEach(function(a){u$(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function u$(e,t,n){return(t=c$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c$(e){var t=h$(e,"string");return typeof t=="symbol"?t:t+""}function h$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var d$=e=>e.brush.height,Ea=st([eh,th,n3,d$,Tw,Cw,Mk,DB],(e,t,n,a,h,g,p,o)=>{var P=g.reduce((B,U)=>{var{orientation:Z}=U;if(!U.mirror&&!U.hide){var Q=typeof U.width=="number"?U.width:t_;return Bh(Bh({},B),{},{[Z]:B[Z]+Q})}return B},{left:n.left||0,right:n.right||0}),E=h.reduce((B,U)=>{var{orientation:Z}=U;return!U.mirror&&!U.hide?Bh(Bh({},B),{},{[Z]:pf(B,"".concat(Z))+U.height}):B},{top:n.top||0,bottom:n.bottom||0}),C=Bh(Bh({},E),P),I=C.bottom;C.bottom+=a,C=Z8(C,p,o);var R=e-C.left-C.right,z=t-C.top-C.bottom;return Bh(Bh({brushBottom:I},C),{},{width:Math.max(R,0),height:Math.max(z,0)})}),f$=st(Ea,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),i3=st(eh,th,(e,t)=>({x:0,y:0,width:e,height:t})),p$=H.createContext(null),To=()=>H.useContext(p$)!=null,r_=e=>e.brush,n_=st([r_,Ea,n3],(e,t,n)=>({height:e.height,x:Jt(e.x)?e.x:t.left,y:Jt(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:Jt(e.width)?e.width:t.width})),Ew=()=>{var e,t=To(),n=or(f$),a=or(n_),h=(e=or(r_))===null||e===void 0?void 0:e.padding;return!t||!a||!h?n:{width:a.width-h.left-h.right,height:a.height-h.top-h.bottom,x:h.left,y:h.top}},m$={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},a3=()=>{var e;return(e=or(Ea))!==null&&e!==void 0?e:m$},Mw=()=>or(eh),Aw=()=>or(th),g$={top:0,right:0,bottom:0,left:0},y$=()=>{var e;return(e=or(t=>t.layout.margin))!==null&&e!==void 0?e:g$},Wn=e=>e.layout.layoutType,Iw=()=>or(Wn),v$={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},o3=Ys({name:"legend",initialState:v$,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=Gc(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:SC,setLegendSettings:_$,addLegendPayload:x$,removeLegendPayload:b$}=o3.actions,w$=o3.reducer,S$=["contextPayload"];function V1(){return V1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},V1.apply(null,arguments)}function PC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function zp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PC(Object(n),!0).forEach(function(a){kw(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function kw(e,t,n){return(t=P$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P$(e){var t=T$(e,"string");return typeof t=="symbol"?t:t+""}function T$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C$(e,t){if(e==null)return{};var n,a,h=E$(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)n=g[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(h[n]=e[n])}return h}function E$(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function M$(e){return e.value}function A$(e){var{contextPayload:t}=e,n=C$(e,S$),a=Pk(t,e.payloadUniqBy,M$),h=zp(zp({},n),{},{payload:a});return H.isValidElement(e.content)?H.cloneElement(e.content,h):typeof e.content=="function"?H.createElement(e.content,h):H.createElement(fw,h)}function I$(e,t,n,a,h,g){var{layout:p,align:o,verticalAlign:P}=t,E,C;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&p==="vertical"?E={left:((a||0)-g.width)/2}:E=o==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(P==="middle"?C={top:((h||0)-g.height)/2}:C=P==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),zp(zp({},E),C)}function k$(e){var t=Ca();return H.useEffect(()=>{t(_$(e))},[t,e]),null}function D$(e){var t=Ca();return H.useEffect(()=>(t(SC(e)),()=>{t(SC({width:0,height:0}))}),[t,e]),null}function O$(e){var t=zB(),n=XN(),a=y$(),{width:h,height:g,wrapperStyle:p,portal:o}=e,[P,E]=Ak([t]),C=Mw(),I=Aw(),R=C-(a.left||0)-(a.right||0),z=i_.getWidthOrHeight(e.layout,g,h,R),B=o?p:zp(zp({position:"absolute",width:z?.width||h||"auto",height:z?.height||g||"auto"},I$(p,e,a,C,I,P)),p),U=o??n;if(U==null)return null;var Z=H.createElement("div",{className:"recharts-legend-wrapper",style:B,ref:E},H.createElement(k$,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),H.createElement(D$,{width:P.width,height:P.height}),H.createElement(A$,V1({},e,z,{margin:a,chartWidth:C,chartHeight:I,contextPayload:t})));return rA.createPortal(Z,U)}class i_ extends H.PureComponent{static getWidthOrHeight(t,n,a,h){return t==="vertical"&&Jt(n)?{height:n}:t==="horizontal"?{width:a||h}:null}render(){return H.createElement(O$,this.props)}}kw(i_,"displayName","Legend");kw(i_,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function U1(){return U1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},U1.apply(null,arguments)}function TC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function _x(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TC(Object(n),!0).forEach(function(a){R$(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function R$(e,t,n){return(t=z$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z$(e){var t=L$(e,"string");return typeof t=="symbol"?t:t+""}function L$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j$(e){return Array.isArray(e)&&zu(e[0])&&zu(e[1])?e.join(" ~ "):e}var N$=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:a={},labelStyle:h={},payload:g,formatter:p,itemSorter:o,wrapperClassName:P,labelClassName:E,label:C,labelFormatter:I,accessibilityLayer:R=!1}=e,z=()=>{if(g&&g.length){var be={padding:0,margin:0},Ae=(o?Hv(g,o):g).map((Ne,Qe)=>{if(Ne.type==="none")return null;var ht=Ne.formatter||p||j$,{value:Et,name:vt}=Ne,It=Et,Ft=vt;if(ht){var er=ht(Et,vt,Ne,Qe,g);if(Array.isArray(er))[It,Ft]=er;else if(er!=null)It=er;else return null}var lr=_x({display:"block",paddingTop:4,paddingBottom:4,color:Ne.color||"#000"},a);return H.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Qe),style:lr},zu(Ft)?H.createElement("span",{className:"recharts-tooltip-item-name"},Ft):null,zu(Ft)?H.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,H.createElement("span",{className:"recharts-tooltip-item-value"},It),H.createElement("span",{className:"recharts-tooltip-item-unit"},Ne.unit||""))});return H.createElement("ul",{className:"recharts-tooltip-item-list",style:be},Ae)}return null},B=_x({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),U=_x({margin:0},h),Z=!di(C),Q=Z?C:"",le=gn("recharts-default-tooltip",P),se=gn("recharts-tooltip-label",E);Z&&I&&g!==void 0&&g!==null&&(Q=I(C,g));var Ce=R?{role:"status","aria-live":"assertive"}:{};return H.createElement("div",U1({className:le,style:B},Ce),H.createElement("p",{className:se,style:U},H.isValidElement(Q)?Q:"".concat(Q)),z())},$m="recharts-tooltip-wrapper",F$={visibility:"hidden"};function B$(e){var{coordinate:t,translateX:n,translateY:a}=e;return gn($m,{["".concat($m,"-right")]:Jt(n)&&t&&Jt(t.x)&&n>=t.x,["".concat($m,"-left")]:Jt(n)&&t&&Jt(t.x)&&n<t.x,["".concat($m,"-bottom")]:Jt(a)&&t&&Jt(t.y)&&a>=t.y,["".concat($m,"-top")]:Jt(a)&&t&&Jt(t.y)&&a<t.y})}function CC(e){var{allowEscapeViewBox:t,coordinate:n,key:a,offsetTopLeft:h,position:g,reverseDirection:p,tooltipDimension:o,viewBox:P,viewBoxDimension:E}=e;if(g&&Jt(g[a]))return g[a];var C=n[a]-o-(h>0?h:0),I=n[a]+h;if(t[a])return p[a]?C:I;var R=P[a];if(R==null)return 0;if(p[a]){var z=C,B=R;return z<B?Math.max(I,R):Math.max(C,R)}if(E==null)return 0;var U=I+o,Z=R+E;return U>Z?Math.max(C,R):Math.max(I,R)}function $$(e){var{translateX:t,translateY:n,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function V$(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:a,position:h,reverseDirection:g,tooltipBox:p,useTranslate3d:o,viewBox:P}=e,E,C,I;return p.height>0&&p.width>0&&n?(C=CC({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:a,position:h,reverseDirection:g,tooltipDimension:p.width,viewBox:P,viewBoxDimension:P.width}),I=CC({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:a,position:h,reverseDirection:g,tooltipDimension:p.height,viewBox:P,viewBoxDimension:P.height}),E=$$({translateX:C,translateY:I,useTranslate3d:o})):E=F$,{cssProperties:E,cssClasses:B$({translateX:C,translateY:I,coordinate:n})}}function EC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function ky(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EC(Object(n),!0).forEach(function(a){G1(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function G1(e,t,n){return(t=U$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U$(e){var t=G$(e,"string");return typeof t=="symbol"?t:t+""}function G$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class q$ extends H.PureComponent{constructor(){super(...arguments),G1(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),G1(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,a,h,g;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&n!==void 0?n:0,y:(h=(g=this.props.coordinate)===null||g===void 0?void 0:g.y)!==null&&h!==void 0?h:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:a,animationEasing:h,children:g,coordinate:p,hasPayload:o,isAnimationActive:P,offset:E,position:C,reverseDirection:I,useTranslate3d:R,viewBox:z,wrapperStyle:B,lastBoundingBox:U,innerRef:Z,hasPortalFromProps:Q}=this.props,{cssClasses:le,cssProperties:se}=V$({allowEscapeViewBox:n,coordinate:p,offsetTopLeft:E,position:C,reverseDirection:I,tooltipBox:{height:U.height,width:U.width},useTranslate3d:R,viewBox:z}),Ce=Q?{}:ky(ky({transition:P&&t?"transform ".concat(a,"ms ").concat(h):void 0},se),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),be=ky(ky({},Ce),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},B);return H.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:le,style:be,ref:Z},g)}}var W$=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Og={isSsr:W$()},s3=()=>or(e=>e.rootProps.accessibilityLayer);function Nl(e){return Number.isFinite(e)}function gv(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function q1(){return q1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},q1.apply(null,arguments)}function MC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function AC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MC(Object(n),!0).forEach(function(a){Z$(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Z$(e,t,n){return(t=H$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H$(e){var t=K$(e,"string");return typeof t=="symbol"?t:t+""}function K$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IC={curveBasisClosed:mF,curveBasisOpen:gF,curveBasis:pF,curveBumpX:eF,curveBumpY:tF,curveLinearClosed:yF,curveLinear:Wv,curveMonotoneX:vF,curveMonotoneY:_F,curveNatural:xF,curveStep:bF,curveStepAfter:SF,curveStepBefore:wF},Dy=e=>Nl(e.x)&&Nl(e.y),Vm=e=>e.x,Um=e=>e.y,X$=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(kg(e));return(n==="curveMonotone"||n==="curveBump")&&t?IC["".concat(n).concat(t==="vertical"?"Y":"X")]:IC[n]||Wv},Y$=e=>{var{type:t="linear",points:n=[],baseLine:a,layout:h,connectNulls:g=!1}=e,p=X$(t,h),o=g?n.filter(Dy):n,P;if(Array.isArray(a)){var E=g?a.filter(I=>Dy(I)):a,C=o.map((I,R)=>AC(AC({},I),{},{base:E[R]}));return h==="vertical"?P=Cy().y(Um).x1(Vm).x0(I=>I.base.x):P=Cy().x(Vm).y1(Um).y0(I=>I.base.y),P.defined(Dy).curve(p),P(C)}return h==="vertical"&&Jt(a)?P=Cy().y(Um).x1(Vm).x0(a):Jt(a)?P=Cy().x(Vm).y1(Um).y0(a):P=ak().x(Vm).y(Um),P.defined(Dy).curve(p),P(o)},l3=e=>{var{className:t,points:n,path:a,pathRef:h}=e;if((!n||!n.length)&&!a)return null;var g=n&&n.length?Y$(e):a;return H.createElement("path",q1({},Sn(e,!1),sw(e),{className:gn("recharts-curve",t),d:g===null?void 0:g,ref:h}))},Q$=["x","y","top","left","width","height","className"];function W1(){return W1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},W1.apply(null,arguments)}function kC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function J$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kC(Object(n),!0).forEach(function(a){eV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function eV(e,t,n){return(t=tV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tV(e){var t=rV(e,"string");return typeof t=="symbol"?t:t+""}function rV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nV(e,t){if(e==null)return{};var n,a,h=iV(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)n=g[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(h[n]=e[n])}return h}function iV(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var aV=(e,t,n,a,h,g)=>"M".concat(e,",").concat(h,"v").concat(a,"M").concat(g,",").concat(t,"h").concat(n),oV=e=>{var{x:t=0,y:n=0,top:a=0,left:h=0,width:g=0,height:p=0,className:o}=e,P=nV(e,Q$),E=J$({x:t,y:n,top:a,left:h,width:g,height:p},P);return!Jt(t)||!Jt(n)||!Jt(g)||!Jt(p)||!Jt(a)||!Jt(h)?null:H.createElement("path",W1({},Sn(E,!0),{className:gn("recharts-cross",o),d:aV(t,n,g,p,a,h)}))};function sV(e,t,n,a){var h=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-h:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-h,width:e==="horizontal"?a:n.width-1,height:e==="horizontal"?n.height-1:a}}function DC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function lV(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DC(Object(n),!0).forEach(function(a){uV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function uV(e,t,n){return(t=cV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cV(e){var t=hV(e,"string");return typeof t=="symbol"?t:t+""}function hV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _f(e,t){var n=lV({},e),a=t,h=Object.keys(t),g=h.reduce((p,o)=>(p[o]===void 0&&a[o]!==void 0&&(p[o]=a[o]),p),n);return g}var xx={},bx={},wx={},OC;function dV(){return OC||(OC=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(!n||typeof n!="object")return!1;const a=Object.getPrototypeOf(n);return a===null||a===Object.prototype||Object.getPrototypeOf(a)===null?Object.prototype.toString.call(n)==="[object Object]":!1}e.isPlainObject=t}(wx)),wx}var RC;function fV(){return RC||(RC=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dV(),n=bk(),a=yw(),h=vw(),g=mw();function p(E,C,I){return o(E,C,void 0,void 0,void 0,void 0,I)}function o(E,C,I,R,z,B,U){const Z=U(E,C,I,R,z,B);if(Z!==void 0)return Z;if(typeof E==typeof C)switch(typeof E){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return E===C;case"number":return E===C||Object.is(E,C);case"function":return E===C;case"object":return P(E,C,B,U)}return P(E,C,B,U)}function P(E,C,I,R){if(Object.is(E,C))return!0;let z=a.getTag(E),B=a.getTag(C);if(z===h.argumentsTag&&(z=h.objectTag),B===h.argumentsTag&&(B=h.objectTag),z!==B)return!1;switch(z){case h.stringTag:return E.toString()===C.toString();case h.numberTag:{const Q=E.valueOf(),le=C.valueOf();return g.eq(Q,le)}case h.booleanTag:case h.dateTag:case h.symbolTag:return Object.is(E.valueOf(),C.valueOf());case h.regexpTag:return E.source===C.source&&E.flags===C.flags;case h.functionTag:return E===C}I=I??new Map;const U=I.get(E),Z=I.get(C);if(U!=null&&Z!=null)return U===C;I.set(E,C),I.set(C,E);try{switch(z){case h.mapTag:{if(E.size!==C.size)return!1;for(const[Q,le]of E.entries())if(!C.has(Q)||!o(le,C.get(Q),Q,E,C,I,R))return!1;return!0}case h.setTag:{if(E.size!==C.size)return!1;const Q=Array.from(E.values()),le=Array.from(C.values());for(let se=0;se<Q.length;se++){const Ce=Q[se],be=le.findIndex(Ae=>o(Ce,Ae,void 0,E,C,I,R));if(be===-1)return!1;le.splice(be,1)}return!0}case h.arrayTag:case h.uint8ArrayTag:case h.uint8ClampedArrayTag:case h.uint16ArrayTag:case h.uint32ArrayTag:case h.bigUint64ArrayTag:case h.int8ArrayTag:case h.int16ArrayTag:case h.int32ArrayTag:case h.bigInt64ArrayTag:case h.float32ArrayTag:case h.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(E)!==Buffer.isBuffer(C)||E.length!==C.length)return!1;for(let Q=0;Q<E.length;Q++)if(!o(E[Q],C[Q],Q,E,C,I,R))return!1;return!0}case h.arrayBufferTag:return E.byteLength!==C.byteLength?!1:P(new Uint8Array(E),new Uint8Array(C),I,R);case h.dataViewTag:return E.byteLength!==C.byteLength||E.byteOffset!==C.byteOffset?!1:P(new Uint8Array(E),new Uint8Array(C),I,R);case h.errorTag:return E.name===C.name&&E.message===C.message;case h.objectTag:{if(!(P(E.constructor,C.constructor,I,R)||t.isPlainObject(E)&&t.isPlainObject(C)))return!1;const le=[...Object.keys(E),...n.getSymbols(E)],se=[...Object.keys(C),...n.getSymbols(C)];if(le.length!==se.length)return!1;for(let Ce=0;Ce<le.length;Ce++){const be=le[Ce],Ae=E[be];if(!Object.hasOwn(C,be))return!1;const Ne=C[be];if(!o(Ae,Ne,be,E,C,I,R))return!1}return!0}default:return!1}}finally{I.delete(E),I.delete(C)}}e.isEqualWith=p}(bx)),bx}var Sx={},zC;function pV(){return zC||(zC=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(Sx)),Sx}var LC;function mV(){return LC||(LC=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fV(),n=pV();function a(h,g){return t.isEqualWith(h,g,n.noop)}e.isEqual=a}(xx)),xx}var Px,jC;function gV(){return jC||(jC=1,Px=mV().isEqual),Px}var yV=gV();const vV=Fl(yV);function _V(e){var t={},n=()=>null,a=!1,h=null,g=p=>{if(!a){if(Array.isArray(p)){if(!p.length)return;var o=p,[P,...E]=o;if(typeof P=="number"){h=e.setTimeout(g.bind(null,E),P);return}g(P),h=e.setTimeout(g.bind(null,E));return}typeof p=="object"&&(t=p,n(t)),typeof p=="function"&&p()}};return{stop:()=>{a=!0},start:p=>{a=!1,h&&(h(),h=null),g(p)},subscribe:p=>(n=p,()=>{n=()=>null}),getTimeoutController:()=>e}}var yv=1e-4,u3=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],c3=(e,t)=>e.map((n,a)=>n*t**a).reduce((n,a)=>n+a),NC=(e,t)=>n=>{var a=u3(e,t);return c3(a,n)},xV=(e,t)=>n=>{var a=u3(e,t),h=[...a.map((g,p)=>g*p).slice(1),0];return c3(h,n)},FC=function(){for(var t,n,a,h,g=arguments.length,p=new Array(g),o=0;o<g;o++)p[o]=arguments[o];if(p.length===1)switch(p[0]){case"linear":[t,a,n,h]=[0,0,1,1];break;case"ease":[t,a,n,h]=[.25,.1,.25,1];break;case"ease-in":[t,a,n,h]=[.42,0,1,1];break;case"ease-out":[t,a,n,h]=[.42,0,.58,1];break;case"ease-in-out":[t,a,n,h]=[0,0,.58,1];break;default:{var P=p[0].split("(");P[0]==="cubic-bezier"&&P[1].split(")")[0].split(",").length===4&&([t,a,n,h]=P[1].split(")")[0].split(",").map(B=>parseFloat(B)))}}else p.length===4&&([t,a,n,h]=p);var E=NC(t,n),C=NC(a,h),I=xV(t,n),R=B=>B>1?1:B<0?0:B,z=B=>{for(var U=B>1?1:B,Z=U,Q=0;Q<8;++Q){var le=E(Z)-U,se=I(Z);if(Math.abs(le-U)<yv||se<yv)return C(Z);Z=R(Z-le/se)}return C(Z)};return z.isStepper=!1,z},bV=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:a=8,dt:h=17}=t,g=(p,o,P)=>{var E=-(p-o)*n,C=P*a,I=P+(E-C)*h/1e3,R=P*h/1e3+p;return Math.abs(R-o)<yv&&Math.abs(I)<yv?[o,0]:[R,I]};return g.isStepper=!0,g.dt=h,g},wV=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return FC(e);case"spring":return bV();default:if(e.split("(")[0]==="cubic-bezier")return FC(e)}return typeof e=="function"?e:null};function BC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function $C(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BC(Object(n),!0).forEach(function(a){SV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function SV(e,t,n){return(t=PV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PV(e){var t=TV(e,"string");return typeof t=="symbol"?t:t+""}function TV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CV=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),EV=(e,t,n)=>e.map(a=>"".concat(CV(a)," ").concat(t,"ms ").concat(n)).join(","),MV=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,a)=>n.filter(h=>a.includes(h))),mg=(e,t)=>Object.keys(t).reduce((n,a)=>$C($C({},n),{},{[a]:e(a,t[a])}),{});function VC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function Pa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VC(Object(n),!0).forEach(function(a){AV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function AV(e,t,n){return(t=IV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IV(e){var t=kV(e,"string");return typeof t=="symbol"?t:t+""}function kV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vv=(e,t,n)=>e+(t-e)*n,Z1=e=>{var{from:t,to:n}=e;return t!==n},h3=(e,t,n)=>{var a=mg((h,g)=>{if(Z1(g)){var[p,o]=e(g.from,g.to,g.velocity);return Pa(Pa({},g),{},{from:p,velocity:o})}return g},t);return n<1?mg((h,g)=>Z1(g)?Pa(Pa({},g),{},{velocity:vv(g.velocity,a[h].velocity,n),from:vv(g.from,a[h].from,n)}):g,t):h3(e,a,n-1)};function DV(e,t,n,a,h,g){var p,o=a.reduce((R,z)=>Pa(Pa({},R),{},{[z]:{from:e[z],velocity:0,to:t[z]}}),{}),P=()=>mg((R,z)=>z.from,o),E=()=>!Object.values(o).filter(Z1).length,C=null,I=R=>{p||(p=R);var z=R-p,B=z/n.dt;o=h3(n,o,B),h(Pa(Pa(Pa({},e),t),P())),p=R,E()||(C=g.setTimeout(I))};return()=>(C=g.setTimeout(I),()=>{C()})}function OV(e,t,n,a,h,g,p){var o=null,P=h.reduce((I,R)=>Pa(Pa({},I),{},{[R]:[e[R],t[R]]}),{}),E,C=I=>{E||(E=I);var R=(I-E)/a,z=mg((U,Z)=>vv(...Z,n(R)),P);if(g(Pa(Pa(Pa({},e),t),z)),R<1)o=p.setTimeout(C);else{var B=mg((U,Z)=>vv(...Z,n(1)),P);g(Pa(Pa(Pa({},e),t),B))}};return()=>(o=p.setTimeout(C),()=>{o()})}const RV=(e,t,n,a,h,g)=>{var p=MV(e,t);return n.isStepper===!0?DV(e,t,n,p,h,g):OV(e,t,n,a,p,h,g)};class zV{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),h=null,g=p=>{p-a>=n?t(p):typeof requestAnimationFrame=="function"&&(h=requestAnimationFrame(g))};return h=requestAnimationFrame(g),()=>{cancelAnimationFrame(h)}}}var LV=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function H1(){return H1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},H1.apply(null,arguments)}function jV(e,t){if(e==null)return{};var n,a,h=NV(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)n=g[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(h[n]=e[n])}return h}function NV(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function UC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function $h(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UC(Object(n),!0).forEach(function(a){rf(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function rf(e,t,n){return(t=FV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FV(e){var t=BV(e,"string");return typeof t=="symbol"?t:t+""}function BV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $V(){return _V(new zV)}class Dw extends H.PureComponent{constructor(t,n){super(t,n),rf(this,"mounted",!1),rf(this,"manager",null),rf(this,"stopJSAnimation",null),rf(this,"unSubscribe",null);var{isActive:a,attributeName:h,from:g,to:p,children:o,duration:P,animationManager:E}=this.props;if(this.manager=E,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!a||P<=0){this.state={style:{}},typeof o=="function"&&(this.state={style:p});return}if(g){if(typeof o=="function"){this.state={style:g};return}this.state={style:h?{[h]:g}:g}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:n}=this.props;this.mounted=!0,!(!t||!n)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:n,canBegin:a,attributeName:h,shouldReAnimate:g,to:p,from:o}=this.props,{style:P}=this.state;if(a){if(!n){var E={style:h?{[h]:p}:p};this.state&&P&&(h&&P[h]!==p||!h&&P!==p)&&this.setState(E);return}if(!(vV(t.to,p)&&t.canBegin&&t.isActive)){var C=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var I=C||g?o:t.to;if(this.state&&P){var R={style:h?{[h]:I}:I};(h&&P[h]!==I||!h&&P!==I)&&this.setState(R)}this.runAnimation($h($h({},this.props),{},{from:I,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:n,to:a,duration:h,easing:g,begin:p,onAnimationEnd:o,onAnimationStart:P}=t,E=RV(n,a,wV(g),h,this.changeStyle,this.manager.getTimeoutController()),C=()=>{this.stopJSAnimation=E()};this.manager.start([P,p,C,h,o])}runAnimation(t){var{begin:n,duration:a,attributeName:h,to:g,easing:p,onAnimationStart:o,onAnimationEnd:P,children:E}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof p=="function"||typeof E=="function"||p==="spring"){this.runJSAnimation(t);return}var C=h?{[h]:g}:g,I=EV(Object.keys(C),a,p);this.manager.start([o,n,$h($h({},C),{},{transition:I}),a,P])}render(){var t=this.props,{children:n,begin:a,duration:h,attributeName:g,easing:p,isActive:o,from:P,to:E,canBegin:C,onAnimationEnd:I,shouldReAnimate:R,onAnimationReStart:z,animationManager:B}=t,U=jV(t,LV),Z=H.Children.count(n),Q=this.state.style;if(typeof n=="function")return n(Q);if(!o||Z===0||h<=0)return n;var le=se=>{var{style:Ce={},className:be}=se.props,Ae=H.cloneElement(se,$h($h({},U),{},{style:$h($h({},Ce),Q),className:be}));return Ae};return Z===1?le(H.Children.only(n)):H.createElement("div",null,H.Children.map(n,se=>le(se)))}}rf(Dw,"displayName","Animate");rf(Dw,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var VV=H.createContext(null);function _v(e){var t,n,a=H.useContext(VV);return H.createElement(Dw,H1({},e,{animationManager:(t=(n=e.animationManager)!==null&&n!==void 0?n:a)!==null&&t!==void 0?t:$V()}))}function xv(){return xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xv.apply(null,arguments)}var GC=(e,t,n,a,h)=>{var g=Math.min(Math.abs(n)/2,Math.abs(a)/2),p=a>=0?1:-1,o=n>=0?1:-1,P=a>=0&&n>=0||a<0&&n<0?1:0,E;if(g>0&&h instanceof Array){for(var C=[0,0,0,0],I=0,R=4;I<R;I++)C[I]=h[I]>g?g:h[I];E="M".concat(e,",").concat(t+p*C[0]),C[0]>0&&(E+="A ".concat(C[0],",").concat(C[0],",0,0,").concat(P,",").concat(e+o*C[0],",").concat(t)),E+="L ".concat(e+n-o*C[1],",").concat(t),C[1]>0&&(E+="A ".concat(C[1],",").concat(C[1],",0,0,").concat(P,`,
        `).concat(e+n,",").concat(t+p*C[1])),E+="L ".concat(e+n,",").concat(t+a-p*C[2]),C[2]>0&&(E+="A ".concat(C[2],",").concat(C[2],",0,0,").concat(P,`,
        `).concat(e+n-o*C[2],",").concat(t+a)),E+="L ".concat(e+o*C[3],",").concat(t+a),C[3]>0&&(E+="A ".concat(C[3],",").concat(C[3],",0,0,").concat(P,`,
        `).concat(e,",").concat(t+a-p*C[3])),E+="Z"}else if(g>0&&h===+h&&h>0){var z=Math.min(g,h);E="M ".concat(e,",").concat(t+p*z,`
            A `).concat(z,",").concat(z,",0,0,").concat(P,",").concat(e+o*z,",").concat(t,`
            L `).concat(e+n-o*z,",").concat(t,`
            A `).concat(z,",").concat(z,",0,0,").concat(P,",").concat(e+n,",").concat(t+p*z,`
            L `).concat(e+n,",").concat(t+a-p*z,`
            A `).concat(z,",").concat(z,",0,0,").concat(P,",").concat(e+n-o*z,",").concat(t+a,`
            L `).concat(e+o*z,",").concat(t+a,`
            A `).concat(z,",").concat(z,",0,0,").concat(P,",").concat(e,",").concat(t+a-p*z," Z")}else E="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return E},UV={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},GV=e=>{var t=_f(e,UV),n=H.useRef(null),[a,h]=H.useState(-1);H.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Q=n.current.getTotalLength();Q&&h(Q)}catch{}},[]);var{x:g,y:p,width:o,height:P,radius:E,className:C}=t,{animationEasing:I,animationDuration:R,animationBegin:z,isAnimationActive:B,isUpdateAnimationActive:U}=t;if(g!==+g||p!==+p||o!==+o||P!==+P||o===0||P===0)return null;var Z=gn("recharts-rectangle",C);return U?H.createElement(_v,{canBegin:a>0,from:{width:o,height:P,x:g,y:p},to:{width:o,height:P,x:g,y:p},duration:R,animationEasing:I,isActive:U},Q=>{var{width:le,height:se,x:Ce,y:be}=Q;return H.createElement(_v,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:z,duration:R,isActive:B,easing:I},H.createElement("path",xv({},Sn(t,!0),{className:Z,d:GC(Ce,be,le,se,E),ref:n})))}):H.createElement("path",xv({},Sn(t,!0),{className:Z,d:GC(g,p,o,P,E)}))};function d3(e){var{cx:t,cy:n,radius:a,startAngle:h,endAngle:g}=e,p=Ta(t,n,a,h),o=Ta(t,n,a,g);return{points:[p,o],cx:t,cy:n,radius:a,startAngle:h,endAngle:g}}function K1(){return K1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},K1.apply(null,arguments)}var qV=(e,t)=>{var n=qs(t-e),a=Math.min(Math.abs(t-e),359.999);return n*a},Oy=e=>{var{cx:t,cy:n,radius:a,angle:h,sign:g,isExternal:p,cornerRadius:o,cornerIsExternal:P}=e,E=o*(p?1:-1)+a,C=Math.asin(o/E)/mv,I=P?h:h+g*C,R=Ta(t,n,E,I),z=Ta(t,n,a,I),B=P?h-g*C:h,U=Ta(t,n,E*Math.cos(C*mv),B);return{center:R,circleTangency:z,lineTangency:U,theta:C}},f3=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:h,startAngle:g,endAngle:p}=e,o=qV(g,p),P=g+o,E=Ta(t,n,h,g),C=Ta(t,n,h,P),I="M ".concat(E.x,",").concat(E.y,`
    A `).concat(h,",").concat(h,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(g>P),`,
    `).concat(C.x,",").concat(C.y,`
  `);if(a>0){var R=Ta(t,n,a,g),z=Ta(t,n,a,P);I+="L ".concat(z.x,",").concat(z.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(g<=P),`,
            `).concat(R.x,",").concat(R.y," Z")}else I+="L ".concat(t,",").concat(n," Z");return I},WV=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:h,cornerRadius:g,forceCornerRadius:p,cornerIsExternal:o,startAngle:P,endAngle:E}=e,C=qs(E-P),{circleTangency:I,lineTangency:R,theta:z}=Oy({cx:t,cy:n,radius:h,angle:P,sign:C,cornerRadius:g,cornerIsExternal:o}),{circleTangency:B,lineTangency:U,theta:Z}=Oy({cx:t,cy:n,radius:h,angle:E,sign:-C,cornerRadius:g,cornerIsExternal:o}),Q=o?Math.abs(P-E):Math.abs(P-E)-z-Z;if(Q<0)return p?"M ".concat(R.x,",").concat(R.y,`
        a`).concat(g,",").concat(g,",0,0,1,").concat(g*2,`,0
        a`).concat(g,",").concat(g,",0,0,1,").concat(-g*2,`,0
      `):f3({cx:t,cy:n,innerRadius:a,outerRadius:h,startAngle:P,endAngle:E});var le="M ".concat(R.x,",").concat(R.y,`
    A`).concat(g,",").concat(g,",0,0,").concat(+(C<0),",").concat(I.x,",").concat(I.y,`
    A`).concat(h,",").concat(h,",0,").concat(+(Q>180),",").concat(+(C<0),",").concat(B.x,",").concat(B.y,`
    A`).concat(g,",").concat(g,",0,0,").concat(+(C<0),",").concat(U.x,",").concat(U.y,`
  `);if(a>0){var{circleTangency:se,lineTangency:Ce,theta:be}=Oy({cx:t,cy:n,radius:a,angle:P,sign:C,isExternal:!0,cornerRadius:g,cornerIsExternal:o}),{circleTangency:Ae,lineTangency:Ne,theta:Qe}=Oy({cx:t,cy:n,radius:a,angle:E,sign:-C,isExternal:!0,cornerRadius:g,cornerIsExternal:o}),ht=o?Math.abs(P-E):Math.abs(P-E)-be-Qe;if(ht<0&&g===0)return"".concat(le,"L").concat(t,",").concat(n,"Z");le+="L".concat(Ne.x,",").concat(Ne.y,`
      A`).concat(g,",").concat(g,",0,0,").concat(+(C<0),",").concat(Ae.x,",").concat(Ae.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(ht>180),",").concat(+(C>0),",").concat(se.x,",").concat(se.y,`
      A`).concat(g,",").concat(g,",0,0,").concat(+(C<0),",").concat(Ce.x,",").concat(Ce.y,"Z")}else le+="L".concat(t,",").concat(n,"Z");return le},ZV={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},HV=e=>{var t=_f(e,ZV),{cx:n,cy:a,innerRadius:h,outerRadius:g,cornerRadius:p,forceCornerRadius:o,cornerIsExternal:P,startAngle:E,endAngle:C,className:I}=t;if(g<h||E===C)return null;var R=gn("recharts-sector",I),z=g-h,B=Kh(p,z,0,!0),U;return B>0&&Math.abs(E-C)<360?U=WV({cx:n,cy:a,innerRadius:h,outerRadius:g,cornerRadius:Math.min(B,z/2),forceCornerRadius:o,cornerIsExternal:P,startAngle:E,endAngle:C}):U=f3({cx:n,cy:a,innerRadius:h,outerRadius:g,startAngle:E,endAngle:C}),H.createElement("path",K1({},Sn(t,!0),{className:R,d:U}))};function KV(e,t,n){var a,h,g,p;if(e==="horizontal")a=t.x,g=a,h=n.top,p=n.top+n.height;else if(e==="vertical")h=t.y,p=h,a=n.left,g=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:P,innerRadius:E,outerRadius:C,angle:I}=t,R=Ta(o,P,E,I),z=Ta(o,P,C,I);a=R.x,h=R.y,g=z.x,p=z.y}else return d3(t);return[{x:a,y:h},{x:g,y:p}]}var Tx={},Cx={},Ex={},qC;function XV(){return qC||(qC=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ck();function n(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=n}(Ex)),Ex}var WC;function YV(){return WC||(WC=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XV();function n(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=n}(Cx)),Cx}var ZC;function QV(){return ZC||(ZC=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ek(),n=YV();function a(h,g,p){p&&typeof p!="number"&&t.isIterateeCall(h,g,p)&&(g=p=void 0),h=n.toFinite(h),g===void 0?(g=h,h=0):g=n.toFinite(g),p=p===void 0?h<g?1:-1:n.toFinite(p);const o=Math.max(Math.ceil((g-h)/(p||1)),0),P=new Array(o);for(let E=0;E<o;E++)P[E]=h,h+=p;return P}e.range=a}(Tx)),Tx}var Mx,HC;function JV(){return HC||(HC=1,Mx=QV().range),Mx}var e7=JV();const p3=Fl(e7);function Wh(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function t7(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ow(e){let t,n,a;e.length!==2?(t=Wh,n=(o,P)=>Wh(e(o),P),a=(o,P)=>e(o)-P):(t=e===Wh||e===t7?e:r7,n=e,a=e);function h(o,P,E=0,C=o.length){if(E<C){if(t(P,P)!==0)return C;do{const I=E+C>>>1;n(o[I],P)<0?E=I+1:C=I}while(E<C)}return E}function g(o,P,E=0,C=o.length){if(E<C){if(t(P,P)!==0)return C;do{const I=E+C>>>1;n(o[I],P)<=0?E=I+1:C=I}while(E<C)}return E}function p(o,P,E=0,C=o.length){const I=h(o,P,E,C-1);return I>E&&a(o[I-1],P)>-a(o[I],P)?I-1:I}return{left:h,center:p,right:g}}function r7(){return 0}function m3(e){return e===null?NaN:+e}function*n7(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const i7=Ow(Wh),Rg=i7.right;Ow(m3).center;class KC extends Map{constructor(t,n=s7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,h]of t)this.set(a,h)}get(t){return super.get(XC(this,t))}has(t){return super.has(XC(this,t))}set(t,n){return super.set(a7(this,t),n)}delete(t){return super.delete(o7(this,t))}}function XC({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function a7({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function o7({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function s7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function l7(e=Wh){if(e===Wh)return g3;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const a=e(t,n);return a||a===0?a:(e(n,n)===0)-(e(t,t)===0)}}function g3(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const u7=Math.sqrt(50),c7=Math.sqrt(10),h7=Math.sqrt(2);function bv(e,t,n){const a=(t-e)/Math.max(0,n),h=Math.floor(Math.log10(a)),g=a/Math.pow(10,h),p=g>=u7?10:g>=c7?5:g>=h7?2:1;let o,P,E;return h<0?(E=Math.pow(10,-h)/p,o=Math.round(e*E),P=Math.round(t*E),o/E<e&&++o,P/E>t&&--P,E=-E):(E=Math.pow(10,h)*p,o=Math.round(e/E),P=Math.round(t/E),o*E<e&&++o,P*E>t&&--P),P<o&&.5<=n&&n<2?bv(e,t,n*2):[o,P,E]}function X1(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[h,g,p]=a?bv(t,e,n):bv(e,t,n);if(!(g>=h))return[];const o=g-h+1,P=new Array(o);if(a)if(p<0)for(let E=0;E<o;++E)P[E]=(g-E)/-p;else for(let E=0;E<o;++E)P[E]=(g-E)*p;else if(p<0)for(let E=0;E<o;++E)P[E]=(h+E)/-p;else for(let E=0;E<o;++E)P[E]=(h+E)*p;return P}function Y1(e,t,n){return t=+t,e=+e,n=+n,bv(e,t,n)[2]}function Q1(e,t,n){t=+t,e=+e,n=+n;const a=t<e,h=a?Y1(t,e,n):Y1(e,t,n);return(a?-1:1)*(h<0?1/-h:h)}function YC(e,t){let n;for(const a of e)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function QC(e,t){let n;for(const a of e)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function y3(e,t,n=0,a=1/0,h){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=t&&t<=a))return e;for(h=h===void 0?g3:l7(h);a>n;){if(a-n>600){const P=a-n+1,E=t-n+1,C=Math.log(P),I=.5*Math.exp(2*C/3),R=.5*Math.sqrt(C*I*(P-I)/P)*(E-P/2<0?-1:1),z=Math.max(n,Math.floor(t-E*I/P+R)),B=Math.min(a,Math.floor(t+(P-E)*I/P+R));y3(e,t,z,B,h)}const g=e[t];let p=n,o=a;for(Gm(e,n,t),h(e[a],g)>0&&Gm(e,n,a);p<o;){for(Gm(e,p,o),++p,--o;h(e[p],g)<0;)++p;for(;h(e[o],g)>0;)--o}h(e[n],g)===0?Gm(e,n,o):(++o,Gm(e,o,a)),o<=t&&(n=o+1),t<=o&&(a=o-1)}return e}function Gm(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function d7(e,t,n){if(e=Float64Array.from(n7(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return QC(e);if(t>=1)return YC(e);var a,h=(a-1)*t,g=Math.floor(h),p=YC(y3(e,g).subarray(0,g+1)),o=QC(e.subarray(g+1));return p+(o-p)*(h-g)}}function f7(e,t,n=m3){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+n(e[0],0,e);if(t>=1)return+n(e[a-1],a-1,e);var a,h=(a-1)*t,g=Math.floor(h),p=+n(e[g],g,e),o=+n(e[g+1],g+1,e);return p+(o-p)*(h-g)}}function p7(e,t,n){e=+e,t=+t,n=(h=arguments.length)<2?(t=e,e=0,1):h<3?1:+n;for(var a=-1,h=Math.max(0,Math.ceil((t-e)/n))|0,g=new Array(h);++a<h;)g[a]=e+a*n;return g}function Qs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function rh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const J1=Symbol("implicit");function Rw(){var e=new KC,t=[],n=[],a=J1;function h(g){let p=e.get(g);if(p===void 0){if(a!==J1)return a;e.set(g,p=t.push(g)-1)}return n[p%n.length]}return h.domain=function(g){if(!arguments.length)return t.slice();t=[],e=new KC;for(const p of g)e.has(p)||e.set(p,t.push(p)-1);return h},h.range=function(g){return arguments.length?(n=Array.from(g),h):n.slice()},h.unknown=function(g){return arguments.length?(a=g,h):a},h.copy=function(){return Rw(t,n).unknown(a)},Qs.apply(h,arguments),h}function zw(){var e=Rw().unknown(void 0),t=e.domain,n=e.range,a=0,h=1,g,p,o=!1,P=0,E=0,C=.5;delete e.unknown;function I(){var R=t().length,z=h<a,B=z?h:a,U=z?a:h;g=(U-B)/Math.max(1,R-P+E*2),o&&(g=Math.floor(g)),B+=(U-B-g*(R-P))*C,p=g*(1-P),o&&(B=Math.round(B),p=Math.round(p));var Z=p7(R).map(function(Q){return B+g*Q});return n(z?Z.reverse():Z)}return e.domain=function(R){return arguments.length?(t(R),I()):t()},e.range=function(R){return arguments.length?([a,h]=R,a=+a,h=+h,I()):[a,h]},e.rangeRound=function(R){return[a,h]=R,a=+a,h=+h,o=!0,I()},e.bandwidth=function(){return p},e.step=function(){return g},e.round=function(R){return arguments.length?(o=!!R,I()):o},e.padding=function(R){return arguments.length?(P=Math.min(1,E=+R),I()):P},e.paddingInner=function(R){return arguments.length?(P=Math.min(1,R),I()):P},e.paddingOuter=function(R){return arguments.length?(E=+R,I()):E},e.align=function(R){return arguments.length?(C=Math.max(0,Math.min(1,R)),I()):C},e.copy=function(){return zw(t(),[a,h]).round(o).paddingInner(P).paddingOuter(E).align(C)},Qs.apply(I(),arguments)}function v3(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return v3(t())},e}function m7(){return v3(zw.apply(null,arguments).paddingInner(1))}function Lw(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _3(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function zg(){}var gg=.7,wv=1/gg,Ip="\\s*([+-]?\\d+)\\s*",yg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ru="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",g7=/^#([0-9a-f]{3,8})$/,y7=new RegExp(`^rgb\\(${Ip},${Ip},${Ip}\\)$`),v7=new RegExp(`^rgb\\(${Ru},${Ru},${Ru}\\)$`),_7=new RegExp(`^rgba\\(${Ip},${Ip},${Ip},${yg}\\)$`),x7=new RegExp(`^rgba\\(${Ru},${Ru},${Ru},${yg}\\)$`),b7=new RegExp(`^hsl\\(${yg},${Ru},${Ru}\\)$`),w7=new RegExp(`^hsla\\(${yg},${Ru},${Ru},${yg}\\)$`),JC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Lw(zg,vg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:eE,formatHex:eE,formatHex8:S7,formatHsl:P7,formatRgb:tE,toString:tE});function eE(){return this.rgb().formatHex()}function S7(){return this.rgb().formatHex8()}function P7(){return x3(this).formatHsl()}function tE(){return this.rgb().formatRgb()}function vg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=g7.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?rE(t):n===3?new Po(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ry(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ry(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=y7.exec(e))?new Po(t[1],t[2],t[3],1):(t=v7.exec(e))?new Po(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_7.exec(e))?Ry(t[1],t[2],t[3],t[4]):(t=x7.exec(e))?Ry(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=b7.exec(e))?aE(t[1],t[2]/100,t[3]/100,1):(t=w7.exec(e))?aE(t[1],t[2]/100,t[3]/100,t[4]):JC.hasOwnProperty(e)?rE(JC[e]):e==="transparent"?new Po(NaN,NaN,NaN,0):null}function rE(e){return new Po(e>>16&255,e>>8&255,e&255,1)}function Ry(e,t,n,a){return a<=0&&(e=t=n=NaN),new Po(e,t,n,a)}function T7(e){return e instanceof zg||(e=vg(e)),e?(e=e.rgb(),new Po(e.r,e.g,e.b,e.opacity)):new Po}function eb(e,t,n,a){return arguments.length===1?T7(e):new Po(e,t,n,a??1)}function Po(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}Lw(Po,eb,_3(zg,{brighter(e){return e=e==null?wv:Math.pow(wv,e),new Po(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?gg:Math.pow(gg,e),new Po(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Po(hf(this.r),hf(this.g),hf(this.b),Sv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nE,formatHex:nE,formatHex8:C7,formatRgb:iE,toString:iE}));function nE(){return`#${nf(this.r)}${nf(this.g)}${nf(this.b)}`}function C7(){return`#${nf(this.r)}${nf(this.g)}${nf(this.b)}${nf((isNaN(this.opacity)?1:this.opacity)*255)}`}function iE(){const e=Sv(this.opacity);return`${e===1?"rgb(":"rgba("}${hf(this.r)}, ${hf(this.g)}, ${hf(this.b)}${e===1?")":`, ${e})`}`}function Sv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function nf(e){return e=hf(e),(e<16?"0":"")+e.toString(16)}function aE(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ll(e,t,n,a)}function x3(e){if(e instanceof Ll)return new Ll(e.h,e.s,e.l,e.opacity);if(e instanceof zg||(e=vg(e)),!e)return new Ll;if(e instanceof Ll)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,h=Math.min(t,n,a),g=Math.max(t,n,a),p=NaN,o=g-h,P=(g+h)/2;return o?(t===g?p=(n-a)/o+(n<a)*6:n===g?p=(a-t)/o+2:p=(t-n)/o+4,o/=P<.5?g+h:2-g-h,p*=60):o=P>0&&P<1?0:p,new Ll(p,o,P,e.opacity)}function E7(e,t,n,a){return arguments.length===1?x3(e):new Ll(e,t,n,a??1)}function Ll(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}Lw(Ll,E7,_3(zg,{brighter(e){return e=e==null?wv:Math.pow(wv,e),new Ll(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gg:Math.pow(gg,e),new Ll(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,h=2*n-a;return new Po(Ax(e>=240?e-240:e+120,h,a),Ax(e,h,a),Ax(e<120?e+240:e-120,h,a),this.opacity)},clamp(){return new Ll(oE(this.h),zy(this.s),zy(this.l),Sv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Sv(this.opacity);return`${e===1?"hsl(":"hsla("}${oE(this.h)}, ${zy(this.s)*100}%, ${zy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function oE(e){return e=(e||0)%360,e<0?e+360:e}function zy(e){return Math.max(0,Math.min(1,e||0))}function Ax(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const jw=e=>()=>e;function M7(e,t){return function(n){return e+n*t}}function A7(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function I7(e){return(e=+e)==1?b3:function(t,n){return n-t?A7(t,n,e):jw(isNaN(t)?n:t)}}function b3(e,t){var n=t-e;return n?M7(e,n):jw(isNaN(e)?t:e)}const sE=function e(t){var n=I7(t);function a(h,g){var p=n((h=eb(h)).r,(g=eb(g)).r),o=n(h.g,g.g),P=n(h.b,g.b),E=b3(h.opacity,g.opacity);return function(C){return h.r=p(C),h.g=o(C),h.b=P(C),h.opacity=E(C),h+""}}return a.gamma=e,a}(1);function k7(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),h;return function(g){for(h=0;h<n;++h)a[h]=e[h]*(1-g)+t[h]*g;return a}}function D7(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function O7(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,h=new Array(a),g=new Array(n),p;for(p=0;p<a;++p)h[p]=Wp(e[p],t[p]);for(;p<n;++p)g[p]=t[p];return function(o){for(p=0;p<a;++p)g[p]=h[p](o);return g}}function R7(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function Pv(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function z7(e,t){var n={},a={},h;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(h in t)h in e?n[h]=Wp(e[h],t[h]):a[h]=t[h];return function(g){for(h in n)a[h]=n[h](g);return a}}var tb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ix=new RegExp(tb.source,"g");function L7(e){return function(){return e}}function j7(e){return function(t){return e(t)+""}}function N7(e,t){var n=tb.lastIndex=Ix.lastIndex=0,a,h,g,p=-1,o=[],P=[];for(e=e+"",t=t+"";(a=tb.exec(e))&&(h=Ix.exec(t));)(g=h.index)>n&&(g=t.slice(n,g),o[p]?o[p]+=g:o[++p]=g),(a=a[0])===(h=h[0])?o[p]?o[p]+=h:o[++p]=h:(o[++p]=null,P.push({i:p,x:Pv(a,h)})),n=Ix.lastIndex;return n<t.length&&(g=t.slice(n),o[p]?o[p]+=g:o[++p]=g),o.length<2?P[0]?j7(P[0].x):L7(t):(t=P.length,function(E){for(var C=0,I;C<t;++C)o[(I=P[C]).i]=I.x(E);return o.join("")})}function Wp(e,t){var n=typeof t,a;return t==null||n==="boolean"?jw(t):(n==="number"?Pv:n==="string"?(a=vg(t))?(t=a,sE):N7:t instanceof vg?sE:t instanceof Date?R7:D7(t)?k7:Array.isArray(t)?O7:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?z7:Pv)(e,t)}function Nw(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function F7(e,t){t===void 0&&(t=e,e=Wp);for(var n=0,a=t.length-1,h=t[0],g=new Array(a<0?0:a);n<a;)g[n]=e(h,h=t[++n]);return function(p){var o=Math.max(0,Math.min(a-1,Math.floor(p*=a)));return g[o](p-o)}}function B7(e){return function(){return e}}function Tv(e){return+e}var lE=[0,1];function ro(e){return e}function rb(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:B7(isNaN(t)?NaN:.5)}function $7(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function V7(e,t,n){var a=e[0],h=e[1],g=t[0],p=t[1];return h<a?(a=rb(h,a),g=n(p,g)):(a=rb(a,h),g=n(g,p)),function(o){return g(a(o))}}function U7(e,t,n){var a=Math.min(e.length,t.length)-1,h=new Array(a),g=new Array(a),p=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++p<a;)h[p]=rb(e[p],e[p+1]),g[p]=n(t[p],t[p+1]);return function(o){var P=Rg(e,o,1,a)-1;return g[P](h[P](o))}}function Lg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function a_(){var e=lE,t=lE,n=Wp,a,h,g,p=ro,o,P,E;function C(){var R=Math.min(e.length,t.length);return p!==ro&&(p=$7(e[0],e[R-1])),o=R>2?U7:V7,P=E=null,I}function I(R){return R==null||isNaN(R=+R)?g:(P||(P=o(e.map(a),t,n)))(a(p(R)))}return I.invert=function(R){return p(h((E||(E=o(t,e.map(a),Pv)))(R)))},I.domain=function(R){return arguments.length?(e=Array.from(R,Tv),C()):e.slice()},I.range=function(R){return arguments.length?(t=Array.from(R),C()):t.slice()},I.rangeRound=function(R){return t=Array.from(R),n=Nw,C()},I.clamp=function(R){return arguments.length?(p=R?!0:ro,C()):p!==ro},I.interpolate=function(R){return arguments.length?(n=R,C()):n},I.unknown=function(R){return arguments.length?(g=R,I):g},function(R,z){return a=R,h=z,C()}}function Fw(){return a_()(ro,ro)}function G7(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Cv(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function Lp(e){return e=Cv(Math.abs(e)),e?e[1]:NaN}function q7(e,t){return function(n,a){for(var h=n.length,g=[],p=0,o=e[0],P=0;h>0&&o>0&&(P+o+1>a&&(o=Math.max(1,a-P)),g.push(n.substring(h-=o,h+o)),!((P+=o+1)>a));)o=e[p=(p+1)%e.length];return g.reverse().join(t)}}function W7(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Z7=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _g(e){if(!(t=Z7.exec(e)))throw new Error("invalid format: "+e);var t;return new Bw({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}_g.prototype=Bw.prototype;function Bw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Bw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function H7(e){e:for(var t=e.length,n=1,a=-1,h;n<t;++n)switch(e[n]){case".":a=h=n;break;case"0":a===0&&(a=n),h=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(h+1):e}var w3;function K7(e,t){var n=Cv(e,t);if(!n)return e+"";var a=n[0],h=n[1],g=h-(w3=Math.max(-8,Math.min(8,Math.floor(h/3)))*3)+1,p=a.length;return g===p?a:g>p?a+new Array(g-p+1).join("0"):g>0?a.slice(0,g)+"."+a.slice(g):"0."+new Array(1-g).join("0")+Cv(e,Math.max(0,t+g-1))[0]}function uE(e,t){var n=Cv(e,t);if(!n)return e+"";var a=n[0],h=n[1];return h<0?"0."+new Array(-h).join("0")+a:a.length>h+1?a.slice(0,h+1)+"."+a.slice(h+1):a+new Array(h-a.length+2).join("0")}const cE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:G7,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>uE(e*100,t),r:uE,s:K7,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function hE(e){return e}var dE=Array.prototype.map,fE=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function X7(e){var t=e.grouping===void 0||e.thousands===void 0?hE:q7(dE.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",h=e.decimal===void 0?".":e.decimal+"",g=e.numerals===void 0?hE:W7(dE.call(e.numerals,String)),p=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",P=e.nan===void 0?"NaN":e.nan+"";function E(I){I=_g(I);var R=I.fill,z=I.align,B=I.sign,U=I.symbol,Z=I.zero,Q=I.width,le=I.comma,se=I.precision,Ce=I.trim,be=I.type;be==="n"?(le=!0,be="g"):cE[be]||(se===void 0&&(se=12),Ce=!0,be="g"),(Z||R==="0"&&z==="=")&&(Z=!0,R="0",z="=");var Ae=U==="$"?n:U==="#"&&/[boxX]/.test(be)?"0"+be.toLowerCase():"",Ne=U==="$"?a:/[%p]/.test(be)?p:"",Qe=cE[be],ht=/[defgprs%]/.test(be);se=se===void 0?6:/[gprs]/.test(be)?Math.max(1,Math.min(21,se)):Math.max(0,Math.min(20,se));function Et(vt){var It=Ae,Ft=Ne,er,lr,vr;if(be==="c")Ft=Qe(vt)+Ft,vt="";else{vt=+vt;var Mt=vt<0||1/vt<0;if(vt=isNaN(vt)?P:Qe(Math.abs(vt),se),Ce&&(vt=H7(vt)),Mt&&+vt==0&&B!=="+"&&(Mt=!1),It=(Mt?B==="("?B:o:B==="-"||B==="("?"":B)+It,Ft=(be==="s"?fE[8+w3/3]:"")+Ft+(Mt&&B==="("?")":""),ht){for(er=-1,lr=vt.length;++er<lr;)if(vr=vt.charCodeAt(er),48>vr||vr>57){Ft=(vr===46?h+vt.slice(er+1):vt.slice(er))+Ft,vt=vt.slice(0,er);break}}}le&&!Z&&(vt=t(vt,1/0));var ut=It.length+vt.length+Ft.length,Ct=ut<Q?new Array(Q-ut+1).join(R):"";switch(le&&Z&&(vt=t(Ct+vt,Ct.length?Q-Ft.length:1/0),Ct=""),z){case"<":vt=It+vt+Ft+Ct;break;case"=":vt=It+Ct+vt+Ft;break;case"^":vt=Ct.slice(0,ut=Ct.length>>1)+It+vt+Ft+Ct.slice(ut);break;default:vt=Ct+It+vt+Ft;break}return g(vt)}return Et.toString=function(){return I+""},Et}function C(I,R){var z=E((I=_g(I),I.type="f",I)),B=Math.max(-8,Math.min(8,Math.floor(Lp(R)/3)))*3,U=Math.pow(10,-B),Z=fE[8+B/3];return function(Q){return z(U*Q)+Z}}return{format:E,formatPrefix:C}}var Ly,$w,S3;Y7({thousands:",",grouping:[3],currency:["$",""]});function Y7(e){return Ly=X7(e),$w=Ly.format,S3=Ly.formatPrefix,Ly}function Q7(e){return Math.max(0,-Lp(Math.abs(e)))}function J7(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lp(t)/3)))*3-Lp(Math.abs(e)))}function e9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Lp(t)-Lp(e))+1}function P3(e,t,n,a){var h=Q1(e,t,n),g;switch(a=_g(a??",f"),a.type){case"s":{var p=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(g=J7(h,p))&&(a.precision=g),S3(a,p)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(g=e9(h,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=g-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(g=Q7(h))&&(a.precision=g-(a.type==="%")*2);break}}return $w(a)}function ed(e){var t=e.domain;return e.ticks=function(n){var a=t();return X1(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var h=t();return P3(h[0],h[h.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=t(),h=0,g=a.length-1,p=a[h],o=a[g],P,E,C=10;for(o<p&&(E=p,p=o,o=E,E=h,h=g,g=E);C-- >0;){if(E=Y1(p,o,n),E===P)return a[h]=p,a[g]=o,t(a);if(E>0)p=Math.floor(p/E)*E,o=Math.ceil(o/E)*E;else if(E<0)p=Math.ceil(p*E)/E,o=Math.floor(o*E)/E;else break;P=E}return e},e}function T3(){var e=Fw();return e.copy=function(){return Lg(e,T3())},Qs.apply(e,arguments),ed(e)}function C3(e){var t;function n(a){return a==null||isNaN(a=+a)?t:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(e=Array.from(a,Tv),n):e.slice()},n.unknown=function(a){return arguments.length?(t=a,n):t},n.copy=function(){return C3(e).unknown(t)},e=arguments.length?Array.from(e,Tv):[0,1],ed(n)}function E3(e,t){e=e.slice();var n=0,a=e.length-1,h=e[n],g=e[a],p;return g<h&&(p=n,n=a,a=p,p=h,h=g,g=p),e[n]=t.floor(h),e[a]=t.ceil(g),e}function pE(e){return Math.log(e)}function mE(e){return Math.exp(e)}function t9(e){return-Math.log(-e)}function r9(e){return-Math.exp(-e)}function n9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function i9(e){return e===10?n9:e===Math.E?Math.exp:t=>Math.pow(e,t)}function a9(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function gE(e){return(t,n)=>-e(-t,n)}function Vw(e){const t=e(pE,mE),n=t.domain;let a=10,h,g;function p(){return h=a9(a),g=i9(a),n()[0]<0?(h=gE(h),g=gE(g),e(t9,r9)):e(pE,mE),t}return t.base=function(o){return arguments.length?(a=+o,p()):a},t.domain=function(o){return arguments.length?(n(o),p()):n()},t.ticks=o=>{const P=n();let E=P[0],C=P[P.length-1];const I=C<E;I&&([E,C]=[C,E]);let R=h(E),z=h(C),B,U;const Z=o==null?10:+o;let Q=[];if(!(a%1)&&z-R<Z){if(R=Math.floor(R),z=Math.ceil(z),E>0){for(;R<=z;++R)for(B=1;B<a;++B)if(U=R<0?B/g(-R):B*g(R),!(U<E)){if(U>C)break;Q.push(U)}}else for(;R<=z;++R)for(B=a-1;B>=1;--B)if(U=R>0?B/g(-R):B*g(R),!(U<E)){if(U>C)break;Q.push(U)}Q.length*2<Z&&(Q=X1(E,C,Z))}else Q=X1(R,z,Math.min(z-R,Z)).map(g);return I?Q.reverse():Q},t.tickFormat=(o,P)=>{if(o==null&&(o=10),P==null&&(P=a===10?"s":","),typeof P!="function"&&(!(a%1)&&(P=_g(P)).precision==null&&(P.trim=!0),P=$w(P)),o===1/0)return P;const E=Math.max(1,a*o/t.ticks().length);return C=>{let I=C/g(Math.round(h(C)));return I*a<a-.5&&(I*=a),I<=E?P(C):""}},t.nice=()=>n(E3(n(),{floor:o=>g(Math.floor(h(o))),ceil:o=>g(Math.ceil(h(o)))})),t}function M3(){const e=Vw(a_()).domain([1,10]);return e.copy=()=>Lg(e,M3()).base(e.base()),Qs.apply(e,arguments),e}function yE(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function vE(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Uw(e){var t=1,n=e(yE(t),vE(t));return n.constant=function(a){return arguments.length?e(yE(t=+a),vE(t)):t},ed(n)}function A3(){var e=Uw(a_());return e.copy=function(){return Lg(e,A3()).constant(e.constant())},Qs.apply(e,arguments)}function _E(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function o9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function s9(e){return e<0?-e*e:e*e}function Gw(e){var t=e(ro,ro),n=1;function a(){return n===1?e(ro,ro):n===.5?e(o9,s9):e(_E(n),_E(1/n))}return t.exponent=function(h){return arguments.length?(n=+h,a()):n},ed(t)}function qw(){var e=Gw(a_());return e.copy=function(){return Lg(e,qw()).exponent(e.exponent())},Qs.apply(e,arguments),e}function l9(){return qw.apply(null,arguments).exponent(.5)}function xE(e){return Math.sign(e)*e*e}function u9(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function I3(){var e=Fw(),t=[0,1],n=!1,a;function h(g){var p=u9(e(g));return isNaN(p)?a:n?Math.round(p):p}return h.invert=function(g){return e.invert(xE(g))},h.domain=function(g){return arguments.length?(e.domain(g),h):e.domain()},h.range=function(g){return arguments.length?(e.range((t=Array.from(g,Tv)).map(xE)),h):t.slice()},h.rangeRound=function(g){return h.range(g).round(!0)},h.round=function(g){return arguments.length?(n=!!g,h):n},h.clamp=function(g){return arguments.length?(e.clamp(g),h):e.clamp()},h.unknown=function(g){return arguments.length?(a=g,h):a},h.copy=function(){return I3(e.domain(),t).round(n).clamp(e.clamp()).unknown(a)},Qs.apply(h,arguments),ed(h)}function k3(){var e=[],t=[],n=[],a;function h(){var p=0,o=Math.max(1,t.length);for(n=new Array(o-1);++p<o;)n[p-1]=f7(e,p/o);return g}function g(p){return p==null||isNaN(p=+p)?a:t[Rg(n,p)]}return g.invertExtent=function(p){var o=t.indexOf(p);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},g.domain=function(p){if(!arguments.length)return e.slice();e=[];for(let o of p)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Wh),h()},g.range=function(p){return arguments.length?(t=Array.from(p),h()):t.slice()},g.unknown=function(p){return arguments.length?(a=p,g):a},g.quantiles=function(){return n.slice()},g.copy=function(){return k3().domain(e).range(t).unknown(a)},Qs.apply(g,arguments)}function D3(){var e=0,t=1,n=1,a=[.5],h=[0,1],g;function p(P){return P!=null&&P<=P?h[Rg(a,P,0,n)]:g}function o(){var P=-1;for(a=new Array(n);++P<n;)a[P]=((P+1)*t-(P-n)*e)/(n+1);return p}return p.domain=function(P){return arguments.length?([e,t]=P,e=+e,t=+t,o()):[e,t]},p.range=function(P){return arguments.length?(n=(h=Array.from(P)).length-1,o()):h.slice()},p.invertExtent=function(P){var E=h.indexOf(P);return E<0?[NaN,NaN]:E<1?[e,a[0]]:E>=n?[a[n-1],t]:[a[E-1],a[E]]},p.unknown=function(P){return arguments.length&&(g=P),p},p.thresholds=function(){return a.slice()},p.copy=function(){return D3().domain([e,t]).range(h).unknown(g)},Qs.apply(ed(p),arguments)}function O3(){var e=[.5],t=[0,1],n,a=1;function h(g){return g!=null&&g<=g?t[Rg(e,g,0,a)]:n}return h.domain=function(g){return arguments.length?(e=Array.from(g),a=Math.min(e.length,t.length-1),h):e.slice()},h.range=function(g){return arguments.length?(t=Array.from(g),a=Math.min(e.length,t.length-1),h):t.slice()},h.invertExtent=function(g){var p=t.indexOf(g);return[e[p-1],e[p]]},h.unknown=function(g){return arguments.length?(n=g,h):n},h.copy=function(){return O3().domain(e).range(t).unknown(n)},Qs.apply(h,arguments)}const kx=new Date,Dx=new Date;function Ui(e,t,n,a){function h(g){return e(g=arguments.length===0?new Date:new Date(+g)),g}return h.floor=g=>(e(g=new Date(+g)),g),h.ceil=g=>(e(g=new Date(g-1)),t(g,1),e(g),g),h.round=g=>{const p=h(g),o=h.ceil(g);return g-p<o-g?p:o},h.offset=(g,p)=>(t(g=new Date(+g),p==null?1:Math.floor(p)),g),h.range=(g,p,o)=>{const P=[];if(g=h.ceil(g),o=o==null?1:Math.floor(o),!(g<p)||!(o>0))return P;let E;do P.push(E=new Date(+g)),t(g,o),e(g);while(E<g&&g<p);return P},h.filter=g=>Ui(p=>{if(p>=p)for(;e(p),!g(p);)p.setTime(p-1)},(p,o)=>{if(p>=p)if(o<0)for(;++o<=0;)for(;t(p,-1),!g(p););else for(;--o>=0;)for(;t(p,1),!g(p););}),n&&(h.count=(g,p)=>(kx.setTime(+g),Dx.setTime(+p),e(kx),e(Dx),Math.floor(n(kx,Dx))),h.every=g=>(g=Math.floor(g),!isFinite(g)||!(g>0)?null:g>1?h.filter(a?p=>a(p)%g===0:p=>h.count(0,p)%g===0):h)),h}const Ev=Ui(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ev.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ui(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Ev);Ev.range;const $c=1e3,Ws=$c*60,Vc=Ws*60,Xc=Vc*24,Ww=Xc*7,bE=Xc*30,Ox=Xc*365,af=Ui(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*$c)},(e,t)=>(t-e)/$c,e=>e.getUTCSeconds());af.range;const Zw=Ui(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$c)},(e,t)=>{e.setTime(+e+t*Ws)},(e,t)=>(t-e)/Ws,e=>e.getMinutes());Zw.range;const Hw=Ui(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ws)},(e,t)=>(t-e)/Ws,e=>e.getUTCMinutes());Hw.range;const Kw=Ui(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$c-e.getMinutes()*Ws)},(e,t)=>{e.setTime(+e+t*Vc)},(e,t)=>(t-e)/Vc,e=>e.getHours());Kw.range;const Xw=Ui(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Vc)},(e,t)=>(t-e)/Vc,e=>e.getUTCHours());Xw.range;const jg=Ui(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ws)/Xc,e=>e.getDate()-1);jg.range;const o_=Ui(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xc,e=>e.getUTCDate()-1);o_.range;const R3=Ui(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xc,e=>Math.floor(e/Xc));R3.range;function xf(e){return Ui(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ws)/Ww)}const s_=xf(0),Mv=xf(1),c9=xf(2),h9=xf(3),jp=xf(4),d9=xf(5),f9=xf(6);s_.range;Mv.range;c9.range;h9.range;jp.range;d9.range;f9.range;function bf(e){return Ui(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Ww)}const l_=bf(0),Av=bf(1),p9=bf(2),m9=bf(3),Np=bf(4),g9=bf(5),y9=bf(6);l_.range;Av.range;p9.range;m9.range;Np.range;g9.range;y9.range;const Yw=Ui(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Yw.range;const Qw=Ui(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Qw.range;const Yc=Ui(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Yc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ui(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Yc.range;const Qc=Ui(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Qc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ui(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Qc.range;function z3(e,t,n,a,h,g){const p=[[af,1,$c],[af,5,5*$c],[af,15,15*$c],[af,30,30*$c],[g,1,Ws],[g,5,5*Ws],[g,15,15*Ws],[g,30,30*Ws],[h,1,Vc],[h,3,3*Vc],[h,6,6*Vc],[h,12,12*Vc],[a,1,Xc],[a,2,2*Xc],[n,1,Ww],[t,1,bE],[t,3,3*bE],[e,1,Ox]];function o(E,C,I){const R=C<E;R&&([E,C]=[C,E]);const z=I&&typeof I.range=="function"?I:P(E,C,I),B=z?z.range(E,+C+1):[];return R?B.reverse():B}function P(E,C,I){const R=Math.abs(C-E)/I,z=Ow(([,,Z])=>Z).right(p,R);if(z===p.length)return e.every(Q1(E/Ox,C/Ox,I));if(z===0)return Ev.every(Math.max(Q1(E,C,I),1));const[B,U]=p[R/p[z-1][2]<p[z][2]/R?z-1:z];return B.every(U)}return[o,P]}const[v9,_9]=z3(Qc,Qw,l_,R3,Xw,Hw),[x9,b9]=z3(Yc,Yw,s_,jg,Kw,Zw);function Rx(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function zx(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function qm(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function w9(e){var t=e.dateTime,n=e.date,a=e.time,h=e.periods,g=e.days,p=e.shortDays,o=e.months,P=e.shortMonths,E=Wm(h),C=Zm(h),I=Wm(g),R=Zm(g),z=Wm(p),B=Zm(p),U=Wm(o),Z=Zm(o),Q=Wm(P),le=Zm(P),se={a:Mt,A:ut,b:Ct,B:wt,c:null,d:EE,e:EE,f:q9,g:tU,G:nU,H:V9,I:U9,j:G9,L:L3,m:W9,M:Z9,p:ze,q:$e,Q:IE,s:kE,S:H9,u:K9,U:X9,V:Y9,w:Q9,W:J9,x:null,X:null,y:eU,Y:rU,Z:iU,"%":AE},Ce={a:Lt,A:Xt,b:tr,B:Pr,c:null,d:ME,e:ME,f:lU,g:vU,G:xU,H:aU,I:oU,j:sU,L:N3,m:uU,M:cU,p:zr,q:Ir,Q:IE,s:kE,S:hU,u:dU,U:fU,V:pU,w:mU,W:gU,x:null,X:null,y:yU,Y:_U,Z:bU,"%":AE},be={a:Et,A:vt,b:It,B:Ft,c:er,d:TE,e:TE,f:N9,g:PE,G:SE,H:CE,I:CE,j:R9,L:j9,m:O9,M:z9,p:ht,q:D9,Q:B9,s:$9,S:L9,u:E9,U:M9,V:A9,w:C9,W:I9,x:lr,X:vr,y:PE,Y:SE,Z:k9,"%":F9};se.x=Ae(n,se),se.X=Ae(a,se),se.c=Ae(t,se),Ce.x=Ae(n,Ce),Ce.X=Ae(a,Ce),Ce.c=Ae(t,Ce);function Ae(lt,Qt){return function(sr){var yt=[],_r=-1,Tr=0,Qr=lt.length,Pn,Jr,ri;for(sr instanceof Date||(sr=new Date(+sr));++_r<Qr;)lt.charCodeAt(_r)===37&&(yt.push(lt.slice(Tr,_r)),(Jr=wE[Pn=lt.charAt(++_r)])!=null?Pn=lt.charAt(++_r):Jr=Pn==="e"?" ":"0",(ri=Qt[Pn])&&(Pn=ri(sr,Jr)),yt.push(Pn),Tr=_r+1);return yt.push(lt.slice(Tr,_r)),yt.join("")}}function Ne(lt,Qt){return function(sr){var yt=qm(1900,void 0,1),_r=Qe(yt,lt,sr+="",0),Tr,Qr;if(_r!=sr.length)return null;if("Q"in yt)return new Date(yt.Q);if("s"in yt)return new Date(yt.s*1e3+("L"in yt?yt.L:0));if(Qt&&!("Z"in yt)&&(yt.Z=0),"p"in yt&&(yt.H=yt.H%12+yt.p*12),yt.m===void 0&&(yt.m="q"in yt?yt.q:0),"V"in yt){if(yt.V<1||yt.V>53)return null;"w"in yt||(yt.w=1),"Z"in yt?(Tr=zx(qm(yt.y,0,1)),Qr=Tr.getUTCDay(),Tr=Qr>4||Qr===0?Av.ceil(Tr):Av(Tr),Tr=o_.offset(Tr,(yt.V-1)*7),yt.y=Tr.getUTCFullYear(),yt.m=Tr.getUTCMonth(),yt.d=Tr.getUTCDate()+(yt.w+6)%7):(Tr=Rx(qm(yt.y,0,1)),Qr=Tr.getDay(),Tr=Qr>4||Qr===0?Mv.ceil(Tr):Mv(Tr),Tr=jg.offset(Tr,(yt.V-1)*7),yt.y=Tr.getFullYear(),yt.m=Tr.getMonth(),yt.d=Tr.getDate()+(yt.w+6)%7)}else("W"in yt||"U"in yt)&&("w"in yt||(yt.w="u"in yt?yt.u%7:"W"in yt?1:0),Qr="Z"in yt?zx(qm(yt.y,0,1)).getUTCDay():Rx(qm(yt.y,0,1)).getDay(),yt.m=0,yt.d="W"in yt?(yt.w+6)%7+yt.W*7-(Qr+5)%7:yt.w+yt.U*7-(Qr+6)%7);return"Z"in yt?(yt.H+=yt.Z/100|0,yt.M+=yt.Z%100,zx(yt)):Rx(yt)}}function Qe(lt,Qt,sr,yt){for(var _r=0,Tr=Qt.length,Qr=sr.length,Pn,Jr;_r<Tr;){if(yt>=Qr)return-1;if(Pn=Qt.charCodeAt(_r++),Pn===37){if(Pn=Qt.charAt(_r++),Jr=be[Pn in wE?Qt.charAt(_r++):Pn],!Jr||(yt=Jr(lt,sr,yt))<0)return-1}else if(Pn!=sr.charCodeAt(yt++))return-1}return yt}function ht(lt,Qt,sr){var yt=E.exec(Qt.slice(sr));return yt?(lt.p=C.get(yt[0].toLowerCase()),sr+yt[0].length):-1}function Et(lt,Qt,sr){var yt=z.exec(Qt.slice(sr));return yt?(lt.w=B.get(yt[0].toLowerCase()),sr+yt[0].length):-1}function vt(lt,Qt,sr){var yt=I.exec(Qt.slice(sr));return yt?(lt.w=R.get(yt[0].toLowerCase()),sr+yt[0].length):-1}function It(lt,Qt,sr){var yt=Q.exec(Qt.slice(sr));return yt?(lt.m=le.get(yt[0].toLowerCase()),sr+yt[0].length):-1}function Ft(lt,Qt,sr){var yt=U.exec(Qt.slice(sr));return yt?(lt.m=Z.get(yt[0].toLowerCase()),sr+yt[0].length):-1}function er(lt,Qt,sr){return Qe(lt,t,Qt,sr)}function lr(lt,Qt,sr){return Qe(lt,n,Qt,sr)}function vr(lt,Qt,sr){return Qe(lt,a,Qt,sr)}function Mt(lt){return p[lt.getDay()]}function ut(lt){return g[lt.getDay()]}function Ct(lt){return P[lt.getMonth()]}function wt(lt){return o[lt.getMonth()]}function ze(lt){return h[+(lt.getHours()>=12)]}function $e(lt){return 1+~~(lt.getMonth()/3)}function Lt(lt){return p[lt.getUTCDay()]}function Xt(lt){return g[lt.getUTCDay()]}function tr(lt){return P[lt.getUTCMonth()]}function Pr(lt){return o[lt.getUTCMonth()]}function zr(lt){return h[+(lt.getUTCHours()>=12)]}function Ir(lt){return 1+~~(lt.getUTCMonth()/3)}return{format:function(lt){var Qt=Ae(lt+="",se);return Qt.toString=function(){return lt},Qt},parse:function(lt){var Qt=Ne(lt+="",!1);return Qt.toString=function(){return lt},Qt},utcFormat:function(lt){var Qt=Ae(lt+="",Ce);return Qt.toString=function(){return lt},Qt},utcParse:function(lt){var Qt=Ne(lt+="",!0);return Qt.toString=function(){return lt},Qt}}}var wE={"-":"",_:" ",0:"0"},na=/^\s*\d+/,S9=/^%/,P9=/[\\^$*+?|[\]().{}]/g;function Yr(e,t,n){var a=e<0?"-":"",h=(a?-e:e)+"",g=h.length;return a+(g<n?new Array(n-g+1).join(t)+h:h)}function T9(e){return e.replace(P9,"\\$&")}function Wm(e){return new RegExp("^(?:"+e.map(T9).join("|")+")","i")}function Zm(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function C9(e,t,n){var a=na.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function E9(e,t,n){var a=na.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function M9(e,t,n){var a=na.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function A9(e,t,n){var a=na.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function I9(e,t,n){var a=na.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function SE(e,t,n){var a=na.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function PE(e,t,n){var a=na.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function k9(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function D9(e,t,n){var a=na.exec(t.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1}function O9(e,t,n){var a=na.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function TE(e,t,n){var a=na.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function R9(e,t,n){var a=na.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function CE(e,t,n){var a=na.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function z9(e,t,n){var a=na.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function L9(e,t,n){var a=na.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function j9(e,t,n){var a=na.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function N9(e,t,n){var a=na.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function F9(e,t,n){var a=S9.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function B9(e,t,n){var a=na.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function $9(e,t,n){var a=na.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function EE(e,t){return Yr(e.getDate(),t,2)}function V9(e,t){return Yr(e.getHours(),t,2)}function U9(e,t){return Yr(e.getHours()%12||12,t,2)}function G9(e,t){return Yr(1+jg.count(Yc(e),e),t,3)}function L3(e,t){return Yr(e.getMilliseconds(),t,3)}function q9(e,t){return L3(e,t)+"000"}function W9(e,t){return Yr(e.getMonth()+1,t,2)}function Z9(e,t){return Yr(e.getMinutes(),t,2)}function H9(e,t){return Yr(e.getSeconds(),t,2)}function K9(e){var t=e.getDay();return t===0?7:t}function X9(e,t){return Yr(s_.count(Yc(e)-1,e),t,2)}function j3(e){var t=e.getDay();return t>=4||t===0?jp(e):jp.ceil(e)}function Y9(e,t){return e=j3(e),Yr(jp.count(Yc(e),e)+(Yc(e).getDay()===4),t,2)}function Q9(e){return e.getDay()}function J9(e,t){return Yr(Mv.count(Yc(e)-1,e),t,2)}function eU(e,t){return Yr(e.getFullYear()%100,t,2)}function tU(e,t){return e=j3(e),Yr(e.getFullYear()%100,t,2)}function rU(e,t){return Yr(e.getFullYear()%1e4,t,4)}function nU(e,t){var n=e.getDay();return e=n>=4||n===0?jp(e):jp.ceil(e),Yr(e.getFullYear()%1e4,t,4)}function iU(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Yr(t/60|0,"0",2)+Yr(t%60,"0",2)}function ME(e,t){return Yr(e.getUTCDate(),t,2)}function aU(e,t){return Yr(e.getUTCHours(),t,2)}function oU(e,t){return Yr(e.getUTCHours()%12||12,t,2)}function sU(e,t){return Yr(1+o_.count(Qc(e),e),t,3)}function N3(e,t){return Yr(e.getUTCMilliseconds(),t,3)}function lU(e,t){return N3(e,t)+"000"}function uU(e,t){return Yr(e.getUTCMonth()+1,t,2)}function cU(e,t){return Yr(e.getUTCMinutes(),t,2)}function hU(e,t){return Yr(e.getUTCSeconds(),t,2)}function dU(e){var t=e.getUTCDay();return t===0?7:t}function fU(e,t){return Yr(l_.count(Qc(e)-1,e),t,2)}function F3(e){var t=e.getUTCDay();return t>=4||t===0?Np(e):Np.ceil(e)}function pU(e,t){return e=F3(e),Yr(Np.count(Qc(e),e)+(Qc(e).getUTCDay()===4),t,2)}function mU(e){return e.getUTCDay()}function gU(e,t){return Yr(Av.count(Qc(e)-1,e),t,2)}function yU(e,t){return Yr(e.getUTCFullYear()%100,t,2)}function vU(e,t){return e=F3(e),Yr(e.getUTCFullYear()%100,t,2)}function _U(e,t){return Yr(e.getUTCFullYear()%1e4,t,4)}function xU(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Np(e):Np.ceil(e),Yr(e.getUTCFullYear()%1e4,t,4)}function bU(){return"+0000"}function AE(){return"%"}function IE(e){return+e}function kE(e){return Math.floor(+e/1e3)}var _p,B3,$3;wU({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wU(e){return _p=w9(e),B3=_p.format,_p.parse,$3=_p.utcFormat,_p.utcParse,_p}function SU(e){return new Date(e)}function PU(e){return e instanceof Date?+e:+new Date(+e)}function Jw(e,t,n,a,h,g,p,o,P,E){var C=Fw(),I=C.invert,R=C.domain,z=E(".%L"),B=E(":%S"),U=E("%I:%M"),Z=E("%I %p"),Q=E("%a %d"),le=E("%b %d"),se=E("%B"),Ce=E("%Y");function be(Ae){return(P(Ae)<Ae?z:o(Ae)<Ae?B:p(Ae)<Ae?U:g(Ae)<Ae?Z:a(Ae)<Ae?h(Ae)<Ae?Q:le:n(Ae)<Ae?se:Ce)(Ae)}return C.invert=function(Ae){return new Date(I(Ae))},C.domain=function(Ae){return arguments.length?R(Array.from(Ae,PU)):R().map(SU)},C.ticks=function(Ae){var Ne=R();return e(Ne[0],Ne[Ne.length-1],Ae??10)},C.tickFormat=function(Ae,Ne){return Ne==null?be:E(Ne)},C.nice=function(Ae){var Ne=R();return(!Ae||typeof Ae.range!="function")&&(Ae=t(Ne[0],Ne[Ne.length-1],Ae??10)),Ae?R(E3(Ne,Ae)):C},C.copy=function(){return Lg(C,Jw(e,t,n,a,h,g,p,o,P,E))},C}function TU(){return Qs.apply(Jw(x9,b9,Yc,Yw,s_,jg,Kw,Zw,af,B3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function CU(){return Qs.apply(Jw(v9,_9,Qc,Qw,l_,o_,Xw,Hw,af,$3).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function u_(){var e=0,t=1,n,a,h,g,p=ro,o=!1,P;function E(I){return I==null||isNaN(I=+I)?P:p(h===0?.5:(I=(g(I)-n)*h,o?Math.max(0,Math.min(1,I)):I))}E.domain=function(I){return arguments.length?([e,t]=I,n=g(e=+e),a=g(t=+t),h=n===a?0:1/(a-n),E):[e,t]},E.clamp=function(I){return arguments.length?(o=!!I,E):o},E.interpolator=function(I){return arguments.length?(p=I,E):p};function C(I){return function(R){var z,B;return arguments.length?([z,B]=R,p=I(z,B),E):[p(0),p(1)]}}return E.range=C(Wp),E.rangeRound=C(Nw),E.unknown=function(I){return arguments.length?(P=I,E):P},function(I){return g=I,n=I(e),a=I(t),h=n===a?0:1/(a-n),E}}function td(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function V3(){var e=ed(u_()(ro));return e.copy=function(){return td(e,V3())},rh.apply(e,arguments)}function U3(){var e=Vw(u_()).domain([1,10]);return e.copy=function(){return td(e,U3()).base(e.base())},rh.apply(e,arguments)}function G3(){var e=Uw(u_());return e.copy=function(){return td(e,G3()).constant(e.constant())},rh.apply(e,arguments)}function e2(){var e=Gw(u_());return e.copy=function(){return td(e,e2()).exponent(e.exponent())},rh.apply(e,arguments)}function EU(){return e2.apply(null,arguments).exponent(.5)}function q3(){var e=[],t=ro;function n(a){if(a!=null&&!isNaN(a=+a))return t((Rg(e,a,1)-1)/(e.length-1))}return n.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let h of a)h!=null&&!isNaN(h=+h)&&e.push(h);return e.sort(Wh),n},n.interpolator=function(a){return arguments.length?(t=a,n):t},n.range=function(){return e.map((a,h)=>t(h/(e.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(h,g)=>d7(e,g/a))},n.copy=function(){return q3(t).domain(e)},rh.apply(n,arguments)}function c_(){var e=0,t=.5,n=1,a=1,h,g,p,o,P,E=ro,C,I=!1,R;function z(U){return isNaN(U=+U)?R:(U=.5+((U=+C(U))-g)*(a*U<a*g?o:P),E(I?Math.max(0,Math.min(1,U)):U))}z.domain=function(U){return arguments.length?([e,t,n]=U,h=C(e=+e),g=C(t=+t),p=C(n=+n),o=h===g?0:.5/(g-h),P=g===p?0:.5/(p-g),a=g<h?-1:1,z):[e,t,n]},z.clamp=function(U){return arguments.length?(I=!!U,z):I},z.interpolator=function(U){return arguments.length?(E=U,z):E};function B(U){return function(Z){var Q,le,se;return arguments.length?([Q,le,se]=Z,E=F7(U,[Q,le,se]),z):[E(0),E(.5),E(1)]}}return z.range=B(Wp),z.rangeRound=B(Nw),z.unknown=function(U){return arguments.length?(R=U,z):R},function(U){return C=U,h=U(e),g=U(t),p=U(n),o=h===g?0:.5/(g-h),P=g===p?0:.5/(p-g),a=g<h?-1:1,z}}function W3(){var e=ed(c_()(ro));return e.copy=function(){return td(e,W3())},rh.apply(e,arguments)}function Z3(){var e=Vw(c_()).domain([.1,1,10]);return e.copy=function(){return td(e,Z3()).base(e.base())},rh.apply(e,arguments)}function H3(){var e=Uw(c_());return e.copy=function(){return td(e,H3()).constant(e.constant())},rh.apply(e,arguments)}function t2(){var e=Gw(c_());return e.copy=function(){return td(e,t2()).exponent(e.exponent())},rh.apply(e,arguments)}function MU(){return t2.apply(null,arguments).exponent(.5)}const Xm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:zw,scaleDiverging:W3,scaleDivergingLog:Z3,scaleDivergingPow:t2,scaleDivergingSqrt:MU,scaleDivergingSymlog:H3,scaleIdentity:C3,scaleImplicit:J1,scaleLinear:T3,scaleLog:M3,scaleOrdinal:Rw,scalePoint:m7,scalePow:qw,scaleQuantile:k3,scaleQuantize:D3,scaleRadial:I3,scaleSequential:V3,scaleSequentialLog:U3,scaleSequentialPow:e2,scaleSequentialQuantile:q3,scaleSequentialSqrt:EU,scaleSequentialSymlog:G3,scaleSqrt:l9,scaleSymlog:A3,scaleThreshold:O3,scaleTime:TU,scaleUtc:CU,tickFormat:P3},Symbol.toStringTag,{value:"Module"}));var wf=e=>e.chartData,AU=st([wf],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),K3=(e,t,n,a)=>a?AU(e):wf(e);function Fp(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Nl(t)&&Nl(n))return!0}return!1}function DE(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function IU(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,a]=e,h,g;if(Nl(n))h=n;else if(typeof n=="function")return;if(Nl(a))g=a;else if(typeof a=="function")return;var p=[h,g];if(Fp(p))return p}}function kU(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,n);if(Fp(a))return DE(a,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[h,g]=e,p,o;if(h==="auto")t!=null&&(p=Math.min(...t));else if(Jt(h))p=h;else if(typeof h=="function")try{t!=null&&(p=h(t?.[0]))}catch{}else if(typeof h=="string"&&_C.test(h)){var P=_C.exec(h);if(P==null||t==null)p=void 0;else{var E=+P[1];p=t[0]-E}}else p=t?.[0];if(g==="auto")t!=null&&(o=Math.max(...t));else if(Jt(g))o=g;else if(typeof g=="function")try{t!=null&&(o=g(t?.[1]))}catch{}else if(typeof g=="string"&&xC.test(g)){var C=xC.exec(g);if(C==null||t==null)o=void 0;else{var I=+C[1];o=t[1]+I}}else o=t?.[1];var R=[p,o];if(Fp(R))return t==null?R:DE(R,t,n)}}}var Zp=1e9,DU={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},n2,Bn=!0,Xs="[DecimalError] ",df=Xs+"Invalid argument: ",r2=Xs+"Exponent out of range: ",Hp=Math.floor,Qd=Math.pow,OU=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,es,ra=1e7,kn=7,X3=9007199254740991,Iv=Hp(X3/kn),$t={};$t.absoluteValue=$t.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};$t.comparedTo=$t.cmp=function(e){var t,n,a,h,g=this;if(e=new g.constructor(e),g.s!==e.s)return g.s||-e.s;if(g.e!==e.e)return g.e>e.e^g.s<0?1:-1;for(a=g.d.length,h=e.d.length,t=0,n=a<h?a:h;t<n;++t)if(g.d[t]!==e.d[t])return g.d[t]>e.d[t]^g.s<0?1:-1;return a===h?0:a>h^g.s<0?1:-1};$t.decimalPlaces=$t.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*kn;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};$t.dividedBy=$t.div=function(e){return qc(this,new this.constructor(e))};$t.dividedToIntegerBy=$t.idiv=function(e){var t=this,n=t.constructor;return yn(qc(t,new n(e),0,1),n.precision)};$t.equals=$t.eq=function(e){return!this.cmp(e)};$t.exponent=function(){return Ci(this)};$t.greaterThan=$t.gt=function(e){return this.cmp(e)>0};$t.greaterThanOrEqualTo=$t.gte=function(e){return this.cmp(e)>=0};$t.isInteger=$t.isint=function(){return this.e>this.d.length-2};$t.isNegative=$t.isneg=function(){return this.s<0};$t.isPositive=$t.ispos=function(){return this.s>0};$t.isZero=function(){return this.s===0};$t.lessThan=$t.lt=function(e){return this.cmp(e)<0};$t.lessThanOrEqualTo=$t.lte=function(e){return this.cmp(e)<1};$t.logarithm=$t.log=function(e){var t,n=this,a=n.constructor,h=a.precision,g=h+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(es))throw Error(Xs+"NaN");if(n.s<1)throw Error(Xs+(n.s?"NaN":"-Infinity"));return n.eq(es)?new a(0):(Bn=!1,t=qc(xg(n,g),xg(e,g),g),Bn=!0,yn(t,h))};$t.minus=$t.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?J3(t,e):Y3(t,(e.s=-e.s,e))};$t.modulo=$t.mod=function(e){var t,n=this,a=n.constructor,h=a.precision;if(e=new a(e),!e.s)throw Error(Xs+"NaN");return n.s?(Bn=!1,t=qc(n,e,0,1).times(e),Bn=!0,n.minus(t)):yn(new a(n),h)};$t.naturalExponential=$t.exp=function(){return Q3(this)};$t.naturalLogarithm=$t.ln=function(){return xg(this)};$t.negated=$t.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};$t.plus=$t.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Y3(t,e):J3(t,(e.s=-e.s,e))};$t.precision=$t.sd=function(e){var t,n,a,h=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(df+e);if(t=Ci(h)+1,a=h.d.length-1,n=a*kn+1,a=h.d[a],a){for(;a%10==0;a/=10)n--;for(a=h.d[0];a>=10;a/=10)n++}return e&&t>n?t:n};$t.squareRoot=$t.sqrt=function(){var e,t,n,a,h,g,p,o=this,P=o.constructor;if(o.s<1){if(!o.s)return new P(0);throw Error(Xs+"NaN")}for(e=Ci(o),Bn=!1,h=Math.sqrt(+o),h==0||h==1/0?(t=Iu(o.d),(t.length+e)%2==0&&(t+="0"),h=Math.sqrt(t),e=Hp((e+1)/2)-(e<0||e%2),h==1/0?t="5e"+e:(t=h.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new P(t)):a=new P(h.toString()),n=P.precision,h=p=n+3;;)if(g=a,a=g.plus(qc(o,g,p+2)).times(.5),Iu(g.d).slice(0,p)===(t=Iu(a.d)).slice(0,p)){if(t=t.slice(p-3,p+1),h==p&&t=="4999"){if(yn(g,n+1,0),g.times(g).eq(o)){a=g;break}}else if(t!="9999")break;p+=4}return Bn=!0,yn(a,n)};$t.times=$t.mul=function(e){var t,n,a,h,g,p,o,P,E,C=this,I=C.constructor,R=C.d,z=(e=new I(e)).d;if(!C.s||!e.s)return new I(0);for(e.s*=C.s,n=C.e+e.e,P=R.length,E=z.length,P<E&&(g=R,R=z,z=g,p=P,P=E,E=p),g=[],p=P+E,a=p;a--;)g.push(0);for(a=E;--a>=0;){for(t=0,h=P+a;h>a;)o=g[h]+z[a]*R[h-a-1]+t,g[h--]=o%ra|0,t=o/ra|0;g[h]=(g[h]+t)%ra|0}for(;!g[--p];)g.pop();return t?++n:g.shift(),e.d=g,e.e=n,Bn?yn(e,I.precision):e};$t.toDecimalPlaces=$t.todp=function(e,t){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(Lu(e,0,Zp),t===void 0?t=a.rounding:Lu(t,0,8),yn(n,e+Ci(n)+1,t))};$t.toExponential=function(e,t){var n,a=this,h=a.constructor;return e===void 0?n=yf(a,!0):(Lu(e,0,Zp),t===void 0?t=h.rounding:Lu(t,0,8),a=yn(new h(a),e+1,t),n=yf(a,!0,e+1)),n};$t.toFixed=function(e,t){var n,a,h=this,g=h.constructor;return e===void 0?yf(h):(Lu(e,0,Zp),t===void 0?t=g.rounding:Lu(t,0,8),a=yn(new g(h),e+Ci(h)+1,t),n=yf(a.abs(),!1,e+Ci(a)+1),h.isneg()&&!h.isZero()?"-"+n:n)};$t.toInteger=$t.toint=function(){var e=this,t=e.constructor;return yn(new t(e),Ci(e)+1,t.rounding)};$t.toNumber=function(){return+this};$t.toPower=$t.pow=function(e){var t,n,a,h,g,p,o=this,P=o.constructor,E=12,C=+(e=new P(e));if(!e.s)return new P(es);if(o=new P(o),!o.s){if(e.s<1)throw Error(Xs+"Infinity");return o}if(o.eq(es))return o;if(a=P.precision,e.eq(es))return yn(o,a);if(t=e.e,n=e.d.length-1,p=t>=n,g=o.s,p){if((n=C<0?-C:C)<=X3){for(h=new P(es),t=Math.ceil(a/kn+4),Bn=!1;n%2&&(h=h.times(o),RE(h.d,t)),n=Hp(n/2),n!==0;)o=o.times(o),RE(o.d,t);return Bn=!0,e.s<0?new P(es).div(h):yn(h,a)}}else if(g<0)throw Error(Xs+"NaN");return g=g<0&&e.d[Math.max(t,n)]&1?-1:1,o.s=1,Bn=!1,h=e.times(xg(o,a+E)),Bn=!0,h=Q3(h),h.s=g,h};$t.toPrecision=function(e,t){var n,a,h=this,g=h.constructor;return e===void 0?(n=Ci(h),a=yf(h,n<=g.toExpNeg||n>=g.toExpPos)):(Lu(e,1,Zp),t===void 0?t=g.rounding:Lu(t,0,8),h=yn(new g(h),e,t),n=Ci(h),a=yf(h,e<=n||n<=g.toExpNeg,e)),a};$t.toSignificantDigits=$t.tosd=function(e,t){var n=this,a=n.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Lu(e,1,Zp),t===void 0?t=a.rounding:Lu(t,0,8)),yn(new a(n),e,t)};$t.toString=$t.valueOf=$t.val=$t.toJSON=$t[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ci(e),n=e.constructor;return yf(e,t<=n.toExpNeg||t>=n.toExpPos)};function Y3(e,t){var n,a,h,g,p,o,P,E,C=e.constructor,I=C.precision;if(!e.s||!t.s)return t.s||(t=new C(e)),Bn?yn(t,I):t;if(P=e.d,E=t.d,p=e.e,h=t.e,P=P.slice(),g=p-h,g){for(g<0?(a=P,g=-g,o=E.length):(a=E,h=p,o=P.length),p=Math.ceil(I/kn),o=p>o?p+1:o+1,g>o&&(g=o,a.length=1),a.reverse();g--;)a.push(0);a.reverse()}for(o=P.length,g=E.length,o-g<0&&(g=o,a=E,E=P,P=a),n=0;g;)n=(P[--g]=P[g]+E[g]+n)/ra|0,P[g]%=ra;for(n&&(P.unshift(n),++h),o=P.length;P[--o]==0;)P.pop();return t.d=P,t.e=h,Bn?yn(t,I):t}function Lu(e,t,n){if(e!==~~e||e<t||e>n)throw Error(df+e)}function Iu(e){var t,n,a,h=e.length-1,g="",p=e[0];if(h>0){for(g+=p,t=1;t<h;t++)a=e[t]+"",n=kn-a.length,n&&(g+=Uh(n)),g+=a;p=e[t],a=p+"",n=kn-a.length,n&&(g+=Uh(n))}else if(p===0)return"0";for(;p%10===0;)p/=10;return g+p}var qc=function(){function e(a,h){var g,p=0,o=a.length;for(a=a.slice();o--;)g=a[o]*h+p,a[o]=g%ra|0,p=g/ra|0;return p&&a.unshift(p),a}function t(a,h,g,p){var o,P;if(g!=p)P=g>p?1:-1;else for(o=P=0;o<g;o++)if(a[o]!=h[o]){P=a[o]>h[o]?1:-1;break}return P}function n(a,h,g){for(var p=0;g--;)a[g]-=p,p=a[g]<h[g]?1:0,a[g]=p*ra+a[g]-h[g];for(;!a[0]&&a.length>1;)a.shift()}return function(a,h,g,p){var o,P,E,C,I,R,z,B,U,Z,Q,le,se,Ce,be,Ae,Ne,Qe,ht=a.constructor,Et=a.s==h.s?1:-1,vt=a.d,It=h.d;if(!a.s)return new ht(a);if(!h.s)throw Error(Xs+"Division by zero");for(P=a.e-h.e,Ne=It.length,be=vt.length,z=new ht(Et),B=z.d=[],E=0;It[E]==(vt[E]||0);)++E;if(It[E]>(vt[E]||0)&&--P,g==null?le=g=ht.precision:p?le=g+(Ci(a)-Ci(h))+1:le=g,le<0)return new ht(0);if(le=le/kn+2|0,E=0,Ne==1)for(C=0,It=It[0],le++;(E<be||C)&&le--;E++)se=C*ra+(vt[E]||0),B[E]=se/It|0,C=se%It|0;else{for(C=ra/(It[0]+1)|0,C>1&&(It=e(It,C),vt=e(vt,C),Ne=It.length,be=vt.length),Ce=Ne,U=vt.slice(0,Ne),Z=U.length;Z<Ne;)U[Z++]=0;Qe=It.slice(),Qe.unshift(0),Ae=It[0],It[1]>=ra/2&&++Ae;do C=0,o=t(It,U,Ne,Z),o<0?(Q=U[0],Ne!=Z&&(Q=Q*ra+(U[1]||0)),C=Q/Ae|0,C>1?(C>=ra&&(C=ra-1),I=e(It,C),R=I.length,Z=U.length,o=t(I,U,R,Z),o==1&&(C--,n(I,Ne<R?Qe:It,R))):(C==0&&(o=C=1),I=It.slice()),R=I.length,R<Z&&I.unshift(0),n(U,I,Z),o==-1&&(Z=U.length,o=t(It,U,Ne,Z),o<1&&(C++,n(U,Ne<Z?Qe:It,Z))),Z=U.length):o===0&&(C++,U=[0]),B[E++]=C,o&&U[0]?U[Z++]=vt[Ce]||0:(U=[vt[Ce]],Z=1);while((Ce++<be||U[0]!==void 0)&&le--)}return B[0]||B.shift(),z.e=P,yn(z,p?g+Ci(z)+1:g)}}();function Q3(e,t){var n,a,h,g,p,o,P=0,E=0,C=e.constructor,I=C.precision;if(Ci(e)>16)throw Error(r2+Ci(e));if(!e.s)return new C(es);for(Bn=!1,o=I,p=new C(.03125);e.abs().gte(.1);)e=e.times(p),E+=5;for(a=Math.log(Qd(2,E))/Math.LN10*2+5|0,o+=a,n=h=g=new C(es),C.precision=o;;){if(h=yn(h.times(e),o),n=n.times(++P),p=g.plus(qc(h,n,o)),Iu(p.d).slice(0,o)===Iu(g.d).slice(0,o)){for(;E--;)g=yn(g.times(g),o);return C.precision=I,t==null?(Bn=!0,yn(g,I)):g}g=p}}function Ci(e){for(var t=e.e*kn,n=e.d[0];n>=10;n/=10)t++;return t}function Lx(e,t,n){if(t>e.LN10.sd())throw Bn=!0,n&&(e.precision=n),Error(Xs+"LN10 precision limit exceeded");return yn(new e(e.LN10),t)}function Uh(e){for(var t="";e--;)t+="0";return t}function xg(e,t){var n,a,h,g,p,o,P,E,C,I=1,R=10,z=e,B=z.d,U=z.constructor,Z=U.precision;if(z.s<1)throw Error(Xs+(z.s?"NaN":"-Infinity"));if(z.eq(es))return new U(0);if(t==null?(Bn=!1,E=Z):E=t,z.eq(10))return t==null&&(Bn=!0),Lx(U,E);if(E+=R,U.precision=E,n=Iu(B),a=n.charAt(0),g=Ci(z),Math.abs(g)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)z=z.times(e),n=Iu(z.d),a=n.charAt(0),I++;g=Ci(z),a>1?(z=new U("0."+n),g++):z=new U(a+"."+n.slice(1))}else return P=Lx(U,E+2,Z).times(g+""),z=xg(new U(a+"."+n.slice(1)),E-R).plus(P),U.precision=Z,t==null?(Bn=!0,yn(z,Z)):z;for(o=p=z=qc(z.minus(es),z.plus(es),E),C=yn(z.times(z),E),h=3;;){if(p=yn(p.times(C),E),P=o.plus(qc(p,new U(h),E)),Iu(P.d).slice(0,E)===Iu(o.d).slice(0,E))return o=o.times(2),g!==0&&(o=o.plus(Lx(U,E+2,Z).times(g+""))),o=qc(o,new U(I),E),U.precision=Z,t==null?(Bn=!0,yn(o,Z)):o;o=P,h+=2}}function OE(e,t){var n,a,h;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;t.charCodeAt(a)===48;)++a;for(h=t.length;t.charCodeAt(h-1)===48;)--h;if(t=t.slice(a,h),t){if(h-=a,n=n-a-1,e.e=Hp(n/kn),e.d=[],a=(n+1)%kn,n<0&&(a+=kn),a<h){for(a&&e.d.push(+t.slice(0,a)),h-=kn;a<h;)e.d.push(+t.slice(a,a+=kn));t=t.slice(a),a=kn-t.length}else a-=h;for(;a--;)t+="0";if(e.d.push(+t),Bn&&(e.e>Iv||e.e<-Iv))throw Error(r2+n)}else e.s=0,e.e=0,e.d=[0];return e}function yn(e,t,n){var a,h,g,p,o,P,E,C,I=e.d;for(p=1,g=I[0];g>=10;g/=10)p++;if(a=t-p,a<0)a+=kn,h=t,E=I[C=0];else{if(C=Math.ceil((a+1)/kn),g=I.length,C>=g)return e;for(E=g=I[C],p=1;g>=10;g/=10)p++;a%=kn,h=a-kn+p}if(n!==void 0&&(g=Qd(10,p-h-1),o=E/g%10|0,P=t<0||I[C+1]!==void 0||E%g,P=n<4?(o||P)&&(n==0||n==(e.s<0?3:2)):o>5||o==5&&(n==4||P||n==6&&(a>0?h>0?E/Qd(10,p-h):0:I[C-1])%10&1||n==(e.s<0?8:7))),t<1||!I[0])return P?(g=Ci(e),I.length=1,t=t-g-1,I[0]=Qd(10,(kn-t%kn)%kn),e.e=Hp(-t/kn)||0):(I.length=1,I[0]=e.e=e.s=0),e;if(a==0?(I.length=C,g=1,C--):(I.length=C+1,g=Qd(10,kn-a),I[C]=h>0?(E/Qd(10,p-h)%Qd(10,h)|0)*g:0),P)for(;;)if(C==0){(I[0]+=g)==ra&&(I[0]=1,++e.e);break}else{if(I[C]+=g,I[C]!=ra)break;I[C--]=0,g=1}for(a=I.length;I[--a]===0;)I.pop();if(Bn&&(e.e>Iv||e.e<-Iv))throw Error(r2+Ci(e));return e}function J3(e,t){var n,a,h,g,p,o,P,E,C,I,R=e.constructor,z=R.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new R(e),Bn?yn(t,z):t;if(P=e.d,I=t.d,a=t.e,E=e.e,P=P.slice(),p=E-a,p){for(C=p<0,C?(n=P,p=-p,o=I.length):(n=I,a=E,o=P.length),h=Math.max(Math.ceil(z/kn),o)+2,p>h&&(p=h,n.length=1),n.reverse(),h=p;h--;)n.push(0);n.reverse()}else{for(h=P.length,o=I.length,C=h<o,C&&(o=h),h=0;h<o;h++)if(P[h]!=I[h]){C=P[h]<I[h];break}p=0}for(C&&(n=P,P=I,I=n,t.s=-t.s),o=P.length,h=I.length-o;h>0;--h)P[o++]=0;for(h=I.length;h>p;){if(P[--h]<I[h]){for(g=h;g&&P[--g]===0;)P[g]=ra-1;--P[g],P[h]+=ra}P[h]-=I[h]}for(;P[--o]===0;)P.pop();for(;P[0]===0;P.shift())--a;return P[0]?(t.d=P,t.e=a,Bn?yn(t,z):t):new R(0)}function yf(e,t,n){var a,h=Ci(e),g=Iu(e.d),p=g.length;return t?(n&&(a=n-p)>0?g=g.charAt(0)+"."+g.slice(1)+Uh(a):p>1&&(g=g.charAt(0)+"."+g.slice(1)),g=g+(h<0?"e":"e+")+h):h<0?(g="0."+Uh(-h-1)+g,n&&(a=n-p)>0&&(g+=Uh(a))):h>=p?(g+=Uh(h+1-p),n&&(a=n-h-1)>0&&(g=g+"."+Uh(a))):((a=h+1)<p&&(g=g.slice(0,a)+"."+g.slice(a)),n&&(a=n-p)>0&&(h+1===p&&(g+="."),g+=Uh(a))),e.s<0?"-"+g:g}function RE(e,t){if(e.length>t)return e.length=t,!0}function eD(e){var t,n,a;function h(g){var p=this;if(!(p instanceof h))return new h(g);if(p.constructor=h,g instanceof h){p.s=g.s,p.e=g.e,p.d=(g=g.d)?g.slice():g;return}if(typeof g=="number"){if(g*0!==0)throw Error(df+g);if(g>0)p.s=1;else if(g<0)g=-g,p.s=-1;else{p.s=0,p.e=0,p.d=[0];return}if(g===~~g&&g<1e7){p.e=0,p.d=[g];return}return OE(p,g.toString())}else if(typeof g!="string")throw Error(df+g);if(g.charCodeAt(0)===45?(g=g.slice(1),p.s=-1):p.s=1,OU.test(g))OE(p,g);else throw Error(df+g)}if(h.prototype=$t,h.ROUND_UP=0,h.ROUND_DOWN=1,h.ROUND_CEIL=2,h.ROUND_FLOOR=3,h.ROUND_HALF_UP=4,h.ROUND_HALF_DOWN=5,h.ROUND_HALF_EVEN=6,h.ROUND_HALF_CEIL=7,h.ROUND_HALF_FLOOR=8,h.clone=eD,h.config=h.set=RU,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return h.config(e),h}function RU(e){if(!e||typeof e!="object")throw Error(Xs+"Object expected");var t,n,a,h=["precision",1,Zp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<h.length;t+=3)if((a=e[n=h[t]])!==void 0)if(Hp(a)===a&&a>=h[t+1]&&a<=h[t+2])this[n]=a;else throw Error(df+n+": "+a);if((a=e[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(df+n+": "+a);return this}var n2=eD(DU);es=new n2(1);const un=n2;var zU=e=>e,tD={},rD=e=>e===tD,zE=e=>function t(){return arguments.length===0||arguments.length===1&&rD(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},nD=(e,t)=>e===1?t:zE(function(){for(var n=arguments.length,a=new Array(n),h=0;h<n;h++)a[h]=arguments[h];var g=a.filter(p=>p!==tD).length;return g>=e?t(...a):nD(e-g,zE(function(){for(var p=arguments.length,o=new Array(p),P=0;P<p;P++)o[P]=arguments[P];var E=a.map(C=>rD(C)?o.shift():C);return t(...E,...o)}))}),h_=e=>nD(e.length,e),nb=(e,t)=>{for(var n=[],a=e;a<t;++a)n[a-e]=a;return n},LU=h_((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),jU=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(!n.length)return zU;var h=n.reverse(),g=h[0],p=h.slice(1);return function(){return p.reduce((o,P)=>P(o),g(...arguments))}},ib=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),iD=e=>{var t=null,n=null;return function(){for(var a=arguments.length,h=new Array(a),g=0;g<a;g++)h[g]=arguments[g];return t&&h.every((p,o)=>{var P;return p===((P=t)===null||P===void 0?void 0:P[o])})||(t=h,n=e(...h)),n}};function aD(e){var t;return e===0?t=1:t=Math.floor(new un(e).abs().log(10).toNumber())+1,t}function oD(e,t,n){for(var a=new un(e),h=0,g=[];a.lt(t)&&h<1e5;)g.push(a.toNumber()),a=a.add(n),h++;return g}h_((e,t,n)=>{var a=+e,h=+t;return a+n*(h-a)});h_((e,t,n)=>{var a=t-+e;return a=a||1/0,(n-e)/a});h_((e,t,n)=>{var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(n-e)/a))});var sD=e=>{var[t,n]=e,[a,h]=[t,n];return t>n&&([a,h]=[n,t]),[a,h]},lD=(e,t,n)=>{if(e.lte(0))return new un(0);var a=aD(e.toNumber()),h=new un(10).pow(a),g=e.div(h),p=a!==1?.05:.1,o=new un(Math.ceil(g.div(p).toNumber())).add(n).mul(p),P=o.mul(h);return t?new un(P.toNumber()):new un(Math.ceil(P.toNumber()))},NU=(e,t,n)=>{var a=new un(1),h=new un(e);if(!h.isint()&&n){var g=Math.abs(e);g<1?(a=new un(10).pow(aD(e)-1),h=new un(Math.floor(h.div(a).toNumber())).mul(a)):g>1&&(h=new un(Math.floor(e)))}else e===0?h=new un(Math.floor((t-1)/2)):n||(h=new un(Math.floor(e)));var p=Math.floor((t-1)/2),o=jU(LU(P=>h.add(new un(P-p).mul(a)).toNumber()),nb);return o(0,t)},uD=function(t,n,a,h){var g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(a-1)))return{step:new un(0),tickMin:new un(0),tickMax:new un(0)};var p=lD(new un(n).sub(t).div(a-1),h,g),o;t<=0&&n>=0?o=new un(0):(o=new un(t).add(n).div(2),o=o.sub(new un(o).mod(p)));var P=Math.ceil(o.sub(t).div(p).toNumber()),E=Math.ceil(new un(n).sub(o).div(p).toNumber()),C=P+E+1;return C>a?uD(t,n,a,h,g+1):(C<a&&(E=n>0?E+(a-C):E,P=n>0?P:P+(a-C)),{step:p,tickMin:o.sub(new un(P).mul(p)),tickMax:o.add(new un(E).mul(p))})};function FU(e){var[t,n]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,g=Math.max(a,2),[p,o]=sD([t,n]);if(p===-1/0||o===1/0){var P=o===1/0?[p,...nb(0,a-1).map(()=>1/0)]:[...nb(0,a-1).map(()=>-1/0),o];return t>n?ib(P):P}if(p===o)return NU(p,a,h);var{step:E,tickMin:C,tickMax:I}=uD(p,o,g,h,0),R=oD(C,I.add(new un(.1).mul(E)),E);return t>n?ib(R):R}function BU(e,t){var[n,a]=e,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[g,p]=sD([n,a]);if(g===-1/0||p===1/0)return[n,a];if(g===p)return[g];var o=Math.max(t,2),P=lD(new un(p).sub(g).div(o-1),h,0),E=[...oD(new un(g),new un(p),P),p];return h===!1&&(E=E.map(C=>Math.round(C))),n>a?ib(E):E}var $U=iD(FU),VU=iD(BU),UU=e=>e.rootProps.barCategoryGap,d_=e=>e.rootProps.stackOffset,i2=e=>e.options.chartName,a2=e=>e.rootProps.syncId,cD=e=>e.rootProps.syncMethod,o2=e=>e.options.eventEmitter,Fc={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Qo={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},f_=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},GU={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Fc.angleAxisId,includeHidden:!1,name:void 0,reversed:Fc.reversed,scale:Fc.scale,tick:Fc.tick,tickCount:void 0,ticks:void 0,type:Fc.type,unit:void 0},qU={allowDataOverflow:Qo.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Qo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Qo.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Qo.scale,tick:Qo.tick,tickCount:Qo.tickCount,ticks:void 0,type:Qo.type,unit:void 0},WU={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Fc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Fc.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Fc.scale,tick:Fc.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},ZU={allowDataOverflow:Qo.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Qo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Qo.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Qo.scale,tick:Qo.tick,tickCount:Qo.tickCount,ticks:void 0,type:"category",unit:void 0},s2=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?WU:GU,l2=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?ZU:qU,p_=e=>e.polarOptions,u2=st([eh,th,Ea],j8),hD=st([p_,u2],(e,t)=>{if(e!=null)return Kh(e.innerRadius,t,0)}),dD=st([p_,u2],(e,t)=>{if(e!=null)return Kh(e.outerRadius,t,t*.8)}),HU=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},fD=st([p_],HU);st([s2,fD],f_);var pD=st([u2,hD,dD],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});st([l2,pD],f_);var KU=st([Wn,p_,hD,dD,eh,th],(e,t,n,a,h,g)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||a==null)){var{cx:p,cy:o,startAngle:P,endAngle:E}=t;return{cx:Kh(p,h,h/2),cy:Kh(o,g,g/2),innerRadius:n,outerRadius:a,startAngle:P,endAngle:E,clockWise:!1}}}),ia=(e,t)=>t,m_=(e,t,n)=>n;function LE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function kv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LE(Object(n),!0).forEach(function(a){XU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function XU(e,t,n){return(t=YU(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YU(e){var t=QU(e,"string");return typeof t=="symbol"?t:t+""}function QU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ab=[0,"auto"],Xo={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},nh=(e,t)=>{var n=e.cartesianAxis.xAxis[t];return n??Xo},Yo={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ab,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:t_},rd=(e,t)=>{var n=e.cartesianAxis.yAxis[t];return n??Yo},JU={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},c2=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??JU},Co=(e,t,n)=>{switch(t){case"xAxis":return nh(e,n);case"yAxis":return rd(e,n);case"zAxis":return c2(e,n);case"angleAxis":return s2(e,n);case"radiusAxis":return l2(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},eG=(e,t,n)=>{switch(t){case"xAxis":return nh(e,n);case"yAxis":return rd(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Ng=(e,t,n)=>{switch(t){case"xAxis":return nh(e,n);case"yAxis":return rd(e,n);case"angleAxis":return s2(e,n);case"radiusAxis":return l2(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},mD=e=>e.graphicalItems.countOfBars>0;function gD(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var yD=e=>e.graphicalItems.cartesianItems,tG=st([ia,m_],gD),vD=(e,t,n)=>e.filter(n).filter(a=>t?.includeHidden===!0?!0:!a.hide),Fg=st([yD,Co,tG],vD),_D=e=>e.filter(t=>t.stackId===void 0),rG=st([Fg],_D),xD=e=>e.map(t=>t.data).filter(Boolean).flat(1),nG=st([Fg],xD),bD=(e,t)=>{var{chartData:n=[],dataStartIndex:a,dataEndIndex:h}=t;return e.length>0?e:n.slice(a,h+1)},g_=st([nG,K3],bD),wD=(e,t,n)=>t?.dataKey!=null?e.map(a=>({value:rs(a,t.dataKey)})):n.length>0?n.map(a=>a.dataKey).flatMap(a=>e.map(h=>({value:rs(h,a)}))):e.map(a=>({value:a})),y_=st([g_,Co,Fg],wD);function SD(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Sf(e){return e.filter(t=>zu(t)||t instanceof Date).map(Number).filter(t=>Hs(t)===!1)}function iG(e,t,n){return!n||typeof t!="number"||Hs(t)?[]:n.length?Sf(n.flatMap(a=>{var h=rs(e,a.dataKey),g,p;if(Array.isArray(h)?[g,p]=h:g=p=h,!(!Nl(g)||!Nl(p)))return[t-g,t+p]})):[]}var PD=(e,t,n)=>{var a={},h=t.reduce((g,p)=>(p.stackId==null||(g[p.stackId]==null&&(g[p.stackId]=[]),g[p.stackId].push(p)),g),a);return Object.fromEntries(Object.entries(h).map(g=>{var[p,o]=g,P=o.map(E=>E.dataKey);return[p,{stackedData:Q8(e,P,n),graphicalItems:o}]}))},aG=st([g_,Fg,d_],PD),TD=(e,t,n)=>{var{dataStartIndex:a,dataEndIndex:h}=t;if(n!=="zAxis"){var g=r$(e,a,h);if(!(g!=null&&g[0]===0&&g[1]===0))return g}},oG=st([aG,wf,ia],TD),CD=(e,t,n,a)=>n.length>0?e.flatMap(h=>n.flatMap(g=>{var p,o,P=(p=g.errorBars)===null||p===void 0?void 0:p.filter(C=>SD(a,C)),E=rs(h,(o=t.dataKey)!==null&&o!==void 0?o:g.dataKey);return{value:E,errorDomain:iG(h,E,P)}})).filter(Boolean):t?.dataKey!=null?e.map(h=>({value:rs(h,t.dataKey),errorDomain:[]})):e.map(h=>({value:h,errorDomain:[]})),sG=st(g_,Co,rG,ia,CD);function lG(e){var{value:t}=e;if(zu(t)||t instanceof Date)return t}var uG=e=>{var t=e.flatMap(a=>[a.value,a.errorDomain]).flat(1),n=Sf(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},cG=(e,t,n)=>{var a=e.map(lG).filter(h=>h!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&ZI(a))?p3(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},h2=e=>{var t;if(e==null||!("domain"in e))return ab;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=Sf(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:ab},d2=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var h=n.filter(Boolean);if(h.length!==0){var g=h.flat(),p=Math.min(...g),o=Math.max(...g);return[p,o]}},ED=e=>e.referenceElements.dots,Kp=(e,t,n)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===n:a.yAxisId===n),hG=st([ED,ia,m_],Kp),MD=e=>e.referenceElements.areas,dG=st([MD,ia,m_],Kp),AD=e=>e.referenceElements.lines,fG=st([AD,ia,m_],Kp),ID=(e,t)=>{var n=Sf(e.map(a=>t==="xAxis"?a.x:a.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},pG=st(hG,ia,ID),kD=(e,t)=>{var n=Sf(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},mG=st([dG,ia],kD),DD=(e,t)=>{var n=Sf(e.map(a=>t==="xAxis"?a.x:a.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},gG=st(fG,ia,DD),yG=st(pG,gG,mG,(e,t,n)=>d2(e,n,t)),vG=st([Co],h2),OD=(e,t,n,a,h)=>{var g=IU(t,e.allowDataOverflow);return g??kU(t,d2(n,h,uG(a)),e.allowDataOverflow)},_G=st([Co,vG,oG,sG,yG],OD),xG=[0,1],RD=(e,t,n,a,h,g,p)=>{if(!(e==null||n==null||n.length===0)){var{dataKey:o,type:P}=e,E=Jh(t,g);return E&&o==null?p3(0,n.length):P==="category"?cG(a,e,E):h==="expand"?xG:p}},f2=st([Co,Wn,g_,y_,d_,ia,_G],RD),zD=(e,t,n,a,h)=>{if(e!=null){var{scale:g,type:p}=e;if(g==="auto")return t==="radial"&&h==="radiusAxis"?"band":t==="radial"&&h==="angleAxis"?"linear":p==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!n)?"point":p==="category"?"band":"linear";if(typeof g=="string"){var o="scale".concat(kg(g));return o in Xm?o:"point"}}},Bg=st([Co,Wn,mD,i2,ia],zD);function bG(e){if(e!=null){if(e in Xm)return Xm[e]();var t="scale".concat(kg(e));if(t in Xm)return Xm[t]()}}function p2(e,t,n,a){if(!(n==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(a);var h=bG(t);if(h!=null){var g=h.domain(n).range(a);return H8(g),g}}}var LD=(e,t,n)=>{var a=h2(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&Fp(e))return $U(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Fp(e))return VU(e,t.tickCount,t.allowDecimals)}},m2=st([f2,Ng,Bg],LD),jD=(e,t,n,a)=>{if(a!=="angleAxis"&&e?.type==="number"&&Fp(t)&&Array.isArray(n)&&n.length>0){var h=t[0],g=n[0],p=t[1],o=n[n.length-1];return[Math.min(h,g),Math.max(p,o)]}return t},wG=st([Co,f2,m2,ia],jD),SG=st(y_,Co,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,a=Array.from(Sf(e.map(o=>o.value))).sort((o,P)=>o-P);if(a.length<2)return 1/0;var h=a[a.length-1]-a[0];if(h===0)return 1/0;for(var g=0;g<a.length-1;g++){var p=a[g+1]-a[g];n=Math.min(n,p)}return n/h}}),ND=st(SG,Wn,UU,Ea,(e,t,n,a)=>a,(e,t,n,a,h)=>{if(!Nl(e))return 0;var g=t==="vertical"?a.height:a.width;if(h==="gap")return e*g/2;if(h==="no-gap"){var p=Kh(n,e*g),o=e*g/2;return o-p-(o-p)/g*p}return 0}),PG=(e,t)=>{var n=nh(e,t);return n==null||typeof n.padding!="string"?0:ND(e,"xAxis",t,n.padding)},TG=(e,t)=>{var n=rd(e,t);return n==null||typeof n.padding!="string"?0:ND(e,"yAxis",t,n.padding)},CG=st(nh,PG,(e,t)=>{var n,a;if(e==null)return{left:0,right:0};var{padding:h}=e;return typeof h=="string"?{left:t,right:t}:{left:((n=h.left)!==null&&n!==void 0?n:0)+t,right:((a=h.right)!==null&&a!==void 0?a:0)+t}}),EG=st(rd,TG,(e,t)=>{var n,a;if(e==null)return{top:0,bottom:0};var{padding:h}=e;return typeof h=="string"?{top:t,bottom:t}:{top:((n=h.top)!==null&&n!==void 0?n:0)+t,bottom:((a=h.bottom)!==null&&a!==void 0?a:0)+t}}),MG=st([Ea,CG,n_,r_,(e,t,n)=>n],(e,t,n,a,h)=>{var{padding:g}=a;return h?[g.left,n.width-g.right]:[e.left+t.left,e.left+e.width-t.right]}),AG=st([Ea,Wn,EG,n_,r_,(e,t,n)=>n],(e,t,n,a,h,g)=>{var{padding:p}=h;return g?[a.height-p.bottom,p.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),$g=(e,t,n,a)=>{var h;switch(t){case"xAxis":return MG(e,n,a);case"yAxis":return AG(e,n,a);case"zAxis":return(h=c2(e,n))===null||h===void 0?void 0:h.range;case"angleAxis":return fD(e);case"radiusAxis":return pD(e,n);default:return}},FD=st([Co,$g],f_),Xp=st([Co,Bg,wG,FD],p2);st(Fg,ia,(e,t)=>e.flatMap(n=>{var a;return(a=n.errorBars)!==null&&a!==void 0?a:[]}).filter(n=>SD(t,n)));function BD(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var v_=(e,t)=>t,__=(e,t,n)=>n,IG=st(Tw,v_,__,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(BD)),kG=st(Cw,v_,__,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(BD)),$D=(e,t)=>({width:e.width,height:t.height}),DG=(e,t)=>{var n=typeof t.width=="number"?t.width:t_;return{width:n,height:e.height}},OG=st(Ea,nh,$D),RG=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},zG=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},LG=st(th,Ea,IG,v_,__,(e,t,n,a,h)=>{var g={},p;return n.forEach(o=>{var P=$D(t,o);p==null&&(p=RG(t,a,e));var E=a==="top"&&!h||a==="bottom"&&h;g[o.id]=p-Number(E)*P.height,p+=(E?-1:1)*P.height}),g}),jG=st(eh,Ea,kG,v_,__,(e,t,n,a,h)=>{var g={},p;return n.forEach(o=>{var P=DG(t,o);p==null&&(p=zG(t,a,e));var E=a==="left"&&!h||a==="right"&&h;g[o.id]=p-Number(E)*P.width,p+=(E?-1:1)*P.width}),g}),NG=(e,t)=>{var n=Ea(e),a=nh(e,t);if(a!=null){var h=LG(e,a.orientation,a.mirror),g=h[t];return g==null?{x:n.left,y:0}:{x:n.left,y:g}}},FG=(e,t)=>{var n=Ea(e),a=rd(e,t);if(a!=null){var h=jG(e,a.orientation,a.mirror),g=h[t];return g==null?{x:0,y:n.top}:{x:g,y:n.top}}},BG=st(Ea,rd,(e,t)=>{var n=typeof t.width=="number"?t.width:t_;return{width:n,height:e.height}}),VD=(e,t,n,a)=>{if(n!=null){var{allowDuplicatedCategory:h,type:g,dataKey:p}=n,o=Jh(e,a),P=t.map(E=>E.value);if(p&&o&&g==="category"&&h&&ZI(P))return P}},g2=st([Wn,y_,Co,ia],VD),UD=(e,t,n,a)=>{if(!(n==null||n.dataKey==null)){var{type:h,scale:g}=n,p=Jh(e,a);if(p&&(h==="number"||g!=="auto"))return t.map(o=>o.value)}},y2=st([Wn,y_,Ng,ia],UD),jE=st([Wn,eG,Bg,Xp,g2,y2,$g,m2,ia],(e,t,n,a,h,g,p,o,P)=>{if(t==null)return null;var E=Jh(e,P);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:P,categoricalDomain:g,duplicateDomain:h,isCategorical:E,niceTicks:o,range:p,realScaleType:n,scale:a}}),$G=(e,t,n,a,h,g,p,o,P)=>{if(!(t==null||a==null)){var E=Jh(e,P),{type:C,ticks:I,tickCount:R}=t,z=n==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,B=C==="category"&&a.bandwidth?a.bandwidth()/z:0;B=P==="angleAxis"&&g!=null&&g.length>=2?qs(g[0]-g[1])*2*B:B;var U=I||h;if(U){var Z=U.map((Q,le)=>{var se=p?p.indexOf(Q):Q;return{index:le,coordinate:a(se)+B,value:Q,offset:B}});return Z.filter(Q=>!Hs(Q.coordinate))}return E&&o?o.map((Q,le)=>({coordinate:a(Q)+B,value:Q,index:le,offset:B})):a.ticks?a.ticks(R).map(Q=>({coordinate:a(Q)+B,value:Q,offset:B})):a.domain().map((Q,le)=>({coordinate:a(Q)+B,value:p?p[Q]:Q,index:le,offset:B}))}},GD=st([Wn,Ng,Bg,Xp,m2,$g,g2,y2,ia],$G),VG=(e,t,n,a,h,g,p)=>{if(!(t==null||n==null||a==null||a[0]===a[1])){var o=Jh(e,p),{tickCount:P}=t,E=0;return E=p==="angleAxis"&&a?.length>=2?qs(a[0]-a[1])*2*E:E,o&&g?g.map((C,I)=>({coordinate:n(C)+E,value:C,index:I,offset:E})):n.ticks?n.ticks(P).map(C=>({coordinate:n(C)+E,value:C,offset:E})):n.domain().map((C,I)=>({coordinate:n(C)+E,value:h?h[C]:C,index:I,offset:E}))}},qD=st([Wn,Ng,Xp,$g,g2,y2,ia],VG),x_=st(Co,Xp,(e,t)=>{if(!(e==null||t==null))return kv(kv({},e),{},{scale:t})}),UG=st([Co,Bg,f2,FD],p2);st((e,t,n)=>c2(e,n),UG,(e,t)=>{if(!(e==null||t==null))return kv(kv({},e),{},{scale:t})});var GG=st([Wn,Tw,Cw],(e,t,n)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),WD=e=>e.options.defaultTooltipEventType,ZD=e=>e.options.validateTooltipEventTypes;function HD(e,t,n){if(e==null)return t;var a=e?"axis":"item";return n==null?t:n.includes(a)?a:t}function v2(e,t){var n=WD(e),a=ZD(e);return HD(t,n,a)}function qG(e){return or(t=>v2(t,e))}var KD=(e,t)=>{var n,a=Number(t);if(!(Hs(a)||t==null))return a>=0?e==null||(n=e[a])===null||n===void 0?void 0:n.value:void 0},WG=e=>e.tooltip.settings,Gh={active:!1,index:null,dataKey:void 0,coordinate:void 0},ZG={itemInteraction:{click:Gh,hover:Gh},axisInteraction:{click:Gh,hover:Gh},keyboardInteraction:Gh,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},XD=Ys({name:"tooltip",initialState:ZG,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=Gc(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:HG,removeTooltipEntrySettings:KG,setTooltipSettingsState:XG,setActiveMouseOverItemIndex:YG,mouseLeaveItem:vY,mouseLeaveChart:YD,setActiveClickItemIndex:_Y,setMouseOverAxisIndex:QD,setMouseClickAxisIndex:QG,setSyncInteraction:ob,setKeyboardInteraction:sb}=XD.actions,JG=XD.reducer;function NE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function jy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NE(Object(n),!0).forEach(function(a){eq(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function eq(e,t,n){return(t=tq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tq(e){var t=rq(e,"string");return typeof t=="symbol"?t:t+""}function rq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nq(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function iq(e){return e.index!=null}var JD=(e,t,n,a)=>{if(t==null)return Gh;var h=nq(e,t,n);if(h==null)return Gh;if(h.active)return h;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var g=e.settings.active===!0;if(iq(h)){if(g)return jy(jy({},h),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a};return jy(jy({},Gh),{},{coordinate:h.coordinate})},_2=(e,t)=>{var n=e?.index;if(n==null)return null;var a=Number(n);if(!Nl(a))return n;var h=0,g=1/0;return t.length>0&&(g=t.length-1),String(Math.max(h,Math.min(a,g)))},eO=(e,t,n,a,h,g,p,o)=>{if(!(g==null||o==null)){var P=p[0],E=P==null?void 0:o(P.positions,g);if(E!=null)return E;var C=h?.[Number(g)];if(C)switch(n){case"horizontal":return{x:C.coordinate,y:(a.top+t)/2};default:return{x:(a.left+e)/2,y:C.coordinate}}}},tO=(e,t,n,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var h;return n==="hover"?h=e.itemInteraction.hover.dataKey:h=e.itemInteraction.click.dataKey,h==null&&a!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(g=>{var p;return((p=g.settings)===null||p===void 0?void 0:p.dataKey)===h})},Vg=e=>e.options.tooltipPayloadSearcher,Yp=e=>e.tooltip;function FE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function BE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FE(Object(n),!0).forEach(function(a){aq(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function aq(e,t,n){return(t=oq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oq(e){var t=sq(e,"string");return typeof t=="symbol"?t:t+""}function sq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lq(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function uq(e,t){return e??t}var rO=(e,t,n,a,h,g,p)=>{if(!(t==null||g==null)){var{chartData:o,computedData:P,dataStartIndex:E,dataEndIndex:C}=n,I=[];return e.reduce((R,z)=>{var B,{dataDefinedOnItem:U,settings:Z}=z,Q=uq(U,o),le=lq(Q,E,C),se=(B=Z?.dataKey)!==null&&B!==void 0?B:a?.dataKey,Ce=Z?.nameKey,be;if(a!=null&&a.dataKey&&Array.isArray(le)&&!Array.isArray(le[0])&&p==="axis"?be=HI(le,a.dataKey,h):be=g(le,t,P,Ce),Array.isArray(be))be.forEach(Ne=>{var Qe=BE(BE({},Z),{},{name:Ne.name,unit:Ne.unit,color:void 0,fill:void 0});R.push(bC({tooltipEntrySettings:Qe,dataKey:Ne.dataKey,payload:Ne.payload,value:rs(Ne.payload,Ne.dataKey),name:Ne.name}))});else{var Ae;R.push(bC({tooltipEntrySettings:Z,dataKey:se,payload:be,value:rs(be,se),name:(Ae=rs(be,Ce))!==null&&Ae!==void 0?Ae:Z?.name}))}return R},I)}},aa=e=>{var t=Wn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Qp=e=>e.tooltip.settings.axisId,Ma=e=>{var t=aa(e),n=Qp(e);return Ng(e,t,n)},x2=st([Ma,Wn,mD,i2,aa],zD),cq=st([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),hq=st([aa,Qp],gD),b_=st([cq,Ma,hq],vD),dq=st([b_],xD),Pf=st([dq,wf],bD),b2=st([Pf,Ma,b_],wD),fq=st([Ma],h2),pq=st([Pf,b_,d_],PD),mq=st([pq,wf,aa],TD),gq=st([b_],_D),yq=st([Pf,Ma,gq,aa],CD),vq=st([ED,aa,Qp],Kp),_q=st([vq,aa],ID),xq=st([MD,aa,Qp],Kp),bq=st([xq,aa],kD),wq=st([AD,aa,Qp],Kp),Sq=st([wq,aa],DD),Pq=st([_q,Sq,bq],d2),Tq=st([Ma,fq,mq,yq,Pq],OD),nO=st([Ma,Wn,Pf,b2,d_,aa,Tq],RD),Cq=st([nO,Ma,x2],LD),Eq=st([Ma,nO,Cq,aa],jD),iO=e=>{var t=aa(e),n=Qp(e),a=!1;return $g(e,t,n,a)},aO=st([Ma,iO],f_),oO=st([Ma,x2,Eq,aO],p2),Mq=st([Wn,b2,Ma,aa],VD),Aq=st([Wn,b2,Ma,aa],UD),Iq=(e,t,n,a,h,g,p,o)=>{if(t){var{type:P}=t,E=Jh(e,o);if(a){var C=n==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,I=P==="category"&&a.bandwidth?a.bandwidth()/C:0;return I=o==="angleAxis"&&h!=null&&h?.length>=2?qs(h[0]-h[1])*2*I:I,E&&p?p.map((R,z)=>({coordinate:a(R)+I,value:R,index:z,offset:I})):a.domain().map((R,z)=>({coordinate:a(R)+I,value:g?g[R]:R,index:z,offset:I}))}}},ih=st([Wn,Ma,x2,oO,iO,Mq,Aq,aa],Iq),w2=st([WD,ZD,WG],(e,t,n)=>HD(n.shared,e,t)),sO=e=>e.tooltip.settings.trigger,S2=e=>e.tooltip.settings.defaultIndex,w_=st([Yp,w2,sO,S2],JD),bg=st([w_,Pf],_2),lO=st([ih,bg],KD),kq=st([w_],e=>{if(e)return e.dataKey}),uO=st([Yp,w2,sO,S2],tO),Dq=st([eh,th,Wn,Ea,ih,S2,uO,Vg],eO),Oq=st([w_,Dq],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Rq=st([w_],e=>e.active),zq=st([uO,bg,wf,Ma,lO,Vg,w2],rO),Lq=st([zq],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function $E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function VE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$E(Object(n),!0).forEach(function(a){jq(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$E(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function jq(e,t,n){return(t=Nq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nq(e){var t=Fq(e,"string");return typeof t=="symbol"?t:t+""}function Fq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bq=()=>or(Ma),$q=()=>{var e=Bq(),t=or(ih),n=or(oO);return $1(VE(VE({},e),{},{scale:n}),t)},Vq=()=>or(i2),P2=(e,t)=>t,cO=(e,t,n)=>n,T2=(e,t,n,a)=>a,Uq=st(ih,e=>Hv(e,t=>t.coordinate)),C2=st([Yp,P2,cO,T2],JD),hO=st([C2,Pf],_2),Gq=(e,t,n)=>{if(t!=null){var a=Yp(e);return t==="axis"?n==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:n==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},dO=st([Yp,P2,cO,T2],tO),Dv=st([eh,th,Wn,Ea,ih,T2,dO,Vg],eO),qq=st([C2,Dv],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),fO=st(ih,hO,KD),Wq=st([dO,hO,wf,Ma,fO,Vg,P2],rO),Zq=st([C2],e=>({isActive:e.active,activeIndex:e.index})),Hq=(e,t,n,a,h,g,p,o)=>{if(!(!e||!t||!a||!h||!g)){var P=n$(e.chartX,e.chartY,t,n,o);if(P){var E=a$(P,t),C=W8(E,p,g,a,h),I=i$(t,g,C,P);return{activeIndex:String(C),activeCoordinate:I}}}};function lb(){return lb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},lb.apply(null,arguments)}function UE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function Ny(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UE(Object(n),!0).forEach(function(a){Kq(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Kq(e,t,n){return(t=Xq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xq(e){var t=Yq(e,"string");return typeof t=="symbol"?t:t+""}function Yq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qq(e){var{coordinate:t,payload:n,index:a,offset:h,tooltipAxisBandSize:g,layout:p,cursor:o,tooltipEventType:P,chartName:E}=e,C=t,I=n,R=a;if(!o||!C||E!=="ScatterChart"&&P!=="axis")return null;var z,B;if(E==="ScatterChart")z=C,B=oV;else if(E==="BarChart")z=sV(p,C,h,g),B=GV;else if(p==="radial"){var{cx:U,cy:Z,radius:Q,startAngle:le,endAngle:se}=d3(C);z={cx:U,cy:Z,startAngle:le,endAngle:se,innerRadius:Q,outerRadius:Q},B=HV}else z={points:KV(p,C,h)},B=l3;var Ce=typeof o=="object"&&"className"in o?o.className:void 0,be=Ny(Ny(Ny(Ny({stroke:"#ccc",pointerEvents:"none"},h),z),Sn(o,!1)),{},{payload:I,payloadIndex:R,className:gn("recharts-tooltip-cursor",Ce)});return H.isValidElement(o)?H.cloneElement(o,be):H.createElement(B,be)}function Jq(e){var t=$q(),n=a3(),a=Iw(),h=Vq();return H.createElement(Qq,lb({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:a,tooltipAxisBandSize:t,chartName:h}))}var pO=H.createContext(null),eW=()=>H.useContext(pO),jx={exports:{}},GE;function tW(){return GE||(GE=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function h(P,E,C){this.fn=P,this.context=E,this.once=C||!1}function g(P,E,C,I,R){if(typeof C!="function")throw new TypeError("The listener must be a function");var z=new h(C,I||P,R),B=n?n+E:E;return P._events[B]?P._events[B].fn?P._events[B]=[P._events[B],z]:P._events[B].push(z):(P._events[B]=z,P._eventsCount++),P}function p(P,E){--P._eventsCount===0?P._events=new a:delete P._events[E]}function o(){this._events=new a,this._eventsCount=0}o.prototype.eventNames=function(){var E=[],C,I;if(this._eventsCount===0)return E;for(I in C=this._events)t.call(C,I)&&E.push(n?I.slice(1):I);return Object.getOwnPropertySymbols?E.concat(Object.getOwnPropertySymbols(C)):E},o.prototype.listeners=function(E){var C=n?n+E:E,I=this._events[C];if(!I)return[];if(I.fn)return[I.fn];for(var R=0,z=I.length,B=new Array(z);R<z;R++)B[R]=I[R].fn;return B},o.prototype.listenerCount=function(E){var C=n?n+E:E,I=this._events[C];return I?I.fn?1:I.length:0},o.prototype.emit=function(E,C,I,R,z,B){var U=n?n+E:E;if(!this._events[U])return!1;var Z=this._events[U],Q=arguments.length,le,se;if(Z.fn){switch(Z.once&&this.removeListener(E,Z.fn,void 0,!0),Q){case 1:return Z.fn.call(Z.context),!0;case 2:return Z.fn.call(Z.context,C),!0;case 3:return Z.fn.call(Z.context,C,I),!0;case 4:return Z.fn.call(Z.context,C,I,R),!0;case 5:return Z.fn.call(Z.context,C,I,R,z),!0;case 6:return Z.fn.call(Z.context,C,I,R,z,B),!0}for(se=1,le=new Array(Q-1);se<Q;se++)le[se-1]=arguments[se];Z.fn.apply(Z.context,le)}else{var Ce=Z.length,be;for(se=0;se<Ce;se++)switch(Z[se].once&&this.removeListener(E,Z[se].fn,void 0,!0),Q){case 1:Z[se].fn.call(Z[se].context);break;case 2:Z[se].fn.call(Z[se].context,C);break;case 3:Z[se].fn.call(Z[se].context,C,I);break;case 4:Z[se].fn.call(Z[se].context,C,I,R);break;default:if(!le)for(be=1,le=new Array(Q-1);be<Q;be++)le[be-1]=arguments[be];Z[se].fn.apply(Z[se].context,le)}}return!0},o.prototype.on=function(E,C,I){return g(this,E,C,I,!1)},o.prototype.once=function(E,C,I){return g(this,E,C,I,!0)},o.prototype.removeListener=function(E,C,I,R){var z=n?n+E:E;if(!this._events[z])return this;if(!C)return p(this,z),this;var B=this._events[z];if(B.fn)B.fn===C&&(!R||B.once)&&(!I||B.context===I)&&p(this,z);else{for(var U=0,Z=[],Q=B.length;U<Q;U++)(B[U].fn!==C||R&&!B[U].once||I&&B[U].context!==I)&&Z.push(B[U]);Z.length?this._events[z]=Z.length===1?Z[0]:Z:p(this,z)}return this},o.prototype.removeAllListeners=function(E){var C;return E?(C=n?n+E:E,this._events[C]&&p(this,C)):(this._events=new a,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(jx)),jx.exports}var rW=tW();const nW=Fl(rW);var wg=new nW,ub="recharts.syncEvent.tooltip",qE="recharts.syncEvent.brush";function iW(e,t){if(t){var n=Number.parseInt(t,10);if(!Hs(n))return e?.[n]}}var aW={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},mO=Ys({name:"options",initialState:aW,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),oW=mO.reducer,{createEventEmitter:sW}=mO.actions;function lW(e){return e.tooltip.syncInteraction}var uW={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},gO=Ys({name:"chartData",initialState:uW,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:a}=t.payload;n!=null&&(e.dataStartIndex=n),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:WE,setDataStartEndIndexes:cW,setComputedData:xY}=gO.actions,hW=gO.reducer,yO=()=>{};function dW(){var e=or(a2),t=or(o2),n=Ca(),a=or(cD),h=or(ih),g=Iw(),p=Ew(),o=or(P=>P.rootProps.className);H.useEffect(()=>{if(e==null)return yO;var P=(E,C,I)=>{if(t!==I&&e===E){if(a==="index"){n(C);return}if(h!=null){var R;if(typeof a=="function"){var z={activeTooltipIndex:C.payload.index==null?void 0:Number(C.payload.index),isTooltipActive:C.payload.active,activeIndex:C.payload.index==null?void 0:Number(C.payload.index),activeLabel:C.payload.label,activeDataKey:C.payload.dataKey,activeCoordinate:C.payload.coordinate},B=a(h,z);R=h[B]}else a==="value"&&(R=h.find(Ae=>String(Ae.value)===C.payload.label));var{coordinate:U}=C.payload;if(R==null||C.payload.active===!1||U==null||p==null){n(ob({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:Z,y:Q}=U,le=Math.min(Z,p.x+p.width),se=Math.min(Q,p.y+p.height),Ce={x:g==="horizontal"?R.coordinate:le,y:g==="horizontal"?se:R.coordinate},be=ob({active:C.payload.active,coordinate:Ce,dataKey:C.payload.dataKey,index:String(R.index),label:C.payload.label});n(be)}}};return wg.on(ub,P),()=>{wg.off(ub,P)}},[o,n,t,e,a,h,g,p])}function fW(){var e=or(a2),t=or(o2),n=Ca();H.useEffect(()=>{if(e==null)return yO;var a=(h,g,p)=>{t!==p&&e===h&&n(cW(g))};return wg.on(qE,a),()=>{wg.off(qE,a)}},[n,t,e])}function pW(){var e=Ca();H.useEffect(()=>{e(sW())},[e]),dW(),fW()}function mW(e,t,n,a,h,g){var p=or(R=>Gq(R,e,t)),o=or(o2),P=or(a2),E=or(cD),C=or(lW),I=C?.active;H.useEffect(()=>{if(!I&&P!=null&&o!=null){var R=ob({active:g,coordinate:n,dataKey:p,index:h,label:typeof a=="number"?String(a):a});wg.emit(ub,P,R,o)}},[I,n,p,h,a,o,P,E,g])}function ZE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function HE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZE(Object(n),!0).forEach(function(a){gW(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function gW(e,t,n){return(t=yW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yW(e){var t=vW(e,"string");return typeof t=="symbol"?t:t+""}function vW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _W(e){return e.dataKey}function xW(e,t){return H.isValidElement(e)?H.cloneElement(e,t):typeof e=="function"?H.createElement(e,t):H.createElement(N$,t)}var KE=[],bW={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Og.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function wW(e){var t=_f(e,bW),{active:n,allowEscapeViewBox:a,animationDuration:h,animationEasing:g,content:p,filterNull:o,isAnimationActive:P,offset:E,payloadUniqBy:C,position:I,reverseDirection:R,useTranslate3d:z,wrapperStyle:B,cursor:U,shared:Z,trigger:Q,defaultIndex:le,portal:se,axisId:Ce}=t,be=Ca(),Ae=typeof le=="number"?String(le):le;H.useEffect(()=>{be(XG({shared:Z,trigger:Q,axisId:Ce,active:n,defaultIndex:Ae}))},[be,Z,Q,Ce,n,Ae]);var Ne=Ew(),Qe=s3(),ht=qG(Z),{activeIndex:Et,isActive:vt}=or(tr=>Zq(tr,ht,Q,Ae)),It=or(tr=>Wq(tr,ht,Q,Ae)),Ft=or(tr=>fO(tr,ht,Q,Ae)),er=or(tr=>qq(tr,ht,Q,Ae)),lr=It,vr=eW(),Mt=n??vt,[ut,Ct]=Ak([lr,Mt]),wt=ht==="axis"?Ft:void 0;mW(ht,Q,er,wt,Et,Mt);var ze=se??vr;if(ze==null)return null;var $e=lr??KE;Mt||($e=KE),o&&$e.length&&($e=Pk(lr.filter(tr=>tr.value!=null&&(tr.hide!==!0||t.includeHidden)),C,_W));var Lt=$e.length>0,Xt=H.createElement(q$,{allowEscapeViewBox:a,animationDuration:h,animationEasing:g,isAnimationActive:P,active:Mt,coordinate:er,hasPayload:Lt,offset:E,position:I,reverseDirection:R,useTranslate3d:z,viewBox:Ne,wrapperStyle:B,lastBoundingBox:ut,innerRef:Ct,hasPortalFromProps:!!se},xW(p,HE(HE({},t),{},{payload:$e,label:wt,active:Mt,coordinate:er,accessibilityLayer:Qe})));return H.createElement(H.Fragment,null,rA.createPortal(Xt,ze),Mt&&H.createElement(Jq,{cursor:U,tooltipEventType:ht,coordinate:er,payload:lr,index:Et}))}var Nx={},Fx={},Bx={},XE;function SW(){return XE||(XE=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a,{signal:h,edges:g}={}){let p,o=null;const P=g!=null&&g.includes("leading"),E=g==null||g.includes("trailing"),C=()=>{o!==null&&(n.apply(p,o),p=void 0,o=null)},I=()=>{E&&C(),U()};let R=null;const z=()=>{R!=null&&clearTimeout(R),R=setTimeout(()=>{R=null,I()},a)},B=()=>{R!==null&&(clearTimeout(R),R=null)},U=()=>{B(),p=void 0,o=null},Z=()=>{C()},Q=function(...le){if(h?.aborted)return;p=this,o=le;const se=R==null;z(),P&&se&&C()};return Q.schedule=z,Q.cancel=U,Q.flush=Z,h?.addEventListener("abort",U,{once:!0}),Q}e.debounce=t}(Bx)),Bx}var YE;function PW(){return YE||(YE=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SW();function n(a,h=0,g={}){typeof g!="object"&&(g={});const{leading:p=!1,trailing:o=!0,maxWait:P}=g,E=Array(2);p&&(E[0]="leading"),o&&(E[1]="trailing");let C,I=null;const R=t.debounce(function(...U){C=a.apply(this,U),I=null},h,{edges:E}),z=function(...U){return P!=null&&(I===null&&(I=Date.now()),Date.now()-I>=P)?(C=a.apply(this,U),I=Date.now(),R.cancel(),R.schedule(),C):(R.apply(this,U),C)},B=()=>(R.flush(),C);return z.cancel=R.cancel,z.flush=B,z}e.debounce=n}(Fx)),Fx}var QE;function TW(){return QE||(QE=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PW();function n(a,h=0,g={}){const{leading:p=!0,trailing:o=!0}=g;return t.debounce(a,h,{leading:p,maxWait:h,trailing:o})}e.throttle=n}(Nx)),Nx}var $x,JE;function CW(){return JE||(JE=1,$x=TW().throttle),$x}var EW=CW();const MW=Fl(EW);var rg=function(t,n){for(var a=arguments.length,h=new Array(a>2?a-2:0),g=2;g<a;g++)h[g-2]=arguments[g]};function eM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function Vx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eM(Object(n),!0).forEach(function(a){AW(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eM(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function AW(e,t,n){return(t=IW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IW(e){var t=kW(e,"string");return typeof t=="symbol"?t:t+""}function kW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DW=H.forwardRef((e,t)=>{var{aspect:n,initialDimension:a={width:-1,height:-1},width:h="100%",height:g="100%",minWidth:p=0,minHeight:o,maxHeight:P,children:E,debounce:C=0,id:I,className:R,onResize:z,style:B={}}=e,U=H.useRef(null),Z=H.useRef();Z.current=z,H.useImperativeHandle(t,()=>U.current);var[Q,le]=H.useState({containerWidth:a.width,containerHeight:a.height}),se=H.useCallback((be,Ae)=>{le(Ne=>{var Qe=Math.round(be),ht=Math.round(Ae);return Ne.containerWidth===Qe&&Ne.containerHeight===ht?Ne:{containerWidth:Qe,containerHeight:ht}})},[]);H.useEffect(()=>{var be=ht=>{var Et,{width:vt,height:It}=ht[0].contentRect;se(vt,It),(Et=Z.current)===null||Et===void 0||Et.call(Z,vt,It)};C>0&&(be=MW(be,C,{trailing:!0,leading:!1}));var Ae=new ResizeObserver(be),{width:Ne,height:Qe}=U.current.getBoundingClientRect();return se(Ne,Qe),Ae.observe(U.current),()=>{Ae.disconnect()}},[se,C]);var Ce=H.useMemo(()=>{var{containerWidth:be,containerHeight:Ae}=Q;if(be<0||Ae<0)return null;rg(tf(h)||tf(g),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,h,g),rg(!n||n>0,"The aspect(%s) must be greater than zero.",n);var Ne=tf(h)?be:h,Qe=tf(g)?Ae:g;return n&&n>0&&(Ne?Qe=Ne/n:Qe&&(Ne=Qe*n),P&&Qe>P&&(Qe=P)),rg(Ne>0||Qe>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Ne,Qe,h,g,p,o,n),H.Children.map(E,ht=>H.cloneElement(ht,{width:Ne,height:Qe,style:Vx({width:Ne,height:Qe},ht.props.style)}))},[n,E,g,P,o,p,Q,h]);return H.createElement("div",{id:I?"".concat(I):void 0,className:gn("recharts-responsive-container",R),style:Vx(Vx({},B),{},{width:h,height:g,minWidth:p,minHeight:o,maxHeight:P}),ref:U},H.createElement("div",{style:{width:0,height:0,overflow:"visible"}},Ce))});function tM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function cb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tM(Object(n),!0).forEach(function(a){OW(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tM(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function OW(e,t,n){return(t=RW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RW(e){var t=zW(e,"string");return typeof t=="symbol"?t:t+""}function zW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xp={widthCache:{},cacheCount:0},LW=2e3,jW={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},rM="recharts_measurement_span";function NW(e){var t=cb({},e);return Object.keys(t).forEach(n=>{t[n]||delete t[n]}),t}var ng=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Og.isSsr)return{width:0,height:0};var a=NW(n),h=JSON.stringify({text:t,copyStyle:a});if(xp.widthCache[h])return xp.widthCache[h];try{var g=document.getElementById(rM);g||(g=document.createElement("span"),g.setAttribute("id",rM),g.setAttribute("aria-hidden","true"),document.body.appendChild(g));var p=cb(cb({},jW),a);Object.assign(g.style,p),g.textContent="".concat(t);var o=g.getBoundingClientRect(),P={width:o.width,height:o.height};return xp.widthCache[h]=P,++xp.cacheCount>LW&&(xp.cacheCount=0,xp.widthCache={}),P}catch{return{width:0,height:0}}},nM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,iM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FW=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,BW=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,vO={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},$W=Object.keys(vO),Cp="NaN";function VW(e,t){return e*vO[t]}class wo{static parse(t){var n,[,a,h]=(n=BW.exec(t))!==null&&n!==void 0?n:[];return new wo(parseFloat(a),h??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,Hs(t)&&(this.unit=""),n!==""&&!FW.test(n)&&(this.num=NaN,this.unit=""),$W.includes(n)&&(this.num=VW(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new wo(NaN,""):new wo(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new wo(NaN,""):new wo(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new wo(NaN,""):new wo(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new wo(NaN,""):new wo(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Hs(this.num)}}function _O(e){if(e.includes(Cp))return Cp;for(var t=e;t.includes("*")||t.includes("/");){var n,[,a,h,g]=(n=nM.exec(t))!==null&&n!==void 0?n:[],p=wo.parse(a??""),o=wo.parse(g??""),P=h==="*"?p.multiply(o):p.divide(o);if(P.isNaN())return Cp;t=t.replace(nM,P.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var E,[,C,I,R]=(E=iM.exec(t))!==null&&E!==void 0?E:[],z=wo.parse(C??""),B=wo.parse(R??""),U=I==="+"?z.add(B):z.subtract(B);if(U.isNaN())return Cp;t=t.replace(iM,U.toString())}return t}var aM=/\(([^()]*)\)/;function UW(e){for(var t=e,n;(n=aM.exec(t))!=null;){var[,a]=n;t=t.replace(aM,_O(a))}return t}function GW(e){var t=e.replace(/\s+/g,"");return t=UW(t),t=_O(t),t}function qW(e){try{return GW(e)}catch{return Cp}}function Ux(e){var t=qW(e.slice(5,-1));return t===Cp?"":t}var WW=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],ZW=["dx","dy","angle","className","breakAll"];function hb(){return hb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},hb.apply(null,arguments)}function oM(e,t){if(e==null)return{};var n,a,h=HW(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)n=g[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(h[n]=e[n])}return h}function HW(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var xO=/[ \f\n\r\t\v\u2028\u2029]+/,bO=e=>{var{children:t,breakAll:n,style:a}=e;try{var h=[];di(t)||(n?h=t.toString().split(""):h=t.toString().split(xO));var g=h.map(o=>({word:o,width:ng(o,a).width})),p=n?0:ng(" ",a).width;return{wordsWithComputedWidth:g,spaceWidth:p}}catch{return null}},KW=(e,t,n,a,h)=>{var{maxLines:g,children:p,style:o,breakAll:P}=e,E=Jt(g),C=p,I=function(){var vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return vt.reduce((It,Ft)=>{var{word:er,width:lr}=Ft,vr=It[It.length-1];if(vr&&(a==null||h||vr.width+lr+n<Number(a)))vr.words.push(er),vr.width+=lr+n;else{var Mt={words:[er],width:lr};It.push(Mt)}return It},[])},R=I(t),z=Et=>Et.reduce((vt,It)=>vt.width>It.width?vt:It);if(!E||h)return R;var B=R.length>g||z(R).width>Number(a);if(!B)return R;for(var U="…",Z=Et=>{var vt=C.slice(0,Et),It=bO({breakAll:P,style:o,children:vt+U}).wordsWithComputedWidth,Ft=I(It),er=Ft.length>g||z(Ft).width>Number(a);return[er,Ft]},Q=0,le=C.length-1,se=0,Ce;Q<=le&&se<=C.length-1;){var be=Math.floor((Q+le)/2),Ae=be-1,[Ne,Qe]=Z(Ae),[ht]=Z(be);if(!Ne&&!ht&&(Q=be+1),Ne&&ht&&(le=be-1),!Ne&&ht){Ce=Qe;break}se++}return Ce||R},sM=e=>{var t=di(e)?[]:e.toString().split(xO);return[{words:t}]},XW=e=>{var{width:t,scaleToFit:n,children:a,style:h,breakAll:g,maxLines:p}=e;if((t||n)&&!Og.isSsr){var o,P,E=bO({breakAll:g,children:a,style:h});if(E){var{wordsWithComputedWidth:C,spaceWidth:I}=E;o=C,P=I}else return sM(a);return KW({breakAll:g,children:a,maxLines:p,style:h},o,P,t,n)}return sM(a)},lM="#808080",E2=H.forwardRef((e,t)=>{var{x:n=0,y:a=0,lineHeight:h="1em",capHeight:g="0.71em",scaleToFit:p=!1,textAnchor:o="start",verticalAnchor:P="end",fill:E=lM}=e,C=oM(e,WW),I=H.useMemo(()=>XW({breakAll:C.breakAll,children:C.children,maxLines:C.maxLines,scaleToFit:p,style:C.style,width:C.width}),[C.breakAll,C.children,C.maxLines,p,C.style,C.width]),{dx:R,dy:z,angle:B,className:U,breakAll:Z}=C,Q=oM(C,ZW);if(!zu(n)||!zu(a))return null;var le=n+(Jt(R)?R:0),se=a+(Jt(z)?z:0),Ce;switch(P){case"start":Ce=Ux("calc(".concat(g,")"));break;case"middle":Ce=Ux("calc(".concat((I.length-1)/2," * -").concat(h," + (").concat(g," / 2))"));break;default:Ce=Ux("calc(".concat(I.length-1," * -").concat(h,")"));break}var be=[];if(p){var Ae=I[0].width,{width:Ne}=C;be.push("scale(".concat(Jt(Ne)?Ne/Ae:1,")"))}return B&&be.push("rotate(".concat(B,", ").concat(le,", ").concat(se,")")),be.length&&(Q.transform=be.join(" ")),H.createElement("text",hb({},Sn(Q,!0),{ref:t,x:le,y:se,className:gn("recharts-text",U),textAnchor:o,fill:E.includes("url")?lM:E}),I.map((Qe,ht)=>{var Et=Qe.words.join(Z?"":" ");return H.createElement("tspan",{x:le,dy:ht===0?Ce:h,key:"".concat(Et,"-").concat(ht)},Et)}))});E2.displayName="Text";var YW=["offset"],QW=["labelRef"];function uM(e,t){if(e==null)return{};var n,a,h=JW(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)n=g[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(h[n]=e[n])}return h}function JW(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function cM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function Pi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cM(Object(n),!0).forEach(function(a){eZ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cM(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function eZ(e,t,n){return(t=tZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tZ(e){var t=rZ(e,"string");return typeof t=="symbol"?t:t+""}function rZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bc(){return Bc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bc.apply(null,arguments)}var nZ=e=>{var{value:t,formatter:n}=e,a=di(e.children)?t:e.children;return typeof n=="function"?n(a):a},M2=e=>e!=null&&typeof e=="function",iZ=(e,t)=>{var n=qs(t-e),a=Math.min(Math.abs(t-e),360);return n*a},aZ=(e,t,n)=>{var{position:a,viewBox:h,offset:g,className:p}=e,{cx:o,cy:P,innerRadius:E,outerRadius:C,startAngle:I,endAngle:R,clockWise:z}=h,B=(E+C)/2,U=iZ(I,R),Z=U>=0?1:-1,Q,le;a==="insideStart"?(Q=I+Z*g,le=z):a==="insideEnd"?(Q=R-Z*g,le=!z):a==="end"&&(Q=R+Z*g,le=z),le=U<=0?le:!le;var se=Ta(o,P,B,Q),Ce=Ta(o,P,B,Q+(le?1:-1)*359),be="M".concat(se.x,",").concat(se.y,`
    A`).concat(B,",").concat(B,",0,1,").concat(le?0:1,`,
    `).concat(Ce.x,",").concat(Ce.y),Ae=di(e.id)?dg("recharts-radial-line-"):e.id;return H.createElement("text",Bc({},n,{dominantBaseline:"central",className:gn("recharts-radial-bar-label",p)}),H.createElement("defs",null,H.createElement("path",{id:Ae,d:be})),H.createElement("textPath",{xlinkHref:"#".concat(Ae)},t))},oZ=e=>{var{viewBox:t,offset:n,position:a}=e,{cx:h,cy:g,innerRadius:p,outerRadius:o,startAngle:P,endAngle:E}=t,C=(P+E)/2;if(a==="outside"){var{x:I,y:R}=Ta(h,g,o+n,C);return{x:I,y:R,textAnchor:I>=h?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:h,y:g,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:h,y:g,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:h,y:g,textAnchor:"middle",verticalAnchor:"end"};var z=(p+o)/2,{x:B,y:U}=Ta(h,g,z,C);return{x:B,y:U,textAnchor:"middle",verticalAnchor:"middle"}},sZ=(e,t)=>{var{parentViewBox:n,offset:a,position:h}=e,{x:g,y:p,width:o,height:P}=t,E=P>=0?1:-1,C=E*a,I=E>0?"end":"start",R=E>0?"start":"end",z=o>=0?1:-1,B=z*a,U=z>0?"end":"start",Z=z>0?"start":"end";if(h==="top"){var Q={x:g+o/2,y:p-E*a,textAnchor:"middle",verticalAnchor:I};return Pi(Pi({},Q),n?{height:Math.max(p-n.y,0),width:o}:{})}if(h==="bottom"){var le={x:g+o/2,y:p+P+C,textAnchor:"middle",verticalAnchor:R};return Pi(Pi({},le),n?{height:Math.max(n.y+n.height-(p+P),0),width:o}:{})}if(h==="left"){var se={x:g-B,y:p+P/2,textAnchor:U,verticalAnchor:"middle"};return Pi(Pi({},se),n?{width:Math.max(se.x-n.x,0),height:P}:{})}if(h==="right"){var Ce={x:g+o+B,y:p+P/2,textAnchor:Z,verticalAnchor:"middle"};return Pi(Pi({},Ce),n?{width:Math.max(n.x+n.width-Ce.x,0),height:P}:{})}var be=n?{width:o,height:P}:{};return h==="insideLeft"?Pi({x:g+B,y:p+P/2,textAnchor:Z,verticalAnchor:"middle"},be):h==="insideRight"?Pi({x:g+o-B,y:p+P/2,textAnchor:U,verticalAnchor:"middle"},be):h==="insideTop"?Pi({x:g+o/2,y:p+C,textAnchor:"middle",verticalAnchor:R},be):h==="insideBottom"?Pi({x:g+o/2,y:p+P-C,textAnchor:"middle",verticalAnchor:I},be):h==="insideTopLeft"?Pi({x:g+B,y:p+C,textAnchor:Z,verticalAnchor:R},be):h==="insideTopRight"?Pi({x:g+o-B,y:p+C,textAnchor:U,verticalAnchor:R},be):h==="insideBottomLeft"?Pi({x:g+B,y:p+P-C,textAnchor:Z,verticalAnchor:I},be):h==="insideBottomRight"?Pi({x:g+o-B,y:p+P-C,textAnchor:U,verticalAnchor:I},be):h&&typeof h=="object"&&(Jt(h.x)||tf(h.x))&&(Jt(h.y)||tf(h.y))?Pi({x:g+Kh(h.x,o),y:p+Kh(h.y,P),textAnchor:"end",verticalAnchor:"end"},be):Pi({x:g+o/2,y:p+P/2,textAnchor:"middle",verticalAnchor:"middle"},be)},lZ=e=>"cx"in e&&Jt(e.cx);function Jo(e){var{offset:t=5}=e,n=uM(e,YW),a=Pi({offset:t},n),{viewBox:h,position:g,value:p,children:o,content:P,className:E="",textBreakAll:C,labelRef:I}=a,R=Ew(),z=h||R;if(!z||di(p)&&di(o)&&!H.isValidElement(P)&&typeof P!="function")return null;if(H.isValidElement(P)){var{labelRef:B}=a,U=uM(a,QW);return H.cloneElement(P,U)}var Z;if(typeof P=="function"){if(Z=H.createElement(P,a),H.isValidElement(Z))return Z}else Z=nZ(a);var Q=lZ(z),le=Sn(a,!0);if(Q&&(g==="insideStart"||g==="insideEnd"||g==="end"))return aZ(a,Z,le);var se=Q?oZ(a):sZ(a,z);return H.createElement(E2,Bc({ref:I,className:gn("recharts-label",E)},le,se,{breakAll:C}),Z)}Jo.displayName="Label";var wO=e=>{var{cx:t,cy:n,angle:a,startAngle:h,endAngle:g,r:p,radius:o,innerRadius:P,outerRadius:E,x:C,y:I,top:R,left:z,width:B,height:U,clockWise:Z,labelViewBox:Q}=e;if(Q)return Q;if(Jt(B)&&Jt(U)){if(Jt(C)&&Jt(I))return{x:C,y:I,width:B,height:U};if(Jt(R)&&Jt(z))return{x:R,y:z,width:B,height:U}}if(Jt(C)&&Jt(I))return{x:C,y:I,width:0,height:0};if(Jt(t)&&Jt(n))return{cx:t,cy:n,startAngle:h||a||0,endAngle:g||a||0,innerRadius:P||0,outerRadius:E||o||p||0,clockWise:Z};if(e.viewBox)return e.viewBox},uZ=(e,t,n)=>{if(!e)return null;var a={viewBox:t,labelRef:n};return e===!0?H.createElement(Jo,Bc({key:"label-implicit"},a)):zu(e)?H.createElement(Jo,Bc({key:"label-implicit",value:e},a)):H.isValidElement(e)?e.type===Jo?H.cloneElement(e,Pi({key:"label-implicit"},a)):H.createElement(Jo,Bc({key:"label-implicit",content:e},a)):M2(e)?H.createElement(Jo,Bc({key:"label-implicit",content:e},a)):e&&typeof e=="object"?H.createElement(Jo,Bc({},e,{key:"label-implicit"},a)):null},cZ=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var{children:h,labelRef:g}=t,p=wO(t),o=YI(h,Jo).map((E,C)=>H.cloneElement(E,{viewBox:n||p,key:"label-".concat(C)}));if(!a)return o;var P=uZ(t.label,n||p,g);return[P,...o]};Jo.parseViewBox=wO;Jo.renderCallByParent=cZ;var Gx={},qx={},hM;function hZ(){return hM||(hM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t}(qx)),qx}var Wx={},dM;function dZ(){return dM||(dM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t}(Wx)),Wx}var fM;function fZ(){return fM||(fM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hZ(),n=dZ(),a=pw();function h(g){if(a.isArrayLike(g))return t.last(n.toArray(g))}e.last=h}(Gx)),Gx}var Zx,pM;function pZ(){return pM||(pM=1,Zx=fZ().last),Zx}var mZ=pZ();const gZ=Fl(mZ);var yZ=["valueAccessor"],vZ=["data","dataKey","clockWise","id","textBreakAll"];function Ov(){return Ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ov.apply(null,arguments)}function mM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function gM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mM(Object(n),!0).forEach(function(a){_Z(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mM(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function _Z(e,t,n){return(t=xZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xZ(e){var t=bZ(e,"string");return typeof t=="symbol"?t:t+""}function bZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yM(e,t){if(e==null)return{};var n,a,h=wZ(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)n=g[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(h[n]=e[n])}return h}function wZ(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var SZ=e=>Array.isArray(e.value)?gZ(e.value):e.value;function ff(e){var{valueAccessor:t=SZ}=e,n=yM(e,yZ),{data:a,dataKey:h,clockWise:g,id:p,textBreakAll:o}=n,P=yM(n,vZ);return!a||!a.length?null:H.createElement(Xh,{className:"recharts-label-list"},a.map((E,C)=>{var I=di(h)?t(E,C):rs(E&&E.payload,h),R=di(p)?{}:{id:"".concat(p,"-").concat(C)};return H.createElement(Jo,Ov({},Sn(E,!0),P,R,{parentViewBox:E.parentViewBox,value:I,textBreakAll:o,viewBox:Jo.parseViewBox(di(g)?E:gM(gM({},E),{},{clockWise:g})),key:"label-".concat(C),index:C}))}))}ff.displayName="LabelList";function PZ(e,t){return e?e===!0?H.createElement(ff,{key:"labelList-implicit",data:t}):H.isValidElement(e)||M2(e)?H.createElement(ff,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?H.createElement(ff,Ov({data:t},e,{key:"labelList-implicit"})):null:null}function TZ(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var{children:a}=e,h=YI(a,ff).map((p,o)=>H.cloneElement(p,{data:t,key:"labelList-".concat(o)}));if(!n)return h;var g=PZ(e.label,t);return[g,...h]}ff.renderCallByParent=TZ;function db(){return db=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},db.apply(null,arguments)}var SO=e=>{var{cx:t,cy:n,r:a,className:h}=e,g=gn("recharts-dot",h);return t===+t&&n===+n&&a===+a?H.createElement("circle",db({},Sn(e,!1),sw(e),{className:g,cx:t,cy:n,r:a})):null},CZ={radiusAxis:{},angleAxis:{}},PO=Ys({name:"polarAxis",initialState:CZ,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:bY,removeRadiusAxis:wY,addAngleAxis:SY,removeAngleAxis:PY}=PO.actions,EZ=PO.reducer,MZ={countOfBars:0,cartesianItems:[],polarItems:[]},TO=Ys({name:"graphicalItems",initialState:MZ,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:a}=t.payload,h=Gc(e).cartesianItems.indexOf(n);h>-1&&(e.cartesianItems[h]=a)},removeCartesianGraphicalItem(e,t){var n=Gc(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=Gc(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addBar:TY,removeBar:CY,addCartesianGraphicalItem:AZ,replaceCartesianGraphicalItem:IZ,removeCartesianGraphicalItem:kZ,addPolarGraphicalItem:EY,removePolarGraphicalItem:MY}=TO.actions,DZ=TO.reducer;function vM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function _M(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vM(Object(n),!0).forEach(function(a){OZ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vM(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function OZ(e,t,n){return(t=RZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RZ(e){var t=zZ(e,"string");return typeof t=="symbol"?t:t+""}function zZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LZ(e){var t=Ca(),n=H.useRef(null);return H.useEffect(()=>{var a=_M(_M({},e),{},{stackId:J8(e.stackId)});n.current===null?t(AZ(a)):n.current!==a&&t(IZ({prev:n.current,next:a})),n.current=a},[t,e]),H.useEffect(()=>()=>{n.current&&(t(kZ(n.current)),n.current=null)},[t]),null}function jZ(e){var{fn:t,args:n}=e,a=Ca(),h=To();return H.useEffect(()=>{if(!h){var g=t(n);return a(HG(g)),()=>{a(KG(g))}}},[t,n,a,h]),null}var NZ=()=>{};function FZ(e){var{legendPayload:t}=e,n=Ca(),a=To();return H.useEffect(()=>a?NZ:(n(x$(t)),()=>{n(b$(t))}),[n,a,t]),null}function BZ(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=H.useRef(dg(t)),a=H.useRef(e);return a.current!==e&&(n.current=dg(t),a.current=e),n.current}var $Z=st([Ea],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),VZ=st([$Z,eh,th],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),UZ=e=>{var t=To();return or(n=>x_(n,"xAxis",e,t))},GZ=e=>{var t=To();return or(n=>x_(n,"yAxis",e,t))},A2=()=>or(VZ),qZ=()=>or(Lq);function xM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function bM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xM(Object(n),!0).forEach(function(a){WZ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xM(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function WZ(e,t,n){return(t=ZZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZZ(e){var t=HZ(e,"string");return typeof t=="symbol"?t:t+""}function HZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KZ=e=>{var{point:t,childIndex:n,mainColor:a,activeDot:h,dataKey:g}=e;if(h===!1||t.x==null||t.y==null)return null;var p=bM(bM({index:n,dataKey:g,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Sn(h,!1)),sw(h)),o;return H.isValidElement(h)?o=H.cloneElement(h,p):typeof h=="function"?o=h(p):o=H.createElement(SO,p),H.createElement(Xh,{className:"recharts-active-dot"},o)};function XZ(e){var{points:t,mainColor:n,activeDot:a,itemDataKey:h}=e,g=or(bg),p=qZ();if(t==null||p==null)return null;var o=t.find(P=>p.includes(P.payload));return di(o)?null:KZ({point:o,childIndex:Number(g),mainColor:n,dataKey:h,activeDot:a})}var YZ=["children"];function QZ(e,t){if(e==null)return{};var n,a,h=JZ(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)n=g[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(h[n]=e[n])}return h}function JZ(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var wM=()=>{},CO=H.createContext({addErrorBar:wM,removeErrorBar:wM}),eH={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},EO=H.createContext(eH);function tH(e){var{children:t}=e,n=QZ(e,YZ);return H.createElement(EO.Provider,{value:n},t)}var rH=()=>H.useContext(EO),nH=e=>{var{children:t,xAxisId:n,yAxisId:a,zAxisId:h,dataKey:g,data:p,stackId:o,hide:P,type:E,barSize:C}=e,[I,R]=H.useState([]),z=H.useCallback(Z=>{R(Q=>[...Q,Z])},[R]),B=H.useCallback(Z=>{R(Q=>Q.filter(le=>le!==Z))},[R]),U=To();return H.createElement(CO.Provider,{value:{addErrorBar:z,removeErrorBar:B}},H.createElement(LZ,{type:E,data:p,xAxisId:n,yAxisId:a,zAxisId:h,dataKey:g,errorBars:I,stackId:o,hide:P,barSize:C,isPanorama:U}),t)};function iH(e){var{addErrorBar:t,removeErrorBar:n}=H.useContext(CO);return H.useEffect(()=>(t(e),()=>{n(e)}),[t,n,e]),null}var aH=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function MO(e,t,n){return(t=oH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oH(e){var t=sH(e,"string");return typeof t=="symbol"?t:t+""}function sH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sg(){return Sg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Sg.apply(null,arguments)}function lH(e,t){if(e==null)return{};var n,a,h=uH(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)n=g[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(h[n]=e[n])}return h}function uH(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function cH(e){var{direction:t,width:n,dataKey:a,isAnimationActive:h,animationBegin:g,animationDuration:p,animationEasing:o}=e,P=lH(e,aH),E=Sn(P,!1),{data:C,dataPointFormatter:I,xAxisId:R,yAxisId:z,errorBarOffset:B}=rH(),U=UZ(R),Z=GZ(z);if(U?.scale==null||Z?.scale==null||C==null||t==="x"&&U.type!=="number")return null;var Q=C.map(le=>{var{x:se,y:Ce,value:be,errorVal:Ae}=I(le,a,t);if(!Ae)return null;var Ne=[],Qe,ht;if(Array.isArray(Ae)?[Qe,ht]=Ae:Qe=ht=Ae,t==="x"){var{scale:Et}=U,vt=Ce+B,It=vt+n,Ft=vt-n,er=Et(be-Qe),lr=Et(be+ht);Ne.push({x1:lr,y1:It,x2:lr,y2:Ft}),Ne.push({x1:er,y1:vt,x2:lr,y2:vt}),Ne.push({x1:er,y1:It,x2:er,y2:Ft})}else if(t==="y"){var{scale:vr}=Z,Mt=se+B,ut=Mt-n,Ct=Mt+n,wt=vr(be-Qe),ze=vr(be+ht);Ne.push({x1:ut,y1:ze,x2:Ct,y2:ze}),Ne.push({x1:Mt,y1:wt,x2:Mt,y2:ze}),Ne.push({x1:ut,y1:wt,x2:Ct,y2:wt})}var $e="".concat(se+B,"px ").concat(Ce+B,"px");return H.createElement(Xh,Sg({className:"recharts-errorBar",key:"bar-".concat(Ne.map(Lt=>"".concat(Lt.x1,"-").concat(Lt.x2,"-").concat(Lt.y1,"-").concat(Lt.y2)))},E),Ne.map(Lt=>{var Xt=h?{transformOrigin:"".concat(Lt.x1-5,"px")}:void 0;return H.createElement(_v,{from:{transform:"scaleY(0)",transformOrigin:$e},to:{transform:"scaleY(1)",transformOrigin:$e},begin:g,easing:o,isActive:h,duration:p,key:"line-".concat(Lt.x1,"-").concat(Lt.x2,"-").concat(Lt.y1,"-").concat(Lt.y2),style:{transformOrigin:$e}},H.createElement("line",Sg({},Lt,{style:Xt})))}))});return H.createElement(Xh,{className:"recharts-errorBars"},Q)}var AO=H.createContext(void 0);function hH(e){var t=H.useContext(AO);return e??t??"x"}function dH(e){var{direction:t,children:n}=e;return H.createElement(AO.Provider,{value:t},n)}var IO={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function fH(e){var t=hH(e.direction),{width:n,isAnimationActive:a,animationBegin:h,animationDuration:g,animationEasing:p}=_f(e,IO);return H.createElement(H.Fragment,null,H.createElement(iH,{dataKey:e.dataKey,direction:t}),H.createElement(cH,Sg({},e,{direction:t,width:n,isAnimationActive:a,animationBegin:h,animationDuration:g,animationEasing:p})))}class kO extends H.Component{render(){return H.createElement(fH,this.props)}}MO(kO,"defaultProps",IO);MO(kO,"displayName","ErrorBar");function DO(e,t){var n,a,h=or(E=>nh(E,e)),g=or(E=>rd(E,t)),p=(n=h?.allowDataOverflow)!==null&&n!==void 0?n:Xo.allowDataOverflow,o=(a=g?.allowDataOverflow)!==null&&a!==void 0?a:Yo.allowDataOverflow,P=p||o;return{needClip:P,needClipX:p,needClipY:o}}function pH(e){var{xAxisId:t,yAxisId:n,clipPathId:a}=e,h=A2(),{needClipX:g,needClipY:p,needClip:o}=DO(t,n);if(!o)return null;var{x:P,y:E,width:C,height:I}=h;return H.createElement("clipPath",{id:"clipPath-".concat(a)},H.createElement("rect",{x:g?P:P-C/2,y:p?E:E-I/2,width:g?C:C*2,height:p?I:I*2}))}var mH=e=>{var{chartData:t}=e,n=Ca(),a=To();return H.useEffect(()=>a?()=>{}:(n(WE(t)),()=>{n(WE(void 0))}),[t,n,a]),null},SM={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},OO=Ys({name:"brush",initialState:SM,reducers:{setBrushSettings(e,t){return t.payload==null?SM:t.payload}}}),{setBrushSettings:AY}=OO.actions,gH=OO.reducer;function yH(e,t,n){return(t=vH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vH(e){var t=_H(e,"string");return typeof t=="symbol"?t:t+""}function _H(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class I2{static create(t){return new I2(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var h=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+h}case"end":{var g=this.bandwidth?this.bandwidth():0;return this.scale(t)+g}default:return this.scale(t)}if(n){var p=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+p}return this.scale(t)}}isInRange(t){var n=this.range(),a=n[0],h=n[n.length-1];return a<=h?t>=a&&t<=h:t>=h&&t<=a}}yH(I2,"EPS",1e-4);function xH(e){return(e%180+180)%180}var bH=function(t){var{width:n,height:a}=t,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,g=xH(h),p=g*Math.PI/180,o=Math.atan(a/n),P=p>o&&p<Math.PI-o?a/Math.sin(p):n/Math.cos(p);return Math.abs(P)},wH={dots:[],areas:[],lines:[]},RO=Ys({name:"referenceElements",initialState:wH,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Gc(e).dots.findIndex(a=>a===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Gc(e).areas.findIndex(a=>a===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Gc(e).lines.findIndex(a=>a===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:IY,removeDot:kY,addArea:DY,removeArea:OY,addLine:RY,removeLine:zY}=RO.actions,SH=RO.reducer,PH=H.createContext(void 0),TH=e=>{var{children:t}=e,[n]=H.useState("".concat(dg("recharts"),"-clip")),a=A2();if(a==null)return null;var{x:h,y:g,width:p,height:o}=a;return H.createElement(PH.Provider,{value:n},H.createElement("defs",null,H.createElement("clipPath",{id:n},H.createElement("rect",{x:h,y:g,height:o,width:p}))),t)};function Hx(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function zO(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var a=[],h=0;h<e.length;h+=t)a.push(e[h]);return a}function CH(e,t,n){var a={width:e.width+t.width,height:e.height+t.height};return bH(a,n)}function EH(e,t,n){var a=n==="width",{x:h,y:g,width:p,height:o}=e;return t===1?{start:a?h:g,end:a?h+p:g+o}:{start:a?h+p:g+o,end:a?h:g}}function Rv(e,t,n,a,h){if(e*t<e*a||e*t>e*h)return!1;var g=n();return e*(t-e*g/2-a)>=0&&e*(t+e*g/2-h)<=0}function MH(e,t){return zO(e,t+1)}function AH(e,t,n,a,h){for(var g=(a||[]).slice(),{start:p,end:o}=t,P=0,E=1,C=p,I=function(){var B=a?.[P];if(B===void 0)return{v:zO(a,E)};var U=P,Z,Q=()=>(Z===void 0&&(Z=n(B,U)),Z),le=B.coordinate,se=P===0||Rv(e,le,Q,C,o);se||(P=0,C=p,E+=1),se&&(C=le+e*(Q()/2+h),P+=E)},R;E<=g.length;)if(R=I(),R)return R.v;return[]}function PM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function La(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PM(Object(n),!0).forEach(function(a){IH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PM(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function IH(e,t,n){return(t=kH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kH(e){var t=DH(e,"string");return typeof t=="symbol"?t:t+""}function DH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OH(e,t,n,a,h){for(var g=(a||[]).slice(),p=g.length,{start:o}=t,{end:P}=t,E=function(R){var z=g[R],B,U=()=>(B===void 0&&(B=n(z,R)),B);if(R===p-1){var Z=e*(z.coordinate+e*U()/2-P);g[R]=z=La(La({},z),{},{tickCoord:Z>0?z.coordinate-Z*e:z.coordinate})}else g[R]=z=La(La({},z),{},{tickCoord:z.coordinate});var Q=Rv(e,z.tickCoord,U,o,P);Q&&(P=z.tickCoord-e*(U()/2+h),g[R]=La(La({},z),{},{isShow:!0}))},C=p-1;C>=0;C--)E(C);return g}function RH(e,t,n,a,h,g){var p=(a||[]).slice(),o=p.length,{start:P,end:E}=t;if(g){var C=a[o-1],I=n(C,o-1),R=e*(C.coordinate+e*I/2-E);p[o-1]=C=La(La({},C),{},{tickCoord:R>0?C.coordinate-R*e:C.coordinate});var z=Rv(e,C.tickCoord,()=>I,P,E);z&&(E=C.tickCoord-e*(I/2+h),p[o-1]=La(La({},C),{},{isShow:!0}))}for(var B=g?o-1:o,U=function(le){var se=p[le],Ce,be=()=>(Ce===void 0&&(Ce=n(se,le)),Ce);if(le===0){var Ae=e*(se.coordinate-e*be()/2-P);p[le]=se=La(La({},se),{},{tickCoord:Ae<0?se.coordinate-Ae*e:se.coordinate})}else p[le]=se=La(La({},se),{},{tickCoord:se.coordinate});var Ne=Rv(e,se.tickCoord,be,P,E);Ne&&(P=se.tickCoord+e*(be()/2+h),p[le]=La(La({},se),{},{isShow:!0}))},Z=0;Z<B;Z++)U(Z);return p}function k2(e,t,n){var{tick:a,ticks:h,viewBox:g,minTickGap:p,orientation:o,interval:P,tickFormatter:E,unit:C,angle:I}=e;if(!h||!h.length||!a)return[];if(Jt(P)||Og.isSsr){var R;return(R=MH(h,Jt(P)?P:0))!==null&&R!==void 0?R:[]}var z=[],B=o==="top"||o==="bottom"?"width":"height",U=C&&B==="width"?ng(C,{fontSize:t,letterSpacing:n}):{width:0,height:0},Z=(se,Ce)=>{var be=typeof E=="function"?E(se.value,Ce):se.value;return B==="width"?CH(ng(be,{fontSize:t,letterSpacing:n}),U,I):ng(be,{fontSize:t,letterSpacing:n})[B]},Q=h.length>=2?qs(h[1].coordinate-h[0].coordinate):1,le=EH(g,Q,B);return P==="equidistantPreserveStart"?AH(Q,le,Z,h,p):(P==="preserveStart"||P==="preserveStartEnd"?z=RH(Q,le,Z,h,p,P==="preserveStartEnd"):z=OH(Q,le,Z,h,p),z.filter(se=>se.isShow))}var zH=["viewBox"],LH=["viewBox"];function Ep(){return Ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ep.apply(null,arguments)}function TM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function Vi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TM(Object(n),!0).forEach(function(a){D2(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TM(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function CM(e,t){if(e==null)return{};var n,a,h=jH(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)n=g[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(h[n]=e[n])}return h}function jH(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function D2(e,t,n){return(t=NH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NH(e){var t=FH(e,"string");return typeof t=="symbol"?t:t+""}function FH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class nd extends H.Component{constructor(t){super(t),this.tickRefs=H.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:a}=t,h=CM(t,zH),g=this.props,{viewBox:p}=g,o=CM(g,LH);return!Hx(a,p)||!Hx(h,o)||!Hx(n,this.state)}getTickLineCoord(t){var{x:n,y:a,width:h,height:g,orientation:p,tickSize:o,mirror:P,tickMargin:E}=this.props,C,I,R,z,B,U,Z=P?-1:1,Q=t.tickSize||o,le=Jt(t.tickCoord)?t.tickCoord:t.coordinate;switch(p){case"top":C=I=t.coordinate,z=a+ +!P*g,R=z-Z*Q,U=R-Z*E,B=le;break;case"left":R=z=t.coordinate,I=n+ +!P*h,C=I-Z*Q,B=C-Z*E,U=le;break;case"right":R=z=t.coordinate,I=n+ +P*h,C=I+Z*Q,B=C+Z*E,U=le;break;default:C=I=t.coordinate,z=a+ +P*g,R=z+Z*Q,U=R+Z*E,B=le;break}return{line:{x1:C,y1:R,x2:I,y2:z},tick:{x:B,y:U}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props,a;switch(t){case"left":a=n?"start":"end";break;case"right":a=n?"end":"start";break;default:a="middle";break}return a}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:a,height:h,orientation:g,mirror:p,axisLine:o}=this.props,P=Vi(Vi(Vi({},Sn(this.props,!1)),Sn(o,!1)),{},{fill:"none"});if(g==="top"||g==="bottom"){var E=+(g==="top"&&!p||g==="bottom"&&p);P=Vi(Vi({},P),{},{x1:t,y1:n+E*h,x2:t+a,y2:n+E*h})}else{var C=+(g==="left"&&!p||g==="right"&&p);P=Vi(Vi({},P),{},{x1:t+C*a,y1:n,x2:t+C*a,y2:n+h})}return H.createElement("line",Ep({},P,{className:gn("recharts-cartesian-axis-line",pf(o,"className"))}))}static renderTickItem(t,n,a){var h,g=gn(n.className,"recharts-cartesian-axis-tick-value");if(H.isValidElement(t))h=H.cloneElement(t,Vi(Vi({},n),{},{className:g}));else if(typeof t=="function")h=t(Vi(Vi({},n),{},{className:g}));else{var p="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(p=gn(p,t.className)),h=H.createElement(E2,Ep({},n,{className:p}),a)}return h}renderTicks(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:h,stroke:g,tick:p,tickFormatter:o,unit:P}=this.props,E=k2(Vi(Vi({},this.props),{},{ticks:a}),t,n),C=this.getTickTextAnchor(),I=this.getTickVerticalAnchor(),R=Sn(this.props,!1),z=Sn(p,!1),B=Vi(Vi({},R),{},{fill:"none"},Sn(h,!1)),U=E.map((Z,Q)=>{var{line:le,tick:se}=this.getTickLineCoord(Z),Ce=Vi(Vi(Vi(Vi({textAnchor:C,verticalAnchor:I},R),{},{stroke:"none",fill:g},z),se),{},{index:Q,payload:Z,visibleTicksCount:E.length,tickFormatter:o});return H.createElement(Xh,Ep({className:"recharts-cartesian-axis-tick",key:"tick-".concat(Z.value,"-").concat(Z.coordinate,"-").concat(Z.tickCoord)},KI(this.props,Z,Q)),h&&H.createElement("line",Ep({},B,le,{className:gn("recharts-cartesian-axis-tick-line",pf(h,"className"))})),p&&nd.renderTickItem(p,Ce,"".concat(typeof o=="function"?o(Z.value,Q):Z.value).concat(P||"")))});return U.length>0?H.createElement("g",{className:"recharts-cartesian-axis-ticks"},U):null}render(){var{axisLine:t,width:n,height:a,className:h,hide:g}=this.props;if(g)return null;var{ticks:p}=this.props;return n!=null&&n<=0||a!=null&&a<=0?null:H.createElement(Xh,{className:gn("recharts-cartesian-axis",h),ref:o=>{if(o){var P=o.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(P);var E=P[0];if(E){var C=window.getComputedStyle(E).fontSize,I=window.getComputedStyle(E).letterSpacing;(C!==this.state.fontSize||I!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(E).fontSize,letterSpacing:window.getComputedStyle(E).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,p),Jo.renderCallByParent(this.props))}}D2(nd,"displayName","CartesianAxis");D2(nd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var BH=["x1","y1","x2","y2","key"],$H=["offset"],VH=["xAxisId","yAxisId"],UH=["xAxisId","yAxisId"];function EM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function ja(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EM(Object(n),!0).forEach(function(a){GH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EM(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function GH(e,t,n){return(t=qH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qH(e){var t=WH(e,"string");return typeof t=="symbol"?t:t+""}function WH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function of(){return of=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},of.apply(null,arguments)}function zv(e,t){if(e==null)return{};var n,a,h=ZH(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)n=g[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(h[n]=e[n])}return h}function ZH(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var HH=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:a,y:h,width:g,height:p,ry:o}=e;return H.createElement("rect",{x:a,y:h,ry:o,width:g,height:p,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function LO(e,t){var n;if(H.isValidElement(e))n=H.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:a,y1:h,x2:g,y2:p,key:o}=t,P=zv(t,BH),E=Sn(P,!1),{offset:C}=E,I=zv(E,$H);n=H.createElement("line",of({},I,{x1:a,y1:h,x2:g,y2:p,fill:"none",key:o}))}return n}function KH(e){var{x:t,width:n,horizontal:a=!0,horizontalPoints:h}=e;if(!a||!h||!h.length)return null;var{xAxisId:g,yAxisId:p}=e,o=zv(e,VH),P=h.map((E,C)=>{var I=ja(ja({},o),{},{x1:t,y1:E,x2:t+n,y2:E,key:"line-".concat(C),index:C});return LO(a,I)});return H.createElement("g",{className:"recharts-cartesian-grid-horizontal"},P)}function XH(e){var{y:t,height:n,vertical:a=!0,verticalPoints:h}=e;if(!a||!h||!h.length)return null;var{xAxisId:g,yAxisId:p}=e,o=zv(e,UH),P=h.map((E,C)=>{var I=ja(ja({},o),{},{x1:E,y1:t,x2:E,y2:t+n,key:"line-".concat(C),index:C});return LO(a,I)});return H.createElement("g",{className:"recharts-cartesian-grid-vertical"},P)}function YH(e){var{horizontalFill:t,fillOpacity:n,x:a,y:h,width:g,height:p,horizontalPoints:o,horizontal:P=!0}=e;if(!P||!t||!t.length)return null;var E=o.map(I=>Math.round(I+h-h)).sort((I,R)=>I-R);h!==E[0]&&E.unshift(0);var C=E.map((I,R)=>{var z=!E[R+1],B=z?h+p-I:E[R+1]-I;if(B<=0)return null;var U=R%t.length;return H.createElement("rect",{key:"react-".concat(R),y:I,x:a,height:B,width:g,stroke:"none",fill:t[U],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return H.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},C)}function QH(e){var{vertical:t=!0,verticalFill:n,fillOpacity:a,x:h,y:g,width:p,height:o,verticalPoints:P}=e;if(!t||!n||!n.length)return null;var E=P.map(I=>Math.round(I+h-h)).sort((I,R)=>I-R);h!==E[0]&&E.unshift(0);var C=E.map((I,R)=>{var z=!E[R+1],B=z?h+p-I:E[R+1]-I;if(B<=0)return null;var U=R%n.length;return H.createElement("rect",{key:"react-".concat(R),x:I,y:g,width:B,height:o,stroke:"none",fill:n[U],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return H.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},C)}var JH=(e,t)=>{var{xAxis:n,width:a,height:h,offset:g}=e;return e3(k2(ja(ja(ja({},nd.defaultProps),n),{},{ticks:t3(n),viewBox:{x:0,y:0,width:a,height:h}})),g.left,g.left+g.width,t)},eK=(e,t)=>{var{yAxis:n,width:a,height:h,offset:g}=e;return e3(k2(ja(ja(ja({},nd.defaultProps),n),{},{ticks:t3(n),viewBox:{x:0,y:0,width:a,height:h}})),g.top,g.top+g.height,t)},tK={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function jO(e){var t=Mw(),n=Aw(),a=a3(),h=ja(ja({},_f(e,tK)),{},{x:Jt(e.x)?e.x:a.left,y:Jt(e.y)?e.y:a.top,width:Jt(e.width)?e.width:a.width,height:Jt(e.height)?e.height:a.height}),{xAxisId:g,yAxisId:p,x:o,y:P,width:E,height:C,syncWithTicks:I,horizontalValues:R,verticalValues:z}=h,B=To(),U=or(ht=>jE(ht,"xAxis",g,B)),Z=or(ht=>jE(ht,"yAxis",p,B));if(!Jt(E)||E<=0||!Jt(C)||C<=0||!Jt(o)||o!==+o||!Jt(P)||P!==+P)return null;var Q=h.verticalCoordinatesGenerator||JH,le=h.horizontalCoordinatesGenerator||eK,{horizontalPoints:se,verticalPoints:Ce}=h;if((!se||!se.length)&&typeof le=="function"){var be=R&&R.length,Ae=le({yAxis:Z?ja(ja({},Z),{},{ticks:be?R:Z.ticks}):void 0,width:t,height:n,offset:a},be?!0:I);rg(Array.isArray(Ae),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof Ae,"]")),Array.isArray(Ae)&&(se=Ae)}if((!Ce||!Ce.length)&&typeof Q=="function"){var Ne=z&&z.length,Qe=Q({xAxis:U?ja(ja({},U),{},{ticks:Ne?z:U.ticks}):void 0,width:t,height:n,offset:a},Ne?!0:I);rg(Array.isArray(Qe),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof Qe,"]")),Array.isArray(Qe)&&(Ce=Qe)}return H.createElement("g",{className:"recharts-cartesian-grid"},H.createElement(HH,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),H.createElement(YH,of({},h,{horizontalPoints:se})),H.createElement(QH,of({},h,{verticalPoints:Ce})),H.createElement(KH,of({},h,{offset:a,horizontalPoints:se,xAxis:U,yAxis:Z})),H.createElement(XH,of({},h,{offset:a,verticalPoints:Ce,xAxis:U,yAxis:Z})))}jO.displayName="CartesianGrid";var NO=(e,t,n,a)=>x_(e,"xAxis",t,a),FO=(e,t,n,a)=>qD(e,"xAxis",t,a),BO=(e,t,n,a)=>x_(e,"yAxis",n,a),$O=(e,t,n,a)=>qD(e,"yAxis",n,a),rK=st([Wn,NO,BO,FO,$O],(e,t,n,a,h)=>Jh(e,"xAxis")?$1(t,a,!1):$1(n,h,!1)),nK=(e,t,n,a,h)=>h,iK=st([yD,nK],(e,t)=>{if(e.some(n=>n.type==="line"&&t.dataKey===n.dataKey&&t.data===n.data))return t}),aK=st([Wn,NO,BO,FO,$O,iK,rK,K3],(e,t,n,a,h,g,p,o)=>{var{chartData:P,dataStartIndex:E,dataEndIndex:C}=o;if(!(g==null||t==null||n==null||a==null||h==null||a.length===0||h.length===0||p==null)){var{dataKey:I,data:R}=g,z;if(R!=null&&R.length>0?z=R:z=P?.slice(E,C+1),z!=null)return PK({layout:e,xAxis:t,yAxis:n,xAxisTicks:a,yAxisTicks:h,dataKey:I,bandSize:p,displayedData:z})}}),oK=["type","layout","connectNulls","needClip"],sK=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId"];function VO(e,t){if(e==null)return{};var n,a,h=lK(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)n=g[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(h[n]=e[n])}return h}function lK(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function MM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function Rl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MM(Object(n),!0).forEach(function(a){S_(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MM(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function S_(e,t,n){return(t=uK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uK(e){var t=cK(e,"string");return typeof t=="symbol"?t:t+""}function cK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bp(){return Bp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bp.apply(null,arguments)}var hK=e=>{var{dataKey:t,name:n,stroke:a,legendType:h,hide:g}=e;return[{inactive:g,dataKey:t,type:h,color:a,value:r3(n,t),payload:e}]};function dK(e){var{dataKey:t,data:n,stroke:a,strokeWidth:h,fill:g,name:p,hide:o,unit:P}=e;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:a,strokeWidth:h,fill:g,dataKey:t,nameKey:void 0,name:r3(p,t),hide:o,type:e.tooltipType,color:e.stroke,unit:P}}}var UO=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function fK(e,t){for(var n=e.length%2!==0?[...e,0]:e,a=[],h=0;h<t;++h)a=[...a,...n];return a}var pK=(e,t,n)=>{var a=n.reduce((I,R)=>I+R);if(!a)return UO(t,e);for(var h=Math.floor(e/a),g=e%a,p=t-e,o=[],P=0,E=0;P<n.length;E+=n[P],++P)if(E+n[P]>g){o=[...n.slice(0,P),g-E];break}var C=o.length%2===0?[0,p]:[p];return[...fK(n,h),...o,...C].map(I=>"".concat(I,"px")).join(", ")};function mK(e,t){var n;if(H.isValidElement(e))n=H.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var a=gn("recharts-line-dot",typeof e!="boolean"?e.className:"");n=H.createElement(SO,Bp({},t,{className:a}))}return n}function gK(e,t){return e==null?!1:t?!0:e.length===1}function yK(e){var{clipPathId:t,points:n,props:a}=e,{dot:h,dataKey:g,needClip:p}=a;if(!gK(n,h))return null;var o=QI(h),P=Sn(a,!1),E=Sn(h,!0),C=n.map((R,z)=>{var B=Rl(Rl(Rl({key:"dot-".concat(z),r:3},P),E),{},{index:z,cx:R.x,cy:R.y,dataKey:g,value:R.value,payload:R.payload,points:n});return mK(h,B)}),I={clipPath:p?"url(#clipPath-".concat(o?"":"dots-").concat(t,")"):null};return H.createElement(Xh,Bp({className:"recharts-line-dots",key:"dots"},I),C)}function fb(e){var{clipPathId:t,pathRef:n,points:a,strokeDasharray:h,props:g,showLabels:p}=e,{type:o,layout:P,connectNulls:E,needClip:C}=g,I=VO(g,oK),R=Rl(Rl({},Sn(I,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:C?"url(#clipPath-".concat(t,")"):null,points:a,type:o,layout:P,connectNulls:E,strokeDasharray:h??g.strokeDasharray});return H.createElement(H.Fragment,null,a?.length>1&&H.createElement(l3,Bp({},R,{pathRef:n})),H.createElement(yK,{points:a,clipPathId:t,props:g}),p&&ff.renderCallByParent(g,a))}function vK(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function _K(e){var{clipPathId:t,props:n,pathRef:a,previousPointsRef:h,longestAnimatedLengthRef:g}=e,{points:p,strokeDasharray:o,isAnimationActive:P,animationBegin:E,animationDuration:C,animationEasing:I,animateNewValues:R,width:z,height:B,onAnimationEnd:U,onAnimationStart:Z}=n,Q=h.current,le=BZ(n,"recharts-line-"),[se,Ce]=H.useState(!1),be=H.useCallback(()=>{typeof U=="function"&&U(),Ce(!1)},[U]),Ae=H.useCallback(()=>{typeof Z=="function"&&Z(),Ce(!0)},[Z]),Ne=vK(a.current),Qe=g.current;return H.createElement(_v,{begin:E,duration:C,isActive:P,easing:I,from:{t:0},to:{t:1},onAnimationEnd:be,onAnimationStart:Ae,key:le},ht=>{var{t:Et}=ht,vt=Bm(Qe,Ne+Qe),It=Math.min(vt(Et),Ne),Ft;if(o){var er="".concat(o).split(/[,\s]+/gim).map(Mt=>parseFloat(Mt));Ft=pK(It,Ne,er)}else Ft=UO(Ne,It);if(Q){var lr=Q.length/p.length,vr=Et===1?p:p.map((Mt,ut)=>{var Ct=Math.floor(ut*lr);if(Q[Ct]){var wt=Q[Ct],ze=Bm(wt.x,Mt.x),$e=Bm(wt.y,Mt.y);return Rl(Rl({},Mt),{},{x:ze(Et),y:$e(Et)})}if(R){var Lt=Bm(z*2,Mt.x),Xt=Bm(B/2,Mt.y);return Rl(Rl({},Mt),{},{x:Lt(Et),y:Xt(Et)})}return Rl(Rl({},Mt),{},{x:Mt.x,y:Mt.y})});return h.current=vr,H.createElement(fb,{props:n,points:vr,clipPathId:t,pathRef:a,showLabels:!se,strokeDasharray:Ft})}return Et>0&&Ne>0&&(h.current=p,g.current=It),H.createElement(fb,{props:n,points:p,clipPathId:t,pathRef:a,showLabels:!se,strokeDasharray:Ft})})}function xK(e){var{clipPathId:t,props:n}=e,{points:a,isAnimationActive:h}=n,g=H.useRef(null),p=H.useRef(0),o=H.useRef(null),P=g.current;return h&&a&&a.length&&P!==a?H.createElement(_K,{props:n,clipPathId:t,previousPointsRef:g,longestAnimatedLengthRef:p,pathRef:o}):H.createElement(fb,{props:n,points:a,clipPathId:t,pathRef:o,showLabels:!0})}var bK=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:rs(e.payload,t)});class wK extends H.Component{constructor(){super(...arguments),S_(this,"id",dg("recharts-line-"))}render(){var t,{hide:n,dot:a,points:h,className:g,xAxisId:p,yAxisId:o,top:P,left:E,width:C,height:I,id:R,needClip:z,layout:B}=this.props;if(n)return null;var U=gn("recharts-line",g),Z=di(R)?this.id:R,{r:Q=3,strokeWidth:le=2}=(t=Sn(a,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},se=QI(a),Ce=Q*2+le;return H.createElement(H.Fragment,null,H.createElement(Xh,{className:U},z&&H.createElement("defs",null,H.createElement(pH,{clipPathId:Z,xAxisId:p,yAxisId:o}),!se&&H.createElement("clipPath",{id:"clipPath-dots-".concat(Z)},H.createElement("rect",{x:E-Ce/2,y:P-Ce/2,width:C+Ce,height:I+Ce}))),H.createElement(xK,{props:this.props,clipPathId:Z}),H.createElement(dH,{direction:B==="horizontal"?"y":"x"},H.createElement(tH,{xAxisId:p,yAxisId:o,data:h,dataPointFormatter:bK,errorBarOffset:0},this.props.children))),H.createElement(XZ,{activeDot:this.props.activeDot,points:h,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var GO={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Og.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function SK(e){var t=_f(e,GO),{activeDot:n,animateNewValues:a,animationBegin:h,animationDuration:g,animationEasing:p,connectNulls:o,dot:P,hide:E,isAnimationActive:C,label:I,legendType:R,xAxisId:z,yAxisId:B}=t,U=VO(t,sK),{needClip:Z}=DO(z,B),{height:Q,width:le,x:se,y:Ce}=A2(),be=Iw(),Ae=To(),Ne=H.useMemo(()=>({dataKey:e.dataKey,data:e.data}),[e.dataKey,e.data]),Qe=or(ht=>aK(ht,z,B,Ae,Ne));return be!=="horizontal"&&be!=="vertical"?null:H.createElement(wK,Bp({},U,{connectNulls:o,dot:P,activeDot:n,animateNewValues:a,animationBegin:h,animationDuration:g,animationEasing:p,isAnimationActive:C,hide:E,label:I,legendType:R,xAxisId:z,yAxisId:B,points:Qe,layout:be,height:Q,width:le,left:se,top:Ce,needClip:Z}))}function PK(e){var{layout:t,xAxis:n,yAxis:a,xAxisTicks:h,yAxisTicks:g,dataKey:p,bandSize:o,displayedData:P}=e;return P.map((E,C)=>{var I=rs(E,p);return t==="horizontal"?{x:vC({axis:n,ticks:h,bandSize:o,entry:E,index:C}),y:di(I)?null:a.scale(I),value:I,payload:E}:{x:di(I)?null:n.scale(I),y:vC({axis:a,ticks:g,bandSize:o,entry:E,index:C}),value:I,payload:E}})}class ig extends H.PureComponent{render(){return H.createElement(nH,{type:"line",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},H.createElement(FZ,{legendPayload:hK(this.props)}),H.createElement(jZ,{fn:dK,args:this.props}),H.createElement(SK,this.props))}}S_(ig,"displayName","Line");S_(ig,"defaultProps",GO);function AM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function IM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AM(Object(n),!0).forEach(function(a){TK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AM(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function TK(e,t,n){return(t=CK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CK(e){var t=EK(e,"string");return typeof t=="symbol"?t:t+""}function EK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MK={xAxis:{},yAxis:{},zAxis:{}},qO=Ys({name:"cartesianAxis",initialState:MK,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:a}=t.payload;e.yAxis[n]&&(e.yAxis[n]=IM(IM({},e.yAxis[n]),{},{width:a}))}}}),{addXAxis:AK,removeXAxis:IK,addYAxis:kK,removeYAxis:DK,addZAxis:LY,removeZAxis:jY,updateYAxisWidth:OK}=qO.actions,RK=qO.reducer,zK=["children"],LK=["dangerouslySetInnerHTML","ticks"];function WO(e,t,n){return(t=jK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jK(e){var t=NK(e,"string");return typeof t=="symbol"?t:t+""}function NK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pb(){return pb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pb.apply(null,arguments)}function ZO(e,t){if(e==null)return{};var n,a,h=FK(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)n=g[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(h[n]=e[n])}return h}function FK(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function BK(e){var t=Ca(),n=H.useMemo(()=>{var{children:g}=e,p=ZO(e,zK);return p},[e]),a=or(g=>nh(g,n.id)),h=n===a;return H.useEffect(()=>(t(AK(n)),()=>{t(IK(n))}),[n,t]),h?e.children:null}var $K=e=>{var{xAxisId:t,className:n}=e,a=or(i3),h=To(),g="xAxis",p=or(z=>Xp(z,g,t,h)),o=or(z=>GD(z,g,t,h)),P=or(z=>OG(z,t)),E=or(z=>NG(z,t));if(P==null||E==null)return null;var{dangerouslySetInnerHTML:C,ticks:I}=e,R=ZO(e,LK);return H.createElement(nd,pb({},R,{scale:p,x:E.x,y:E.y,width:P.width,height:P.height,className:gn("recharts-".concat(g," ").concat(g),n),viewBox:a,ticks:o}))},VK=e=>{var t,n,a,h,g;return H.createElement(BK,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(h=e.minTickGap)!==null&&h!==void 0?h:5,tick:(g=e.tick)!==null&&g!==void 0?g:!0,tickFormatter:e.tickFormatter},H.createElement($K,e))};class O2 extends H.Component{render(){return H.createElement(VK,this.props)}}WO(O2,"displayName","XAxis");WO(O2,"defaultProps",{allowDataOverflow:Xo.allowDataOverflow,allowDecimals:Xo.allowDecimals,allowDuplicatedCategory:Xo.allowDuplicatedCategory,height:Xo.height,hide:!1,mirror:Xo.mirror,orientation:Xo.orientation,padding:Xo.padding,reversed:Xo.reversed,scale:Xo.scale,tickCount:Xo.tickCount,type:Xo.type,xAxisId:0});var UK=e=>{var{ticks:t,label:n,labelGapWithTick:a=5,tickSize:h=0,tickMargin:g=0}=e,p=0;if(t){t.forEach(C=>{if(C){var I=C.getBoundingClientRect();I.width>p&&(p=I.width)}});var o=n?n.getBoundingClientRect().width:0,P=h+g,E=p+P+o+(n?a:0);return Math.round(E)}return 0},GK=["dangerouslySetInnerHTML","ticks"];function HO(e,t,n){return(t=qK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qK(e){var t=WK(e,"string");return typeof t=="symbol"?t:t+""}function WK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mb(){return mb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mb.apply(null,arguments)}function ZK(e,t){if(e==null)return{};var n,a,h=HK(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)n=g[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(h[n]=e[n])}return h}function HK(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function KK(e){var t=Ca();return H.useEffect(()=>(t(kK(e)),()=>{t(DK(e))}),[e,t]),null}var XK=e=>{var t,{yAxisId:n,className:a,width:h,label:g}=e,p=H.useRef(null),o=H.useRef(null),P=or(i3),E=To(),C=Ca(),I="yAxis",R=or(se=>Xp(se,I,n,E)),z=or(se=>BG(se,n)),B=or(se=>FG(se,n)),U=or(se=>GD(se,I,n,E));if(H.useLayoutEffect(()=>{var se;if(!(h!=="auto"||!z||M2(g)||H.isValidElement(g))){var Ce=p.current,be=Ce==null||(se=Ce.tickRefs)===null||se===void 0?void 0:se.current,{tickSize:Ae,tickMargin:Ne}=Ce.props,Qe=UK({ticks:be,label:o.current,labelGapWithTick:5,tickSize:Ae,tickMargin:Ne});Math.round(z.width)!==Math.round(Qe)&&C(OK({id:n,width:Qe}))}},[p,p==null||(t=p.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,z?.width,z,C,g,n,h]),z==null||B==null)return null;var{dangerouslySetInnerHTML:Z,ticks:Q}=e,le=ZK(e,GK);return H.createElement(nd,mb({},le,{ref:p,labelRef:o,scale:R,x:B.x,y:B.y,width:z.width,height:z.height,className:gn("recharts-".concat(I," ").concat(I),a),viewBox:P,ticks:U}))},YK=e=>{var t,n,a,h,g;return H.createElement(H.Fragment,null,H.createElement(KK,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(h=e.minTickGap)!==null&&h!==void 0?h:5,tick:(g=e.tick)!==null&&g!==void 0?g:!0,tickFormatter:e.tickFormatter}),H.createElement(XK,e))},QK={allowDataOverflow:Yo.allowDataOverflow,allowDecimals:Yo.allowDecimals,allowDuplicatedCategory:Yo.allowDuplicatedCategory,hide:!1,mirror:Yo.mirror,orientation:Yo.orientation,padding:Yo.padding,reversed:Yo.reversed,scale:Yo.scale,tickCount:Yo.tickCount,type:Yo.type,width:Yo.width,yAxisId:0};class Lv extends H.Component{render(){return H.createElement(YK,this.props)}}HO(Lv,"displayName","YAxis");HO(Lv,"defaultProps",QK);var Kx={exports:{}},Xx={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kM;function JK(){if(kM)return Xx;kM=1;var e=$p();function t(P,E){return P===E&&(P!==0||1/P===1/E)||P!==P&&E!==E}var n=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,h=e.useRef,g=e.useEffect,p=e.useMemo,o=e.useDebugValue;return Xx.useSyncExternalStoreWithSelector=function(P,E,C,I,R){var z=h(null);if(z.current===null){var B={hasValue:!1,value:null};z.current=B}else B=z.current;z=p(function(){function Z(be){if(!Q){if(Q=!0,le=be,be=I(be),R!==void 0&&B.hasValue){var Ae=B.value;if(R(Ae,be))return se=Ae}return se=be}if(Ae=se,n(le,be))return Ae;var Ne=I(be);return R!==void 0&&R(Ae,Ne)?(le=be,Ae):(le=be,se=Ne)}var Q=!1,le,se,Ce=C===void 0?null:C;return[function(){return Z(E())},Ce===null?void 0:function(){return Z(Ce())}]},[E,C,I,R]);var U=a(P,z[0],z[1]);return g(function(){B.hasValue=!0,B.value=U},[U]),o(U),U},Xx}var DM;function eX(){return DM||(DM=1,Kx.exports=JK()),Kx.exports}eX();function tX(e){e()}function rX(){let e=null,t=null;return{clear(){e=null,t=null},notify(){tX(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let a=e;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0;const h=t={callback:n,next:null,prev:t};return h.prev?h.prev.next=h:e=h,function(){!a||e===null||(a=!1,h.next?h.next.prev=h.prev:t=h.prev,h.prev?h.prev.next=h.next:e=h.next)}}}}var OM={notify(){},get:()=>[]};function nX(e,t){let n,a=OM,h=0,g=!1;function p(U){C();const Z=a.subscribe(U);let Q=!1;return()=>{Q||(Q=!0,Z(),I())}}function o(){a.notify()}function P(){B.onStateChange&&B.onStateChange()}function E(){return g}function C(){h++,n||(n=e.subscribe(P),a=rX())}function I(){h--,n&&h===0&&(n(),n=void 0,a.clear(),a=OM)}function R(){g||(g=!0,C())}function z(){g&&(g=!1,I())}const B={addNestedSub:p,notifyNestedSubs:o,handleChangeWrapper:P,isSubscribed:E,trySubscribe:R,tryUnsubscribe:z,getListeners:()=>a};return B}var iX=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aX=iX(),oX=()=>typeof navigator<"u"&&navigator.product==="ReactNative",sX=oX(),lX=()=>aX||sX?H.useLayoutEffect:H.useEffect,uX=lX(),cX=Symbol.for("react-redux-context"),hX=typeof globalThis<"u"?globalThis:{};function dX(){if(!H.createContext)return{};const e=hX[cX]??=new Map;let t=e.get(H.createContext);return t||(t=H.createContext(null),e.set(H.createContext,t)),t}var fX=dX();function pX(e){const{children:t,context:n,serverState:a,store:h}=e,g=H.useMemo(()=>{const P=nX(h);return{store:h,subscription:P,getServerState:a?()=>a:void 0}},[h,a]),p=H.useMemo(()=>h.getState(),[h]);uX(()=>{const{subscription:P}=g;return P.onStateChange=P.notifyNestedSubs,P.trySubscribe(),p!==h.getState()&&P.notifyNestedSubs(),()=>{P.tryUnsubscribe(),P.onStateChange=void 0}},[g,p]);const o=n||fX;return H.createElement(o.Provider,{value:g},t)}var mX=pX,gX=(e,t)=>t,R2=st([gX,Wn,KU,aa,aO,ih,Uq,Ea],Hq),z2=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/a)}},KO=Ks("mouseClick"),XO=Dg();XO.startListening({actionCreator:KO,effect:(e,t)=>{var n=e.payload,a=R2(t.getState(),z2(n));a?.activeIndex!=null&&t.dispatch(QG({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var gb=Ks("mouseMove"),YO=Dg();YO.startListening({actionCreator:gb,effect:(e,t)=>{var n=e.payload,a=t.getState(),h=v2(a,a.tooltip.settings.shared),g=R2(a,z2(n));h==="axis"&&(g?.activeIndex!=null?t.dispatch(QD({activeIndex:g.activeIndex,activeDataKey:void 0,activeCoordinate:g.activeCoordinate})):t.dispatch(YD()))}});function yX(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var RM={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},QO=Ys({name:"rootProps",initialState:RM,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:RM.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),vX=QO.reducer,{updateOptions:_X}=QO.actions,JO=Ys({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:NY}=JO.actions,xX=JO.reducer,e4=Ks("keyDown"),t4=Ks("focus"),L2=Dg();L2.startListening({actionCreator:e4,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:h}=n.tooltip,g=e.payload;if(!(g!=="ArrowRight"&&g!=="ArrowLeft"&&g!=="Enter")){var p=Number(_2(h,Pf(n))),o=ih(n);if(g==="Enter"){var P=Dv(n,"axis","hover",String(h.index));t.dispatch(sb({active:!h.active,activeIndex:h.index,activeDataKey:h.dataKey,activeCoordinate:P}));return}var E=GG(n),C=E==="left-to-right"?1:-1,I=g==="ArrowRight"?1:-1,R=p+I*C;if(!(o==null||R>=o.length||R<0)){var z=Dv(n,"axis","hover",String(R));t.dispatch(sb({active:!0,activeIndex:R.toString(),activeDataKey:void 0,activeCoordinate:z}))}}}}});L2.startListening({actionCreator:t4,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:h}=n.tooltip;if(!h.active&&h.index==null){var g="0",p=Dv(n,"axis","hover",String(g));t.dispatch(sb({activeDataKey:void 0,active:!0,activeIndex:g,activeCoordinate:p}))}}}});var Vs=Ks("externalEvent"),r4=Dg();r4.startListening({actionCreator:Vs,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),a={activeCoordinate:Oq(n),activeDataKey:kq(n),activeIndex:bg(n),activeLabel:lO(n),activeTooltipIndex:bg(n),isTooltipActive:Rq(n)};e.payload.handler(a,e.payload.reactEvent)}}});var bX=st([Yp],e=>e.tooltipItemPayloads),wX=st([bX,Vg,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,a)=>{var h=e.find(o=>o.settings.dataKey===a);if(h!=null){var{positions:g}=h;if(g!=null){var p=t(g,n);return p}}}),n4=Ks("touchMove"),i4=Dg();i4.startListening({actionCreator:n4,effect:(e,t)=>{var n=e.payload,a=t.getState(),h=v2(a,a.tooltip.settings.shared);if(h==="axis"){var g=R2(a,z2({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));g?.activeIndex!=null&&t.dispatch(QD({activeIndex:g.activeIndex,activeDataKey:void 0,activeCoordinate:g.activeCoordinate}))}else if(h==="item"){var p,o=n.touches[0],P=document.elementFromPoint(o.clientX,o.clientY);if(!P||!P.getAttribute)return;var E=P.getAttribute(s$),C=(p=P.getAttribute(l$))!==null&&p!==void 0?p:void 0,I=wX(t.getState(),E,C);t.dispatch(YG({activeDataKey:C,activeIndex:E,activeCoordinate:I}))}}});var SX=kk({brush:gH,cartesianAxis:RK,chartData:hW,graphicalItems:DZ,layout:D8,legend:w$,options:oW,polarAxis:EZ,polarOptions:xX,referenceElements:SH,rootProps:vX,tooltip:JG}),PX=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return n8({reducer:SX,preloadedState:t,middleware:a=>a({serializableCheck:!1}).concat([XO.middleware,YO.middleware,L2.middleware,r4.middleware,i4.middleware]),devTools:{serialize:{replacer:yX},name:"recharts-".concat(n)}})};function TX(e){var{preloadedState:t,children:n,reduxStoreName:a}=e,h=To(),g=H.useRef(null);if(h)return n;g.current==null&&(g.current=PX(t,a));var p=_w;return H.createElement(mX,{context:p,store:g.current},n)}function CX(e){var{layout:t,width:n,height:a,margin:h}=e,g=Ca(),p=To();return H.useEffect(()=>{p||(g(A8(t)),g(I8({width:n,height:a})),g(M8(h)))},[g,p,t,n,a,h]),null}function EX(e){var t=Ca();return H.useEffect(()=>{t(_X(e))},[t,e]),null}var MX=["children"];function AX(e,t){if(e==null)return{};var n,a,h=IX(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)n=g[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(h[n]=e[n])}return h}function IX(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function jv(){return jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},jv.apply(null,arguments)}var kX={width:"100%",height:"100%"},DX=H.forwardRef((e,t)=>{var n=Mw(),a=Aw(),h=s3();if(!gv(n)||!gv(a))return null;var{children:g,otherAttributes:p,title:o,desc:P}=e,E,C;return typeof p.tabIndex=="number"?E=p.tabIndex:E=h?0:void 0,typeof p.role=="string"?C=p.role:C=h?"application":void 0,H.createElement(lw,jv({},p,{title:o,desc:P,role:C,tabIndex:E,width:n,height:a,style:kX,ref:t}),g)}),OX=e=>{var{children:t}=e,n=or(n_);if(!n)return null;var{width:a,height:h,y:g,x:p}=n;return H.createElement(lw,{width:a,height:h,x:p,y:g},t)},zM=H.forwardRef((e,t)=>{var{children:n}=e,a=AX(e,MX),h=To();return h?H.createElement(OX,null,n):H.createElement(DX,jv({ref:t},a),n)});function RX(){var e=Ca(),[t,n]=H.useState(null),a=or(o$);return H.useEffect(()=>{if(t!=null){var h=t.getBoundingClientRect(),g=h.width/t.offsetWidth;Nl(g)&&g!==a&&e(k8(g))}},[t,e,a]),n}function LM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),n.push.apply(n,a)}return n}function zX(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LM(Object(n),!0).forEach(function(a){LX(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LM(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function LX(e,t,n){return(t=jX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jX(e){var t=NX(e,"string");return typeof t=="symbol"?t:t+""}function NX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FX=H.forwardRef((e,t)=>{var{children:n,className:a,height:h,onClick:g,onContextMenu:p,onDoubleClick:o,onMouseDown:P,onMouseEnter:E,onMouseLeave:C,onMouseMove:I,onMouseUp:R,onTouchEnd:z,onTouchMove:B,onTouchStart:U,style:Z,width:Q}=e,le=Ca(),[se,Ce]=H.useState(null),[be,Ae]=H.useState(null);pW();var Ne=RX(),Qe=H.useCallback($e=>{Ne($e),typeof t=="function"&&t($e),Ce($e),Ae($e)},[Ne,t,Ce,Ae]),ht=H.useCallback($e=>{le(KO($e)),le(Vs({handler:g,reactEvent:$e}))},[le,g]),Et=H.useCallback($e=>{le(gb($e)),le(Vs({handler:E,reactEvent:$e}))},[le,E]),vt=H.useCallback($e=>{le(YD()),le(Vs({handler:C,reactEvent:$e}))},[le,C]),It=H.useCallback($e=>{le(gb($e)),le(Vs({handler:I,reactEvent:$e}))},[le,I]),Ft=H.useCallback(()=>{le(t4())},[le]),er=H.useCallback($e=>{le(e4($e.key))},[le]),lr=H.useCallback($e=>{le(Vs({handler:p,reactEvent:$e}))},[le,p]),vr=H.useCallback($e=>{le(Vs({handler:o,reactEvent:$e}))},[le,o]),Mt=H.useCallback($e=>{le(Vs({handler:P,reactEvent:$e}))},[le,P]),ut=H.useCallback($e=>{le(Vs({handler:R,reactEvent:$e}))},[le,R]),Ct=H.useCallback($e=>{le(Vs({handler:U,reactEvent:$e}))},[le,U]),wt=H.useCallback($e=>{le(n4($e)),le(Vs({handler:B,reactEvent:$e}))},[le,B]),ze=H.useCallback($e=>{le(Vs({handler:z,reactEvent:$e}))},[le,z]);return H.createElement(pO.Provider,{value:se},H.createElement(JI.Provider,{value:be},H.createElement("div",{className:gn("recharts-wrapper",a),style:zX({position:"relative",cursor:"default",width:Q,height:h},Z),onClick:ht,onContextMenu:lr,onDoubleClick:vr,onFocus:Ft,onKeyDown:er,onMouseDown:Mt,onMouseEnter:Et,onMouseLeave:vt,onMouseMove:It,onMouseUp:ut,onTouchEnd:ze,onTouchMove:wt,onTouchStart:Ct,ref:Qe},n)))}),BX=["children","className","width","height","style","compact","title","desc"];function $X(e,t){if(e==null)return{};var n,a,h=VX(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)n=g[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(h[n]=e[n])}return h}function VX(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var UX=H.forwardRef((e,t)=>{var{children:n,className:a,width:h,height:g,style:p,compact:o,title:P,desc:E}=e,C=$X(e,BX),I=Sn(C,!1);return o?H.createElement(zM,{otherAttributes:I,title:P,desc:E},n):H.createElement(FX,{className:a,style:p,width:h,height:g,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},H.createElement(zM,{otherAttributes:I,title:P,desc:E,ref:t},H.createElement(TH,null,n)))}),GX=["width","height"];function yb(){return yb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},yb.apply(null,arguments)}function qX(e,t){if(e==null)return{};var n,a,h=WX(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)n=g[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(h[n]=e[n])}return h}function WX(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var ZX={top:5,right:5,bottom:5,left:5},HX={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:ZX,reverseStackOrder:!1,syncMethod:"index"},KX=H.forwardRef(function(t,n){var a,h=_f(t.categoricalChartProps,HX),{width:g,height:p}=h,o=qX(h,GX);if(!gv(g)||!gv(p))return null;var{chartName:P,defaultTooltipEventType:E,validateTooltipEventTypes:C,tooltipPayloadSearcher:I,categoricalChartProps:R}=t,z={chartName:P,defaultTooltipEventType:E,validateTooltipEventTypes:C,tooltipPayloadSearcher:I,eventEmitter:void 0};return H.createElement(TX,{preloadedState:{options:z},reduxStoreName:(a=R.id)!==null&&a!==void 0?a:P},H.createElement(mH,{chartData:R.data}),H.createElement(CX,{width:g,height:p,layout:h.layout,margin:h.margin}),H.createElement(EX,{accessibilityLayer:h.accessibilityLayer,barCategoryGap:h.barCategoryGap,maxBarSize:h.maxBarSize,stackOffset:h.stackOffset,barGap:h.barGap,barSize:h.barSize,syncId:h.syncId,syncMethod:h.syncMethod,className:h.className}),H.createElement(UX,yb({},o,{width:g,height:p,ref:n})))}),XX=["axis"],YX=H.forwardRef((e,t)=>H.createElement(KX,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:XX,tooltipPayloadSearcher:iW,categoricalChartProps:e,ref:t}));const Yx={Bengaluru:{center:[77.5946,12.9716],zoom:10,hazard:"Urban Floods",bounds:[[77.4,12.8],[78,13.2]]},Guwahati:{center:[91.7362,26.1445],zoom:11,hazard:"Compound Pluvial & Fluvial Floods",bounds:[[91.5,26],[91.9,26.3]]},Anantapur:{center:[77.6,14.6819],zoom:9,hazard:"Compound Flood & Drought",bounds:[[77.3,14.5],[78,15]]},Dordrecht:{center:[4.6667,51.8167],zoom:11,hazard:"Urban Floods & Evacuation Planning",bounds:[[4.5,51.7],[4.8,51.9]]},"Tilburg & Breda":{center:[4.8916,51.583],zoom:9,hazard:"Droughts & Urban Development",bounds:[[4.7,51.5],[5.2,51.7]]}},QX={Bengaluru:{alerts:[{id:1,level:"Moderate",text:"Heavy rainfall predicted, risk of waterlogging in low-lying areas."}],forecast:[{day:"Mon",rainfall:25,temp:28,humidity:85},{day:"Tue",rainfall:40,temp:27,humidity:90},{day:"Wed",rainfall:15,temp:29,humidity:80},{day:"Thu",rainfall:5,temp:30,humidity:75},{day:"Fri",rainfall:10,temp:31,humidity:70},{day:"Sat",rainfall:30,temp:29,humidity:88},{day:"Sun",rainfall:20,temp:28,humidity:82}],citizenReports:[{id:1,user:"A. Kumar",text:"Water level rising near Bellandur lake.",time:"1h ago"}]},Guwahati:{alerts:[{id:1,level:"High",text:"Brahmaputra river level approaching warning mark. Stay vigilant."}],forecast:[{day:"Mon",rainfall:50,temp:30,humidity:92},{day:"Tue",rainfall:65,temp:29,humidity:95},{day:"Wed",rainfall:30,temp:31,humidity:88},{day:"Thu",rainfall:20,temp:32,humidity:85},{day:"Fri",rainfall:25,temp:32,humidity:87},{day:"Sat",rainfall:45,temp:30,humidity:93},{day:"Sun",rainfall:55,temp:29,humidity:94}],citizenReports:[{id:1,user:"R. Das",text:"Anil Nagar area is already experiencing some waterlogging.",time:"45m ago"}]},Anantapur:{alerts:[{id:1,level:"Low",text:"Scattered thunderstorms possible later this week. No immediate drought relief expected."}],forecast:[{day:"Mon",rainfall:0,temp:35,humidity:40},{day:"Tue",rainfall:0,temp:36,humidity:38},{day:"Wed",rainfall:5,temp:34,humidity:50},{day:"Thu",rainfall:10,temp:33,humidity:55},{day:"Fri",rainfall:2,temp:35,humidity:45},{day:"Sat",rainfall:0,temp:37,humidity:35},{day:"Sun",rainfall:0,temp:36,humidity:37}],citizenReports:[{id:1,user:"Local Farmer",text:"Soil is extremely dry in Kalyandurg mandal.",time:"8h ago"}]},Dordrecht:{alerts:[{id:1,level:"Minor",text:"Elevated river levels due to North Sea tidal surge. No flooding expected."}],forecast:[{day:"Mon",rainfall:10,temp:18,humidity:75},{day:"Tue",rainfall:5,temp:19,humidity:70},{day:"Wed",rainfall:15,temp:17,humidity:85},{day:"Thu",rainfall:20,temp:16,humidity:88},{day:"Fri",rainfall:5,temp:20,humidity:65},{day:"Sat",rainfall:2,temp:21,humidity:60},{day:"Sun",rainfall:12,temp:19,humidity:78}],citizenReports:[{id:1,user:"Water Board",text:"All flood gates are operating normally.",time:"2h ago"}]},"Tilburg & Breda":{alerts:[{id:1,level:"Low",text:"Drought conditions persist. Water conservation measures remain in effect."}],forecast:[{day:"Mon",rainfall:2,temp:22,humidity:60},{day:"Tue",rainfall:0,temp:24,humidity:55},{day:"Wed",rainfall:0,temp:25,humidity:50},{day:"Thu",rainfall:5,temp:23,humidity:65},{day:"Fri",rainfall:8,temp:21,humidity:70},{day:"Sat",rainfall:1,temp:25,humidity:52},{day:"Sun",rainfall:0,temp:26,humidity:48}],citizenReports:[{id:1,user:"City Official",text:"Please continue to limit non-essential water usage.",time:"1d ago"}]}},jM="EeFwsDfzBsWNKAyHKIcU",Qx="eae0774de168506029daface7c93aa73",Fy={Streets:`https://api.maptiler.com/maps/streets-v2/style.json?key=${jM}`,Satellite:`https://api.maptiler.com/maps/hybrid/style.json?key=${jM}`,Terrain:"https://tiles.stadiamaps.com/styles/stamen_terrain.json"},Jx={Rain:`https://tile.openweathermap.org/map/precipitation_new/{z}/{x}/{y}.png?appid=${Qx}`,Clouds:`https://tile.openweathermap.org/map/clouds_new/{z}/{x}/{y}.png?appid=${Qx}`,Temp:`https://tile.openweathermap.org/map/temp_new/{z}/{x}/{y}.png?appid=${Qx}`};function JX(){const e=H.useRef(null),t=H.useRef(null),n=H.useRef(null),[a,h]=H.useState(null),[g,p]=H.useState(!1),[o,P]=H.useState("alerts"),[E,C]=H.useState(Fy.Streets),[I,R]=H.useState(null);H.useEffect(()=>{t.current||(t.current=new v0.Map({container:e.current,style:E,center:[78.96,20.59],zoom:4}),t.current.addControl(new v0.NavigationControl({showCompass:!1}),"top-right"))},[E]),H.useEffect(()=>{t.current&&t.current.setStyle(E)},[E]);const z=U=>{const Z=t.current;if(!U){h(null),p(!1),n.current&&(n.current.remove(),n.current=null),Z.getLayer("site-boundary-layer")&&Z.removeLayer("site-boundary-layer"),Z.getSource("site-boundary")&&Z.removeSource("site-boundary"),Z.flyTo({center:[78.96,20.59],zoom:4});return}const Q=Yx[U];h(U),p(!0),P("alerts"),Z.flyTo({center:Q.center,zoom:Q.zoom,essential:!0}),n.current&&n.current.remove(),n.current=new v0.Marker({color:"#E63946"}).setLngLat(Q.center).addTo(Z);const[le,se]=Q.bounds,Ce={type:"Feature",geometry:{type:"Polygon",coordinates:[[[le[0],le[1]],[se[0],le[1]],[se[0],se[1]],[le[0],se[1]],[le[0],le[1]]]]}};Z.getSource("site-boundary")?Z.getSource("site-boundary").setData(Ce):(Z.addSource("site-boundary",{type:"geojson",data:Ce}),Z.addLayer({id:"site-boundary-layer",type:"fill",source:"site-boundary",paint:{"fill-color":"#1D3557","fill-opacity":.2}}))};H.useEffect(()=>{const U=t.current;if(!U)return;const Z=()=>{Object.keys(Jx).forEach(Q=>{U.getLayer(Q)&&U.removeLayer(Q),U.getSource(Q)&&U.removeSource(Q)}),I&&(U.addSource(I,{type:"raster",tiles:[Jx[I]],tileSize:256}),U.addLayer({id:I,type:"raster",source:I,paint:{"raster-opacity":.6}}))};return U.on("style.load",Z),Z(),()=>{U.off("style.load",Z)}},[I,E]);const B=a?QX[a]:null;return Y.jsxs("div",{className:"map-page-wrapper",children:[Y.jsxs("div",{className:"map-top-bar",children:[Y.jsx("div",{className:"map-logo",children:"LODESTAR Geo-Dashboard"}),Y.jsxs("select",{className:"site-selector",onChange:U=>z(U.target.value),value:a||"",children:[Y.jsx("option",{value:"",children:"-- Select a Study Site --"}),Object.keys(Yx).map(U=>Y.jsx("option",{value:U,children:U},U))]})]}),Y.jsx("div",{ref:e,className:"map-container-full"}),Y.jsxs("div",{className:"map-controls-bottom-right",children:[Y.jsxs("h4",{children:[Y.jsx(fN,{})," Map Layers"]}),Y.jsx("div",{className:"control-group",children:Object.keys(Fy).map(U=>Y.jsx("button",{className:`map-control-btn ${E===Fy[U]?"active":""}`,onClick:()=>C(Fy[U]),children:U},U))}),Y.jsxs("h4",{children:[Y.jsx(iN,{})," Weather Overlays"]}),Y.jsx("div",{className:"control-group",children:Object.keys(Jx).map(U=>Y.jsx("button",{className:`map-control-btn ${I===U?"active":""}`,onClick:()=>R(Z=>Z===U?null:U),children:U},U))})]}),Y.jsx("div",{className:`side-panel ${g?"open":""}`,children:B?Y.jsxs(Y.Fragment,{children:[Y.jsx("button",{className:"panel-close-btn",onClick:()=>p(!1),children:Y.jsx($I,{})}),Y.jsxs("div",{className:"panel-header",children:[" ",Y.jsx(pN,{})," ",Y.jsx("h2",{children:a})," "]}),Y.jsxs("p",{className:"panel-sub-header",children:["Focus: ",Yx[a].hazard]}),Y.jsxs("div",{className:"panel-tabs",children:[Y.jsx("button",{className:o==="alerts"?"active":"",onClick:()=>P("alerts"),children:"Alerts"}),Y.jsx("button",{className:o==="forecast"?"active":"",onClick:()=>P("forecast"),children:"Forecast"}),Y.jsx("button",{className:o==="reports"?"active":"",onClick:()=>P("reports"),children:"Reports"})]}),Y.jsxs("div",{className:"panel-content",children:[o==="alerts"&&Y.jsxs("div",{className:"panel-section",children:[" ",B.alerts.map(U=>Y.jsxs("div",{className:`alert-item alert-${U.level.toLowerCase()}`,children:[" ",Y.jsxs("strong",{children:[U.level,":"]})," ",U.text," "]},U.id))," "]}),o==="forecast"&&Y.jsxs("div",{className:"panel-section",children:[Y.jsx("h4",{className:"chart-title",children:"7-Day Forecast"}),Y.jsx(DW,{width:"100%",height:250,children:Y.jsxs(YX,{data:B.forecast,margin:{top:5,right:20,left:-10,bottom:5},children:[Y.jsx(jO,{strokeDasharray:"3 3"}),Y.jsx(O2,{dataKey:"day"}),Y.jsx(Lv,{yAxisId:"left",label:{value:"mm / °C",angle:-90,position:"insideLeft"},stroke:"#8884d8"}),Y.jsx(Lv,{yAxisId:"right",orientation:"right",label:{value:"%",angle:-90,position:"insideRight"},stroke:"#82ca9d"}),Y.jsx(wW,{}),Y.jsx(i_,{}),Y.jsx(ig,{yAxisId:"left",type:"monotone",dataKey:"rainfall",name:"Rainfall (mm)",stroke:"#3B82F6",strokeWidth:2}),Y.jsx(ig,{yAxisId:"left",type:"monotone",dataKey:"temp",name:"Temp (°C)",stroke:"#EF4444",strokeWidth:2}),Y.jsx(ig,{yAxisId:"right",type:"monotone",dataKey:"humidity",name:"Humidity (%)",stroke:"#82ca9d",strokeWidth:2})]})})]}),o==="reports"&&Y.jsxs("div",{className:"panel-section",children:[Y.jsxs("div",{className:"reports-list",children:[" ",B.citizenReports.map(U=>Y.jsxs("div",{className:"report-item",children:[" ",Y.jsxs("p",{children:['"',U.text,'"']})," ",Y.jsxs("span",{children:["- ",U.user,", ",U.time]})," "]},U.id))," "]}),Y.jsx("button",{className:"cta-button panel-cta",children:"Submit a Report"})]})]})]}):Y.jsx("div",{className:"panel-placeholder",children:Y.jsx("p",{children:"Select a study site to view details."})})})]})}const eY=[{id:1,site:"Guwahati",hazard:"Flood",severity:"Severe",issued:"2025-07-31 01:00 IST",summary:"Brahmaputra river has crossed the warning level due to heavy upstream rainfall.",actions:"Evacuate low-lying areas near the riverbank. Move valuables to higher ground. Follow instructions from ASDMA."},{id:2,site:"Anantapur",hazard:"Drought",severity:"Moderate",issued:"2025-07-30 10:00 IST",summary:"Below-average monsoon rainfall continues. Soil moisture is critically low.",actions:"Implement water conservation measures. Farmers are advised to consider drought-resistant crops."},{id:3,site:"Bengaluru",hazard:"Flood",severity:"Moderate",issued:"2025-07-31 00:30 IST",summary:"Intense short-duration rainfall expected, leading to high risk of urban waterlogging.",actions:"Avoid travel in low-lying areas and underpasses. Ensure storm drains are clear of debris."},{id:4,site:"Dordrecht",hazard:"Flood",severity:"Minor",issued:"2025-07-30 11:00 CET",summary:"River levels are elevated due to North Sea tidal surge but are expected to remain below flood stage.",actions:"Monitor water levels and be aware of potential for minor coastal flooding."},{id:5,site:"Guwahati",hazard:"Compound",severity:"Extreme",issued:"2025-07-31 02:00 IST",summary:"Compound Event: Fluvial flooding from the river is now combined with pluvial (rainfall) flooding, overwhelming city drainage.",actions:"This is a high-risk situation. Seek shelter on higher floors or designated evacuation centers immediately."}],NM={Minor:1,Moderate:2,Severe:3,Extreme:4},tY={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},rY={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};function nY(){const[e,t]=H.useState("All"),[n,a]=H.useState("All"),h=H.useMemo(()=>eY.filter(p=>e==="All"||p.site===e).filter(p=>n==="All"||p.hazard===n).sort((p,o)=>NM[o.severity]-NM[p.severity]),[e,n]),g=H.useMemo(()=>h.filter(p=>p.severity==="Severe"||p.severity==="Extreme").length,[h]);return Y.jsxs("div",{children:[Y.jsx("section",{className:"hero-section-about",children:Y.jsxs("div",{className:"container",children:[Y.jsx("h1",{className:"hero-title-about",children:"LODESTAR Alert Center"}),Y.jsx("p",{className:"hero-subtitle-about",children:"A centralized hub for real-time, multi-hazard early warnings for our study sites in India and the Netherlands."})]})}),Y.jsx("section",{className:"page-section",children:Y.jsxs("div",{className:"container",children:[Y.jsxs("div",{className:"controls-container",children:[Y.jsxs("div",{className:"alert-controls",children:[Y.jsxs("div",{className:"filter-group",children:[Y.jsx(cN,{}),Y.jsx("label",{children:"Filter by Site:"}),Y.jsxs("select",{value:e,onChange:p=>t(p.target.value),children:[Y.jsx("option",{children:"All"})," ",Y.jsx("option",{children:"Bengaluru"})," ",Y.jsx("option",{children:"Guwahati"}),Y.jsx("option",{children:"Anantapur"})," ",Y.jsx("option",{children:"Dordrecht"})," ",Y.jsx("option",{children:"Tilburg & Breda"})]})]}),Y.jsxs("div",{className:"filter-group",children:[Y.jsx("label",{children:"Filter by Hazard:"}),Y.jsxs("select",{value:n,onChange:p=>a(p.target.value),children:[Y.jsx("option",{children:"All"})," ",Y.jsx("option",{children:"Flood"}),Y.jsx("option",{children:"Drought"})," ",Y.jsx("option",{children:"Compound"})]})]})]}),Y.jsxs("div",{className:"alert-summary",children:[Y.jsxs("div",{children:[Y.jsx("span",{children:h.length})," Total Active Alerts"]}),Y.jsxs("div",{className:"summary-high-sev",children:[Y.jsx("span",{children:g})," High-Severity Alerts"]})]})]}),Y.jsx(qr.div,{className:"alerts-list",variants:tY,initial:"hidden",animate:"visible",children:Y.jsx(Hb,{children:h.length>0?h.map(p=>Y.jsxs(qr.div,{variants:rY,layout:!0,className:`alert-card-detailed sev-${p.severity.toLowerCase()}`,children:[Y.jsxs("div",{className:"alert-card-header",children:[Y.jsxs("div",{className:"alert-card-severity",children:[Y.jsx(uN,{})," ",p.severity]}),Y.jsxs("div",{className:"alert-card-location",children:[p.site," - ",p.hazard," Hazard"]})]}),Y.jsxs("div",{className:"alert-card-body",children:[Y.jsx("p",{className:"alert-summary-text",children:p.summary}),Y.jsxs("div",{className:"alert-actions",children:[Y.jsx("h4",{children:"Recommended Actions:"}),Y.jsx("p",{children:p.actions})]})]}),Y.jsxs("div",{className:"alert-card-footer",children:["Issued: ",p.issued]})]},p.id)):Y.jsxs(qr.div,{className:"no-alerts-found",initial:{opacity:0},animate:{opacity:1},children:[Y.jsx(dN,{}),Y.jsx("p",{children:"No active alerts match your current filter settings."})]})})})]})})]})}const iY={hidden:{opacity:0},visible:{opacity:1}},aY={hidden:{y:"-50px",opacity:0},visible:{y:"0",opacity:1,transition:{delay:.2,type:"spring",stiffness:120}},exit:{y:"50px",opacity:0}};function j2({isOpen:e,onClose:t}){return Y.jsx(Hb,{children:e&&Y.jsx(qr.div,{className:"modal-backdrop",variants:iY,initial:"hidden",animate:"visible",exit:"hidden",onClick:t,children:Y.jsxs(qr.div,{className:"coming-soon-box",variants:aY,onClick:n=>n.stopPropagation(),children:[Y.jsx("button",{className:"modal-close-btn",onClick:t,children:Y.jsx($I,{})}),Y.jsx(_N,{className:"coming-soon-icon"}),Y.jsx("h2",{className:"coming-soon-title",children:"Feature in Development"}),Y.jsx("p",{className:"coming-soon-text",children:"This data repository is a planned deliverable of the LODESTAR project. Our teams are currently developing the necessary infrastructure. Please check back for future updates!"}),Y.jsx("button",{onClick:t,className:"cta-button",children:"Continue Exploring"})]})})})}const oY=[{icon:Y.jsx(mN,{}),title:"Participatory Social Mapping",text:"We begin by mapping the social landscape of disaster risk. Through collaborative exercises, we identify 'Who knows what?' and 'Who needs to know what?' to ensure our tools address the right problems for the right people."},{icon:Y.jsx(hN,{}),title:"Serious Gaming & Scenarios",text:"Interactive and immersive games built on realistic disaster scenarios are used to elicit tacit knowledge, test response strategies, and encourage creative problem-solving among diverse stakeholders."},{icon:Y.jsx(lN,{}),title:"Horizontal Learning",text:"We foster an environment of peer-to-peer knowledge exchange, connecting citizens, experts, and officials. This breaks down hierarchies and ensures that all forms of knowledge are valued equally."}];function sY(){const[e,t]=H.useState(!1);return Y.jsxs(Y.Fragment,{children:[Y.jsx(j2,{isOpen:e,onClose:()=>t(!1)}),Y.jsxs("div",{className:"page-wrapper",children:[Y.jsx("section",{className:"hero-section-about",children:Y.jsxs("div",{className:"container",children:[Y.jsx(qr.h1,{className:"hero-title-about",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5},children:"Living Labs & Citizen Science"}),Y.jsx(qr.p,{className:"hero-subtitle-about",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:"Where community knowledge meets scientific innovation. This is the heart of LODESTAR's bottom-up approach to building disaster resilience."})]})}),Y.jsx("section",{className:"page-section",children:Y.jsxs("div",{className:"container",children:[Y.jsx("h2",{className:"section-title",children:"What is a Living Lab?"}),Y.jsx(qr.div,{className:"text-block",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.6},children:Y.jsx("p",{children:"A Living Lab is an open innovation environment where we co-create solutions in real-life contexts. It's a space where we bring together all stakeholders to ensure our Multi-Hazard Early Warning System (MH-EWS) matches the actual needs, cultures, and creative potentials of the end-users. This approach moves beyond traditional top-down systems to bridge the critical 'know-do' gap."})})]})}),Y.jsx("section",{className:"page-section",children:Y.jsxs("div",{className:"container",children:[Y.jsx("h2",{className:"section-title",children:"Our Methods for Co-Creation"}),Y.jsx("div",{className:"methods-grid",children:oY.map((n,a)=>Y.jsxs(qr.div,{className:"method-card",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.5,delay:a*.15},children:[Y.jsx("div",{className:"method-icon",children:n.icon}),Y.jsx("h3",{children:n.title}),Y.jsx("p",{children:n.text})]},n.title))})]})}),Y.jsx("section",{className:"page-section cta-section",children:Y.jsxs("div",{className:"container",children:[Y.jsx("h2",{className:"section-title cta-title",children:"Become a Citizen Scientist"}),Y.jsx("p",{className:"cta-subtitle",children:"You can play a direct role in making your community safer. Here’s how:"}),Y.jsxs("div",{className:"participation-grid",children:[Y.jsxs(qr.div,{className:"participation-card",onClick:()=>t(!0),initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0,amount:.5},transition:{duration:.5,delay:.1},children:[Y.jsx(nN,{className:"participation-icon"}),Y.jsx("h4",{children:"Contribute Real-time Data"}),Y.jsx("p",{children:"Use our upcoming mobile tools to share vital on-the-ground information like water levels."})]}),Y.jsxs(qr.div,{className:"participation-card",onClick:()=>t(!0),initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0,amount:.5},transition:{duration:.5,delay:.2},children:[Y.jsx(xN,{className:"participation-icon"}),Y.jsx("h4",{children:"Join a Workshop"}),Y.jsx("p",{children:"Participate in our local Living Labs to share your experiences and test new tools."})]}),Y.jsxs(qr.div,{className:"participation-card",onClick:()=>t(!0),initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0,amount:.5},transition:{duration:.5,delay:.3},children:[Y.jsx(aN,{className:"participation-icon"}),Y.jsx("h4",{children:"Share Local Knowledge"}),Y.jsx("p",{children:"Your knowledge of past events is invaluable for building more accurate models."})]})]})]})})]})]})}const lY=[{title:"The Evacuation Challenge",scenario:"Based on the Dordrecht study site, an extreme flood is imminent as the city's East dike is at risk of breaking. Players must coordinate the evacuation of the population, including those with special needs, to designated self-sufficient shelter areas.",learningGoals:["Collaborative Planning","Resource Management","Decision-Making Under Pressure"],targetAudience:"Municipal Planners, Citizens, Emergency Responders",status:"Concept in Development"},{title:"Drought & The City",scenario:"In the Tilburg-Breda region, a multi-year drought is stressing water supplies for new residential developments. Players, representing water boards, city authorities, and citizens, must negotiate and implement green and grey infrastructure solutions.",learningGoals:["Negotiation & Trade-offs","Long-term Strategic Planning","Understanding Nature-Based Solutions"],targetAudience:"Policy Makers, Urban Developers, Community Groups",status:"Concept Phase"},{title:"Compound Crisis: Guwahati",scenario:"The city is hit by a compound disaster: the Brahmaputra river is causing fluvial (river) flooding, while intense monsoon rain causes pluvial (rainfall) flooding, overwhelming urban drainage. Players must manage a multi-faceted response.",learningGoals:["Understanding Compound Risks","Integrated Response Coordination","Citizen Science Integration"],targetAudience:"Disaster Management Agencies, Students, NGOs",status:"Concept Phase"}];function uY(){const[e,t]=H.useState(!1);return Y.jsxs(Y.Fragment,{children:[Y.jsx(j2,{isOpen:e,onClose:()=>t(!1)}),Y.jsxs("div",{className:"page-wrapper",children:[Y.jsx("section",{className:"hero-section-about",children:Y.jsxs("div",{className:"container",children:[Y.jsx("h1",{className:"hero-title-about",children:"Serious Games Hub"}),Y.jsx("p",{className:"hero-subtitle-about",children:"Interactive tools for collaborative learning and strategy development in disaster management."})]})}),Y.jsx("section",{className:"page-section",children:Y.jsxs("div",{className:"container",children:[Y.jsx("h2",{className:"section-title",children:"Why We Use Serious Games"}),Y.jsxs("div",{className:"text-block",children:[Y.jsx("p",{children:"Serious games are more than just entertainment; they are a creative and powerful method to trigger people's intelligence and tap into their historical and recent knowledge of disaster events. Within our Living Labs, these games provide a dynamic platform for learning and strategy testing in a risk-free environment."}),Y.jsx("p",{children:"They are designed to make complex concepts more understandable, promote critical thinking, and foster collaboration among diverse groups—from government officials to the public. By simulating extreme scenarios, we can co-create and test alternative disaster responses together."})]})]})}),Y.jsx("section",{className:"page-section",children:Y.jsxs("div",{className:"container",children:[Y.jsx("h2",{className:"section-title",children:"Our Games Portfolio"}),Y.jsx(qr.div,{className:"games-portfolio",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},transition:{staggerChildren:.2},children:lY.map(n=>Y.jsxs(qr.div,{className:"game-card-detailed",variants:{hidden:{opacity:0,y:50},visible:{opacity:1,y:0}},children:[Y.jsxs("div",{className:"game-card-header",children:[Y.jsx("h3",{children:n.title}),Y.jsx("span",{className:"game-status-tag",children:n.status})]}),Y.jsxs("div",{className:"game-card-body",children:[Y.jsx("h4",{children:"Scenario:"}),Y.jsx("p",{children:n.scenario}),Y.jsxs("div",{className:"game-card-meta",children:[Y.jsxs("div",{children:[Y.jsx(NI,{})," ",Y.jsx("strong",{children:"Learning Goals:"})," ",n.learningGoals.join(", ")]}),Y.jsxs("div",{children:[Y.jsx(VI,{})," ",Y.jsx("strong",{children:"Target Audience:"})," ",n.targetAudience]})]})]}),Y.jsx("div",{className:"game-card-footer",children:Y.jsx("button",{className:"cta-button",onClick:()=>t(!0),children:"Play Demo"})})]},n.title))})]})})]})]})}const cY=[{icon:Y.jsx(y0,{}),title:"Pan-European Decision-Support Dashboard (A4EU)",summary:"A key dashboard from the ANYWHERE project developed by Wageningen University, serving as a model for LODESTAR's EWS.",source:"Wageningen University"},{icon:Y.jsx(y0,{}),title:"Serious Games Catalogue & Facilitation Manual",summary:"A portfolio of physical and digital serious games with a manual for developing and facilitating them in stakeholder workshops.",source:"MetaMeta Research"},{icon:Y.jsx(y0,{}),title:"Calibrated Hydrological Model (STORM V1)",summary:"A calibrated urban flood model for Bangalore, previously used for crowdsourcing studies and foundational to this project's modelling work.",source:"Indian Institute of Sciences"}],hY=[{icon:Y.jsx(Wy,{}),title:"Flood disaster subcultures in The Netherlands",summary:"Examines the social and cultural responses to flood risks in Dutch communities, providing crucial context for the project's socio-technical approach.",authors:"Engel, K., Frerks, G., Velotti, L., Warner, J., & Weijs, B."},{icon:Y.jsx(Wy,{}),title:"Science-policy interface on water scarcity in India",summary:"Investigates the communication and knowledge gaps between scientific research and policy-making regarding water scarcity in India.",authors:"Suparana Katyaini, Anamika Barua, and Rosa Duarte"},{icon:Y.jsx(Wy,{}),title:"Moving from drought hazard to drought impact forecasts",summary:"A foundational paper on advancing drought EWS from simply predicting hazards to forecasting their tangible, real-world impacts on communities.",authors:"Sutanto, S. J., Van der Weert, M., Wanders, N., et al."}];function dY(){const[e,t]=H.useState(!1);return Y.jsxs(Y.Fragment,{children:[Y.jsx(j2,{isOpen:e,onClose:()=>t(!1)}),Y.jsxs("div",{children:[Y.jsx("section",{className:"hero-section-about",children:Y.jsxs("div",{className:"container",children:[Y.jsx(qr.h1,{className:"hero-title-about",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5},children:"Research & Knowledge Hub"}),Y.jsx(qr.p,{className:"hero-subtitle-about",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:"Access the project's deliverables, key publications, open data repositories, and foundational documents."})]})}),Y.jsx("section",{className:"page-section",children:Y.jsxs("div",{className:"container",children:[Y.jsx("h2",{className:"section-title",children:"Project Deliverables & Tools"}),Y.jsx(qr.div,{className:"research-grid",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},transition:{staggerChildren:.15},children:cY.map(n=>Y.jsxs(qr.div,{className:"research-card",variants:{hidden:{opacity:0,y:50},visible:{opacity:1,y:0}},children:[Y.jsx("div",{className:"research-card-icon",children:n.icon}),Y.jsxs("div",{className:"research-card-content",children:[Y.jsx("h3",{children:n.title}),Y.jsx("p",{children:n.summary}),Y.jsxs("span",{className:"research-card-source",children:["Source: ",n.source]})]})]},n.title))})]})}),Y.jsx("section",{className:"page-section",children:Y.jsxs("div",{className:"container",children:[Y.jsx("h2",{className:"section-title",children:"Key Publications from the Consortium"}),Y.jsx(qr.div,{className:"research-grid",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},transition:{staggerChildren:.15},children:hY.map(n=>Y.jsxs(qr.div,{className:"research-card",variants:{hidden:{opacity:0,y:50},visible:{opacity:1,y:0}},children:[Y.jsx("div",{className:"research-card-icon",children:n.icon}),Y.jsxs("div",{className:"research-card-content",children:[Y.jsx("h3",{children:n.title}),Y.jsx("p",{children:n.summary}),Y.jsxs("span",{className:"research-card-source",children:["Authors: ",n.authors]})]})]},n.title))})]})}),Y.jsx("section",{className:"page-section",children:Y.jsxs("div",{className:"container",children:[Y.jsx("h2",{className:"section-title",children:"Data, Models & Open Science"}),Y.jsx("div",{className:"text-block",children:Y.jsx("p",{children:"LODESTAR is committed to the FAIR (Findable, Accessible, Interoperable, Reusable) guiding principles for scientific data management. We aim to make knowledge creation, transfer, and exchange transparent and interactive."})}),Y.jsxs("div",{className:"data-grid",children:[Y.jsxs("div",{className:"data-card",onClick:()=>t(!0),children:[Y.jsx(sN,{}),Y.jsx("h4",{children:"4TU.ResearchData"}),Y.jsx("p",{children:"Processed data used for publications will be stored and made available via the 4TU research data centre."})]}),Y.jsxs("div",{className:"data-card",onClick:()=>t(!0),children:[Y.jsx(jI,{}),Y.jsx("h4",{children:"GitHub Repository"}),Y.jsx("p",{children:"Algorithms, scripts, and software developed during the project will be shared through platforms like GitHub."})]}),Y.jsxs("a",{href:"https://www.undrr.org/implementing-sendai-framework",target:"_blank",rel:"noopener noreferrer",className:"data-card",children:[Y.jsx(BI,{}),Y.jsx("h4",{children:"Sendai Framework"}),Y.jsx("p",{children:"The project's goals align with this key framework for Disaster Risk Reduction."})]})]})]})})]})]})}const e1=[{id:1,team:"Leadership",name:"Professor Anamika Barua",title:"Professor, Dept. of Humanities and Social Sciences",institution:"Indian Institute of Technology-Guwahati (IIT-G)",acronym:"IIT-G",institutionContext:"As one of India's top universities and a leading institute in engineering and disaster management, IIT-G provides the project's anchor in India.",role:"Indian Main Applicant (Principal Investigator)",projectContribution:"Leads the Indian consortium, provides overall project co-ordination, supervises PhD students, and is directly involved in Work Streams 1, 3 & 5.",keyPublication:{title:"Media reporting on conflicts and cooperation... for the Brahmaputra basin.",relevance:"This research provides critical insight into the socio-political context of water management, essential for the success of a cross-community EWS."},contact:{email:"abarua@iitg.ac.in",phone:"+91 361 258 2563"}},{id:2,team:"Leadership",name:"Dr. Jeroen F. Warner",title:"Associate Professor, Crisis and Disaster Studies",institution:"Wageningen University & Research (WUR)",acronym:"WUR",institutionContext:"A world-leading institution in life sciences and social sciences, WUR brings interdisciplinary expertise in water, climate, and disaster studies.",role:"Dutch Main Applicant (Principal Investigator)",projectContribution:"Leads the Dutch consortium, provides overall project co-ordination, supervises PhDs and is directly involved in Work Streams 3 & 5.",keyPublication:{title:"The politics of adaptive climate management: Scientific recipes and lived reality.",relevance:"This work is foundational to LODESTAR’s core mission, exploring the crucial intersection of scientific solutions and the lived experiences of at-risk communities."},contact:{email:"Jeroen.warner@wur.nl",phone:"(+31) 3174824720"}},{id:3,team:"Dutch",name:"Dr. Sumit Vij",title:"Assistant Professor",institution:"Wageningen University & Research",role:"Co-applicant & WS5 Lead",acronym:"WUR"},{id:4,team:"Dutch",name:"Dr. Jantsje van Loon-Steensma",title:"Professor of Applied Sciences",institution:"VHL University",role:"Co-applicant, Eco-DRR Expert",acronym:"VHL"},{id:5,team:"Dutch",name:"Dr. Spyridon Paparrizos",title:"Assistant Professor",institution:"Wageningen University",role:"Co-applicant & WS4 Co-lead",acronym:"WUR"},{id:6,team:"Dutch",name:"Dr. Frank van Steenbergen",title:"Managing Director",institution:"MetaMeta Research",role:"Partner & WS3 Lead",acronym:"MM"},{id:7,team:"Indian",name:"Dr. Roshan Karan Srivastav",title:"Assistant Professor",institution:"IIT Tirupati",role:"Co-applicant & WS4 Lead",acronym:"IIT-Tr"},{id:8,team:"Indian",name:"Dr. Rajarshi Das Bhowmik",title:"Assistant Professor",institution:"IISc Bangalore",role:"Co-applicant & WS2 Lead",acronym:"IISc"},{id:9,team:"Indian",name:"Dr. Indu K Murthy",title:"Principal Research Scientist",institution:"CSTEP",role:"Partner & WS3 Lead",acronym:"CSTEP"},{id:10,team:"Indian",name:"Dr. Anil Kumar Gupta",title:"Head of Division",institution:"NIDM",role:"Collaboration Partner",acronym:"NIDM"}],t1=({member:e})=>e.team==="Leadership"?Y.jsxs(qr.div,{className:"leader-card",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.6},children:[Y.jsxs("div",{className:"leader-header",children:[Y.jsx("div",{className:"leader-logo",children:e.acronym}),Y.jsxs("div",{className:"leader-title-group",children:[Y.jsx("h3",{children:e.name}),Y.jsx("p",{children:e.title})]})]}),Y.jsxs("div",{className:"leader-body",children:[Y.jsx("p",{className:"leader-context",children:e.institutionContext}),Y.jsxs("div",{className:"info-item",children:[Y.jsx(tN,{}),Y.jsxs("span",{children:[Y.jsx("strong",{children:"Role in Project:"})," ",e.role]})]}),Y.jsxs("div",{className:"info-item",children:[Y.jsx(vN,{}),Y.jsxs("span",{children:[Y.jsx("strong",{children:"Primary Contribution:"})," ",e.projectContribution]})]}),Y.jsxs("div",{className:"info-item",children:[Y.jsx(Wy,{}),Y.jsxs("span",{children:[Y.jsx("strong",{children:"Key Publication Insight:"}),' "',e.keyPublication.title,'" — ',Y.jsx("em",{children:e.keyPublication.relevance})]})]})]}),Y.jsxs("div",{className:"leader-footer",children:[Y.jsxs("a",{href:`mailto:${e.contact.email}`,children:[Y.jsx(FI,{})," Email"]}),Y.jsxs("span",{children:[Y.jsx(gN,{})," ",e.contact.phone]})]})]}):Y.jsxs(qr.div,{className:"member-card",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.5},transition:{duration:.5},children:[Y.jsx("div",{className:"member-logo",children:e.acronym}),Y.jsxs("div",{className:"member-info",children:[Y.jsx("h4",{children:e.name}),Y.jsx("p",{className:"member-title",children:e.title}),Y.jsx("span",{className:"member-role-tag",children:e.role})]})]});function fY(){return Y.jsxs("div",{children:[Y.jsx("section",{className:"hero-section-about",children:Y.jsxs("div",{className:"container",children:[Y.jsx("h1",{className:"hero-title-about",children:"The LODESTAR Consortium"}),Y.jsx("p",{className:"hero-subtitle-about",children:"A detailed overview of the dedicated, transdisciplinary team driving the project."})]})}),Y.jsx("section",{className:"page-section",children:Y.jsxs("div",{className:"container",children:[Y.jsx("h2",{className:"section-title",children:"Project Leadership"}),Y.jsx("div",{className:"leader-grid",children:e1.filter(e=>e.team==="Leadership").map(e=>Y.jsx(t1,{member:e},e.id))})]})}),Y.jsx("section",{className:"page-section",children:Y.jsxs("div",{className:"consortium-grid",children:[Y.jsxs("div",{className:"consortium-column",children:[Y.jsx("h2",{className:"section-title",children:"Dutch Consortium"}),Y.jsx("div",{className:"members-grid",children:e1.filter(e=>e.team==="Dutch").map(e=>Y.jsx(t1,{member:e},e.id))})]}),Y.jsxs("div",{className:"consortium-column",children:[Y.jsx("h2",{className:"section-title",children:"Indian Consortium"}),Y.jsx("div",{className:"members-grid",children:e1.filter(e=>e.team==="Indian").map(e=>Y.jsx(t1,{member:e},e.id))})]})]})})]})}function pY(){const[e,t]=H.useState(!1),[n,a]=H.useState(""),[h,g]=H.useState(""),p=o=>{o.preventDefault(),n==="admin"&&h==="admin"?t(!0):console.error("Invalid credentials")};return Y.jsxs("div",{children:[Y.jsx("section",{className:"hero-section-about",children:Y.jsxs("div",{className:"container",children:[Y.jsx("h1",{className:"hero-title-about",children:"Admin Dashboard"}),Y.jsx("p",{className:"hero-subtitle-about",children:"Content Management Panel"})]})}),Y.jsx("section",{className:"page-section",children:Y.jsx("div",{className:"container",children:e?Y.jsxs("div",{className:"admin-controls",children:[Y.jsxs("div",{className:"admin-card",children:[Y.jsx("h4",{children:"Data Management"}),Y.jsx("p",{children:"Push new real-time alerts to the EWS or update existing ones."}),Y.jsx("button",{className:"cta-button",children:"Update Alerts"})]}),Y.jsxs("div",{className:"admin-card",children:[Y.jsx("h4",{children:"Upload Reports"}),Y.jsx("p",{children:"Add new publications or project deliverables to the Research Hub."}),Y.jsx("input",{type:"file"})]}),Y.jsxs("div",{className:"admin-card",children:[Y.jsx("h4",{children:"Living Lab Management"}),Y.jsx("p",{children:"Update workshop schedules and post citizen science results."}),Y.jsx("button",{className:"cta-button",children:"Manage Labs"})]})]}):Y.jsxs("form",{className:"admin-login-form",onSubmit:p,children:[Y.jsx("h3",{children:"Consortium Login"}),Y.jsx("input",{type:"text",placeholder:"Username",value:n,onChange:o=>a(o.target.value),required:!0}),Y.jsx("input",{type:"password",placeholder:"Password",value:h,onChange:o=>g(o.target.value),required:!0}),Y.jsx("button",{type:"submit",className:"cta-button",children:"Login"})]})})})]})}function mY(){return Y.jsx("div",{className:"notfound-wrapper-themed",children:Y.jsxs(qr.div,{className:"notfound-container-themed",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:[Y.jsxs("div",{className:"radar-container",children:[Y.jsx(oN,{className:"radar-icon"}),Y.jsx("div",{className:"radar-sweep"})]}),Y.jsx("h1",{className:"notfound-title-themed",children:"404"}),Y.jsx("h2",{className:"notfound-subtitle-themed",children:"Lost Signal"}),Y.jsx("p",{className:"notfound-text-themed",children:"You've navigated to a data point that is off our forecast map. The requested page could not be found. Let's get you back to charted territory."}),Y.jsx(Bv,{to:"/",className:"cta-button",children:"Return to Dashboard"})]})})}function gY(){return Y.jsx(nz,{children:Y.jsx(SN,{children:Y.jsxs(OR,{children:[Y.jsx(Dl,{path:"/",element:Y.jsx(CN,{})}),Y.jsx(Dl,{path:"/about",element:Y.jsx(AN,{})}),Y.jsx(Dl,{path:"/maps",element:Y.jsx(JX,{})}),Y.jsx(Dl,{path:"/alerts",element:Y.jsx(nY,{})}),Y.jsx(Dl,{path:"/living-labs",element:Y.jsx(sY,{})}),Y.jsx(Dl,{path:"/serious-games",element:Y.jsx(uY,{})}),Y.jsx(Dl,{path:"/research",element:Y.jsx(dY,{})}),Y.jsx(Dl,{path:"/team",element:Y.jsx(fY,{})}),Y.jsx(Dl,{path:"/admin",element:Y.jsx(pY,{})}),Y.jsx(Dl,{path:"*",element:Y.jsx(mY,{})})]})})})}$4.createRoot(document.getElementById("root")).render(Y.jsx(qh.StrictMode,{children:Y.jsx(gY,{})}));
