var iz=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var One=iz((jne,Zg)=>{function az(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const d=Object.getOwnPropertyDescriptor(n,s);d&&Object.defineProperty(e,s,d.get?d:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function r(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerPolicy&&(d.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?d.credentials="include":s.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(s){if(s.ep)return;s.ep=!0;const d=r(s);fetch(s.href,d)}})();var Ky=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var W_={exports:{}},Cm={},G_={exports:{}},jr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uA;function oz(){if(uA)return jr;uA=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),h=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.iterator;function M(ne){return ne===null||typeof ne!="object"?null:(ne=A&&ne[A]||ne["@@iterator"],typeof ne=="function"?ne:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,B={};function L(ne,Ce,nt){this.props=ne,this.context=Ce,this.refs=B,this.updater=nt||N}L.prototype.isReactComponent={},L.prototype.setState=function(ne,Ce){if(typeof ne!="object"&&typeof ne!="function"&&ne!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ne,Ce,"setState")},L.prototype.forceUpdate=function(ne){this.updater.enqueueForceUpdate(this,ne,"forceUpdate")};function K(){}K.prototype=L.prototype;function Q(ne,Ce,nt){this.props=ne,this.context=Ce,this.refs=B,this.updater=nt||N}var J=Q.prototype=new K;J.constructor=Q,U(J,L.prototype),J.isPureReactComponent=!0;var ie=Array.isArray,Z=Object.prototype.hasOwnProperty,X={current:null},le={key:!0,ref:!0,__self:!0,__source:!0};function de(ne,Ce,nt){var ht,pt={},At=null,_t=null;if(Ce!=null)for(ht in Ce.ref!==void 0&&(_t=Ce.ref),Ce.key!==void 0&&(At=""+Ce.key),Ce)Z.call(Ce,ht)&&!le.hasOwnProperty(ht)&&(pt[ht]=Ce[ht]);var wt=arguments.length-2;if(wt===1)pt.children=nt;else if(1<wt){for(var ot=Array(wt),It=0;It<wt;It++)ot[It]=arguments[It+2];pt.children=ot}if(ne&&ne.defaultProps)for(ht in wt=ne.defaultProps,wt)pt[ht]===void 0&&(pt[ht]=wt[ht]);return{$$typeof:e,type:ne,key:At,ref:_t,props:pt,_owner:X.current}}function Pe(ne,Ce){return{$$typeof:e,type:ne.type,key:Ce,ref:ne.ref,props:ne.props,_owner:ne._owner}}function Fe(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===e}function be(ne){var Ce={"=":"=0",":":"=2"};return"$"+ne.replace(/[=:]/g,function(nt){return Ce[nt]})}var Ue=/\/+/g;function Ve(ne,Ce){return typeof ne=="object"&&ne!==null&&ne.key!=null?be(""+ne.key):Ce.toString(36)}function Ze(ne,Ce,nt,ht,pt){var At=typeof ne;(At==="undefined"||At==="boolean")&&(ne=null);var _t=!1;if(ne===null)_t=!0;else switch(At){case"string":case"number":_t=!0;break;case"object":switch(ne.$$typeof){case e:case t:_t=!0}}if(_t)return _t=ne,pt=pt(_t),ne=ht===""?"."+Ve(_t,0):ht,ie(pt)?(nt="",ne!=null&&(nt=ne.replace(Ue,"$&/")+"/"),Ze(pt,Ce,nt,"",function(It){return It})):pt!=null&&(Fe(pt)&&(pt=Pe(pt,nt+(!pt.key||_t&&_t.key===pt.key?"":(""+pt.key).replace(Ue,"$&/")+"/")+ne)),Ce.push(pt)),1;if(_t=0,ht=ht===""?".":ht+":",ie(ne))for(var wt=0;wt<ne.length;wt++){At=ne[wt];var ot=ht+Ve(At,wt);_t+=Ze(At,Ce,nt,ot,pt)}else if(ot=M(ne),typeof ot=="function")for(ne=ot.call(ne),wt=0;!(At=ne.next()).done;)At=At.value,ot=ht+Ve(At,wt++),_t+=Ze(At,Ce,nt,ot,pt);else if(At==="object")throw Ce=String(ne),Error("Objects are not valid as a React child (found: "+(Ce==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":Ce)+"). If you meant to render a collection of children, use an array instead.");return _t}function Ye(ne,Ce,nt){if(ne==null)return ne;var ht=[],pt=0;return Ze(ne,ht,"","",function(At){return Ce.call(nt,At,pt++)}),ht}function it(ne){if(ne._status===-1){var Ce=ne._result;Ce=Ce(),Ce.then(function(nt){(ne._status===0||ne._status===-1)&&(ne._status=1,ne._result=nt)},function(nt){(ne._status===0||ne._status===-1)&&(ne._status=2,ne._result=nt)}),ne._status===-1&&(ne._status=0,ne._result=Ce)}if(ne._status===1)return ne._result.default;throw ne._result}var et={current:null},Ge={transition:null},rt={ReactCurrentDispatcher:et,ReactCurrentBatchConfig:Ge,ReactCurrentOwner:X};function ge(){throw Error("act(...) is not supported in production builds of React.")}return jr.Children={map:Ye,forEach:function(ne,Ce,nt){Ye(ne,function(){Ce.apply(this,arguments)},nt)},count:function(ne){var Ce=0;return Ye(ne,function(){Ce++}),Ce},toArray:function(ne){return Ye(ne,function(Ce){return Ce})||[]},only:function(ne){if(!Fe(ne))throw Error("React.Children.only expected to receive a single React element child.");return ne}},jr.Component=L,jr.Fragment=r,jr.Profiler=s,jr.PureComponent=Q,jr.StrictMode=n,jr.Suspense=_,jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rt,jr.act=ge,jr.cloneElement=function(ne,Ce,nt){if(ne==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ne+".");var ht=U({},ne.props),pt=ne.key,At=ne.ref,_t=ne._owner;if(Ce!=null){if(Ce.ref!==void 0&&(At=Ce.ref,_t=X.current),Ce.key!==void 0&&(pt=""+Ce.key),ne.type&&ne.type.defaultProps)var wt=ne.type.defaultProps;for(ot in Ce)Z.call(Ce,ot)&&!le.hasOwnProperty(ot)&&(ht[ot]=Ce[ot]===void 0&&wt!==void 0?wt[ot]:Ce[ot])}var ot=arguments.length-2;if(ot===1)ht.children=nt;else if(1<ot){wt=Array(ot);for(var It=0;It<ot;It++)wt[It]=arguments[It+2];ht.children=wt}return{$$typeof:e,type:ne.type,key:pt,ref:At,props:ht,_owner:_t}},jr.createContext=function(ne){return ne={$$typeof:h,_currentValue:ne,_currentValue2:ne,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ne.Provider={$$typeof:d,_context:ne},ne.Consumer=ne},jr.createElement=de,jr.createFactory=function(ne){var Ce=de.bind(null,ne);return Ce.type=ne,Ce},jr.createRef=function(){return{current:null}},jr.forwardRef=function(ne){return{$$typeof:l,render:ne}},jr.isValidElement=Fe,jr.lazy=function(ne){return{$$typeof:E,_payload:{_status:-1,_result:ne},_init:it}},jr.memo=function(ne,Ce){return{$$typeof:w,type:ne,compare:Ce===void 0?null:Ce}},jr.startTransition=function(ne){var Ce=Ge.transition;Ge.transition={};try{ne()}finally{Ge.transition=Ce}},jr.unstable_act=ge,jr.useCallback=function(ne,Ce){return et.current.useCallback(ne,Ce)},jr.useContext=function(ne){return et.current.useContext(ne)},jr.useDebugValue=function(){},jr.useDeferredValue=function(ne){return et.current.useDeferredValue(ne)},jr.useEffect=function(ne,Ce){return et.current.useEffect(ne,Ce)},jr.useId=function(){return et.current.useId()},jr.useImperativeHandle=function(ne,Ce,nt){return et.current.useImperativeHandle(ne,Ce,nt)},jr.useInsertionEffect=function(ne,Ce){return et.current.useInsertionEffect(ne,Ce)},jr.useLayoutEffect=function(ne,Ce){return et.current.useLayoutEffect(ne,Ce)},jr.useMemo=function(ne,Ce){return et.current.useMemo(ne,Ce)},jr.useReducer=function(ne,Ce,nt){return et.current.useReducer(ne,Ce,nt)},jr.useRef=function(ne){return et.current.useRef(ne)},jr.useState=function(ne){return et.current.useState(ne)},jr.useSyncExternalStore=function(ne,Ce,nt){return et.current.useSyncExternalStore(ne,Ce,nt)},jr.useTransition=function(){return et.current.useTransition()},jr.version="18.3.1",jr}var cA;function eT(){return cA||(cA=1,G_.exports=oz()),G_.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hA;function sz(){if(hA)return Cm;hA=1;var e=eT(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function h(l,_,w){var E,A={},M=null,N=null;w!==void 0&&(M=""+w),_.key!==void 0&&(M=""+_.key),_.ref!==void 0&&(N=_.ref);for(E in _)n.call(_,E)&&!d.hasOwnProperty(E)&&(A[E]=_[E]);if(l&&l.defaultProps)for(E in _=l.defaultProps,_)A[E]===void 0&&(A[E]=_[E]);return{$$typeof:t,type:l,key:M,ref:N,props:A,_owner:s.current}}return Cm.Fragment=r,Cm.jsx=h,Cm.jsxs=h,Cm}var fA;function lz(){return fA||(fA=1,W_.exports=sz()),W_.exports}var q=lz(),Se=eT();const Le=pn(Se),uz=az({__proto__:null,default:Le},[Se]);var Xy={},H_={exports:{}},To={},Z_={exports:{}},K_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dA;function cz(){return dA||(dA=1,(function(e){function t(Ge,rt){var ge=Ge.length;Ge.push(rt);e:for(;0<ge;){var ne=ge-1>>>1,Ce=Ge[ne];if(0<s(Ce,rt))Ge[ne]=rt,Ge[ge]=Ce,ge=ne;else break e}}function r(Ge){return Ge.length===0?null:Ge[0]}function n(Ge){if(Ge.length===0)return null;var rt=Ge[0],ge=Ge.pop();if(ge!==rt){Ge[0]=ge;e:for(var ne=0,Ce=Ge.length,nt=Ce>>>1;ne<nt;){var ht=2*(ne+1)-1,pt=Ge[ht],At=ht+1,_t=Ge[At];if(0>s(pt,ge))At<Ce&&0>s(_t,pt)?(Ge[ne]=_t,Ge[At]=ge,ne=At):(Ge[ne]=pt,Ge[ht]=ge,ne=ht);else if(At<Ce&&0>s(_t,ge))Ge[ne]=_t,Ge[At]=ge,ne=At;else break e}}return rt}function s(Ge,rt){var ge=Ge.sortIndex-rt.sortIndex;return ge!==0?ge:Ge.id-rt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var h=Date,l=h.now();e.unstable_now=function(){return h.now()-l}}var _=[],w=[],E=1,A=null,M=3,N=!1,U=!1,B=!1,L=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function J(Ge){for(var rt=r(w);rt!==null;){if(rt.callback===null)n(w);else if(rt.startTime<=Ge)n(w),rt.sortIndex=rt.expirationTime,t(_,rt);else break;rt=r(w)}}function ie(Ge){if(B=!1,J(Ge),!U)if(r(_)!==null)U=!0,it(Z);else{var rt=r(w);rt!==null&&et(ie,rt.startTime-Ge)}}function Z(Ge,rt){U=!1,B&&(B=!1,K(de),de=-1),N=!0;var ge=M;try{for(J(rt),A=r(_);A!==null&&(!(A.expirationTime>rt)||Ge&&!be());){var ne=A.callback;if(typeof ne=="function"){A.callback=null,M=A.priorityLevel;var Ce=ne(A.expirationTime<=rt);rt=e.unstable_now(),typeof Ce=="function"?A.callback=Ce:A===r(_)&&n(_),J(rt)}else n(_);A=r(_)}if(A!==null)var nt=!0;else{var ht=r(w);ht!==null&&et(ie,ht.startTime-rt),nt=!1}return nt}finally{A=null,M=ge,N=!1}}var X=!1,le=null,de=-1,Pe=5,Fe=-1;function be(){return!(e.unstable_now()-Fe<Pe)}function Ue(){if(le!==null){var Ge=e.unstable_now();Fe=Ge;var rt=!0;try{rt=le(!0,Ge)}finally{rt?Ve():(X=!1,le=null)}}else X=!1}var Ve;if(typeof Q=="function")Ve=function(){Q(Ue)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,Ye=Ze.port2;Ze.port1.onmessage=Ue,Ve=function(){Ye.postMessage(null)}}else Ve=function(){L(Ue,0)};function it(Ge){le=Ge,X||(X=!0,Ve())}function et(Ge,rt){de=L(function(){Ge(e.unstable_now())},rt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ge){Ge.callback=null},e.unstable_continueExecution=function(){U||N||(U=!0,it(Z))},e.unstable_forceFrameRate=function(Ge){0>Ge||125<Ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Pe=0<Ge?Math.floor(1e3/Ge):5},e.unstable_getCurrentPriorityLevel=function(){return M},e.unstable_getFirstCallbackNode=function(){return r(_)},e.unstable_next=function(Ge){switch(M){case 1:case 2:case 3:var rt=3;break;default:rt=M}var ge=M;M=rt;try{return Ge()}finally{M=ge}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ge,rt){switch(Ge){case 1:case 2:case 3:case 4:case 5:break;default:Ge=3}var ge=M;M=Ge;try{return rt()}finally{M=ge}},e.unstable_scheduleCallback=function(Ge,rt,ge){var ne=e.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?ne+ge:ne):ge=ne,Ge){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=ge+Ce,Ge={id:E++,callback:rt,priorityLevel:Ge,startTime:ge,expirationTime:Ce,sortIndex:-1},ge>ne?(Ge.sortIndex=ge,t(w,Ge),r(_)===null&&Ge===r(w)&&(B?(K(de),de=-1):B=!0,et(ie,ge-ne))):(Ge.sortIndex=Ce,t(_,Ge),U||N||(U=!0,it(Z))),Ge},e.unstable_shouldYield=be,e.unstable_wrapCallback=function(Ge){var rt=M;return function(){var ge=M;M=rt;try{return Ge.apply(this,arguments)}finally{M=ge}}}})(K_)),K_}var pA;function hz(){return pA||(pA=1,Z_.exports=cz()),Z_.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mA;function fz(){if(mA)return To;mA=1;var e=eT(),t=hz();function r(c){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+c,x=1;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+c+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function d(c,p){h(c,p),h(c+"Capture",p)}function h(c,p){for(s[c]=p,c=0;c<p.length;c++)n.add(p[c])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},A={};function M(c){return _.call(A,c)?!0:_.call(E,c)?!1:w.test(c)?A[c]=!0:(E[c]=!0,!1)}function N(c,p,x,C){if(x!==null&&x.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return C?!1:x!==null?!x.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function U(c,p,x,C){if(p===null||typeof p>"u"||N(c,p,x,C))return!0;if(C)return!1;if(x!==null)switch(x.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function B(c,p,x,C,R,F,oe){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=C,this.attributeNamespace=R,this.mustUseProperty=x,this.propertyName=c,this.type=p,this.sanitizeURL=F,this.removeEmptyString=oe}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){L[c]=new B(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var p=c[0];L[p]=new B(p,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){L[c]=new B(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){L[c]=new B(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){L[c]=new B(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){L[c]=new B(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){L[c]=new B(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){L[c]=new B(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){L[c]=new B(c,5,!1,c.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function Q(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var p=c.replace(K,Q);L[p]=new B(p,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var p=c.replace(K,Q);L[p]=new B(p,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var p=c.replace(K,Q);L[p]=new B(p,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){L[c]=new B(c,1,!1,c.toLowerCase(),null,!1,!1)}),L.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){L[c]=new B(c,1,!1,c.toLowerCase(),null,!0,!0)});function J(c,p,x,C){var R=L.hasOwnProperty(p)?L[p]:null;(R!==null?R.type!==0:C||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(U(p,x,R,C)&&(x=null),C||R===null?M(p)&&(x===null?c.removeAttribute(p):c.setAttribute(p,""+x)):R.mustUseProperty?c[R.propertyName]=x===null?R.type===3?!1:"":x:(p=R.attributeName,C=R.attributeNamespace,x===null?c.removeAttribute(p):(R=R.type,x=R===3||R===4&&x===!0?"":""+x,C?c.setAttributeNS(C,p,x):c.setAttribute(p,x))))}var ie=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),X=Symbol.for("react.portal"),le=Symbol.for("react.fragment"),de=Symbol.for("react.strict_mode"),Pe=Symbol.for("react.profiler"),Fe=Symbol.for("react.provider"),be=Symbol.for("react.context"),Ue=Symbol.for("react.forward_ref"),Ve=Symbol.for("react.suspense"),Ze=Symbol.for("react.suspense_list"),Ye=Symbol.for("react.memo"),it=Symbol.for("react.lazy"),et=Symbol.for("react.offscreen"),Ge=Symbol.iterator;function rt(c){return c===null||typeof c!="object"?null:(c=Ge&&c[Ge]||c["@@iterator"],typeof c=="function"?c:null)}var ge=Object.assign,ne;function Ce(c){if(ne===void 0)try{throw Error()}catch(x){var p=x.stack.trim().match(/\n( *(at )?)/);ne=p&&p[1]||""}return`
`+ne+c}var nt=!1;function ht(c,p){if(!c||nt)return"";nt=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(Je){var C=Je}Reflect.construct(c,[],p)}else{try{p.call()}catch(Je){C=Je}c.call(p.prototype)}else{try{throw Error()}catch(Je){C=Je}c()}}catch(Je){if(Je&&C&&typeof Je.stack=="string"){for(var R=Je.stack.split(`
`),F=C.stack.split(`
`),oe=R.length-1,Te=F.length-1;1<=oe&&0<=Te&&R[oe]!==F[Te];)Te--;for(;1<=oe&&0<=Te;oe--,Te--)if(R[oe]!==F[Te]){if(oe!==1||Te!==1)do if(oe--,Te--,0>Te||R[oe]!==F[Te]){var Oe=`
`+R[oe].replace(" at new "," at ");return c.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",c.displayName)),Oe}while(1<=oe&&0<=Te);break}}}finally{nt=!1,Error.prepareStackTrace=x}return(c=c?c.displayName||c.name:"")?Ce(c):""}function pt(c){switch(c.tag){case 5:return Ce(c.type);case 16:return Ce("Lazy");case 13:return Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 2:case 15:return c=ht(c.type,!1),c;case 11:return c=ht(c.type.render,!1),c;case 1:return c=ht(c.type,!0),c;default:return""}}function At(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case le:return"Fragment";case X:return"Portal";case Pe:return"Profiler";case de:return"StrictMode";case Ve:return"Suspense";case Ze:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case be:return(c.displayName||"Context")+".Consumer";case Fe:return(c._context.displayName||"Context")+".Provider";case Ue:var p=c.render;return c=c.displayName,c||(c=p.displayName||p.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Ye:return p=c.displayName||null,p!==null?p:At(c.type)||"Memo";case it:p=c._payload,c=c._init;try{return At(c(p))}catch{}}return null}function _t(c){var p=c.type;switch(c.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=p.render,c=c.displayName||c.name||"",p.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return At(p);case 8:return p===de?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function wt(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function ot(c){var p=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function It(c){var p=ot(c)?"checked":"value",x=Object.getOwnPropertyDescriptor(c.constructor.prototype,p),C=""+c[p];if(!c.hasOwnProperty(p)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var R=x.get,F=x.set;return Object.defineProperty(c,p,{configurable:!0,get:function(){return R.call(this)},set:function(oe){C=""+oe,F.call(this,oe)}}),Object.defineProperty(c,p,{enumerable:x.enumerable}),{getValue:function(){return C},setValue:function(oe){C=""+oe},stopTracking:function(){c._valueTracker=null,delete c[p]}}}}function Ft(c){c._valueTracker||(c._valueTracker=It(c))}function at(c){if(!c)return!1;var p=c._valueTracker;if(!p)return!0;var x=p.getValue(),C="";return c&&(C=ot(c)?c.checked?"true":"false":c.value),c=C,c!==x?(p.setValue(c),!0):!1}function ar(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function jt(c,p){var x=p.checked;return ge({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??c._wrapperState.initialChecked})}function br(c,p){var x=p.defaultValue==null?"":p.defaultValue,C=p.checked!=null?p.checked:p.defaultChecked;x=wt(p.value!=null?p.value:x),c._wrapperState={initialChecked:C,initialValue:x,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function $e(c,p){p=p.checked,p!=null&&J(c,"checked",p,!1)}function Er(c,p){$e(c,p);var x=wt(p.value),C=p.type;if(x!=null)C==="number"?(x===0&&c.value===""||c.value!=x)&&(c.value=""+x):c.value!==""+x&&(c.value=""+x);else if(C==="submit"||C==="reset"){c.removeAttribute("value");return}p.hasOwnProperty("value")?lr(c,p.type,x):p.hasOwnProperty("defaultValue")&&lr(c,p.type,wt(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(c.defaultChecked=!!p.defaultChecked)}function hn(c,p,x){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var C=p.type;if(!(C!=="submit"&&C!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+c._wrapperState.initialValue,x||p===c.value||(c.value=p),c.defaultValue=p}x=c.name,x!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,x!==""&&(c.name=x)}function lr(c,p,x){(p!=="number"||ar(c.ownerDocument)!==c)&&(x==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+x&&(c.defaultValue=""+x))}var xr=Array.isArray;function Ln(c,p,x,C){if(c=c.options,p){p={};for(var R=0;R<x.length;R++)p["$"+x[R]]=!0;for(x=0;x<c.length;x++)R=p.hasOwnProperty("$"+c[x].value),c[x].selected!==R&&(c[x].selected=R),R&&C&&(c[x].defaultSelected=!0)}else{for(x=""+wt(x),p=null,R=0;R<c.length;R++){if(c[R].value===x){c[R].selected=!0,C&&(c[R].defaultSelected=!0);return}p!==null||c[R].disabled||(p=c[R])}p!==null&&(p.selected=!0)}}function Nn(c,p){if(p.dangerouslySetInnerHTML!=null)throw Error(r(91));return ge({},p,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function di(c,p){var x=p.value;if(x==null){if(x=p.children,p=p.defaultValue,x!=null){if(p!=null)throw Error(r(92));if(xr(x)){if(1<x.length)throw Error(r(93));x=x[0]}p=x}p==null&&(p=""),x=p}c._wrapperState={initialValue:wt(x)}}function ta(c,p){var x=wt(p.value),C=wt(p.defaultValue);x!=null&&(x=""+x,x!==c.value&&(c.value=x),p.defaultValue==null&&c.defaultValue!==x&&(c.defaultValue=x)),C!=null&&(c.defaultValue=""+C)}function Kn(c){var p=c.textContent;p===c._wrapperState.initialValue&&p!==""&&p!==null&&(c.value=p)}function Co(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mo(c,p){return c==null||c==="http://www.w3.org/1999/xhtml"?Co(p):c==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var yt,zi=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,x,C,R){MSApp.execUnsafeLocalFunction(function(){return c(p,x,C,R)})}:c})(function(c,p){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=p;else{for(yt=yt||document.createElement("div"),yt.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=yt.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;p.firstChild;)c.appendChild(p.firstChild)}});function Tn(c,p){if(p){var x=c.firstChild;if(x&&x===c.lastChild&&x.nodeType===3){x.nodeValue=p;return}}c.textContent=p}var Xn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ho=["Webkit","ms","Moz","O"];Object.keys(Xn).forEach(function(c){ho.forEach(function(p){p=p+c.charAt(0).toUpperCase()+c.substring(1),Xn[p]=Xn[c]})});function St(c,p,x){return p==null||typeof p=="boolean"||p===""?"":x||typeof p!="number"||p===0||Xn.hasOwnProperty(c)&&Xn[c]?(""+p).trim():p+"px"}function vr(c,p){c=c.style;for(var x in p)if(p.hasOwnProperty(x)){var C=x.indexOf("--")===0,R=St(x,p[x],C);x==="float"&&(x="cssFloat"),C?c.setProperty(x,R):c[x]=R}}var nr=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pi(c,p){if(p){if(nr[c]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(r(137,c));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(r(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(r(61))}if(p.style!=null&&typeof p.style!="object")throw Error(r(62))}}function ra(c,p){if(c.indexOf("-")===-1)return typeof p.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ur=null;function xa(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var qa=null,na=null,Si=null;function xe(c){if(c=Ou(c)){if(typeof qa!="function")throw Error(r(280));var p=c.stateNode;p&&(p=Du(p),qa(c.stateNode,c.type,p))}}function te(c){na?Si?Si.push(c):Si=[c]:na=c}function ee(){if(na){var c=na,p=Si;if(Si=na=null,xe(c),p)for(c=0;c<p.length;c++)xe(p[c])}}function ce(c,p){return c(p)}function ye(){}var Ie=!1;function Re(c,p,x){if(Ie)return c(p,x);Ie=!0;try{return ce(c,p,x)}finally{Ie=!1,(na!==null||Si!==null)&&(ye(),ee())}}function Be(c,p){var x=c.stateNode;if(x===null)return null;var C=Du(x);if(C===null)return null;x=C[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(c=c.type,C=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!C;break e;default:c=!1}if(c)return null;if(x&&typeof x!="function")throw Error(r(231,p,typeof x));return x}var Ee=!1;if(l)try{var Qe={};Object.defineProperty(Qe,"passive",{get:function(){Ee=!0}}),window.addEventListener("test",Qe,Qe),window.removeEventListener("test",Qe,Qe)}catch{Ee=!1}function ct(c,p,x,C,R,F,oe,Te,Oe){var Je=Array.prototype.slice.call(arguments,3);try{p.apply(x,Je)}catch(mt){this.onError(mt)}}var Ke=!1,bt=null,qt=!1,Yt=null,Ir={onError:function(c){Ke=!0,bt=c}};function fr(c,p,x,C,R,F,oe,Te,Oe){Ke=!1,bt=null,ct.apply(Ir,arguments)}function kr(c,p,x,C,R,F,oe,Te,Oe){if(fr.apply(this,arguments),Ke){if(Ke){var Je=bt;Ke=!1,bt=null}else throw Error(r(198));qt||(qt=!0,Yt=Je)}}function yr(c){var p=c,x=c;if(c.alternate)for(;p.return;)p=p.return;else{c=p;do p=c,(p.flags&4098)!==0&&(x=p.return),c=p.return;while(c)}return p.tag===3?x:null}function Mn(c){if(c.tag===13){var p=c.memoizedState;if(p===null&&(c=c.alternate,c!==null&&(p=c.memoizedState)),p!==null)return p.dehydrated}return null}function mn(c){if(yr(c)!==c)throw Error(r(188))}function wr(c){var p=c.alternate;if(!p){if(p=yr(c),p===null)throw Error(r(188));return p!==c?null:c}for(var x=c,C=p;;){var R=x.return;if(R===null)break;var F=R.alternate;if(F===null){if(C=R.return,C!==null){x=C;continue}break}if(R.child===F.child){for(F=R.child;F;){if(F===x)return mn(R),c;if(F===C)return mn(R),p;F=F.sibling}throw Error(r(188))}if(x.return!==C.return)x=R,C=F;else{for(var oe=!1,Te=R.child;Te;){if(Te===x){oe=!0,x=R,C=F;break}if(Te===C){oe=!0,C=R,x=F;break}Te=Te.sibling}if(!oe){for(Te=F.child;Te;){if(Te===x){oe=!0,x=F,C=R;break}if(Te===C){oe=!0,C=F,x=R;break}Te=Te.sibling}if(!oe)throw Error(r(189))}}if(x.alternate!==C)throw Error(r(190))}if(x.tag!==3)throw Error(r(188));return x.stateNode.current===x?c:p}function Fr(c){return c=wr(c),c!==null?an(c):null}function an(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var p=an(c);if(p!==null)return p;c=c.sibling}return null}var Vn=t.unstable_scheduleCallback,Yn=t.unstable_cancelCallback,Ti=t.unstable_shouldYield,bl=t.unstable_requestPaint,cr=t.unstable_now,dh=t.unstable_getCurrentPriorityLevel,pu=t.unstable_ImmediatePriority,Li=t.unstable_UserBlockingPriority,mi=t.unstable_NormalPriority,Up=t.unstable_LowPriority,ia=t.unstable_IdlePriority,gi=null,Pi=null;function $s(c){if(Pi&&typeof Pi.onCommitFiberRoot=="function")try{Pi.onCommitFiberRoot(gi,c,void 0,(c.current.flags&128)===128)}catch{}}var Wr=Math.clz32?Math.clz32:In,mu=Math.log,Wa=Math.LN2;function In(c){return c>>>=0,c===0?32:31-(mu(c)/Wa|0)|0}var Vs=64,Ni=4194304;function Us(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Bi(c,p){var x=c.pendingLanes;if(x===0)return 0;var C=0,R=c.suspendedLanes,F=c.pingedLanes,oe=x&268435455;if(oe!==0){var Te=oe&~R;Te!==0?C=Us(Te):(F&=oe,F!==0&&(C=Us(F)))}else oe=x&~R,oe!==0?C=Us(oe):F!==0&&(C=Us(F));if(C===0)return 0;if(p!==0&&p!==C&&(p&R)===0&&(R=C&-C,F=p&-p,R>=F||R===16&&(F&4194240)!==0))return p;if((C&4)!==0&&(C|=x&16),p=c.entangledLanes,p!==0)for(c=c.entanglements,p&=C;0<p;)x=31-Wr(p),R=1<<x,C|=c[x],p&=~R;return C}function qp(c,p){switch(c){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dc(c,p){for(var x=c.suspendedLanes,C=c.pingedLanes,R=c.expirationTimes,F=c.pendingLanes;0<F;){var oe=31-Wr(F),Te=1<<oe,Oe=R[oe];Oe===-1?((Te&x)===0||(Te&C)!==0)&&(R[oe]=qp(Te,p)):Oe<=p&&(c.expiredLanes|=Te),F&=~Te}}function Io(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function ko(){var c=Vs;return Vs<<=1,(Vs&4194240)===0&&(Vs=64),c}function Or(c){for(var p=[],x=0;31>x;x++)p.push(c);return p}function qs(c,p,x){c.pendingLanes|=p,p!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,p=31-Wr(p),c[p]=x}function ph(c,p){var x=c.pendingLanes&~p;c.pendingLanes=p,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=p,c.mutableReadLanes&=p,c.entangledLanes&=p,p=c.entanglements;var C=c.eventTimes;for(c=c.expirationTimes;0<x;){var R=31-Wr(x),F=1<<R;p[R]=0,C[R]=-1,c[R]=-1,x&=~F}}function us(c,p){var x=c.entangledLanes|=p;for(c=c.entanglements;x;){var C=31-Wr(x),R=1<<C;R&p|c[C]&p&&(c[C]|=p),x&=~R}}var $r=0;function gu(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var wl,Sl,Ws,mh,Hf,pc=!1,mc=[],Fi=null,ba=null,kn=null,Jn=new Map,cs=new Map,Ga=[],gc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gh(c,p){switch(c){case"focusin":case"focusout":Fi=null;break;case"dragenter":case"dragleave":ba=null;break;case"mouseover":case"mouseout":kn=null;break;case"pointerover":case"pointerout":Jn.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":cs.delete(p.pointerId)}}function fo(c,p,x,C,R,F){return c===null||c.nativeEvent!==F?(c={blockedOn:p,domEventName:x,eventSystemFlags:C,nativeEvent:F,targetContainers:[R]},p!==null&&(p=Ou(p),p!==null&&Sl(p)),c):(c.eventSystemFlags|=C,p=c.targetContainers,R!==null&&p.indexOf(R)===-1&&p.push(R),c)}function Wp(c,p,x,C,R){switch(p){case"focusin":return Fi=fo(Fi,c,p,x,C,R),!0;case"dragenter":return ba=fo(ba,c,p,x,C,R),!0;case"mouseover":return kn=fo(kn,c,p,x,C,R),!0;case"pointerover":var F=R.pointerId;return Jn.set(F,fo(Jn.get(F)||null,c,p,x,C,R)),!0;case"gotpointercapture":return F=R.pointerId,cs.set(F,fo(cs.get(F)||null,c,p,x,C,R)),!0}return!1}function yh(c){var p=Uo(c.target);if(p!==null){var x=yr(p);if(x!==null){if(p=x.tag,p===13){if(p=Mn(x),p!==null){c.blockedOn=p,Hf(c.priority,function(){Ws(x)});return}}else if(p===3&&x.stateNode.current.memoizedState.isDehydrated){c.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}c.blockedOn=null}function yu(c){if(c.blockedOn!==null)return!1;for(var p=c.targetContainers;0<p.length;){var x=vu(c.domEventName,c.eventSystemFlags,p[0],c.nativeEvent);if(x===null){x=c.nativeEvent;var C=new x.constructor(x.type,x);ur=C,x.target.dispatchEvent(C),ur=null}else return p=Ou(x),p!==null&&Sl(p),c.blockedOn=x,!1;p.shift()}return!0}function Zf(c,p,x){yu(c)&&x.delete(p)}function Gp(){pc=!1,Fi!==null&&yu(Fi)&&(Fi=null),ba!==null&&yu(ba)&&(ba=null),kn!==null&&yu(kn)&&(kn=null),Jn.forEach(Zf),cs.forEach(Zf)}function Tl(c,p){c.blockedOn===p&&(c.blockedOn=null,pc||(pc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Gp)))}function Oo(c){function p(R){return Tl(R,c)}if(0<mc.length){Tl(mc[0],c);for(var x=1;x<mc.length;x++){var C=mc[x];C.blockedOn===c&&(C.blockedOn=null)}}for(Fi!==null&&Tl(Fi,c),ba!==null&&Tl(ba,c),kn!==null&&Tl(kn,c),Jn.forEach(p),cs.forEach(p),x=0;x<Ga.length;x++)C=Ga[x],C.blockedOn===c&&(C.blockedOn=null);for(;0<Ga.length&&(x=Ga[0],x.blockedOn===null);)yh(x),x.blockedOn===null&&Ga.shift()}var hs=ie.ReactCurrentBatchConfig,Gs=!0;function vh(c,p,x,C){var R=$r,F=hs.transition;hs.transition=null;try{$r=1,wa(c,p,x,C)}finally{$r=R,hs.transition=F}}function _h(c,p,x,C){var R=$r,F=hs.transition;hs.transition=null;try{$r=4,wa(c,p,x,C)}finally{$r=R,hs.transition=F}}function wa(c,p,x,C){if(Gs){var R=vu(c,p,x,C);if(R===null)ku(c,p,C,yc,x),gh(c,C);else if(Wp(R,c,p,x,C))C.stopPropagation();else if(gh(c,C),p&4&&-1<gc.indexOf(c)){for(;R!==null;){var F=Ou(R);if(F!==null&&wl(F),F=vu(c,p,x,C),F===null&&ku(c,p,C,yc,x),F===R)break;R=F}R!==null&&C.stopPropagation()}else ku(c,p,C,null,x)}}var yc=null;function vu(c,p,x,C){if(yc=null,c=xa(C),c=Uo(c),c!==null)if(p=yr(c),p===null)c=null;else if(x=p.tag,x===13){if(c=Mn(p),c!==null)return c;c=null}else if(x===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;c=null}else p!==c&&(c=null);return yc=c,null}function fs(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dh()){case pu:return 1;case Li:return 4;case mi:case Up:return 16;case ia:return 536870912;default:return 16}default:return 16}}var Ai=null,Rr=null,Hs=null;function Kf(){if(Hs)return Hs;var c,p=Rr,x=p.length,C,R="value"in Ai?Ai.value:Ai.textContent,F=R.length;for(c=0;c<x&&p[c]===R[c];c++);var oe=x-c;for(C=1;C<=oe&&p[x-C]===R[F-C];C++);return Hs=R.slice(c,1<C?1-C:void 0)}function Do(c){var p=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&p===13&&(c=13)):c=p,c===10&&(c=13),32<=c||c===13?c:0}function vc(){return!0}function xh(){return!1}function aa(c){function p(x,C,R,F,oe){this._reactName=x,this._targetInst=R,this.type=C,this.nativeEvent=F,this.target=oe,this.currentTarget=null;for(var Te in c)c.hasOwnProperty(Te)&&(x=c[Te],this[Te]=x?x(F):F[Te]);return this.isDefaultPrevented=(F.defaultPrevented!=null?F.defaultPrevented:F.returnValue===!1)?vc:xh,this.isPropagationStopped=xh,this}return ge(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=vc)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=vc)},persist:function(){},isPersistent:vc}),p}var Zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_u=aa(Zs),Pl=ge({},Zs,{view:0,detail:0}),Xf=aa(Pl),_c,xc,Ha,xu=ge({},Pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wu,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Ha&&(Ha&&c.type==="mousemove"?(_c=c.screenX-Ha.screenX,xc=c.screenY-Ha.screenY):xc=_c=0,Ha=c),_c)},movementY:function(c){return"movementY"in c?c.movementY:xc}}),Yf=aa(xu),Jf=ge({},xu,{dataTransfer:0}),bu=aa(Jf),Hp=ge({},Pl,{relatedTarget:0}),Al=aa(Hp),Zp=ge({},Zs,{animationName:0,elapsedTime:0,pseudoElement:0}),Kp=aa(Zp),Qf=ge({},Zs,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),ed=aa(Qf),td=ge({},Zs,{data:0}),bc=aa(td),rd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ro={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bh(c){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(c):(c=Ro[c])?!!p[c]:!1}function wu(){return bh}var wh=ge({},Pl,{key:function(c){if(c.key){var p=rd[c.key]||c.key;if(p!=="Unidentified")return p}return c.type==="keypress"?(c=Do(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?wc[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wu,charCode:function(c){return c.type==="keypress"?Do(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Do(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),Sc=aa(wh),Sh=ge({},xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ds=aa(Sh),Th=ge({},Pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wu}),Xp=aa(Th),Pn=ge({},Zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yp=aa(Pn),Tr=ge({},xu,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Tc=aa(Tr),en=[9,13,27,32],Vr=l&&"CompositionEvent"in window,Za=null;l&&"documentMode"in document&&(Za=document.documentMode);var Su=l&&"TextEvent"in window&&!Za,El=l&&(!Vr||Za&&8<Za&&11>=Za),Pc=" ",ps=!1;function Ks(c,p){switch(c){case"keyup":return en.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oa(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var ms=!1;function Ph(c,p){switch(c){case"compositionend":return oa(p);case"keypress":return p.which!==32?null:(ps=!0,Pc);case"textInput":return c=p.data,c===Pc&&ps?null:c;default:return null}}function Ah(c,p){if(ms)return c==="compositionend"||!Vr&&Ks(c,p)?(c=Kf(),Hs=Rr=Ai=null,ms=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return El&&p.locale!=="ko"?null:p.data;default:return null}}var Xs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cl(c){var p=c&&c.nodeName&&c.nodeName.toLowerCase();return p==="input"?!!Xs[c.type]:p==="textarea"}function Ml(c,p,x,C){te(C),p=jl(p,"onChange"),0<p.length&&(x=new _u("onChange","change",null,x,C),c.push({event:x,listeners:p}))}var po=null,jo=null;function Ac(c){kc(c,0)}function zo(c){var p=Ja(c);if(at(p))return c}function Il(c,p){if(c==="change")return p}var Eh=!1;if(l){var Tu;if(l){var Cr="oninput"in document;if(!Cr){var Pu=document.createElement("div");Pu.setAttribute("oninput","return;"),Cr=typeof Pu.oninput=="function"}Tu=Cr}else Tu=!1;Eh=Tu&&(!document.documentMode||9<document.documentMode)}function nd(){po&&(po.detachEvent("onpropertychange",Ch),jo=po=null)}function Ch(c){if(c.propertyName==="value"&&zo(jo)){var p=[];Ml(p,jo,c,xa(c)),Re(Ac,p)}}function kl(c,p,x){c==="focusin"?(nd(),po=p,jo=x,po.attachEvent("onpropertychange",Ch)):c==="focusout"&&nd()}function id(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return zo(jo)}function Ec(c,p){if(c==="click")return zo(p)}function ad(c,p){if(c==="input"||c==="change")return zo(p)}function od(c,p){return c===p&&(c!==0||1/c===1/p)||c!==c&&p!==p}var $i=typeof Object.is=="function"?Object.is:od;function gs(c,p){if($i(c,p))return!0;if(typeof c!="object"||c===null||typeof p!="object"||p===null)return!1;var x=Object.keys(c),C=Object.keys(p);if(x.length!==C.length)return!1;for(C=0;C<x.length;C++){var R=x[C];if(!_.call(p,R)||!$i(c[R],p[R]))return!1}return!0}function Ys(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Js(c,p){var x=Ys(c);c=0;for(var C;x;){if(x.nodeType===3){if(C=c+x.textContent.length,c<=p&&C>=p)return{node:x,offset:p-c};c=C}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Ys(x)}}function Qs(c,p){return c&&p?c===p?!0:c&&c.nodeType===3?!1:p&&p.nodeType===3?Qs(c,p.parentNode):"contains"in c?c.contains(p):c.compareDocumentPosition?!!(c.compareDocumentPosition(p)&16):!1:!1}function Cc(){for(var c=window,p=ar();p instanceof c.HTMLIFrameElement;){try{var x=typeof p.contentWindow.location.href=="string"}catch{x=!1}if(x)c=p.contentWindow;else break;p=ar(c.document)}return p}function ys(c){var p=c&&c.nodeName&&c.nodeName.toLowerCase();return p&&(p==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||p==="textarea"||c.contentEditable==="true")}function Au(c){var p=Cc(),x=c.focusedElem,C=c.selectionRange;if(p!==x&&x&&x.ownerDocument&&Qs(x.ownerDocument.documentElement,x)){if(C!==null&&ys(x)){if(p=C.start,c=C.end,c===void 0&&(c=p),"selectionStart"in x)x.selectionStart=p,x.selectionEnd=Math.min(c,x.value.length);else if(c=(p=x.ownerDocument||document)&&p.defaultView||window,c.getSelection){c=c.getSelection();var R=x.textContent.length,F=Math.min(C.start,R);C=C.end===void 0?F:Math.min(C.end,R),!c.extend&&F>C&&(R=C,C=F,F=R),R=Js(x,F);var oe=Js(x,C);R&&oe&&(c.rangeCount!==1||c.anchorNode!==R.node||c.anchorOffset!==R.offset||c.focusNode!==oe.node||c.focusOffset!==oe.offset)&&(p=p.createRange(),p.setStart(R.node,R.offset),c.removeAllRanges(),F>C?(c.addRange(p),c.extend(oe.node,oe.offset)):(p.setEnd(oe.node,oe.offset),c.addRange(p)))}}for(p=[],c=x;c=c.parentNode;)c.nodeType===1&&p.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<p.length;x++)c=p[x],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var Mc=l&&"documentMode"in document&&11>=document.documentMode,Lo=null,Eu=null,Cu=null,Ic=!1;function Mu(c,p,x){var C=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Ic||Lo==null||Lo!==ar(C)||(C=Lo,"selectionStart"in C&&ys(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),Cu&&gs(Cu,C)||(Cu=C,C=jl(Eu,"onSelect"),0<C.length&&(p=new _u("onSelect","select",null,p,x),c.push({event:p,listeners:C}),p.target=Lo)))}function Ol(c,p){var x={};return x[c.toLowerCase()]=p.toLowerCase(),x["Webkit"+c]="webkit"+p,x["Moz"+c]="moz"+p,x}var mo={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},el={},ai={};l&&(ai=document.createElement("div").style,"AnimationEvent"in window||(delete mo.animationend.animation,delete mo.animationiteration.animation,delete mo.animationstart.animation),"TransitionEvent"in window||delete mo.transitionend.transition);function go(c){if(el[c])return el[c];if(!mo[c])return c;var p=mo[c],x;for(x in p)if(p.hasOwnProperty(x)&&x in ai)return el[c]=p[x];return c}var Mh=go("animationend"),Ih=go("animationiteration"),xn=go("animationstart"),Sa=go("transitionend"),Vi=new Map,Dl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yo(c,p){Vi.set(c,p),d(p,[c])}for(var Rl=0;Rl<Dl.length;Rl++){var vs=Dl[Rl],No=vs.toLowerCase(),kh=vs[0].toUpperCase()+vs.slice(1);yo(No,"on"+kh)}yo(Mh,"onAnimationEnd"),yo(Ih,"onAnimationIteration"),yo(xn,"onAnimationStart"),yo("dblclick","onDoubleClick"),yo("focusin","onFocus"),yo("focusout","onBlur"),yo(Sa,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oh=new Set("cancel close invalid load scroll toggle".split(" ").concat(_s));function Iu(c,p,x){var C=c.type||"unknown-event";c.currentTarget=x,kr(C,p,void 0,c),c.currentTarget=null}function kc(c,p){p=(p&4)!==0;for(var x=0;x<c.length;x++){var C=c[x],R=C.event;C=C.listeners;e:{var F=void 0;if(p)for(var oe=C.length-1;0<=oe;oe--){var Te=C[oe],Oe=Te.instance,Je=Te.currentTarget;if(Te=Te.listener,Oe!==F&&R.isPropagationStopped())break e;Iu(R,Te,Je),F=Oe}else for(oe=0;oe<C.length;oe++){if(Te=C[oe],Oe=Te.instance,Je=Te.currentTarget,Te=Te.listener,Oe!==F&&R.isPropagationStopped())break e;Iu(R,Te,Je),F=Oe}}}if(qt)throw c=Yt,qt=!1,Yt=null,c}function tn(c,p){var x=p[Pr];x===void 0&&(x=p[Pr]=new Set);var C=c+"__bubble";x.has(C)||(Oc(p,c,2,!1),x.add(C))}function Bo(c,p,x){var C=0;p&&(C|=4),Oc(x,c,C,p)}var tl="_reactListening"+Math.random().toString(36).slice(2);function Fo(c){if(!c[tl]){c[tl]=!0,n.forEach(function(x){x!=="selectionchange"&&(Oh.has(x)||Bo(x,!1,c),Bo(x,!0,c))});var p=c.nodeType===9?c:c.ownerDocument;p===null||p[tl]||(p[tl]=!0,Bo("selectionchange",!1,p))}}function Oc(c,p,x,C){switch(fs(p)){case 1:var R=vh;break;case 4:R=_h;break;default:R=wa}x=R.bind(null,p,x,c),R=void 0,!Ee||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(R=!0),C?R!==void 0?c.addEventListener(p,x,{capture:!0,passive:R}):c.addEventListener(p,x,!0):R!==void 0?c.addEventListener(p,x,{passive:R}):c.addEventListener(p,x,!1)}function ku(c,p,x,C,R){var F=C;if((p&1)===0&&(p&2)===0&&C!==null)e:for(;;){if(C===null)return;var oe=C.tag;if(oe===3||oe===4){var Te=C.stateNode.containerInfo;if(Te===R||Te.nodeType===8&&Te.parentNode===R)break;if(oe===4)for(oe=C.return;oe!==null;){var Oe=oe.tag;if((Oe===3||Oe===4)&&(Oe=oe.stateNode.containerInfo,Oe===R||Oe.nodeType===8&&Oe.parentNode===R))return;oe=oe.return}for(;Te!==null;){if(oe=Uo(Te),oe===null)return;if(Oe=oe.tag,Oe===5||Oe===6){C=F=oe;continue e}Te=Te.parentNode}}C=C.return}Re(function(){var Je=F,mt=xa(x),vt=[];e:{var dt=Vi.get(c);if(dt!==void 0){var Dt=_u,Wt=c;switch(c){case"keypress":if(Do(x)===0)break e;case"keydown":case"keyup":Dt=Sc;break;case"focusin":Wt="focus",Dt=Al;break;case"focusout":Wt="blur",Dt=Al;break;case"beforeblur":case"afterblur":Dt=Al;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Dt=Yf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Dt=bu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Dt=Xp;break;case Mh:case Ih:case xn:Dt=Kp;break;case Sa:Dt=Yp;break;case"scroll":Dt=Xf;break;case"wheel":Dt=Tc;break;case"copy":case"cut":case"paste":Dt=ed;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Dt=ds}var Jt=(p&4)!==0,Bn=!Jt&&c==="scroll",He=Jt?dt!==null?dt+"Capture":null:dt;Jt=[];for(var je=Je,Xe;je!==null;){Xe=je;var Ct=Xe.stateNode;if(Xe.tag===5&&Ct!==null&&(Xe=Ct,He!==null&&(Ct=Be(je,He),Ct!=null&&Jt.push(rl(je,Ct,Xe)))),Bn)break;je=je.return}0<Jt.length&&(dt=new Dt(dt,Wt,null,x,mt),vt.push({event:dt,listeners:Jt}))}}if((p&7)===0){e:{if(dt=c==="mouseover"||c==="pointerover",Dt=c==="mouseout"||c==="pointerout",dt&&x!==ur&&(Wt=x.relatedTarget||x.fromElement)&&(Uo(Wt)||Wt[Ya]))break e;if((Dt||dt)&&(dt=mt.window===mt?mt:(dt=mt.ownerDocument)?dt.defaultView||dt.parentWindow:window,Dt?(Wt=x.relatedTarget||x.toElement,Dt=Je,Wt=Wt?Uo(Wt):null,Wt!==null&&(Bn=yr(Wt),Wt!==Bn||Wt.tag!==5&&Wt.tag!==6)&&(Wt=null)):(Dt=null,Wt=Je),Dt!==Wt)){if(Jt=Yf,Ct="onMouseLeave",He="onMouseEnter",je="mouse",(c==="pointerout"||c==="pointerover")&&(Jt=ds,Ct="onPointerLeave",He="onPointerEnter",je="pointer"),Bn=Dt==null?dt:Ja(Dt),Xe=Wt==null?dt:Ja(Wt),dt=new Jt(Ct,je+"leave",Dt,x,mt),dt.target=Bn,dt.relatedTarget=Xe,Ct=null,Uo(mt)===Je&&(Jt=new Jt(He,je+"enter",Wt,x,mt),Jt.target=Xe,Jt.relatedTarget=Bn,Ct=Jt),Bn=Ct,Dt&&Wt)t:{for(Jt=Dt,He=Wt,je=0,Xe=Jt;Xe;Xe=$o(Xe))je++;for(Xe=0,Ct=He;Ct;Ct=$o(Ct))Xe++;for(;0<je-Xe;)Jt=$o(Jt),je--;for(;0<Xe-je;)He=$o(He),Xe--;for(;je--;){if(Jt===He||He!==null&&Jt===He.alternate)break t;Jt=$o(Jt),He=$o(He)}Jt=null}else Jt=null;Dt!==null&&zl(vt,dt,Dt,Jt,!1),Wt!==null&&Bn!==null&&zl(vt,Bn,Wt,Jt,!0)}}e:{if(dt=Je?Ja(Je):window,Dt=dt.nodeName&&dt.nodeName.toLowerCase(),Dt==="select"||Dt==="input"&&dt.type==="file")var er=Il;else if(Cl(dt))if(Eh)er=ad;else{er=id;var sr=kl}else(Dt=dt.nodeName)&&Dt.toLowerCase()==="input"&&(dt.type==="checkbox"||dt.type==="radio")&&(er=Ec);if(er&&(er=er(c,Je))){Ml(vt,er,x,mt);break e}sr&&sr(c,dt,Je),c==="focusout"&&(sr=dt._wrapperState)&&sr.controlled&&dt.type==="number"&&lr(dt,"number",dt.value)}switch(sr=Je?Ja(Je):window,c){case"focusin":(Cl(sr)||sr.contentEditable==="true")&&(Lo=sr,Eu=Je,Cu=null);break;case"focusout":Cu=Eu=Lo=null;break;case"mousedown":Ic=!0;break;case"contextmenu":case"mouseup":case"dragend":Ic=!1,Mu(vt,x,mt);break;case"selectionchange":if(Mc)break;case"keydown":case"keyup":Mu(vt,x,mt)}var tr;if(Vr)e:{switch(c){case"compositionstart":var pr="onCompositionStart";break e;case"compositionend":pr="onCompositionEnd";break e;case"compositionupdate":pr="onCompositionUpdate";break e}pr=void 0}else ms?Ks(c,x)&&(pr="onCompositionEnd"):c==="keydown"&&x.keyCode===229&&(pr="onCompositionStart");pr&&(El&&x.locale!=="ko"&&(ms||pr!=="onCompositionStart"?pr==="onCompositionEnd"&&ms&&(tr=Kf()):(Ai=mt,Rr="value"in Ai?Ai.value:Ai.textContent,ms=!0)),sr=jl(Je,pr),0<sr.length&&(pr=new bc(pr,c,null,x,mt),vt.push({event:pr,listeners:sr}),tr?pr.data=tr:(tr=oa(x),tr!==null&&(pr.data=tr)))),(tr=Su?Ph(c,x):Ah(c,x))&&(Je=jl(Je,"onBeforeInput"),0<Je.length&&(mt=new bc("onBeforeInput","beforeinput",null,x,mt),vt.push({event:mt,listeners:Je}),mt.data=tr))}kc(vt,p)})}function rl(c,p,x){return{instance:c,listener:p,currentTarget:x}}function jl(c,p){for(var x=p+"Capture",C=[];c!==null;){var R=c,F=R.stateNode;R.tag===5&&F!==null&&(R=F,F=Be(c,x),F!=null&&C.unshift(rl(c,F,R)),F=Be(c,p),F!=null&&C.push(rl(c,F,R))),c=c.return}return C}function $o(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function zl(c,p,x,C,R){for(var F=p._reactName,oe=[];x!==null&&x!==C;){var Te=x,Oe=Te.alternate,Je=Te.stateNode;if(Oe!==null&&Oe===C)break;Te.tag===5&&Je!==null&&(Te=Je,R?(Oe=Be(x,F),Oe!=null&&oe.unshift(rl(x,Oe,Te))):R||(Oe=Be(x,F),Oe!=null&&oe.push(rl(x,Oe,Te)))),x=x.return}oe.length!==0&&c.push({event:p,listeners:oe})}var sd=/\r\n?/g,Ta=/\u0000|\uFFFD/g;function Ka(c){return(typeof c=="string"?c:""+c).replace(sd,`
`).replace(Ta,"")}function Ll(c,p,x){if(p=Ka(p),Ka(c)!==p&&x)throw Error(r(425))}function Ui(){}var Vo=null,Dh=null;function Rh(c,p){return c==="textarea"||c==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var Dc=typeof setTimeout=="function"?setTimeout:void 0,ld=typeof clearTimeout=="function"?clearTimeout:void 0,Rc=typeof Promise=="function"?Promise:void 0,Nl=typeof queueMicrotask=="function"?queueMicrotask:typeof Rc<"u"?function(c){return Rc.resolve(null).then(c).catch(Pa)}:Dc;function Pa(c){setTimeout(function(){throw c})}function Lt(c,p){var x=p,C=0;do{var R=x.nextSibling;if(c.removeChild(x),R&&R.nodeType===8)if(x=R.data,x==="/$"){if(C===0){c.removeChild(R),Oo(p);return}C--}else x!=="$"&&x!=="$?"&&x!=="$!"||C++;x=R}while(x);Oo(p)}function Xa(c){for(;c!=null;c=c.nextSibling){var p=c.nodeType;if(p===1||p===3)break;if(p===8){if(p=c.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return c}function jc(c){c=c.previousSibling;for(var p=0;c;){if(c.nodeType===8){var x=c.data;if(x==="$"||x==="$!"||x==="$?"){if(p===0)return c;p--}else x==="/$"&&p++}c=c.previousSibling}return null}var nl=Math.random().toString(36).slice(2),Ei="__reactFiber$"+nl,vo="__reactProps$"+nl,Ya="__reactContainer$"+nl,Pr="__reactEvents$"+nl,jh="__reactListeners$"+nl,Jp="__reactHandles$"+nl;function Uo(c){var p=c[Ei];if(p)return p;for(var x=c.parentNode;x;){if(p=x[Ya]||x[Ei]){if(x=p.alternate,p.child!==null||x!==null&&x.child!==null)for(c=jc(c);c!==null;){if(x=c[Ei])return x;c=jc(c)}return p}c=x,x=c.parentNode}return null}function Ou(c){return c=c[Ei]||c[Ya],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Ja(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(r(33))}function Du(c){return c[vo]||null}var Ru=[],il=-1;function xs(c){return{current:c}}function rn(c){0>il||(c.current=Ru[il],Ru[il]=null,il--)}function on(c,p){il++,Ru[il]=c.current,c.current=p}var bs={},Kr=xs(bs),Ar=xs(!1),Aa=bs;function qo(c,p){var x=c.type.contextTypes;if(!x)return bs;var C=c.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===p)return C.__reactInternalMemoizedMaskedChildContext;var R={},F;for(F in x)R[F]=p[F];return C&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=p,c.__reactInternalMemoizedMaskedChildContext=R),R}function oi(c){return c=c.childContextTypes,c!=null}function ju(){rn(Ar),rn(Kr)}function Bl(c,p,x){if(Kr.current!==bs)throw Error(r(168));on(Kr,p),on(Ar,x)}function Fl(c,p,x){var C=c.stateNode;if(p=p.childContextTypes,typeof C.getChildContext!="function")return x;C=C.getChildContext();for(var R in C)if(!(R in p))throw Error(r(108,_t(c)||"Unknown",R));return ge({},x,C)}function sa(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||bs,Aa=Kr.current,on(Kr,c),on(Ar,Ar.current),!0}function $l(c,p,x){var C=c.stateNode;if(!C)throw Error(r(169));x?(c=Fl(c,p,Aa),C.__reactInternalMemoizedMergedChildContext=c,rn(Ar),rn(Kr),on(Kr,c)):rn(Ar),on(Ar,x)}var Nt=null,Qt=!1,Vl=!1;function zu(c){Nt===null?Nt=[c]:Nt.push(c)}function zh(c){Qt=!0,zu(c)}function S(){if(!Vl&&Nt!==null){Vl=!0;var c=0,p=$r;try{var x=Nt;for($r=1;c<x.length;c++){var C=x[c];do C=C(!0);while(C!==null)}Nt=null,Qt=!1}catch(R){throw Nt!==null&&(Nt=Nt.slice(c+1)),Vn(pu,S),R}finally{$r=p,Vl=!1}}return null}var i=[],f=0,g=null,y=0,b=[],k=0,D=null,j=1,$="";function G(c,p){i[f++]=y,i[f++]=g,g=c,y=p}function H(c,p,x){b[k++]=j,b[k++]=$,b[k++]=D,D=c;var C=j;c=$;var R=32-Wr(C)-1;C&=~(1<<R),x+=1;var F=32-Wr(p)+R;if(30<F){var oe=R-R%5;F=(C&(1<<oe)-1).toString(32),C>>=oe,R-=oe,j=1<<32-Wr(p)+R|x<<R|C,$=F+c}else j=1<<F|x<<R|C,$=c}function ae(c){c.return!==null&&(G(c,1),H(c,1,0))}function ue(c){for(;c===g;)g=i[--f],i[f]=null,y=i[--f],i[f]=null;for(;c===D;)D=b[--k],b[k]=null,$=b[--k],b[k]=null,j=b[--k],b[k]=null}var fe=null,pe=null,ve=!1,we=null;function Me(c,p){var x=Da(5,null,null,0);x.elementType="DELETED",x.stateNode=p,x.return=c,p=c.deletions,p===null?(c.deletions=[x],c.flags|=16):p.push(x)}function me(c,p){switch(c.tag){case 5:var x=c.type;return p=p.nodeType!==1||x.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(c.stateNode=p,fe=c,pe=Xa(p.firstChild),!0):!1;case 6:return p=c.pendingProps===""||p.nodeType!==3?null:p,p!==null?(c.stateNode=p,fe=c,pe=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(x=D!==null?{id:j,overflow:$}:null,c.memoizedState={dehydrated:p,treeContext:x,retryLane:1073741824},x=Da(18,null,null,0),x.stateNode=p,x.return=c,c.child=x,fe=c,pe=null,!0):!1;default:return!1}}function De(c){return(c.mode&1)!==0&&(c.flags&128)===0}function ze(c){if(ve){var p=pe;if(p){var x=p;if(!me(c,p)){if(De(c))throw Error(r(418));p=Xa(x.nextSibling);var C=fe;p&&me(c,p)?Me(C,x):(c.flags=c.flags&-4097|2,ve=!1,fe=c)}}else{if(De(c))throw Error(r(418));c.flags=c.flags&-4097|2,ve=!1,fe=c}}}function We(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;fe=c}function lt(c){if(c!==fe)return!1;if(!ve)return We(c),ve=!0,!1;var p;if((p=c.tag!==3)&&!(p=c.tag!==5)&&(p=c.type,p=p!=="head"&&p!=="body"&&!Rh(c.type,c.memoizedProps)),p&&(p=pe)){if(De(c))throw gt(),Error(r(418));for(;p;)Me(c,p),p=Xa(p.nextSibling)}if(We(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,p=0;c;){if(c.nodeType===8){var x=c.data;if(x==="/$"){if(p===0){pe=Xa(c.nextSibling);break e}p--}else x!=="$"&&x!=="$!"&&x!=="$?"||p++}c=c.nextSibling}pe=null}}else pe=fe?Xa(c.stateNode.nextSibling):null;return!0}function gt(){for(var c=pe;c;)c=Xa(c.nextSibling)}function Tt(){pe=fe=null,ve=!1}function Ot(c){we===null?we=[c]:we.push(c)}var Pt=ie.ReactCurrentBatchConfig;function xt(c,p,x){if(c=x.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(r(309));var C=x.stateNode}if(!C)throw Error(r(147,c));var R=C,F=""+c;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===F?p.ref:(p=function(oe){var Te=R.refs;oe===null?delete Te[F]:Te[F]=oe},p._stringRef=F,p)}if(typeof c!="string")throw Error(r(284));if(!x._owner)throw Error(r(290,c))}return c}function Vt(c,p){throw c=Object.prototype.toString.call(p),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":c))}function or(c){var p=c._init;return p(c._payload)}function Et(c){function p(He,je){if(c){var Xe=He.deletions;Xe===null?(He.deletions=[je],He.flags|=16):Xe.push(je)}}function x(He,je){if(!c)return null;for(;je!==null;)p(He,je),je=je.sibling;return null}function C(He,je){for(He=new Map;je!==null;)je.key!==null?He.set(je.key,je):He.set(je.index,je),je=je.sibling;return He}function R(He,je){return He=eu(He,je),He.index=0,He.sibling=null,He}function F(He,je,Xe){return He.index=Xe,c?(Xe=He.alternate,Xe!==null?(Xe=Xe.index,Xe<je?(He.flags|=2,je):Xe):(He.flags|=2,je)):(He.flags|=1048576,je)}function oe(He){return c&&He.alternate===null&&(He.flags|=2),He}function Te(He,je,Xe,Ct){return je===null||je.tag!==6?(je=wo(Xe,He.mode,Ct),je.return=He,je):(je=R(je,Xe),je.return=He,je)}function Oe(He,je,Xe,Ct){var er=Xe.type;return er===le?mt(He,je,Xe.props.children,Ct,Xe.key):je!==null&&(je.elementType===er||typeof er=="object"&&er!==null&&er.$$typeof===it&&or(er)===je.type)?(Ct=R(je,Xe.props),Ct.ref=xt(He,je,Xe),Ct.return=He,Ct):(Ct=hf(Xe.type,Xe.key,Xe.props,null,He.mode,Ct),Ct.ref=xt(He,je,Xe),Ct.return=He,Ct)}function Je(He,je,Xe,Ct){return je===null||je.tag!==4||je.stateNode.containerInfo!==Xe.containerInfo||je.stateNode.implementation!==Xe.implementation?(je=As(Xe,He.mode,Ct),je.return=He,je):(je=R(je,Xe.children||[]),je.return=He,je)}function mt(He,je,Xe,Ct,er){return je===null||je.tag!==7?(je=tu(Xe,He.mode,Ct,er),je.return=He,je):(je=R(je,Xe),je.return=He,je)}function vt(He,je,Xe){if(typeof je=="string"&&je!==""||typeof je=="number")return je=wo(""+je,He.mode,Xe),je.return=He,je;if(typeof je=="object"&&je!==null){switch(je.$$typeof){case Z:return Xe=hf(je.type,je.key,je.props,null,He.mode,Xe),Xe.ref=xt(He,null,je),Xe.return=He,Xe;case X:return je=As(je,He.mode,Xe),je.return=He,je;case it:var Ct=je._init;return vt(He,Ct(je._payload),Xe)}if(xr(je)||rt(je))return je=tu(je,He.mode,Xe,null),je.return=He,je;Vt(He,je)}return null}function dt(He,je,Xe,Ct){var er=je!==null?je.key:null;if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return er!==null?null:Te(He,je,""+Xe,Ct);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case Z:return Xe.key===er?Oe(He,je,Xe,Ct):null;case X:return Xe.key===er?Je(He,je,Xe,Ct):null;case it:return er=Xe._init,dt(He,je,er(Xe._payload),Ct)}if(xr(Xe)||rt(Xe))return er!==null?null:mt(He,je,Xe,Ct,null);Vt(He,Xe)}return null}function Dt(He,je,Xe,Ct,er){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number")return He=He.get(Xe)||null,Te(je,He,""+Ct,er);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case Z:return He=He.get(Ct.key===null?Xe:Ct.key)||null,Oe(je,He,Ct,er);case X:return He=He.get(Ct.key===null?Xe:Ct.key)||null,Je(je,He,Ct,er);case it:var sr=Ct._init;return Dt(He,je,Xe,sr(Ct._payload),er)}if(xr(Ct)||rt(Ct))return He=He.get(Xe)||null,mt(je,He,Ct,er,null);Vt(je,Ct)}return null}function Wt(He,je,Xe,Ct){for(var er=null,sr=null,tr=je,pr=je=0,ci=null;tr!==null&&pr<Xe.length;pr++){tr.index>pr?(ci=tr,tr=null):ci=tr.sibling;var Ur=dt(He,tr,Xe[pr],Ct);if(Ur===null){tr===null&&(tr=ci);break}c&&tr&&Ur.alternate===null&&p(He,tr),je=F(Ur,je,pr),sr===null?er=Ur:sr.sibling=Ur,sr=Ur,tr=ci}if(pr===Xe.length)return x(He,tr),ve&&G(He,pr),er;if(tr===null){for(;pr<Xe.length;pr++)tr=vt(He,Xe[pr],Ct),tr!==null&&(je=F(tr,je,pr),sr===null?er=tr:sr.sibling=tr,sr=tr);return ve&&G(He,pr),er}for(tr=C(He,tr);pr<Xe.length;pr++)ci=Dt(tr,He,pr,Xe[pr],Ct),ci!==null&&(c&&ci.alternate!==null&&tr.delete(ci.key===null?pr:ci.key),je=F(ci,je,pr),sr===null?er=ci:sr.sibling=ci,sr=ci);return c&&tr.forEach(function(ll){return p(He,ll)}),ve&&G(He,pr),er}function Jt(He,je,Xe,Ct){var er=rt(Xe);if(typeof er!="function")throw Error(r(150));if(Xe=er.call(Xe),Xe==null)throw Error(r(151));for(var sr=er=null,tr=je,pr=je=0,ci=null,Ur=Xe.next();tr!==null&&!Ur.done;pr++,Ur=Xe.next()){tr.index>pr?(ci=tr,tr=null):ci=tr.sibling;var ll=dt(He,tr,Ur.value,Ct);if(ll===null){tr===null&&(tr=ci);break}c&&tr&&ll.alternate===null&&p(He,tr),je=F(ll,je,pr),sr===null?er=ll:sr.sibling=ll,sr=ll,tr=ci}if(Ur.done)return x(He,tr),ve&&G(He,pr),er;if(tr===null){for(;!Ur.done;pr++,Ur=Xe.next())Ur=vt(He,Ur.value,Ct),Ur!==null&&(je=F(Ur,je,pr),sr===null?er=Ur:sr.sibling=Ur,sr=Ur);return ve&&G(He,pr),er}for(tr=C(He,tr);!Ur.done;pr++,Ur=Xe.next())Ur=Dt(tr,He,pr,Ur.value,Ct),Ur!==null&&(c&&Ur.alternate!==null&&tr.delete(Ur.key===null?pr:Ur.key),je=F(Ur,je,pr),sr===null?er=Ur:sr.sibling=Ur,sr=Ur);return c&&tr.forEach(function(D_){return p(He,D_)}),ve&&G(He,pr),er}function Bn(He,je,Xe,Ct){if(typeof Xe=="object"&&Xe!==null&&Xe.type===le&&Xe.key===null&&(Xe=Xe.props.children),typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case Z:e:{for(var er=Xe.key,sr=je;sr!==null;){if(sr.key===er){if(er=Xe.type,er===le){if(sr.tag===7){x(He,sr.sibling),je=R(sr,Xe.props.children),je.return=He,He=je;break e}}else if(sr.elementType===er||typeof er=="object"&&er!==null&&er.$$typeof===it&&or(er)===sr.type){x(He,sr.sibling),je=R(sr,Xe.props),je.ref=xt(He,sr,Xe),je.return=He,He=je;break e}x(He,sr);break}else p(He,sr);sr=sr.sibling}Xe.type===le?(je=tu(Xe.props.children,He.mode,Ct,Xe.key),je.return=He,He=je):(Ct=hf(Xe.type,Xe.key,Xe.props,null,He.mode,Ct),Ct.ref=xt(He,je,Xe),Ct.return=He,He=Ct)}return oe(He);case X:e:{for(sr=Xe.key;je!==null;){if(je.key===sr)if(je.tag===4&&je.stateNode.containerInfo===Xe.containerInfo&&je.stateNode.implementation===Xe.implementation){x(He,je.sibling),je=R(je,Xe.children||[]),je.return=He,He=je;break e}else{x(He,je);break}else p(He,je);je=je.sibling}je=As(Xe,He.mode,Ct),je.return=He,He=je}return oe(He);case it:return sr=Xe._init,Bn(He,je,sr(Xe._payload),Ct)}if(xr(Xe))return Wt(He,je,Xe,Ct);if(rt(Xe))return Jt(He,je,Xe,Ct);Vt(He,Xe)}return typeof Xe=="string"&&Xe!==""||typeof Xe=="number"?(Xe=""+Xe,je!==null&&je.tag===6?(x(He,je.sibling),je=R(je,Xe),je.return=He,He=je):(x(He,je),je=wo(Xe,He.mode,Ct),je.return=He,He=je),oe(He)):x(He,je)}return Bn}var Mt=Et(!0),ir=Et(!1),Gr=xs(null),dr=null,_r=null,Xr=null;function Qn(){Xr=_r=dr=null}function la(c){var p=Gr.current;rn(Gr),c._currentValue=p}function Yr(c,p,x){for(;c!==null;){var C=c.alternate;if((c.childLanes&p)!==p?(c.childLanes|=p,C!==null&&(C.childLanes|=p)):C!==null&&(C.childLanes&p)!==p&&(C.childLanes|=p),c===x)break;c=c.return}}function Un(c,p){dr=c,Xr=_r=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&p)!==0&&(fa=!0),c.firstContext=null)}function sn(c){var p=c._currentValue;if(Xr!==c)if(c={context:c,memoizedValue:p,next:null},_r===null){if(dr===null)throw Error(r(308));_r=c,dr.dependencies={lanes:0,firstContext:c}}else _r=_r.next=c;return p}var An=null;function si(c){An===null?An=[c]:An.push(c)}function Qa(c,p,x,C){var R=p.interleaved;return R===null?(x.next=x,si(p)):(x.next=R.next,R.next=x),p.interleaved=x,qi(c,C)}function qi(c,p){c.lanes|=p;var x=c.alternate;for(x!==null&&(x.lanes|=p),x=c,c=c.return;c!==null;)c.childLanes|=p,x=c.alternate,x!==null&&(x.childLanes|=p),x=c,c=c.return;return x.tag===3?x.stateNode:null}var eo=!1;function ws(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ua(c,p){c=c.updateQueue,p.updateQueue===c&&(p.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Ea(c,p){return{eventTime:c,lane:p,tag:0,payload:null,callback:null,next:null}}function _o(c,p,x){var C=c.updateQueue;if(C===null)return null;if(C=C.shared,(Nr&2)!==0){var R=C.pending;return R===null?p.next=p:(p.next=R.next,R.next=p),C.pending=p,qi(c,x)}return R=C.interleaved,R===null?(p.next=p,si(C)):(p.next=R.next,R.next=p),C.interleaved=p,qi(c,x)}function Ci(c,p,x){if(p=p.updateQueue,p!==null&&(p=p.shared,(x&4194240)!==0)){var C=p.lanes;C&=c.pendingLanes,x|=C,p.lanes=x,us(c,x)}}function ca(c,p){var x=c.updateQueue,C=c.alternate;if(C!==null&&(C=C.updateQueue,x===C)){var R=null,F=null;if(x=x.firstBaseUpdate,x!==null){do{var oe={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};F===null?R=F=oe:F=F.next=oe,x=x.next}while(x!==null);F===null?R=F=p:F=F.next=p}else R=F=p;x={baseState:C.baseState,firstBaseUpdate:R,lastBaseUpdate:F,shared:C.shared,effects:C.effects},c.updateQueue=x;return}c=x.lastBaseUpdate,c===null?x.firstBaseUpdate=p:c.next=p,x.lastBaseUpdate=p}function to(c,p,x,C){var R=c.updateQueue;eo=!1;var F=R.firstBaseUpdate,oe=R.lastBaseUpdate,Te=R.shared.pending;if(Te!==null){R.shared.pending=null;var Oe=Te,Je=Oe.next;Oe.next=null,oe===null?F=Je:oe.next=Je,oe=Oe;var mt=c.alternate;mt!==null&&(mt=mt.updateQueue,Te=mt.lastBaseUpdate,Te!==oe&&(Te===null?mt.firstBaseUpdate=Je:Te.next=Je,mt.lastBaseUpdate=Oe))}if(F!==null){var vt=R.baseState;oe=0,mt=Je=Oe=null,Te=F;do{var dt=Te.lane,Dt=Te.eventTime;if((C&dt)===dt){mt!==null&&(mt=mt.next={eventTime:Dt,lane:0,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null});e:{var Wt=c,Jt=Te;switch(dt=p,Dt=x,Jt.tag){case 1:if(Wt=Jt.payload,typeof Wt=="function"){vt=Wt.call(Dt,vt,dt);break e}vt=Wt;break e;case 3:Wt.flags=Wt.flags&-65537|128;case 0:if(Wt=Jt.payload,dt=typeof Wt=="function"?Wt.call(Dt,vt,dt):Wt,dt==null)break e;vt=ge({},vt,dt);break e;case 2:eo=!0}}Te.callback!==null&&Te.lane!==0&&(c.flags|=64,dt=R.effects,dt===null?R.effects=[Te]:dt.push(Te))}else Dt={eventTime:Dt,lane:dt,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null},mt===null?(Je=mt=Dt,Oe=vt):mt=mt.next=Dt,oe|=dt;if(Te=Te.next,Te===null){if(Te=R.shared.pending,Te===null)break;dt=Te,Te=dt.next,dt.next=null,R.lastBaseUpdate=dt,R.shared.pending=null}}while(!0);if(mt===null&&(Oe=vt),R.baseState=Oe,R.firstBaseUpdate=Je,R.lastBaseUpdate=mt,p=R.shared.interleaved,p!==null){R=p;do oe|=R.lane,R=R.next;while(R!==p)}else F===null&&(R.shared.lanes=0);Vu|=oe,c.lanes=oe,c.memoizedState=vt}}function Ca(c,p,x){if(c=p.effects,p.effects=null,c!==null)for(p=0;p<c.length;p++){var C=c[p],R=C.callback;if(R!==null){if(C.callback=null,C=x,typeof R!="function")throw Error(r(191,R));R.call(C)}}}var On={},fn=xs(On),li=xs(On),Sr=xs(On);function ha(c){if(c===On)throw Error(r(174));return c}function Ss(c,p){switch(on(Sr,p),on(li,c),on(fn,On),c=p.nodeType,c){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:Mo(null,"");break;default:c=c===8?p.parentNode:p,p=c.namespaceURI||null,c=c.tagName,p=Mo(p,c)}rn(fn),on(fn,p)}function ro(){rn(fn),rn(li),rn(Sr)}function Lh(c){ha(Sr.current);var p=ha(fn.current),x=Mo(p,c.type);p!==x&&(on(li,c),on(fn,x))}function Nh(c){li.current===c&&(rn(fn),rn(li))}var gn=xs(0);function no(c){for(var p=c;p!==null;){if(p.tag===13){var x=p.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var zc=[];function Ul(){for(var c=0;c<zc.length;c++)zc[c]._workInProgressVersionPrimary=null;zc.length=0}var Ts=ie.ReactCurrentDispatcher,ql=ie.ReactCurrentBatchConfig,xo=0,Jr=null,bn=null,qn=null,Bh=!1,Lc=!1,Fh=0,Qp=0;function ei(){throw Error(r(321))}function Wl(c,p){if(p===null)return!1;for(var x=0;x<p.length&&x<c.length;x++)if(!$i(c[x],p[x]))return!1;return!0}function Wo(c,p,x,C,R,F){if(xo=F,Jr=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Ts.current=c===null||c.memoizedState===null?md:b_,c=x(C,R),Lc){F=0;do{if(Lc=!1,Fh=0,25<=F)throw Error(r(301));F+=1,qn=bn=null,p.updateQueue=null,Ts.current=uy,c=x(C,R)}while(Lc)}if(Ts.current=pd,p=bn!==null&&bn.next!==null,xo=0,qn=bn=Jr=null,Bh=!1,p)throw Error(r(300));return c}function io(){var c=Fh!==0;return Fh=0,c}function Mi(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?Jr.memoizedState=qn=c:qn=qn.next=c,qn}function ao(){if(bn===null){var c=Jr.alternate;c=c!==null?c.memoizedState:null}else c=bn.next;var p=qn===null?Jr.memoizedState:qn.next;if(p!==null)qn=p,bn=c;else{if(c===null)throw Error(r(310));bn=c,c={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},qn===null?Jr.memoizedState=qn=c:qn=qn.next=c}return qn}function Go(c,p){return typeof p=="function"?p(c):p}function em(c){var p=ao(),x=p.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=c;var C=bn,R=C.baseQueue,F=x.pending;if(F!==null){if(R!==null){var oe=R.next;R.next=F.next,F.next=oe}C.baseQueue=R=F,x.pending=null}if(R!==null){F=R.next,C=C.baseState;var Te=oe=null,Oe=null,Je=F;do{var mt=Je.lane;if((xo&mt)===mt)Oe!==null&&(Oe=Oe.next={lane:0,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),C=Je.hasEagerState?Je.eagerState:c(C,Je.action);else{var vt={lane:mt,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null};Oe===null?(Te=Oe=vt,oe=C):Oe=Oe.next=vt,Jr.lanes|=mt,Vu|=mt}Je=Je.next}while(Je!==null&&Je!==F);Oe===null?oe=C:Oe.next=Te,$i(C,p.memoizedState)||(fa=!0),p.memoizedState=C,p.baseState=oe,p.baseQueue=Oe,x.lastRenderedState=C}if(c=x.interleaved,c!==null){R=c;do F=R.lane,Jr.lanes|=F,Vu|=F,R=R.next;while(R!==c)}else R===null&&(x.lanes=0);return[p.memoizedState,x.dispatch]}function ud(c){var p=ao(),x=p.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=c;var C=x.dispatch,R=x.pending,F=p.memoizedState;if(R!==null){x.pending=null;var oe=R=R.next;do F=c(F,oe.action),oe=oe.next;while(oe!==R);$i(F,p.memoizedState)||(fa=!0),p.memoizedState=F,p.baseQueue===null&&(p.baseState=F),x.lastRenderedState=F}return[F,C]}function Dn(){}function cd(c,p){var x=Jr,C=ao(),R=p(),F=!$i(C.memoizedState,R);if(F&&(C.memoizedState=R,fa=!0),C=C.queue,Uh(Hl.bind(null,x,C,c),[c]),C.getSnapshot!==p||F||qn!==null&&qn.memoizedState.tag&1){if(x.flags|=2048,Vh(9,Gl.bind(null,x,C,R,p),void 0,null),ui===null)throw Error(r(349));(xo&30)!==0||tm(x,p,R)}return R}function tm(c,p,x){c.flags|=16384,c={getSnapshot:p,value:x},p=Jr.updateQueue,p===null?(p={lastEffect:null,stores:null},Jr.updateQueue=p,p.stores=[c]):(x=p.stores,x===null?p.stores=[c]:x.push(c))}function Gl(c,p,x,C){p.value=x,p.getSnapshot=C,$h(p)&&hd(c)}function Hl(c,p,x){return x(function(){$h(p)&&hd(c)})}function $h(c){var p=c.getSnapshot;c=c.value;try{var x=p();return!$i(c,x)}catch{return!0}}function hd(c){var p=qi(c,1);p!==null&&Zo(p,c,1,-1)}function rm(c){var p=Mi();return typeof c=="function"&&(c=c()),p.memoizedState=p.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:c},p.queue=c,c=c.dispatch=Bc.bind(null,Jr,c),[p.memoizedState,c]}function Vh(c,p,x,C){return c={tag:c,create:p,destroy:x,deps:C,next:null},p=Jr.updateQueue,p===null?(p={lastEffect:null,stores:null},Jr.updateQueue=p,p.lastEffect=c.next=c):(x=p.lastEffect,x===null?p.lastEffect=c.next=c:(C=x.next,x.next=c,c.next=C,p.lastEffect=c)),c}function nm(){return ao().memoizedState}function fd(c,p,x,C){var R=Mi();Jr.flags|=c,R.memoizedState=Vh(1|p,x,void 0,C===void 0?null:C)}function Nc(c,p,x,C){var R=ao();C=C===void 0?null:C;var F=void 0;if(bn!==null){var oe=bn.memoizedState;if(F=oe.destroy,C!==null&&Wl(C,oe.deps)){R.memoizedState=Vh(p,x,F,C);return}}Jr.flags|=c,R.memoizedState=Vh(1|p,x,F,C)}function ay(c,p){return fd(8390656,8,c,p)}function Uh(c,p){return Nc(2048,8,c,p)}function im(c,p){return Nc(4,2,c,p)}function am(c,p){return Nc(4,4,c,p)}function Lu(c,p){if(typeof p=="function")return c=c(),p(c),function(){p(null)};if(p!=null)return c=c(),p.current=c,function(){p.current=null}}function oy(c,p,x){return x=x!=null?x.concat([c]):null,Nc(4,4,Lu.bind(null,p,c),x)}function Nu(){}function qh(c,p){var x=ao();p=p===void 0?null:p;var C=x.memoizedState;return C!==null&&p!==null&&Wl(p,C[1])?C[0]:(x.memoizedState=[c,p],c)}function Wh(c,p){var x=ao();p=p===void 0?null:p;var C=x.memoizedState;return C!==null&&p!==null&&Wl(p,C[1])?C[0]:(c=c(),x.memoizedState=[c,p],c)}function om(c,p,x){return(xo&21)===0?(c.baseState&&(c.baseState=!1,fa=!0),c.memoizedState=x):($i(x,p)||(x=ko(),Jr.lanes|=x,Vu|=x,c.baseState=!0),p)}function sy(c,p){var x=$r;$r=x!==0&&4>x?x:4,c(!0);var C=ql.transition;ql.transition={};try{c(!1),p()}finally{$r=x,ql.transition=C}}function ly(){return ao().memoizedState}function Wi(c,p,x){var C=Ql(c);if(x={lane:C,action:x,hasEagerState:!1,eagerState:null,next:null},dd(c))sm(p,x);else if(x=Qa(c,p,x,C),x!==null){var R=da();Zo(x,c,C,R),Fc(x,p,C)}}function Bc(c,p,x){var C=Ql(c),R={lane:C,action:x,hasEagerState:!1,eagerState:null,next:null};if(dd(c))sm(p,R);else{var F=c.alternate;if(c.lanes===0&&(F===null||F.lanes===0)&&(F=p.lastRenderedReducer,F!==null))try{var oe=p.lastRenderedState,Te=F(oe,x);if(R.hasEagerState=!0,R.eagerState=Te,$i(Te,oe)){var Oe=p.interleaved;Oe===null?(R.next=R,si(p)):(R.next=Oe.next,Oe.next=R),p.interleaved=R;return}}catch{}finally{}x=Qa(c,p,R,C),x!==null&&(R=da(),Zo(x,c,C,R),Fc(x,p,C))}}function dd(c){var p=c.alternate;return c===Jr||p!==null&&p===Jr}function sm(c,p){Lc=Bh=!0;var x=c.pending;x===null?p.next=p:(p.next=x.next,x.next=p),c.pending=p}function Fc(c,p,x){if((x&4194240)!==0){var C=p.lanes;C&=c.pendingLanes,x|=C,p.lanes=x,us(c,x)}}var pd={readContext:sn,useCallback:ei,useContext:ei,useEffect:ei,useImperativeHandle:ei,useInsertionEffect:ei,useLayoutEffect:ei,useMemo:ei,useReducer:ei,useRef:ei,useState:ei,useDebugValue:ei,useDeferredValue:ei,useTransition:ei,useMutableSource:ei,useSyncExternalStore:ei,useId:ei,unstable_isNewReconciler:!1},md={readContext:sn,useCallback:function(c,p){return Mi().memoizedState=[c,p===void 0?null:p],c},useContext:sn,useEffect:ay,useImperativeHandle:function(c,p,x){return x=x!=null?x.concat([c]):null,fd(4194308,4,Lu.bind(null,p,c),x)},useLayoutEffect:function(c,p){return fd(4194308,4,c,p)},useInsertionEffect:function(c,p){return fd(4,2,c,p)},useMemo:function(c,p){var x=Mi();return p=p===void 0?null:p,c=c(),x.memoizedState=[c,p],c},useReducer:function(c,p,x){var C=Mi();return p=x!==void 0?x(p):p,C.memoizedState=C.baseState=p,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:p},C.queue=c,c=c.dispatch=Wi.bind(null,Jr,c),[C.memoizedState,c]},useRef:function(c){var p=Mi();return c={current:c},p.memoizedState=c},useState:rm,useDebugValue:Nu,useDeferredValue:function(c){return Mi().memoizedState=c},useTransition:function(){var c=rm(!1),p=c[0];return c=sy.bind(null,c[1]),Mi().memoizedState=c,[p,c]},useMutableSource:function(){},useSyncExternalStore:function(c,p,x){var C=Jr,R=Mi();if(ve){if(x===void 0)throw Error(r(407));x=x()}else{if(x=p(),ui===null)throw Error(r(349));(xo&30)!==0||tm(C,p,x)}R.memoizedState=x;var F={value:x,getSnapshot:p};return R.queue=F,ay(Hl.bind(null,C,F,c),[c]),C.flags|=2048,Vh(9,Gl.bind(null,C,F,x,p),void 0,null),x},useId:function(){var c=Mi(),p=ui.identifierPrefix;if(ve){var x=$,C=j;x=(C&~(1<<32-Wr(C)-1)).toString(32)+x,p=":"+p+"R"+x,x=Fh++,0<x&&(p+="H"+x.toString(32)),p+=":"}else x=Qp++,p=":"+p+"r"+x.toString(32)+":";return c.memoizedState=p},unstable_isNewReconciler:!1},b_={readContext:sn,useCallback:qh,useContext:sn,useEffect:Uh,useImperativeHandle:oy,useInsertionEffect:im,useLayoutEffect:am,useMemo:Wh,useReducer:em,useRef:nm,useState:function(){return em(Go)},useDebugValue:Nu,useDeferredValue:function(c){var p=ao();return om(p,bn.memoizedState,c)},useTransition:function(){var c=em(Go)[0],p=ao().memoizedState;return[c,p]},useMutableSource:Dn,useSyncExternalStore:cd,useId:ly,unstable_isNewReconciler:!1},uy={readContext:sn,useCallback:qh,useContext:sn,useEffect:Uh,useImperativeHandle:oy,useInsertionEffect:im,useLayoutEffect:am,useMemo:Wh,useReducer:ud,useRef:nm,useState:function(){return ud(Go)},useDebugValue:Nu,useDeferredValue:function(c){var p=ao();return bn===null?p.memoizedState=c:om(p,bn.memoizedState,c)},useTransition:function(){var c=ud(Go)[0],p=ao().memoizedState;return[c,p]},useMutableSource:Dn,useSyncExternalStore:cd,useId:ly,unstable_isNewReconciler:!1};function bo(c,p){if(c&&c.defaultProps){p=ge({},p),c=c.defaultProps;for(var x in c)p[x]===void 0&&(p[x]=c[x]);return p}return p}function gd(c,p,x,C){p=c.memoizedState,x=x(C,p),x=x==null?p:ge({},p,x),c.memoizedState=x,c.lanes===0&&(c.updateQueue.baseState=x)}var yd={isMounted:function(c){return(c=c._reactInternals)?yr(c)===c:!1},enqueueSetState:function(c,p,x){c=c._reactInternals;var C=da(),R=Ql(c),F=Ea(C,R);F.payload=p,x!=null&&(F.callback=x),p=_o(c,F,R),p!==null&&(Zo(p,c,R,C),Ci(p,c,R))},enqueueReplaceState:function(c,p,x){c=c._reactInternals;var C=da(),R=Ql(c),F=Ea(C,R);F.tag=1,F.payload=p,x!=null&&(F.callback=x),p=_o(c,F,R),p!==null&&(Zo(p,c,R,C),Ci(p,c,R))},enqueueForceUpdate:function(c,p){c=c._reactInternals;var x=da(),C=Ql(c),R=Ea(x,C);R.tag=2,p!=null&&(R.callback=p),p=_o(c,R,C),p!==null&&(Zo(p,c,C,x),Ci(p,c,C))}};function vd(c,p,x,C,R,F,oe){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(C,F,oe):p.prototype&&p.prototype.isPureReactComponent?!gs(x,C)||!gs(R,F):!0}function lm(c,p,x){var C=!1,R=bs,F=p.contextType;return typeof F=="object"&&F!==null?F=sn(F):(R=oi(p)?Aa:Kr.current,C=p.contextTypes,F=(C=C!=null)?qo(c,R):bs),p=new p(x,F),c.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=yd,c.stateNode=p,p._reactInternals=c,C&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=R,c.__reactInternalMemoizedMaskedChildContext=F),p}function _d(c,p,x,C){c=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(x,C),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(x,C),p.state!==c&&yd.enqueueReplaceState(p,p.state,null)}function Bu(c,p,x,C){var R=c.stateNode;R.props=x,R.state=c.memoizedState,R.refs={},ws(c);var F=p.contextType;typeof F=="object"&&F!==null?R.context=sn(F):(F=oi(p)?Aa:Kr.current,R.context=qo(c,F)),R.state=c.memoizedState,F=p.getDerivedStateFromProps,typeof F=="function"&&(gd(c,p,F,x),R.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(p=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),p!==R.state&&yd.enqueueReplaceState(R,R.state,null),to(c,x,R,C),R.state=c.memoizedState),typeof R.componentDidMount=="function"&&(c.flags|=4194308)}function yi(c,p){try{var x="",C=p;do x+=pt(C),C=C.return;while(C);var R=x}catch(F){R=`
Error generating stack: `+F.message+`
`+F.stack}return{value:c,source:p,stack:R,digest:null}}function xd(c,p,x){return{value:c,source:null,stack:x??null,digest:p??null}}function Gh(c,p){try{console.error(p.value)}catch(x){setTimeout(function(){throw x})}}var w_=typeof WeakMap=="function"?WeakMap:Map;function um(c,p,x){x=Ea(-1,x),x.tag=3,x.payload={element:null};var C=p.value;return x.callback=function(){rf||(rf=!0,kd=C),Gh(c,p)},x}function cy(c,p,x){x=Ea(-1,x),x.tag=3;var C=c.type.getDerivedStateFromError;if(typeof C=="function"){var R=p.value;x.payload=function(){return C(R)},x.callback=function(){Gh(c,p)}}var F=c.stateNode;return F!==null&&typeof F.componentDidCatch=="function"&&(x.callback=function(){Gh(c,p),typeof C!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var oe=p.stack;this.componentDidCatch(p.value,{componentStack:oe!==null?oe:""})}),x}function hy(c,p,x){var C=c.pingCache;if(C===null){C=c.pingCache=new w_;var R=new Set;C.set(p,R)}else R=C.get(p),R===void 0&&(R=new Set,C.set(p,R));R.has(x)||(R.add(x),c=C_.bind(null,c,p,x),p.then(c,c))}function fy(c){do{var p;if((p=c.tag===13)&&(p=c.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return c;c=c.return}while(c!==null);return null}function dy(c,p,x,C,R){return(c.mode&1)===0?(c===p?c.flags|=65536:(c.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(p=Ea(-1,1),p.tag=2,_o(x,p,1))),x.lanes|=1),c):(c.flags|=65536,c.lanes=R,c)}var py=ie.ReactCurrentOwner,fa=!1;function Wn(c,p,x,C){p.child=c===null?ir(p,null,x,C):Mt(p,c.child,x,C)}function $c(c,p,x,C,R){x=x.render;var F=p.ref;return Un(p,R),C=Wo(c,p,x,C,F,R),x=io(),c!==null&&!fa?(p.updateQueue=c.updateQueue,p.flags&=-2053,c.lanes&=~R,oo(c,p,R)):(ve&&x&&ae(p),p.flags|=1,Wn(c,p,C,R),p.child)}function my(c,p,x,C,R){if(c===null){var F=x.type;return typeof F=="function"&&!cf(F)&&F.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(p.tag=15,p.type=F,gy(c,p,F,C,R)):(c=hf(x.type,null,C,p,p.mode,R),c.ref=p.ref,c.return=p,p.child=c)}if(F=c.child,(c.lanes&R)===0){var oe=F.memoizedProps;if(x=x.compare,x=x!==null?x:gs,x(oe,C)&&c.ref===p.ref)return oo(c,p,R)}return p.flags|=1,c=eu(F,C),c.ref=p.ref,c.return=p,p.child=c}function gy(c,p,x,C,R){if(c!==null){var F=c.memoizedProps;if(gs(F,C)&&c.ref===p.ref)if(fa=!1,p.pendingProps=C=F,(c.lanes&R)!==0)(c.flags&131072)!==0&&(fa=!0);else return p.lanes=c.lanes,oo(c,p,R)}return cm(c,p,x,C,R)}function yy(c,p,x){var C=p.pendingProps,R=C.children,F=c!==null?c.memoizedState:null;if(C.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},on(qc,Zi),Zi|=x;else{if((x&1073741824)===0)return c=F!==null?F.baseLanes|x:x,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:c,cachePool:null,transitions:null},p.updateQueue=null,on(qc,Zi),Zi|=c,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},C=F!==null?F.baseLanes:x,on(qc,Zi),Zi|=C}else F!==null?(C=F.baseLanes|x,p.memoizedState=null):C=x,on(qc,Zi),Zi|=C;return Wn(c,p,R,x),p.child}function vy(c,p){var x=p.ref;(c===null&&x!==null||c!==null&&c.ref!==x)&&(p.flags|=512,p.flags|=2097152)}function cm(c,p,x,C,R){var F=oi(x)?Aa:Kr.current;return F=qo(p,F),Un(p,R),x=Wo(c,p,x,C,F,R),C=io(),c!==null&&!fa?(p.updateQueue=c.updateQueue,p.flags&=-2053,c.lanes&=~R,oo(c,p,R)):(ve&&C&&ae(p),p.flags|=1,Wn(c,p,x,R),p.child)}function _y(c,p,x,C,R){if(oi(x)){var F=!0;sa(p)}else F=!1;if(Un(p,R),p.stateNode===null)Kh(c,p),lm(p,x,C),Bu(p,x,C,R),C=!0;else if(c===null){var oe=p.stateNode,Te=p.memoizedProps;oe.props=Te;var Oe=oe.context,Je=x.contextType;typeof Je=="object"&&Je!==null?Je=sn(Je):(Je=oi(x)?Aa:Kr.current,Je=qo(p,Je));var mt=x.getDerivedStateFromProps,vt=typeof mt=="function"||typeof oe.getSnapshotBeforeUpdate=="function";vt||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(Te!==C||Oe!==Je)&&_d(p,oe,C,Je),eo=!1;var dt=p.memoizedState;oe.state=dt,to(p,C,oe,R),Oe=p.memoizedState,Te!==C||dt!==Oe||Ar.current||eo?(typeof mt=="function"&&(gd(p,x,mt,C),Oe=p.memoizedState),(Te=eo||vd(p,x,Te,C,dt,Oe,Je))?(vt||typeof oe.UNSAFE_componentWillMount!="function"&&typeof oe.componentWillMount!="function"||(typeof oe.componentWillMount=="function"&&oe.componentWillMount(),typeof oe.UNSAFE_componentWillMount=="function"&&oe.UNSAFE_componentWillMount()),typeof oe.componentDidMount=="function"&&(p.flags|=4194308)):(typeof oe.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=C,p.memoizedState=Oe),oe.props=C,oe.state=Oe,oe.context=Je,C=Te):(typeof oe.componentDidMount=="function"&&(p.flags|=4194308),C=!1)}else{oe=p.stateNode,ua(c,p),Te=p.memoizedProps,Je=p.type===p.elementType?Te:bo(p.type,Te),oe.props=Je,vt=p.pendingProps,dt=oe.context,Oe=x.contextType,typeof Oe=="object"&&Oe!==null?Oe=sn(Oe):(Oe=oi(x)?Aa:Kr.current,Oe=qo(p,Oe));var Dt=x.getDerivedStateFromProps;(mt=typeof Dt=="function"||typeof oe.getSnapshotBeforeUpdate=="function")||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(Te!==vt||dt!==Oe)&&_d(p,oe,C,Oe),eo=!1,dt=p.memoizedState,oe.state=dt,to(p,C,oe,R);var Wt=p.memoizedState;Te!==vt||dt!==Wt||Ar.current||eo?(typeof Dt=="function"&&(gd(p,x,Dt,C),Wt=p.memoizedState),(Je=eo||vd(p,x,Je,C,dt,Wt,Oe)||!1)?(mt||typeof oe.UNSAFE_componentWillUpdate!="function"&&typeof oe.componentWillUpdate!="function"||(typeof oe.componentWillUpdate=="function"&&oe.componentWillUpdate(C,Wt,Oe),typeof oe.UNSAFE_componentWillUpdate=="function"&&oe.UNSAFE_componentWillUpdate(C,Wt,Oe)),typeof oe.componentDidUpdate=="function"&&(p.flags|=4),typeof oe.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof oe.componentDidUpdate!="function"||Te===c.memoizedProps&&dt===c.memoizedState||(p.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||Te===c.memoizedProps&&dt===c.memoizedState||(p.flags|=1024),p.memoizedProps=C,p.memoizedState=Wt),oe.props=C,oe.state=Wt,oe.context=Oe,C=Je):(typeof oe.componentDidUpdate!="function"||Te===c.memoizedProps&&dt===c.memoizedState||(p.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||Te===c.memoizedProps&&dt===c.memoizedState||(p.flags|=1024),C=!1)}return hm(c,p,x,C,F,R)}function hm(c,p,x,C,R,F){vy(c,p);var oe=(p.flags&128)!==0;if(!C&&!oe)return R&&$l(p,x,!1),oo(c,p,F);C=p.stateNode,py.current=p;var Te=oe&&typeof x.getDerivedStateFromError!="function"?null:C.render();return p.flags|=1,c!==null&&oe?(p.child=Mt(p,c.child,null,F),p.child=Mt(p,null,Te,F)):Wn(c,p,Te,F),p.memoizedState=C.state,R&&$l(p,x,!0),p.child}function bd(c){var p=c.stateNode;p.pendingContext?Bl(c,p.pendingContext,p.pendingContext!==p.context):p.context&&Bl(c,p.context,!1),Ss(c,p.containerInfo)}function xy(c,p,x,C,R){return Tt(),Ot(R),p.flags|=256,Wn(c,p,x,C),p.child}var Zl={dehydrated:null,treeContext:null,retryLane:0};function fm(c){return{baseLanes:c,cachePool:null,transitions:null}}function En(c,p,x){var C=p.pendingProps,R=gn.current,F=!1,oe=(p.flags&128)!==0,Te;if((Te=oe)||(Te=c!==null&&c.memoizedState===null?!1:(R&2)!==0),Te?(F=!0,p.flags&=-129):(c===null||c.memoizedState!==null)&&(R|=1),on(gn,R&1),c===null)return ze(p),c=p.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((p.mode&1)===0?p.lanes=1:c.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(oe=C.children,c=C.fallback,F?(C=p.mode,F=p.child,oe={mode:"hidden",children:oe},(C&1)===0&&F!==null?(F.childLanes=0,F.pendingProps=oe):F=ru(oe,C,0,null),c=tu(c,C,x,null),F.return=p,c.return=p,F.sibling=c,p.child=F,p.child.memoizedState=fm(x),p.memoizedState=Zl,c):Vc(p,oe));if(R=c.memoizedState,R!==null&&(Te=R.dehydrated,Te!==null))return wd(c,p,oe,C,Te,R,x);if(F){F=C.fallback,oe=p.mode,R=c.child,Te=R.sibling;var Oe={mode:"hidden",children:C.children};return(oe&1)===0&&p.child!==R?(C=p.child,C.childLanes=0,C.pendingProps=Oe,p.deletions=null):(C=eu(R,Oe),C.subtreeFlags=R.subtreeFlags&14680064),Te!==null?F=eu(Te,F):(F=tu(F,oe,x,null),F.flags|=2),F.return=p,C.return=p,C.sibling=F,p.child=C,C=F,F=p.child,oe=c.child.memoizedState,oe=oe===null?fm(x):{baseLanes:oe.baseLanes|x,cachePool:null,transitions:oe.transitions},F.memoizedState=oe,F.childLanes=c.childLanes&~x,p.memoizedState=Zl,C}return F=c.child,c=F.sibling,C=eu(F,{mode:"visible",children:C.children}),(p.mode&1)===0&&(C.lanes=x),C.return=p,C.sibling=null,c!==null&&(x=p.deletions,x===null?(p.deletions=[c],p.flags|=16):x.push(c)),p.child=C,p.memoizedState=null,C}function Vc(c,p){return p=ru({mode:"visible",children:p},c.mode,0,null),p.return=c,c.child=p}function Hh(c,p,x,C){return C!==null&&Ot(C),Mt(p,c.child,null,x),c=Vc(p,p.pendingProps.children),c.flags|=2,p.memoizedState=null,c}function wd(c,p,x,C,R,F,oe){if(x)return p.flags&256?(p.flags&=-257,C=xd(Error(r(422))),Hh(c,p,oe,C)):p.memoizedState!==null?(p.child=c.child,p.flags|=128,null):(F=C.fallback,R=p.mode,C=ru({mode:"visible",children:C.children},R,0,null),F=tu(F,R,oe,null),F.flags|=2,C.return=p,F.return=p,C.sibling=F,p.child=C,(p.mode&1)!==0&&Mt(p,c.child,null,oe),p.child.memoizedState=fm(oe),p.memoizedState=Zl,F);if((p.mode&1)===0)return Hh(c,p,oe,null);if(R.data==="$!"){if(C=R.nextSibling&&R.nextSibling.dataset,C)var Te=C.dgst;return C=Te,F=Error(r(419)),C=xd(F,C,void 0),Hh(c,p,oe,C)}if(Te=(oe&c.childLanes)!==0,fa||Te){if(C=ui,C!==null){switch(oe&-oe){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}R=(R&(C.suspendedLanes|oe))!==0?0:R,R!==0&&R!==F.retryLane&&(F.retryLane=R,qi(c,R),Zo(C,c,R,-1))}return Rd(),C=xd(Error(r(421))),Hh(c,p,oe,C)}return R.data==="$?"?(p.flags|=128,p.child=c.child,p=zy.bind(null,c),R._reactRetry=p,null):(c=F.treeContext,pe=Xa(R.nextSibling),fe=p,ve=!0,we=null,c!==null&&(b[k++]=j,b[k++]=$,b[k++]=D,j=c.id,$=c.overflow,D=p),p=Vc(p,C.children),p.flags|=4096,p)}function Zh(c,p,x){c.lanes|=p;var C=c.alternate;C!==null&&(C.lanes|=p),Yr(c.return,p,x)}function Fu(c,p,x,C,R){var F=c.memoizedState;F===null?c.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:C,tail:x,tailMode:R}:(F.isBackwards=p,F.rendering=null,F.renderingStartTime=0,F.last=C,F.tail=x,F.tailMode=R)}function dm(c,p,x){var C=p.pendingProps,R=C.revealOrder,F=C.tail;if(Wn(c,p,C.children,x),C=gn.current,(C&2)!==0)C=C&1|2,p.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=p.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Zh(c,x,p);else if(c.tag===19)Zh(c,x,p);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===p)break e;for(;c.sibling===null;){if(c.return===null||c.return===p)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}C&=1}if(on(gn,C),(p.mode&1)===0)p.memoizedState=null;else switch(R){case"forwards":for(x=p.child,R=null;x!==null;)c=x.alternate,c!==null&&no(c)===null&&(R=x),x=x.sibling;x=R,x===null?(R=p.child,p.child=null):(R=x.sibling,x.sibling=null),Fu(p,!1,R,x,F);break;case"backwards":for(x=null,R=p.child,p.child=null;R!==null;){if(c=R.alternate,c!==null&&no(c)===null){p.child=R;break}c=R.sibling,R.sibling=x,x=R,R=c}Fu(p,!0,x,null,F);break;case"together":Fu(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Kh(c,p){(p.mode&1)===0&&c!==null&&(c.alternate=null,p.alternate=null,p.flags|=2)}function oo(c,p,x){if(c!==null&&(p.dependencies=c.dependencies),Vu|=p.lanes,(x&p.childLanes)===0)return null;if(c!==null&&p.child!==c.child)throw Error(r(153));if(p.child!==null){for(c=p.child,x=eu(c,c.pendingProps),p.child=x,x.return=p;c.sibling!==null;)c=c.sibling,x=x.sibling=eu(c,c.pendingProps),x.return=p;x.sibling=null}return p.child}function pm(c,p,x){switch(p.tag){case 3:bd(p),Tt();break;case 5:Lh(p);break;case 1:oi(p.type)&&sa(p);break;case 4:Ss(p,p.stateNode.containerInfo);break;case 10:var C=p.type._context,R=p.memoizedProps.value;on(Gr,C._currentValue),C._currentValue=R;break;case 13:if(C=p.memoizedState,C!==null)return C.dehydrated!==null?(on(gn,gn.current&1),p.flags|=128,null):(x&p.child.childLanes)!==0?En(c,p,x):(on(gn,gn.current&1),c=oo(c,p,x),c!==null?c.sibling:null);on(gn,gn.current&1);break;case 19:if(C=(x&p.childLanes)!==0,(c.flags&128)!==0){if(C)return dm(c,p,x);p.flags|=128}if(R=p.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),on(gn,gn.current),C)break;return null;case 22:case 23:return p.lanes=0,yy(c,p,x)}return oo(c,p,x)}var Sd,Xh,Td,mm;Sd=function(c,p){for(var x=p.child;x!==null;){if(x.tag===5||x.tag===6)c.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===p)break;for(;x.sibling===null;){if(x.return===null||x.return===p)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},Xh=function(){},Td=function(c,p,x,C){var R=c.memoizedProps;if(R!==C){c=p.stateNode,ha(fn.current);var F=null;switch(x){case"input":R=jt(c,R),C=jt(c,C),F=[];break;case"select":R=ge({},R,{value:void 0}),C=ge({},C,{value:void 0}),F=[];break;case"textarea":R=Nn(c,R),C=Nn(c,C),F=[];break;default:typeof R.onClick!="function"&&typeof C.onClick=="function"&&(c.onclick=Ui)}pi(x,C);var oe;x=null;for(Je in R)if(!C.hasOwnProperty(Je)&&R.hasOwnProperty(Je)&&R[Je]!=null)if(Je==="style"){var Te=R[Je];for(oe in Te)Te.hasOwnProperty(oe)&&(x||(x={}),x[oe]="")}else Je!=="dangerouslySetInnerHTML"&&Je!=="children"&&Je!=="suppressContentEditableWarning"&&Je!=="suppressHydrationWarning"&&Je!=="autoFocus"&&(s.hasOwnProperty(Je)?F||(F=[]):(F=F||[]).push(Je,null));for(Je in C){var Oe=C[Je];if(Te=R!=null?R[Je]:void 0,C.hasOwnProperty(Je)&&Oe!==Te&&(Oe!=null||Te!=null))if(Je==="style")if(Te){for(oe in Te)!Te.hasOwnProperty(oe)||Oe&&Oe.hasOwnProperty(oe)||(x||(x={}),x[oe]="");for(oe in Oe)Oe.hasOwnProperty(oe)&&Te[oe]!==Oe[oe]&&(x||(x={}),x[oe]=Oe[oe])}else x||(F||(F=[]),F.push(Je,x)),x=Oe;else Je==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Te=Te?Te.__html:void 0,Oe!=null&&Te!==Oe&&(F=F||[]).push(Je,Oe)):Je==="children"?typeof Oe!="string"&&typeof Oe!="number"||(F=F||[]).push(Je,""+Oe):Je!=="suppressContentEditableWarning"&&Je!=="suppressHydrationWarning"&&(s.hasOwnProperty(Je)?(Oe!=null&&Je==="onScroll"&&tn("scroll",c),F||Te===Oe||(F=[])):(F=F||[]).push(Je,Oe))}x&&(F=F||[]).push("style",x);var Je=F;(p.updateQueue=Je)&&(p.flags|=4)}},mm=function(c,p,x,C){x!==C&&(p.flags|=4)};function Uc(c,p){if(!ve)switch(c.tailMode){case"hidden":p=c.tail;for(var x=null;p!==null;)p.alternate!==null&&(x=p),p=p.sibling;x===null?c.tail=null:x.sibling=null;break;case"collapsed":x=c.tail;for(var C=null;x!==null;)x.alternate!==null&&(C=x),x=x.sibling;C===null?p||c.tail===null?c.tail=null:c.tail.sibling=null:C.sibling=null}}function Gi(c){var p=c.alternate!==null&&c.alternate.child===c.child,x=0,C=0;if(p)for(var R=c.child;R!==null;)x|=R.lanes|R.childLanes,C|=R.subtreeFlags&14680064,C|=R.flags&14680064,R.return=c,R=R.sibling;else for(R=c.child;R!==null;)x|=R.lanes|R.childLanes,C|=R.subtreeFlags,C|=R.flags,R.return=c,R=R.sibling;return c.subtreeFlags|=C,c.childLanes=x,p}function S_(c,p,x){var C=p.pendingProps;switch(ue(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gi(p),null;case 1:return oi(p.type)&&ju(),Gi(p),null;case 3:return C=p.stateNode,ro(),rn(Ar),rn(Kr),Ul(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(c===null||c.child===null)&&(lt(p)?p.flags|=4:c===null||c.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,we!==null&&(_m(we),we=null))),Xh(c,p),Gi(p),null;case 5:Nh(p);var R=ha(Sr.current);if(x=p.type,c!==null&&p.stateNode!=null)Td(c,p,x,C,R),c.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!C){if(p.stateNode===null)throw Error(r(166));return Gi(p),null}if(c=ha(fn.current),lt(p)){C=p.stateNode,x=p.type;var F=p.memoizedProps;switch(C[Ei]=p,C[vo]=F,c=(p.mode&1)!==0,x){case"dialog":tn("cancel",C),tn("close",C);break;case"iframe":case"object":case"embed":tn("load",C);break;case"video":case"audio":for(R=0;R<_s.length;R++)tn(_s[R],C);break;case"source":tn("error",C);break;case"img":case"image":case"link":tn("error",C),tn("load",C);break;case"details":tn("toggle",C);break;case"input":br(C,F),tn("invalid",C);break;case"select":C._wrapperState={wasMultiple:!!F.multiple},tn("invalid",C);break;case"textarea":di(C,F),tn("invalid",C)}pi(x,F),R=null;for(var oe in F)if(F.hasOwnProperty(oe)){var Te=F[oe];oe==="children"?typeof Te=="string"?C.textContent!==Te&&(F.suppressHydrationWarning!==!0&&Ll(C.textContent,Te,c),R=["children",Te]):typeof Te=="number"&&C.textContent!==""+Te&&(F.suppressHydrationWarning!==!0&&Ll(C.textContent,Te,c),R=["children",""+Te]):s.hasOwnProperty(oe)&&Te!=null&&oe==="onScroll"&&tn("scroll",C)}switch(x){case"input":Ft(C),hn(C,F,!0);break;case"textarea":Ft(C),Kn(C);break;case"select":case"option":break;default:typeof F.onClick=="function"&&(C.onclick=Ui)}C=R,p.updateQueue=C,C!==null&&(p.flags|=4)}else{oe=R.nodeType===9?R:R.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Co(x)),c==="http://www.w3.org/1999/xhtml"?x==="script"?(c=oe.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof C.is=="string"?c=oe.createElement(x,{is:C.is}):(c=oe.createElement(x),x==="select"&&(oe=c,C.multiple?oe.multiple=!0:C.size&&(oe.size=C.size))):c=oe.createElementNS(c,x),c[Ei]=p,c[vo]=C,Sd(c,p,!1,!1),p.stateNode=c;e:{switch(oe=ra(x,C),x){case"dialog":tn("cancel",c),tn("close",c),R=C;break;case"iframe":case"object":case"embed":tn("load",c),R=C;break;case"video":case"audio":for(R=0;R<_s.length;R++)tn(_s[R],c);R=C;break;case"source":tn("error",c),R=C;break;case"img":case"image":case"link":tn("error",c),tn("load",c),R=C;break;case"details":tn("toggle",c),R=C;break;case"input":br(c,C),R=jt(c,C),tn("invalid",c);break;case"option":R=C;break;case"select":c._wrapperState={wasMultiple:!!C.multiple},R=ge({},C,{value:void 0}),tn("invalid",c);break;case"textarea":di(c,C),R=Nn(c,C),tn("invalid",c);break;default:R=C}pi(x,R),Te=R;for(F in Te)if(Te.hasOwnProperty(F)){var Oe=Te[F];F==="style"?vr(c,Oe):F==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Oe!=null&&zi(c,Oe)):F==="children"?typeof Oe=="string"?(x!=="textarea"||Oe!=="")&&Tn(c,Oe):typeof Oe=="number"&&Tn(c,""+Oe):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(s.hasOwnProperty(F)?Oe!=null&&F==="onScroll"&&tn("scroll",c):Oe!=null&&J(c,F,Oe,oe))}switch(x){case"input":Ft(c),hn(c,C,!1);break;case"textarea":Ft(c),Kn(c);break;case"option":C.value!=null&&c.setAttribute("value",""+wt(C.value));break;case"select":c.multiple=!!C.multiple,F=C.value,F!=null?Ln(c,!!C.multiple,F,!1):C.defaultValue!=null&&Ln(c,!!C.multiple,C.defaultValue,!0);break;default:typeof R.onClick=="function"&&(c.onclick=Ui)}switch(x){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}}C&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Gi(p),null;case 6:if(c&&p.stateNode!=null)mm(c,p,c.memoizedProps,C);else{if(typeof C!="string"&&p.stateNode===null)throw Error(r(166));if(x=ha(Sr.current),ha(fn.current),lt(p)){if(C=p.stateNode,x=p.memoizedProps,C[Ei]=p,(F=C.nodeValue!==x)&&(c=fe,c!==null))switch(c.tag){case 3:Ll(C.nodeValue,x,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Ll(C.nodeValue,x,(c.mode&1)!==0)}F&&(p.flags|=4)}else C=(x.nodeType===9?x:x.ownerDocument).createTextNode(C),C[Ei]=p,p.stateNode=C}return Gi(p),null;case 13:if(rn(gn),C=p.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(ve&&pe!==null&&(p.mode&1)!==0&&(p.flags&128)===0)gt(),Tt(),p.flags|=98560,F=!1;else if(F=lt(p),C!==null&&C.dehydrated!==null){if(c===null){if(!F)throw Error(r(318));if(F=p.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(r(317));F[Ei]=p}else Tt(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Gi(p),F=!1}else we!==null&&(_m(we),we=null),F=!0;if(!F)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=x,p):(C=C!==null,C!==(c!==null&&c.memoizedState!==null)&&C&&(p.child.flags|=8192,(p.mode&1)!==0&&(c===null||(gn.current&1)!==0?ti===0&&(ti=3):Rd())),p.updateQueue!==null&&(p.flags|=4),Gi(p),null);case 4:return ro(),Xh(c,p),c===null&&Fo(p.stateNode.containerInfo),Gi(p),null;case 10:return la(p.type._context),Gi(p),null;case 17:return oi(p.type)&&ju(),Gi(p),null;case 19:if(rn(gn),F=p.memoizedState,F===null)return Gi(p),null;if(C=(p.flags&128)!==0,oe=F.rendering,oe===null)if(C)Uc(F,!1);else{if(ti!==0||c!==null&&(c.flags&128)!==0)for(c=p.child;c!==null;){if(oe=no(c),oe!==null){for(p.flags|=128,Uc(F,!1),C=oe.updateQueue,C!==null&&(p.updateQueue=C,p.flags|=4),p.subtreeFlags=0,C=x,x=p.child;x!==null;)F=x,c=C,F.flags&=14680066,oe=F.alternate,oe===null?(F.childLanes=0,F.lanes=c,F.child=null,F.subtreeFlags=0,F.memoizedProps=null,F.memoizedState=null,F.updateQueue=null,F.dependencies=null,F.stateNode=null):(F.childLanes=oe.childLanes,F.lanes=oe.lanes,F.child=oe.child,F.subtreeFlags=0,F.deletions=null,F.memoizedProps=oe.memoizedProps,F.memoizedState=oe.memoizedState,F.updateQueue=oe.updateQueue,F.type=oe.type,c=oe.dependencies,F.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),x=x.sibling;return on(gn,gn.current&1|2),p.child}c=c.sibling}F.tail!==null&&cr()>yn&&(p.flags|=128,C=!0,Uc(F,!1),p.lanes=4194304)}else{if(!C)if(c=no(oe),c!==null){if(p.flags|=128,C=!0,x=c.updateQueue,x!==null&&(p.updateQueue=x,p.flags|=4),Uc(F,!0),F.tail===null&&F.tailMode==="hidden"&&!oe.alternate&&!ve)return Gi(p),null}else 2*cr()-F.renderingStartTime>yn&&x!==1073741824&&(p.flags|=128,C=!0,Uc(F,!1),p.lanes=4194304);F.isBackwards?(oe.sibling=p.child,p.child=oe):(x=F.last,x!==null?x.sibling=oe:p.child=oe,F.last=oe)}return F.tail!==null?(p=F.tail,F.rendering=p,F.tail=p.sibling,F.renderingStartTime=cr(),p.sibling=null,x=gn.current,on(gn,C?x&1|2:x&1),p):(Gi(p),null);case 22:case 23:return of(),C=p.memoizedState!==null,c!==null&&c.memoizedState!==null!==C&&(p.flags|=8192),C&&(p.mode&1)!==0?(Zi&1073741824)!==0&&(Gi(p),p.subtreeFlags&6&&(p.flags|=8192)):Gi(p),null;case 24:return null;case 25:return null}throw Error(r(156,p.tag))}function T_(c,p){switch(ue(p),p.tag){case 1:return oi(p.type)&&ju(),c=p.flags,c&65536?(p.flags=c&-65537|128,p):null;case 3:return ro(),rn(Ar),rn(Kr),Ul(),c=p.flags,(c&65536)!==0&&(c&128)===0?(p.flags=c&-65537|128,p):null;case 5:return Nh(p),null;case 13:if(rn(gn),c=p.memoizedState,c!==null&&c.dehydrated!==null){if(p.alternate===null)throw Error(r(340));Tt()}return c=p.flags,c&65536?(p.flags=c&-65537|128,p):null;case 19:return rn(gn),null;case 4:return ro(),null;case 10:return la(p.type._context),null;case 22:case 23:return of(),null;case 24:return null;default:return null}}var Pd=!1,Hi=!1,Kl=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function $u(c,p){var x=c.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(C){wn(c,p,C)}else x.current=null}function Xl(c,p,x){try{x()}catch(C){wn(c,p,C)}}var by=!1;function P_(c,p){if(Vo=Gs,c=Cc(),ys(c)){if("selectionStart"in c)var x={start:c.selectionStart,end:c.selectionEnd};else e:{x=(x=c.ownerDocument)&&x.defaultView||window;var C=x.getSelection&&x.getSelection();if(C&&C.rangeCount!==0){x=C.anchorNode;var R=C.anchorOffset,F=C.focusNode;C=C.focusOffset;try{x.nodeType,F.nodeType}catch{x=null;break e}var oe=0,Te=-1,Oe=-1,Je=0,mt=0,vt=c,dt=null;t:for(;;){for(var Dt;vt!==x||R!==0&&vt.nodeType!==3||(Te=oe+R),vt!==F||C!==0&&vt.nodeType!==3||(Oe=oe+C),vt.nodeType===3&&(oe+=vt.nodeValue.length),(Dt=vt.firstChild)!==null;)dt=vt,vt=Dt;for(;;){if(vt===c)break t;if(dt===x&&++Je===R&&(Te=oe),dt===F&&++mt===C&&(Oe=oe),(Dt=vt.nextSibling)!==null)break;vt=dt,dt=vt.parentNode}vt=Dt}x=Te===-1||Oe===-1?null:{start:Te,end:Oe}}else x=null}x=x||{start:0,end:0}}else x=null;for(Dh={focusedElem:c,selectionRange:x},Gs=!1,Zt=p;Zt!==null;)if(p=Zt,c=p.child,(p.subtreeFlags&1028)!==0&&c!==null)c.return=p,Zt=c;else for(;Zt!==null;){p=Zt;try{var Wt=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(Wt!==null){var Jt=Wt.memoizedProps,Bn=Wt.memoizedState,He=p.stateNode,je=He.getSnapshotBeforeUpdate(p.elementType===p.type?Jt:bo(p.type,Jt),Bn);He.__reactInternalSnapshotBeforeUpdate=je}break;case 3:var Xe=p.stateNode.containerInfo;Xe.nodeType===1?Xe.textContent="":Xe.nodeType===9&&Xe.documentElement&&Xe.removeChild(Xe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ct){wn(p,p.return,Ct)}if(c=p.sibling,c!==null){c.return=p.return,Zt=c;break}Zt=p.return}return Wt=by,by=!1,Wt}function Yh(c,p,x){var C=p.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var R=C=C.next;do{if((R.tag&c)===c){var F=R.destroy;R.destroy=void 0,F!==void 0&&Xl(p,x,F)}R=R.next}while(R!==C)}}function Jh(c,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var x=p=p.next;do{if((x.tag&c)===c){var C=x.create;x.destroy=C()}x=x.next}while(x!==p)}}function Ad(c){var p=c.ref;if(p!==null){var x=c.stateNode;switch(c.tag){case 5:c=x;break;default:c=x}typeof p=="function"?p(c):p.current=c}}function wy(c){var p=c.alternate;p!==null&&(c.alternate=null,wy(p)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(p=c.stateNode,p!==null&&(delete p[Ei],delete p[vo],delete p[Pr],delete p[jh],delete p[Jp])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Sy(c){return c.tag===5||c.tag===3||c.tag===4}function Ty(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Sy(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function gm(c,p,x){var C=c.tag;if(C===5||C===6)c=c.stateNode,p?x.nodeType===8?x.parentNode.insertBefore(c,p):x.insertBefore(c,p):(x.nodeType===8?(p=x.parentNode,p.insertBefore(c,x)):(p=x,p.appendChild(c)),x=x._reactRootContainer,x!=null||p.onclick!==null||(p.onclick=Ui));else if(C!==4&&(c=c.child,c!==null))for(gm(c,p,x),c=c.sibling;c!==null;)gm(c,p,x),c=c.sibling}function Qh(c,p,x){var C=c.tag;if(C===5||C===6)c=c.stateNode,p?x.insertBefore(c,p):x.appendChild(c);else if(C!==4&&(c=c.child,c!==null))for(Qh(c,p,x),c=c.sibling;c!==null;)Qh(c,p,x),c=c.sibling}var Gn=null,so=!1;function Yl(c,p,x){for(x=x.child;x!==null;)Py(c,p,x),x=x.sibling}function Py(c,p,x){if(Pi&&typeof Pi.onCommitFiberUnmount=="function")try{Pi.onCommitFiberUnmount(gi,x)}catch{}switch(x.tag){case 5:Hi||$u(x,p);case 6:var C=Gn,R=so;Gn=null,Yl(c,p,x),Gn=C,so=R,Gn!==null&&(so?(c=Gn,x=x.stateNode,c.nodeType===8?c.parentNode.removeChild(x):c.removeChild(x)):Gn.removeChild(x.stateNode));break;case 18:Gn!==null&&(so?(c=Gn,x=x.stateNode,c.nodeType===8?Lt(c.parentNode,x):c.nodeType===1&&Lt(c,x),Oo(c)):Lt(Gn,x.stateNode));break;case 4:C=Gn,R=so,Gn=x.stateNode.containerInfo,so=!0,Yl(c,p,x),Gn=C,so=R;break;case 0:case 11:case 14:case 15:if(!Hi&&(C=x.updateQueue,C!==null&&(C=C.lastEffect,C!==null))){R=C=C.next;do{var F=R,oe=F.destroy;F=F.tag,oe!==void 0&&((F&2)!==0||(F&4)!==0)&&Xl(x,p,oe),R=R.next}while(R!==C)}Yl(c,p,x);break;case 1:if(!Hi&&($u(x,p),C=x.stateNode,typeof C.componentWillUnmount=="function"))try{C.props=x.memoizedProps,C.state=x.memoizedState,C.componentWillUnmount()}catch(Te){wn(x,p,Te)}Yl(c,p,x);break;case 21:Yl(c,p,x);break;case 22:x.mode&1?(Hi=(C=Hi)||x.memoizedState!==null,Yl(c,p,x),Hi=C):Yl(c,p,x);break;default:Yl(c,p,x)}}function ym(c){var p=c.updateQueue;if(p!==null){c.updateQueue=null;var x=c.stateNode;x===null&&(x=c.stateNode=new Kl),p.forEach(function(C){var R=Ly.bind(null,c,C);x.has(C)||(x.add(C),C.then(R,R))})}}function Ho(c,p){var x=p.deletions;if(x!==null)for(var C=0;C<x.length;C++){var R=x[C];try{var F=c,oe=p,Te=oe;e:for(;Te!==null;){switch(Te.tag){case 5:Gn=Te.stateNode,so=!1;break e;case 3:Gn=Te.stateNode.containerInfo,so=!0;break e;case 4:Gn=Te.stateNode.containerInfo,so=!0;break e}Te=Te.return}if(Gn===null)throw Error(r(160));Py(F,oe,R),Gn=null,so=!1;var Oe=R.alternate;Oe!==null&&(Oe.return=null),R.return=null}catch(Je){wn(R,p,Je)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)Ay(p,c),p=p.sibling}function Ay(c,p){var x=c.alternate,C=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Ho(p,c),Ma(c),C&4){try{Yh(3,c,c.return),Jh(3,c)}catch(Jt){wn(c,c.return,Jt)}try{Yh(5,c,c.return)}catch(Jt){wn(c,c.return,Jt)}}break;case 1:Ho(p,c),Ma(c),C&512&&x!==null&&$u(x,x.return);break;case 5:if(Ho(p,c),Ma(c),C&512&&x!==null&&$u(x,x.return),c.flags&32){var R=c.stateNode;try{Tn(R,"")}catch(Jt){wn(c,c.return,Jt)}}if(C&4&&(R=c.stateNode,R!=null)){var F=c.memoizedProps,oe=x!==null?x.memoizedProps:F,Te=c.type,Oe=c.updateQueue;if(c.updateQueue=null,Oe!==null)try{Te==="input"&&F.type==="radio"&&F.name!=null&&$e(R,F),ra(Te,oe);var Je=ra(Te,F);for(oe=0;oe<Oe.length;oe+=2){var mt=Oe[oe],vt=Oe[oe+1];mt==="style"?vr(R,vt):mt==="dangerouslySetInnerHTML"?zi(R,vt):mt==="children"?Tn(R,vt):J(R,mt,vt,Je)}switch(Te){case"input":Er(R,F);break;case"textarea":ta(R,F);break;case"select":var dt=R._wrapperState.wasMultiple;R._wrapperState.wasMultiple=!!F.multiple;var Dt=F.value;Dt!=null?Ln(R,!!F.multiple,Dt,!1):dt!==!!F.multiple&&(F.defaultValue!=null?Ln(R,!!F.multiple,F.defaultValue,!0):Ln(R,!!F.multiple,F.multiple?[]:"",!1))}R[vo]=F}catch(Jt){wn(c,c.return,Jt)}}break;case 6:if(Ho(p,c),Ma(c),C&4){if(c.stateNode===null)throw Error(r(162));R=c.stateNode,F=c.memoizedProps;try{R.nodeValue=F}catch(Jt){wn(c,c.return,Jt)}}break;case 3:if(Ho(p,c),Ma(c),C&4&&x!==null&&x.memoizedState.isDehydrated)try{Oo(p.containerInfo)}catch(Jt){wn(c,c.return,Jt)}break;case 4:Ho(p,c),Ma(c);break;case 13:Ho(p,c),Ma(c),R=c.child,R.flags&8192&&(F=R.memoizedState!==null,R.stateNode.isHidden=F,!F||R.alternate!==null&&R.alternate.memoizedState!==null||(Uu=cr())),C&4&&ym(c);break;case 22:if(mt=x!==null&&x.memoizedState!==null,c.mode&1?(Hi=(Je=Hi)||mt,Ho(p,c),Hi=Je):Ho(p,c),Ma(c),C&8192){if(Je=c.memoizedState!==null,(c.stateNode.isHidden=Je)&&!mt&&(c.mode&1)!==0)for(Zt=c,mt=c.child;mt!==null;){for(vt=Zt=mt;Zt!==null;){switch(dt=Zt,Dt=dt.child,dt.tag){case 0:case 11:case 14:case 15:Yh(4,dt,dt.return);break;case 1:$u(dt,dt.return);var Wt=dt.stateNode;if(typeof Wt.componentWillUnmount=="function"){C=dt,x=dt.return;try{p=C,Wt.props=p.memoizedProps,Wt.state=p.memoizedState,Wt.componentWillUnmount()}catch(Jt){wn(C,x,Jt)}}break;case 5:$u(dt,dt.return);break;case 22:if(dt.memoizedState!==null){Iy(vt);continue}}Dt!==null?(Dt.return=dt,Zt=Dt):Iy(vt)}mt=mt.sibling}e:for(mt=null,vt=c;;){if(vt.tag===5){if(mt===null){mt=vt;try{R=vt.stateNode,Je?(F=R.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none"):(Te=vt.stateNode,Oe=vt.memoizedProps.style,oe=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null,Te.style.display=St("display",oe))}catch(Jt){wn(c,c.return,Jt)}}}else if(vt.tag===6){if(mt===null)try{vt.stateNode.nodeValue=Je?"":vt.memoizedProps}catch(Jt){wn(c,c.return,Jt)}}else if((vt.tag!==22&&vt.tag!==23||vt.memoizedState===null||vt===c)&&vt.child!==null){vt.child.return=vt,vt=vt.child;continue}if(vt===c)break e;for(;vt.sibling===null;){if(vt.return===null||vt.return===c)break e;mt===vt&&(mt=null),vt=vt.return}mt===vt&&(mt=null),vt.sibling.return=vt.return,vt=vt.sibling}}break;case 19:Ho(p,c),Ma(c),C&4&&ym(c);break;case 21:break;default:Ho(p,c),Ma(c)}}function Ma(c){var p=c.flags;if(p&2){try{e:{for(var x=c.return;x!==null;){if(Sy(x)){var C=x;break e}x=x.return}throw Error(r(160))}switch(C.tag){case 5:var R=C.stateNode;C.flags&32&&(Tn(R,""),C.flags&=-33);var F=Ty(c);Qh(c,F,R);break;case 3:case 4:var oe=C.stateNode.containerInfo,Te=Ty(c);gm(c,Te,oe);break;default:throw Error(r(161))}}catch(Oe){wn(c,c.return,Oe)}c.flags&=-3}p&4096&&(c.flags&=-4097)}function Ey(c,p,x){Zt=c,Cy(c)}function Cy(c,p,x){for(var C=(c.mode&1)!==0;Zt!==null;){var R=Zt,F=R.child;if(R.tag===22&&C){var oe=R.memoizedState!==null||Pd;if(!oe){var Te=R.alternate,Oe=Te!==null&&Te.memoizedState!==null||Hi;Te=Pd;var Je=Hi;if(Pd=oe,(Hi=Oe)&&!Je)for(Zt=R;Zt!==null;)oe=Zt,Oe=oe.child,oe.tag===22&&oe.memoizedState!==null?ky(R):Oe!==null?(Oe.return=oe,Zt=Oe):ky(R);for(;F!==null;)Zt=F,Cy(F),F=F.sibling;Zt=R,Pd=Te,Hi=Je}My(c)}else(R.subtreeFlags&8772)!==0&&F!==null?(F.return=R,Zt=F):My(c)}}function My(c){for(;Zt!==null;){var p=Zt;if((p.flags&8772)!==0){var x=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:Hi||Jh(5,p);break;case 1:var C=p.stateNode;if(p.flags&4&&!Hi)if(x===null)C.componentDidMount();else{var R=p.elementType===p.type?x.memoizedProps:bo(p.type,x.memoizedProps);C.componentDidUpdate(R,x.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var F=p.updateQueue;F!==null&&Ca(p,F,C);break;case 3:var oe=p.updateQueue;if(oe!==null){if(x=null,p.child!==null)switch(p.child.tag){case 5:x=p.child.stateNode;break;case 1:x=p.child.stateNode}Ca(p,oe,x)}break;case 5:var Te=p.stateNode;if(x===null&&p.flags&4){x=Te;var Oe=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":Oe.autoFocus&&x.focus();break;case"img":Oe.src&&(x.src=Oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var Je=p.alternate;if(Je!==null){var mt=Je.memoizedState;if(mt!==null){var vt=mt.dehydrated;vt!==null&&Oo(vt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Hi||p.flags&512&&Ad(p)}catch(dt){wn(p,p.return,dt)}}if(p===c){Zt=null;break}if(x=p.sibling,x!==null){x.return=p.return,Zt=x;break}Zt=p.return}}function Iy(c){for(;Zt!==null;){var p=Zt;if(p===c){Zt=null;break}var x=p.sibling;if(x!==null){x.return=p.return,Zt=x;break}Zt=p.return}}function ky(c){for(;Zt!==null;){var p=Zt;try{switch(p.tag){case 0:case 11:case 15:var x=p.return;try{Jh(4,p)}catch(Oe){wn(p,x,Oe)}break;case 1:var C=p.stateNode;if(typeof C.componentDidMount=="function"){var R=p.return;try{C.componentDidMount()}catch(Oe){wn(p,R,Oe)}}var F=p.return;try{Ad(p)}catch(Oe){wn(p,F,Oe)}break;case 5:var oe=p.return;try{Ad(p)}catch(Oe){wn(p,oe,Oe)}}}catch(Oe){wn(p,p.return,Oe)}if(p===c){Zt=null;break}var Te=p.sibling;if(Te!==null){Te.return=p.return,Zt=Te;break}Zt=p.return}}var A_=Math.ceil,Ed=ie.ReactCurrentDispatcher,Cd=ie.ReactCurrentOwner,Ia=ie.ReactCurrentBatchConfig,Nr=0,ui=null,Hn=null,Ii=0,Zi=0,qc=xs(0),ti=0,ef=null,Vu=0,Md=0,Id=0,tf=null,ka=null,Uu=0,yn=1/0,Ps=null,rf=!1,kd=null,Mr=null,Wc=!1,al=null,nf=0,lo=0,Jl=null,af=-1,Od=0;function da(){return(Nr&6)!==0?cr():af!==-1?af:af=cr()}function Ql(c){return(c.mode&1)===0?1:(Nr&2)!==0&&Ii!==0?Ii&-Ii:Pt.transition!==null?(Od===0&&(Od=ko()),Od):(c=$r,c!==0||(c=window.event,c=c===void 0?16:fs(c.type)),c)}function Zo(c,p,x,C){if(50<lo)throw lo=0,Jl=null,Error(r(185));qs(c,x,C),((Nr&2)===0||c!==ui)&&(c===ui&&((Nr&2)===0&&(Md|=x),ti===4&&Ko(c,Ii)),Oa(c,C),x===1&&Nr===0&&(p.mode&1)===0&&(yn=cr()+500,Qt&&S()))}function Oa(c,p){var x=c.callbackNode;dc(c,p);var C=Bi(c,c===ui?Ii:0);if(C===0)x!==null&&Yn(x),c.callbackNode=null,c.callbackPriority=0;else if(p=C&-C,c.callbackPriority!==p){if(x!=null&&Yn(x),p===1)c.tag===0?zh(qu.bind(null,c)):zu(qu.bind(null,c)),Nl(function(){(Nr&6)===0&&S()}),x=null;else{switch(gu(C)){case 1:x=pu;break;case 4:x=Li;break;case 16:x=mi;break;case 536870912:x=ia;break;default:x=mi}x=wm(x,Oy.bind(null,c))}c.callbackPriority=p,c.callbackNode=x}}function Oy(c,p){if(af=-1,Od=0,(Nr&6)!==0)throw Error(r(327));var x=c.callbackNode;if(Yo()&&c.callbackNode!==x)return null;var C=Bi(c,c===ui?Ii:0);if(C===0)return null;if((C&30)!==0||(C&c.expiredLanes)!==0||p)p=sf(c,C);else{p=C;var R=Nr;Nr|=2;var F=Ry();(ui!==c||Ii!==p)&&(Ps=null,yn=cr()+500,Wu(c,p));do try{xm();break}catch(Te){Dy(c,Te)}while(!0);Qn(),Ed.current=F,Nr=R,Hn!==null?p=0:(ui=null,Ii=0,p=ti)}if(p!==0){if(p===2&&(R=Io(c),R!==0&&(C=R,p=vm(c,R))),p===1)throw x=ef,Wu(c,0),Ko(c,C),Oa(c,cr()),x;if(p===6)Ko(c,C);else{if(R=c.current.alternate,(C&30)===0&&!E_(R)&&(p=sf(c,C),p===2&&(F=Io(c),F!==0&&(C=F,p=vm(c,F))),p===1))throw x=ef,Wu(c,0),Ko(c,C),Oa(c,cr()),x;switch(c.finishedWork=R,c.finishedLanes=C,p){case 0:case 1:throw Error(r(345));case 2:Xo(c,ka,Ps);break;case 3:if(Ko(c,C),(C&130023424)===C&&(p=Uu+500-cr(),10<p)){if(Bi(c,0)!==0)break;if(R=c.suspendedLanes,(R&C)!==C){da(),c.pingedLanes|=c.suspendedLanes&R;break}c.timeoutHandle=Dc(Xo.bind(null,c,ka,Ps),p);break}Xo(c,ka,Ps);break;case 4:if(Ko(c,C),(C&4194240)===C)break;for(p=c.eventTimes,R=-1;0<C;){var oe=31-Wr(C);F=1<<oe,oe=p[oe],oe>R&&(R=oe),C&=~F}if(C=R,C=cr()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*A_(C/1960))-C,10<C){c.timeoutHandle=Dc(Xo.bind(null,c,ka,Ps),C);break}Xo(c,ka,Ps);break;case 5:Xo(c,ka,Ps);break;default:throw Error(r(329))}}}return Oa(c,cr()),c.callbackNode===x?Oy.bind(null,c):null}function vm(c,p){var x=tf;return c.current.memoizedState.isDehydrated&&(Wu(c,p).flags|=256),c=sf(c,p),c!==2&&(p=ka,ka=x,p!==null&&_m(p)),c}function _m(c){ka===null?ka=c:ka.push.apply(ka,c)}function E_(c){for(var p=c;;){if(p.flags&16384){var x=p.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var C=0;C<x.length;C++){var R=x[C],F=R.getSnapshot;R=R.value;try{if(!$i(F(),R))return!1}catch{return!1}}}if(x=p.child,p.subtreeFlags&16384&&x!==null)x.return=p,p=x;else{if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Ko(c,p){for(p&=~Id,p&=~Md,c.suspendedLanes|=p,c.pingedLanes&=~p,c=c.expirationTimes;0<p;){var x=31-Wr(p),C=1<<x;c[x]=-1,p&=~C}}function qu(c){if((Nr&6)!==0)throw Error(r(327));Yo();var p=Bi(c,0);if((p&1)===0)return Oa(c,cr()),null;var x=sf(c,p);if(c.tag!==0&&x===2){var C=Io(c);C!==0&&(p=C,x=vm(c,C))}if(x===1)throw x=ef,Wu(c,0),Ko(c,p),Oa(c,cr()),x;if(x===6)throw Error(r(345));return c.finishedWork=c.current.alternate,c.finishedLanes=p,Xo(c,ka,Ps),Oa(c,cr()),null}function Dd(c,p){var x=Nr;Nr|=1;try{return c(p)}finally{Nr=x,Nr===0&&(yn=cr()+500,Qt&&S())}}function ol(c){al!==null&&al.tag===0&&(Nr&6)===0&&Yo();var p=Nr;Nr|=1;var x=Ia.transition,C=$r;try{if(Ia.transition=null,$r=1,c)return c()}finally{$r=C,Ia.transition=x,Nr=p,(Nr&6)===0&&S()}}function of(){Zi=qc.current,rn(qc)}function Wu(c,p){c.finishedWork=null,c.finishedLanes=0;var x=c.timeoutHandle;if(x!==-1&&(c.timeoutHandle=-1,ld(x)),Hn!==null)for(x=Hn.return;x!==null;){var C=x;switch(ue(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&ju();break;case 3:ro(),rn(Ar),rn(Kr),Ul();break;case 5:Nh(C);break;case 4:ro();break;case 13:rn(gn);break;case 19:rn(gn);break;case 10:la(C.type._context);break;case 22:case 23:of()}x=x.return}if(ui=c,Hn=c=eu(c.current,null),Ii=Zi=p,ti=0,ef=null,Id=Md=Vu=0,ka=tf=null,An!==null){for(p=0;p<An.length;p++)if(x=An[p],C=x.interleaved,C!==null){x.interleaved=null;var R=C.next,F=x.pending;if(F!==null){var oe=F.next;F.next=R,C.next=oe}x.pending=C}An=null}return c}function Dy(c,p){do{var x=Hn;try{if(Qn(),Ts.current=pd,Bh){for(var C=Jr.memoizedState;C!==null;){var R=C.queue;R!==null&&(R.pending=null),C=C.next}Bh=!1}if(xo=0,qn=bn=Jr=null,Lc=!1,Fh=0,Cd.current=null,x===null||x.return===null){ti=1,ef=p,Hn=null;break}e:{var F=c,oe=x.return,Te=x,Oe=p;if(p=Ii,Te.flags|=32768,Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var Je=Oe,mt=Te,vt=mt.tag;if((mt.mode&1)===0&&(vt===0||vt===11||vt===15)){var dt=mt.alternate;dt?(mt.updateQueue=dt.updateQueue,mt.memoizedState=dt.memoizedState,mt.lanes=dt.lanes):(mt.updateQueue=null,mt.memoizedState=null)}var Dt=fy(oe);if(Dt!==null){Dt.flags&=-257,dy(Dt,oe,Te,F,p),Dt.mode&1&&hy(F,Je,p),p=Dt,Oe=Je;var Wt=p.updateQueue;if(Wt===null){var Jt=new Set;Jt.add(Oe),p.updateQueue=Jt}else Wt.add(Oe);break e}else{if((p&1)===0){hy(F,Je,p),Rd();break e}Oe=Error(r(426))}}else if(ve&&Te.mode&1){var Bn=fy(oe);if(Bn!==null){(Bn.flags&65536)===0&&(Bn.flags|=256),dy(Bn,oe,Te,F,p),Ot(yi(Oe,Te));break e}}F=Oe=yi(Oe,Te),ti!==4&&(ti=2),tf===null?tf=[F]:tf.push(F),F=oe;do{switch(F.tag){case 3:F.flags|=65536,p&=-p,F.lanes|=p;var He=um(F,Oe,p);ca(F,He);break e;case 1:Te=Oe;var je=F.type,Xe=F.stateNode;if((F.flags&128)===0&&(typeof je.getDerivedStateFromError=="function"||Xe!==null&&typeof Xe.componentDidCatch=="function"&&(Mr===null||!Mr.has(Xe)))){F.flags|=65536,p&=-p,F.lanes|=p;var Ct=cy(F,Te,p);ca(F,Ct);break e}}F=F.return}while(F!==null)}sl(x)}catch(er){p=er,Hn===x&&x!==null&&(Hn=x=x.return);continue}break}while(!0)}function Ry(){var c=Ed.current;return Ed.current=pd,c===null?pd:c}function Rd(){(ti===0||ti===3||ti===2)&&(ti=4),ui===null||(Vu&268435455)===0&&(Md&268435455)===0||Ko(ui,Ii)}function sf(c,p){var x=Nr;Nr|=2;var C=Ry();(ui!==c||Ii!==p)&&(Ps=null,Wu(c,p));do try{pa();break}catch(R){Dy(c,R)}while(!0);if(Qn(),Nr=x,Ed.current=C,Hn!==null)throw Error(r(261));return ui=null,Ii=0,ti}function pa(){for(;Hn!==null;)bm(Hn)}function xm(){for(;Hn!==null&&!Ti();)bm(Hn)}function bm(c){var p=Ny(c.alternate,c,Zi);c.memoizedProps=c.pendingProps,p===null?sl(c):Hn=p,Cd.current=null}function sl(c){var p=c;do{var x=p.alternate;if(c=p.return,(p.flags&32768)===0){if(x=S_(x,p,Zi),x!==null){Hn=x;return}}else{if(x=T_(x,p),x!==null){x.flags&=32767,Hn=x;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{ti=6,Hn=null;return}}if(p=p.sibling,p!==null){Hn=p;return}Hn=p=c}while(p!==null);ti===0&&(ti=5)}function Xo(c,p,x){var C=$r,R=Ia.transition;try{Ia.transition=null,$r=1,lf(c,p,x,C)}finally{Ia.transition=R,$r=C}return null}function lf(c,p,x,C){do Yo();while(al!==null);if((Nr&6)!==0)throw Error(r(327));x=c.finishedWork;var R=c.finishedLanes;if(x===null)return null;if(c.finishedWork=null,c.finishedLanes=0,x===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0;var F=x.lanes|x.childLanes;if(ph(c,F),c===ui&&(Hn=ui=null,Ii=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||Wc||(Wc=!0,wm(mi,function(){return Yo(),null})),F=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||F){F=Ia.transition,Ia.transition=null;var oe=$r;$r=1;var Te=Nr;Nr|=4,Cd.current=null,P_(c,x),Ay(x,c),Au(Dh),Gs=!!Vo,Dh=Vo=null,c.current=x,Ey(x),bl(),Nr=Te,$r=oe,Ia.transition=F}else c.current=x;if(Wc&&(Wc=!1,al=c,nf=R),F=c.pendingLanes,F===0&&(Mr=null),$s(x.stateNode),Oa(c,cr()),p!==null)for(C=c.onRecoverableError,x=0;x<p.length;x++)R=p[x],C(R.value,{componentStack:R.stack,digest:R.digest});if(rf)throw rf=!1,c=kd,kd=null,c;return(nf&1)!==0&&c.tag!==0&&Yo(),F=c.pendingLanes,(F&1)!==0?c===Jl?lo++:(lo=0,Jl=c):lo=0,S(),null}function Yo(){if(al!==null){var c=gu(nf),p=Ia.transition,x=$r;try{if(Ia.transition=null,$r=16>c?16:c,al===null)var C=!1;else{if(c=al,al=null,nf=0,(Nr&6)!==0)throw Error(r(331));var R=Nr;for(Nr|=4,Zt=c.current;Zt!==null;){var F=Zt,oe=F.child;if((Zt.flags&16)!==0){var Te=F.deletions;if(Te!==null){for(var Oe=0;Oe<Te.length;Oe++){var Je=Te[Oe];for(Zt=Je;Zt!==null;){var mt=Zt;switch(mt.tag){case 0:case 11:case 15:Yh(8,mt,F)}var vt=mt.child;if(vt!==null)vt.return=mt,Zt=vt;else for(;Zt!==null;){mt=Zt;var dt=mt.sibling,Dt=mt.return;if(wy(mt),mt===Je){Zt=null;break}if(dt!==null){dt.return=Dt,Zt=dt;break}Zt=Dt}}}var Wt=F.alternate;if(Wt!==null){var Jt=Wt.child;if(Jt!==null){Wt.child=null;do{var Bn=Jt.sibling;Jt.sibling=null,Jt=Bn}while(Jt!==null)}}Zt=F}}if((F.subtreeFlags&2064)!==0&&oe!==null)oe.return=F,Zt=oe;else e:for(;Zt!==null;){if(F=Zt,(F.flags&2048)!==0)switch(F.tag){case 0:case 11:case 15:Yh(9,F,F.return)}var He=F.sibling;if(He!==null){He.return=F.return,Zt=He;break e}Zt=F.return}}var je=c.current;for(Zt=je;Zt!==null;){oe=Zt;var Xe=oe.child;if((oe.subtreeFlags&2064)!==0&&Xe!==null)Xe.return=oe,Zt=Xe;else e:for(oe=je;Zt!==null;){if(Te=Zt,(Te.flags&2048)!==0)try{switch(Te.tag){case 0:case 11:case 15:Jh(9,Te)}}catch(er){wn(Te,Te.return,er)}if(Te===oe){Zt=null;break e}var Ct=Te.sibling;if(Ct!==null){Ct.return=Te.return,Zt=Ct;break e}Zt=Te.return}}if(Nr=R,S(),Pi&&typeof Pi.onPostCommitFiberRoot=="function")try{Pi.onPostCommitFiberRoot(gi,c)}catch{}C=!0}return C}finally{$r=x,Ia.transition=p}}return!1}function uf(c,p,x){p=yi(x,p),p=um(c,p,1),c=_o(c,p,1),p=da(),c!==null&&(qs(c,1,p),Oa(c,p))}function wn(c,p,x){if(c.tag===3)uf(c,c,x);else for(;p!==null;){if(p.tag===3){uf(p,c,x);break}else if(p.tag===1){var C=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(Mr===null||!Mr.has(C))){c=yi(x,c),c=cy(p,c,1),p=_o(p,c,1),c=da(),p!==null&&(qs(p,1,c),Oa(p,c));break}}p=p.return}}function C_(c,p,x){var C=c.pingCache;C!==null&&C.delete(p),p=da(),c.pingedLanes|=c.suspendedLanes&x,ui===c&&(Ii&x)===x&&(ti===4||ti===3&&(Ii&130023424)===Ii&&500>cr()-Uu?Wu(c,0):Id|=x),Oa(c,p)}function jy(c,p){p===0&&((c.mode&1)===0?p=1:(p=Ni,Ni<<=1,(Ni&130023424)===0&&(Ni=4194304)));var x=da();c=qi(c,p),c!==null&&(qs(c,p,x),Oa(c,x))}function zy(c){var p=c.memoizedState,x=0;p!==null&&(x=p.retryLane),jy(c,x)}function Ly(c,p){var x=0;switch(c.tag){case 13:var C=c.stateNode,R=c.memoizedState;R!==null&&(x=R.retryLane);break;case 19:C=c.stateNode;break;default:throw Error(r(314))}C!==null&&C.delete(p),jy(c,x)}var Ny;Ny=function(c,p,x){if(c!==null)if(c.memoizedProps!==p.pendingProps||Ar.current)fa=!0;else{if((c.lanes&x)===0&&(p.flags&128)===0)return fa=!1,pm(c,p,x);fa=(c.flags&131072)!==0}else fa=!1,ve&&(p.flags&1048576)!==0&&H(p,y,p.index);switch(p.lanes=0,p.tag){case 2:var C=p.type;Kh(c,p),c=p.pendingProps;var R=qo(p,Kr.current);Un(p,x),R=Wo(null,p,C,c,R,x);var F=io();return p.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,oi(C)?(F=!0,sa(p)):F=!1,p.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,ws(p),R.updater=yd,p.stateNode=R,R._reactInternals=p,Bu(p,C,c,x),p=hm(null,p,C,!0,F,x)):(p.tag=0,ve&&F&&ae(p),Wn(null,p,R,x),p=p.child),p;case 16:C=p.elementType;e:{switch(Kh(c,p),c=p.pendingProps,R=C._init,C=R(C._payload),p.type=C,R=p.tag=M_(C),c=bo(C,c),R){case 0:p=cm(null,p,C,c,x);break e;case 1:p=_y(null,p,C,c,x);break e;case 11:p=$c(null,p,C,c,x);break e;case 14:p=my(null,p,C,bo(C.type,c),x);break e}throw Error(r(306,C,""))}return p;case 0:return C=p.type,R=p.pendingProps,R=p.elementType===C?R:bo(C,R),cm(c,p,C,R,x);case 1:return C=p.type,R=p.pendingProps,R=p.elementType===C?R:bo(C,R),_y(c,p,C,R,x);case 3:e:{if(bd(p),c===null)throw Error(r(387));C=p.pendingProps,F=p.memoizedState,R=F.element,ua(c,p),to(p,C,null,x);var oe=p.memoizedState;if(C=oe.element,F.isDehydrated)if(F={element:C,isDehydrated:!1,cache:oe.cache,pendingSuspenseBoundaries:oe.pendingSuspenseBoundaries,transitions:oe.transitions},p.updateQueue.baseState=F,p.memoizedState=F,p.flags&256){R=yi(Error(r(423)),p),p=xy(c,p,C,x,R);break e}else if(C!==R){R=yi(Error(r(424)),p),p=xy(c,p,C,x,R);break e}else for(pe=Xa(p.stateNode.containerInfo.firstChild),fe=p,ve=!0,we=null,x=ir(p,null,C,x),p.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Tt(),C===R){p=oo(c,p,x);break e}Wn(c,p,C,x)}p=p.child}return p;case 5:return Lh(p),c===null&&ze(p),C=p.type,R=p.pendingProps,F=c!==null?c.memoizedProps:null,oe=R.children,Rh(C,R)?oe=null:F!==null&&Rh(C,F)&&(p.flags|=32),vy(c,p),Wn(c,p,oe,x),p.child;case 6:return c===null&&ze(p),null;case 13:return En(c,p,x);case 4:return Ss(p,p.stateNode.containerInfo),C=p.pendingProps,c===null?p.child=Mt(p,null,C,x):Wn(c,p,C,x),p.child;case 11:return C=p.type,R=p.pendingProps,R=p.elementType===C?R:bo(C,R),$c(c,p,C,R,x);case 7:return Wn(c,p,p.pendingProps,x),p.child;case 8:return Wn(c,p,p.pendingProps.children,x),p.child;case 12:return Wn(c,p,p.pendingProps.children,x),p.child;case 10:e:{if(C=p.type._context,R=p.pendingProps,F=p.memoizedProps,oe=R.value,on(Gr,C._currentValue),C._currentValue=oe,F!==null)if($i(F.value,oe)){if(F.children===R.children&&!Ar.current){p=oo(c,p,x);break e}}else for(F=p.child,F!==null&&(F.return=p);F!==null;){var Te=F.dependencies;if(Te!==null){oe=F.child;for(var Oe=Te.firstContext;Oe!==null;){if(Oe.context===C){if(F.tag===1){Oe=Ea(-1,x&-x),Oe.tag=2;var Je=F.updateQueue;if(Je!==null){Je=Je.shared;var mt=Je.pending;mt===null?Oe.next=Oe:(Oe.next=mt.next,mt.next=Oe),Je.pending=Oe}}F.lanes|=x,Oe=F.alternate,Oe!==null&&(Oe.lanes|=x),Yr(F.return,x,p),Te.lanes|=x;break}Oe=Oe.next}}else if(F.tag===10)oe=F.type===p.type?null:F.child;else if(F.tag===18){if(oe=F.return,oe===null)throw Error(r(341));oe.lanes|=x,Te=oe.alternate,Te!==null&&(Te.lanes|=x),Yr(oe,x,p),oe=F.sibling}else oe=F.child;if(oe!==null)oe.return=F;else for(oe=F;oe!==null;){if(oe===p){oe=null;break}if(F=oe.sibling,F!==null){F.return=oe.return,oe=F;break}oe=oe.return}F=oe}Wn(c,p,R.children,x),p=p.child}return p;case 9:return R=p.type,C=p.pendingProps.children,Un(p,x),R=sn(R),C=C(R),p.flags|=1,Wn(c,p,C,x),p.child;case 14:return C=p.type,R=bo(C,p.pendingProps),R=bo(C.type,R),my(c,p,C,R,x);case 15:return gy(c,p,p.type,p.pendingProps,x);case 17:return C=p.type,R=p.pendingProps,R=p.elementType===C?R:bo(C,R),Kh(c,p),p.tag=1,oi(C)?(c=!0,sa(p)):c=!1,Un(p,x),lm(p,C,R),Bu(p,C,R,x),hm(null,p,C,!0,c,x);case 19:return dm(c,p,x);case 22:return yy(c,p,x)}throw Error(r(156,p.tag))};function wm(c,p){return Vn(c,p)}function By(c,p,x,C){this.tag=c,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Da(c,p,x,C){return new By(c,p,x,C)}function cf(c){return c=c.prototype,!(!c||!c.isReactComponent)}function M_(c){if(typeof c=="function")return cf(c)?1:0;if(c!=null){if(c=c.$$typeof,c===Ue)return 11;if(c===Ye)return 14}return 2}function eu(c,p){var x=c.alternate;return x===null?(x=Da(c.tag,p,c.key,c.mode),x.elementType=c.elementType,x.type=c.type,x.stateNode=c.stateNode,x.alternate=c,c.alternate=x):(x.pendingProps=p,x.type=c.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=c.flags&14680064,x.childLanes=c.childLanes,x.lanes=c.lanes,x.child=c.child,x.memoizedProps=c.memoizedProps,x.memoizedState=c.memoizedState,x.updateQueue=c.updateQueue,p=c.dependencies,x.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},x.sibling=c.sibling,x.index=c.index,x.ref=c.ref,x}function hf(c,p,x,C,R,F){var oe=2;if(C=c,typeof c=="function")cf(c)&&(oe=1);else if(typeof c=="string")oe=5;else e:switch(c){case le:return tu(x.children,R,F,p);case de:oe=8,R|=8;break;case Pe:return c=Da(12,x,p,R|2),c.elementType=Pe,c.lanes=F,c;case Ve:return c=Da(13,x,p,R),c.elementType=Ve,c.lanes=F,c;case Ze:return c=Da(19,x,p,R),c.elementType=Ze,c.lanes=F,c;case et:return ru(x,R,F,p);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case Fe:oe=10;break e;case be:oe=9;break e;case Ue:oe=11;break e;case Ye:oe=14;break e;case it:oe=16,C=null;break e}throw Error(r(130,c==null?c:typeof c,""))}return p=Da(oe,x,p,R),p.elementType=c,p.type=C,p.lanes=F,p}function tu(c,p,x,C){return c=Da(7,c,C,p),c.lanes=x,c}function ru(c,p,x,C){return c=Da(22,c,C,p),c.elementType=et,c.lanes=x,c.stateNode={isHidden:!1},c}function wo(c,p,x){return c=Da(6,c,null,p),c.lanes=x,c}function As(c,p,x){return p=Da(4,c.children!==null?c.children:[],c.key,p),p.lanes=x,p.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},p}function Fy(c,p,x,C,R){this.tag=p,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Or(0),this.expirationTimes=Or(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Or(0),this.identifierPrefix=C,this.onRecoverableError=R,this.mutableSourceEagerHydrationData=null}function ff(c,p,x,C,R,F,oe,Te,Oe){return c=new Fy(c,p,x,Te,Oe),p===1?(p=1,F===!0&&(p|=8)):p=0,F=Da(3,null,null,p),c.current=F,F.stateNode=c,F.memoizedState={element:C,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},ws(F),c}function I_(c,p,x){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:C==null?null:""+C,children:c,containerInfo:p,implementation:x}}function $y(c){if(!c)return bs;c=c._reactInternals;e:{if(yr(c)!==c||c.tag!==1)throw Error(r(170));var p=c;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(oi(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(r(171))}if(c.tag===1){var x=c.type;if(oi(x))return Fl(c,x,p)}return p}function df(c,p,x,C,R,F,oe,Te,Oe){return c=ff(x,C,!0,c,R,F,oe,Te,Oe),c.context=$y(null),x=c.current,C=da(),R=Ql(x),F=Ea(C,R),F.callback=p??null,_o(x,F,R),c.current.lanes=R,qs(c,R,C),Oa(c,C),c}function Gc(c,p,x,C){var R=p.current,F=da(),oe=Ql(R);return x=$y(x),p.context===null?p.context=x:p.pendingContext=x,p=Ea(F,oe),p.payload={element:c},C=C===void 0?null:C,C!==null&&(p.callback=C),c=_o(R,p,oe),c!==null&&(Zo(c,R,oe,F),Ci(c,R,oe)),oe}function jd(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function zd(c,p){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var x=c.retryLane;c.retryLane=x!==0&&x<p?x:p}}function pf(c,p){zd(c,p),(c=c.alternate)&&zd(c,p)}function Hc(){return null}var Sm=typeof reportError=="function"?reportError:function(c){console.error(c)};function Ld(c){this._internalRoot=c}Zc.prototype.render=Ld.prototype.render=function(c){var p=this._internalRoot;if(p===null)throw Error(r(409));Gc(c,p,null,null)},Zc.prototype.unmount=Ld.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var p=c.containerInfo;ol(function(){Gc(null,c,null,null)}),p[Ya]=null}};function Zc(c){this._internalRoot=c}Zc.prototype.unstable_scheduleHydration=function(c){if(c){var p=mh();c={blockedOn:null,target:c,priority:p};for(var x=0;x<Ga.length&&p!==0&&p<Ga[x].priority;x++);Ga.splice(x,0,c),x===0&&yh(c)}};function Nd(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function Gu(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function Tm(){}function k_(c,p,x,C,R){if(R){if(typeof C=="function"){var F=C;C=function(){var Je=jd(oe);F.call(Je)}}var oe=df(p,C,c,0,null,!1,!1,"",Tm);return c._reactRootContainer=oe,c[Ya]=oe.current,Fo(c.nodeType===8?c.parentNode:c),ol(),oe}for(;R=c.lastChild;)c.removeChild(R);if(typeof C=="function"){var Te=C;C=function(){var Je=jd(Oe);Te.call(Je)}}var Oe=ff(c,0,!1,null,null,!1,!1,"",Tm);return c._reactRootContainer=Oe,c[Ya]=Oe.current,Fo(c.nodeType===8?c.parentNode:c),ol(function(){Gc(p,Oe,x,C)}),Oe}function Bd(c,p,x,C,R){var F=x._reactRootContainer;if(F){var oe=F;if(typeof R=="function"){var Te=R;R=function(){var Oe=jd(oe);Te.call(Oe)}}Gc(p,oe,c,R)}else oe=k_(x,p,c,R,C);return jd(oe)}wl=function(c){switch(c.tag){case 3:var p=c.stateNode;if(p.current.memoizedState.isDehydrated){var x=Us(p.pendingLanes);x!==0&&(us(p,x|1),Oa(p,cr()),(Nr&6)===0&&(yn=cr()+500,S()))}break;case 13:ol(function(){var C=qi(c,1);if(C!==null){var R=da();Zo(C,c,1,R)}}),pf(c,1)}},Sl=function(c){if(c.tag===13){var p=qi(c,134217728);if(p!==null){var x=da();Zo(p,c,134217728,x)}pf(c,134217728)}},Ws=function(c){if(c.tag===13){var p=Ql(c),x=qi(c,p);if(x!==null){var C=da();Zo(x,c,p,C)}pf(c,p)}},mh=function(){return $r},Hf=function(c,p){var x=$r;try{return $r=c,p()}finally{$r=x}},qa=function(c,p,x){switch(p){case"input":if(Er(c,x),p=x.name,x.type==="radio"&&p!=null){for(x=c;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<x.length;p++){var C=x[p];if(C!==c&&C.form===c.form){var R=Du(C);if(!R)throw Error(r(90));at(C),Er(C,R)}}}break;case"textarea":ta(c,x);break;case"select":p=x.value,p!=null&&Ln(c,!!x.multiple,p,!1)}},ce=Dd,ye=ol;var Vy={usingClientEntryPoint:!1,Events:[Ou,Ja,Du,te,ee,Dd]},mf={findFiberByHostInstance:Uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O_={bundleType:mf.bundleType,version:mf.version,rendererPackageName:mf.rendererPackageName,rendererConfig:mf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ie.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=Fr(c),c===null?null:c.stateNode},findFiberByHostInstance:mf.findFiberByHostInstance||Hc,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fd.isDisabled&&Fd.supportsFiber)try{gi=Fd.inject(O_),Pi=Fd}catch{}}return To.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vy,To.createPortal=function(c,p){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nd(p))throw Error(r(200));return I_(c,p,null,x)},To.createRoot=function(c,p){if(!Nd(c))throw Error(r(299));var x=!1,C="",R=Sm;return p!=null&&(p.unstable_strictMode===!0&&(x=!0),p.identifierPrefix!==void 0&&(C=p.identifierPrefix),p.onRecoverableError!==void 0&&(R=p.onRecoverableError)),p=ff(c,1,!1,null,null,x,!1,C,R),c[Ya]=p.current,Fo(c.nodeType===8?c.parentNode:c),new Ld(p)},To.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var p=c._reactInternals;if(p===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=Fr(p),c=c===null?null:c.stateNode,c},To.flushSync=function(c){return ol(c)},To.hydrate=function(c,p,x){if(!Gu(p))throw Error(r(200));return Bd(null,c,p,!0,x)},To.hydrateRoot=function(c,p,x){if(!Nd(c))throw Error(r(405));var C=x!=null&&x.hydratedSources||null,R=!1,F="",oe=Sm;if(x!=null&&(x.unstable_strictMode===!0&&(R=!0),x.identifierPrefix!==void 0&&(F=x.identifierPrefix),x.onRecoverableError!==void 0&&(oe=x.onRecoverableError)),p=df(p,null,c,1,x??null,R,!1,F,oe),c[Ya]=p.current,Fo(c),C)for(c=0;c<C.length;c++)x=C[c],R=x._getVersion,R=R(x._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[x,R]:p.mutableSourceEagerHydrationData.push(x,R);return new Zc(p)},To.render=function(c,p,x){if(!Gu(p))throw Error(r(200));return Bd(null,c,p,!1,x)},To.unmountComponentAtNode=function(c){if(!Gu(c))throw Error(r(40));return c._reactRootContainer?(ol(function(){Bd(null,null,c,!1,function(){c._reactRootContainer=null,c[Ya]=null})}),!0):!1},To.unstable_batchedUpdates=Dd,To.unstable_renderSubtreeIntoContainer=function(c,p,x,C){if(!Gu(x))throw Error(r(200));if(c==null||c._reactInternals===void 0)throw Error(r(38));return Bd(c,p,x,!1,C)},To.version="18.3.1-next-f1338f8080-20240426",To}var gA;function k4(){if(gA)return H_.exports;gA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),H_.exports=fz(),H_.exports}var yA;function dz(){if(yA)return Xy;yA=1;var e=k4();return Xy.createRoot=e.createRoot,Xy.hydrateRoot=e.hydrateRoot,Xy}var pz=dz();const mz=pn(pz);k4();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eg(){return eg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eg.apply(this,arguments)}var Qc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Qc||(Qc={}));const vA="popstate";function gz(e){e===void 0&&(e={});function t(s,d){let{pathname:h="/",search:l="",hash:_=""}=Bf(s.location.hash.substr(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),p2("",{pathname:h,search:l,hash:_},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function r(s,d){let h=s.document.querySelector("base"),l="";if(h&&h.getAttribute("href")){let _=s.location.href,w=_.indexOf("#");l=w===-1?_:_.slice(0,w)}return l+"#"+(typeof d=="string"?d:wv(d))}function n(s,d){tT(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(d)+")")}return vz(t,r,n,e)}function ii(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function tT(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function yz(){return Math.random().toString(36).substr(2,8)}function _A(e,t){return{usr:e.state,key:e.key,idx:t}}function p2(e,t,r,n){return r===void 0&&(r=null),eg({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Bf(t):t,{state:r,key:t&&t.key||n||yz()})}function wv(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Bf(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function vz(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:d=!1}=n,h=s.history,l=Qc.Pop,_=null,w=E();w==null&&(w=0,h.replaceState(eg({},h.state,{idx:w}),""));function E(){return(h.state||{idx:null}).idx}function A(){l=Qc.Pop;let L=E(),K=L==null?null:L-w;w=L,_&&_({action:l,location:B.location,delta:K})}function M(L,K){l=Qc.Push;let Q=p2(B.location,L,K);r&&r(Q,L),w=E()+1;let J=_A(Q,w),ie=B.createHref(Q);try{h.pushState(J,"",ie)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;s.location.assign(ie)}d&&_&&_({action:l,location:B.location,delta:1})}function N(L,K){l=Qc.Replace;let Q=p2(B.location,L,K);r&&r(Q,L),w=E();let J=_A(Q,w),ie=B.createHref(Q);h.replaceState(J,"",ie),d&&_&&_({action:l,location:B.location,delta:0})}function U(L){let K=s.location.origin!=="null"?s.location.origin:s.location.href,Q=typeof L=="string"?L:wv(L);return Q=Q.replace(/ $/,"%20"),ii(K,"No window.location.(origin|href) available to create URL for href: "+Q),new URL(Q,K)}let B={get action(){return l},get location(){return e(s,h)},listen(L){if(_)throw new Error("A history only accepts one active listener");return s.addEventListener(vA,A),_=L,()=>{s.removeEventListener(vA,A),_=null}},createHref(L){return t(s,L)},createURL:U,encodeLocation(L){let K=U(L);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:M,replace:N,go(L){return h.go(L)}};return B}var xA;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(xA||(xA={}));function _z(e,t,r){return r===void 0&&(r="/"),xz(e,t,r)}function xz(e,t,r,n){let s=typeof t=="string"?Bf(t):t,d=op(s.pathname||"/",r);if(d==null)return null;let h=O4(e);bz(h);let l=null;for(let _=0;l==null&&_<h.length;++_){let w=Oz(d);l=Iz(h[_],w)}return l}function O4(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(d,h,l)=>{let _={relativePath:l===void 0?d.path||"":l,caseSensitive:d.caseSensitive===!0,childrenIndex:h,route:d};_.relativePath.startsWith("/")&&(ii(_.relativePath.startsWith(n),'Absolute route path "'+_.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),_.relativePath=_.relativePath.slice(n.length));let w=th([n,_.relativePath]),E=r.concat(_);d.children&&d.children.length>0&&(ii(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),O4(d.children,t,E,w)),!(d.path==null&&!d.index)&&t.push({path:w,score:Cz(w,d.index),routesMeta:E})};return e.forEach((d,h)=>{var l;if(d.path===""||!((l=d.path)!=null&&l.includes("?")))s(d,h);else for(let _ of D4(d.path))s(d,h,_)}),t}function D4(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),d=r.replace(/\?$/,"");if(n.length===0)return s?[d,""]:[d];let h=D4(n.join("/")),l=[];return l.push(...h.map(_=>_===""?d:[d,_].join("/"))),s&&l.push(...h),l.map(_=>e.startsWith("/")&&_===""?"/":_)}function bz(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Mz(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const wz=/^:[\w-]+$/,Sz=3,Tz=2,Pz=1,Az=10,Ez=-2,bA=e=>e==="*";function Cz(e,t){let r=e.split("/"),n=r.length;return r.some(bA)&&(n+=Ez),t&&(n+=Tz),r.filter(s=>!bA(s)).reduce((s,d)=>s+(wz.test(d)?Sz:d===""?Pz:Az),n)}function Mz(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function Iz(e,t,r){let{routesMeta:n}=e,s={},d="/",h=[];for(let l=0;l<n.length;++l){let _=n[l],w=l===n.length-1,E=d==="/"?t:t.slice(d.length)||"/",A=m2({path:_.relativePath,caseSensitive:_.caseSensitive,end:w},E),M=_.route;if(!A)return null;Object.assign(s,A.params),h.push({params:s,pathname:th([d,A.pathname]),pathnameBase:zz(th([d,A.pathnameBase])),route:M}),A.pathnameBase!=="/"&&(d=th([d,A.pathnameBase]))}return h}function m2(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=kz(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let d=s[0],h=d.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((w,E,A)=>{let{paramName:M,isOptional:N}=E;if(M==="*"){let B=l[A]||"";h=d.slice(0,d.length-B.length).replace(/(.)\/+$/,"$1")}const U=l[A];return N&&!U?w[M]=void 0:w[M]=(U||"").replace(/%2F/g,"/"),w},{}),pathname:d,pathnameBase:h,pattern:e}}function kz(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),tT(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,l,_)=>(n.push({paramName:l,isOptional:_!=null}),_?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function Oz(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return tT(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function op(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Dz(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Bf(e):e;return{pathname:r?r.startsWith("/")?r:Rz(r,t):t,search:Lz(n),hash:Nz(s)}}function Rz(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function X_(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jz(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function R4(e,t){let r=jz(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function j4(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Bf(e):(s=eg({},e),ii(!s.pathname||!s.pathname.includes("?"),X_("?","pathname","search",s)),ii(!s.pathname||!s.pathname.includes("#"),X_("#","pathname","hash",s)),ii(!s.search||!s.search.includes("#"),X_("#","search","hash",s)));let d=e===""||s.pathname==="",h=d?"/":s.pathname,l;if(h==null)l=r;else{let A=t.length-1;if(!n&&h.startsWith("..")){let M=h.split("/");for(;M[0]==="..";)M.shift(),A-=1;s.pathname=M.join("/")}l=A>=0?t[A]:"/"}let _=Dz(s,l),w=h&&h!=="/"&&h.endsWith("/"),E=(d||h===".")&&r.endsWith("/");return!_.pathname.endsWith("/")&&(w||E)&&(_.pathname+="/"),_}const th=e=>e.join("/").replace(/\/\/+/g,"/"),zz=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Lz=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Nz=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Bz(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const z4=["post","put","patch","delete"];new Set(z4);const Fz=["get",...z4];new Set(Fz);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tg(){return tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tg.apply(this,arguments)}const k0=Se.createContext(null),L4=Se.createContext(null),oh=Se.createContext(null),O0=Se.createContext(null),Ff=Se.createContext({outlet:null,matches:[],isDataRoute:!1}),N4=Se.createContext(null);function $z(e,t){let{relative:r}=t===void 0?{}:t;Ug()||ii(!1);let{basename:n,navigator:s}=Se.useContext(oh),{hash:d,pathname:h,search:l}=D0(e,{relative:r}),_=h;return n!=="/"&&(_=h==="/"?n:th([n,h])),s.createHref({pathname:_,search:l,hash:d})}function Ug(){return Se.useContext(O0)!=null}function $f(){return Ug()||ii(!1),Se.useContext(O0).location}function B4(e){Se.useContext(oh).static||Se.useLayoutEffect(e)}function Vz(){let{isDataRoute:e}=Se.useContext(Ff);return e?tL():Uz()}function Uz(){Ug()||ii(!1);let e=Se.useContext(k0),{basename:t,future:r,navigator:n}=Se.useContext(oh),{matches:s}=Se.useContext(Ff),{pathname:d}=$f(),h=JSON.stringify(R4(s,r.v7_relativeSplatPath)),l=Se.useRef(!1);return B4(()=>{l.current=!0}),Se.useCallback(function(w,E){if(E===void 0&&(E={}),!l.current)return;if(typeof w=="number"){n.go(w);return}let A=j4(w,JSON.parse(h),d,E.relative==="path");e==null&&t!=="/"&&(A.pathname=A.pathname==="/"?t:th([t,A.pathname])),(E.replace?n.replace:n.push)(A,E.state,E)},[t,n,h,d,e])}function D0(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=Se.useContext(oh),{matches:s}=Se.useContext(Ff),{pathname:d}=$f(),h=JSON.stringify(R4(s,n.v7_relativeSplatPath));return Se.useMemo(()=>j4(e,JSON.parse(h),d,r==="path"),[e,h,d,r])}function qz(e,t){return Wz(e,t)}function Wz(e,t,r,n){Ug()||ii(!1);let{navigator:s}=Se.useContext(oh),{matches:d}=Se.useContext(Ff),h=d[d.length-1],l=h?h.params:{};h&&h.pathname;let _=h?h.pathnameBase:"/";h&&h.route;let w=$f(),E;if(t){var A;let L=typeof t=="string"?Bf(t):t;_==="/"||(A=L.pathname)!=null&&A.startsWith(_)||ii(!1),E=L}else E=w;let M=E.pathname||"/",N=M;if(_!=="/"){let L=_.replace(/^\//,"").split("/");N="/"+M.replace(/^\//,"").split("/").slice(L.length).join("/")}let U=_z(e,{pathname:N}),B=Xz(U&&U.map(L=>Object.assign({},L,{params:Object.assign({},l,L.params),pathname:th([_,s.encodeLocation?s.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?_:th([_,s.encodeLocation?s.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),d,r,n);return t&&B?Se.createElement(O0.Provider,{value:{location:tg({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:Qc.Pop}},B):B}function Gz(){let e=eL(),t=Bz(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Se.createElement(Se.Fragment,null,Se.createElement("h2",null,"Unexpected Application Error!"),Se.createElement("h3",{style:{fontStyle:"italic"}},t),r?Se.createElement("pre",{style:s},r):null,null)}const Hz=Se.createElement(Gz,null);class Zz extends Se.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?Se.createElement(Ff.Provider,{value:this.props.routeContext},Se.createElement(N4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Kz(e){let{routeContext:t,match:r,children:n}=e,s=Se.useContext(k0);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),Se.createElement(Ff.Provider,{value:t},n)}function Xz(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var d;if(!r)return null;if(r.errors)e=r.matches;else if((d=n)!=null&&d.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let h=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let E=h.findIndex(A=>A.route.id&&(l==null?void 0:l[A.route.id])!==void 0);E>=0||ii(!1),h=h.slice(0,Math.min(h.length,E+1))}let _=!1,w=-1;if(r&&n&&n.v7_partialHydration)for(let E=0;E<h.length;E++){let A=h[E];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(w=E),A.route.id){let{loaderData:M,errors:N}=r,U=A.route.loader&&M[A.route.id]===void 0&&(!N||N[A.route.id]===void 0);if(A.route.lazy||U){_=!0,w>=0?h=h.slice(0,w+1):h=[h[0]];break}}}return h.reduceRight((E,A,M)=>{let N,U=!1,B=null,L=null;r&&(N=l&&A.route.id?l[A.route.id]:void 0,B=A.route.errorElement||Hz,_&&(w<0&&M===0?(rL("route-fallback"),U=!0,L=null):w===M&&(U=!0,L=A.route.hydrateFallbackElement||null)));let K=t.concat(h.slice(0,M+1)),Q=()=>{let J;return N?J=B:U?J=L:A.route.Component?J=Se.createElement(A.route.Component,null):A.route.element?J=A.route.element:J=E,Se.createElement(Kz,{match:A,routeContext:{outlet:E,matches:K,isDataRoute:r!=null},children:J})};return r&&(A.route.ErrorBoundary||A.route.errorElement||M===0)?Se.createElement(Zz,{location:r.location,revalidation:r.revalidation,component:B,error:N,children:Q(),routeContext:{outlet:null,matches:K,isDataRoute:!0}}):Q()},null)}var F4=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(F4||{}),$4=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})($4||{});function Yz(e){let t=Se.useContext(k0);return t||ii(!1),t}function Jz(e){let t=Se.useContext(L4);return t||ii(!1),t}function Qz(e){let t=Se.useContext(Ff);return t||ii(!1),t}function V4(e){let t=Qz(),r=t.matches[t.matches.length-1];return r.route.id||ii(!1),r.route.id}function eL(){var e;let t=Se.useContext(N4),r=Jz(),n=V4();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function tL(){let{router:e}=Yz(F4.UseNavigateStable),t=V4($4.UseNavigateStable),r=Se.useRef(!1);return B4(()=>{r.current=!0}),Se.useCallback(function(s,d){d===void 0&&(d={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,tg({fromRouteId:t},d)))},[e,t])}const wA={};function rL(e,t,r){wA[e]||(wA[e]=!0)}function nL(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ds(e){ii(!1)}function iL(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Qc.Pop,navigator:d,static:h=!1,future:l}=e;Ug()&&ii(!1);let _=t.replace(/^\/*/,"/"),w=Se.useMemo(()=>({basename:_,navigator:d,static:h,future:tg({v7_relativeSplatPath:!1},l)}),[_,l,d,h]);typeof n=="string"&&(n=Bf(n));let{pathname:E="/",search:A="",hash:M="",state:N=null,key:U="default"}=n,B=Se.useMemo(()=>{let L=op(E,_);return L==null?null:{location:{pathname:L,search:A,hash:M,state:N,key:U},navigationType:s}},[_,E,A,M,N,U,s]);return B==null?null:Se.createElement(oh.Provider,{value:w},Se.createElement(O0.Provider,{children:r,value:B}))}function aL(e){let{children:t,location:r}=e;return qz(g2(t),r)}new Promise(()=>{});function g2(e,t){t===void 0&&(t=[]);let r=[];return Se.Children.forEach(e,(n,s)=>{if(!Se.isValidElement(n))return;let d=[...t,s];if(n.type===Se.Fragment){r.push.apply(r,g2(n.props.children,d));return}n.type!==Ds&&ii(!1),!n.props.index||!n.props.children||ii(!1);let h={id:n.props.id||d.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(h.children=g2(n.props.children,d)),r.push(h)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sv.apply(this,arguments)}function U4(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,d;for(d=0;d<n.length;d++)s=n[d],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function oL(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function sL(e,t){return e.button===0&&(!t||t==="_self")&&!oL(e)}const lL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],uL=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],cL="6";try{window.__reactRouterVersion=cL}catch{}const hL=Se.createContext({isTransitioning:!1}),fL="startTransition",SA=uz[fL];function dL(e){let{basename:t,children:r,future:n,window:s}=e,d=Se.useRef();d.current==null&&(d.current=gz({window:s,v5Compat:!0}));let h=d.current,[l,_]=Se.useState({action:h.action,location:h.location}),{v7_startTransition:w}=n||{},E=Se.useCallback(A=>{w&&SA?SA(()=>_(A)):_(A)},[_,w]);return Se.useLayoutEffect(()=>h.listen(E),[h,E]),Se.useEffect(()=>nL(n),[n]),Se.createElement(iL,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:h,future:n})}const pL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rT=Se.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:d,replace:h,state:l,target:_,to:w,preventScrollReset:E,viewTransition:A}=t,M=U4(t,lL),{basename:N}=Se.useContext(oh),U,B=!1;if(typeof w=="string"&&mL.test(w)&&(U=w,pL))try{let J=new URL(window.location.href),ie=w.startsWith("//")?new URL(J.protocol+w):new URL(w),Z=op(ie.pathname,N);ie.origin===J.origin&&Z!=null?w=Z+ie.search+ie.hash:B=!0}catch{}let L=$z(w,{relative:s}),K=yL(w,{replace:h,state:l,target:_,preventScrollReset:E,relative:s,viewTransition:A});function Q(J){n&&n(J),J.defaultPrevented||K(J)}return Se.createElement("a",Sv({},M,{href:U||L,onClick:B||d?n:Q,ref:r,target:_}))}),Ku=Se.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:d="",end:h=!1,style:l,to:_,viewTransition:w,children:E}=t,A=U4(t,uL),M=D0(_,{relative:A.relative}),N=$f(),U=Se.useContext(L4),{navigator:B,basename:L}=Se.useContext(oh),K=U!=null&&vL(M)&&w===!0,Q=B.encodeLocation?B.encodeLocation(M).pathname:M.pathname,J=N.pathname,ie=U&&U.navigation&&U.navigation.location?U.navigation.location.pathname:null;s||(J=J.toLowerCase(),ie=ie?ie.toLowerCase():null,Q=Q.toLowerCase()),ie&&L&&(ie=op(ie,L)||ie);const Z=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let X=J===Q||!h&&J.startsWith(Q)&&J.charAt(Z)==="/",le=ie!=null&&(ie===Q||!h&&ie.startsWith(Q)&&ie.charAt(Q.length)==="/"),de={isActive:X,isPending:le,isTransitioning:K},Pe=X?n:void 0,Fe;typeof d=="function"?Fe=d(de):Fe=[d,X?"active":null,le?"pending":null,K?"transitioning":null].filter(Boolean).join(" ");let be=typeof l=="function"?l(de):l;return Se.createElement(rT,Sv({},A,{"aria-current":Pe,className:Fe,ref:r,style:be,to:_,viewTransition:w}),typeof E=="function"?E(de):E)});var y2;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(y2||(y2={}));var TA;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(TA||(TA={}));function gL(e){let t=Se.useContext(k0);return t||ii(!1),t}function yL(e,t){let{target:r,replace:n,state:s,preventScrollReset:d,relative:h,viewTransition:l}=t===void 0?{}:t,_=Vz(),w=$f(),E=D0(e,{relative:h});return Se.useCallback(A=>{if(sL(A,r)){A.preventDefault();let M=n!==void 0?n:wv(w)===wv(E);_(e,{replace:M,state:s,preventScrollReset:d,relative:h,viewTransition:l})}},[w,_,E,n,s,r,e,d,h,l])}function vL(e,t){t===void 0&&(t={});let r=Se.useContext(hL);r==null&&ii(!1);let{basename:n}=gL(y2.useViewTransitionState),s=D0(e,{relative:t.relative});if(!r.isTransitioning)return!1;let d=op(r.currentLocation.pathname,n)||r.currentLocation.pathname,h=op(r.nextLocation.pathname,n)||r.nextLocation.pathname;return m2(s.pathname,h)!=null||m2(s.pathname,d)!=null}function _L(){const[e,t]=Se.useState(()=>localStorage.getItem("theme")==="dark");return Se.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),q.jsxs("label",{className:"theme-switch",title:"Toggle theme",children:[q.jsx("input",{type:"checkbox",className:"theme-switch__checkbox",checked:e,onChange:()=>t(!e)}),q.jsxs("div",{className:"theme-switch__container",children:[q.jsx("div",{className:"theme-switch__clouds"}),q.jsx("div",{className:"theme-switch__stars-container",children:q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 144 55",fill:"none",children:q.jsx("path",{fillRule:"evenodd","clip-rule":"evenodd",d:"M135.831 3.00688C135.055 3.85027 134.111 4.29946 133 4.35447C134.111 4.40947 135.055 4.85867 135.831 5.71123C136.607 6.55462 136.996 7.56303 136.996 8.72727C136.996 7.95722 137.172 7.25134 137.525 6.59129C137.886 5.93124 138.372 5.39954 138.98 5.00535C139.598 4.60199 140.268 4.39114 141 4.35447C139.88 4.2903 138.936 3.85027 138.16 3.00688C137.384 2.16348 136.996 1.16425 136.996 0C136.996 1.16425 136.607 2.16348 135.831 3.00688ZM31 23.3545C32.1114 23.2995 33.0551 22.8503 33.8313 22.0069C34.6075 21.1635 34.9956 20.1642 34.9956 19C34.9956 20.1642 35.3837 21.1635 36.1599 22.0069C36.9361 22.8503 37.8798 23.2903 39 23.3545C38.2679 23.3911 37.5976 23.602 36.9802 24.0053C36.3716 24.3995 35.8864 24.9312 35.5248 25.5913C35.172 26.2513 34.9956 26.9572 34.9956 27.7273C34.9956 26.563 34.6075 25.5546 33.8313 24.7112C33.0551 23.8587 32.1114 23.4095 31 23.3545ZM0 36.3545C1.11136 36.2995 2.05513 35.8503 2.83131 35.0069C3.6075 34.1635 3.99559 33.1642 3.99559 32C3.99559 33.1642 4.38368 34.1635 5.15987 35.0069C5.93605 35.8503 6.87982 36.2903 8 36.3545C7.26792 36.3911 6.59757 36.602 5.98015 37.0053C5.37155 37.3995 4.88644 37.9312 4.52481 38.5913C4.172 39.2513 3.99559 39.9572 3.99559 40.7273C3.99559 39.563 3.6075 38.5546 2.83131 37.7112C2.05513 36.8587 1.11136 36.4095 0 36.3545ZM56.8313 24.0069C56.0551 24.8503 55.1114 25.2995 54 25.3545C55.1114 25.4095 56.0551 25.8587 56.8313 26.7112C57.6075 27.5546 57.9956 28.563 57.9956 29.7273C57.9956 28.9572 58.172 28.2513 58.5248 27.5913C58.8864 26.9312 59.3716 26.3995 59.9802 26.0053C60.5976 25.602 61.2679 25.3911 62 25.3545C60.8798 25.2903 59.9361 24.8503 59.1599 24.0069C58.3837 23.1635 57.9956 22.1642 57.9956 21C57.9956 22.1642 57.6075 23.1635 56.8313 24.0069ZM81 25.3545C82.1114 25.2995 83.0551 24.8503 83.8313 24.0069C84.6075 23.1635 84.9956 22.1642 84.9956 21C84.9956 22.1642 85.3837 23.1635 86.1599 24.0069C86.9361 24.8503 87.8798 25.2903 89 25.3545C88.2679 25.3911 87.5976 25.602 86.9802 26.0053C86.3716 26.3995 85.8864 26.9312 85.5248 27.5913C85.172 28.2513 84.9956 28.9572 84.9956 29.7273C84.9956 28.563 84.6075 27.5546 83.8313 26.7112C83.0551 25.8587 82.1114 25.4095 81 25.3545ZM136 36.3545C137.111 36.2995 138.055 35.8503 138.831 35.0069C139.607 34.1635 139.996 33.1642 139.996 32C139.996 33.1642 140.384 34.1635 141.16 35.0069C141.936 35.8503 142.88 36.2903 144 36.3545C143.268 36.3911 142.598 36.602 141.98 37.0053C141.372 37.3995 140.886 37.9312 140.525 38.5913C140.172 39.2513 139.996 39.9572 139.996 40.7273C139.996 39.563 139.607 38.5546 138.831 37.7112C138.055 36.8587 137.111 36.4095 136 36.3545ZM101.831 49.0069C101.055 49.8503 100.111 50.2995 99 50.3545C100.111 50.4095 101.055 50.8587 101.831 51.7112C102.607 52.5546 102.996 53.563 102.996 54.7273C102.996 53.9572 103.172 53.2513 103.525 52.5913C103.886 51.9312 104.372 51.3995 104.98 51.0053C105.598 50.602 106.268 50.3911 107 50.3545C105.88 50.2903 104.936 49.8503 104.16 49.0069C103.384 48.1635 102.996 47.1642 102.996 46C102.996 47.1642 102.607 48.1635 101.831 49.0069Z",fill:"currentColor"})})}),q.jsx("div",{className:"theme-switch__circle-container",children:q.jsx("div",{className:"theme-switch__sun-moon-container",children:q.jsxs("div",{className:"theme-switch__moon",children:[q.jsx("div",{className:"theme-switch__spot"}),q.jsx("div",{className:"theme-switch__spot"}),q.jsx("div",{className:"theme-switch__spot"})]})})})]})]})}function xL(){return q.jsx("header",{className:"navbar",children:q.jsxs("div",{className:"nav-container",children:[q.jsx(Ku,{to:"/",className:"nav-logo",children:"LODESTAR"}),q.jsxs("nav",{className:"nav-menu",children:[q.jsx(Ku,{to:"/about",className:"nav-links",children:"About"}),q.jsx(Ku,{to:"/maps",className:"nav-links",children:"Map"}),q.jsx(Ku,{to:"/alerts",className:"nav-links",children:"Alerts"}),q.jsx(Ku,{to:"/living-labs",className:"nav-links",children:"Living Labs"}),q.jsx(Ku,{to:"/serious-games",className:"nav-links",children:"Serious Games"}),q.jsx(Ku,{to:"/research",className:"nav-links",children:"Research"}),q.jsx(Ku,{to:"/team",className:"nav-links",children:"Team"}),q.jsx(Ku,{to:"/internal-access",className:"nav-links",children:"Internal Portal"})]}),q.jsx("div",{className:"nav-action-item",children:q.jsx(_L,{})})]})})}var q4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},PA=Le.createContext&&Le.createContext(q4),bL=["attr","size","title"];function wL(e,t){if(e==null)return{};var r=SL(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function SL(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Tv(){return Tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tv.apply(this,arguments)}function AA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AA(Object(r),!0).forEach(function(n){TL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TL(e,t,r){return t=PL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PL(e){var t=AL(e,"string");return typeof t=="symbol"?t:t+""}function AL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W4(e){return e&&e.map((t,r)=>Le.createElement(t.tag,Pv({key:r},t.attr),W4(t.child)))}function Zr(e){return t=>Le.createElement(EL,Tv({attr:Pv({},e.attr)},t),W4(e.child))}function EL(e){var t=r=>{var{attr:n,size:s,title:d}=e,h=wL(e,bL),l=s||r.size||"1em",_;return r.className&&(_=r.className),e.className&&(_=(_?_+" ":"")+e.className),Le.createElement("svg",Tv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,h,{className:_,style:Pv(Pv({color:e.color||r.color},r.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),d&&Le.createElement("title",null,d),e.children)};return PA!==void 0?Le.createElement(PA.Consumer,null,r=>t(r)):t(q4)}function G4(e){return Zr({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(e)}function CL(e){return Zr({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(e)}function ML(e){return Zr({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(e)}function IL(e){return Zr({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(e)}function gv(e){return Zr({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"},child:[]}]})(e)}function kL(e){return Zr({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M208 0c-29.9 0-54.7 20.5-61.8 48.2-.8 0-1.4-.2-2.2-.2-35.3 0-64 28.7-64 64 0 4.8.6 9.5 1.7 14C52.5 138 32 166.6 32 200c0 12.6 3.2 24.3 8.3 34.9C16.3 248.7 0 274.3 0 304c0 33.3 20.4 61.9 49.4 73.9-.9 4.6-1.4 9.3-1.4 14.1 0 39.8 32.2 72 72 72 4.1 0 8.1-.5 12-1.2 9.6 28.5 36.2 49.2 68 49.2 39.8 0 72-32.2 72-72V64c0-35.3-28.7-64-64-64zm368 304c0-29.7-16.3-55.3-40.3-69.1 5.2-10.6 8.3-22.3 8.3-34.9 0-33.4-20.5-62-49.7-74 1-4.5 1.7-9.2 1.7-14 0-35.3-28.7-64-64-64-.8 0-1.5.2-2.2.2C422.7 20.5 397.9 0 368 0c-35.3 0-64 28.6-64 64v376c0 39.8 32.2 72 72 72 31.8 0 58.4-20.7 68-49.2 3.9.7 7.9 1.2 12 1.2 39.8 0 72-32.2 72-72 0-4.8-.5-9.5-1.4-14.1 29-12 49.4-40.6 49.4-73.9z"},child:[]}]})(e)}function OL(e){return Zr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M320 336c0 8.84-7.16 16-16 16h-96c-8.84 0-16-7.16-16-16v-48H0v144c0 25.6 22.4 48 48 48h416c25.6 0 48-22.4 48-48V288H320v48zm144-208h-80V80c0-25.6-22.4-48-48-48H176c-25.6 0-48 22.4-48 48v48H48c-25.6 0-48 22.4-48 48v80h512v-80c0-25.6-22.4-48-48-48zm-144 0H192V96h128v32z"},child:[]}]})(e)}function DL(e){return Zr({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M150.94 192h33.73c11.01 0 18.61-10.83 14.86-21.18-4.93-13.58-7.55-27.98-7.55-42.82s2.62-29.24 7.55-42.82C203.29 74.83 195.68 64 184.67 64h-33.73c-7.01 0-13.46 4.49-15.41 11.23C130.64 92.21 128 109.88 128 128c0 18.12 2.64 35.79 7.54 52.76 1.94 6.74 8.39 11.24 15.4 11.24zM89.92 23.34C95.56 12.72 87.97 0 75.96 0H40.63c-6.27 0-12.14 3.59-14.74 9.31C9.4 45.54 0 85.65 0 128c0 24.75 3.12 68.33 26.69 118.86 2.62 5.63 8.42 9.14 14.61 9.14h34.84c12.02 0 19.61-12.74 13.95-23.37-49.78-93.32-16.71-178.15-.17-209.29zM614.06 9.29C611.46 3.58 605.6 0 599.33 0h-35.42c-11.98 0-19.66 12.66-14.02 23.25 18.27 34.29 48.42 119.42.28 209.23-5.72 10.68 1.8 23.52 13.91 23.52h35.23c6.27 0 12.13-3.58 14.73-9.29C630.57 210.48 640 170.36 640 128s-9.42-82.48-25.94-118.71zM489.06 64h-33.73c-11.01 0-18.61 10.83-14.86 21.18 4.93 13.58 7.55 27.98 7.55 42.82s-2.62 29.24-7.55 42.82c-3.76 10.35 3.85 21.18 14.86 21.18h33.73c7.02 0 13.46-4.49 15.41-11.24 4.9-16.97 7.53-34.64 7.53-52.76 0-18.12-2.64-35.79-7.54-52.76-1.94-6.75-8.39-11.24-15.4-11.24zm-116.3 100.12c7.05-10.29 11.2-22.71 11.2-36.12 0-35.35-28.63-64-63.96-64-35.32 0-63.96 28.65-63.96 64 0 13.41 4.15 25.83 11.2 36.12l-130.5 313.41c-3.4 8.15.46 17.52 8.61 20.92l29.51 12.31c8.15 3.4 17.52-.46 20.91-8.61L244.96 384h150.07l49.2 118.15c3.4 8.16 12.76 12.01 20.91 8.61l29.51-12.31c8.15-3.4 12-12.77 8.61-20.92l-130.5-313.41zM271.62 320L320 203.81 368.38 320h-96.76z"},child:[]}]})(e)}function RL(e){return Zr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(e)}function jL(e){return Zr({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M510.5 225.5c-6.9-37.2-39.3-65.5-78.5-65.5-12.3 0-23.9 3-34.3 8-17.4-24.1-45.6-40-77.7-40-53 0-96 43-96 96 0 .5.2 1.1.2 1.6C187.6 233 160 265.2 160 304c0 44.2 35.8 80 80 80h256c44.2 0 80-35.8 80-80 0-39.2-28.2-71.7-65.5-78.5zm-386.4 34.4c-37.4-37.4-37.4-98.3 0-135.8 34.6-34.6 89.1-36.8 126.7-7.4 20-12.9 43.6-20.7 69.2-20.7.7 0 1.3.2 2 .2l8.9-26.7c3.4-10.2-6.3-19.8-16.5-16.4l-75.3 25.1-35.5-71c-4.8-9.6-18.5-9.6-23.3 0l-35.5 71-75.3-25.1c-10.2-3.4-19.8 6.3-16.4 16.5l25.1 75.3-71 35.5c-9.6 4.8-9.6 18.5 0 23.3l71 35.5-25.1 75.3c-3.4 10.2 6.3 19.8 16.5 16.5l59.2-19.7c-.2-2.4-.7-4.7-.7-7.2 0-12.5 2.3-24.5 6.2-35.9-3.6-2.7-7.1-5.2-10.2-8.3zm69.8-58c4.3-24.5 15.8-46.4 31.9-64-9.8-6.2-21.4-9.9-33.8-9.9-35.3 0-64 28.7-64 64 0 18.7 8.2 35.4 21.1 47.1 11.3-15.9 26.6-28.9 44.8-37.2zm330.6 216.2c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8zm-96 0c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8zm-96 0c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8zm-96 0c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8z"},child:[]}]})(e)}function zL(e){return Zr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128 272c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(e)}function LL(e){return Zr({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M225.38 233.37c-12.5 12.5-12.5 32.76 0 45.25 12.49 12.5 32.76 12.5 45.25 0 12.5-12.5 12.5-32.76 0-45.25-12.5-12.49-32.76-12.49-45.25 0zM248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm126.14 148.05L308.17 300.4a31.938 31.938 0 0 1-15.77 15.77l-144.34 65.97c-16.65 7.61-33.81-9.55-26.2-26.2l65.98-144.35a31.938 31.938 0 0 1 15.77-15.77l144.34-65.97c16.65-7.6 33.8 9.55 26.19 26.2z"},child:[]}]})(e)}function NL(e){return Zr({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"},child:[]}]})(e)}function H4(e){return Zr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(e)}function BL(e){return Zr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 168v-16c0-13.255 10.745-24 24-24h360V80c0-21.367 25.899-32.042 40.971-16.971l80 80c9.372 9.373 9.372 24.569 0 33.941l-80 80C409.956 271.982 384 261.456 384 240v-48H24c-13.255 0-24-10.745-24-24zm488 152H128v-48c0-21.314-25.862-32.08-40.971-16.971l-80 80c-9.372 9.373-9.372 24.569 0 33.941l80 80C102.057 463.997 128 453.437 128 432v-48h360c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24z"},child:[]}]})(e)}function FL(e){return Zr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function $L(e){return Zr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"},child:[]}]})(e)}function VL(e){return Zr({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480.07 96H160a160 160 0 1 0 114.24 272h91.52A160 160 0 1 0 480.07 96zM248 268a12 12 0 0 1-12 12h-52v52a12 12 0 0 1-12 12h-24a12 12 0 0 1-12-12v-52H84a12 12 0 0 1-12-12v-24a12 12 0 0 1 12-12h52v-52a12 12 0 0 1 12-12h24a12 12 0 0 1 12 12v52h52a12 12 0 0 1 12 12zm216 76a40 40 0 1 1 40-40 40 40 0 0 1-40 40zm64-96a40 40 0 1 1 40-40 40 40 0 0 1-40 40z"},child:[]}]})(e)}function Z4(e){return Zr({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"},child:[]}]})(e)}function UL(e){return Zr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(e)}function qL(e){return Zr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M12.41 148.02l232.94 105.67c6.8 3.09 14.49 3.09 21.29 0l232.94-105.67c16.55-7.51 16.55-32.52 0-40.03L266.65 2.31a25.607 25.607 0 0 0-21.29 0L12.41 107.98c-16.55 7.51-16.55 32.53 0 40.04zm487.18 88.28l-58.09-26.33-161.64 73.27c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.51 209.97l-58.1 26.33c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 276.3c16.55-7.5 16.55-32.5 0-40zm0 127.8l-57.87-26.23-161.86 73.37c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.29 337.87 12.41 364.1c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 404.1c16.55-7.5 16.55-32.5 0-40z"},child:[]}]})(e)}function WL(e){return Zr({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(e)}function GL(e){return Zr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M507.31 84.69L464 41.37c-6-6-14.14-9.37-22.63-9.37H288V16c0-8.84-7.16-16-16-16h-32c-8.84 0-16 7.16-16 16v16H56c-13.25 0-24 10.75-24 24v80c0 13.25 10.75 24 24 24h385.37c8.49 0 16.62-3.37 22.63-9.37l43.31-43.31c6.25-6.26 6.25-16.38 0-22.63zM224 496c0 8.84 7.16 16 16 16h32c8.84 0 16-7.16 16-16V384h-64v112zm232-272H288v-32h-64v32H70.63c-8.49 0-16.62 3.37-22.63 9.37L4.69 276.69c-6.25 6.25-6.25 16.38 0 22.63L48 342.63c6 6 14.14 9.37 22.63 9.37H456c13.25 0 24-10.75 24-24v-80c0-13.25-10.75-24-24-24z"},child:[]}]})(e)}function HL(e){return Zr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(e)}function ZL(e){return Zr({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(e)}function KL(e){return Zr({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M519.442 288.651c-41.519 0-59.5 31.593-82.058 31.593C377.409 320.244 432 144 432 144s-196.288 80-196.288-3.297c0-35.827 36.288-46.25 36.288-85.985C272 19.216 243.885 0 210.539 0c-34.654 0-66.366 18.891-66.366 56.346 0 41.364 31.711 59.277 31.711 81.75C175.885 207.719 0 166.758 0 166.758v333.237s178.635 41.047 178.635-28.662c0-22.473-40-40.107-40-81.471 0-37.456 29.25-56.346 63.577-56.346 33.673 0 61.788 19.216 61.788 54.717 0 39.735-36.288 50.158-36.288 85.985 0 60.803 129.675 25.73 181.23 25.73 0 0-34.725-120.101 25.827-120.101 35.962 0 46.423 36.152 86.308 36.152C556.712 416 576 387.99 576 354.443c0-34.199-18.962-65.792-56.558-65.792z"},child:[]}]})(e)}function XL(e){return Zr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(e)}function YL(e){return Zr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M139.61 35.5a12 12 0 0 0-17 0L58.93 98.81l-22.7-22.12a12 12 0 0 0-17 0L3.53 92.41a12 12 0 0 0 0 17l47.59 47.4a12.78 12.78 0 0 0 17.61 0l15.59-15.62L156.52 69a12.09 12.09 0 0 0 .09-17zm0 159.19a12 12 0 0 0-17 0l-63.68 63.72-22.7-22.1a12 12 0 0 0-17 0L3.53 252a12 12 0 0 0 0 17L51 316.5a12.77 12.77 0 0 0 17.6 0l15.7-15.69 72.2-72.22a12 12 0 0 0 .09-16.9zM64 368c-26.49 0-48.59 21.5-48.59 48S37.53 464 64 464a48 48 0 0 0 0-96zm432 16H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(e)}function K4(e){return Zr({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function JL(e){return Zr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"},child:[]}]})(e)}function QL(e){return Zr({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function e8(e){return Zr({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}function Y_(e){return Zr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(e)}const nT=Se.createContext({});function iT(e){const t=Se.useRef(null);return t.current===null&&(t.current=e()),t.current}const R0=Se.createContext(null),aT=Se.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class t8 extends Se.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function r8({children:e,isPresent:t}){const r=Se.useId(),n=Se.useRef(null),s=Se.useRef({width:0,height:0,top:0,left:0}),{nonce:d}=Se.useContext(aT);return Se.useInsertionEffect(()=>{const{width:h,height:l,top:_,left:w}=s.current;if(t||!n.current||!h||!l)return;n.current.dataset.motionPopId=r;const E=document.createElement("style");return d&&(E.nonce=d),document.head.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${l}px !important;
            top: ${_}px !important;
            left: ${w}px !important;
          }
        `),()=>{document.head.removeChild(E)}},[t]),q.jsx(t8,{isPresent:t,childRef:n,sizeRef:s,children:Se.cloneElement(e,{ref:n})})}const n8=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:d,mode:h})=>{const l=iT(i8),_=Se.useId(),w=Se.useCallback(A=>{l.set(A,!0);for(const M of l.values())if(!M)return;n&&n()},[l,n]),E=Se.useMemo(()=>({id:_,initial:t,isPresent:r,custom:s,onExitComplete:w,register:A=>(l.set(A,!1),()=>l.delete(A))}),d?[Math.random(),w]:[r,w]);return Se.useMemo(()=>{l.forEach((A,M)=>l.set(M,!1))},[r]),Se.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),h==="popLayout"&&(e=q.jsx(r8,{isPresent:r,children:e})),q.jsx(R0.Provider,{value:E,children:e})};function i8(){return new Map}function X4(e=!0){const t=Se.useContext(R0);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,d=Se.useId();Se.useEffect(()=>{e&&s(d)},[e]);const h=Se.useCallback(()=>e&&n&&n(d),[d,n,e]);return!r&&n?[!1,h]:[!0]}const Yy=e=>e.key||"";function EA(e){const t=[];return Se.Children.forEach(e,r=>{Se.isValidElement(r)&&t.push(r)}),t}const oT=typeof window<"u",Y4=oT?Se.useLayoutEffect:Se.useEffect,j0=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:d="sync",propagate:h=!1})=>{const[l,_]=X4(h),w=Se.useMemo(()=>EA(e),[e]),E=h&&!l?[]:w.map(Yy),A=Se.useRef(!0),M=Se.useRef(w),N=iT(()=>new Map),[U,B]=Se.useState(w),[L,K]=Se.useState(w);Y4(()=>{A.current=!1,M.current=w;for(let ie=0;ie<L.length;ie++){const Z=Yy(L[ie]);E.includes(Z)?N.delete(Z):N.get(Z)!==!0&&N.set(Z,!1)}},[L,E.length,E.join("-")]);const Q=[];if(w!==U){let ie=[...w];for(let Z=0;Z<L.length;Z++){const X=L[Z],le=Yy(X);E.includes(le)||(ie.splice(Z,0,X),Q.push(X))}d==="wait"&&Q.length&&(ie=Q),K(EA(ie)),B(w);return}const{forceRender:J}=Se.useContext(nT);return q.jsx(q.Fragment,{children:L.map(ie=>{const Z=Yy(ie),X=h&&!l?!1:w===L||E.includes(Z),le=()=>{if(N.has(Z))N.set(Z,!0);else return;let de=!0;N.forEach(Pe=>{Pe||(de=!1)}),de&&(J==null||J(),K(M.current),h&&(_==null||_()),n&&n())};return q.jsx(n8,{isPresent:X,initial:!A.current||r?void 0:!1,custom:X?void 0:t,presenceAffectsLayout:s,mode:d,onExitComplete:X?void 0:le,children:ie},Z)})})},as=e=>e;let J4=as;function sT(e){let t;return()=>(t===void 0&&(t=e()),t)}const sp=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},ec=e=>e*1e3,tc=e=>e/1e3,a8={useManualTiming:!1};function o8(e){let t=new Set,r=new Set,n=!1,s=!1;const d=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function l(w){d.has(w)&&(_.schedule(w),e()),w(h)}const _={schedule:(w,E=!1,A=!1)=>{const N=A&&n?t:r;return E&&d.add(w),N.has(w)||N.add(w),w},cancel:w=>{r.delete(w),d.delete(w)},process:w=>{if(h=w,n){s=!0;return}n=!0,[t,r]=[r,t],t.forEach(l),t.clear(),n=!1,s&&(s=!1,_.process(w))}};return _}const Jy=["read","resolveKeyframes","update","preRender","render","postRender"],s8=40;function Q4(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},d=()=>r=!0,h=Jy.reduce((K,Q)=>(K[Q]=o8(d),K),{}),{read:l,resolveKeyframes:_,update:w,preRender:E,render:A,postRender:M}=h,N=()=>{const K=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(K-s.timestamp,s8),1),s.timestamp=K,s.isProcessing=!0,l.process(s),_.process(s),w.process(s),E.process(s),A.process(s),M.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(N))},U=()=>{r=!0,n=!0,s.isProcessing||e(N)};return{schedule:Jy.reduce((K,Q)=>{const J=h[Q];return K[Q]=(ie,Z=!1,X=!1)=>(r||U(),J.schedule(ie,Z,X)),K},{}),cancel:K=>{for(let Q=0;Q<Jy.length;Q++)h[Jy[Q]].cancel(K)},state:s,steps:h}}const{schedule:zn,cancel:ih,state:va,steps:J_}=Q4(typeof requestAnimationFrame<"u"?requestAnimationFrame:as,!0),e5=Se.createContext({strict:!1}),CA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},lp={};for(const e in CA)lp[e]={isEnabled:t=>CA[e].some(r=>!!t[r])};function l8(e){for(const t in e)lp[t]={...lp[t],...e[t]}}const u8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Av(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||u8.has(e)}let t5=e=>!Av(e);function c8(e){e&&(t5=t=>t.startsWith("on")?!Av(t):e(t))}try{c8(require("@emotion/is-prop-valid").default)}catch{}function h8(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(t5(s)||r===!0&&Av(s)||!t&&!Av(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}function f8(e){if(typeof Proxy>"u")return e;const t=new Map,r=(...n)=>e(...n);return new Proxy(r,{get:(n,s)=>s==="create"?e:(t.has(s)||t.set(s,e(s)),t.get(s))})}const z0=Se.createContext({});function rg(e){return typeof e=="string"||Array.isArray(e)}function L0(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const lT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],uT=["initial",...lT];function N0(e){return L0(e.animate)||uT.some(t=>rg(e[t]))}function r5(e){return!!(N0(e)||e.variants)}function d8(e,t){if(N0(e)){const{initial:r,animate:n}=e;return{initial:r===!1||rg(r)?r:void 0,animate:rg(n)?n:void 0}}return e.inherit!==!1?t:{}}function p8(e){const{initial:t,animate:r}=d8(e,Se.useContext(z0));return Se.useMemo(()=>({initial:t,animate:r}),[MA(t),MA(r)])}function MA(e){return Array.isArray(e)?e.join(" "):e}const m8=Symbol.for("motionComponentSymbol");function Kd(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function g8(e,t,r){return Se.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Kd(r)&&(r.current=n))},[t])}const cT=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),y8="framerAppearId",n5="data-"+cT(y8),{schedule:hT}=Q4(queueMicrotask,!1),i5=Se.createContext({});function v8(e,t,r,n,s){var d,h;const{visualElement:l}=Se.useContext(z0),_=Se.useContext(e5),w=Se.useContext(R0),E=Se.useContext(aT).reducedMotion,A=Se.useRef(null);n=n||_.renderer,!A.current&&n&&(A.current=n(e,{visualState:t,parent:l,props:r,presenceContext:w,blockInitialAnimation:w?w.initial===!1:!1,reducedMotionConfig:E}));const M=A.current,N=Se.useContext(i5);M&&!M.projection&&s&&(M.type==="html"||M.type==="svg")&&_8(A.current,r,s,N);const U=Se.useRef(!1);Se.useInsertionEffect(()=>{M&&U.current&&M.update(r,w)});const B=r[n5],L=Se.useRef(!!B&&!(!((d=window.MotionHandoffIsComplete)===null||d===void 0)&&d.call(window,B))&&((h=window.MotionHasOptimisedAnimation)===null||h===void 0?void 0:h.call(window,B)));return Y4(()=>{M&&(U.current=!0,window.MotionIsMounted=!0,M.updateFeatures(),hT.render(M.render),L.current&&M.animationState&&M.animationState.animateChanges())}),Se.useEffect(()=>{M&&(!L.current&&M.animationState&&M.animationState.animateChanges(),L.current&&(queueMicrotask(()=>{var K;(K=window.MotionHandoffMarkAsComplete)===null||K===void 0||K.call(window,B)}),L.current=!1))}),M}function _8(e,t,r,n){const{layoutId:s,layout:d,drag:h,dragConstraints:l,layoutScroll:_,layoutRoot:w}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:a5(e.parent)),e.projection.setOptions({layoutId:s,layout:d,alwaysMeasureLayout:!!h||l&&Kd(l),visualElement:e,animationType:typeof d=="string"?d:"both",initialPromotionConfig:n,layoutScroll:_,layoutRoot:w})}function a5(e){if(e)return e.options.allowProjection!==!1?e.projection:a5(e.parent)}function x8({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:s}){var d,h;e&&l8(e);function l(w,E){let A;const M={...Se.useContext(aT),...w,layoutId:b8(w)},{isStatic:N}=M,U=p8(w),B=n(w,N);if(!N&&oT){w8();const L=S8(M);A=L.MeasureLayout,U.visualElement=v8(s,B,M,t,L.ProjectionNode)}return q.jsxs(z0.Provider,{value:U,children:[A&&U.visualElement?q.jsx(A,{visualElement:U.visualElement,...M}):null,r(s,w,g8(B,U.visualElement,E),B,N,U.visualElement)]})}l.displayName=`motion.${typeof s=="string"?s:`create(${(h=(d=s.displayName)!==null&&d!==void 0?d:s.name)!==null&&h!==void 0?h:""})`}`;const _=Se.forwardRef(l);return _[m8]=s,_}function b8({layoutId:e}){const t=Se.useContext(nT).id;return t&&e!==void 0?t+"-"+e:e}function w8(e,t){Se.useContext(e5).strict}function S8(e){const{drag:t,layout:r}=lp;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const T8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fT(e){return typeof e!="string"||e.includes("-")?!1:!!(T8.indexOf(e)>-1||/[A-Z]/u.test(e))}function IA(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function dT(e,t,r,n){if(typeof t=="function"){const[s,d]=IA(n);t=t(r!==void 0?r:e.custom,s,d)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,d]=IA(n);t=t(r!==void 0?r:e.custom,s,d)}return t}const v2=e=>Array.isArray(e),P8=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),A8=e=>v2(e)?e[e.length-1]||0:e,Va=e=>!!(e&&e.getVelocity);function yv(e){const t=Va(e)?e.get():e;return P8(t)?t.toValue():t}function E8({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:r},n,s,d){const h={latestValues:C8(n,s,d,e),renderState:t()};return r&&(h.onMount=l=>r({props:n,current:l,...h}),h.onUpdate=l=>r(l)),h}const o5=e=>(t,r)=>{const n=Se.useContext(z0),s=Se.useContext(R0),d=()=>E8(e,t,n,s);return r?d():iT(d)};function C8(e,t,r,n){const s={},d=n(e,{});for(const M in d)s[M]=yv(d[M]);let{initial:h,animate:l}=e;const _=N0(e),w=r5(e);t&&w&&!_&&e.inherit!==!1&&(h===void 0&&(h=t.initial),l===void 0&&(l=t.animate));let E=r?r.initial===!1:!1;E=E||h===!1;const A=E?l:h;if(A&&typeof A!="boolean"&&!L0(A)){const M=Array.isArray(A)?A:[A];for(let N=0;N<M.length;N++){const U=dT(e,M[N]);if(U){const{transitionEnd:B,transition:L,...K}=U;for(const Q in K){let J=K[Q];if(Array.isArray(J)){const ie=E?J.length-1:0;J=J[ie]}J!==null&&(s[Q]=J)}for(const Q in B)s[Q]=B[Q]}}}return s}const Dp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vf=new Set(Dp),s5=e=>t=>typeof t=="string"&&t.startsWith(e),l5=s5("--"),M8=s5("var(--"),pT=e=>M8(e)?I8.test(e.split("/*")[0].trim()):!1,I8=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,u5=(e,t)=>t&&typeof e=="number"?t.transform(e):e,ac=(e,t,r)=>r>t?t:r<e?e:r,Rp={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ng={...Rp,transform:e=>ac(0,1,e)},Qy={...Rp,default:1},qg=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Xc=qg("deg"),lu=qg("%"),gr=qg("px"),k8=qg("vh"),O8=qg("vw"),kA={...lu,parse:e=>lu.parse(e)/100,transform:e=>lu.transform(e*100)},D8={borderWidth:gr,borderTopWidth:gr,borderRightWidth:gr,borderBottomWidth:gr,borderLeftWidth:gr,borderRadius:gr,radius:gr,borderTopLeftRadius:gr,borderTopRightRadius:gr,borderBottomRightRadius:gr,borderBottomLeftRadius:gr,width:gr,maxWidth:gr,height:gr,maxHeight:gr,top:gr,right:gr,bottom:gr,left:gr,padding:gr,paddingTop:gr,paddingRight:gr,paddingBottom:gr,paddingLeft:gr,margin:gr,marginTop:gr,marginRight:gr,marginBottom:gr,marginLeft:gr,backgroundPositionX:gr,backgroundPositionY:gr},R8={rotate:Xc,rotateX:Xc,rotateY:Xc,rotateZ:Xc,scale:Qy,scaleX:Qy,scaleY:Qy,scaleZ:Qy,skew:Xc,skewX:Xc,skewY:Xc,distance:gr,translateX:gr,translateY:gr,translateZ:gr,x:gr,y:gr,z:gr,perspective:gr,transformPerspective:gr,opacity:ng,originX:kA,originY:kA,originZ:gr},OA={...Rp,transform:Math.round},mT={...D8,...R8,zIndex:OA,size:gr,fillOpacity:ng,strokeOpacity:ng,numOctaves:OA},j8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},z8=Dp.length;function L8(e,t,r){let n="",s=!0;for(let d=0;d<z8;d++){const h=Dp[d],l=e[h];if(l===void 0)continue;let _=!0;if(typeof l=="number"?_=l===(h.startsWith("scale")?1:0):_=parseFloat(l)===0,!_||r){const w=u5(l,mT[h]);if(!_){s=!1;const E=j8[h]||h;n+=`${E}(${w}) `}r&&(t[h]=w)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function gT(e,t,r){const{style:n,vars:s,transformOrigin:d}=e;let h=!1,l=!1;for(const _ in t){const w=t[_];if(Vf.has(_)){h=!0;continue}else if(l5(_)){s[_]=w;continue}else{const E=u5(w,mT[_]);_.startsWith("origin")?(l=!0,d[_]=E):n[_]=E}}if(t.transform||(h||r?n.transform=L8(t,e.transform,r):n.transform&&(n.transform="none")),l){const{originX:_="50%",originY:w="50%",originZ:E=0}=d;n.transformOrigin=`${_} ${w} ${E}`}}const N8={offset:"stroke-dashoffset",array:"stroke-dasharray"},B8={offset:"strokeDashoffset",array:"strokeDasharray"};function F8(e,t,r=1,n=0,s=!0){e.pathLength=1;const d=s?N8:B8;e[d.offset]=gr.transform(-n);const h=gr.transform(t),l=gr.transform(r);e[d.array]=`${h} ${l}`}function DA(e,t,r){return typeof e=="string"?e:gr.transform(t+r*e)}function $8(e,t,r){const n=DA(t,e.x,e.width),s=DA(r,e.y,e.height);return`${n} ${s}`}function yT(e,{attrX:t,attrY:r,attrScale:n,originX:s,originY:d,pathLength:h,pathSpacing:l=1,pathOffset:_=0,...w},E,A){if(gT(e,w,A),E){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:M,style:N,dimensions:U}=e;M.transform&&(U&&(N.transform=M.transform),delete M.transform),U&&(s!==void 0||d!==void 0||N.transform)&&(N.transformOrigin=$8(U,s!==void 0?s:.5,d!==void 0?d:.5)),t!==void 0&&(M.x=t),r!==void 0&&(M.y=r),n!==void 0&&(M.scale=n),h!==void 0&&F8(M,h,l,_,!1)}const vT=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),c5=()=>({...vT(),attrs:{}}),_T=e=>typeof e=="string"&&e.toLowerCase()==="svg";function h5(e,{style:t,vars:r},n,s){Object.assign(e.style,t,s&&s.getProjectionStyles(n));for(const d in r)e.style.setProperty(d,r[d])}const f5=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function d5(e,t,r,n){h5(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(f5.has(s)?s:cT(s),t.attrs[s])}const Ev={};function V8(e){Object.assign(Ev,e)}function p5(e,{layout:t,layoutId:r}){return Vf.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Ev[e]||e==="opacity")}function xT(e,t,r){var n;const{style:s}=e,d={};for(const h in s)(Va(s[h])||t.style&&Va(t.style[h])||p5(h,e)||((n=r==null?void 0:r.getValue(h))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(d[h]=s[h]);return d}function m5(e,t,r){const n=xT(e,t,r);for(const s in e)if(Va(e[s])||Va(t[s])){const d=Dp.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[d]=e[s]}return n}function U8(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const RA=["x","y","width","height","cx","cy","r"],q8={useVisualState:o5({scrapeMotionValuesFromProps:m5,createRenderState:c5,onUpdate:({props:e,prevProps:t,current:r,renderState:n,latestValues:s})=>{if(!r)return;let d=!!e.drag;if(!d){for(const l in s)if(Vf.has(l)){d=!0;break}}if(!d)return;let h=!t;if(t)for(let l=0;l<RA.length;l++){const _=RA[l];e[_]!==t[_]&&(h=!0)}h&&zn.read(()=>{U8(r,n),zn.render(()=>{yT(n,s,_T(r.tagName),e.transformTemplate),d5(r,n)})})}})},W8={useVisualState:o5({scrapeMotionValuesFromProps:xT,createRenderState:vT})};function g5(e,t,r){for(const n in t)!Va(t[n])&&!p5(n,r)&&(e[n]=t[n])}function G8({transformTemplate:e},t){return Se.useMemo(()=>{const r=vT();return gT(r,t,e),Object.assign({},r.vars,r.style)},[t])}function H8(e,t){const r=e.style||{},n={};return g5(n,r,e),Object.assign(n,G8(e,t)),n}function Z8(e,t){const r={},n=H8(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}function K8(e,t,r,n){const s=Se.useMemo(()=>{const d=c5();return yT(d,t,_T(n),e.transformTemplate),{...d.attrs,style:{...d.style}}},[t]);if(e.style){const d={};g5(d,e.style,e),s.style={...d,...s.style}}return s}function X8(e=!1){return(r,n,s,{latestValues:d},h)=>{const _=(fT(r)?K8:Z8)(n,d,h,r),w=h8(n,typeof r=="string",e),E=r!==Se.Fragment?{...w,..._,ref:s}:{},{children:A}=n,M=Se.useMemo(()=>Va(A)?A.get():A,[A]);return Se.createElement(r,{...E,children:M})}}function Y8(e,t){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const h={...fT(n)?q8:W8,preloadedFeatures:e,useRender:X8(s),createVisualElement:t,Component:n};return x8(h)}}function y5(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function B0(e,t,r){const n=e.getProps();return dT(n,t,r!==void 0?r:n.custom,e)}const J8=sT(()=>window.ScrollTimeline!==void 0);class Q8{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,r){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=r}attachTimeline(t,r){const n=this.animations.map(s=>{if(J8()&&s.attachTimeline)return s.attachTimeline(t);if(typeof r=="function")return r(s)});return()=>{n.forEach((s,d)=>{s&&s(),this.animations[d].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let r=0;r<this.animations.length;r++)t=Math.max(t,this.animations[r].duration);return t}runAll(t){this.animations.forEach(r=>r[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class eN extends Q8{then(t,r){return Promise.all(this.animations).then(t).catch(r)}}function bT(e,t){return e?e[t]||e.default||e:void 0}const _2=2e4;function v5(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<_2;)t+=r,n=e.next(t);return t>=_2?1/0:t}function wT(e){return typeof e=="function"}function jA(e,t){e.timeline=t,e.onfinish=null}const ST=e=>Array.isArray(e)&&typeof e[0]=="number",tN={linearEasing:void 0};function rN(e,t){const r=sT(e);return()=>{var n;return(n=tN[t])!==null&&n!==void 0?n:r()}}const Cv=rN(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),_5=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let d=0;d<s;d++)n+=e(sp(0,s-1,d))+", ";return`linear(${n.substring(0,n.length-2)})`};function x5(e){return!!(typeof e=="function"&&Cv()||!e||typeof e=="string"&&(e in x2||Cv())||ST(e)||Array.isArray(e)&&e.every(x5))}const Bm=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,x2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bm([0,.65,.55,1]),circOut:Bm([.55,0,1,.45]),backIn:Bm([.31,.01,.66,-.59]),backOut:Bm([.33,1.53,.69,.99])};function b5(e,t){if(e)return typeof e=="function"&&Cv()?_5(e,t):ST(e)?Bm(e):Array.isArray(e)?e.map(r=>b5(r,t)||x2.easeOut):x2[e]}const fl={x:!1,y:!1};function w5(){return fl.x||fl.y}function nN(e,t,r){var n;if(e instanceof Element)return[e];if(typeof e=="string"){let s=document;const d=(n=void 0)!==null&&n!==void 0?n:s.querySelectorAll(e);return d?Array.from(d):[]}return Array.from(e)}function S5(e,t){const r=nN(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function zA(e){return t=>{t.pointerType==="touch"||w5()||e(t)}}function iN(e,t,r={}){const[n,s,d]=S5(e,r),h=zA(l=>{const{target:_}=l,w=t(l);if(typeof w!="function"||!_)return;const E=zA(A=>{w(A),_.removeEventListener("pointerleave",E)});_.addEventListener("pointerleave",E,s)});return n.forEach(l=>{l.addEventListener("pointerenter",h,s)}),d}const T5=(e,t)=>t?e===t?!0:T5(e,t.parentElement):!1,TT=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,aN=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function oN(e){return aN.has(e.tagName)||e.tabIndex!==-1}const Fm=new WeakSet;function LA(e){return t=>{t.key==="Enter"&&e(t)}}function Q_(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const sN=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=LA(()=>{if(Fm.has(r))return;Q_(r,"down");const s=LA(()=>{Q_(r,"up")}),d=()=>Q_(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",d,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function NA(e){return TT(e)&&!w5()}function lN(e,t,r={}){const[n,s,d]=S5(e,r),h=l=>{const _=l.currentTarget;if(!NA(l)||Fm.has(_))return;Fm.add(_);const w=t(l),E=(N,U)=>{window.removeEventListener("pointerup",A),window.removeEventListener("pointercancel",M),!(!NA(N)||!Fm.has(_))&&(Fm.delete(_),typeof w=="function"&&w(N,{success:U}))},A=N=>{E(N,r.useGlobalTarget||T5(_,N.target))},M=N=>{E(N,!1)};window.addEventListener("pointerup",A,s),window.addEventListener("pointercancel",M,s)};return n.forEach(l=>{!oN(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(r.useGlobalTarget?window:l).addEventListener("pointerdown",h,s),l.addEventListener("focus",w=>sN(w,s),s)}),d}function uN(e){return e==="x"||e==="y"?fl[e]?null:(fl[e]=!0,()=>{fl[e]=!1}):fl.x||fl.y?null:(fl.x=fl.y=!0,()=>{fl.x=fl.y=!1})}const P5=new Set(["width","height","top","left","right","bottom",...Dp]);let vv;function cN(){vv=void 0}const uu={now:()=>(vv===void 0&&uu.set(va.isProcessing||a8.useManualTiming?va.timestamp:performance.now()),vv),set:e=>{vv=e,queueMicrotask(cN)}};function PT(e,t){e.indexOf(t)===-1&&e.push(t)}function AT(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class ET{constructor(){this.subscriptions=[]}add(t){return PT(this.subscriptions,t),()=>AT(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let d=0;d<s;d++){const h=this.subscriptions[d];h&&h(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function A5(e,t){return t?e*(1e3/t):0}const BA=30,hN=e=>!isNaN(parseFloat(e));class fN{constructor(t,r={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{const d=uu.now();this.updatedAt!==d&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=uu.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=hN(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new ET);const n=this.events[t].add(r);return t==="change"?()=>{n(),zn.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=uu.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>BA)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,BA);return A5(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ig(e,t){return new fN(e,t)}function dN(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,ig(r))}function pN(e,t){const r=B0(e,t);let{transitionEnd:n={},transition:s={},...d}=r||{};d={...d,...n};for(const h in d){const l=A8(d[h]);dN(e,h,l)}}function mN(e){return!!(Va(e)&&e.add)}function b2(e,t){const r=e.getValue("willChange");if(mN(r))return r.add(t)}function E5(e){return e.props[n5]}const C5=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,gN=1e-7,yN=12;function vN(e,t,r,n,s){let d,h,l=0;do h=t+(r-t)/2,d=C5(h,n,s)-e,d>0?r=h:t=h;while(Math.abs(d)>gN&&++l<yN);return h}function Wg(e,t,r,n){if(e===t&&r===n)return as;const s=d=>vN(d,0,1,e,r);return d=>d===0||d===1?d:C5(s(d),t,n)}const M5=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,I5=e=>t=>1-e(1-t),k5=Wg(.33,1.53,.69,.99),CT=I5(k5),O5=M5(CT),D5=e=>(e*=2)<1?.5*CT(e):.5*(2-Math.pow(2,-10*(e-1))),MT=e=>1-Math.sin(Math.acos(e)),R5=I5(MT),j5=M5(MT),z5=e=>/^0[^.\s]+$/u.test(e);function _N(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||z5(e):!0}const Wm=e=>Math.round(e*1e5)/1e5,IT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function xN(e){return e==null}const bN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,kT=(e,t)=>r=>!!(typeof r=="string"&&bN.test(r)&&r.startsWith(e)||t&&!xN(r)&&Object.prototype.hasOwnProperty.call(r,t)),L5=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,d,h,l]=n.match(IT);return{[e]:parseFloat(s),[t]:parseFloat(d),[r]:parseFloat(h),alpha:l!==void 0?parseFloat(l):1}},wN=e=>ac(0,255,e),ex={...Rp,transform:e=>Math.round(wN(e))},Tf={test:kT("rgb","red"),parse:L5("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+ex.transform(e)+", "+ex.transform(t)+", "+ex.transform(r)+", "+Wm(ng.transform(n))+")"};function SN(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const w2={test:kT("#"),parse:SN,transform:Tf.transform},Xd={test:kT("hsl","hue"),parse:L5("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+lu.transform(Wm(t))+", "+lu.transform(Wm(r))+", "+Wm(ng.transform(n))+")"},Na={test:e=>Tf.test(e)||w2.test(e)||Xd.test(e),parse:e=>Tf.test(e)?Tf.parse(e):Xd.test(e)?Xd.parse(e):w2.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Tf.transform(e):Xd.transform(e)},TN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function PN(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(IT))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(TN))===null||r===void 0?void 0:r.length)||0)>0}const N5="number",B5="color",AN="var",EN="var(",FA="${}",CN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ag(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let d=0;const l=t.replace(CN,_=>(Na.test(_)?(n.color.push(d),s.push(B5),r.push(Na.parse(_))):_.startsWith(EN)?(n.var.push(d),s.push(AN),r.push(_)):(n.number.push(d),s.push(N5),r.push(parseFloat(_))),++d,FA)).split(FA);return{values:r,split:l,indexes:n,types:s}}function F5(e){return ag(e).values}function $5(e){const{split:t,types:r}=ag(e),n=t.length;return s=>{let d="";for(let h=0;h<n;h++)if(d+=t[h],s[h]!==void 0){const l=r[h];l===N5?d+=Wm(s[h]):l===B5?d+=Na.transform(s[h]):d+=s[h]}return d}}const MN=e=>typeof e=="number"?0:e;function IN(e){const t=F5(e);return $5(e)(t.map(MN))}const ah={test:PN,parse:F5,createTransformer:$5,getAnimatableNone:IN},kN=new Set(["brightness","contrast","saturate","opacity"]);function ON(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(IT)||[];if(!n)return e;const s=r.replace(n,"");let d=kN.has(t)?1:0;return n!==r&&(d*=100),t+"("+d+s+")"}const DN=/\b([a-z-]*)\(.*?\)/gu,S2={...ah,getAnimatableNone:e=>{const t=e.match(DN);return t?t.map(ON).join(" "):e}},RN={...mT,color:Na,backgroundColor:Na,outlineColor:Na,fill:Na,stroke:Na,borderColor:Na,borderTopColor:Na,borderRightColor:Na,borderBottomColor:Na,borderLeftColor:Na,filter:S2,WebkitFilter:S2},OT=e=>RN[e];function V5(e,t){let r=OT(e);return r!==S2&&(r=ah),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const jN=new Set(["auto","none","0"]);function zN(e,t,r){let n=0,s;for(;n<e.length&&!s;){const d=e[n];typeof d=="string"&&!jN.has(d)&&ag(d).values.length&&(s=e[n]),n++}if(s&&r)for(const d of t)e[d]=V5(r,s)}const $A=e=>e===Rp||e===gr,VA=(e,t)=>parseFloat(e.split(", ")[t]),UA=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/u);if(s)return VA(s[1],t);{const d=n.match(/^matrix\((.+)\)$/u);return d?VA(d[1],e):0}},LN=new Set(["x","y","z"]),NN=Dp.filter(e=>!LN.has(e));function BN(e){const t=[];return NN.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const up={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:UA(4,13),y:UA(5,14)};up.translateX=up.x;up.translateY=up.y;const Mf=new Set;let T2=!1,P2=!1;function U5(){if(P2){const e=Array.from(Mf).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=BN(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([d,h])=>{var l;(l=n.getValue(d))===null||l===void 0||l.set(h)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}P2=!1,T2=!1,Mf.forEach(e=>e.complete()),Mf.clear()}function q5(){Mf.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(P2=!0)})}function FN(){q5(),U5()}class DT{constructor(t,r,n,s,d,h=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=d,this.isAsync=h}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Mf.add(this),T2||(T2=!0,zn.read(q5),zn.resolveKeyframes(U5))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;for(let d=0;d<t.length;d++)if(t[d]===null)if(d===0){const h=s==null?void 0:s.get(),l=t[t.length-1];if(h!==void 0)t[0]=h;else if(n&&r){const _=n.readValue(r,l);_!=null&&(t[0]=_)}t[0]===void 0&&(t[0]=l),s&&h===void 0&&s.set(t[0])}else t[d]=t[d-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Mf.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Mf.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const W5=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),$N=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function VN(e){const t=$N.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function G5(e,t,r=1){const[n,s]=VN(e);if(!n)return;const d=window.getComputedStyle(t).getPropertyValue(n);if(d){const h=d.trim();return W5(h)?parseFloat(h):h}return pT(s)?G5(s,t,r+1):s}const H5=e=>t=>t.test(e),UN={test:e=>e==="auto",parse:e=>e},Z5=[Rp,gr,lu,Xc,O8,k8,UN],qA=e=>Z5.find(H5(e));class K5 extends DT{constructor(t,r,n,s,d){super(t,r,n,s,d,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let _=0;_<t.length;_++){let w=t[_];if(typeof w=="string"&&(w=w.trim(),pT(w))){const E=G5(w,r.current);E!==void 0&&(t[_]=E),_===t.length-1&&(this.finalKeyframe=w)}}if(this.resolveNoneKeyframes(),!P5.has(n)||t.length!==2)return;const[s,d]=t,h=qA(s),l=qA(d);if(h!==l)if($A(h)&&$A(l))for(let _=0;_<t.length;_++){const w=t[_];typeof w=="string"&&(t[_]=parseFloat(w))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)_N(t[s])&&n.push(s);n.length&&zN(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=up[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){var t;const{element:r,name:n,unresolvedKeyframes:s}=this;if(!r||!r.current)return;const d=r.getValue(n);d&&d.jump(this.measuredOrigin,!1);const h=s.length-1,l=s[h];s[h]=up[n](r.measureViewportBox(),window.getComputedStyle(r.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([_,w])=>{r.getValue(_).set(w)}),this.resolveNoneKeyframes()}}const WA=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ah.test(e)||e==="0")&&!e.startsWith("url("));function qN(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function WN(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const d=e[e.length-1],h=WA(s,t),l=WA(d,t);return!h||!l?!1:qN(e)||(r==="spring"||wT(r))&&n}const GN=e=>e!==null;function F0(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(GN),d=t&&r!=="loop"&&t%2===1?0:s.length-1;return!d||n===void 0?s[d]:n}const HN=40;class X5{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:d=0,repeatType:h="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=uu.now(),this.options={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:d,repeatType:h,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>HN?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&FN(),this._resolved}onKeyframesResolved(t,r){this.resolvedAt=uu.now(),this.hasAttemptedResolve=!0;const{name:n,type:s,velocity:d,delay:h,onComplete:l,onUpdate:_,isGenerator:w}=this.options;if(!w&&!WN(t,n,s,d))if(h)this.options.duration=0;else{_&&_(F0(t,this.options,r)),l&&l(),this.resolveFinishedPromise();return}const E=this.initPlayback(t,r);E!==!1&&(this._resolved={keyframes:t,finalKeyframe:r,...E},this.onPostResolved())}onPostResolved(){}then(t,r){return this.currentFinishedPromise.then(t,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Zn=(e,t,r)=>e+(t-e)*r;function tx(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function ZN({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,d=0,h=0;if(!t)s=d=h=r;else{const l=r<.5?r*(1+t):r+t-r*t,_=2*r-l;s=tx(_,l,e+1/3),d=tx(_,l,e),h=tx(_,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(d*255),blue:Math.round(h*255),alpha:n}}function Mv(e,t){return r=>r>0?t:e}const rx=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},KN=[w2,Tf,Xd],XN=e=>KN.find(t=>t.test(e));function GA(e){const t=XN(e);if(!t)return!1;let r=t.parse(e);return t===Xd&&(r=ZN(r)),r}const HA=(e,t)=>{const r=GA(e),n=GA(t);if(!r||!n)return Mv(e,t);const s={...r};return d=>(s.red=rx(r.red,n.red,d),s.green=rx(r.green,n.green,d),s.blue=rx(r.blue,n.blue,d),s.alpha=Zn(r.alpha,n.alpha,d),Tf.transform(s))},YN=(e,t)=>r=>t(e(r)),Gg=(...e)=>e.reduce(YN),A2=new Set(["none","hidden"]);function JN(e,t){return A2.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function QN(e,t){return r=>Zn(e,t,r)}function RT(e){return typeof e=="number"?QN:typeof e=="string"?pT(e)?Mv:Na.test(e)?HA:rB:Array.isArray(e)?Y5:typeof e=="object"?Na.test(e)?HA:eB:Mv}function Y5(e,t){const r=[...e],n=r.length,s=e.map((d,h)=>RT(d)(d,t[h]));return d=>{for(let h=0;h<n;h++)r[h]=s[h](d);return r}}function eB(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=RT(e[s])(e[s],t[s]));return s=>{for(const d in n)r[d]=n[d](s);return r}}function tB(e,t){var r;const n=[],s={color:0,var:0,number:0};for(let d=0;d<t.values.length;d++){const h=t.types[d],l=e.indexes[h][s[h]],_=(r=e.values[l])!==null&&r!==void 0?r:0;n[d]=_,s[h]++}return n}const rB=(e,t)=>{const r=ah.createTransformer(t),n=ag(e),s=ag(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?A2.has(e)&&!s.values.length||A2.has(t)&&!n.values.length?JN(e,t):Gg(Y5(tB(n,s),s.values),r):Mv(e,t)};function J5(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Zn(e,t,r):RT(e)(e,t)}const nB=5;function Q5(e,t,r){const n=Math.max(t-nB,0);return A5(r-e(n),t-n)}const ri={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},nx=.001;function iB({duration:e=ri.duration,bounce:t=ri.bounce,velocity:r=ri.velocity,mass:n=ri.mass}){let s,d,h=1-t;h=ac(ri.minDamping,ri.maxDamping,h),e=ac(ri.minDuration,ri.maxDuration,tc(e)),h<1?(s=w=>{const E=w*h,A=E*e,M=E-r,N=E2(w,h),U=Math.exp(-A);return nx-M/N*U},d=w=>{const A=w*h*e,M=A*r+r,N=Math.pow(h,2)*Math.pow(w,2)*e,U=Math.exp(-A),B=E2(Math.pow(w,2),h);return(-s(w)+nx>0?-1:1)*((M-N)*U)/B}):(s=w=>{const E=Math.exp(-w*e),A=(w-r)*e+1;return-nx+E*A},d=w=>{const E=Math.exp(-w*e),A=(r-w)*(e*e);return E*A});const l=5/e,_=oB(s,d,l);if(e=ec(e),isNaN(_))return{stiffness:ri.stiffness,damping:ri.damping,duration:e};{const w=Math.pow(_,2)*n;return{stiffness:w,damping:h*2*Math.sqrt(n*w),duration:e}}}const aB=12;function oB(e,t,r){let n=r;for(let s=1;s<aB;s++)n=n-e(n)/t(n);return n}function E2(e,t){return e*Math.sqrt(1-t*t)}const sB=["duration","bounce"],lB=["stiffness","damping","mass"];function ZA(e,t){return t.some(r=>e[r]!==void 0)}function uB(e){let t={velocity:ri.velocity,stiffness:ri.stiffness,damping:ri.damping,mass:ri.mass,isResolvedFromDuration:!1,...e};if(!ZA(e,lB)&&ZA(e,sB))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,d=2*ac(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:ri.mass,stiffness:s,damping:d}}else{const r=iB(e);t={...t,...r,mass:ri.mass},t.isResolvedFromDuration=!0}return t}function eD(e=ri.visualDuration,t=ri.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const d=r.keyframes[0],h=r.keyframes[r.keyframes.length-1],l={done:!1,value:d},{stiffness:_,damping:w,mass:E,duration:A,velocity:M,isResolvedFromDuration:N}=uB({...r,velocity:-tc(r.velocity||0)}),U=M||0,B=w/(2*Math.sqrt(_*E)),L=h-d,K=tc(Math.sqrt(_/E)),Q=Math.abs(L)<5;n||(n=Q?ri.restSpeed.granular:ri.restSpeed.default),s||(s=Q?ri.restDelta.granular:ri.restDelta.default);let J;if(B<1){const Z=E2(K,B);J=X=>{const le=Math.exp(-B*K*X);return h-le*((U+B*K*L)/Z*Math.sin(Z*X)+L*Math.cos(Z*X))}}else if(B===1)J=Z=>h-Math.exp(-K*Z)*(L+(U+K*L)*Z);else{const Z=K*Math.sqrt(B*B-1);J=X=>{const le=Math.exp(-B*K*X),de=Math.min(Z*X,300);return h-le*((U+B*K*L)*Math.sinh(de)+Z*L*Math.cosh(de))/Z}}const ie={calculatedDuration:N&&A||null,next:Z=>{const X=J(Z);if(N)l.done=Z>=A;else{let le=0;B<1&&(le=Z===0?ec(U):Q5(J,Z,X));const de=Math.abs(le)<=n,Pe=Math.abs(h-X)<=s;l.done=de&&Pe}return l.value=l.done?h:X,l},toString:()=>{const Z=Math.min(v5(ie),_2),X=_5(le=>ie.next(Z*le).value,Z,30);return Z+"ms "+X}};return ie}function KA({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:d=500,modifyTarget:h,min:l,max:_,restDelta:w=.5,restSpeed:E}){const A=e[0],M={done:!1,value:A},N=de=>l!==void 0&&de<l||_!==void 0&&de>_,U=de=>l===void 0?_:_===void 0||Math.abs(l-de)<Math.abs(_-de)?l:_;let B=r*t;const L=A+B,K=h===void 0?L:h(L);K!==L&&(B=K-A);const Q=de=>-B*Math.exp(-de/n),J=de=>K+Q(de),ie=de=>{const Pe=Q(de),Fe=J(de);M.done=Math.abs(Pe)<=w,M.value=M.done?K:Fe};let Z,X;const le=de=>{N(M.value)&&(Z=de,X=eD({keyframes:[M.value,U(M.value)],velocity:Q5(J,de,M.value),damping:s,stiffness:d,restDelta:w,restSpeed:E}))};return le(0),{calculatedDuration:null,next:de=>{let Pe=!1;return!X&&Z===void 0&&(Pe=!0,ie(de),le(de)),Z!==void 0&&de>=Z?X.next(de-Z):(!Pe&&ie(de),M)}}}const cB=Wg(.42,0,1,1),hB=Wg(0,0,.58,1),tD=Wg(.42,0,.58,1),fB=e=>Array.isArray(e)&&typeof e[0]!="number",dB={linear:as,easeIn:cB,easeInOut:tD,easeOut:hB,circIn:MT,circInOut:j5,circOut:R5,backIn:CT,backInOut:O5,backOut:k5,anticipate:D5},XA=e=>{if(ST(e)){J4(e.length===4);const[t,r,n,s]=e;return Wg(t,r,n,s)}else if(typeof e=="string")return dB[e];return e};function pB(e,t,r){const n=[],s=r||J5,d=e.length-1;for(let h=0;h<d;h++){let l=s(e[h],e[h+1]);if(t){const _=Array.isArray(t)?t[h]||as:t;l=Gg(_,l)}n.push(l)}return n}function mB(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const d=e.length;if(J4(d===t.length),d===1)return()=>t[0];if(d===2&&t[0]===t[1])return()=>t[1];const h=e[0]===e[1];e[0]>e[d-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=pB(t,n,s),_=l.length,w=E=>{if(h&&E<e[0])return t[0];let A=0;if(_>1)for(;A<e.length-2&&!(E<e[A+1]);A++);const M=sp(e[A],e[A+1],E);return l[A](M)};return r?E=>w(ac(e[0],e[d-1],E)):w}function gB(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=sp(0,t,n);e.push(Zn(r,1,s))}}function yB(e){const t=[0];return gB(t,e.length-1),t}function vB(e,t){return e.map(r=>r*t)}function _B(e,t){return e.map(()=>t||tD).splice(0,e.length-1)}function Iv({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=fB(n)?n.map(XA):XA(n),d={done:!1,value:t[0]},h=vB(r&&r.length===t.length?r:yB(t),e),l=mB(h,t,{ease:Array.isArray(s)?s:_B(t,s)});return{calculatedDuration:e,next:_=>(d.value=l(_),d.done=_>=e,d)}}const xB=e=>{const t=({timestamp:r})=>e(r);return{start:()=>zn.update(t,!0),stop:()=>ih(t),now:()=>va.isProcessing?va.timestamp:uu.now()}},bB={decay:KA,inertia:KA,tween:Iv,keyframes:Iv,spring:eD},wB=e=>e/100;class jT extends X5{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:_}=this.options;_&&_()};const{name:r,motionValue:n,element:s,keyframes:d}=this.options,h=(s==null?void 0:s.KeyframeResolver)||DT,l=(_,w)=>this.onKeyframesResolved(_,w);this.resolver=new h(d,l,r,n,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:r="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:d,velocity:h=0}=this.options,l=wT(r)?r:bB[r]||Iv;let _,w;l!==Iv&&typeof t[0]!="number"&&(_=Gg(wB,J5(t[0],t[1])),t=[0,100]);const E=l({...this.options,keyframes:t});d==="mirror"&&(w=l({...this.options,keyframes:[...t].reverse(),velocity:-h})),E.calculatedDuration===null&&(E.calculatedDuration=v5(E));const{calculatedDuration:A}=E,M=A+s,N=M*(n+1)-s;return{generator:E,mirroredGenerator:w,mapPercentToKeyframes:_,calculatedDuration:A,resolvedDuration:M,totalDuration:N}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,r=!1){const{resolved:n}=this;if(!n){const{keyframes:de}=this.options;return{done:!0,value:de[de.length-1]}}const{finalKeyframe:s,generator:d,mirroredGenerator:h,mapPercentToKeyframes:l,keyframes:_,calculatedDuration:w,totalDuration:E,resolvedDuration:A}=n;if(this.startTime===null)return d.next(0);const{delay:M,repeat:N,repeatType:U,repeatDelay:B,onUpdate:L}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-E/this.speed,this.startTime)),r?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const K=this.currentTime-M*(this.speed>=0?1:-1),Q=this.speed>=0?K<0:K>E;this.currentTime=Math.max(K,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=E);let J=this.currentTime,ie=d;if(N){const de=Math.min(this.currentTime,E)/A;let Pe=Math.floor(de),Fe=de%1;!Fe&&de>=1&&(Fe=1),Fe===1&&Pe--,Pe=Math.min(Pe,N+1),!!(Pe%2)&&(U==="reverse"?(Fe=1-Fe,B&&(Fe-=B/A)):U==="mirror"&&(ie=h)),J=ac(0,1,Fe)*A}const Z=Q?{done:!1,value:_[0]}:ie.next(J);l&&(Z.value=l(Z.value));let{done:X}=Z;!Q&&w!==null&&(X=this.speed>=0?this.currentTime>=E:this.currentTime<=0);const le=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&X);return le&&s!==void 0&&(Z.value=F0(_,this.options,s)),L&&L(Z.value),le&&this.finish(),Z}get duration(){const{resolved:t}=this;return t?tc(t.calculatedDuration):0}get time(){return tc(this.currentTime)}set time(t){t=ec(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=tc(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=xB,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=t(d=>this.tick(d))),r&&r();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const SB=new Set(["opacity","clipPath","filter","transform"]);function TB(e,t,r,{delay:n=0,duration:s=300,repeat:d=0,repeatType:h="loop",ease:l="easeInOut",times:_}={}){const w={[t]:r};_&&(w.offset=_);const E=b5(l,s);return Array.isArray(E)&&(w.easing=E),e.animate(w,{delay:n,duration:s,easing:Array.isArray(E)?"linear":E,fill:"both",iterations:d+1,direction:h==="reverse"?"alternate":"normal"})}const PB=sT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),kv=10,AB=2e4;function EB(e){return wT(e.type)||e.type==="spring"||!x5(e.ease)}function CB(e,t){const r=new jT({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:e[0]};const s=[];let d=0;for(;!n.done&&d<AB;)n=r.sample(d),s.push(n.value),d+=kv;return{times:void 0,keyframes:s,duration:d-kv,ease:"linear"}}const rD={anticipate:D5,backInOut:O5,circInOut:j5};function MB(e){return e in rD}class YA extends X5{constructor(t){super(t);const{name:r,motionValue:n,element:s,keyframes:d}=this.options;this.resolver=new K5(d,(h,l)=>this.onKeyframesResolved(h,l),r,n,s),this.resolver.scheduleResolve()}initPlayback(t,r){let{duration:n=300,times:s,ease:d,type:h,motionValue:l,name:_,startTime:w}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof d=="string"&&Cv()&&MB(d)&&(d=rD[d]),EB(this.options)){const{onComplete:A,onUpdate:M,motionValue:N,element:U,...B}=this.options,L=CB(t,B);t=L.keyframes,t.length===1&&(t[1]=t[0]),n=L.duration,s=L.times,d=L.ease,h="keyframes"}const E=TB(l.owner.current,_,t,{...this.options,duration:n,times:s,ease:d});return E.startTime=w??this.calcStartTime(),this.pendingTimeline?(jA(E,this.pendingTimeline),this.pendingTimeline=void 0):E.onfinish=()=>{const{onComplete:A}=this.options;l.set(F0(t,this.options,r)),A&&A(),this.cancel(),this.resolveFinishedPromise()},{animation:E,duration:n,times:s,type:h,ease:d,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:r}=t;return tc(r)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:r}=t;return tc(r.currentTime||0)}set time(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=ec(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:r}=t;return r.playbackRate}set speed(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:r}=t;return r.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:r}=t;return r.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:r}=this;if(!r)return as;const{animation:n}=r;jA(n,t)}return as}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:r,keyframes:n,duration:s,type:d,ease:h,times:l}=t;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:w,onUpdate:E,onComplete:A,element:M,...N}=this.options,U=new jT({...N,keyframes:n,duration:s,type:d,ease:h,times:l,isGenerator:!0}),B=ec(this.time);w.setWithVelocity(U.sample(B-kv).value,U.sample(B).value,kv)}const{onStop:_}=this.options;_&&_(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:r,name:n,repeatDelay:s,repeatType:d,damping:h,type:l}=t;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:_,transformTemplate:w}=r.owner.getProps();return PB()&&n&&SB.has(n)&&!_&&!w&&!s&&d!=="mirror"&&h!==0&&l!=="inertia"}}const IB={type:"spring",stiffness:500,damping:25,restSpeed:10},kB=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),OB={type:"keyframes",duration:.8},DB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},RB=(e,{keyframes:t})=>t.length>2?OB:Vf.has(e)?e.startsWith("scale")?kB(t[1]):IB:DB;function jB({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:d,repeatType:h,repeatDelay:l,from:_,elapsed:w,...E}){return!!Object.keys(E).length}const zT=(e,t,r,n={},s,d)=>h=>{const l=bT(n,e)||{},_=l.delay||n.delay||0;let{elapsed:w=0}=n;w=w-ec(_);let E={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-w,onUpdate:M=>{t.set(M),l.onUpdate&&l.onUpdate(M)},onComplete:()=>{h(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:d?void 0:s};jB(l)||(E={...E,...RB(e,E)}),E.duration&&(E.duration=ec(E.duration)),E.repeatDelay&&(E.repeatDelay=ec(E.repeatDelay)),E.from!==void 0&&(E.keyframes[0]=E.from);let A=!1;if((E.type===!1||E.duration===0&&!E.repeatDelay)&&(E.duration=0,E.delay===0&&(A=!0)),A&&!d&&t.get()!==void 0){const M=F0(E.keyframes,l);if(M!==void 0)return zn.update(()=>{E.onUpdate(M),E.onComplete()}),new eN([])}return!d&&YA.supports(E)?new YA(E):new jT(E)};function zB({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function nD(e,t,{delay:r=0,transitionOverride:n,type:s}={}){var d;let{transition:h=e.getDefaultTransition(),transitionEnd:l,..._}=t;n&&(h=n);const w=[],E=s&&e.animationState&&e.animationState.getState()[s];for(const A in _){const M=e.getValue(A,(d=e.latestValues[A])!==null&&d!==void 0?d:null),N=_[A];if(N===void 0||E&&zB(E,A))continue;const U={delay:r,...bT(h||{},A)};let B=!1;if(window.MotionHandoffAnimation){const K=E5(e);if(K){const Q=window.MotionHandoffAnimation(K,A,zn);Q!==null&&(U.startTime=Q,B=!0)}}b2(e,A),M.start(zT(A,M,N,e.shouldReduceMotion&&P5.has(A)?{type:!1}:U,e,B));const L=M.animation;L&&w.push(L)}return l&&Promise.all(w).then(()=>{zn.update(()=>{l&&pN(e,l)})}),w}function C2(e,t,r={}){var n;const s=B0(e,t,r.type==="exit"?(n=e.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:d=e.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(d=r.transitionOverride);const h=s?()=>Promise.all(nD(e,s,r)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(w=0)=>{const{delayChildren:E=0,staggerChildren:A,staggerDirection:M}=d;return LB(e,t,E+w,A,M,r)}:()=>Promise.resolve(),{when:_}=d;if(_){const[w,E]=_==="beforeChildren"?[h,l]:[l,h];return w().then(()=>E())}else return Promise.all([h(),l(r.delay)])}function LB(e,t,r=0,n=0,s=1,d){const h=[],l=(e.variantChildren.size-1)*n,_=s===1?(w=0)=>w*n:(w=0)=>l-w*n;return Array.from(e.variantChildren).sort(NB).forEach((w,E)=>{w.notify("AnimationStart",t),h.push(C2(w,t,{...d,delay:r+_(E)}).then(()=>w.notify("AnimationComplete",t)))}),Promise.all(h)}function NB(e,t){return e.sortNodePosition(t)}function BB(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(d=>C2(e,d,r));n=Promise.all(s)}else if(typeof t=="string")n=C2(e,t,r);else{const s=typeof t=="function"?B0(e,t,r.custom):t;n=Promise.all(nD(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}const FB=uT.length;function iD(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?iD(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<FB;r++){const n=uT[r],s=e.props[n];(rg(s)||s===!1)&&(t[n]=s)}return t}const $B=[...lT].reverse(),VB=lT.length;function UB(e){return t=>Promise.all(t.map(({animation:r,options:n})=>BB(e,r,n)))}function qB(e){let t=UB(e),r=JA(),n=!0;const s=_=>(w,E)=>{var A;const M=B0(e,E,_==="exit"?(A=e.presenceContext)===null||A===void 0?void 0:A.custom:void 0);if(M){const{transition:N,transitionEnd:U,...B}=M;w={...w,...B,...U}}return w};function d(_){t=_(e)}function h(_){const{props:w}=e,E=iD(e.parent)||{},A=[],M=new Set;let N={},U=1/0;for(let L=0;L<VB;L++){const K=$B[L],Q=r[K],J=w[K]!==void 0?w[K]:E[K],ie=rg(J),Z=K===_?Q.isActive:null;Z===!1&&(U=L);let X=J===E[K]&&J!==w[K]&&ie;if(X&&n&&e.manuallyAnimateOnMount&&(X=!1),Q.protectedKeys={...N},!Q.isActive&&Z===null||!J&&!Q.prevProp||L0(J)||typeof J=="boolean")continue;const le=WB(Q.prevProp,J);let de=le||K===_&&Q.isActive&&!X&&ie||L>U&&ie,Pe=!1;const Fe=Array.isArray(J)?J:[J];let be=Fe.reduce(s(K),{});Z===!1&&(be={});const{prevResolvedValues:Ue={}}=Q,Ve={...Ue,...be},Ze=et=>{de=!0,M.has(et)&&(Pe=!0,M.delete(et)),Q.needsAnimating[et]=!0;const Ge=e.getValue(et);Ge&&(Ge.liveStyle=!1)};for(const et in Ve){const Ge=be[et],rt=Ue[et];if(N.hasOwnProperty(et))continue;let ge=!1;v2(Ge)&&v2(rt)?ge=!y5(Ge,rt):ge=Ge!==rt,ge?Ge!=null?Ze(et):M.add(et):Ge!==void 0&&M.has(et)?Ze(et):Q.protectedKeys[et]=!0}Q.prevProp=J,Q.prevResolvedValues=be,Q.isActive&&(N={...N,...be}),n&&e.blockInitialAnimation&&(de=!1),de&&(!(X&&le)||Pe)&&A.push(...Fe.map(et=>({animation:et,options:{type:K}})))}if(M.size){const L={};M.forEach(K=>{const Q=e.getBaseTarget(K),J=e.getValue(K);J&&(J.liveStyle=!0),L[K]=Q??null}),A.push({animation:L})}let B=!!A.length;return n&&(w.initial===!1||w.initial===w.animate)&&!e.manuallyAnimateOnMount&&(B=!1),n=!1,B?t(A):Promise.resolve()}function l(_,w){var E;if(r[_].isActive===w)return Promise.resolve();(E=e.variantChildren)===null||E===void 0||E.forEach(M=>{var N;return(N=M.animationState)===null||N===void 0?void 0:N.setActive(_,w)}),r[_].isActive=w;const A=h(_);for(const M in r)r[M].protectedKeys={};return A}return{animateChanges:h,setActive:l,setAnimateFunction:d,getState:()=>r,reset:()=>{r=JA(),n=!0}}}function WB(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!y5(t,e):!1}function vf(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function JA(){return{animate:vf(!0),whileInView:vf(),whileHover:vf(),whileTap:vf(),whileDrag:vf(),whileFocus:vf(),exit:vf()}}class sh{constructor(t){this.isMounted=!1,this.node=t}update(){}}class GB extends sh{constructor(t){super(t),t.animationState||(t.animationState=qB(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();L0(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let HB=0;class ZB extends sh{constructor(){super(...arguments),this.id=HB++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const KB={animation:{Feature:GB},exit:{Feature:ZB}};function og(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function Hg(e){return{point:{x:e.pageX,y:e.pageY}}}const XB=e=>t=>TT(t)&&e(t,Hg(t));function Gm(e,t,r,n){return og(e,t,XB(r),n)}const QA=(e,t)=>Math.abs(e-t);function YB(e,t){const r=QA(e.x,t.x),n=QA(e.y,t.y);return Math.sqrt(r**2+n**2)}class aD{constructor(t,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:d=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=ax(this.lastMoveEventInfo,this.history),M=this.startEvent!==null,N=YB(A.offset,{x:0,y:0})>=3;if(!M&&!N)return;const{point:U}=A,{timestamp:B}=va;this.history.push({...U,timestamp:B});const{onStart:L,onMove:K}=this.handlers;M||(L&&L(this.lastMoveEvent,A),this.startEvent=this.lastMoveEvent),K&&K(this.lastMoveEvent,A)},this.handlePointerMove=(A,M)=>{this.lastMoveEvent=A,this.lastMoveEventInfo=ix(M,this.transformPagePoint),zn.update(this.updatePoint,!0)},this.handlePointerUp=(A,M)=>{this.end();const{onEnd:N,onSessionEnd:U,resumeAnimation:B}=this.handlers;if(this.dragSnapToOrigin&&B&&B(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const L=ax(A.type==="pointercancel"?this.lastMoveEventInfo:ix(M,this.transformPagePoint),this.history);this.startEvent&&N&&N(A,L),U&&U(A,L)},!TT(t))return;this.dragSnapToOrigin=d,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const h=Hg(t),l=ix(h,this.transformPagePoint),{point:_}=l,{timestamp:w}=va;this.history=[{..._,timestamp:w}];const{onSessionStart:E}=r;E&&E(t,ax(l,this.history)),this.removeListeners=Gg(Gm(this.contextWindow,"pointermove",this.handlePointerMove),Gm(this.contextWindow,"pointerup",this.handlePointerUp),Gm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ih(this.updatePoint)}}function ix(e,t){return t?{point:t(e.point)}:e}function eE(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ax({point:e},t){return{point:e,delta:eE(e,oD(t)),offset:eE(e,JB(t)),velocity:QB(t,.1)}}function JB(e){return e[0]}function oD(e){return e[e.length-1]}function QB(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=oD(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>ec(t)));)r--;if(!n)return{x:0,y:0};const d=tc(s.timestamp-n.timestamp);if(d===0)return{x:0,y:0};const h={x:(s.x-n.x)/d,y:(s.y-n.y)/d};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}const sD=1e-4,eF=1-sD,tF=1+sD,lD=.01,rF=0-lD,nF=0+lD;function os(e){return e.max-e.min}function iF(e,t,r){return Math.abs(e-t)<=r}function tE(e,t,r,n=.5){e.origin=n,e.originPoint=Zn(t.min,t.max,e.origin),e.scale=os(r)/os(t),e.translate=Zn(r.min,r.max,e.origin)-e.originPoint,(e.scale>=eF&&e.scale<=tF||isNaN(e.scale))&&(e.scale=1),(e.translate>=rF&&e.translate<=nF||isNaN(e.translate))&&(e.translate=0)}function Hm(e,t,r,n){tE(e.x,t.x,r.x,n?n.originX:void 0),tE(e.y,t.y,r.y,n?n.originY:void 0)}function rE(e,t,r){e.min=r.min+t.min,e.max=e.min+os(t)}function aF(e,t,r){rE(e.x,t.x,r.x),rE(e.y,t.y,r.y)}function nE(e,t,r){e.min=t.min-r.min,e.max=e.min+os(t)}function Zm(e,t,r){nE(e.x,t.x,r.x),nE(e.y,t.y,r.y)}function oF(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Zn(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Zn(r,e,n.max):Math.min(e,r)),e}function iE(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function sF(e,{top:t,left:r,bottom:n,right:s}){return{x:iE(e.x,r,s),y:iE(e.y,t,n)}}function aE(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function lF(e,t){return{x:aE(e.x,t.x),y:aE(e.y,t.y)}}function uF(e,t){let r=.5;const n=os(e),s=os(t);return s>n?r=sp(t.min,t.max-n,e.min):n>s&&(r=sp(e.min,e.max-s,t.min)),ac(0,1,r)}function cF(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const M2=.35;function hF(e=M2){return e===!1?e=0:e===!0&&(e=M2),{x:oE(e,"left","right"),y:oE(e,"top","bottom")}}function oE(e,t,r){return{min:sE(e,t),max:sE(e,r)}}function sE(e,t){return typeof e=="number"?e:e[t]||0}const lE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Yd=()=>({x:lE(),y:lE()}),uE=()=>({min:0,max:0}),hi=()=>({x:uE(),y:uE()});function Rs(e){return[e("x"),e("y")]}function uD({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function fF({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function dF(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function ox(e){return e===void 0||e===1}function I2({scale:e,scaleX:t,scaleY:r}){return!ox(e)||!ox(t)||!ox(r)}function xf(e){return I2(e)||cD(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function cD(e){return cE(e.x)||cE(e.y)}function cE(e){return e&&e!=="0%"}function Ov(e,t,r){const n=e-r,s=t*n;return r+s}function hE(e,t,r,n,s){return s!==void 0&&(e=Ov(e,s,n)),Ov(e,r,n)+t}function k2(e,t=0,r=1,n,s){e.min=hE(e.min,t,r,n,s),e.max=hE(e.max,t,r,n,s)}function hD(e,{x:t,y:r}){k2(e.x,t.translate,t.scale,t.originPoint),k2(e.y,r.translate,r.scale,r.originPoint)}const fE=.999999999999,dE=1.0000000000001;function pF(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let d,h;for(let l=0;l<s;l++){d=r[l],h=d.projectionDelta;const{visualElement:_}=d.options;_&&_.props.style&&_.props.style.display==="contents"||(n&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Qd(e,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),h&&(t.x*=h.x.scale,t.y*=h.y.scale,hD(e,h)),n&&xf(d.latestValues)&&Qd(e,d.latestValues))}t.x<dE&&t.x>fE&&(t.x=1),t.y<dE&&t.y>fE&&(t.y=1)}function Jd(e,t){e.min=e.min+t,e.max=e.max+t}function pE(e,t,r,n,s=.5){const d=Zn(e.min,e.max,s);k2(e,t,r,d,n)}function Qd(e,t){pE(e.x,t.x,t.scaleX,t.scale,t.originX),pE(e.y,t.y,t.scaleY,t.scale,t.originY)}function fD(e,t){return uD(dF(e.getBoundingClientRect(),t))}function mF(e,t,r){const n=fD(e,r),{scroll:s}=t;return s&&(Jd(n.x,s.offset.x),Jd(n.y,s.offset.y)),n}const dD=({current:e})=>e?e.ownerDocument.defaultView:null,gF=new WeakMap;class yF{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hi(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=E=>{const{dragSnapToOrigin:A}=this.getProps();A?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Hg(E).point)},d=(E,A)=>{const{drag:M,dragPropagation:N,onDragStart:U}=this.getProps();if(M&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=uN(M),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Rs(L=>{let K=this.getAxisMotionValue(L).get()||0;if(lu.test(K)){const{projection:Q}=this.visualElement;if(Q&&Q.layout){const J=Q.layout.layoutBox[L];J&&(K=os(J)*(parseFloat(K)/100))}}this.originPoint[L]=K}),U&&zn.postRender(()=>U(E,A)),b2(this.visualElement,"transform");const{animationState:B}=this.visualElement;B&&B.setActive("whileDrag",!0)},h=(E,A)=>{const{dragPropagation:M,dragDirectionLock:N,onDirectionLock:U,onDrag:B}=this.getProps();if(!M&&!this.openDragLock)return;const{offset:L}=A;if(N&&this.currentDirection===null){this.currentDirection=vF(L),this.currentDirection!==null&&U&&U(this.currentDirection);return}this.updateAxis("x",A.point,L),this.updateAxis("y",A.point,L),this.visualElement.render(),B&&B(E,A)},l=(E,A)=>this.stop(E,A),_=()=>Rs(E=>{var A;return this.getAnimationState(E)==="paused"&&((A=this.getAxisMotionValue(E).animation)===null||A===void 0?void 0:A.play())}),{dragSnapToOrigin:w}=this.getProps();this.panSession=new aD(t,{onSessionStart:s,onStart:d,onMove:h,onSessionEnd:l,resumeAnimation:_},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:w,contextWindow:dD(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:d}=this.getProps();d&&zn.postRender(()=>d(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!ev(t,s,this.currentDirection))return;const d=this.getAxisMotionValue(t);let h=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(h=oF(h,this.constraints[t],this.elastic[t])),d.set(h)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,d=this.constraints;r&&Kd(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=sF(s.layoutBox,r):this.constraints=!1,this.elastic=hF(n),d!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Rs(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=cF(s.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Kd(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const d=mF(n,s.root,this.visualElement.getTransformPagePoint());let h=lF(s.layout.layoutBox,d);if(r){const l=r(fF(h));this.hasMutatedConstraints=!!l,l&&(h=uD(l))}return h}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:d,dragSnapToOrigin:h,onDragTransitionEnd:l}=this.getProps(),_=this.constraints||{},w=Rs(E=>{if(!ev(E,r,this.currentDirection))return;let A=_&&_[E]||{};h&&(A={min:0,max:0});const M=s?200:1e6,N=s?40:1e7,U={type:"inertia",velocity:n?t[E]:0,bounceStiffness:M,bounceDamping:N,timeConstant:750,restDelta:1,restSpeed:10,...d,...A};return this.startAxisValueAnimation(E,U)});return Promise.all(w).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return b2(this.visualElement,t),n.start(zT(t,n,0,r,this.visualElement,!1))}stopAnimation(){Rs(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Rs(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Rs(r=>{const{drag:n}=this.getProps();if(!ev(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,d=this.getAxisMotionValue(r);if(s&&s.layout){const{min:h,max:l}=s.layout.layoutBox[r];d.set(t[r]-Zn(h,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Kd(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Rs(h=>{const l=this.getAxisMotionValue(h);if(l&&this.constraints!==!1){const _=l.get();s[h]=uF({min:_,max:_},this.constraints[h])}});const{transformTemplate:d}=this.visualElement.getProps();this.visualElement.current.style.transform=d?d({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Rs(h=>{if(!ev(h,t,null))return;const l=this.getAxisMotionValue(h),{min:_,max:w}=this.constraints[h];l.set(Zn(_,w,s[h]))})}addListeners(){if(!this.visualElement.current)return;gF.set(this.visualElement,this);const t=this.visualElement.current,r=Gm(t,"pointerdown",_=>{const{drag:w,dragListener:E=!0}=this.getProps();w&&E&&this.start(_)}),n=()=>{const{dragConstraints:_}=this.getProps();Kd(_)&&_.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,d=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),zn.read(n);const h=og(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",(({delta:_,hasLayoutChanged:w})=>{this.isDragging&&w&&(Rs(E=>{const A=this.getAxisMotionValue(E);A&&(this.originPoint[E]+=_[E].translate,A.set(A.get()+_[E].translate))}),this.visualElement.render())}));return()=>{h(),r(),d(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:d=!1,dragElastic:h=M2,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:d,dragElastic:h,dragMomentum:l}}}function ev(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function vF(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class _F extends sh{constructor(t){super(t),this.removeGroupControls=as,this.removeListeners=as,this.controls=new yF(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||as}unmount(){this.removeGroupControls(),this.removeListeners()}}const mE=e=>(t,r)=>{e&&zn.postRender(()=>e(t,r))};class xF extends sh{constructor(){super(...arguments),this.removePointerDownListener=as}onPointerDown(t){this.session=new aD(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:dD(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:mE(t),onStart:mE(r),onMove:n,onEnd:(d,h)=>{delete this.session,s&&zn.postRender(()=>s(d,h))}}}mount(){this.removePointerDownListener=Gm(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const _v={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gE(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Mm={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(gr.test(e))e=parseFloat(e);else return e;const r=gE(e,t.target.x),n=gE(e,t.target.y);return`${r}% ${n}%`}},bF={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=ah.parse(e);if(s.length>5)return n;const d=ah.createTransformer(e),h=typeof s[0]!="number"?1:0,l=r.x.scale*t.x,_=r.y.scale*t.y;s[0+h]/=l,s[1+h]/=_;const w=Zn(l,_,.5);return typeof s[2+h]=="number"&&(s[2+h]/=w),typeof s[3+h]=="number"&&(s[3+h]/=w),d(s)}};class wF extends Se.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:d}=t;V8(SF),d&&(r.group&&r.group.add(d),n&&n.register&&s&&n.register(d),d.root.didUpdate(),d.addEventListener("animationComplete",()=>{this.safeToRemove()}),d.setOptions({...d.options,onExitComplete:()=>this.safeToRemove()})),_v.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:d}=this.props,h=n.projection;return h&&(h.isPresent=d,s||t.layoutDependency!==r||r===void 0?h.willUpdate():this.safeToRemove(),t.isPresent!==d&&(d?h.promote():h.relegate()||zn.postRender(()=>{const l=h.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),hT.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function pD(e){const[t,r]=X4(),n=Se.useContext(nT);return q.jsx(wF,{...e,layoutGroup:n,switchLayoutGroup:Se.useContext(i5),isPresent:t,safeToRemove:r})}const SF={borderRadius:{...Mm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Mm,borderTopRightRadius:Mm,borderBottomLeftRadius:Mm,borderBottomRightRadius:Mm,boxShadow:bF};function TF(e,t,r){const n=Va(e)?e:ig(e);return n.start(zT("",n,t,r)),n.animation}function PF(e){return e instanceof SVGElement&&e.tagName!=="svg"}const AF=(e,t)=>e.depth-t.depth;class EF{constructor(){this.children=[],this.isDirty=!1}add(t){PT(this.children,t),this.isDirty=!0}remove(t){AT(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(AF),this.isDirty=!1,this.children.forEach(t)}}function CF(e,t){const r=uu.now(),n=({timestamp:s})=>{const d=s-r;d>=t&&(ih(n),e(d-t))};return zn.read(n,!0),()=>ih(n)}const mD=["TopLeft","TopRight","BottomLeft","BottomRight"],MF=mD.length,yE=e=>typeof e=="string"?parseFloat(e):e,vE=e=>typeof e=="number"||gr.test(e);function IF(e,t,r,n,s,d){s?(e.opacity=Zn(0,r.opacity!==void 0?r.opacity:1,kF(n)),e.opacityExit=Zn(t.opacity!==void 0?t.opacity:1,0,OF(n))):d&&(e.opacity=Zn(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let h=0;h<MF;h++){const l=`border${mD[h]}Radius`;let _=_E(t,l),w=_E(r,l);if(_===void 0&&w===void 0)continue;_||(_=0),w||(w=0),_===0||w===0||vE(_)===vE(w)?(e[l]=Math.max(Zn(yE(_),yE(w),n),0),(lu.test(w)||lu.test(_))&&(e[l]+="%")):e[l]=w}(t.rotate||r.rotate)&&(e.rotate=Zn(t.rotate||0,r.rotate||0,n))}function _E(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const kF=gD(0,.5,R5),OF=gD(.5,.95,as);function gD(e,t,r){return n=>n<e?0:n>t?1:r(sp(e,t,n))}function xE(e,t){e.min=t.min,e.max=t.max}function Ms(e,t){xE(e.x,t.x),xE(e.y,t.y)}function bE(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function wE(e,t,r,n,s){return e-=t,e=Ov(e,1/r,n),s!==void 0&&(e=Ov(e,1/s,n)),e}function DF(e,t=0,r=1,n=.5,s,d=e,h=e){if(lu.test(t)&&(t=parseFloat(t),t=Zn(h.min,h.max,t/100)-h.min),typeof t!="number")return;let l=Zn(d.min,d.max,n);e===d&&(l-=t),e.min=wE(e.min,t,r,l,s),e.max=wE(e.max,t,r,l,s)}function SE(e,t,[r,n,s],d,h){DF(e,t[r],t[n],t[s],t.scale,d,h)}const RF=["x","scaleX","originX"],jF=["y","scaleY","originY"];function TE(e,t,r,n){SE(e.x,t,RF,r?r.x:void 0,n?n.x:void 0),SE(e.y,t,jF,r?r.y:void 0,n?n.y:void 0)}function PE(e){return e.translate===0&&e.scale===1}function yD(e){return PE(e.x)&&PE(e.y)}function AE(e,t){return e.min===t.min&&e.max===t.max}function zF(e,t){return AE(e.x,t.x)&&AE(e.y,t.y)}function EE(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function vD(e,t){return EE(e.x,t.x)&&EE(e.y,t.y)}function CE(e){return os(e.x)/os(e.y)}function ME(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class LF{constructor(){this.members=[]}add(t){PT(this.members,t),t.scheduleRender()}remove(t){if(AT(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const d=this.members[s];if(d.isPresent!==!1){n=d;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function NF(e,t,r){let n="";const s=e.x.translate/t.x,d=e.y.translate/t.y,h=(r==null?void 0:r.z)||0;if((s||d||h)&&(n=`translate3d(${s}px, ${d}px, ${h}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:w,rotate:E,rotateX:A,rotateY:M,skewX:N,skewY:U}=r;w&&(n=`perspective(${w}px) ${n}`),E&&(n+=`rotate(${E}deg) `),A&&(n+=`rotateX(${A}deg) `),M&&(n+=`rotateY(${M}deg) `),N&&(n+=`skewX(${N}deg) `),U&&(n+=`skewY(${U}deg) `)}const l=e.x.scale*t.x,_=e.y.scale*t.y;return(l!==1||_!==1)&&(n+=`scale(${l}, ${_})`),n||"none"}const bf={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},$m=typeof window<"u"&&window.MotionDebug!==void 0,sx=["","X","Y","Z"],BF={visibility:"hidden"},IE=1e3;let FF=0;function lx(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function _D(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=E5(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:d}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",zn,!(s||d))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&_D(n)}function xD({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(h={},l=t==null?void 0:t()){this.id=FF++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,$m&&(bf.totalNodes=bf.resolvedTargetDeltas=bf.recalculatedProjection=0),this.nodes.forEach(UF),this.nodes.forEach(ZF),this.nodes.forEach(KF),this.nodes.forEach(qF),$m&&window.MotionDebug.record(bf)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let _=0;_<this.path.length;_++)this.path[_].shouldResetTransform=!0;this.root===this&&(this.nodes=new EF)}addEventListener(h,l){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new ET),this.eventHandlers.get(h).add(l)}notifyListeners(h,...l){const _=this.eventHandlers.get(h);_&&_.notify(...l)}hasListeners(h){return this.eventHandlers.has(h)}mount(h,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=PF(h),this.instance=h;const{layoutId:_,layout:w,visualElement:E}=this.options;if(E&&!E.current&&E.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(w||_)&&(this.isLayoutDirty=!0),e){let A;const M=()=>this.root.updateBlockedByResize=!1;e(h,()=>{this.root.updateBlockedByResize=!0,A&&A(),A=CF(M,250),_v.hasAnimatedSinceResize&&(_v.hasAnimatedSinceResize=!1,this.nodes.forEach(OE))})}_&&this.root.registerSharedNode(_,this),this.options.animate!==!1&&E&&(_||w)&&this.addEventListener("didUpdate",({delta:A,hasLayoutChanged:M,hasRelativeTargetChanged:N,layout:U})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const B=this.options.transition||E.getDefaultTransition()||e$,{onLayoutAnimationStart:L,onLayoutAnimationComplete:K}=E.getProps(),Q=!this.targetLayout||!vD(this.targetLayout,U)||N,J=!M&&N;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||J||M&&(Q||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(A,J);const ie={...bT(B,"layout"),onPlay:L,onComplete:K};(E.shouldReduceMotion||this.options.layoutRoot)&&(ie.delay=0,ie.type=!1),this.startAnimation(ie)}else M||OE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=U})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ih(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(XF),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&_D(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let E=0;E<this.path.length;E++){const A=this.path[E];A.shouldResetTransform=!0,A.updateScroll("snapshot"),A.options.layoutRoot&&A.willUpdate(!1)}const{layoutId:l,layout:_}=this.options;if(l===void 0&&!_)return;const w=this.getTransformTemplate();this.prevTransformTemplateValue=w?w(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kE);return}this.isUpdating||this.nodes.forEach(GF),this.isUpdating=!1,this.nodes.forEach(HF),this.nodes.forEach($F),this.nodes.forEach(VF),this.clearAllSnapshots();const l=uu.now();va.delta=ac(0,1e3/60,l-va.timestamp),va.timestamp=l,va.isProcessing=!0,J_.update.process(va),J_.preRender.process(va),J_.render.process(va),va.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,hT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(WF),this.sharedNodes.forEach(YF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,zn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){zn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let _=0;_<this.path.length;_++)this.path[_].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutCorrected=hi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(l=!1),l){const _=n(this.instance);this.scroll={animationId:this.root.animationId,phase:h,isRoot:_,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:_}}}resetTransform(){if(!s)return;const h=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!yD(this.projectionDelta),_=this.getTransformTemplate(),w=_?_(this.latestValues,""):void 0,E=w!==this.prevTransformTemplateValue;h&&(l||xf(this.latestValues)||E)&&(s(this.instance,w),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const l=this.measurePageBox();let _=this.removeElementScroll(l);return h&&(_=this.removeTransform(_)),t$(_),{animationId:this.root.animationId,measuredBox:l,layoutBox:_,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:l}=this.options;if(!l)return hi();const _=l.measureViewportBox();if(!(((h=this.scroll)===null||h===void 0?void 0:h.wasRoot)||this.path.some(r$))){const{scroll:E}=this.root;E&&(Jd(_.x,E.offset.x),Jd(_.y,E.offset.y))}return _}removeElementScroll(h){var l;const _=hi();if(Ms(_,h),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return _;for(let w=0;w<this.path.length;w++){const E=this.path[w],{scroll:A,options:M}=E;E!==this.root&&A&&M.layoutScroll&&(A.wasRoot&&Ms(_,h),Jd(_.x,A.offset.x),Jd(_.y,A.offset.y))}return _}applyTransform(h,l=!1){const _=hi();Ms(_,h);for(let w=0;w<this.path.length;w++){const E=this.path[w];!l&&E.options.layoutScroll&&E.scroll&&E!==E.root&&Qd(_,{x:-E.scroll.offset.x,y:-E.scroll.offset.y}),xf(E.latestValues)&&Qd(_,E.latestValues)}return xf(this.latestValues)&&Qd(_,this.latestValues),_}removeTransform(h){const l=hi();Ms(l,h);for(let _=0;_<this.path.length;_++){const w=this.path[_];if(!w.instance||!xf(w.latestValues))continue;I2(w.latestValues)&&w.updateSnapshot();const E=hi(),A=w.measurePageBox();Ms(E,A),TE(l,w.latestValues,w.snapshot?w.snapshot.layoutBox:void 0,E)}return xf(this.latestValues)&&TE(l,this.latestValues),l}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==va.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){var l;const _=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=_.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=_.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=_.isSharedProjectionDirty);const w=!!this.resumingFrom||this!==_;if(!(h||w&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:A,layoutId:M}=this.options;if(!(!this.layout||!(A||M))){if(this.resolvedRelativeTargetAt=va.timestamp,!this.targetDelta&&!this.relativeTarget){const N=this.getClosestProjectingParent();N&&N.layout&&this.animationProgress!==1?(this.relativeParent=N,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hi(),this.relativeTargetOrigin=hi(),Zm(this.relativeTargetOrigin,this.layout.layoutBox,N.layout.layoutBox),Ms(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=hi(),this.targetWithTransforms=hi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),aF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ms(this.target,this.layout.layoutBox),hD(this.target,this.targetDelta)):Ms(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const N=this.getClosestProjectingParent();N&&!!N.resumingFrom==!!this.resumingFrom&&!N.options.layoutScroll&&N.target&&this.animationProgress!==1?(this.relativeParent=N,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hi(),this.relativeTargetOrigin=hi(),Zm(this.relativeTargetOrigin,this.target,N.target),Ms(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}$m&&bf.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||I2(this.parent.latestValues)||cD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var h;const l=this.getLead(),_=!!this.resumingFrom||this!==l;let w=!0;if((this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty)&&(w=!1),_&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(w=!1),this.resolvedRelativeTargetAt===va.timestamp&&(w=!1),w)return;const{layout:E,layoutId:A}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(E||A))return;Ms(this.layoutCorrected,this.layout.layoutBox);const M=this.treeScale.x,N=this.treeScale.y;pF(this.layoutCorrected,this.treeScale,this.path,_),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=hi());const{target:U}=l;if(!U){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(bE(this.prevProjectionDelta.x,this.projectionDelta.x),bE(this.prevProjectionDelta.y,this.projectionDelta.y)),Hm(this.projectionDelta,this.layoutCorrected,U,this.latestValues),(this.treeScale.x!==M||this.treeScale.y!==N||!ME(this.projectionDelta.x,this.prevProjectionDelta.x)||!ME(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",U)),$m&&bf.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),h){const _=this.getStack();_&&_.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Yd(),this.projectionDelta=Yd(),this.projectionDeltaWithTransform=Yd()}setAnimationOrigin(h,l=!1){const _=this.snapshot,w=_?_.latestValues:{},E={...this.latestValues},A=Yd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const M=hi(),N=_?_.source:void 0,U=this.layout?this.layout.source:void 0,B=N!==U,L=this.getStack(),K=!L||L.members.length<=1,Q=!!(B&&!K&&this.options.crossfade===!0&&!this.path.some(QF));this.animationProgress=0;let J;this.mixTargetDelta=ie=>{const Z=ie/1e3;DE(A.x,h.x,Z),DE(A.y,h.y,Z),this.setTargetDelta(A),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Zm(M,this.layout.layoutBox,this.relativeParent.layout.layoutBox),JF(this.relativeTarget,this.relativeTargetOrigin,M,Z),J&&zF(this.relativeTarget,J)&&(this.isProjectionDirty=!1),J||(J=hi()),Ms(J,this.relativeTarget)),B&&(this.animationValues=E,IF(E,w,this.latestValues,Z,Q,K)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ih(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=zn.update(()=>{_v.hasAnimatedSinceResize=!0,this.currentAnimation=TF(0,IE,{...h,onUpdate:l=>{this.mixTargetDelta(l),h.onUpdate&&h.onUpdate(l)},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(IE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:l,target:_,layout:w,latestValues:E}=h;if(!(!l||!_||!w)){if(this!==h&&this.layout&&w&&bD(this.options.animationType,this.layout.layoutBox,w.layoutBox)){_=this.target||hi();const A=os(this.layout.layoutBox.x);_.x.min=h.target.x.min,_.x.max=_.x.min+A;const M=os(this.layout.layoutBox.y);_.y.min=h.target.y.min,_.y.max=_.y.min+M}Ms(l,_),Qd(l,E),Hm(this.projectionDeltaWithTransform,this.layoutCorrected,l,E)}}registerSharedNode(h,l){this.sharedNodes.has(h)||this.sharedNodes.set(h,new LF),this.sharedNodes.get(h).add(l);const w=l.options.initialPromotionConfig;l.promote({transition:w?w.transition:void 0,preserveFollowOpacity:w&&w.shouldPreserveFollowOpacity?w.shouldPreserveFollowOpacity(l):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){var h;const{layoutId:l}=this.options;return l?((h=this.getStack())===null||h===void 0?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:l}=this.options;return l?(h=this.getStack())===null||h===void 0?void 0:h.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:l,preserveFollowOpacity:_}={}){const w=this.getStack();w&&w.promote(this,_),h&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let l=!1;const{latestValues:_}=h;if((_.z||_.rotate||_.rotateX||_.rotateY||_.rotateZ||_.skewX||_.skewY)&&(l=!0),!l)return;const w={};_.z&&lx("z",h,w,this.animationValues);for(let E=0;E<sx.length;E++)lx(`rotate${sx[E]}`,h,w,this.animationValues),lx(`skew${sx[E]}`,h,w,this.animationValues);h.render();for(const E in w)h.setStaticValue(E,w[E]),this.animationValues&&(this.animationValues[E]=w[E]);h.scheduleRender()}getProjectionStyles(h){var l,_;if(!this.instance||this.isSVG)return;if(!this.isVisible)return BF;const w={visibility:""},E=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,w.opacity="",w.pointerEvents=yv(h==null?void 0:h.pointerEvents)||"",w.transform=E?E(this.latestValues,""):"none",w;const A=this.getLead();if(!this.projectionDelta||!this.layout||!A.target){const B={};return this.options.layoutId&&(B.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,B.pointerEvents=yv(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!xf(this.latestValues)&&(B.transform=E?E({},""):"none",this.hasProjected=!1),B}const M=A.animationValues||A.latestValues;this.applyTransformsToTarget(),w.transform=NF(this.projectionDeltaWithTransform,this.treeScale,M),E&&(w.transform=E(M,w.transform));const{x:N,y:U}=this.projectionDelta;w.transformOrigin=`${N.origin*100}% ${U.origin*100}% 0`,A.animationValues?w.opacity=A===this?(_=(l=M.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&_!==void 0?_:1:this.preserveOpacity?this.latestValues.opacity:M.opacityExit:w.opacity=A===this?M.opacity!==void 0?M.opacity:"":M.opacityExit!==void 0?M.opacityExit:0;for(const B in Ev){if(M[B]===void 0)continue;const{correct:L,applyTo:K}=Ev[B],Q=w.transform==="none"?M[B]:L(M[B],A);if(K){const J=K.length;for(let ie=0;ie<J;ie++)w[K[ie]]=Q}else w[B]=Q}return this.options.layoutId&&(w.pointerEvents=A===this?yv(h==null?void 0:h.pointerEvents)||"":"none"),w}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>{var l;return(l=h.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(kE),this.root.sharedNodes.clear()}}}function $F(e){e.updateLayout()}function VF(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:d}=e.options,h=r.source!==e.layout.source;d==="size"?Rs(A=>{const M=h?r.measuredBox[A]:r.layoutBox[A],N=os(M);M.min=n[A].min,M.max=M.min+N}):bD(d,r.layoutBox,n)&&Rs(A=>{const M=h?r.measuredBox[A]:r.layoutBox[A],N=os(n[A]);M.max=M.min+N,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[A].max=e.relativeTarget[A].min+N)});const l=Yd();Hm(l,n,r.layoutBox);const _=Yd();h?Hm(_,e.applyTransform(s,!0),r.measuredBox):Hm(_,n,r.layoutBox);const w=!yD(l);let E=!1;if(!e.resumeFrom){const A=e.getClosestProjectingParent();if(A&&!A.resumeFrom){const{snapshot:M,layout:N}=A;if(M&&N){const U=hi();Zm(U,r.layoutBox,M.layoutBox);const B=hi();Zm(B,n,N.layoutBox),vD(U,B)||(E=!0),A.options.layoutRoot&&(e.relativeTarget=B,e.relativeTargetOrigin=U,e.relativeParent=A)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:_,layoutDelta:l,hasLayoutChanged:w,hasRelativeTargetChanged:E})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function UF(e){$m&&bf.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function qF(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function WF(e){e.clearSnapshot()}function kE(e){e.clearMeasurements()}function GF(e){e.isLayoutDirty=!1}function HF(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function OE(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function ZF(e){e.resolveTargetDelta()}function KF(e){e.calcProjection()}function XF(e){e.resetSkewAndRotation()}function YF(e){e.removeLeadSnapshot()}function DE(e,t,r){e.translate=Zn(t.translate,0,r),e.scale=Zn(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function RE(e,t,r,n){e.min=Zn(t.min,r.min,n),e.max=Zn(t.max,r.max,n)}function JF(e,t,r,n){RE(e.x,t.x,r.x,n),RE(e.y,t.y,r.y,n)}function QF(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const e$={duration:.45,ease:[.4,0,.1,1]},jE=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),zE=jE("applewebkit/")&&!jE("chrome/")?Math.round:as;function LE(e){e.min=zE(e.min),e.max=zE(e.max)}function t$(e){LE(e.x),LE(e.y)}function bD(e,t,r){return e==="position"||e==="preserve-aspect"&&!iF(CE(t),CE(r),.2)}function r$(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const n$=xD({attachResizeListener:(e,t)=>og(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ux={current:void 0},wD=xD({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ux.current){const e=new n$({});e.mount(window),e.setOptions({layoutScroll:!0}),ux.current=e}return ux.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),i$={pan:{Feature:xF},drag:{Feature:_F,ProjectionNode:wD,MeasureLayout:pD}};function NE(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,d=n[s];d&&zn.postRender(()=>d(t,Hg(t)))}class a$ extends sh{mount(){const{current:t}=this.node;t&&(this.unmount=iN(t,r=>(NE(this.node,r,"Start"),n=>NE(this.node,n,"End"))))}unmount(){}}class o$ extends sh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Gg(og(this.node.current,"focus",()=>this.onFocus()),og(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function BE(e,t,r){const{props:n}=e;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),d=n[s];d&&zn.postRender(()=>d(t,Hg(t)))}class s$ extends sh{mount(){const{current:t}=this.node;t&&(this.unmount=lN(t,r=>(BE(this.node,r,"Start"),(n,{success:s})=>BE(this.node,n,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const O2=new WeakMap,cx=new WeakMap,l$=e=>{const t=O2.get(e.target);t&&t(e)},u$=e=>{e.forEach(l$)};function c$({root:e,...t}){const r=e||document;cx.has(r)||cx.set(r,{});const n=cx.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(u$,{root:e,...t})),n[s]}function h$(e,t,r){const n=c$(t);return O2.set(e,r),n.observe(e),()=>{O2.delete(e),n.unobserve(e)}}const f$={some:0,all:1};class d$ extends sh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:d}=t,h={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:f$[s]},l=_=>{const{isIntersecting:w}=_;if(this.isInView===w||(this.isInView=w,d&&!w&&this.hasEnteredView))return;w&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",w);const{onViewportEnter:E,onViewportLeave:A}=this.node.getProps(),M=w?E:A;M&&M(_)};return h$(this.node.current,h,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(p$(t,r))&&this.startObserver()}unmount(){}}function p$({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const m$={inView:{Feature:d$},tap:{Feature:s$},focus:{Feature:o$},hover:{Feature:a$}},g$={layout:{ProjectionNode:wD,MeasureLayout:pD}},D2={current:null},SD={current:!1};function y$(){if(SD.current=!0,!!oT)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>D2.current=e.matches;e.addListener(t),t()}else D2.current=!1}const v$=[...Z5,Na,ah],_$=e=>v$.find(H5(e)),FE=new WeakMap;function x$(e,t,r){for(const n in t){const s=t[n],d=r[n];if(Va(s))e.addValue(n,s);else if(Va(d))e.addValue(n,ig(s,{owner:e}));else if(d!==s)if(e.hasValue(n)){const h=e.getValue(n);h.liveStyle===!0?h.jump(s):h.hasAnimated||h.set(s)}else{const h=e.getStaticValue(n);e.addValue(n,ig(h!==void 0?h:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const $E=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class b${scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:d,visualState:h},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=DT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const N=uu.now();this.renderScheduledAt<N&&(this.renderScheduledAt=N,zn.render(this.render,!1,!0))};const{latestValues:_,renderState:w,onUpdate:E}=h;this.onUpdate=E,this.latestValues=_,this.baseTarget={..._},this.initialValues=r.initial?{..._}:{},this.renderState=w,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!d,this.isControllingVariants=N0(r),this.isVariantNode=r5(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:A,...M}=this.scrapeMotionValuesFromProps(r,{},this);for(const N in M){const U=M[N];_[N]!==void 0&&Va(U)&&U.set(_[N],!1)}}mount(t){this.current=t,FE.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),SD.current||y$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:D2.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){FE.delete(this.current),this.projection&&this.projection.unmount(),ih(this.notifyUpdate),ih(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Vf.has(t),s=r.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&zn.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),d=r.on("renderRequest",this.scheduleRender);let h;window.MotionCheckAppearSync&&(h=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),d(),h&&h(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in lp){const r=lp[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const d=this.features[t];d.isMounted?d.update():(d.mount(),d.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hi()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<$E.length;n++){const s=$E[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const d="on"+s,h=t[d];h&&(this.propEventSubscriptions[s]=this.on(s,h))}this.prevMotionValues=x$(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=ig(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){var n;let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(W5(s)||z5(s))?s=parseFloat(s):!_$(s)&&ah.test(r)&&(s=V5(t,r)),this.setBaseTarget(t,Va(s)?s.get():s)),Va(s)?s.get():s}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const h=dT(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);h&&(s=h[t])}if(n&&s!==void 0)return s;const d=this.getBaseTargetFromProps(this.props,t);return d!==void 0&&!Va(d)?d:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new ET),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class TD extends b${constructor(){super(...arguments),this.KeyframeResolver=K5}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Va(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function w$(e){return window.getComputedStyle(e)}class S$ extends TD{constructor(){super(...arguments),this.type="html",this.renderInstance=h5}readValueFromInstance(t,r){if(Vf.has(r)){const n=OT(r);return n&&n.default||0}else{const n=w$(t),s=(l5(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return fD(t,r)}build(t,r,n){gT(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return xT(t,r,n)}}class T$ extends TD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=hi}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Vf.has(r)){const n=OT(r);return n&&n.default||0}return r=f5.has(r)?r:cT(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return m5(t,r,n)}build(t,r,n){yT(t,r,this.isSVGTag,n.transformTemplate)}renderInstance(t,r,n,s){d5(t,r,n,s)}mount(t){this.isSVGTag=_T(t.tagName),super.mount(t)}}const P$=(e,t)=>fT(e)?new T$(t):new S$(t,{allowProjection:e!==Se.Fragment}),A$=Y8({...KB,...m$,...i$,...g$},P$),zr=f8(A$);var Zg={};(function e(t,r,n,s){var d=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),h=typeof Path2D=="function"&&typeof DOMMatrix=="function",l=(function(){if(!t.OffscreenCanvas)return!1;try{var ge=new OffscreenCanvas(1,1),ne=ge.getContext("2d");ne.fillRect(0,0,1,1);var Ce=ge.transferToImageBitmap();ne.createPattern(Ce,"no-repeat")}catch{return!1}return!0})();function _(){}function w(ge){var ne=r.exports.Promise,Ce=ne!==void 0?ne:t.Promise;return typeof Ce=="function"?new Ce(ge):(ge(_,_),null)}var E=(function(ge,ne){return{transform:function(Ce){if(ge)return Ce;if(ne.has(Ce))return ne.get(Ce);var nt=new OffscreenCanvas(Ce.width,Ce.height),ht=nt.getContext("2d");return ht.drawImage(Ce,0,0),ne.set(Ce,nt),nt},clear:function(){ne.clear()}}})(l,new Map),A=(function(){var ge=Math.floor(16.666666666666668),ne,Ce,nt={},ht=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(ne=function(pt){var At=Math.random();return nt[At]=requestAnimationFrame(function _t(wt){ht===wt||ht+ge-1<wt?(ht=wt,delete nt[At],pt()):nt[At]=requestAnimationFrame(_t)}),At},Ce=function(pt){nt[pt]&&cancelAnimationFrame(nt[pt])}):(ne=function(pt){return setTimeout(pt,ge)},Ce=function(pt){return clearTimeout(pt)}),{frame:ne,cancel:Ce}})(),M=(function(){var ge,ne,Ce={};function nt(ht){function pt(At,_t){ht.postMessage({options:At||{},callback:_t})}ht.init=function(_t){var wt=_t.transferControlToOffscreen();ht.postMessage({canvas:wt},[wt])},ht.fire=function(_t,wt,ot){if(ne)return pt(_t,null),ne;var It=Math.random().toString(36).slice(2);return ne=w(function(Ft){function at(ar){ar.data.callback===It&&(delete Ce[It],ht.removeEventListener("message",at),ne=null,E.clear(),ot(),Ft())}ht.addEventListener("message",at),pt(_t,It),Ce[It]=at.bind(null,{data:{callback:It}})}),ne},ht.reset=function(){ht.postMessage({reset:!0});for(var _t in Ce)Ce[_t](),delete Ce[_t]}}return function(){if(ge)return ge;if(!n&&d){var ht=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{ge=new Worker(URL.createObjectURL(new Blob([ht])))}catch(pt){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",pt),null}nt(ge)}return ge}})(),N={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function U(ge,ne){return ne?ne(ge):ge}function B(ge){return ge!=null}function L(ge,ne,Ce){return U(ge&&B(ge[ne])?ge[ne]:N[ne],Ce)}function K(ge){return ge<0?0:Math.floor(ge)}function Q(ge,ne){return Math.floor(Math.random()*(ne-ge))+ge}function J(ge){return parseInt(ge,16)}function ie(ge){return ge.map(Z)}function Z(ge){var ne=String(ge).replace(/[^0-9a-f]/gi,"");return ne.length<6&&(ne=ne[0]+ne[0]+ne[1]+ne[1]+ne[2]+ne[2]),{r:J(ne.substring(0,2)),g:J(ne.substring(2,4)),b:J(ne.substring(4,6))}}function X(ge){var ne=L(ge,"origin",Object);return ne.x=L(ne,"x",Number),ne.y=L(ne,"y",Number),ne}function le(ge){ge.width=document.documentElement.clientWidth,ge.height=document.documentElement.clientHeight}function de(ge){var ne=ge.getBoundingClientRect();ge.width=ne.width,ge.height=ne.height}function Pe(ge){var ne=document.createElement("canvas");return ne.style.position="fixed",ne.style.top="0px",ne.style.left="0px",ne.style.pointerEvents="none",ne.style.zIndex=ge,ne}function Fe(ge,ne,Ce,nt,ht,pt,At,_t,wt){ge.save(),ge.translate(ne,Ce),ge.rotate(pt),ge.scale(nt,ht),ge.arc(0,0,1,At,_t,wt),ge.restore()}function be(ge){var ne=ge.angle*(Math.PI/180),Ce=ge.spread*(Math.PI/180);return{x:ge.x,y:ge.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:ge.startVelocity*.5+Math.random()*ge.startVelocity,angle2D:-ne+(.5*Ce-Math.random()*Ce),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:ge.color,shape:ge.shape,tick:0,totalTicks:ge.ticks,decay:ge.decay,drift:ge.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:ge.gravity*3,ovalScalar:.6,scalar:ge.scalar,flat:ge.flat}}function Ue(ge,ne){ne.x+=Math.cos(ne.angle2D)*ne.velocity+ne.drift,ne.y+=Math.sin(ne.angle2D)*ne.velocity+ne.gravity,ne.velocity*=ne.decay,ne.flat?(ne.wobble=0,ne.wobbleX=ne.x+10*ne.scalar,ne.wobbleY=ne.y+10*ne.scalar,ne.tiltSin=0,ne.tiltCos=0,ne.random=1):(ne.wobble+=ne.wobbleSpeed,ne.wobbleX=ne.x+10*ne.scalar*Math.cos(ne.wobble),ne.wobbleY=ne.y+10*ne.scalar*Math.sin(ne.wobble),ne.tiltAngle+=.1,ne.tiltSin=Math.sin(ne.tiltAngle),ne.tiltCos=Math.cos(ne.tiltAngle),ne.random=Math.random()+2);var Ce=ne.tick++/ne.totalTicks,nt=ne.x+ne.random*ne.tiltCos,ht=ne.y+ne.random*ne.tiltSin,pt=ne.wobbleX+ne.random*ne.tiltCos,At=ne.wobbleY+ne.random*ne.tiltSin;if(ge.fillStyle="rgba("+ne.color.r+", "+ne.color.g+", "+ne.color.b+", "+(1-Ce)+")",ge.beginPath(),h&&ne.shape.type==="path"&&typeof ne.shape.path=="string"&&Array.isArray(ne.shape.matrix))ge.fill(et(ne.shape.path,ne.shape.matrix,ne.x,ne.y,Math.abs(pt-nt)*.1,Math.abs(At-ht)*.1,Math.PI/10*ne.wobble));else if(ne.shape.type==="bitmap"){var _t=Math.PI/10*ne.wobble,wt=Math.abs(pt-nt)*.1,ot=Math.abs(At-ht)*.1,It=ne.shape.bitmap.width*ne.scalar,Ft=ne.shape.bitmap.height*ne.scalar,at=new DOMMatrix([Math.cos(_t)*wt,Math.sin(_t)*wt,-Math.sin(_t)*ot,Math.cos(_t)*ot,ne.x,ne.y]);at.multiplySelf(new DOMMatrix(ne.shape.matrix));var ar=ge.createPattern(E.transform(ne.shape.bitmap),"no-repeat");ar.setTransform(at),ge.globalAlpha=1-Ce,ge.fillStyle=ar,ge.fillRect(ne.x-It/2,ne.y-Ft/2,It,Ft),ge.globalAlpha=1}else if(ne.shape==="circle")ge.ellipse?ge.ellipse(ne.x,ne.y,Math.abs(pt-nt)*ne.ovalScalar,Math.abs(At-ht)*ne.ovalScalar,Math.PI/10*ne.wobble,0,2*Math.PI):Fe(ge,ne.x,ne.y,Math.abs(pt-nt)*ne.ovalScalar,Math.abs(At-ht)*ne.ovalScalar,Math.PI/10*ne.wobble,0,2*Math.PI);else if(ne.shape==="star")for(var jt=Math.PI/2*3,br=4*ne.scalar,$e=8*ne.scalar,Er=ne.x,hn=ne.y,lr=5,xr=Math.PI/lr;lr--;)Er=ne.x+Math.cos(jt)*$e,hn=ne.y+Math.sin(jt)*$e,ge.lineTo(Er,hn),jt+=xr,Er=ne.x+Math.cos(jt)*br,hn=ne.y+Math.sin(jt)*br,ge.lineTo(Er,hn),jt+=xr;else ge.moveTo(Math.floor(ne.x),Math.floor(ne.y)),ge.lineTo(Math.floor(ne.wobbleX),Math.floor(ht)),ge.lineTo(Math.floor(pt),Math.floor(At)),ge.lineTo(Math.floor(nt),Math.floor(ne.wobbleY));return ge.closePath(),ge.fill(),ne.tick<ne.totalTicks}function Ve(ge,ne,Ce,nt,ht){var pt=ne.slice(),At=ge.getContext("2d"),_t,wt,ot=w(function(It){function Ft(){_t=wt=null,At.clearRect(0,0,nt.width,nt.height),E.clear(),ht(),It()}function at(){n&&!(nt.width===s.width&&nt.height===s.height)&&(nt.width=ge.width=s.width,nt.height=ge.height=s.height),!nt.width&&!nt.height&&(Ce(ge),nt.width=ge.width,nt.height=ge.height),At.clearRect(0,0,nt.width,nt.height),pt=pt.filter(function(ar){return Ue(At,ar)}),pt.length?_t=A.frame(at):Ft()}_t=A.frame(at),wt=Ft});return{addFettis:function(It){return pt=pt.concat(It),ot},canvas:ge,promise:ot,reset:function(){_t&&A.cancel(_t),wt&&wt()}}}function Ze(ge,ne){var Ce=!ge,nt=!!L(ne||{},"resize"),ht=!1,pt=L(ne,"disableForReducedMotion",Boolean),At=d&&!!L(ne||{},"useWorker"),_t=At?M():null,wt=Ce?le:de,ot=ge&&_t?!!ge.__confetti_initialized:!1,It=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Ft;function at(jt,br,$e){for(var Er=L(jt,"particleCount",K),hn=L(jt,"angle",Number),lr=L(jt,"spread",Number),xr=L(jt,"startVelocity",Number),Ln=L(jt,"decay",Number),Nn=L(jt,"gravity",Number),di=L(jt,"drift",Number),ta=L(jt,"colors",ie),Kn=L(jt,"ticks",Number),Co=L(jt,"shapes"),Mo=L(jt,"scalar"),yt=!!L(jt,"flat"),zi=X(jt),Tn=Er,Xn=[],ho=ge.width*zi.x,St=ge.height*zi.y;Tn--;)Xn.push(be({x:ho,y:St,angle:hn,spread:lr,startVelocity:xr,color:ta[Tn%ta.length],shape:Co[Q(0,Co.length)],ticks:Kn,decay:Ln,gravity:Nn,drift:di,scalar:Mo,flat:yt}));return Ft?Ft.addFettis(Xn):(Ft=Ve(ge,Xn,wt,br,$e),Ft.promise)}function ar(jt){var br=pt||L(jt,"disableForReducedMotion",Boolean),$e=L(jt,"zIndex",Number);if(br&&It)return w(function(xr){xr()});Ce&&Ft?ge=Ft.canvas:Ce&&!ge&&(ge=Pe($e),document.body.appendChild(ge)),nt&&!ot&&wt(ge);var Er={width:ge.width,height:ge.height};_t&&!ot&&_t.init(ge),ot=!0,_t&&(ge.__confetti_initialized=!0);function hn(){if(_t){var xr={getBoundingClientRect:function(){if(!Ce)return ge.getBoundingClientRect()}};wt(xr),_t.postMessage({resize:{width:xr.width,height:xr.height}});return}Er.width=Er.height=null}function lr(){Ft=null,nt&&(ht=!1,t.removeEventListener("resize",hn)),Ce&&ge&&(document.body.contains(ge)&&document.body.removeChild(ge),ge=null,ot=!1)}return nt&&!ht&&(ht=!0,t.addEventListener("resize",hn,!1)),_t?_t.fire(jt,Er,lr):at(jt,Er,lr)}return ar.reset=function(){_t&&_t.reset(),Ft&&Ft.reset()},ar}var Ye;function it(){return Ye||(Ye=Ze(null,{useWorker:!0,resize:!0})),Ye}function et(ge,ne,Ce,nt,ht,pt,At){var _t=new Path2D(ge),wt=new Path2D;wt.addPath(_t,new DOMMatrix(ne));var ot=new Path2D;return ot.addPath(wt,new DOMMatrix([Math.cos(At)*ht,Math.sin(At)*ht,-Math.sin(At)*pt,Math.cos(At)*pt,Ce,nt])),ot}function Ge(ge){if(!h)throw new Error("path confetti are not supported in this browser");var ne,Ce;typeof ge=="string"?ne=ge:(ne=ge.path,Ce=ge.matrix);var nt=new Path2D(ne),ht=document.createElement("canvas"),pt=ht.getContext("2d");if(!Ce){for(var At=1e3,_t=At,wt=At,ot=0,It=0,Ft,at,ar=0;ar<At;ar+=2)for(var jt=0;jt<At;jt+=2)pt.isPointInPath(nt,ar,jt,"nonzero")&&(_t=Math.min(_t,ar),wt=Math.min(wt,jt),ot=Math.max(ot,ar),It=Math.max(It,jt));Ft=ot-_t,at=It-wt;var br=10,$e=Math.min(br/Ft,br/at);Ce=[$e,0,0,$e,-Math.round(Ft/2+_t)*$e,-Math.round(at/2+wt)*$e]}return{type:"path",path:ne,matrix:Ce}}function rt(ge){var ne,Ce=1,nt="#000000",ht='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof ge=="string"?ne=ge:(ne=ge.text,Ce="scalar"in ge?ge.scalar:Ce,ht="fontFamily"in ge?ge.fontFamily:ht,nt="color"in ge?ge.color:nt);var pt=10*Ce,At=""+pt+"px "+ht,_t=new OffscreenCanvas(pt,pt),wt=_t.getContext("2d");wt.font=At;var ot=wt.measureText(ne),It=Math.ceil(ot.actualBoundingBoxRight+ot.actualBoundingBoxLeft),Ft=Math.ceil(ot.actualBoundingBoxAscent+ot.actualBoundingBoxDescent),at=2,ar=ot.actualBoundingBoxLeft+at,jt=ot.actualBoundingBoxAscent+at;It+=at+at,Ft+=at+at,_t=new OffscreenCanvas(It,Ft),wt=_t.getContext("2d"),wt.font=At,wt.fillStyle=nt,wt.fillText(ne,ar,jt);var br=1/Ce;return{type:"bitmap",bitmap:_t.transferToImageBitmap(),matrix:[br,0,0,br,-It*br/2,-Ft*br/2]}}r.exports=function(){return it().apply(this,arguments)},r.exports.reset=function(){it().reset()},r.exports.create=Ze,r.exports.shapeFromPath=Ge,r.exports.shapeFromText=rt})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),Zg,!1);const VE=Zg.exports;Zg.exports.create;function E$({children:e}){const[t,r]=Se.useState(0),[n,s]=Se.useState(!1),[d,h]=Se.useState(!1);Se.useEffect(()=>{console.log(`
    %c   ___  ____ __  __
    %c  |   \\| __|\\ \\ / /
    %c  | |) | _|  \\ V /    DHEERAJ PAPANI
    %c  |___/|___|  \\_/     Architect & Developer
    %c                      https://github.com/dheerajpapani
    `,"color: #3b82f6","color: #3b82f6","color: #3b82f6","color: #3b82f6","color: gray; font-style: italic;")},[]),Se.useEffect(()=>{const w=setTimeout(()=>r(0),1e3);return()=>clearTimeout(w)},[t]);const l=Se.useCallback(w=>{w.preventDefault(),r(E=>{const A=E+1;return A===4?(_(),0):A})},[]),_=()=>{s(!0),h(!1),setTimeout(()=>h(!0),2500);const w=Date.now()+3e3;(function E(){VE({particleCount:5,angle:60,spread:55,origin:{x:0},colors:["#3b82f6","#60a5fa","#ffffff"],zIndex:10001}),VE({particleCount:5,angle:120,spread:55,origin:{x:1},colors:["#3b82f6","#60a5fa","#ffffff"],zIndex:10001}),Date.now()<w&&requestAnimationFrame(E)})()};return q.jsxs(q.Fragment,{children:[q.jsx("div",{onClick:l,style:{cursor:"pointer",display:"inline-block"},children:e}),q.jsx(j0,{children:n&&q.jsx("div",{className:"easter-egg-overlay",onClick:()=>d&&s(!1),style:{cursor:d?"pointer":"default"},children:q.jsx("div",{className:"container noselect",onClick:w=>w.stopPropagation(),children:q.jsxs("div",{className:"canvas",children:[[...Array(25)].map((w,E)=>q.jsx("div",{className:`tracker tr-${E+1}`},E)),q.jsxs("div",{id:"card",children:[q.jsx("p",{id:"prompt",children:"DEVELOPER"}),q.jsxs("div",{className:"logo-3d",children:[q.jsx("div",{className:"circle circle1"}),q.jsx("div",{className:"circle circle2"}),q.jsx("div",{className:"circle circle3"}),q.jsx("div",{className:"circle circle4"})]}),q.jsx("div",{className:"glass"}),q.jsxs("div",{className:"content",children:[q.jsx("span",{className:"title",children:"DHEERAJ PAPANI"}),q.jsxs("span",{className:"text",children:["Architect & Developer",q.jsx("br",{}),"Built with precision and a touch of magic."]})]}),q.jsx("div",{className:"bottom",children:q.jsxs("div",{className:"social-buttons-container",children:[q.jsx("a",{href:"https://github.com/dheerajpapani",target:"_blank",className:"social-button",children:q.jsx(G4,{})}),q.jsx("a",{href:"https://linkedin.com/in/dheerajpapani",target:"_blank",className:"social-button",children:q.jsx(CL,{})}),q.jsx("a",{href:"mailto:dheerajpapani@gmail.com",className:"social-button",children:q.jsx(H4,{})})]})})]})]})})})})]})}function C$(){return q.jsxs("footer",{className:"footer",children:[q.jsxs("div",{className:"footer-content container",children:[q.jsxs("div",{className:"footer-logo-group",children:[q.jsx(Z4,{}),q.jsx("h3",{children:"LODESTAR Project"})]}),q.jsx("p",{className:"footer-description",children:"A collaborative India-Netherlands initiative to build a low-cost, multi-hazard early warning system for communities at risk."}),q.jsxs("div",{className:"footer-links",children:[q.jsx("a",{href:"https://www.iittp.ac.in/",target:"_blank",rel:"noopener noreferrer",children:"IIT Tirupati"}),q.jsx("span",{children:""}),q.jsx("a",{href:"https://www.iitg.ac.in/",target:"_blank",rel:"noopener noreferrer",children:"IIT Guwahati"}),q.jsx("span",{children:""}),q.jsx("a",{href:"https://www.iisc.ac.in/",target:"_blank",rel:"noopener noreferrer",children:"IISc Bangalore"}),q.jsx("span",{children:""}),q.jsx("a",{href:"https://www.wur.nl/en/wageningen-university.htm",target:"_blank",rel:"noopener noreferrer",children:"Wageningen University & Research"}),q.jsx("span",{children:""}),q.jsx("a",{href:"https://metameta.nl/",target:"_blank",rel:"noopener noreferrer",children:"MetaMeta"}),q.jsx("span",{children:""}),q.jsx("a",{href:"https://cstep.in/",target:"_blank",rel:"noopener noreferrer",children:"CSTEP"})]})]}),q.jsxs("div",{className:"footer-bottom-bar",children:[q.jsx("p",{children:" 2025 LODESTAR Project Consortium | Funded by DST (India) & NWO (Netherlands)"}),q.jsx("div",{className:"footer-credits",children:q.jsx(E$,{children:q.jsx("span",{children:"Dashboard by IIT Tirupati"})})})]})]})}function M$(){const[e,t]=Se.useState(!1),r=()=>{window.scrollY>300?t(!0):t(!1)},n=()=>{window.scrollTo({top:0,behavior:"smooth"})};return Se.useEffect(()=>(window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)),[]),q.jsx(j0,{children:e&&q.jsx(zr.button,{onClick:n,className:"scroll-to-top-btn",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},whileHover:{scale:1.1},whileTap:{scale:.9},children:q.jsx(IL,{})})})}function I$({children:e}){const r=$f().pathname!=="/maps";return q.jsxs("div",{className:"app-container",children:[q.jsx(xL,{}),q.jsx("main",{className:"main-content",children:e}),r&&q.jsx(C$,{}),q.jsx(M$,{})]})}const k$=[{name:"Bengaluru, India",hazard:"Urban Floods",country:"India"},{name:"Guwahati, India",hazard:"Compound Pluvial & Fluvial Floods",country:"India"},{name:"Anantapur, India",hazard:"Compound Flood & Drought Events",country:"India"},{name:"Dordrecht, NL",hazard:"Urban Floods & Evacuation Planning",country:"Netherlands"},{name:"Tilburg & Breda, NL",hazard:"Droughts & Urban Development",country:"Netherlands"}],O$=[{icon:q.jsx(DL,{}),title:"Early Warning System",text:"Developing a multi-hazard EWS for both single and compound events."},{icon:q.jsx(e8,{}),title:"Living Labs",text:"Co-creating solutions through participatory workshops with citizens and experts."},{icon:q.jsx(kL,{}),title:"Citizen Science",text:"Integrating local knowledge and real-time, user-submitted data into scientific models."},{icon:q.jsx(XL,{}),title:"Disaster Management",text:"Enhancing the resilience of at-risk communities against extreme climate events."}];function D$(){return q.jsxs("div",{children:[q.jsxs("section",{className:"hero-section",children:[q.jsx("div",{className:"hero-bg-circle",style:{width:"300px",height:"300px",top:"-50px",left:"-50px",opacity:.6}}),q.jsx("div",{className:"hero-bg-circle",style:{width:"200px",height:"200px",bottom:"10%",right:"5%",opacity:.4,animationDelay:"1s"}}),q.jsx("div",{className:"hero-bg-circle",style:{width:"150px",height:"150px",top:"20%",right:"20%",opacity:.3,animationDelay:"2s"}}),q.jsxs(zr.div,{className:"container-wide hero-content",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:[q.jsx("h1",{className:"hero-title",children:"LODESTAR"}),q.jsx("p",{className:"hero-subtitle",children:"Resilience  Intelligence  Community"}),q.jsx("p",{className:"hero-description",children:"A next-generation multi-hazard early warning system bridging the gap between advanced predictive analytics and community-led action."})]})]}),q.jsx("section",{className:"concepts-section",children:q.jsxs("div",{className:"container-wide",children:[q.jsx(zr.h2,{className:"section-title",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},children:"Core Architecture"}),q.jsx("div",{className:"concepts-grid",children:O$.map((e,t)=>q.jsxs(zr.div,{className:"concept-card",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:t*.1},children:[q.jsx("div",{className:"concept-icon",children:e.icon}),q.jsx("h3",{className:"concept-title",children:e.title}),q.jsx("p",{className:"concept-text",children:e.text})]},e.title))})]})}),q.jsxs(zr.section,{className:"cta-map-section",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:1},children:[q.jsx("div",{className:"cta-map-overlay"}),q.jsxs("div",{className:"container-wide cta-map-content",children:[q.jsx("h2",{children:"Live Geo-Dashboard"}),q.jsx("p",{children:"Access real-time active alerts, flood forecasts, and community reports in our 3D interactive map interface."}),q.jsxs(rT,{to:"/maps",className:"cta-map-button",children:["Launch Dashboard ",q.jsx(ML,{})]})]})]}),q.jsx("section",{className:"sites-section",children:q.jsxs("div",{className:"container-wide",children:[q.jsx("h2",{className:"section-title",children:"Deployment Sites"}),q.jsx("div",{className:"sites-grid",children:k$.map((e,t)=>q.jsxs(zr.div,{className:"site-card-home",initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:t*.1},children:[q.jsx("div",{className:`site-flag ${e.country.toLowerCase()}`}),q.jsxs("h3",{className:"site-name",children:[q.jsx("img",{src:`https://flagcdn.com/w40/${e.country==="India"?"in":"nl"}.png`,alt:e.country,className:"site-flag-icon"}),e.name]}),q.jsxs("p",{className:"site-hazard",children:[q.jsx("strong",{children:"Focus:"})," ",e.hazard]})]},e.name))})]})})]})}const R$=[{id:"RO1",text:"To develop socio-technical disaster and emergency (early warning) services (MH-EWS dashboards) to address the challenges of extreme compound disaster events in India and the Netherlands."},{id:"RO2",text:"To improve flood and drought modelling and user interface by focusing on innovative technologies, to arrive at an integrated MH-EWS for floods and/or droughts."},{id:"RO3",text:"To develop socio-cultural and management innovations via living labs, necessary for implementing new technologies and accelerating uptake, while ensuring long-term sustainability."}],j$=[{title:"WS 1: Disaster Context & Knowledge Gaps",description:"Sets the disaster context by taking stock of existing systems and identifying socio-technical knowledge gaps in flood and drought management to build a foundation for the project."},{title:"WS 2: Real-time Data Assimilation",description:"Conducts real-time hydrometeorological data assimilation using computer vision-based algorithms and extended weather forecasts, leveraging low-cost sensors and citizen science."},{title:"WS 3: Citizen Science & Living Labs",description:"Creates synergy between citizens, academics, and professionals using 'living labs' and 'serious games' to facilitate knowledge exchange, co-create solutions, and ensure the EWS meets user needs."},{title:"WS 4: Integrated Dashboard & Forecasting",description:"Develops a multi-hazard forecast framework using an ensemble of models (AI/ML, process-based) to co-create a user-centric, integrated MH-EWS dashboard for mobile and web."},{title:"WS 5: Capacity Building & Internationalization",description:"Builds the disaster management capacity of all partners and external stakeholders in India and the Netherlands through training, workshops, summer academies, and international outreach."}];function z$(){return q.jsxs("div",{children:[q.jsx(zr.section,{className:"hero-section-about",initial:{opacity:0},animate:{opacity:1},transition:{duration:.7},children:q.jsxs("div",{className:"container",children:[q.jsx("h1",{className:"hero-title-about",children:"About The LODESTAR Project"}),q.jsx("p",{className:"hero-subtitle-about",children:"Understanding the vision, objectives, and methodology behind our collaborative effort to build disaster resilience."})]})}),q.jsx("section",{className:"page-section",children:q.jsx("div",{className:"container",children:q.jsxs("div",{className:"about-grid",children:[q.jsx(zr.div,{className:"about-grid-title",initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0,amount:.5},transition:{duration:.6},children:q.jsx("h2",{children:"The Challenge & Our Vision"})}),q.jsxs("div",{className:"feature-split",children:[q.jsxs(zr.div,{className:"feature-block",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.5},children:[q.jsx("h4",{children:"The Challenge"}),q.jsx("p",{children:`Existing Early Warning Systems often lack sufficient lead times and fail to integrate crucial community knowledge. This creates a "know-do gap," where warnings don't translate into effective local actions.`})]}),q.jsxs(zr.div,{className:"feature-block",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.5,delay:.1},children:[q.jsx("h4",{children:"Our Vision"}),q.jsx("p",{children:`LODESTAR's vision is to co-create a low-cost, multi-hazard EWS using a "living labs" approach. This makes the system more comprehensive, participatory, and responsive, improving disaster preparedness for all.`})]})]}),q.jsx(zr.div,{className:"about-grid-title",initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0,amount:.5},transition:{duration:.6},style:{marginTop:"3rem"},children:q.jsx("h2",{children:"Our Core Objectives"})}),q.jsx("div",{className:"bento-grid",children:R$.map((e,t)=>q.jsxs(zr.div,{className:"bento-card",initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0,amount:.3},transition:{duration:.4,delay:t*.1},children:[q.jsx("div",{className:"bento-id",children:e.id}),q.jsxs("h4",{children:["Objective ",t+1]}),q.jsx("p",{children:e.text})]},e.id))}),q.jsx(zr.div,{className:"about-grid-title",initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0,amount:.5},transition:{duration:.6},style:{marginTop:"3rem"},children:q.jsx("h2",{children:"Our Approach"})}),q.jsx("div",{className:"stepper-container",children:j$.map((e,t)=>q.jsxs(zr.div,{className:"stepper-item",initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0,amount:.3},transition:{duration:.5,delay:t*.1},children:[q.jsx("div",{className:"stepper-line"}),q.jsx("div",{className:"stepper-marker",children:t+1}),q.jsxs("div",{className:"stepper-content",children:[q.jsx("h4",{children:e.title}),q.jsx("p",{children:e.description})]})]},e.title))})]})})})]})}var xv={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */var L$=xv.exports,UE;function N$(){return UE||(UE=1,(function(e,t){(function(r,n){e.exports=n()})(L$,(function(){var r={},n={};function s(h,l,_){if(n[h]=_,h==="index"){var w="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",E={};return n.shared(E),n.index(r,E),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([w],{type:"text/javascript"}))),r}}s("shared",["exports"],(function(h){function l(o,a,u,m){return new(u||(u=Promise))((function(v,T){function P(z){try{O(m.next(z))}catch(V){T(V)}}function I(z){try{O(m.throw(z))}catch(V){T(V)}}function O(z){var V;z.done?v(z.value):(V=z.value,V instanceof u?V:new u((function(W){W(V)}))).then(P,I)}O((m=m.apply(o,a||[])).next())}))}function _(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var w=E;function E(o,a){this.x=o,this.y=a}E.prototype={clone:function(){return new E(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,a){return this.clone()._rotateAround(o,a)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var a=o.x-this.x,u=o.y-this.y;return a*a+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,a){return Math.atan2(this.x*a-this.y*o,this.x*o+this.y*a)},_matMult:function(o){var a=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=a,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var a=Math.cos(o),u=Math.sin(o),m=u*this.x+a*this.y;return this.x=a*this.x-u*this.y,this.y=m,this},_rotateAround:function(o,a){var u=Math.cos(o),m=Math.sin(o),v=a.y+m*(this.x-a.x)+u*(this.y-a.y);return this.x=a.x+u*(this.x-a.x)-m*(this.y-a.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},E.convert=function(o){return o instanceof E?o:Array.isArray(o)?new E(o[0],o[1]):o};var A=_(w),M=N;function N(o,a,u,m){this.cx=3*o,this.bx=3*(u-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(m-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=a,this.p2x=u,this.p2y=m}N.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,a){if(a===void 0&&(a=1e-6),o<0)return 0;if(o>1)return 1;for(var u=o,m=0;m<8;m++){var v=this.sampleCurveX(u)-o;if(Math.abs(v)<a)return u;var T=this.sampleCurveDerivativeX(u);if(Math.abs(T)<1e-6)break;u-=v/T}var P=0,I=1;for(u=o,m=0;m<20&&(v=this.sampleCurveX(u),!(Math.abs(v-o)<a));m++)o>v?P=u:I=u,u=.5*(I-P)+P;return u},solve:function(o,a){return this.sampleCurveY(this.solveCurveX(o,a))}};var U=_(M);let B,L;function K(){return B==null&&(B=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),B}function Q(){if(L==null&&(L=!1,K())){const a=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(a){for(let m=0;m<25;m++){const v=4*m;a.fillStyle=`rgb(${v},${v+1},${v+2})`,a.fillRect(m%5,Math.floor(m/5),1,1)}const u=a.getImageData(0,0,5,5).data;for(let m=0;m<100;m++)if(m%4!=3&&u[m]!==m){L=!0;break}}}return L||!1}function J(o,a,u,m){const v=new U(o,a,u,m);return T=>v.solve(T)}const ie=J(.25,.1,.25,1);function Z(o,a,u){return Math.min(u,Math.max(a,o))}function X(o,a,u){const m=u-a,v=((o-a)%m+m)%m+a;return v===a?u:v}function le(o,...a){for(const u of a)for(const m in u)o[m]=u[m];return o}let de=1;function Pe(o,a,u){const m={};for(const v in o)m[v]=a.call(this,o[v],v,o);return m}function Fe(o,a,u){const m={};for(const v in o)a.call(this,o[v],v,o)&&(m[v]=o[v]);return m}function be(o){return Array.isArray(o)?o.map(be):typeof o=="object"&&o?Pe(o,be):o}const Ue={};function Ve(o){Ue[o]||(typeof console<"u"&&console.warn(o),Ue[o]=!0)}function Ze(o,a,u){return(u.y-o.y)*(a.x-o.x)>(a.y-o.y)*(u.x-o.x)}function Ye(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let it=null;function et(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const Ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function rt(o,a,u,m,v){return l(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const T=new VideoFrame(o,{timestamp:0});try{const P=T==null?void 0:T.format;if(!P||!P.startsWith("BGR")&&!P.startsWith("RGB"))throw new Error(`Unrecognized format ${P}`);const I=P.startsWith("BGR"),O=new Uint8ClampedArray(m*v*4);if(yield T.copyTo(O,(function(z,V,W,Y,re){const se=4*Math.max(-V,0),he=(Math.max(0,W)-W)*Y*4+se,_e=4*Y,Ae=Math.max(0,V),qe=Math.max(0,W);return{rect:{x:Ae,y:qe,width:Math.min(z.width,V+Y)-Ae,height:Math.min(z.height,W+re)-qe},layout:[{offset:he,stride:_e}]}})(o,a,u,m,v)),I)for(let z=0;z<O.length;z+=4){const V=O[z];O[z]=O[z+2],O[z+2]=V}return O}finally{T.close()}}))}let ge,ne;const Ce="AbortError";function nt(){return new Error(Ce)}const ht={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function pt(o){return ht.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const At="global-dispatcher";class _t extends Error{constructor(a,u,m,v){super(`AJAXError: ${u} (${a}): ${m}`),this.status=a,this.statusText=u,this.url=m,this.body=v}}const wt=()=>Ye(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ot=function(o,a){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const m=pt(o.url);if(m)return m(o,a);if(Ye(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:At},a)}if(!(/^file:/.test(u=o.url)||/^file:/.test(wt())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(m,v){return l(this,void 0,void 0,(function*(){const T=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:wt(),signal:v.signal});m.type!=="json"||T.headers.has("Accept")||T.headers.set("Accept","application/json");const P=yield fetch(T);if(!P.ok){const z=yield P.blob();throw new _t(P.status,P.statusText,m.url,z)}let I;I=m.type==="arrayBuffer"||m.type==="image"?P.arrayBuffer():m.type==="json"?P.json():P.text();const O=yield I;if(v.signal.aborted)throw nt();return{data:O,cacheControl:P.headers.get("Cache-Control"),expires:P.headers.get("Expires")}}))})(o,a);if(Ye(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:At},a)}var u;return(function(m,v){return new Promise(((T,P)=>{var I;const O=new XMLHttpRequest;O.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(O.responseType="arraybuffer");for(const z in m.headers)O.setRequestHeader(z,m.headers[z]);m.type==="json"&&(O.responseType="text",!((I=m.headers)===null||I===void 0)&&I.Accept||O.setRequestHeader("Accept","application/json")),O.withCredentials=m.credentials==="include",O.onerror=()=>{P(new Error(O.statusText))},O.onload=()=>{if(!v.signal.aborted)if((O.status>=200&&O.status<300||O.status===0)&&O.response!==null){let z=O.response;if(m.type==="json")try{z=JSON.parse(O.response)}catch(V){return void P(V)}T({data:z,cacheControl:O.getResponseHeader("Cache-Control"),expires:O.getResponseHeader("Expires")})}else{const z=new Blob([O.response],{type:O.getResponseHeader("Content-Type")});P(new _t(O.status,O.statusText,m.url,z))}},v.signal.addEventListener("abort",(()=>{O.abort(),P(nt())})),O.send(m.body)}))})(o,a)};function It(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const a=new URL(o),u=window.location;return a.protocol===u.protocol&&a.host===u.host}function Ft(o,a,u){u[o]&&u[o].indexOf(a)!==-1||(u[o]=u[o]||[],u[o].push(a))}function at(o,a,u){if(u&&u[o]){const m=u[o].indexOf(a);m!==-1&&u[o].splice(m,1)}}class ar{constructor(a,u={}){le(this,u),this.type=a}}class jt extends ar{constructor(a,u={}){super("error",le({error:a},u))}}class br{on(a,u){return this._listeners=this._listeners||{},Ft(a,u,this._listeners),this}off(a,u){return at(a,u,this._listeners),at(a,u,this._oneTimeListeners),this}once(a,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Ft(a,u,this._oneTimeListeners),this):new Promise((m=>this.once(a,m)))}fire(a,u){typeof a=="string"&&(a=new ar(a,u||{}));const m=a.type;if(this.listens(m)){a.target=this;const v=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const I of v)I.call(this,a);const T=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const I of T)at(m,I,this._oneTimeListeners),I.call(this,a);const P=this._eventedParent;P&&(le(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),P.fire(a))}else a instanceof jt&&console.error(a.error);return this}listens(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)}setEventedParent(a,u){return this._eventedParent=a,this._eventedParentData=u,this}}var $e={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Er=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function hn(o,a){const u={};for(const m in o)m!=="ref"&&(u[m]=o[m]);return Er.forEach((m=>{m in a&&(u[m]=a[m])})),u}function lr(o,a){if(Array.isArray(o)){if(!Array.isArray(a)||o.length!==a.length)return!1;for(let u=0;u<o.length;u++)if(!lr(o[u],a[u]))return!1;return!0}if(typeof o=="object"&&o!==null&&a!==null){if(typeof a!="object"||Object.keys(o).length!==Object.keys(a).length)return!1;for(const u in o)if(!lr(o[u],a[u]))return!1;return!0}return o===a}function xr(o,a){o.push(a)}function Ln(o,a,u){xr(u,{command:"addSource",args:[o,a[o]]})}function Nn(o,a,u){xr(a,{command:"removeSource",args:[o]}),u[o]=!0}function di(o,a,u,m){Nn(o,u,m),Ln(o,a,u)}function ta(o,a,u){let m;for(m in o[u])if(Object.prototype.hasOwnProperty.call(o[u],m)&&m!=="data"&&!lr(o[u][m],a[u][m]))return!1;for(m in a[u])if(Object.prototype.hasOwnProperty.call(a[u],m)&&m!=="data"&&!lr(o[u][m],a[u][m]))return!1;return!0}function Kn(o,a,u,m,v,T){o=o||{},a=a||{};for(const P in o)Object.prototype.hasOwnProperty.call(o,P)&&(lr(o[P],a[P])||u.push({command:T,args:[m,P,a[P],v]}));for(const P in a)Object.prototype.hasOwnProperty.call(a,P)&&!Object.prototype.hasOwnProperty.call(o,P)&&(lr(o[P],a[P])||u.push({command:T,args:[m,P,a[P],v]}))}function Co(o){return o.id}function Mo(o,a){return o[a.id]=a,o}class yt{constructor(a,u,m,v){this.message=(a?`${a}: `:"")+m,v&&(this.identifier=v),u!=null&&u.__line__&&(this.line=u.__line__)}}function zi(o,...a){for(const u of a)for(const m in u)o[m]=u[m];return o}class Tn extends Error{constructor(a,u){super(u),this.message=u,this.key=a}}class Xn{constructor(a,u=[]){this.parent=a,this.bindings={};for(const[m,v]of u)this.bindings[m]=v}concat(a){return new Xn(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const ho={kind:"null"},St={kind:"number"},vr={kind:"string"},nr={kind:"boolean"},pi={kind:"color"},ra={kind:"object"},ur={kind:"value"},xa={kind:"collator"},qa={kind:"formatted"},na={kind:"padding"},Si={kind:"resolvedImage"},xe={kind:"variableAnchorOffsetCollection"};function te(o,a){return{kind:"array",itemType:o,N:a}}function ee(o){if(o.kind==="array"){const a=ee(o.itemType);return typeof o.N=="number"?`array<${a}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${a}>`}return o.kind}const ce=[ho,St,vr,nr,pi,qa,ra,te(ur),na,Si,xe];function ye(o,a){if(a.kind==="error")return null;if(o.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!ye(o.itemType,a.itemType))&&(typeof o.N!="number"||o.N===a.N))return null}else{if(o.kind===a.kind)return null;if(o.kind==="value"){for(const u of ce)if(!ye(u,a))return null}}return`Expected ${ee(o)} but found ${ee(a)} instead.`}function Ie(o,a){return a.some((u=>u.kind===o.kind))}function Re(o,a){return a.some((u=>u==="null"?o===null:u==="array"?Array.isArray(o):u==="object"?o&&!Array.isArray(o)&&typeof o=="object":u===typeof o))}function Be(o,a){return o.kind==="array"&&a.kind==="array"?o.itemType.kind===a.itemType.kind&&typeof o.N=="number":o.kind===a.kind}const Ee=.96422,Qe=.82521,ct=4/29,Ke=6/29,bt=3*Ke*Ke,qt=Ke*Ke*Ke,Yt=Math.PI/180,Ir=180/Math.PI;function fr(o){return(o%=360)<0&&(o+=360),o}function kr([o,a,u,m]){let v,T;const P=Mn((.2225045*(o=yr(o))+.7168786*(a=yr(a))+.0606169*(u=yr(u)))/1);o===a&&a===u?v=T=P:(v=Mn((.4360747*o+.3850649*a+.1430804*u)/Ee),T=Mn((.0139322*o+.0971045*a+.7141733*u)/Qe));const I=116*P-16;return[I<0?0:I,500*(v-P),200*(P-T),m]}function yr(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Mn(o){return o>qt?Math.pow(o,1/3):o/bt+ct}function mn([o,a,u,m]){let v=(o+16)/116,T=isNaN(a)?v:v+a/500,P=isNaN(u)?v:v-u/200;return v=1*Fr(v),T=Ee*Fr(T),P=Qe*Fr(P),[wr(3.1338561*T-1.6168667*v-.4906146*P),wr(-.9787684*T+1.9161415*v+.033454*P),wr(.0719453*T-.2289914*v+1.4052427*P),m]}function wr(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function Fr(o){return o>Ke?o*o*o:bt*(o-ct)}function an(o){return parseInt(o.padEnd(2,o),16)/255}function Vn(o,a){return Yn(a?o/100:o,0,1)}function Yn(o,a,u){return Math.min(Math.max(a,o),u)}function Ti(o){return!o.some(Number.isNaN)}const bl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class cr{constructor(a,u,m,v=1,T=!0){this.r=a,this.g=u,this.b=m,this.a=v,T||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[a,u,m,v]))}static parse(a){if(a instanceof cr)return a;if(typeof a!="string")return;const u=(function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];const v=bl[m];if(v){const[P,I,O]=v;return[P/255,I/255,O/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){const P=m.length<6?1:2;let I=1;return[an(m.slice(I,I+=P)),an(m.slice(I,I+=P)),an(m.slice(I,I+=P)),an(m.slice(I,I+P)||"ff")]}if(m.startsWith("rgb")){const P=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(P){const[I,O,z,V,W,Y,re,se,he,_e,Ae,qe]=P,ke=[V||" ",re||" ",_e].join("");if(ke==="  "||ke==="  /"||ke===",,"||ke===",,,"){const Ne=[z,Y,he].join(""),tt=Ne==="%%%"?100:Ne===""?255:0;if(tt){const ft=[Yn(+O/tt,0,1),Yn(+W/tt,0,1),Yn(+se/tt,0,1),Ae?Vn(+Ae,qe):1];if(Ti(ft))return ft}}return}}const T=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[P,I,O,z,V,W,Y,re,se]=T,he=[O||" ",V||" ",Y].join("");if(he==="  "||he==="  /"||he===",,"||he===",,,"){const _e=[+I,Yn(+z,0,100),Yn(+W,0,100),re?Vn(+re,se):1];if(Ti(_e))return(function([Ae,qe,ke,Ne]){function tt(ft){const zt=(ft+Ae/30)%12,rr=qe*Math.min(ke,1-ke);return ke-rr*Math.max(-1,Math.min(zt-3,9-zt,1))}return Ae=fr(Ae),qe/=100,ke/=100,[tt(0),tt(8),tt(4),Ne]})(_e)}}})(a);return u?new cr(...u,!1):void 0}get rgb(){const{r:a,g:u,b:m,a:v}=this,T=v||1/0;return this.overwriteGetter("rgb",[a/T,u/T,m/T,v])}get hcl(){return this.overwriteGetter("hcl",(function(a){const[u,m,v,T]=kr(a),P=Math.sqrt(m*m+v*v);return[Math.round(1e4*P)?fr(Math.atan2(v,m)*Ir):NaN,P,u,T]})(this.rgb))}get lab(){return this.overwriteGetter("lab",kr(this.rgb))}overwriteGetter(a,u){return Object.defineProperty(this,a,{value:u}),u}toString(){const[a,u,m,v]=this.rgb;return`rgba(${[a,u,m].map((T=>Math.round(255*T))).join(",")},${v})`}}cr.black=new cr(0,0,0,1),cr.white=new cr(1,1,1,1),cr.transparent=new cr(0,0,0,0),cr.red=new cr(1,0,0,1);class dh{constructor(a,u,m){this.sensitivity=a?u?"variant":"case":u?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,u){return this.collator.compare(a,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class pu{constructor(a,u,m,v,T){this.text=a,this.image=u,this.scale=m,this.fontStack=v,this.textColor=T}}class Li{constructor(a){this.sections=a}static fromString(a){return new Li([new pu(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((a=>a.text.length!==0||a.image&&a.image.name.length!==0))}static factory(a){return a instanceof Li?a:Li.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map((a=>a.text)).join("")}}class mi{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof mi)return a;if(typeof a=="number")return new mi([a,a,a,a]);if(Array.isArray(a)&&!(a.length<1||a.length>4)){for(const u of a)if(typeof u!="number")return;switch(a.length){case 1:a=[a[0],a[0],a[0],a[0]];break;case 2:a=[a[0],a[1],a[0],a[1]];break;case 3:a=[a[0],a[1],a[2],a[1]]}return new mi(a)}}toString(){return JSON.stringify(this.values)}}const Up=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ia{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof ia)return a;if(Array.isArray(a)&&!(a.length<1)&&a.length%2==0){for(let u=0;u<a.length;u+=2){const m=a[u],v=a[u+1];if(typeof m!="string"||!Up.has(m)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new ia(a)}}toString(){return JSON.stringify(this.values)}}class gi{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new gi({name:a,available:!1}):null}}function Pi(o,a,u,m){return typeof o=="number"&&o>=0&&o<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof u=="number"&&u>=0&&u<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[o,a,u,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[o,a,u,m]:[o,a,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function $s(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof cr||o instanceof dh||o instanceof Li||o instanceof mi||o instanceof ia||o instanceof gi)return!0;if(Array.isArray(o)){for(const a of o)if(!$s(a))return!1;return!0}if(typeof o=="object"){for(const a in o)if(!$s(o[a]))return!1;return!0}return!1}function Wr(o){if(o===null)return ho;if(typeof o=="string")return vr;if(typeof o=="boolean")return nr;if(typeof o=="number")return St;if(o instanceof cr)return pi;if(o instanceof dh)return xa;if(o instanceof Li)return qa;if(o instanceof mi)return na;if(o instanceof ia)return xe;if(o instanceof gi)return Si;if(Array.isArray(o)){const a=o.length;let u;for(const m of o){const v=Wr(m);if(u){if(u===v)continue;u=ur;break}u=v}return te(u||ur,a)}return ra}function mu(o){const a=typeof o;return o===null?"":a==="string"||a==="number"||a==="boolean"?String(o):o instanceof cr||o instanceof Li||o instanceof mi||o instanceof ia||o instanceof gi?o.toString():JSON.stringify(o)}class Wa{constructor(a,u){this.type=a,this.value=u}static parse(a,u){if(a.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!$s(a[1]))return u.error("invalid value");const m=a[1];let v=Wr(m);const T=u.expectedType;return v.kind!=="array"||v.N!==0||!T||T.kind!=="array"||typeof T.N=="number"&&T.N!==0||(v=T),new Wa(v,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class In{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}const Vs={string:vr,number:St,boolean:nr,object:ra};class Ni{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");let m,v=1;const T=a[0];if(T==="array"){let I,O;if(a.length>2){const z=a[1];if(typeof z!="string"||!(z in Vs)||z==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);I=Vs[z],v++}else I=ur;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return u.error('The length argument to "array" must be a positive integer literal',2);O=a[2],v++}m=te(I,O)}else{if(!Vs[T])throw new Error(`Types doesn't contain name = ${T}`);m=Vs[T]}const P=[];for(;v<a.length;v++){const I=u.parse(a[v],v,ur);if(!I)return null;P.push(I)}return new Ni(m,P)}evaluate(a){for(let u=0;u<this.args.length;u++){const m=this.args[u].evaluate(a);if(!ye(this.type,Wr(m)))return m;if(u===this.args.length-1)throw new In(`Expected value to be of type ${ee(this.type)}, but found ${ee(Wr(m))} instead.`)}throw new Error}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every((a=>a.outputDefined()))}}const Us={"to-boolean":nr,"to-color":pi,"to-number":St,"to-string":vr};class Bi{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");const m=a[0];if(!Us[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&a.length!==2)return u.error("Expected one argument.");const v=Us[m],T=[];for(let P=1;P<a.length;P++){const I=u.parse(a[P],P,ur);if(!I)return null;T.push(I)}return new Bi(v,T)}evaluate(a){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(a);case"color":{let u,m;for(const v of this.args){if(u=v.evaluate(a),m=null,u instanceof cr)return u;if(typeof u=="string"){const T=a.parseColor(u);if(T)return T}else if(Array.isArray(u)&&(m=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Pi(u[0],u[1],u[2],u[3]),!m))return new cr(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new In(m||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(const m of this.args){u=m.evaluate(a);const v=mi.parse(u);if(v)return v}throw new In(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(const m of this.args){u=m.evaluate(a);const v=ia.parse(u);if(v)return v}throw new In(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(const m of this.args){if(u=m.evaluate(a),u===null)return 0;const v=Number(u);if(!isNaN(v))return v}throw new In(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return Li.fromString(mu(this.args[0].evaluate(a)));case"resolvedImage":return gi.fromString(mu(this.args[0].evaluate(a)));default:return mu(this.args[0].evaluate(a))}}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every((a=>a.outputDefined()))}}const qp=["Unknown","Point","LineString","Polygon"];class dc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?qp[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let u=this._parseColorCache[a];return u||(u=this._parseColorCache[a]=cr.parse(a)),u}}class Io{constructor(a,u,m=[],v,T=new Xn,P=[]){this.registry=a,this.path=m,this.key=m.map((I=>`[${I}]`)).join(""),this.scope=T,this.errors=P,this.expectedType=v,this._isConstant=u}parse(a,u,m,v,T={}){return u?this.concat(u,m,v)._parse(a,T):this._parse(a,T)}_parse(a,u){function m(v,T,P){return P==="assert"?new Ni(T,[v]):P==="coerce"?new Bi(T,[v]):v}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=a[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const T=this.registry[v];if(T){let P=T.parse(a,this);if(!P)return null;if(this.expectedType){const I=this.expectedType,O=P.type;if(I.kind!=="string"&&I.kind!=="number"&&I.kind!=="boolean"&&I.kind!=="object"&&I.kind!=="array"||O.kind!=="value")if(I.kind!=="color"&&I.kind!=="formatted"&&I.kind!=="resolvedImage"||O.kind!=="value"&&O.kind!=="string")if(I.kind!=="padding"||O.kind!=="value"&&O.kind!=="number"&&O.kind!=="array")if(I.kind!=="variableAnchorOffsetCollection"||O.kind!=="value"&&O.kind!=="array"){if(this.checkSubtype(I,O))return null}else P=m(P,I,u.typeAnnotation||"coerce");else P=m(P,I,u.typeAnnotation||"coerce");else P=m(P,I,u.typeAnnotation||"coerce");else P=m(P,I,u.typeAnnotation||"assert")}if(!(P instanceof Wa)&&P.type.kind!=="resolvedImage"&&this._isConstant(P)){const I=new dc;try{P=new Wa(P.type,P.evaluate(I))}catch(O){return this.error(O.message),null}}return P}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,u,m){const v=typeof a=="number"?this.path.concat(a):this.path,T=m?this.scope.concat(m):this.scope;return new Io(this.registry,this._isConstant,v,u||null,T,this.errors)}error(a,...u){const m=`${this.key}${u.map((v=>`[${v}]`)).join("")}`;this.errors.push(new Tn(m,a))}checkSubtype(a,u){const m=ye(a,u);return m&&this.error(m),m}}class ko{constructor(a,u){this.type=u.type,this.bindings=[].concat(a),this.result=u}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const u of this.bindings)a(u[1]);a(this.result)}static parse(a,u){if(a.length<4)return u.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const m=[];for(let T=1;T<a.length-1;T+=2){const P=a[T];if(typeof P!="string")return u.error(`Expected string, but found ${typeof P} instead.`,T);if(/[^a-zA-Z0-9_]/.test(P))return u.error("Variable names must contain only alphanumeric characters or '_'.",T);const I=u.parse(a[T+1],T+1);if(!I)return null;m.push([P,I])}const v=u.parse(a[a.length-1],a.length-1,u.expectedType,m);return v?new ko(m,v):null}outputDefined(){return this.result.outputDefined()}}class Or{constructor(a,u){this.type=u.type,this.name=a,this.boundExpression=u}static parse(a,u){if(a.length!==2||typeof a[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const m=a[1];return u.scope.has(m)?new Or(m,u.scope.get(m)):u.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}}class qs{constructor(a,u,m){this.type=a,this.index=u,this.input=m}static parse(a,u){if(a.length!==3)return u.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const m=u.parse(a[1],1,St),v=u.parse(a[2],2,te(u.expectedType||ur));return m&&v?new qs(v.type.itemType,m,v):null}evaluate(a){const u=this.index.evaluate(a),m=this.input.evaluate(a);if(u<0)throw new In(`Array index out of bounds: ${u} < 0.`);if(u>=m.length)throw new In(`Array index out of bounds: ${u} > ${m.length-1}.`);if(u!==Math.floor(u))throw new In(`Array index must be an integer, but found ${u} instead.`);return m[u]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}}class ph{constructor(a,u){this.type=nr,this.needle=a,this.haystack=u}static parse(a,u){if(a.length!==3)return u.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const m=u.parse(a[1],1,ur),v=u.parse(a[2],2,ur);return m&&v?Ie(m.type,[nr,vr,St,ho,ur])?new ph(m,v):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ee(m.type)} instead`):null}evaluate(a){const u=this.needle.evaluate(a),m=this.haystack.evaluate(a);if(!m)return!1;if(!Re(u,["boolean","string","number","null"]))throw new In(`Expected first argument to be of type boolean, string, number or null, but found ${ee(Wr(u))} instead.`);if(!Re(m,["string","array"]))throw new In(`Expected second argument to be of type array or string, but found ${ee(Wr(m))} instead.`);return m.indexOf(u)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}}class us{constructor(a,u,m){this.type=St,this.needle=a,this.haystack=u,this.fromIndex=m}static parse(a,u){if(a.length<=2||a.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const m=u.parse(a[1],1,ur),v=u.parse(a[2],2,ur);if(!m||!v)return null;if(!Ie(m.type,[nr,vr,St,ho,ur]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ee(m.type)} instead`);if(a.length===4){const T=u.parse(a[3],3,St);return T?new us(m,v,T):null}return new us(m,v)}evaluate(a){const u=this.needle.evaluate(a),m=this.haystack.evaluate(a);if(!Re(u,["boolean","string","number","null"]))throw new In(`Expected first argument to be of type boolean, string, number or null, but found ${ee(Wr(u))} instead.`);let v;if(this.fromIndex&&(v=this.fromIndex.evaluate(a)),Re(m,["string"])){const T=m.indexOf(u,v);return T===-1?-1:[...m.slice(0,T)].length}if(Re(m,["array"]))return m.indexOf(u,v);throw new In(`Expected second argument to be of type array or string, but found ${ee(Wr(m))} instead.`)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}}class $r{constructor(a,u,m,v,T,P){this.inputType=a,this.type=u,this.input=m,this.cases=v,this.outputs=T,this.otherwise=P}static parse(a,u){if(a.length<5)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return u.error("Expected an even number of arguments.");let m,v;u.expectedType&&u.expectedType.kind!=="value"&&(v=u.expectedType);const T={},P=[];for(let z=2;z<a.length-1;z+=2){let V=a[z];const W=a[z+1];Array.isArray(V)||(V=[V]);const Y=u.concat(z);if(V.length===0)return Y.error("Expected at least one branch label.");for(const se of V){if(typeof se!="number"&&typeof se!="string")return Y.error("Branch labels must be numbers or strings.");if(typeof se=="number"&&Math.abs(se)>Number.MAX_SAFE_INTEGER)return Y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof se=="number"&&Math.floor(se)!==se)return Y.error("Numeric branch labels must be integer values.");if(m){if(Y.checkSubtype(m,Wr(se)))return null}else m=Wr(se);if(T[String(se)]!==void 0)return Y.error("Branch labels must be unique.");T[String(se)]=P.length}const re=u.parse(W,z,v);if(!re)return null;v=v||re.type,P.push(re)}const I=u.parse(a[1],1,ur);if(!I)return null;const O=u.parse(a[a.length-1],a.length-1,v);return O?I.type.kind!=="value"&&u.concat(1).checkSubtype(m,I.type)?null:new $r(m,v,I,T,P,O):null}evaluate(a){const u=this.input.evaluate(a);return(Wr(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every((a=>a.outputDefined()))&&this.otherwise.outputDefined()}}class gu{constructor(a,u,m){this.type=a,this.branches=u,this.otherwise=m}static parse(a,u){if(a.length<4)return u.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return u.error("Expected an odd number of arguments.");let m;u.expectedType&&u.expectedType.kind!=="value"&&(m=u.expectedType);const v=[];for(let P=1;P<a.length-1;P+=2){const I=u.parse(a[P],P,nr);if(!I)return null;const O=u.parse(a[P+1],P+1,m);if(!O)return null;v.push([I,O]),m=m||O.type}const T=u.parse(a[a.length-1],a.length-1,m);if(!T)return null;if(!m)throw new Error("Can't infer output type");return new gu(m,v,T)}evaluate(a){for(const[u,m]of this.branches)if(u.evaluate(a))return m.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[u,m]of this.branches)a(u),a(m);a(this.otherwise)}outputDefined(){return this.branches.every((([a,u])=>u.outputDefined()))&&this.otherwise.outputDefined()}}class wl{constructor(a,u,m,v){this.type=a,this.input=u,this.beginIndex=m,this.endIndex=v}static parse(a,u){if(a.length<=2||a.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const m=u.parse(a[1],1,ur),v=u.parse(a[2],2,St);if(!m||!v)return null;if(!Ie(m.type,[te(ur),vr,ur]))return u.error(`Expected first argument to be of type array or string, but found ${ee(m.type)} instead`);if(a.length===4){const T=u.parse(a[3],3,St);return T?new wl(m.type,m,v,T):null}return new wl(m.type,m,v)}evaluate(a){const u=this.input.evaluate(a),m=this.beginIndex.evaluate(a);let v;if(this.endIndex&&(v=this.endIndex.evaluate(a)),Re(u,["string"]))return[...u].slice(m,v).join("");if(Re(u,["array"]))return u.slice(m,v);throw new In(`Expected first argument to be of type array or string, but found ${ee(Wr(u))} instead.`)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}}function Sl(o,a){const u=o.length-1;let m,v,T=0,P=u,I=0;for(;T<=P;)if(I=Math.floor((T+P)/2),m=o[I],v=o[I+1],m<=a){if(I===u||a<v)return I;T=I+1}else{if(!(m>a))throw new In("Input is not a number.");P=I-1}return 0}class Ws{constructor(a,u,m){this.type=a,this.input=u,this.labels=[],this.outputs=[];for(const[v,T]of m)this.labels.push(v),this.outputs.push(T)}static parse(a,u){if(a.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return u.error("Expected an even number of arguments.");const m=u.parse(a[1],1,St);if(!m)return null;const v=[];let T=null;u.expectedType&&u.expectedType.kind!=="value"&&(T=u.expectedType);for(let P=1;P<a.length;P+=2){const I=P===1?-1/0:a[P],O=a[P+1],z=P,V=P+1;if(typeof I!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(v.length&&v[v.length-1][0]>=I)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const W=u.parse(O,V,T);if(!W)return null;T=T||W.type,v.push([I,W])}return new Ws(T,m,v)}evaluate(a){const u=this.labels,m=this.outputs;if(u.length===1)return m[0].evaluate(a);const v=this.input.evaluate(a);if(v<=u[0])return m[0].evaluate(a);const T=u.length;return v>=u[T-1]?m[T-1].evaluate(a):m[Sl(u,v)].evaluate(a)}eachChild(a){a(this.input);for(const u of this.outputs)a(u)}outputDefined(){return this.outputs.every((a=>a.outputDefined()))}}function mh(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Hf=pc;function pc(o,a,u,m){this.cx=3*o,this.bx=3*(u-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(m-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=a,this.p2x=u,this.p2y=m}pc.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,a){if(a===void 0&&(a=1e-6),o<0)return 0;if(o>1)return 1;for(var u=o,m=0;m<8;m++){var v=this.sampleCurveX(u)-o;if(Math.abs(v)<a)return u;var T=this.sampleCurveDerivativeX(u);if(Math.abs(T)<1e-6)break;u-=v/T}var P=0,I=1;for(u=o,m=0;m<20&&(v=this.sampleCurveX(u),!(Math.abs(v-o)<a));m++)o>v?P=u:I=u,u=.5*(I-P)+P;return u},solve:function(o,a){return this.sampleCurveY(this.solveCurveX(o,a))}};var mc=mh(Hf);function Fi(o,a,u){return o+u*(a-o)}function ba(o,a,u){return o.map(((m,v)=>Fi(m,a[v],u)))}const kn={number:Fi,color:function(o,a,u,m="rgb"){switch(m){case"rgb":{const[v,T,P,I]=ba(o.rgb,a.rgb,u);return new cr(v,T,P,I,!1)}case"hcl":{const[v,T,P,I]=o.hcl,[O,z,V,W]=a.hcl;let Y,re;if(isNaN(v)||isNaN(O))isNaN(v)?isNaN(O)?Y=NaN:(Y=O,P!==1&&P!==0||(re=z)):(Y=v,V!==1&&V!==0||(re=T));else{let qe=O-v;O>v&&qe>180?qe-=360:O<v&&v-O>180&&(qe+=360),Y=v+u*qe}const[se,he,_e,Ae]=(function([qe,ke,Ne,tt]){return qe=isNaN(qe)?0:qe*Yt,mn([Ne,Math.cos(qe)*ke,Math.sin(qe)*ke,tt])})([Y,re??Fi(T,z,u),Fi(P,V,u),Fi(I,W,u)]);return new cr(se,he,_e,Ae,!1)}case"lab":{const[v,T,P,I]=mn(ba(o.lab,a.lab,u));return new cr(v,T,P,I,!1)}}},array:ba,padding:function(o,a,u){return new mi(ba(o.values,a.values,u))},variableAnchorOffsetCollection:function(o,a,u){const m=o.values,v=a.values;if(m.length!==v.length)throw new In(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${a.toString()}`);const T=[];for(let P=0;P<m.length;P+=2){if(m[P]!==v[P])throw new In(`Cannot interpolate values containing mismatched anchors. from[${P}]: ${m[P]}, to[${P}]: ${v[P]}`);T.push(m[P]);const[I,O]=m[P+1],[z,V]=v[P+1];T.push([Fi(I,z,u),Fi(O,V,u)])}return new ia(T)}};class Jn{constructor(a,u,m,v,T){this.type=a,this.operator=u,this.interpolation=m,this.input=v,this.labels=[],this.outputs=[];for(const[P,I]of T)this.labels.push(P),this.outputs.push(I)}static interpolationFactor(a,u,m,v){let T=0;if(a.name==="exponential")T=cs(u,a.base,m,v);else if(a.name==="linear")T=cs(u,1,m,v);else if(a.name==="cubic-bezier"){const P=a.controlPoints;T=new mc(P[0],P[1],P[2],P[3]).solve(cs(u,1,m,v))}return T}static parse(a,u){let[m,v,T,...P]=a;if(!Array.isArray(v)||v.length===0)return u.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const z=v[1];if(typeof z!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:z}}else{if(v[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const z=v.slice(1);if(z.length!==4||z.some((V=>typeof V!="number"||V<0||V>1)))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:z}}}if(a.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(T=u.parse(T,2,St),!T)return null;const I=[];let O=null;m==="interpolate-hcl"||m==="interpolate-lab"?O=pi:u.expectedType&&u.expectedType.kind!=="value"&&(O=u.expectedType);for(let z=0;z<P.length;z+=2){const V=P[z],W=P[z+1],Y=z+3,re=z+4;if(typeof V!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(I.length&&I[I.length-1][0]>=V)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Y);const se=u.parse(W,re,O);if(!se)return null;O=O||se.type,I.push([V,se])}return Be(O,St)||Be(O,pi)||Be(O,na)||Be(O,xe)||Be(O,te(St))?new Jn(O,m,v,T,I):u.error(`Type ${ee(O)} is not interpolatable.`)}evaluate(a){const u=this.labels,m=this.outputs;if(u.length===1)return m[0].evaluate(a);const v=this.input.evaluate(a);if(v<=u[0])return m[0].evaluate(a);const T=u.length;if(v>=u[T-1])return m[T-1].evaluate(a);const P=Sl(u,v),I=Jn.interpolationFactor(this.interpolation,v,u[P],u[P+1]),O=m[P].evaluate(a),z=m[P+1].evaluate(a);switch(this.operator){case"interpolate":return kn[this.type.kind](O,z,I);case"interpolate-hcl":return kn.color(O,z,I,"hcl");case"interpolate-lab":return kn.color(O,z,I,"lab")}}eachChild(a){a(this.input);for(const u of this.outputs)a(u)}outputDefined(){return this.outputs.every((a=>a.outputDefined()))}}function cs(o,a,u,m){const v=m-u,T=o-u;return v===0?0:a===1?T/v:(Math.pow(a,T)-1)/(Math.pow(a,v)-1)}class Ga{constructor(a,u){this.type=a,this.args=u}static parse(a,u){if(a.length<2)return u.error("Expectected at least one argument.");let m=null;const v=u.expectedType;v&&v.kind!=="value"&&(m=v);const T=[];for(const I of a.slice(1)){const O=u.parse(I,1+T.length,m,void 0,{typeAnnotation:"omit"});if(!O)return null;m=m||O.type,T.push(O)}if(!m)throw new Error("No output type");const P=v&&T.some((I=>ye(v,I.type)));return new Ga(P?ur:m,T)}evaluate(a){let u,m=null,v=0;for(const T of this.args)if(v++,m=T.evaluate(a),m&&m instanceof gi&&!m.available&&(u||(u=m.name),m=null,v===this.args.length&&(m=u)),m!==null)break;return m}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every((a=>a.outputDefined()))}}function gc(o,a){return o==="=="||o==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function gh(o,a,u,m){return m.compare(a,u)===0}function fo(o,a,u){const m=o!=="=="&&o!=="!=";return class PD{constructor(T,P,I){this.type=nr,this.lhs=T,this.rhs=P,this.collator=I,this.hasUntypedArgument=T.type.kind==="value"||P.type.kind==="value"}static parse(T,P){if(T.length!==3&&T.length!==4)return P.error("Expected two or three arguments.");const I=T[0];let O=P.parse(T[1],1,ur);if(!O)return null;if(!gc(I,O.type))return P.concat(1).error(`"${I}" comparisons are not supported for type '${ee(O.type)}'.`);let z=P.parse(T[2],2,ur);if(!z)return null;if(!gc(I,z.type))return P.concat(2).error(`"${I}" comparisons are not supported for type '${ee(z.type)}'.`);if(O.type.kind!==z.type.kind&&O.type.kind!=="value"&&z.type.kind!=="value")return P.error(`Cannot compare types '${ee(O.type)}' and '${ee(z.type)}'.`);m&&(O.type.kind==="value"&&z.type.kind!=="value"?O=new Ni(z.type,[O]):O.type.kind!=="value"&&z.type.kind==="value"&&(z=new Ni(O.type,[z])));let V=null;if(T.length===4){if(O.type.kind!=="string"&&z.type.kind!=="string"&&O.type.kind!=="value"&&z.type.kind!=="value")return P.error("Cannot use collator to compare non-string types.");if(V=P.parse(T[3],3,xa),!V)return null}return new PD(O,z,V)}evaluate(T){const P=this.lhs.evaluate(T),I=this.rhs.evaluate(T);if(m&&this.hasUntypedArgument){const O=Wr(P),z=Wr(I);if(O.kind!==z.kind||O.kind!=="string"&&O.kind!=="number")throw new In(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${O.kind}, ${z.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const O=Wr(P),z=Wr(I);if(O.kind!=="string"||z.kind!=="string")return a(T,P,I)}return this.collator?u(T,P,I,this.collator.evaluate(T)):a(T,P,I)}eachChild(T){T(this.lhs),T(this.rhs),this.collator&&T(this.collator)}outputDefined(){return!0}}}const Wp=fo("==",(function(o,a,u){return a===u}),gh),yh=fo("!=",(function(o,a,u){return a!==u}),(function(o,a,u,m){return!gh(0,a,u,m)})),yu=fo("<",(function(o,a,u){return a<u}),(function(o,a,u,m){return m.compare(a,u)<0})),Zf=fo(">",(function(o,a,u){return a>u}),(function(o,a,u,m){return m.compare(a,u)>0})),Gp=fo("<=",(function(o,a,u){return a<=u}),(function(o,a,u,m){return m.compare(a,u)<=0})),Tl=fo(">=",(function(o,a,u){return a>=u}),(function(o,a,u,m){return m.compare(a,u)>=0}));class Oo{constructor(a,u,m){this.type=xa,this.locale=m,this.caseSensitive=a,this.diacriticSensitive=u}static parse(a,u){if(a.length!==2)return u.error("Expected one argument.");const m=a[1];if(typeof m!="object"||Array.isArray(m))return u.error("Collator options argument must be an object.");const v=u.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,nr);if(!v)return null;const T=u.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,nr);if(!T)return null;let P=null;return m.locale&&(P=u.parse(m.locale,1,vr),!P)?null:new Oo(v,T,P)}evaluate(a){return new dh(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}}class hs{constructor(a,u,m,v,T){this.type=vr,this.number=a,this.locale=u,this.currency=m,this.minFractionDigits=v,this.maxFractionDigits=T}static parse(a,u){if(a.length!==3)return u.error("Expected two arguments.");const m=u.parse(a[1],1,St);if(!m)return null;const v=a[2];if(typeof v!="object"||Array.isArray(v))return u.error("NumberFormat options argument must be an object.");let T=null;if(v.locale&&(T=u.parse(v.locale,1,vr),!T))return null;let P=null;if(v.currency&&(P=u.parse(v.currency,1,vr),!P))return null;let I=null;if(v["min-fraction-digits"]&&(I=u.parse(v["min-fraction-digits"],1,St),!I))return null;let O=null;return v["max-fraction-digits"]&&(O=u.parse(v["max-fraction-digits"],1,St),!O)?null:new hs(m,T,P,I,O)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}}class Gs{constructor(a){this.type=qa,this.sections=a}static parse(a,u){if(a.length<2)return u.error("Expected at least one argument.");const m=a[1];if(!Array.isArray(m)&&typeof m=="object")return u.error("First argument must be an image or text section.");const v=[];let T=!1;for(let P=1;P<=a.length-1;++P){const I=a[P];if(T&&typeof I=="object"&&!Array.isArray(I)){T=!1;let O=null;if(I["font-scale"]&&(O=u.parse(I["font-scale"],1,St),!O))return null;let z=null;if(I["text-font"]&&(z=u.parse(I["text-font"],1,te(vr)),!z))return null;let V=null;if(I["text-color"]&&(V=u.parse(I["text-color"],1,pi),!V))return null;const W=v[v.length-1];W.scale=O,W.font=z,W.textColor=V}else{const O=u.parse(a[P],1,ur);if(!O)return null;const z=O.type.kind;if(z!=="string"&&z!=="value"&&z!=="null"&&z!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");T=!0,v.push({content:O,scale:null,font:null,textColor:null})}}return new Gs(v)}evaluate(a){return new Li(this.sections.map((u=>{const m=u.content.evaluate(a);return Wr(m)===Si?new pu("",m,null,null,null):new pu(mu(m),null,u.scale?u.scale.evaluate(a):null,u.font?u.font.evaluate(a).join(","):null,u.textColor?u.textColor.evaluate(a):null)})))}eachChild(a){for(const u of this.sections)a(u.content),u.scale&&a(u.scale),u.font&&a(u.font),u.textColor&&a(u.textColor)}outputDefined(){return!1}}class vh{constructor(a){this.type=Si,this.input=a}static parse(a,u){if(a.length!==2)return u.error("Expected two arguments.");const m=u.parse(a[1],1,vr);return m?new vh(m):u.error("No image name provided.")}evaluate(a){const u=this.input.evaluate(a),m=gi.fromString(u);return m&&a.availableImages&&(m.available=a.availableImages.indexOf(u)>-1),m}eachChild(a){a(this.input)}outputDefined(){return!1}}class _h{constructor(a){this.type=St,this.input=a}static parse(a,u){if(a.length!==2)return u.error(`Expected 1 argument, but found ${a.length-1} instead.`);const m=u.parse(a[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${ee(m.type)} instead.`):new _h(m):null}evaluate(a){const u=this.input.evaluate(a);if(typeof u=="string")return[...u].length;if(Array.isArray(u))return u.length;throw new In(`Expected value to be of type string or array, but found ${ee(Wr(u))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}}const wa=8192;function yc(o,a){const u=(180+o[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,v=Math.pow(2,a.z);return[Math.round(u*v*wa),Math.round(m*v*wa)]}function vu(o,a){const u=Math.pow(2,a.z);return[(v=(o[0]/wa+a.x)/u,360*v-180),(m=(o[1]/wa+a.y)/u,360/Math.PI*Math.atan(Math.exp((180-360*m)*Math.PI/180))-90)];var m,v}function fs(o,a){o[0]=Math.min(o[0],a[0]),o[1]=Math.min(o[1],a[1]),o[2]=Math.max(o[2],a[0]),o[3]=Math.max(o[3],a[1])}function Ai(o,a){return!(o[0]<=a[0]||o[2]>=a[2]||o[1]<=a[1]||o[3]>=a[3])}function Rr(o,a,u){const m=o[0]-a[0],v=o[1]-a[1],T=o[0]-u[0],P=o[1]-u[1];return m*P-T*v==0&&m*T<=0&&v*P<=0}function Hs(o,a,u,m){return(v=[m[0]-u[0],m[1]-u[1]])[0]*(T=[a[0]-o[0],a[1]-o[1]])[1]-v[1]*T[0]!=0&&!(!Zs(o,a,u,m)||!Zs(u,m,o,a));var v,T}function Kf(o,a,u){for(const m of u)for(let v=0;v<m.length-1;++v)if(Hs(o,a,m[v],m[v+1]))return!0;return!1}function Do(o,a,u=!1){let m=!1;for(const I of a)for(let O=0;O<I.length-1;O++){if(Rr(o,I[O],I[O+1]))return u;(T=I[O])[1]>(v=o)[1]!=(P=I[O+1])[1]>v[1]&&v[0]<(P[0]-T[0])*(v[1]-T[1])/(P[1]-T[1])+T[0]&&(m=!m)}var v,T,P;return m}function vc(o,a){for(const u of a)if(Do(o,u))return!0;return!1}function xh(o,a){for(const u of o)if(!Do(u,a))return!1;for(let u=0;u<o.length-1;++u)if(Kf(o[u],o[u+1],a))return!1;return!0}function aa(o,a){for(const u of a)if(xh(o,u))return!0;return!1}function Zs(o,a,u,m){const v=m[0]-u[0],T=m[1]-u[1],P=(o[0]-u[0])*T-v*(o[1]-u[1]),I=(a[0]-u[0])*T-v*(a[1]-u[1]);return P>0&&I<0||P<0&&I>0}function _u(o,a,u){const m=[];for(let v=0;v<o.length;v++){const T=[];for(let P=0;P<o[v].length;P++){const I=yc(o[v][P],u);fs(a,I),T.push(I)}m.push(T)}return m}function Pl(o,a,u){const m=[];for(let v=0;v<o.length;v++){const T=_u(o[v],a,u);m.push(T)}return m}function Xf(o,a,u,m){if(o[0]<u[0]||o[0]>u[2]){const v=.5*m;let T=o[0]-u[0]>v?-m:u[0]-o[0]>v?m:0;T===0&&(T=o[0]-u[2]>v?-m:u[2]-o[0]>v?m:0),o[0]+=T}fs(a,o)}function _c(o,a,u,m){const v=Math.pow(2,m.z)*wa,T=[m.x*wa,m.y*wa],P=[];for(const I of o)for(const O of I){const z=[O.x+T[0],O.y+T[1]];Xf(z,a,u,v),P.push(z)}return P}function xc(o,a,u,m){const v=Math.pow(2,m.z)*wa,T=[m.x*wa,m.y*wa],P=[];for(const O of o){const z=[];for(const V of O){const W=[V.x+T[0],V.y+T[1]];fs(a,W),z.push(W)}P.push(z)}if(a[2]-a[0]<=v/2){(I=a)[0]=I[1]=1/0,I[2]=I[3]=-1/0;for(const O of P)for(const z of O)Xf(z,a,u,v)}var I;return P}class Ha{constructor(a,u){this.type=nr,this.geojson=a,this.geometries=u}static parse(a,u){if(a.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if($s(a[1])){const m=a[1];if(m.type==="FeatureCollection"){const v=[];for(const T of m.features){const{type:P,coordinates:I}=T.geometry;P==="Polygon"&&v.push(I),P==="MultiPolygon"&&v.push(...I)}if(v.length)return new Ha(m,{type:"MultiPolygon",coordinates:v})}else if(m.type==="Feature"){const v=m.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Ha(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new Ha(m,m)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return(function(u,m){const v=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],P=u.canonicalID();if(m.type==="Polygon"){const I=_u(m.coordinates,T,P),O=_c(u.geometry(),v,T,P);if(!Ai(v,T))return!1;for(const z of O)if(!Do(z,I))return!1}if(m.type==="MultiPolygon"){const I=Pl(m.coordinates,T,P),O=_c(u.geometry(),v,T,P);if(!Ai(v,T))return!1;for(const z of O)if(!vc(z,I))return!1}return!0})(a,this.geometries);if(a.geometryType()==="LineString")return(function(u,m){const v=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],P=u.canonicalID();if(m.type==="Polygon"){const I=_u(m.coordinates,T,P),O=xc(u.geometry(),v,T,P);if(!Ai(v,T))return!1;for(const z of O)if(!xh(z,I))return!1}if(m.type==="MultiPolygon"){const I=Pl(m.coordinates,T,P),O=xc(u.geometry(),v,T,P);if(!Ai(v,T))return!1;for(const z of O)if(!aa(z,I))return!1}return!0})(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let xu=class{constructor(o=[],a=((u,m)=>u<m?-1:u>m?1:0)){if(this.data=o,this.length=this.data.length,this.compare=a,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:a,compare:u}=this,m=a[o];for(;o>0;){const v=o-1>>1,T=a[v];if(u(m,T)>=0)break;a[o]=T,o=v}a[o]=m}_down(o){const{data:a,compare:u}=this,m=this.length>>1,v=a[o];for(;o<m;){let T=1+(o<<1);const P=T+1;if(P<this.length&&u(a[P],a[T])<0&&(T=P),u(a[T],v)>=0)break;a[o]=a[T],o=T}a[o]=v}};function Yf(o,a,u,m,v){Jf(o,a,u,m||o.length-1,v||Hp)}function Jf(o,a,u,m,v){for(;m>u;){if(m-u>600){var T=m-u+1,P=a-u+1,I=Math.log(T),O=.5*Math.exp(2*I/3),z=.5*Math.sqrt(I*O*(T-O)/T)*(P-T/2<0?-1:1);Jf(o,a,Math.max(u,Math.floor(a-P*O/T+z)),Math.min(m,Math.floor(a+(T-P)*O/T+z)),v)}var V=o[a],W=u,Y=m;for(bu(o,u,a),v(o[m],V)>0&&bu(o,u,m);W<Y;){for(bu(o,W,Y),W++,Y--;v(o[W],V)<0;)W++;for(;v(o[Y],V)>0;)Y--}v(o[u],V)===0?bu(o,u,Y):bu(o,++Y,m),Y<=a&&(u=Y+1),a<=Y&&(m=Y-1)}}function bu(o,a,u){var m=o[a];o[a]=o[u],o[u]=m}function Hp(o,a){return o<a?-1:o>a?1:0}function Al(o,a){if(o.length<=1)return[o];const u=[];let m,v;for(const T of o){const P=Kp(T);P!==0&&(T.area=Math.abs(P),v===void 0&&(v=P<0),v===P<0?(m&&u.push(m),m=[T]):m.push(T))}if(m&&u.push(m),a>1)for(let T=0;T<u.length;T++)u[T].length<=a||(Yf(u[T],a,1,u[T].length-1,Zp),u[T]=u[T].slice(0,a));return u}function Zp(o,a){return a.area-o.area}function Kp(o){let a=0;for(let u,m,v=0,T=o.length,P=T-1;v<T;P=v++)u=o[v],m=o[P],a+=(m.x-u.x)*(u.y+m.y);return a}const Qf=1/298.257223563,ed=Qf*(2-Qf),td=Math.PI/180;class bc{constructor(a){const u=6378.137*td*1e3,m=Math.cos(a*td),v=1/(1-ed*(1-m*m)),T=Math.sqrt(v);this.kx=u*T*m,this.ky=u*T*v*(1-ed)}distance(a,u){const m=this.wrap(a[0]-u[0])*this.kx,v=(a[1]-u[1])*this.ky;return Math.sqrt(m*m+v*v)}pointOnLine(a,u){let m,v,T,P,I=1/0;for(let O=0;O<a.length-1;O++){let z=a[O][0],V=a[O][1],W=this.wrap(a[O+1][0]-z)*this.kx,Y=(a[O+1][1]-V)*this.ky,re=0;W===0&&Y===0||(re=(this.wrap(u[0]-z)*this.kx*W+(u[1]-V)*this.ky*Y)/(W*W+Y*Y),re>1?(z=a[O+1][0],V=a[O+1][1]):re>0&&(z+=W/this.kx*re,V+=Y/this.ky*re)),W=this.wrap(u[0]-z)*this.kx,Y=(u[1]-V)*this.ky;const se=W*W+Y*Y;se<I&&(I=se,m=z,v=V,T=O,P=re)}return{point:[m,v],index:T,t:Math.max(0,Math.min(1,P))}}wrap(a){for(;a<-180;)a+=360;for(;a>180;)a-=360;return a}}function rd(o,a){return a[0]-o[0]}function wc(o){return o[1]-o[0]+1}function Ro(o,a){return o[1]>=o[0]&&o[1]<a}function bh(o,a){if(o[0]>o[1])return[null,null];const u=wc(o);if(a){if(u===2)return[o,null];const v=Math.floor(u/2);return[[o[0],o[0]+v],[o[0]+v,o[1]]]}if(u===1)return[o,null];const m=Math.floor(u/2)-1;return[[o[0],o[0]+m],[o[0]+m+1,o[1]]]}function wu(o,a){if(!Ro(a,o.length))return[1/0,1/0,-1/0,-1/0];const u=[1/0,1/0,-1/0,-1/0];for(let m=a[0];m<=a[1];++m)fs(u,o[m]);return u}function wh(o){const a=[1/0,1/0,-1/0,-1/0];for(const u of o)for(const m of u)fs(a,m);return a}function Sc(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function Sh(o,a,u){if(!Sc(o)||!Sc(a))return NaN;let m=0,v=0;return o[2]<a[0]&&(m=a[0]-o[2]),o[0]>a[2]&&(m=o[0]-a[2]),o[1]>a[3]&&(v=o[1]-a[3]),o[3]<a[1]&&(v=a[1]-o[3]),u.distance([0,0],[m,v])}function ds(o,a,u){const m=u.pointOnLine(a,o);return u.distance(o,m.point)}function Th(o,a,u,m,v){const T=Math.min(ds(o,[u,m],v),ds(a,[u,m],v)),P=Math.min(ds(u,[o,a],v),ds(m,[o,a],v));return Math.min(T,P)}function Xp(o,a,u,m,v){if(!Ro(a,o.length)||!Ro(m,u.length))return 1/0;let T=1/0;for(let P=a[0];P<a[1];++P){const I=o[P],O=o[P+1];for(let z=m[0];z<m[1];++z){const V=u[z],W=u[z+1];if(Hs(I,O,V,W))return 0;T=Math.min(T,Th(I,O,V,W,v))}}return T}function Pn(o,a,u,m,v){if(!Ro(a,o.length)||!Ro(m,u.length))return NaN;let T=1/0;for(let P=a[0];P<=a[1];++P)for(let I=m[0];I<=m[1];++I)if(T=Math.min(T,v.distance(o[P],u[I])),T===0)return T;return T}function Yp(o,a,u){if(Do(o,a,!0))return 0;let m=1/0;for(const v of a){const T=v[0],P=v[v.length-1];if(T!==P&&(m=Math.min(m,ds(o,[P,T],u)),m===0))return m;const I=u.pointOnLine(v,o);if(m=Math.min(m,u.distance(o,I.point)),m===0)return m}return m}function Tr(o,a,u,m){if(!Ro(a,o.length))return NaN;for(let T=a[0];T<=a[1];++T)if(Do(o[T],u,!0))return 0;let v=1/0;for(let T=a[0];T<a[1];++T){const P=o[T],I=o[T+1];for(const O of u)for(let z=0,V=O.length,W=V-1;z<V;W=z++){const Y=O[W],re=O[z];if(Hs(P,I,Y,re))return 0;v=Math.min(v,Th(P,I,Y,re,m))}}return v}function Tc(o,a){for(const u of o)for(const m of u)if(Do(m,a,!0))return!0;return!1}function en(o,a,u,m=1/0){const v=wh(o),T=wh(a);if(m!==1/0&&Sh(v,T,u)>=m)return m;if(Ai(v,T)){if(Tc(o,a))return 0}else if(Tc(a,o))return 0;let P=1/0;for(const I of o)for(let O=0,z=I.length,V=z-1;O<z;V=O++){const W=I[V],Y=I[O];for(const re of a)for(let se=0,he=re.length,_e=he-1;se<he;_e=se++){const Ae=re[_e],qe=re[se];if(Hs(W,Y,Ae,qe))return 0;P=Math.min(P,Th(W,Y,Ae,qe,u))}}return P}function Vr(o,a,u,m,v,T){if(!T)return;const P=Sh(wu(m,T),v,u);P<a&&o.push([P,T,[0,0]])}function Za(o,a,u,m,v,T,P){if(!T||!P)return;const I=Sh(wu(m,T),wu(v,P),u);I<a&&o.push([I,T,P])}function Su(o,a,u,m,v=1/0){let T=Math.min(m.distance(o[0],u[0][0]),v);if(T===0)return T;const P=new xu([[0,[0,o.length-1],[0,0]]],rd),I=wh(u);for(;P.length>0;){const O=P.pop();if(O[0]>=T)continue;const z=O[1],V=a?50:100;if(wc(z)<=V){if(!Ro(z,o.length))return NaN;if(a){const W=Tr(o,z,u,m);if(isNaN(W)||W===0)return W;T=Math.min(T,W)}else for(let W=z[0];W<=z[1];++W){const Y=Yp(o[W],u,m);if(T=Math.min(T,Y),T===0)return 0}}else{const W=bh(z,a);Vr(P,T,m,o,I,W[0]),Vr(P,T,m,o,I,W[1])}}return T}function El(o,a,u,m,v,T=1/0){let P=Math.min(T,v.distance(o[0],u[0]));if(P===0)return P;const I=new xu([[0,[0,o.length-1],[0,u.length-1]]],rd);for(;I.length>0;){const O=I.pop();if(O[0]>=P)continue;const z=O[1],V=O[2],W=a?50:100,Y=m?50:100;if(wc(z)<=W&&wc(V)<=Y){if(!Ro(z,o.length)&&Ro(V,u.length))return NaN;let re;if(a&&m)re=Xp(o,z,u,V,v),P=Math.min(P,re);else if(a&&!m){const se=o.slice(z[0],z[1]+1);for(let he=V[0];he<=V[1];++he)if(re=ds(u[he],se,v),P=Math.min(P,re),P===0)return P}else if(!a&&m){const se=u.slice(V[0],V[1]+1);for(let he=z[0];he<=z[1];++he)if(re=ds(o[he],se,v),P=Math.min(P,re),P===0)return P}else re=Pn(o,z,u,V,v),P=Math.min(P,re)}else{const re=bh(z,a),se=bh(V,m);Za(I,P,v,o,u,re[0],se[0]),Za(I,P,v,o,u,re[0],se[1]),Za(I,P,v,o,u,re[1],se[0]),Za(I,P,v,o,u,re[1],se[1])}}return P}function Pc(o){return o.type==="MultiPolygon"?o.coordinates.map((a=>({type:"Polygon",coordinates:a}))):o.type==="MultiLineString"?o.coordinates.map((a=>({type:"LineString",coordinates:a}))):o.type==="MultiPoint"?o.coordinates.map((a=>({type:"Point",coordinates:a}))):[o]}class ps{constructor(a,u){this.type=St,this.geojson=a,this.geometries=u}static parse(a,u){if(a.length!==2)return u.error(`'distance' expression requires exactly one argument, but found ${a.length-1} instead.`);if($s(a[1])){const m=a[1];if(m.type==="FeatureCollection")return new ps(m,m.features.map((v=>Pc(v.geometry))).flat());if(m.type==="Feature")return new ps(m,Pc(m.geometry));if("type"in m&&"coordinates"in m)return new ps(m,Pc(m))}return u.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return(function(u,m){const v=u.geometry(),T=v.flat().map((O=>vu([O.x,O.y],u.canonical)));if(v.length===0)return NaN;const P=new bc(T[0][1]);let I=1/0;for(const O of m){switch(O.type){case"Point":I=Math.min(I,El(T,!1,[O.coordinates],!1,P,I));break;case"LineString":I=Math.min(I,El(T,!1,O.coordinates,!0,P,I));break;case"Polygon":I=Math.min(I,Su(T,!1,O.coordinates,P,I))}if(I===0)return I}return I})(a,this.geometries);if(a.geometryType()==="LineString")return(function(u,m){const v=u.geometry(),T=v.flat().map((O=>vu([O.x,O.y],u.canonical)));if(v.length===0)return NaN;const P=new bc(T[0][1]);let I=1/0;for(const O of m){switch(O.type){case"Point":I=Math.min(I,El(T,!0,[O.coordinates],!1,P,I));break;case"LineString":I=Math.min(I,El(T,!0,O.coordinates,!0,P,I));break;case"Polygon":I=Math.min(I,Su(T,!0,O.coordinates,P,I))}if(I===0)return I}return I})(a,this.geometries);if(a.geometryType()==="Polygon")return(function(u,m){const v=u.geometry();if(v.length===0||v[0].length===0)return NaN;const T=Al(v,0).map((O=>O.map((z=>z.map((V=>vu([V.x,V.y],u.canonical))))))),P=new bc(T[0][0][0][1]);let I=1/0;for(const O of m)for(const z of T){switch(O.type){case"Point":I=Math.min(I,Su([O.coordinates],!1,z,P,I));break;case"LineString":I=Math.min(I,Su(O.coordinates,!0,z,P,I));break;case"Polygon":I=Math.min(I,en(z,O.coordinates,P,I))}if(I===0)return I}return I})(a,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Ks={"==":Wp,"!=":yh,">":Zf,"<":yu,">=":Tl,"<=":Gp,array:Ni,at:qs,boolean:Ni,case:gu,coalesce:Ga,collator:Oo,format:Gs,image:vh,in:ph,"index-of":us,interpolate:Jn,"interpolate-hcl":Jn,"interpolate-lab":Jn,length:_h,let:ko,literal:Wa,match:$r,number:Ni,"number-format":hs,object:Ni,slice:wl,step:Ws,string:Ni,"to-boolean":Bi,"to-color":Bi,"to-number":Bi,"to-string":Bi,var:Or,within:Ha,distance:ps};class oa{constructor(a,u,m,v){this.name=a,this.type=u,this._evaluate=m,this.args=v}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}static parse(a,u){const m=a[0],v=oa.definitions[m];if(!v)return u.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const T=Array.isArray(v)?v[0]:v.type,P=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,I=P.filter((([z])=>!Array.isArray(z)||z.length===a.length-1));let O=null;for(const[z,V]of I){O=new Io(u.registry,Cl,u.path,null,u.scope);const W=[];let Y=!1;for(let re=1;re<a.length;re++){const se=a[re],he=Array.isArray(z)?z[re-1]:z.type,_e=O.parse(se,1+W.length,he);if(!_e){Y=!0;break}W.push(_e)}if(!Y)if(Array.isArray(z)&&z.length!==W.length)O.error(`Expected ${z.length} arguments, but found ${W.length} instead.`);else{for(let re=0;re<W.length;re++){const se=Array.isArray(z)?z[re]:z.type,he=W[re];O.concat(re+1).checkSubtype(se,he.type)}if(O.errors.length===0)return new oa(m,T,V,W)}}if(I.length===1)u.errors.push(...O.errors);else{const z=(I.length?I:P).map((([W])=>{return Y=W,Array.isArray(Y)?`(${Y.map(ee).join(", ")})`:`(${ee(Y.type)}...)`;var Y})).join(" | "),V=[];for(let W=1;W<a.length;W++){const Y=u.parse(a[W],1+V.length);if(!Y)return null;V.push(ee(Y.type))}u.error(`Expected arguments of type ${z}, but found (${V.join(", ")}) instead.`)}return null}static register(a,u){oa.definitions=u;for(const m in u)a[m]=oa}}function ms(o,[a,u,m,v]){a=a.evaluate(o),u=u.evaluate(o),m=m.evaluate(o);const T=v?v.evaluate(o):1,P=Pi(a,u,m,T);if(P)throw new In(P);return new cr(a/255,u/255,m/255,T,!1)}function Ph(o,a){return o in a}function Ah(o,a){const u=a[o];return u===void 0?null:u}function Xs(o){return{type:o}}function Cl(o){if(o instanceof Or)return Cl(o.boundExpression);if(o instanceof oa&&o.name==="error"||o instanceof Oo||o instanceof Ha||o instanceof ps)return!1;const a=o instanceof Bi||o instanceof Ni;let u=!0;return o.eachChild((m=>{u=a?u&&Cl(m):u&&m instanceof Wa})),!!u&&Ml(o)&&jo(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ml(o){if(o instanceof oa&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Ha||o instanceof ps)return!1;let a=!0;return o.eachChild((u=>{a&&!Ml(u)&&(a=!1)})),a}function po(o){if(o instanceof oa&&o.name==="feature-state")return!1;let a=!0;return o.eachChild((u=>{a&&!po(u)&&(a=!1)})),a}function jo(o,a){if(o instanceof oa&&a.indexOf(o.name)>=0)return!1;let u=!0;return o.eachChild((m=>{u&&!jo(m,a)&&(u=!1)})),u}function Ac(o){return{result:"success",value:o}}function zo(o){return{result:"error",value:o}}function Il(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Eh(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Tu(o){return!!o.expression&&o.expression.interpolated}function Cr(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Pu(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function nd(o){return o}function Ch(o,a){const u=a.type==="color",m=o.stops&&typeof o.stops[0][0]=="object",v=m||!(m||o.property!==void 0),T=o.type||(Tu(a)?"exponential":"interval");if(u||a.type==="padding"){const V=u?cr.parse:mi.parse;(o=zi({},o)).stops&&(o.stops=o.stops.map((W=>[W[0],V(W[1])]))),o.default=V(o.default?o.default:a.default)}if(o.colorSpace&&(P=o.colorSpace)!=="rgb"&&P!=="hcl"&&P!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var P;let I,O,z;if(T==="exponential")I=ad;else if(T==="interval")I=Ec;else if(T==="categorical"){I=id,O=Object.create(null);for(const V of o.stops)O[V[0]]=V[1];z=typeof o.stops[0][0]}else{if(T!=="identity")throw new Error(`Unknown function type "${T}"`);I=od}if(m){const V={},W=[];for(let se=0;se<o.stops.length;se++){const he=o.stops[se],_e=he[0].zoom;V[_e]===void 0&&(V[_e]={zoom:_e,type:o.type,property:o.property,default:o.default,stops:[]},W.push(_e)),V[_e].stops.push([he[0].value,he[1]])}const Y=[];for(const se of W)Y.push([V[se].zoom,Ch(V[se],a)]);const re={name:"linear"};return{kind:"composite",interpolationType:re,interpolationFactor:Jn.interpolationFactor.bind(void 0,re),zoomStops:Y.map((se=>se[0])),evaluate:({zoom:se},he)=>ad({stops:Y,base:o.base},a,se).evaluate(se,he)}}if(v){const V=T==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:V,interpolationFactor:Jn.interpolationFactor.bind(void 0,V),zoomStops:o.stops.map((W=>W[0])),evaluate:({zoom:W})=>I(o,a,W,O,z)}}return{kind:"source",evaluate(V,W){const Y=W&&W.properties?W.properties[o.property]:void 0;return Y===void 0?kl(o.default,a.default):I(o,a,Y,O,z)}}}function kl(o,a,u){return o!==void 0?o:a!==void 0?a:u!==void 0?u:void 0}function id(o,a,u,m,v){return kl(typeof u===v?m[u]:void 0,o.default,a.default)}function Ec(o,a,u){if(Cr(u)!=="number")return kl(o.default,a.default);const m=o.stops.length;if(m===1||u<=o.stops[0][0])return o.stops[0][1];if(u>=o.stops[m-1][0])return o.stops[m-1][1];const v=Sl(o.stops.map((T=>T[0])),u);return o.stops[v][1]}function ad(o,a,u){const m=o.base!==void 0?o.base:1;if(Cr(u)!=="number")return kl(o.default,a.default);const v=o.stops.length;if(v===1||u<=o.stops[0][0])return o.stops[0][1];if(u>=o.stops[v-1][0])return o.stops[v-1][1];const T=Sl(o.stops.map((V=>V[0])),u),P=(function(V,W,Y,re){const se=re-Y,he=V-Y;return se===0?0:W===1?he/se:(Math.pow(W,he)-1)/(Math.pow(W,se)-1)})(u,m,o.stops[T][0],o.stops[T+1][0]),I=o.stops[T][1],O=o.stops[T+1][1],z=kn[a.type]||nd;return typeof I.evaluate=="function"?{evaluate(...V){const W=I.evaluate.apply(void 0,V),Y=O.evaluate.apply(void 0,V);if(W!==void 0&&Y!==void 0)return z(W,Y,P,o.colorSpace)}}:z(I,O,P,o.colorSpace)}function od(o,a,u){switch(a.type){case"color":u=cr.parse(u);break;case"formatted":u=Li.fromString(u.toString());break;case"resolvedImage":u=gi.fromString(u.toString());break;case"padding":u=mi.parse(u);break;default:Cr(u)===a.type||a.type==="enum"&&a.values[u]||(u=void 0)}return kl(u,o.default,a.default)}oa.register(Ks,{error:[{kind:"error"},[vr],(o,[a])=>{throw new In(a.evaluate(o))}],typeof:[vr,[ur],(o,[a])=>ee(Wr(a.evaluate(o)))],"to-rgba":[te(St,4),[pi],(o,[a])=>{const[u,m,v,T]=a.evaluate(o).rgb;return[255*u,255*m,255*v,T]}],rgb:[pi,[St,St,St],ms],rgba:[pi,[St,St,St,St],ms],has:{type:nr,overloads:[[[vr],(o,[a])=>Ph(a.evaluate(o),o.properties())],[[vr,ra],(o,[a,u])=>Ph(a.evaluate(o),u.evaluate(o))]]},get:{type:ur,overloads:[[[vr],(o,[a])=>Ah(a.evaluate(o),o.properties())],[[vr,ra],(o,[a,u])=>Ah(a.evaluate(o),u.evaluate(o))]]},"feature-state":[ur,[vr],(o,[a])=>Ah(a.evaluate(o),o.featureState||{})],properties:[ra,[],o=>o.properties()],"geometry-type":[vr,[],o=>o.geometryType()],id:[ur,[],o=>o.id()],zoom:[St,[],o=>o.globals.zoom],"heatmap-density":[St,[],o=>o.globals.heatmapDensity||0],"line-progress":[St,[],o=>o.globals.lineProgress||0],accumulated:[ur,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[St,Xs(St),(o,a)=>{let u=0;for(const m of a)u+=m.evaluate(o);return u}],"*":[St,Xs(St),(o,a)=>{let u=1;for(const m of a)u*=m.evaluate(o);return u}],"-":{type:St,overloads:[[[St,St],(o,[a,u])=>a.evaluate(o)-u.evaluate(o)],[[St],(o,[a])=>-a.evaluate(o)]]},"/":[St,[St,St],(o,[a,u])=>a.evaluate(o)/u.evaluate(o)],"%":[St,[St,St],(o,[a,u])=>a.evaluate(o)%u.evaluate(o)],ln2:[St,[],()=>Math.LN2],pi:[St,[],()=>Math.PI],e:[St,[],()=>Math.E],"^":[St,[St,St],(o,[a,u])=>Math.pow(a.evaluate(o),u.evaluate(o))],sqrt:[St,[St],(o,[a])=>Math.sqrt(a.evaluate(o))],log10:[St,[St],(o,[a])=>Math.log(a.evaluate(o))/Math.LN10],ln:[St,[St],(o,[a])=>Math.log(a.evaluate(o))],log2:[St,[St],(o,[a])=>Math.log(a.evaluate(o))/Math.LN2],sin:[St,[St],(o,[a])=>Math.sin(a.evaluate(o))],cos:[St,[St],(o,[a])=>Math.cos(a.evaluate(o))],tan:[St,[St],(o,[a])=>Math.tan(a.evaluate(o))],asin:[St,[St],(o,[a])=>Math.asin(a.evaluate(o))],acos:[St,[St],(o,[a])=>Math.acos(a.evaluate(o))],atan:[St,[St],(o,[a])=>Math.atan(a.evaluate(o))],min:[St,Xs(St),(o,a)=>Math.min(...a.map((u=>u.evaluate(o))))],max:[St,Xs(St),(o,a)=>Math.max(...a.map((u=>u.evaluate(o))))],abs:[St,[St],(o,[a])=>Math.abs(a.evaluate(o))],round:[St,[St],(o,[a])=>{const u=a.evaluate(o);return u<0?-Math.round(-u):Math.round(u)}],floor:[St,[St],(o,[a])=>Math.floor(a.evaluate(o))],ceil:[St,[St],(o,[a])=>Math.ceil(a.evaluate(o))],"filter-==":[nr,[vr,ur],(o,[a,u])=>o.properties()[a.value]===u.value],"filter-id-==":[nr,[ur],(o,[a])=>o.id()===a.value],"filter-type-==":[nr,[vr],(o,[a])=>o.geometryType()===a.value],"filter-<":[nr,[vr,ur],(o,[a,u])=>{const m=o.properties()[a.value],v=u.value;return typeof m==typeof v&&m<v}],"filter-id-<":[nr,[ur],(o,[a])=>{const u=o.id(),m=a.value;return typeof u==typeof m&&u<m}],"filter->":[nr,[vr,ur],(o,[a,u])=>{const m=o.properties()[a.value],v=u.value;return typeof m==typeof v&&m>v}],"filter-id->":[nr,[ur],(o,[a])=>{const u=o.id(),m=a.value;return typeof u==typeof m&&u>m}],"filter-<=":[nr,[vr,ur],(o,[a,u])=>{const m=o.properties()[a.value],v=u.value;return typeof m==typeof v&&m<=v}],"filter-id-<=":[nr,[ur],(o,[a])=>{const u=o.id(),m=a.value;return typeof u==typeof m&&u<=m}],"filter->=":[nr,[vr,ur],(o,[a,u])=>{const m=o.properties()[a.value],v=u.value;return typeof m==typeof v&&m>=v}],"filter-id->=":[nr,[ur],(o,[a])=>{const u=o.id(),m=a.value;return typeof u==typeof m&&u>=m}],"filter-has":[nr,[ur],(o,[a])=>a.value in o.properties()],"filter-has-id":[nr,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[nr,[te(vr)],(o,[a])=>a.value.indexOf(o.geometryType())>=0],"filter-id-in":[nr,[te(ur)],(o,[a])=>a.value.indexOf(o.id())>=0],"filter-in-small":[nr,[vr,te(ur)],(o,[a,u])=>u.value.indexOf(o.properties()[a.value])>=0],"filter-in-large":[nr,[vr,te(ur)],(o,[a,u])=>(function(m,v,T,P){for(;T<=P;){const I=T+P>>1;if(v[I]===m)return!0;v[I]>m?P=I-1:T=I+1}return!1})(o.properties()[a.value],u.value,0,u.value.length-1)],all:{type:nr,overloads:[[[nr,nr],(o,[a,u])=>a.evaluate(o)&&u.evaluate(o)],[Xs(nr),(o,a)=>{for(const u of a)if(!u.evaluate(o))return!1;return!0}]]},any:{type:nr,overloads:[[[nr,nr],(o,[a,u])=>a.evaluate(o)||u.evaluate(o)],[Xs(nr),(o,a)=>{for(const u of a)if(u.evaluate(o))return!0;return!1}]]},"!":[nr,[nr],(o,[a])=>!a.evaluate(o)],"is-supported-script":[nr,[vr],(o,[a])=>{const u=o.globals&&o.globals.isSupportedScript;return!u||u(a.evaluate(o))}],upcase:[vr,[vr],(o,[a])=>a.evaluate(o).toUpperCase()],downcase:[vr,[vr],(o,[a])=>a.evaluate(o).toLowerCase()],concat:[vr,Xs(ur),(o,a)=>a.map((u=>mu(u.evaluate(o)))).join("")],"resolved-locale":[vr,[xa],(o,[a])=>a.evaluate(o).resolvedLocale()]});class $i{constructor(a,u){var m;this.expression=a,this._warningHistory={},this._evaluator=new dc,this._defaultValue=u?(m=u).type==="color"&&Pu(m.default)?new cr(0,0,0,0):m.type==="color"?cr.parse(m.default)||null:m.type==="padding"?mi.parse(m.default)||null:m.type==="variableAnchorOffsetCollection"?ia.parse(m.default)||null:m.default===void 0?null:m.default:null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(a,u,m,v,T,P){return this._evaluator.globals=a,this._evaluator.feature=u,this._evaluator.featureState=m,this._evaluator.canonical=v,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=P,this.expression.evaluate(this._evaluator)}evaluate(a,u,m,v,T,P){this._evaluator.globals=a,this._evaluator.feature=u||null,this._evaluator.featureState=m||null,this._evaluator.canonical=v,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=P||null;try{const I=this.expression.evaluate(this._evaluator);if(I==null||typeof I=="number"&&I!=I)return this._defaultValue;if(this._enumValues&&!(I in this._enumValues))throw new In(`Expected value to be one of ${Object.keys(this._enumValues).map((O=>JSON.stringify(O))).join(", ")}, but found ${JSON.stringify(I)} instead.`);return I}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,typeof console<"u"&&console.warn(I.message)),this._defaultValue}}}function gs(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Ks}function Ys(o,a){const u=new Io(Ks,Cl,[],a?(function(v){const T={color:pi,string:vr,number:St,enum:vr,boolean:nr,formatted:qa,padding:na,resolvedImage:Si,variableAnchorOffsetCollection:xe};return v.type==="array"?te(T[v.value]||ur,v.length):T[v.type]})(a):void 0),m=u.parse(o,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Ac(new $i(m,a)):zo(u.errors)}class Js{constructor(a,u){this.kind=a,this._styleExpression=u,this.isStateDependent=a!=="constant"&&!po(u.expression)}evaluateWithoutErrorHandling(a,u,m,v,T,P){return this._styleExpression.evaluateWithoutErrorHandling(a,u,m,v,T,P)}evaluate(a,u,m,v,T,P){return this._styleExpression.evaluate(a,u,m,v,T,P)}}class Qs{constructor(a,u,m,v){this.kind=a,this.zoomStops=m,this._styleExpression=u,this.isStateDependent=a!=="camera"&&!po(u.expression),this.interpolationType=v}evaluateWithoutErrorHandling(a,u,m,v,T,P){return this._styleExpression.evaluateWithoutErrorHandling(a,u,m,v,T,P)}evaluate(a,u,m,v,T,P){return this._styleExpression.evaluate(a,u,m,v,T,P)}interpolationFactor(a,u,m){return this.interpolationType?Jn.interpolationFactor(this.interpolationType,a,u,m):0}}function Cc(o,a){const u=Ys(o,a);if(u.result==="error")return u;const m=u.value.expression,v=Ml(m);if(!v&&!Il(a))return zo([new Tn("","data expressions not supported")]);const T=jo(m,["zoom"]);if(!T&&!Eh(a))return zo([new Tn("","zoom expressions not supported")]);const P=Au(m);return P||T?P instanceof Tn?zo([P]):P instanceof Jn&&!Tu(a)?zo([new Tn("",'"interpolate" expressions cannot be used with this property')]):Ac(P?new Qs(v?"camera":"composite",u.value,P.labels,P instanceof Jn?P.interpolation:void 0):new Js(v?"constant":"source",u.value)):zo([new Tn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ys{constructor(a,u){this._parameters=a,this._specification=u,zi(this,Ch(this._parameters,this._specification))}static deserialize(a){return new ys(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function Au(o){let a=null;if(o instanceof ko)a=Au(o.result);else if(o instanceof Ga){for(const u of o.args)if(a=Au(u),a)break}else(o instanceof Ws||o instanceof Jn)&&o.input instanceof oa&&o.input.name==="zoom"&&(a=o);return a instanceof Tn||o.eachChild((u=>{const m=Au(u);m instanceof Tn?a=m:!a&&m?a=new Tn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&m&&a!==m&&(a=new Tn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),a}function Mc(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const a of o.slice(1))if(!Mc(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}const Lo={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Eu(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Mc(o)||(o=Mu(o));const a=Ys(o,Lo);if(a.result==="error")throw new Error(a.value.map((u=>`${u.key}: ${u.message}`)).join(", "));return{filter:(u,m,v)=>a.value.evaluate(u,m,{},v),needGeometry:Ic(o)}}function Cu(o,a){return o<a?-1:o>a?1:0}function Ic(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let a=1;a<o.length;a++)if(Ic(o[a]))return!0;return!1}function Mu(o){if(!o)return!0;const a=o[0];return o.length<=1?a!=="any":a==="=="?Ol(o[1],o[2],"=="):a==="!="?ai(Ol(o[1],o[2],"==")):a==="<"||a===">"||a==="<="||a===">="?Ol(o[1],o[2],a):a==="any"?(u=o.slice(1),["any"].concat(u.map(Mu))):a==="all"?["all"].concat(o.slice(1).map(Mu)):a==="none"?["all"].concat(o.slice(1).map(Mu).map(ai)):a==="in"?mo(o[1],o.slice(2)):a==="!in"?ai(mo(o[1],o.slice(2))):a==="has"?el(o[1]):a!=="!has"||ai(el(o[1]));var u}function Ol(o,a,u){switch(o){case"$type":return[`filter-type-${u}`,a];case"$id":return[`filter-id-${u}`,a];default:return[`filter-${u}`,o,a]}}function mo(o,a){if(a.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some((u=>typeof u!=typeof a[0]))?["filter-in-large",o,["literal",a.sort(Cu)]]:["filter-in-small",o,["literal",a]]}}function el(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function ai(o){return["!",o]}function go(o){const a=typeof o;if(a==="number"||a==="boolean"||a==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let v="[";for(const T of o)v+=`${go(T)},`;return`${v}]`}const u=Object.keys(o).sort();let m="{";for(let v=0;v<u.length;v++)m+=`${JSON.stringify(u[v])}:${go(o[u[v]])},`;return`${m}}`}function Mh(o){let a="";for(const u of Er)a+=`/${go(o[u])}`;return a}function Ih(o){const a=o.value;return a?[new yt(o.key,a,"constants have been deprecated as of v8")]:[]}function xn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Sa(o){if(Array.isArray(o))return o.map(Sa);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const a={};for(const u in o)a[u]=Sa(o[u]);return a}return xn(o)}function Vi(o){const a=o.key,u=o.value,m=o.valueSpec||{},v=o.objectElementValidators||{},T=o.style,P=o.styleSpec,I=o.validateSpec;let O=[];const z=Cr(u);if(z!=="object")return[new yt(a,u,`object expected, ${z} found`)];for(const V in u){const W=V.split(".")[0],Y=m[W]||m["*"];let re;if(v[W])re=v[W];else if(m[W])re=I;else if(v["*"])re=v["*"];else{if(!m["*"]){O.push(new yt(a,u[V],`unknown property "${V}"`));continue}re=I}O=O.concat(re({key:(a&&`${a}.`)+V,value:u[V],valueSpec:Y,style:T,styleSpec:P,object:u,objectKey:V,validateSpec:I},u))}for(const V in m)v[V]||m[V].required&&m[V].default===void 0&&u[V]===void 0&&O.push(new yt(a,u,`missing required property "${V}"`));return O}function Dl(o){const a=o.value,u=o.valueSpec,m=o.style,v=o.styleSpec,T=o.key,P=o.arrayElementValidator||o.validateSpec;if(Cr(a)!=="array")return[new yt(T,a,`array expected, ${Cr(a)} found`)];if(u.length&&a.length!==u.length)return[new yt(T,a,`array length ${u.length} expected, length ${a.length} found`)];if(u["min-length"]&&a.length<u["min-length"])return[new yt(T,a,`array length at least ${u["min-length"]} expected, length ${a.length} found`)];let I={type:u.value,values:u.values};v.$version<7&&(I.function=u.function),Cr(u.value)==="object"&&(I=u.value);let O=[];for(let z=0;z<a.length;z++)O=O.concat(P({array:a,arrayIndex:z,value:a[z],valueSpec:I,validateSpec:o.validateSpec,style:m,styleSpec:v,key:`${T}[${z}]`}));return O}function yo(o){const a=o.key,u=o.value,m=o.valueSpec;let v=Cr(u);return v==="number"&&u!=u&&(v="NaN"),v!=="number"?[new yt(a,u,`number expected, ${v} found`)]:"minimum"in m&&u<m.minimum?[new yt(a,u,`${u} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&u>m.maximum?[new yt(a,u,`${u} is greater than the maximum value ${m.maximum}`)]:[]}function Rl(o){const a=o.valueSpec,u=xn(o.value.type);let m,v,T,P={};const I=u!=="categorical"&&o.value.property===void 0,O=!I,z=Cr(o.value.stops)==="array"&&Cr(o.value.stops[0])==="array"&&Cr(o.value.stops[0][0])==="object",V=Vi({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(re){if(u==="identity")return[new yt(re.key,re.value,'identity function may not have a "stops" property')];let se=[];const he=re.value;return se=se.concat(Dl({key:re.key,value:he,valueSpec:re.valueSpec,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec,arrayElementValidator:W})),Cr(he)==="array"&&he.length===0&&se.push(new yt(re.key,he,"array must have at least one stop")),se},default:function(re){return re.validateSpec({key:re.key,value:re.value,valueSpec:a,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec})}}});return u==="identity"&&I&&V.push(new yt(o.key,o.value,'missing required property "property"')),u==="identity"||o.value.stops||V.push(new yt(o.key,o.value,'missing required property "stops"')),u==="exponential"&&o.valueSpec.expression&&!Tu(o.valueSpec)&&V.push(new yt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(O&&!Il(o.valueSpec)?V.push(new yt(o.key,o.value,"property functions not supported")):I&&!Eh(o.valueSpec)&&V.push(new yt(o.key,o.value,"zoom functions not supported"))),u!=="categorical"&&!z||o.value.property!==void 0||V.push(new yt(o.key,o.value,'"property" property is required')),V;function W(re){let se=[];const he=re.value,_e=re.key;if(Cr(he)!=="array")return[new yt(_e,he,`array expected, ${Cr(he)} found`)];if(he.length!==2)return[new yt(_e,he,`array length 2 expected, length ${he.length} found`)];if(z){if(Cr(he[0])!=="object")return[new yt(_e,he,`object expected, ${Cr(he[0])} found`)];if(he[0].zoom===void 0)return[new yt(_e,he,"object stop key must have zoom")];if(he[0].value===void 0)return[new yt(_e,he,"object stop key must have value")];if(T&&T>xn(he[0].zoom))return[new yt(_e,he[0].zoom,"stop zoom values must appear in ascending order")];xn(he[0].zoom)!==T&&(T=xn(he[0].zoom),v=void 0,P={}),se=se.concat(Vi({key:`${_e}[0]`,value:he[0],valueSpec:{zoom:{}},validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec,objectElementValidators:{zoom:yo,value:Y}}))}else se=se.concat(Y({key:`${_e}[0]`,value:he[0],validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec},he));return gs(Sa(he[1]))?se.concat([new yt(`${_e}[1]`,he[1],"expressions are not allowed in function stops.")]):se.concat(re.validateSpec({key:`${_e}[1]`,value:he[1],valueSpec:a,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec}))}function Y(re,se){const he=Cr(re.value),_e=xn(re.value),Ae=re.value!==null?re.value:se;if(m){if(he!==m)return[new yt(re.key,Ae,`${he} stop domain type must match previous stop domain type ${m}`)]}else m=he;if(he!=="number"&&he!=="string"&&he!=="boolean")return[new yt(re.key,Ae,"stop domain value must be a number, string, or boolean")];if(he!=="number"&&u!=="categorical"){let qe=`number expected, ${he} found`;return Il(a)&&u===void 0&&(qe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new yt(re.key,Ae,qe)]}return u!=="categorical"||he!=="number"||isFinite(_e)&&Math.floor(_e)===_e?u!=="categorical"&&he==="number"&&v!==void 0&&_e<v?[new yt(re.key,Ae,"stop domain values must appear in ascending order")]:(v=_e,u==="categorical"&&_e in P?[new yt(re.key,Ae,"stop domain values must be unique")]:(P[_e]=!0,[])):[new yt(re.key,Ae,`integer expected, found ${_e}`)]}}function vs(o){const a=(o.expressionContext==="property"?Cc:Ys)(Sa(o.value),o.valueSpec);if(a.result==="error")return a.value.map((m=>new yt(`${o.key}${m.key}`,o.value,m.message)));const u=a.value.expression||a.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!u.outputDefined())return[new yt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!po(u))return[new yt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!po(u))return[new yt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!jo(u,["zoom","feature-state"]))return[new yt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!Ml(u))return[new yt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function No(o){const a=o.key,u=o.value,m=o.valueSpec,v=[];return Array.isArray(m.values)?m.values.indexOf(xn(u))===-1&&v.push(new yt(a,u,`expected one of [${m.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(m.values).indexOf(xn(u))===-1&&v.push(new yt(a,u,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(u)} found`)),v}function kh(o){return Mc(Sa(o.value))?vs(zi({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):_s(o)}function _s(o){const a=o.value,u=o.key;if(Cr(a)!=="array")return[new yt(u,a,`array expected, ${Cr(a)} found`)];const m=o.styleSpec;let v,T=[];if(a.length<1)return[new yt(u,a,"filter array must have at least 1 element")];switch(T=T.concat(No({key:`${u}[0]`,value:a[0],valueSpec:m.filter_operator,style:o.style,styleSpec:o.styleSpec})),xn(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&xn(a[1])==="$type"&&T.push(new yt(u,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&T.push(new yt(u,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(v=Cr(a[1]),v!=="string"&&T.push(new yt(`${u}[1]`,a[1],`string expected, ${v} found`)));for(let P=2;P<a.length;P++)v=Cr(a[P]),xn(a[1])==="$type"?T=T.concat(No({key:`${u}[${P}]`,value:a[P],valueSpec:m.geometry_type,style:o.style,styleSpec:o.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&T.push(new yt(`${u}[${P}]`,a[P],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let P=1;P<a.length;P++)T=T.concat(_s({key:`${u}[${P}]`,value:a[P],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":v=Cr(a[1]),a.length!==2?T.push(new yt(u,a,`filter array for "${a[0]}" operator must have 2 elements`)):v!=="string"&&T.push(new yt(`${u}[1]`,a[1],`string expected, ${v} found`))}return T}function Oh(o,a){const u=o.key,m=o.validateSpec,v=o.style,T=o.styleSpec,P=o.value,I=o.objectKey,O=T[`${a}_${o.layerType}`];if(!O)return[];const z=I.match(/^(.*)-transition$/);if(a==="paint"&&z&&O[z[1]]&&O[z[1]].transition)return m({key:u,value:P,valueSpec:T.transition,style:v,styleSpec:T});const V=o.valueSpec||O[I];if(!V)return[new yt(u,P,`unknown property "${I}"`)];let W;if(Cr(P)==="string"&&Il(V)&&!V.tokens&&(W=/^{([^}]+)}$/.exec(P)))return[new yt(u,P,`"${I}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(W[1])} }\`.`)];const Y=[];return o.layerType==="symbol"&&(I==="text-field"&&v&&!v.glyphs&&Y.push(new yt(u,P,'use of "text-field" requires a style "glyphs" property')),I==="text-font"&&Pu(Sa(P))&&xn(P.type)==="identity"&&Y.push(new yt(u,P,'"text-font" does not support identity functions'))),Y.concat(m({key:o.key,value:P,valueSpec:V,style:v,styleSpec:T,expressionContext:"property",propertyType:a,propertyKey:I}))}function Iu(o){return Oh(o,"paint")}function kc(o){return Oh(o,"layout")}function tn(o){let a=[];const u=o.value,m=o.key,v=o.style,T=o.styleSpec;u.type||u.ref||a.push(new yt(m,u,'either "type" or "ref" is required'));let P=xn(u.type);const I=xn(u.ref);if(u.id){const O=xn(u.id);for(let z=0;z<o.arrayIndex;z++){const V=v.layers[z];xn(V.id)===O&&a.push(new yt(m,u.id,`duplicate layer id "${u.id}", previously used at line ${V.id.__line__}`))}}if("ref"in u){let O;["type","source","source-layer","filter","layout"].forEach((z=>{z in u&&a.push(new yt(m,u[z],`"${z}" is prohibited for ref layers`))})),v.layers.forEach((z=>{xn(z.id)===I&&(O=z)})),O?O.ref?a.push(new yt(m,u.ref,"ref cannot reference another ref layer")):P=xn(O.type):a.push(new yt(m,u.ref,`ref layer "${I}" not found`))}else if(P!=="background")if(u.source){const O=v.sources&&v.sources[u.source],z=O&&xn(O.type);O?z==="vector"&&P==="raster"?a.push(new yt(m,u.source,`layer "${u.id}" requires a raster source`)):z!=="raster-dem"&&P==="hillshade"?a.push(new yt(m,u.source,`layer "${u.id}" requires a raster-dem source`)):z==="raster"&&P!=="raster"?a.push(new yt(m,u.source,`layer "${u.id}" requires a vector source`)):z!=="vector"||u["source-layer"]?z==="raster-dem"&&P!=="hillshade"?a.push(new yt(m,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):P!=="line"||!u.paint||!u.paint["line-gradient"]||z==="geojson"&&O.lineMetrics||a.push(new yt(m,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new yt(m,u,`layer "${u.id}" must specify a "source-layer"`)):a.push(new yt(m,u.source,`source "${u.source}" not found`))}else a.push(new yt(m,u,'missing required property "source"'));return a=a.concat(Vi({key:m,value:u,valueSpec:T.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${m}.type`,value:u.type,valueSpec:T.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:u,objectKey:"type"}),filter:kh,layout:O=>Vi({layer:u,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,validateSpec:O.validateSpec,objectElementValidators:{"*":z=>kc(zi({layerType:P},z))}}),paint:O=>Vi({layer:u,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,validateSpec:O.validateSpec,objectElementValidators:{"*":z=>Iu(zi({layerType:P},z))}})}})),a}function Bo(o){const a=o.value,u=o.key,m=Cr(a);return m!=="string"?[new yt(u,a,`string expected, ${m} found`)]:[]}const tl={promoteId:function({key:o,value:a}){if(Cr(a)==="string")return Bo({key:o,value:a});{const u=[];for(const m in a)u.push(...Bo({key:`${o}.${m}`,value:a[m]}));return u}}};function Fo(o){const a=o.value,u=o.key,m=o.styleSpec,v=o.style,T=o.validateSpec;if(!a.type)return[new yt(u,a,'"type" is required')];const P=xn(a.type);let I;switch(P){case"vector":case"raster":return I=Vi({key:u,value:a,valueSpec:m[`source_${P.replace("-","_")}`],style:o.style,styleSpec:m,objectElementValidators:tl,validateSpec:T}),I;case"raster-dem":return I=(function(O){var z;const V=(z=O.sourceName)!==null&&z!==void 0?z:"",W=O.value,Y=O.styleSpec,re=Y.source_raster_dem,se=O.style;let he=[];const _e=Cr(W);if(W===void 0)return he;if(_e!=="object")return he.push(new yt("source_raster_dem",W,`object expected, ${_e} found`)),he;const Ae=xn(W.encoding)==="custom",qe=["redFactor","greenFactor","blueFactor","baseShift"],ke=O.value.encoding?`"${O.value.encoding}"`:"Default";for(const Ne in W)!Ae&&qe.includes(Ne)?he.push(new yt(Ne,W[Ne],`In "${V}": "${Ne}" is only valid when "encoding" is set to "custom". ${ke} encoding found`)):re[Ne]?he=he.concat(O.validateSpec({key:Ne,value:W[Ne],valueSpec:re[Ne],validateSpec:O.validateSpec,style:se,styleSpec:Y})):he.push(new yt(Ne,W[Ne],`unknown property "${Ne}"`));return he})({sourceName:u,value:a,style:o.style,styleSpec:m,validateSpec:T}),I;case"geojson":if(I=Vi({key:u,value:a,valueSpec:m.source_geojson,style:v,styleSpec:m,validateSpec:T,objectElementValidators:tl}),a.cluster)for(const O in a.clusterProperties){const[z,V]=a.clusterProperties[O],W=typeof z=="string"?[z,["accumulated"],["get",O]]:z;I.push(...vs({key:`${u}.${O}.map`,value:V,expressionContext:"cluster-map"})),I.push(...vs({key:`${u}.${O}.reduce`,value:W,expressionContext:"cluster-reduce"}))}return I;case"video":return Vi({key:u,value:a,valueSpec:m.source_video,style:v,validateSpec:T,styleSpec:m});case"image":return Vi({key:u,value:a,valueSpec:m.source_image,style:v,validateSpec:T,styleSpec:m});case"canvas":return[new yt(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return No({key:`${u}.type`,value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Oc(o){const a=o.value,u=o.styleSpec,m=u.light,v=o.style;let T=[];const P=Cr(a);if(a===void 0)return T;if(P!=="object")return T=T.concat([new yt("light",a,`object expected, ${P} found`)]),T;for(const I in a){const O=I.match(/^(.*)-transition$/);T=T.concat(O&&m[O[1]]&&m[O[1]].transition?o.validateSpec({key:I,value:a[I],valueSpec:u.transition,validateSpec:o.validateSpec,style:v,styleSpec:u}):m[I]?o.validateSpec({key:I,value:a[I],valueSpec:m[I],validateSpec:o.validateSpec,style:v,styleSpec:u}):[new yt(I,a[I],`unknown property "${I}"`)])}return T}function ku(o){const a=o.value,u=o.styleSpec,m=u.sky,v=o.style,T=Cr(a);if(a===void 0)return[];if(T!=="object")return[new yt("sky",a,`object expected, ${T} found`)];let P=[];for(const I in a)P=P.concat(m[I]?o.validateSpec({key:I,value:a[I],valueSpec:m[I],style:v,styleSpec:u}):[new yt(I,a[I],`unknown property "${I}"`)]);return P}function rl(o){const a=o.value,u=o.styleSpec,m=u.terrain,v=o.style;let T=[];const P=Cr(a);if(a===void 0)return T;if(P!=="object")return T=T.concat([new yt("terrain",a,`object expected, ${P} found`)]),T;for(const I in a)T=T.concat(m[I]?o.validateSpec({key:I,value:a[I],valueSpec:m[I],validateSpec:o.validateSpec,style:v,styleSpec:u}):[new yt(I,a[I],`unknown property "${I}"`)]);return T}function jl(o){let a=[];const u=o.value,m=o.key;if(Array.isArray(u)){const v=[],T=[];for(const P in u)u[P].id&&v.includes(u[P].id)&&a.push(new yt(m,u,`all the sprites' ids must be unique, but ${u[P].id} is duplicated`)),v.push(u[P].id),u[P].url&&T.includes(u[P].url)&&a.push(new yt(m,u,`all the sprites' URLs must be unique, but ${u[P].url} is duplicated`)),T.push(u[P].url),a=a.concat(Vi({key:`${m}[${P}]`,value:u[P],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return a}return Bo({key:m,value:u})}const $o={"*":()=>[],array:Dl,boolean:function(o){const a=o.value,u=o.key,m=Cr(a);return m!=="boolean"?[new yt(u,a,`boolean expected, ${m} found`)]:[]},number:yo,color:function(o){const a=o.key,u=o.value,m=Cr(u);return m!=="string"?[new yt(a,u,`color expected, ${m} found`)]:cr.parse(String(u))?[]:[new yt(a,u,`color expected, "${u}" found`)]},constants:Ih,enum:No,filter:kh,function:Rl,layer:tn,object:Vi,source:Fo,light:Oc,sky:ku,terrain:rl,projection:function(o){const a=o.value,u=o.styleSpec,m=u.projection,v=o.style,T=Cr(a);if(a===void 0)return[];if(T!=="object")return[new yt("projection",a,`object expected, ${T} found`)];let P=[];for(const I in a)P=P.concat(m[I]?o.validateSpec({key:I,value:a[I],valueSpec:m[I],style:v,styleSpec:u}):[new yt(I,a[I],`unknown property "${I}"`)]);return P},string:Bo,formatted:function(o){return Bo(o).length===0?[]:vs(o)},resolvedImage:function(o){return Bo(o).length===0?[]:vs(o)},padding:function(o){const a=o.key,u=o.value;if(Cr(u)==="array"){if(u.length<1||u.length>4)return[new yt(a,u,`padding requires 1 to 4 values; ${u.length} values found`)];const m={type:"number"};let v=[];for(let T=0;T<u.length;T++)v=v.concat(o.validateSpec({key:`${a}[${T}]`,value:u[T],validateSpec:o.validateSpec,valueSpec:m}));return v}return yo({key:a,value:u,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const a=o.key,u=o.value,m=Cr(u),v=o.styleSpec;if(m!=="array"||u.length<1||u.length%2!=0)return[new yt(a,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let T=[];for(let P=0;P<u.length;P+=2)T=T.concat(No({key:`${a}[${P}]`,value:u[P],valueSpec:v.layout_symbol["text-anchor"]})),T=T.concat(Dl({key:`${a}[${P+1}]`,value:u[P+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:v}));return T},sprite:jl};function zl(o){const a=o.value,u=o.valueSpec,m=o.styleSpec;return o.validateSpec=zl,u.expression&&Pu(xn(a))?Rl(o):u.expression&&gs(Sa(a))?vs(o):u.type&&$o[u.type]?$o[u.type](o):Vi(zi({},o,{valueSpec:u.type?m[u.type]:u}))}function sd(o){const a=o.value,u=o.key,m=Bo(o);return m.length||(a.indexOf("{fontstack}")===-1&&m.push(new yt(u,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&m.push(new yt(u,a,'"glyphs" url must include a "{range}" token'))),m}function Ta(o,a=$e){let u=[];return u=u.concat(zl({key:"",value:o,valueSpec:a.$root,styleSpec:a,style:o,validateSpec:zl,objectElementValidators:{glyphs:sd,"*":()=>[]}})),o.constants&&(u=u.concat(Ih({key:"constants",value:o.constants}))),Ll(u)}function Ka(o){return function(a){return o({...a,validateSpec:zl})}}function Ll(o){return[].concat(o).sort(((a,u)=>a.line-u.line))}function Ui(o){return function(...a){return Ll(o.apply(this,a))}}Ta.source=Ui(Ka(Fo)),Ta.sprite=Ui(Ka(jl)),Ta.glyphs=Ui(Ka(sd)),Ta.light=Ui(Ka(Oc)),Ta.sky=Ui(Ka(ku)),Ta.terrain=Ui(Ka(rl)),Ta.layer=Ui(Ka(tn)),Ta.filter=Ui(Ka(kh)),Ta.paintProperty=Ui(Ka(Iu)),Ta.layoutProperty=Ui(Ka(kc));const Vo=Ta,Dh=Vo.light,Rh=Vo.sky,Dc=Vo.paintProperty,ld=Vo.layoutProperty;function Rc(o,a){let u=!1;if(a&&a.length)for(const m of a)o.fire(new jt(new Error(m.message))),u=!0;return u}class Nl{constructor(a,u,m){const v=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;const P=new Int32Array(this.arrayBuffer);a=P[0],this.d=(u=P[1])+2*(m=P[2]);for(let O=0;O<this.d*this.d;O++){const z=P[3+O],V=P[3+O+1];v.push(z===V?null:P.subarray(z,V))}const I=P[3+v.length+1];this.keys=P.subarray(P[3+v.length],I),this.bboxes=P.subarray(I),this.insert=this._insertReadonly}else{this.d=u+2*m;for(let P=0;P<this.d*this.d;P++)v.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=a,this.padding=m,this.scale=u/a,this.uid=0;const T=m/u*a;this.min=-T,this.max=a+T}insert(a,u,m,v,T){this._forEachCell(u,m,v,T,this._insertCell,this.uid++,void 0,void 0),this.keys.push(a),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(T)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(a,u,m,v,T,P){this.cells[T].push(P)}query(a,u,m,v,T){const P=this.min,I=this.max;if(a<=P&&u<=P&&I<=m&&I<=v&&!T)return Array.prototype.slice.call(this.keys);{const O=[];return this._forEachCell(a,u,m,v,this._queryCell,O,{},T),O}}_queryCell(a,u,m,v,T,P,I,O){const z=this.cells[T];if(z!==null){const V=this.keys,W=this.bboxes;for(let Y=0;Y<z.length;Y++){const re=z[Y];if(I[re]===void 0){const se=4*re;(O?O(W[se+0],W[se+1],W[se+2],W[se+3]):a<=W[se+2]&&u<=W[se+3]&&m>=W[se+0]&&v>=W[se+1])?(I[re]=!0,P.push(V[re])):I[re]=!1}}}}_forEachCell(a,u,m,v,T,P,I,O){const z=this._convertToCellCoord(a),V=this._convertToCellCoord(u),W=this._convertToCellCoord(m),Y=this._convertToCellCoord(v);for(let re=z;re<=W;re++)for(let se=V;se<=Y;se++){const he=this.d*se+re;if((!O||O(this._convertFromCellCoord(re),this._convertFromCellCoord(se),this._convertFromCellCoord(re+1),this._convertFromCellCoord(se+1)))&&T.call(this,a,u,m,v,he,P,I,O))return}}_convertFromCellCoord(a){return(a-this.padding)/this.scale}_convertToCellCoord(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const a=this.cells,u=3+this.cells.length+1+1;let m=0;for(let P=0;P<this.cells.length;P++)m+=this.cells[P].length;const v=new Int32Array(u+m+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let T=u;for(let P=0;P<a.length;P++){const I=a[P];v[3+P]=T,v.set(I,T),T+=I.length}return v[3+a.length]=T,v.set(this.keys,T),T+=this.keys.length,v[3+a.length+1]=T,v.set(this.bboxes,T),T+=this.bboxes.length,v.buffer}static serialize(a,u){const m=a.toArrayBuffer();return u&&u.push(m),{buffer:m}}static deserialize(a){return new Nl(a.buffer)}}const Pa={};function Lt(o,a,u={}){if(Pa[o])throw new Error(`${o} is already registered.`);Object.defineProperty(a,"_classRegistryKey",{value:o,writeable:!1}),Pa[o]={klass:a,omit:u.omit||[],shallow:u.shallow||[]}}Lt("Object",Object),Lt("TransferableGridIndex",Nl),Lt("Color",cr),Lt("Error",Error),Lt("AJAXError",_t),Lt("ResolvedImage",gi),Lt("StylePropertyFunction",ys),Lt("StyleExpression",$i,{omit:["_evaluator"]}),Lt("ZoomDependentExpression",Qs),Lt("ZoomConstantExpression",Js),Lt("CompoundExpression",oa,{omit:["_evaluate"]});for(const o in Ks)Ks[o]._classRegistryKey||Lt(`Expression_${o}`,Ks[o]);function Xa(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function jc(o){return o.$name||o.constructor._classRegistryKey}function nl(o){return!(function(a){if(a===null||typeof a!="object")return!1;const u=jc(a);return!(!u||u==="Object")})(o)&&(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||Xa(o)||et(o)||ArrayBuffer.isView(o)||o instanceof ImageData)}function Ei(o,a){if(nl(o))return(Xa(o)||et(o))&&a&&a.push(o),ArrayBuffer.isView(o)&&a&&a.push(o.buffer),o instanceof ImageData&&a&&a.push(o.data.buffer),o;if(Array.isArray(o)){const T=[];for(const P of o)T.push(Ei(P,a));return T}if(typeof o!="object")throw new Error("can't serialize object of type "+typeof o);const u=jc(o);if(!u)throw new Error(`can't serialize object of unregistered class ${o.constructor.name}`);if(!Pa[u])throw new Error(`${u} is not registered.`);const{klass:m}=Pa[u],v=m.serialize?m.serialize(o,a):{};if(m.serialize){if(a&&v===a[a.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const T in o){if(!o.hasOwnProperty(T)||Pa[u].omit.indexOf(T)>=0)continue;const P=o[T];v[T]=Pa[u].shallow.indexOf(T)>=0?P:Ei(P,a)}o instanceof Error&&(v.message=o.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(v.$name=u),v}function vo(o){if(nl(o))return o;if(Array.isArray(o))return o.map(vo);if(typeof o!="object")throw new Error("can't deserialize object of type "+typeof o);const a=jc(o)||"Object";if(!Pa[a])throw new Error(`can't deserialize unregistered class ${a}`);const{klass:u}=Pa[a];if(!u)throw new Error(`can't deserialize unregistered class ${a}`);if(u.deserialize)return u.deserialize(o);const m=Object.create(u.prototype);for(const v of Object.keys(o)){if(v==="$name")continue;const T=o[v];m[v]=Pa[a].shallow.indexOf(v)>=0?T:vo(T)}return m}class Ya{constructor(){this.first=!0}update(a,u){const m=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=u),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=m,!0))}}const Pr={"Latin-1 Supplement":o=>o>=128&&o<=255,"Hangul Jamo":o=>o>=4352&&o<=4607,Khmer:o=>o>=6016&&o<=6143,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Katakana:o=>o>=12448&&o<=12543,Kanbun:o=>o>=12688&&o<=12703,"CJK Strokes":o=>o>=12736&&o<=12783,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"Private Use Area":o=>o>=57344&&o<=63743,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function jh(o){for(const a of o)if(Ru(a.charCodeAt(0)))return!0;return!1}function Jp(o){for(const a of o)if(!Ja(a.charCodeAt(0)))return!1;return!0}function Uo(o){const a=o.map((u=>{try{return new RegExp(`\\p{sc=${u}}`,"u").source}catch{return null}})).filter((u=>u));return new RegExp(a.join("|"),"u")}const Ou=Uo(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ja(o){return!Ou.test(String.fromCodePoint(o))}const Du=Uo(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Ru(o){return!(o!==746&&o!==747&&(o<4352||!(Pr["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Pr["CJK Compatibility"](o)||Pr["CJK Strokes"](o)||!(!Pr["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Pr["Enclosed CJK Letters and Months"](o)||Pr["Ideographic Description Characters"](o)||Pr.Kanbun(o)||Pr.Katakana(o)&&o!==12540||!(!Pr["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Pr["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Pr["Vertical Forms"](o)||Pr["Yijing Hexagram Symbols"](o)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(o))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(o))||Du.test(String.fromCodePoint(o)))))}function il(o){return!(Ru(o)||(function(a){return!!(Pr["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||Pr["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||Pr["Letterlike Symbols"](a)||Pr["Number Forms"](a)||Pr["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||Pr["Control Pictures"](a)&&a!==9251||Pr["Optical Character Recognition"](a)||Pr["Enclosed Alphanumerics"](a)||Pr["Geometric Shapes"](a)||Pr["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||Pr["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||Pr["CJK Symbols and Punctuation"](a)||Pr.Katakana(a)||Pr["Private Use Area"](a)||Pr["CJK Compatibility Forms"](a)||Pr["Small Form Variants"](a)||Pr["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)})(o))}const xs=Uo(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function rn(o){return xs.test(String.fromCodePoint(o))}function on(o,a){return!(!a&&rn(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Pr.Khmer(o))}function bs(o){for(const a of o)if(rn(a.charCodeAt(0)))return!0;return!1}const Kr=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Ar{constructor(a,u){this.zoom=a,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ya,this.transition={})}isSupportedScript(a){return(function(u,m){for(const v of u)if(!on(v.charCodeAt(0),m))return!1;return!0})(a,Kr.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const a=this.zoom,u=a-Math.floor(a),m=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*u}}}class Aa{constructor(a,u){this.property=a,this.value=u,this.expression=(function(m,v){if(Pu(m))return new ys(m,v);if(gs(m)){const T=Cc(m,v);if(T.result==="error")throw new Error(T.value.map((P=>`${P.key}: ${P.message}`)).join(", "));return T.value}{let T=m;return v.type==="color"&&typeof m=="string"?T=cr.parse(m):v.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?v.type==="variableAnchorOffsetCollection"&&Array.isArray(m)&&(T=ia.parse(m)):T=mi.parse(m),{kind:"constant",evaluate:()=>T}}})(u===void 0?a.specification.default:u,a.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,u,m){return this.property.possiblyEvaluate(this,a,u,m)}}class qo{constructor(a){this.property=a,this.value=new Aa(a,void 0)}transitioned(a,u){return new ju(this.property,this.value,u,le({},a.transition,this.transition),a.now)}untransitioned(){return new ju(this.property,this.value,null,{},0)}}class oi{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return be(this._values[a].value.value)}setValue(a,u){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new qo(this._values[a].property)),this._values[a].value=new Aa(this._values[a].property,u===null?void 0:be(u))}getTransition(a){return be(this._values[a].transition)}setTransition(a,u){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new qo(this._values[a].property)),this._values[a].transition=be(u)||void 0}serialize(){const a={};for(const u of Object.keys(this._values)){const m=this.getValue(u);m!==void 0&&(a[u]=m);const v=this.getTransition(u);v!==void 0&&(a[`${u}-transition`]=v)}return a}transitioned(a,u){const m=new Bl(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].transitioned(a,u._values[v]);return m}untransitioned(){const a=new Bl(this._properties);for(const u of Object.keys(this._values))a._values[u]=this._values[u].untransitioned();return a}}class ju{constructor(a,u,m,v,T){this.property=a,this.value=u,this.begin=T+v.delay||0,this.end=this.begin+v.duration||0,a.specification.transition&&(v.delay||v.duration)&&(this.prior=m)}possiblyEvaluate(a,u,m){const v=a.now||0,T=this.value.possiblyEvaluate(a,u,m),P=this.prior;if(P){if(v>this.end)return this.prior=null,T;if(this.value.isDataDriven())return this.prior=null,T;if(v<this.begin)return P.possiblyEvaluate(a,u,m);{const I=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(P.possiblyEvaluate(a,u,m),T,(function(O){if(O<=0)return 0;if(O>=1)return 1;const z=O*O,V=z*O;return 4*(O<.5?V:3*(O-z)+V-.75)})(I))}}return T}}class Bl{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,u,m){const v=new $l(this._properties);for(const T of Object.keys(this._values))v._values[T]=this._values[T].possiblyEvaluate(a,u,m);return v}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class Fl{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}hasValue(a){return this._values[a].value!==void 0}getValue(a){return be(this._values[a].value)}setValue(a,u){this._values[a]=new Aa(this._values[a].property,u===null?void 0:be(u))}serialize(){const a={};for(const u of Object.keys(this._values)){const m=this.getValue(u);m!==void 0&&(a[u]=m)}return a}possiblyEvaluate(a,u,m){const v=new $l(this._properties);for(const T of Object.keys(this._values))v._values[T]=this._values[T].possiblyEvaluate(a,u,m);return v}}class sa{constructor(a,u,m){this.property=a,this.value=u,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,u,m,v){return this.property.evaluate(this.value,this.parameters,a,u,m,v)}}class $l{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class Nt{constructor(a){this.specification=a}possiblyEvaluate(a,u){if(a.isDataDriven())throw new Error("Value should not be data driven");return a.expression.evaluate(u)}interpolate(a,u,m){const v=kn[this.specification.type];return v?v(a,u,m):a}}class Qt{constructor(a,u){this.specification=a,this.overrides=u}possiblyEvaluate(a,u,m,v){return new sa(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(u,null,{},m,v)}:a.expression,u)}interpolate(a,u,m){if(a.value.kind!=="constant"||u.value.kind!=="constant")return a;if(a.value.value===void 0||u.value.value===void 0)return new sa(this,{kind:"constant",value:void 0},a.parameters);const v=kn[this.specification.type];if(v){const T=v(a.value.value,u.value.value,m);return new sa(this,{kind:"constant",value:T},a.parameters)}return a}evaluate(a,u,m,v,T,P){return a.kind==="constant"?a.value:a.evaluate(u,m,v,T,P)}}class Vl extends Qt{possiblyEvaluate(a,u,m,v){if(a.value===void 0)return new sa(this,{kind:"constant",value:void 0},u);if(a.expression.kind==="constant"){const T=a.expression.evaluate(u,null,{},m,v),P=a.property.specification.type==="resolvedImage"&&typeof T!="string"?T.name:T,I=this._calculate(P,P,P,u);return new sa(this,{kind:"constant",value:I},u)}if(a.expression.kind==="camera"){const T=this._calculate(a.expression.evaluate({zoom:u.zoom-1}),a.expression.evaluate({zoom:u.zoom}),a.expression.evaluate({zoom:u.zoom+1}),u);return new sa(this,{kind:"constant",value:T},u)}return new sa(this,a.expression,u)}evaluate(a,u,m,v,T,P){if(a.kind==="source"){const I=a.evaluate(u,m,v,T,P);return this._calculate(I,I,I,u)}return a.kind==="composite"?this._calculate(a.evaluate({zoom:Math.floor(u.zoom)-1},m,v),a.evaluate({zoom:Math.floor(u.zoom)},m,v),a.evaluate({zoom:Math.floor(u.zoom)+1},m,v),u):a.value}_calculate(a,u,m,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:a,to:u}:{from:m,to:u}}interpolate(a){return a}}class zu{constructor(a){this.specification=a}possiblyEvaluate(a,u,m,v){if(a.value!==void 0){if(a.expression.kind==="constant"){const T=a.expression.evaluate(u,null,{},m,v);return this._calculate(T,T,T,u)}return this._calculate(a.expression.evaluate(new Ar(Math.floor(u.zoom-1),u)),a.expression.evaluate(new Ar(Math.floor(u.zoom),u)),a.expression.evaluate(new Ar(Math.floor(u.zoom+1),u)),u)}}_calculate(a,u,m,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:a,to:u}:{from:m,to:u}}interpolate(a){return a}}class zh{constructor(a){this.specification=a}possiblyEvaluate(a,u,m,v){return!!a.expression.evaluate(u,null,{},m,v)}interpolate(){return!1}}class S{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in a){const m=a[u];m.specification.overridable&&this.overridableProperties.push(u);const v=this.defaultPropertyValues[u]=new Aa(m,void 0),T=this.defaultTransitionablePropertyValues[u]=new qo(m);this.defaultTransitioningPropertyValues[u]=T.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=v.possiblyEvaluate({})}}}Lt("DataDrivenProperty",Qt),Lt("DataConstantProperty",Nt),Lt("CrossFadedDataDrivenProperty",Vl),Lt("CrossFadedProperty",zu),Lt("ColorRampProperty",zh);const i="-transition";class f extends br{constructor(a,u){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1},a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),u.layout&&(this._unevaluatedLayout=new Fl(u.layout)),u.paint)){this._transitionablePaint=new oi(u.paint);for(const m in a.paint)this.setPaintProperty(m,a.paint[m],{validate:!1});for(const m in a.layout)this.setLayoutProperty(m,a.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new $l(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,u,m={}){u!=null&&this._validate(ld,`layers.${this.id}.layout.${a}`,a,u,m)||(a!=="visibility"?this._unevaluatedLayout.setValue(a,u):this.visibility=u)}getPaintProperty(a){return a.endsWith(i)?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)}setPaintProperty(a,u,m={}){if(u!=null&&this._validate(Dc,`layers.${this.id}.paint.${a}`,a,u,m))return!1;if(a.endsWith(i))return this._transitionablePaint.setTransition(a.slice(0,-11),u||void 0),!1;{const v=this._transitionablePaint._values[a],T=v.property.specification["property-type"]==="cross-faded-data-driven",P=v.value.isDataDriven(),I=v.value;this._transitionablePaint.setValue(a,u),this._handleSpecialPaintPropertyUpdate(a);const O=this._transitionablePaint._values[a].value;return O.isDataDriven()||P||T||this._handleOverridablePaintPropertyUpdate(a,I,O)}}_handleSpecialPaintPropertyUpdate(a){}_handleOverridablePaintPropertyUpdate(a,u,m){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,u){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,u)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),Fe(a,((u,m)=>!(u===void 0||m==="layout"&&!Object.keys(u).length||m==="paint"&&!Object.keys(u).length)))}_validate(a,u,m,v,T={}){return(!T||T.validate!==!1)&&Rc(this,a.call(Vo,{key:u,layerType:this.type,objectKey:m,value:v,styleSpec:$e,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const u=this.paint.get(a);if(u instanceof sa&&Il(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const g={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class y{constructor(a,u){this._structArray=a,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class b{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,u){return a._trim(),u&&(a.isTransferred=!0,u.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const u=Object.create(this.prototype);return u.arrayBuffer=a.arrayBuffer,u.length=a.length,u.capacity=a.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function k(o,a=1){let u=0,m=0;return{members:o.map((v=>{const T=g[v.type].BYTES_PER_ELEMENT,P=u=D(u,Math.max(a,T)),I=v.components||1;return m=Math.max(m,T),u+=T*I,{name:v.name,type:v.type,components:I,offset:P}})),size:D(u,Math.max(m,a)),alignment:a}}function D(o,a){return Math.ceil(o/a)*a}class j extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u){const m=this.length;return this.resize(m+1),this.emplace(m,a,u)}emplace(a,u,m){const v=2*a;return this.int16[v+0]=u,this.int16[v+1]=m,a}}j.prototype.bytesPerElement=4,Lt("StructArrayLayout2i4",j);class $ extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,a,u,m)}emplace(a,u,m,v){const T=3*a;return this.int16[T+0]=u,this.int16[T+1]=m,this.int16[T+2]=v,a}}$.prototype.bytesPerElement=6,Lt("StructArrayLayout3i6",$);class G extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,m,v){const T=this.length;return this.resize(T+1),this.emplace(T,a,u,m,v)}emplace(a,u,m,v,T){const P=4*a;return this.int16[P+0]=u,this.int16[P+1]=m,this.int16[P+2]=v,this.int16[P+3]=T,a}}G.prototype.bytesPerElement=8,Lt("StructArrayLayout4i8",G);class H extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,m,v,T,P){const I=this.length;return this.resize(I+1),this.emplace(I,a,u,m,v,T,P)}emplace(a,u,m,v,T,P,I){const O=6*a;return this.int16[O+0]=u,this.int16[O+1]=m,this.int16[O+2]=v,this.int16[O+3]=T,this.int16[O+4]=P,this.int16[O+5]=I,a}}H.prototype.bytesPerElement=12,Lt("StructArrayLayout2i4i12",H);class ae extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,m,v,T,P){const I=this.length;return this.resize(I+1),this.emplace(I,a,u,m,v,T,P)}emplace(a,u,m,v,T,P,I){const O=4*a,z=8*a;return this.int16[O+0]=u,this.int16[O+1]=m,this.uint8[z+4]=v,this.uint8[z+5]=T,this.uint8[z+6]=P,this.uint8[z+7]=I,a}}ae.prototype.bytesPerElement=8,Lt("StructArrayLayout2i4ub8",ae);class ue extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u){const m=this.length;return this.resize(m+1),this.emplace(m,a,u)}emplace(a,u,m){const v=2*a;return this.float32[v+0]=u,this.float32[v+1]=m,a}}ue.prototype.bytesPerElement=8,Lt("StructArrayLayout2f8",ue);class fe extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,m,v,T,P,I,O,z,V){const W=this.length;return this.resize(W+1),this.emplace(W,a,u,m,v,T,P,I,O,z,V)}emplace(a,u,m,v,T,P,I,O,z,V,W){const Y=10*a;return this.uint16[Y+0]=u,this.uint16[Y+1]=m,this.uint16[Y+2]=v,this.uint16[Y+3]=T,this.uint16[Y+4]=P,this.uint16[Y+5]=I,this.uint16[Y+6]=O,this.uint16[Y+7]=z,this.uint16[Y+8]=V,this.uint16[Y+9]=W,a}}fe.prototype.bytesPerElement=20,Lt("StructArrayLayout10ui20",fe);class pe extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,m,v,T,P,I,O,z,V,W,Y){const re=this.length;return this.resize(re+1),this.emplace(re,a,u,m,v,T,P,I,O,z,V,W,Y)}emplace(a,u,m,v,T,P,I,O,z,V,W,Y,re){const se=12*a;return this.int16[se+0]=u,this.int16[se+1]=m,this.int16[se+2]=v,this.int16[se+3]=T,this.uint16[se+4]=P,this.uint16[se+5]=I,this.uint16[se+6]=O,this.uint16[se+7]=z,this.int16[se+8]=V,this.int16[se+9]=W,this.int16[se+10]=Y,this.int16[se+11]=re,a}}pe.prototype.bytesPerElement=24,Lt("StructArrayLayout4i4ui4i24",pe);class ve extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,a,u,m)}emplace(a,u,m,v){const T=3*a;return this.float32[T+0]=u,this.float32[T+1]=m,this.float32[T+2]=v,a}}ve.prototype.bytesPerElement=12,Lt("StructArrayLayout3f12",ve);class we extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.uint32[1*a+0]=u,a}}we.prototype.bytesPerElement=4,Lt("StructArrayLayout1ul4",we);class Me extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,m,v,T,P,I,O,z){const V=this.length;return this.resize(V+1),this.emplace(V,a,u,m,v,T,P,I,O,z)}emplace(a,u,m,v,T,P,I,O,z,V){const W=10*a,Y=5*a;return this.int16[W+0]=u,this.int16[W+1]=m,this.int16[W+2]=v,this.int16[W+3]=T,this.int16[W+4]=P,this.int16[W+5]=I,this.uint32[Y+3]=O,this.uint16[W+8]=z,this.uint16[W+9]=V,a}}Me.prototype.bytesPerElement=20,Lt("StructArrayLayout6i1ul2ui20",Me);class me extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,m,v,T,P){const I=this.length;return this.resize(I+1),this.emplace(I,a,u,m,v,T,P)}emplace(a,u,m,v,T,P,I){const O=6*a;return this.int16[O+0]=u,this.int16[O+1]=m,this.int16[O+2]=v,this.int16[O+3]=T,this.int16[O+4]=P,this.int16[O+5]=I,a}}me.prototype.bytesPerElement=12,Lt("StructArrayLayout2i2i2i12",me);class De extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,m,v,T){const P=this.length;return this.resize(P+1),this.emplace(P,a,u,m,v,T)}emplace(a,u,m,v,T,P){const I=4*a,O=8*a;return this.float32[I+0]=u,this.float32[I+1]=m,this.float32[I+2]=v,this.int16[O+6]=T,this.int16[O+7]=P,a}}De.prototype.bytesPerElement=16,Lt("StructArrayLayout2f1f2i16",De);class ze extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,u,m,v,T,P){const I=this.length;return this.resize(I+1),this.emplace(I,a,u,m,v,T,P)}emplace(a,u,m,v,T,P,I){const O=16*a,z=4*a,V=8*a;return this.uint8[O+0]=u,this.uint8[O+1]=m,this.float32[z+1]=v,this.float32[z+2]=T,this.int16[V+6]=P,this.int16[V+7]=I,a}}ze.prototype.bytesPerElement=16,Lt("StructArrayLayout2ub2f2i16",ze);class We extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,a,u,m)}emplace(a,u,m,v){const T=3*a;return this.uint16[T+0]=u,this.uint16[T+1]=m,this.uint16[T+2]=v,a}}We.prototype.bytesPerElement=6,Lt("StructArrayLayout3ui6",We);class lt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,m,v,T,P,I,O,z,V,W,Y,re,se,he,_e,Ae){const qe=this.length;return this.resize(qe+1),this.emplace(qe,a,u,m,v,T,P,I,O,z,V,W,Y,re,se,he,_e,Ae)}emplace(a,u,m,v,T,P,I,O,z,V,W,Y,re,se,he,_e,Ae,qe){const ke=24*a,Ne=12*a,tt=48*a;return this.int16[ke+0]=u,this.int16[ke+1]=m,this.uint16[ke+2]=v,this.uint16[ke+3]=T,this.uint32[Ne+2]=P,this.uint32[Ne+3]=I,this.uint32[Ne+4]=O,this.uint16[ke+10]=z,this.uint16[ke+11]=V,this.uint16[ke+12]=W,this.float32[Ne+7]=Y,this.float32[Ne+8]=re,this.uint8[tt+36]=se,this.uint8[tt+37]=he,this.uint8[tt+38]=_e,this.uint32[Ne+10]=Ae,this.int16[ke+22]=qe,a}}lt.prototype.bytesPerElement=48,Lt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",lt);class gt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,m,v,T,P,I,O,z,V,W,Y,re,se,he,_e,Ae,qe,ke,Ne,tt,ft,zt,rr,Rt,kt,Ht,Ut){const $t=this.length;return this.resize($t+1),this.emplace($t,a,u,m,v,T,P,I,O,z,V,W,Y,re,se,he,_e,Ae,qe,ke,Ne,tt,ft,zt,rr,Rt,kt,Ht,Ut)}emplace(a,u,m,v,T,P,I,O,z,V,W,Y,re,se,he,_e,Ae,qe,ke,Ne,tt,ft,zt,rr,Rt,kt,Ht,Ut,$t){const st=32*a,Kt=16*a;return this.int16[st+0]=u,this.int16[st+1]=m,this.int16[st+2]=v,this.int16[st+3]=T,this.int16[st+4]=P,this.int16[st+5]=I,this.int16[st+6]=O,this.int16[st+7]=z,this.uint16[st+8]=V,this.uint16[st+9]=W,this.uint16[st+10]=Y,this.uint16[st+11]=re,this.uint16[st+12]=se,this.uint16[st+13]=he,this.uint16[st+14]=_e,this.uint16[st+15]=Ae,this.uint16[st+16]=qe,this.uint16[st+17]=ke,this.uint16[st+18]=Ne,this.uint16[st+19]=tt,this.uint16[st+20]=ft,this.uint16[st+21]=zt,this.uint16[st+22]=rr,this.uint32[Kt+12]=Rt,this.float32[Kt+13]=kt,this.float32[Kt+14]=Ht,this.uint16[st+30]=Ut,this.uint16[st+31]=$t,a}}gt.prototype.bytesPerElement=64,Lt("StructArrayLayout8i15ui1ul2f2ui64",gt);class Tt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.float32[1*a+0]=u,a}}Tt.prototype.bytesPerElement=4,Lt("StructArrayLayout1f4",Tt);class Ot extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,a,u,m)}emplace(a,u,m,v){const T=3*a;return this.uint16[6*a+0]=u,this.float32[T+1]=m,this.float32[T+2]=v,a}}Ot.prototype.bytesPerElement=12,Lt("StructArrayLayout1ui2f12",Ot);class Pt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u,m){const v=this.length;return this.resize(v+1),this.emplace(v,a,u,m)}emplace(a,u,m,v){const T=4*a;return this.uint32[2*a+0]=u,this.uint16[T+2]=m,this.uint16[T+3]=v,a}}Pt.prototype.bytesPerElement=8,Lt("StructArrayLayout1ul2ui8",Pt);class xt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,u){const m=this.length;return this.resize(m+1),this.emplace(m,a,u)}emplace(a,u,m){const v=2*a;return this.uint16[v+0]=u,this.uint16[v+1]=m,a}}xt.prototype.bytesPerElement=4,Lt("StructArrayLayout2ui4",xt);class Vt extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const u=this.length;return this.resize(u+1),this.emplace(u,a)}emplace(a,u){return this.uint16[1*a+0]=u,a}}Vt.prototype.bytesPerElement=2,Lt("StructArrayLayout1ui2",Vt);class or extends b{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,u,m,v){const T=this.length;return this.resize(T+1),this.emplace(T,a,u,m,v)}emplace(a,u,m,v,T){const P=4*a;return this.float32[P+0]=u,this.float32[P+1]=m,this.float32[P+2]=v,this.float32[P+3]=T,a}}or.prototype.bytesPerElement=16,Lt("StructArrayLayout4f16",or);class Et extends y{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new A(this.anchorPointX,this.anchorPointY)}}Et.prototype.size=20;class Mt extends Me{get(a){return new Et(this,a)}}Lt("CollisionBoxArray",Mt);class ir extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(a){this._structArray.uint8[this._pos1+37]=a}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(a){this._structArray.uint8[this._pos1+38]=a}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(a){this._structArray.uint32[this._pos4+10]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ir.prototype.size=48;class Gr extends lt{get(a){return new ir(this,a)}}Lt("PlacedSymbolArray",Gr);class dr extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(a){this._structArray.uint32[this._pos4+12]=a}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}dr.prototype.size=64;class _r extends gt{get(a){return new dr(this,a)}}Lt("SymbolInstanceArray",_r);class Xr extends Tt{getoffsetX(a){return this.float32[1*a+0]}}Lt("GlyphOffsetArray",Xr);class Qn extends ${getx(a){return this.int16[3*a+0]}gety(a){return this.int16[3*a+1]}gettileUnitDistanceFromAnchor(a){return this.int16[3*a+2]}}Lt("SymbolLineVertexArray",Qn);class la extends y{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}la.prototype.size=12;class Yr extends Ot{get(a){return new la(this,a)}}Lt("TextAnchorOffsetArray",Yr);class Un extends y{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Un.prototype.size=8;class sn extends Pt{get(a){return new Un(this,a)}}Lt("FeatureIndexArray",sn);class An extends j{}class si extends j{}class Qa extends j{}class qi extends H{}class eo extends ae{}class ws extends ue{}class ua extends fe{}class Ea extends pe{}class _o extends ve{}class Ci extends we{}class ca extends me{}class to extends ze{}class Ca extends We{}class On extends xt{}const fn=k([{name:"a_pos",components:2,type:"Int16"}],4),{members:li}=fn;class Sr{constructor(a=[]){this.segments=a}prepareSegment(a,u,m,v){let T=this.segments[this.segments.length-1];return a>Sr.MAX_VERTEX_ARRAY_LENGTH&&Ve(`Max vertices per segment is ${Sr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!T||T.vertexLength+a>Sr.MAX_VERTEX_ARRAY_LENGTH||T.sortKey!==v)&&(T={vertexOffset:u.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},v!==void 0&&(T.sortKey=v),this.segments.push(T)),T}get(){return this.segments}destroy(){for(const a of this.segments)for(const u in a.vaos)a.vaos[u].destroy()}static simpleSegment(a,u,m,v){return new Sr([{vertexOffset:a,primitiveOffset:u,vertexLength:m,primitiveLength:v,vaos:{},sortKey:0}])}}function ha(o,a){return 256*(o=Z(Math.floor(o),0,255))+Z(Math.floor(a),0,255)}Sr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Lt("SegmentVector",Sr);const Ss=k([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ro={exports:{}},Lh={exports:{}};Lh.exports=function(o,a){var u,m,v,T,P,I,O,z;for(m=o.length-(u=3&o.length),v=a,P=3432918353,I=461845907,z=0;z<m;)O=255&o.charCodeAt(z)|(255&o.charCodeAt(++z))<<8|(255&o.charCodeAt(++z))<<16|(255&o.charCodeAt(++z))<<24,++z,v=27492+(65535&(T=5*(65535&(v=(v^=O=(65535&(O=(O=(65535&O)*P+(((O>>>16)*P&65535)<<16)&4294967295)<<15|O>>>17))*I+(((O>>>16)*I&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(T>>>16)&65535)<<16);switch(O=0,u){case 3:O^=(255&o.charCodeAt(z+2))<<16;case 2:O^=(255&o.charCodeAt(z+1))<<8;case 1:v^=O=(65535&(O=(O=(65535&(O^=255&o.charCodeAt(z)))*P+(((O>>>16)*P&65535)<<16)&4294967295)<<15|O>>>17))*I+(((O>>>16)*I&65535)<<16)&4294967295}return v^=o.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0};var Nh=Lh.exports,gn={exports:{}};gn.exports=function(o,a){for(var u,m=o.length,v=a^m,T=0;m>=4;)u=1540483477*(65535&(u=255&o.charCodeAt(T)|(255&o.charCodeAt(++T))<<8|(255&o.charCodeAt(++T))<<16|(255&o.charCodeAt(++T))<<24))+((1540483477*(u>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),m-=4,++T;switch(m){case 3:v^=(255&o.charCodeAt(T+2))<<16;case 2:v^=(255&o.charCodeAt(T+1))<<8;case 1:v=1540483477*(65535&(v^=255&o.charCodeAt(T)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0};var no=Nh,zc=gn.exports;ro.exports=no,ro.exports.murmur3=no,ro.exports.murmur2=zc;var Ul=_(ro.exports);class Ts{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,u,m,v){this.ids.push(ql(a)),this.positions.push(u,m,v)}getPositions(a){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=ql(a);let m=0,v=this.ids.length-1;for(;m<v;){const P=m+v>>1;this.ids[P]>=u?v=P:m=P+1}const T=[];for(;this.ids[m]===u;)T.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return T}static serialize(a,u){const m=new Float64Array(a.ids),v=new Uint32Array(a.positions);return xo(m,v,0,m.length-1),u&&u.push(m.buffer,v.buffer),{ids:m,positions:v}}static deserialize(a){const u=new Ts;return u.ids=a.ids,u.positions=a.positions,u.indexed=!0,u}}function ql(o){const a=+o;return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER?a:Ul(String(o))}function xo(o,a,u,m){for(;u<m;){const v=o[u+m>>1];let T=u-1,P=m+1;for(;;){do T++;while(o[T]<v);do P--;while(o[P]>v);if(T>=P)break;Jr(o,T,P),Jr(a,3*T,3*P),Jr(a,3*T+1,3*P+1),Jr(a,3*T+2,3*P+2)}P-u<m-P?(xo(o,a,u,P),u=P+1):(xo(o,a,P+1,m),m=P)}}function Jr(o,a,u){const m=o[a];o[a]=o[u],o[u]=m}Lt("FeaturePositionMap",Ts);class bn{constructor(a,u){this.gl=a.gl,this.location=u}}class qn extends bn{constructor(a,u){super(a,u),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class Bh extends bn{constructor(a,u){super(a,u),this.current=[0,0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))}}class Lc extends bn{constructor(a,u){super(a,u),this.current=cr.transparent}set(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))}}const Fh=new Float32Array(16);function Qp(o){return[ha(255*o.r,255*o.g),ha(255*o.b,255*o.a)]}class ei{constructor(a,u,m){this.value=a,this.uniformNames=u.map((v=>`u_${v}`)),this.type=m}setUniform(a,u,m){a.set(m.constantOr(this.value))}getBinding(a,u,m){return this.type==="color"?new Lc(a,u):new qn(a,u)}}class Wl{constructor(a,u){this.uniformNames=u.map((m=>`u_${m}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(a,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=a.tlbr}setUniform(a,u,m,v){const T=v==="u_pattern_to"?this.patternTo:v==="u_pattern_from"?this.patternFrom:v==="u_pixel_ratio_to"?this.pixelRatioTo:v==="u_pixel_ratio_from"?this.pixelRatioFrom:null;T&&a.set(T)}getBinding(a,u,m){return m.substr(0,9)==="u_pattern"?new Bh(a,u):new qn(a,u)}}class Wo{constructor(a,u,m,v){this.expression=a,this.type=m,this.maxValue=0,this.paintVertexAttributes=u.map((T=>({name:`a_${T}`,type:"Float32",components:m==="color"?2:1,offset:0}))),this.paintVertexArray=new v}populatePaintArray(a,u,m,v,T){const P=this.paintVertexArray.length,I=this.expression.evaluate(new Ar(0),u,{},v,[],T);this.paintVertexArray.resize(a),this._setPaintValue(P,a,I)}updatePaintArray(a,u,m,v){const T=this.expression.evaluate({zoom:0},m,v);this._setPaintValue(a,u,T)}_setPaintValue(a,u,m){if(this.type==="color"){const v=Qp(m);for(let T=a;T<u;T++)this.paintVertexArray.emplace(T,v[0],v[1])}else{for(let v=a;v<u;v++)this.paintVertexArray.emplace(v,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class io{constructor(a,u,m,v,T,P){this.expression=a,this.uniformNames=u.map((I=>`u_${I}_t`)),this.type=m,this.useIntegerZoom=v,this.zoom=T,this.maxValue=0,this.paintVertexAttributes=u.map((I=>({name:`a_${I}`,type:"Float32",components:m==="color"?4:2,offset:0}))),this.paintVertexArray=new P}populatePaintArray(a,u,m,v,T){const P=this.expression.evaluate(new Ar(this.zoom),u,{},v,[],T),I=this.expression.evaluate(new Ar(this.zoom+1),u,{},v,[],T),O=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(O,a,P,I)}updatePaintArray(a,u,m,v){const T=this.expression.evaluate({zoom:this.zoom},m,v),P=this.expression.evaluate({zoom:this.zoom+1},m,v);this._setPaintValue(a,u,T,P)}_setPaintValue(a,u,m,v){if(this.type==="color"){const T=Qp(m),P=Qp(v);for(let I=a;I<u;I++)this.paintVertexArray.emplace(I,T[0],T[1],P[0],P[1])}else{for(let T=a;T<u;T++)this.paintVertexArray.emplace(T,m,v);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(v))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,u){const m=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,v=Z(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);a.set(v)}getBinding(a,u,m){return new qn(a,u)}}class Mi{constructor(a,u,m,v,T,P){this.expression=a,this.type=u,this.useIntegerZoom=m,this.zoom=v,this.layerId=P,this.zoomInPaintVertexArray=new T,this.zoomOutPaintVertexArray=new T}populatePaintArray(a,u,m){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(v,a,u.patterns&&u.patterns[this.layerId],m)}updatePaintArray(a,u,m,v,T){this._setPaintValues(a,u,m.patterns&&m.patterns[this.layerId],T)}_setPaintValues(a,u,m,v){if(!v||!m)return;const{min:T,mid:P,max:I}=m,O=v[T],z=v[P],V=v[I];if(O&&z&&V)for(let W=a;W<u;W++)this.zoomInPaintVertexArray.emplace(W,z.tl[0],z.tl[1],z.br[0],z.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1],z.pixelRatio,O.pixelRatio),this.zoomOutPaintVertexArray.emplace(W,z.tl[0],z.tl[1],z.br[0],z.br[1],V.tl[0],V.tl[1],V.br[0],V.br[1],z.pixelRatio,V.pixelRatio)}upload(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,Ss.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,Ss.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ao{constructor(a,u,m){this.binders={},this._buffers=[];const v=[];for(const T in a.paint._values){if(!m(T))continue;const P=a.paint.get(T);if(!(P instanceof sa&&Il(P.property.specification)))continue;const I=em(T,a.type),O=P.value,z=P.property.specification.type,V=P.property.useIntegerZoom,W=P.property.specification["property-type"],Y=W==="cross-faded"||W==="cross-faded-data-driven";if(O.kind==="constant")this.binders[T]=Y?new Wl(O.value,I):new ei(O.value,I,z),v.push(`/u_${T}`);else if(O.kind==="source"||Y){const re=ud(T,z,"source");this.binders[T]=Y?new Mi(O,z,V,u,re,a.id):new Wo(O,I,z,re),v.push(`/a_${T}`)}else{const re=ud(T,z,"composite");this.binders[T]=new io(O,I,z,V,u,re),v.push(`/z_${T}`)}}this.cacheKey=v.sort().join("")}getMaxValue(a){const u=this.binders[a];return u instanceof Wo||u instanceof io?u.maxValue:0}populatePaintArrays(a,u,m,v,T){for(const P in this.binders){const I=this.binders[P];(I instanceof Wo||I instanceof io||I instanceof Mi)&&I.populatePaintArray(a,u,m,v,T)}}setConstantPatternPositions(a,u){for(const m in this.binders){const v=this.binders[m];v instanceof Wl&&v.setConstantPatternPositions(a,u)}}updatePaintArrays(a,u,m,v,T){let P=!1;for(const I in a){const O=u.getPositions(I);for(const z of O){const V=m.feature(z.index);for(const W in this.binders){const Y=this.binders[W];if((Y instanceof Wo||Y instanceof io||Y instanceof Mi)&&Y.expression.isStateDependent===!0){const re=v.paint.get(W);Y.expression=re.value,Y.updatePaintArray(z.start,z.end,V,a[I],T),P=!0}}}}return P}defines(){const a=[];for(const u in this.binders){const m=this.binders[u];(m instanceof ei||m instanceof Wl)&&a.push(...m.uniformNames.map((v=>`#define HAS_UNIFORM_${v}`)))}return a}getBinderAttributes(){const a=[];for(const u in this.binders){const m=this.binders[u];if(m instanceof Wo||m instanceof io)for(let v=0;v<m.paintVertexAttributes.length;v++)a.push(m.paintVertexAttributes[v].name);else if(m instanceof Mi)for(let v=0;v<Ss.members.length;v++)a.push(Ss.members[v].name)}return a}getBinderUniforms(){const a=[];for(const u in this.binders){const m=this.binders[u];if(m instanceof ei||m instanceof Wl||m instanceof io)for(const v of m.uniformNames)a.push(v)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a,u){const m=[];for(const v in this.binders){const T=this.binders[v];if(T instanceof ei||T instanceof Wl||T instanceof io){for(const P of T.uniformNames)if(u[P]){const I=T.getBinding(a,u[P],P);m.push({name:P,property:v,binding:I})}}}return m}setUniforms(a,u,m,v){for(const{name:T,property:P,binding:I}of u)this.binders[P].setUniform(I,v,m.get(P),T)}updatePaintBuffers(a){this._buffers=[];for(const u in this.binders){const m=this.binders[u];if(a&&m instanceof Mi){const v=a.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(m instanceof Wo||m instanceof io)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(a){for(const u in this.binders){const m=this.binders[u];(m instanceof Wo||m instanceof io||m instanceof Mi)&&m.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const u=this.binders[a];(u instanceof Wo||u instanceof io||u instanceof Mi)&&u.destroy()}}}class Go{constructor(a,u,m=(()=>!0)){this.programConfigurations={};for(const v of a)this.programConfigurations[v.id]=new ao(v,u,m);this.needsUpload=!1,this._featureMap=new Ts,this._bufferOffset=0}populatePaintArrays(a,u,m,v,T,P){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(a,u,v,T,P);u.id!==void 0&&this._featureMap.add(u.id,m,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,u,m,v){for(const T of m)this.needsUpload=this.programConfigurations[T.id].updatePaintArrays(a,this._featureMap,u,T,v)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}function em(o,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${a}-`,"").replace(/-/g,"_")]}function ud(o,a,u){const m={color:{source:ue,composite:or},number:{source:Tt,composite:ue}},v=(function(T){return{"line-pattern":{source:ua,composite:ua},"fill-pattern":{source:ua,composite:ua},"fill-extrusion-pattern":{source:ua,composite:ua}}[T]})(o);return v&&v[u]||m[a][u]}Lt("ConstantBinder",ei),Lt("CrossFadedConstantBinder",Wl),Lt("SourceExpressionBinder",Wo),Lt("CrossFadedCompositeBinder",Mi),Lt("CompositeExpressionBinder",io),Lt("ProgramConfiguration",ao,{omit:["_buffers"]}),Lt("ProgramConfigurationSet",Go);const Dn=8192,cd=Math.pow(2,14)-1,tm=-cd-1;function Gl(o){const a=Dn/o.extent,u=o.loadGeometry();for(let m=0;m<u.length;m++){const v=u[m];for(let T=0;T<v.length;T++){const P=v[T],I=Math.round(P.x*a),O=Math.round(P.y*a);P.x=Z(I,tm,cd),P.y=Z(O,tm,cd),(I<P.x||I>P.x+1||O<P.y||O>P.y+1)&&Ve("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function Hl(o,a){return{type:o.type,id:o.id,properties:o.properties,geometry:a?Gl(o):[]}}function $h(o,a,u,m,v){o.emplaceBack(2*a+(m+1)/2,2*u+(v+1)/2)}class hd{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((u=>u.id)),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new si,this.indexArray=new Ca,this.segments=new Sr,this.programConfigurations=new Go(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id))}populate(a,u,m){const v=this.layers[0],T=[];let P=null,I=!1;v.type==="circle"&&(P=v.layout.get("circle-sort-key"),I=!P.isConstant());for(const{feature:O,id:z,index:V,sourceLayerIndex:W}of a){const Y=this.layers[0]._featureFilter.needGeometry,re=Hl(O,Y);if(!this.layers[0]._featureFilter.filter(new Ar(this.zoom),re,m))continue;const se=I?P.evaluate(re,{},m):void 0,he={id:z,properties:O.properties,type:O.type,sourceLayerIndex:W,index:V,geometry:Y?re.geometry:Gl(O),patterns:{},sortKey:se};T.push(he)}I&&T.sort(((O,z)=>O.sortKey-z.sortKey));for(const O of T){const{geometry:z,index:V,sourceLayerIndex:W}=O,Y=a[V].feature;this.addFeature(O,z,V,m),u.featureIndex.insert(Y,z,V,W,this.index)}}update(a,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,li),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,u,m,v){for(const T of u)for(const P of T){const I=P.x,O=P.y;if(I<0||I>=Dn||O<0||O>=Dn)continue;const z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),V=z.vertexLength;$h(this.layoutVertexArray,I,O,-1,-1),$h(this.layoutVertexArray,I,O,1,-1),$h(this.layoutVertexArray,I,O,1,1),$h(this.layoutVertexArray,I,O,-1,1),this.indexArray.emplaceBack(V,V+1,V+2),this.indexArray.emplaceBack(V,V+3,V+2),z.vertexLength+=4,z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,{},v)}}function rm(o,a){for(let u=0;u<o.length;u++)if(Lu(a,o[u]))return!0;for(let u=0;u<a.length;u++)if(Lu(o,a[u]))return!0;return!!Nc(o,a)}function Vh(o,a,u){return!!Lu(o,a)||!!Uh(a,o,u)}function nm(o,a){if(o.length===1)return am(a,o[0]);for(let u=0;u<a.length;u++){const m=a[u];for(let v=0;v<m.length;v++)if(Lu(o,m[v]))return!0}for(let u=0;u<o.length;u++)if(am(a,o[u]))return!0;for(let u=0;u<a.length;u++)if(Nc(o,a[u]))return!0;return!1}function fd(o,a,u){if(o.length>1){if(Nc(o,a))return!0;for(let m=0;m<a.length;m++)if(Uh(a[m],o,u))return!0}for(let m=0;m<o.length;m++)if(Uh(o[m],a,u))return!0;return!1}function Nc(o,a){if(o.length===0||a.length===0)return!1;for(let u=0;u<o.length-1;u++){const m=o[u],v=o[u+1];for(let T=0;T<a.length-1;T++)if(ay(m,v,a[T],a[T+1]))return!0}return!1}function ay(o,a,u,m){return Ze(o,u,m)!==Ze(a,u,m)&&Ze(o,a,u)!==Ze(o,a,m)}function Uh(o,a,u){const m=u*u;if(a.length===1)return o.distSqr(a[0])<m;for(let v=1;v<a.length;v++)if(im(o,a[v-1],a[v])<m)return!0;return!1}function im(o,a,u){const m=a.distSqr(u);if(m===0)return o.distSqr(a);const v=((o.x-a.x)*(u.x-a.x)+(o.y-a.y)*(u.y-a.y))/m;return o.distSqr(v<0?a:v>1?u:u.sub(a)._mult(v)._add(a))}function am(o,a){let u,m,v,T=!1;for(let P=0;P<o.length;P++){u=o[P];for(let I=0,O=u.length-1;I<u.length;O=I++)m=u[I],v=u[O],m.y>a.y!=v.y>a.y&&a.x<(v.x-m.x)*(a.y-m.y)/(v.y-m.y)+m.x&&(T=!T)}return T}function Lu(o,a){let u=!1;for(let m=0,v=o.length-1;m<o.length;v=m++){const T=o[m],P=o[v];T.y>a.y!=P.y>a.y&&a.x<(P.x-T.x)*(a.y-T.y)/(P.y-T.y)+T.x&&(u=!u)}return u}function oy(o,a,u){const m=u[0],v=u[2];if(o.x<m.x&&a.x<m.x||o.x>v.x&&a.x>v.x||o.y<m.y&&a.y<m.y||o.y>v.y&&a.y>v.y)return!1;const T=Ze(o,a,u[0]);return T!==Ze(o,a,u[1])||T!==Ze(o,a,u[2])||T!==Ze(o,a,u[3])}function Nu(o,a,u){const m=a.paint.get(o).value;return m.kind==="constant"?m.value:u.programConfigurations.get(a.id).getMaxValue(o)}function qh(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Wh(o,a,u,m,v){if(!a[0]&&!a[1])return o;const T=A.convert(a)._mult(v);u==="viewport"&&T._rotate(-m);const P=[];for(let I=0;I<o.length;I++)P.push(o[I].sub(T));return P}let om,sy;Lt("CircleBucket",hd,{omit:["layers"]});var ly={get paint(){return sy=sy||new S({"circle-radius":new Qt($e.paint_circle["circle-radius"]),"circle-color":new Qt($e.paint_circle["circle-color"]),"circle-blur":new Qt($e.paint_circle["circle-blur"]),"circle-opacity":new Qt($e.paint_circle["circle-opacity"]),"circle-translate":new Nt($e.paint_circle["circle-translate"]),"circle-translate-anchor":new Nt($e.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Nt($e.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Nt($e.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Qt($e.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Qt($e.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Qt($e.paint_circle["circle-stroke-opacity"])})},get layout(){return om=om||new S({"circle-sort-key":new Qt($e.layout_circle["circle-sort-key"])})}},Wi=1e-6,Bc=typeof Float32Array<"u"?Float32Array:Array;function dd(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function sm(o,a,u){var m=a[0],v=a[1],T=a[2],P=a[3],I=a[4],O=a[5],z=a[6],V=a[7],W=a[8],Y=a[9],re=a[10],se=a[11],he=a[12],_e=a[13],Ae=a[14],qe=a[15],ke=u[0],Ne=u[1],tt=u[2],ft=u[3];return o[0]=ke*m+Ne*I+tt*W+ft*he,o[1]=ke*v+Ne*O+tt*Y+ft*_e,o[2]=ke*T+Ne*z+tt*re+ft*Ae,o[3]=ke*P+Ne*V+tt*se+ft*qe,o[4]=(ke=u[4])*m+(Ne=u[5])*I+(tt=u[6])*W+(ft=u[7])*he,o[5]=ke*v+Ne*O+tt*Y+ft*_e,o[6]=ke*T+Ne*z+tt*re+ft*Ae,o[7]=ke*P+Ne*V+tt*se+ft*qe,o[8]=(ke=u[8])*m+(Ne=u[9])*I+(tt=u[10])*W+(ft=u[11])*he,o[9]=ke*v+Ne*O+tt*Y+ft*_e,o[10]=ke*T+Ne*z+tt*re+ft*Ae,o[11]=ke*P+Ne*V+tt*se+ft*qe,o[12]=(ke=u[12])*m+(Ne=u[13])*I+(tt=u[14])*W+(ft=u[15])*he,o[13]=ke*v+Ne*O+tt*Y+ft*_e,o[14]=ke*T+Ne*z+tt*re+ft*Ae,o[15]=ke*P+Ne*V+tt*se+ft*qe,o}Math.hypot||(Math.hypot=function(){for(var o=0,a=arguments.length;a--;)o+=arguments[a]*arguments[a];return Math.sqrt(o)});var Fc,pd=sm;function md(o,a,u){var m=a[0],v=a[1],T=a[2],P=a[3];return o[0]=u[0]*m+u[4]*v+u[8]*T+u[12]*P,o[1]=u[1]*m+u[5]*v+u[9]*T+u[13]*P,o[2]=u[2]*m+u[6]*v+u[10]*T+u[14]*P,o[3]=u[3]*m+u[7]*v+u[11]*T+u[15]*P,o}Fc=new Bc(4),Bc!=Float32Array&&(Fc[0]=0,Fc[1]=0,Fc[2]=0,Fc[3]=0);class b_ extends f{constructor(a){super(a,ly)}createBucket(a){return new hd(a)}queryRadius(a){const u=a;return Nu("circle-radius",this,u)+Nu("circle-stroke-width",this,u)+qh(this.paint.get("circle-translate"))}queryIntersectsFeature(a,u,m,v,T,P,I,O){const z=Wh(a,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),P.angle,I),V=this.paint.get("circle-radius").evaluate(u,m)+this.paint.get("circle-stroke-width").evaluate(u,m),W=this.paint.get("circle-pitch-alignment")==="map",Y=W?z:(function(se,he){return se.map((_e=>uy(_e,he)))})(z,O),re=W?V*I:V;for(const se of v)for(const he of se){const _e=W?he:uy(he,O);let Ae=re;const qe=md([],[he.x,he.y,0,1],O);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ae*=qe[3]/P.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ae*=P.cameraToCenterDistance/qe[3]),Vh(Y,_e,Ae))return!0}return!1}}function uy(o,a){const u=md([],[o.x,o.y,0,1],a);return new A(u[0]/u[3],u[1]/u[3])}class bo extends hd{}let gd;Lt("HeatmapBucket",bo,{omit:["layers"]});var yd={get paint(){return gd=gd||new S({"heatmap-radius":new Qt($e.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Qt($e.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Nt($e.paint_heatmap["heatmap-intensity"]),"heatmap-color":new zh($e.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Nt($e.paint_heatmap["heatmap-opacity"])})}};function vd(o,{width:a,height:u},m,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==a*u*m)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${a*u*m}`)}else v=new Uint8Array(a*u*m);return o.width=a,o.height=u,o.data=v,o}function lm(o,{width:a,height:u},m){if(a===o.width&&u===o.height)return;const v=vd({},{width:a,height:u},m);_d(o,v,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,a),height:Math.min(o.height,u)},m),o.width=a,o.height=u,o.data=v.data}function _d(o,a,u,m,v,T){if(v.width===0||v.height===0)return a;if(v.width>o.width||v.height>o.height||u.x>o.width-v.width||u.y>o.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>a.width||v.height>a.height||m.x>a.width-v.width||m.y>a.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const P=o.data,I=a.data;if(P===I)throw new Error("srcData equals dstData, so image is already copied");for(let O=0;O<v.height;O++){const z=((u.y+O)*o.width+u.x)*T,V=((m.y+O)*a.width+m.x)*T;for(let W=0;W<v.width*T;W++)I[V+W]=P[z+W]}return a}class Bu{constructor(a,u){vd(this,a,1,u)}resize(a){lm(this,a,1)}clone(){return new Bu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,u,m,v,T){_d(a,u,m,v,T,1)}}class yi{constructor(a,u){vd(this,a,4,u)}resize(a){lm(this,a,4)}replace(a,u){u?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new yi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,u,m,v,T){_d(a,u,m,v,T,4)}}function xd(o){const a={},u=o.resolution||256,m=o.clips?o.clips.length:1,v=o.image||new yi({width:u,height:m});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const T=(P,I,O)=>{a[o.evaluationKey]=O;const z=o.expression.evaluate(a);v.data[P+I+0]=Math.floor(255*z.r/z.a),v.data[P+I+1]=Math.floor(255*z.g/z.a),v.data[P+I+2]=Math.floor(255*z.b/z.a),v.data[P+I+3]=Math.floor(255*z.a)};if(o.clips)for(let P=0,I=0;P<m;++P,I+=4*u)for(let O=0,z=0;O<u;O++,z+=4){const V=O/(u-1),{start:W,end:Y}=o.clips[P];T(I,z,W*(1-V)+Y*V)}else for(let P=0,I=0;P<u;P++,I+=4)T(0,I,P/(u-1));return v}Lt("AlphaImage",Bu),Lt("RGBAImage",yi);const Gh="big-fb";class w_ extends f{createBucket(a){return new bo(a)}constructor(a){super(a,yd),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=xd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Gh)&&this.heatmapFbos.delete(Gh)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let um;var cy={get paint(){return um=um||new S({"hillshade-illumination-direction":new Nt($e.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Nt($e.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Nt($e.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Nt($e.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Nt($e.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Nt($e.paint_hillshade["hillshade-accent-color"])})}};class hy extends f{constructor(a){super(a,cy)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const fy=k([{name:"a_pos",components:2,type:"Int16"}],4),{members:dy}=fy;function py(o,a,u=2){const m=a&&a.length,v=m?a[0]*u:o.length;let T=fa(o,0,v,u,!0);const P=[];if(!T||T.next===T.prev)return P;let I,O,z;if(m&&(T=(function(V,W,Y,re){const se=[];for(let he=0,_e=W.length;he<_e;he++){const Ae=fa(V,W[he]*re,he<_e-1?W[he+1]*re:V.length,re,!1);Ae===Ae.next&&(Ae.steiner=!0),se.push(xy(Ae))}se.sort(cm);for(let he=0;he<se.length;he++)Y=_y(se[he],Y);return Y})(o,a,T,u)),o.length>80*u){I=1/0,O=1/0;let V=-1/0,W=-1/0;for(let Y=u;Y<v;Y+=u){const re=o[Y],se=o[Y+1];re<I&&(I=re),se<O&&(O=se),re>V&&(V=re),se>W&&(W=se)}z=Math.max(V-I,W-O),z=z!==0?32767/z:0}return $c(T,P,u,I,O,z,0),P}function fa(o,a,u,m,v){let T;if(v===(function(P,I,O,z){let V=0;for(let W=I,Y=O-z;W<O;W+=z)V+=(P[Y]-P[W])*(P[W+1]+P[Y+1]),Y=W;return V})(o,a,u,m)>0)for(let P=a;P<u;P+=m)T=Kh(P/m|0,o[P],o[P+1],T);else for(let P=u-m;P>=a;P-=m)T=Kh(P/m|0,o[P],o[P+1],T);return T&&Vc(T,T.next)&&(oo(T),T=T.next),T}function Wn(o,a){if(!o)return o;a||(a=o);let u,m=o;do if(u=!1,m.steiner||!Vc(m,m.next)&&En(m.prev,m,m.next)!==0)m=m.next;else{if(oo(m),m=a=m.prev,m===m.next)break;u=!0}while(u||m!==a);return a}function $c(o,a,u,m,v,T,P){if(!o)return;!P&&T&&(function(O,z,V,W){let Y=O;do Y.z===0&&(Y.z=bd(Y.x,Y.y,z,V,W)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==O);Y.prevZ.nextZ=null,Y.prevZ=null,(function(re){let se,he=1;do{let _e,Ae=re;re=null;let qe=null;for(se=0;Ae;){se++;let ke=Ae,Ne=0;for(let ft=0;ft<he&&(Ne++,ke=ke.nextZ,ke);ft++);let tt=he;for(;Ne>0||tt>0&&ke;)Ne!==0&&(tt===0||!ke||Ae.z<=ke.z)?(_e=Ae,Ae=Ae.nextZ,Ne--):(_e=ke,ke=ke.nextZ,tt--),qe?qe.nextZ=_e:re=_e,_e.prevZ=qe,qe=_e;Ae=ke}qe.nextZ=null,he*=2}while(se>1)})(Y)})(o,m,v,T);let I=o;for(;o.prev!==o.next;){const O=o.prev,z=o.next;if(T?gy(o,m,v,T):my(o))a.push(O.i,o.i,z.i),oo(o),o=z.next,I=z.next;else if((o=z)===I){P?P===1?$c(o=yy(Wn(o),a),a,u,m,v,T,2):P===2&&vy(o,a,u,m,v,T):$c(Wn(o),a,u,m,v,T,1);break}}}function my(o){const a=o.prev,u=o,m=o.next;if(En(a,u,m)>=0)return!1;const v=a.x,T=u.x,P=m.x,I=a.y,O=u.y,z=m.y,V=v<T?v<P?v:P:T<P?T:P,W=I<O?I<z?I:z:O<z?O:z,Y=v>T?v>P?v:P:T>P?T:P,re=I>O?I>z?I:z:O>z?O:z;let se=m.next;for(;se!==a;){if(se.x>=V&&se.x<=Y&&se.y>=W&&se.y<=re&&Zl(v,I,T,O,P,z,se.x,se.y)&&En(se.prev,se,se.next)>=0)return!1;se=se.next}return!0}function gy(o,a,u,m){const v=o.prev,T=o,P=o.next;if(En(v,T,P)>=0)return!1;const I=v.x,O=T.x,z=P.x,V=v.y,W=T.y,Y=P.y,re=I<O?I<z?I:z:O<z?O:z,se=V<W?V<Y?V:Y:W<Y?W:Y,he=I>O?I>z?I:z:O>z?O:z,_e=V>W?V>Y?V:Y:W>Y?W:Y,Ae=bd(re,se,a,u,m),qe=bd(he,_e,a,u,m);let ke=o.prevZ,Ne=o.nextZ;for(;ke&&ke.z>=Ae&&Ne&&Ne.z<=qe;){if(ke.x>=re&&ke.x<=he&&ke.y>=se&&ke.y<=_e&&ke!==v&&ke!==P&&Zl(I,V,O,W,z,Y,ke.x,ke.y)&&En(ke.prev,ke,ke.next)>=0||(ke=ke.prevZ,Ne.x>=re&&Ne.x<=he&&Ne.y>=se&&Ne.y<=_e&&Ne!==v&&Ne!==P&&Zl(I,V,O,W,z,Y,Ne.x,Ne.y)&&En(Ne.prev,Ne,Ne.next)>=0))return!1;Ne=Ne.nextZ}for(;ke&&ke.z>=Ae;){if(ke.x>=re&&ke.x<=he&&ke.y>=se&&ke.y<=_e&&ke!==v&&ke!==P&&Zl(I,V,O,W,z,Y,ke.x,ke.y)&&En(ke.prev,ke,ke.next)>=0)return!1;ke=ke.prevZ}for(;Ne&&Ne.z<=qe;){if(Ne.x>=re&&Ne.x<=he&&Ne.y>=se&&Ne.y<=_e&&Ne!==v&&Ne!==P&&Zl(I,V,O,W,z,Y,Ne.x,Ne.y)&&En(Ne.prev,Ne,Ne.next)>=0)return!1;Ne=Ne.nextZ}return!0}function yy(o,a){let u=o;do{const m=u.prev,v=u.next.next;!Vc(m,v)&&Hh(m,u,u.next,v)&&Fu(m,v)&&Fu(v,m)&&(a.push(m.i,u.i,v.i),oo(u),oo(u.next),u=o=v),u=u.next}while(u!==o);return Wn(u)}function vy(o,a,u,m,v,T){let P=o;do{let I=P.next.next;for(;I!==P.prev;){if(P.i!==I.i&&fm(P,I)){let O=dm(P,I);return P=Wn(P,P.next),O=Wn(O,O.next),$c(P,a,u,m,v,T,0),void $c(O,a,u,m,v,T,0)}I=I.next}P=P.next}while(P!==o)}function cm(o,a){return o.x-a.x}function _y(o,a){const u=(function(v,T){let P=T;const I=v.x,O=v.y;let z,V=-1/0;do{if(O<=P.y&&O>=P.next.y&&P.next.y!==P.y){const he=P.x+(O-P.y)*(P.next.x-P.x)/(P.next.y-P.y);if(he<=I&&he>V&&(V=he,z=P.x<P.next.x?P:P.next,he===I))return z}P=P.next}while(P!==T);if(!z)return null;const W=z,Y=z.x,re=z.y;let se=1/0;P=z;do{if(I>=P.x&&P.x>=Y&&I!==P.x&&Zl(O<re?I:V,O,Y,re,O<re?V:I,O,P.x,P.y)){const he=Math.abs(O-P.y)/(I-P.x);Fu(P,v)&&(he<se||he===se&&(P.x>z.x||P.x===z.x&&hm(z,P)))&&(z=P,se=he)}P=P.next}while(P!==W);return z})(o,a);if(!u)return a;const m=dm(u,o);return Wn(m,m.next),Wn(u,u.next)}function hm(o,a){return En(o.prev,o,a.prev)<0&&En(a.next,o,o.next)<0}function bd(o,a,u,m,v){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-u)*v|0)|o<<8))|o<<4))|o<<2))|o<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-m)*v|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function xy(o){let a=o,u=o;do(a.x<u.x||a.x===u.x&&a.y<u.y)&&(u=a),a=a.next;while(a!==o);return u}function Zl(o,a,u,m,v,T,P,I){return(v-P)*(a-I)>=(o-P)*(T-I)&&(o-P)*(m-I)>=(u-P)*(a-I)&&(u-P)*(T-I)>=(v-P)*(m-I)}function fm(o,a){return o.next.i!==a.i&&o.prev.i!==a.i&&!(function(u,m){let v=u;do{if(v.i!==u.i&&v.next.i!==u.i&&v.i!==m.i&&v.next.i!==m.i&&Hh(v,v.next,u,m))return!0;v=v.next}while(v!==u);return!1})(o,a)&&(Fu(o,a)&&Fu(a,o)&&(function(u,m){let v=u,T=!1;const P=(u.x+m.x)/2,I=(u.y+m.y)/2;do v.y>I!=v.next.y>I&&v.next.y!==v.y&&P<(v.next.x-v.x)*(I-v.y)/(v.next.y-v.y)+v.x&&(T=!T),v=v.next;while(v!==u);return T})(o,a)&&(En(o.prev,o,a.prev)||En(o,a.prev,a))||Vc(o,a)&&En(o.prev,o,o.next)>0&&En(a.prev,a,a.next)>0)}function En(o,a,u){return(a.y-o.y)*(u.x-a.x)-(a.x-o.x)*(u.y-a.y)}function Vc(o,a){return o.x===a.x&&o.y===a.y}function Hh(o,a,u,m){const v=Zh(En(o,a,u)),T=Zh(En(o,a,m)),P=Zh(En(u,m,o)),I=Zh(En(u,m,a));return v!==T&&P!==I||!(v!==0||!wd(o,u,a))||!(T!==0||!wd(o,m,a))||!(P!==0||!wd(u,o,m))||!(I!==0||!wd(u,a,m))}function wd(o,a,u){return a.x<=Math.max(o.x,u.x)&&a.x>=Math.min(o.x,u.x)&&a.y<=Math.max(o.y,u.y)&&a.y>=Math.min(o.y,u.y)}function Zh(o){return o>0?1:o<0?-1:0}function Fu(o,a){return En(o.prev,o,o.next)<0?En(o,a,o.next)>=0&&En(o,o.prev,a)>=0:En(o,a,o.prev)<0||En(o,o.next,a)<0}function dm(o,a){const u=pm(o.i,o.x,o.y),m=pm(a.i,a.x,a.y),v=o.next,T=a.prev;return o.next=a,a.prev=o,u.next=v,v.prev=u,m.next=u,u.prev=m,T.next=m,m.prev=T,m}function Kh(o,a,u,m){const v=pm(o,a,u);return m?(v.next=m.next,v.prev=m,m.next.prev=v,m.next=v):(v.prev=v,v.next=v),v}function oo(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function pm(o,a,u){return{i:o,x:a,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Sd(o,a,u){const m=u.patternDependencies;let v=!1;for(const T of a){const P=T.paint.get(`${o}-pattern`);P.isConstant()||(v=!0);const I=P.constantOr(null);I&&(v=!0,m[I.to]=!0,m[I.from]=!0)}return v}function Xh(o,a,u,m,v){const T=v.patternDependencies;for(const P of a){const I=P.paint.get(`${o}-pattern`).value;if(I.kind!=="constant"){let O=I.evaluate({zoom:m-1},u,{},v.availableImages),z=I.evaluate({zoom:m},u,{},v.availableImages),V=I.evaluate({zoom:m+1},u,{},v.availableImages);O=O&&O.name?O.name:O,z=z&&z.name?z.name:z,V=V&&V.name?V.name:V,T[O]=!0,T[z]=!0,T[V]=!0,u.patterns[P.id]={min:O,mid:z,max:V}}}return u}class Td{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((u=>u.id)),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Qa,this.indexArray=new Ca,this.indexArray2=new On,this.programConfigurations=new Go(a.layers,a.zoom),this.segments=new Sr,this.segments2=new Sr,this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id))}populate(a,u,m){this.hasPattern=Sd("fill",this.layers,u);const v=this.layers[0].layout.get("fill-sort-key"),T=!v.isConstant(),P=[];for(const{feature:I,id:O,index:z,sourceLayerIndex:V}of a){const W=this.layers[0]._featureFilter.needGeometry,Y=Hl(I,W);if(!this.layers[0]._featureFilter.filter(new Ar(this.zoom),Y,m))continue;const re=T?v.evaluate(Y,{},m,u.availableImages):void 0,se={id:O,properties:I.properties,type:I.type,sourceLayerIndex:V,index:z,geometry:W?Y.geometry:Gl(I),patterns:{},sortKey:re};P.push(se)}T&&P.sort(((I,O)=>I.sortKey-O.sortKey));for(const I of P){const{geometry:O,index:z,sourceLayerIndex:V}=I;if(this.hasPattern){const W=Xh("fill",this.layers,I,this.zoom,u);this.patternFeatures.push(W)}else this.addFeature(I,O,z,m,{});u.featureIndex.insert(a[z].feature,O,z,V,this.index)}}update(a,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,m)}addFeatures(a,u,m){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,dy),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,u,m,v,T){for(const P of Al(u,500)){let I=0;for(const re of P)I+=re.length;const O=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),z=O.vertexLength,V=[],W=[];for(const re of P){if(re.length===0)continue;re!==P[0]&&W.push(V.length/2);const se=this.segments2.prepareSegment(re.length,this.layoutVertexArray,this.indexArray2),he=se.vertexLength;this.layoutVertexArray.emplaceBack(re[0].x,re[0].y),this.indexArray2.emplaceBack(he+re.length-1,he),V.push(re[0].x),V.push(re[0].y);for(let _e=1;_e<re.length;_e++)this.layoutVertexArray.emplaceBack(re[_e].x,re[_e].y),this.indexArray2.emplaceBack(he+_e-1,he+_e),V.push(re[_e].x),V.push(re[_e].y);se.vertexLength+=re.length,se.primitiveLength+=re.length}const Y=py(V,W);for(let re=0;re<Y.length;re+=3)this.indexArray.emplaceBack(z+Y[re],z+Y[re+1],z+Y[re+2]);O.vertexLength+=I,O.primitiveLength+=Y.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,T,v)}}let mm,Uc;Lt("FillBucket",Td,{omit:["layers","patternFeatures"]});var Gi={get paint(){return Uc=Uc||new S({"fill-antialias":new Nt($e.paint_fill["fill-antialias"]),"fill-opacity":new Qt($e.paint_fill["fill-opacity"]),"fill-color":new Qt($e.paint_fill["fill-color"]),"fill-outline-color":new Qt($e.paint_fill["fill-outline-color"]),"fill-translate":new Nt($e.paint_fill["fill-translate"]),"fill-translate-anchor":new Nt($e.paint_fill["fill-translate-anchor"]),"fill-pattern":new Vl($e.paint_fill["fill-pattern"])})},get layout(){return mm=mm||new S({"fill-sort-key":new Qt($e.layout_fill["fill-sort-key"])})}};class S_ extends f{constructor(a){super(a,Gi)}recalculate(a,u){super.recalculate(a,u);const m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new Td(a)}queryRadius(){return qh(this.paint.get("fill-translate"))}queryIntersectsFeature(a,u,m,v,T,P,I){return nm(Wh(a,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),P.angle,I),v)}isTileClipped(){return!0}}const T_=k([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Pd=k([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Hi}=T_;var Kl={},Zt=w,$u=Xl;function Xl(o,a,u,m,v){this.properties={},this.extent=u,this.type=0,this._pbf=o,this._geometry=-1,this._keys=m,this._values=v,o.readFields(by,this,a)}function by(o,a,u){o==1?a.id=u.readVarint():o==2?(function(m,v){for(var T=m.readVarint()+m.pos;m.pos<T;){var P=v._keys[m.readVarint()],I=v._values[m.readVarint()];v.properties[P]=I}})(u,a):o==3?a.type=u.readVarint():o==4&&(a._geometry=u.pos)}function P_(o){for(var a,u,m=0,v=0,T=o.length,P=T-1;v<T;P=v++)m+=((u=o[P]).x-(a=o[v]).x)*(a.y+u.y);return m}Xl.types=["Unknown","Point","LineString","Polygon"],Xl.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var a,u=o.readVarint()+o.pos,m=1,v=0,T=0,P=0,I=[];o.pos<u;){if(v<=0){var O=o.readVarint();m=7&O,v=O>>3}if(v--,m===1||m===2)T+=o.readSVarint(),P+=o.readSVarint(),m===1&&(a&&I.push(a),a=[]),a.push(new Zt(T,P));else{if(m!==7)throw new Error("unknown command "+m);a&&a.push(a[0].clone())}}return a&&I.push(a),I},Xl.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var a=o.readVarint()+o.pos,u=1,m=0,v=0,T=0,P=1/0,I=-1/0,O=1/0,z=-1/0;o.pos<a;){if(m<=0){var V=o.readVarint();u=7&V,m=V>>3}if(m--,u===1||u===2)(v+=o.readSVarint())<P&&(P=v),v>I&&(I=v),(T+=o.readSVarint())<O&&(O=T),T>z&&(z=T);else if(u!==7)throw new Error("unknown command "+u)}return[P,O,I,z]},Xl.prototype.toGeoJSON=function(o,a,u){var m,v,T=this.extent*Math.pow(2,u),P=this.extent*o,I=this.extent*a,O=this.loadGeometry(),z=Xl.types[this.type];function V(re){for(var se=0;se<re.length;se++){var he=re[se];re[se]=[360*(he.x+P)/T-180,360/Math.PI*Math.atan(Math.exp((180-360*(he.y+I)/T)*Math.PI/180))-90]}}switch(this.type){case 1:var W=[];for(m=0;m<O.length;m++)W[m]=O[m][0];V(O=W);break;case 2:for(m=0;m<O.length;m++)V(O[m]);break;case 3:for(O=(function(re){var se=re.length;if(se<=1)return[re];for(var he,_e,Ae=[],qe=0;qe<se;qe++){var ke=P_(re[qe]);ke!==0&&(_e===void 0&&(_e=ke<0),_e===ke<0?(he&&Ae.push(he),he=[re[qe]]):he.push(re[qe]))}return he&&Ae.push(he),Ae})(O),m=0;m<O.length;m++)for(v=0;v<O[m].length;v++)V(O[m][v])}O.length===1?O=O[0]:z="Multi"+z;var Y={type:"Feature",geometry:{type:z,coordinates:O},properties:this.properties};return"id"in this&&(Y.id=this.id),Y};var Yh=$u,Jh=Ad;function Ad(o,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(wy,this,a),this.length=this._features.length}function wy(o,a,u){o===15?a.version=u.readVarint():o===1?a.name=u.readString():o===5?a.extent=u.readVarint():o===2?a._features.push(u.pos):o===3?a._keys.push(u.readString()):o===4&&a._values.push((function(m){for(var v=null,T=m.readVarint()+m.pos;m.pos<T;){var P=m.readVarint()>>3;v=P===1?m.readString():P===2?m.readFloat():P===3?m.readDouble():P===4?m.readVarint64():P===5?m.readVarint():P===6?m.readSVarint():P===7?m.readBoolean():null}return v})(u))}Ad.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var a=this._pbf.readVarint()+this._pbf.pos;return new Yh(this._pbf,a,this.extent,this._keys,this._values)};var Sy=Jh;function Ty(o,a,u){if(o===3){var m=new Sy(u,u.readVarint()+u.pos);m.length&&(a[m.name]=m)}}Kl.VectorTile=function(o,a){this.layers=o.readFields(Ty,{},a)},Kl.VectorTileFeature=$u,Kl.VectorTileLayer=Jh;const gm=Kl.VectorTileFeature.types,Qh=Math.pow(2,13);function Gn(o,a,u,m,v,T,P,I){o.emplaceBack(a,u,2*Math.floor(m*Qh)+P,v*Qh*2,T*Qh*2,Math.round(I))}class so{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((u=>u.id)),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new qi,this.centroidVertexArray=new An,this.indexArray=new Ca,this.programConfigurations=new Go(a.layers,a.zoom),this.segments=new Sr,this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id))}populate(a,u,m){this.features=[],this.hasPattern=Sd("fill-extrusion",this.layers,u);for(const{feature:v,id:T,index:P,sourceLayerIndex:I}of a){const O=this.layers[0]._featureFilter.needGeometry,z=Hl(v,O);if(!this.layers[0]._featureFilter.filter(new Ar(this.zoom),z,m))continue;const V={id:T,sourceLayerIndex:I,index:P,geometry:O?z.geometry:Gl(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(Xh("fill-extrusion",this.layers,V,this.zoom,u)):this.addFeature(V,V.geometry,P,m,{}),u.featureIndex.insert(v,V.geometry,P,I,this.index,!0)}}addFeatures(a,u,m){for(const v of this.features){const{geometry:T}=v;this.addFeature(v,T,v.index,u,m)}}update(a,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Hi),this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,Pd.members,!0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(a,u,m,v,T){for(const P of Al(u,500)){const I={x:0,y:0,vertexCount:0};let O=0;for(const se of P)O+=se.length;let z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const se of P){if(se.length===0||Py(se))continue;let he=0;for(let _e=0;_e<se.length;_e++){const Ae=se[_e];if(_e>=1){const qe=se[_e-1];if(!Yl(Ae,qe)){z.vertexLength+4>Sr.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ke=Ae.sub(qe)._perp()._unit(),Ne=qe.dist(Ae);he+Ne>32768&&(he=0),Gn(this.layoutVertexArray,Ae.x,Ae.y,ke.x,ke.y,0,0,he),Gn(this.layoutVertexArray,Ae.x,Ae.y,ke.x,ke.y,0,1,he),I.x+=2*Ae.x,I.y+=2*Ae.y,I.vertexCount+=2,he+=Ne,Gn(this.layoutVertexArray,qe.x,qe.y,ke.x,ke.y,0,0,he),Gn(this.layoutVertexArray,qe.x,qe.y,ke.x,ke.y,0,1,he),I.x+=2*qe.x,I.y+=2*qe.y,I.vertexCount+=2;const tt=z.vertexLength;this.indexArray.emplaceBack(tt,tt+2,tt+1),this.indexArray.emplaceBack(tt+1,tt+2,tt+3),z.vertexLength+=4,z.primitiveLength+=2}}}}if(z.vertexLength+O>Sr.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(O,this.layoutVertexArray,this.indexArray)),gm[a.type]!=="Polygon")continue;const V=[],W=[],Y=z.vertexLength;for(const se of P)if(se.length!==0){se!==P[0]&&W.push(V.length/2);for(let he=0;he<se.length;he++){const _e=se[he];Gn(this.layoutVertexArray,_e.x,_e.y,0,0,1,1,0),I.x+=_e.x,I.y+=_e.y,I.vertexCount+=1,V.push(_e.x),V.push(_e.y)}}const re=py(V,W);for(let se=0;se<re.length;se+=3)this.indexArray.emplaceBack(Y+re[se],Y+re[se+2],Y+re[se+1]);z.primitiveLength+=re.length/3,z.vertexLength+=O;for(let se=0;se<I.vertexCount;se++){const he=Math.floor(I.x/I.vertexCount),_e=Math.floor(I.y/I.vertexCount);this.centroidVertexArray.emplaceBack(he,_e)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,T,v)}}function Yl(o,a){return o.x===a.x&&(o.x<0||o.x>Dn)||o.y===a.y&&(o.y<0||o.y>Dn)}function Py(o){return o.every((a=>a.x<0))||o.every((a=>a.x>Dn))||o.every((a=>a.y<0))||o.every((a=>a.y>Dn))}let ym;Lt("FillExtrusionBucket",so,{omit:["layers","features"]});var Ho={get paint(){return ym=ym||new S({"fill-extrusion-opacity":new Nt($e["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Qt($e["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Nt($e["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Nt($e["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Vl($e["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Qt($e["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Qt($e["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Nt($e["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Ay extends f{constructor(a){super(a,Ho)}createBucket(a){return new so(a)}queryRadius(){return qh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(a,u,m,v,T,P,I,O){const z=Wh(a,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),P.angle,I),V=this.paint.get("fill-extrusion-height").evaluate(u,m),W=this.paint.get("fill-extrusion-base").evaluate(u,m),Y=(function(se,he,_e,Ae){const qe=[];for(const ke of se){const Ne=[ke.x,ke.y,0,1];md(Ne,Ne,he),qe.push(new A(Ne[0]/Ne[3],Ne[1]/Ne[3]))}return qe})(z,O),re=(function(se,he,_e,Ae){const qe=[],ke=[],Ne=Ae[8]*he,tt=Ae[9]*he,ft=Ae[10]*he,zt=Ae[11]*he,rr=Ae[8]*_e,Rt=Ae[9]*_e,kt=Ae[10]*_e,Ht=Ae[11]*_e;for(const Ut of se){const $t=[],st=[];for(const Kt of Ut){const Gt=Kt.x,hr=Kt.y,ln=Ae[0]*Gt+Ae[4]*hr+Ae[12],nn=Ae[1]*Gt+Ae[5]*hr+Ae[13],vi=Ae[2]*Gt+Ae[6]*hr+Ae[14],Es=Ae[3]*Gt+Ae[7]*hr+Ae[15],Xi=vi+ft,_i=Es+zt,Ra=ln+rr,ja=nn+Rt,za=vi+kt,Fn=Es+Ht,xi=new A((ln+Ne)/_i,(nn+tt)/_i);xi.z=Xi/_i,$t.push(xi);const ma=new A(Ra/Fn,ja/Fn);ma.z=za/Fn,st.push(ma)}qe.push($t),ke.push(st)}return[qe,ke]})(v,W,V,O);return(function(se,he,_e){let Ae=1/0;nm(_e,he)&&(Ae=Ey(_e,he[0]));for(let qe=0;qe<he.length;qe++){const ke=he[qe],Ne=se[qe];for(let tt=0;tt<ke.length-1;tt++){const ft=ke[tt],zt=[ft,ke[tt+1],Ne[tt+1],Ne[tt],ft];rm(_e,zt)&&(Ae=Math.min(Ae,Ey(_e,zt)))}}return Ae!==1/0&&Ae})(re[0],re[1],Y)}}function Ma(o,a){return o.x*a.x+o.y*a.y}function Ey(o,a){if(o.length===1){let u=0;const m=a[u++];let v;for(;!v||m.equals(v);)if(v=a[u++],!v)return 1/0;for(;u<a.length;u++){const T=a[u],P=o[0],I=v.sub(m),O=T.sub(m),z=P.sub(m),V=Ma(I,I),W=Ma(I,O),Y=Ma(O,O),re=Ma(z,I),se=Ma(z,O),he=V*Y-W*W,_e=(Y*re-W*se)/he,Ae=(V*se-W*re)/he,qe=m.z*(1-_e-Ae)+v.z*_e+T.z*Ae;if(isFinite(qe))return qe}return 1/0}{let u=1/0;for(const m of a)u=Math.min(u,m.z);return u}}const Cy=k([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:My}=Cy,Iy=k([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:ky}=Iy,A_=Kl.VectorTileFeature.types,Ed=Math.cos(Math.PI/180*37.5),Cd=Math.pow(2,14)/.5;class Ia{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((u=>u.id)),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((u=>{this.gradients[u.id]={}})),this.layoutVertexArray=new eo,this.layoutVertexArray2=new ws,this.indexArray=new Ca,this.programConfigurations=new Go(a.layers,a.zoom),this.segments=new Sr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((u=>u.isStateDependent())).map((u=>u.id))}populate(a,u,m){this.hasPattern=Sd("line",this.layers,u);const v=this.layers[0].layout.get("line-sort-key"),T=!v.isConstant(),P=[];for(const{feature:I,id:O,index:z,sourceLayerIndex:V}of a){const W=this.layers[0]._featureFilter.needGeometry,Y=Hl(I,W);if(!this.layers[0]._featureFilter.filter(new Ar(this.zoom),Y,m))continue;const re=T?v.evaluate(Y,{},m):void 0,se={id:O,properties:I.properties,type:I.type,sourceLayerIndex:V,index:z,geometry:W?Y.geometry:Gl(I),patterns:{},sortKey:re};P.push(se)}T&&P.sort(((I,O)=>I.sortKey-O.sortKey));for(const I of P){const{geometry:O,index:z,sourceLayerIndex:V}=I;if(this.hasPattern){const W=Xh("line",this.layers,I,this.zoom,u);this.patternFeatures.push(W)}else this.addFeature(I,O,z,m,{});u.featureIndex.insert(a[z].feature,O,z,V,this.index)}}update(a,u,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,u,this.stateDependentLayers,m)}addFeatures(a,u,m){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,u,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,ky)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,My),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,u,m,v,T){const P=this.layers[0].layout,I=P.get("line-join").evaluate(a,{}),O=P.get("line-cap"),z=P.get("line-miter-limit"),V=P.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const W of u)this.addLine(W,a,I,O,z,V);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,m,T,v)}addLine(a,u,m,v,T,P){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ae=0;Ae<a.length-1;Ae++)this.totalDistance+=a[Ae].dist(a[Ae+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const I=A_[u.type]==="Polygon";let O=a.length;for(;O>=2&&a[O-1].equals(a[O-2]);)O--;let z=0;for(;z<O-1&&a[z].equals(a[z+1]);)z++;if(O<(I?3:2))return;m==="bevel"&&(T=1.05);const V=this.overscaling<=16?15*Dn/(512*this.overscaling):0,W=this.segments.prepareSegment(10*O,this.layoutVertexArray,this.indexArray);let Y,re,se,he,_e;this.e1=this.e2=-1,I&&(Y=a[O-2],_e=a[z].sub(Y)._unit()._perp());for(let Ae=z;Ae<O;Ae++){if(se=Ae===O-1?I?a[z+1]:void 0:a[Ae+1],se&&a[Ae].equals(se))continue;_e&&(he=_e),Y&&(re=Y),Y=a[Ae],_e=se?se.sub(Y)._unit()._perp():he,he=he||_e;let qe=he.add(_e);qe.x===0&&qe.y===0||qe._unit();const ke=he.x*_e.x+he.y*_e.y,Ne=qe.x*_e.x+qe.y*_e.y,tt=Ne!==0?1/Ne:1/0,ft=2*Math.sqrt(2-2*Ne),zt=Ne<Ed&&re&&se,rr=he.x*_e.y-he.y*_e.x>0;if(zt&&Ae>z){const Ht=Y.dist(re);if(Ht>2*V){const Ut=Y.sub(Y.sub(re)._mult(V/Ht)._round());this.updateDistance(re,Ut),this.addCurrentVertex(Ut,he,0,0,W),re=Ut}}const Rt=re&&se;let kt=Rt?m:I?"butt":v;if(Rt&&kt==="round"&&(tt<P?kt="miter":tt<=2&&(kt="fakeround")),kt==="miter"&&tt>T&&(kt="bevel"),kt==="bevel"&&(tt>2&&(kt="flipbevel"),tt<T&&(kt="miter")),re&&this.updateDistance(re,Y),kt==="miter")qe._mult(tt),this.addCurrentVertex(Y,qe,0,0,W);else if(kt==="flipbevel"){if(tt>100)qe=_e.mult(-1);else{const Ht=tt*he.add(_e).mag()/he.sub(_e).mag();qe._perp()._mult(Ht*(rr?-1:1))}this.addCurrentVertex(Y,qe,0,0,W),this.addCurrentVertex(Y,qe.mult(-1),0,0,W)}else if(kt==="bevel"||kt==="fakeround"){const Ht=-Math.sqrt(tt*tt-1),Ut=rr?Ht:0,$t=rr?0:Ht;if(re&&this.addCurrentVertex(Y,he,Ut,$t,W),kt==="fakeround"){const st=Math.round(180*ft/Math.PI/20);for(let Kt=1;Kt<st;Kt++){let Gt=Kt/st;if(Gt!==.5){const ln=Gt-.5;Gt+=Gt*ln*(Gt-1)*((1.0904+ke*(ke*(3.55645-1.43519*ke)-3.2452))*ln*ln+(.848013+ke*(.215638*ke-1.06021)))}const hr=_e.sub(he)._mult(Gt)._add(he)._unit()._mult(rr?-1:1);this.addHalfVertex(Y,hr.x,hr.y,!1,rr,0,W)}}se&&this.addCurrentVertex(Y,_e,-Ut,-$t,W)}else if(kt==="butt")this.addCurrentVertex(Y,qe,0,0,W);else if(kt==="square"){const Ht=re?1:-1;this.addCurrentVertex(Y,qe,Ht,Ht,W)}else kt==="round"&&(re&&(this.addCurrentVertex(Y,he,0,0,W),this.addCurrentVertex(Y,he,1,1,W,!0)),se&&(this.addCurrentVertex(Y,_e,-1,-1,W,!0),this.addCurrentVertex(Y,_e,0,0,W)));if(zt&&Ae<O-1){const Ht=Y.dist(se);if(Ht>2*V){const Ut=Y.add(se.sub(Y)._mult(V/Ht)._round());this.updateDistance(Y,Ut),this.addCurrentVertex(Ut,_e,0,0,W),Y=Ut}}}}addCurrentVertex(a,u,m,v,T,P=!1){const I=u.y*v-u.x,O=-u.y-u.x*v;this.addHalfVertex(a,u.x+u.y*m,u.y-u.x*m,P,!1,m,T),this.addHalfVertex(a,I,O,P,!0,-v,T),this.distance>Cd/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(a,u,m,v,T,P))}addHalfVertex({x:a,y:u},m,v,T,P,I,O){const z=.5*(this.lineClips?this.scaledDistance*(Cd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a<<1)+(T?1:0),(u<<1)+(P?1:0),Math.round(63*m)+128,Math.round(63*v)+128,1+(I===0?0:I<0?-1:1)|(63&z)<<2,z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const V=O.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,V),O.primitiveLength++),P?this.e2=V:this.e1=V}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(a,u){this.distance+=a.dist(u),this.updateScaledDistance()}}let Nr,ui;Lt("LineBucket",Ia,{omit:["layers","patternFeatures"]});var Hn={get paint(){return ui=ui||new S({"line-opacity":new Qt($e.paint_line["line-opacity"]),"line-color":new Qt($e.paint_line["line-color"]),"line-translate":new Nt($e.paint_line["line-translate"]),"line-translate-anchor":new Nt($e.paint_line["line-translate-anchor"]),"line-width":new Qt($e.paint_line["line-width"]),"line-gap-width":new Qt($e.paint_line["line-gap-width"]),"line-offset":new Qt($e.paint_line["line-offset"]),"line-blur":new Qt($e.paint_line["line-blur"]),"line-dasharray":new zu($e.paint_line["line-dasharray"]),"line-pattern":new Vl($e.paint_line["line-pattern"]),"line-gradient":new zh($e.paint_line["line-gradient"])})},get layout(){return Nr=Nr||new S({"line-cap":new Nt($e.layout_line["line-cap"]),"line-join":new Qt($e.layout_line["line-join"]),"line-miter-limit":new Nt($e.layout_line["line-miter-limit"]),"line-round-limit":new Nt($e.layout_line["line-round-limit"]),"line-sort-key":new Qt($e.layout_line["line-sort-key"])})}};class Ii extends Qt{possiblyEvaluate(a,u){return u=new Ar(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(a,u)}evaluate(a,u,m,v){return u=le({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(a,u,m,v)}}let Zi;class qc extends f{constructor(a){super(a,Hn),this.gradientVersion=0,Zi||(Zi=new Ii(Hn.paint.properties["line-width"].specification),Zi.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const u=this.gradientExpression();this.stepInterpolant=!!(function(m){return m._styleExpression!==void 0})(u)&&u._styleExpression.expression instanceof Ws,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(a,u){super.recalculate(a,u),this.paint._values["line-floorwidth"]=Zi.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new Ia(a)}queryRadius(a){const u=a,m=ti(Nu("line-width",this,u),Nu("line-gap-width",this,u)),v=Nu("line-offset",this,u);return m/2+Math.abs(v)+qh(this.paint.get("line-translate"))}queryIntersectsFeature(a,u,m,v,T,P,I){const O=Wh(a,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),P.angle,I),z=I/2*ti(this.paint.get("line-width").evaluate(u,m),this.paint.get("line-gap-width").evaluate(u,m)),V=this.paint.get("line-offset").evaluate(u,m);return V&&(v=(function(W,Y){const re=[];for(let se=0;se<W.length;se++){const he=W[se],_e=[];for(let Ae=0;Ae<he.length;Ae++){const qe=he[Ae-1],ke=he[Ae],Ne=he[Ae+1],tt=Ae===0?new A(0,0):ke.sub(qe)._unit()._perp(),ft=Ae===he.length-1?new A(0,0):Ne.sub(ke)._unit()._perp(),zt=tt._add(ft)._unit(),rr=zt.x*ft.x+zt.y*ft.y;rr!==0&&zt._mult(1/rr),_e.push(zt._mult(Y)._add(ke))}re.push(_e)}return re})(v,V*I)),(function(W,Y,re){for(let se=0;se<Y.length;se++){const he=Y[se];if(W.length>=3){for(let _e=0;_e<he.length;_e++)if(Lu(W,he[_e]))return!0}if(fd(W,he,re))return!0}return!1})(O,v,z)}isTileClipped(){return!0}}function ti(o,a){return a>0?a+2*o:o}const ef=k([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Vu=k([{name:"a_projected_pos",components:3,type:"Float32"}],4);k([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Md=k([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);k([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Id=k([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),tf=k([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ka(o,a,u){return o.sections.forEach((m=>{m.text=(function(v,T,P){const I=T.layout.get("text-transform").evaluate(P,{});return I==="uppercase"?v=v.toLocaleUpperCase():I==="lowercase"&&(v=v.toLocaleLowerCase()),Kr.applyArabicShaping&&(v=Kr.applyArabicShaping(v)),v})(m.text,a,u)})),o}k([{name:"triangle",components:3,type:"Uint16"}]),k([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),k([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),k([{type:"Float32",name:"offsetX"}]),k([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),k([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Uu={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var yn=24,Ps=Mr,rf=function(o,a,u,m,v){var T,P,I=8*v-m-1,O=(1<<I)-1,z=O>>1,V=-7,W=v-1,Y=-1,re=o[a+W];for(W+=Y,T=re&(1<<-V)-1,re>>=-V,V+=I;V>0;T=256*T+o[a+W],W+=Y,V-=8);for(P=T&(1<<-V)-1,T>>=-V,V+=m;V>0;P=256*P+o[a+W],W+=Y,V-=8);if(T===0)T=1-z;else{if(T===O)return P?NaN:1/0*(re?-1:1);P+=Math.pow(2,m),T-=z}return(re?-1:1)*P*Math.pow(2,T-m)},kd=function(o,a,u,m,v,T){var P,I,O,z=8*T-v-1,V=(1<<z)-1,W=V>>1,Y=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,re=0,se=1,he=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(I=isNaN(a)?1:0,P=V):(P=Math.floor(Math.log(a)/Math.LN2),a*(O=Math.pow(2,-P))<1&&(P--,O*=2),(a+=P+W>=1?Y/O:Y*Math.pow(2,1-W))*O>=2&&(P++,O/=2),P+W>=V?(I=0,P=V):P+W>=1?(I=(a*O-1)*Math.pow(2,v),P+=W):(I=a*Math.pow(2,W-1)*Math.pow(2,v),P=0));v>=8;o[u+re]=255&I,re+=se,I/=256,v-=8);for(P=P<<v|I,z+=v;z>0;o[u+re]=255&P,re+=se,P/=256,z-=8);o[u+re-se]|=128*he};function Mr(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Mr.Varint=0,Mr.Fixed64=1,Mr.Bytes=2,Mr.Fixed32=5;var Wc=4294967296,al=1/Wc,nf=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function lo(o){return o.type===Mr.Bytes?o.readVarint()+o.pos:o.pos+1}function Jl(o,a,u){return u?4294967296*a+(o>>>0):4294967296*(a>>>0)+(o>>>0)}function af(o,a,u){var m=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));u.realloc(m);for(var v=u.pos-1;v>=o;v--)u.buf[v+m]=u.buf[v]}function Od(o,a){for(var u=0;u<o.length;u++)a.writeVarint(o[u])}function da(o,a){for(var u=0;u<o.length;u++)a.writeSVarint(o[u])}function Ql(o,a){for(var u=0;u<o.length;u++)a.writeFloat(o[u])}function Zo(o,a){for(var u=0;u<o.length;u++)a.writeDouble(o[u])}function Oa(o,a){for(var u=0;u<o.length;u++)a.writeBoolean(o[u])}function Oy(o,a){for(var u=0;u<o.length;u++)a.writeFixed32(o[u])}function vm(o,a){for(var u=0;u<o.length;u++)a.writeSFixed32(o[u])}function _m(o,a){for(var u=0;u<o.length;u++)a.writeFixed64(o[u])}function E_(o,a){for(var u=0;u<o.length;u++)a.writeSFixed64(o[u])}function Ko(o,a){return(o[a]|o[a+1]<<8|o[a+2]<<16)+16777216*o[a+3]}function qu(o,a,u){o[u]=a,o[u+1]=a>>>8,o[u+2]=a>>>16,o[u+3]=a>>>24}function Dd(o,a){return(o[a]|o[a+1]<<8|o[a+2]<<16)+(o[a+3]<<24)}Mr.prototype={destroy:function(){this.buf=null},readFields:function(o,a,u){for(u=u||this.length;this.pos<u;){var m=this.readVarint(),v=m>>3,T=this.pos;this.type=7&m,o(v,a,this),this.pos===T&&this.skip(m)}return a},readMessage:function(o,a){return this.readFields(o,a,this.readVarint()+this.pos)},readFixed32:function(){var o=Ko(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Dd(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Ko(this.buf,this.pos)+Ko(this.buf,this.pos+4)*Wc;return this.pos+=8,o},readSFixed64:function(){var o=Ko(this.buf,this.pos)+Dd(this.buf,this.pos+4)*Wc;return this.pos+=8,o},readFloat:function(){var o=rf(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=rf(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var a,u,m=this.buf;return a=127&(u=m[this.pos++]),u<128?a:(a|=(127&(u=m[this.pos++]))<<7,u<128?a:(a|=(127&(u=m[this.pos++]))<<14,u<128?a:(a|=(127&(u=m[this.pos++]))<<21,u<128?a:(function(v,T,P){var I,O,z=P.buf;if(I=(112&(O=z[P.pos++]))>>4,O<128||(I|=(127&(O=z[P.pos++]))<<3,O<128)||(I|=(127&(O=z[P.pos++]))<<10,O<128)||(I|=(127&(O=z[P.pos++]))<<17,O<128)||(I|=(127&(O=z[P.pos++]))<<24,O<128)||(I|=(1&(O=z[P.pos++]))<<31,O<128))return Jl(v,I,T);throw new Error("Expected varint not more than 10 bytes")})(a|=(15&(u=m[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,a=this.pos;return this.pos=o,o-a>=12&&nf?(function(u,m,v){return nf.decode(u.subarray(m,v))})(this.buf,a,o):(function(u,m,v){for(var T="",P=m;P<v;){var I,O,z,V=u[P],W=null,Y=V>239?4:V>223?3:V>191?2:1;if(P+Y>v)break;Y===1?V<128&&(W=V):Y===2?(192&(I=u[P+1]))==128&&(W=(31&V)<<6|63&I)<=127&&(W=null):Y===3?(O=u[P+2],(192&(I=u[P+1]))==128&&(192&O)==128&&((W=(15&V)<<12|(63&I)<<6|63&O)<=2047||W>=55296&&W<=57343)&&(W=null)):Y===4&&(O=u[P+2],z=u[P+3],(192&(I=u[P+1]))==128&&(192&O)==128&&(192&z)==128&&((W=(15&V)<<18|(63&I)<<12|(63&O)<<6|63&z)<=65535||W>=1114112)&&(W=null)),W===null?(W=65533,Y=1):W>65535&&(W-=65536,T+=String.fromCharCode(W>>>10&1023|55296),W=56320|1023&W),T+=String.fromCharCode(W),P+=Y}return T})(this.buf,a,o)},readBytes:function(){var o=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,o);return this.pos=o,a},readPackedVarint:function(o,a){if(this.type!==Mr.Bytes)return o.push(this.readVarint(a));var u=lo(this);for(o=o||[];this.pos<u;)o.push(this.readVarint(a));return o},readPackedSVarint:function(o){if(this.type!==Mr.Bytes)return o.push(this.readSVarint());var a=lo(this);for(o=o||[];this.pos<a;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Mr.Bytes)return o.push(this.readBoolean());var a=lo(this);for(o=o||[];this.pos<a;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Mr.Bytes)return o.push(this.readFloat());var a=lo(this);for(o=o||[];this.pos<a;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Mr.Bytes)return o.push(this.readDouble());var a=lo(this);for(o=o||[];this.pos<a;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Mr.Bytes)return o.push(this.readFixed32());var a=lo(this);for(o=o||[];this.pos<a;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Mr.Bytes)return o.push(this.readSFixed32());var a=lo(this);for(o=o||[];this.pos<a;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Mr.Bytes)return o.push(this.readFixed64());var a=lo(this);for(o=o||[];this.pos<a;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Mr.Bytes)return o.push(this.readSFixed64());var a=lo(this);for(o=o||[];this.pos<a;)o.push(this.readSFixed64());return o},skip:function(o){var a=7&o;if(a===Mr.Varint)for(;this.buf[this.pos++]>127;);else if(a===Mr.Bytes)this.pos=this.readVarint()+this.pos;else if(a===Mr.Fixed32)this.pos+=4;else{if(a!==Mr.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(o,a){this.writeVarint(o<<3|a)},realloc:function(o){for(var a=this.length||16;a<this.pos+o;)a*=2;if(a!==this.length){var u=new Uint8Array(a);u.set(this.buf),this.buf=u,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),qu(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),qu(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),qu(this.buf,-1&o,this.pos),qu(this.buf,Math.floor(o*al),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),qu(this.buf,-1&o,this.pos),qu(this.buf,Math.floor(o*al),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?(function(a,u){var m,v;if(a>=0?(m=a%4294967296|0,v=a/4294967296|0):(v=~(-a/4294967296),4294967295^(m=~(-a%4294967296))?m=m+1|0:(m=0,v=v+1|0)),a>=18446744073709552e3||a<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),(function(T,P,I){I.buf[I.pos++]=127&T|128,T>>>=7,I.buf[I.pos++]=127&T|128,T>>>=7,I.buf[I.pos++]=127&T|128,T>>>=7,I.buf[I.pos++]=127&T|128,I.buf[I.pos]=127&(T>>>=7)})(m,0,u),(function(T,P){var I=(7&T)<<4;P.buf[P.pos++]|=I|((T>>>=3)?128:0),T&&(P.buf[P.pos++]=127&T|((T>>>=7)?128:0),T&&(P.buf[P.pos++]=127&T|((T>>>=7)?128:0),T&&(P.buf[P.pos++]=127&T|((T>>>=7)?128:0),T&&(P.buf[P.pos++]=127&T|((T>>>=7)?128:0),T&&(P.buf[P.pos++]=127&T)))))})(v,u)})(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var a=this.pos;this.pos=(function(m,v,T){for(var P,I,O=0;O<v.length;O++){if((P=v.charCodeAt(O))>55295&&P<57344){if(!I){P>56319||O+1===v.length?(m[T++]=239,m[T++]=191,m[T++]=189):I=P;continue}if(P<56320){m[T++]=239,m[T++]=191,m[T++]=189,I=P;continue}P=I-55296<<10|P-56320|65536,I=null}else I&&(m[T++]=239,m[T++]=191,m[T++]=189,I=null);P<128?m[T++]=P:(P<2048?m[T++]=P>>6|192:(P<65536?m[T++]=P>>12|224:(m[T++]=P>>18|240,m[T++]=P>>12&63|128),m[T++]=P>>6&63|128),m[T++]=63&P|128)}return T})(this.buf,o,this.pos);var u=this.pos-a;u>=128&&af(a,u,this),this.pos=a-1,this.writeVarint(u),this.pos+=u},writeFloat:function(o){this.realloc(4),kd(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),kd(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var a=o.length;this.writeVarint(a),this.realloc(a);for(var u=0;u<a;u++)this.buf[this.pos++]=o[u]},writeRawMessage:function(o,a){this.pos++;var u=this.pos;o(a,this);var m=this.pos-u;m>=128&&af(u,m,this),this.pos=u-1,this.writeVarint(m),this.pos+=m},writeMessage:function(o,a,u){this.writeTag(o,Mr.Bytes),this.writeRawMessage(a,u)},writePackedVarint:function(o,a){a.length&&this.writeMessage(o,Od,a)},writePackedSVarint:function(o,a){a.length&&this.writeMessage(o,da,a)},writePackedBoolean:function(o,a){a.length&&this.writeMessage(o,Oa,a)},writePackedFloat:function(o,a){a.length&&this.writeMessage(o,Ql,a)},writePackedDouble:function(o,a){a.length&&this.writeMessage(o,Zo,a)},writePackedFixed32:function(o,a){a.length&&this.writeMessage(o,Oy,a)},writePackedSFixed32:function(o,a){a.length&&this.writeMessage(o,vm,a)},writePackedFixed64:function(o,a){a.length&&this.writeMessage(o,_m,a)},writePackedSFixed64:function(o,a){a.length&&this.writeMessage(o,E_,a)},writeBytesField:function(o,a){this.writeTag(o,Mr.Bytes),this.writeBytes(a)},writeFixed32Field:function(o,a){this.writeTag(o,Mr.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(o,a){this.writeTag(o,Mr.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(o,a){this.writeTag(o,Mr.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(o,a){this.writeTag(o,Mr.Fixed64),this.writeSFixed64(a)},writeVarintField:function(o,a){this.writeTag(o,Mr.Varint),this.writeVarint(a)},writeSVarintField:function(o,a){this.writeTag(o,Mr.Varint),this.writeSVarint(a)},writeStringField:function(o,a){this.writeTag(o,Mr.Bytes),this.writeString(a)},writeFloatField:function(o,a){this.writeTag(o,Mr.Fixed32),this.writeFloat(a)},writeDoubleField:function(o,a){this.writeTag(o,Mr.Fixed64),this.writeDouble(a)},writeBooleanField:function(o,a){this.writeVarintField(o,!!a)}};var ol=_(Ps);const of=3;function Wu(o,a,u){o===1&&u.readMessage(Dy,a)}function Dy(o,a,u){if(o===3){const{id:m,bitmap:v,width:T,height:P,left:I,top:O,advance:z}=u.readMessage(Ry,{});a.push({id:m,bitmap:new Bu({width:T+2*of,height:P+2*of},v),metrics:{width:T,height:P,left:I,top:O,advance:z}})}}function Ry(o,a,u){o===1?a.id=u.readVarint():o===2?a.bitmap=u.readBytes():o===3?a.width=u.readVarint():o===4?a.height=u.readVarint():o===5?a.left=u.readSVarint():o===6?a.top=u.readSVarint():o===7&&(a.advance=u.readVarint())}const Rd=of;function sf(o){let a=0,u=0;for(const P of o)a+=P.w*P.h,u=Math.max(u,P.w);o.sort(((P,I)=>I.h-P.h));const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),u),h:1/0}];let v=0,T=0;for(const P of o)for(let I=m.length-1;I>=0;I--){const O=m[I];if(!(P.w>O.w||P.h>O.h)){if(P.x=O.x,P.y=O.y,T=Math.max(T,P.y+P.h),v=Math.max(v,P.x+P.w),P.w===O.w&&P.h===O.h){const z=m.pop();I<m.length&&(m[I]=z)}else P.h===O.h?(O.x+=P.w,O.w-=P.w):P.w===O.w?(O.y+=P.h,O.h-=P.h):(m.push({x:O.x+P.w,y:O.y,w:O.w-P.w,h:P.h}),O.y+=P.h,O.h-=P.h);break}}return{w:v,h:T,fill:a/(v*T)||0}}const pa=1;class xm{constructor(a,{pixelRatio:u,version:m,stretchX:v,stretchY:T,content:P,textFitWidth:I,textFitHeight:O}){this.paddedRect=a,this.pixelRatio=u,this.stretchX=v,this.stretchY=T,this.content=P,this.version=m,this.textFitWidth=I,this.textFitHeight=O}get tl(){return[this.paddedRect.x+pa,this.paddedRect.y+pa]}get br(){return[this.paddedRect.x+this.paddedRect.w-pa,this.paddedRect.y+this.paddedRect.h-pa]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*pa)/this.pixelRatio,(this.paddedRect.h-2*pa)/this.pixelRatio]}}class bm{constructor(a,u){const m={},v={};this.haveRenderCallbacks=[];const T=[];this.addImages(a,m,T),this.addImages(u,v,T);const{w:P,h:I}=sf(T),O=new yi({width:P||1,height:I||1});for(const z in a){const V=a[z],W=m[z].paddedRect;yi.copy(V.data,O,{x:0,y:0},{x:W.x+pa,y:W.y+pa},V.data)}for(const z in u){const V=u[z],W=v[z].paddedRect,Y=W.x+pa,re=W.y+pa,se=V.data.width,he=V.data.height;yi.copy(V.data,O,{x:0,y:0},{x:Y,y:re},V.data),yi.copy(V.data,O,{x:0,y:he-1},{x:Y,y:re-1},{width:se,height:1}),yi.copy(V.data,O,{x:0,y:0},{x:Y,y:re+he},{width:se,height:1}),yi.copy(V.data,O,{x:se-1,y:0},{x:Y-1,y:re},{width:1,height:he}),yi.copy(V.data,O,{x:0,y:0},{x:Y+se,y:re},{width:1,height:he})}this.image=O,this.iconPositions=m,this.patternPositions=v}addImages(a,u,m){for(const v in a){const T=a[v],P={x:0,y:0,w:T.data.width+2*pa,h:T.data.height+2*pa};m.push(P),u[v]=new xm(P,T),T.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(a,u){a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in a.updatedImages)this.patchUpdatedImage(this.iconPositions[m],a.getImage(m),u),this.patchUpdatedImage(this.patternPositions[m],a.getImage(m),u)}patchUpdatedImage(a,u,m){if(!a||!u||a.version===u.version)return;a.version=u.version;const[v,T]=a.tl;m.update(u.data,void 0,{x:v,y:T})}}var sl;Lt("ImagePosition",xm),Lt("ImageAtlas",bm),h.ah=void 0,(sl=h.ah||(h.ah={}))[sl.none=0]="none",sl[sl.horizontal=1]="horizontal",sl[sl.vertical=2]="vertical",sl[sl.horizontalOnly=3]="horizontalOnly";const Xo=-17;class lf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,u){const m=new lf;return m.scale=a||1,m.fontStack=u,m}static forImage(a){const u=new lf;return u.imageName=a,u}}class Yo{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,u){const m=new Yo;for(let v=0;v<a.sections.length;v++){const T=a.sections[v];T.image?m.addImageSection(T):m.addTextSection(T,u)}return m}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(){this.text=(function(a){let u="";for(let m=0;m<a.length;m++){const v=a.charCodeAt(m+1)||null,T=a.charCodeAt(m-1)||null;u+=v&&il(v)&&!Uu[a[m+1]]||T&&il(T)&&!Uu[a[m-1]]||!Uu[a[m]]?a[m]:Uu[a[m]]}return u})(this.text)}trim(){let a=0;for(let m=0;m<this.text.length&&wn[this.text.charCodeAt(m)];m++)a++;let u=this.text.length;for(let m=this.text.length-1;m>=0&&m>=a&&wn[this.text.charCodeAt(m)];m--)u--;this.text=this.text.substring(a,u),this.sectionIndex=this.sectionIndex.slice(a,u)}substring(a,u){const m=new Yo;return m.text=this.text.substring(a,u),m.sectionIndex=this.sectionIndex.slice(a,u),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((a,u)=>Math.max(a,this.sections[u].scale)),0)}addTextSection(a,u){this.text+=a.text,this.sections.push(lf.forText(a.scale,a.fontStack||u));const m=this.sections.length-1;for(let v=0;v<a.text.length;++v)this.sectionIndex.push(m)}addImageSection(a){const u=a.image?a.image.name:"";if(u.length===0)return void Ve("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(lf.forImage(u)),this.sectionIndex.push(this.sections.length-1)):Ve("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function uf(o,a,u,m,v,T,P,I,O,z,V,W,Y,re,se){const he=Yo.fromFeature(o,v);let _e;W===h.ah.vertical&&he.verticalizePunctuation();const{processBidirectionalText:Ae,processStyledBidirectionalText:qe}=Kr;if(Ae&&he.sections.length===1){_e=[];const tt=Ae(he.toString(),Da(he,z,T,a,m,re));for(const ft of tt){const zt=new Yo;zt.text=ft,zt.sections=he.sections;for(let rr=0;rr<ft.length;rr++)zt.sectionIndex.push(0);_e.push(zt)}}else if(qe){_e=[];const tt=qe(he.text,he.sectionIndex,Da(he,z,T,a,m,re));for(const ft of tt){const zt=new Yo;zt.text=ft[0],zt.sectionIndex=ft[1],zt.sections=he.sections,_e.push(zt)}}else _e=(function(tt,ft){const zt=[],rr=tt.text;let Rt=0;for(const kt of ft)zt.push(tt.substring(Rt,kt)),Rt=kt;return Rt<rr.length&&zt.push(tt.substring(Rt,rr.length)),zt})(he,Da(he,z,T,a,m,re));const ke=[],Ne={positionedLines:ke,text:he.toString(),top:V[1],bottom:V[1],left:V[0],right:V[0],writingMode:W,iconsInText:!1,verticalizable:!1};return(function(tt,ft,zt,rr,Rt,kt,Ht,Ut,$t,st,Kt,Gt){let hr=0,ln=Xo,nn=0,vi=0;const Es=Ut==="right"?1:Ut==="left"?0:.5;let Xi=0;for(const Fn of Rt){Fn.trim();const xi=Fn.getMaxScale(),ma=(xi-1)*yn,Yi={positionedGlyphs:[],lineOffset:0};tt.positionedLines[Xi]=Yi;const La=Yi.positionedGlyphs;let Ji=0;if(!Fn.length()){ln+=kt,++Xi;continue}for(let uo=0;uo<Fn.length();uo++){const Br=Fn.getSection(uo),dn=Fn.getSectionIndex(uo),vn=Fn.getCharCode(uo);let So=0,Rn=null,Ud=null,nu=null,iu=yn;const Cs=!($t===h.ah.horizontal||!Kt&&!Ru(vn)||Kt&&(wn[vn]||(_i=vn,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(_i)))));if(Br.imageName){const Qo=rr[Br.imageName];if(!Qo)continue;nu=Br.imageName,tt.iconsInText=tt.iconsInText||!0,Ud=Qo.paddedRect;const ki=Qo.displaySize;Br.scale=Br.scale*yn/Gt,Rn={width:ki[0],height:ki[1],left:pa,top:-Rd,advance:Cs?ki[1]:ki[0]},So=ma+(yn-ki[1]*Br.scale),iu=Rn.advance;const Hu=Cs?ki[0]*Br.scale-yn*xi:ki[1]*Br.scale-yn*xi;Hu>0&&Hu>Ji&&(Ji=Hu)}else{const Qo=zt[Br.fontStack],ki=Qo&&Qo[vn];if(ki&&ki.rect)Ud=ki.rect,Rn=ki.metrics;else{const Hu=ft[Br.fontStack],Em=Hu&&Hu[vn];if(!Em)continue;Rn=Em.metrics}So=(xi-Br.scale)*yn}Cs?(tt.verticalizable=!0,La.push({glyph:vn,imageName:nu,x:hr,y:ln+So,vertical:Cs,scale:Br.scale,fontStack:Br.fontStack,sectionIndex:dn,metrics:Rn,rect:Ud}),hr+=iu*Br.scale+st):(La.push({glyph:vn,imageName:nu,x:hr,y:ln+So,vertical:Cs,scale:Br.scale,fontStack:Br.fontStack,sectionIndex:dn,metrics:Rn,rect:Ud}),hr+=Rn.advance*Br.scale+st)}La.length!==0&&(nn=Math.max(hr-st,nn),M_(La,0,La.length-1,Es,Ji)),hr=0;const Jo=kt*xi+Ji;Yi.lineOffset=Math.max(Ji,ma),ln+=Jo,vi=Math.max(Jo,vi),++Xi}var _i;const Ra=ln-Xo,{horizontalAlign:ja,verticalAlign:za}=cf(Ht);(function(Fn,xi,ma,Yi,La,Ji,Jo,uo,Br){const dn=(xi-ma)*La;let vn=0;vn=Ji!==Jo?-uo*Yi-Xo:(-Yi*Br+.5)*Jo;for(const So of Fn)for(const Rn of So.positionedGlyphs)Rn.x+=dn,Rn.y+=vn})(tt.positionedLines,Es,ja,za,nn,vi,kt,Ra,Rt.length),tt.top+=-za*Ra,tt.bottom=tt.top+Ra,tt.left+=-ja*nn,tt.right=tt.left+nn})(Ne,a,u,m,_e,P,I,O,W,z,Y,se),!(function(tt){for(const ft of tt)if(ft.positionedGlyphs.length!==0)return!1;return!0})(ke)&&Ne}const wn={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},C_={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},jy={40:!0};function zy(o,a,u,m,v,T){if(a.imageName){const P=m[a.imageName];return P?P.displaySize[0]*a.scale*yn/T+v:0}{const P=u[a.fontStack],I=P&&P[o];return I?I.metrics.advance*a.scale+v:0}}function Ly(o,a,u,m){const v=Math.pow(o-a,2);return m?o<a?v/2:2*v:v+Math.abs(u)*u}function Ny(o,a,u){let m=0;return o===10&&(m-=1e4),u&&(m+=150),o!==40&&o!==65288||(m+=50),a!==41&&a!==65289||(m+=50),m}function wm(o,a,u,m,v,T){let P=null,I=Ly(a,u,v,T);for(const O of m){const z=Ly(a-O.x,u,v,T)+O.badness;z<=I&&(P=O,I=z)}return{index:o,x:a,priorBreak:P,badness:I}}function By(o){return o?By(o.priorBreak).concat(o.index):[]}function Da(o,a,u,m,v,T){if(!o)return[];const P=[],I=(function(W,Y,re,se,he,_e){let Ae=0;for(let qe=0;qe<W.length();qe++){const ke=W.getSection(qe);Ae+=zy(W.getCharCode(qe),ke,se,he,Y,_e)}return Ae/Math.max(1,Math.ceil(Ae/re))})(o,a,u,m,v,T),O=o.text.indexOf("")>=0;let z=0;for(let W=0;W<o.length();W++){const Y=o.getSection(W),re=o.getCharCode(W);if(wn[re]||(z+=zy(re,Y,m,v,a,T)),W<o.length()-1){const se=!((V=re)<11904)&&(!!Pr["CJK Compatibility Forms"](V)||!!Pr["CJK Compatibility"](V)||!!Pr["CJK Strokes"](V)||!!Pr["CJK Symbols and Punctuation"](V)||!!Pr["Enclosed CJK Letters and Months"](V)||!!Pr["Halfwidth and Fullwidth Forms"](V)||!!Pr["Ideographic Description Characters"](V)||!!Pr["Vertical Forms"](V)||Du.test(String.fromCodePoint(V)));(C_[re]||se||Y.imageName||W!==o.length()-2&&jy[o.getCharCode(W+1)])&&P.push(wm(W+1,z,I,P,Ny(re,o.getCharCode(W+1),se&&O),!1))}}var V;return By(wm(o.length(),z,I,P,0,!0))}function cf(o){let a=.5,u=.5;switch(o){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:a,verticalAlign:u}}function M_(o,a,u,m,v){if(!m&&!v)return;const T=o[u],P=(o[u].x+T.metrics.advance*T.scale)*m;for(let I=a;I<=u;I++)o[I].x-=P,o[I].y+=v}function eu(o,a,u){const{horizontalAlign:m,verticalAlign:v}=cf(u),T=a[0]-o.displaySize[0]*m,P=a[1]-o.displaySize[1]*v;return{image:o,top:P,bottom:P+o.displaySize[1],left:T,right:T+o.displaySize[0]}}function hf(o){var a,u;let m=o.left,v=o.top,T=o.right-m,P=o.bottom-v;const I=(a=o.image.textFitWidth)!==null&&a!==void 0?a:"stretchOrShrink",O=(u=o.image.textFitHeight)!==null&&u!==void 0?u:"stretchOrShrink",z=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(O==="proportional"){if(I==="stretchOnly"&&T/P<z||I==="proportional"){const V=Math.ceil(P*z);m*=V/T,T=V}}else if(I==="proportional"&&O==="stretchOnly"&&z!==0&&T/P>z){const V=Math.ceil(T/z);v*=V/P,P=V}return{x1:m,y1:v,x2:m+T,y2:v+P}}function tu(o,a,u,m,v,T){const P=o.image;let I;if(P.content){const _e=P.content,Ae=P.pixelRatio||1;I=[_e[0]/Ae,_e[1]/Ae,P.displaySize[0]-_e[2]/Ae,P.displaySize[1]-_e[3]/Ae]}const O=a.left*T,z=a.right*T;let V,W,Y,re;u==="width"||u==="both"?(re=v[0]+O-m[3],W=v[0]+z+m[1]):(re=v[0]+(O+z-P.displaySize[0])/2,W=re+P.displaySize[0]);const se=a.top*T,he=a.bottom*T;return u==="height"||u==="both"?(V=v[1]+se-m[0],Y=v[1]+he+m[2]):(V=v[1]+(se+he-P.displaySize[1])/2,Y=V+P.displaySize[1]),{image:P,top:V,right:W,bottom:Y,left:re,collisionPadding:I}}const ru=255,wo=128,As=ru*wo;function Fy(o,a){const{expression:u}=a;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Ar(o+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:v}=u;let T=0;for(;T<m.length&&m[T]<=o;)T++;T=Math.max(0,T-1);let P=T;for(;P<m.length&&m[P]<o+1;)P++;P=Math.min(m.length-1,P);const I=m[T],O=m[P];return u.kind==="composite"?{kind:"composite",minZoom:I,maxZoom:O,interpolationType:v}:{kind:"camera",minZoom:I,maxZoom:O,minSize:u.evaluate(new Ar(I)),maxSize:u.evaluate(new Ar(O)),interpolationType:v}}}function ff(o,a,u){let m="never";const v=o.get(a);return v?m=v:o.get(u)&&(m="always"),m}const I_=Kl.VectorTileFeature.types,$y=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function df(o,a,u,m,v,T,P,I,O,z,V,W,Y){const re=I?Math.min(As,Math.round(I[0])):0,se=I?Math.min(As,Math.round(I[1])):0;o.emplaceBack(a,u,Math.round(32*m),Math.round(32*v),T,P,(re<<1)+(O?1:0),se,16*z,16*V,256*W,256*Y)}function Gc(o,a,u){o.emplaceBack(a.x,a.y,u),o.emplaceBack(a.x,a.y,u),o.emplaceBack(a.x,a.y,u),o.emplaceBack(a.x,a.y,u)}function jd(o){for(const a of o.sections)if(bs(a.text))return!0;return!1}class zd{constructor(a){this.layoutVertexArray=new Ea,this.indexArray=new Ca,this.programConfigurations=a,this.segments=new Sr,this.dynamicLayoutVertexArray=new _o,this.opacityVertexArray=new Ci,this.hasVisibleVertices=!1,this.placedSymbolArray=new Gr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,u,m,v){this.isEmpty()||(m&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,ef.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,Vu.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,$y,!0),this.opacityVertexBuffer.itemSize=1),(m||v)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Lt("SymbolBuffers",zd);class pf{constructor(a,u,m){this.layoutVertexArray=new a,this.layoutAttributes=u,this.indexArray=new m,this.segments=new Sr,this.collisionVertexArray=new to}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,Md.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Lt("CollisionBuffers",pf);class Hc{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map((P=>P.id)),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=dd([]),this.placementViewportMatrix=dd([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Fy(this.zoom,u["text-size"]),this.iconSizeData=Fy(this.zoom,u["icon-size"]);const m=this.layers[0].layout,v=m.get("symbol-sort-key"),T=m.get("symbol-z-order");this.canOverlap=ff(m,"text-overlap","text-allow-overlap")!=="never"||ff(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=T!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(T==="viewport-y"||T==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map((P=>h.ah[P]))),this.stateDependentLayerIds=this.layers.filter((P=>P.isStateDependent())).map((P=>P.id)),this.sourceID=a.sourceID}createArrays(){this.text=new zd(new Go(this.layers,this.zoom,(a=>/^text/.test(a)))),this.icon=new zd(new Go(this.layers,this.zoom,(a=>/^icon/.test(a)))),this.glyphOffsetArray=new Xr,this.lineVertexArray=new Qn,this.symbolInstances=new _r,this.textAnchorOffsets=new Yr}calculateGlyphDependencies(a,u,m,v,T){for(let P=0;P<a.length;P++)if(u[a.charCodeAt(P)]=!0,(m||v)&&T){const I=Uu[a.charAt(P)];I&&(u[I.charCodeAt(0)]=!0)}}populate(a,u,m){const v=this.layers[0],T=v.layout,P=T.get("text-font"),I=T.get("text-field"),O=T.get("icon-image"),z=(I.value.kind!=="constant"||I.value.value instanceof Li&&!I.value.value.isEmpty()||I.value.value.toString().length>0)&&(P.value.kind!=="constant"||P.value.value.length>0),V=O.value.kind!=="constant"||!!O.value.value||Object.keys(O.parameters).length>0,W=T.get("symbol-sort-key");if(this.features=[],!z&&!V)return;const Y=u.iconDependencies,re=u.glyphDependencies,se=u.availableImages,he=new Ar(this.zoom);for(const{feature:_e,id:Ae,index:qe,sourceLayerIndex:ke}of a){const Ne=v._featureFilter.needGeometry,tt=Hl(_e,Ne);if(!v._featureFilter.filter(he,tt,m))continue;let ft,zt;if(Ne||(tt.geometry=Gl(_e)),z){const Rt=v.getValueAndResolveTokens("text-field",tt,m,se),kt=Li.factory(Rt),Ht=this.hasRTLText=this.hasRTLText||jd(kt);(!Ht||Kr.getRTLTextPluginStatus()==="unavailable"||Ht&&Kr.isParsed())&&(ft=ka(kt,v,tt))}if(V){const Rt=v.getValueAndResolveTokens("icon-image",tt,m,se);zt=Rt instanceof gi?Rt:gi.fromString(Rt)}if(!ft&&!zt)continue;const rr=this.sortFeaturesByKey?W.evaluate(tt,{},m):void 0;if(this.features.push({id:Ae,text:ft,icon:zt,index:qe,sourceLayerIndex:ke,geometry:tt.geometry,properties:_e.properties,type:I_[_e.type],sortKey:rr}),zt&&(Y[zt.name]=!0),ft){const Rt=P.evaluate(tt,{},m).join(","),kt=T.get("text-rotation-alignment")!=="viewport"&&T.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(h.ah.vertical)>=0;for(const Ht of ft.sections)if(Ht.image)Y[Ht.image.name]=!0;else{const Ut=jh(ft.toString()),$t=Ht.fontStack||Rt,st=re[$t]=re[$t]||{};this.calculateGlyphDependencies(Ht.text,st,kt,this.allowVerticalPlacement,Ut)}}}T.get("symbol-placement")==="line"&&(this.features=(function(_e){const Ae={},qe={},ke=[];let Ne=0;function tt(Rt){ke.push(_e[Rt]),Ne++}function ft(Rt,kt,Ht){const Ut=qe[Rt];return delete qe[Rt],qe[kt]=Ut,ke[Ut].geometry[0].pop(),ke[Ut].geometry[0]=ke[Ut].geometry[0].concat(Ht[0]),Ut}function zt(Rt,kt,Ht){const Ut=Ae[kt];return delete Ae[kt],Ae[Rt]=Ut,ke[Ut].geometry[0].shift(),ke[Ut].geometry[0]=Ht[0].concat(ke[Ut].geometry[0]),Ut}function rr(Rt,kt,Ht){const Ut=Ht?kt[0][kt[0].length-1]:kt[0][0];return`${Rt}:${Ut.x}:${Ut.y}`}for(let Rt=0;Rt<_e.length;Rt++){const kt=_e[Rt],Ht=kt.geometry,Ut=kt.text?kt.text.toString():null;if(!Ut){tt(Rt);continue}const $t=rr(Ut,Ht),st=rr(Ut,Ht,!0);if($t in qe&&st in Ae&&qe[$t]!==Ae[st]){const Kt=zt($t,st,Ht),Gt=ft($t,st,ke[Kt].geometry);delete Ae[$t],delete qe[st],qe[rr(Ut,ke[Gt].geometry,!0)]=Gt,ke[Kt].geometry=null}else $t in qe?ft($t,st,Ht):st in Ae?zt($t,st,Ht):(tt(Rt),Ae[$t]=Ne-1,qe[st]=Ne-1)}return ke.filter((Rt=>Rt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((_e,Ae)=>_e.sortKey-Ae.sortKey))}update(a,u,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,u,this.layers,m),this.icon.programConfigurations.updatePaintArrays(a,u,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,u){const m=this.lineVertexArray.length;if(a.segment!==void 0){let v=a.dist(u[a.segment+1]),T=a.dist(u[a.segment]);const P={};for(let I=a.segment+1;I<u.length;I++)P[I]={x:u[I].x,y:u[I].y,tileUnitDistanceFromAnchor:v},I<u.length-1&&(v+=u[I+1].dist(u[I]));for(let I=a.segment||0;I>=0;I--)P[I]={x:u[I].x,y:u[I].y,tileUnitDistanceFromAnchor:T},I>0&&(T+=u[I-1].dist(u[I]));for(let I=0;I<u.length;I++){const O=P[I];this.lineVertexArray.emplaceBack(O.x,O.y,O.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(a,u,m,v,T,P,I,O,z,V,W,Y){const re=a.indexArray,se=a.layoutVertexArray,he=a.segments.prepareSegment(4*u.length,se,re,this.canOverlap?P.sortKey:void 0),_e=this.glyphOffsetArray.length,Ae=he.vertexLength,qe=this.allowVerticalPlacement&&I===h.ah.vertical?Math.PI/2:0,ke=P.text&&P.text.sections;for(let Ne=0;Ne<u.length;Ne++){const{tl:tt,tr:ft,bl:zt,br:rr,tex:Rt,pixelOffsetTL:kt,pixelOffsetBR:Ht,minFontScaleX:Ut,minFontScaleY:$t,glyphOffset:st,isSDF:Kt,sectionIndex:Gt}=u[Ne],hr=he.vertexLength,ln=st[1];df(se,O.x,O.y,tt.x,ln+tt.y,Rt.x,Rt.y,m,Kt,kt.x,kt.y,Ut,$t),df(se,O.x,O.y,ft.x,ln+ft.y,Rt.x+Rt.w,Rt.y,m,Kt,Ht.x,kt.y,Ut,$t),df(se,O.x,O.y,zt.x,ln+zt.y,Rt.x,Rt.y+Rt.h,m,Kt,kt.x,Ht.y,Ut,$t),df(se,O.x,O.y,rr.x,ln+rr.y,Rt.x+Rt.w,Rt.y+Rt.h,m,Kt,Ht.x,Ht.y,Ut,$t),Gc(a.dynamicLayoutVertexArray,O,qe),re.emplaceBack(hr,hr+1,hr+2),re.emplaceBack(hr+1,hr+2,hr+3),he.vertexLength+=4,he.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(st[0]),Ne!==u.length-1&&Gt===u[Ne+1].sectionIndex||a.programConfigurations.populatePaintArrays(se.length,P,P.index,{},Y,ke&&ke[Gt])}a.placedSymbolArray.emplaceBack(O.x,O.y,_e,this.glyphOffsetArray.length-_e,Ae,z,V,O.segment,m?m[0]:0,m?m[1]:0,v[0],v[1],I,0,!1,0,W)}_addCollisionDebugVertex(a,u,m,v,T,P){return u.emplaceBack(0,0),a.emplaceBack(m.x,m.y,v,T,Math.round(P.x),Math.round(P.y))}addCollisionDebugVertices(a,u,m,v,T,P,I){const O=T.segments.prepareSegment(4,T.layoutVertexArray,T.indexArray),z=O.vertexLength,V=T.layoutVertexArray,W=T.collisionVertexArray,Y=I.anchorX,re=I.anchorY;this._addCollisionDebugVertex(V,W,P,Y,re,new A(a,u)),this._addCollisionDebugVertex(V,W,P,Y,re,new A(m,u)),this._addCollisionDebugVertex(V,W,P,Y,re,new A(m,v)),this._addCollisionDebugVertex(V,W,P,Y,re,new A(a,v)),O.vertexLength+=4;const se=T.indexArray;se.emplaceBack(z,z+1),se.emplaceBack(z+1,z+2),se.emplaceBack(z+2,z+3),se.emplaceBack(z+3,z),O.primitiveLength+=4}addDebugCollisionBoxes(a,u,m,v){for(let T=a;T<u;T++){const P=this.collisionBoxArray.get(T);this.addCollisionDebugVertices(P.x1,P.y1,P.x2,P.y2,v?this.textCollisionBox:this.iconCollisionBox,P.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new pf(ca,Id.members,On),this.iconCollisionBox=new pf(ca,Id.members,On);for(let a=0;a<this.symbolInstances.length;a++){const u=this.symbolInstances.get(a);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(a,u,m,v,T,P,I,O,z){const V={};for(let W=u;W<m;W++){const Y=a.get(W);V.textBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},V.textFeatureIndex=Y.featureIndex;break}for(let W=v;W<T;W++){const Y=a.get(W);V.verticalTextBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},V.verticalTextFeatureIndex=Y.featureIndex;break}for(let W=P;W<I;W++){const Y=a.get(W);V.iconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},V.iconFeatureIndex=Y.featureIndex;break}for(let W=O;W<z;W++){const Y=a.get(W);V.verticalIconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},V.verticalIconFeatureIndex=Y.featureIndex;break}return V}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const m=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,u){const m=a.placedSymbolArray.get(u),v=m.vertexStartIndex+4*m.numGlyphs;for(let T=m.vertexStartIndex;T<v;T+=4)a.indexArray.emplaceBack(T,T+1,T+2),a.indexArray.emplaceBack(T+1,T+2,T+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(a),m=Math.cos(a),v=[],T=[],P=[];for(let I=0;I<this.symbolInstances.length;++I){P.push(I);const O=this.symbolInstances.get(I);v.push(0|Math.round(u*O.anchorX+m*O.anchorY)),T.push(O.featureIndex)}return P.sort(((I,O)=>v[I]-v[O]||T[O]-T[I])),P}addToSortKeyRanges(a,u){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===u?m.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const m=this.symbolInstances.get(u);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach(((v,T,P)=>{v>=0&&P.indexOf(v)===T&&this.addIndicesForPlacedSymbol(this.text,v)})),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Sm,Ld;Lt("SymbolBucket",Hc,{omit:["layers","collisionBoxArray","features","compareText"]}),Hc.MAX_GLYPHS=65535,Hc.addDynamicAttributes=Gc;var Zc={get paint(){return Ld=Ld||new S({"icon-opacity":new Qt($e.paint_symbol["icon-opacity"]),"icon-color":new Qt($e.paint_symbol["icon-color"]),"icon-halo-color":new Qt($e.paint_symbol["icon-halo-color"]),"icon-halo-width":new Qt($e.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Qt($e.paint_symbol["icon-halo-blur"]),"icon-translate":new Nt($e.paint_symbol["icon-translate"]),"icon-translate-anchor":new Nt($e.paint_symbol["icon-translate-anchor"]),"text-opacity":new Qt($e.paint_symbol["text-opacity"]),"text-color":new Qt($e.paint_symbol["text-color"],{runtimeType:pi,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new Qt($e.paint_symbol["text-halo-color"]),"text-halo-width":new Qt($e.paint_symbol["text-halo-width"]),"text-halo-blur":new Qt($e.paint_symbol["text-halo-blur"]),"text-translate":new Nt($e.paint_symbol["text-translate"]),"text-translate-anchor":new Nt($e.paint_symbol["text-translate-anchor"])})},get layout(){return Sm=Sm||new S({"symbol-placement":new Nt($e.layout_symbol["symbol-placement"]),"symbol-spacing":new Nt($e.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Nt($e.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Qt($e.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Nt($e.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Nt($e.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Nt($e.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Nt($e.layout_symbol["icon-ignore-placement"]),"icon-optional":new Nt($e.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Nt($e.layout_symbol["icon-rotation-alignment"]),"icon-size":new Qt($e.layout_symbol["icon-size"]),"icon-text-fit":new Nt($e.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Nt($e.layout_symbol["icon-text-fit-padding"]),"icon-image":new Qt($e.layout_symbol["icon-image"]),"icon-rotate":new Qt($e.layout_symbol["icon-rotate"]),"icon-padding":new Qt($e.layout_symbol["icon-padding"]),"icon-keep-upright":new Nt($e.layout_symbol["icon-keep-upright"]),"icon-offset":new Qt($e.layout_symbol["icon-offset"]),"icon-anchor":new Qt($e.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Nt($e.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Nt($e.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Nt($e.layout_symbol["text-rotation-alignment"]),"text-field":new Qt($e.layout_symbol["text-field"]),"text-font":new Qt($e.layout_symbol["text-font"]),"text-size":new Qt($e.layout_symbol["text-size"]),"text-max-width":new Qt($e.layout_symbol["text-max-width"]),"text-line-height":new Nt($e.layout_symbol["text-line-height"]),"text-letter-spacing":new Qt($e.layout_symbol["text-letter-spacing"]),"text-justify":new Qt($e.layout_symbol["text-justify"]),"text-radial-offset":new Qt($e.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Nt($e.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Qt($e.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Qt($e.layout_symbol["text-anchor"]),"text-max-angle":new Nt($e.layout_symbol["text-max-angle"]),"text-writing-mode":new Nt($e.layout_symbol["text-writing-mode"]),"text-rotate":new Qt($e.layout_symbol["text-rotate"]),"text-padding":new Nt($e.layout_symbol["text-padding"]),"text-keep-upright":new Nt($e.layout_symbol["text-keep-upright"]),"text-transform":new Qt($e.layout_symbol["text-transform"]),"text-offset":new Qt($e.layout_symbol["text-offset"]),"text-allow-overlap":new Nt($e.layout_symbol["text-allow-overlap"]),"text-overlap":new Nt($e.layout_symbol["text-overlap"]),"text-ignore-placement":new Nt($e.layout_symbol["text-ignore-placement"]),"text-optional":new Nt($e.layout_symbol["text-optional"])})}};class Nd{constructor(a){if(a.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=a.property.overrides?a.property.overrides.runtimeType:ho,this.defaultValue=a}evaluate(a){if(a.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(a.formattedSection))return u.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Lt("FormatSectionOverride",Nd,{omit:["defaultValue"]});class Gu extends f{constructor(a){super(a,Zc)}recalculate(a,u){if(super.recalculate(a,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const v=[];for(const T of m)v.indexOf(T)<0&&v.push(T);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(a,u,m,v){const T=this.layout.get(a).evaluate(u,{},m,v),P=this._unevaluatedLayout._values[a];return P.isDataDriven()||gs(P.value)||!T?T:(function(I,O){return O.replace(/{([^{}]+)}/g,((z,V)=>I&&V in I?String(I[V]):""))})(u.properties,T)}createBucket(a){return new Hc(a)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const a of Zc.paint.overridableProperties){if(!Gu.hasPaintOverride(this.layout,a))continue;const u=this.paint.get(a),m=new Nd(u),v=new $i(m,u.property.specification);let T=null;T=u.value.kind==="constant"||u.value.kind==="source"?new Js("source",v):new Qs("composite",v,u.value.zoomStops),this.paint._values[a]=new sa(u.property,T,u.parameters)}}_handleOverridablePaintPropertyUpdate(a,u,m){return!(!this.layout||u.isDataDriven()||m.isDataDriven())&&Gu.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,u){const m=a.get("text-field"),v=Zc.paint.properties[u];let T=!1;const P=I=>{for(const O of I)if(v.overrides&&v.overrides.hasOverride(O))return void(T=!0)};if(m.value.kind==="constant"&&m.value.value instanceof Li)P(m.value.value.sections);else if(m.value.kind==="source"){const I=z=>{T||(z instanceof Wa&&Wr(z.value)===qa?P(z.value.sections):z instanceof Gs?P(z.sections):z.eachChild(I))},O=m.value;O._styleExpression&&I(O._styleExpression.expression)}return T}}let Tm;var k_={get paint(){return Tm=Tm||new S({"background-color":new Nt($e.paint_background["background-color"]),"background-pattern":new zu($e.paint_background["background-pattern"]),"background-opacity":new Nt($e.paint_background["background-opacity"])})}};class Bd extends f{constructor(a){super(a,k_)}}let Vy;var mf={get paint(){return Vy=Vy||new S({"raster-opacity":new Nt($e.paint_raster["raster-opacity"]),"raster-hue-rotate":new Nt($e.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Nt($e.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Nt($e.paint_raster["raster-brightness-max"]),"raster-saturation":new Nt($e.paint_raster["raster-saturation"]),"raster-contrast":new Nt($e.paint_raster["raster-contrast"]),"raster-resampling":new Nt($e.paint_raster["raster-resampling"]),"raster-fade-duration":new Nt($e.paint_raster["raster-fade-duration"])})}};class O_ extends f{constructor(a){super(a,mf)}}class Fd extends f{constructor(a){super(a,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class c{constructor(a){this._methodToThrottle=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const p=63710088e-1;class x{constructor(a,u){if(isNaN(a)||isNaN(u))throw new Error(`Invalid LngLat object: (${a}, ${u})`);if(this.lng=+a,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new x(X(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const u=Math.PI/180,m=this.lat*u,v=a.lat*u,T=Math.sin(m)*Math.sin(v)+Math.cos(m)*Math.cos(v)*Math.cos((a.lng-this.lng)*u);return p*Math.acos(Math.min(T,1))}static convert(a){if(a instanceof x)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new x(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new x(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const C=2*Math.PI*p;function R(o){return C*Math.cos(o*Math.PI/180)}function F(o){return(180+o)/360}function oe(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Te(o,a){return o/R(a)}function Oe(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Je{constructor(a,u,m=0){this.x=+a,this.y=+u,this.z=+m}static fromLngLat(a,u=0){const m=x.convert(a);return new Je(F(m.lng),oe(m.lat),Te(u,m.lat))}toLngLat(){return new x(360*this.x-180,Oe(this.y))}toAltitude(){return this.z*R(Oe(this.y))}meterInMercatorCoordinateUnits(){return 1/C*(a=Oe(this.y),1/Math.cos(a*Math.PI/180));var a}}function mt(o,a,u){var m=2*Math.PI*6378137/256/Math.pow(2,u);return[o*m-2*Math.PI*6378137/2,a*m-2*Math.PI*6378137/2]}class vt{constructor(a,u,m){if(!(function(v,T,P){return!(v<0||v>25||P<0||P>=Math.pow(2,v)||T<0||T>=Math.pow(2,v))})(a,u,m))throw new Error(`x=${u}, y=${m}, z=${a} outside of bounds. 0<=x<${Math.pow(2,a)}, 0<=y<${Math.pow(2,a)} 0<=z<=25 `);this.z=a,this.x=u,this.y=m,this.key=Wt(0,a,a,u,m)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,u,m){const v=(P=this.y,I=this.z,O=mt(256*(T=this.x),256*(P=Math.pow(2,I)-P-1),I),z=mt(256*(T+1),256*(P+1),I),O[0]+","+O[1]+","+z[0]+","+z[1]);var T,P,I,O,z;const V=(function(W,Y,re){let se,he="";for(let _e=W;_e>0;_e--)se=1<<_e-1,he+=(Y&se?1:0)+(re&se?2:0);return he})(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,V).replace(/{bbox-epsg-3857}/g,v)}isChildOf(a){const u=this.z-a.z;return u>0&&a.x===this.x>>u&&a.y===this.y>>u}getTilePoint(a){const u=Math.pow(2,this.z);return new A((a.x*u-this.x)*Dn,(a.y*u-this.y)*Dn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class dt{constructor(a,u){this.wrap=a,this.canonical=u,this.key=Wt(a,u.z,u.z,u.x,u.y)}}class Dt{constructor(a,u,m,v,T){if(a<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${a}; z = ${m}`);this.overscaledZ=a,this.wrap=u,this.canonical=new vt(m,+v,+T),this.key=Wt(u,a,m,v,T)}clone(){return new Dt(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-a;return a>this.canonical.z?new Dt(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Dt(a,this.wrap,a,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(a,u){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-a;return a>this.canonical.z?Wt(this.wrap*+u,a,this.canonical.z,this.canonical.x,this.canonical.y):Wt(this.wrap*+u,a,a,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(a){if(a.wrap!==this.wrap)return!1;const u=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>u&&a.canonical.y===this.canonical.y>>u}children(a){if(this.overscaledZ>=a)return[new Dt(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,m=2*this.canonical.x,v=2*this.canonical.y;return[new Dt(u,this.wrap,u,m,v),new Dt(u,this.wrap,u,m+1,v),new Dt(u,this.wrap,u,m,v+1),new Dt(u,this.wrap,u,m+1,v+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new Dt(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new Dt(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new dt(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(a){return this.canonical.getTilePoint(new Je(a.x-this.wrap,a.y))}}function Wt(o,a,u,m,v){(o*=2)<0&&(o=-1*o-1);const T=1<<u;return(T*T*o+T*v+m).toString(36)+u.toString(36)+a.toString(36)}Lt("CanonicalTileID",vt),Lt("OverscaledTileID",Dt,{omit:["posMatrix"]});class Jt{constructor(a,u,m,v=1,T=1,P=1,I=0){if(this.uid=a,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void Ve(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;const O=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=T,this.blueFactor=P,this.baseShift=I;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let z=0;z<O;z++)this.data[this._idx(-1,z)]=this.data[this._idx(0,z)],this.data[this._idx(O,z)]=this.data[this._idx(O-1,z)],this.data[this._idx(z,-1)]=this.data[this._idx(z,0)],this.data[this._idx(z,O)]=this.data[this._idx(z,O-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(O,-1)]=this.data[this._idx(O-1,0)],this.data[this._idx(-1,O)]=this.data[this._idx(0,O-1)],this.data[this._idx(O,O)]=this.data[this._idx(O-1,O-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let z=0;z<O;z++)for(let V=0;V<O;V++){const W=this.get(z,V);W>this.max&&(this.max=W),W<this.min&&(this.min=W)}}get(a,u){const m=new Uint8Array(this.data.buffer),v=4*this._idx(a,u);return this.unpack(m[v],m[v+1],m[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(a,u){if(a<-1||a>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(a+1)}unpack(a,u,m){return a*this.redFactor+u*this.greenFactor+m*this.blueFactor-this.baseShift}getPixels(){return new yi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(a,u,m){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let v=u*this.dim,T=u*this.dim+this.dim,P=m*this.dim,I=m*this.dim+this.dim;switch(u){case-1:v=T-1;break;case 1:T=v+1}switch(m){case-1:P=I-1;break;case 1:I=P+1}const O=-u*this.dim,z=-m*this.dim;for(let V=P;V<I;V++)for(let W=v;W<T;W++)this.data[this._idx(W,V)]=a.data[this._idx(W+O,V+z)]}}Lt("DEMData",Jt);class Bn{constructor(a){this._stringToNumber={},this._numberToString=[];for(let u=0;u<a.length;u++){const m=a[u];this._stringToNumber[m]=u,this._numberToString[u]=m}}encode(a){return this._stringToNumber[a]}decode(a){if(a>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${a} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[a]}}class He{constructor(a,u,m,v,T){this.type="Feature",this._vectorTileFeature=a,a._z=u,a._x=m,a._y=v,this.properties=a.properties,this.id=T}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(a[u]=this[u]);return a}}class je{constructor(a,u){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new Nl(Dn,16,0),this.grid3D=new Nl(Dn,16,0),this.featureIndexArray=new sn,this.promoteId=u}insert(a,u,m,v,T,P){const I=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,v,T);const O=P?this.grid3D:this.grid;for(let z=0;z<u.length;z++){const V=u[z],W=[1/0,1/0,-1/0,-1/0];for(let Y=0;Y<V.length;Y++){const re=V[Y];W[0]=Math.min(W[0],re.x),W[1]=Math.min(W[1],re.y),W[2]=Math.max(W[2],re.x),W[3]=Math.max(W[3],re.y)}W[0]<Dn&&W[1]<Dn&&W[2]>=0&&W[3]>=0&&O.insert(I,W[0],W[1],W[2],W[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Kl.VectorTile(new ol(this.rawTileData)).layers,this.sourceLayerCoder=new Bn(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(a,u,m,v){this.loadVTLayers();const T=a.params||{},P=Dn/a.tileSize/a.scale,I=Eu(T.filter),O=a.queryGeometry,z=a.queryPadding*P,V=Ct(O),W=this.grid.query(V.minX-z,V.minY-z,V.maxX+z,V.maxY+z),Y=Ct(a.cameraQueryGeometry),re=this.grid3D.query(Y.minX-z,Y.minY-z,Y.maxX+z,Y.maxY+z,((_e,Ae,qe,ke)=>(function(Ne,tt,ft,zt,rr){for(const kt of Ne)if(tt<=kt.x&&ft<=kt.y&&zt>=kt.x&&rr>=kt.y)return!0;const Rt=[new A(tt,ft),new A(tt,rr),new A(zt,rr),new A(zt,ft)];if(Ne.length>2){for(const kt of Rt)if(Lu(Ne,kt))return!0}for(let kt=0;kt<Ne.length-1;kt++)if(oy(Ne[kt],Ne[kt+1],Rt))return!0;return!1})(a.cameraQueryGeometry,_e-z,Ae-z,qe+z,ke+z)));for(const _e of re)W.push(_e);W.sort(er);const se={};let he;for(let _e=0;_e<W.length;_e++){const Ae=W[_e];if(Ae===he)continue;he=Ae;const qe=this.featureIndexArray.get(Ae);let ke=null;this.loadMatchingFeature(se,qe.bucketIndex,qe.sourceLayerIndex,qe.featureIndex,I,T.layers,T.availableImages,u,m,v,((Ne,tt,ft)=>(ke||(ke=Gl(Ne)),tt.queryIntersectsFeature(O,Ne,ft,ke,this.z,a.transform,P,a.pixelPosMatrix))))}return se}loadMatchingFeature(a,u,m,v,T,P,I,O,z,V,W){const Y=this.bucketLayerIDs[u];if(P&&!(function(_e,Ae){for(let qe=0;qe<_e.length;qe++)if(Ae.indexOf(_e[qe])>=0)return!0;return!1})(P,Y))return;const re=this.sourceLayerCoder.decode(m),se=this.vtLayers[re].feature(v);if(T.needGeometry){const _e=Hl(se,!0);if(!T.filter(new Ar(this.tileID.overscaledZ),_e,this.tileID.canonical))return}else if(!T.filter(new Ar(this.tileID.overscaledZ),se))return;const he=this.getId(se,re);for(let _e=0;_e<Y.length;_e++){const Ae=Y[_e];if(P&&P.indexOf(Ae)<0)continue;const qe=O[Ae];if(!qe)continue;let ke={};he&&V&&(ke=V.getState(qe.sourceLayer||"_geojsonTileLayer",he));const Ne=le({},z[Ae]);Ne.paint=Xe(Ne.paint,qe.paint,se,ke,I),Ne.layout=Xe(Ne.layout,qe.layout,se,ke,I);const tt=!W||W(se,qe,ke);if(!tt)continue;const ft=new He(se,this.z,this.x,this.y,he);ft.layer=Ne;let zt=a[Ae];zt===void 0&&(zt=a[Ae]=[]),zt.push({featureIndex:v,feature:ft,intersectionZ:tt})}}lookupSymbolFeatures(a,u,m,v,T,P,I,O){const z={};this.loadVTLayers();const V=Eu(T);for(const W of a)this.loadMatchingFeature(z,m,v,W,V,P,I,O,u);return z}hasLayer(a){for(const u of this.bucketLayerIDs)for(const m of u)if(a===m)return!0;return!1}getId(a,u){let m=a.id;return this.promoteId&&(m=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof m=="boolean"&&(m=Number(m))),m}}function Xe(o,a,u,m,v){return Pe(o,((T,P)=>{const I=a instanceof $l?a.get(P):null;return I&&I.evaluate?I.evaluate(u,m,v):I}))}function Ct(o){let a=1/0,u=1/0,m=-1/0,v=-1/0;for(const T of o)a=Math.min(a,T.x),u=Math.min(u,T.y),m=Math.max(m,T.x),v=Math.max(v,T.y);return{minX:a,minY:u,maxX:m,maxY:v}}function er(o,a){return a-o}function sr(o,a,u,m,v){const T=[];for(let P=0;P<o.length;P++){const I=o[P];let O;for(let z=0;z<I.length-1;z++){let V=I[z],W=I[z+1];V.x<a&&W.x<a||(V.x<a?V=new A(a,V.y+(a-V.x)/(W.x-V.x)*(W.y-V.y))._round():W.x<a&&(W=new A(a,V.y+(a-V.x)/(W.x-V.x)*(W.y-V.y))._round()),V.y<u&&W.y<u||(V.y<u?V=new A(V.x+(u-V.y)/(W.y-V.y)*(W.x-V.x),u)._round():W.y<u&&(W=new A(V.x+(u-V.y)/(W.y-V.y)*(W.x-V.x),u)._round()),V.x>=m&&W.x>=m||(V.x>=m?V=new A(m,V.y+(m-V.x)/(W.x-V.x)*(W.y-V.y))._round():W.x>=m&&(W=new A(m,V.y+(m-V.x)/(W.x-V.x)*(W.y-V.y))._round()),V.y>=v&&W.y>=v||(V.y>=v?V=new A(V.x+(v-V.y)/(W.y-V.y)*(W.x-V.x),v)._round():W.y>=v&&(W=new A(V.x+(v-V.y)/(W.y-V.y)*(W.x-V.x),v)._round()),O&&V.equals(O[O.length-1])||(O=[V],T.push(O)),O.push(W)))))}}return T}Lt("FeatureIndex",je,{omit:["rawTileData","sourceLayerCoder"]});class tr extends A{constructor(a,u,m,v){super(a,u),this.angle=m,v!==void 0&&(this.segment=v)}clone(){return new tr(this.x,this.y,this.angle,this.segment)}}function pr(o,a,u,m,v){if(a.segment===void 0||u===0)return!0;let T=a,P=a.segment+1,I=0;for(;I>-u/2;){if(P--,P<0)return!1;I-=o[P].dist(T),T=o[P]}I+=o[P].dist(o[P+1]),P++;const O=[];let z=0;for(;I<u/2;){const V=o[P],W=o[P+1];if(!W)return!1;let Y=o[P-1].angleTo(V)-V.angleTo(W);for(Y=Math.abs((Y+3*Math.PI)%(2*Math.PI)-Math.PI),O.push({distance:I,angleDelta:Y}),z+=Y;I-O[0].distance>m;)z-=O.shift().angleDelta;if(z>v)return!1;P++,I+=V.dist(W)}return!0}function ci(o){let a=0;for(let u=0;u<o.length-1;u++)a+=o[u].dist(o[u+1]);return a}function Ur(o,a,u){return o?.6*a*u:0}function ll(o,a){return Math.max(o?o.right-o.left:0,a?a.right-a.left:0)}function D_(o,a,u,m,v,T){const P=Ur(u,v,T),I=ll(u,m)*T;let O=0;const z=ci(o)/2;for(let V=0;V<o.length-1;V++){const W=o[V],Y=o[V+1],re=W.dist(Y);if(O+re>z){const se=(z-O)/re,he=kn.number(W.x,Y.x,se),_e=kn.number(W.y,Y.y,se),Ae=new tr(he,_e,Y.angleTo(W),V);return Ae._round(),!P||pr(o,Ae,I,P,a)?Ae:void 0}O+=re}}function Fj(o,a,u,m,v,T,P,I,O){const z=Ur(m,T,P),V=ll(m,v),W=V*P,Y=o[0].x===0||o[0].x===O||o[0].y===0||o[0].y===O;return a-W<a/4&&(a=W+a/4),ZP(o,Y?a/2*I%a:(V/2+2*T)*P*I%a,a,z,u,W,Y,!1,O)}function ZP(o,a,u,m,v,T,P,I,O){const z=T/2,V=ci(o);let W=0,Y=a-u,re=[];for(let se=0;se<o.length-1;se++){const he=o[se],_e=o[se+1],Ae=he.dist(_e),qe=_e.angleTo(he);for(;Y+u<W+Ae;){Y+=u;const ke=(Y-W)/Ae,Ne=kn.number(he.x,_e.x,ke),tt=kn.number(he.y,_e.y,ke);if(Ne>=0&&Ne<O&&tt>=0&&tt<O&&Y-z>=0&&Y+z<=V){const ft=new tr(Ne,tt,qe,se);ft._round(),m&&!pr(o,ft,T,m,v)||re.push(ft)}}W+=Ae}return I||re.length||P||(re=ZP(o,W/2,u,m,v,T,P,!0,O)),re}Lt("Anchor",tr);const $d=pa;function KP(o,a,u,m){const v=[],T=o.image,P=T.pixelRatio,I=T.paddedRect.w-2*$d,O=T.paddedRect.h-2*$d;let z={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};const V=T.stretchX||[[0,I]],W=T.stretchY||[[0,O]],Y=(st,Kt)=>st+Kt[1]-Kt[0],re=V.reduce(Y,0),se=W.reduce(Y,0),he=I-re,_e=O-se;let Ae=0,qe=re,ke=0,Ne=se,tt=0,ft=he,zt=0,rr=_e;if(T.content&&m){const st=T.content,Kt=st[2]-st[0],Gt=st[3]-st[1];(T.textFitWidth||T.textFitHeight)&&(z=hf(o)),Ae=Uy(V,0,st[0]),ke=Uy(W,0,st[1]),qe=Uy(V,st[0],st[2]),Ne=Uy(W,st[1],st[3]),tt=st[0]-Ae,zt=st[1]-ke,ft=Kt-qe,rr=Gt-Ne}const Rt=z.x1,kt=z.y1,Ht=z.x2-Rt,Ut=z.y2-kt,$t=(st,Kt,Gt,hr)=>{const ln=qy(st.stretch-Ae,qe,Ht,Rt),nn=Wy(st.fixed-tt,ft,st.stretch,re),vi=qy(Kt.stretch-ke,Ne,Ut,kt),Es=Wy(Kt.fixed-zt,rr,Kt.stretch,se),Xi=qy(Gt.stretch-Ae,qe,Ht,Rt),_i=Wy(Gt.fixed-tt,ft,Gt.stretch,re),Ra=qy(hr.stretch-ke,Ne,Ut,kt),ja=Wy(hr.fixed-zt,rr,hr.stretch,se),za=new A(ln,vi),Fn=new A(Xi,vi),xi=new A(Xi,Ra),ma=new A(ln,Ra),Yi=new A(nn/P,Es/P),La=new A(_i/P,ja/P),Ji=a*Math.PI/180;if(Ji){const Br=Math.sin(Ji),dn=Math.cos(Ji),vn=[dn,-Br,Br,dn];za._matMult(vn),Fn._matMult(vn),ma._matMult(vn),xi._matMult(vn)}const Jo=st.stretch+st.fixed,uo=Kt.stretch+Kt.fixed;return{tl:za,tr:Fn,bl:ma,br:xi,tex:{x:T.paddedRect.x+$d+Jo,y:T.paddedRect.y+$d+uo,w:Gt.stretch+Gt.fixed-Jo,h:hr.stretch+hr.fixed-uo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Yi,pixelOffsetBR:La,minFontScaleX:ft/P/Ht,minFontScaleY:rr/P/Ut,isSDF:u}};if(m&&(T.stretchX||T.stretchY)){const st=XP(V,he,re),Kt=XP(W,_e,se);for(let Gt=0;Gt<st.length-1;Gt++){const hr=st[Gt],ln=st[Gt+1];for(let nn=0;nn<Kt.length-1;nn++)v.push($t(hr,Kt[nn],ln,Kt[nn+1]))}}else v.push($t({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:I+1},{fixed:0,stretch:O+1}));return v}function Uy(o,a,u){let m=0;for(const v of o)m+=Math.max(a,Math.min(u,v[1]))-Math.max(a,Math.min(u,v[0]));return m}function XP(o,a,u){const m=[{fixed:-$d,stretch:0}];for(const[v,T]of o){const P=m[m.length-1];m.push({fixed:v-P.stretch,stretch:P.stretch}),m.push({fixed:v-P.stretch,stretch:P.stretch+(T-v)})}return m.push({fixed:a+$d,stretch:u}),m}function qy(o,a,u,m){return o/a*u+m}function Wy(o,a,u,m){return o-a*u/m}class Gy{constructor(a,u,m,v,T,P,I,O,z,V){var W;if(this.boxStartIndex=a.length,z){let Y=P.top,re=P.bottom;const se=P.collisionPadding;se&&(Y-=se[1],re+=se[3]);let he=re-Y;he>0&&(he=Math.max(10,he),this.circleDiameter=he)}else{const Y=!((W=P.image)===null||W===void 0)&&W.content&&(P.image.textFitWidth||P.image.textFitHeight)?hf(P):{x1:P.left,y1:P.top,x2:P.right,y2:P.bottom};Y.y1=Y.y1*I-O[0],Y.y2=Y.y2*I+O[2],Y.x1=Y.x1*I-O[3],Y.x2=Y.x2*I+O[1];const re=P.collisionPadding;if(re&&(Y.x1-=re[0]*I,Y.y1-=re[1]*I,Y.x2+=re[2]*I,Y.y2+=re[3]*I),V){const se=new A(Y.x1,Y.y1),he=new A(Y.x2,Y.y1),_e=new A(Y.x1,Y.y2),Ae=new A(Y.x2,Y.y2),qe=V*Math.PI/180;se._rotate(qe),he._rotate(qe),_e._rotate(qe),Ae._rotate(qe),Y.x1=Math.min(se.x,he.x,_e.x,Ae.x),Y.x2=Math.max(se.x,he.x,_e.x,Ae.x),Y.y1=Math.min(se.y,he.y,_e.y,Ae.y),Y.y2=Math.max(se.y,he.y,_e.y,Ae.y)}a.emplaceBack(u.x,u.y,Y.x1,Y.y1,Y.x2,Y.y2,m,v,T)}this.boxEndIndex=a.length}}class $j{constructor(a=[],u=((m,v)=>m<v?-1:m>v?1:0)){if(this.data=a,this.length=this.data.length,this.compare=u,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;const a=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:u,compare:m}=this,v=u[a];for(;a>0;){const T=a-1>>1,P=u[T];if(m(v,P)>=0)break;u[a]=P,a=T}u[a]=v}_down(a){const{data:u,compare:m}=this,v=this.length>>1,T=u[a];for(;a<v;){let P=1+(a<<1);const I=P+1;if(I<this.length&&m(u[I],u[P])<0&&(P=I),m(u[P],T)>=0)break;u[a]=u[P],a=P}u[a]=T}}function Vj(o,a=1,u=!1){let m=1/0,v=1/0,T=-1/0,P=-1/0;const I=o[0];for(let re=0;re<I.length;re++){const se=I[re];(!re||se.x<m)&&(m=se.x),(!re||se.y<v)&&(v=se.y),(!re||se.x>T)&&(T=se.x),(!re||se.y>P)&&(P=se.y)}const O=Math.min(T-m,P-v);let z=O/2;const V=new $j([],Uj);if(O===0)return new A(m,v);for(let re=m;re<T;re+=O)for(let se=v;se<P;se+=O)V.push(new Vd(re+z,se+z,z,o));let W=(function(re){let se=0,he=0,_e=0;const Ae=re[0];for(let qe=0,ke=Ae.length,Ne=ke-1;qe<ke;Ne=qe++){const tt=Ae[qe],ft=Ae[Ne],zt=tt.x*ft.y-ft.x*tt.y;he+=(tt.x+ft.x)*zt,_e+=(tt.y+ft.y)*zt,se+=3*zt}return new Vd(he/se,_e/se,0,re)})(o),Y=V.length;for(;V.length;){const re=V.pop();(re.d>W.d||!W.d)&&(W=re,u&&console.log("found best %d after %d probes",Math.round(1e4*re.d)/1e4,Y)),re.max-W.d<=a||(z=re.h/2,V.push(new Vd(re.p.x-z,re.p.y-z,z,o)),V.push(new Vd(re.p.x+z,re.p.y-z,z,o)),V.push(new Vd(re.p.x-z,re.p.y+z,z,o)),V.push(new Vd(re.p.x+z,re.p.y+z,z,o)),Y+=4)}return u&&(console.log(`num probes: ${Y}`),console.log(`best distance: ${W.d}`)),W.p}function Uj(o,a){return a.max-o.max}function Vd(o,a,u,m){this.p=new A(o,a),this.h=u,this.d=(function(v,T){let P=!1,I=1/0;for(let O=0;O<T.length;O++){const z=T[O];for(let V=0,W=z.length,Y=W-1;V<W;Y=V++){const re=z[V],se=z[Y];re.y>v.y!=se.y>v.y&&v.x<(se.x-re.x)*(v.y-re.y)/(se.y-re.y)+re.x&&(P=!P),I=Math.min(I,im(v,re,se))}}return(P?1:-1)*Math.sqrt(I)})(this.p,m),this.max=this.d+this.h*Math.SQRT2}var Ki;h.aq=void 0,(Ki=h.aq||(h.aq={}))[Ki.center=1]="center",Ki[Ki.left=2]="left",Ki[Ki.right=3]="right",Ki[Ki.top=4]="top",Ki[Ki.bottom=5]="bottom",Ki[Ki["top-left"]=6]="top-left",Ki[Ki["top-right"]=7]="top-right",Ki[Ki["bottom-left"]=8]="bottom-left",Ki[Ki["bottom-right"]=9]="bottom-right";const Kc=7,R_=Number.POSITIVE_INFINITY;function YP(o,a){return a[1]!==R_?(function(u,m,v){let T=0,P=0;switch(m=Math.abs(m),v=Math.abs(v),u){case"top-right":case"top-left":case"top":P=v-Kc;break;case"bottom-right":case"bottom-left":case"bottom":P=-v+Kc}switch(u){case"top-right":case"bottom-right":case"right":T=-m;break;case"top-left":case"bottom-left":case"left":T=m}return[T,P]})(o,a[0],a[1]):(function(u,m){let v=0,T=0;m<0&&(m=0);const P=m/Math.SQRT2;switch(u){case"top-right":case"top-left":T=P-Kc;break;case"bottom-right":case"bottom-left":T=-P+Kc;break;case"bottom":T=-m+Kc;break;case"top":T=m-Kc}switch(u){case"top-right":case"bottom-right":v=-P;break;case"top-left":case"bottom-left":v=P;break;case"left":v=m;break;case"right":v=-m}return[v,T]})(o,a[0])}function JP(o,a,u){var m;const v=o.layout,T=(m=v.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(a,{},u);if(T){const I=T.values,O=[];for(let z=0;z<I.length;z+=2){const V=O[z]=I[z],W=I[z+1].map((Y=>Y*yn));V.startsWith("top")?W[1]-=Kc:V.startsWith("bottom")&&(W[1]+=Kc),O[z+1]=W}return new ia(O)}const P=v.get("text-variable-anchor");if(P){let I;I=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(a,{},u)*yn,R_]:v.get("text-offset").evaluate(a,{},u).map((z=>z*yn));const O=[];for(const z of P)O.push(z,YP(z,I));return new ia(O)}return null}function j_(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function qj(o,a,u,m,v,T,P,I,O,z,V){let W=T.textMaxSize.evaluate(a,{});W===void 0&&(W=P);const Y=o.layers[0].layout,re=Y.get("icon-offset").evaluate(a,{},V),se=eA(u.horizontal),he=P/24,_e=o.tilePixelRatio*he,Ae=o.tilePixelRatio*W/24,qe=o.tilePixelRatio*I,ke=o.tilePixelRatio*Y.get("symbol-spacing"),Ne=Y.get("text-padding")*o.tilePixelRatio,tt=(function(st,Kt,Gt,hr=1){const ln=st.get("icon-padding").evaluate(Kt,{},Gt),nn=ln&&ln.values;return[nn[0]*hr,nn[1]*hr,nn[2]*hr,nn[3]*hr]})(Y,a,V,o.tilePixelRatio),ft=Y.get("text-max-angle")/180*Math.PI,zt=Y.get("text-rotation-alignment")!=="viewport"&&Y.get("symbol-placement")!=="point",rr=Y.get("icon-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",Rt=Y.get("symbol-placement"),kt=ke/2,Ht=Y.get("icon-text-fit");let Ut;m&&Ht!=="none"&&(o.allowVerticalPlacement&&u.vertical&&(Ut=tu(m,u.vertical,Ht,Y.get("icon-text-fit-padding"),re,he)),se&&(m=tu(m,se,Ht,Y.get("icon-text-fit-padding"),re,he)));const $t=(st,Kt)=>{Kt.x<0||Kt.x>=Dn||Kt.y<0||Kt.y>=Dn||(function(Gt,hr,ln,nn,vi,Es,Xi,_i,Ra,ja,za,Fn,xi,ma,Yi,La,Ji,Jo,uo,Br,dn,vn,So,Rn,Ud){const nu=Gt.addToLineVertexArray(hr,ln);let iu,Cs,Qo,ki,Hu=0,Em=0,iA=0,aA=0,U_=-1,q_=-1;const Zu={};let oA=Ul("");if(Gt.allowVerticalPlacement&&nn.vertical){const ga=_i.layout.get("text-rotate").evaluate(dn,{},Rn)+90;Qo=new Gy(Ra,hr,ja,za,Fn,nn.vertical,xi,ma,Yi,ga),Xi&&(ki=new Gy(Ra,hr,ja,za,Fn,Xi,Ji,Jo,Yi,ga))}if(vi){const ga=_i.layout.get("icon-rotate").evaluate(dn,{}),es=_i.layout.get("icon-text-fit")!=="none",gf=KP(vi,ga,So,es),cl=Xi?KP(Xi,ga,So,es):void 0;Cs=new Gy(Ra,hr,ja,za,Fn,vi,Ji,Jo,!1,ga),Hu=4*gf.length;const yf=Gt.iconSizeData;let au=null;yf.kind==="source"?(au=[wo*_i.layout.get("icon-size").evaluate(dn,{})],au[0]>As&&Ve(`${Gt.layerIds[0]}: Value for "icon-size" is >= ${ru}. Reduce your "icon-size".`)):yf.kind==="composite"&&(au=[wo*vn.compositeIconSizes[0].evaluate(dn,{},Rn),wo*vn.compositeIconSizes[1].evaluate(dn,{},Rn)],(au[0]>As||au[1]>As)&&Ve(`${Gt.layerIds[0]}: Value for "icon-size" is >= ${ru}. Reduce your "icon-size".`)),Gt.addSymbols(Gt.icon,gf,au,Br,uo,dn,h.ah.none,hr,nu.lineStartIndex,nu.lineLength,-1,Rn),U_=Gt.icon.placedSymbolArray.length-1,cl&&(Em=4*cl.length,Gt.addSymbols(Gt.icon,cl,au,Br,uo,dn,h.ah.vertical,hr,nu.lineStartIndex,nu.lineLength,-1,Rn),q_=Gt.icon.placedSymbolArray.length-1)}const sA=Object.keys(nn.horizontal);for(const ga of sA){const es=nn.horizontal[ga];if(!iu){oA=Ul(es.text);const cl=_i.layout.get("text-rotate").evaluate(dn,{},Rn);iu=new Gy(Ra,hr,ja,za,Fn,es,xi,ma,Yi,cl)}const gf=es.positionedLines.length===1;if(iA+=QP(Gt,hr,es,Es,_i,Yi,dn,La,nu,nn.vertical?h.ah.horizontal:h.ah.horizontalOnly,gf?sA:[ga],Zu,U_,vn,Rn),gf)break}nn.vertical&&(aA+=QP(Gt,hr,nn.vertical,Es,_i,Yi,dn,La,nu,h.ah.vertical,["vertical"],Zu,q_,vn,Rn));const Hj=iu?iu.boxStartIndex:Gt.collisionBoxArray.length,Zj=iu?iu.boxEndIndex:Gt.collisionBoxArray.length,Kj=Qo?Qo.boxStartIndex:Gt.collisionBoxArray.length,Xj=Qo?Qo.boxEndIndex:Gt.collisionBoxArray.length,Yj=Cs?Cs.boxStartIndex:Gt.collisionBoxArray.length,Jj=Cs?Cs.boxEndIndex:Gt.collisionBoxArray.length,Qj=ki?ki.boxStartIndex:Gt.collisionBoxArray.length,ez=ki?ki.boxEndIndex:Gt.collisionBoxArray.length;let ul=-1;const Zy=(ga,es)=>ga&&ga.circleDiameter?Math.max(ga.circleDiameter,es):es;ul=Zy(iu,ul),ul=Zy(Qo,ul),ul=Zy(Cs,ul),ul=Zy(ki,ul);const lA=ul>-1?1:0;lA&&(ul*=Ud/yn),Gt.glyphOffsetArray.length>=Hc.MAX_GLYPHS&&Ve("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),dn.sortKey!==void 0&&Gt.addToSortKeyRanges(Gt.symbolInstances.length,dn.sortKey);const tz=JP(_i,dn,Rn),[rz,nz]=(function(ga,es){const gf=ga.length,cl=es==null?void 0:es.values;if((cl==null?void 0:cl.length)>0)for(let yf=0;yf<cl.length;yf+=2){const au=cl[yf+1];ga.emplaceBack(h.aq[cl[yf]],au[0],au[1])}return[gf,ga.length]})(Gt.textAnchorOffsets,tz);Gt.symbolInstances.emplaceBack(hr.x,hr.y,Zu.right>=0?Zu.right:-1,Zu.center>=0?Zu.center:-1,Zu.left>=0?Zu.left:-1,Zu.vertical||-1,U_,q_,oA,Hj,Zj,Kj,Xj,Yj,Jj,Qj,ez,ja,iA,aA,Hu,Em,lA,0,xi,ul,rz,nz)})(o,Kt,st,u,m,v,Ut,o.layers[0],o.collisionBoxArray,a.index,a.sourceLayerIndex,o.index,_e,[Ne,Ne,Ne,Ne],zt,O,qe,tt,rr,re,a,T,z,V,P)};if(Rt==="line")for(const st of sr(a.geometry,0,0,Dn,Dn)){const Kt=Fj(st,ke,ft,u.vertical||se,m,24,Ae,o.overscaling,Dn);for(const Gt of Kt)se&&Wj(o,se.text,kt,Gt)||$t(st,Gt)}else if(Rt==="line-center"){for(const st of a.geometry)if(st.length>1){const Kt=D_(st,ft,u.vertical||se,m,24,Ae);Kt&&$t(st,Kt)}}else if(a.type==="Polygon")for(const st of Al(a.geometry,0)){const Kt=Vj(st,16);$t(st[0],new tr(Kt.x,Kt.y,0))}else if(a.type==="LineString")for(const st of a.geometry)$t(st,new tr(st[0].x,st[0].y,0));else if(a.type==="Point")for(const st of a.geometry)for(const Kt of st)$t([Kt],new tr(Kt.x,Kt.y,0))}function QP(o,a,u,m,v,T,P,I,O,z,V,W,Y,re,se){const he=(function(qe,ke,Ne,tt,ft,zt,rr,Rt){const kt=tt.layout.get("text-rotate").evaluate(zt,{})*Math.PI/180,Ht=[];for(const Ut of ke.positionedLines)for(const $t of Ut.positionedGlyphs){if(!$t.rect)continue;const st=$t.rect||{};let Kt=Rd+1,Gt=!0,hr=1,ln=0;const nn=(ft||Rt)&&$t.vertical,vi=$t.metrics.advance*$t.scale/2;if(Rt&&ke.verticalizable&&(ln=Ut.lineOffset/2-($t.imageName?-(yn-$t.metrics.width*$t.scale)/2:($t.scale-1)*yn)),$t.imageName){const Br=rr[$t.imageName];Gt=Br.sdf,hr=Br.pixelRatio,Kt=pa/hr}const Es=ft?[$t.x+vi,$t.y]:[0,0];let Xi=ft?[0,0]:[$t.x+vi+Ne[0],$t.y+Ne[1]-ln],_i=[0,0];nn&&(_i=Xi,Xi=[0,0]);const Ra=$t.metrics.isDoubleResolution?2:1,ja=($t.metrics.left-Kt)*$t.scale-vi+Xi[0],za=(-$t.metrics.top-Kt)*$t.scale+Xi[1],Fn=ja+st.w/Ra*$t.scale/hr,xi=za+st.h/Ra*$t.scale/hr,ma=new A(ja,za),Yi=new A(Fn,za),La=new A(ja,xi),Ji=new A(Fn,xi);if(nn){const Br=new A(-vi,vi-Xo),dn=-Math.PI/2,vn=yn/2-vi,So=new A(5-Xo-vn,-($t.imageName?vn:0)),Rn=new A(..._i);ma._rotateAround(dn,Br)._add(So)._add(Rn),Yi._rotateAround(dn,Br)._add(So)._add(Rn),La._rotateAround(dn,Br)._add(So)._add(Rn),Ji._rotateAround(dn,Br)._add(So)._add(Rn)}if(kt){const Br=Math.sin(kt),dn=Math.cos(kt),vn=[dn,-Br,Br,dn];ma._matMult(vn),Yi._matMult(vn),La._matMult(vn),Ji._matMult(vn)}const Jo=new A(0,0),uo=new A(0,0);Ht.push({tl:ma,tr:Yi,bl:La,br:Ji,tex:st,writingMode:ke.writingMode,glyphOffset:Es,sectionIndex:$t.sectionIndex,isSDF:Gt,pixelOffsetTL:Jo,pixelOffsetBR:uo,minFontScaleX:0,minFontScaleY:0})}return Ht})(0,u,I,v,T,P,m,o.allowVerticalPlacement),_e=o.textSizeData;let Ae=null;_e.kind==="source"?(Ae=[wo*v.layout.get("text-size").evaluate(P,{})],Ae[0]>As&&Ve(`${o.layerIds[0]}: Value for "text-size" is >= ${ru}. Reduce your "text-size".`)):_e.kind==="composite"&&(Ae=[wo*re.compositeTextSizes[0].evaluate(P,{},se),wo*re.compositeTextSizes[1].evaluate(P,{},se)],(Ae[0]>As||Ae[1]>As)&&Ve(`${o.layerIds[0]}: Value for "text-size" is >= ${ru}. Reduce your "text-size".`)),o.addSymbols(o.text,he,Ae,I,T,P,z,a,O.lineStartIndex,O.lineLength,Y,se);for(const qe of V)W[qe]=o.text.placedSymbolArray.length-1;return 4*he.length}function eA(o){for(const a in o)return o[a];return null}function Wj(o,a,u,m){const v=o.compareText;if(a in v){const T=v[a];for(let P=T.length-1;P>=0;P--)if(m.dist(T[P])<u)return!0}else v[a]=[];return v[a].push(m),!1}const tA=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class z_{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,m]=new Uint8Array(a,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=m>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const T=tA[15&m];if(!T)throw new Error("Unrecognized array type.");const[P]=new Uint16Array(a,2,1),[I]=new Uint32Array(a,4,1);return new z_(I,P,T,a)}constructor(a,u=64,m=Float64Array,v){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=m,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;const T=tA.indexOf(this.ArrayType),P=2*a*this.ArrayType.BYTES_PER_ELEMENT,I=a*this.IndexArrayType.BYTES_PER_ELEMENT,O=(8-I%8)%8;if(T<0)throw new Error(`Unexpected typed array class: ${m}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+I+O,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+P+I+O),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+I+O,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+T]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=a)}add(a,u){const m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=a,this.coords[this._pos++]=u,m}finish(){const a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return L_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,u,m,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:T,coords:P,nodeSize:I}=this,O=[0,T.length-1,0],z=[];for(;O.length;){const V=O.pop()||0,W=O.pop()||0,Y=O.pop()||0;if(W-Y<=I){for(let _e=Y;_e<=W;_e++){const Ae=P[2*_e],qe=P[2*_e+1];Ae>=a&&Ae<=m&&qe>=u&&qe<=v&&z.push(T[_e])}continue}const re=Y+W>>1,se=P[2*re],he=P[2*re+1];se>=a&&se<=m&&he>=u&&he<=v&&z.push(T[re]),(V===0?a<=se:u<=he)&&(O.push(Y),O.push(re-1),O.push(1-V)),(V===0?m>=se:v>=he)&&(O.push(re+1),O.push(W),O.push(1-V))}return z}within(a,u,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:T,nodeSize:P}=this,I=[0,v.length-1,0],O=[],z=m*m;for(;I.length;){const V=I.pop()||0,W=I.pop()||0,Y=I.pop()||0;if(W-Y<=P){for(let _e=Y;_e<=W;_e++)nA(T[2*_e],T[2*_e+1],a,u)<=z&&O.push(v[_e]);continue}const re=Y+W>>1,se=T[2*re],he=T[2*re+1];nA(se,he,a,u)<=z&&O.push(v[re]),(V===0?a-m<=se:u-m<=he)&&(I.push(Y),I.push(re-1),I.push(1-V)),(V===0?a+m>=se:u+m>=he)&&(I.push(re+1),I.push(W),I.push(1-V))}return O}}function L_(o,a,u,m,v,T){if(v-m<=u)return;const P=m+v>>1;rA(o,a,P,m,v,T),L_(o,a,u,m,P-1,1-T),L_(o,a,u,P+1,v,1-T)}function rA(o,a,u,m,v,T){for(;v>m;){if(v-m>600){const z=v-m+1,V=u-m+1,W=Math.log(z),Y=.5*Math.exp(2*W/3),re=.5*Math.sqrt(W*Y*(z-Y)/z)*(V-z/2<0?-1:1);rA(o,a,u,Math.max(m,Math.floor(u-V*Y/z+re)),Math.min(v,Math.floor(u+(z-V)*Y/z+re)),T)}const P=a[2*u+T];let I=m,O=v;for(Pm(o,a,m,u),a[2*v+T]>P&&Pm(o,a,m,v);I<O;){for(Pm(o,a,I,O),I++,O--;a[2*I+T]<P;)I++;for(;a[2*O+T]>P;)O--}a[2*m+T]===P?Pm(o,a,m,O):(O++,Pm(o,a,O,v)),O<=u&&(m=O+1),u<=O&&(v=O-1)}}function Pm(o,a,u,m){N_(o,u,m),N_(a,2*u,2*m),N_(a,2*u+1,2*m+1)}function N_(o,a,u){const m=o[a];o[a]=o[u],o[u]=m}function nA(o,a,u,m){const v=o-u,T=a-m;return v*v+T*T}var B_;h.bg=void 0,(B_=h.bg||(h.bg={})).create="create",B_.load="load",B_.fullLoad="fullLoad";let Hy=null,Am=[];const F_=1e3/60,$_="loadTime",V_="fullLoadTime",Gj={mark(o){performance.mark(o)},frame(o){const a=o;Hy!=null&&Am.push(a-Hy),Hy=a},clearMetrics(){Hy=null,Am=[],performance.clearMeasures($_),performance.clearMeasures(V_);for(const o in h.bg)performance.clearMarks(h.bg[o])},getPerformanceMetrics(){performance.measure($_,h.bg.create,h.bg.load),performance.measure(V_,h.bg.create,h.bg.fullLoad);const o=performance.getEntriesByName($_)[0].duration,a=performance.getEntriesByName(V_)[0].duration,u=Am.length,m=1/(Am.reduce(((T,P)=>T+P),0)/u/1e3),v=Am.filter((T=>T>F_)).reduce(((T,P)=>T+(P-F_)/F_),0);return{loadTime:o,fullLoadTime:a,fps:m,percentDroppedFrames:v/(u+v)*100,totalFrames:u}}};h.$=class extends G{},h.A=Bc,h.B=Rh,h.C=function(o){if(it==null){const a=o.navigator?o.navigator.userAgent:null;it=!!o.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return it},h.D=Nt,h.E=br,h.F=class{constructor(o,a){this.target=o,this.mapId=a,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new c((()=>this.process())),this.subscription=(function(u,m,v,T){return u.addEventListener(m,v,!1),{unsubscribe:()=>{u.removeEventListener(m,v,!1)}}})(this.target,"message",(u=>this.receive(u))),this.globalScope=Ye(self)?o:window}registerMessageHandler(o,a){this.messageHandlers[o]=a}sendAsync(o,a){return new Promise(((u,m)=>{const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[v]={resolve:u,reject:m},a&&a.signal.addEventListener("abort",(()=>{delete this.resolveRejects[v];const I={id:v,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(I)}),{once:!0});const T=[],P=Object.assign(Object.assign({},o),{id:v,sourceMapId:this.mapId,origin:location.origin,data:Ei(o.data,T)});this.target.postMessage(P,{transfer:T})}))}receive(o){const a=o.data,u=a.id;if(!(a.origin!=="file://"&&location.origin!=="file://"&&a.origin!=="resource://android"&&location.origin!=="resource://android"&&a.origin!==location.origin||a.targetMapId&&this.mapId!==a.targetMapId)){if(a.type==="<cancel>"){delete this.tasks[u];const m=this.abortControllers[u];return delete this.abortControllers[u],void(m&&m.abort())}if(Ye(self)||a.mustQueue)return this.tasks[u]=a,this.taskQueue.push(u),void this.invoker.trigger();this.processTask(u,a)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),a=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),a&&this.processTask(o,a)}processTask(o,a){return l(this,void 0,void 0,(function*(){if(a.type==="<response>"){const v=this.resolveRejects[o];return delete this.resolveRejects[o],v?void(a.error?v.reject(vo(a.error)):v.resolve(vo(a.data))):void 0}if(!this.messageHandlers[a.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${a.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const u=vo(a.data),m=new AbortController;this.abortControllers[o]=m;try{const v=yield this.messageHandlers[a.type](a.sourceMapId,u,m);this.completeTask(o,null,v)}catch(v){this.completeTask(o,v)}}))}completeTask(o,a,u){const m=[];delete this.abortControllers[o];const v={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:a?Ei(a):null,data:Ei(u,m)};this.target.postMessage(v,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},h.G=At,h.H=function(){var o=new Bc(16);return Bc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},h.I=xm,h.J=function(o,a,u){var m,v,T,P,I,O,z,V,W,Y,re,se,he=u[0],_e=u[1],Ae=u[2];return a===o?(o[12]=a[0]*he+a[4]*_e+a[8]*Ae+a[12],o[13]=a[1]*he+a[5]*_e+a[9]*Ae+a[13],o[14]=a[2]*he+a[6]*_e+a[10]*Ae+a[14],o[15]=a[3]*he+a[7]*_e+a[11]*Ae+a[15]):(v=a[1],T=a[2],P=a[3],I=a[4],O=a[5],z=a[6],V=a[7],W=a[8],Y=a[9],re=a[10],se=a[11],o[0]=m=a[0],o[1]=v,o[2]=T,o[3]=P,o[4]=I,o[5]=O,o[6]=z,o[7]=V,o[8]=W,o[9]=Y,o[10]=re,o[11]=se,o[12]=m*he+I*_e+W*Ae+a[12],o[13]=v*he+O*_e+Y*Ae+a[13],o[14]=T*he+z*_e+re*Ae+a[14],o[15]=P*he+V*_e+se*Ae+a[15]),o},h.K=function(o,a,u){var m=u[0],v=u[1],T=u[2];return o[0]=a[0]*m,o[1]=a[1]*m,o[2]=a[2]*m,o[3]=a[3]*m,o[4]=a[4]*v,o[5]=a[5]*v,o[6]=a[6]*v,o[7]=a[7]*v,o[8]=a[8]*T,o[9]=a[9]*T,o[10]=a[10]*T,o[11]=a[11]*T,o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15],o},h.L=sm,h.M=function(o,a){const u={};for(let m=0;m<a.length;m++){const v=a[m];v in o&&(u[v]=o[v])}return u},h.N=x,h.O=F,h.P=A,h.Q=oe,h.R=yi,h.S=Dt,h.T=oi,h.U=K,h.V=Q,h.W=rt,h.X=Dn,h.Y=k,h.Z=Je,h._=l,h.a=ht,h.a$=function(o,a){var u=o[0],m=o[1],v=o[2],T=o[3],P=o[4],I=o[5],O=o[6],z=o[7],V=o[8],W=o[9],Y=o[10],re=o[11],se=o[12],he=o[13],_e=o[14],Ae=o[15],qe=a[0],ke=a[1],Ne=a[2],tt=a[3],ft=a[4],zt=a[5],rr=a[6],Rt=a[7],kt=a[8],Ht=a[9],Ut=a[10],$t=a[11],st=a[12],Kt=a[13],Gt=a[14],hr=a[15];return Math.abs(u-qe)<=Wi*Math.max(1,Math.abs(u),Math.abs(qe))&&Math.abs(m-ke)<=Wi*Math.max(1,Math.abs(m),Math.abs(ke))&&Math.abs(v-Ne)<=Wi*Math.max(1,Math.abs(v),Math.abs(Ne))&&Math.abs(T-tt)<=Wi*Math.max(1,Math.abs(T),Math.abs(tt))&&Math.abs(P-ft)<=Wi*Math.max(1,Math.abs(P),Math.abs(ft))&&Math.abs(I-zt)<=Wi*Math.max(1,Math.abs(I),Math.abs(zt))&&Math.abs(O-rr)<=Wi*Math.max(1,Math.abs(O),Math.abs(rr))&&Math.abs(z-Rt)<=Wi*Math.max(1,Math.abs(z),Math.abs(Rt))&&Math.abs(V-kt)<=Wi*Math.max(1,Math.abs(V),Math.abs(kt))&&Math.abs(W-Ht)<=Wi*Math.max(1,Math.abs(W),Math.abs(Ht))&&Math.abs(Y-Ut)<=Wi*Math.max(1,Math.abs(Y),Math.abs(Ut))&&Math.abs(re-$t)<=Wi*Math.max(1,Math.abs(re),Math.abs($t))&&Math.abs(se-st)<=Wi*Math.max(1,Math.abs(se),Math.abs(st))&&Math.abs(he-Kt)<=Wi*Math.max(1,Math.abs(he),Math.abs(Kt))&&Math.abs(_e-Gt)<=Wi*Math.max(1,Math.abs(_e),Math.abs(Gt))&&Math.abs(Ae-hr)<=Wi*Math.max(1,Math.abs(Ae),Math.abs(hr))},h.a0=Sr,h.a1=vt,h.a2=yt,h.a3=o=>{const a=window.document.createElement("video");return a.muted=!0,new Promise((u=>{a.onloadstart=()=>{u(a)};for(const m of o){const v=window.document.createElement("source");It(m)||(a.crossOrigin="Anonymous"),v.src=m,a.appendChild(v)}}))},h.a4=function(){return de++},h.a5=Mt,h.a6=Hc,h.a7=Eu,h.a8=Hl,h.a9=He,h.aA=function(o){if(o.type==="custom")return new Fd(o);switch(o.type){case"background":return new Bd(o);case"circle":return new b_(o);case"fill":return new S_(o);case"fill-extrusion":return new Ay(o);case"heatmap":return new w_(o);case"hillshade":return new hy(o);case"line":return new qc(o);case"raster":return new O_(o);case"symbol":return new Gu(o)}},h.aB=be,h.aC=function(o,a){if(!o)return[{command:"setStyle",args:[a]}];let u=[];try{if(!lr(o.version,a.version))return[{command:"setStyle",args:[a]}];lr(o.center,a.center)||u.push({command:"setCenter",args:[a.center]}),lr(o.zoom,a.zoom)||u.push({command:"setZoom",args:[a.zoom]}),lr(o.bearing,a.bearing)||u.push({command:"setBearing",args:[a.bearing]}),lr(o.pitch,a.pitch)||u.push({command:"setPitch",args:[a.pitch]}),lr(o.sprite,a.sprite)||u.push({command:"setSprite",args:[a.sprite]}),lr(o.glyphs,a.glyphs)||u.push({command:"setGlyphs",args:[a.glyphs]}),lr(o.transition,a.transition)||u.push({command:"setTransition",args:[a.transition]}),lr(o.light,a.light)||u.push({command:"setLight",args:[a.light]}),lr(o.terrain,a.terrain)||u.push({command:"setTerrain",args:[a.terrain]}),lr(o.sky,a.sky)||u.push({command:"setSky",args:[a.sky]}),lr(o.projection,a.projection)||u.push({command:"setProjection",args:[a.projection]});const m={},v=[];(function(P,I,O,z){let V;for(V in I=I||{},P=P||{})Object.prototype.hasOwnProperty.call(P,V)&&(Object.prototype.hasOwnProperty.call(I,V)||Nn(V,O,z));for(V in I)Object.prototype.hasOwnProperty.call(I,V)&&(Object.prototype.hasOwnProperty.call(P,V)?lr(P[V],I[V])||(P[V].type==="geojson"&&I[V].type==="geojson"&&ta(P,I,V)?xr(O,{command:"setGeoJSONSourceData",args:[V,I[V].data]}):di(V,I,O,z)):Ln(V,I,O))})(o.sources,a.sources,v,m);const T=[];o.layers&&o.layers.forEach((P=>{"source"in P&&m[P.source]?u.push({command:"removeLayer",args:[P.id]}):T.push(P)})),u=u.concat(v),(function(P,I,O){I=I||[];const z=(P=P||[]).map(Co),V=I.map(Co),W=P.reduce(Mo,{}),Y=I.reduce(Mo,{}),re=z.slice(),se=Object.create(null);let he,_e,Ae,qe,ke;for(let Ne=0,tt=0;Ne<z.length;Ne++)he=z[Ne],Object.prototype.hasOwnProperty.call(Y,he)?tt++:(xr(O,{command:"removeLayer",args:[he]}),re.splice(re.indexOf(he,tt),1));for(let Ne=0,tt=0;Ne<V.length;Ne++)he=V[V.length-1-Ne],re[re.length-1-Ne]!==he&&(Object.prototype.hasOwnProperty.call(W,he)?(xr(O,{command:"removeLayer",args:[he]}),re.splice(re.lastIndexOf(he,re.length-tt),1)):tt++,qe=re[re.length-Ne],xr(O,{command:"addLayer",args:[Y[he],qe]}),re.splice(re.length-Ne,0,he),se[he]=!0);for(let Ne=0;Ne<V.length;Ne++)if(he=V[Ne],_e=W[he],Ae=Y[he],!se[he]&&!lr(_e,Ae))if(lr(_e.source,Ae.source)&&lr(_e["source-layer"],Ae["source-layer"])&&lr(_e.type,Ae.type)){for(ke in Kn(_e.layout,Ae.layout,O,he,null,"setLayoutProperty"),Kn(_e.paint,Ae.paint,O,he,null,"setPaintProperty"),lr(_e.filter,Ae.filter)||xr(O,{command:"setFilter",args:[he,Ae.filter]}),lr(_e.minzoom,Ae.minzoom)&&lr(_e.maxzoom,Ae.maxzoom)||xr(O,{command:"setLayerZoomRange",args:[he,Ae.minzoom,Ae.maxzoom]}),_e)Object.prototype.hasOwnProperty.call(_e,ke)&&ke!=="layout"&&ke!=="paint"&&ke!=="filter"&&ke!=="metadata"&&ke!=="minzoom"&&ke!=="maxzoom"&&(ke.indexOf("paint.")===0?Kn(_e[ke],Ae[ke],O,he,ke.slice(6),"setPaintProperty"):lr(_e[ke],Ae[ke])||xr(O,{command:"setLayerProperty",args:[he,ke,Ae[ke]]}));for(ke in Ae)Object.prototype.hasOwnProperty.call(Ae,ke)&&!Object.prototype.hasOwnProperty.call(_e,ke)&&ke!=="layout"&&ke!=="paint"&&ke!=="filter"&&ke!=="metadata"&&ke!=="minzoom"&&ke!=="maxzoom"&&(ke.indexOf("paint.")===0?Kn(_e[ke],Ae[ke],O,he,ke.slice(6),"setPaintProperty"):lr(_e[ke],Ae[ke])||xr(O,{command:"setLayerProperty",args:[he,ke,Ae[ke]]}))}else xr(O,{command:"removeLayer",args:[he]}),qe=re[re.lastIndexOf(he)+1],xr(O,{command:"addLayer",args:[Ae,qe]})})(T,a.layers,u)}catch(m){console.warn("Unable to compute style diff:",m),u=[{command:"setStyle",args:[a]}]}return u},h.aD=function(o){const a=[],u=o.id;return u===void 0&&a.push({message:`layers.${u}: missing required property "id"`}),o.render===void 0&&a.push({message:`layers.${u}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&a.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),a},h.aE=function o(a,u){if(Array.isArray(a)){if(!Array.isArray(u)||a.length!==u.length)return!1;for(let m=0;m<a.length;m++)if(!o(a[m],u[m]))return!1;return!0}if(typeof a=="object"&&a!==null&&u!==null){if(typeof u!="object"||Object.keys(a).length!==Object.keys(u).length)return!1;for(const m in a)if(!o(a[m],u[m]))return!1;return!0}return a===u},h.aF=Pe,h.aG=Fe,h.aH=class extends bn{constructor(o,a){super(o,a),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},h.aI=qn,h.aJ=class extends bn{constructor(o,a){super(o,a),this.current=Fh}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let a=1;a<16;a++)if(o[a]!==this.current[a]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},h.aK=Bh,h.aL=Lc,h.aM=cr,h.aN=class extends bn{constructor(o,a){super(o,a),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},h.aO=class extends bn{constructor(o,a){super(o,a),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},h.aP=function(o,a,u,m,v,T,P){var I=1/(a-u),O=1/(m-v),z=1/(T-P);return o[0]=-2*I,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*O,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*z,o[11]=0,o[12]=(a+u)*I,o[13]=(v+m)*O,o[14]=(P+T)*z,o[15]=1,o},h.aQ=pd,h.aR=class extends De{},h.aS=tf,h.aT=class extends We{},h.aU=Gh,h.aV=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},h.aW=xd,h.aX=An,h.aY=Ca,h.aZ=class extends Vt{},h.a_=function(o,a){return o[0]===a[0]&&o[1]===a[1]&&o[2]===a[2]&&o[3]===a[3]&&o[4]===a[4]&&o[5]===a[5]&&o[6]===a[6]&&o[7]===a[7]&&o[8]===a[8]&&o[9]===a[9]&&o[10]===a[10]&&o[11]===a[11]&&o[12]===a[12]&&o[13]===a[13]&&o[14]===a[14]&&o[15]===a[15]},h.aa=function(o){const a={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((u,m,v,T)=>{const P=v||T;return a[m]=!P||P.toLowerCase(),""})),a["max-age"]){const u=parseInt(a["max-age"],10);isNaN(u)?delete a["max-age"]:a["max-age"]=u}return a},h.ab=function(o,a){const u=[];for(const m in o)m in a||u.push(m);return u},h.ac=Z,h.ad=function(o,a,u){var m=Math.sin(u),v=Math.cos(u),T=a[0],P=a[1],I=a[2],O=a[3],z=a[4],V=a[5],W=a[6],Y=a[7];return a!==o&&(o[8]=a[8],o[9]=a[9],o[10]=a[10],o[11]=a[11],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15]),o[0]=T*v+z*m,o[1]=P*v+V*m,o[2]=I*v+W*m,o[3]=O*v+Y*m,o[4]=z*v-T*m,o[5]=V*v-P*m,o[6]=W*v-I*m,o[7]=Y*v-O*m,o},h.ae=function(o){var a=new Bc(16);return a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],a[4]=o[4],a[5]=o[5],a[6]=o[6],a[7]=o[7],a[8]=o[8],a[9]=o[9],a[10]=o[10],a[11]=o[11],a[12]=o[12],a[13]=o[13],a[14]=o[14],a[15]=o[15],a},h.af=md,h.ag=function(o,a){let u=0,m=0;if(o.kind==="constant")m=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:v,minZoom:T,maxZoom:P}=o,I=v?Z(Jn.interpolationFactor(v,a,T,P),0,1):0;o.kind==="camera"?m=kn.number(o.minSize,o.maxSize,I):u=I}return{uSizeT:u,uSize:m}},h.ai=function(o,{uSize:a,uSizeT:u},{lowerSize:m,upperSize:v}){return o.kind==="source"?m/wo:o.kind==="composite"?kn.number(m/wo,v/wo,u):a},h.aj=Gc,h.ak=function(o,a,u,m){const v=a.y-o.y,T=a.x-o.x,P=m.y-u.y,I=m.x-u.x,O=P*T-I*v;if(O===0)return null;const z=(I*(o.y-u.y)-P*(o.x-u.x))/O;return new A(o.x+z*T,o.y+z*v)},h.al=sr,h.am=rm,h.an=dd,h.ao=function(o){let a=1/0,u=1/0,m=-1/0,v=-1/0;for(const T of o)a=Math.min(a,T.x),u=Math.min(u,T.y),m=Math.max(m,T.x),v=Math.max(v,T.y);return[a,u,m,v]},h.ap=yn,h.ar=ff,h.as=function(o,a){var u=a[0],m=a[1],v=a[2],T=a[3],P=a[4],I=a[5],O=a[6],z=a[7],V=a[8],W=a[9],Y=a[10],re=a[11],se=a[12],he=a[13],_e=a[14],Ae=a[15],qe=u*I-m*P,ke=u*O-v*P,Ne=u*z-T*P,tt=m*O-v*I,ft=m*z-T*I,zt=v*z-T*O,rr=V*he-W*se,Rt=V*_e-Y*se,kt=V*Ae-re*se,Ht=W*_e-Y*he,Ut=W*Ae-re*he,$t=Y*Ae-re*_e,st=qe*$t-ke*Ut+Ne*Ht+tt*kt-ft*Rt+zt*rr;return st?(o[0]=(I*$t-O*Ut+z*Ht)*(st=1/st),o[1]=(v*Ut-m*$t-T*Ht)*st,o[2]=(he*zt-_e*ft+Ae*tt)*st,o[3]=(Y*ft-W*zt-re*tt)*st,o[4]=(O*kt-P*$t-z*Rt)*st,o[5]=(u*$t-v*kt+T*Rt)*st,o[6]=(_e*Ne-se*zt-Ae*ke)*st,o[7]=(V*zt-Y*Ne+re*ke)*st,o[8]=(P*Ut-I*kt+z*rr)*st,o[9]=(m*kt-u*Ut-T*rr)*st,o[10]=(se*ft-he*Ne+Ae*qe)*st,o[11]=(W*Ne-V*ft-re*qe)*st,o[12]=(I*Rt-P*Ht-O*rr)*st,o[13]=(u*Ht-m*Rt+v*rr)*st,o[14]=(he*ke-se*tt-_e*qe)*st,o[15]=(V*tt-W*ke+Y*qe)*st,o):null},h.at=j_,h.au=cf,h.av=z_,h.aw=function(){const o={},a=$e.$version;for(const u in $e.$root){const m=$e.$root[u];if(m.required){let v=null;v=u==="version"?a:m.type==="array"?[]:{},v!=null&&(o[u]=v)}}return o},h.ax=Ya,h.ay=wt,h.az=function(o){o=o.slice();const a=Object.create(null);for(let u=0;u<o.length;u++)a[o[u].id]=o[u];for(let u=0;u<o.length;u++)"ref"in o[u]&&(o[u]=hn(o[u],a[o[u].ref]));return o},h.b=et,h.b0=function(o,a){return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5],o[6]=a[6],o[7]=a[7],o[8]=a[8],o[9]=a[9],o[10]=a[10],o[11]=a[11],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15],o},h.b1=function(o,a,u){return o[0]=a[0]*u[0],o[1]=a[1]*u[1],o[2]=a[2]*u[2],o[3]=a[3]*u[3],o},h.b2=function(o,a){return o[0]*a[0]+o[1]*a[1]+o[2]*a[2]+o[3]*a[3]},h.b3=X,h.b4=dt,h.b5=Te,h.b6=function(o,a,u,m,v){var T,P=1/Math.tan(a/2);return o[0]=P/u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=P,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,v!=null&&v!==1/0?(o[10]=(v+m)*(T=1/(m-v)),o[14]=2*v*m*T):(o[10]=-1,o[14]=-2*m),o},h.b7=function(o,a,u){var m=Math.sin(u),v=Math.cos(u),T=a[4],P=a[5],I=a[6],O=a[7],z=a[8],V=a[9],W=a[10],Y=a[11];return a!==o&&(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15]),o[4]=T*v+z*m,o[5]=P*v+V*m,o[6]=I*v+W*m,o[7]=O*v+Y*m,o[8]=z*v-T*m,o[9]=V*v-P*m,o[10]=W*v-I*m,o[11]=Y*v-O*m,o},h.b8=J,h.b9=ie,h.bA=Ps,h.bB=function(o){return o.message===Ce},h.bC=Ys,h.bD=Kr,h.ba=function(o){return o*Math.PI/180},h.bb=function(o,a){const{x:u,y:m}=Je.fromLngLat(a);return!(o<0||o>25||m<0||m>=1||u<0||u>=1)},h.bc=function(o,a){return o[0]=a[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=a[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},h.bd=class extends ${},h.be=p,h.bf=Gj,h.bh=_t,h.bi=function(o,a){ht.REGISTERED_PROTOCOLS[o]=a},h.bj=function(o){delete ht.REGISTERED_PROTOCOLS[o]},h.bk=function(o,a){const u={};for(let v=0;v<o.length;v++){const T=a&&a[o[v].id]||Mh(o[v]);a&&(a[o[v].id]=T);let P=u[T];P||(P=u[T]=[]),P.push(o[v])}const m=[];for(const v in u)m.push(u[v]);return m},h.bl=Lt,h.bm=Bn,h.bn=je,h.bo=bm,h.bp=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Dn/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const a=o.bucket.layers[0],u=a.layout,m=a._unevaluatedLayout._values,v={layoutIconSize:m["icon-size"].possiblyEvaluate(new Ar(o.bucket.zoom+1),o.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new Ar(o.bucket.zoom+1),o.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new Ar(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:z,maxZoom:V}=o.bucket.textSizeData;v.compositeTextSizes=[m["text-size"].possiblyEvaluate(new Ar(z),o.canonical),m["text-size"].possiblyEvaluate(new Ar(V),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:z,maxZoom:V}=o.bucket.iconSizeData;v.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new Ar(z),o.canonical),m["icon-size"].possiblyEvaluate(new Ar(V),o.canonical)]}const T=u.get("text-line-height")*yn,P=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",I=u.get("text-keep-upright"),O=u.get("text-size");for(const z of o.bucket.features){const V=u.get("text-font").evaluate(z,{},o.canonical).join(","),W=O.evaluate(z,{},o.canonical),Y=v.layoutTextSize.evaluate(z,{},o.canonical),re=v.layoutIconSize.evaluate(z,{},o.canonical),se={horizontal:{},vertical:void 0},he=z.text;let _e,Ae=[0,0];if(he){const Ne=he.toString(),tt=u.get("text-letter-spacing").evaluate(z,{},o.canonical)*yn,ft=Jp(Ne)?tt:0,zt=u.get("text-anchor").evaluate(z,{},o.canonical),rr=JP(a,z,o.canonical);if(!rr){const Ut=u.get("text-radial-offset").evaluate(z,{},o.canonical);Ae=Ut?YP(zt,[Ut*yn,R_]):u.get("text-offset").evaluate(z,{},o.canonical).map(($t=>$t*yn))}let Rt=P?"center":u.get("text-justify").evaluate(z,{},o.canonical);const kt=u.get("symbol-placement")==="point"?u.get("text-max-width").evaluate(z,{},o.canonical)*yn:1/0,Ht=()=>{o.bucket.allowVerticalPlacement&&jh(Ne)&&(se.vertical=uf(he,o.glyphMap,o.glyphPositions,o.imagePositions,V,kt,T,zt,"left",ft,Ae,h.ah.vertical,!0,Y,W))};if(!P&&rr){const Ut=new Set;if(Rt==="auto")for(let st=0;st<rr.values.length;st+=2)Ut.add(j_(rr.values[st]));else Ut.add(Rt);let $t=!1;for(const st of Ut)if(!se.horizontal[st])if($t)se.horizontal[st]=se.horizontal[0];else{const Kt=uf(he,o.glyphMap,o.glyphPositions,o.imagePositions,V,kt,T,"center",st,ft,Ae,h.ah.horizontal,!1,Y,W);Kt&&(se.horizontal[st]=Kt,$t=Kt.positionedLines.length===1)}Ht()}else{Rt==="auto"&&(Rt=j_(zt));const Ut=uf(he,o.glyphMap,o.glyphPositions,o.imagePositions,V,kt,T,zt,Rt,ft,Ae,h.ah.horizontal,!1,Y,W);Ut&&(se.horizontal[Rt]=Ut),Ht(),jh(Ne)&&P&&I&&(se.vertical=uf(he,o.glyphMap,o.glyphPositions,o.imagePositions,V,kt,T,zt,Rt,ft,Ae,h.ah.vertical,!1,Y,W))}}let qe=!1;if(z.icon&&z.icon.name){const Ne=o.imageMap[z.icon.name];Ne&&(_e=eu(o.imagePositions[z.icon.name],u.get("icon-offset").evaluate(z,{},o.canonical),u.get("icon-anchor").evaluate(z,{},o.canonical)),qe=!!Ne.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=qe:o.bucket.sdfIcons!==qe&&Ve("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ne.pixelRatio!==o.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const ke=eA(se.horizontal)||se.vertical;o.bucket.iconsInText=!!ke&&ke.iconsInText,(ke||_e)&&qj(o.bucket,z,se,_e,o.imageMap,v,Y,re,Ae,qe,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},h.bq=Ia,h.br=Td,h.bs=so,h.bt=Kl,h.bu=ol,h.bv=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},h.bw=function(o,a,u,m,v){return l(this,void 0,void 0,(function*(){if(Q())try{return yield rt(o,a,u,m,v)}catch{}return(function(T,P,I,O,z){const V=T.width,W=T.height;ge&&ne||(ge=new OffscreenCanvas(V,W),ne=ge.getContext("2d",{willReadFrequently:!0})),ge.width=V,ge.height=W,ne.drawImage(T,0,0,V,W);const Y=ne.getImageData(P,I,O,z);return ne.clearRect(0,0,V,W),Y.data})(o,a,u,m,v)}))},h.bx=Jt,h.by=_,h.bz=w,h.c=nt,h.d=o=>l(void 0,void 0,void 0,(function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const a=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(a)}catch(u){throw new Error(`Could not load image because of ${u.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),h.e=le,h.f=o=>new Promise(((a,u)=>{const m=new Image;m.onload=()=>{a(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame((()=>{m.src=Ge}))},m.onerror=()=>u(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(o)],{type:"image/png"});m.src=o.byteLength?URL.createObjectURL(v):Ge})),h.g=pt,h.h=(o,a)=>ot(le(o,{type:"json"}),a),h.i=Ye,h.j=jt,h.k=ar,h.l=(o,a)=>ot(le(o,{type:"arrayBuffer"}),a),h.m=ot,h.n=function(o){return new ol(o).readFields(Wu,[])},h.o=Bu,h.p=sf,h.q=S,h.r=Dh,h.s=It,h.t=Rc,h.u=Vo,h.v=$e,h.w=Ve,h.x=function([o,a,u]){return a+=90,a*=Math.PI/180,u*=Math.PI/180,{x:o*Math.cos(a)*Math.sin(u),y:o*Math.sin(a)*Math.sin(u),z:o*Math.cos(u)}},h.y=kn,h.z=Ar})),s("worker",["./shared"],(function(h){class l{constructor(te){this.keyCache={},te&&this.replace(te)}replace(te){this._layerConfigs={},this._layers={},this.update(te,[])}update(te,ee){for(const ye of te){this._layerConfigs[ye.id]=ye;const Ie=this._layers[ye.id]=h.aA(ye);Ie._featureFilter=h.a7(Ie.filter),this.keyCache[ye.id]&&delete this.keyCache[ye.id]}for(const ye of ee)delete this.keyCache[ye],delete this._layerConfigs[ye],delete this._layers[ye];this.familiesBySource={};const ce=h.bk(Object.values(this._layerConfigs),this.keyCache);for(const ye of ce){const Ie=ye.map((Ke=>this._layers[Ke.id])),Re=Ie[0];if(Re.visibility==="none")continue;const Be=Re.source||"";let Ee=this.familiesBySource[Be];Ee||(Ee=this.familiesBySource[Be]={});const Qe=Re.sourceLayer||"_geojsonTileLayer";let ct=Ee[Qe];ct||(ct=Ee[Qe]=[]),ct.push(Ie)}}}class _{constructor(te){const ee={},ce=[];for(const Be in te){const Ee=te[Be],Qe=ee[Be]={};for(const ct in Ee){const Ke=Ee[+ct];if(!Ke||Ke.bitmap.width===0||Ke.bitmap.height===0)continue;const bt={x:0,y:0,w:Ke.bitmap.width+2,h:Ke.bitmap.height+2};ce.push(bt),Qe[ct]={rect:bt,metrics:Ke.metrics}}}const{w:ye,h:Ie}=h.p(ce),Re=new h.o({width:ye||1,height:Ie||1});for(const Be in te){const Ee=te[Be];for(const Qe in Ee){const ct=Ee[+Qe];if(!ct||ct.bitmap.width===0||ct.bitmap.height===0)continue;const Ke=ee[Be][Qe].rect;h.o.copy(ct.bitmap,Re,{x:0,y:0},{x:Ke.x+1,y:Ke.y+1},ct.bitmap)}}this.image=Re,this.positions=ee}}h.bl("GlyphAtlas",_);class w{constructor(te){this.tileID=new h.S(te.tileID.overscaledZ,te.tileID.wrap,te.tileID.canonical.z,te.tileID.canonical.x,te.tileID.canonical.y),this.uid=te.uid,this.zoom=te.zoom,this.pixelRatio=te.pixelRatio,this.tileSize=te.tileSize,this.source=te.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=te.showCollisionBoxes,this.collectResourceTiming=!!te.collectResourceTiming,this.returnDependencies=!!te.returnDependencies,this.promoteId=te.promoteId,this.inFlightDependencies=[]}parse(te,ee,ce,ye){return h._(this,void 0,void 0,(function*(){this.status="parsing",this.data=te,this.collisionBoxArray=new h.a5;const Ie=new h.bm(Object.keys(te.layers).sort()),Re=new h.bn(this.tileID,this.promoteId);Re.bucketLayerIDs=[];const Be={},Ee={featureIndex:Re,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ce},Qe=ee.familiesBySource[this.source];for(const wr in Qe){const Fr=te.layers[wr];if(!Fr)continue;Fr.version===1&&h.w(`Vector tile source "${this.source}" layer "${wr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const an=Ie.encode(wr),Vn=[];for(let Yn=0;Yn<Fr.length;Yn++){const Ti=Fr.feature(Yn),bl=Re.getId(Ti,wr);Vn.push({feature:Ti,id:bl,index:Yn,sourceLayerIndex:an})}for(const Yn of Qe[wr]){const Ti=Yn[0];Ti.source!==this.source&&h.w(`layer.source = ${Ti.source} does not equal this.source = ${this.source}`),Ti.minzoom&&this.zoom<Math.floor(Ti.minzoom)||Ti.maxzoom&&this.zoom>=Ti.maxzoom||Ti.visibility!=="none"&&(E(Yn,this.zoom,ce),(Be[Ti.id]=Ti.createBucket({index:Re.bucketLayerIDs.length,layers:Yn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:an,sourceID:this.source})).populate(Vn,Ee,this.tileID.canonical),Re.bucketLayerIDs.push(Yn.map((bl=>bl.id))))}}const ct=h.aF(Ee.glyphDependencies,(wr=>Object.keys(wr).map(Number)));this.inFlightDependencies.forEach((wr=>wr==null?void 0:wr.abort())),this.inFlightDependencies=[];let Ke=Promise.resolve({});if(Object.keys(ct).length){const wr=new AbortController;this.inFlightDependencies.push(wr),Ke=ye.sendAsync({type:"GG",data:{stacks:ct,source:this.source,tileID:this.tileID,type:"glyphs"}},wr)}const bt=Object.keys(Ee.iconDependencies);let qt=Promise.resolve({});if(bt.length){const wr=new AbortController;this.inFlightDependencies.push(wr),qt=ye.sendAsync({type:"GI",data:{icons:bt,source:this.source,tileID:this.tileID,type:"icons"}},wr)}const Yt=Object.keys(Ee.patternDependencies);let Ir=Promise.resolve({});if(Yt.length){const wr=new AbortController;this.inFlightDependencies.push(wr),Ir=ye.sendAsync({type:"GI",data:{icons:Yt,source:this.source,tileID:this.tileID,type:"patterns"}},wr)}const[fr,kr,yr]=yield Promise.all([Ke,qt,Ir]),Mn=new _(fr),mn=new h.bo(kr,yr);for(const wr in Be){const Fr=Be[wr];Fr instanceof h.a6?(E(Fr.layers,this.zoom,ce),h.bp({bucket:Fr,glyphMap:fr,glyphPositions:Mn.positions,imageMap:kr,imagePositions:mn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Fr.hasPattern&&(Fr instanceof h.bq||Fr instanceof h.br||Fr instanceof h.bs)&&(E(Fr.layers,this.zoom,ce),Fr.addFeatures(Ee,this.tileID.canonical,mn.patternPositions))}return this.status="done",{buckets:Object.values(Be).filter((wr=>!wr.isEmpty())),featureIndex:Re,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Mn.image,imageAtlas:mn,glyphMap:this.returnDependencies?fr:null,iconMap:this.returnDependencies?kr:null,glyphPositions:this.returnDependencies?Mn.positions:null}}))}}function E(xe,te,ee){const ce=new h.z(te);for(const ye of xe)ye.recalculate(ce,ee)}class A{constructor(te,ee,ce){this.actor=te,this.layerIndex=ee,this.availableImages=ce,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(te,ee){return h._(this,void 0,void 0,(function*(){const ce=yield h.l(te.request,ee);try{return{vectorTile:new h.bt.VectorTile(new h.bu(ce.data)),rawData:ce.data,cacheControl:ce.cacheControl,expires:ce.expires}}catch(ye){const Ie=new Uint8Array(ce.data);let Re=`Unable to parse the tile at ${te.request.url}, `;throw Re+=Ie[0]===31&&Ie[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ye.message}`,new Error(Re)}}))}loadTile(te){return h._(this,void 0,void 0,(function*(){const ee=te.uid,ce=!!(te&&te.request&&te.request.collectResourceTiming)&&new h.bv(te.request),ye=new w(te);this.loading[ee]=ye;const Ie=new AbortController;ye.abort=Ie;try{const Re=yield this.loadVectorTile(te,Ie);if(delete this.loading[ee],!Re)return null;const Be=Re.rawData,Ee={};Re.expires&&(Ee.expires=Re.expires),Re.cacheControl&&(Ee.cacheControl=Re.cacheControl);const Qe={};if(ce){const Ke=ce.finish();Ke&&(Qe.resourceTiming=JSON.parse(JSON.stringify(Ke)))}ye.vectorTile=Re.vectorTile;const ct=ye.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[ee]=ye,this.fetching[ee]={rawTileData:Be,cacheControl:Ee,resourceTiming:Qe};try{const Ke=yield ct;return h.e({rawTileData:Be.slice(0)},Ke,Ee,Qe)}finally{delete this.fetching[ee]}}catch(Re){throw delete this.loading[ee],ye.status="done",this.loaded[ee]=ye,Re}}))}reloadTile(te){return h._(this,void 0,void 0,(function*(){const ee=te.uid;if(!this.loaded||!this.loaded[ee])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ce=this.loaded[ee];if(ce.showCollisionBoxes=te.showCollisionBoxes,ce.status==="parsing"){const ye=yield ce.parse(ce.vectorTile,this.layerIndex,this.availableImages,this.actor);let Ie;if(this.fetching[ee]){const{rawTileData:Re,cacheControl:Be,resourceTiming:Ee}=this.fetching[ee];delete this.fetching[ee],Ie=h.e({rawTileData:Re.slice(0)},ye,Be,Ee)}else Ie=ye;return Ie}if(ce.status==="done"&&ce.vectorTile)return ce.parse(ce.vectorTile,this.layerIndex,this.availableImages,this.actor)}))}abortTile(te){return h._(this,void 0,void 0,(function*(){const ee=this.loading,ce=te.uid;ee&&ee[ce]&&ee[ce].abort&&(ee[ce].abort.abort(),delete ee[ce])}))}removeTile(te){return h._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[te.uid]&&delete this.loaded[te.uid]}))}}class M{constructor(){this.loaded={}}loadTile(te){return h._(this,void 0,void 0,(function*(){const{uid:ee,encoding:ce,rawImageData:ye,redFactor:Ie,greenFactor:Re,blueFactor:Be,baseShift:Ee}=te,Qe=ye.width+2,ct=ye.height+2,Ke=h.b(ye)?new h.R({width:Qe,height:ct},yield h.bw(ye,-1,-1,Qe,ct)):ye,bt=new h.bx(ee,Ke,ce,Ie,Re,Be,Ee);return this.loaded=this.loaded||{},this.loaded[ee]=bt,bt}))}removeTile(te){const ee=this.loaded,ce=te.uid;ee&&ee[ce]&&delete ee[ce]}}function N(xe,te){if(xe.length!==0){U(xe[0],te);for(var ee=1;ee<xe.length;ee++)U(xe[ee],!te)}}function U(xe,te){for(var ee=0,ce=0,ye=0,Ie=xe.length,Re=Ie-1;ye<Ie;Re=ye++){var Be=(xe[ye][0]-xe[Re][0])*(xe[Re][1]+xe[ye][1]),Ee=ee+Be;ce+=Math.abs(ee)>=Math.abs(Be)?ee-Ee+Be:Be-Ee+ee,ee=Ee}ee+ce>=0!=!!te&&xe.reverse()}var B=h.by((function xe(te,ee){var ce,ye=te&&te.type;if(ye==="FeatureCollection")for(ce=0;ce<te.features.length;ce++)xe(te.features[ce],ee);else if(ye==="GeometryCollection")for(ce=0;ce<te.geometries.length;ce++)xe(te.geometries[ce],ee);else if(ye==="Feature")xe(te.geometry,ee);else if(ye==="Polygon")N(te.coordinates,ee);else if(ye==="MultiPolygon")for(ce=0;ce<te.coordinates.length;ce++)N(te.coordinates[ce],ee);return te}));const L=h.bt.VectorTileFeature.prototype.toGeoJSON;var K={exports:{}},Q=h.bz,J=h.bt.VectorTileFeature,ie=Z;function Z(xe,te){this.options=te||{},this.features=xe,this.length=xe.length}function X(xe,te){this.id=typeof xe.id=="number"?xe.id:void 0,this.type=xe.type,this.rawGeometry=xe.type===1?[xe.geometry]:xe.geometry,this.properties=xe.tags,this.extent=te||4096}Z.prototype.feature=function(xe){return new X(this.features[xe],this.options.extent)},X.prototype.loadGeometry=function(){var xe=this.rawGeometry;this.geometry=[];for(var te=0;te<xe.length;te++){for(var ee=xe[te],ce=[],ye=0;ye<ee.length;ye++)ce.push(new Q(ee[ye][0],ee[ye][1]));this.geometry.push(ce)}return this.geometry},X.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var xe=this.geometry,te=1/0,ee=-1/0,ce=1/0,ye=-1/0,Ie=0;Ie<xe.length;Ie++)for(var Re=xe[Ie],Be=0;Be<Re.length;Be++){var Ee=Re[Be];te=Math.min(te,Ee.x),ee=Math.max(ee,Ee.x),ce=Math.min(ce,Ee.y),ye=Math.max(ye,Ee.y)}return[te,ce,ee,ye]},X.prototype.toGeoJSON=J.prototype.toGeoJSON;var le=h.bA,de=ie;function Pe(xe){var te=new le;return(function(ee,ce){for(var ye in ee.layers)ce.writeMessage(3,Fe,ee.layers[ye])})(xe,te),te.finish()}function Fe(xe,te){var ee;te.writeVarintField(15,xe.version||1),te.writeStringField(1,xe.name||""),te.writeVarintField(5,xe.extent||4096);var ce={keys:[],values:[],keycache:{},valuecache:{}};for(ee=0;ee<xe.length;ee++)ce.feature=xe.feature(ee),te.writeMessage(2,be,ce);var ye=ce.keys;for(ee=0;ee<ye.length;ee++)te.writeStringField(3,ye[ee]);var Ie=ce.values;for(ee=0;ee<Ie.length;ee++)te.writeMessage(4,it,Ie[ee])}function be(xe,te){var ee=xe.feature;ee.id!==void 0&&te.writeVarintField(1,ee.id),te.writeMessage(2,Ue,xe),te.writeVarintField(3,ee.type),te.writeMessage(4,Ye,ee)}function Ue(xe,te){var ee=xe.feature,ce=xe.keys,ye=xe.values,Ie=xe.keycache,Re=xe.valuecache;for(var Be in ee.properties){var Ee=ee.properties[Be],Qe=Ie[Be];if(Ee!==null){Qe===void 0&&(ce.push(Be),Ie[Be]=Qe=ce.length-1),te.writeVarint(Qe);var ct=typeof Ee;ct!=="string"&&ct!=="boolean"&&ct!=="number"&&(Ee=JSON.stringify(Ee));var Ke=ct+":"+Ee,bt=Re[Ke];bt===void 0&&(ye.push(Ee),Re[Ke]=bt=ye.length-1),te.writeVarint(bt)}}}function Ve(xe,te){return(te<<3)+(7&xe)}function Ze(xe){return xe<<1^xe>>31}function Ye(xe,te){for(var ee=xe.loadGeometry(),ce=xe.type,ye=0,Ie=0,Re=ee.length,Be=0;Be<Re;Be++){var Ee=ee[Be],Qe=1;ce===1&&(Qe=Ee.length),te.writeVarint(Ve(1,Qe));for(var ct=ce===3?Ee.length-1:Ee.length,Ke=0;Ke<ct;Ke++){Ke===1&&ce!==1&&te.writeVarint(Ve(2,ct-1));var bt=Ee[Ke].x-ye,qt=Ee[Ke].y-Ie;te.writeVarint(Ze(bt)),te.writeVarint(Ze(qt)),ye+=bt,Ie+=qt}ce===3&&te.writeVarint(Ve(7,1))}}function it(xe,te){var ee=typeof xe;ee==="string"?te.writeStringField(1,xe):ee==="boolean"?te.writeBooleanField(7,xe):ee==="number"&&(xe%1!=0?te.writeDoubleField(3,xe):xe<0?te.writeSVarintField(6,xe):te.writeVarintField(5,xe))}K.exports=Pe,K.exports.fromVectorTileJs=Pe,K.exports.fromGeojsonVt=function(xe,te){te=te||{};var ee={};for(var ce in xe)ee[ce]=new de(xe[ce].features,te),ee[ce].name=ce,ee[ce].version=te.version,ee[ce].extent=te.extent;return Pe({layers:ee})},K.exports.GeoJSONWrapper=de;var et=h.by(K.exports);const Ge={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:xe=>xe},rt=Math.fround||(ge=new Float32Array(1),xe=>(ge[0]=+xe,ge[0]));var ge;const ne=3,Ce=5,nt=6;class ht{constructor(te){this.options=Object.assign(Object.create(Ge),te),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(te){const{log:ee,minZoom:ce,maxZoom:ye}=this.options;ee&&console.time("total time");const Ie=`prepare ${te.length} points`;ee&&console.time(Ie),this.points=te;const Re=[];for(let Ee=0;Ee<te.length;Ee++){const Qe=te[Ee];if(!Qe.geometry)continue;const[ct,Ke]=Qe.geometry.coordinates,bt=rt(_t(ct)),qt=rt(wt(Ke));Re.push(bt,qt,1/0,Ee,-1,1),this.options.reduce&&Re.push(0)}let Be=this.trees[ye+1]=this._createTree(Re);ee&&console.timeEnd(Ie);for(let Ee=ye;Ee>=ce;Ee--){const Qe=+Date.now();Be=this.trees[Ee]=this._createTree(this._cluster(Be,Ee)),ee&&console.log("z%d: %d clusters in %dms",Ee,Be.numItems,+Date.now()-Qe)}return ee&&console.timeEnd("total time"),this}getClusters(te,ee){let ce=((te[0]+180)%360+360)%360-180;const ye=Math.max(-90,Math.min(90,te[1]));let Ie=te[2]===180?180:((te[2]+180)%360+360)%360-180;const Re=Math.max(-90,Math.min(90,te[3]));if(te[2]-te[0]>=360)ce=-180,Ie=180;else if(ce>Ie){const Ke=this.getClusters([ce,ye,180,Re],ee),bt=this.getClusters([-180,ye,Ie,Re],ee);return Ke.concat(bt)}const Be=this.trees[this._limitZoom(ee)],Ee=Be.range(_t(ce),wt(Re),_t(Ie),wt(ye)),Qe=Be.data,ct=[];for(const Ke of Ee){const bt=this.stride*Ke;ct.push(Qe[bt+Ce]>1?pt(Qe,bt,this.clusterProps):this.points[Qe[bt+ne]])}return ct}getChildren(te){const ee=this._getOriginId(te),ce=this._getOriginZoom(te),ye="No cluster with the specified id.",Ie=this.trees[ce];if(!Ie)throw new Error(ye);const Re=Ie.data;if(ee*this.stride>=Re.length)throw new Error(ye);const Be=this.options.radius/(this.options.extent*Math.pow(2,ce-1)),Ee=Ie.within(Re[ee*this.stride],Re[ee*this.stride+1],Be),Qe=[];for(const ct of Ee){const Ke=ct*this.stride;Re[Ke+4]===te&&Qe.push(Re[Ke+Ce]>1?pt(Re,Ke,this.clusterProps):this.points[Re[Ke+ne]])}if(Qe.length===0)throw new Error(ye);return Qe}getLeaves(te,ee,ce){const ye=[];return this._appendLeaves(ye,te,ee=ee||10,ce=ce||0,0),ye}getTile(te,ee,ce){const ye=this.trees[this._limitZoom(te)],Ie=Math.pow(2,te),{extent:Re,radius:Be}=this.options,Ee=Be/Re,Qe=(ce-Ee)/Ie,ct=(ce+1+Ee)/Ie,Ke={features:[]};return this._addTileFeatures(ye.range((ee-Ee)/Ie,Qe,(ee+1+Ee)/Ie,ct),ye.data,ee,ce,Ie,Ke),ee===0&&this._addTileFeatures(ye.range(1-Ee/Ie,Qe,1,ct),ye.data,Ie,ce,Ie,Ke),ee===Ie-1&&this._addTileFeatures(ye.range(0,Qe,Ee/Ie,ct),ye.data,-1,ce,Ie,Ke),Ke.features.length?Ke:null}getClusterExpansionZoom(te){let ee=this._getOriginZoom(te)-1;for(;ee<=this.options.maxZoom;){const ce=this.getChildren(te);if(ee++,ce.length!==1)break;te=ce[0].properties.cluster_id}return ee}_appendLeaves(te,ee,ce,ye,Ie){const Re=this.getChildren(ee);for(const Be of Re){const Ee=Be.properties;if(Ee&&Ee.cluster?Ie+Ee.point_count<=ye?Ie+=Ee.point_count:Ie=this._appendLeaves(te,Ee.cluster_id,ce,ye,Ie):Ie<ye?Ie++:te.push(Be),te.length===ce)break}return Ie}_createTree(te){const ee=new h.av(te.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ce=0;ce<te.length;ce+=this.stride)ee.add(te[ce],te[ce+1]);return ee.finish(),ee.data=te,ee}_addTileFeatures(te,ee,ce,ye,Ie,Re){for(const Be of te){const Ee=Be*this.stride,Qe=ee[Ee+Ce]>1;let ct,Ke,bt;if(Qe)ct=At(ee,Ee,this.clusterProps),Ke=ee[Ee],bt=ee[Ee+1];else{const Ir=this.points[ee[Ee+ne]];ct=Ir.properties;const[fr,kr]=Ir.geometry.coordinates;Ke=_t(fr),bt=wt(kr)}const qt={type:1,geometry:[[Math.round(this.options.extent*(Ke*Ie-ce)),Math.round(this.options.extent*(bt*Ie-ye))]],tags:ct};let Yt;Yt=Qe||this.options.generateId?ee[Ee+ne]:this.points[ee[Ee+ne]].id,Yt!==void 0&&(qt.id=Yt),Re.features.push(qt)}}_limitZoom(te){return Math.max(this.options.minZoom,Math.min(Math.floor(+te),this.options.maxZoom+1))}_cluster(te,ee){const{radius:ce,extent:ye,reduce:Ie,minPoints:Re}=this.options,Be=ce/(ye*Math.pow(2,ee)),Ee=te.data,Qe=[],ct=this.stride;for(let Ke=0;Ke<Ee.length;Ke+=ct){if(Ee[Ke+2]<=ee)continue;Ee[Ke+2]=ee;const bt=Ee[Ke],qt=Ee[Ke+1],Yt=te.within(Ee[Ke],Ee[Ke+1],Be),Ir=Ee[Ke+Ce];let fr=Ir;for(const kr of Yt){const yr=kr*ct;Ee[yr+2]>ee&&(fr+=Ee[yr+Ce])}if(fr>Ir&&fr>=Re){let kr,yr=bt*Ir,Mn=qt*Ir,mn=-1;const wr=((Ke/ct|0)<<5)+(ee+1)+this.points.length;for(const Fr of Yt){const an=Fr*ct;if(Ee[an+2]<=ee)continue;Ee[an+2]=ee;const Vn=Ee[an+Ce];yr+=Ee[an]*Vn,Mn+=Ee[an+1]*Vn,Ee[an+4]=wr,Ie&&(kr||(kr=this._map(Ee,Ke,!0),mn=this.clusterProps.length,this.clusterProps.push(kr)),Ie(kr,this._map(Ee,an)))}Ee[Ke+4]=wr,Qe.push(yr/fr,Mn/fr,1/0,wr,-1,fr),Ie&&Qe.push(mn)}else{for(let kr=0;kr<ct;kr++)Qe.push(Ee[Ke+kr]);if(fr>1)for(const kr of Yt){const yr=kr*ct;if(!(Ee[yr+2]<=ee)){Ee[yr+2]=ee;for(let Mn=0;Mn<ct;Mn++)Qe.push(Ee[yr+Mn])}}}}return Qe}_getOriginId(te){return te-this.points.length>>5}_getOriginZoom(te){return(te-this.points.length)%32}_map(te,ee,ce){if(te[ee+Ce]>1){const Re=this.clusterProps[te[ee+nt]];return ce?Object.assign({},Re):Re}const ye=this.points[te[ee+ne]].properties,Ie=this.options.map(ye);return ce&&Ie===ye?Object.assign({},Ie):Ie}}function pt(xe,te,ee){return{type:"Feature",id:xe[te+ne],properties:At(xe,te,ee),geometry:{type:"Point",coordinates:[(ce=xe[te],360*(ce-.5)),ot(xe[te+1])]}};var ce}function At(xe,te,ee){const ce=xe[te+Ce],ye=ce>=1e4?`${Math.round(ce/1e3)}k`:ce>=1e3?Math.round(ce/100)/10+"k":ce,Ie=xe[te+nt],Re=Ie===-1?{}:Object.assign({},ee[Ie]);return Object.assign(Re,{cluster:!0,cluster_id:xe[te+ne],point_count:ce,point_count_abbreviated:ye})}function _t(xe){return xe/360+.5}function wt(xe){const te=Math.sin(xe*Math.PI/180),ee=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return ee<0?0:ee>1?1:ee}function ot(xe){const te=(180-360*xe)*Math.PI/180;return 360*Math.atan(Math.exp(te))/Math.PI-90}function It(xe,te,ee,ce){let ye=ce;const Ie=te+(ee-te>>1);let Re,Be=ee-te;const Ee=xe[te],Qe=xe[te+1],ct=xe[ee],Ke=xe[ee+1];for(let bt=te+3;bt<ee;bt+=3){const qt=Ft(xe[bt],xe[bt+1],Ee,Qe,ct,Ke);if(qt>ye)Re=bt,ye=qt;else if(qt===ye){const Yt=Math.abs(bt-Ie);Yt<Be&&(Re=bt,Be=Yt)}}ye>ce&&(Re-te>3&&It(xe,te,Re,ce),xe[Re+2]=ye,ee-Re>3&&It(xe,Re,ee,ce))}function Ft(xe,te,ee,ce,ye,Ie){let Re=ye-ee,Be=Ie-ce;if(Re!==0||Be!==0){const Ee=((xe-ee)*Re+(te-ce)*Be)/(Re*Re+Be*Be);Ee>1?(ee=ye,ce=Ie):Ee>0&&(ee+=Re*Ee,ce+=Be*Ee)}return Re=xe-ee,Be=te-ce,Re*Re+Be*Be}function at(xe,te,ee,ce){const ye={id:xe??null,type:te,geometry:ee,tags:ce,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(te==="Point"||te==="MultiPoint"||te==="LineString")ar(ye,ee);else if(te==="Polygon")ar(ye,ee[0]);else if(te==="MultiLineString")for(const Ie of ee)ar(ye,Ie);else if(te==="MultiPolygon")for(const Ie of ee)ar(ye,Ie[0]);return ye}function ar(xe,te){for(let ee=0;ee<te.length;ee+=3)xe.minX=Math.min(xe.minX,te[ee]),xe.minY=Math.min(xe.minY,te[ee+1]),xe.maxX=Math.max(xe.maxX,te[ee]),xe.maxY=Math.max(xe.maxY,te[ee+1])}function jt(xe,te,ee,ce){if(!te.geometry)return;const ye=te.geometry.coordinates;if(ye&&ye.length===0)return;const Ie=te.geometry.type,Re=Math.pow(ee.tolerance/((1<<ee.maxZoom)*ee.extent),2);let Be=[],Ee=te.id;if(ee.promoteId?Ee=te.properties[ee.promoteId]:ee.generateId&&(Ee=ce||0),Ie==="Point")br(ye,Be);else if(Ie==="MultiPoint")for(const Qe of ye)br(Qe,Be);else if(Ie==="LineString")$e(ye,Be,Re,!1);else if(Ie==="MultiLineString"){if(ee.lineMetrics){for(const Qe of ye)Be=[],$e(Qe,Be,Re,!1),xe.push(at(Ee,"LineString",Be,te.properties));return}Er(ye,Be,Re,!1)}else if(Ie==="Polygon")Er(ye,Be,Re,!0);else{if(Ie!=="MultiPolygon"){if(Ie==="GeometryCollection"){for(const Qe of te.geometry.geometries)jt(xe,{id:Ee,geometry:Qe,properties:te.properties},ee,ce);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Qe of ye){const ct=[];Er(Qe,ct,Re,!0),Be.push(ct)}}xe.push(at(Ee,Ie,Be,te.properties))}function br(xe,te){te.push(hn(xe[0]),lr(xe[1]),0)}function $e(xe,te,ee,ce){let ye,Ie,Re=0;for(let Ee=0;Ee<xe.length;Ee++){const Qe=hn(xe[Ee][0]),ct=lr(xe[Ee][1]);te.push(Qe,ct,0),Ee>0&&(Re+=ce?(ye*ct-Qe*Ie)/2:Math.sqrt(Math.pow(Qe-ye,2)+Math.pow(ct-Ie,2))),ye=Qe,Ie=ct}const Be=te.length-3;te[2]=1,It(te,0,Be,ee),te[Be+2]=1,te.size=Math.abs(Re),te.start=0,te.end=te.size}function Er(xe,te,ee,ce){for(let ye=0;ye<xe.length;ye++){const Ie=[];$e(xe[ye],Ie,ee,ce),te.push(Ie)}}function hn(xe){return xe/360+.5}function lr(xe){const te=Math.sin(xe*Math.PI/180),ee=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return ee<0?0:ee>1?1:ee}function xr(xe,te,ee,ce,ye,Ie,Re,Be){if(ce/=te,Ie>=(ee/=te)&&Re<ce)return xe;if(Re<ee||Ie>=ce)return null;const Ee=[];for(const Qe of xe){const ct=Qe.geometry;let Ke=Qe.type;const bt=ye===0?Qe.minX:Qe.minY,qt=ye===0?Qe.maxX:Qe.maxY;if(bt>=ee&&qt<ce){Ee.push(Qe);continue}if(qt<ee||bt>=ce)continue;let Yt=[];if(Ke==="Point"||Ke==="MultiPoint")Ln(ct,Yt,ee,ce,ye);else if(Ke==="LineString")Nn(ct,Yt,ee,ce,ye,!1,Be.lineMetrics);else if(Ke==="MultiLineString")ta(ct,Yt,ee,ce,ye,!1);else if(Ke==="Polygon")ta(ct,Yt,ee,ce,ye,!0);else if(Ke==="MultiPolygon")for(const Ir of ct){const fr=[];ta(Ir,fr,ee,ce,ye,!0),fr.length&&Yt.push(fr)}if(Yt.length){if(Be.lineMetrics&&Ke==="LineString"){for(const Ir of Yt)Ee.push(at(Qe.id,Ke,Ir,Qe.tags));continue}Ke!=="LineString"&&Ke!=="MultiLineString"||(Yt.length===1?(Ke="LineString",Yt=Yt[0]):Ke="MultiLineString"),Ke!=="Point"&&Ke!=="MultiPoint"||(Ke=Yt.length===3?"Point":"MultiPoint"),Ee.push(at(Qe.id,Ke,Yt,Qe.tags))}}return Ee.length?Ee:null}function Ln(xe,te,ee,ce,ye){for(let Ie=0;Ie<xe.length;Ie+=3){const Re=xe[Ie+ye];Re>=ee&&Re<=ce&&Kn(te,xe[Ie],xe[Ie+1],xe[Ie+2])}}function Nn(xe,te,ee,ce,ye,Ie,Re){let Be=di(xe);const Ee=ye===0?Co:Mo;let Qe,ct,Ke=xe.start;for(let fr=0;fr<xe.length-3;fr+=3){const kr=xe[fr],yr=xe[fr+1],Mn=xe[fr+2],mn=xe[fr+3],wr=xe[fr+4],Fr=ye===0?kr:yr,an=ye===0?mn:wr;let Vn=!1;Re&&(Qe=Math.sqrt(Math.pow(kr-mn,2)+Math.pow(yr-wr,2))),Fr<ee?an>ee&&(ct=Ee(Be,kr,yr,mn,wr,ee),Re&&(Be.start=Ke+Qe*ct)):Fr>ce?an<ce&&(ct=Ee(Be,kr,yr,mn,wr,ce),Re&&(Be.start=Ke+Qe*ct)):Kn(Be,kr,yr,Mn),an<ee&&Fr>=ee&&(ct=Ee(Be,kr,yr,mn,wr,ee),Vn=!0),an>ce&&Fr<=ce&&(ct=Ee(Be,kr,yr,mn,wr,ce),Vn=!0),!Ie&&Vn&&(Re&&(Be.end=Ke+Qe*ct),te.push(Be),Be=di(xe)),Re&&(Ke+=Qe)}let bt=xe.length-3;const qt=xe[bt],Yt=xe[bt+1],Ir=ye===0?qt:Yt;Ir>=ee&&Ir<=ce&&Kn(Be,qt,Yt,xe[bt+2]),bt=Be.length-3,Ie&&bt>=3&&(Be[bt]!==Be[0]||Be[bt+1]!==Be[1])&&Kn(Be,Be[0],Be[1],Be[2]),Be.length&&te.push(Be)}function di(xe){const te=[];return te.size=xe.size,te.start=xe.start,te.end=xe.end,te}function ta(xe,te,ee,ce,ye,Ie){for(const Re of xe)Nn(Re,te,ee,ce,ye,Ie,!1)}function Kn(xe,te,ee,ce){xe.push(te,ee,ce)}function Co(xe,te,ee,ce,ye,Ie){const Re=(Ie-te)/(ce-te);return Kn(xe,Ie,ee+(ye-ee)*Re,1),Re}function Mo(xe,te,ee,ce,ye,Ie){const Re=(Ie-ee)/(ye-ee);return Kn(xe,te+(ce-te)*Re,Ie,1),Re}function yt(xe,te){const ee=[];for(let ce=0;ce<xe.length;ce++){const ye=xe[ce],Ie=ye.type;let Re;if(Ie==="Point"||Ie==="MultiPoint"||Ie==="LineString")Re=zi(ye.geometry,te);else if(Ie==="MultiLineString"||Ie==="Polygon"){Re=[];for(const Be of ye.geometry)Re.push(zi(Be,te))}else if(Ie==="MultiPolygon"){Re=[];for(const Be of ye.geometry){const Ee=[];for(const Qe of Be)Ee.push(zi(Qe,te));Re.push(Ee)}}ee.push(at(ye.id,Ie,Re,ye.tags))}return ee}function zi(xe,te){const ee=[];ee.size=xe.size,xe.start!==void 0&&(ee.start=xe.start,ee.end=xe.end);for(let ce=0;ce<xe.length;ce+=3)ee.push(xe[ce]+te,xe[ce+1],xe[ce+2]);return ee}function Tn(xe,te){if(xe.transformed)return xe;const ee=1<<xe.z,ce=xe.x,ye=xe.y;for(const Ie of xe.features){const Re=Ie.geometry,Be=Ie.type;if(Ie.geometry=[],Be===1)for(let Ee=0;Ee<Re.length;Ee+=2)Ie.geometry.push(Xn(Re[Ee],Re[Ee+1],te,ee,ce,ye));else for(let Ee=0;Ee<Re.length;Ee++){const Qe=[];for(let ct=0;ct<Re[Ee].length;ct+=2)Qe.push(Xn(Re[Ee][ct],Re[Ee][ct+1],te,ee,ce,ye));Ie.geometry.push(Qe)}}return xe.transformed=!0,xe}function Xn(xe,te,ee,ce,ye,Ie){return[Math.round(ee*(xe*ce-ye)),Math.round(ee*(te*ce-Ie))]}function ho(xe,te,ee,ce,ye){const Ie=te===ye.maxZoom?0:ye.tolerance/((1<<te)*ye.extent),Re={features:[],numPoints:0,numSimplified:0,numFeatures:xe.length,source:null,x:ee,y:ce,z:te,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Be of xe)St(Re,Be,Ie,ye);return Re}function St(xe,te,ee,ce){const ye=te.geometry,Ie=te.type,Re=[];if(xe.minX=Math.min(xe.minX,te.minX),xe.minY=Math.min(xe.minY,te.minY),xe.maxX=Math.max(xe.maxX,te.maxX),xe.maxY=Math.max(xe.maxY,te.maxY),Ie==="Point"||Ie==="MultiPoint")for(let Be=0;Be<ye.length;Be+=3)Re.push(ye[Be],ye[Be+1]),xe.numPoints++,xe.numSimplified++;else if(Ie==="LineString")vr(Re,ye,xe,ee,!1,!1);else if(Ie==="MultiLineString"||Ie==="Polygon")for(let Be=0;Be<ye.length;Be++)vr(Re,ye[Be],xe,ee,Ie==="Polygon",Be===0);else if(Ie==="MultiPolygon")for(let Be=0;Be<ye.length;Be++){const Ee=ye[Be];for(let Qe=0;Qe<Ee.length;Qe++)vr(Re,Ee[Qe],xe,ee,!0,Qe===0)}if(Re.length){let Be=te.tags||null;if(Ie==="LineString"&&ce.lineMetrics){Be={};for(const Qe in te.tags)Be[Qe]=te.tags[Qe];Be.mapbox_clip_start=ye.start/ye.size,Be.mapbox_clip_end=ye.end/ye.size}const Ee={geometry:Re,type:Ie==="Polygon"||Ie==="MultiPolygon"?3:Ie==="LineString"||Ie==="MultiLineString"?2:1,tags:Be};te.id!==null&&(Ee.id=te.id),xe.features.push(Ee)}}function vr(xe,te,ee,ce,ye,Ie){const Re=ce*ce;if(ce>0&&te.size<(ye?Re:ce))return void(ee.numPoints+=te.length/3);const Be=[];for(let Ee=0;Ee<te.length;Ee+=3)(ce===0||te[Ee+2]>Re)&&(ee.numSimplified++,Be.push(te[Ee],te[Ee+1])),ee.numPoints++;ye&&(function(Ee,Qe){let ct=0;for(let Ke=0,bt=Ee.length,qt=bt-2;Ke<bt;qt=Ke,Ke+=2)ct+=(Ee[Ke]-Ee[qt])*(Ee[Ke+1]+Ee[qt+1]);if(ct>0===Qe)for(let Ke=0,bt=Ee.length;Ke<bt/2;Ke+=2){const qt=Ee[Ke],Yt=Ee[Ke+1];Ee[Ke]=Ee[bt-2-Ke],Ee[Ke+1]=Ee[bt-1-Ke],Ee[bt-2-Ke]=qt,Ee[bt-1-Ke]=Yt}})(Be,Ie),xe.push(Be)}const nr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class pi{constructor(te,ee){const ce=(ee=this.options=(function(Ie,Re){for(const Be in Re)Ie[Be]=Re[Be];return Ie})(Object.create(nr),ee)).debug;if(ce&&console.time("preprocess data"),ee.maxZoom<0||ee.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ee.promoteId&&ee.generateId)throw new Error("promoteId and generateId cannot be used together.");let ye=(function(Ie,Re){const Be=[];if(Ie.type==="FeatureCollection")for(let Ee=0;Ee<Ie.features.length;Ee++)jt(Be,Ie.features[Ee],Re,Ee);else jt(Be,Ie.type==="Feature"?Ie:{geometry:Ie},Re);return Be})(te,ee);this.tiles={},this.tileCoords=[],ce&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ee.indexMaxZoom,ee.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ye=(function(Ie,Re){const Be=Re.buffer/Re.extent;let Ee=Ie;const Qe=xr(Ie,1,-1-Be,Be,0,-1,2,Re),ct=xr(Ie,1,1-Be,2+Be,0,-1,2,Re);return(Qe||ct)&&(Ee=xr(Ie,1,-Be,1+Be,0,-1,2,Re)||[],Qe&&(Ee=yt(Qe,1).concat(Ee)),ct&&(Ee=Ee.concat(yt(ct,-1)))),Ee})(ye,ee),ye.length&&this.splitTile(ye,0,0,0),ce&&(ye.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(te,ee,ce,ye,Ie,Re,Be){const Ee=[te,ee,ce,ye],Qe=this.options,ct=Qe.debug;for(;Ee.length;){ye=Ee.pop(),ce=Ee.pop(),ee=Ee.pop(),te=Ee.pop();const Ke=1<<ee,bt=ra(ee,ce,ye);let qt=this.tiles[bt];if(!qt&&(ct>1&&console.time("creation"),qt=this.tiles[bt]=ho(te,ee,ce,ye,Qe),this.tileCoords.push({z:ee,x:ce,y:ye}),ct)){ct>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ee,ce,ye,qt.numFeatures,qt.numPoints,qt.numSimplified),console.timeEnd("creation"));const Vn=`z${ee}`;this.stats[Vn]=(this.stats[Vn]||0)+1,this.total++}if(qt.source=te,Ie==null){if(ee===Qe.indexMaxZoom||qt.numPoints<=Qe.indexMaxPoints)continue}else{if(ee===Qe.maxZoom||ee===Ie)continue;if(Ie!=null){const Vn=Ie-ee;if(ce!==Re>>Vn||ye!==Be>>Vn)continue}}if(qt.source=null,te.length===0)continue;ct>1&&console.time("clipping");const Yt=.5*Qe.buffer/Qe.extent,Ir=.5-Yt,fr=.5+Yt,kr=1+Yt;let yr=null,Mn=null,mn=null,wr=null,Fr=xr(te,Ke,ce-Yt,ce+fr,0,qt.minX,qt.maxX,Qe),an=xr(te,Ke,ce+Ir,ce+kr,0,qt.minX,qt.maxX,Qe);te=null,Fr&&(yr=xr(Fr,Ke,ye-Yt,ye+fr,1,qt.minY,qt.maxY,Qe),Mn=xr(Fr,Ke,ye+Ir,ye+kr,1,qt.minY,qt.maxY,Qe),Fr=null),an&&(mn=xr(an,Ke,ye-Yt,ye+fr,1,qt.minY,qt.maxY,Qe),wr=xr(an,Ke,ye+Ir,ye+kr,1,qt.minY,qt.maxY,Qe),an=null),ct>1&&console.timeEnd("clipping"),Ee.push(yr||[],ee+1,2*ce,2*ye),Ee.push(Mn||[],ee+1,2*ce,2*ye+1),Ee.push(mn||[],ee+1,2*ce+1,2*ye),Ee.push(wr||[],ee+1,2*ce+1,2*ye+1)}}getTile(te,ee,ce){te=+te,ee=+ee,ce=+ce;const ye=this.options,{extent:Ie,debug:Re}=ye;if(te<0||te>24)return null;const Be=1<<te,Ee=ra(te,ee=ee+Be&Be-1,ce);if(this.tiles[Ee])return Tn(this.tiles[Ee],Ie);Re>1&&console.log("drilling down to z%d-%d-%d",te,ee,ce);let Qe,ct=te,Ke=ee,bt=ce;for(;!Qe&&ct>0;)ct--,Ke>>=1,bt>>=1,Qe=this.tiles[ra(ct,Ke,bt)];return Qe&&Qe.source?(Re>1&&(console.log("found parent tile z%d-%d-%d",ct,Ke,bt),console.time("drilling down")),this.splitTile(Qe.source,ct,Ke,bt,te,ee,ce),Re>1&&console.timeEnd("drilling down"),this.tiles[Ee]?Tn(this.tiles[Ee],Ie):null):null}}function ra(xe,te,ee){return 32*((1<<xe)*ee+te)+xe}function ur(xe,te){return te?xe.properties[te]:xe.id}function xa(xe,te){if(xe==null)return!0;if(xe.type==="Feature")return ur(xe,te)!=null;if(xe.type==="FeatureCollection"){const ee=new Set;for(const ce of xe.features){const ye=ur(ce,te);if(ye==null||ee.has(ye))return!1;ee.add(ye)}return!0}return!1}function qa(xe,te){const ee=new Map;if(xe!=null)if(xe.type==="Feature")ee.set(ur(xe,te),xe);else for(const ce of xe.features)ee.set(ur(ce,te),ce);return ee}class na extends A{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(te,ee){return h._(this,void 0,void 0,(function*(){const ce=te.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ye=this._geoJSONIndex.getTile(ce.z,ce.x,ce.y);if(!ye)return null;const Ie=new class{constructor(Be){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.X,this.length=Be.length,this._features=Be}feature(Be){return new class{constructor(Ee){this._feature=Ee,this.extent=h.X,this.type=Ee.type,this.properties=Ee.tags,"id"in Ee&&!isNaN(Ee.id)&&(this.id=parseInt(Ee.id,10))}loadGeometry(){if(this._feature.type===1){const Ee=[];for(const Qe of this._feature.geometry)Ee.push([new h.P(Qe[0],Qe[1])]);return Ee}{const Ee=[];for(const Qe of this._feature.geometry){const ct=[];for(const Ke of Qe)ct.push(new h.P(Ke[0],Ke[1]));Ee.push(ct)}return Ee}}toGeoJSON(Ee,Qe,ct){return L.call(this,Ee,Qe,ct)}}(this._features[Be])}}(ye.features);let Re=et(Ie);return Re.byteOffset===0&&Re.byteLength===Re.buffer.byteLength||(Re=new Uint8Array(Re)),{vectorTile:Ie,rawData:Re.buffer}}))}loadData(te){return h._(this,void 0,void 0,(function*(){var ee;(ee=this._pendingRequest)===null||ee===void 0||ee.abort();const ce=!!(te&&te.request&&te.request.collectResourceTiming)&&new h.bv(te.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(te,this._pendingRequest),this._geoJSONIndex=te.cluster?new ht((function({superclusterOptions:Re,clusterProperties:Be}){if(!Be||!Re)return Re;const Ee={},Qe={},ct={accumulated:null,zoom:0},Ke={properties:null},bt=Object.keys(Be);for(const qt of bt){const[Yt,Ir]=Be[qt],fr=h.bC(Ir),kr=h.bC(typeof Yt=="string"?[Yt,["accumulated"],["get",qt]]:Yt);Ee[qt]=fr.value,Qe[qt]=kr.value}return Re.map=qt=>{Ke.properties=qt;const Yt={};for(const Ir of bt)Yt[Ir]=Ee[Ir].evaluate(ct,Ke);return Yt},Re.reduce=(qt,Yt)=>{Ke.properties=Yt;for(const Ir of bt)ct.accumulated=qt[Ir],qt[Ir]=Qe[Ir].evaluate(ct,Ke)},Re})(te)).load((yield this._pendingData).features):(ye=yield this._pendingData,new pi(ye,te.geojsonVtOptions)),this.loaded={};const Ie={};if(ce){const Re=ce.finish();Re&&(Ie.resourceTiming={},Ie.resourceTiming[te.source]=JSON.parse(JSON.stringify(Re)))}return Ie}catch(Ie){if(delete this._pendingRequest,h.bB(Ie))return{abandoned:!0};throw Ie}var ye}))}getData(){return h._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(te){const ee=this.loaded;return ee&&ee[te.uid]?super.reloadTile(te):this.loadTile(te)}loadAndProcessGeoJSON(te,ee){return h._(this,void 0,void 0,(function*(){let ce=yield this.loadGeoJSON(te,ee);if(delete this._pendingRequest,typeof ce!="object")throw new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`);if(B(ce,!0),te.filter){const ye=h.bC(te.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ye.result==="error")throw new Error(ye.value.map((Re=>`${Re.key}: ${Re.message}`)).join(", "));ce={type:"FeatureCollection",features:ce.features.filter((Re=>ye.value.evaluate({zoom:0},Re)))}}return ce}))}loadGeoJSON(te,ee){return h._(this,void 0,void 0,(function*(){const{promoteId:ce}=te;if(te.request){const ye=yield h.h(te.request,ee);return this._dataUpdateable=xa(ye.data,ce)?qa(ye.data,ce):void 0,ye.data}if(typeof te.data=="string")try{const ye=JSON.parse(te.data);return this._dataUpdateable=xa(ye,ce)?qa(ye,ce):void 0,ye}catch{throw new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`)}if(!te.dataDiff)throw new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${te.source}`);return(function(ye,Ie,Re){var Be,Ee,Qe,ct;if(Ie.removeAll&&ye.clear(),Ie.remove)for(const Ke of Ie.remove)ye.delete(Ke);if(Ie.add)for(const Ke of Ie.add){const bt=ur(Ke,Re);bt!=null&&ye.set(bt,Ke)}if(Ie.update)for(const Ke of Ie.update){let bt=ye.get(Ke.id);if(bt==null)continue;const qt=!Ke.removeAllProperties&&(((Be=Ke.removeProperties)===null||Be===void 0?void 0:Be.length)>0||((Ee=Ke.addOrUpdateProperties)===null||Ee===void 0?void 0:Ee.length)>0);if((Ke.newGeometry||Ke.removeAllProperties||qt)&&(bt=Object.assign({},bt),ye.set(Ke.id,bt),qt&&(bt.properties=Object.assign({},bt.properties))),Ke.newGeometry&&(bt.geometry=Ke.newGeometry),Ke.removeAllProperties)bt.properties={};else if(((Qe=Ke.removeProperties)===null||Qe===void 0?void 0:Qe.length)>0)for(const Yt of Ke.removeProperties)Object.prototype.hasOwnProperty.call(bt.properties,Yt)&&delete bt.properties[Yt];if(((ct=Ke.addOrUpdateProperties)===null||ct===void 0?void 0:ct.length)>0)for(const{key:Yt,value:Ir}of Ke.addOrUpdateProperties)bt.properties[Yt]=Ir}})(this._dataUpdateable,te.dataDiff,ce),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(te){return h._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(te){return this._geoJSONIndex.getClusterExpansionZoom(te.clusterId)}getClusterChildren(te){return this._geoJSONIndex.getChildren(te.clusterId)}getClusterLeaves(te){return this._geoJSONIndex.getLeaves(te.clusterId,te.limit,te.offset)}}class Si{constructor(te){this.self=te,this.actor=new h.F(te),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ee,ce)=>{if(this.externalWorkerSourceTypes[ee])throw new Error(`Worker source with name "${ee}" already registered.`);this.externalWorkerSourceTypes[ee]=ce},this.self.addProtocol=h.bi,this.self.removeProtocol=h.bj,this.self.registerRTLTextPlugin=ee=>{if(h.bD.isParsed())throw new Error("RTL text plugin already registered.");h.bD.setMethods(ee)},this.actor.registerMessageHandler("LDT",((ee,ce)=>this._getDEMWorkerSource(ee,ce.source).loadTile(ce))),this.actor.registerMessageHandler("RDT",((ee,ce)=>h._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(ee,ce.source).removeTile(ce)})))),this.actor.registerMessageHandler("GCEZ",((ee,ce)=>h._(this,void 0,void 0,(function*(){return this._getWorkerSource(ee,ce.type,ce.source).getClusterExpansionZoom(ce)})))),this.actor.registerMessageHandler("GCC",((ee,ce)=>h._(this,void 0,void 0,(function*(){return this._getWorkerSource(ee,ce.type,ce.source).getClusterChildren(ce)})))),this.actor.registerMessageHandler("GCL",((ee,ce)=>h._(this,void 0,void 0,(function*(){return this._getWorkerSource(ee,ce.type,ce.source).getClusterLeaves(ce)})))),this.actor.registerMessageHandler("LD",((ee,ce)=>this._getWorkerSource(ee,ce.type,ce.source).loadData(ce))),this.actor.registerMessageHandler("GD",((ee,ce)=>this._getWorkerSource(ee,ce.type,ce.source).getData())),this.actor.registerMessageHandler("LT",((ee,ce)=>this._getWorkerSource(ee,ce.type,ce.source).loadTile(ce))),this.actor.registerMessageHandler("RT",((ee,ce)=>this._getWorkerSource(ee,ce.type,ce.source).reloadTile(ce))),this.actor.registerMessageHandler("AT",((ee,ce)=>this._getWorkerSource(ee,ce.type,ce.source).abortTile(ce))),this.actor.registerMessageHandler("RMT",((ee,ce)=>this._getWorkerSource(ee,ce.type,ce.source).removeTile(ce))),this.actor.registerMessageHandler("RS",((ee,ce)=>h._(this,void 0,void 0,(function*(){if(!this.workerSources[ee]||!this.workerSources[ee][ce.type]||!this.workerSources[ee][ce.type][ce.source])return;const ye=this.workerSources[ee][ce.type][ce.source];delete this.workerSources[ee][ce.type][ce.source],ye.removeSource!==void 0&&ye.removeSource(ce)})))),this.actor.registerMessageHandler("RM",(ee=>h._(this,void 0,void 0,(function*(){delete this.layerIndexes[ee],delete this.availableImages[ee],delete this.workerSources[ee],delete this.demWorkerSources[ee]})))),this.actor.registerMessageHandler("SR",((ee,ce)=>h._(this,void 0,void 0,(function*(){this.referrer=ce})))),this.actor.registerMessageHandler("SRPS",((ee,ce)=>this._syncRTLPluginState(ee,ce))),this.actor.registerMessageHandler("IS",((ee,ce)=>h._(this,void 0,void 0,(function*(){this.self.importScripts(ce)})))),this.actor.registerMessageHandler("SI",((ee,ce)=>this._setImages(ee,ce))),this.actor.registerMessageHandler("UL",((ee,ce)=>h._(this,void 0,void 0,(function*(){this._getLayerIndex(ee).update(ce.layers,ce.removedIds)})))),this.actor.registerMessageHandler("SL",((ee,ce)=>h._(this,void 0,void 0,(function*(){this._getLayerIndex(ee).replace(ce)}))))}_setImages(te,ee){return h._(this,void 0,void 0,(function*(){this.availableImages[te]=ee;for(const ce in this.workerSources[te]){const ye=this.workerSources[te][ce];for(const Ie in ye)ye[Ie].availableImages=ee}}))}_syncRTLPluginState(te,ee){return h._(this,void 0,void 0,(function*(){if(h.bD.isParsed())return h.bD.getState();if(ee.pluginStatus!=="loading")return h.bD.setState(ee),ee;const ce=ee.pluginURL;if(this.self.importScripts(ce),h.bD.isParsed()){const ye={pluginStatus:"loaded",pluginURL:ce};return h.bD.setState(ye),ye}throw h.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${ce}`)}))}_getAvailableImages(te){let ee=this.availableImages[te];return ee||(ee=[]),ee}_getLayerIndex(te){let ee=this.layerIndexes[te];return ee||(ee=this.layerIndexes[te]=new l),ee}_getWorkerSource(te,ee,ce){if(this.workerSources[te]||(this.workerSources[te]={}),this.workerSources[te][ee]||(this.workerSources[te][ee]={}),!this.workerSources[te][ee][ce]){const ye={sendAsync:(Ie,Re)=>(Ie.targetMapId=te,this.actor.sendAsync(Ie,Re))};switch(ee){case"vector":this.workerSources[te][ee][ce]=new A(ye,this._getLayerIndex(te),this._getAvailableImages(te));break;case"geojson":this.workerSources[te][ee][ce]=new na(ye,this._getLayerIndex(te),this._getAvailableImages(te));break;default:this.workerSources[te][ee][ce]=new this.externalWorkerSourceTypes[ee](ye,this._getLayerIndex(te),this._getAvailableImages(te))}}return this.workerSources[te][ee][ce]}_getDEMWorkerSource(te,ee){return this.demWorkerSources[te]||(this.demWorkerSources[te]={}),this.demWorkerSources[te][ee]||(this.demWorkerSources[te][ee]=new M),this.demWorkerSources[te][ee]}}return h.i(self)&&(self.worker=new Si(self)),Si})),s("index",["exports","./shared"],(function(h,l){var _="4.7.1";let w,E;const A={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:S=>new Promise(((i,f)=>{const g=requestAnimationFrame(i);S.signal.addEventListener("abort",(()=>{cancelAnimationFrame(g),f(l.c())}))})),getImageData(S,i=0){return this.getImageCanvasContext(S).getImageData(-i,-i,S.width+2*i,S.height+2*i)},getImageCanvasContext(S){const i=window.document.createElement("canvas"),f=i.getContext("2d",{willReadFrequently:!0});if(!f)throw new Error("failed to create canvas 2d context");return i.width=S.width,i.height=S.height,f.drawImage(S,0,0,S.width,S.height),f},resolveURL:S=>(w||(w=document.createElement("a")),w.href=S,w.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(E==null&&(E=matchMedia("(prefers-reduced-motion: reduce)")),E.matches)}};class M{static testProp(i){if(!M.docStyle)return i[0];for(let f=0;f<i.length;f++)if(i[f]in M.docStyle)return i[f];return i[0]}static create(i,f,g){const y=window.document.createElement(i);return f!==void 0&&(y.className=f),g&&g.appendChild(y),y}static createNS(i,f){return window.document.createElementNS(i,f)}static disableDrag(){M.docStyle&&M.selectProp&&(M.userSelect=M.docStyle[M.selectProp],M.docStyle[M.selectProp]="none")}static enableDrag(){M.docStyle&&M.selectProp&&(M.docStyle[M.selectProp]=M.userSelect)}static setTransform(i,f){i.style[M.transformProp]=f}static addEventListener(i,f,g,y={}){i.addEventListener(f,g,"passive"in y?y:y.capture)}static removeEventListener(i,f,g,y={}){i.removeEventListener(f,g,"passive"in y?y:y.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",M.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",M.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",M.suppressClickInternal,!0)}),0)}static getScale(i){const f=i.getBoundingClientRect();return{x:f.width/i.offsetWidth||1,y:f.height/i.offsetHeight||1,boundingClientRect:f}}static getPoint(i,f,g){const y=f.boundingClientRect;return new l.P((g.clientX-y.left)/f.x-i.clientLeft,(g.clientY-y.top)/f.y-i.clientTop)}static mousePos(i,f){const g=M.getScale(i);return M.getPoint(i,g,f)}static touchPos(i,f){const g=[],y=M.getScale(i);for(let b=0;b<f.length;b++)g.push(M.getPoint(i,y,f[b]));return g}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}M.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,M.selectProp=M.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),M.transformProp=M.testProp(["transform","WebkitTransform"]);const N={supported:!1,testSupport:function(S){!L&&B&&(K?Q(S):U=S)}};let U,B,L=!1,K=!1;function Q(S){const i=S.createTexture();S.bindTexture(S.TEXTURE_2D,i);try{if(S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,B),S.isContextLost())return;N.supported=!0}catch{}S.deleteTexture(i),L=!0}var J;typeof document<"u"&&(B=document.createElement("img"),B.onload=()=>{U&&Q(U),U=null,K=!0},B.onerror=()=>{L=!0,U=null},B.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(S){let i,f,g,y;S.resetRequestQueue=()=>{i=[],f=0,g=0,y={}},S.addThrottleControl=j=>{const $=g++;return y[$]=j,$},S.removeThrottleControl=j=>{delete y[j],k()},S.getImage=(j,$,G=!0)=>new Promise(((H,ae)=>{N.supported&&(j.headers||(j.headers={}),j.headers.accept="image/webp,*/*"),l.e(j,{type:"image"}),i.push({abortController:$,requestParameters:j,supportImageRefresh:G,state:"queued",onError:ue=>{ae(ue)},onSuccess:ue=>{H(ue)}}),k()}));const b=j=>l._(this,void 0,void 0,(function*(){j.state="running";const{requestParameters:$,supportImageRefresh:G,onError:H,onSuccess:ae,abortController:ue}=j,fe=G===!1&&!l.i(self)&&!l.g($.url)&&(!$.headers||Object.keys($.headers).reduce(((we,Me)=>we&&Me==="accept"),!0));f++;const pe=fe?D($,ue):l.m($,ue);try{const we=yield pe;delete j.abortController,j.state="completed",we.data instanceof HTMLImageElement||l.b(we.data)?ae(we):we.data&&ae({data:yield(ve=we.data,typeof createImageBitmap=="function"?l.d(ve):l.f(ve)),cacheControl:we.cacheControl,expires:we.expires})}catch(we){delete j.abortController,H(we)}finally{f--,k()}var ve})),k=()=>{const j=(()=>{for(const $ of Object.keys(y))if(y[$]())return!0;return!1})()?l.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let $=f;$<j&&i.length>0;$++){const G=i.shift();G.abortController.signal.aborted?$--:b(G)}},D=(j,$)=>new Promise(((G,H)=>{const ae=new Image,ue=j.url,fe=j.credentials;fe&&fe==="include"?ae.crossOrigin="use-credentials":(fe&&fe==="same-origin"||!l.s(ue))&&(ae.crossOrigin="anonymous"),$.signal.addEventListener("abort",(()=>{ae.src="",H(l.c())})),ae.fetchPriority="high",ae.onload=()=>{ae.onerror=ae.onload=null,G({data:ae})},ae.onerror=()=>{ae.onerror=ae.onload=null,$.signal.aborted||H(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ae.src=ue}))})(J||(J={})),J.resetRequestQueue();class ie{constructor(i){this._transformRequestFn=i}transformRequest(i,f){return this._transformRequestFn&&this._transformRequestFn(i,f)||{url:i}}setTransformRequest(i){this._transformRequestFn=i}}function Z(S){var i=new l.A(3);return i[0]=S[0],i[1]=S[1],i[2]=S[2],i}var X,le=function(S,i,f){return S[0]=i[0]-f[0],S[1]=i[1]-f[1],S[2]=i[2]-f[2],S};X=new l.A(3),l.A!=Float32Array&&(X[0]=0,X[1]=0,X[2]=0);var de=function(S){var i=S[0],f=S[1];return i*i+f*f};function Pe(S){const i=[];if(typeof S=="string")i.push({id:"default",url:S});else if(S&&S.length>0){const f=[];for(const{id:g,url:y}of S){const b=`${g}${y}`;f.indexOf(b)===-1&&(f.push(b),i.push({id:g,url:y}))}}return i}function Fe(S,i,f){const g=S.split("?");return g[0]+=`${i}${f}`,g.join("?")}(function(){var S=new l.A(2);l.A!=Float32Array&&(S[0]=0,S[1]=0)})();class be{constructor(i,f,g,y){this.context=i,this.format=g,this.texture=i.gl.createTexture(),this.update(f,y)}update(i,f,g){const{width:y,height:b}=i,k=!(this.size&&this.size[0]===y&&this.size[1]===b||g),{context:D}=this,{gl:j}=D;if(this.useMipmap=!!(f&&f.useMipmap),j.bindTexture(j.TEXTURE_2D,this.texture),D.pixelStoreUnpackFlipY.set(!1),D.pixelStoreUnpack.set(1),D.pixelStoreUnpackPremultiplyAlpha.set(this.format===j.RGBA&&(!f||f.premultiply!==!1)),k)this.size=[y,b],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.b(i)?j.texImage2D(j.TEXTURE_2D,0,this.format,this.format,j.UNSIGNED_BYTE,i):j.texImage2D(j.TEXTURE_2D,0,this.format,y,b,0,this.format,j.UNSIGNED_BYTE,i.data);else{const{x:$,y:G}=g||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.b(i)?j.texSubImage2D(j.TEXTURE_2D,0,$,G,j.RGBA,j.UNSIGNED_BYTE,i):j.texSubImage2D(j.TEXTURE_2D,0,$,G,y,b,j.RGBA,j.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&j.generateMipmap(j.TEXTURE_2D)}bind(i,f,g){const{context:y}=this,{gl:b}=y;b.bindTexture(b.TEXTURE_2D,this.texture),g!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=b.LINEAR),i!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,i),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,g||i),this.filter=i),f!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,f),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,f),this.wrap=f)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function Ue(S){const{userImage:i}=S;return!!(i&&i.render&&i.render())&&(S.data.replace(new Uint8Array(i.data.buffer)),!0)}class Ve extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:f,promiseResolve:g}of this.requestors)g(this._getImagesForIds(f));this.requestors=[]}}getImage(i){const f=this.images[i];if(f&&!f.data&&f.spriteData){const g=f.spriteData;f.data=new l.R({width:g.width,height:g.height},g.context.getImageData(g.x,g.y,g.width,g.height).data),f.spriteData=null}return f}addImage(i,f){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,f)&&(this.images[i]=f)}_validate(i,f){let g=!0;const y=f.data||f.spriteData;return this._validateStretch(f.stretchX,y&&y.width)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "stretchX" value`))),g=!1),this._validateStretch(f.stretchY,y&&y.height)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "stretchY" value`))),g=!1),this._validateContent(f.content,f)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "content" value`))),g=!1),g}_validateStretch(i,f){if(!i)return!0;let g=0;for(const y of i){if(y[0]<g||y[1]<y[0]||f<y[1])return!1;g=y[1]}return!0}_validateContent(i,f){if(!i)return!0;if(i.length!==4)return!1;const g=f.spriteData,y=g&&g.width||f.data.width,b=g&&g.height||f.data.height;return!(i[0]<0||y<i[0]||i[1]<0||b<i[1]||i[2]<0||y<i[2]||i[3]<0||b<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,f,g=!0){const y=this.getImage(i);if(g&&(y.data.width!==f.data.width||y.data.height!==f.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${f.data.width}x${f.data.height}).`);f.version=y.version+1,this.images[i]=f,this.updatedImages[i]=!0}removeImage(i){const f=this.images[i];delete this.images[i],delete this.patterns[i],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise(((f,g)=>{let y=!0;if(!this.isLoaded())for(const b of i)this.images[b]||(y=!1);this.isLoaded()||y?f(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:f})}))}_getImagesForIds(i){const f={};for(const g of i){let y=this.getImage(g);y||(this.fire(new l.k("styleimagemissing",{id:g})),y=this.getImage(g)),y?f[g]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:l.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return f}getPixelSize(){const{width:i,height:f}=this.atlasImage;return{width:i,height:f}}getPattern(i){const f=this.patterns[i],g=this.getImage(i);if(!g)return null;if(f&&f.position.version===g.version)return f.position;if(f)f.position.version=g.version;else{const y={w:g.data.width+2,h:g.data.height+2,x:0,y:0},b=new l.I(y,g);this.patterns[i]={bin:y,position:b}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const f=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new be(i,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const b in this.patterns)i.push(this.patterns[b].bin);const{w:f,h:g}=l.p(i),y=this.atlasImage;y.resize({width:f||1,height:g||1});for(const b in this.patterns){const{bin:k}=this.patterns[b],D=k.x+1,j=k.y+1,$=this.getImage(b).data,G=$.width,H=$.height;l.R.copy($,y,{x:0,y:0},{x:D,y:j},{width:G,height:H}),l.R.copy($,y,{x:0,y:H-1},{x:D,y:j-1},{width:G,height:1}),l.R.copy($,y,{x:0,y:0},{x:D,y:j+H},{width:G,height:1}),l.R.copy($,y,{x:G-1,y:0},{x:D-1,y:j},{width:1,height:H}),l.R.copy($,y,{x:0,y:0},{x:D+G,y:j},{width:1,height:H})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const f of i){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const g=this.getImage(f);g||l.w(`Image with ID: "${f}" was not found`),Ue(g)&&this.updateImage(f,g)}}}const Ze=1e20;function Ye(S,i,f,g,y,b,k,D,j){for(let $=i;$<i+g;$++)it(S,f*b+$,b,y,k,D,j);for(let $=f;$<f+y;$++)it(S,$*b+i,1,g,k,D,j)}function it(S,i,f,g,y,b,k){b[0]=0,k[0]=-Ze,k[1]=Ze,y[0]=S[i];for(let D=1,j=0,$=0;D<g;D++){y[D]=S[i+D*f];const G=D*D;do{const H=b[j];$=(y[D]-y[H]+G-H*H)/(D-H)/2}while($<=k[j]&&--j>-1);j++,b[j]=D,k[j]=$,k[j+1]=Ze}for(let D=0,j=0;D<g;D++){for(;k[j+1]<D;)j++;const $=b[j],G=D-$;S[i+D*f]=y[$]+G*G}}class et{constructor(i,f){this.requestManager=i,this.localIdeographFontFamily=f,this.entries={}}setURL(i){this.url=i}getGlyphs(i){return l._(this,void 0,void 0,(function*(){const f=[];for(const b in i)for(const k of i[b])f.push(this._getAndCacheGlyphsPromise(b,k));const g=yield Promise.all(f),y={};for(const{stack:b,id:k,glyph:D}of g)y[b]||(y[b]={}),y[b][k]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};return y}))}_getAndCacheGlyphsPromise(i,f){return l._(this,void 0,void 0,(function*(){let g=this.entries[i];g||(g=this.entries[i]={glyphs:{},requests:{},ranges:{}});let y=g.glyphs[f];if(y!==void 0)return{stack:i,id:f,glyph:y};if(y=this._tinySDF(g,i,f),y)return g.glyphs[f]=y,{stack:i,id:f,glyph:y};const b=Math.floor(f/256);if(256*b>65535)throw new Error("glyphs > 65535 not supported");if(g.ranges[b])return{stack:i,id:f,glyph:y};if(!this.url)throw new Error("glyphsUrl is not set");if(!g.requests[b]){const D=et.loadGlyphRange(i,b,this.url,this.requestManager);g.requests[b]=D}const k=yield g.requests[b];for(const D in k)this._doesCharSupportLocalGlyph(+D)||(g.glyphs[+D]=k[+D]);return g.ranges[b]=!0,{stack:i,id:f,glyph:k[f]||null}}))}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(i))}_tinySDF(i,f,g){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(g))return;let b=i.tinySDF;if(!b){let D="400";/bold/i.test(f)?D="900":/medium/i.test(f)?D="500":/light/i.test(f)&&(D="200"),b=i.tinySDF=new et.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:D})}const k=b.draw(String.fromCharCode(g));return{id:g,bitmap:new l.o({width:k.width||60,height:k.height||60},k.data),metrics:{width:k.glyphWidth/2||24,height:k.glyphHeight/2||24,left:k.glyphLeft/2+.5||0,top:k.glyphTop/2-27.5||-8,advance:k.glyphAdvance/2||24,isDoubleResolution:!0}}}}et.loadGlyphRange=function(S,i,f,g){return l._(this,void 0,void 0,(function*(){const y=256*i,b=y+255,k=g.transformRequest(f.replace("{fontstack}",S).replace("{range}",`${y}-${b}`),"Glyphs"),D=yield l.l(k,new AbortController);if(!D||!D.data)throw new Error(`Could not load glyph range. range: ${i}, ${y}-${b}`);const j={};for(const $ of l.n(D.data))j[$.id]=$;return j}))},et.TinySDF=class{constructor({fontSize:S=24,buffer:i=3,radius:f=8,cutoff:g=.25,fontFamily:y="sans-serif",fontWeight:b="normal",fontStyle:k="normal"}={}){this.buffer=i,this.cutoff=g,this.radius=f;const D=this.size=S+4*i,j=this._createCanvas(D),$=this.ctx=j.getContext("2d",{willReadFrequently:!0});$.font=`${k} ${b} ${S}px ${y}`,$.textBaseline="alphabetic",$.textAlign="left",$.fillStyle="black",this.gridOuter=new Float64Array(D*D),this.gridInner=new Float64Array(D*D),this.f=new Float64Array(D),this.z=new Float64Array(D+1),this.v=new Uint16Array(D)}_createCanvas(S){const i=document.createElement("canvas");return i.width=i.height=S,i}draw(S){const{width:i,actualBoundingBoxAscent:f,actualBoundingBoxDescent:g,actualBoundingBoxLeft:y,actualBoundingBoxRight:b}=this.ctx.measureText(S),k=Math.ceil(f),D=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-y))),j=Math.min(this.size-this.buffer,k+Math.ceil(g)),$=D+2*this.buffer,G=j+2*this.buffer,H=Math.max($*G,0),ae=new Uint8ClampedArray(H),ue={data:ae,width:$,height:G,glyphWidth:D,glyphHeight:j,glyphTop:k,glyphLeft:0,glyphAdvance:i};if(D===0||j===0)return ue;const{ctx:fe,buffer:pe,gridInner:ve,gridOuter:we}=this;fe.clearRect(pe,pe,D,j),fe.fillText(S,pe,pe+k);const Me=fe.getImageData(pe,pe,D,j);we.fill(Ze,0,H),ve.fill(0,0,H);for(let me=0;me<j;me++)for(let De=0;De<D;De++){const ze=Me.data[4*(me*D+De)+3]/255;if(ze===0)continue;const We=(me+pe)*$+De+pe;if(ze===1)we[We]=0,ve[We]=Ze;else{const lt=.5-ze;we[We]=lt>0?lt*lt:0,ve[We]=lt<0?lt*lt:0}}Ye(we,0,0,$,G,$,this.f,this.v,this.z),Ye(ve,pe,pe,D,j,$,this.f,this.v,this.z);for(let me=0;me<H;me++){const De=Math.sqrt(we[me])-Math.sqrt(ve[me]);ae[me]=Math.round(255-255*(De/this.radius+this.cutoff))}return ue}};class Ge{constructor(){this.specification=l.v.light.position}possiblyEvaluate(i,f){return l.x(i.expression.evaluate(f))}interpolate(i,f,g){return{x:l.y.number(i.x,f.x,g),y:l.y.number(i.y,f.y,g),z:l.y.number(i.z,f.z,g)}}}let rt;class ge extends l.E{constructor(i){super(),rt=rt||new l.q({anchor:new l.D(l.v.light.anchor),position:new Ge,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(rt),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,f={}){if(!this._validate(l.r,i,f))for(const g in i){const y=i[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),y):this._transitionable.setValue(g,y)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,f,g){return(!g||g.validate!==!1)&&l.t(this,i.call(l.u,{value:f,style:{glyphs:!0,sprite:!0},styleSpec:l.v}))}}const ne=new l.q({"sky-color":new l.D(l.v.sky["sky-color"]),"horizon-color":new l.D(l.v.sky["horizon-color"]),"fog-color":new l.D(l.v.sky["fog-color"]),"fog-ground-blend":new l.D(l.v.sky["fog-ground-blend"]),"horizon-fog-blend":new l.D(l.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new l.D(l.v.sky["sky-horizon-blend"]),"atmosphere-blend":new l.D(l.v.sky["atmosphere-blend"])});class Ce extends l.E{constructor(i){super(),this._transitionable=new l.T(ne),this.setSky(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new l.z(0))}setSky(i,f={}){if(!this._validate(l.B,i,f)){i||(i={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const g in i){const y=i[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),y):this._transitionable.setValue(g,y)}}}getSky(){return this._transitionable.serialize()}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,f,g={}){return(g==null?void 0:g.validate)!==!1&&l.t(this,i.call(l.u,l.e({value:f,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}calculateFogBlendOpacity(i){return i<60?0:i<70?(i-60)/10:1}}class nt{constructor(i,f){this.width=i,this.height=f,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,f){const g=i.join(",")+String(f);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(i,f)),this.dashEntry[g]}getDashRanges(i,f,g){const y=[];let b=i.length%2==1?-i[i.length-1]*g:0,k=i[0]*g,D=!0;y.push({left:b,right:k,isDash:D,zeroLength:i[0]===0});let j=i[0];for(let $=1;$<i.length;$++){D=!D;const G=i[$];b=j*g,j+=G,k=j*g,y.push({left:b,right:k,isDash:D,zeroLength:G===0})}return y}addRoundDash(i,f,g){const y=f/2;for(let b=-g;b<=g;b++){const k=this.width*(this.nextRow+g+b);let D=0,j=i[D];for(let $=0;$<this.width;$++){$/j.right>1&&(j=i[++D]);const G=Math.abs($-j.left),H=Math.abs($-j.right),ae=Math.min(G,H);let ue;const fe=b/g*(y+1);if(j.isDash){const pe=y-Math.abs(fe);ue=Math.sqrt(ae*ae+pe*pe)}else ue=y-Math.sqrt(ae*ae+fe*fe);this.data[k+$]=Math.max(0,Math.min(255,ue+128))}}}addRegularDash(i){for(let D=i.length-1;D>=0;--D){const j=i[D],$=i[D+1];j.zeroLength?i.splice(D,1):$&&$.isDash===j.isDash&&($.left=j.left,i.splice(D,1))}const f=i[0],g=i[i.length-1];f.isDash===g.isDash&&(f.left=g.left-this.width,g.right=f.right+this.width);const y=this.width*this.nextRow;let b=0,k=i[b];for(let D=0;D<this.width;D++){D/k.right>1&&(k=i[++b]);const j=Math.abs(D-k.left),$=Math.abs(D-k.right),G=Math.min(j,$);this.data[y+D]=Math.max(0,Math.min(255,(k.isDash?G:-G)+128))}}addDash(i,f){const g=f?7:0,y=2*g+1;if(this.nextRow+y>this.height)return l.w("LineAtlas out of space"),null;let b=0;for(let D=0;D<i.length;D++)b+=i[D];if(b!==0){const D=this.width/b,j=this.getDashRanges(i,this.width,D);f?this.addRoundDash(j,D,g):this.addRegularDash(j)}const k={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:b};return this.nextRow+=y,this.dirty=!0,k}bind(i){const f=i.gl;this.texture?(f.bindTexture(f.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,f.texSubImage2D(f.TEXTURE_2D,0,0,0,this.width,this.height,f.ALPHA,f.UNSIGNED_BYTE,this.data))):(this.texture=f.createTexture(),f.bindTexture(f.TEXTURE_2D,this.texture),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texImage2D(f.TEXTURE_2D,0,f.ALPHA,this.width,this.height,0,f.ALPHA,f.UNSIGNED_BYTE,this.data))}}const ht="maplibre_preloaded_worker_pool";class pt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<pt.workerCount;)this.workers.push(new Worker(l.a.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach((f=>{f.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[ht]}numActive(){return Object.keys(this.active).length}}const At=Math.floor(A.hardwareConcurrency/2);let _t,wt;function ot(){return _t||(_t=new pt),_t}pt.workerCount=l.C(globalThis)?Math.max(Math.min(At,3),1):1;class It{constructor(i,f){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=f;const g=this.workerPool.acquire(f);for(let y=0;y<g.length;y++){const b=new l.F(g[y],f);b.name=`Worker ${y}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,f){const g=[];for(const y of this.actors)g.push(y.sendAsync({type:i,data:f}));return Promise.all(g)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach((f=>{f.remove()})),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,f){for(const g of this.actors)g.registerMessageHandler(i,f)}}function Ft(){return wt||(wt=new It(ot(),l.G),wt.registerMessageHandler("GR",((S,i,f)=>l.m(i,f)))),wt}function at(S,i){const f=l.H();return l.J(f,f,[1,1,0]),l.K(f,f,[.5*S.width,.5*S.height,1]),l.L(f,f,S.calculatePosMatrix(i.toUnwrapped()))}function ar(S,i,f,g,y,b){const k=(function(H,ae,ue){if(H)for(const fe of H){const pe=ae[fe];if(pe&&pe.source===ue&&pe.type==="fill-extrusion")return!0}else for(const fe in ae){const pe=ae[fe];if(pe.source===ue&&pe.type==="fill-extrusion")return!0}return!1})(y&&y.layers,i,S.id),D=b.maxPitchScaleFactor(),j=S.tilesIn(g,D,k);j.sort(jt);const $=[];for(const H of j)$.push({wrappedTileID:H.tileID.wrapped().key,queryResults:H.tile.queryRenderedFeatures(i,f,S._state,H.queryGeometry,H.cameraQueryGeometry,H.scale,y,b,D,at(S.transform,H.tileID))});const G=(function(H){const ae={},ue={};for(const fe of H){const pe=fe.queryResults,ve=fe.wrappedTileID,we=ue[ve]=ue[ve]||{};for(const Me in pe){const me=pe[Me],De=we[Me]=we[Me]||{},ze=ae[Me]=ae[Me]||[];for(const We of me)De[We.featureIndex]||(De[We.featureIndex]=!0,ze.push(We))}}return ae})($);for(const H in G)G[H].forEach((ae=>{const ue=ae.feature,fe=S.getFeatureState(ue.layer["source-layer"],ue.id);ue.source=ue.layer.source,ue.layer["source-layer"]&&(ue.sourceLayer=ue.layer["source-layer"]),ue.state=fe}));return G}function jt(S,i){const f=S.tileID,g=i.tileID;return f.overscaledZ-g.overscaledZ||f.canonical.y-g.canonical.y||f.wrap-g.wrap||f.canonical.x-g.canonical.x}function br(S,i,f){return l._(this,void 0,void 0,(function*(){let g=S;if(S.url?g=(yield l.h(i.transformRequest(S.url,"Source"),f)).data:yield A.frameAsync(f),!g)return null;const y=l.M(l.e(g,S),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in g&&g.vector_layers&&(y.vectorLayerIds=g.vector_layers.map((b=>b.id))),y}))}class $e{constructor(i,f){i&&(f?this.setSouthWest(i).setNorthEast(f):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof l.N?new l.N(i.lng,i.lat):l.N.convert(i),this}setSouthWest(i){return this._sw=i instanceof l.N?new l.N(i.lng,i.lat):l.N.convert(i),this}extend(i){const f=this._sw,g=this._ne;let y,b;if(i instanceof l.N)y=i,b=i;else{if(!(i instanceof $e))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend($e.convert(i)):this.extend(l.N.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(l.N.convert(i)):this;if(y=i._sw,b=i._ne,!y||!b)return this}return f||g?(f.lng=Math.min(y.lng,f.lng),f.lat=Math.min(y.lat,f.lat),g.lng=Math.max(b.lng,g.lng),g.lat=Math.max(b.lat,g.lat)):(this._sw=new l.N(y.lng,y.lat),this._ne=new l.N(b.lng,b.lat)),this}getCenter(){return new l.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.N(this.getWest(),this.getNorth())}getSouthEast(){return new l.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:f,lat:g}=l.N.convert(i);let y=this._sw.lng<=f&&f<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=f&&f>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&y}static convert(i){return i instanceof $e?i:i&&new $e(i)}static fromLngLat(i,f=0){const g=360*f/40075017,y=g/Math.cos(Math.PI/180*i.lat);return new $e(new l.N(i.lng-y,i.lat-g),new l.N(i.lng+y,i.lat+g))}adjustAntiMeridian(){const i=new l.N(this._sw.lng,this._sw.lat),f=new l.N(this._ne.lng,this._ne.lat);return new $e(i,i.lng>f.lng?new l.N(f.lng+360,f.lat):f)}}class Er{constructor(i,f,g){this.bounds=$e.convert(this.validateBounds(i)),this.minzoom=f||0,this.maxzoom=g||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const f=Math.pow(2,i.z),g=Math.floor(l.O(this.bounds.getWest())*f),y=Math.floor(l.Q(this.bounds.getNorth())*f),b=Math.ceil(l.O(this.bounds.getEast())*f),k=Math.ceil(l.Q(this.bounds.getSouth())*f);return i.x>=g&&i.x<b&&i.y>=y&&i.y<k}}class hn extends l.E{constructor(i,f,g,y){if(super(),this.id=i,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.M(f,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return l._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield br(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i&&(l.e(this,i),i.bounds&&(this.tileBounds=new Er(i.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new l.j(i))}}))}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty((()=>{this._options.tiles=i})),this}setUrl(i){return this.setSourceProperty((()=>{this.url=i,this._options.url=i})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return l.e({},this._options)}loadTile(i){return l._(this,void 0,void 0,(function*(){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(f,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};g.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise(((b,k)=>{i.reloadPromise={resolve:b,reject:k}}))}else i.actor=this.dispatcher.getActor(),y="LT";i.abortController=new AbortController;try{const b=yield i.actor.sendAsync({type:y,data:g},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,b)}catch(b){if(delete i.abortController,i.aborted)return;if(b&&b.status!==404)throw b;this._afterTileLoadWorkerResponse(i,null)}}))}_afterTileLoadWorkerResponse(i,f){if(f&&f.resourceTiming&&(i.resourceTiming=f.resourceTiming),f&&this.map._refreshExpiredTiles&&i.setExpiryData(f),i.loadVectorData(f,this.map.painter),i.reloadPromise){const g=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(g.resolve).catch(g.reject)}}abortTile(i){return l._(this,void 0,void 0,(function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))}))}unloadTile(i){return l._(this,void 0,void 0,(function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class lr extends l.E{constructor(i,f,g,y){super(),this.id=i,this.dispatcher=g,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},f),l.e(this,l.M(f,["url","scheme","tileSize"]))}load(){return l._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield br(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,i&&(l.e(this,i),i.bounds&&(this.tileBounds=new Er(i.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new l.j(i))}}))}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load()}setTiles(i){return this.setSourceProperty((()=>{this._options.tiles=i})),this}setUrl(i){return this.setSourceProperty((()=>{this.url=i,this._options.url=i})),this}serialize(){return l.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return l._(this,void 0,void 0,(function*(){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{const g=yield J.getImage(this.map._requestManager.transformRequest(f,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(g&&g.data){this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&i.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const y=this.map.painter.context,b=y.gl,k=g.data;i.texture=this.map.painter.getTileTexture(k.width),i.texture?i.texture.update(k,{useMipmap:!0}):(i.texture=new be(y,k,b.RGBA,{useMipmap:!0}),i.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST)),i.state="loaded"}}catch(g){if(delete i.abortController,i.aborted)i.state="unloaded";else if(g)throw i.state="errored",g}}))}abortTile(i){return l._(this,void 0,void 0,(function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)}))}unloadTile(i){return l._(this,void 0,void 0,(function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)}))}hasTransition(){return!1}}class xr extends lr{constructor(i,f,g,y){super(i,f,g,y),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},f),this.encoding=f.encoding||"mapbox",this.redFactor=f.redFactor,this.greenFactor=f.greenFactor,this.blueFactor=f.blueFactor,this.baseShift=f.baseShift}loadTile(i){return l._(this,void 0,void 0,(function*(){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(f,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{const y=yield J.getImage(g,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(y&&y.data){const b=y.data;this.map._refreshExpiredTiles&&y.cacheControl&&y.expires&&i.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const k=l.b(b)&&l.U()?b:yield this.readImageNow(b),D={type:this.type,uid:i.uid,source:this.id,rawImageData:k,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();const j=yield i.actor.sendAsync({type:"LDT",data:D});i.dem=j,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(y){if(delete i.abortController,i.aborted)i.state="unloaded";else if(y)throw i.state="errored",y}}))}readImageNow(i){return l._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&l.V()){const f=i.width+2,g=i.height+2;try{return new l.R({width:f,height:g},yield l.W(i,-1,-1,f,g))}catch{}}return A.getImageData(i,1)}))}_getNeighboringTiles(i){const f=i.canonical,g=Math.pow(2,f.z),y=(f.x-1+g)%g,b=f.x===0?i.wrap-1:i.wrap,k=(f.x+1+g)%g,D=f.x+1===g?i.wrap+1:i.wrap,j={};return j[new l.S(i.overscaledZ,b,f.z,y,f.y).key]={backfilled:!1},j[new l.S(i.overscaledZ,D,f.z,k,f.y).key]={backfilled:!1},f.y>0&&(j[new l.S(i.overscaledZ,b,f.z,y,f.y-1).key]={backfilled:!1},j[new l.S(i.overscaledZ,i.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},j[new l.S(i.overscaledZ,D,f.z,k,f.y-1).key]={backfilled:!1}),f.y+1<g&&(j[new l.S(i.overscaledZ,b,f.z,y,f.y+1).key]={backfilled:!1},j[new l.S(i.overscaledZ,i.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},j[new l.S(i.overscaledZ,D,f.z,k,f.y+1).key]={backfilled:!1}),j}unloadTile(i){return l._(this,void 0,void 0,(function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))}))}}class Ln extends l.E{constructor(i,f,g,y){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=g.getActor(),this.setEventedParent(y),this._data=f.data,this._options=l.e({},f),this._collectResourceTiming=f.collectResourceTiming,f.maxzoom!==void 0&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId;const b=l.X/this.tileSize;f.clusterMaxZoom!==void 0&&this.maxzoom<=f.clusterMaxZoom&&l.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${f.clusterMaxZoom}".`),this.workerOptions=l.e({source:this.id,cluster:f.cluster||!1,geojsonVtOptions:{buffer:(f.buffer!==void 0?f.buffer:128)*b,tolerance:(f.tolerance!==void 0?f.tolerance:.375)*b,extent:l.X,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:f.clusterMaxZoom!==void 0?f.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,f.clusterMinPoints||2),extent:l.X,radius:(f.clusterRadius||50)*b,log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return l._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}getData(){return l._(this,void 0,void 0,(function*(){const i=l.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:i})}))}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,f,g){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:f,offset:g}})}_updateWorkerData(i){return l._(this,void 0,void 0,(function*(){const f=l.e({type:this.type},this.workerOptions);i?f.dataDiff=i:typeof this._data=="string"?(f.request=this.map._requestManager.transformRequest(A.resolveURL(this._data),"Source"),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"}));try{const g=yield this.actor.sendAsync({type:"LD",data:f});if(this._pendingLoads--,this._removed||g.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let y=null;g.resourceTiming&&g.resourceTiming[this.id]&&(y=g.resourceTiming[this.id].slice(0));const b={dataType:"source"};this._collectResourceTiming&&y&&y.length>0&&l.e(b,{resourceTiming:y}),this.fire(new l.k("data",Object.assign(Object.assign({},b),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},b),{sourceDataType:"content"})))}catch(g){if(this._pendingLoads--,this._removed)return void this.fire(new l.k("dataabort",{dataType:"source"}));this.fire(new l.j(g))}}))}loaded(){return this._pendingLoads===0}loadTile(i){return l._(this,void 0,void 0,(function*(){const f=i.actor?"RT":"LT";i.actor=this.actor;const g={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.abortController=new AbortController;const y=yield this.actor.sendAsync({type:f,data:g},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(y,this.map.painter,f==="RT")}))}abortTile(i){return l._(this,void 0,void 0,(function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0}))}unloadTile(i){return l._(this,void 0,void 0,(function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return l.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Nn=l.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class di extends l.E{constructor(i,f,g,y){super(),this.id=i,this.dispatcher=g,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=f}load(i){return l._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const f=yield J.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,f&&f.data&&(this.image=f.data,i&&(this.coordinates=i),this._finishLoading())}catch(f){this._request=null,this._loaded=!0,this.fire(new l.j(f))}}))}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;const f=i.map(l.Z.fromLngLat);this.tileID=(function(y){let b=1/0,k=1/0,D=-1/0,j=-1/0;for(const ae of y)b=Math.min(b,ae.x),k=Math.min(k,ae.y),D=Math.max(D,ae.x),j=Math.max(j,ae.y);const $=Math.max(D-b,j-k),G=Math.max(0,Math.floor(-Math.log($)/Math.LN2)),H=Math.pow(2,G);return new l.a1(G,Math.floor((b+D)/2*H),Math.floor((k+j)/2*H))})(f),this.minzoom=this.maxzoom=this.tileID.z;const g=f.map((y=>this.tileID.getTilePoint(y)._round()));return this._boundsArray=new l.$,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,l.X,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,l.X),this._boundsArray.emplaceBack(g[2].x,g[2].y,l.X,l.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,f=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Nn.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new be(i,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let g=!1;for(const y in this.tiles){const b=this.tiles[y];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,g=!0)}g&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return l._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ta extends di{constructor(i,f,g,y){super(i,f,g,y),this.roundZoom=!0,this.type="video",this.options=f}load(){return l._(this,void 0,void 0,(function*(){this._loaded=!1;const i=this.options;this.urls=[];for(const f of i.urls)this.urls.push(this.map._requestManager.transformRequest(f,"Source").url);try{const f=yield l.a3(this.urls);if(this._loaded=!0,!f)return;this.video=f,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(f){this.fire(new l.j(f))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const f=this.video.seekable;i<f.start(0)||i>f.end(0)?this.fire(new l.j(new l.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${f.start(0)} and ${f.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,f=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Nn.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,this.video)):(this.texture=new be(i,this.video,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let g=!1;for(const y in this.tiles){const b=this.tiles[y];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,g=!0)}g&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Kn extends di{constructor(i,f,g,y){super(i,f,g,y),f.coordinates?Array.isArray(f.coordinates)&&f.coordinates.length===4&&!f.coordinates.some((b=>!Array.isArray(b)||b.length!==2||b.some((k=>typeof k!="number"))))||this.fire(new l.j(new l.a2(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.a2(`sources.${i}`,null,'missing required property "coordinates"'))),f.animate&&typeof f.animate!="boolean"&&this.fire(new l.j(new l.a2(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),f.canvas?typeof f.canvas=="string"||f.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.a2(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.a2(`sources.${i}`,null,'missing required property "canvas"'))),this.options=f,this.animate=f.animate===void 0||f.animate}load(){return l._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const f=this.map.painter.context,g=f.gl;this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,Nn.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new be(f,this.canvas,g.RGBA,{premultiply:!0});let y=!1;for(const b in this.tiles){const k=this.tiles[b];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,y=!0)}y&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Co={},Mo=S=>{switch(S){case"geojson":return Ln;case"image":return di;case"raster":return lr;case"raster-dem":return xr;case"vector":return hn;case"video":return ta;case"canvas":return Kn}return Co[S]},yt="RTLPluginLoaded";class zi extends l.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ft()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch((f=>{throw this.status="error",f}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return l._(this,arguments,void 0,(function*(f,g=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=A.resolveURL(f),!this.url)throw new Error(`requested url ${f} is invalid`);if(this.status==="unavailable"){if(!g)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return l._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new l.k(yt))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Tn=null;function Xn(){return Tn||(Tn=new zi),Tn}class ho{constructor(i,f){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=l.a4(),this.uses=0,this.tileSize=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const f=i+this.timeAdded;f<this.fadeEndTime||(this.fadeEndTime=f)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,f,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=(function(y,b){const k={};if(!b)return k;for(const D of y){const j=D.layerIds.map(($=>b.getLayer($))).filter(Boolean);if(j.length!==0){D.layers=j,D.stateDependentLayerIds&&(D.stateDependentLayers=D.stateDependentLayerIds.map(($=>j.filter((G=>G.id===$))[0])));for(const $ of j)k[$.id]=D}}return k})(i.buckets,f.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const b=this.buckets[y];if(b instanceof l.a6){if(this.hasSymbolBuckets=!0,!g)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const b=this.buckets[y];if(b instanceof l.a6&&b.hasRTLText){this.hasRTLText=!0,Xn().lazyLoad();break}}this.queryPadding=0;for(const y in this.buckets){const b=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,f.style.getLayer(y).queryRadius(b))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new l.a5}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const g in this.buckets){const y=this.buckets[g];y.uploadPending()&&y.upload(i)}const f=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new be(i,this.imageAtlas.image,f.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new be(i,this.glyphAtlasImage,f.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,f,g,y,b,k,D,j,$,G){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:b,scale:k,tileSize:this.tileSize,pixelPosMatrix:G,transform:j,params:D,queryPadding:this.queryPadding*$},i,f,g):{}}querySourceFeatures(i,f){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const y=g.loadVTLayers(),b=f&&f.sourceLayer?f.sourceLayer:"",k=y._geojsonTileLayer||y[b];if(!k)return;const D=l.a7(f&&f.filter),{z:j,x:$,y:G}=this.tileID.canonical,H={z:j,x:$,y:G};for(let ae=0;ae<k.length;ae++){const ue=k.feature(ae);if(D.needGeometry){const ve=l.a8(ue,!0);if(!D.filter(new l.z(this.tileID.overscaledZ),ve,this.tileID.canonical))continue}else if(!D.filter(new l.z(this.tileID.overscaledZ),ue))continue;const fe=g.getId(ue,b),pe=new l.a9(ue,j,$,G,fe);pe.tile=H,i.push(pe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const f=this.expirationTime;if(i.cacheControl){const g=l.aa(i.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const g=Date.now();let y=!1;if(this.expirationTime>g)y=!1;else if(f)if(this.expirationTime<f)y=!0;else{const b=this.expirationTime-f;b?this.expirationTime=g+Math.max(b,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,f){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const g=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!f.style.hasLayer(y))continue;const b=this.buckets[y],k=b.layers[0].sourceLayer||"_geojsonTileLayer",D=g[k],j=i[k];if(!D||!j||Object.keys(j).length===0)continue;b.update(j,D,this.imageAtlas&&this.imageAtlas.patternPositions||{});const $=f&&f.style&&f.style.getLayer(y);$&&(this.queryPadding=Math.max(this.queryPadding,$.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<A.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=A.now()+i}setDependencies(i,f){const g={};for(const y of f)g[y]=!0;this.dependencies[i]=g}hasDependency(i,f){for(const g of i){const y=this.dependencies[g];if(y){for(const b of f)if(y[b])return!0}}return!1}}class St{constructor(i,f){this.max=i,this.onRemove=f,this.reset()}reset(){for(const i in this.data)for(const f of this.data[i])f.timeout&&clearTimeout(f.timeout),this.onRemove(f.value);return this.data={},this.order=[],this}add(i,f,g){const y=i.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const b={value:f,timeout:void 0};if(g!==void 0&&(b.timeout=setTimeout((()=>{this.remove(i,b)}),g)),this.data[y].push(b),this.order.push(y),this.order.length>this.max){const k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const f=this.data[i].shift();return f.timeout&&clearTimeout(f.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),f.value}getByKey(i){const f=this.data[i];return f?f[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,f){if(!this.has(i))return this;const g=i.wrapped().key,y=f===void 0?0:this.data[g].indexOf(f),b=this.data[g][y];return this.data[g].splice(y,1),b.timeout&&clearTimeout(b.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(b.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const f=this._getAndRemoveByKey(this.order[0]);f&&this.onRemove(f)}return this}filter(i){const f=[];for(const g in this.data)for(const y of this.data[g])i(y.value)||f.push(y);for(const g of f)this.remove(g.value.tileID,g)}}class vr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,f,g){const y=String(f);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][y]=this.stateChanges[i][y]||{},l.e(this.stateChanges[i][y],g),this.deletedStates[i]===null){this.deletedStates[i]={};for(const b in this.state[i])b!==y&&(this.deletedStates[i][b]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][y]===null){this.deletedStates[i][y]={};for(const b in this.state[i][y])g[b]||(this.deletedStates[i][y][b]=null)}else for(const b in g)this.deletedStates[i]&&this.deletedStates[i][y]&&this.deletedStates[i][y][b]===null&&delete this.deletedStates[i][y][b]}removeFeatureState(i,f,g){if(this.deletedStates[i]===null)return;const y=String(f);if(this.deletedStates[i]=this.deletedStates[i]||{},g&&f!==void 0)this.deletedStates[i][y]!==null&&(this.deletedStates[i][y]=this.deletedStates[i][y]||{},this.deletedStates[i][y][g]=null);else if(f!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][y])for(g in this.deletedStates[i][y]={},this.stateChanges[i][y])this.deletedStates[i][y][g]=null;else this.deletedStates[i][y]=null;else this.deletedStates[i]=null}getState(i,f){const g=String(f),y=l.e({},(this.state[i]||{})[g],(this.stateChanges[i]||{})[g]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const b=this.deletedStates[i][f];if(b===null)return{};for(const k in b)delete y[k]}return y}initializeTileState(i,f){i.setFeatureState(this.state,f)}coalesceChanges(i,f){const g={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const b={};for(const k in this.stateChanges[y])this.state[y][k]||(this.state[y][k]={}),l.e(this.state[y][k],this.stateChanges[y][k]),b[k]=this.state[y][k];g[y]=b}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const b={};if(this.deletedStates[y]===null)for(const k in this.state[y])b[k]={},this.state[y][k]={};else for(const k in this.deletedStates[y]){if(this.deletedStates[y][k]===null)this.state[y][k]={};else for(const D of Object.keys(this.deletedStates[y][k]))delete this.state[y][k][D];b[k]=this.state[y][k]}g[y]=g[y]||{},l.e(g[y],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(const y in i)i[y].setFeatureState(g,f)}}class nr extends l.E{constructor(i,f,g){super(),this.id=i,this.dispatcher=g,this.on("data",(y=>this._dataHandler(y))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((y,b,k,D)=>{const j=new(Mo(b.type))(y,b,k,D);if(j.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${j.id}`);return j})(i,f,g,this),this._tiles={},this._cache=new St(0,(y=>this._unloadTile(y))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new vr,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const f=this._tiles[i];if(f.state!=="loaded"&&f.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,f,g){return l._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,f,g)}catch(y){i.state="errored",y.status!==404?this._source.fire(new l.j(y,{tile:i})):this.update(this.transform,this.terrain)}}))}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new l.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const f in this._tiles){const g=this._tiles[f];g.upload(i),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((i=>i.tileID)).sort(pi).map((i=>i.key))}getRenderableIds(i){const f=[];for(const g in this._tiles)this._isIdRenderable(g,i)&&f.push(this._tiles[g]);return i?f.sort(((g,y)=>{const b=g.tileID,k=y.tileID,D=new l.P(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),j=new l.P(k.canonical.x,k.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-k.overscaledZ||j.y-D.y||j.x-D.x})).map((g=>g.tileID.key)):f.map((g=>g.tileID)).sort(pi).map((g=>g.key))}hasRenderableParent(i){const f=this.findLoadedParent(i,0);return!!f&&this._isIdRenderable(f.tileID.key)}_isIdRenderable(i,f){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(f||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,f){return l._(this,void 0,void 0,(function*(){const g=this._tiles[i];g&&(g.state!=="loading"&&(g.state=f),yield this._loadTile(g,i,f))}))}_tileLoaded(i,f,g){i.timeAdded=A.now(),g==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(f,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const f=this.getRenderableIds();for(let y=0;y<f.length;y++){const b=f[y];if(i.neighboringTiles&&i.neighboringTiles[b]){const k=this.getTileByID(b);g(i,k),g(k,i)}}function g(y,b){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let k=b.tileID.canonical.x-y.tileID.canonical.x;const D=b.tileID.canonical.y-y.tileID.canonical.y,j=Math.pow(2,y.tileID.canonical.z),$=b.tileID.key;k===0&&D===0||Math.abs(D)>1||(Math.abs(k)>1&&(Math.abs(k+j)===1?k+=j:Math.abs(k-j)===1&&(k-=j)),b.dem&&y.dem&&(y.dem.backfillBorder(b.dem,k,D),y.neighboringTiles&&y.neighboringTiles[$]&&(y.neighboringTiles[$].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,f,g,y){for(const b in this._tiles){let k=this._tiles[b];if(y[b]||!k.hasData()||k.tileID.overscaledZ<=f||k.tileID.overscaledZ>g)continue;let D=k.tileID;for(;k&&k.tileID.overscaledZ>f+1;){const $=k.tileID.scaledTo(k.tileID.overscaledZ-1);k=this._tiles[$.key],k&&k.hasData()&&(D=$)}let j=D;for(;j.overscaledZ>f;)if(j=j.scaledTo(j.overscaledZ-1),i[j.key]){y[D.key]=D;break}}}findLoadedParent(i,f){if(i.key in this._loadedParentTiles){const g=this._loadedParentTiles[i.key];return g&&g.tileID.overscaledZ>=f?g:null}for(let g=i.overscaledZ-1;g>=f;g--){const y=i.scaledTo(g),b=this._getLoadedTile(y);if(b)return b}}findLoadedSibling(i){return this._getLoadedTile(i)}_getLoadedTile(i){const f=this._tiles[i.key];return f&&f.hasData()?f:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const f=Math.ceil(i.width/this._source.tileSize)+1,g=Math.ceil(i.height/this._source.tileSize)+1,y=Math.floor(f*g*(this._maxTileCacheZoomLevels===null?l.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(b)}handleWrapJump(i){const f=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,f){const g={};for(const y in this._tiles){const b=this._tiles[y];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+f),g[b.tileID.key]=b}this._tiles=g;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}_updateCoveredAndRetainedTiles(i,f,g,y,b,k){const D={},j={},$=Object.keys(i),G=A.now();for(const H of $){const ae=i[H],ue=this._tiles[H];if(!ue||ue.fadeEndTime!==0&&ue.fadeEndTime<=G)continue;const fe=this.findLoadedParent(ae,f),pe=this.findLoadedSibling(ae),ve=fe||pe||null;ve&&(this._addTile(ve.tileID),D[ve.tileID.key]=ve.tileID),j[H]=ae}this._retainLoadedChildren(j,y,g,i);for(const H in D)i[H]||(this._coveredTiles[H]=!0,i[H]=D[H]);if(k){const H={},ae={};for(const ue of b)this._tiles[ue.key].hasData()?H[ue.key]=ue:ae[ue.key]=ue;for(const ue in ae){const fe=ae[ue].children(this._source.maxzoom);this._tiles[fe[0].key]&&this._tiles[fe[1].key]&&this._tiles[fe[2].key]&&this._tiles[fe[3].key]&&(H[fe[0].key]=i[fe[0].key]=fe[0],H[fe[1].key]=i[fe[1].key]=fe[1],H[fe[2].key]=i[fe[2].key]=fe[2],H[fe[3].key]=i[fe[3].key]=fe[3],delete ae[ue])}for(const ue in ae){const fe=ae[ue],pe=this.findLoadedParent(fe,this._source.minzoom),ve=this.findLoadedSibling(fe),we=pe||ve||null;if(we){H[we.tileID.key]=i[we.tileID.key]=we.tileID;for(const Me in H)H[Me].isChildOf(we.tileID)&&delete H[Me]}}for(const ue in this._tiles)H[ue]||(this._coveredTiles[ue]=!0)}}update(i,f){if(!this._sourceLoaded||this._paused)return;let g;this.transform=i,this.terrain=f,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=i.getVisibleUnwrappedCoordinates(this._source.tileID).map((G=>new l.S(G.canonical.z,G.wrap,G.canonical.z,G.canonical.x,G.canonical.y))):(g=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:f}),this._source.hasTile&&(g=g.filter((G=>this._source.hasTile(G))))):g=[];const y=i.coveringZoomLevel(this._source),b=Math.max(y-nr.maxOverzooming,this._source.minzoom),k=Math.max(y+nr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const G={};for(const H of g)if(H.canonical.z>this._source.minzoom){const ae=H.scaledTo(H.canonical.z-1);G[ae.key]=ae;const ue=H.scaledTo(Math.max(this._source.minzoom,Math.min(H.canonical.z,5)));G[ue.key]=ue}g=g.concat(Object.values(G))}const D=g.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,D&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const j=this._updateRetainedTiles(g,y);ra(this._source.type)&&this._updateCoveredAndRetainedTiles(j,b,k,y,g,f);for(const G in j)this._tiles[G].clearFadeHold();const $=l.ab(this._tiles,j);for(const G of $){const H=this._tiles[G];H.hasSymbolBuckets&&!H.holdingForFade()?H.setHoldDuration(this.map._fadeDuration):H.hasSymbolBuckets&&!H.symbolFadeFinished()||this._removeTile(G)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,f){var g;const y={},b={},k=Math.max(f-nr.maxOverzooming,this._source.minzoom),D=Math.max(f+nr.maxUnderzooming,this._source.minzoom),j={};for(const $ of i){const G=this._addTile($);y[$.key]=$,G.hasData()||f<this._source.maxzoom&&(j[$.key]=$)}this._retainLoadedChildren(j,f,D,y);for(const $ of i){let G=this._tiles[$.key];if(G.hasData())continue;if(f+1>this._source.maxzoom){const ae=$.children(this._source.maxzoom)[0],ue=this.getTile(ae);if(ue&&ue.hasData()){y[ae.key]=ae;continue}}else{const ae=$.children(this._source.maxzoom);if(y[ae[0].key]&&y[ae[1].key]&&y[ae[2].key]&&y[ae[3].key])continue}let H=G.wasRequested();for(let ae=$.overscaledZ-1;ae>=k;--ae){const ue=$.scaledTo(ae);if(b[ue.key])break;if(b[ue.key]=!0,G=this.getTile(ue),!G&&H&&(G=this._addTile(ue)),G){const fe=G.hasData();if((fe||!(!((g=this.map)===null||g===void 0)&&g.cancelPendingTileRequestsWhileZooming)||H)&&(y[ue.key]=ue),H=G.wasRequested(),fe)break}}}return y}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const f=[];let g,y=this._tiles[i].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){g=this._loadedParentTiles[y.key];break}f.push(y.key);const b=y.scaledTo(y.overscaledZ-1);if(g=this._getLoadedTile(b),g)break;y=b}for(const b of f)this._loadedParentTiles[b]=g}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const i in this._tiles){const f=this._tiles[i].tileID,g=this._getLoadedTile(f);this._loadedSiblingTiles[f.key]=g}}_addTile(i){let f=this._tiles[i.key];if(f)return f;f=this._cache.getAndRemove(i),f&&(this._setTileReloadTimer(i.key,f),f.tileID=i,this._state.initializeTileState(f,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,f)));const g=f;return f||(f=new ho(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(f,i.key,f.state)),f.uses++,this._tiles[i.key]=f,g||this._source.fire(new l.k("dataloading",{tile:f,coord:f.tileID,dataType:"source"})),f}_setTileReloadTimer(i,f){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const g=f.getExpiryTimeout();g&&(this._timers[i]=setTimeout((()=>{this._reloadTile(i,"expired"),delete this._timers[i]}),g))}_removeTile(i){const f=this._tiles[i];f&&(f.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),f.uses>0||(f.hasData()&&f.state!=="reloading"?this._cache.add(f.tileID,f,f.getExpiryTimeout()):(f.aborted=!0,this._abortTile(f),this._unloadTile(f))))}_dataHandler(i){const f=i.sourceDataType;i.dataType==="source"&&f==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&i.dataType==="source"&&f==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,f,g){const y=[],b=this.transform;if(!b)return y;const k=g?b.getCameraQueryGeometry(i):i,D=i.map((fe=>b.pointCoordinate(fe,this.terrain))),j=k.map((fe=>b.pointCoordinate(fe,this.terrain))),$=this.getIds();let G=1/0,H=1/0,ae=-1/0,ue=-1/0;for(const fe of j)G=Math.min(G,fe.x),H=Math.min(H,fe.y),ae=Math.max(ae,fe.x),ue=Math.max(ue,fe.y);for(let fe=0;fe<$.length;fe++){const pe=this._tiles[$[fe]];if(pe.holdingForFade())continue;const ve=pe.tileID,we=Math.pow(2,b.zoom-pe.tileID.overscaledZ),Me=f*pe.queryPadding*l.X/pe.tileSize/we,me=[ve.getTilePoint(new l.Z(G,H)),ve.getTilePoint(new l.Z(ae,ue))];if(me[0].x-Me<l.X&&me[0].y-Me<l.X&&me[1].x+Me>=0&&me[1].y+Me>=0){const De=D.map((We=>ve.getTilePoint(We))),ze=j.map((We=>ve.getTilePoint(We)));y.push({tile:pe,tileID:ve,queryGeometry:De,cameraQueryGeometry:ze,scale:we})}}return y}getVisibleCoordinates(i){const f=this.getRenderableIds(i).map((g=>this._tiles[g].tileID));for(const g of f)g.posMatrix=this.transform.calculatePosMatrix(g.toUnwrapped());return f}hasTransition(){if(this._source.hasTransition())return!0;if(ra(this._source.type)){const i=A.now();for(const f in this._tiles)if(this._tiles[f].fadeEndTime>=i)return!0}return!1}setFeatureState(i,f,g){this._state.updateState(i=i||"_geojsonTileLayer",f,g)}removeFeatureState(i,f,g){this._state.removeFeatureState(i=i||"_geojsonTileLayer",f,g)}getFeatureState(i,f){return this._state.getState(i=i||"_geojsonTileLayer",f)}setDependencies(i,f,g){const y=this._tiles[i];y&&y.setDependencies(f,g)}reloadTilesForDependencies(i,f){for(const g in this._tiles)this._tiles[g].hasDependency(i,f)&&this._reloadTile(g,"reloading");this._cache.filter((g=>!g.hasDependency(i,f)))}}function pi(S,i){const f=Math.abs(2*S.wrap)-+(S.wrap<0),g=Math.abs(2*i.wrap)-+(i.wrap<0);return S.overscaledZ-i.overscaledZ||g-f||i.canonical.y-S.canonical.y||i.canonical.x-S.canonical.x}function ra(S){return S==="raster"||S==="image"||S==="video"}nr.maxOverzooming=10,nr.maxUnderzooming=3;class ur{constructor(i,f){this.reset(i,f)}reset(i,f){this.points=i||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=l.ac(i,0,1);let f=1,g=this._distances[f];const y=i*this.paddedLength+this.padding;for(;g<y&&f<this._distances.length;)g=this._distances[++f];const b=f-1,k=this._distances[b],D=g-k,j=D>0?(y-k)/D:0;return this.points[b].mult(1-j).add(this.points[f].mult(j))}}function xa(S,i){let f=!0;return S==="always"||S!=="never"&&i!=="never"||(f=!1),f}class qa{constructor(i,f,g){const y=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(i/g),this.yCellCount=Math.ceil(f/g);for(let k=0;k<this.xCellCount*this.yCellCount;k++)y.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=f,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,f,g,y,b){this._forEachCell(f,g,y,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(y),this.bboxes.push(b)}insertCircle(i,f,g,y){this._forEachCell(f-y,g-y,f+y,g+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(f),this.circles.push(g),this.circles.push(y)}_insertBoxCell(i,f,g,y,b,k){this.boxCells[b].push(k)}_insertCircleCell(i,f,g,y,b,k){this.circleCells[b].push(k)}_query(i,f,g,y,b,k,D){if(g<0||i>this.width||y<0||f>this.height)return[];const j=[];if(i<=0&&f<=0&&this.width<=g&&this.height<=y){if(b)return[{key:null,x1:i,y1:f,x2:g,y2:y}];for(let $=0;$<this.boxKeys.length;$++)j.push({key:this.boxKeys[$],x1:this.bboxes[4*$],y1:this.bboxes[4*$+1],x2:this.bboxes[4*$+2],y2:this.bboxes[4*$+3]});for(let $=0;$<this.circleKeys.length;$++){const G=this.circles[3*$],H=this.circles[3*$+1],ae=this.circles[3*$+2];j.push({key:this.circleKeys[$],x1:G-ae,y1:H-ae,x2:G+ae,y2:H+ae})}}else this._forEachCell(i,f,g,y,this._queryCell,j,{hitTest:b,overlapMode:k,seenUids:{box:{},circle:{}}},D);return j}query(i,f,g,y){return this._query(i,f,g,y,!1,null)}hitTest(i,f,g,y,b,k){return this._query(i,f,g,y,!0,b,k).length>0}hitTestCircle(i,f,g,y,b){const k=i-g,D=i+g,j=f-g,$=f+g;if(D<0||k>this.width||$<0||j>this.height)return!1;const G=[];return this._forEachCell(k,j,D,$,this._queryCellCircle,G,{hitTest:!0,overlapMode:y,circle:{x:i,y:f,radius:g},seenUids:{box:{},circle:{}}},b),G.length>0}_queryCell(i,f,g,y,b,k,D,j){const{seenUids:$,hitTest:G,overlapMode:H}=D,ae=this.boxCells[b];if(ae!==null){const fe=this.bboxes;for(const pe of ae)if(!$.box[pe]){$.box[pe]=!0;const ve=4*pe,we=this.boxKeys[pe];if(i<=fe[ve+2]&&f<=fe[ve+3]&&g>=fe[ve+0]&&y>=fe[ve+1]&&(!j||j(we))&&(!G||!xa(H,we.overlapMode))&&(k.push({key:we,x1:fe[ve],y1:fe[ve+1],x2:fe[ve+2],y2:fe[ve+3]}),G))return!0}}const ue=this.circleCells[b];if(ue!==null){const fe=this.circles;for(const pe of ue)if(!$.circle[pe]){$.circle[pe]=!0;const ve=3*pe,we=this.circleKeys[pe];if(this._circleAndRectCollide(fe[ve],fe[ve+1],fe[ve+2],i,f,g,y)&&(!j||j(we))&&(!G||!xa(H,we.overlapMode))){const Me=fe[ve],me=fe[ve+1],De=fe[ve+2];if(k.push({key:we,x1:Me-De,y1:me-De,x2:Me+De,y2:me+De}),G)return!0}}}return!1}_queryCellCircle(i,f,g,y,b,k,D,j){const{circle:$,seenUids:G,overlapMode:H}=D,ae=this.boxCells[b];if(ae!==null){const fe=this.bboxes;for(const pe of ae)if(!G.box[pe]){G.box[pe]=!0;const ve=4*pe,we=this.boxKeys[pe];if(this._circleAndRectCollide($.x,$.y,$.radius,fe[ve+0],fe[ve+1],fe[ve+2],fe[ve+3])&&(!j||j(we))&&!xa(H,we.overlapMode))return k.push(!0),!0}}const ue=this.circleCells[b];if(ue!==null){const fe=this.circles;for(const pe of ue)if(!G.circle[pe]){G.circle[pe]=!0;const ve=3*pe,we=this.circleKeys[pe];if(this._circlesCollide(fe[ve],fe[ve+1],fe[ve+2],$.x,$.y,$.radius)&&(!j||j(we))&&!xa(H,we.overlapMode))return k.push(!0),!0}}}_forEachCell(i,f,g,y,b,k,D,j){const $=this._convertToXCellCoord(i),G=this._convertToYCellCoord(f),H=this._convertToXCellCoord(g),ae=this._convertToYCellCoord(y);for(let ue=$;ue<=H;ue++)for(let fe=G;fe<=ae;fe++)if(b.call(this,i,f,g,y,this.xCellCount*fe+ue,k,D,j))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,f,g,y,b,k){const D=y-i,j=b-f,$=g+k;return $*$>D*D+j*j}_circleAndRectCollide(i,f,g,y,b,k,D){const j=(k-y)/2,$=Math.abs(i-(y+j));if($>j+g)return!1;const G=(D-b)/2,H=Math.abs(f-(b+G));if(H>G+g)return!1;if($<=j||H<=G)return!0;const ae=$-j,ue=H-G;return ae*ae+ue*ue<=g*g}}function na(S,i,f,g,y){const b=l.H();return i?(l.K(b,b,[1/y,1/y,1]),f||l.ad(b,b,g.angle)):l.L(b,g.labelPlaneMatrix,S),b}function Si(S,i,f,g,y){if(i){const b=l.ae(S);return l.K(b,b,[y,y,1]),f||l.ad(b,b,-g.angle),b}return g.glCoordMatrix}function xe(S,i,f,g){let y;g?(y=[S,i,g(S,i),1],l.af(y,y,f)):(y=[S,i,0,1],Ir(y,y,f));const b=y[3];return{point:new l.P(y[0]/b,y[1]/b),signedDistanceFromCamera:b,isOccluded:!1}}function te(S,i){return .5+S/i*.5}function ee(S,i){return S.x>=-i[0]&&S.x<=i[0]&&S.y>=-i[1]&&S.y<=i[1]}function ce(S,i,f,g,y,b,k,D,j,$,G,H,ae,ue,fe){const pe=g?S.textSizeData:S.iconSizeData,ve=l.ag(pe,f.transform.zoom),we=[256/f.width*2+1,256/f.height*2+1],Me=g?S.text.dynamicLayoutVertexArray:S.icon.dynamicLayoutVertexArray;Me.clear();const me=S.lineVertexArray,De=g?S.text.placedSymbolArray:S.icon.placedSymbolArray,ze=f.transform.width/f.transform.height;let We=!1;for(let lt=0;lt<De.length;lt++){const gt=De.get(lt);if(gt.hidden||gt.writingMode===l.ah.vertical&&!We){Yt(gt.numGlyphs,Me);continue}We=!1;const Tt=xe(gt.anchorX,gt.anchorY,i,fe);if(!ee(Tt.point,we)){Yt(gt.numGlyphs,Me);continue}const Ot=te(f.transform.cameraToCenterDistance,Tt.signedDistanceFromCamera),Pt=l.ai(pe,ve,gt),xt=k?Pt/Ot:Pt*Ot,Vt={getElevation:fe,labelPlaneMatrix:y,lineVertexArray:me,pitchWithMap:k,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:$,tileAnchorPoint:new l.P(gt.anchorX,gt.anchorY),unwrappedTileID:G,width:H,height:ae,translation:ue},or=Re(Vt,gt,xt,!1,D,i,b,S.glyphOffsetArray,Me,ze,j);We=or.useVertical,(or.notEnoughRoom||We||or.needsFlipping&&Re(Vt,gt,xt,!0,D,i,b,S.glyphOffsetArray,Me,ze,j).notEnoughRoom)&&Yt(gt.numGlyphs,Me)}g?S.text.dynamicLayoutVertexBuffer.updateData(Me):S.icon.dynamicLayoutVertexBuffer.updateData(Me)}function ye(S,i,f,g,y,b,k,D){const j=b.glyphStartIndex+b.numGlyphs,$=b.lineStartIndex,G=b.lineStartIndex+b.lineLength,H=i.getoffsetX(b.glyphStartIndex),ae=i.getoffsetX(j-1),ue=bt(S*H,f,g,y,b.segment,$,G,D,k);if(!ue)return null;const fe=bt(S*ae,f,g,y,b.segment,$,G,D,k);return fe?D.projectionCache.anyProjectionOccluded?null:{first:ue,last:fe}:null}function Ie(S,i,f,g){return S===l.ah.horizontal&&Math.abs(f.y-i.y)>Math.abs(f.x-i.x)*g?{useVertical:!0}:(S===l.ah.vertical?i.y<f.y:i.x>f.x)?{needsFlipping:!0}:null}function Re(S,i,f,g,y,b,k,D,j,$,G){const H=f/24,ae=i.lineOffsetX*H,ue=i.lineOffsetY*H;let fe;if(i.numGlyphs>1){const pe=i.glyphStartIndex+i.numGlyphs,ve=i.lineStartIndex,we=i.lineStartIndex+i.lineLength,Me=ye(H,D,ae,ue,g,i,G,S);if(!Me)return{notEnoughRoom:!0};const me=xe(Me.first.point.x,Me.first.point.y,k,S.getElevation).point,De=xe(Me.last.point.x,Me.last.point.y,k,S.getElevation).point;if(y&&!g){const ze=Ie(i.writingMode,me,De,$);if(ze)return ze}fe=[Me.first];for(let ze=i.glyphStartIndex+1;ze<pe-1;ze++)fe.push(bt(H*D.getoffsetX(ze),ae,ue,g,i.segment,ve,we,S,G));fe.push(Me.last)}else{if(y&&!g){const ve=xe(S.tileAnchorPoint.x,S.tileAnchorPoint.y,b,S.getElevation).point,we=i.lineStartIndex+i.segment+1,Me=new l.P(S.lineVertexArray.getx(we),S.lineVertexArray.gety(we)),me=xe(Me.x,Me.y,b,S.getElevation),De=me.signedDistanceFromCamera>0?me.point:(function(We,lt,gt,Tt,Ot,Pt){return Be(We,lt,gt,1,Ot,Pt)})(S.tileAnchorPoint,Me,ve,0,b,S),ze=Ie(i.writingMode,ve,De,$);if(ze)return ze}const pe=bt(H*D.getoffsetX(i.glyphStartIndex),ae,ue,g,i.segment,i.lineStartIndex,i.lineStartIndex+i.lineLength,S,G);if(!pe||S.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};fe=[pe]}for(const pe of fe)l.aj(j,pe.point,pe.angle);return{}}function Be(S,i,f,g,y,b){const k=S.add(S.sub(i)._unit()),D=y!==void 0?xe(k.x,k.y,y,b.getElevation).point:Qe(k.x,k.y,b).point,j=f.sub(D);return f.add(j._mult(g/j.mag()))}function Ee(S,i,f){const g=i.projectionCache;if(g.projections[S])return g.projections[S];const y=new l.P(i.lineVertexArray.getx(S),i.lineVertexArray.gety(S)),b=Qe(y.x,y.y,i);if(b.signedDistanceFromCamera>0)return g.projections[S]=b.point,g.anyProjectionOccluded=g.anyProjectionOccluded||b.isOccluded,b.point;const k=S-f.direction;return(function(D,j,$,G,H){return Be(D,j,$,G,void 0,H)})(f.distanceFromAnchor===0?i.tileAnchorPoint:new l.P(i.lineVertexArray.getx(k),i.lineVertexArray.gety(k)),y,f.previousVertex,f.absOffsetX-f.distanceFromAnchor+1,i)}function Qe(S,i,f){const g=S+f.translation[0],y=i+f.translation[1];let b;return!f.pitchWithMap&&f.projection.useSpecialProjectionForSymbols?(b=f.projection.projectTileCoordinates(g,y,f.unwrappedTileID,f.getElevation),b.point.x=(.5*b.point.x+.5)*f.width,b.point.y=(.5*-b.point.y+.5)*f.height):(b=xe(g,y,f.labelPlaneMatrix,f.getElevation),b.isOccluded=!1),b}function ct(S,i,f){return S._unit()._perp()._mult(i*f)}function Ke(S,i,f,g,y,b,k,D,j){if(D.projectionCache.offsets[S])return D.projectionCache.offsets[S];const $=f.add(i);if(S+j.direction<g||S+j.direction>=y)return D.projectionCache.offsets[S]=$,$;const G=Ee(S+j.direction,D,j),H=ct(G.sub(f),k,j.direction),ae=f.add(H),ue=G.add(H);return D.projectionCache.offsets[S]=l.ak(b,$,ae,ue)||$,D.projectionCache.offsets[S]}function bt(S,i,f,g,y,b,k,D,j){const $=g?S-i:S+i;let G=$>0?1:-1,H=0;g&&(G*=-1,H=Math.PI),G<0&&(H+=Math.PI);let ae,ue=G>0?b+y:b+y+1;D.projectionCache.cachedAnchorPoint?ae=D.projectionCache.cachedAnchorPoint:(ae=Qe(D.tileAnchorPoint.x,D.tileAnchorPoint.y,D).point,D.projectionCache.cachedAnchorPoint=ae);let fe,pe,ve=ae,we=ae,Me=0,me=0;const De=Math.abs($),ze=[];let We;for(;Me+me<=De;){if(ue+=G,ue<b||ue>=k)return null;Me+=me,we=ve,pe=fe;const Tt={absOffsetX:De,direction:G,distanceFromAnchor:Me,previousVertex:we};if(ve=Ee(ue,D,Tt),f===0)ze.push(we),We=ve.sub(we);else{let Ot;const Pt=ve.sub(we);Ot=Pt.mag()===0?ct(Ee(ue+G,D,Tt).sub(ve),f,G):ct(Pt,f,G),pe||(pe=we.add(Ot)),fe=Ke(ue,Ot,ve,b,k,pe,f,D,Tt),ze.push(pe),We=fe.sub(pe)}me=We.mag()}const lt=We._mult((De-Me)/me)._add(pe||we),gt=H+Math.atan2(ve.y-we.y,ve.x-we.x);return ze.push(lt),{point:lt,angle:j?gt:0,path:ze}}const qt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Yt(S,i){for(let f=0;f<S;f++){const g=i.length;i.resize(g+4),i.float32.set(qt,3*g)}}function Ir(S,i,f){const g=i[0],y=i[1];return S[0]=f[0]*g+f[4]*y+f[12],S[1]=f[1]*g+f[5]*y+f[13],S[3]=f[3]*g+f[7]*y+f[15],S}const fr=100;class kr{constructor(i,f,g=new qa(i.width+200,i.height+200,25),y=new qa(i.width+200,i.height+200,25)){this.transform=i,this.mapProjection=f,this.grid=g,this.ignoredGrid=y,this.pitchFactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+fr,this.screenBottomBoundary=i.height+fr,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,f,g,y,b,k,D,j,$,G,H){const ae=i.anchorPointX+j[0],ue=i.anchorPointY+j[1],fe=this.projectAndGetPerspectiveRatio(y,ae,ue,b,G),pe=g*fe.perspectiveRatio;let ve;if(k||D)ve=this._projectCollisionBox(i,pe,y,b,k,D,j,fe,G,H);else{const ze=fe.point.x+(H?H.x*pe:0),We=fe.point.y+(H?H.y*pe:0);ve={allPointsOccluded:!1,box:[ze+i.x1*pe,We+i.y1*pe,ze+i.x2*pe,We+i.y2*pe]}}const[we,Me,me,De]=ve.box;return this.mapProjection.useSpecialProjectionForSymbols&&(k?ve.allPointsOccluded:this.mapProjection.isOccluded(ae,ue,b))||fe.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(we,Me,me,De)||f!=="always"&&this.grid.hitTest(we,Me,me,De,f,$)?{box:[we,Me,me,De],placeable:!1,offscreen:!1}:{box:[we,Me,me,De],placeable:!0,offscreen:this.isOffscreen(we,Me,me,De)}}placeCollisionCircles(i,f,g,y,b,k,D,j,$,G,H,ae,ue,fe,pe,ve){const we=[],Me=new l.P(f.anchorX,f.anchorY),me=this.getPerspectiveRatio(k,Me.x,Me.y,D,ve),De=(H?b/me:b*me)/l.ap,ze={getElevation:ve,labelPlaneMatrix:j,lineVertexArray:g,pitchWithMap:H,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:Me,unwrappedTileID:D,width:this.transform.width,height:this.transform.height,translation:pe},We=ye(De,y,f.lineOffsetX*De,f.lineOffsetY*De,!1,f,!1,ze);let lt=!1,gt=!1,Tt=!0;if(We){const Ot=.5*ue*me+fe,Pt=new l.P(-100,-100),xt=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Vt=new ur,or=We.first,Et=We.last;let Mt=[];for(let dr=or.path.length-1;dr>=1;dr--)Mt.push(or.path[dr]);for(let dr=1;dr<Et.path.length;dr++)Mt.push(Et.path[dr]);const ir=2.5*Ot;if($){const dr=this.projectPathToScreenSpace(Mt,ze,$);Mt=dr.some((_r=>_r.signedDistanceFromCamera<=0))?[]:dr.map((_r=>_r.point))}let Gr=[];if(Mt.length>0){const dr=Mt[0].clone(),_r=Mt[0].clone();for(let Xr=1;Xr<Mt.length;Xr++)dr.x=Math.min(dr.x,Mt[Xr].x),dr.y=Math.min(dr.y,Mt[Xr].y),_r.x=Math.max(_r.x,Mt[Xr].x),_r.y=Math.max(_r.y,Mt[Xr].y);Gr=dr.x>=Pt.x&&_r.x<=xt.x&&dr.y>=Pt.y&&_r.y<=xt.y?[Mt]:_r.x<Pt.x||dr.x>xt.x||_r.y<Pt.y||dr.y>xt.y?[]:l.al([Mt],Pt.x,Pt.y,xt.x,xt.y)}for(const dr of Gr){Vt.reset(dr,.25*Ot);let _r=0;_r=Vt.length<=.5*Ot?1:Math.ceil(Vt.paddedLength/ir)+1;for(let Xr=0;Xr<_r;Xr++){const Qn=Xr/Math.max(_r-1,1),la=Vt.lerp(Qn),Yr=la.x+fr,Un=la.y+fr;we.push(Yr,Un,Ot,0);const sn=Yr-Ot,An=Un-Ot,si=Yr+Ot,Qa=Un+Ot;if(Tt=Tt&&this.isOffscreen(sn,An,si,Qa),gt=gt||this.isInsideGrid(sn,An,si,Qa),i!=="always"&&this.grid.hitTestCircle(Yr,Un,Ot,i,ae)&&(lt=!0,!G))return{circles:[],offscreen:!1,collisionDetected:lt}}}}return{circles:!G&&lt||!gt||me<this.perspectiveRatioCutoff?[]:we,offscreen:Tt,collisionDetected:lt}}projectPathToScreenSpace(i,f,g){return i.map((y=>xe(y.x,y.y,g,f.getElevation)))}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[];let g=1/0,y=1/0,b=-1/0,k=-1/0;for(const G of i){const H=new l.P(G.x+fr,G.y+fr);g=Math.min(g,H.x),y=Math.min(y,H.y),b=Math.max(b,H.x),k=Math.max(k,H.y),f.push(H)}const D=this.grid.query(g,y,b,k).concat(this.ignoredGrid.query(g,y,b,k)),j={},$={};for(const G of D){const H=G.key;if(j[H.bucketInstanceId]===void 0&&(j[H.bucketInstanceId]={}),j[H.bucketInstanceId][H.featureIndex])continue;const ae=[new l.P(G.x1,G.y1),new l.P(G.x2,G.y1),new l.P(G.x2,G.y2),new l.P(G.x1,G.y2)];l.am(f,ae)&&(j[H.bucketInstanceId][H.featureIndex]=!0,$[H.bucketInstanceId]===void 0&&($[H.bucketInstanceId]=[]),$[H.bucketInstanceId].push(H.featureIndex))}return $}insertCollisionBox(i,f,g,y,b,k){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:b,collisionGroupID:k,overlapMode:f},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,f,g,y,b,k){const D=g?this.ignoredGrid:this.grid,j={bucketInstanceId:y,featureIndex:b,collisionGroupID:k,overlapMode:f};for(let $=0;$<i.length;$+=4)D.insertCircle(j,i[$],i[$+1],i[$+2])}projectAndGetPerspectiveRatio(i,f,g,y,b){let k;b?(k=[f,g,b(f,g),1],l.af(k,k,i)):(k=[f,g,0,1],Ir(k,k,i));const D=k[3];return{point:new l.P((k[0]/D+1)/2*this.transform.width+fr,(-k[1]/D+1)/2*this.transform.height+fr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/D*.5,isOccluded:!1,signedDistanceFromCamera:D}}getPerspectiveRatio(i,f,g,y,b){const k=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(f,g,y,b):xe(f,g,i,b);return .5+this.transform.cameraToCenterDistance/k.signedDistanceFromCamera*.5}isOffscreen(i,f,g,y){return g<fr||i>=this.screenRightBoundary||y<fr||f>this.screenBottomBoundary}isInsideGrid(i,f,g,y){return g>=0&&i<this.gridRightBoundary&&y>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const i=l.an([]);return l.J(i,i,[-100,-100,0]),i}_projectCollisionBox(i,f,g,y,b,k,D,j,$,G){let H=new l.P(1,0),ae=new l.P(0,1);const ue=new l.P(i.anchorPointX+D[0],i.anchorPointY+D[1]);if(k&&!b){const Tt=this.projectAndGetPerspectiveRatio(g,ue.x+1,ue.y,y,$).point.sub(j.point).unit(),Ot=Math.atan(Tt.y/Tt.x)+(Tt.x<0?Math.PI:0),Pt=Math.sin(Ot),xt=Math.cos(Ot);H=new l.P(xt,Pt),ae=new l.P(-Pt,xt)}else if(!k&&b){const Tt=-this.transform.angle,Ot=Math.sin(Tt),Pt=Math.cos(Tt);H=new l.P(Pt,Ot),ae=new l.P(-Ot,Pt)}let fe=j.point,pe=f;if(b){fe=ue;const Tt=this.transform.zoom-Math.floor(this.transform.zoom);pe=Math.pow(2,-Tt),pe*=this.mapProjection.getPitchedTextCorrection(this.transform,ue,y),G||(pe*=l.ac(.5+j.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}G&&(fe=fe.add(H.mult(G.x*pe)).add(ae.mult(G.y*pe)));const ve=i.x1*pe,we=i.x2*pe,Me=(ve+we)/2,me=i.y1*pe,De=i.y2*pe,ze=(me+De)/2,We=[{offsetX:ve,offsetY:me},{offsetX:Me,offsetY:me},{offsetX:we,offsetY:me},{offsetX:we,offsetY:ze},{offsetX:we,offsetY:De},{offsetX:Me,offsetY:De},{offsetX:ve,offsetY:De},{offsetX:ve,offsetY:ze}];let lt=[];for(const{offsetX:Tt,offsetY:Ot}of We)lt.push(new l.P(fe.x+H.x*Tt+ae.x*Ot,fe.y+H.y*Tt+ae.y*Ot));let gt=!1;if(b){const Tt=lt.map((Ot=>this.projectAndGetPerspectiveRatio(g,Ot.x,Ot.y,y,$)));gt=Tt.some((Ot=>!Ot.isOccluded)),lt=Tt.map((Ot=>Ot.point))}else gt=!0;return{box:l.ao(lt),allPointsOccluded:!gt}}}function yr(S,i,f){return i*(l.X/(S.tileSize*Math.pow(2,f-S.tileID.overscaledZ)))}class Mn{constructor(i,f,g,y){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?f:-f))):y&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class mn{constructor(i,f,g,y,b){this.text=new Mn(i?i.text:null,f,g,b),this.icon=new Mn(i?i.icon:null,f,y,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class wr{constructor(i,f,g){this.text=i,this.icon=f,this.skipFade=g}}class Fr{constructor(){this.invProjMatrix=l.H(),this.viewportMatrix=l.H(),this.circles=[]}}class an{constructor(i,f,g,y,b){this.bucketInstanceId=i,this.featureIndex=f,this.sourceLayerIndex=g,this.bucketIndex=y,this.tileID=b}}class Vn{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const f=++this.maxGroupID;this.collisionGroups[i]={ID:f,predicate:g=>g.collisionGroupID===f}}return this.collisionGroups[i]}}function Yn(S,i,f,g,y){const{horizontalAlign:b,verticalAlign:k}=l.au(S);return new l.P(-(b-.5)*i+g[0]*y,-(k-.5)*f+g[1]*y)}class Ti{constructor(i,f,g,y,b,k){this.transform=i.clone(),this.terrain=g,this.collisionIndex=new kr(this.transform,f),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new Vn(b),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=k,k&&(k.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(i){const f=this.terrain;return f?(g,y)=>f.getElevation(i,g,y):null}getBucketParts(i,f,g,y){const b=g.getBucket(f),k=g.latestFeatureIndex;if(!b||!k||f.id!==b.layerIds[0])return;const D=g.collisionBoxArray,j=b.layers[0].layout,$=b.layers[0].paint,G=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),H=g.tileSize/l.X,ae=g.tileID.toUnwrapped(),ue=this.transform.calculatePosMatrix(ae),fe=j.get("text-pitch-alignment")==="map",pe=j.get("text-rotation-alignment")==="map",ve=yr(g,1,this.transform.zoom),we=this.collisionIndex.mapProjection.translatePosition(this.transform,g,$.get("text-translate"),$.get("text-translate-anchor")),Me=this.collisionIndex.mapProjection.translatePosition(this.transform,g,$.get("icon-translate"),$.get("icon-translate-anchor")),me=na(ue,fe,pe,this.transform,ve);let De=null;if(fe){const We=Si(ue,fe,pe,this.transform,ve);De=l.L([],this.transform.labelPlaneMatrix,We)}this.retainedQueryData[b.bucketInstanceId]=new an(b.bucketInstanceId,k,b.sourceLayerIndex,b.index,g.tileID);const ze={bucket:b,layout:j,translationText:we,translationIcon:Me,posMatrix:ue,unwrappedTileID:ae,textLabelPlaneMatrix:me,labelToScreenMatrix:De,scale:G,textPixelRatio:H,holdingForFade:g.holdingForFade(),collisionBoxArray:D,partiallyEvaluatedTextSize:l.ag(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(y)for(const We of b.sortKeyRanges){const{sortKey:lt,symbolInstanceStart:gt,symbolInstanceEnd:Tt}=We;i.push({sortKey:lt,symbolInstanceStart:gt,symbolInstanceEnd:Tt,parameters:ze})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:ze})}attemptAnchorPlacement(i,f,g,y,b,k,D,j,$,G,H,ae,ue,fe,pe,ve,we,Me,me){const De=l.aq[i.textAnchor],ze=[i.textOffset0,i.textOffset1],We=Yn(De,g,y,ze,b),lt=this.collisionIndex.placeCollisionBox(f,ae,j,$,G,D,k,ve,H.predicate,me,We);if((!Me||this.collisionIndex.placeCollisionBox(Me,ae,j,$,G,D,k,we,H.predicate,me,We).placeable)&&lt.placeable){let gt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ue.crossTileID]&&this.prevPlacement.placements[ue.crossTileID]&&this.prevPlacement.placements[ue.crossTileID].text&&(gt=this.prevPlacement.variableOffsets[ue.crossTileID].anchor),ue.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ue.crossTileID]={textOffset:ze,width:g,height:y,anchor:De,textBoxScale:b,prevAnchor:gt},this.markUsedJustification(fe,De,ue,pe),fe.allowVerticalPlacement&&(this.markUsedOrientation(fe,pe,ue),this.placedOrientations[ue.crossTileID]=pe),{shift:We,placedGlyphBoxes:lt}}}placeLayerBucketPart(i,f,g){const{bucket:y,layout:b,translationText:k,translationIcon:D,posMatrix:j,unwrappedTileID:$,textLabelPlaneMatrix:G,labelToScreenMatrix:H,textPixelRatio:ae,holdingForFade:ue,collisionBoxArray:fe,partiallyEvaluatedTextSize:pe,collisionGroup:ve}=i.parameters,we=b.get("text-optional"),Me=b.get("icon-optional"),me=l.ar(b,"text-overlap","text-allow-overlap"),De=me==="always",ze=l.ar(b,"icon-overlap","icon-allow-overlap"),We=ze==="always",lt=b.get("text-rotation-alignment")==="map",gt=b.get("text-pitch-alignment")==="map",Tt=b.get("icon-text-fit")!=="none",Ot=b.get("symbol-z-order")==="viewport-y",Pt=De&&(We||!y.hasIconData()||Me),xt=We&&(De||!y.hasTextData()||we);!y.collisionArrays&&fe&&y.deserializeCollisionBoxes(fe);const Vt=this._getTerrainElevationFunc(this.retainedQueryData[y.bucketInstanceId].tileID),or=(Et,Mt,ir)=>{var Gr,dr;if(f[Et.crossTileID])return;if(ue)return void(this.placements[Et.crossTileID]=new wr(!1,!1,!1));let _r=!1,Xr=!1,Qn=!0,la=null,Yr={box:null,placeable:!1,offscreen:null},Un={placeable:!1},sn=null,An=null,si=null,Qa=0,qi=0,eo=0;Mt.textFeatureIndex?Qa=Mt.textFeatureIndex:Et.useRuntimeCollisionCircles&&(Qa=Et.featureIndex),Mt.verticalTextFeatureIndex&&(qi=Mt.verticalTextFeatureIndex);const ws=Mt.textBox;if(ws){const Ci=On=>{let fn=l.ah.horizontal;if(y.allowVerticalPlacement&&!On&&this.prevPlacement){const li=this.prevPlacement.placedOrientations[Et.crossTileID];li&&(this.placedOrientations[Et.crossTileID]=li,fn=li,this.markUsedOrientation(y,fn,Et))}return fn},ca=(On,fn)=>{if(y.allowVerticalPlacement&&Et.numVerticalGlyphVertices>0&&Mt.verticalTextBox){for(const li of y.writingModes)if(li===l.ah.vertical?(Yr=fn(),Un=Yr):Yr=On(),Yr&&Yr.placeable)break}else Yr=On()},to=Et.textAnchorOffsetStartIndex,Ca=Et.textAnchorOffsetEndIndex;if(Ca===to){const On=(fn,li)=>{const Sr=this.collisionIndex.placeCollisionBox(fn,me,ae,j,$,gt,lt,k,ve.predicate,Vt);return Sr&&Sr.placeable&&(this.markUsedOrientation(y,li,Et),this.placedOrientations[Et.crossTileID]=li),Sr};ca((()=>On(ws,l.ah.horizontal)),(()=>{const fn=Mt.verticalTextBox;return y.allowVerticalPlacement&&Et.numVerticalGlyphVertices>0&&fn?On(fn,l.ah.vertical):{box:null,offscreen:null}})),Ci(Yr&&Yr.placeable)}else{let On=l.aq[(dr=(Gr=this.prevPlacement)===null||Gr===void 0?void 0:Gr.variableOffsets[Et.crossTileID])===null||dr===void 0?void 0:dr.anchor];const fn=(Sr,ha,Ss)=>{const ro=Sr.x2-Sr.x1,Lh=Sr.y2-Sr.y1,Nh=Et.textBoxScale,gn=Tt&&ze==="never"?ha:null;let no=null,zc=me==="never"?1:2,Ul="never";On&&zc++;for(let Ts=0;Ts<zc;Ts++){for(let ql=to;ql<Ca;ql++){const xo=y.textAnchorOffsets.get(ql);if(On&&xo.textAnchor!==On)continue;const Jr=this.attemptAnchorPlacement(xo,Sr,ro,Lh,Nh,lt,gt,ae,j,$,ve,Ul,Et,y,Ss,k,D,gn,Vt);if(Jr&&(no=Jr.placedGlyphBoxes,no&&no.placeable))return _r=!0,la=Jr.shift,no}On?On=null:Ul=me}return g&&!no&&(no={box:this.collisionIndex.placeCollisionBox(ws,"always",ae,j,$,gt,lt,k,ve.predicate,Vt,new l.P(0,0)).box,offscreen:!1,placeable:!1}),no};ca((()=>fn(ws,Mt.iconBox,l.ah.horizontal)),(()=>{const Sr=Mt.verticalTextBox;return y.allowVerticalPlacement&&(!Yr||!Yr.placeable)&&Et.numVerticalGlyphVertices>0&&Sr?fn(Sr,Mt.verticalIconBox,l.ah.vertical):{box:null,occluded:!0,offscreen:null}})),Yr&&(_r=Yr.placeable,Qn=Yr.offscreen);const li=Ci(Yr&&Yr.placeable);if(!_r&&this.prevPlacement){const Sr=this.prevPlacement.variableOffsets[Et.crossTileID];Sr&&(this.variableOffsets[Et.crossTileID]=Sr,this.markUsedJustification(y,Sr.anchor,Et,li))}}}if(sn=Yr,_r=sn&&sn.placeable,Qn=sn&&sn.offscreen,Et.useRuntimeCollisionCircles){const Ci=y.text.placedSymbolArray.get(Et.centerJustifiedTextSymbolIndex),ca=l.ai(y.textSizeData,pe,Ci),to=b.get("text-padding");An=this.collisionIndex.placeCollisionCircles(me,Ci,y.lineVertexArray,y.glyphOffsetArray,ca,j,$,G,H,g,gt,ve.predicate,Et.collisionCircleDiameter,to,k,Vt),An.circles.length&&An.collisionDetected&&!g&&l.w("Collisions detected, but collision boxes are not shown"),_r=De||An.circles.length>0&&!An.collisionDetected,Qn=Qn&&An.offscreen}if(Mt.iconFeatureIndex&&(eo=Mt.iconFeatureIndex),Mt.iconBox){const Ci=ca=>this.collisionIndex.placeCollisionBox(ca,ze,ae,j,$,gt,lt,D,ve.predicate,Vt,Tt&&la?la:void 0);Un&&Un.placeable&&Mt.verticalIconBox?(si=Ci(Mt.verticalIconBox),Xr=si.placeable):(si=Ci(Mt.iconBox),Xr=si.placeable),Qn=Qn&&si.offscreen}const ua=we||Et.numHorizontalGlyphVertices===0&&Et.numVerticalGlyphVertices===0,Ea=Me||Et.numIconVertices===0;ua||Ea?Ea?ua||(Xr=Xr&&_r):_r=Xr&&_r:Xr=_r=Xr&&_r;const _o=Xr&&si.placeable;if(_r&&sn.placeable&&this.collisionIndex.insertCollisionBox(sn.box,me,b.get("text-ignore-placement"),y.bucketInstanceId,Un&&Un.placeable&&qi?qi:Qa,ve.ID),_o&&this.collisionIndex.insertCollisionBox(si.box,ze,b.get("icon-ignore-placement"),y.bucketInstanceId,eo,ve.ID),An&&_r&&this.collisionIndex.insertCollisionCircles(An.circles,me,b.get("text-ignore-placement"),y.bucketInstanceId,Qa,ve.ID),g&&this.storeCollisionData(y.bucketInstanceId,ir,Mt,sn,si,An),Et.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Et.crossTileID]=new wr(_r||Pt,Xr||xt,Qn||y.justReloaded),f[Et.crossTileID]=!0};if(Ot){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Et=y.getSortedSymbolIndexes(this.transform.angle);for(let Mt=Et.length-1;Mt>=0;--Mt){const ir=Et[Mt];or(y.symbolInstances.get(ir),y.collisionArrays[ir],ir)}}else for(let Et=i.symbolInstanceStart;Et<i.symbolInstanceEnd;Et++)or(y.symbolInstances.get(Et),y.collisionArrays[Et],Et);if(g&&y.bucketInstanceId in this.collisionCircleArrays){const Et=this.collisionCircleArrays[y.bucketInstanceId];l.as(Et.invProjMatrix,j),Et.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}storeCollisionData(i,f,g,y,b,k){if(g.textBox||g.iconBox){let D,j;this.collisionBoxArrays.has(i)?D=this.collisionBoxArrays.get(i):(D=new Map,this.collisionBoxArrays.set(i,D)),D.has(f)?j=D.get(f):(j={text:null,icon:null},D.set(f,j)),g.textBox&&(j.text=y.box),g.iconBox&&(j.icon=b.box)}if(k){let D=this.collisionCircleArrays[i];D===void 0&&(D=this.collisionCircleArrays[i]=new Fr);for(let j=0;j<k.circles.length;j+=4)D.circles.push(k.circles[j+0]),D.circles.push(k.circles[j+1]),D.circles.push(k.circles[j+2]),D.circles.push(k.collisionDetected?1:0)}}markUsedJustification(i,f,g,y){let b;b=y===l.ah.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[l.at(f)];const k=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(const D of k)D>=0&&(i.text.placedSymbolArray.get(D).crossTileID=b>=0&&D!==b?0:g.crossTileID)}markUsedOrientation(i,f,g){const y=f===l.ah.horizontal||f===l.ah.horizontalOnly?f:0,b=f===l.ah.vertical?f:0,k=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(const D of k)i.text.placedSymbolArray.get(D).placedOrientation=y;g.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let g=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const y=f?f.symbolFadeChange(i):1,b=f?f.opacities:{},k=f?f.variableOffsets:{},D=f?f.placedOrientations:{};for(const j in this.placements){const $=this.placements[j],G=b[j];G?(this.opacities[j]=new mn(G,y,$.text,$.icon),g=g||$.text!==G.text.placed||$.icon!==G.icon.placed):(this.opacities[j]=new mn(null,y,$.text,$.icon,$.skipFade),g=g||$.text||$.icon)}for(const j in b){const $=b[j];if(!this.opacities[j]){const G=new mn($,y,!1,!1);G.isHidden()||(this.opacities[j]=G,g=g||$.text.placed||$.icon.placed)}}for(const j in k)this.variableOffsets[j]||!this.opacities[j]||this.opacities[j].isHidden()||(this.variableOffsets[j]=k[j]);for(const j in D)this.placedOrientations[j]||!this.opacities[j]||this.opacities[j].isHidden()||(this.placedOrientations[j]=D[j]);if(f&&f.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:i)}updateLayerOpacities(i,f){const g={};for(const y of f){const b=y.getBucket(i);b&&y.latestFeatureIndex&&i.id===b.layerIds[0]&&this.updateBucketOpacities(b,y.tileID,g,y.collisionBoxArray)}}updateBucketOpacities(i,f,g,y){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const b=i.layers[0],k=b.layout,D=new mn(null,0,!1,!1,!0),j=k.get("text-allow-overlap"),$=k.get("icon-allow-overlap"),G=b._unevaluatedLayout.hasValue("text-variable-anchor")||b._unevaluatedLayout.hasValue("text-variable-anchor-offset"),H=k.get("text-rotation-alignment")==="map",ae=k.get("text-pitch-alignment")==="map",ue=k.get("icon-text-fit")!=="none",fe=new mn(null,0,j&&($||!i.hasIconData()||k.get("icon-optional")),$&&(j||!i.hasTextData()||k.get("text-optional")),!0);!i.collisionArrays&&y&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(y);const pe=(we,Me,me)=>{for(let De=0;De<Me/4;De++)we.opacityVertexArray.emplaceBack(me);we.hasVisibleVertices=we.hasVisibleVertices||me!==Pi},ve=this.collisionBoxArrays.get(i.bucketInstanceId);for(let we=0;we<i.symbolInstances.length;we++){const Me=i.symbolInstances.get(we),{numHorizontalGlyphVertices:me,numVerticalGlyphVertices:De,crossTileID:ze}=Me;let We=this.opacities[ze];g[ze]?We=D:We||(We=fe,this.opacities[ze]=We),g[ze]=!0;const lt=Me.numIconVertices>0,gt=this.placedOrientations[Me.crossTileID],Tt=gt===l.ah.vertical,Ot=gt===l.ah.horizontal||gt===l.ah.horizontalOnly;if(me>0||De>0){const xt=gi(We.text);pe(i.text,me,Tt?Pi:xt),pe(i.text,De,Ot?Pi:xt);const Vt=We.text.isHidden();[Me.rightJustifiedTextSymbolIndex,Me.centerJustifiedTextSymbolIndex,Me.leftJustifiedTextSymbolIndex].forEach((Mt=>{Mt>=0&&(i.text.placedSymbolArray.get(Mt).hidden=Vt||Tt?1:0)})),Me.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Me.verticalPlacedTextSymbolIndex).hidden=Vt||Ot?1:0);const or=this.variableOffsets[Me.crossTileID];or&&this.markUsedJustification(i,or.anchor,Me,gt);const Et=this.placedOrientations[Me.crossTileID];Et&&(this.markUsedJustification(i,"left",Me,Et),this.markUsedOrientation(i,Et,Me))}if(lt){const xt=gi(We.icon),Vt=!(ue&&Me.verticalPlacedIconSymbolIndex&&Tt);Me.placedIconSymbolIndex>=0&&(pe(i.icon,Me.numIconVertices,Vt?xt:Pi),i.icon.placedSymbolArray.get(Me.placedIconSymbolIndex).hidden=We.icon.isHidden()),Me.verticalPlacedIconSymbolIndex>=0&&(pe(i.icon,Me.numVerticalIconVertices,Vt?Pi:xt),i.icon.placedSymbolArray.get(Me.verticalPlacedIconSymbolIndex).hidden=We.icon.isHidden())}const Pt=ve&&ve.has(we)?ve.get(we):{text:null,icon:null};if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const xt=i.collisionArrays[we];if(xt){let Vt=new l.P(0,0);if(xt.textBox||xt.verticalTextBox){let or=!0;if(G){const Et=this.variableOffsets[ze];Et?(Vt=Yn(Et.anchor,Et.width,Et.height,Et.textOffset,Et.textBoxScale),H&&Vt._rotate(ae?this.transform.angle:-this.transform.angle)):or=!1}if(xt.textBox||xt.verticalTextBox){let Et;xt.textBox&&(Et=Tt),xt.verticalTextBox&&(Et=Ot),bl(i.textCollisionBox.collisionVertexArray,We.text.placed,!or||Et,Pt.text,Vt.x,Vt.y)}}if(xt.iconBox||xt.verticalIconBox){const or=!!(!Ot&&xt.verticalIconBox);let Et;xt.iconBox&&(Et=or),xt.verticalIconBox&&(Et=!or),bl(i.iconCollisionBox.collisionVertexArray,We.icon.placed,Et,Pt.icon,ue?Vt.x:0,ue?Vt.y:0)}}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const we=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=we.invProjMatrix,i.placementViewportMatrix=we.viewportMatrix,i.collisionCircleArray=we.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,f){const g=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*g>i}setStale(){this.stale=!0}}function bl(S,i,f,g,y,b){g&&g.length!==0||(g=[0,0,0,0]);const k=g[0]-fr,D=g[1]-fr,j=g[2]-fr,$=g[3]-fr;S.emplaceBack(i?1:0,f?1:0,y||0,b||0,k,D),S.emplaceBack(i?1:0,f?1:0,y||0,b||0,j,D),S.emplaceBack(i?1:0,f?1:0,y||0,b||0,j,$),S.emplaceBack(i?1:0,f?1:0,y||0,b||0,k,$)}const cr=Math.pow(2,25),dh=Math.pow(2,24),pu=Math.pow(2,17),Li=Math.pow(2,16),mi=Math.pow(2,9),Up=Math.pow(2,8),ia=Math.pow(2,1);function gi(S){if(S.opacity===0&&!S.placed)return 0;if(S.opacity===1&&S.placed)return 4294967295;const i=S.placed?1:0,f=Math.floor(127*S.opacity);return f*cr+i*dh+f*pu+i*Li+f*mi+i*Up+f*ia+i}const Pi=0;function $s(){return{isOccluded:(S,i,f)=>!1,getPitchedTextCorrection:(S,i,f)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(S,i,f,g){throw new Error("Not implemented.")},translatePosition:(S,i,f,g)=>(function(y,b,k,D,j=!1){if(!k[0]&&!k[1])return[0,0];const $=j?D==="map"?y.angle:0:D==="viewport"?-y.angle:0;if($){const G=Math.sin($),H=Math.cos($);k=[k[0]*H-k[1]*G,k[0]*G+k[1]*H]}return[j?k[0]:yr(b,k[0],y.zoom),j?k[1]:yr(b,k[1],y.zoom)]})(S,i,f,g),getCircleRadiusCorrection:S=>1}}class Wr{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,f,g,y,b){const k=this._bucketParts;for(;this._currentTileIndex<i.length;)if(f.getBucketParts(k,y,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort(((D,j)=>D.sortKey-j.sortKey)));this._currentPartIndex<k.length;)if(f.placeLayerBucketPart(k[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,b())return!0;return!1}}class mu{constructor(i,f,g,y,b,k,D,j){this.placement=new Ti(i,$s(),f,k,D,j),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(i,f,g){const y=A.now(),b=()=>!this._forceFullPlacement&&A.now()-y>2;for(;this._currentPlacementIndex>=0;){const k=f[i[this._currentPlacementIndex]],D=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=D)&&(!k.maxzoom||k.maxzoom>D)){if(this._inProgressLayer||(this._inProgressLayer=new Wr(k)),this._inProgressLayer.continuePlacement(g[k.source],this.placement,this._showCollisionBoxes,k,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Wa=512/l.X/2;class In{constructor(i,f,g){this.tileID=i,this.bucketInstanceId=g,this._symbolsByKey={};const y=new Map;for(let b=0;b<f.length;b++){const k=f.get(b),D=k.key,j=y.get(D);j?j.push(k):y.set(D,[k])}for(const[b,k]of y){const D={positions:k.map((j=>({x:Math.floor(j.anchorX*Wa),y:Math.floor(j.anchorY*Wa)}))),crossTileIDs:k.map((j=>j.crossTileID))};if(D.positions.length>128){const j=new l.av(D.positions.length,16,Uint16Array);for(const{x:$,y:G}of D.positions)j.add($,G);j.finish(),delete D.positions,D.index=j}this._symbolsByKey[b]=D}}getScaledCoordinates(i,f){const{x:g,y,z:b}=this.tileID.canonical,{x:k,y:D,z:j}=f.canonical,$=Wa/Math.pow(2,j-b),G=(D*l.X+i.anchorY)*$,H=y*l.X*Wa;return{x:Math.floor((k*l.X+i.anchorX)*$-g*l.X*Wa),y:Math.floor(G-H)}}findMatches(i,f,g){const y=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let b=0;b<i.length;b++){const k=i.get(b);if(k.crossTileID)continue;const D=this._symbolsByKey[k.key];if(!D)continue;const j=this.getScaledCoordinates(k,f);if(D.index){const $=D.index.range(j.x-y,j.y-y,j.x+y,j.y+y).sort();for(const G of $){const H=D.crossTileIDs[G];if(!g[H]){g[H]=!0,k.crossTileID=H;break}}}else if(D.positions)for(let $=0;$<D.positions.length;$++){const G=D.positions[$],H=D.crossTileIDs[$];if(Math.abs(G.x-j.x)<=y&&Math.abs(G.y-j.y)<=y&&!g[H]){g[H]=!0,k.crossTileID=H;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:i})=>i))}}class Vs{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ni{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const f=Math.round((i-this.lng)/360);if(f!==0)for(const g in this.indexes){const y=this.indexes[g],b={};for(const k in y){const D=y[k];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+f),b[D.tileID.key]=D}this.indexes[g]=b}this.lng=i}addBucket(i,f,g){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let b=0;b<f.symbolInstances.length;b++)f.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const y=this.usedCrossTileIDs[i.overscaledZ];for(const b in this.indexes){const k=this.indexes[b];if(Number(b)>i.overscaledZ)for(const D in k){const j=k[D];j.tileID.isChildOf(i)&&j.findMatches(f.symbolInstances,i,y)}else{const D=k[i.scaledTo(Number(b)).key];D&&D.findMatches(f.symbolInstances,i,y)}}for(let b=0;b<f.symbolInstances.length;b++){const k=f.symbolInstances.get(b);k.crossTileID||(k.crossTileID=g.generate(),y[k.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new In(i,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(i,f){for(const g of f.getCrossTileIDsLists())for(const y of g)delete this.usedCrossTileIDs[i][y]}removeStaleBuckets(i){let f=!1;for(const g in this.indexes){const y=this.indexes[g];for(const b in y)i[y[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,y[b]),delete y[b],f=!0)}return f}}class Us{constructor(){this.layerIndexes={},this.crossTileIDs=new Vs,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,f,g){let y=this.layerIndexes[i.id];y===void 0&&(y=this.layerIndexes[i.id]=new Ni);let b=!1;const k={};y.handleWrapJump(g);for(const D of f){const j=D.getBucket(i);j&&i.id===j.layerIds[0]&&(j.bucketInstanceId||(j.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(D.tileID,j,this.crossTileIDs)&&(b=!0),k[j.bucketInstanceId]=!0)}return y.removeStaleBuckets(k)&&(b=!0),b}pruneUnusedLayers(i){const f={};i.forEach((g=>{f[g]=!0}));for(const g in this.layerIndexes)f[g]||delete this.layerIndexes[g]}}const Bi=(S,i)=>l.t(S,i&&i.filter((f=>f.identifier!=="source.canvas"))),qp=l.aw();class dc extends l.E{constructor(i,f={}){super(),this._rtlPluginLoaded=()=>{for(const g in this.sourceCaches){const y=this.sourceCaches[g].getSource().type;y!=="vector"&&y!=="geojson"||this.sourceCaches[g].reload()}},this.map=i,this.dispatcher=new It(ot(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",((g,y)=>this.getGlyphs(g,y))),this.dispatcher.registerMessageHandler("GI",((g,y)=>this.getImages(g,y))),this.imageManager=new Ve,this.imageManager.setEventedParent(this),this.glyphManager=new et(i._requestManager,f.localIdeographFontFamily),this.lineAtlas=new nt(256,512),this.crossTileSymbolIndex=new Us,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",l.ay()),Xn().on(yt,this._rtlPluginLoaded),this.on("data",(g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const y=this.sourceCaches[g.sourceId];if(!y)return;const b=y.getSource();if(b&&b.vectorLayerIds)for(const k in this._layers){const D=this._layers[k];D.source===b.id&&this._validateLayer(D)}}))}loadURL(i,f={},g){this.fire(new l.k("dataloading",{dataType:"style"})),f.validate=typeof f.validate!="boolean"||f.validate;const y=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController;const b=this._loadStyleRequest;l.h(y,this._loadStyleRequest).then((k=>{this._loadStyleRequest=null,this._load(k.data,f,g)})).catch((k=>{this._loadStyleRequest=null,k&&!b.signal.aborted&&this.fire(new l.j(k))}))}loadJSON(i,f={},g){this.fire(new l.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,A.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,f.validate=f.validate!==!1,this._load(i,f,g)})).catch((()=>{}))}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(qp,{validate:!1})}_load(i,f,g){var y;const b=f.transformStyle?f.transformStyle(g,i):i;if(!f.validate||!Bi(this,l.u(b))){this._loaded=!0,this.stylesheet=b;for(const k in b.sources)this.addSource(k,b.sources[k],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new ge(this.stylesheet.light),this.sky=new Ce(this.stylesheet.sky),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const i=l.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",i),this._order=i.map((f=>f.id)),this._layers={},this._serializedLayers=null;for(const f of i){const g=l.aA(f);g.setEventedParent(this,{layer:{id:f.id}}),this._layers[f.id]=g}}_loadSprite(i,f=!1,g=void 0){let y;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(b,k,D,j){return l._(this,void 0,void 0,(function*(){const $=Pe(b),G=D>1?"@2x":"",H={},ae={};for(const{id:ue,url:fe}of $){const pe=k.transformRequest(Fe(fe,G,".json"),"SpriteJSON");H[ue]=l.h(pe,j);const ve=k.transformRequest(Fe(fe,G,".png"),"SpriteImage");ae[ue]=J.getImage(ve,j)}return yield Promise.all([...Object.values(H),...Object.values(ae)]),(function(ue,fe){return l._(this,void 0,void 0,(function*(){const pe={};for(const ve in ue){pe[ve]={};const we=A.getImageCanvasContext((yield fe[ve]).data),Me=(yield ue[ve]).data;for(const me in Me){const{width:De,height:ze,x:We,y:lt,sdf:gt,pixelRatio:Tt,stretchX:Ot,stretchY:Pt,content:xt,textFitWidth:Vt,textFitHeight:or}=Me[me];pe[ve][me]={data:null,pixelRatio:Tt,sdf:gt,stretchX:Ot,stretchY:Pt,content:xt,textFitWidth:Vt,textFitHeight:or,spriteData:{width:De,height:ze,x:We,y:lt,context:we}}}}return pe}))})(H,ae)}))})(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((b=>{if(this._spriteRequest=null,b)for(const k in b){this._spritesImagesIds[k]=[];const D=this._spritesImagesIds[k]?this._spritesImagesIds[k].filter((j=>!(j in b))):[];for(const j of D)this.imageManager.removeImage(j),this._changedImages[j]=!0;for(const j in b[k]){const $=k==="default"?j:`${k}:${j}`;this._spritesImagesIds[k].push($),$ in this.imageManager.images?this.imageManager.updateImage($,b[k][j],!1):this.imageManager.addImage($,b[k][j]),f&&(this._changedImages[$]=!0)}}})).catch((b=>{this._spriteRequest=null,y=b,this.fire(new l.j(y))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),f&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),g&&g(y)}))}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(i){const f=this.sourceCaches[i.source];if(!f)return;const g=i.sourceLayer;if(!g)return;const y=f.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(g)===-1)&&this.fire(new l.j(new Error(`Source layer "${g}" does not exist on source "${y.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i,f=!1){const g=this._serializedAllLayers();if(!i||i.length===0)return Object.values(f?l.aB(g):g);const y=[];for(const b of i)if(g[b]){const k=f?l.aB(g[b]):g[b];y.push(k)}return y}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const f=Object.keys(this._layers);for(const g of f){const y=this._layers[g];y.type!=="custom"&&(i[g]=y.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const f=this._changed;if(f){const y=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(y.length||b.length)&&this._updateWorkerLayers(y,b);for(const k in this._updatedSources){const D=this._updatedSources[k];if(D==="reload")this._reloadSource(k);else{if(D!=="clear")throw new Error(`Invalid action ${D}`);this._clearSource(k)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const k in this._updatedPaintProps)this._layers[k].updateTransitions(i);this.light.updateTransitions(i),this.sky.updateTransitions(i),this._resetUpdates()}const g={};for(const y in this.sourceCaches){const b=this.sourceCaches[y];g[y]=b.used,b.used=!1}for(const y of this._order){const b=this._layers[y];b.recalculate(i,this._availableImages),!b.isHidden(i.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const y in g){const b=this.sourceCaches[y];!!g[y]!=!!b.used&&b.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(i),this.sky.recalculate(i),this.z=i.zoom,f&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const f in this.sourceCaches)this.sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,f){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i,!1),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,f={}){var g;this._checkLoaded();const y=this.serialize();if(i=f.transformStyle?f.transformStyle(y,i):i,((g=f.validate)===null||g===void 0||g)&&Bi(this,l.u(i)))return!1;(i=l.aB(i)).layers=l.az(i.layers);const b=l.aC(y,i),k=this._getOperationsToPerform(b);if(k.unimplemented.length>0)throw new Error(`Unimplemented: ${k.unimplemented.join(", ")}.`);if(k.operations.length===0)return!1;for(const D of k.operations)D();return this.stylesheet=i,this._serializedLayers=null,!0}_getOperationsToPerform(i){const f=[],g=[];for(const y of i)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":f.push((()=>this.addLayer.apply(this,y.args)));break;case"removeLayer":f.push((()=>this.removeLayer.apply(this,y.args)));break;case"setPaintProperty":f.push((()=>this.setPaintProperty.apply(this,y.args)));break;case"setLayoutProperty":f.push((()=>this.setLayoutProperty.apply(this,y.args)));break;case"setFilter":f.push((()=>this.setFilter.apply(this,y.args)));break;case"addSource":f.push((()=>this.addSource.apply(this,y.args)));break;case"removeSource":f.push((()=>this.removeSource.apply(this,y.args)));break;case"setLayerZoomRange":f.push((()=>this.setLayerZoomRange.apply(this,y.args)));break;case"setLight":f.push((()=>this.setLight.apply(this,y.args)));break;case"setGeoJSONSourceData":f.push((()=>this.setGeoJSONSourceData.apply(this,y.args)));break;case"setGlyphs":f.push((()=>this.setGlyphs.apply(this,y.args)));break;case"setSprite":f.push((()=>this.setSprite.apply(this,y.args)));break;case"setSky":f.push((()=>this.setSky.apply(this,y.args)));break;case"setTerrain":f.push((()=>this.map.setTerrain.apply(this,y.args)));break;case"setTransition":f.push((()=>{}));break;default:g.push(y.command)}return{operations:f,unimplemented:g}}addImage(i,f){if(this.getImage(i))return this.fire(new l.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,f),this._afterImageUpdated(i)}updateImage(i,f){this.imageManager.updateImage(i,f)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new l.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,f,g={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(l.u.source,`sources.${i}`,f,null,g))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const y=this.sourceCaches[i]=new nr(i,f,this.dispatcher);y.style=this,y.setEventedParent(this,(()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:i}))),y.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const g in this._layers)if(this._layers[g].source===i)return this.fire(new l.j(new Error(`Source "${i}" cannot be removed while layer "${g}" is using it.`)));const f=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],f.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),f.setEventedParent(null),f.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,f){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const g=this.sourceCaches[i].getSource();if(g.type!=="geojson")throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(f),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,f,g={}){this._checkLoaded();const y=i.id;if(this.getLayer(y))return void this.fire(new l.j(new Error(`Layer "${y}" already exists on this map.`)));let b;if(i.type==="custom"){if(Bi(this,l.aD(i)))return;b=l.aA(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(y,i.source),i=l.aB(i),i=l.e(i,{source:y})),this._validate(l.u.layer,`layers.${y}`,i,{arrayIndex:-1},g))return;b=l.aA(i),this._validateLayer(b),b.setEventedParent(this,{layer:{id:y}})}const k=f?this._order.indexOf(f):this._order.length;if(f&&k===-1)this.fire(new l.j(new Error(`Cannot add layer "${y}" before non-existing layer "${f}".`)));else{if(this._order.splice(k,0,y),this._layerOrderChanged=!0,this._layers[y]=b,this._removedLayers[y]&&b.source&&b.type!=="custom"){const D=this._removedLayers[y];delete this._removedLayers[y],D.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(i,f){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new l.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===f)return;const g=this._order.indexOf(i);this._order.splice(g,1);const y=f?this._order.indexOf(f):this._order.length;f&&y===-1?this.fire(new l.j(new Error(`Cannot move layer "${i}" before non-existing layer "${f}".`))):(this._order.splice(y,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const f=this._layers[i];if(!f)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${i}".`)));f.setEventedParent(null);const g=this._order.indexOf(i);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=f,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],f.onRemove&&f.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,f,g){this._checkLoaded();const y=this.getLayer(i);y?y.minzoom===f&&y.maxzoom===g||(f!=null&&(y.minzoom=f),g!=null&&(y.maxzoom=g),this._updateLayer(y)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,f,g={}){this._checkLoaded();const y=this.getLayer(i);if(y){if(!l.aE(y.filter,f))return f==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(l.u.filter,`layers.${y.id}.filter`,f,null,g)||(y.filter=l.aB(f),this._updateLayer(y)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return l.aB(this.getLayer(i).filter)}setLayoutProperty(i,f,g,y={}){this._checkLoaded();const b=this.getLayer(i);b?l.aE(b.getLayoutProperty(f),g)||(b.setLayoutProperty(f,g,y),this._updateLayer(b)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,f){const g=this.getLayer(i);if(g)return g.getLayoutProperty(f);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,f,g,y={}){this._checkLoaded();const b=this.getLayer(i);b?l.aE(b.getPaintProperty(f),g)||(b.setPaintProperty(f,g,y)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[i]=!0,this._serializedLayers=null):this.fire(new l.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,f){return this.getLayer(i).getPaintProperty(f)}setFeatureState(i,f){this._checkLoaded();const g=i.source,y=i.sourceLayer,b=this.sourceCaches[g];if(b===void 0)return void this.fire(new l.j(new Error(`The source '${g}' does not exist in the map's style.`)));const k=b.getSource().type;k==="geojson"&&y?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):k!=="vector"||y?(i.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),b.setFeatureState(y,i.id,f)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,f){this._checkLoaded();const g=i.source,y=this.sourceCaches[g];if(y===void 0)return void this.fire(new l.j(new Error(`The source '${g}' does not exist in the map's style.`)));const b=y.getSource().type,k=b==="vector"?i.sourceLayer:void 0;b!=="vector"||k?f&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(k,i.id,f):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const f=i.source,g=i.sourceLayer,y=this.sourceCaches[f];if(y!==void 0)return y.getSource().type!=="vector"||g?(i.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),y.getFeatureState(g,i.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=l.aF(this.sourceCaches,(b=>b.serialize())),f=this._serializeByIds(this._order,!0),g=this.map.getTerrain()||void 0,y=this.stylesheet;return l.aG({version:y.version,name:y.name,metadata:y.metadata,light:y.light,sky:y.sky,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,sources:i,layers:f,terrain:g},(b=>b!==void 0))}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const f=k=>this._layers[k].type==="fill-extrusion",g={},y=[];for(let k=this._order.length-1;k>=0;k--){const D=this._order[k];if(f(D)){g[D]=k;for(const j of i){const $=j[D];if($)for(const G of $)y.push(G)}}}y.sort(((k,D)=>D.intersectionZ-k.intersectionZ));const b=[];for(let k=this._order.length-1;k>=0;k--){const D=this._order[k];if(f(D))for(let j=y.length-1;j>=0;j--){const $=y[j].feature;if(g[$.layer.id]<k)break;b.push($),y.pop()}else for(const j of i){const $=j[D];if($)for(const G of $)b.push(G.feature)}}return b}queryRenderedFeatures(i,f,g){f&&f.filter&&this._validate(l.u.filter,"queryRenderedFeatures.filter",f.filter,null,f);const y={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const D of f.layers){const j=this._layers[D];if(!j)return this.fire(new l.j(new Error(`The layer '${D}' does not exist in the map's style and cannot be queried for features.`))),[];y[j.source]=!0}}const b=[];f.availableImages=this._availableImages;const k=this._serializedAllLayers();for(const D in this.sourceCaches)f.layers&&!y[D]||b.push(ar(this.sourceCaches[D],this._layers,k,i,f,g));return this.placement&&b.push((function(D,j,$,G,H,ae,ue){const fe={},pe=ae.queryRenderedSymbols(G),ve=[];for(const we of Object.keys(pe).map(Number))ve.push(ue[we]);ve.sort(jt);for(const we of ve){const Me=we.featureIndex.lookupSymbolFeatures(pe[we.bucketInstanceId],j,we.bucketIndex,we.sourceLayerIndex,H.filter,H.layers,H.availableImages,D);for(const me in Me){const De=fe[me]=fe[me]||[],ze=Me[me];ze.sort(((We,lt)=>{const gt=we.featureSortOrder;if(gt){const Tt=gt.indexOf(We.featureIndex);return gt.indexOf(lt.featureIndex)-Tt}return lt.featureIndex-We.featureIndex}));for(const We of ze)De.push(We)}}for(const we in fe)fe[we].forEach((Me=>{const me=Me.feature,De=$[D[we].source].getFeatureState(me.layer["source-layer"],me.id);me.source=me.layer.source,me.layer["source-layer"]&&(me.sourceLayer=me.layer["source-layer"]),me.state=De}));return fe})(this._layers,k,this.sourceCaches,i,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(i,f){f&&f.filter&&this._validate(l.u.filter,"querySourceFeatures.filter",f.filter,null,f);const g=this.sourceCaches[i];return g?(function(y,b){const k=y.getRenderableIds().map(($=>y.getTileByID($))),D=[],j={};for(let $=0;$<k.length;$++){const G=k[$],H=G.tileID.canonical.key;j[H]||(j[H]=!0,G.querySourceFeatures(D,b))}return D})(g,f):[]}getLight(){return this.light.getLight()}setLight(i,f={}){this._checkLoaded();const g=this.light.getLight();let y=!1;for(const k in i)if(!l.aE(i[k],g[k])){y=!0;break}if(!y)return;const b={now:A.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,f),this.light.updateTransitions(b)}getSky(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.sky}setSky(i,f={}){const g=this.getSky();let y=!1;if(!i&&!g)return;if(i&&!g)y=!0;else if(!i&&g)y=!0;else for(const k in i)if(!l.aE(i[k],g[k])){y=!0;break}if(!y)return;const b={now:A.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=i,this.sky.setSky(i,f),this.sky.updateTransitions(b)}_validate(i,f,g,y,b={}){return(!b||b.validate!==!1)&&Bi(this,i.call(l.u,l.e({key:f,style:this.serialize(),value:g,styleSpec:l.v},y)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Xn().off(yt,this._rtlPluginLoaded);for(const f in this._layers)this._layers[f].setEventedParent(null);for(const f in this.sourceCaches){const g=this.sourceCaches[f];g.setEventedParent(null),g.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const f in this.sourceCaches)this.sourceCaches[f].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,f,g,y,b=!1){let k=!1,D=!1;const j={};for(const $ of this._order){const G=this._layers[$];if(G.type!=="symbol")continue;if(!j[G.source]){const ae=this.sourceCaches[G.source];j[G.source]=ae.getRenderableIds(!0).map((ue=>ae.getTileByID(ue))).sort(((ue,fe)=>fe.tileID.overscaledZ-ue.tileID.overscaledZ||(ue.tileID.isLessThan(fe.tileID)?-1:1)))}const H=this.crossTileSymbolIndex.addLayer(G,j[G.source],i.center.lng);k=k||H}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(A.now(),i.zoom))&&(this.pauseablePlacement=new mu(i,this.map.terrain,this._order,b,f,g,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,j),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(A.now()),D=!0),k&&this.pauseablePlacement.placement.setStale()),D||k)for(const $ of this._order){const G=this._layers[$];G.type==="symbol"&&this.placement.updateLayerOpacities(G,j[G.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(A.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,f){return l._(this,void 0,void 0,(function*(){const g=yield this.imageManager.getImages(f.icons);this._updateTilesForChangedImages();const y=this.sourceCaches[f.source];return y&&y.setDependencies(f.tileID.key,f.type,f.icons),g}))}getGlyphs(i,f){return l._(this,void 0,void 0,(function*(){const g=yield this.glyphManager.getGlyphs(f.stacks),y=this.sourceCaches[f.source];return y&&y.setDependencies(f.tileID.key,f.type,[""]),g}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,f={}){this._checkLoaded(),i&&this._validate(l.u.glyphs,"glyphs",i,null,f)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,f,g={},y){this._checkLoaded();const b=[{id:i,url:f}],k=[...Pe(this.stylesheet.sprite),...b];this._validate(l.u.sprite,"sprite",k,null,g)||(this.stylesheet.sprite=k,this._loadSprite(b,!0,y))}removeSprite(i){this._checkLoaded();const f=Pe(this.stylesheet.sprite);if(f.find((g=>g.id===i))){if(this._spritesImagesIds[i])for(const g of this._spritesImagesIds[i])this.imageManager.removeImage(g),this._changedImages[g]=!0;f.splice(f.findIndex((g=>g.id===i)),1),this.stylesheet.sprite=f.length>0?f:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return Pe(this.stylesheet.sprite)}setSprite(i,f={},g){this._checkLoaded(),i&&this._validate(l.u.sprite,"sprite",i,null,f)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,g):(this._unloadSprite(),g&&g(null)))}}var Io=l.Y([{name:"a_pos",type:"Int16",components:2}]);const ko={prelude:Or(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Or(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Or(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Or(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Or("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Or(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Or(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Or("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Or("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Or("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Or(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Or(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Or(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Or(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Or(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Or(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Or(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Or(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Or(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Or(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Or(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Or(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Or(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Or(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Or("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Or("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Or("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Or("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Or(S,i){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=i.match(/attribute ([\w]+) ([\w]+)/g),y=S.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=b?b.concat(y):y,D={};return{fragmentSource:S=S.replace(f,((j,$,G,H,ae)=>(D[ae]=!0,$==="define"?`
#ifndef HAS_UNIFORM_u_${ae}
varying ${G} ${H} ${ae};
#else
uniform ${G} ${H} u_${ae};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ae}
    ${G} ${H} ${ae} = u_${ae};
#endif
`))),vertexSource:i=i.replace(f,((j,$,G,H,ae)=>{const ue=H==="float"?"vec2":"vec4",fe=ae.match(/color/)?"color":ue;return D[ae]?$==="define"?`
#ifndef HAS_UNIFORM_u_${ae}
uniform lowp float u_${ae}_t;
attribute ${G} ${ue} a_${ae};
varying ${G} ${H} ${ae};
#else
uniform ${G} ${H} u_${ae};
#endif
`:fe==="vec4"?`
#ifndef HAS_UNIFORM_u_${ae}
    ${ae} = a_${ae};
#else
    ${G} ${H} ${ae} = u_${ae};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ae}
    ${ae} = unpack_mix_${fe}(a_${ae}, u_${ae}_t);
#else
    ${G} ${H} ${ae} = u_${ae};
#endif
`:$==="define"?`
#ifndef HAS_UNIFORM_u_${ae}
uniform lowp float u_${ae}_t;
attribute ${G} ${ue} a_${ae};
#else
uniform ${G} ${H} u_${ae};
#endif
`:fe==="vec4"?`
#ifndef HAS_UNIFORM_u_${ae}
    ${G} ${H} ${ae} = a_${ae};
#else
    ${G} ${H} ${ae} = u_${ae};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ae}
    ${G} ${H} ${ae} = unpack_mix_${fe}(a_${ae}, u_${ae}_t);
#else
    ${G} ${H} ${ae} = u_${ae};
#endif
`})),staticAttributes:g,staticUniforms:k}}class qs{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,f,g,y,b,k,D,j,$){this.context=i;let G=this.boundPaintVertexBuffers.length!==y.length;for(let H=0;!G&&H<y.length;H++)this.boundPaintVertexBuffers[H]!==y[H]&&(G=!0);!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==g||G||this.boundIndexBuffer!==b||this.boundVertexOffset!==k||this.boundDynamicVertexBuffer!==D||this.boundDynamicVertexBuffer2!==j||this.boundDynamicVertexBuffer3!==$?this.freshBind(f,g,y,b,k,D,j,$):(i.bindVertexArray.set(this.vao),D&&D.bind(),b&&b.dynamicDraw&&b.bind(),j&&j.bind(),$&&$.bind())}freshBind(i,f,g,y,b,k,D,j){const $=i.numAttributes,G=this.context,H=G.gl;this.vao&&this.destroy(),this.vao=G.createVertexArray(),G.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=y,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=k,this.boundDynamicVertexBuffer2=D,this.boundDynamicVertexBuffer3=j,f.enableAttributes(H,i);for(const ae of g)ae.enableAttributes(H,i);k&&k.enableAttributes(H,i),D&&D.enableAttributes(H,i),j&&j.enableAttributes(H,i),f.bind(),f.setVertexAttribPointers(H,i,b);for(const ae of g)ae.bind(),ae.setVertexAttribPointers(H,i,b);k&&(k.bind(),k.setVertexAttribPointers(H,i,b)),y&&y.bind(),D&&(D.bind(),D.setVertexAttribPointers(H,i,b)),j&&(j.bind(),j.setVertexAttribPointers(H,i,b)),G.currentNumAttributes=$}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const ph=(S,i,f,g,y)=>({u_matrix:S,u_texture:0,u_ele_delta:i,u_fog_matrix:f,u_fog_color:g?g.properties.get("fog-color"):l.aM.white,u_fog_ground_blend:g?g.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:g?g.calculateFogBlendOpacity(y):0,u_horizon_color:g?g.properties.get("horizon-color"):l.aM.white,u_horizon_fog_blend:g?g.properties.get("horizon-fog-blend"):1});function us(S){const i=[];for(let f=0;f<S.length;f++){if(S[f]===null)continue;const g=S[f].split(" ");i.push(g.pop())}return i}class $r{constructor(i,f,g,y,b,k){const D=i.gl;this.program=D.createProgram();const j=us(f.staticAttributes),$=g?g.getBinderAttributes():[],G=j.concat($),H=ko.prelude.staticUniforms?us(ko.prelude.staticUniforms):[],ae=f.staticUniforms?us(f.staticUniforms):[],ue=g?g.getBinderUniforms():[],fe=H.concat(ae).concat(ue),pe=[];for(const We of fe)pe.indexOf(We)<0&&pe.push(We);const ve=g?g.defines():[];b&&ve.push("#define OVERDRAW_INSPECTOR;"),k&&ve.push("#define TERRAIN3D;");const we=ve.concat(ko.prelude.fragmentSource,f.fragmentSource).join(`
`),Me=ve.concat(ko.prelude.vertexSource,f.vertexSource).join(`
`),me=D.createShader(D.FRAGMENT_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);if(D.shaderSource(me,we),D.compileShader(me),!D.getShaderParameter(me,D.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${D.getShaderInfoLog(me)}`);D.attachShader(this.program,me);const De=D.createShader(D.VERTEX_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);if(D.shaderSource(De,Me),D.compileShader(De),!D.getShaderParameter(De,D.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${D.getShaderInfoLog(De)}`);D.attachShader(this.program,De),this.attributes={};const ze={};this.numAttributes=G.length;for(let We=0;We<this.numAttributes;We++)G[We]&&(D.bindAttribLocation(this.program,We,G[We]),this.attributes[G[We]]=We);if(D.linkProgram(this.program),!D.getProgramParameter(this.program,D.LINK_STATUS))throw new Error(`Program failed to link: ${D.getProgramInfoLog(this.program)}`);D.deleteShader(De),D.deleteShader(me);for(let We=0;We<pe.length;We++){const lt=pe[We];if(lt&&!ze[lt]){const gt=D.getUniformLocation(this.program,lt);gt&&(ze[lt]=gt)}}this.fixedUniforms=y(i,ze),this.terrainUniforms=((We,lt)=>({u_depth:new l.aH(We,lt.u_depth),u_terrain:new l.aH(We,lt.u_terrain),u_terrain_dim:new l.aI(We,lt.u_terrain_dim),u_terrain_matrix:new l.aJ(We,lt.u_terrain_matrix),u_terrain_unpack:new l.aK(We,lt.u_terrain_unpack),u_terrain_exaggeration:new l.aI(We,lt.u_terrain_exaggeration)}))(i,ze),this.binderUniforms=g?g.getUniforms(i,ze):[]}draw(i,f,g,y,b,k,D,j,$,G,H,ae,ue,fe,pe,ve,we,Me){const me=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(g),i.setStencilMode(y),i.setColorMode(b),i.setCullFace(k),j){i.activeTexture.set(me.TEXTURE2),me.bindTexture(me.TEXTURE_2D,j.depthTexture),i.activeTexture.set(me.TEXTURE3),me.bindTexture(me.TEXTURE_2D,j.texture);for(const ze in this.terrainUniforms)this.terrainUniforms[ze].set(j[ze])}for(const ze in this.fixedUniforms)this.fixedUniforms[ze].set(D[ze]);pe&&pe.setUniforms(i,this.binderUniforms,ue,{zoom:fe});let De=0;switch(f){case me.LINES:De=2;break;case me.TRIANGLES:De=3;break;case me.LINE_STRIP:De=1}for(const ze of ae.get()){const We=ze.vaos||(ze.vaos={});(We[$]||(We[$]=new qs)).bind(i,this,G,pe?pe.getPaintVertexBuffers():[],H,ze.vertexOffset,ve,we,Me),me.drawElements(f,ze.primitiveLength*De,me.UNSIGNED_SHORT,ze.primitiveOffset*De*2)}}}function gu(S,i,f){const g=1/yr(f,1,i.transform.tileZoom),y=Math.pow(2,f.tileID.overscaledZ),b=f.tileSize*Math.pow(2,i.transform.tileZoom)/y,k=b*(f.tileID.canonical.x+f.tileID.wrap*y),D=b*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[g,S.fromScale,S.toScale],u_fade:S.t,u_pixel_coord_upper:[k>>16,D>>16],u_pixel_coord_lower:[65535&k,65535&D]}}const wl=(S,i,f,g)=>{const y=i.style.light,b=y.properties.get("position"),k=[b.x,b.y,b.z],D=(function(){var $=new l.A(9);return l.A!=Float32Array&&($[1]=0,$[2]=0,$[3]=0,$[5]=0,$[6]=0,$[7]=0),$[0]=1,$[4]=1,$[8]=1,$})();y.properties.get("anchor")==="viewport"&&(function($,G){var H=Math.sin(G),ae=Math.cos(G);$[0]=ae,$[1]=H,$[2]=0,$[3]=-H,$[4]=ae,$[5]=0,$[6]=0,$[7]=0,$[8]=1})(D,-i.transform.angle),(function($,G,H){var ae=G[0],ue=G[1],fe=G[2];$[0]=ae*H[0]+ue*H[3]+fe*H[6],$[1]=ae*H[1]+ue*H[4]+fe*H[7],$[2]=ae*H[2]+ue*H[5]+fe*H[8]})(k,k,D);const j=y.properties.get("color");return{u_matrix:S,u_lightpos:k,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[j.r,j.g,j.b],u_vertical_gradient:+f,u_opacity:g}},Sl=(S,i,f,g,y,b,k)=>l.e(wl(S,i,f,g),gu(b,i,k),{u_height_factor:-Math.pow(2,y.overscaledZ)/k.tileSize/8}),Ws=S=>({u_matrix:S}),mh=(S,i,f,g)=>l.e(Ws(S),gu(f,i,g)),Hf=(S,i)=>({u_matrix:S,u_world:i}),pc=(S,i,f,g,y)=>l.e(mh(S,i,f,g),{u_world:y}),mc=(S,i,f,g)=>{const y=S.transform;let b,k;if(g.paint.get("circle-pitch-alignment")==="map"){const D=yr(f,1,y.zoom);b=!0,k=[D,D]}else b=!1,k=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(g.paint.get("circle-pitch-scale")==="map"),u_matrix:S.translatePosMatrix(i.posMatrix,f,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:S.pixelRatio,u_extrude_scale:k}},Fi=(S,i,f)=>({u_matrix:S,u_inv_matrix:i,u_camera_to_center_distance:f.cameraToCenterDistance,u_viewport_size:[f.width,f.height]}),ba=(S,i,f=1)=>({u_matrix:S,u_color:i,u_overlay:0,u_overlay_scale:f}),kn=S=>({u_matrix:S}),Jn=(S,i,f,g)=>({u_matrix:S,u_extrude_scale:yr(i,1,f),u_intensity:g}),cs=(S,i,f,g)=>{const y=l.H();l.aP(y,0,S.width,S.height,0,0,1);const b=S.context.gl;return{u_matrix:y,u_world:[b.drawingBufferWidth,b.drawingBufferHeight],u_image:f,u_color_ramp:g,u_opacity:i.paint.get("heatmap-opacity")}};function Ga(S,i){const f=Math.pow(2,i.canonical.z),g=i.canonical.y;return[new l.Z(0,g/f).toLngLat().lat,new l.Z(0,(g+1)/f).toLngLat().lat]}const gc=(S,i,f,g)=>{const y=S.transform;return{u_matrix:yu(S,i,f,g),u_ratio:1/yr(i,1,y.zoom),u_device_pixel_ratio:S.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},gh=(S,i,f,g,y)=>l.e(gc(S,i,f,y),{u_image:0,u_image_height:g}),fo=(S,i,f,g,y)=>{const b=S.transform,k=yh(i,b);return{u_matrix:yu(S,i,f,y),u_texsize:i.imageAtlasTexture.size,u_ratio:1/yr(i,1,b.zoom),u_device_pixel_ratio:S.pixelRatio,u_image:0,u_scale:[k,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Wp=(S,i,f,g,y,b)=>{const k=S.lineAtlas,D=yh(i,S.transform),j=f.layout.get("line-cap")==="round",$=k.getDash(g.from,j),G=k.getDash(g.to,j),H=$.width*y.fromScale,ae=G.width*y.toScale;return l.e(gc(S,i,f,b),{u_patternscale_a:[D/H,-$.height/2],u_patternscale_b:[D/ae,-G.height/2],u_sdfgamma:k.width/(256*Math.min(H,ae)*S.pixelRatio)/2,u_image:0,u_tex_y_a:$.y,u_tex_y_b:G.y,u_mix:y.t})};function yh(S,i){return 1/yr(S,1,i.tileZoom)}function yu(S,i,f,g){return S.translatePosMatrix(g?g.posMatrix:i.tileID.posMatrix,i,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}const Zf=(S,i,f,g,y)=>{return{u_matrix:S,u_tl_parent:i,u_scale_parent:f,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(k=y.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(b=y.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Gp(y.paint.get("raster-hue-rotate"))};var b,k};function Gp(S){S*=Math.PI/180;const i=Math.sin(S),f=Math.cos(S);return[(2*f+1)/3,(-Math.sqrt(3)*i-f+1)/3,(Math.sqrt(3)*i-f+1)/3]}const Tl=(S,i,f,g,y,b,k,D,j,$,G,H,ae,ue)=>{const fe=k.transform;return{u_is_size_zoom_constant:+(S==="constant"||S==="source"),u_is_size_feature_constant:+(S==="constant"||S==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:fe.cameraToCenterDistance,u_pitch:fe.pitch/360*2*Math.PI,u_rotate_symbol:+f,u_aspect_ratio:fe.width/fe.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_matrix:D,u_label_plane_matrix:j,u_coord_matrix:$,u_is_text:+H,u_pitch_with_map:+g,u_is_along_line:y,u_is_variable_anchor:b,u_texsize:ae,u_texture:0,u_translation:G,u_pitched_scale:ue}},Oo=(S,i,f,g,y,b,k,D,j,$,G,H,ae,ue,fe)=>{const pe=k.transform;return l.e(Tl(S,i,f,g,y,b,k,D,j,$,G,H,ae,fe),{u_gamma_scale:g?Math.cos(pe._pitch)*pe.cameraToCenterDistance:1,u_device_pixel_ratio:k.pixelRatio,u_is_halo:1})},hs=(S,i,f,g,y,b,k,D,j,$,G,H,ae,ue)=>l.e(Oo(S,i,f,g,y,b,k,D,j,$,G,!0,H,!0,ue),{u_texsize_icon:ae,u_texture_icon:1}),Gs=(S,i,f)=>({u_matrix:S,u_opacity:i,u_color:f}),vh=(S,i,f,g,y,b)=>l.e((function(k,D,j,$){const G=j.imageManager.getPattern(k.from.toString()),H=j.imageManager.getPattern(k.to.toString()),{width:ae,height:ue}=j.imageManager.getPixelSize(),fe=Math.pow(2,$.tileID.overscaledZ),pe=$.tileSize*Math.pow(2,j.transform.tileZoom)/fe,ve=pe*($.tileID.canonical.x+$.tileID.wrap*fe),we=pe*$.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:G.tl,u_pattern_br_a:G.br,u_pattern_tl_b:H.tl,u_pattern_br_b:H.br,u_texsize:[ae,ue],u_mix:D.t,u_pattern_size_a:G.displaySize,u_pattern_size_b:H.displaySize,u_scale_a:D.fromScale,u_scale_b:D.toScale,u_tile_units_to_pixels:1/yr($,1,j.transform.tileZoom),u_pixel_coord_upper:[ve>>16,we>>16],u_pixel_coord_lower:[65535&ve,65535&we]}})(g,b,f,y),{u_matrix:S,u_opacity:i}),_h={fillExtrusion:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_lightpos:new l.aN(S,i.u_lightpos),u_lightintensity:new l.aI(S,i.u_lightintensity),u_lightcolor:new l.aN(S,i.u_lightcolor),u_vertical_gradient:new l.aI(S,i.u_vertical_gradient),u_opacity:new l.aI(S,i.u_opacity)}),fillExtrusionPattern:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_lightpos:new l.aN(S,i.u_lightpos),u_lightintensity:new l.aI(S,i.u_lightintensity),u_lightcolor:new l.aN(S,i.u_lightcolor),u_vertical_gradient:new l.aI(S,i.u_vertical_gradient),u_height_factor:new l.aI(S,i.u_height_factor),u_image:new l.aH(S,i.u_image),u_texsize:new l.aO(S,i.u_texsize),u_pixel_coord_upper:new l.aO(S,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(S,i.u_pixel_coord_lower),u_scale:new l.aN(S,i.u_scale),u_fade:new l.aI(S,i.u_fade),u_opacity:new l.aI(S,i.u_opacity)}),fill:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix)}),fillPattern:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_image:new l.aH(S,i.u_image),u_texsize:new l.aO(S,i.u_texsize),u_pixel_coord_upper:new l.aO(S,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(S,i.u_pixel_coord_lower),u_scale:new l.aN(S,i.u_scale),u_fade:new l.aI(S,i.u_fade)}),fillOutline:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_world:new l.aO(S,i.u_world)}),fillOutlinePattern:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_world:new l.aO(S,i.u_world),u_image:new l.aH(S,i.u_image),u_texsize:new l.aO(S,i.u_texsize),u_pixel_coord_upper:new l.aO(S,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(S,i.u_pixel_coord_lower),u_scale:new l.aN(S,i.u_scale),u_fade:new l.aI(S,i.u_fade)}),circle:(S,i)=>({u_camera_to_center_distance:new l.aI(S,i.u_camera_to_center_distance),u_scale_with_map:new l.aH(S,i.u_scale_with_map),u_pitch_with_map:new l.aH(S,i.u_pitch_with_map),u_extrude_scale:new l.aO(S,i.u_extrude_scale),u_device_pixel_ratio:new l.aI(S,i.u_device_pixel_ratio),u_matrix:new l.aJ(S,i.u_matrix)}),collisionBox:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_pixel_extrude_scale:new l.aO(S,i.u_pixel_extrude_scale)}),collisionCircle:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_inv_matrix:new l.aJ(S,i.u_inv_matrix),u_camera_to_center_distance:new l.aI(S,i.u_camera_to_center_distance),u_viewport_size:new l.aO(S,i.u_viewport_size)}),debug:(S,i)=>({u_color:new l.aL(S,i.u_color),u_matrix:new l.aJ(S,i.u_matrix),u_overlay:new l.aH(S,i.u_overlay),u_overlay_scale:new l.aI(S,i.u_overlay_scale)}),clippingMask:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix)}),heatmap:(S,i)=>({u_extrude_scale:new l.aI(S,i.u_extrude_scale),u_intensity:new l.aI(S,i.u_intensity),u_matrix:new l.aJ(S,i.u_matrix)}),heatmapTexture:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_world:new l.aO(S,i.u_world),u_image:new l.aH(S,i.u_image),u_color_ramp:new l.aH(S,i.u_color_ramp),u_opacity:new l.aI(S,i.u_opacity)}),hillshade:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_image:new l.aH(S,i.u_image),u_latrange:new l.aO(S,i.u_latrange),u_light:new l.aO(S,i.u_light),u_shadow:new l.aL(S,i.u_shadow),u_highlight:new l.aL(S,i.u_highlight),u_accent:new l.aL(S,i.u_accent)}),hillshadePrepare:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_image:new l.aH(S,i.u_image),u_dimension:new l.aO(S,i.u_dimension),u_zoom:new l.aI(S,i.u_zoom),u_unpack:new l.aK(S,i.u_unpack)}),line:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_ratio:new l.aI(S,i.u_ratio),u_device_pixel_ratio:new l.aI(S,i.u_device_pixel_ratio),u_units_to_pixels:new l.aO(S,i.u_units_to_pixels)}),lineGradient:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_ratio:new l.aI(S,i.u_ratio),u_device_pixel_ratio:new l.aI(S,i.u_device_pixel_ratio),u_units_to_pixels:new l.aO(S,i.u_units_to_pixels),u_image:new l.aH(S,i.u_image),u_image_height:new l.aI(S,i.u_image_height)}),linePattern:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_texsize:new l.aO(S,i.u_texsize),u_ratio:new l.aI(S,i.u_ratio),u_device_pixel_ratio:new l.aI(S,i.u_device_pixel_ratio),u_image:new l.aH(S,i.u_image),u_units_to_pixels:new l.aO(S,i.u_units_to_pixels),u_scale:new l.aN(S,i.u_scale),u_fade:new l.aI(S,i.u_fade)}),lineSDF:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_ratio:new l.aI(S,i.u_ratio),u_device_pixel_ratio:new l.aI(S,i.u_device_pixel_ratio),u_units_to_pixels:new l.aO(S,i.u_units_to_pixels),u_patternscale_a:new l.aO(S,i.u_patternscale_a),u_patternscale_b:new l.aO(S,i.u_patternscale_b),u_sdfgamma:new l.aI(S,i.u_sdfgamma),u_image:new l.aH(S,i.u_image),u_tex_y_a:new l.aI(S,i.u_tex_y_a),u_tex_y_b:new l.aI(S,i.u_tex_y_b),u_mix:new l.aI(S,i.u_mix)}),raster:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_tl_parent:new l.aO(S,i.u_tl_parent),u_scale_parent:new l.aI(S,i.u_scale_parent),u_buffer_scale:new l.aI(S,i.u_buffer_scale),u_fade_t:new l.aI(S,i.u_fade_t),u_opacity:new l.aI(S,i.u_opacity),u_image0:new l.aH(S,i.u_image0),u_image1:new l.aH(S,i.u_image1),u_brightness_low:new l.aI(S,i.u_brightness_low),u_brightness_high:new l.aI(S,i.u_brightness_high),u_saturation_factor:new l.aI(S,i.u_saturation_factor),u_contrast_factor:new l.aI(S,i.u_contrast_factor),u_spin_weights:new l.aN(S,i.u_spin_weights)}),symbolIcon:(S,i)=>({u_is_size_zoom_constant:new l.aH(S,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(S,i.u_is_size_feature_constant),u_size_t:new l.aI(S,i.u_size_t),u_size:new l.aI(S,i.u_size),u_camera_to_center_distance:new l.aI(S,i.u_camera_to_center_distance),u_pitch:new l.aI(S,i.u_pitch),u_rotate_symbol:new l.aH(S,i.u_rotate_symbol),u_aspect_ratio:new l.aI(S,i.u_aspect_ratio),u_fade_change:new l.aI(S,i.u_fade_change),u_matrix:new l.aJ(S,i.u_matrix),u_label_plane_matrix:new l.aJ(S,i.u_label_plane_matrix),u_coord_matrix:new l.aJ(S,i.u_coord_matrix),u_is_text:new l.aH(S,i.u_is_text),u_pitch_with_map:new l.aH(S,i.u_pitch_with_map),u_is_along_line:new l.aH(S,i.u_is_along_line),u_is_variable_anchor:new l.aH(S,i.u_is_variable_anchor),u_texsize:new l.aO(S,i.u_texsize),u_texture:new l.aH(S,i.u_texture),u_translation:new l.aO(S,i.u_translation),u_pitched_scale:new l.aI(S,i.u_pitched_scale)}),symbolSDF:(S,i)=>({u_is_size_zoom_constant:new l.aH(S,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(S,i.u_is_size_feature_constant),u_size_t:new l.aI(S,i.u_size_t),u_size:new l.aI(S,i.u_size),u_camera_to_center_distance:new l.aI(S,i.u_camera_to_center_distance),u_pitch:new l.aI(S,i.u_pitch),u_rotate_symbol:new l.aH(S,i.u_rotate_symbol),u_aspect_ratio:new l.aI(S,i.u_aspect_ratio),u_fade_change:new l.aI(S,i.u_fade_change),u_matrix:new l.aJ(S,i.u_matrix),u_label_plane_matrix:new l.aJ(S,i.u_label_plane_matrix),u_coord_matrix:new l.aJ(S,i.u_coord_matrix),u_is_text:new l.aH(S,i.u_is_text),u_pitch_with_map:new l.aH(S,i.u_pitch_with_map),u_is_along_line:new l.aH(S,i.u_is_along_line),u_is_variable_anchor:new l.aH(S,i.u_is_variable_anchor),u_texsize:new l.aO(S,i.u_texsize),u_texture:new l.aH(S,i.u_texture),u_gamma_scale:new l.aI(S,i.u_gamma_scale),u_device_pixel_ratio:new l.aI(S,i.u_device_pixel_ratio),u_is_halo:new l.aH(S,i.u_is_halo),u_translation:new l.aO(S,i.u_translation),u_pitched_scale:new l.aI(S,i.u_pitched_scale)}),symbolTextAndIcon:(S,i)=>({u_is_size_zoom_constant:new l.aH(S,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(S,i.u_is_size_feature_constant),u_size_t:new l.aI(S,i.u_size_t),u_size:new l.aI(S,i.u_size),u_camera_to_center_distance:new l.aI(S,i.u_camera_to_center_distance),u_pitch:new l.aI(S,i.u_pitch),u_rotate_symbol:new l.aH(S,i.u_rotate_symbol),u_aspect_ratio:new l.aI(S,i.u_aspect_ratio),u_fade_change:new l.aI(S,i.u_fade_change),u_matrix:new l.aJ(S,i.u_matrix),u_label_plane_matrix:new l.aJ(S,i.u_label_plane_matrix),u_coord_matrix:new l.aJ(S,i.u_coord_matrix),u_is_text:new l.aH(S,i.u_is_text),u_pitch_with_map:new l.aH(S,i.u_pitch_with_map),u_is_along_line:new l.aH(S,i.u_is_along_line),u_is_variable_anchor:new l.aH(S,i.u_is_variable_anchor),u_texsize:new l.aO(S,i.u_texsize),u_texsize_icon:new l.aO(S,i.u_texsize_icon),u_texture:new l.aH(S,i.u_texture),u_texture_icon:new l.aH(S,i.u_texture_icon),u_gamma_scale:new l.aI(S,i.u_gamma_scale),u_device_pixel_ratio:new l.aI(S,i.u_device_pixel_ratio),u_is_halo:new l.aH(S,i.u_is_halo),u_translation:new l.aO(S,i.u_translation),u_pitched_scale:new l.aI(S,i.u_pitched_scale)}),background:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_opacity:new l.aI(S,i.u_opacity),u_color:new l.aL(S,i.u_color)}),backgroundPattern:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_opacity:new l.aI(S,i.u_opacity),u_image:new l.aH(S,i.u_image),u_pattern_tl_a:new l.aO(S,i.u_pattern_tl_a),u_pattern_br_a:new l.aO(S,i.u_pattern_br_a),u_pattern_tl_b:new l.aO(S,i.u_pattern_tl_b),u_pattern_br_b:new l.aO(S,i.u_pattern_br_b),u_texsize:new l.aO(S,i.u_texsize),u_mix:new l.aI(S,i.u_mix),u_pattern_size_a:new l.aO(S,i.u_pattern_size_a),u_pattern_size_b:new l.aO(S,i.u_pattern_size_b),u_scale_a:new l.aI(S,i.u_scale_a),u_scale_b:new l.aI(S,i.u_scale_b),u_pixel_coord_upper:new l.aO(S,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(S,i.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aI(S,i.u_tile_units_to_pixels)}),terrain:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_texture:new l.aH(S,i.u_texture),u_ele_delta:new l.aI(S,i.u_ele_delta),u_fog_matrix:new l.aJ(S,i.u_fog_matrix),u_fog_color:new l.aL(S,i.u_fog_color),u_fog_ground_blend:new l.aI(S,i.u_fog_ground_blend),u_fog_ground_blend_opacity:new l.aI(S,i.u_fog_ground_blend_opacity),u_horizon_color:new l.aL(S,i.u_horizon_color),u_horizon_fog_blend:new l.aI(S,i.u_horizon_fog_blend)}),terrainDepth:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_ele_delta:new l.aI(S,i.u_ele_delta)}),terrainCoords:(S,i)=>({u_matrix:new l.aJ(S,i.u_matrix),u_texture:new l.aH(S,i.u_texture),u_terrain_coords_id:new l.aI(S,i.u_terrain_coords_id),u_ele_delta:new l.aI(S,i.u_ele_delta)}),sky:(S,i)=>({u_sky_color:new l.aL(S,i.u_sky_color),u_horizon_color:new l.aL(S,i.u_horizon_color),u_horizon:new l.aI(S,i.u_horizon),u_sky_horizon_blend:new l.aI(S,i.u_sky_horizon_blend)})};class wa{constructor(i,f,g){this.context=i;const y=i.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const f=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const yc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class vu{constructor(i,f,g,y){this.length=f.length,this.attributes=g,this.itemSize=f.bytesPerElement,this.dynamicDraw=y,this.context=i;const b=i.gl;this.buffer=b.createBuffer(),i.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,f){for(let g=0;g<this.attributes.length;g++){const y=f.attributes[this.attributes[g].name];y!==void 0&&i.enableVertexAttribArray(y)}}setVertexAttribPointers(i,f,g){for(let y=0;y<this.attributes.length;y++){const b=this.attributes[y],k=f.attributes[b.name];k!==void 0&&i.vertexAttribPointer(k,b.components,i[yc[b.type]],!1,this.itemSize,b.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const fs=new WeakMap;function Ai(S){var i;if(fs.has(S))return fs.get(S);{const f=(i=S.getParameter(S.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return fs.set(S,f),f}}class Rr{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Hs extends Rr{getDefault(){return l.aM.transparent}set(i){const f=this.current;(i.r!==f.r||i.g!==f.g||i.b!==f.b||i.a!==f.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Kf extends Rr{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Do extends Rr{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class vc extends Rr{getDefault(){return[!0,!0,!0,!0]}set(i){const f=this.current;(i[0]!==f[0]||i[1]!==f[1]||i[2]!==f[2]||i[3]!==f[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class xh extends Rr{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class aa extends Rr{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Zs extends Rr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const f=this.current;(i.func!==f.func||i.ref!==f.ref||i.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class _u extends Rr{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const f=this.current;(i[0]!==f[0]||i[1]!==f[1]||i[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Pl extends Rr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;i?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=i,this.dirty=!1}}class Xf extends Rr{getDefault(){return[0,1]}set(i){const f=this.current;(i[0]!==f[0]||i[1]!==f[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class _c extends Rr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;i?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=i,this.dirty=!1}}class xc extends Rr{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Ha extends Rr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;i?f.enable(f.BLEND):f.disable(f.BLEND),this.current=i,this.dirty=!1}}class xu extends Rr{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const f=this.current;(i[0]!==f[0]||i[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Yf extends Rr{getDefault(){return l.aM.transparent}set(i){const f=this.current;(i.r!==f.r||i.g!==f.g||i.b!==f.b||i.a!==f.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Jf extends Rr{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class bu extends Rr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;i?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=i,this.dirty=!1}}class Hp extends Rr{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Al extends Rr{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Zp extends Rr{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Kp extends Rr{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Qf extends Rr{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const f=this.current;(i[0]!==f[0]||i[1]!==f[1]||i[2]!==f[2]||i[3]!==f[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class ed extends Rr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class td extends Rr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class bc extends Rr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class rd extends Rr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class wc extends Rr{getDefault(){return null}set(i){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Ro extends Rr{getDefault(){return null}set(i){var f;if(i===this.current&&!this.dirty)return;const g=this.gl;Ai(g)?g.bindVertexArray(i):(f=g.getExtension("OES_vertex_array_object"))===null||f===void 0||f.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class bh extends Rr{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class wu extends Rr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class wh extends Rr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Sc extends Rr{constructor(i,f){super(i),this.context=i,this.parent=f}getDefault(){return null}}class Sh extends Sc{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class ds extends Sc{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Th extends Sc{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Xp{constructor(i,f,g,y,b){this.context=i,this.width=f,this.height=g;const k=i.gl,D=this.framebuffer=k.createFramebuffer();if(this.colorAttachment=new Sh(i,D),y)this.depthAttachment=b?new Th(i,D):new ds(i,D);else if(b)throw new Error("Stencil cannot be set without depth");if(k.checkFramebufferStatus(k.FRAMEBUFFER)!==k.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,f=this.colorAttachment.get();if(f&&i.deleteTexture(f),this.depthAttachment){const g=this.depthAttachment.get();g&&i.deleteRenderbuffer(g)}i.deleteFramebuffer(this.framebuffer)}}class Pn{constructor(i,f,g){this.blendFunction=i,this.blendColor=f,this.mask=g}}Pn.Replace=[1,0],Pn.disabled=new Pn(Pn.Replace,l.aM.transparent,[!1,!1,!1,!1]),Pn.unblended=new Pn(Pn.Replace,l.aM.transparent,[!0,!0,!0,!0]),Pn.alphaBlended=new Pn([1,771],l.aM.transparent,[!0,!0,!0,!0]);class Yp{constructor(i){var f,g;if(this.gl=i,this.clearColor=new Hs(this),this.clearDepth=new Kf(this),this.clearStencil=new Do(this),this.colorMask=new vc(this),this.depthMask=new xh(this),this.stencilMask=new aa(this),this.stencilFunc=new Zs(this),this.stencilOp=new _u(this),this.stencilTest=new Pl(this),this.depthRange=new Xf(this),this.depthTest=new _c(this),this.depthFunc=new xc(this),this.blend=new Ha(this),this.blendFunc=new xu(this),this.blendColor=new Yf(this),this.blendEquation=new Jf(this),this.cullFace=new bu(this),this.cullFaceSide=new Hp(this),this.frontFace=new Al(this),this.program=new Zp(this),this.activeTexture=new Kp(this),this.viewport=new Qf(this),this.bindFramebuffer=new ed(this),this.bindRenderbuffer=new td(this),this.bindTexture=new bc(this),this.bindVertexBuffer=new rd(this),this.bindElementBuffer=new wc(this),this.bindVertexArray=new Ro(this),this.pixelStoreUnpack=new bh(this),this.pixelStoreUnpackPremultiplyAlpha=new wu(this),this.pixelStoreUnpackFlipY=new wh(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Ai(i)){this.HALF_FLOAT=i.HALF_FLOAT;const y=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(f=i.RGBA16F)!==null&&f!==void 0?f:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(g=i.RGB16F)!==null&&g!==void 0?g:y==null?void 0:y.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const y=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=y==null?void 0:y.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,f){return new wa(this,i,f)}createVertexBuffer(i,f,g){return new vu(this,i,f,g)}createRenderbuffer(i,f,g){const y=this.gl,b=y.createRenderbuffer();return this.bindRenderbuffer.set(b),y.renderbufferStorage(y.RENDERBUFFER,i,f,g),this.bindRenderbuffer.set(null),b}createFramebuffer(i,f,g,y){return new Xp(this,i,f,g,y)}clear({color:i,depth:f,stencil:g}){const y=this.gl;let b=0;i&&(b|=y.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(b|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),g!==void 0&&(b|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),y.clear(b)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){l.aE(i.blendFunction,Pn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Ai(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var f;return Ai(this.gl)?this.gl.deleteVertexArray(i):(f=this.gl.getExtension("OES_vertex_array_object"))===null||f===void 0?void 0:f.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class Tr{constructor(i,f,g){this.func=i,this.mask=f,this.range=g}}Tr.ReadOnly=!1,Tr.ReadWrite=!0,Tr.disabled=new Tr(519,Tr.ReadOnly,[0,1]);const Tc=7680;class en{constructor(i,f,g,y,b,k){this.test=i,this.ref=f,this.mask=g,this.fail=y,this.depthFail=b,this.pass=k}}en.disabled=new en({func:519,mask:0},0,0,Tc,Tc,Tc);class Vr{constructor(i,f,g){this.enable=i,this.mode=f,this.frontFace=g}}let Za;function Su(S,i,f,g,y){const b=S.context,k=b.gl,D=S.useProgram("collisionBox"),j=[];let $=0,G=0;for(let we=0;we<g.length;we++){const Me=g[we],me=i.getTile(Me).getBucket(f);if(!me)continue;const De=y?me.textCollisionBox:me.iconCollisionBox,ze=me.collisionCircleArray;if(ze.length>0){const We=l.H();l.aQ(We,me.placementInvProjMatrix,S.transform.glCoordMatrix),l.aQ(We,We,me.placementViewportMatrix),j.push({circleArray:ze,circleOffset:G,transform:Me.posMatrix,invTransform:We,coord:Me}),$+=ze.length/4,G=$}De&&D.draw(b,k.LINES,Tr.disabled,en.disabled,S.colorModeForRenderPass(),Vr.disabled,{u_matrix:Me.posMatrix,u_pixel_extrude_scale:[1/(H=S.transform).width,1/H.height]},S.style.map.terrain&&S.style.map.terrain.getTerrainData(Me),f.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,null,S.transform.zoom,null,null,De.collisionVertexBuffer)}var H;if(!y||!j.length)return;const ae=S.useProgram("collisionCircle"),ue=new l.aR;ue.resize(4*$),ue._trim();let fe=0;for(const we of j)for(let Me=0;Me<we.circleArray.length/4;Me++){const me=4*Me,De=we.circleArray[me+0],ze=we.circleArray[me+1],We=we.circleArray[me+2],lt=we.circleArray[me+3];ue.emplace(fe++,De,ze,We,lt,0),ue.emplace(fe++,De,ze,We,lt,1),ue.emplace(fe++,De,ze,We,lt,2),ue.emplace(fe++,De,ze,We,lt,3)}(!Za||Za.length<2*$)&&(Za=(function(we){const Me=2*we,me=new l.aT;me.resize(Me),me._trim();for(let De=0;De<Me;De++){const ze=6*De;me.uint16[ze+0]=4*De+0,me.uint16[ze+1]=4*De+1,me.uint16[ze+2]=4*De+2,me.uint16[ze+3]=4*De+2,me.uint16[ze+4]=4*De+3,me.uint16[ze+5]=4*De+0}return me})($));const pe=b.createIndexBuffer(Za,!0),ve=b.createVertexBuffer(ue,l.aS.members,!0);for(const we of j){const Me=Fi(we.transform,we.invTransform,S.transform);ae.draw(b,k.TRIANGLES,Tr.disabled,en.disabled,S.colorModeForRenderPass(),Vr.disabled,Me,S.style.map.terrain&&S.style.map.terrain.getTerrainData(we.coord),f.id,ve,pe,l.a0.simpleSegment(0,2*we.circleOffset,we.circleArray.length,we.circleArray.length/2),null,S.transform.zoom,null,null,null)}ve.destroy(),pe.destroy()}Vr.disabled=new Vr(!1,1029,2305),Vr.backCCW=new Vr(!0,1029,2305);const El=l.an(new Float32Array(16));function Pc(S,i,f,g,y,b){const{horizontalAlign:k,verticalAlign:D}=l.au(S);return new l.P((-(k-.5)*i/y+g[0])*b,(-(D-.5)*f/y+g[1])*b)}function ps(S,i,f,g,y,b){const k=i.tileAnchorPoint.add(new l.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let D=g.mult(b);f||(D=D.rotate(-y));const j=k.add(D);return xe(j.x,j.y,i.labelPlaneMatrix,i.getElevation).point}if(f){const D=Qe(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(S),j=Math.atan(D.y/D.x)+(D.x<0?Math.PI:0);return S.add(g.rotate(j))}return S.add(g)}function Ks(S,i,f,g,y,b,k,D,j,$,G,H,ae,ue){const fe=S.text.placedSymbolArray,pe=S.text.dynamicLayoutVertexArray,ve=S.icon.dynamicLayoutVertexArray,we={};pe.clear();for(let Me=0;Me<fe.length;Me++){const me=fe.get(Me),De=me.hidden||!me.crossTileID||S.allowVerticalPlacement&&!me.placedOrientation?null:g[me.crossTileID];if(De){const ze=new l.P(me.anchorX,me.anchorY),We={getElevation:ue,width:y.width,height:y.height,labelPlaneMatrix:b,pitchWithMap:f,projection:G,tileAnchorPoint:ze,translation:H,unwrappedTileID:ae},lt=f?xe(ze.x,ze.y,k,ue):Qe(ze.x,ze.y,We),gt=te(y.cameraToCenterDistance,lt.signedDistanceFromCamera);let Tt=l.ai(S.textSizeData,j,me)*gt/l.ap;f&&(Tt*=S.tilePixelRatio/D);const{width:Ot,height:Pt,anchor:xt,textOffset:Vt,textBoxScale:or}=De,Et=Pc(xt,Ot,Pt,Vt,or,Tt),Mt=G.getPitchedTextCorrection(y,ze.add(new l.P(H[0],H[1])),ae),ir=ps(lt.point,We,i,Et,y.angle,Mt),Gr=S.allowVerticalPlacement&&me.placedOrientation===l.ah.vertical?Math.PI/2:0;for(let dr=0;dr<me.numGlyphs;dr++)l.aj(pe,ir,Gr);$&&me.associatedIconIndex>=0&&(we[me.associatedIconIndex]={shiftedAnchor:ir,angle:Gr})}else Yt(me.numGlyphs,pe)}if($){ve.clear();const Me=S.icon.placedSymbolArray;for(let me=0;me<Me.length;me++){const De=Me.get(me);if(De.hidden)Yt(De.numGlyphs,ve);else{const ze=we[me];if(ze)for(let We=0;We<De.numGlyphs;We++)l.aj(ve,ze.shiftedAnchor,ze.angle);else Yt(De.numGlyphs,ve)}}S.icon.dynamicLayoutVertexBuffer.updateData(ve)}S.text.dynamicLayoutVertexBuffer.updateData(pe)}function oa(S,i,f){return f.iconsInText&&i?"symbolTextAndIcon":S?"symbolSDF":"symbolIcon"}function ms(S,i,f,g,y,b,k,D,j,$,G,H){const ae=S.context,ue=ae.gl,fe=S.transform,pe=$s(),ve=D==="map",we=j==="map",Me=D!=="viewport"&&f.layout.get("symbol-placement")!=="point",me=ve&&!we&&!Me,De=!we&&Me,ze=!f.layout.get("symbol-sort-key").isConstant();let We=!1;const lt=S.depthModeForSublayer(0,Tr.ReadOnly),gt=f._unevaluatedLayout.hasValue("text-variable-anchor")||f._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Tt=[],Ot=pe.getCircleRadiusCorrection(fe);for(const Pt of g){const xt=i.getTile(Pt),Vt=xt.getBucket(f);if(!Vt)continue;const or=y?Vt.text:Vt.icon;if(!or||!or.segments.get().length||!or.hasVisibleVertices)continue;const Et=or.programConfigurations.get(f.id),Mt=y||Vt.sdfIcons,ir=y?Vt.textSizeData:Vt.iconSizeData,Gr=we||fe.pitch!==0,dr=S.useProgram(oa(Mt,y,Vt),Et),_r=l.ag(ir,fe.zoom),Xr=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Pt);let Qn,la,Yr,Un,sn=[0,0],An=null;if(y)la=xt.glyphAtlasTexture,Yr=ue.LINEAR,Qn=xt.glyphAtlasTexture.size,Vt.iconsInText&&(sn=xt.imageAtlasTexture.size,An=xt.imageAtlasTexture,Un=Gr||S.options.rotating||S.options.zooming||ir.kind==="composite"||ir.kind==="camera"?ue.LINEAR:ue.NEAREST);else{const Sr=f.layout.get("icon-size").constantOr(0)!==1||Vt.iconsNeedLinear;la=xt.imageAtlasTexture,Yr=Mt||S.options.rotating||S.options.zooming||Sr||Gr?ue.LINEAR:ue.NEAREST,Qn=xt.imageAtlasTexture.size}const si=yr(xt,1,S.transform.zoom),Qa=De?Pt.posMatrix:El,qi=na(Qa,we,ve,S.transform,si),eo=Si(Qa,we,ve,S.transform,si),ws=Si(Pt.posMatrix,we,ve,S.transform,si),ua=pe.translatePosition(S.transform,xt,b,k),Ea=gt&&Vt.hasTextData(),_o=f.layout.get("icon-text-fit")!=="none"&&Ea&&Vt.hasIconData();if(Me){const Sr=S.style.map.terrain?(Ss,ro)=>S.style.map.terrain.getElevation(Pt,Ss,ro):null,ha=f.layout.get("text-rotation-alignment")==="map";ce(Vt,Pt.posMatrix,S,y,qi,ws,we,$,ha,pe,Pt.toUnwrapped(),fe.width,fe.height,ua,Sr)}const Ci=Pt.posMatrix,ca=y&&gt||_o,to=Me||ca?El:qi,Ca=eo,On=Mt&&f.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let fn;fn=Mt?Vt.iconsInText?hs(ir.kind,_r,me,we,Me,ca,S,Ci,to,Ca,ua,Qn,sn,Ot):Oo(ir.kind,_r,me,we,Me,ca,S,Ci,to,Ca,ua,y,Qn,!0,Ot):Tl(ir.kind,_r,me,we,Me,ca,S,Ci,to,Ca,ua,y,Qn,Ot);const li={program:dr,buffers:or,uniformValues:fn,atlasTexture:la,atlasTextureIcon:An,atlasInterpolation:Yr,atlasInterpolationIcon:Un,isSDF:Mt,hasHalo:On};if(ze&&Vt.canOverlap){We=!0;const Sr=or.segments.get();for(const ha of Sr)Tt.push({segments:new l.a0([ha]),sortKey:ha.sortKey,state:li,terrainData:Xr})}else Tt.push({segments:or.segments,sortKey:0,state:li,terrainData:Xr})}We&&Tt.sort(((Pt,xt)=>Pt.sortKey-xt.sortKey));for(const Pt of Tt){const xt=Pt.state;if(ae.activeTexture.set(ue.TEXTURE0),xt.atlasTexture.bind(xt.atlasInterpolation,ue.CLAMP_TO_EDGE),xt.atlasTextureIcon&&(ae.activeTexture.set(ue.TEXTURE1),xt.atlasTextureIcon&&xt.atlasTextureIcon.bind(xt.atlasInterpolationIcon,ue.CLAMP_TO_EDGE)),xt.isSDF){const Vt=xt.uniformValues;xt.hasHalo&&(Vt.u_is_halo=1,Ph(xt.buffers,Pt.segments,f,S,xt.program,lt,G,H,Vt,Pt.terrainData)),Vt.u_is_halo=0}Ph(xt.buffers,Pt.segments,f,S,xt.program,lt,G,H,xt.uniformValues,Pt.terrainData)}}function Ph(S,i,f,g,y,b,k,D,j,$){const G=g.context;y.draw(G,G.gl.TRIANGLES,b,k,D,Vr.disabled,j,$,f.id,S.layoutVertexBuffer,S.indexBuffer,i,f.paint,g.transform.zoom,S.programConfigurations.get(f.id),S.dynamicLayoutVertexBuffer,S.opacityVertexBuffer)}function Ah(S,i,f,g){const y=S.context,b=y.gl,k=en.disabled,D=new Pn([b.ONE,b.ONE],l.aM.transparent,[!0,!0,!0,!0]),j=i.getBucket(f);if(!j)return;const $=g.key;let G=f.heatmapFbos.get($);G||(G=Cl(y,i.tileSize,i.tileSize),f.heatmapFbos.set($,G)),y.bindFramebuffer.set(G.framebuffer),y.viewport.set([0,0,i.tileSize,i.tileSize]),y.clear({color:l.aM.transparent});const H=j.programConfigurations.get(f.id),ae=S.useProgram("heatmap",H),ue=S.style.map.terrain.getTerrainData(g);ae.draw(y,b.TRIANGLES,Tr.disabled,k,D,Vr.disabled,Jn(g.posMatrix,i,S.transform.zoom,f.paint.get("heatmap-intensity")),ue,f.id,j.layoutVertexBuffer,j.indexBuffer,j.segments,f.paint,S.transform.zoom,H)}function Xs(S,i,f){const g=S.context,y=g.gl;g.setColorMode(S.colorModeForRenderPass());const b=Ml(g,i),k=f.key,D=i.heatmapFbos.get(k);D&&(g.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,D.colorAttachment.get()),g.activeTexture.set(y.TEXTURE1),b.bind(y.LINEAR,y.CLAMP_TO_EDGE),S.useProgram("heatmapTexture").draw(g,y.TRIANGLES,Tr.disabled,en.disabled,S.colorModeForRenderPass(),Vr.disabled,cs(S,i,0,1),null,i.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments,i.paint,S.transform.zoom),D.destroy(),i.heatmapFbos.delete(k))}function Cl(S,i,f){var g,y;const b=S.gl,k=b.createTexture();b.bindTexture(b.TEXTURE_2D,k),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);const D=(g=S.HALF_FLOAT)!==null&&g!==void 0?g:b.UNSIGNED_BYTE,j=(y=S.RGBA16F)!==null&&y!==void 0?y:b.RGBA;b.texImage2D(b.TEXTURE_2D,0,j,i,f,0,b.RGBA,D,null);const $=S.createFramebuffer(i,f,!1,!1);return $.colorAttachment.set(k),$}function Ml(S,i){return i.colorRampTexture||(i.colorRampTexture=new be(S,i.colorRamp,S.gl.RGBA)),i.colorRampTexture}function po(S,i,f,g,y){if(!f||!g||!g.imageAtlas)return;const b=g.imageAtlas.patternPositions;let k=b[f.to.toString()],D=b[f.from.toString()];if(!k&&D&&(k=D),!D&&k&&(D=k),!k||!D){const j=y.getPaintProperty(i);k=b[j],D=b[j]}k&&D&&S.setConstantPatternPositions(k,D)}function jo(S,i,f,g,y,b,k){const D=S.context.gl,j="fill-pattern",$=f.paint.get(j),G=$&&$.constantOr(1),H=f.getCrossfadeParameters();let ae,ue,fe,pe,ve;k?(ue=G&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ae=D.LINES):(ue=G?"fillPattern":"fill",ae=D.TRIANGLES);const we=$.constantOr(null);for(const Me of g){const me=i.getTile(Me);if(G&&!me.patternsLoaded())continue;const De=me.getBucket(f);if(!De)continue;const ze=De.programConfigurations.get(f.id),We=S.useProgram(ue,ze),lt=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Me);G&&(S.context.activeTexture.set(D.TEXTURE0),me.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),ze.updatePaintBuffers(H)),po(ze,j,we,me,f);const gt=lt?Me:null,Tt=S.translatePosMatrix(gt?gt.posMatrix:Me.posMatrix,me,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(k){pe=De.indexBuffer2,ve=De.segments2;const Ot=[D.drawingBufferWidth,D.drawingBufferHeight];fe=ue==="fillOutlinePattern"&&G?pc(Tt,S,H,me,Ot):Hf(Tt,Ot)}else pe=De.indexBuffer,ve=De.segments,fe=G?mh(Tt,S,H,me):Ws(Tt);We.draw(S.context,ae,y,S.stencilModeForClipping(Me),b,Vr.disabled,fe,lt,f.id,De.layoutVertexBuffer,pe,ve,f.paint,S.transform.zoom,ze)}}function Ac(S,i,f,g,y,b,k){const D=S.context,j=D.gl,$="fill-extrusion-pattern",G=f.paint.get($),H=G.constantOr(1),ae=f.getCrossfadeParameters(),ue=f.paint.get("fill-extrusion-opacity"),fe=G.constantOr(null);for(const pe of g){const ve=i.getTile(pe),we=ve.getBucket(f);if(!we)continue;const Me=S.style.map.terrain&&S.style.map.terrain.getTerrainData(pe),me=we.programConfigurations.get(f.id),De=S.useProgram(H?"fillExtrusionPattern":"fillExtrusion",me);H&&(S.context.activeTexture.set(j.TEXTURE0),ve.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),me.updatePaintBuffers(ae)),po(me,$,fe,ve,f);const ze=S.translatePosMatrix(pe.posMatrix,ve,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),We=f.paint.get("fill-extrusion-vertical-gradient"),lt=H?Sl(ze,S,We,ue,pe,ae,ve):wl(ze,S,We,ue);De.draw(D,D.gl.TRIANGLES,y,b,k,Vr.backCCW,lt,Me,f.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,f.paint,S.transform.zoom,me,S.style.map.terrain&&we.centroidVertexBuffer)}}function zo(S,i,f,g,y,b,k){const D=S.context,j=D.gl,$=f.fbo;if(!$)return;const G=S.useProgram("hillshade"),H=S.style.map.terrain&&S.style.map.terrain.getTerrainData(i);D.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,$.colorAttachment.get()),G.draw(D,j.TRIANGLES,y,b,k,Vr.disabled,((ae,ue,fe,pe)=>{const ve=fe.paint.get("hillshade-shadow-color"),we=fe.paint.get("hillshade-highlight-color"),Me=fe.paint.get("hillshade-accent-color");let me=fe.paint.get("hillshade-illumination-direction")*(Math.PI/180);fe.paint.get("hillshade-illumination-anchor")==="viewport"&&(me-=ae.transform.angle);const De=!ae.options.moving;return{u_matrix:pe?pe.posMatrix:ae.transform.calculatePosMatrix(ue.tileID.toUnwrapped(),De),u_image:0,u_latrange:Ga(0,ue.tileID),u_light:[fe.paint.get("hillshade-exaggeration"),me],u_shadow:ve,u_highlight:we,u_accent:Me}})(S,f,g,H?i:null),H,g.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments)}function Il(S,i,f,g,y,b){const k=S.context,D=k.gl,j=i.dem;if(j&&j.data){const $=j.dim,G=j.stride,H=j.getPixels();if(k.activeTexture.set(D.TEXTURE1),k.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||S.getTileTexture(G),i.demTexture){const ue=i.demTexture;ue.update(H,{premultiply:!1}),ue.bind(D.NEAREST,D.CLAMP_TO_EDGE)}else i.demTexture=new be(k,H,D.RGBA,{premultiply:!1}),i.demTexture.bind(D.NEAREST,D.CLAMP_TO_EDGE);k.activeTexture.set(D.TEXTURE0);let ae=i.fbo;if(!ae){const ue=new be(k,{width:$,height:$,data:null},D.RGBA);ue.bind(D.LINEAR,D.CLAMP_TO_EDGE),ae=i.fbo=k.createFramebuffer($,$,!0,!1),ae.colorAttachment.set(ue.texture)}k.bindFramebuffer.set(ae.framebuffer),k.viewport.set([0,0,$,$]),S.useProgram("hillshadePrepare").draw(k,D.TRIANGLES,g,y,b,Vr.disabled,((ue,fe)=>{const pe=fe.stride,ve=l.H();return l.aP(ve,0,l.X,-l.X,0,0,1),l.J(ve,ve,[0,-l.X,0]),{u_matrix:ve,u_image:1,u_dimension:[pe,pe],u_zoom:ue.overscaledZ,u_unpack:fe.getUnpackVector()}})(i.tileID,j),null,f.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Eh(S,i,f,g,y,b){const k=g.paint.get("raster-fade-duration");if(!b&&k>0){const D=A.now(),j=(D-S.timeAdded)/k,$=i?(D-i.timeAdded)/k:-1,G=f.getSource(),H=y.coveringZoomLevel({tileSize:G.tileSize,roundZoom:G.roundZoom}),ae=!i||Math.abs(i.tileID.overscaledZ-H)>Math.abs(S.tileID.overscaledZ-H),ue=ae&&S.refreshedUponExpiration?1:l.ac(ae?j:1-$,0,1);return S.refreshedUponExpiration&&j>=1&&(S.refreshedUponExpiration=!1),i?{opacity:1,mix:1-ue}:{opacity:ue,mix:0}}return{opacity:1,mix:0}}const Tu=new l.aM(1,0,0,1),Cr=new l.aM(0,1,0,1),Pu=new l.aM(0,0,1,1),nd=new l.aM(1,0,1,1),Ch=new l.aM(0,1,1,1);function kl(S,i,f,g){Ec(S,0,i+f/2,S.transform.width,f,g)}function id(S,i,f,g){Ec(S,i-f/2,0,f,S.transform.height,g)}function Ec(S,i,f,g,y,b){const k=S.context,D=k.gl;D.enable(D.SCISSOR_TEST),D.scissor(i*S.pixelRatio,f*S.pixelRatio,g*S.pixelRatio,y*S.pixelRatio),k.clear({color:b}),D.disable(D.SCISSOR_TEST)}function ad(S,i,f){const g=S.context,y=g.gl,b=f.posMatrix,k=S.useProgram("debug"),D=Tr.disabled,j=en.disabled,$=S.colorModeForRenderPass(),G="$debug",H=S.style.map.terrain&&S.style.map.terrain.getTerrainData(f);g.activeTexture.set(y.TEXTURE0);const ae=i.getTileByID(f.key).latestRawTileData,ue=Math.floor((ae&&ae.byteLength||0)/1024),fe=i.getTile(f).tileSize,pe=512/Math.min(fe,512)*(f.overscaledZ/S.transform.zoom)*.5;let ve=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(ve+=` => ${f.overscaledZ}`),(function(we,Me){we.initDebugOverlayCanvas();const me=we.debugOverlayCanvas,De=we.context.gl,ze=we.debugOverlayCanvas.getContext("2d");ze.clearRect(0,0,me.width,me.height),ze.shadowColor="white",ze.shadowBlur=2,ze.lineWidth=1.5,ze.strokeStyle="white",ze.textBaseline="top",ze.font="bold 36px Open Sans, sans-serif",ze.fillText(Me,5,5),ze.strokeText(Me,5,5),we.debugOverlayTexture.update(me),we.debugOverlayTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE)})(S,`${ve} ${ue}kB`),k.draw(g,y.TRIANGLES,D,j,Pn.alphaBlended,Vr.disabled,ba(b,l.aM.transparent,pe),null,G,S.debugBuffer,S.quadTriangleIndexBuffer,S.debugSegments),k.draw(g,y.LINE_STRIP,D,j,$,Vr.disabled,ba(b,l.aM.red),H,G,S.debugBuffer,S.tileBorderIndexBuffer,S.debugSegments)}function od(S,i,f){const g=S.context,y=g.gl,b=S.colorModeForRenderPass(),k=new Tr(y.LEQUAL,Tr.ReadWrite,S.depthRangeFor3D),D=S.useProgram("terrain"),j=i.getTerrainMesh();g.bindFramebuffer.set(null),g.viewport.set([0,0,S.width,S.height]);for(const $ of f){const G=S.renderToTexture.getTexture($),H=i.getTerrainData($.tileID);g.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,G.texture);const ae=S.transform.calculatePosMatrix($.tileID.toUnwrapped()),ue=i.getMeshFrameDelta(S.transform.zoom),fe=S.transform.calculateFogMatrix($.tileID.toUnwrapped()),pe=ph(ae,ue,fe,S.style.sky,S.transform.pitch);D.draw(g,y.TRIANGLES,k,en.disabled,b,Vr.backCCW,pe,H,"terrain",j.vertexBuffer,j.indexBuffer,j.segments)}}class $i{constructor(i,f,g){this.vertexBuffer=i,this.indexBuffer=f,this.segments=g}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class gs{constructor(i,f){this.context=new Yp(i),this.transform=f,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=nr.maxUnderzooming+nr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Us}resize(i,f,g){if(this.width=Math.floor(i*g),this.height=Math.floor(f*g),this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const i=this.context,f=new l.aX;f.emplaceBack(0,0),f.emplaceBack(l.X,0),f.emplaceBack(0,l.X),f.emplaceBack(l.X,l.X),this.tileExtentBuffer=i.createVertexBuffer(f,Io.members),this.tileExtentSegments=l.a0.simpleSegment(0,0,4,2);const g=new l.aX;g.emplaceBack(0,0),g.emplaceBack(l.X,0),g.emplaceBack(0,l.X),g.emplaceBack(l.X,l.X),this.debugBuffer=i.createVertexBuffer(g,Io.members),this.debugSegments=l.a0.simpleSegment(0,0,4,5);const y=new l.$;y.emplaceBack(0,0,0,0),y.emplaceBack(l.X,0,l.X,0),y.emplaceBack(0,l.X,0,l.X),y.emplaceBack(l.X,l.X,l.X,l.X),this.rasterBoundsBuffer=i.createVertexBuffer(y,Nn.members),this.rasterBoundsSegments=l.a0.simpleSegment(0,0,4,2);const b=new l.aX;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(b,Io.members),this.viewportSegments=l.a0.simpleSegment(0,0,4,2);const k=new l.aZ;k.emplaceBack(0),k.emplaceBack(1),k.emplaceBack(3),k.emplaceBack(2),k.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(k);const D=new l.aY;D.emplaceBack(0,1,2),D.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(D);const j=this.context.gl;this.stencilClearMode=new en({func:j.ALWAYS,mask:0},0,255,j.ZERO,j.ZERO,j.ZERO)}clearStencil(){const i=this.context,f=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const g=l.H();l.aP(g,0,this.width,this.height,0,0,1),l.K(g,g,[f.drawingBufferWidth,f.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,f.TRIANGLES,Tr.disabled,this.stencilClearMode,Pn.disabled,Vr.disabled,kn(g),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,f){if(this.currentStencilSource===i.source||!i.isTileClipped()||!f||!f.length)return;this.currentStencilSource=i.source;const g=this.context,y=g.gl;this.nextStencilID+f.length>256&&this.clearStencil(),g.setColorMode(Pn.disabled),g.setDepthMode(Tr.disabled);const b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of f){const D=this._tileClippingMaskIDs[k.key]=this.nextStencilID++,j=this.style.map.terrain&&this.style.map.terrain.getTerrainData(k);b.draw(g,y.TRIANGLES,Tr.disabled,new en({func:y.ALWAYS,mask:0},D,255,y.KEEP,y.KEEP,y.REPLACE),Pn.disabled,Vr.disabled,kn(k.posMatrix),j,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,f=this.context.gl;return new en({func:f.NOTEQUAL,mask:255},i,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(i){const f=this.context.gl;return new en({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(i){const f=this.context.gl,g=i.sort(((k,D)=>D.overscaledZ-k.overscaledZ)),y=g[g.length-1].overscaledZ,b=g[0].overscaledZ-y+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const k={};for(let D=0;D<b;D++)k[D+y]=new en({func:f.GEQUAL,mask:255},D+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=b,[k,g]}return[{[y]:en.disabled},g]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Pn([i.CONSTANT_COLOR,i.ONE],new l.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Pn.unblended:Pn.alphaBlended}depthModeForSublayer(i,f,g){if(!this.opaquePassEnabledForLayer())return Tr.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Tr(g||this.context.gl.LEQUAL,f,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,f){this.style=i,this.options=f,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(A.now()),this.imageManager.beginFrame();const g=this.style._order,y=this.style.sourceCaches,b={},k={},D={};for(const j in y){const $=y[j];$.used&&$.prepare(this.context),b[j]=$.getVisibleCoordinates(),k[j]=b[j].slice().reverse(),D[j]=$.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let j=0;j<g.length;j++)if(this.style._layers[g[j]].is3D()){this.opaquePassCutoff=j;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const j of g){const $=this.style._layers[j];if(!$.hasOffscreenPass()||$.isHidden(this.transform.zoom))continue;const G=k[$.source];($.type==="custom"||G.length)&&this.renderLayer(this,y[$.source],$,G)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:f.showOverdrawInspector?l.aM.black:l.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(j,$){const G=j.context,H=G.gl,ae=((we,Me,me)=>({u_sky_color:we.properties.get("sky-color"),u_horizon_color:we.properties.get("horizon-color"),u_horizon:(Me.height/2+Me.getHorizon())*me,u_sky_horizon_blend:we.properties.get("sky-horizon-blend")*Me.height/2*me}))($,j.style.map.transform,j.pixelRatio),ue=new Tr(H.LEQUAL,Tr.ReadWrite,[0,1]),fe=en.disabled,pe=j.colorModeForRenderPass(),ve=j.useProgram("sky");if(!$.mesh){const we=new l.aX;we.emplaceBack(-1,-1),we.emplaceBack(1,-1),we.emplaceBack(1,1),we.emplaceBack(-1,1);const Me=new l.aY;Me.emplaceBack(0,1,2),Me.emplaceBack(0,2,3),$.mesh=new $i(G.createVertexBuffer(we,Io.members),G.createIndexBuffer(Me),l.a0.simpleSegment(0,0,we.length,Me.length))}ve.draw(G,H.TRIANGLES,ue,fe,pe,Vr.disabled,ae,void 0,"sky",$.mesh.vertexBuffer,$.mesh.indexBuffer,$.mesh.segments)})(this,this.style.sky),this._showOverdrawInspector=f.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const j=this.style._layers[g[this.currentLayer]],$=y[j.source],G=b[j.source];this._renderTileClippingMasks(j,G),this.renderLayer(this,$,j,G)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const j=this.style._layers[g[this.currentLayer]],$=y[j.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(j))continue;const G=(j.type==="symbol"?D:k)[j.source];this._renderTileClippingMasks(j,b[j.source]),this.renderLayer(this,$,j,G)}if(this.options.showTileBoundaries){const j=(function($,G){let H=null;const ae=Object.values($._layers).flatMap((ve=>ve.source&&!ve.isHidden(G)?[$.sourceCaches[ve.source]]:[])),ue=ae.filter((ve=>ve.getSource().type==="vector")),fe=ae.filter((ve=>ve.getSource().type!=="vector")),pe=ve=>{(!H||H.getSource().maxzoom<ve.getSource().maxzoom)&&(H=ve)};return ue.forEach((ve=>pe(ve))),H||fe.forEach((ve=>pe(ve))),H})(this.style,this.transform.zoom);j&&(function($,G,H){for(let ae=0;ae<H.length;ae++)ad($,G,H[ae])})(this,j,j.getVisibleCoordinates())}this.options.showPadding&&(function(j){const $=j.transform.padding;kl(j,j.transform.height-($.top||0),3,Tu),kl(j,$.bottom||0,3,Cr),id(j,$.left||0,3,Pu),id(j,j.transform.width-($.right||0),3,nd);const G=j.transform.centerPoint;(function(H,ae,ue,fe){Ec(H,ae-1,ue-10,2,20,fe),Ec(H,ae-10,ue-1,20,2,fe)})(j,G.x,j.transform.height-G.y,Ch)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;const f=this.terrainFacilitator.matrix,g=this.transform.modelViewProjectionMatrix;let y=this.terrainFacilitator.dirty;y||(y=i?!l.a_(f,g):!l.a$(f,g)),y||(y=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),y&&(l.b0(f,g),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(b,k){const D=b.context,j=D.gl,$=Pn.unblended,G=new Tr(j.LEQUAL,Tr.ReadWrite,[0,1]),H=k.getTerrainMesh(),ae=k.sourceCache.getRenderableTiles(),ue=b.useProgram("terrainDepth");D.bindFramebuffer.set(k.getFramebuffer("depth").framebuffer),D.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),D.clear({color:l.aM.transparent,depth:1});for(const fe of ae){const pe=k.getTerrainData(fe.tileID),ve={u_matrix:b.transform.calculatePosMatrix(fe.tileID.toUnwrapped()),u_ele_delta:k.getMeshFrameDelta(b.transform.zoom)};ue.draw(D,j.TRIANGLES,G,en.disabled,$,Vr.backCCW,ve,pe,"terrain",H.vertexBuffer,H.indexBuffer,H.segments)}D.bindFramebuffer.set(null),D.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain),(function(b,k){const D=b.context,j=D.gl,$=Pn.unblended,G=new Tr(j.LEQUAL,Tr.ReadWrite,[0,1]),H=k.getTerrainMesh(),ae=k.getCoordsTexture(),ue=k.sourceCache.getRenderableTiles(),fe=b.useProgram("terrainCoords");D.bindFramebuffer.set(k.getFramebuffer("coords").framebuffer),D.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),D.clear({color:l.aM.transparent,depth:1}),k.coordsIndex=[];for(const pe of ue){const ve=k.getTerrainData(pe.tileID);D.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,ae.texture);const we={u_matrix:b.transform.calculatePosMatrix(pe.tileID.toUnwrapped()),u_terrain_coords_id:(255-k.coordsIndex.length)/255,u_texture:0,u_ele_delta:k.getMeshFrameDelta(b.transform.zoom)};fe.draw(D,j.TRIANGLES,G,en.disabled,$,Vr.backCCW,we,ve,"terrain",H.vertexBuffer,H.indexBuffer,H.segments),k.coordsIndex.push(pe.tileID.key)}D.bindFramebuffer.set(null),D.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain))}renderLayer(i,f,g,y){if(!g.isHidden(this.transform.zoom)&&(g.type==="background"||g.type==="custom"||(y||[]).length))switch(this.id=g.id,g.type){case"symbol":(function(b,k,D,j,$){if(b.renderPass!=="translucent")return;const G=en.disabled,H=b.colorModeForRenderPass();(D._unevaluatedLayout.hasValue("text-variable-anchor")||D._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(ae,ue,fe,pe,ve,we,Me,me,De){const ze=ue.transform,We=$s(),lt=ve==="map",gt=we==="map";for(const Tt of ae){const Ot=pe.getTile(Tt),Pt=Ot.getBucket(fe);if(!Pt||!Pt.text||!Pt.text.segments.get().length)continue;const xt=l.ag(Pt.textSizeData,ze.zoom),Vt=yr(Ot,1,ue.transform.zoom),or=na(Tt.posMatrix,gt,lt,ue.transform,Vt),Et=fe.layout.get("icon-text-fit")!=="none"&&Pt.hasIconData();if(xt){const Mt=Math.pow(2,ze.zoom-Ot.tileID.overscaledZ),ir=ue.style.map.terrain?(dr,_r)=>ue.style.map.terrain.getElevation(Tt,dr,_r):null,Gr=We.translatePosition(ze,Ot,Me,me);Ks(Pt,lt,gt,De,ze,or,Tt.posMatrix,Mt,xt,Et,We,Gr,Tt.toUnwrapped(),ir)}}})(j,b,D,k,D.layout.get("text-rotation-alignment"),D.layout.get("text-pitch-alignment"),D.paint.get("text-translate"),D.paint.get("text-translate-anchor"),$),D.paint.get("icon-opacity").constantOr(1)!==0&&ms(b,k,D,j,!1,D.paint.get("icon-translate"),D.paint.get("icon-translate-anchor"),D.layout.get("icon-rotation-alignment"),D.layout.get("icon-pitch-alignment"),D.layout.get("icon-keep-upright"),G,H),D.paint.get("text-opacity").constantOr(1)!==0&&ms(b,k,D,j,!0,D.paint.get("text-translate"),D.paint.get("text-translate-anchor"),D.layout.get("text-rotation-alignment"),D.layout.get("text-pitch-alignment"),D.layout.get("text-keep-upright"),G,H),k.map.showCollisionBoxes&&(Su(b,k,D,j,!0),Su(b,k,D,j,!1))})(i,f,g,y,this.style.placement.variableOffsets);break;case"circle":(function(b,k,D,j){if(b.renderPass!=="translucent")return;const $=D.paint.get("circle-opacity"),G=D.paint.get("circle-stroke-width"),H=D.paint.get("circle-stroke-opacity"),ae=!D.layout.get("circle-sort-key").isConstant();if($.constantOr(1)===0&&(G.constantOr(1)===0||H.constantOr(1)===0))return;const ue=b.context,fe=ue.gl,pe=b.depthModeForSublayer(0,Tr.ReadOnly),ve=en.disabled,we=b.colorModeForRenderPass(),Me=[];for(let me=0;me<j.length;me++){const De=j[me],ze=k.getTile(De),We=ze.getBucket(D);if(!We)continue;const lt=We.programConfigurations.get(D.id),gt=b.useProgram("circle",lt),Tt=We.layoutVertexBuffer,Ot=We.indexBuffer,Pt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(De),xt={programConfiguration:lt,program:gt,layoutVertexBuffer:Tt,indexBuffer:Ot,uniformValues:mc(b,De,ze,D),terrainData:Pt};if(ae){const Vt=We.segments.get();for(const or of Vt)Me.push({segments:new l.a0([or]),sortKey:or.sortKey,state:xt})}else Me.push({segments:We.segments,sortKey:0,state:xt})}ae&&Me.sort(((me,De)=>me.sortKey-De.sortKey));for(const me of Me){const{programConfiguration:De,program:ze,layoutVertexBuffer:We,indexBuffer:lt,uniformValues:gt,terrainData:Tt}=me.state;ze.draw(ue,fe.TRIANGLES,pe,ve,we,Vr.disabled,gt,Tt,D.id,We,lt,me.segments,D.paint,b.transform.zoom,De)}})(i,f,g,y);break;case"heatmap":(function(b,k,D,j){if(D.paint.get("heatmap-opacity")===0)return;const $=b.context;if(b.style.map.terrain){for(const G of j){const H=k.getTile(G);k.hasRenderableParent(G)||(b.renderPass==="offscreen"?Ah(b,H,D,G):b.renderPass==="translucent"&&Xs(b,D,G))}$.viewport.set([0,0,b.width,b.height])}else b.renderPass==="offscreen"?(function(G,H,ae,ue){const fe=G.context,pe=fe.gl,ve=en.disabled,we=new Pn([pe.ONE,pe.ONE],l.aM.transparent,[!0,!0,!0,!0]);(function(Me,me,De){const ze=Me.gl;Me.activeTexture.set(ze.TEXTURE1),Me.viewport.set([0,0,me.width/4,me.height/4]);let We=De.heatmapFbos.get(l.aU);We?(ze.bindTexture(ze.TEXTURE_2D,We.colorAttachment.get()),Me.bindFramebuffer.set(We.framebuffer)):(We=Cl(Me,me.width/4,me.height/4),De.heatmapFbos.set(l.aU,We))})(fe,G,ae),fe.clear({color:l.aM.transparent});for(let Me=0;Me<ue.length;Me++){const me=ue[Me];if(H.hasRenderableParent(me))continue;const De=H.getTile(me),ze=De.getBucket(ae);if(!ze)continue;const We=ze.programConfigurations.get(ae.id),lt=G.useProgram("heatmap",We),{zoom:gt}=G.transform;lt.draw(fe,pe.TRIANGLES,Tr.disabled,ve,we,Vr.disabled,Jn(me.posMatrix,De,gt,ae.paint.get("heatmap-intensity")),null,ae.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,ae.paint,G.transform.zoom,We)}fe.viewport.set([0,0,G.width,G.height])})(b,k,D,j):b.renderPass==="translucent"&&(function(G,H){const ae=G.context,ue=ae.gl;ae.setColorMode(G.colorModeForRenderPass());const fe=H.heatmapFbos.get(l.aU);fe&&(ae.activeTexture.set(ue.TEXTURE0),ue.bindTexture(ue.TEXTURE_2D,fe.colorAttachment.get()),ae.activeTexture.set(ue.TEXTURE1),Ml(ae,H).bind(ue.LINEAR,ue.CLAMP_TO_EDGE),G.useProgram("heatmapTexture").draw(ae,ue.TRIANGLES,Tr.disabled,en.disabled,G.colorModeForRenderPass(),Vr.disabled,cs(G,H,0,1),null,H.id,G.viewportBuffer,G.quadTriangleIndexBuffer,G.viewportSegments,H.paint,G.transform.zoom))})(b,D)})(i,f,g,y);break;case"line":(function(b,k,D,j){if(b.renderPass!=="translucent")return;const $=D.paint.get("line-opacity"),G=D.paint.get("line-width");if($.constantOr(1)===0||G.constantOr(1)===0)return;const H=b.depthModeForSublayer(0,Tr.ReadOnly),ae=b.colorModeForRenderPass(),ue=D.paint.get("line-dasharray"),fe=D.paint.get("line-pattern"),pe=fe.constantOr(1),ve=D.paint.get("line-gradient"),we=D.getCrossfadeParameters(),Me=pe?"linePattern":ue?"lineSDF":ve?"lineGradient":"line",me=b.context,De=me.gl;let ze=!0;for(const We of j){const lt=k.getTile(We);if(pe&&!lt.patternsLoaded())continue;const gt=lt.getBucket(D);if(!gt)continue;const Tt=gt.programConfigurations.get(D.id),Ot=b.context.program.get(),Pt=b.useProgram(Me,Tt),xt=ze||Pt.program!==Ot,Vt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(We),or=fe.constantOr(null);if(or&&lt.imageAtlas){const ir=lt.imageAtlas,Gr=ir.patternPositions[or.to.toString()],dr=ir.patternPositions[or.from.toString()];Gr&&dr&&Tt.setConstantPatternPositions(Gr,dr)}const Et=Vt?We:null,Mt=pe?fo(b,lt,D,we,Et):ue?Wp(b,lt,D,ue,we,Et):ve?gh(b,lt,D,gt.lineClipsArray.length,Et):gc(b,lt,D,Et);if(pe)me.activeTexture.set(De.TEXTURE0),lt.imageAtlasTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE),Tt.updatePaintBuffers(we);else if(ue&&(xt||b.lineAtlas.dirty))me.activeTexture.set(De.TEXTURE0),b.lineAtlas.bind(me);else if(ve){const ir=gt.gradients[D.id];let Gr=ir.texture;if(D.gradientVersion!==ir.version){let dr=256;if(D.stepInterpolant){const _r=k.getSource().maxzoom,Xr=We.canonical.z===_r?Math.ceil(1<<b.transform.maxZoom-We.canonical.z):1;dr=l.ac(l.aV(gt.maxLineLength/l.X*1024*Xr),256,me.maxTextureSize)}ir.gradient=l.aW({expression:D.gradientExpression(),evaluationKey:"lineProgress",resolution:dr,image:ir.gradient||void 0,clips:gt.lineClipsArray}),ir.texture?ir.texture.update(ir.gradient):ir.texture=new be(me,ir.gradient,De.RGBA),ir.version=D.gradientVersion,Gr=ir.texture}me.activeTexture.set(De.TEXTURE0),Gr.bind(D.stepInterpolant?De.NEAREST:De.LINEAR,De.CLAMP_TO_EDGE)}Pt.draw(me,De.TRIANGLES,H,b.stencilModeForClipping(We),ae,Vr.disabled,Mt,Vt,D.id,gt.layoutVertexBuffer,gt.indexBuffer,gt.segments,D.paint,b.transform.zoom,Tt,gt.layoutVertexBuffer2),ze=!1}})(i,f,g,y);break;case"fill":(function(b,k,D,j){const $=D.paint.get("fill-color"),G=D.paint.get("fill-opacity");if(G.constantOr(1)===0)return;const H=b.colorModeForRenderPass(),ae=D.paint.get("fill-pattern"),ue=b.opaquePassEnabledForLayer()&&!ae.constantOr(1)&&$.constantOr(l.aM.transparent).a===1&&G.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===ue){const fe=b.depthModeForSublayer(1,b.renderPass==="opaque"?Tr.ReadWrite:Tr.ReadOnly);jo(b,k,D,j,fe,H,!1)}if(b.renderPass==="translucent"&&D.paint.get("fill-antialias")){const fe=b.depthModeForSublayer(D.getPaintProperty("fill-outline-color")?2:0,Tr.ReadOnly);jo(b,k,D,j,fe,H,!0)}})(i,f,g,y);break;case"fill-extrusion":(function(b,k,D,j){const $=D.paint.get("fill-extrusion-opacity");if($!==0&&b.renderPass==="translucent"){const G=new Tr(b.context.gl.LEQUAL,Tr.ReadWrite,b.depthRangeFor3D);if($!==1||D.paint.get("fill-extrusion-pattern").constantOr(1))Ac(b,k,D,j,G,en.disabled,Pn.disabled),Ac(b,k,D,j,G,b.stencilModeFor3D(),b.colorModeForRenderPass());else{const H=b.colorModeForRenderPass();Ac(b,k,D,j,G,en.disabled,H)}}})(i,f,g,y);break;case"hillshade":(function(b,k,D,j){if(b.renderPass!=="offscreen"&&b.renderPass!=="translucent")return;const $=b.context,G=b.depthModeForSublayer(0,Tr.ReadOnly),H=b.colorModeForRenderPass(),[ae,ue]=b.renderPass==="translucent"?b.stencilConfigForOverlap(j):[{},j];for(const fe of ue){const pe=k.getTile(fe);pe.needsHillshadePrepare!==void 0&&pe.needsHillshadePrepare&&b.renderPass==="offscreen"?Il(b,pe,D,G,en.disabled,H):b.renderPass==="translucent"&&zo(b,fe,pe,D,G,ae[fe.overscaledZ],H)}$.viewport.set([0,0,b.width,b.height])})(i,f,g,y);break;case"raster":(function(b,k,D,j){if(b.renderPass!=="translucent"||D.paint.get("raster-opacity")===0||!j.length)return;const $=b.context,G=$.gl,H=k.getSource(),ae=b.useProgram("raster"),ue=b.colorModeForRenderPass(),[fe,pe]=H instanceof di?[{},j]:b.stencilConfigForOverlap(j),ve=pe[pe.length-1].overscaledZ,we=!b.options.moving;for(const Me of pe){const me=b.depthModeForSublayer(Me.overscaledZ-ve,D.paint.get("raster-opacity")===1?Tr.ReadWrite:Tr.ReadOnly,G.LESS),De=k.getTile(Me);De.registerFadeDuration(D.paint.get("raster-fade-duration"));const ze=k.findLoadedParent(Me,0),We=k.findLoadedSibling(Me),lt=Eh(De,ze||We||null,k,D,b.transform,b.style.map.terrain);let gt,Tt;const Ot=D.paint.get("raster-resampling")==="nearest"?G.NEAREST:G.LINEAR;$.activeTexture.set(G.TEXTURE0),De.texture.bind(Ot,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),$.activeTexture.set(G.TEXTURE1),ze?(ze.texture.bind(Ot,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),gt=Math.pow(2,ze.tileID.overscaledZ-De.tileID.overscaledZ),Tt=[De.tileID.canonical.x*gt%1,De.tileID.canonical.y*gt%1]):De.texture.bind(Ot,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),De.texture.useMipmap&&$.extTextureFilterAnisotropic&&b.transform.pitch>20&&G.texParameterf(G.TEXTURE_2D,$.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,$.extTextureFilterAnisotropicMax);const Pt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Me),xt=Pt?Me:null,Vt=xt?xt.posMatrix:b.transform.calculatePosMatrix(Me.toUnwrapped(),we),or=Zf(Vt,Tt||[0,0],gt||1,lt,D);H instanceof di?ae.draw($,G.TRIANGLES,me,en.disabled,ue,Vr.disabled,or,Pt,D.id,H.boundsBuffer,b.quadTriangleIndexBuffer,H.boundsSegments):ae.draw($,G.TRIANGLES,me,fe[Me.overscaledZ],ue,Vr.disabled,or,Pt,D.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}})(i,f,g,y);break;case"background":(function(b,k,D,j){const $=D.paint.get("background-color"),G=D.paint.get("background-opacity");if(G===0)return;const H=b.context,ae=H.gl,ue=b.transform,fe=ue.tileSize,pe=D.paint.get("background-pattern");if(b.isPatternMissing(pe))return;const ve=!pe&&$.a===1&&G===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==ve)return;const we=en.disabled,Me=b.depthModeForSublayer(0,ve==="opaque"?Tr.ReadWrite:Tr.ReadOnly),me=b.colorModeForRenderPass(),De=b.useProgram(pe?"backgroundPattern":"background"),ze=j||ue.coveringTiles({tileSize:fe,terrain:b.style.map.terrain});pe&&(H.activeTexture.set(ae.TEXTURE0),b.imageManager.bind(b.context));const We=D.getCrossfadeParameters();for(const lt of ze){const gt=j?lt.posMatrix:b.transform.calculatePosMatrix(lt.toUnwrapped()),Tt=pe?vh(gt,G,b,pe,{tileID:lt,tileSize:fe},We):Gs(gt,G,$),Ot=b.style.map.terrain&&b.style.map.terrain.getTerrainData(lt);De.draw(H,ae.TRIANGLES,Me,we,me,Vr.disabled,Tt,Ot,D.id,b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}})(i,0,g,y);break;case"custom":(function(b,k,D){const j=b.context,$=D.implementation;if(b.renderPass==="offscreen"){const G=$.prerender;G&&(b.setCustomLayerDefaults(),j.setColorMode(b.colorModeForRenderPass()),G.call($,j.gl,b.transform.customLayerMatrix()),j.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),j.setColorMode(b.colorModeForRenderPass()),j.setStencilMode(en.disabled);const G=$.renderingMode==="3d"?new Tr(b.context.gl.LEQUAL,Tr.ReadWrite,b.depthRangeFor3D):b.depthModeForSublayer(0,Tr.ReadOnly);j.setDepthMode(G),$.render(j.gl,b.transform.customLayerMatrix(),{farZ:b.transform.farZ,nearZ:b.transform.nearZ,fov:b.transform._fov,modelViewProjectionMatrix:b.transform.modelViewProjectionMatrix,projectionMatrix:b.transform.projectionMatrix}),j.setDirty(),b.setBaseState(),j.bindFramebuffer.set(null)}})(i,0,g)}}translatePosMatrix(i,f,g,y,b){if(!g[0]&&!g[1])return i;const k=b?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(k){const $=Math.sin(k),G=Math.cos(k);g=[g[0]*G-g[1]*$,g[0]*$+g[1]*G]}const D=[b?g[0]:yr(f,g[0],this.transform.zoom),b?g[1]:yr(f,g[1],this.transform.zoom),0],j=new Float32Array(16);return l.J(j,i,D),j}saveTileTexture(i){const f=this._tileTextures[i.size[0]];f?f.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const f=this._tileTextures[i];return f&&f.length>0?f.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const f=this.imageManager.getPattern(i.from.toString()),g=this.imageManager.getPattern(i.to.toString());return!f||!g}useProgram(i,f){this.cache=this.cache||{};const g=i+(f?f.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[g]||(this.cache[g]=new $r(this.context,ko[i],f,_h[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[g]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new be(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:f}=this.context.gl;return this.width!==i||this.height!==f}}class Ys{constructor(i,f){this.points=i,this.planes=f}static fromInvProjectionMatrix(i,f,g){const y=Math.pow(2,g),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((D=>{const j=1/(D=l.af([],D,i))[3]/f*y;return l.b1(D,D,[j,j,1/D[3],j])})),k=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((D=>{const j=(function(ae,ue){var fe=ue[0],pe=ue[1],ve=ue[2],we=fe*fe+pe*pe+ve*ve;return we>0&&(we=1/Math.sqrt(we)),ae[0]=ue[0]*we,ae[1]=ue[1]*we,ae[2]=ue[2]*we,ae})([],(function(ae,ue,fe){var pe=ue[0],ve=ue[1],we=ue[2],Me=fe[0],me=fe[1],De=fe[2];return ae[0]=ve*De-we*me,ae[1]=we*Me-pe*De,ae[2]=pe*me-ve*Me,ae})([],le([],b[D[0]],b[D[1]]),le([],b[D[2]],b[D[1]]))),$=-((G=j)[0]*(H=b[D[1]])[0]+G[1]*H[1]+G[2]*H[2]);var G,H;return j.concat($)}));return new Ys(b,k)}}class Js{constructor(i,f){this.min=i,this.max=f,this.center=(function(g,y,b){return g[0]=.5*y[0],g[1]=.5*y[1],g[2]=.5*y[2],g})([],(function(g,y,b){return g[0]=y[0]+b[0],g[1]=y[1]+b[1],g[2]=y[2]+b[2],g})([],this.min,this.max))}quadrant(i){const f=[i%2==0,i<2],g=Z(this.min),y=Z(this.max);for(let b=0;b<f.length;b++)g[b]=f[b]?this.min[b]:this.center[b],y[b]=f[b]?this.center[b]:this.max[b];return y[2]=this.max[2],new Js(g,y)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const f=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let g=!0;for(let y=0;y<i.planes.length;y++){const b=i.planes[y];let k=0;for(let D=0;D<f.length;D++)l.b2(b,f[D])>=0&&k++;if(k===0)return 0;k!==f.length&&(g=!1)}if(g)return 2;for(let y=0;y<3;y++){let b=Number.MAX_VALUE,k=-Number.MAX_VALUE;for(let D=0;D<i.points.length;D++){const j=i.points[D][y]-this.min[y];b=Math.min(b,j),k=Math.max(k,j)}if(k<0||b>this.max[y]-this.min[y])return 0}return 1}}class Qs{constructor(i=0,f=0,g=0,y=0){if(isNaN(i)||i<0||isNaN(f)||f<0||isNaN(g)||g<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=f,this.left=g,this.right=y}interpolate(i,f,g){return f.top!=null&&i.top!=null&&(this.top=l.y.number(i.top,f.top,g)),f.bottom!=null&&i.bottom!=null&&(this.bottom=l.y.number(i.bottom,f.bottom,g)),f.left!=null&&i.left!=null&&(this.left=l.y.number(i.left,f.left,g)),f.right!=null&&i.right!=null&&(this.right=l.y.number(i.right,f.right,g)),this}getCenter(i,f){const g=l.ac((this.left+i-this.right)/2,0,i),y=l.ac((this.top+f-this.bottom)/2,0,f);return new l.P(g,y)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Qs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Cc=85.051129;class ys{constructor(i,f,g,y,b){this.tileSize=512,this._renderWorldCopies=b===void 0||!!b,this._minZoom=i||0,this._maxZoom=f||22,this._minPitch=g??0,this._maxPitch=y??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Qs,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const i=new ys(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.lngRange=i.lngRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this.minElevationForCurrentTile=i.minElevationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const f=-l.b3(i,-180,180)*Math.PI/180;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=(function(){var g=new l.A(4);return l.A!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g})(),(function(g,y,b){var k=y[0],D=y[1],j=y[2],$=y[3],G=Math.sin(b),H=Math.cos(b);g[0]=k*H+j*G,g[1]=D*H+$*G,g[2]=k*-G+j*H,g[3]=D*-G+$*H})(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const f=l.ac(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const f=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._zoom=f,this.tileZoom=Math.max(0,Math.floor(f)),this.scale=this.zoomScale(f),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,f,g){this._unmodified=!1,this._edgeInsets.interpolate(i,f,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const f=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(i){const f=[new l.b4(0,i)];if(this._renderWorldCopies){const g=this.pointCoordinate(new l.P(0,0)),y=this.pointCoordinate(new l.P(this.width,0)),b=this.pointCoordinate(new l.P(this.width,this.height)),k=this.pointCoordinate(new l.P(0,this.height)),D=Math.floor(Math.min(g.x,y.x,b.x,k.x)),j=Math.floor(Math.max(g.x,y.x,b.x,k.x)),$=1;for(let G=D-$;G<=j+$;G++)G!==0&&f.push(new l.b4(G,i))}return f}coveringTiles(i){var f,g;let y=this.coveringZoomLevel(i);const b=y;if(i.minzoom!==void 0&&y<i.minzoom)return[];i.maxzoom!==void 0&&y>i.maxzoom&&(y=i.maxzoom);const k=this.pointCoordinate(this.getCameraPoint()),D=l.Z.fromLngLat(this.center),j=Math.pow(2,y),$=[j*k.x,j*k.y,0],G=[j*D.x,j*D.y,0],H=Ys.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,y);let ae=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ae=y);const ue=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,fe=me=>({aabb:new Js([me*j,0,0],[(me+1)*j,j,0]),zoom:0,x:0,y:0,wrap:me,fullyVisible:!1}),pe=[],ve=[],we=y,Me=i.reparseOverscaled?b:y;if(this._renderWorldCopies)for(let me=1;me<=3;me++)pe.push(fe(-me)),pe.push(fe(me));for(pe.push(fe(0));pe.length>0;){const me=pe.pop(),De=me.x,ze=me.y;let We=me.fullyVisible;if(!We){const Pt=me.aabb.intersects(H);if(Pt===0)continue;We=Pt===2}const lt=i.terrain?$:G,gt=me.aabb.distanceX(lt),Tt=me.aabb.distanceY(lt),Ot=Math.max(Math.abs(gt),Math.abs(Tt));if(me.zoom===we||Ot>ue+(1<<we-me.zoom)-2&&me.zoom>=ae){const Pt=we-me.zoom,xt=$[0]-.5-(De<<Pt),Vt=$[1]-.5-(ze<<Pt);ve.push({tileID:new l.S(me.zoom===we?Me:me.zoom,me.wrap,me.zoom,De,ze),distanceSq:de([G[0]-.5-De,G[1]-.5-ze]),tileDistanceToCamera:Math.sqrt(xt*xt+Vt*Vt)})}else for(let Pt=0;Pt<4;Pt++){const xt=(De<<1)+Pt%2,Vt=(ze<<1)+(Pt>>1),or=me.zoom+1;let Et=me.aabb.quadrant(Pt);if(i.terrain){const Mt=new l.S(or,me.wrap,or,xt,Vt),ir=i.terrain.getMinMaxElevation(Mt),Gr=(f=ir.minElevation)!==null&&f!==void 0?f:this.elevation,dr=(g=ir.maxElevation)!==null&&g!==void 0?g:this.elevation;Et=new Js([Et.min[0],Et.min[1],Gr],[Et.max[0],Et.max[1],dr])}pe.push({aabb:Et,zoom:or,x:xt,y:Vt,wrap:me.wrap,fullyVisible:We})}}return ve.sort(((me,De)=>me.distanceSq-De.distanceSq)).map((me=>me.tileID))}resize(i,f){this.width=i,this.height=f,this.pixelsToGLUnits=[2/i,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const f=l.ac(i.lat,-85.051129,Cc);return new l.P(l.O(i.lng)*this.worldSize,l.Q(f)*this.worldSize)}unproject(i){return new l.Z(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const f=this.elevation,g=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,y=this.pointLocation(this.centerPoint,i),b=i.getElevationForLngLatZoom(y,this.tileZoom);if(!(this.elevation-b))return;const k=g+f-b,D=Math.cos(this._pitch)*this.cameraToCenterDistance/k/l.b5(1,y.lat),j=this.scaleZoom(D/this.tileSize);this._elevation=b,this._center=y,this.zoom=j}setLocationAtPoint(i,f){const g=this.pointCoordinate(f),y=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(i),k=new l.Z(b.x-(g.x-y.x),b.y-(g.y-y.y));this.center=this.coordinateLocation(k),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,f){return f?this.coordinatePoint(this.locationCoordinate(i),f.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,f){return this.coordinateLocation(this.pointCoordinate(i,f))}locationCoordinate(i){return l.Z.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,f){if(f){const ae=f.pointCoordinate(i);if(ae!=null)return ae}const g=[i.x,i.y,0,1],y=[i.x,i.y,1,1];l.af(g,g,this.pixelMatrixInverse),l.af(y,y,this.pixelMatrixInverse);const b=g[3],k=y[3],D=g[1]/b,j=y[1]/k,$=g[2]/b,G=y[2]/k,H=$===G?0:(0-$)/(G-$);return new l.Z(l.y.number(g[0]/b,y[0]/k,H)/this.worldSize,l.y.number(D,j,H)/this.worldSize)}coordinatePoint(i,f=0,g=this.pixelMatrix){const y=[i.x*this.worldSize,i.y*this.worldSize,f,1];return l.af(y,y,g),new l.P(y[0]/y[3],y[1]/y[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new $e().extend(this.pointLocation(new l.P(0,i))).extend(this.pointLocation(new l.P(this.width,i))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new $e([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Cc])}calculateTileMatrix(i){const f=i.canonical,g=this.worldSize/this.zoomScale(f.z),y=f.x+Math.pow(2,f.z)*i.wrap,b=l.an(new Float64Array(16));return l.J(b,b,[y*g,f.y*g,0]),l.K(b,b,[g/l.X,g/l.X,1]),b}calculatePosMatrix(i,f=!1){const g=i.key,y=f?this._alignedPosMatrixCache:this._posMatrixCache;if(y[g])return y[g];const b=this.calculateTileMatrix(i);return l.L(b,f?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,b),y[g]=new Float32Array(b),y[g]}calculateFogMatrix(i){const f=i.key,g=this._fogMatrixCache;if(g[f])return g[f];const y=this.calculateTileMatrix(i);return l.L(y,this.fogMatrix,y),g[f]=new Float32Array(y),g[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(i,f){f=l.ac(+f,this.minZoom,this.maxZoom);const g={center:new l.N(i.lng,i.lat),zoom:f};let y=this.lngRange;if(!this._renderWorldCopies&&y===null){const me=179.9999999999;y=[-me,me]}const b=this.tileSize*this.zoomScale(g.zoom);let k=0,D=b,j=0,$=b,G=0,H=0;const{x:ae,y:ue}=this.size;if(this.latRange){const me=this.latRange;k=l.Q(me[1])*b,D=l.Q(me[0])*b,D-k<ue&&(G=ue/(D-k))}y&&(j=l.b3(l.O(y[0])*b,0,b),$=l.b3(l.O(y[1])*b,0,b),$<j&&($+=b),$-j<ae&&(H=ae/($-j)));const{x:fe,y:pe}=this.project.call({worldSize:b},i);let ve,we;const Me=Math.max(H||0,G||0);if(Me){const me=new l.P(H?($+j)/2:fe,G?(D+k)/2:pe);return g.center=this.unproject.call({worldSize:b},me).wrap(),g.zoom+=this.scaleZoom(Me),g}if(this.latRange){const me=ue/2;pe-me<k&&(we=k+me),pe+me>D&&(we=D-me)}if(y){const me=(j+$)/2;let De=fe;this._renderWorldCopies&&(De=l.b3(fe,me-b/2,me+b/2));const ze=ae/2;De-ze<j&&(ve=j+ze),De+ze>$&&(ve=$-ze)}if(ve!==void 0||we!==void 0){const me=new l.P(ve??fe,we??pe);g.center=this.unproject.call({worldSize:b},me).wrap()}return g}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const i=this._unmodified,{center:f,zoom:g}=this.getConstrained(this.center,this.zoom);this.center=f,this.zoom=g,this._unmodified=i,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,f=this.point.x,g=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b5(1,this.center.lat)*this.worldSize;let y=l.an(new Float64Array(16));l.K(y,y,[this.width/2,-this.height/2,1]),l.J(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=l.an(new Float64Array(16)),l.K(y,y,[1,-1,1]),l.J(y,y,[-1,-1,0]),l.K(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y;const b=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),k=Math.min(this.elevation,this.minElevationForCurrentTile),D=b-k*this._pixelPerMeter/Math.cos(this._pitch),j=k<0?D:b,$=Math.PI/2+this._pitch,G=this._fov*(.5+i.y/this.height),H=Math.sin(G)*j/Math.sin(l.ac(Math.PI-$-G,.01,Math.PI-.01)),ae=this.getHorizon(),ue=2*Math.atan(ae/this.cameraToCenterDistance)*(.5+i.y/(2*ae)),fe=Math.sin(ue)*j/Math.sin(l.ac(Math.PI-$-ue,.01,Math.PI-.01)),pe=Math.min(H,fe);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*pe+j),this.nearZ=this.height/50,y=new Float64Array(16),l.b6(y,this._fov,this.width/this.height,this.nearZ,this.farZ),y[8]=2*-i.x/this.width,y[9]=2*i.y/this.height,this.projectionMatrix=l.ae(y),l.K(y,y,[1,-1,1]),l.J(y,y,[0,0,-this.cameraToCenterDistance]),l.b7(y,y,this._pitch),l.ad(y,y,this.angle),l.J(y,y,[-f,-g,0]),this.mercatorMatrix=l.K([],y,[this.worldSize,this.worldSize,this.worldSize]),l.K(y,y,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.L(new Float64Array(16),this.labelPlaneMatrix,y),l.J(y,y,[0,0,-this.elevation]),this.modelViewProjectionMatrix=y,this.invModelViewProjectionMatrix=l.as([],y),this.fogMatrix=new Float64Array(16),l.b6(this.fogMatrix,this._fov,this.width/this.height,b,this.farZ),this.fogMatrix[8]=2*-i.x/this.width,this.fogMatrix[9]=2*i.y/this.height,l.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),l.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),l.b7(this.fogMatrix,this.fogMatrix,this._pitch),l.ad(this.fogMatrix,this.fogMatrix,this.angle),l.J(this.fogMatrix,this.fogMatrix,[-f,-g,0]),l.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),l.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=l.L(new Float64Array(16),this.labelPlaneMatrix,y);const ve=this.width%2/2,we=this.height%2/2,Me=Math.cos(this.angle),me=Math.sin(this.angle),De=f-Math.round(f)+Me*ve+me*we,ze=g-Math.round(g)+Me*we+me*ve,We=new Float64Array(y);if(l.J(We,We,[De>.5?De-1:De,ze>.5?ze-1:ze,0]),this.alignedModelViewProjectionMatrix=We,y=l.as(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new l.P(0,0)),f=[i.x*this.worldSize,i.y*this.worldSize,0,1];return l.af(f,f,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,i))}getCameraQueryGeometry(i){const f=this.getCameraPoint();if(i.length===1)return[i[0],f];{let g=f.x,y=f.y,b=f.x,k=f.y;for(const D of i)g=Math.min(g,D.x),y=Math.min(y,D.y),b=Math.max(b,D.x),k=Math.max(k,D.y);return[new l.P(g,y),new l.P(b,y),new l.P(b,k),new l.P(g,k),new l.P(g,y)]}}lngLatToCameraDepth(i,f){const g=this.locationCoordinate(i),y=[g.x*this.worldSize,g.y*this.worldSize,f,1];return l.af(y,y,this.modelViewProjectionMatrix),y[2]/y[3]}}function Au(S,i){let f,g=!1,y=null,b=null;const k=()=>{y=null,g&&(S.apply(b,f),y=setTimeout(k,i),g=!1)};return(...D)=>(g=!0,b=this,f=D,y||k(),y)}class Mc{constructor(i){this._getCurrentHash=()=>{const f=window.location.hash.replace("#","");if(this._hashName){let g;return f.split("&").map((y=>y.split("="))).forEach((y=>{y[0]===this._hashName&&(g=y)})),(g&&g[1]||"").split("/")}return f.split("/")},this._onHashChange=()=>{const f=this._getCurrentHash();if(f.length>=3&&!f.some((g=>isNaN(g)))){const g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(f[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:g,pitch:+(f[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const f=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,f)},this._removeHash=()=>{const f=this._getCurrentHash();if(f.length===0)return;const g=f.join("/");let y=g;y.split("&").length>0&&(y=y.split("&")[0]),this._hashName&&(y=`${this._hashName}=${g}`);let b=window.location.hash.replace(y,"");b.startsWith("#&")?b=b.slice(0,1)+b.slice(2):b==="#"&&(b="");let k=window.location.href.replace(/(#.+)?$/,b);k=k.replace("&&","&"),window.history.replaceState(window.history.state,null,k)},this._updateHash=Au(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(i){const f=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,y=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,y),k=Math.round(f.lng*b)/b,D=Math.round(f.lat*b)/b,j=this._map.getBearing(),$=this._map.getPitch();let G="";if(G+=i?`/${k}/${D}/${g}`:`${g}/${D}/${k}`,(j||$)&&(G+="/"+Math.round(10*j)/10),$&&(G+=`/${Math.round($)}`),this._hashName){const H=this._hashName;let ae=!1;const ue=window.location.hash.slice(1).split("&").map((fe=>{const pe=fe.split("=")[0];return pe===H?(ae=!0,`${pe}=${G}`):fe})).filter((fe=>fe));return ae||ue.push(`${H}=${G}`),`#${ue.join("&")}`}return`#${G}`}}const Lo={linearity:.3,easing:l.b8(0,0,.3,1)},Eu=l.e({deceleration:2500,maxSpeed:1400},Lo),Cu=l.e({deceleration:20,maxSpeed:1400},Lo),Ic=l.e({deceleration:1e3,maxSpeed:360},Lo),Mu=l.e({deceleration:1e3,maxSpeed:90},Lo);class Ol{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:A.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,f=A.now();for(;i.length>0&&f-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const f={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)f.zoom+=b.zoomDelta||0,f.bearing+=b.bearingDelta||0,f.pitch+=b.pitchDelta||0,b.panDelta&&f.pan._add(b.panDelta),b.around&&(f.around=b.around),b.pinchAround&&(f.pinchAround=b.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(f.pan.mag()){const b=el(f.pan.mag(),g,l.e({},Eu,i||{}));y.offset=f.pan.mult(b.amount/f.pan.mag()),y.center=this._map.transform.center,mo(y,b)}if(f.zoom){const b=el(f.zoom,g,Cu);y.zoom=this._map.transform.zoom+b.amount,mo(y,b)}if(f.bearing){const b=el(f.bearing,g,Ic);y.bearing=this._map.transform.bearing+l.ac(b.amount,-179,179),mo(y,b)}if(f.pitch){const b=el(f.pitch,g,Mu);y.pitch=this._map.transform.pitch+b.amount,mo(y,b)}if(y.zoom||y.bearing){const b=f.pinchAround===void 0?f.around:f.pinchAround;y.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),l.e(y,{noMoveStart:!0})}}function mo(S,i){(!S.duration||S.duration<i.duration)&&(S.duration=i.duration,S.easing=i.easing)}function el(S,i,f){const{maxSpeed:g,linearity:y,deceleration:b}=f,k=l.ac(S*y/(i/1e3),-g,g),D=Math.abs(k)/(b*y);return{easing:f.easing,duration:1e3*D,amount:k*(D/2)}}class ai extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,f,g,y={}){const b=M.mousePos(f.getCanvas(),g),k=f.unproject(b);super(i,l.e({point:b,lngLat:k,originalEvent:g},y)),this._defaultPrevented=!1,this.target=f}}class go extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,f,g){const y=i==="touchend"?g.changedTouches:g.touches,b=M.touchPos(f.getCanvasContainer(),y),k=b.map((j=>f.unproject(j))),D=b.reduce(((j,$,G,H)=>j.add($.div(H.length))),new l.P(0,0));super(i,{points:b,point:D,lngLats:k,lngLat:f.unproject(D),originalEvent:g}),this._defaultPrevented=!1}}class Mh extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,f,g){super(i,{originalEvent:g}),this._defaultPrevented=!1}}class Ih{constructor(i,f){this._map=i,this._clickTolerance=f.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Mh(i.type,this._map,i))}mousedown(i,f){return this._mousedownPos=f,this._firePreventable(new ai(i.type,this._map,i))}mouseup(i){this._map.fire(new ai(i.type,this._map,i))}click(i,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||this._map.fire(new ai(i.type,this._map,i))}dblclick(i){return this._firePreventable(new ai(i.type,this._map,i))}mouseover(i){this._map.fire(new ai(i.type,this._map,i))}mouseout(i){this._map.fire(new ai(i.type,this._map,i))}touchstart(i){return this._firePreventable(new go(i.type,this._map,i))}touchmove(i){this._map.fire(new go(i.type,this._map,i))}touchend(i){this._map.fire(new go(i.type,this._map,i))}touchcancel(i){this._map.fire(new go(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xn{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new ai(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ai("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new ai(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Sa{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(l.P.convert(i),this._map.terrain)}}class Vi{constructor(i,f){this._map=i,this._tr=new Sa(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,f){this.isEnabled()&&i.shiftKey&&i.button===0&&(M.disableDrag(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(i,f){if(!this._active)return;const g=f;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=g,this._box||(this._box=M.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const b=Math.min(y.x,g.x),k=Math.max(y.x,g.x),D=Math.min(y.y,g.y),j=Math.max(y.y,g.y);M.setTransform(this._box,`translate(${b}px,${D}px)`),this._box.style.width=k-b+"px",this._box.style.height=j-D+"px"}mouseupWindow(i,f){if(!this._active||i.button!==0)return;const g=this._startPos,y=f;if(this.reset(),M.suppressClick(),g.x!==y.x||g.y!==y.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:i})),{cameraAnimation:b=>b.fitScreenCoordinates(g,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(M.remove(this._box),this._box=null),M.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,f){return this._map.fire(new l.k(i,{originalEvent:f}))}}function Dl(S,i){if(S.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${S.length}, points ${i.length}`);const f={};for(let g=0;g<S.length;g++)f[S[g].identifier]=i[g];return f}class yo{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,f,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),g.length===this.numTouches&&(this.centroid=(function(y){const b=new l.P(0,0);for(const k of y)b._add(k);return b.div(y.length)})(f),this.touches=Dl(g,f)))}touchmove(i,f,g){if(this.aborted||!this.centroid)return;const y=Dl(g,f);for(const b in this.touches){const k=y[b];(!k||k.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(i,f,g){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Rl{constructor(i){this.singleTap=new yo(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,f,g){this.singleTap.touchstart(i,f,g)}touchmove(i,f,g){this.singleTap.touchmove(i,f,g)}touchend(i,f,g){const y=this.singleTap.touchend(i,f,g);if(y){const b=i.timeStamp-this.lastTime<500,k=!this.lastTap||this.lastTap.dist(y)<30;if(b&&k||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class vs{constructor(i){this._tr=new Sa(i),this._zoomIn=new Rl({numTouches:1,numTaps:2}),this._zoomOut=new Rl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,f,g){this._zoomIn.touchstart(i,f,g),this._zoomOut.touchstart(i,f,g)}touchmove(i,f,g){this._zoomIn.touchmove(i,f,g),this._zoomOut.touchmove(i,f,g)}touchend(i,f,g){const y=this._zoomIn.touchend(i,f,g),b=this._zoomOut.touchend(i,f,g),k=this._tr;return y?(this._active=!0,i.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:k.zoom+1,around:k.unproject(y)},{originalEvent:i})}):b?(this._active=!0,i.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:k.zoom-1,around:k.unproject(b)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class No{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const f=this._moveFunction(...i);if(f.bearingDelta||f.pitchDelta||f.around||f.panDelta)return this._active=!0,f}dragStart(i,f){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=f.length?f[0]:f,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,f){if(!this.isEnabled())return;const g=this._lastPoint;if(!g)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const y=f.length?f[0]:f;return!this._moved&&y.dist(g)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(g,y))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&M.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const kh={0:1,2:2};class _s{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const f=M.mouseButton(i);this._eventButton=f}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!(function(f,g){const y=kh[g];return f.buttons===void 0||(f.buttons&y)!==y})(i,this._eventButton)}isValidEndEvent(i){return M.mouseButton(i)===this._eventButton}}class Oh{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const Iu=S=>{S.mousedown=S.dragStart,S.mousemoveWindow=S.dragMove,S.mouseup=S.dragEnd,S.contextmenu=i=>{i.preventDefault()}},kc=({enable:S,clickTolerance:i,bearingDegreesPerPixelMoved:f=.8})=>{const g=new _s({checkCorrectEvent:y=>M.mouseButton(y)===0&&y.ctrlKey||M.mouseButton(y)===2});return new No({clickTolerance:i,move:(y,b)=>({bearingDelta:(b.x-y.x)*f}),moveStateManager:g,enable:S,assignEvents:Iu})},tn=({enable:S,clickTolerance:i,pitchDegreesPerPixelMoved:f=-.5})=>{const g=new _s({checkCorrectEvent:y=>M.mouseButton(y)===0&&y.ctrlKey||M.mouseButton(y)===2});return new No({clickTolerance:i,move:(y,b)=>({pitchDelta:(b.y-y.y)*f}),moveStateManager:g,enable:S,assignEvents:Iu})};class Bo{constructor(i,f){this._clickTolerance=i.clickTolerance||1,this._map=f,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0)}_shouldBePrevented(i){return i<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(i,f,g){return this._calculateTransform(i,f,g)}touchmove(i,f,g){if(this._active){if(!this._shouldBePrevented(g.length))return i.preventDefault(),this._calculateTransform(i,f,g);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",i)}}touchend(i,f,g){this._calculateTransform(i,f,g),this._active&&this._shouldBePrevented(g.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,f,g){g.length>0&&(this._active=!0);const y=Dl(g,f),b=new l.P(0,0),k=new l.P(0,0);let D=0;for(const $ in y){const G=y[$],H=this._touches[$];H&&(b._add(G),k._add(G.sub(H)),D++,y[$]=G)}if(this._touches=y,this._shouldBePrevented(D)||!k.mag())return;const j=k.div(D);return this._sum._add(j),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(D),panDelta:j}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class tl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,f,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([f[0],f[1]]))}touchmove(i,f,g){if(!this._firstTwoTouches)return;i.preventDefault();const[y,b]=this._firstTwoTouches,k=Fo(g,f,y),D=Fo(g,f,b);if(!k||!D)return;const j=this._aroundCenter?null:k.add(D).div(2);return this._move([k,D],j,i)}touchend(i,f,g){if(!this._firstTwoTouches)return;const[y,b]=this._firstTwoTouches,k=Fo(g,f,y),D=Fo(g,f,b);k&&D||(this._active&&M.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Fo(S,i,f){for(let g=0;g<S.length;g++)if(S[g].identifier===f)return i[g]}function Oc(S,i){return Math.log(S/i)/Math.LN2}class ku extends tl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,f){const g=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Oc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Oc(this._distance,g),pinchAround:f}}}function rl(S,i){return 180*S.angleWith(i)/Math.PI}class jl extends tl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,f,g){const y=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:rl(this._vector,y),pinchAround:f}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const f=25/(Math.PI*this._minDiameter)*360,g=rl(i,this._startVector);return Math.abs(g)<f}}function $o(S){return Math.abs(S.y)>Math.abs(S.x)}class zl extends tl{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,f,g){super.touchstart(i,f,g),this._currentTouchCount=g.length}_start(i){this._lastPoints=i,$o(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,f,g){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const y=i[0].sub(this._lastPoints[0]),b=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,b,g.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(y.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(i,f,g){if(this._valid!==void 0)return this._valid;const y=i.mag()>=2,b=f.mag()>=2;if(!y&&!b)return;if(!y||!b)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;const k=i.y>0==f.y>0;return $o(i)&&$o(f)&&k}}const sd={panStep:100,bearingStep:15,pitchStep:10};class Ta{constructor(i){this._tr=new Sa(i);const f=sd;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let f=0,g=0,y=0,b=0,k=0;switch(i.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:i.shiftKey?g=-1:(i.preventDefault(),b=-1);break;case 39:i.shiftKey?g=1:(i.preventDefault(),b=1);break;case 38:i.shiftKey?y=1:(i.preventDefault(),k=-1);break;case 40:i.shiftKey?y=-1:(i.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(g=0,y=0),{cameraAnimation:D=>{const j=this._tr;D.easeTo({duration:300,easeId:"keyboardHandler",easing:Ka,zoom:f?Math.round(j.zoom)+f*(i.shiftKey?2:1):j.zoom,bearing:j.bearing+g*this._bearingStep,pitch:j.pitch+y*this._pitchStep,offset:[-b*this._panStep,-k*this._panStep],center:j.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ka(S){return S*(2-S)}const Ll=4.000244140625;class Ui{constructor(i,f){this._onTimeout=g=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(g)},this._map=i,this._tr=new Sa(i),this._triggerRenderFrame=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(i){return!!this._map.cooperativeGestures.isEnabled()&&!(i.ctrlKey||this._map.cooperativeGestures.isBypassed(i))}wheel(i){if(!this.isEnabled())return;if(this._shouldBePrevented(i))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",i);let f=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const g=A.now(),y=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,f!==0&&f%Ll==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(y*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),i.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=i,this._delta-=f,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=M.mousePos(this._map.getCanvas(),i),g=this._tr;this._around=f.y>g.transform.height/2-g.transform.getHorizon()?l.N.convert(this._aroundCenter?g.center:g.unproject(f)):l.N.convert(g.center),this._aroundPoint=g.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const j=this._type==="wheel"&&Math.abs(this._delta)>Ll?this._wheelZoomRate:this._defaultZoomRate;let $=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&$!==0&&($=1/$);const G=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(G*$))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const f=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,g=this._startZoom,y=this._easing;let b,k=!1;const D=A.now()-this._lastWheelEventTime;if(this._type==="wheel"&&g&&y&&D){const j=Math.min(D/200,1),$=y(j);b=l.y.number(g,f,$),j<1?this._frameId||(this._frameId=!0):k=!0}else b=f,k=!0;return this._active=!0,k&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!k,zoomDelta:b-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let f=l.b9;if(this._prevEase){const g=this._prevEase,y=(A.now()-g.start)/g.duration,b=g.easing(y+.01)-g.easing(y),k=.27/Math.sqrt(b*b+1e-4)*.01,D=Math.sqrt(.0729-k*k);f=l.b8(k,D,.25,1)}return this._prevEase={start:A.now(),duration:i,easing:f},f}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Vo{constructor(i,f){this._clickZoom=i,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Dh{constructor(i){this._tr=new Sa(i),this.reset()}reset(){this._active=!1}dblclick(i,f){return i.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(f)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rh{constructor(){this._tap=new Rl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,f,g){if(!this._swipePoint)if(this._tapTime){const y=f[0],b=i.timeStamp-this._tapTime<500,k=this._tapPoint.dist(y)<30;b&&k?g.length>0&&(this._swipePoint=y,this._swipeTouch=g[0].identifier):this.reset()}else this._tap.touchstart(i,f,g)}touchmove(i,f,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const y=f[0],b=y.y-this._swipePoint.y;return this._swipePoint=y,i.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(i,f,g)}touchend(i,f,g){if(this._tapTime)this._swipePoint&&g.length===0&&this.reset();else{const y=this._tap.touchend(i,f,g);y&&(this._tapTime=i.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Dc{constructor(i,f,g){this._el=i,this._mousePan=f,this._touchPan=g}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ld{constructor(i,f,g){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=f,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Rc{constructor(i,f,g,y){this._el=i,this._touchZoom=f,this._touchRotate=g,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Nl{constructor(i,f){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=f,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=M.create("div","maplibregl-cooperative-gesture-screen",i);let f=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(f=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const g=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=f,this._container.appendChild(y);const b=document.createElement("div");b.className="maplibregl-mobile-message",b.textContent=g,this._container.appendChild(b),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(M.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(i){return i[this._bypassKey]}notifyGestureBlocked(i,f){this._enabled&&(this._map.fire(new l.k("cooperativegestureprevented",{gestureType:i,originalEvent:f})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Pa=S=>S.zoom||S.drag||S.pitch||S.rotate;class Lt extends l.k{}function Xa(S){return S.panDelta&&S.panDelta.mag()||S.zoomDelta||S.bearingDelta||S.pitchDelta}class jc{constructor(i,f){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,b)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const k=y.type==="renderFrame"?void 0:y,D={needsRenderFrame:!1},j={},$={},G=y.touches,H=G?this._getMapTouches(G):void 0,ae=H?M.touchPos(this._map.getCanvas(),H):M.mousePos(this._map.getCanvas(),y);for(const{handlerName:pe,handler:ve,allowed:we}of this._handlers){if(!ve.isEnabled())continue;let Me;this._blockedByActive($,we,pe)?ve.reset():ve[b||y.type]&&(Me=ve[b||y.type](y,ae,H),this.mergeHandlerResult(D,j,Me,pe,k),Me&&Me.needsRenderFrame&&this._triggerRenderFrame()),(Me||ve.isActive())&&($[pe]=ve)}const ue={};for(const pe in this._previousActiveHandlers)$[pe]||(ue[pe]=k);this._previousActiveHandlers=$,(Object.keys(ue).length||Xa(D))&&(this._changes.push([D,j,ue]),this._triggerRenderFrame()),(Object.keys($).length||Xa(D))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:fe}=D;fe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],fe(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ol(i),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(f);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,b,k]of this._listeners)M.addEventListener(y,b,y===document?this.handleWindowEvent:this.handleEvent,k)}destroy(){for(const[i,f,g]of this._listeners)M.removeEventListener(i,f,i===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(i){const f=this._map,g=f.getCanvasContainer();this._add("mapEvent",new Ih(f,i));const y=f.boxZoom=new Vi(f,i);this._add("boxZoom",y),i.interactive&&i.boxZoom&&y.enable();const b=f.cooperativeGestures=new Nl(f,i.cooperativeGestures);this._add("cooperativeGestures",b),i.cooperativeGestures&&b.enable();const k=new vs(f),D=new Dh(f);f.doubleClickZoom=new Vo(D,k),this._add("tapZoom",k),this._add("clickZoom",D),i.interactive&&i.doubleClickZoom&&f.doubleClickZoom.enable();const j=new Rh;this._add("tapDragZoom",j);const $=f.touchPitch=new zl(f);this._add("touchPitch",$),i.interactive&&i.touchPitch&&f.touchPitch.enable(i.touchPitch);const G=kc(i),H=tn(i);f.dragRotate=new ld(i,G,H),this._add("mouseRotate",G,["mousePitch"]),this._add("mousePitch",H,["mouseRotate"]),i.interactive&&i.dragRotate&&f.dragRotate.enable();const ae=(({enable:Me,clickTolerance:me})=>{const De=new _s({checkCorrectEvent:ze=>M.mouseButton(ze)===0&&!ze.ctrlKey});return new No({clickTolerance:me,move:(ze,We)=>({around:We,panDelta:We.sub(ze)}),activateOnStart:!0,moveStateManager:De,enable:Me,assignEvents:Iu})})(i),ue=new Bo(i,f);f.dragPan=new Dc(g,ae,ue),this._add("mousePan",ae),this._add("touchPan",ue,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&f.dragPan.enable(i.dragPan);const fe=new jl,pe=new ku;f.touchZoomRotate=new Rc(g,pe,fe,j),this._add("touchRotate",fe,["touchPan","touchZoom"]),this._add("touchZoom",pe,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&f.touchZoomRotate.enable(i.touchZoomRotate);const ve=f.scrollZoom=new Ui(f,(()=>this._triggerRenderFrame()));this._add("scrollZoom",ve,["mousePan"]),i.interactive&&i.scrollZoom&&f.scrollZoom.enable(i.scrollZoom);const we=f.keyboard=new Ta(f);this._add("keyboard",we),i.interactive&&i.keyboard&&f.keyboard.enable(),this._add("blockableMapEvent",new xn(f))}_add(i,f,g){this._handlers.push({handlerName:i,handler:f,allowed:g}),this._handlersById[i]=f}stop(i){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Pa(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,f,g){for(const y in i)if(y!==g&&(!f||f.indexOf(y)<0))return!0;return!1}_getMapTouches(i){const f=[];for(const g of i)this._el.contains(g.target)&&f.push(g);return f}mergeHandlerResult(i,f,g,y,b){if(!g)return;l.e(i,g);const k={handlerName:y,originalEvent:g.originalEvent||b};g.zoomDelta!==void 0&&(f.zoom=k),g.panDelta!==void 0&&(f.drag=k),g.pitchDelta!==void 0&&(f.pitch=k),g.bearingDelta!==void 0&&(f.rotate=k)}_applyChanges(){const i={},f={},g={};for(const[y,b,k]of this._changes)y.panDelta&&(i.panDelta=(i.panDelta||new l.P(0,0))._add(y.panDelta)),y.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(i.around=y.around),y.pinchAround!==void 0&&(i.pinchAround=y.pinchAround),y.noInertia&&(i.noInertia=y.noInertia),l.e(f,b),l.e(g,k);this._updateMapTransform(i,f,g),this._changes=[]}_updateMapTransform(i,f,g){const y=this._map,b=y._getTransformForUpdate(),k=y.terrain;if(!(Xa(i)||k&&this._terrainMovement))return this._fireEvents(f,g,!0);let{panDelta:D,zoomDelta:j,bearingDelta:$,pitchDelta:G,around:H,pinchAround:ae}=i;ae!==void 0&&(H=ae),y._stop(!0),H=H||y.transform.centerPoint;const ue=b.pointLocation(D?H.sub(D):H);$&&(b.bearing+=$),G&&(b.pitch+=G),j&&(b.zoom+=j),k?this._terrainMovement||!f.drag&&!f.zoom?f.drag&&this._terrainMovement?b.center=b.pointLocation(b.centerPoint.sub(D)):b.setLocationAtPoint(ue,H):(this._terrainMovement=!0,this._map._elevationFreeze=!0,b.setLocationAtPoint(ue,H)):b.setLocationAtPoint(ue,H),y._applyUpdatedTransform(b),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(f,g,!0)}_fireEvents(i,f,g){const y=Pa(this._eventsInProgress),b=Pa(i),k={};for(const H in i){const{originalEvent:ae}=i[H];this._eventsInProgress[H]||(k[`${H}start`]=ae),this._eventsInProgress[H]=i[H]}!y&&b&&this._fireEvent("movestart",b.originalEvent);for(const H in k)this._fireEvent(H,k[H]);b&&this._fireEvent("move",b.originalEvent);for(const H in i){const{originalEvent:ae}=i[H];this._fireEvent(H,ae)}const D={};let j;for(const H in this._eventsInProgress){const{handlerName:ae,originalEvent:ue}=this._eventsInProgress[H];this._handlersById[ae].isActive()||(delete this._eventsInProgress[H],j=f[ae]||ue,D[`${H}end`]=j)}for(const H in D)this._fireEvent(H,D[H]);const $=Pa(this._eventsInProgress),G=(y||b)&&!$;if(G&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const H=this._map._getTransformForUpdate();H.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(H)}if(g&&G){this._updatingCamera=!0;const H=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ae=ue=>ue!==0&&-this._bearingSnap<ue&&ue<this._bearingSnap;!H||!H.essential&&A.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:j})),ae(this._map.getBearing())&&this._map.resetNorth()):(ae(H.bearing||this._map.getBearing())&&(H.bearing=0),H.freezeElevation=!0,this._map.easeTo(H,{originalEvent:j})),this._updatingCamera=!1}}_fireEvent(i,f){this._map.fire(new l.k(i,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((i=>{delete this._frameId,this.handleEvent(new Lt("renderFrame",{timeStamp:i})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class nl extends l.E{constructor(i,f){super(),this._renderFrameCallback=()=>{const g=Math.min((A.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=f.bearingSnap,this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new l.N(this.transform.center.lng,this.transform.center.lat)}setCenter(i,f){return this.jumpTo({center:i},f)}panBy(i,f,g){return i=l.P.convert(i).mult(-1),this.panTo(this.transform.center,l.e({offset:i},f),g)}panTo(i,f,g){return this.easeTo(l.e({center:i},f),g)}getZoom(){return this.transform.zoom}setZoom(i,f){return this.jumpTo({zoom:i},f),this}zoomTo(i,f,g){return this.easeTo(l.e({zoom:i},f),g)}zoomIn(i,f){return this.zoomTo(this.getZoom()+1,i,f),this}zoomOut(i,f){return this.zoomTo(this.getZoom()-1,i,f),this}getBearing(){return this.transform.bearing}setBearing(i,f){return this.jumpTo({bearing:i},f),this}getPadding(){return this.transform.padding}setPadding(i,f){return this.jumpTo({padding:i},f),this}rotateTo(i,f,g){return this.easeTo(l.e({bearing:i},f),g)}resetNorth(i,f){return this.rotateTo(0,l.e({duration:1e3},i),f),this}resetNorthPitch(i,f){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},i),f),this}snapToNorth(i,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,f):this}getPitch(){return this.transform.pitch}setPitch(i,f){return this.jumpTo({pitch:i},f),this}cameraForBounds(i,f){i=$e.convert(i).adjustAntiMeridian();const g=f&&f.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),g,f)}_cameraForBoxAndBearing(i,f,g,y){const b={top:0,bottom:0,right:0,left:0};if(typeof(y=l.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const Pt=y.padding;y.padding={top:Pt,bottom:Pt,right:Pt,left:Pt}}y.padding=l.e(b,y.padding);const k=this.transform,D=k.padding,j=new $e(i,f),$=k.project(j.getNorthWest()),G=k.project(j.getNorthEast()),H=k.project(j.getSouthEast()),ae=k.project(j.getSouthWest()),ue=l.ba(-g),fe=$.rotate(ue),pe=G.rotate(ue),ve=H.rotate(ue),we=ae.rotate(ue),Me=new l.P(Math.max(fe.x,pe.x,we.x,ve.x),Math.max(fe.y,pe.y,we.y,ve.y)),me=new l.P(Math.min(fe.x,pe.x,we.x,ve.x),Math.min(fe.y,pe.y,we.y,ve.y)),De=Me.sub(me),ze=(k.width-(D.left+D.right+y.padding.left+y.padding.right))/De.x,We=(k.height-(D.top+D.bottom+y.padding.top+y.padding.bottom))/De.y;if(We<0||ze<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const lt=Math.min(k.scaleZoom(k.scale*Math.min(ze,We)),y.maxZoom),gt=l.P.convert(y.offset),Tt=new l.P((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(l.ba(g)),Ot=gt.add(Tt).mult(k.scale/k.zoomScale(lt));return{center:k.unproject($.add(H).div(2).sub(Ot)),zoom:lt,bearing:g}}fitBounds(i,f,g){return this._fitInternal(this.cameraForBounds(i,f),f,g)}fitScreenCoordinates(i,f,g,y,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(i)),this.transform.pointLocation(l.P.convert(f)),g,y),y,b)}_fitInternal(i,f,g){return i?(delete(f=l.e(i,f)).padding,f.linear?this.easeTo(f,g):this.flyTo(f,g)):this}jumpTo(i,f){this.stop();const g=this._getTransformForUpdate();let y=!1,b=!1,k=!1;return"zoom"in i&&g.zoom!==+i.zoom&&(y=!0,g.zoom=+i.zoom),i.center!==void 0&&(g.center=l.N.convert(i.center)),"bearing"in i&&g.bearing!==+i.bearing&&(b=!0,g.bearing=+i.bearing),"pitch"in i&&g.pitch!==+i.pitch&&(k=!0,g.pitch=+i.pitch),i.padding==null||g.isPaddingEqual(i.padding)||(g.padding=i.padding),this._applyUpdatedTransform(g),this.fire(new l.k("movestart",f)).fire(new l.k("move",f)),y&&this.fire(new l.k("zoomstart",f)).fire(new l.k("zoom",f)).fire(new l.k("zoomend",f)),b&&this.fire(new l.k("rotatestart",f)).fire(new l.k("rotate",f)).fire(new l.k("rotateend",f)),k&&this.fire(new l.k("pitchstart",f)).fire(new l.k("pitch",f)).fire(new l.k("pitchend",f)),this.fire(new l.k("moveend",f))}calculateCameraOptionsFromTo(i,f,g,y=0){const b=l.Z.fromLngLat(i,f),k=l.Z.fromLngLat(g,y),D=k.x-b.x,j=k.y-b.y,$=k.z-b.z,G=Math.hypot(D,j,$);if(G===0)throw new Error("Can't calculate camera options with same From and To");const H=Math.hypot(D,j),ae=this.transform.scaleZoom(this.transform.cameraToCenterDistance/G/this.transform.tileSize),ue=180*Math.atan2(D,-j)/Math.PI;let fe=180*Math.acos(H/G)/Math.PI;return fe=$<0?90-fe:90+fe,{center:k.toLngLat(),zoom:ae,pitch:fe,bearing:ue}}easeTo(i,f){var g;this._stop(!1,i.easeId),((i=l.e({offset:[0,0],duration:500,easing:l.b9},i)).animate===!1||!i.essential&&A.prefersReducedMotion)&&(i.duration=0);const y=this._getTransformForUpdate(),b=y.zoom,k=y.bearing,D=y.pitch,j=y.padding,$="bearing"in i?this._normalizeBearing(i.bearing,k):k,G="pitch"in i?+i.pitch:D,H="padding"in i?i.padding:y.padding,ae=l.P.convert(i.offset);let ue=y.centerPoint.add(ae);const fe=y.pointLocation(ue),{center:pe,zoom:ve}=y.getConstrained(l.N.convert(i.center||fe),(g=i.zoom)!==null&&g!==void 0?g:b);this._normalizeCenter(pe,y);const we=y.project(fe),Me=y.project(pe).sub(we),me=y.zoomScale(ve-b);let De,ze;i.around&&(De=l.N.convert(i.around),ze=y.locationPoint(De));const We={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ve!==b,this._rotating=this._rotating||k!==$,this._pitching=this._pitching||G!==D,this._padding=!y.isPaddingEqual(H),this._easeId=i.easeId,this._prepareEase(f,i.noMoveStart,We),this.terrain&&this._prepareElevation(pe),this._ease((lt=>{if(this._zooming&&(y.zoom=l.y.number(b,ve,lt)),this._rotating&&(y.bearing=l.y.number(k,$,lt)),this._pitching&&(y.pitch=l.y.number(D,G,lt)),this._padding&&(y.interpolatePadding(j,H,lt),ue=y.centerPoint.add(ae)),this.terrain&&!i.freezeElevation&&this._updateElevation(lt),De)y.setLocationAtPoint(De,ze);else{const gt=y.zoomScale(y.zoom-b),Tt=ve>b?Math.min(2,me):Math.max(.5,me),Ot=Math.pow(Tt,1-lt),Pt=y.unproject(we.add(Me.mult(lt*Ot)).mult(gt));y.setLocationAtPoint(y.renderWorldCopies?Pt.wrap():Pt,ue)}this._applyUpdatedTransform(y),this._fireMoveEvents(f)}),(lt=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(f,lt)}),i),this}_prepareEase(i,f,g={}){this._moving=!0,f||g.moving||this.fire(new l.k("movestart",i)),this._zooming&&!g.zooming&&this.fire(new l.k("zoomstart",i)),this._rotating&&!g.rotating&&this.fire(new l.k("rotatestart",i)),this._pitching&&!g.pitching&&this.fire(new l.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const f=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&f!==this._elevationTarget){const g=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(g-(f-(g*i+this._elevationStart))/(1-i)),this._elevationTarget=f}this.transform.elevation=l.y.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(i){const f=i.getCameraPosition(),g=this.terrain.getElevationForLngLatZoom(f.lngLat,i.zoom);if(f.altitude<g){const y=this.calculateCameraOptionsFromTo(f.lngLat,g,i.center,i.elevation);return{pitch:y.pitch,zoom:y.zoom}}return{}}_applyUpdatedTransform(i){const f=[];if(this.terrain&&f.push((y=>this._elevateCameraIfInsideTerrain(y))),this.transformCameraUpdate&&f.push((y=>this.transformCameraUpdate(y))),!f.length)return;const g=i.clone();for(const y of f){const b=g.clone(),{center:k,zoom:D,pitch:j,bearing:$,elevation:G}=y(b);k&&(b.center=k),D!==void 0&&(b.zoom=D),j!==void 0&&(b.pitch=j),$!==void 0&&(b.bearing=$),G!==void 0&&(b.elevation=G),g.apply(b)}this.transform.apply(g)}_fireMoveEvents(i){this.fire(new l.k("move",i)),this._zooming&&this.fire(new l.k("zoom",i)),this._rotating&&this.fire(new l.k("rotate",i)),this._pitching&&this.fire(new l.k("pitch",i))}_afterEase(i,f){if(this._easeId&&f&&this._easeId===f)return;delete this._easeId;const g=this._zooming,y=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new l.k("zoomend",i)),y&&this.fire(new l.k("rotateend",i)),b&&this.fire(new l.k("pitchend",i)),this.fire(new l.k("moveend",i))}flyTo(i,f){var g;if(!i.essential&&A.prefersReducedMotion){const Mt=l.M(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Mt,f)}this.stop(),i=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.b9},i);const y=this._getTransformForUpdate(),b=y.zoom,k=y.bearing,D=y.pitch,j=y.padding,$="bearing"in i?this._normalizeBearing(i.bearing,k):k,G="pitch"in i?+i.pitch:D,H="padding"in i?i.padding:y.padding,ae=l.P.convert(i.offset);let ue=y.centerPoint.add(ae);const fe=y.pointLocation(ue),{center:pe,zoom:ve}=y.getConstrained(l.N.convert(i.center||fe),(g=i.zoom)!==null&&g!==void 0?g:b);this._normalizeCenter(pe,y);const we=y.zoomScale(ve-b),Me=y.project(fe),me=y.project(pe).sub(Me);let De=i.curve;const ze=Math.max(y.width,y.height),We=ze/we,lt=me.mag();if("minZoom"in i){const Mt=l.ac(Math.min(i.minZoom,b,ve),y.minZoom,y.maxZoom),ir=ze/y.zoomScale(Mt-b);De=Math.sqrt(ir/lt*2)}const gt=De*De;function Tt(Mt){const ir=(We*We-ze*ze+(Mt?-1:1)*gt*gt*lt*lt)/(2*(Mt?We:ze)*gt*lt);return Math.log(Math.sqrt(ir*ir+1)-ir)}function Ot(Mt){return(Math.exp(Mt)-Math.exp(-Mt))/2}function Pt(Mt){return(Math.exp(Mt)+Math.exp(-Mt))/2}const xt=Tt(!1);let Vt=function(Mt){return Pt(xt)/Pt(xt+De*Mt)},or=function(Mt){return ze*((Pt(xt)*(Ot(ir=xt+De*Mt)/Pt(ir))-Ot(xt))/gt)/lt;var ir},Et=(Tt(!0)-xt)/De;if(Math.abs(lt)<1e-6||!isFinite(Et)){if(Math.abs(ze-We)<1e-6)return this.easeTo(i,f);const Mt=We<ze?-1:1;Et=Math.abs(Math.log(We/ze))/De,or=()=>0,Vt=ir=>Math.exp(Mt*De*ir)}return i.duration="duration"in i?+i.duration:1e3*Et/("screenSpeed"in i?+i.screenSpeed/De:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=k!==$,this._pitching=G!==D,this._padding=!y.isPaddingEqual(H),this._prepareEase(f,!1),this.terrain&&this._prepareElevation(pe),this._ease((Mt=>{const ir=Mt*Et,Gr=1/Vt(ir);y.zoom=Mt===1?ve:b+y.scaleZoom(Gr),this._rotating&&(y.bearing=l.y.number(k,$,Mt)),this._pitching&&(y.pitch=l.y.number(D,G,Mt)),this._padding&&(y.interpolatePadding(j,H,Mt),ue=y.centerPoint.add(ae)),this.terrain&&!i.freezeElevation&&this._updateElevation(Mt);const dr=Mt===1?pe:y.unproject(Me.add(me.mult(or(ir))).mult(Gr));y.setLocationAtPoint(y.renderWorldCopies?dr.wrap():dr,ue),this._applyUpdatedTransform(y),this._fireMoveEvents(f)}),(()=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(f)}),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,f){var g;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,f)}return i||(g=this.handlers)===null||g===void 0||g.stop(!1),this}_ease(i,f,g){g.animate===!1||g.duration===0?(i(1),f()):(this._easeStart=A.now(),this._easeOptions=g,this._onEaseFrame=i,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,f){i=l.b3(i,-180,180);const g=Math.abs(i-f);return Math.abs(i-360-f)<g&&(i-=360),Math.abs(i+360-f)<g&&(i+=360),i}_normalizeCenter(i,f){if(!f.renderWorldCopies||f.lngRange)return;const g=i.lng-f.center.lng;i.lng+=g>180?-360:g<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(l.N.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}const Ei={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class vo{constructor(i=Ei){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=f=>{!f||f.sourceDataType!=="metadata"&&f.sourceDataType!=="visibility"&&f.dataType!=="style"&&f.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=M.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=M.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=M.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){M.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,f){const g=this._map._getUIString(`AttributionControl.${f}`);i.title=g,i.setAttribute("aria-label",g)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map((y=>typeof y!="string"?"":y))):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const f=this._map.style.sourceCaches;for(const y in f){const b=f[y];if(b.used||b.usedForTerrain){const k=b.getSource();k.attribution&&i.indexOf(k.attribution)<0&&i.push(k.attribution)}}i=i.filter((y=>String(y).trim())),i.sort(((y,b)=>y.length-b.length)),i=i.filter(((y,b)=>{for(let k=b+1;k<i.length;k++)if(i[k].indexOf(y)>=0)return!1;return!0}));const g=i.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,i.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ya{constructor(i={}){this._updateCompact=()=>{const f=this._container.children;if(f.length){const g=f[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&g.classList.add("maplibregl-compact"):g.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=M.create("div","maplibregl-ctrl");const f=M.create("a","maplibregl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://maplibre.org/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){M.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Pr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const f=++this._id;return this._queue.push({callback:i,id:f,cancelled:!1}),f}remove(i){const f=this._currentlyRunning,g=f?this._queue.concat(f):this._queue;for(const y of g)if(y.id===i)return void(y.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const f=this._currentlyRunning=this._queue;this._queue=[];for(const g of f)if(!g.cancelled&&(g.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var jh=l.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Jp extends l.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,f){this.sourceCache.update(i,f),this._renderableTilesKeys=[];const g={};for(const y of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:f}))g[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.posMatrix=new Float64Array(16),l.aP(y.posMatrix,0,l.X,0,l.X,0,1),this._tiles[y.key]=new ho(y,this.tileSize));for(const y in this._tiles)g[y]||delete this._tiles[y]}freeRtt(i){for(const f in this._tiles){const g=this._tiles[f];(!i||g.tileID.equals(i)||g.tileID.isChildOf(i)||i.isChildOf(g.tileID))&&(g.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((i=>this.getTileByID(i)))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const f={};for(const g of this._renderableTilesKeys){const y=this._tiles[g].tileID;if(y.canonical.equals(i.canonical)){const b=i.clone();b.posMatrix=new Float64Array(16),l.aP(b.posMatrix,0,l.X,0,l.X,0,1),f[g]=b}else if(y.canonical.isChildOf(i.canonical)){const b=i.clone();b.posMatrix=new Float64Array(16);const k=y.canonical.z-i.canonical.z,D=y.canonical.x-(y.canonical.x>>k<<k),j=y.canonical.y-(y.canonical.y>>k<<k),$=l.X>>k;l.aP(b.posMatrix,0,$,0,$,0,1),l.J(b.posMatrix,b.posMatrix,[-D*$,-j*$,0]),f[g]=b}else if(i.canonical.isChildOf(y.canonical)){const b=i.clone();b.posMatrix=new Float64Array(16);const k=i.canonical.z-y.canonical.z,D=i.canonical.x-(i.canonical.x>>k<<k),j=i.canonical.y-(i.canonical.y>>k<<k),$=l.X>>k;l.aP(b.posMatrix,0,l.X,0,l.X,0,1),l.J(b.posMatrix,b.posMatrix,[D*$,j*$,0]),l.K(b.posMatrix,b.posMatrix,[1/2**k,1/2**k,0]),f[g]=b}}return f}getSourceTile(i,f){const g=this.sourceCache._source;let y=i.overscaledZ-this.deltaZoom;if(y>g.maxzoom&&(y=g.maxzoom),y<g.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(y).key);let b=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!b||!b.dem)&&f)for(;y>=g.minzoom&&(!b||!b.dem);)b=this.sourceCache.getTileByID(i.scaledTo(y--).key);return b}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter((f=>f.timeAdded>=i))}}class Uo{constructor(i,f,g){this.painter=i,this.sourceCache=new Jp(f),this.options=g,this.exaggeration=typeof g.exaggeration=="number"?g.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,f,g,y=l.X){var b;if(!(f>=0&&f<y&&g>=0&&g<y))return 0;const k=this.getTerrainData(i),D=(b=k.tile)===null||b===void 0?void 0:b.dem;if(!D)return 0;const j=(function(fe,pe,ve){var we=pe[0],Me=pe[1];return fe[0]=ve[0]*we+ve[4]*Me+ve[12],fe[1]=ve[1]*we+ve[5]*Me+ve[13],fe})([],[f/y*l.X,g/y*l.X],k.u_terrain_matrix),$=[j[0]*D.dim,j[1]*D.dim],G=Math.floor($[0]),H=Math.floor($[1]),ae=$[0]-G,ue=$[1]-H;return D.get(G,H)*(1-ae)*(1-ue)+D.get(G+1,H)*ae*(1-ue)+D.get(G,H+1)*(1-ae)*ue+D.get(G+1,H+1)*ae*ue}getElevationForLngLatZoom(i,f){if(!l.bb(f,i.wrap()))return 0;const{tileID:g,mercatorX:y,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(i,f);return this.getElevation(g,y%l.X,b%l.X,l.X)}getElevation(i,f,g,y=l.X){return this.getDEMElevation(i,f,g,y)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const y=this.painter.context,b=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new be(y,b,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new be(y,new l.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.an([])}const f=this.sourceCache.getSourceTile(i,!0);if(f&&f.dem&&(!f.demTexture||f.needsTerrainPrepare)){const y=this.painter.context;f.demTexture=this.painter.getTileTexture(f.dem.stride),f.demTexture?f.demTexture.update(f.dem.getPixels(),{premultiply:!1}):f.demTexture=new be(y,f.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),f.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),f.needsTerrainPrepare=!1}const g=f&&f+f.tileID.key+i.key;if(g&&!this._demMatrixCache[g]){const y=this.sourceCache.sourceCache._source.maxzoom;let b=i.canonical.z-f.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=y?b=i.canonical.z-y:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const k=i.canonical.x-(i.canonical.x>>b<<b),D=i.canonical.y-(i.canonical.y>>b<<b),j=l.bc(new Float64Array(16),[1/(l.X<<b),1/(l.X<<b),0]);l.J(j,j,[k*l.X,D*l.X,0]),this._demMatrixCache[i.key]={matrix:j,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:f&&f.dem&&f.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:f&&f.dem&&f.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(f&&f.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:f}}getFramebuffer(i){const f=this.painter,g=f.width/devicePixelRatio,y=f.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new be(f.context,{width:g,height:y,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new be(f.context,{width:g,height:y,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=f.context.createFramebuffer(g,y,!0,!1),this._fbo.depthAttachment.set(f.context.createRenderbuffer(f.context.gl.DEPTH_COMPONENT16,g,y))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const f=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,k=0;b<this._coordsTextureSize;b++)for(let D=0;D<this._coordsTextureSize;D++,k+=4)f[k+0]=255&D,f[k+1]=255&b,f[k+2]=D>>8<<4|b>>8,f[k+3]=0;const g=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(f.buffer)),y=new be(i,g,i.gl.RGBA,{premultiply:!1});return y.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);const f=new Uint8Array(4),g=this.painter.context,y=g.gl,b=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),k=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),D=Math.round(this.painter.height/devicePixelRatio);g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(b,D-k-1,1,1,y.RGBA,y.UNSIGNED_BYTE,f),g.bindFramebuffer.set(null);const j=f[0]+(f[2]>>4<<8),$=f[1]+((15&f[2])<<8),G=this.coordsIndex[255-f[3]],H=G&&this.sourceCache.getTileByID(G);if(!H)return null;const ae=this._coordsTextureSize,ue=(1<<H.tileID.canonical.z)*ae;return new l.Z((H.tileID.canonical.x*ae+j)/ue+H.tileID.wrap,(H.tileID.canonical.y*ae+$)/ue,this.getElevation(H.tileID,j,$,ae))}depthAtPoint(i){const f=new Uint8Array(4),g=this.painter.context,y=g.gl;return g.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,f),g.bindFramebuffer.set(null),(f[0]/16777216+f[1]/65536+f[2]/256+f[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,f=new l.bd,g=new l.aY,y=this.meshSize,b=l.X/y,k=y*y;for(let H=0;H<=y;H++)for(let ae=0;ae<=y;ae++)f.emplaceBack(ae*b,H*b,0);for(let H=0;H<k;H+=y+1)for(let ae=0;ae<y;ae++)g.emplaceBack(ae+H,y+ae+H+1,y+ae+H+2),g.emplaceBack(ae+H,y+ae+H+2,ae+H+1);const D=f.length,j=D+2*(y+1);for(const H of[0,1])for(let ae=0;ae<=y;ae++)for(const ue of[0,1])f.emplaceBack(ae*b,H*l.X,ue);for(let H=0;H<2*y;H+=2)g.emplaceBack(j+H,j+H+1,j+H+3),g.emplaceBack(j+H,j+H+3,j+H+2),g.emplaceBack(D+H,D+H+3,D+H+1),g.emplaceBack(D+H,D+H+2,D+H+3);const $=f.length,G=$+2*(y+1);for(const H of[0,1])for(let ae=0;ae<=y;ae++)for(const ue of[0,1])f.emplaceBack(H*l.X,ae*b,ue);for(let H=0;H<2*y;H+=2)g.emplaceBack($+H,$+H+1,$+H+3),g.emplaceBack($+H,$+H+3,$+H+2),g.emplaceBack(G+H,G+H+3,G+H+1),g.emplaceBack(G+H,G+H+2,G+H+3);return this._mesh=new $i(i.createVertexBuffer(f,jh.members),i.createIndexBuffer(g),l.a0.simpleSegment(0,0,f.length,g.length)),this._mesh}getMeshFrameDelta(i){return 2*Math.PI*l.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,f){var g;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(i,f);return(g=this.getMinMaxElevation(y).minElevation)!==null&&g!==void 0?g:0}getMinMaxElevation(i){const f=this.getTerrainData(i).tile,g={minElevation:null,maxElevation:null};return f&&f.dem&&(g.minElevation=f.dem.min*this.exaggeration,g.maxElevation=f.dem.max*this.exaggeration),g}_getOverscaledTileIDFromLngLatZoom(i,f){const g=l.Z.fromLngLat(i.wrap()),y=(1<<f)*l.X,b=g.x*y,k=g.y*y,D=Math.floor(b/l.X),j=Math.floor(k/l.X);return{tileID:new l.S(f,0,f,D,j),mercatorX:b,mercatorY:k}}}class Ou{constructor(i,f,g){this._context=i,this._size=f,this._tileSize=g,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const f=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),g=new be(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return g.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),f.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),f.colorAttachment.set(g.texture),{id:i,fbo:f,texture:g,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((f=>i.id!==f)),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const f of this._recentlyUsed)if(!this._objects[f].inUse)return this._objects[f];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((i=>!i.inUse))===!1}}const Ja={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Du{constructor(i,f){this.painter=i,this.terrain=f,this.pool=new Ou(i.context,30,f.sourceCache.tileSize*f.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,f){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter((g=>!i._layers[g].isHidden(f))),this._coordsDescendingInv={};for(const g in i.sourceCaches){this._coordsDescendingInv[g]={};const y=i.sourceCaches[g].getVisibleCoordinates();for(const b of y){const k=this.terrain.sourceCache.getTerrainCoords(b);for(const D in k)this._coordsDescendingInv[g][D]||(this._coordsDescendingInv[g][D]=[]),this._coordsDescendingInv[g][D].push(k[D])}}this._coordsDescendingInvStr={};for(const g of i._order){const y=i._layers[g],b=y.source;if(Ja[y.type]&&!this._coordsDescendingInvStr[b]){this._coordsDescendingInvStr[b]={};for(const k in this._coordsDescendingInv[b])this._coordsDescendingInvStr[b][k]=this._coordsDescendingInv[b][k].map((D=>D.key)).sort().join()}}for(const g of this._renderableTiles)for(const y in this._coordsDescendingInvStr){const b=this._coordsDescendingInvStr[y][g.tileID.key];b&&b!==g.rttCoords[y]&&(g.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const f=i.type,g=this.painter,y=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(Ja[f]&&(this._prevType&&Ja[this._prevType]||this._stacks.push([]),this._prevType=f,this._stacks[this._stacks.length-1].push(i.id),!y))return!0;if(Ja[this._prevType]||Ja[f]&&y){this._prevType=f;const b=this._stacks.length-1,k=this._stacks[b]||[];for(const D of this._renderableTiles){if(this.pool.isFull()&&(od(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(D),D.rtt[b]){const $=this.pool.getObjectForId(D.rtt[b].id);if($.stamp===D.rtt[b].stamp){this.pool.useObject($);continue}}const j=this.pool.getOrCreateFreeObject();this.pool.useObject(j),this.pool.stampObject(j),D.rtt[b]={id:j.id,stamp:j.stamp},g.context.bindFramebuffer.set(j.fbo.framebuffer),g.context.clear({color:l.aM.transparent,stencil:0}),g.currentStencilSource=void 0;for(let $=0;$<k.length;$++){const G=g.style._layers[k[$]],H=G.source?this._coordsDescendingInv[G.source][D.tileID.key]:[D.tileID];g.context.viewport.set([0,0,j.fbo.width,j.fbo.height]),g._renderTileClippingMasks(G,H),g.renderLayer(g,g.style.sourceCaches[G.source],G,H),G.source&&(D.rttCoords[G.source]=this._coordsDescendingInvStr[G.source][D.tileID.key])}}return od(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ja[f]}return!1}}const Ru={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},il=_,xs={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Ei,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},rn=S=>{S.touchstart=S.dragStart,S.touchmoveWindow=S.dragMove,S.touchend=S.dragEnd},on={showCompass:!0,showZoom:!0,visualizePitch:!1};class bs{constructor(i,f,g=!1){this.mousedown=k=>{this.startMouse(l.e({},k,{ctrlKey:!0,preventDefault:()=>k.preventDefault()}),M.mousePos(this.element,k)),M.addEventListener(window,"mousemove",this.mousemove),M.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=k=>{this.moveMouse(k,M.mousePos(this.element,k))},this.mouseup=k=>{this.mouseRotate.dragEnd(k),this.mousePitch&&this.mousePitch.dragEnd(k),this.offTemp()},this.touchstart=k=>{k.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=M.touchPos(this.element,k.targetTouches)[0],this.startTouch(k,this._startPos),M.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.addEventListener(window,"touchend",this.touchend))},this.touchmove=k=>{k.targetTouches.length!==1?this.reset():(this._lastPos=M.touchPos(this.element,k.targetTouches)[0],this.moveTouch(k,this._lastPos))},this.touchend=k=>{k.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const y=i.dragRotate._mouseRotate.getClickTolerance(),b=i.dragRotate._mousePitch.getClickTolerance();this.element=f,this.mouseRotate=kc({clickTolerance:y,enable:!0}),this.touchRotate=(({enable:k,clickTolerance:D,bearingDegreesPerPixelMoved:j=.8})=>{const $=new Oh;return new No({clickTolerance:D,move:(G,H)=>({bearingDelta:(H.x-G.x)*j}),moveStateManager:$,enable:k,assignEvents:rn})})({clickTolerance:y,enable:!0}),this.map=i,g&&(this.mousePitch=tn({clickTolerance:b,enable:!0}),this.touchPitch=(({enable:k,clickTolerance:D,pitchDegreesPerPixelMoved:j=-.5})=>{const $=new Oh;return new No({clickTolerance:D,move:(G,H)=>({pitchDelta:(H.y-G.y)*j}),moveStateManager:$,enable:k,assignEvents:rn})})({clickTolerance:b,enable:!0})),M.addEventListener(f,"mousedown",this.mousedown),M.addEventListener(f,"touchstart",this.touchstart,{passive:!1}),M.addEventListener(f,"touchcancel",this.reset)}startMouse(i,f){this.mouseRotate.dragStart(i,f),this.mousePitch&&this.mousePitch.dragStart(i,f),M.disableDrag()}startTouch(i,f){this.touchRotate.dragStart(i,f),this.touchPitch&&this.touchPitch.dragStart(i,f),M.disableDrag()}moveMouse(i,f){const g=this.map,{bearingDelta:y}=this.mouseRotate.dragMove(i,f)||{};if(y&&g.setBearing(g.getBearing()+y),this.mousePitch){const{pitchDelta:b}=this.mousePitch.dragMove(i,f)||{};b&&g.setPitch(g.getPitch()+b)}}moveTouch(i,f){const g=this.map,{bearingDelta:y}=this.touchRotate.dragMove(i,f)||{};if(y&&g.setBearing(g.getBearing()+y),this.touchPitch){const{pitchDelta:b}=this.touchPitch.dragMove(i,f)||{};b&&g.setPitch(g.getPitch()+b)}}off(){const i=this.element;M.removeEventListener(i,"mousedown",this.mousedown),M.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),M.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.removeEventListener(window,"touchend",this.touchend),M.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){M.enableDrag(),M.removeEventListener(window,"mousemove",this.mousemove),M.removeEventListener(window,"mouseup",this.mouseup),M.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.removeEventListener(window,"touchend",this.touchend)}}let Kr;function Ar(S,i,f){const g=new l.N(S.lng,S.lat);if(S=new l.N(S.lng,S.lat),i){const y=new l.N(S.lng-360,S.lat),b=new l.N(S.lng+360,S.lat),k=f.locationPoint(S).distSqr(i);f.locationPoint(y).distSqr(i)<k?S=y:f.locationPoint(b).distSqr(i)<k&&(S=b)}for(;Math.abs(S.lng-f.center.lng)>180;){const y=f.locationPoint(S);if(y.x>=0&&y.y>=0&&y.x<=f.width&&y.y<=f.height)break;S.lng>f.center.lng?S.lng-=360:S.lng+=360}return S.lng!==g.lng&&f.locationPoint(S).y>f.height/2-f.getHorizon()?S:g}const Aa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function qo(S,i,f){const g=S.classList;for(const y in Aa)g.remove(`maplibregl-${f}-anchor-${y}`);g.add(`maplibregl-${f}-anchor-${i}`)}class oi extends l.E{constructor(i){if(super(),this._onKeyPress=f=>{const g=f.code,y=f.charCode||f.keyCode;g!=="Space"&&g!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=f=>{const g=f.originalEvent.target,y=this._element;this._popup&&(g===y||y.contains(g))&&this.togglePopup()},this._update=f=>{var g;if(!this._map)return;const y=this._map.loaded()&&!this._map.isMoving();((f==null?void 0:f.type)==="terrain"||(f==null?void 0:f.type)==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Ar(this._lngLat,this._flatPos,this._map.transform):(g=this._lngLat)===null||g===void 0?void 0:g.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let b="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?b=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(b=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let k="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?k="rotateX(0deg)":this._pitchAlignment==="map"&&(k=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||f&&f.type!=="moveend"||(this._pos=this._pos.round()),M.setTransform(this._element,`${Aa[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${k} ${b}`),A.frameAsync(new AbortController).then((()=>{this._updateOpacity(f&&f.type==="moveend")})).catch((()=>{}))},this._onMove=f=>{if(!this._isDragging){const g=this._clickTolerance||this._map._clickTolerance;this._isDragging=f.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=f.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=f=>{this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(this._pos).add(this._offset),this._pointerdownPos=f.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._subpixelPositioning=i&&i.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(i==null?void 0:i.opacity,i==null?void 0:i.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=l.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=M.create("div");const f=M.createNS("http://www.w3.org/2000/svg","svg"),g=41,y=27;f.setAttributeNS(null,"display","block"),f.setAttributeNS(null,"height",`${g}px`),f.setAttributeNS(null,"width",`${y}px`),f.setAttributeNS(null,"viewBox",`0 0 ${y} ${g}`);const b=M.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const k=M.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");const D=M.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"transform","translate(3.0, 29.0)"),D.setAttributeNS(null,"fill","#000000");const j=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const we of j){const Me=M.createNS("http://www.w3.org/2000/svg","ellipse");Me.setAttributeNS(null,"opacity","0.04"),Me.setAttributeNS(null,"cx","10.5"),Me.setAttributeNS(null,"cy","5.80029008"),Me.setAttributeNS(null,"rx",we.rx),Me.setAttributeNS(null,"ry",we.ry),D.appendChild(Me)}const $=M.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"fill",this._color);const G=M.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),$.appendChild(G);const H=M.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"opacity","0.25"),H.setAttributeNS(null,"fill","#000000");const ae=M.createNS("http://www.w3.org/2000/svg","path");ae.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),H.appendChild(ae);const ue=M.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ue.setAttributeNS(null,"fill","#FFFFFF");const fe=M.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pe=M.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#000000"),pe.setAttributeNS(null,"opacity","0.25"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962");const ve=M.createNS("http://www.w3.org/2000/svg","circle");ve.setAttributeNS(null,"fill","#FFFFFF"),ve.setAttributeNS(null,"cx","5.5"),ve.setAttributeNS(null,"cy","5.5"),ve.setAttributeNS(null,"r","5.4999962"),fe.appendChild(pe),fe.appendChild(ve),k.appendChild(D),k.appendChild($),k.appendChild(H),k.appendChild(ue),k.appendChild(fe),f.appendChild(k),f.setAttributeNS(null,"height",g*this._scale+"px"),f.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(f),this._offset=l.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(f=>{f.preventDefault()})),this._element.addEventListener("mousedown",(f=>{f.preventDefault()})),qo(this._element,this._anchor,"marker"),i&&i.className)for(const f of i.className.split(" "))this._element.classList.add(f);this._popup=null}addTo(i){return this.remove(),this._map=i,this._element.setAttribute("aria-label",i._getUIString("Marker.Title")),i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),M.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=l.N.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const y=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(i){return this._subpixelPositioning=i,this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var f,g;if(!(!((f=this._map)===null||f===void 0)&&f.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const y=this._map,b=y.terrain.depthAtPoint(this._pos),k=y.terrain.getElevationForLngLatZoom(this._lngLat,y.transform.tileZoom);if(y.transform.lngLatToCameraDepth(this._lngLat,k)-b<.006)return void(this._element.style.opacity=this._opacity);const D=-this._offset.y/y.transform._pixelPerMeter,j=Math.sin(y.getPitch()*Math.PI/180)*D,$=y.terrain.depthAtPoint(new l.P(this._pos.x,this._pos.y-this._offset.y)),G=y.transform.lngLatToCameraDepth(this._lngLat,k+j)-$>.006;!((g=this._popup)===null||g===void 0)&&g.isOpen()&&G&&this._popup.remove(),this._element.style.opacity=G?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=l.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,f){return i===void 0&&f===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),f!==void 0&&(this._opacityWhenCovered=f),this._map&&this._updateOpacity(!0),this}}const ju={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Bl=0,Fl=!1;const sa={maxWidth:100,unit:"metric"};function $l(S,i,f){const g=f&&f.maxWidth||100,y=S._container.clientHeight/2,b=S.unproject([0,y]),k=S.unproject([g,y]),D=b.distanceTo(k);if(f&&f.unit==="imperial"){const j=3.2808*D;j>5280?Nt(i,g,j/5280,S._getUIString("ScaleControl.Miles")):Nt(i,g,j,S._getUIString("ScaleControl.Feet"))}else f&&f.unit==="nautical"?Nt(i,g,D/1852,S._getUIString("ScaleControl.NauticalMiles")):D>=1e3?Nt(i,g,D/1e3,S._getUIString("ScaleControl.Kilometers")):Nt(i,g,D,S._getUIString("ScaleControl.Meters"))}function Nt(S,i,f,g){const y=(function(b){const k=Math.pow(10,`${Math.floor(b)}`.length-1);let D=b/k;return D=D>=10?10:D>=5?5:D>=3?3:D>=2?2:D>=1?1:(function(j){const $=Math.pow(10,Math.ceil(-Math.log(j)/Math.LN10));return Math.round(j*$)/$})(D),k*D})(f);S.style.width=i*(y/f)+"px",S.innerHTML=`${y}&nbsp;${g}`}const Qt={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Vl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function zu(S){if(S){if(typeof S=="number"){const i=Math.round(Math.abs(S)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,S),"top-left":new l.P(i,i),"top-right":new l.P(-i,i),bottom:new l.P(0,-S),"bottom-left":new l.P(i,-i),"bottom-right":new l.P(-i,-i),left:new l.P(S,0),right:new l.P(-S,0)}}if(S instanceof l.P||Array.isArray(S)){const i=l.P.convert(S);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:l.P.convert(S.center||[0,0]),top:l.P.convert(S.top||[0,0]),"top-left":l.P.convert(S["top-left"]||[0,0]),"top-right":l.P.convert(S["top-right"]||[0,0]),bottom:l.P.convert(S.bottom||[0,0]),"bottom-left":l.P.convert(S["bottom-left"]||[0,0]),"bottom-right":l.P.convert(S["bottom-right"]||[0,0]),left:l.P.convert(S.left||[0,0]),right:l.P.convert(S.right||[0,0])}}return zu(new l.P(0,0))}const zh=_;h.AJAXError=l.bh,h.Evented=l.E,h.LngLat=l.N,h.MercatorCoordinate=l.Z,h.Point=l.P,h.addProtocol=l.bi,h.config=l.a,h.removeProtocol=l.bj,h.AttributionControl=vo,h.BoxZoomHandler=Vi,h.CanvasSource=Kn,h.CooperativeGesturesHandler=Nl,h.DoubleClickZoomHandler=Vo,h.DragPanHandler=Dc,h.DragRotateHandler=ld,h.EdgeInsets=Qs,h.FullscreenControl=class extends l.E{constructor(S={}){super(),this._onFullscreenChange=()=>{var i;let f=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=f==null?void 0:f.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)f=f.shadowRoot.fullscreenElement;f===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,S&&S.container&&(S.container instanceof HTMLElement?this._container=S.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(S){return this._map=S,this._container||(this._container=this._map.getContainer()),this._controlContainer=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){M.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const S=this._fullscreenButton=M.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);M.create("span","maplibregl-ctrl-icon",S).setAttribute("aria-hidden","true"),S.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const S=this._getTitle();this._fullscreenButton.setAttribute("aria-label",S),this._fullscreenButton.title=S}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},h.GeoJSONSource=Ln,h.GeolocateControl=class extends l.E{constructor(S){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const f=new l.N(i.coords.longitude,i.coords.latitude),g=i.coords.accuracy,y=this._map.getBearing(),b=l.e({bearing:y},this.options.fitBoundsOptions),k=$e.fromLngLat(f,g);this._map.fitBounds(k,b,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const f=new l.N(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(f).addTo(this._map),this._userLocationDotMarker.setLngLat(f).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&Fl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(i=>i.preventDefault())),this._geolocateButton=M.create("button","maplibregl-ctrl-geolocate",this._container),M.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=i=>{if(this._map){if(i===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}else{const f=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=M.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new oi({element:this._dotElement}),this._circleElement=M.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new oi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(f=>{f.geolocateSource||this._watchState!=="ACTIVE_LOCK"||f.originalEvent&&f.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")),this.fire(new l.k("userlocationlostfocus")))}))}},this.options=l.e({},ju,S)}onAdd(S){return this._map=S,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return l._(this,arguments,void 0,(function*(i=!1){if(Kr!==void 0&&!i)return Kr;if(window.navigator.permissions===void 0)return Kr=!!window.navigator.geolocation,Kr;try{Kr=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Kr=!!window.navigator.geolocation}return Kr}))})().then((i=>this._finishSetupUI(i))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),M.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Bl=0,Fl=!1}_isOutOfMapMaxBounds(S){const i=this._map.getMaxBounds(),f=S.coords;return i&&(f.longitude<i.getWest()||f.longitude>i.getEast()||f.latitude<i.getSouth()||f.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const S=this._map.getBounds(),i=S.getSouthEast(),f=S.getNorthEast(),g=i.distanceTo(f),y=Math.ceil(this._accuracy/(g/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Bl--,Fl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart")),this.fire(new l.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let S;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Bl++,Bl>1?(S={maximumAge:6e5,timeout:0},Fl=!0):(S=this.options.positionOptions,Fl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,S)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},h.Hash=Mc,h.ImageSource=di,h.KeyboardHandler=Ta,h.LngLatBounds=$e,h.LogoControl=Ya,h.Map=class extends nl{constructor(S){l.bf.mark(l.bg.create);const i=Object.assign(Object.assign({},xs),S);if(i.minZoom!=null&&i.maxZoom!=null&&i.minZoom>i.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(i.minPitch!=null&&i.maxPitch!=null&&i.minPitch>i.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(i.minPitch!=null&&i.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(i.maxPitch!=null&&i.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ys(i.minZoom,i.maxZoom,i.minPitch,i.maxPitch,i.renderWorldCopies),{bearingSnap:i.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Pr,this._controls=[],this._mapId=l.a4(),this._contextLost=f=>{f.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new l.k("webglcontextlost",{originalEvent:f}))},this._contextRestored=f=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:f}))},this._onMapScroll=f=>{if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=i.interactive,this._maxTileCacheSize=i.maxTileCacheSize,this._maxTileCacheZoomLevels=i.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=i.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=i.preserveDrawingBuffer===!0,this._antialias=i.antialias===!0,this._trackResize=i.trackResize===!0,this._bearingSnap=i.bearingSnap,this._refreshExpiredTiles=i.refreshExpiredTiles===!0,this._fadeDuration=i.fadeDuration,this._crossSourceCollisions=i.crossSourceCollisions===!0,this._collectResourceTiming=i.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ru),i.locale),this._clickTolerance=i.clickTolerance,this._overridePixelRatio=i.pixelRatio,this._maxCanvasSize=i.maxCanvasSize,this.transformCameraUpdate=i.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=i.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=J.addThrottleControl((()=>this.isMoving())),this._requestManager=new ie(i.transformRequest),typeof i.container=="string"){if(this._container=document.getElementById(i.container),!this._container)throw new Error(`Container '${i.container}' not found.`)}else{if(!(i.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=i.container}if(i.maxBounds&&this.setMaxBounds(i.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))).on("moveend",(()=>this._update(!1))).on("zoom",(()=>this._update(!0))).on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})).once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let f=!1;const g=Au((y=>{this._trackResize&&!this._removed&&(this.resize(y),this.redraw())}),50);this._resizeObserver=new ResizeObserver((y=>{f?g(y):f=!0})),this._resizeObserver.observe(this._container)}this.handlers=new jc(this,i),this._hash=i.hash&&new Mc(typeof i.hash=="string"&&i.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:i.center,zoom:i.zoom,bearing:i.bearing,pitch:i.pitch}),i.bounds&&(this.resize(),this.fitBounds(i.bounds,l.e({},i.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=i.localIdeographFontFamily,this._validateStyle=i.validateStyle,i.style&&this.setStyle(i.style,{localIdeographFontFamily:i.localIdeographFontFamily}),i.attributionControl&&this.addControl(new vo(typeof i.attributionControl=="boolean"?void 0:i.attributionControl)),i.maplibreLogo&&this.addControl(new Ya,i.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(f=>{this._update(f.dataType==="style"),this.fire(new l.k(`${f.dataType}data`,f))})),this.on("dataloading",(f=>{this.fire(new l.k(`${f.dataType}dataloading`,f))})),this.on("dataabort",(f=>{this.fire(new l.k("sourcedataabort",f))}))}_getMapId(){return this._mapId}addControl(S,i){if(i===void 0&&(i=S.getDefaultPosition?S.getDefaultPosition():"top-right"),!S||!S.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=S.onAdd(this);this._controls.push(S);const g=this._controlPositions[i];return i.indexOf("bottom")!==-1?g.insertBefore(f,g.firstChild):g.appendChild(f),this}removeControl(S){if(!S||!S.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(S);return i>-1&&this._controls.splice(i,1),S.onRemove(this),this}hasControl(S){return this._controls.indexOf(S)>-1}calculateCameraOptionsFromTo(S,i,f,g){return g==null&&this.terrain&&(g=this.terrain.getElevationForLngLatZoom(f,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(S,i,f,g)}resize(S){var i;const f=this._containerDimensions(),g=f[0],y=f[1],b=this._getClampedPixelRatio(g,y);if(this._resizeCanvas(g,y,b),this.painter.resize(g,y,b),this.painter.overLimit()){const D=this.painter.context.gl;this._maxCanvasSize=[D.drawingBufferWidth,D.drawingBufferHeight];const j=this._getClampedPixelRatio(g,y);this._resizeCanvas(g,y,j),this.painter.resize(g,y,j)}this.transform.resize(g,y),(i=this._requestedCameraState)===null||i===void 0||i.resize(g,y);const k=!this._moving;return k&&(this.stop(),this.fire(new l.k("movestart",S)).fire(new l.k("move",S))),this.fire(new l.k("resize",S)),k&&this.fire(new l.k("moveend",S)),this}_getClampedPixelRatio(S,i){const{0:f,1:g}=this._maxCanvasSize,y=this.getPixelRatio(),b=S*y,k=i*y;return Math.min(b>f?f/b:1,k>g?g/k:1)*y}getPixelRatio(){var S;return(S=this._overridePixelRatio)!==null&&S!==void 0?S:devicePixelRatio}setPixelRatio(S){this._overridePixelRatio=S,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(S){return this.transform.setMaxBounds($e.convert(S)),this._update()}setMinZoom(S){if((S=S??-2)>=-2&&S<=this.transform.maxZoom)return this.transform.minZoom=S,this._update(),this.getZoom()<S&&this.setZoom(S),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(S){if((S=S??22)>=this.transform.minZoom)return this.transform.maxZoom=S,this._update(),this.getZoom()>S&&this.setZoom(S),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(S){if((S=S??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(S>=0&&S<=this.transform.maxPitch)return this.transform.minPitch=S,this._update(),this.getPitch()<S&&this.setPitch(S),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(S){if((S=S??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(S>=this.transform.minPitch)return this.transform.maxPitch=S,this._update(),this.getPitch()>S&&this.setPitch(S),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(S){return this.transform.renderWorldCopies=S,this._update()}project(S){return this.transform.locationPoint(l.N.convert(S),this.style&&this.terrain)}unproject(S){return this.transform.pointLocation(l.P.convert(S),this.terrain)}isMoving(){var S;return this._moving||((S=this.handlers)===null||S===void 0?void 0:S.isMoving())}isZooming(){var S;return this._zooming||((S=this.handlers)===null||S===void 0?void 0:S.isZooming())}isRotating(){var S;return this._rotating||((S=this.handlers)===null||S===void 0?void 0:S.isRotating())}_createDelegatedListener(S,i,f){if(S==="mouseenter"||S==="mouseover"){let g=!1;return{layers:i,listener:f,delegates:{mousemove:b=>{const k=i.filter((j=>this.getLayer(j))),D=k.length!==0?this.queryRenderedFeatures(b.point,{layers:k}):[];D.length?g||(g=!0,f.call(this,new ai(S,this,b.originalEvent,{features:D}))):g=!1},mouseout:()=>{g=!1}}}}if(S==="mouseleave"||S==="mouseout"){let g=!1;return{layers:i,listener:f,delegates:{mousemove:k=>{const D=i.filter((j=>this.getLayer(j)));(D.length!==0?this.queryRenderedFeatures(k.point,{layers:D}):[]).length?g=!0:g&&(g=!1,f.call(this,new ai(S,this,k.originalEvent)))},mouseout:k=>{g&&(g=!1,f.call(this,new ai(S,this,k.originalEvent)))}}}}{const g=y=>{const b=i.filter((D=>this.getLayer(D))),k=b.length!==0?this.queryRenderedFeatures(y.point,{layers:b}):[];k.length&&(y.features=k,f.call(this,y),delete y.features)};return{layers:i,listener:f,delegates:{[S]:g}}}}_saveDelegatedListener(S,i){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[S]=this._delegatedListeners[S]||[],this._delegatedListeners[S].push(i)}_removeDelegatedListener(S,i,f){if(!this._delegatedListeners||!this._delegatedListeners[S])return;const g=this._delegatedListeners[S];for(let y=0;y<g.length;y++){const b=g[y];if(b.listener===f&&b.layers.length===i.length&&b.layers.every((k=>i.includes(k)))){for(const k in b.delegates)this.off(k,b.delegates[k]);return void g.splice(y,1)}}}on(S,i,f){if(f===void 0)return super.on(S,i);const g=this._createDelegatedListener(S,typeof i=="string"?[i]:i,f);this._saveDelegatedListener(S,g);for(const y in g.delegates)this.on(y,g.delegates[y]);return this}once(S,i,f){if(f===void 0)return super.once(S,i);const g=typeof i=="string"?[i]:i,y=this._createDelegatedListener(S,g,f);for(const b in y.delegates){const k=y.delegates[b];y.delegates[b]=(...D)=>{this._removeDelegatedListener(S,g,f),k(...D)}}this._saveDelegatedListener(S,y);for(const b in y.delegates)this.once(b,y.delegates[b]);return this}off(S,i,f){return f===void 0?super.off(S,i):(this._removeDelegatedListener(S,typeof i=="string"?[i]:i,f),this)}queryRenderedFeatures(S,i){if(!this.style)return[];let f;const g=S instanceof l.P||Array.isArray(S),y=g?S:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(g?{}:S)||{},y instanceof l.P||typeof y[0]=="number")f=[l.P.convert(y)];else{const b=l.P.convert(y[0]),k=l.P.convert(y[1]);f=[b,new l.P(k.x,b.y),k,new l.P(b.x,k.y),b]}return this.style.queryRenderedFeatures(f,i,this.transform)}querySourceFeatures(S,i){return this.style.querySourceFeatures(S,i)}setStyle(S,i){return(i=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&S?(this._diffStyle(S,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(S,i))}setTransformRequest(S){return this._requestManager.setTransformRequest(S),this}_getUIString(S){const i=this._locale[S];if(i==null)throw new Error(`Missing UI string '${S}'`);return i}_updateStyle(S,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(S,i)));const f=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!S)),S?(this.style=new dc(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof S=="string"?this.style.loadURL(S,i,f):this.style.loadJSON(S,i,f),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new dc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(S,i){if(typeof S=="string"){const f=this._requestManager.transformRequest(S,"Style");l.h(f,new AbortController).then((g=>{this._updateDiff(g.data,i)})).catch((g=>{g&&this.fire(new l.j(g))}))}else typeof S=="object"&&this._updateDiff(S,i)}_updateDiff(S,i){try{this.style.setState(S,i)&&this._update(!0)}catch(f){l.w(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(S,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(S,i){return this._lazyInitEmptyStyle(),this.style.addSource(S,i),this._update(!0)}isSourceLoaded(S){const i=this.style&&this.style.sourceCaches[S];if(i!==void 0)return i.loaded();this.fire(new l.j(new Error(`There is no source with ID '${S}'`)))}setTerrain(S){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),S){const i=this.style.sourceCaches[S.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${S.source}`);this.terrain===null&&i.reload();for(const f in this.style._layers){const g=this.style._layers[f];g.type==="hillshade"&&g.source===S.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Uo(this.painter,i,S),this.painter.renderToTexture=new Du(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=f=>{f.dataType==="style"?this.terrain.sourceCache.freeRtt():f.dataType==="source"&&f.tile&&(f.sourceId!==S.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(f.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:S})),this}getTerrain(){var S,i;return(i=(S=this.terrain)===null||S===void 0?void 0:S.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const S=this.style&&this.style.sourceCaches;for(const i in S){const f=S[i]._tiles;for(const g in f){const y=f[g];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}removeSource(S){return this.style.removeSource(S),this._update(!0)}getSource(S){return this.style.getSource(S)}addImage(S,i,f={}){const{pixelRatio:g=1,sdf:y=!1,stretchX:b,stretchY:k,content:D,textFitWidth:j,textFitHeight:$}=f;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||l.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:G,height:H,data:ae}=i,ue=i;return this.style.addImage(S,{data:new l.R({width:G,height:H},new Uint8Array(ae)),pixelRatio:g,stretchX:b,stretchY:k,content:D,textFitWidth:j,textFitHeight:$,sdf:y,version:0,userImage:ue}),ue.onAdd&&ue.onAdd(this,S),this}}{const{width:G,height:H,data:ae}=A.getImageData(i);this.style.addImage(S,{data:new l.R({width:G,height:H},ae),pixelRatio:g,stretchX:b,stretchY:k,content:D,textFitWidth:j,textFitHeight:$,sdf:y,version:0})}}updateImage(S,i){const f=this.style.getImage(S);if(!f)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=i instanceof HTMLImageElement||l.b(i)?A.getImageData(i):i,{width:y,height:b,data:k}=g;if(y===void 0||b===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==f.data.width||b!==f.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const D=!(i instanceof HTMLImageElement||l.b(i));return f.data.replace(k,D),this.style.updateImage(S,f),this}getImage(S){return this.style.getImage(S)}hasImage(S){return S?!!this.style.getImage(S):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(S){this.style.removeImage(S)}loadImage(S){return J.getImage(this._requestManager.transformRequest(S,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(S,i){return this._lazyInitEmptyStyle(),this.style.addLayer(S,i),this._update(!0)}moveLayer(S,i){return this.style.moveLayer(S,i),this._update(!0)}removeLayer(S){return this.style.removeLayer(S),this._update(!0)}getLayer(S){return this.style.getLayer(S)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(S,i,f){return this.style.setLayerZoomRange(S,i,f),this._update(!0)}setFilter(S,i,f={}){return this.style.setFilter(S,i,f),this._update(!0)}getFilter(S){return this.style.getFilter(S)}setPaintProperty(S,i,f,g={}){return this.style.setPaintProperty(S,i,f,g),this._update(!0)}getPaintProperty(S,i){return this.style.getPaintProperty(S,i)}setLayoutProperty(S,i,f,g={}){return this.style.setLayoutProperty(S,i,f,g),this._update(!0)}getLayoutProperty(S,i){return this.style.getLayoutProperty(S,i)}setGlyphs(S,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(S,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(S,i,f={}){return this._lazyInitEmptyStyle(),this.style.addSprite(S,i,f,(g=>{g||this._update(!0)})),this}removeSprite(S){return this._lazyInitEmptyStyle(),this.style.removeSprite(S),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(S,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(S,i,(f=>{f||this._update(!0)})),this}setLight(S,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(S,i),this._update(!0)}getLight(){return this.style.getLight()}setSky(S){return this._lazyInitEmptyStyle(),this.style.setSky(S),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(S,i){return this.style.setFeatureState(S,i),this._update()}removeFeatureState(S,i){return this.style.removeFeatureState(S,i),this._update()}getFeatureState(S){return this.style.getFeatureState(S)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let S=0,i=0;return this._container&&(S=this._container.clientWidth||400,i=this._container.clientHeight||300),[S,i]}_setupContainer(){const S=this._container;S.classList.add("maplibregl-map");const i=this._canvasContainer=M.create("div","maplibregl-canvas-container",S);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=M.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const f=this._containerDimensions(),g=this._getClampedPixelRatio(f[0],f[1]);this._resizeCanvas(f[0],f[1],g);const y=this._controlContainer=M.create("div","maplibregl-control-container",S),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((k=>{b[k]=M.create("div",`maplibregl-ctrl-${k} `,y)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(S,i,f){this._canvas.width=Math.floor(f*S),this._canvas.height=Math.floor(f*i),this._canvas.style.width=`${S}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const S={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",(g=>{i={requestedAttributes:S},g&&(i.statusMessage=g.statusMessage,i.type=g.type)}),{once:!0});const f=this._canvas.getContext("webgl2",S)||this._canvas.getContext("webgl",S);if(!f){const g="Failed to initialize WebGL";throw i?(i.message=g,new Error(JSON.stringify(i))):new Error(g)}this.painter=new gs(f,this.transform),N.testSupport(f)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(S){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||S,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(S){return this._update(),this._renderTaskQueue.add(S)}_cancelRenderFrame(S){this._renderTaskQueue.remove(S)}_render(S){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(S),this._removed)return;let f=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const y=this.transform.zoom,b=A.now();this.style.zoomHistory.update(y,b);const k=new l.z(y,{now:b,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),D=k.crossFadingFactor();D===1&&D===this._crossFadingFactor||(f=!0,this._crossFadingFactor=D),this.style.update(k)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bf.mark(l.bg.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||f)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const g=this._sourcesDirty||this._styleDirty||this._placementDirty;return g||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||g||(this._fullyLoaded=!0,l.bf.mark(l.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var S;this._hash&&this._hash.remove();for(const f of this._controls)f.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),J.removeThrottleControl(this._imageQueueHandle),(S=this._resizeObserver)===null||S===void 0||S.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i!=null&&i.loseContext&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),M.remove(this._canvasContainer),M.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),l.bf.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,A.frameAsync(this._frameRequest).then((S=>{l.bf.frame(S),this._frameRequest=null,this._render(S)})).catch((()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(S){this._showTileBoundaries!==S&&(this._showTileBoundaries=S,this._update())}get showPadding(){return!!this._showPadding}set showPadding(S){this._showPadding!==S&&(this._showPadding=S,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(S){this._showCollisionBoxes!==S&&(this._showCollisionBoxes=S,S?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(S){this._showOverdrawInspector!==S&&(this._showOverdrawInspector=S,this._update())}get repaint(){return!!this._repaint}set repaint(S){this._repaint!==S&&(this._repaint=S,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(S){this._vertices=S,this._update()}get version(){return il}getCameraTargetElevation(){return this.transform.elevation}},h.MapMouseEvent=ai,h.MapTouchEvent=go,h.MapWheelEvent=Mh,h.Marker=oi,h.NavigationControl=class{constructor(S){this._updateZoomButtons=()=>{const i=this._map.getZoom(),f=i===this._map.getMaxZoom(),g=i===this._map.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,f)=>{const g=this._map._getUIString(`NavigationControl.${f}`);i.title=g,i.setAttribute("aria-label",g)},this.options=l.e({},on,S),this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(i=>i.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(i=>this._map.zoomIn({},{originalEvent:i}))),M.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(i=>this._map.zoomOut({},{originalEvent:i}))),M.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})})),this._compassIcon=M.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(S){return this._map=S,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new bs(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){M.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(S,i){const f=M.create("button",S,this._container);return f.type="button",f.addEventListener("click",i),f}},h.Popup=class extends l.E{constructor(S){super(),this.remove=()=>(this._content&&M.remove(this._content),this._container&&(M.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new l.k("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{var f;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=M.create("div","maplibregl-popup",this._map.getContainer()),this._tip=M.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const D of this.options.className.split(" "))this._container.classList.add(D);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Ar(this._lngLat,this._flatPos,this._map.transform):(f=this._lngLat)===null||f===void 0?void 0:f.wrap(),this._trackPointer&&!i)return;const g=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationPoint(this._lngLat));let y=this.options.anchor;const b=zu(this.options.offset);if(!y){const D=this._container.offsetWidth,j=this._container.offsetHeight;let $;$=g.y+b.bottom.y<j?["top"]:g.y>this._map.transform.height-j?["bottom"]:[],g.x<D/2?$.push("left"):g.x>this._map.transform.width-D/2&&$.push("right"),y=$.length===0?"bottom":$.join("-")}let k=g.add(b[y]);this.options.subpixelPositioning||(k=k.round()),M.setTransform(this._container,`${Aa[y]} translate(${k.x}px,${k.y}px)`),qo(this._container,y,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(Qt),S)}addTo(S){return this._map&&this.remove(),this._map=S,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(S){return this._lngLat=l.N.convert(S),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(S){return this.setDOMContent(document.createTextNode(S))}setHTML(S){const i=document.createDocumentFragment(),f=document.createElement("body");let g;for(f.innerHTML=S;g=f.firstChild,g;)i.appendChild(g);return this.setDOMContent(i)}getMaxWidth(){var S;return(S=this._container)===null||S===void 0?void 0:S.style.maxWidth}setMaxWidth(S){return this.options.maxWidth=S,this._update(),this}setDOMContent(S){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=M.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(S),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(S){return this._container&&this._container.classList.add(S),this}removeClassName(S){return this._container&&this._container.classList.remove(S),this}setOffset(S){return this.options.offset=S,this._update(),this}toggleClassName(S){if(this._container)return this._container.classList.toggle(S)}setSubpixelPositioning(S){this.options.subpixelPositioning=S}_createCloseButton(){this.options.closeButton&&(this._closeButton=M.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const S=this._container.querySelector(Vl);S&&S.focus()}},h.RasterDEMTileSource=xr,h.RasterTileSource=lr,h.ScaleControl=class{constructor(S){this._onMove=()=>{$l(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,$l(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},sa),S)}getDefaultPosition(){return"bottom-left"}onAdd(S){return this._map=S,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-scale",S.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){M.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},h.ScrollZoomHandler=Ui,h.Style=dc,h.TerrainControl=class{constructor(S){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=S}onAdd(S){return this._map=S,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=M.create("button","maplibregl-ctrl-terrain",this._container),M.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){M.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},h.TwoFingersTouchPitchHandler=zl,h.TwoFingersTouchRotateHandler=jl,h.TwoFingersTouchZoomHandler=ku,h.TwoFingersTouchZoomRotateHandler=Rc,h.VectorTileSource=hn,h.VideoSource=ta,h.addSourceType=(S,i)=>l._(void 0,void 0,void 0,(function*(){if(Mo(S))throw new Error(`A source type called "${S}" already exists.`);((f,g)=>{Co[f]=g})(S,i)})),h.clearPrewarmedResources=function(){const S=_t;S&&(S.isPreloaded()&&S.numActive()===1?(S.release(ht),_t=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},h.getMaxParallelImageRequests=function(){return l.a.MAX_PARALLEL_IMAGE_REQUESTS},h.getRTLTextPluginStatus=function(){return Xn().getRTLTextPluginStatus()},h.getVersion=function(){return zh},h.getWorkerCount=function(){return pt.workerCount},h.getWorkerUrl=function(){return l.a.WORKER_URL},h.importScriptInWorkers=function(S){return Ft().broadcast("IS",S)},h.prewarm=function(){ot().acquire(ht)},h.setMaxParallelImageRequests=function(S){l.a.MAX_PARALLEL_IMAGE_REQUESTS=S},h.setRTLTextPlugin=function(S,i){return Xn().setRTLTextPlugin(S,i)},h.setWorkerCount=function(S){pt.workerCount=S},h.setWorkerUrl=function(S){l.a.WORKER_URL=S}}));var d=r;return d}))})(xv)),xv.exports}var B$=N$();const tv=pn(B$);function AD(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=AD(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Hr(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=AD(e))&&(n&&(n+=" "),n+=t);return n}var hx,qE;function Eo(){if(qE)return hx;qE=1;var e=Array.isArray;return hx=e,hx}var fx,WE;function ED(){if(WE)return fx;WE=1;var e=typeof Ky=="object"&&Ky&&Ky.Object===Object&&Ky;return fx=e,fx}var dx,GE;function du(){if(GE)return dx;GE=1;var e=ED(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return dx=r,dx}var px,HE;function Kg(){if(HE)return px;HE=1;var e=du(),t=e.Symbol;return px=t,px}var mx,ZE;function F$(){if(ZE)return mx;ZE=1;var e=Kg(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,s=e?e.toStringTag:void 0;function d(h){var l=r.call(h,s),_=h[s];try{h[s]=void 0;var w=!0}catch{}var E=n.call(h);return w&&(l?h[s]=_:delete h[s]),E}return mx=d,mx}var gx,KE;function $$(){if(KE)return gx;KE=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return gx=r,gx}var yx,XE;function cc(){if(XE)return yx;XE=1;var e=Kg(),t=F$(),r=$$(),n="[object Null]",s="[object Undefined]",d=e?e.toStringTag:void 0;function h(l){return l==null?l===void 0?s:n:d&&d in Object(l)?t(l):r(l)}return yx=h,yx}var vx,YE;function hc(){if(YE)return vx;YE=1;function e(t){return t!=null&&typeof t=="object"}return vx=e,vx}var _x,JE;function jp(){if(JE)return _x;JE=1;var e=cc(),t=hc(),r="[object Symbol]";function n(s){return typeof s=="symbol"||t(s)&&e(s)==r}return _x=n,_x}var xx,QE;function LT(){if(QE)return xx;QE=1;var e=Eo(),t=jp(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(d,h){if(e(d))return!1;var l=typeof d;return l=="number"||l=="symbol"||l=="boolean"||d==null||t(d)?!0:n.test(d)||!r.test(d)||h!=null&&d in Object(h)}return xx=s,xx}var bx,eC;function lh(){if(eC)return bx;eC=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return bx=e,bx}var wx,tC;function NT(){if(tC)return wx;tC=1;var e=cc(),t=lh(),r="[object AsyncFunction]",n="[object Function]",s="[object GeneratorFunction]",d="[object Proxy]";function h(l){if(!t(l))return!1;var _=e(l);return _==n||_==s||_==r||_==d}return wx=h,wx}var Sx,rC;function V$(){if(rC)return Sx;rC=1;var e=du(),t=e["__core-js_shared__"];return Sx=t,Sx}var Tx,nC;function U$(){if(nC)return Tx;nC=1;var e=V$(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return Tx=r,Tx}var Px,iC;function CD(){if(iC)return Px;iC=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return Px=r,Px}var Ax,aC;function q$(){if(aC)return Ax;aC=1;var e=NT(),t=U$(),r=lh(),n=CD(),s=/[\\^$.*+?()[\]{}|]/g,d=/^\[object .+?Constructor\]$/,h=Function.prototype,l=Object.prototype,_=h.toString,w=l.hasOwnProperty,E=RegExp("^"+_.call(w).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function A(M){if(!r(M)||t(M))return!1;var N=e(M)?E:d;return N.test(n(M))}return Ax=A,Ax}var Ex,oC;function W$(){if(oC)return Ex;oC=1;function e(t,r){return t==null?void 0:t[r]}return Ex=e,Ex}var Cx,sC;function Uf(){if(sC)return Cx;sC=1;var e=q$(),t=W$();function r(n,s){var d=t(n,s);return e(d)?d:void 0}return Cx=r,Cx}var Mx,lC;function $0(){if(lC)return Mx;lC=1;var e=Uf(),t=e(Object,"create");return Mx=t,Mx}var Ix,uC;function G$(){if(uC)return Ix;uC=1;var e=$0();function t(){this.__data__=e?e(null):{},this.size=0}return Ix=t,Ix}var kx,cC;function H$(){if(cC)return kx;cC=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return kx=e,kx}var Ox,hC;function Z$(){if(hC)return Ox;hC=1;var e=$0(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function s(d){var h=this.__data__;if(e){var l=h[d];return l===t?void 0:l}return n.call(h,d)?h[d]:void 0}return Ox=s,Ox}var Dx,fC;function K$(){if(fC)return Dx;fC=1;var e=$0(),t=Object.prototype,r=t.hasOwnProperty;function n(s){var d=this.__data__;return e?d[s]!==void 0:r.call(d,s)}return Dx=n,Dx}var Rx,dC;function X$(){if(dC)return Rx;dC=1;var e=$0(),t="__lodash_hash_undefined__";function r(n,s){var d=this.__data__;return this.size+=this.has(n)?0:1,d[n]=e&&s===void 0?t:s,this}return Rx=r,Rx}var jx,pC;function Y$(){if(pC)return jx;pC=1;var e=G$(),t=H$(),r=Z$(),n=K$(),s=X$();function d(h){var l=-1,_=h==null?0:h.length;for(this.clear();++l<_;){var w=h[l];this.set(w[0],w[1])}}return d.prototype.clear=e,d.prototype.delete=t,d.prototype.get=r,d.prototype.has=n,d.prototype.set=s,jx=d,jx}var zx,mC;function J$(){if(mC)return zx;mC=1;function e(){this.__data__=[],this.size=0}return zx=e,zx}var Lx,gC;function BT(){if(gC)return Lx;gC=1;function e(t,r){return t===r||t!==t&&r!==r}return Lx=e,Lx}var Nx,yC;function V0(){if(yC)return Nx;yC=1;var e=BT();function t(r,n){for(var s=r.length;s--;)if(e(r[s][0],n))return s;return-1}return Nx=t,Nx}var Bx,vC;function Q$(){if(vC)return Bx;vC=1;var e=V0(),t=Array.prototype,r=t.splice;function n(s){var d=this.__data__,h=e(d,s);if(h<0)return!1;var l=d.length-1;return h==l?d.pop():r.call(d,h,1),--this.size,!0}return Bx=n,Bx}var Fx,_C;function e9(){if(_C)return Fx;_C=1;var e=V0();function t(r){var n=this.__data__,s=e(n,r);return s<0?void 0:n[s][1]}return Fx=t,Fx}var $x,xC;function t9(){if(xC)return $x;xC=1;var e=V0();function t(r){return e(this.__data__,r)>-1}return $x=t,$x}var Vx,bC;function r9(){if(bC)return Vx;bC=1;var e=V0();function t(r,n){var s=this.__data__,d=e(s,r);return d<0?(++this.size,s.push([r,n])):s[d][1]=n,this}return Vx=t,Vx}var Ux,wC;function U0(){if(wC)return Ux;wC=1;var e=J$(),t=Q$(),r=e9(),n=t9(),s=r9();function d(h){var l=-1,_=h==null?0:h.length;for(this.clear();++l<_;){var w=h[l];this.set(w[0],w[1])}}return d.prototype.clear=e,d.prototype.delete=t,d.prototype.get=r,d.prototype.has=n,d.prototype.set=s,Ux=d,Ux}var qx,SC;function FT(){if(SC)return qx;SC=1;var e=Uf(),t=du(),r=e(t,"Map");return qx=r,qx}var Wx,TC;function n9(){if(TC)return Wx;TC=1;var e=Y$(),t=U0(),r=FT();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return Wx=n,Wx}var Gx,PC;function i9(){if(PC)return Gx;PC=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return Gx=e,Gx}var Hx,AC;function q0(){if(AC)return Hx;AC=1;var e=i9();function t(r,n){var s=r.__data__;return e(n)?s[typeof n=="string"?"string":"hash"]:s.map}return Hx=t,Hx}var Zx,EC;function a9(){if(EC)return Zx;EC=1;var e=q0();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return Zx=t,Zx}var Kx,CC;function o9(){if(CC)return Kx;CC=1;var e=q0();function t(r){return e(this,r).get(r)}return Kx=t,Kx}var Xx,MC;function s9(){if(MC)return Xx;MC=1;var e=q0();function t(r){return e(this,r).has(r)}return Xx=t,Xx}var Yx,IC;function l9(){if(IC)return Yx;IC=1;var e=q0();function t(r,n){var s=e(this,r),d=s.size;return s.set(r,n),this.size+=s.size==d?0:1,this}return Yx=t,Yx}var Jx,kC;function $T(){if(kC)return Jx;kC=1;var e=n9(),t=a9(),r=o9(),n=s9(),s=l9();function d(h){var l=-1,_=h==null?0:h.length;for(this.clear();++l<_;){var w=h[l];this.set(w[0],w[1])}}return d.prototype.clear=e,d.prototype.delete=t,d.prototype.get=r,d.prototype.has=n,d.prototype.set=s,Jx=d,Jx}var Qx,OC;function MD(){if(OC)return Qx;OC=1;var e=$T(),t="Expected a function";function r(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var d=function(){var h=arguments,l=s?s.apply(this,h):h[0],_=d.cache;if(_.has(l))return _.get(l);var w=n.apply(this,h);return d.cache=_.set(l,w)||_,w};return d.cache=new(r.Cache||e),d}return r.Cache=e,Qx=r,Qx}var e1,DC;function u9(){if(DC)return e1;DC=1;var e=MD(),t=500;function r(n){var s=e(n,function(h){return d.size===t&&d.clear(),h}),d=s.cache;return s}return e1=r,e1}var t1,RC;function c9(){if(RC)return t1;RC=1;var e=u9(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(s){var d=[];return s.charCodeAt(0)===46&&d.push(""),s.replace(t,function(h,l,_,w){d.push(_?w.replace(r,"$1"):l||h)}),d});return t1=n,t1}var r1,jC;function VT(){if(jC)return r1;jC=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,d=Array(s);++n<s;)d[n]=r(t[n],n,t);return d}return r1=e,r1}var n1,zC;function h9(){if(zC)return n1;zC=1;var e=Kg(),t=VT(),r=Eo(),n=jp(),s=e?e.prototype:void 0,d=s?s.toString:void 0;function h(l){if(typeof l=="string")return l;if(r(l))return t(l,h)+"";if(n(l))return d?d.call(l):"";var _=l+"";return _=="0"&&1/l==-1/0?"-0":_}return n1=h,n1}var i1,LC;function ID(){if(LC)return i1;LC=1;var e=h9();function t(r){return r==null?"":e(r)}return i1=t,i1}var a1,NC;function kD(){if(NC)return a1;NC=1;var e=Eo(),t=LT(),r=c9(),n=ID();function s(d,h){return e(d)?d:t(d,h)?[d]:r(n(d))}return a1=s,a1}var o1,BC;function W0(){if(BC)return o1;BC=1;var e=jp();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return o1=t,o1}var s1,FC;function UT(){if(FC)return s1;FC=1;var e=kD(),t=W0();function r(n,s){s=e(s,n);for(var d=0,h=s.length;n!=null&&d<h;)n=n[t(s[d++])];return d&&d==h?n:void 0}return s1=r,s1}var l1,$C;function OD(){if($C)return l1;$C=1;var e=UT();function t(r,n,s){var d=r==null?void 0:e(r,n);return d===void 0?s:d}return l1=t,l1}var f9=OD();const Ls=pn(f9);var u1,VC;function d9(){if(VC)return u1;VC=1;function e(t){return t==null}return u1=e,u1}var p9=d9();const Lr=pn(p9);var c1,UC;function m9(){if(UC)return c1;UC=1;var e=cc(),t=Eo(),r=hc(),n="[object String]";function s(d){return typeof d=="string"||!t(d)&&r(d)&&e(d)==n}return c1=s,c1}var g9=m9();const Rf=pn(g9);var y9=NT();const Dr=pn(y9);var v9=lh();const zp=pn(v9);var h1={exports:{}},un={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qC;function _9(){if(qC)return un;qC=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),h=Symbol.for("react.context"),l=Symbol.for("react.server_context"),_=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),N=Symbol.for("react.offscreen"),U;U=Symbol.for("react.module.reference");function B(L){if(typeof L=="object"&&L!==null){var K=L.$$typeof;switch(K){case e:switch(L=L.type,L){case r:case s:case n:case w:case E:return L;default:switch(L=L&&L.$$typeof,L){case l:case h:case _:case M:case A:case d:return L;default:return K}}case t:return K}}}return un.ContextConsumer=h,un.ContextProvider=d,un.Element=e,un.ForwardRef=_,un.Fragment=r,un.Lazy=M,un.Memo=A,un.Portal=t,un.Profiler=s,un.StrictMode=n,un.Suspense=w,un.SuspenseList=E,un.isAsyncMode=function(){return!1},un.isConcurrentMode=function(){return!1},un.isContextConsumer=function(L){return B(L)===h},un.isContextProvider=function(L){return B(L)===d},un.isElement=function(L){return typeof L=="object"&&L!==null&&L.$$typeof===e},un.isForwardRef=function(L){return B(L)===_},un.isFragment=function(L){return B(L)===r},un.isLazy=function(L){return B(L)===M},un.isMemo=function(L){return B(L)===A},un.isPortal=function(L){return B(L)===t},un.isProfiler=function(L){return B(L)===s},un.isStrictMode=function(L){return B(L)===n},un.isSuspense=function(L){return B(L)===w},un.isSuspenseList=function(L){return B(L)===E},un.isValidElementType=function(L){return typeof L=="string"||typeof L=="function"||L===r||L===s||L===n||L===w||L===E||L===N||typeof L=="object"&&L!==null&&(L.$$typeof===M||L.$$typeof===A||L.$$typeof===d||L.$$typeof===h||L.$$typeof===_||L.$$typeof===U||L.getModuleId!==void 0)},un.typeOf=B,un}var WC;function x9(){return WC||(WC=1,h1.exports=_9()),h1.exports}var b9=x9(),f1,GC;function DD(){if(GC)return f1;GC=1;var e=cc(),t=hc(),r="[object Number]";function n(s){return typeof s=="number"||t(s)&&e(s)==r}return f1=n,f1}var d1,HC;function w9(){if(HC)return d1;HC=1;var e=DD();function t(r){return e(r)&&r!=+r}return d1=t,d1}var S9=w9();const Xg=pn(S9);var T9=DD();const P9=pn(T9);var yl=function(t){return t===0?0:t>0?1:-1},Pf=function(t){return Rf(t)&&t.indexOf("%")===t.length-1},Bt=function(t){return P9(t)&&!Xg(t)},A9=function(t){return Lr(t)},Ri=function(t){return Bt(t)||Rf(t)},E9=0,Yg=function(t){var r=++E9;return"".concat(t||"").concat(r)},jf=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Bt(t)&&!Rf(t))return n;var d;if(Pf(t)){var h=t.indexOf("%");d=r*parseFloat(t.slice(0,h))/100}else d=+t;return Xg(d)&&(d=n),s&&d>r&&(d=r),d},Jc=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},C9=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},s=0;s<r;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},ml=function(t,r){return Bt(t)&&Bt(r)?function(n){return t+n*(r-t)}:function(){return r}};function Dv(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Ls(n,t))===r})}var M9=function(t,r){return Bt(t)&&Bt(r)?t-r:Rf(t)&&Rf(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function np(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function R2(e){"@babel/helpers - typeof";return R2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R2(e)}var I9=["viewBox","children"],k9=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],ZC=["points","pathLength"],p1={svg:I9,polygon:ZC,polyline:ZC},qT=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Rv=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(Se.isValidElement(t)&&(n=t.props),!zp(n))return null;var s={};return Object.keys(n).forEach(function(d){qT.includes(d)&&(s[d]=r||function(h){return n[d](n,h)})}),s},O9=function(t,r,n){return function(s){return t(r,n,s),null}},jv=function(t,r,n){if(!zp(t)||R2(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(d){var h=t[d];qT.includes(d)&&typeof h=="function"&&(s||(s={}),s[d]=O9(h,r,n))}),s},D9=["children"],R9=["children"];function KC(e,t){if(e==null)return{};var r=j9(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function j9(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function j2(e){"@babel/helpers - typeof";return j2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j2(e)}var XC={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},rc=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},YC=null,m1=null,WT=function e(t){if(t===YC&&Array.isArray(m1))return m1;var r=[];return Se.Children.forEach(t,function(n){Lr(n)||(b9.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),m1=r,YC=t,r};function Ns(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(s){return rc(s)}):n=[rc(t)],WT(e).forEach(function(s){var d=Ls(s,"type.displayName")||Ls(s,"type.name");n.indexOf(d)!==-1&&r.push(s)}),r}function ns(e,t){var r=Ns(e,t);return r&&r[0]}var JC=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,s=r.height;return!(!Bt(n)||n<=0||!Bt(s)||s<=0)},z9=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],L9=function(t){return t&&t.type&&Rf(t.type)&&z9.indexOf(t.type)>=0},N9=function(t){return t&&j2(t)==="object"&&"clipDot"in t},B9=function(t,r,n,s){var d,h=(d=p1==null?void 0:p1[s])!==null&&d!==void 0?d:[];return r.startsWith("data-")||!Dr(t)&&(s&&h.includes(r)||k9.includes(r))||n&&qT.includes(r)},qr=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(Se.isValidElement(t)&&(s=t.props),!zp(s))return null;var d={};return Object.keys(s).forEach(function(h){var l;B9((l=s)===null||l===void 0?void 0:l[h],h,r,n)&&(d[h]=s[h])}),d},z2=function e(t,r){if(t===r)return!0;var n=Se.Children.count(t);if(n!==Se.Children.count(r))return!1;if(n===0)return!0;if(n===1)return QC(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var d=t[s],h=r[s];if(Array.isArray(d)||Array.isArray(h)){if(!e(d,h))return!1}else if(!QC(d,h))return!1}return!0},QC=function(t,r){if(Lr(t)&&Lr(r))return!0;if(!Lr(t)&&!Lr(r)){var n=t.props||{},s=n.children,d=KC(n,D9),h=r.props||{},l=h.children,_=KC(h,R9);return s&&l?np(d,_)&&z2(s,l):!s&&!l?np(d,_):!1}return!1},eM=function(t,r){var n=[],s={};return WT(t).forEach(function(d,h){if(L9(d))n.push(d);else if(d){var l=rc(d.type),_=r[l]||{},w=_.handler,E=_.once;if(w&&(!E||!s[l])){var A=w(d,l,h);n.push(A),s[l]=!0}}}),n},F9=function(t){var r=t&&t.type;return r&&XC[r]?XC[r]:null},$9=function(t,r){return WT(r).indexOf(t)},V9=["children","width","height","viewBox","className","style","title","desc"];function L2(){return L2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L2.apply(this,arguments)}function U9(e,t){if(e==null)return{};var r=q9(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function q9(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function N2(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,d=e.className,h=e.style,l=e.title,_=e.desc,w=U9(e,V9),E=s||{width:r,height:n,x:0,y:0},A=Hr("recharts-surface",d);return Le.createElement("svg",L2({},qr(w,!0,"svg"),{className:A,width:r,height:n,style:h,viewBox:"".concat(E.x," ").concat(E.y," ").concat(E.width," ").concat(E.height)}),Le.createElement("title",null,l),Le.createElement("desc",null,_),t)}var W9=["children","className"];function B2(){return B2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B2.apply(this,arguments)}function G9(e,t){if(e==null)return{};var r=H9(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function H9(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var fi=Le.forwardRef(function(e,t){var r=e.children,n=e.className,s=G9(e,W9),d=Hr("recharts-layer",n);return Le.createElement("g",B2({className:d},qr(s,!0),{ref:t}),r)}),nc=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),d=2;d<n;d++)s[d-2]=arguments[d]},g1,tM;function Z9(){if(tM)return g1;tM=1;function e(t,r,n){var s=-1,d=t.length;r<0&&(r=-r>d?0:d+r),n=n>d?d:n,n<0&&(n+=d),d=r>n?0:n-r>>>0,r>>>=0;for(var h=Array(d);++s<d;)h[s]=t[s+r];return h}return g1=e,g1}var y1,rM;function K9(){if(rM)return y1;rM=1;var e=Z9();function t(r,n,s){var d=r.length;return s=s===void 0?d:s,!n&&s>=d?r:e(r,n,s)}return y1=t,y1}var v1,nM;function RD(){if(nM)return v1;nM=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,d="\\ufe0e\\ufe0f",h="\\u200d",l=RegExp("["+h+e+s+d+"]");function _(w){return l.test(w)}return v1=_,v1}var _1,iM;function X9(){if(iM)return _1;iM=1;function e(t){return t.split("")}return _1=e,_1}var x1,aM;function Y9(){if(aM)return x1;aM=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,d="\\ufe0e\\ufe0f",h="["+e+"]",l="["+s+"]",_="\\ud83c[\\udffb-\\udfff]",w="(?:"+l+"|"+_+")",E="[^"+e+"]",A="(?:\\ud83c[\\udde6-\\uddff]){2}",M="[\\ud800-\\udbff][\\udc00-\\udfff]",N="\\u200d",U=w+"?",B="["+d+"]?",L="(?:"+N+"(?:"+[E,A,M].join("|")+")"+B+U+")*",K=B+U+L,Q="(?:"+[E+l+"?",l,A,M,h].join("|")+")",J=RegExp(_+"(?="+_+")|"+Q+K,"g");function ie(Z){return Z.match(J)||[]}return x1=ie,x1}var b1,oM;function J9(){if(oM)return b1;oM=1;var e=X9(),t=RD(),r=Y9();function n(s){return t(s)?r(s):e(s)}return b1=n,b1}var w1,sM;function Q9(){if(sM)return w1;sM=1;var e=K9(),t=RD(),r=J9(),n=ID();function s(d){return function(h){h=n(h);var l=t(h)?r(h):void 0,_=l?l[0]:h.charAt(0),w=l?e(l,1).join(""):h.slice(1);return _[d]()+w}}return w1=s,w1}var S1,lM;function e7(){if(lM)return S1;lM=1;var e=Q9(),t=e("toUpperCase");return S1=t,S1}var t7=e7();const G0=pn(t7);function Cn(e){return function(){return e}}const jD=Math.cos,zv=Math.sin,xl=Math.sqrt,Lv=Math.PI,H0=2*Lv,F2=Math.PI,$2=2*F2,wf=1e-6,r7=$2-wf;function zD(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function n7(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return zD;const r=10**t;return function(n){this._+=n[0];for(let s=1,d=n.length;s<d;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class i7{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?zD:n7(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,d,h){this._append`C${+t},${+r},${+n},${+s},${this._x1=+d},${this._y1=+h}`}arcTo(t,r,n,s,d){if(t=+t,r=+r,n=+n,s=+s,d=+d,d<0)throw new Error(`negative radius: ${d}`);let h=this._x1,l=this._y1,_=n-t,w=s-r,E=h-t,A=l-r,M=E*E+A*A;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(M>wf)if(!(Math.abs(A*_-w*E)>wf)||!d)this._append`L${this._x1=t},${this._y1=r}`;else{let N=n-h,U=s-l,B=_*_+w*w,L=N*N+U*U,K=Math.sqrt(B),Q=Math.sqrt(M),J=d*Math.tan((F2-Math.acos((B+M-L)/(2*K*Q)))/2),ie=J/Q,Z=J/K;Math.abs(ie-1)>wf&&this._append`L${t+ie*E},${r+ie*A}`,this._append`A${d},${d},0,0,${+(A*N>E*U)},${this._x1=t+Z*_},${this._y1=r+Z*w}`}}arc(t,r,n,s,d,h){if(t=+t,r=+r,n=+n,h=!!h,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),_=n*Math.sin(s),w=t+l,E=r+_,A=1^h,M=h?s-d:d-s;this._x1===null?this._append`M${w},${E}`:(Math.abs(this._x1-w)>wf||Math.abs(this._y1-E)>wf)&&this._append`L${w},${E}`,n&&(M<0&&(M=M%$2+$2),M>r7?this._append`A${n},${n},0,1,${A},${t-l},${r-_}A${n},${n},0,1,${A},${this._x1=w},${this._y1=E}`:M>wf&&this._append`A${n},${n},0,${+(M>=F2)},${A},${this._x1=t+n*Math.cos(d)},${this._y1=r+n*Math.sin(d)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function GT(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new i7(t)}function HT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function LD(e){this._context=e}LD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Z0(e){return new LD(e)}function ND(e){return e[0]}function BD(e){return e[1]}function FD(e,t){var r=Cn(!0),n=null,s=Z0,d=null,h=GT(l);e=typeof e=="function"?e:e===void 0?ND:Cn(e),t=typeof t=="function"?t:t===void 0?BD:Cn(t);function l(_){var w,E=(_=HT(_)).length,A,M=!1,N;for(n==null&&(d=s(N=h())),w=0;w<=E;++w)!(w<E&&r(A=_[w],w,_))===M&&((M=!M)?d.lineStart():d.lineEnd()),M&&d.point(+e(A,w,_),+t(A,w,_));if(N)return d=null,N+""||null}return l.x=function(_){return arguments.length?(e=typeof _=="function"?_:Cn(+_),l):e},l.y=function(_){return arguments.length?(t=typeof _=="function"?_:Cn(+_),l):t},l.defined=function(_){return arguments.length?(r=typeof _=="function"?_:Cn(!!_),l):r},l.curve=function(_){return arguments.length?(s=_,n!=null&&(d=s(n)),l):s},l.context=function(_){return arguments.length?(_==null?n=d=null:d=s(n=_),l):n},l}function rv(e,t,r){var n=null,s=Cn(!0),d=null,h=Z0,l=null,_=GT(w);e=typeof e=="function"?e:e===void 0?ND:Cn(+e),t=typeof t=="function"?t:Cn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?BD:Cn(+r);function w(A){var M,N,U,B=(A=HT(A)).length,L,K=!1,Q,J=new Array(B),ie=new Array(B);for(d==null&&(l=h(Q=_())),M=0;M<=B;++M){if(!(M<B&&s(L=A[M],M,A))===K)if(K=!K)N=M,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),U=M-1;U>=N;--U)l.point(J[U],ie[U]);l.lineEnd(),l.areaEnd()}K&&(J[M]=+e(L,M,A),ie[M]=+t(L,M,A),l.point(n?+n(L,M,A):J[M],r?+r(L,M,A):ie[M]))}if(Q)return l=null,Q+""||null}function E(){return FD().defined(s).curve(h).context(d)}return w.x=function(A){return arguments.length?(e=typeof A=="function"?A:Cn(+A),n=null,w):e},w.x0=function(A){return arguments.length?(e=typeof A=="function"?A:Cn(+A),w):e},w.x1=function(A){return arguments.length?(n=A==null?null:typeof A=="function"?A:Cn(+A),w):n},w.y=function(A){return arguments.length?(t=typeof A=="function"?A:Cn(+A),r=null,w):t},w.y0=function(A){return arguments.length?(t=typeof A=="function"?A:Cn(+A),w):t},w.y1=function(A){return arguments.length?(r=A==null?null:typeof A=="function"?A:Cn(+A),w):r},w.lineX0=w.lineY0=function(){return E().x(e).y(t)},w.lineY1=function(){return E().x(e).y(r)},w.lineX1=function(){return E().x(n).y(t)},w.defined=function(A){return arguments.length?(s=typeof A=="function"?A:Cn(!!A),w):s},w.curve=function(A){return arguments.length?(h=A,d!=null&&(l=h(d)),w):h},w.context=function(A){return arguments.length?(A==null?d=l=null:l=h(d=A),w):d},w}class $D{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function a7(e){return new $D(e,!0)}function o7(e){return new $D(e,!1)}const ZT={draw(e,t){const r=xl(t/Lv);e.moveTo(r,0),e.arc(0,0,r,0,H0)}},s7={draw(e,t){const r=xl(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},VD=xl(1/3),l7=VD*2,u7={draw(e,t){const r=xl(t/l7),n=r*VD;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},c7={draw(e,t){const r=xl(t),n=-r/2;e.rect(n,n,r,r)}},h7=.8908130915292852,UD=zv(Lv/10)/zv(7*Lv/10),f7=zv(H0/10)*UD,d7=-jD(H0/10)*UD,p7={draw(e,t){const r=xl(t*h7),n=f7*r,s=d7*r;e.moveTo(0,-r),e.lineTo(n,s);for(let d=1;d<5;++d){const h=H0*d/5,l=jD(h),_=zv(h);e.lineTo(_*r,-l*r),e.lineTo(l*n-_*s,_*n+l*s)}e.closePath()}},T1=xl(3),m7={draw(e,t){const r=-xl(t/(T1*3));e.moveTo(0,r*2),e.lineTo(-T1*r,-r),e.lineTo(T1*r,-r),e.closePath()}},Is=-.5,ks=xl(3)/2,V2=1/xl(12),g7=(V2/2+1)*3,y7={draw(e,t){const r=xl(t/g7),n=r/2,s=r*V2,d=n,h=r*V2+r,l=-d,_=h;e.moveTo(n,s),e.lineTo(d,h),e.lineTo(l,_),e.lineTo(Is*n-ks*s,ks*n+Is*s),e.lineTo(Is*d-ks*h,ks*d+Is*h),e.lineTo(Is*l-ks*_,ks*l+Is*_),e.lineTo(Is*n+ks*s,Is*s-ks*n),e.lineTo(Is*d+ks*h,Is*h-ks*d),e.lineTo(Is*l+ks*_,Is*_-ks*l),e.closePath()}};function v7(e,t){let r=null,n=GT(s);e=typeof e=="function"?e:Cn(e||ZT),t=typeof t=="function"?t:Cn(t===void 0?64:+t);function s(){let d;if(r||(r=d=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),d)return r=null,d+""||null}return s.type=function(d){return arguments.length?(e=typeof d=="function"?d:Cn(d),s):e},s.size=function(d){return arguments.length?(t=typeof d=="function"?d:Cn(+d),s):t},s.context=function(d){return arguments.length?(r=d??null,s):r},s}function Nv(){}function Bv(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function qD(e){this._context=e}qD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Bv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Bv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _7(e){return new qD(e)}function WD(e){this._context=e}WD.prototype={areaStart:Nv,areaEnd:Nv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Bv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function x7(e){return new WD(e)}function GD(e){this._context=e}GD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Bv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function b7(e){return new GD(e)}function HD(e){this._context=e}HD.prototype={areaStart:Nv,areaEnd:Nv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function w7(e){return new HD(e)}function uM(e){return e<0?-1:1}function cM(e,t,r){var n=e._x1-e._x0,s=t-e._x1,d=(e._y1-e._y0)/(n||s<0&&-0),h=(r-e._y1)/(s||n<0&&-0),l=(d*s+h*n)/(n+s);return(uM(d)+uM(h))*Math.min(Math.abs(d),Math.abs(h),.5*Math.abs(l))||0}function hM(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function P1(e,t,r){var n=e._x0,s=e._y0,d=e._x1,h=e._y1,l=(d-n)/3;e._context.bezierCurveTo(n+l,s+l*t,d-l,h-l*r,d,h)}function Fv(e){this._context=e}Fv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:P1(this,this._t0,hM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,P1(this,hM(this,r=cM(this,e,t)),r);break;default:P1(this,this._t0,r=cM(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function ZD(e){this._context=new KD(e)}(ZD.prototype=Object.create(Fv.prototype)).point=function(e,t){Fv.prototype.point.call(this,t,e)};function KD(e){this._context=e}KD.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,d){this._context.bezierCurveTo(t,e,n,r,d,s)}};function S7(e){return new Fv(e)}function T7(e){return new ZD(e)}function XD(e){this._context=e}XD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=fM(e),s=fM(t),d=0,h=1;h<r;++d,++h)this._context.bezierCurveTo(n[0][d],s[0][d],n[1][d],s[1][d],e[h],t[h]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function fM(e){var t,r=e.length-1,n,s=new Array(r),d=new Array(r),h=new Array(r);for(s[0]=0,d[0]=2,h[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,d[t]=4,h[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,d[r-1]=7,h[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/d[t-1],d[t]-=n,h[t]-=n*h[t-1];for(s[r-1]=h[r-1]/d[r-1],t=r-2;t>=0;--t)s[t]=(h[t]-s[t+1])/d[t];for(d[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)d[t]=2*e[t+1]-s[t+1];return[s,d]}function P7(e){return new XD(e)}function K0(e,t){this._context=e,this._t=t}K0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function A7(e){return new K0(e,.5)}function E7(e){return new K0(e,0)}function C7(e){return new K0(e,1)}function cp(e,t){if((h=e.length)>1)for(var r=1,n,s,d=e[t[0]],h,l=d.length;r<h;++r)for(s=d,d=e[t[r]],n=0;n<l;++n)d[n][1]+=d[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function U2(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function M7(e,t){return e[t]}function I7(e){const t=[];return t.key=e,t}function k7(){var e=Cn([]),t=U2,r=cp,n=M7;function s(d){var h=Array.from(e.apply(this,arguments),I7),l,_=h.length,w=-1,E;for(const A of d)for(l=0,++w;l<_;++l)(h[l][w]=[0,+n(A,h[l].key,w,d)]).data=A;for(l=0,E=HT(t(h));l<_;++l)h[E[l]].index=l;return r(h,E),h}return s.keys=function(d){return arguments.length?(e=typeof d=="function"?d:Cn(Array.from(d)),s):e},s.value=function(d){return arguments.length?(n=typeof d=="function"?d:Cn(+d),s):n},s.order=function(d){return arguments.length?(t=d==null?U2:typeof d=="function"?d:Cn(Array.from(d)),s):t},s.offset=function(d){return arguments.length?(r=d??cp,s):r},s}function O7(e,t){if((n=e.length)>0){for(var r,n,s=0,d=e[0].length,h;s<d;++s){for(h=r=0;r<n;++r)h+=e[r][s][1]||0;if(h)for(r=0;r<n;++r)e[r][s][1]/=h}cp(e,t)}}function D7(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,d=n.length;r<d;++r){for(var h=0,l=0;h<s;++h)l+=e[h][r][1]||0;n[r][1]+=n[r][0]=-l/2}cp(e,t)}}function R7(e,t){if(!(!((h=e.length)>0)||!((d=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,d,h;n<d;++n){for(var l=0,_=0,w=0;l<h;++l){for(var E=e[t[l]],A=E[n][1]||0,M=E[n-1][1]||0,N=(A-M)/2,U=0;U<l;++U){var B=e[t[U]],L=B[n][1]||0,K=B[n-1][1]||0;N+=L-K}_+=A,w+=N*A}s[n-1][1]+=s[n-1][0]=r,_&&(r-=w/_)}s[n-1][1]+=s[n-1][0]=r,cp(e,t)}}function sg(e){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sg(e)}var j7=["type","size","sizeType"];function q2(){return q2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q2.apply(this,arguments)}function dM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dM(Object(r),!0).forEach(function(n){z7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z7(e,t,r){return t=L7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L7(e){var t=N7(e,"string");return sg(t)=="symbol"?t:t+""}function N7(e,t){if(sg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B7(e,t){if(e==null)return{};var r=F7(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function F7(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var YD={symbolCircle:ZT,symbolCross:s7,symbolDiamond:u7,symbolSquare:c7,symbolStar:p7,symbolTriangle:m7,symbolWye:y7},$7=Math.PI/180,V7=function(t){var r="symbol".concat(G0(t));return YD[r]||ZT},U7=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*$7;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},q7=function(t,r){YD["symbol".concat(G0(t))]=r},KT=function(t){var r=t.type,n=r===void 0?"circle":r,s=t.size,d=s===void 0?64:s,h=t.sizeType,l=h===void 0?"area":h,_=B7(t,j7),w=pM(pM({},_),{},{type:n,size:d,sizeType:l}),E=function(){var L=V7(n),K=v7().type(L).size(U7(d,l,n));return K()},A=w.className,M=w.cx,N=w.cy,U=qr(w,!0);return M===+M&&N===+N&&d===+d?Le.createElement("path",q2({},U,{className:Hr("recharts-symbols",A),transform:"translate(".concat(M,", ").concat(N,")"),d:E()})):null};KT.registerSymbol=q7;function hp(e){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hp(e)}function W2(){return W2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W2.apply(this,arguments)}function mM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function W7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mM(Object(r),!0).forEach(function(n){lg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function G7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QD(n.key),n)}}function Z7(e,t,r){return t&&H7(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function K7(e,t,r){return t=$v(t),X7(e,JD()?Reflect.construct(t,r||[],$v(e).constructor):t.apply(e,r))}function X7(e,t){if(t&&(hp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y7(e)}function Y7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JD=function(){return!!e})()}function $v(e){return $v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$v(e)}function J7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G2(e,t)}function G2(e,t){return G2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},G2(e,t)}function lg(e,t,r){return t=QD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QD(e){var t=Q7(e,"string");return hp(t)=="symbol"?t:t+""}function Q7(e,t){if(hp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Os=32,XT=(function(e){function t(){return G7(this,t),K7(this,t,arguments)}return J7(t,e),Z7(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,d=Os/2,h=Os/6,l=Os/3,_=n.inactive?s:n.color;if(n.type==="plainline")return Le.createElement("line",{strokeWidth:4,fill:"none",stroke:_,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:d,x2:Os,y2:d,className:"recharts-legend-icon"});if(n.type==="line")return Le.createElement("path",{strokeWidth:4,fill:"none",stroke:_,d:"M0,".concat(d,"h").concat(l,`
            A`).concat(h,",").concat(h,",0,1,1,").concat(2*l,",").concat(d,`
            H`).concat(Os,"M").concat(2*l,",").concat(d,`
            A`).concat(h,",").concat(h,",0,1,1,").concat(l,",").concat(d),className:"recharts-legend-icon"});if(n.type==="rect")return Le.createElement("path",{stroke:"none",fill:_,d:"M0,".concat(Os/8,"h").concat(Os,"v").concat(Os*3/4,"h").concat(-Os,"z"),className:"recharts-legend-icon"});if(Le.isValidElement(n.legendIcon)){var w=W7({},n);return delete w.legendIcon,Le.cloneElement(n.legendIcon,w)}return Le.createElement(KT,{fill:_,cx:d,cy:d,size:Os,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,d=s.payload,h=s.iconSize,l=s.layout,_=s.formatter,w=s.inactiveColor,E={x:0,y:0,width:Os,height:Os},A={display:l==="horizontal"?"inline-block":"block",marginRight:10},M={display:"inline-block",verticalAlign:"middle",marginRight:4};return d.map(function(N,U){var B=N.formatter||_,L=Hr(lg(lg({"recharts-legend-item":!0},"legend-item-".concat(U),!0),"inactive",N.inactive));if(N.type==="none")return null;var K=Dr(N.value)?null:N.value;nc(!Dr(N.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var Q=N.inactive?w:N.color;return Le.createElement("li",W2({className:L,style:A,key:"legend-item-".concat(U)},jv(n.props,N,U)),Le.createElement(N2,{width:h,height:h,viewBox:E,style:M},n.renderIcon(N)),Le.createElement("span",{className:"recharts-legend-item-text",style:{color:Q}},B?B(K,N,U):K))})}},{key:"render",value:function(){var n=this.props,s=n.payload,d=n.layout,h=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:d==="horizontal"?h:"left"};return Le.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(Se.PureComponent);lg(XT,"displayName","Legend");lg(XT,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var A1,gM;function eV(){if(gM)return A1;gM=1;var e=U0();function t(){this.__data__=new e,this.size=0}return A1=t,A1}var E1,yM;function tV(){if(yM)return E1;yM=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return E1=e,E1}var C1,vM;function rV(){if(vM)return C1;vM=1;function e(t){return this.__data__.get(t)}return C1=e,C1}var M1,_M;function nV(){if(_M)return M1;_M=1;function e(t){return this.__data__.has(t)}return M1=e,M1}var I1,xM;function iV(){if(xM)return I1;xM=1;var e=U0(),t=FT(),r=$T(),n=200;function s(d,h){var l=this.__data__;if(l instanceof e){var _=l.__data__;if(!t||_.length<n-1)return _.push([d,h]),this.size=++l.size,this;l=this.__data__=new r(_)}return l.set(d,h),this.size=l.size,this}return I1=s,I1}var k1,bM;function e6(){if(bM)return k1;bM=1;var e=U0(),t=eV(),r=tV(),n=rV(),s=nV(),d=iV();function h(l){var _=this.__data__=new e(l);this.size=_.size}return h.prototype.clear=t,h.prototype.delete=r,h.prototype.get=n,h.prototype.has=s,h.prototype.set=d,k1=h,k1}var O1,wM;function aV(){if(wM)return O1;wM=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return O1=t,O1}var D1,SM;function oV(){if(SM)return D1;SM=1;function e(t){return this.__data__.has(t)}return D1=e,D1}var R1,TM;function t6(){if(TM)return R1;TM=1;var e=$T(),t=aV(),r=oV();function n(s){var d=-1,h=s==null?0:s.length;for(this.__data__=new e;++d<h;)this.add(s[d])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,R1=n,R1}var j1,PM;function r6(){if(PM)return j1;PM=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(r(t[n],n,t))return!0;return!1}return j1=e,j1}var z1,AM;function n6(){if(AM)return z1;AM=1;function e(t,r){return t.has(r)}return z1=e,z1}var L1,EM;function i6(){if(EM)return L1;EM=1;var e=t6(),t=r6(),r=n6(),n=1,s=2;function d(h,l,_,w,E,A){var M=_&n,N=h.length,U=l.length;if(N!=U&&!(M&&U>N))return!1;var B=A.get(h),L=A.get(l);if(B&&L)return B==l&&L==h;var K=-1,Q=!0,J=_&s?new e:void 0;for(A.set(h,l),A.set(l,h);++K<N;){var ie=h[K],Z=l[K];if(w)var X=M?w(Z,ie,K,l,h,A):w(ie,Z,K,h,l,A);if(X!==void 0){if(X)continue;Q=!1;break}if(J){if(!t(l,function(le,de){if(!r(J,de)&&(ie===le||E(ie,le,_,w,A)))return J.push(de)})){Q=!1;break}}else if(!(ie===Z||E(ie,Z,_,w,A))){Q=!1;break}}return A.delete(h),A.delete(l),Q}return L1=d,L1}var N1,CM;function sV(){if(CM)return N1;CM=1;var e=du(),t=e.Uint8Array;return N1=t,N1}var B1,MM;function lV(){if(MM)return B1;MM=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s,d){n[++r]=[d,s]}),n}return B1=e,B1}var F1,IM;function YT(){if(IM)return F1;IM=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s){n[++r]=s}),n}return F1=e,F1}var $1,kM;function uV(){if(kM)return $1;kM=1;var e=Kg(),t=sV(),r=BT(),n=i6(),s=lV(),d=YT(),h=1,l=2,_="[object Boolean]",w="[object Date]",E="[object Error]",A="[object Map]",M="[object Number]",N="[object RegExp]",U="[object Set]",B="[object String]",L="[object Symbol]",K="[object ArrayBuffer]",Q="[object DataView]",J=e?e.prototype:void 0,ie=J?J.valueOf:void 0;function Z(X,le,de,Pe,Fe,be,Ue){switch(de){case Q:if(X.byteLength!=le.byteLength||X.byteOffset!=le.byteOffset)return!1;X=X.buffer,le=le.buffer;case K:return!(X.byteLength!=le.byteLength||!be(new t(X),new t(le)));case _:case w:case M:return r(+X,+le);case E:return X.name==le.name&&X.message==le.message;case N:case B:return X==le+"";case A:var Ve=s;case U:var Ze=Pe&h;if(Ve||(Ve=d),X.size!=le.size&&!Ze)return!1;var Ye=Ue.get(X);if(Ye)return Ye==le;Pe|=l,Ue.set(X,le);var it=n(Ve(X),Ve(le),Pe,Fe,be,Ue);return Ue.delete(X),it;case L:if(ie)return ie.call(X)==ie.call(le)}return!1}return $1=Z,$1}var V1,OM;function a6(){if(OM)return V1;OM=1;function e(t,r){for(var n=-1,s=r.length,d=t.length;++n<s;)t[d+n]=r[n];return t}return V1=e,V1}var U1,DM;function cV(){if(DM)return U1;DM=1;var e=a6(),t=Eo();function r(n,s,d){var h=s(n);return t(n)?h:e(h,d(n))}return U1=r,U1}var q1,RM;function hV(){if(RM)return q1;RM=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,d=0,h=[];++n<s;){var l=t[n];r(l,n,t)&&(h[d++]=l)}return h}return q1=e,q1}var W1,jM;function fV(){if(jM)return W1;jM=1;function e(){return[]}return W1=e,W1}var G1,zM;function dV(){if(zM)return G1;zM=1;var e=hV(),t=fV(),r=Object.prototype,n=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,d=s?function(h){return h==null?[]:(h=Object(h),e(s(h),function(l){return n.call(h,l)}))}:t;return G1=d,G1}var H1,LM;function pV(){if(LM)return H1;LM=1;function e(t,r){for(var n=-1,s=Array(t);++n<t;)s[n]=r(n);return s}return H1=e,H1}var Z1,NM;function mV(){if(NM)return Z1;NM=1;var e=cc(),t=hc(),r="[object Arguments]";function n(s){return t(s)&&e(s)==r}return Z1=n,Z1}var K1,BM;function JT(){if(BM)return K1;BM=1;var e=mV(),t=hc(),r=Object.prototype,n=r.hasOwnProperty,s=r.propertyIsEnumerable,d=e((function(){return arguments})())?e:function(h){return t(h)&&n.call(h,"callee")&&!s.call(h,"callee")};return K1=d,K1}var Vm={exports:{}},X1,FM;function gV(){if(FM)return X1;FM=1;function e(){return!1}return X1=e,X1}Vm.exports;var $M;function o6(){return $M||($M=1,(function(e,t){var r=du(),n=gV(),s=t&&!t.nodeType&&t,d=s&&!0&&e&&!e.nodeType&&e,h=d&&d.exports===s,l=h?r.Buffer:void 0,_=l?l.isBuffer:void 0,w=_||n;e.exports=w})(Vm,Vm.exports)),Vm.exports}var Y1,VM;function QT(){if(VM)return Y1;VM=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,s){var d=typeof n;return s=s??e,!!s&&(d=="number"||d!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<s}return Y1=r,Y1}var J1,UM;function eP(){if(UM)return J1;UM=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return J1=t,J1}var Q1,qM;function yV(){if(qM)return Q1;qM=1;var e=cc(),t=eP(),r=hc(),n="[object Arguments]",s="[object Array]",d="[object Boolean]",h="[object Date]",l="[object Error]",_="[object Function]",w="[object Map]",E="[object Number]",A="[object Object]",M="[object RegExp]",N="[object Set]",U="[object String]",B="[object WeakMap]",L="[object ArrayBuffer]",K="[object DataView]",Q="[object Float32Array]",J="[object Float64Array]",ie="[object Int8Array]",Z="[object Int16Array]",X="[object Int32Array]",le="[object Uint8Array]",de="[object Uint8ClampedArray]",Pe="[object Uint16Array]",Fe="[object Uint32Array]",be={};be[Q]=be[J]=be[ie]=be[Z]=be[X]=be[le]=be[de]=be[Pe]=be[Fe]=!0,be[n]=be[s]=be[L]=be[d]=be[K]=be[h]=be[l]=be[_]=be[w]=be[E]=be[A]=be[M]=be[N]=be[U]=be[B]=!1;function Ue(Ve){return r(Ve)&&t(Ve.length)&&!!be[e(Ve)]}return Q1=Ue,Q1}var eb,WM;function s6(){if(WM)return eb;WM=1;function e(t){return function(r){return t(r)}}return eb=e,eb}var Um={exports:{}};Um.exports;var GM;function vV(){return GM||(GM=1,(function(e,t){var r=ED(),n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,d=s&&s.exports===n,h=d&&r.process,l=(function(){try{var _=s&&s.require&&s.require("util").types;return _||h&&h.binding&&h.binding("util")}catch{}})();e.exports=l})(Um,Um.exports)),Um.exports}var tb,HM;function l6(){if(HM)return tb;HM=1;var e=yV(),t=s6(),r=vV(),n=r&&r.isTypedArray,s=n?t(n):e;return tb=s,tb}var rb,ZM;function _V(){if(ZM)return rb;ZM=1;var e=pV(),t=JT(),r=Eo(),n=o6(),s=QT(),d=l6(),h=Object.prototype,l=h.hasOwnProperty;function _(w,E){var A=r(w),M=!A&&t(w),N=!A&&!M&&n(w),U=!A&&!M&&!N&&d(w),B=A||M||N||U,L=B?e(w.length,String):[],K=L.length;for(var Q in w)(E||l.call(w,Q))&&!(B&&(Q=="length"||N&&(Q=="offset"||Q=="parent")||U&&(Q=="buffer"||Q=="byteLength"||Q=="byteOffset")||s(Q,K)))&&L.push(Q);return L}return rb=_,rb}var nb,KM;function xV(){if(KM)return nb;KM=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,s=typeof n=="function"&&n.prototype||e;return r===s}return nb=t,nb}var ib,XM;function u6(){if(XM)return ib;XM=1;function e(t,r){return function(n){return t(r(n))}}return ib=e,ib}var ab,YM;function bV(){if(YM)return ab;YM=1;var e=u6(),t=e(Object.keys,Object);return ab=t,ab}var ob,JM;function wV(){if(JM)return ob;JM=1;var e=xV(),t=bV(),r=Object.prototype,n=r.hasOwnProperty;function s(d){if(!e(d))return t(d);var h=[];for(var l in Object(d))n.call(d,l)&&l!="constructor"&&h.push(l);return h}return ob=s,ob}var sb,QM;function Jg(){if(QM)return sb;QM=1;var e=NT(),t=eP();function r(n){return n!=null&&t(n.length)&&!e(n)}return sb=r,sb}var lb,eI;function X0(){if(eI)return lb;eI=1;var e=_V(),t=wV(),r=Jg();function n(s){return r(s)?e(s):t(s)}return lb=n,lb}var ub,tI;function SV(){if(tI)return ub;tI=1;var e=cV(),t=dV(),r=X0();function n(s){return e(s,r,t)}return ub=n,ub}var cb,rI;function TV(){if(rI)return cb;rI=1;var e=SV(),t=1,r=Object.prototype,n=r.hasOwnProperty;function s(d,h,l,_,w,E){var A=l&t,M=e(d),N=M.length,U=e(h),B=U.length;if(N!=B&&!A)return!1;for(var L=N;L--;){var K=M[L];if(!(A?K in h:n.call(h,K)))return!1}var Q=E.get(d),J=E.get(h);if(Q&&J)return Q==h&&J==d;var ie=!0;E.set(d,h),E.set(h,d);for(var Z=A;++L<N;){K=M[L];var X=d[K],le=h[K];if(_)var de=A?_(le,X,K,h,d,E):_(X,le,K,d,h,E);if(!(de===void 0?X===le||w(X,le,l,_,E):de)){ie=!1;break}Z||(Z=K=="constructor")}if(ie&&!Z){var Pe=d.constructor,Fe=h.constructor;Pe!=Fe&&"constructor"in d&&"constructor"in h&&!(typeof Pe=="function"&&Pe instanceof Pe&&typeof Fe=="function"&&Fe instanceof Fe)&&(ie=!1)}return E.delete(d),E.delete(h),ie}return cb=s,cb}var hb,nI;function PV(){if(nI)return hb;nI=1;var e=Uf(),t=du(),r=e(t,"DataView");return hb=r,hb}var fb,iI;function AV(){if(iI)return fb;iI=1;var e=Uf(),t=du(),r=e(t,"Promise");return fb=r,fb}var db,aI;function c6(){if(aI)return db;aI=1;var e=Uf(),t=du(),r=e(t,"Set");return db=r,db}var pb,oI;function EV(){if(oI)return pb;oI=1;var e=Uf(),t=du(),r=e(t,"WeakMap");return pb=r,pb}var mb,sI;function CV(){if(sI)return mb;sI=1;var e=PV(),t=FT(),r=AV(),n=c6(),s=EV(),d=cc(),h=CD(),l="[object Map]",_="[object Object]",w="[object Promise]",E="[object Set]",A="[object WeakMap]",M="[object DataView]",N=h(e),U=h(t),B=h(r),L=h(n),K=h(s),Q=d;return(e&&Q(new e(new ArrayBuffer(1)))!=M||t&&Q(new t)!=l||r&&Q(r.resolve())!=w||n&&Q(new n)!=E||s&&Q(new s)!=A)&&(Q=function(J){var ie=d(J),Z=ie==_?J.constructor:void 0,X=Z?h(Z):"";if(X)switch(X){case N:return M;case U:return l;case B:return w;case L:return E;case K:return A}return ie}),mb=Q,mb}var gb,lI;function MV(){if(lI)return gb;lI=1;var e=e6(),t=i6(),r=uV(),n=TV(),s=CV(),d=Eo(),h=o6(),l=l6(),_=1,w="[object Arguments]",E="[object Array]",A="[object Object]",M=Object.prototype,N=M.hasOwnProperty;function U(B,L,K,Q,J,ie){var Z=d(B),X=d(L),le=Z?E:s(B),de=X?E:s(L);le=le==w?A:le,de=de==w?A:de;var Pe=le==A,Fe=de==A,be=le==de;if(be&&h(B)){if(!h(L))return!1;Z=!0,Pe=!1}if(be&&!Pe)return ie||(ie=new e),Z||l(B)?t(B,L,K,Q,J,ie):r(B,L,le,K,Q,J,ie);if(!(K&_)){var Ue=Pe&&N.call(B,"__wrapped__"),Ve=Fe&&N.call(L,"__wrapped__");if(Ue||Ve){var Ze=Ue?B.value():B,Ye=Ve?L.value():L;return ie||(ie=new e),J(Ze,Ye,K,Q,ie)}}return be?(ie||(ie=new e),n(B,L,K,Q,J,ie)):!1}return gb=U,gb}var yb,uI;function tP(){if(uI)return yb;uI=1;var e=MV(),t=hc();function r(n,s,d,h,l){return n===s?!0:n==null||s==null||!t(n)&&!t(s)?n!==n&&s!==s:e(n,s,d,h,r,l)}return yb=r,yb}var vb,cI;function IV(){if(cI)return vb;cI=1;var e=e6(),t=tP(),r=1,n=2;function s(d,h,l,_){var w=l.length,E=w,A=!_;if(d==null)return!E;for(d=Object(d);w--;){var M=l[w];if(A&&M[2]?M[1]!==d[M[0]]:!(M[0]in d))return!1}for(;++w<E;){M=l[w];var N=M[0],U=d[N],B=M[1];if(A&&M[2]){if(U===void 0&&!(N in d))return!1}else{var L=new e;if(_)var K=_(U,B,N,d,h,L);if(!(K===void 0?t(B,U,r|n,_,L):K))return!1}}return!0}return vb=s,vb}var _b,hI;function h6(){if(hI)return _b;hI=1;var e=lh();function t(r){return r===r&&!e(r)}return _b=t,_b}var xb,fI;function kV(){if(fI)return xb;fI=1;var e=h6(),t=X0();function r(n){for(var s=t(n),d=s.length;d--;){var h=s[d],l=n[h];s[d]=[h,l,e(l)]}return s}return xb=r,xb}var bb,dI;function f6(){if(dI)return bb;dI=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return bb=e,bb}var wb,pI;function OV(){if(pI)return wb;pI=1;var e=IV(),t=kV(),r=f6();function n(s){var d=t(s);return d.length==1&&d[0][2]?r(d[0][0],d[0][1]):function(h){return h===s||e(h,s,d)}}return wb=n,wb}var Sb,mI;function DV(){if(mI)return Sb;mI=1;function e(t,r){return t!=null&&r in Object(t)}return Sb=e,Sb}var Tb,gI;function RV(){if(gI)return Tb;gI=1;var e=kD(),t=JT(),r=Eo(),n=QT(),s=eP(),d=W0();function h(l,_,w){_=e(_,l);for(var E=-1,A=_.length,M=!1;++E<A;){var N=d(_[E]);if(!(M=l!=null&&w(l,N)))break;l=l[N]}return M||++E!=A?M:(A=l==null?0:l.length,!!A&&s(A)&&n(N,A)&&(r(l)||t(l)))}return Tb=h,Tb}var Pb,yI;function jV(){if(yI)return Pb;yI=1;var e=DV(),t=RV();function r(n,s){return n!=null&&t(n,s,e)}return Pb=r,Pb}var Ab,vI;function zV(){if(vI)return Ab;vI=1;var e=tP(),t=OD(),r=jV(),n=LT(),s=h6(),d=f6(),h=W0(),l=1,_=2;function w(E,A){return n(E)&&s(A)?d(h(E),A):function(M){var N=t(M,E);return N===void 0&&N===A?r(M,E):e(A,N,l|_)}}return Ab=w,Ab}var Eb,_I;function Lp(){if(_I)return Eb;_I=1;function e(t){return t}return Eb=e,Eb}var Cb,xI;function LV(){if(xI)return Cb;xI=1;function e(t){return function(r){return r==null?void 0:r[t]}}return Cb=e,Cb}var Mb,bI;function NV(){if(bI)return Mb;bI=1;var e=UT();function t(r){return function(n){return e(n,r)}}return Mb=t,Mb}var Ib,wI;function BV(){if(wI)return Ib;wI=1;var e=LV(),t=NV(),r=LT(),n=W0();function s(d){return r(d)?e(n(d)):t(d)}return Ib=s,Ib}var kb,SI;function uh(){if(SI)return kb;SI=1;var e=OV(),t=zV(),r=Lp(),n=Eo(),s=BV();function d(h){return typeof h=="function"?h:h==null?r:typeof h=="object"?n(h)?t(h[0],h[1]):e(h):s(h)}return kb=d,kb}var Ob,TI;function d6(){if(TI)return Ob;TI=1;function e(t,r,n,s){for(var d=t.length,h=n+(s?1:-1);s?h--:++h<d;)if(r(t[h],h,t))return h;return-1}return Ob=e,Ob}var Db,PI;function FV(){if(PI)return Db;PI=1;function e(t){return t!==t}return Db=e,Db}var Rb,AI;function $V(){if(AI)return Rb;AI=1;function e(t,r,n){for(var s=n-1,d=t.length;++s<d;)if(t[s]===r)return s;return-1}return Rb=e,Rb}var jb,EI;function VV(){if(EI)return jb;EI=1;var e=d6(),t=FV(),r=$V();function n(s,d,h){return d===d?r(s,d,h):e(s,t,h)}return jb=n,jb}var zb,CI;function UV(){if(CI)return zb;CI=1;var e=VV();function t(r,n){var s=r==null?0:r.length;return!!s&&e(r,n,0)>-1}return zb=t,zb}var Lb,MI;function qV(){if(MI)return Lb;MI=1;function e(t,r,n){for(var s=-1,d=t==null?0:t.length;++s<d;)if(n(r,t[s]))return!0;return!1}return Lb=e,Lb}var Nb,II;function WV(){if(II)return Nb;II=1;function e(){}return Nb=e,Nb}var Bb,kI;function GV(){if(kI)return Bb;kI=1;var e=c6(),t=WV(),r=YT(),n=1/0,s=e&&1/r(new e([,-0]))[1]==n?function(d){return new e(d)}:t;return Bb=s,Bb}var Fb,OI;function HV(){if(OI)return Fb;OI=1;var e=t6(),t=UV(),r=qV(),n=n6(),s=GV(),d=YT(),h=200;function l(_,w,E){var A=-1,M=t,N=_.length,U=!0,B=[],L=B;if(E)U=!1,M=r;else if(N>=h){var K=w?null:s(_);if(K)return d(K);U=!1,M=n,L=new e}else L=w?[]:B;e:for(;++A<N;){var Q=_[A],J=w?w(Q):Q;if(Q=E||Q!==0?Q:0,U&&J===J){for(var ie=L.length;ie--;)if(L[ie]===J)continue e;w&&L.push(J),B.push(Q)}else M(L,J,E)||(L!==B&&L.push(J),B.push(Q))}return B}return Fb=l,Fb}var $b,DI;function ZV(){if(DI)return $b;DI=1;var e=uh(),t=HV();function r(n,s){return n&&n.length?t(n,e(s,2)):[]}return $b=r,$b}var KV=ZV();const RI=pn(KV);function p6(e,t,r){return t===!0?RI(e,r):Dr(t)?RI(e,t):e}function fp(e){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fp(e)}var XV=["ref"];function jI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jI(Object(r),!0).forEach(function(n){Y0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g6(n.key),n)}}function JV(e,t,r){return t&&zI(e.prototype,t),r&&zI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function QV(e,t,r){return t=Vv(t),eU(e,m6()?Reflect.construct(t,r||[],Vv(e).constructor):t.apply(e,r))}function eU(e,t){if(t&&(fp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tU(e)}function tU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m6=function(){return!!e})()}function Vv(e){return Vv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vv(e)}function rU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H2(e,t)}function H2(e,t){return H2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},H2(e,t)}function Y0(e,t,r){return t=g6(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g6(e){var t=nU(e,"string");return fp(t)=="symbol"?t:t+""}function nU(e,t){if(fp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function iU(e,t){if(e==null)return{};var r=aU(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aU(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function oU(e){return e.value}function sU(e,t){if(Le.isValidElement(e))return Le.cloneElement(e,t);if(typeof e=="function")return Le.createElement(e,t);t.ref;var r=iU(t,XV);return Le.createElement(XT,r)}var LI=1,If=(function(e){function t(){var r;YV(this,t);for(var n=arguments.length,s=new Array(n),d=0;d<n;d++)s[d]=arguments[d];return r=QV(this,t,[].concat(s)),Y0(r,"lastBoundingBox",{width:-1,height:-1}),r}return rU(t,e),JV(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>LI||Math.abs(s.height-this.lastBoundingBox.height)>LI)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Xu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,d=s.layout,h=s.align,l=s.verticalAlign,_=s.margin,w=s.chartWidth,E=s.chartHeight,A,M;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(h==="center"&&d==="vertical"){var N=this.getBBoxSnapshot();A={left:((w||0)-N.width)/2}}else A=h==="right"?{right:_&&_.right||0}:{left:_&&_.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var U=this.getBBoxSnapshot();M={top:((E||0)-U.height)/2}}else M=l==="bottom"?{bottom:_&&_.bottom||0}:{top:_&&_.top||0};return Xu(Xu({},A),M)}},{key:"render",value:function(){var n=this,s=this.props,d=s.content,h=s.width,l=s.height,_=s.wrapperStyle,w=s.payloadUniqBy,E=s.payload,A=Xu(Xu({position:"absolute",width:h||"auto",height:l||"auto"},this.getDefaultPosition(_)),_);return Le.createElement("div",{className:"recharts-legend-wrapper",style:A,ref:function(N){n.wrapperNode=N}},sU(d,Xu(Xu({},this.props),{},{payload:p6(E,w,oU)})))}}],[{key:"getWithHeight",value:function(n,s){var d=Xu(Xu({},this.defaultProps),n.props),h=d.layout;return h==="vertical"&&Bt(n.props.height)?{height:n.props.height}:h==="horizontal"?{width:n.props.width||s}:null}}])})(Se.PureComponent);Y0(If,"displayName","Legend");Y0(If,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Vb,NI;function lU(){if(NI)return Vb;NI=1;var e=Kg(),t=JT(),r=Eo(),n=e?e.isConcatSpreadable:void 0;function s(d){return r(d)||t(d)||!!(n&&d&&d[n])}return Vb=s,Vb}var Ub,BI;function y6(){if(BI)return Ub;BI=1;var e=a6(),t=lU();function r(n,s,d,h,l){var _=-1,w=n.length;for(d||(d=t),l||(l=[]);++_<w;){var E=n[_];s>0&&d(E)?s>1?r(E,s-1,d,h,l):e(l,E):h||(l[l.length]=E)}return l}return Ub=r,Ub}var qb,FI;function uU(){if(FI)return qb;FI=1;function e(t){return function(r,n,s){for(var d=-1,h=Object(r),l=s(r),_=l.length;_--;){var w=l[t?_:++d];if(n(h[w],w,h)===!1)break}return r}}return qb=e,qb}var Wb,$I;function cU(){if($I)return Wb;$I=1;var e=uU(),t=e();return Wb=t,Wb}var Gb,VI;function v6(){if(VI)return Gb;VI=1;var e=cU(),t=X0();function r(n,s){return n&&e(n,s,t)}return Gb=r,Gb}var Hb,UI;function hU(){if(UI)return Hb;UI=1;var e=Jg();function t(r,n){return function(s,d){if(s==null)return s;if(!e(s))return r(s,d);for(var h=s.length,l=n?h:-1,_=Object(s);(n?l--:++l<h)&&d(_[l],l,_)!==!1;);return s}}return Hb=t,Hb}var Zb,qI;function rP(){if(qI)return Zb;qI=1;var e=v6(),t=hU(),r=t(e);return Zb=r,Zb}var Kb,WI;function _6(){if(WI)return Kb;WI=1;var e=rP(),t=Jg();function r(n,s){var d=-1,h=t(n)?Array(n.length):[];return e(n,function(l,_,w){h[++d]=s(l,_,w)}),h}return Kb=r,Kb}var Xb,GI;function fU(){if(GI)return Xb;GI=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return Xb=e,Xb}var Yb,HI;function dU(){if(HI)return Yb;HI=1;var e=jp();function t(r,n){if(r!==n){var s=r!==void 0,d=r===null,h=r===r,l=e(r),_=n!==void 0,w=n===null,E=n===n,A=e(n);if(!w&&!A&&!l&&r>n||l&&_&&E&&!w&&!A||d&&_&&E||!s&&E||!h)return 1;if(!d&&!l&&!A&&r<n||A&&s&&h&&!d&&!l||w&&s&&h||!_&&h||!E)return-1}return 0}return Yb=t,Yb}var Jb,ZI;function pU(){if(ZI)return Jb;ZI=1;var e=dU();function t(r,n,s){for(var d=-1,h=r.criteria,l=n.criteria,_=h.length,w=s.length;++d<_;){var E=e(h[d],l[d]);if(E){if(d>=w)return E;var A=s[d];return E*(A=="desc"?-1:1)}}return r.index-n.index}return Jb=t,Jb}var Qb,KI;function mU(){if(KI)return Qb;KI=1;var e=VT(),t=UT(),r=uh(),n=_6(),s=fU(),d=s6(),h=pU(),l=Lp(),_=Eo();function w(E,A,M){A.length?A=e(A,function(B){return _(B)?function(L){return t(L,B.length===1?B[0]:B)}:B}):A=[l];var N=-1;A=e(A,d(r));var U=n(E,function(B,L,K){var Q=e(A,function(J){return J(B)});return{criteria:Q,index:++N,value:B}});return s(U,function(B,L){return h(B,L,M)})}return Qb=w,Qb}var ew,XI;function gU(){if(XI)return ew;XI=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return ew=e,ew}var tw,YI;function yU(){if(YI)return tw;YI=1;var e=gU(),t=Math.max;function r(n,s,d){return s=t(s===void 0?n.length-1:s,0),function(){for(var h=arguments,l=-1,_=t(h.length-s,0),w=Array(_);++l<_;)w[l]=h[s+l];l=-1;for(var E=Array(s+1);++l<s;)E[l]=h[l];return E[s]=d(w),e(n,this,E)}}return tw=r,tw}var rw,JI;function vU(){if(JI)return rw;JI=1;function e(t){return function(){return t}}return rw=e,rw}var nw,QI;function x6(){if(QI)return nw;QI=1;var e=Uf(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return nw=t,nw}var iw,ek;function _U(){if(ek)return iw;ek=1;var e=vU(),t=x6(),r=Lp(),n=t?function(s,d){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(d),writable:!0})}:r;return iw=n,iw}var aw,tk;function xU(){if(tk)return aw;tk=1;var e=800,t=16,r=Date.now;function n(s){var d=0,h=0;return function(){var l=r(),_=t-(l-h);if(h=l,_>0){if(++d>=e)return arguments[0]}else d=0;return s.apply(void 0,arguments)}}return aw=n,aw}var ow,rk;function bU(){if(rk)return ow;rk=1;var e=_U(),t=xU(),r=t(e);return ow=r,ow}var sw,nk;function wU(){if(nk)return sw;nk=1;var e=Lp(),t=yU(),r=bU();function n(s,d){return r(t(s,d,e),s+"")}return sw=n,sw}var lw,ik;function J0(){if(ik)return lw;ik=1;var e=BT(),t=Jg(),r=QT(),n=lh();function s(d,h,l){if(!n(l))return!1;var _=typeof h;return(_=="number"?t(l)&&r(h,l.length):_=="string"&&h in l)?e(l[h],d):!1}return lw=s,lw}var uw,ak;function SU(){if(ak)return uw;ak=1;var e=y6(),t=mU(),r=wU(),n=J0(),s=r(function(d,h){if(d==null)return[];var l=h.length;return l>1&&n(d,h[0],h[1])?h=[]:l>2&&n(h[0],h[1],h[2])&&(h=[h[0]]),t(d,e(h,1),[])});return uw=s,uw}var TU=SU();const nP=pn(TU);function ug(e){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ug(e)}function Z2(){return Z2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z2.apply(this,arguments)}function PU(e,t){return MU(e)||CU(e,t)||EU(e,t)||AU()}function AU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EU(e,t){if(e){if(typeof e=="string")return ok(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ok(e,t)}}function ok(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function CU(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,w=!1;try{if(d=(r=r.call(e)).next,t!==0)for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){w=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(w)throw s}}return l}}function MU(e){if(Array.isArray(e))return e}function sk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function cw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sk(Object(r),!0).forEach(function(n){IU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IU(e,t,r){return t=kU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kU(e){var t=OU(e,"string");return ug(t)=="symbol"?t:t+""}function OU(e,t){if(ug(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ug(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DU(e){return Array.isArray(e)&&Ri(e[0])&&Ri(e[1])?e.join(" ~ "):e}var RU=function(t){var r=t.separator,n=r===void 0?" : ":r,s=t.contentStyle,d=s===void 0?{}:s,h=t.itemStyle,l=h===void 0?{}:h,_=t.labelStyle,w=_===void 0?{}:_,E=t.payload,A=t.formatter,M=t.itemSorter,N=t.wrapperClassName,U=t.labelClassName,B=t.label,L=t.labelFormatter,K=t.accessibilityLayer,Q=K===void 0?!1:K,J=function(){if(E&&E.length){var Ue={padding:0,margin:0},Ve=(M?nP(E,M):E).map(function(Ze,Ye){if(Ze.type==="none")return null;var it=cw({display:"block",paddingTop:4,paddingBottom:4,color:Ze.color||"#000"},l),et=Ze.formatter||A||DU,Ge=Ze.value,rt=Ze.name,ge=Ge,ne=rt;if(et&&ge!=null&&ne!=null){var Ce=et(Ge,rt,Ze,Ye,E);if(Array.isArray(Ce)){var nt=PU(Ce,2);ge=nt[0],ne=nt[1]}else ge=Ce}return Le.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Ye),style:it},Ri(ne)?Le.createElement("span",{className:"recharts-tooltip-item-name"},ne):null,Ri(ne)?Le.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,Le.createElement("span",{className:"recharts-tooltip-item-value"},ge),Le.createElement("span",{className:"recharts-tooltip-item-unit"},Ze.unit||""))});return Le.createElement("ul",{className:"recharts-tooltip-item-list",style:Ue},Ve)}return null},ie=cw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},d),Z=cw({margin:0},w),X=!Lr(B),le=X?B:"",de=Hr("recharts-default-tooltip",N),Pe=Hr("recharts-tooltip-label",U);X&&L&&E!==void 0&&E!==null&&(le=L(B,E));var Fe=Q?{role:"status","aria-live":"assertive"}:{};return Le.createElement("div",Z2({className:de,style:ie},Fe),Le.createElement("p",{className:Pe,style:Z},Le.isValidElement(le)?le:"".concat(le)),J())};function cg(e){"@babel/helpers - typeof";return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cg(e)}function nv(e,t,r){return t=jU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jU(e){var t=zU(e,"string");return cg(t)=="symbol"?t:t+""}function zU(e,t){if(cg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Im="recharts-tooltip-wrapper",LU={visibility:"hidden"};function NU(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return Hr(Im,nv(nv(nv(nv({},"".concat(Im,"-right"),Bt(r)&&t&&Bt(t.x)&&r>=t.x),"".concat(Im,"-left"),Bt(r)&&t&&Bt(t.x)&&r<t.x),"".concat(Im,"-bottom"),Bt(n)&&t&&Bt(t.y)&&n>=t.y),"".concat(Im,"-top"),Bt(n)&&t&&Bt(t.y)&&n<t.y))}function lk(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,d=e.position,h=e.reverseDirection,l=e.tooltipDimension,_=e.viewBox,w=e.viewBoxDimension;if(d&&Bt(d[n]))return d[n];var E=r[n]-l-s,A=r[n]+s;if(t[n])return h[n]?E:A;if(h[n]){var M=E,N=_[n];return M<N?Math.max(A,_[n]):Math.max(E,_[n])}var U=A+l,B=_[n]+w;return U>B?Math.max(E,_[n]):Math.max(A,_[n])}function BU(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function FU(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,s=e.position,d=e.reverseDirection,h=e.tooltipBox,l=e.useTranslate3d,_=e.viewBox,w,E,A;return h.height>0&&h.width>0&&r?(E=lk({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:d,tooltipDimension:h.width,viewBox:_,viewBoxDimension:_.width}),A=lk({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:d,tooltipDimension:h.height,viewBox:_,viewBoxDimension:_.height}),w=BU({translateX:E,translateY:A,useTranslate3d:l})):w=LU,{cssProperties:w,cssClasses:NU({translateX:E,translateY:A,coordinate:r})}}function dp(e){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dp(e)}function uk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ck(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uk(Object(r),!0).forEach(function(n){X2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w6(n.key),n)}}function UU(e,t,r){return t&&VU(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qU(e,t,r){return t=Uv(t),WU(e,b6()?Reflect.construct(t,r||[],Uv(e).constructor):t.apply(e,r))}function WU(e,t){if(t&&(dp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GU(e)}function GU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(b6=function(){return!!e})()}function Uv(e){return Uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Uv(e)}function HU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K2(e,t)}function K2(e,t){return K2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},K2(e,t)}function X2(e,t,r){return t=w6(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w6(e){var t=ZU(e,"string");return dp(t)=="symbol"?t:t+""}function ZU(e,t){if(dp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var hk=1,KU=(function(e){function t(){var r;$U(this,t);for(var n=arguments.length,s=new Array(n),d=0;d<n;d++)s[d]=arguments[d];return r=qU(this,t,[].concat(s)),X2(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),X2(r,"handleKeyDown",function(h){if(h.key==="Escape"){var l,_,w,E;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(_=r.props.coordinate)===null||_===void 0?void 0:_.x)!==null&&l!==void 0?l:0,y:(w=(E=r.props.coordinate)===null||E===void 0?void 0:E.y)!==null&&w!==void 0?w:0}})}}),r}return HU(t,e),UU(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>hk||Math.abs(n.height-this.state.lastBoundingBox.height)>hk)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,d=s.active,h=s.allowEscapeViewBox,l=s.animationDuration,_=s.animationEasing,w=s.children,E=s.coordinate,A=s.hasPayload,M=s.isAnimationActive,N=s.offset,U=s.position,B=s.reverseDirection,L=s.useTranslate3d,K=s.viewBox,Q=s.wrapperStyle,J=FU({allowEscapeViewBox:h,coordinate:E,offsetTopLeft:N,position:U,reverseDirection:B,tooltipBox:this.state.lastBoundingBox,useTranslate3d:L,viewBox:K}),ie=J.cssClasses,Z=J.cssProperties,X=ck(ck({transition:M&&d?"transform ".concat(l,"ms ").concat(_):void 0},Z),{},{pointerEvents:"none",visibility:!this.state.dismissed&&d&&A?"visible":"hidden",position:"absolute",top:0,left:0},Q);return Le.createElement("div",{tabIndex:-1,className:ie,style:X,ref:function(de){n.wrapperNode=de}},w)}}])})(Se.PureComponent),XU=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Np={isSsr:XU()};function pp(e){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pp(e)}function fk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fk(Object(r),!0).forEach(function(n){iP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T6(n.key),n)}}function QU(e,t,r){return t&&JU(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function eq(e,t,r){return t=qv(t),tq(e,S6()?Reflect.construct(t,r||[],qv(e).constructor):t.apply(e,r))}function tq(e,t){if(t&&(pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rq(e)}function rq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S6=function(){return!!e})()}function qv(e){return qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qv(e)}function nq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y2(e,t)}function Y2(e,t){return Y2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Y2(e,t)}function iP(e,t,r){return t=T6(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T6(e){var t=iq(e,"string");return pp(t)=="symbol"?t:t+""}function iq(e,t){if(pp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function aq(e){return e.dataKey}function oq(e,t){return Le.isValidElement(e)?Le.cloneElement(e,t):typeof e=="function"?Le.createElement(e,t):Le.createElement(RU,t)}var ou=(function(e){function t(){return YU(this,t),eq(this,t,arguments)}return nq(t,e),QU(t,[{key:"render",value:function(){var n=this,s=this.props,d=s.active,h=s.allowEscapeViewBox,l=s.animationDuration,_=s.animationEasing,w=s.content,E=s.coordinate,A=s.filterNull,M=s.isAnimationActive,N=s.offset,U=s.payload,B=s.payloadUniqBy,L=s.position,K=s.reverseDirection,Q=s.useTranslate3d,J=s.viewBox,ie=s.wrapperStyle,Z=U??[];A&&Z.length&&(Z=p6(U.filter(function(le){return le.value!=null&&(le.hide!==!0||n.props.includeHidden)}),B,aq));var X=Z.length>0;return Le.createElement(KU,{allowEscapeViewBox:h,animationDuration:l,animationEasing:_,isAnimationActive:M,active:d,coordinate:E,hasPayload:X,offset:N,position:L,reverseDirection:K,useTranslate3d:Q,viewBox:J,wrapperStyle:ie},oq(w,dk(dk({},this.props),{},{payload:Z})))}}])})(Se.PureComponent);iP(ou,"displayName","Tooltip");iP(ou,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Np.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var hw,pk;function sq(){if(pk)return hw;pk=1;var e=du(),t=function(){return e.Date.now()};return hw=t,hw}var fw,mk;function lq(){if(mk)return fw;mk=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return fw=t,fw}var dw,gk;function uq(){if(gk)return dw;gk=1;var e=lq(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return dw=r,dw}var pw,yk;function P6(){if(yk)return pw;yk=1;var e=uq(),t=lh(),r=jp(),n=NaN,s=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,h=/^0o[0-7]+$/i,l=parseInt;function _(w){if(typeof w=="number")return w;if(r(w))return n;if(t(w)){var E=typeof w.valueOf=="function"?w.valueOf():w;w=t(E)?E+"":E}if(typeof w!="string")return w===0?w:+w;w=e(w);var A=d.test(w);return A||h.test(w)?l(w.slice(2),A?2:8):s.test(w)?n:+w}return pw=_,pw}var mw,vk;function cq(){if(vk)return mw;vk=1;var e=lh(),t=sq(),r=P6(),n="Expected a function",s=Math.max,d=Math.min;function h(l,_,w){var E,A,M,N,U,B,L=0,K=!1,Q=!1,J=!0;if(typeof l!="function")throw new TypeError(n);_=r(_)||0,e(w)&&(K=!!w.leading,Q="maxWait"in w,M=Q?s(r(w.maxWait)||0,_):M,J="trailing"in w?!!w.trailing:J);function ie(Ve){var Ze=E,Ye=A;return E=A=void 0,L=Ve,N=l.apply(Ye,Ze),N}function Z(Ve){return L=Ve,U=setTimeout(de,_),K?ie(Ve):N}function X(Ve){var Ze=Ve-B,Ye=Ve-L,it=_-Ze;return Q?d(it,M-Ye):it}function le(Ve){var Ze=Ve-B,Ye=Ve-L;return B===void 0||Ze>=_||Ze<0||Q&&Ye>=M}function de(){var Ve=t();if(le(Ve))return Pe(Ve);U=setTimeout(de,X(Ve))}function Pe(Ve){return U=void 0,J&&E?ie(Ve):(E=A=void 0,N)}function Fe(){U!==void 0&&clearTimeout(U),L=0,E=B=A=U=void 0}function be(){return U===void 0?N:Pe(t())}function Ue(){var Ve=t(),Ze=le(Ve);if(E=arguments,A=this,B=Ve,Ze){if(U===void 0)return Z(B);if(Q)return clearTimeout(U),U=setTimeout(de,_),ie(B)}return U===void 0&&(U=setTimeout(de,_)),N}return Ue.cancel=Fe,Ue.flush=be,Ue}return mw=h,mw}var gw,_k;function hq(){if(_k)return gw;_k=1;var e=cq(),t=lh(),r="Expected a function";function n(s,d,h){var l=!0,_=!0;if(typeof s!="function")throw new TypeError(r);return t(h)&&(l="leading"in h?!!h.leading:l,_="trailing"in h?!!h.trailing:_),e(s,d,{leading:l,maxWait:d,trailing:_})}return gw=n,gw}var fq=hq();const A6=pn(fq);function hg(e){"@babel/helpers - typeof";return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hg(e)}function xk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function iv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xk(Object(r),!0).forEach(function(n){dq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dq(e,t,r){return t=pq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pq(e){var t=mq(e,"string");return hg(t)=="symbol"?t:t+""}function mq(e,t){if(hg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gq(e,t){return xq(e)||_q(e,t)||vq(e,t)||yq()}function yq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vq(e,t){if(e){if(typeof e=="string")return bk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bk(e,t)}}function bk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _q(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,w=!1;try{if(d=(r=r.call(e)).next,t!==0)for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){w=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(w)throw s}}return l}}function xq(e){if(Array.isArray(e))return e}var bq=Se.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,d=e.width,h=d===void 0?"100%":d,l=e.height,_=l===void 0?"100%":l,w=e.minWidth,E=w===void 0?0:w,A=e.minHeight,M=e.maxHeight,N=e.children,U=e.debounce,B=U===void 0?0:U,L=e.id,K=e.className,Q=e.onResize,J=e.style,ie=J===void 0?{}:J,Z=Se.useRef(null),X=Se.useRef();X.current=Q,Se.useImperativeHandle(t,function(){return Object.defineProperty(Z.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),Z.current},configurable:!0})});var le=Se.useState({containerWidth:s.width,containerHeight:s.height}),de=gq(le,2),Pe=de[0],Fe=de[1],be=Se.useCallback(function(Ve,Ze){Fe(function(Ye){var it=Math.round(Ve),et=Math.round(Ze);return Ye.containerWidth===it&&Ye.containerHeight===et?Ye:{containerWidth:it,containerHeight:et}})},[]);Se.useEffect(function(){var Ve=function(rt){var ge,ne=rt[0].contentRect,Ce=ne.width,nt=ne.height;be(Ce,nt),(ge=X.current)===null||ge===void 0||ge.call(X,Ce,nt)};B>0&&(Ve=A6(Ve,B,{trailing:!0,leading:!1}));var Ze=new ResizeObserver(Ve),Ye=Z.current.getBoundingClientRect(),it=Ye.width,et=Ye.height;return be(it,et),Ze.observe(Z.current),function(){Ze.disconnect()}},[be,B]);var Ue=Se.useMemo(function(){var Ve=Pe.containerWidth,Ze=Pe.containerHeight;if(Ve<0||Ze<0)return null;nc(Pf(h)||Pf(_),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,h,_),nc(!r||r>0,"The aspect(%s) must be greater than zero.",r);var Ye=Pf(h)?Ve:h,it=Pf(_)?Ze:_;r&&r>0&&(Ye?it=Ye/r:it&&(Ye=it*r),M&&it>M&&(it=M)),nc(Ye>0||it>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Ye,it,h,_,E,A,r);var et=!Array.isArray(N)&&rc(N.type).endsWith("Chart");return Le.Children.map(N,function(Ge){return Le.isValidElement(Ge)?Se.cloneElement(Ge,iv({width:Ye,height:it},et?{style:iv({height:"100%",width:"100%",maxHeight:it,maxWidth:Ye},Ge.props.style)}:{})):Ge})},[r,N,_,M,A,E,Pe,h]);return Le.createElement("div",{id:L?"".concat(L):void 0,className:Hr("recharts-responsive-container",K),style:iv(iv({},ie),{},{width:h,height:_,minWidth:E,minHeight:A,maxHeight:M}),ref:Z},Ue)}),E6=function(t){return null};E6.displayName="Cell";function fg(e){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fg(e)}function wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function J2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wk(Object(r),!0).forEach(function(n){wq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wq(e,t,r){return t=Sq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sq(e){var t=Tq(e,"string");return fg(t)=="symbol"?t:t+""}function Tq(e,t){if(fg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qd={widthCache:{},cacheCount:0},Pq=2e3,Aq={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Sk="recharts_measurement_span";function Eq(e){var t=J2({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Km=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Np.isSsr)return{width:0,height:0};var n=Eq(r),s=JSON.stringify({text:t,copyStyle:n});if(qd.widthCache[s])return qd.widthCache[s];try{var d=document.getElementById(Sk);d||(d=document.createElement("span"),d.setAttribute("id",Sk),d.setAttribute("aria-hidden","true"),document.body.appendChild(d));var h=J2(J2({},Aq),n);Object.assign(d.style,h),d.textContent="".concat(t);var l=d.getBoundingClientRect(),_={width:l.width,height:l.height};return qd.widthCache[s]=_,++qd.cacheCount>Pq&&(qd.cacheCount=0,qd.widthCache={}),_}catch{return{width:0,height:0}}},Cq=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function dg(e){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dg(e)}function Wv(e,t){return Oq(e)||kq(e,t)||Iq(e,t)||Mq()}function Mq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Iq(e,t){if(e){if(typeof e=="string")return Tk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tk(e,t)}}function Tk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kq(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,w=!1;try{if(d=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;_=!1}else for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){w=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(w)throw s}}return l}}function Oq(e){if(Array.isArray(e))return e}function Dq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jq(n.key),n)}}function Rq(e,t,r){return t&&Pk(e.prototype,t),r&&Pk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function jq(e){var t=zq(e,"string");return dg(t)=="symbol"?t:t+""}function zq(e,t){if(dg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ak=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ek=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Lq=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Nq=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,C6={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Bq=Object.keys(C6),ep="NaN";function Fq(e,t){return e*C6[t]}var av=(function(){function e(t,r){Dq(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!Lq.test(r)&&(this.num=NaN,this.unit=""),Bq.includes(r)&&(this.num=Fq(t,r),this.unit="px")}return Rq(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=Nq.exec(r))!==null&&n!==void 0?n:[],d=Wv(s,3),h=d[1],l=d[2];return new e(parseFloat(h),l??"")}}])})();function M6(e){if(e.includes(ep))return ep;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=Ak.exec(t))!==null&&r!==void 0?r:[],s=Wv(n,4),d=s[1],h=s[2],l=s[3],_=av.parse(d??""),w=av.parse(l??""),E=h==="*"?_.multiply(w):_.divide(w);if(E.isNaN())return ep;t=t.replace(Ak,E.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var A,M=(A=Ek.exec(t))!==null&&A!==void 0?A:[],N=Wv(M,4),U=N[1],B=N[2],L=N[3],K=av.parse(U??""),Q=av.parse(L??""),J=B==="+"?K.add(Q):K.subtract(Q);if(J.isNaN())return ep;t=t.replace(Ek,J.toString())}return t}var Ck=/\(([^()]*)\)/;function $q(e){for(var t=e;t.includes("(");){var r=Ck.exec(t),n=Wv(r,2),s=n[1];t=t.replace(Ck,M6(s))}return t}function Vq(e){var t=e.replace(/\s+/g,"");return t=$q(t),t=M6(t),t}function Uq(e){try{return Vq(e)}catch{return ep}}function yw(e){var t=Uq(e.slice(5,-1));return t===ep?"":t}var qq=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Wq=["dx","dy","angle","className","breakAll"];function Q2(){return Q2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q2.apply(this,arguments)}function Mk(e,t){if(e==null)return{};var r=Gq(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Gq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ik(e,t){return Xq(e)||Kq(e,t)||Zq(e,t)||Hq()}function Hq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zq(e,t){if(e){if(typeof e=="string")return kk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kk(e,t)}}function kk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Kq(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,w=!1;try{if(d=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;_=!1}else for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){w=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(w)throw s}}return l}}function Xq(e){if(Array.isArray(e))return e}var I6=/[ \f\n\r\t\v\u2028\u2029]+/,k6=function(t){var r=t.children,n=t.breakAll,s=t.style;try{var d=[];Lr(r)||(n?d=r.toString().split(""):d=r.toString().split(I6));var h=d.map(function(_){return{word:_,width:Km(_,s).width}}),l=n?0:Km("",s).width;return{wordsWithComputedWidth:h,spaceWidth:l}}catch{return null}},Yq=function(t,r,n,s,d){var h=t.maxLines,l=t.children,_=t.style,w=t.breakAll,E=Bt(h),A=l,M=function(){var Ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ye.reduce(function(it,et){var Ge=et.word,rt=et.width,ge=it[it.length-1];if(ge&&(s==null||d||ge.width+rt+n<Number(s)))ge.words.push(Ge),ge.width+=rt+n;else{var ne={words:[Ge],width:rt};it.push(ne)}return it},[])},N=M(r),U=function(Ye){return Ye.reduce(function(it,et){return it.width>et.width?it:et})};if(!E)return N;for(var B="",L=function(Ye){var it=A.slice(0,Ye),et=k6({breakAll:w,style:_,children:it+B}).wordsWithComputedWidth,Ge=M(et),rt=Ge.length>h||U(Ge).width>Number(s);return[rt,Ge]},K=0,Q=A.length-1,J=0,ie;K<=Q&&J<=A.length-1;){var Z=Math.floor((K+Q)/2),X=Z-1,le=L(X),de=Ik(le,2),Pe=de[0],Fe=de[1],be=L(Z),Ue=Ik(be,1),Ve=Ue[0];if(!Pe&&!Ve&&(K=Z+1),Pe&&Ve&&(Q=Z-1),!Pe&&Ve){ie=Fe;break}J++}return ie||N},Ok=function(t){var r=Lr(t)?[]:t.toString().split(I6);return[{words:r}]},Jq=function(t){var r=t.width,n=t.scaleToFit,s=t.children,d=t.style,h=t.breakAll,l=t.maxLines;if((r||n)&&!Np.isSsr){var _,w,E=k6({breakAll:h,children:s,style:d});if(E){var A=E.wordsWithComputedWidth,M=E.spaceWidth;_=A,w=M}else return Ok(s);return Yq({breakAll:h,children:s,maxLines:l,style:d},_,w,r,n)}return Ok(s)},Dk="#808080",Gv=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,d=s===void 0?0:s,h=t.lineHeight,l=h===void 0?"1em":h,_=t.capHeight,w=_===void 0?"0.71em":_,E=t.scaleToFit,A=E===void 0?!1:E,M=t.textAnchor,N=M===void 0?"start":M,U=t.verticalAnchor,B=U===void 0?"end":U,L=t.fill,K=L===void 0?Dk:L,Q=Mk(t,qq),J=Se.useMemo(function(){return Jq({breakAll:Q.breakAll,children:Q.children,maxLines:Q.maxLines,scaleToFit:A,style:Q.style,width:Q.width})},[Q.breakAll,Q.children,Q.maxLines,A,Q.style,Q.width]),ie=Q.dx,Z=Q.dy,X=Q.angle,le=Q.className,de=Q.breakAll,Pe=Mk(Q,Wq);if(!Ri(n)||!Ri(d))return null;var Fe=n+(Bt(ie)?ie:0),be=d+(Bt(Z)?Z:0),Ue;switch(B){case"start":Ue=yw("calc(".concat(w,")"));break;case"middle":Ue=yw("calc(".concat((J.length-1)/2," * -").concat(l," + (").concat(w," / 2))"));break;default:Ue=yw("calc(".concat(J.length-1," * -").concat(l,")"));break}var Ve=[];if(A){var Ze=J[0].width,Ye=Q.width;Ve.push("scale(".concat((Bt(Ye)?Ye/Ze:1)/Ze,")"))}return X&&Ve.push("rotate(".concat(X,", ").concat(Fe,", ").concat(be,")")),Ve.length&&(Pe.transform=Ve.join(" ")),Le.createElement("text",Q2({},qr(Pe,!0),{x:Fe,y:be,className:Hr("recharts-text",le),textAnchor:N,fill:K.includes("url")?Dk:K}),J.map(function(it,et){var Ge=it.words.join(de?"":" ");return Le.createElement("tspan",{x:Fe,dy:et===0?Ue:l,key:"".concat(Ge,"-").concat(et)},Ge)}))};function rh(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Qq(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function aP(e){let t,r,n;e.length!==2?(t=rh,r=(l,_)=>rh(e(l),_),n=(l,_)=>e(l)-_):(t=e===rh||e===Qq?e:eW,r=e,n=e);function s(l,_,w=0,E=l.length){if(w<E){if(t(_,_)!==0)return E;do{const A=w+E>>>1;r(l[A],_)<0?w=A+1:E=A}while(w<E)}return w}function d(l,_,w=0,E=l.length){if(w<E){if(t(_,_)!==0)return E;do{const A=w+E>>>1;r(l[A],_)<=0?w=A+1:E=A}while(w<E)}return w}function h(l,_,w=0,E=l.length){const A=s(l,_,w,E-1);return A>w&&n(l[A-1],_)>-n(l[A],_)?A-1:A}return{left:s,center:h,right:d}}function eW(){return 0}function O6(e){return e===null?NaN:+e}function*tW(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const rW=aP(rh),Qg=rW.right;aP(O6).center;class Rk extends Map{constructor(t,r=aW){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(jk(this,t))}has(t){return super.has(jk(this,t))}set(t,r){return super.set(nW(this,t),r)}delete(t){return super.delete(iW(this,t))}}function jk({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function nW({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function iW({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function aW(e){return e!==null&&typeof e=="object"?e.valueOf():e}function oW(e=rh){if(e===rh)return D6;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function D6(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const sW=Math.sqrt(50),lW=Math.sqrt(10),uW=Math.sqrt(2);function Hv(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),d=n/Math.pow(10,s),h=d>=sW?10:d>=lW?5:d>=uW?2:1;let l,_,w;return s<0?(w=Math.pow(10,-s)/h,l=Math.round(e*w),_=Math.round(t*w),l/w<e&&++l,_/w>t&&--_,w=-w):(w=Math.pow(10,s)*h,l=Math.round(e/w),_=Math.round(t/w),l*w<e&&++l,_*w>t&&--_),_<l&&.5<=r&&r<2?Hv(e,t,r*2):[l,_,w]}function eS(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,d,h]=n?Hv(t,e,r):Hv(e,t,r);if(!(d>=s))return[];const l=d-s+1,_=new Array(l);if(n)if(h<0)for(let w=0;w<l;++w)_[w]=(d-w)/-h;else for(let w=0;w<l;++w)_[w]=(d-w)*h;else if(h<0)for(let w=0;w<l;++w)_[w]=(s+w)/-h;else for(let w=0;w<l;++w)_[w]=(s+w)*h;return _}function tS(e,t,r){return t=+t,e=+e,r=+r,Hv(e,t,r)[2]}function rS(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?tS(t,e,r):tS(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function zk(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Lk(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function R6(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?D6:oW(s);n>r;){if(n-r>600){const _=n-r+1,w=t-r+1,E=Math.log(_),A=.5*Math.exp(2*E/3),M=.5*Math.sqrt(E*A*(_-A)/_)*(w-_/2<0?-1:1),N=Math.max(r,Math.floor(t-w*A/_+M)),U=Math.min(n,Math.floor(t+(_-w)*A/_+M));R6(e,t,N,U,s)}const d=e[t];let h=r,l=n;for(km(e,r,t),s(e[n],d)>0&&km(e,r,n);h<l;){for(km(e,h,l),++h,--l;s(e[h],d)<0;)++h;for(;s(e[l],d)>0;)--l}s(e[r],d)===0?km(e,r,l):(++l,km(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function km(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function cW(e,t,r){if(e=Float64Array.from(tW(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Lk(e);if(t>=1)return zk(e);var n,s=(n-1)*t,d=Math.floor(s),h=zk(R6(e,d).subarray(0,d+1)),l=Lk(e.subarray(d+1));return h+(l-h)*(s-d)}}function hW(e,t,r=O6){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,d=Math.floor(s),h=+r(e[d],d,e),l=+r(e[d+1],d+1,e);return h+(l-h)*(s-d)}}function fW(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,d=new Array(s);++n<s;)d[n]=e+n*r;return d}function Fs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function fc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const nS=Symbol("implicit");function oP(){var e=new Rk,t=[],r=[],n=nS;function s(d){let h=e.get(d);if(h===void 0){if(n!==nS)return n;e.set(d,h=t.push(d)-1)}return r[h%r.length]}return s.domain=function(d){if(!arguments.length)return t.slice();t=[],e=new Rk;for(const h of d)e.has(h)||e.set(h,t.push(h)-1);return s},s.range=function(d){return arguments.length?(r=Array.from(d),s):r.slice()},s.unknown=function(d){return arguments.length?(n=d,s):n},s.copy=function(){return oP(t,r).unknown(n)},Fs.apply(s,arguments),s}function pg(){var e=oP().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,d,h,l=!1,_=0,w=0,E=.5;delete e.unknown;function A(){var M=t().length,N=s<n,U=N?s:n,B=N?n:s;d=(B-U)/Math.max(1,M-_+w*2),l&&(d=Math.floor(d)),U+=(B-U-d*(M-_))*E,h=d*(1-_),l&&(U=Math.round(U),h=Math.round(h));var L=fW(M).map(function(K){return U+d*K});return r(N?L.reverse():L)}return e.domain=function(M){return arguments.length?(t(M),A()):t()},e.range=function(M){return arguments.length?([n,s]=M,n=+n,s=+s,A()):[n,s]},e.rangeRound=function(M){return[n,s]=M,n=+n,s=+s,l=!0,A()},e.bandwidth=function(){return h},e.step=function(){return d},e.round=function(M){return arguments.length?(l=!!M,A()):l},e.padding=function(M){return arguments.length?(_=Math.min(1,w=+M),A()):_},e.paddingInner=function(M){return arguments.length?(_=Math.min(1,M),A()):_},e.paddingOuter=function(M){return arguments.length?(w=+M,A()):w},e.align=function(M){return arguments.length?(E=Math.max(0,Math.min(1,M)),A()):E},e.copy=function(){return pg(t(),[n,s]).round(l).paddingInner(_).paddingOuter(w).align(E)},Fs.apply(A(),arguments)}function j6(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return j6(t())},e}function Xm(){return j6(pg.apply(null,arguments).paddingInner(1))}function sP(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function z6(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function ey(){}var mg=.7,Zv=1/mg,ip="\\s*([+-]?\\d+)\\s*",gg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",cu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dW=/^#([0-9a-f]{3,8})$/,pW=new RegExp(`^rgb\\(${ip},${ip},${ip}\\)$`),mW=new RegExp(`^rgb\\(${cu},${cu},${cu}\\)$`),gW=new RegExp(`^rgba\\(${ip},${ip},${ip},${gg}\\)$`),yW=new RegExp(`^rgba\\(${cu},${cu},${cu},${gg}\\)$`),vW=new RegExp(`^hsl\\(${gg},${cu},${cu}\\)$`),_W=new RegExp(`^hsla\\(${gg},${cu},${cu},${gg}\\)$`),Nk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sP(ey,yg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Bk,formatHex:Bk,formatHex8:xW,formatHsl:bW,formatRgb:Fk,toString:Fk});function Bk(){return this.rgb().formatHex()}function xW(){return this.rgb().formatHex8()}function bW(){return L6(this).formatHsl()}function Fk(){return this.rgb().formatRgb()}function yg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=dW.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?$k(t):r===3?new Ao(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?ov(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?ov(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=pW.exec(e))?new Ao(t[1],t[2],t[3],1):(t=mW.exec(e))?new Ao(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=gW.exec(e))?ov(t[1],t[2],t[3],t[4]):(t=yW.exec(e))?ov(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vW.exec(e))?qk(t[1],t[2]/100,t[3]/100,1):(t=_W.exec(e))?qk(t[1],t[2]/100,t[3]/100,t[4]):Nk.hasOwnProperty(e)?$k(Nk[e]):e==="transparent"?new Ao(NaN,NaN,NaN,0):null}function $k(e){return new Ao(e>>16&255,e>>8&255,e&255,1)}function ov(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ao(e,t,r,n)}function wW(e){return e instanceof ey||(e=yg(e)),e?(e=e.rgb(),new Ao(e.r,e.g,e.b,e.opacity)):new Ao}function iS(e,t,r,n){return arguments.length===1?wW(e):new Ao(e,t,r,n??1)}function Ao(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}sP(Ao,iS,z6(ey,{brighter(e){return e=e==null?Zv:Math.pow(Zv,e),new Ao(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?mg:Math.pow(mg,e),new Ao(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ao(kf(this.r),kf(this.g),kf(this.b),Kv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vk,formatHex:Vk,formatHex8:SW,formatRgb:Uk,toString:Uk}));function Vk(){return`#${Af(this.r)}${Af(this.g)}${Af(this.b)}`}function SW(){return`#${Af(this.r)}${Af(this.g)}${Af(this.b)}${Af((isNaN(this.opacity)?1:this.opacity)*255)}`}function Uk(){const e=Kv(this.opacity);return`${e===1?"rgb(":"rgba("}${kf(this.r)}, ${kf(this.g)}, ${kf(this.b)}${e===1?")":`, ${e})`}`}function Kv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function kf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Af(e){return e=kf(e),(e<16?"0":"")+e.toString(16)}function qk(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new gl(e,t,r,n)}function L6(e){if(e instanceof gl)return new gl(e.h,e.s,e.l,e.opacity);if(e instanceof ey||(e=yg(e)),!e)return new gl;if(e instanceof gl)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),d=Math.max(t,r,n),h=NaN,l=d-s,_=(d+s)/2;return l?(t===d?h=(r-n)/l+(r<n)*6:r===d?h=(n-t)/l+2:h=(t-r)/l+4,l/=_<.5?d+s:2-d-s,h*=60):l=_>0&&_<1?0:h,new gl(h,l,_,e.opacity)}function TW(e,t,r,n){return arguments.length===1?L6(e):new gl(e,t,r,n??1)}function gl(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}sP(gl,TW,z6(ey,{brighter(e){return e=e==null?Zv:Math.pow(Zv,e),new gl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?mg:Math.pow(mg,e),new gl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Ao(vw(e>=240?e-240:e+120,s,n),vw(e,s,n),vw(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new gl(Wk(this.h),sv(this.s),sv(this.l),Kv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Kv(this.opacity);return`${e===1?"hsl(":"hsla("}${Wk(this.h)}, ${sv(this.s)*100}%, ${sv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Wk(e){return e=(e||0)%360,e<0?e+360:e}function sv(e){return Math.max(0,Math.min(1,e||0))}function vw(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const lP=e=>()=>e;function PW(e,t){return function(r){return e+r*t}}function AW(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function EW(e){return(e=+e)==1?N6:function(t,r){return r-t?AW(t,r,e):lP(isNaN(t)?r:t)}}function N6(e,t){var r=t-e;return r?PW(e,r):lP(isNaN(e)?t:e)}const Gk=(function e(t){var r=EW(t);function n(s,d){var h=r((s=iS(s)).r,(d=iS(d)).r),l=r(s.g,d.g),_=r(s.b,d.b),w=N6(s.opacity,d.opacity);return function(E){return s.r=h(E),s.g=l(E),s.b=_(E),s.opacity=w(E),s+""}}return n.gamma=e,n})(1);function CW(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(d){for(s=0;s<r;++s)n[s]=e[s]*(1-d)+t[s]*d;return n}}function MW(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function IW(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),d=new Array(r),h;for(h=0;h<n;++h)s[h]=Bp(e[h],t[h]);for(;h<r;++h)d[h]=t[h];return function(l){for(h=0;h<n;++h)d[h]=s[h](l);return d}}function kW(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Xv(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function OW(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Bp(e[s],t[s]):n[s]=t[s];return function(d){for(s in r)n[s]=r[s](d);return n}}var aS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_w=new RegExp(aS.source,"g");function DW(e){return function(){return e}}function RW(e){return function(t){return e(t)+""}}function jW(e,t){var r=aS.lastIndex=_w.lastIndex=0,n,s,d,h=-1,l=[],_=[];for(e=e+"",t=t+"";(n=aS.exec(e))&&(s=_w.exec(t));)(d=s.index)>r&&(d=t.slice(r,d),l[h]?l[h]+=d:l[++h]=d),(n=n[0])===(s=s[0])?l[h]?l[h]+=s:l[++h]=s:(l[++h]=null,_.push({i:h,x:Xv(n,s)})),r=_w.lastIndex;return r<t.length&&(d=t.slice(r),l[h]?l[h]+=d:l[++h]=d),l.length<2?_[0]?RW(_[0].x):DW(t):(t=_.length,function(w){for(var E=0,A;E<t;++E)l[(A=_[E]).i]=A.x(w);return l.join("")})}function Bp(e,t){var r=typeof t,n;return t==null||r==="boolean"?lP(t):(r==="number"?Xv:r==="string"?(n=yg(t))?(t=n,Gk):jW:t instanceof yg?Gk:t instanceof Date?kW:MW(t)?CW:Array.isArray(t)?IW:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?OW:Xv)(e,t)}function uP(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function zW(e,t){t===void 0&&(t=e,e=Bp);for(var r=0,n=t.length-1,s=t[0],d=new Array(n<0?0:n);r<n;)d[r]=e(s,s=t[++r]);return function(h){var l=Math.max(0,Math.min(n-1,Math.floor(h*=n)));return d[l](h-l)}}function LW(e){return function(){return e}}function Yv(e){return+e}var Hk=[0,1];function co(e){return e}function oS(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:LW(isNaN(t)?NaN:.5)}function NW(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function BW(e,t,r){var n=e[0],s=e[1],d=t[0],h=t[1];return s<n?(n=oS(s,n),d=r(h,d)):(n=oS(n,s),d=r(d,h)),function(l){return d(n(l))}}function FW(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),d=new Array(n),h=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++h<n;)s[h]=oS(e[h],e[h+1]),d[h]=r(t[h],t[h+1]);return function(l){var _=Qg(e,l,1,n)-1;return d[_](s[_](l))}}function ty(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Q0(){var e=Hk,t=Hk,r=Bp,n,s,d,h=co,l,_,w;function E(){var M=Math.min(e.length,t.length);return h!==co&&(h=NW(e[0],e[M-1])),l=M>2?FW:BW,_=w=null,A}function A(M){return M==null||isNaN(M=+M)?d:(_||(_=l(e.map(n),t,r)))(n(h(M)))}return A.invert=function(M){return h(s((w||(w=l(t,e.map(n),Xv)))(M)))},A.domain=function(M){return arguments.length?(e=Array.from(M,Yv),E()):e.slice()},A.range=function(M){return arguments.length?(t=Array.from(M),E()):t.slice()},A.rangeRound=function(M){return t=Array.from(M),r=uP,E()},A.clamp=function(M){return arguments.length?(h=M?!0:co,E()):h!==co},A.interpolate=function(M){return arguments.length?(r=M,E()):r},A.unknown=function(M){return arguments.length?(d=M,A):d},function(M,N){return n=M,s=N,E()}}function cP(){return Q0()(co,co)}function $W(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Jv(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function mp(e){return e=Jv(Math.abs(e)),e?e[1]:NaN}function VW(e,t){return function(r,n){for(var s=r.length,d=[],h=0,l=e[0],_=0;s>0&&l>0&&(_+l+1>n&&(l=Math.max(1,n-_)),d.push(r.substring(s-=l,s+l)),!((_+=l+1)>n));)l=e[h=(h+1)%e.length];return d.reverse().join(t)}}function UW(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var qW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vg(e){if(!(t=qW.exec(e)))throw new Error("invalid format: "+e);var t;return new hP({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}vg.prototype=hP.prototype;function hP(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}hP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function WW(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var B6;function GW(e,t){var r=Jv(e,t);if(!r)return e+"";var n=r[0],s=r[1],d=s-(B6=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,h=n.length;return d===h?n:d>h?n+new Array(d-h+1).join("0"):d>0?n.slice(0,d)+"."+n.slice(d):"0."+new Array(1-d).join("0")+Jv(e,Math.max(0,t+d-1))[0]}function Zk(e,t){var r=Jv(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const Kk={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:$W,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Zk(e*100,t),r:Zk,s:GW,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Xk(e){return e}var Yk=Array.prototype.map,Jk=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function HW(e){var t=e.grouping===void 0||e.thousands===void 0?Xk:VW(Yk.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",d=e.numerals===void 0?Xk:UW(Yk.call(e.numerals,String)),h=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",_=e.nan===void 0?"NaN":e.nan+"";function w(A){A=vg(A);var M=A.fill,N=A.align,U=A.sign,B=A.symbol,L=A.zero,K=A.width,Q=A.comma,J=A.precision,ie=A.trim,Z=A.type;Z==="n"?(Q=!0,Z="g"):Kk[Z]||(J===void 0&&(J=12),ie=!0,Z="g"),(L||M==="0"&&N==="=")&&(L=!0,M="0",N="=");var X=B==="$"?r:B==="#"&&/[boxX]/.test(Z)?"0"+Z.toLowerCase():"",le=B==="$"?n:/[%p]/.test(Z)?h:"",de=Kk[Z],Pe=/[defgprs%]/.test(Z);J=J===void 0?6:/[gprs]/.test(Z)?Math.max(1,Math.min(21,J)):Math.max(0,Math.min(20,J));function Fe(be){var Ue=X,Ve=le,Ze,Ye,it;if(Z==="c")Ve=de(be)+Ve,be="";else{be=+be;var et=be<0||1/be<0;if(be=isNaN(be)?_:de(Math.abs(be),J),ie&&(be=WW(be)),et&&+be==0&&U!=="+"&&(et=!1),Ue=(et?U==="("?U:l:U==="-"||U==="("?"":U)+Ue,Ve=(Z==="s"?Jk[8+B6/3]:"")+Ve+(et&&U==="("?")":""),Pe){for(Ze=-1,Ye=be.length;++Ze<Ye;)if(it=be.charCodeAt(Ze),48>it||it>57){Ve=(it===46?s+be.slice(Ze+1):be.slice(Ze))+Ve,be=be.slice(0,Ze);break}}}Q&&!L&&(be=t(be,1/0));var Ge=Ue.length+be.length+Ve.length,rt=Ge<K?new Array(K-Ge+1).join(M):"";switch(Q&&L&&(be=t(rt+be,rt.length?K-Ve.length:1/0),rt=""),N){case"<":be=Ue+be+Ve+rt;break;case"=":be=Ue+rt+be+Ve;break;case"^":be=rt.slice(0,Ge=rt.length>>1)+Ue+be+Ve+rt.slice(Ge);break;default:be=rt+Ue+be+Ve;break}return d(be)}return Fe.toString=function(){return A+""},Fe}function E(A,M){var N=w((A=vg(A),A.type="f",A)),U=Math.max(-8,Math.min(8,Math.floor(mp(M)/3)))*3,B=Math.pow(10,-U),L=Jk[8+U/3];return function(K){return N(B*K)+L}}return{format:w,formatPrefix:E}}var lv,fP,F6;ZW({thousands:",",grouping:[3],currency:["$",""]});function ZW(e){return lv=HW(e),fP=lv.format,F6=lv.formatPrefix,lv}function KW(e){return Math.max(0,-mp(Math.abs(e)))}function XW(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mp(t)/3)))*3-mp(Math.abs(e)))}function YW(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,mp(t)-mp(e))+1}function $6(e,t,r,n){var s=rS(e,t,r),d;switch(n=vg(n??",f"),n.type){case"s":{var h=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(d=XW(s,h))&&(n.precision=d),F6(n,h)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(d=YW(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=d-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(d=KW(s))&&(n.precision=d-(n.type==="%")*2);break}}return fP(n)}function ch(e){var t=e.domain;return e.ticks=function(r){var n=t();return eS(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return $6(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,d=n.length-1,h=n[s],l=n[d],_,w,E=10;for(l<h&&(w=h,h=l,l=w,w=s,s=d,d=w);E-- >0;){if(w=tS(h,l,r),w===_)return n[s]=h,n[d]=l,t(n);if(w>0)h=Math.floor(h/w)*w,l=Math.ceil(l/w)*w;else if(w<0)h=Math.ceil(h*w)/w,l=Math.floor(l*w)/w;else break;_=w}return e},e}function Qv(){var e=cP();return e.copy=function(){return ty(e,Qv())},Fs.apply(e,arguments),ch(e)}function V6(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Yv),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return V6(e).unknown(t)},e=arguments.length?Array.from(e,Yv):[0,1],ch(r)}function U6(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],d=e[n],h;return d<s&&(h=r,r=n,n=h,h=s,s=d,d=h),e[r]=t.floor(s),e[n]=t.ceil(d),e}function Qk(e){return Math.log(e)}function e3(e){return Math.exp(e)}function JW(e){return-Math.log(-e)}function QW(e){return-Math.exp(-e)}function eG(e){return isFinite(e)?+("1e"+e):e<0?0:e}function tG(e){return e===10?eG:e===Math.E?Math.exp:t=>Math.pow(e,t)}function rG(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function t3(e){return(t,r)=>-e(-t,r)}function dP(e){const t=e(Qk,e3),r=t.domain;let n=10,s,d;function h(){return s=rG(n),d=tG(n),r()[0]<0?(s=t3(s),d=t3(d),e(JW,QW)):e(Qk,e3),t}return t.base=function(l){return arguments.length?(n=+l,h()):n},t.domain=function(l){return arguments.length?(r(l),h()):r()},t.ticks=l=>{const _=r();let w=_[0],E=_[_.length-1];const A=E<w;A&&([w,E]=[E,w]);let M=s(w),N=s(E),U,B;const L=l==null?10:+l;let K=[];if(!(n%1)&&N-M<L){if(M=Math.floor(M),N=Math.ceil(N),w>0){for(;M<=N;++M)for(U=1;U<n;++U)if(B=M<0?U/d(-M):U*d(M),!(B<w)){if(B>E)break;K.push(B)}}else for(;M<=N;++M)for(U=n-1;U>=1;--U)if(B=M>0?U/d(-M):U*d(M),!(B<w)){if(B>E)break;K.push(B)}K.length*2<L&&(K=eS(w,E,L))}else K=eS(M,N,Math.min(N-M,L)).map(d);return A?K.reverse():K},t.tickFormat=(l,_)=>{if(l==null&&(l=10),_==null&&(_=n===10?"s":","),typeof _!="function"&&(!(n%1)&&(_=vg(_)).precision==null&&(_.trim=!0),_=fP(_)),l===1/0)return _;const w=Math.max(1,n*l/t.ticks().length);return E=>{let A=E/d(Math.round(s(E)));return A*n<n-.5&&(A*=n),A<=w?_(E):""}},t.nice=()=>r(U6(r(),{floor:l=>d(Math.floor(s(l))),ceil:l=>d(Math.ceil(s(l)))})),t}function q6(){const e=dP(Q0()).domain([1,10]);return e.copy=()=>ty(e,q6()).base(e.base()),Fs.apply(e,arguments),e}function r3(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function n3(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function pP(e){var t=1,r=e(r3(t),n3(t));return r.constant=function(n){return arguments.length?e(r3(t=+n),n3(t)):t},ch(r)}function W6(){var e=pP(Q0());return e.copy=function(){return ty(e,W6()).constant(e.constant())},Fs.apply(e,arguments)}function i3(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function nG(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function iG(e){return e<0?-e*e:e*e}function mP(e){var t=e(co,co),r=1;function n(){return r===1?e(co,co):r===.5?e(nG,iG):e(i3(r),i3(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},ch(t)}function gP(){var e=mP(Q0());return e.copy=function(){return ty(e,gP()).exponent(e.exponent())},Fs.apply(e,arguments),e}function aG(){return gP.apply(null,arguments).exponent(.5)}function a3(e){return Math.sign(e)*e*e}function oG(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function G6(){var e=cP(),t=[0,1],r=!1,n;function s(d){var h=oG(e(d));return isNaN(h)?n:r?Math.round(h):h}return s.invert=function(d){return e.invert(a3(d))},s.domain=function(d){return arguments.length?(e.domain(d),s):e.domain()},s.range=function(d){return arguments.length?(e.range((t=Array.from(d,Yv)).map(a3)),s):t.slice()},s.rangeRound=function(d){return s.range(d).round(!0)},s.round=function(d){return arguments.length?(r=!!d,s):r},s.clamp=function(d){return arguments.length?(e.clamp(d),s):e.clamp()},s.unknown=function(d){return arguments.length?(n=d,s):n},s.copy=function(){return G6(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Fs.apply(s,arguments),ch(s)}function H6(){var e=[],t=[],r=[],n;function s(){var h=0,l=Math.max(1,t.length);for(r=new Array(l-1);++h<l;)r[h-1]=hW(e,h/l);return d}function d(h){return h==null||isNaN(h=+h)?n:t[Qg(r,h)]}return d.invertExtent=function(h){var l=t.indexOf(h);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},d.domain=function(h){if(!arguments.length)return e.slice();e=[];for(let l of h)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(rh),s()},d.range=function(h){return arguments.length?(t=Array.from(h),s()):t.slice()},d.unknown=function(h){return arguments.length?(n=h,d):n},d.quantiles=function(){return r.slice()},d.copy=function(){return H6().domain(e).range(t).unknown(n)},Fs.apply(d,arguments)}function Z6(){var e=0,t=1,r=1,n=[.5],s=[0,1],d;function h(_){return _!=null&&_<=_?s[Qg(n,_,0,r)]:d}function l(){var _=-1;for(n=new Array(r);++_<r;)n[_]=((_+1)*t-(_-r)*e)/(r+1);return h}return h.domain=function(_){return arguments.length?([e,t]=_,e=+e,t=+t,l()):[e,t]},h.range=function(_){return arguments.length?(r=(s=Array.from(_)).length-1,l()):s.slice()},h.invertExtent=function(_){var w=s.indexOf(_);return w<0?[NaN,NaN]:w<1?[e,n[0]]:w>=r?[n[r-1],t]:[n[w-1],n[w]]},h.unknown=function(_){return arguments.length&&(d=_),h},h.thresholds=function(){return n.slice()},h.copy=function(){return Z6().domain([e,t]).range(s).unknown(d)},Fs.apply(ch(h),arguments)}function K6(){var e=[.5],t=[0,1],r,n=1;function s(d){return d!=null&&d<=d?t[Qg(e,d,0,n)]:r}return s.domain=function(d){return arguments.length?(e=Array.from(d),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(d){return arguments.length?(t=Array.from(d),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(d){var h=t.indexOf(d);return[e[h-1],e[h]]},s.unknown=function(d){return arguments.length?(r=d,s):r},s.copy=function(){return K6().domain(e).range(t).unknown(r)},Fs.apply(s,arguments)}const xw=new Date,bw=new Date;function ji(e,t,r,n){function s(d){return e(d=arguments.length===0?new Date:new Date(+d)),d}return s.floor=d=>(e(d=new Date(+d)),d),s.ceil=d=>(e(d=new Date(d-1)),t(d,1),e(d),d),s.round=d=>{const h=s(d),l=s.ceil(d);return d-h<l-d?h:l},s.offset=(d,h)=>(t(d=new Date(+d),h==null?1:Math.floor(h)),d),s.range=(d,h,l)=>{const _=[];if(d=s.ceil(d),l=l==null?1:Math.floor(l),!(d<h)||!(l>0))return _;let w;do _.push(w=new Date(+d)),t(d,l),e(d);while(w<d&&d<h);return _},s.filter=d=>ji(h=>{if(h>=h)for(;e(h),!d(h);)h.setTime(h-1)},(h,l)=>{if(h>=h)if(l<0)for(;++l<=0;)for(;t(h,-1),!d(h););else for(;--l>=0;)for(;t(h,1),!d(h););}),r&&(s.count=(d,h)=>(xw.setTime(+d),bw.setTime(+h),e(xw),e(bw),Math.floor(r(xw,bw))),s.every=d=>(d=Math.floor(d),!isFinite(d)||!(d>0)?null:d>1?s.filter(n?h=>n(h)%d===0:h=>s.count(0,h)%d===0):s)),s}const e0=ji(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);e0.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ji(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):e0);e0.range;const Yu=1e3,zs=Yu*60,Ju=zs*60,oc=Ju*24,yP=oc*7,o3=oc*30,ww=oc*365,Ef=ji(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Yu)},(e,t)=>(t-e)/Yu,e=>e.getUTCSeconds());Ef.range;const vP=ji(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yu)},(e,t)=>{e.setTime(+e+t*zs)},(e,t)=>(t-e)/zs,e=>e.getMinutes());vP.range;const _P=ji(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*zs)},(e,t)=>(t-e)/zs,e=>e.getUTCMinutes());_P.range;const xP=ji(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yu-e.getMinutes()*zs)},(e,t)=>{e.setTime(+e+t*Ju)},(e,t)=>(t-e)/Ju,e=>e.getHours());xP.range;const bP=ji(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ju)},(e,t)=>(t-e)/Ju,e=>e.getUTCHours());bP.range;const ry=ji(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*zs)/oc,e=>e.getDate()-1);ry.range;const e_=ji(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/oc,e=>e.getUTCDate()-1);e_.range;const X6=ji(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/oc,e=>Math.floor(e/oc));X6.range;function qf(e){return ji(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*zs)/yP)}const t_=qf(0),t0=qf(1),sG=qf(2),lG=qf(3),gp=qf(4),uG=qf(5),cG=qf(6);t_.range;t0.range;sG.range;lG.range;gp.range;uG.range;cG.range;function Wf(e){return ji(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/yP)}const r_=Wf(0),r0=Wf(1),hG=Wf(2),fG=Wf(3),yp=Wf(4),dG=Wf(5),pG=Wf(6);r_.range;r0.range;hG.range;fG.range;yp.range;dG.range;pG.range;const wP=ji(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());wP.range;const SP=ji(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());SP.range;const sc=ji(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());sc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ji(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});sc.range;const lc=ji(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());lc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ji(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});lc.range;function Y6(e,t,r,n,s,d){const h=[[Ef,1,Yu],[Ef,5,5*Yu],[Ef,15,15*Yu],[Ef,30,30*Yu],[d,1,zs],[d,5,5*zs],[d,15,15*zs],[d,30,30*zs],[s,1,Ju],[s,3,3*Ju],[s,6,6*Ju],[s,12,12*Ju],[n,1,oc],[n,2,2*oc],[r,1,yP],[t,1,o3],[t,3,3*o3],[e,1,ww]];function l(w,E,A){const M=E<w;M&&([w,E]=[E,w]);const N=A&&typeof A.range=="function"?A:_(w,E,A),U=N?N.range(w,+E+1):[];return M?U.reverse():U}function _(w,E,A){const M=Math.abs(E-w)/A,N=aP(([,,L])=>L).right(h,M);if(N===h.length)return e.every(rS(w/ww,E/ww,A));if(N===0)return e0.every(Math.max(rS(w,E,A),1));const[U,B]=h[M/h[N-1][2]<h[N][2]/M?N-1:N];return U.every(B)}return[l,_]}const[mG,gG]=Y6(lc,SP,r_,X6,bP,_P),[yG,vG]=Y6(sc,wP,t_,ry,xP,vP);function Sw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Tw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Om(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function _G(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,d=e.days,h=e.shortDays,l=e.months,_=e.shortMonths,w=Dm(s),E=Rm(s),A=Dm(d),M=Rm(d),N=Dm(h),U=Rm(h),B=Dm(l),L=Rm(l),K=Dm(_),Q=Rm(_),J={a:et,A:Ge,b:rt,B:ge,c:null,d:f3,e:f3,f:VG,g:JG,G:eH,H:BG,I:FG,j:$G,L:J6,m:UG,M:qG,p:ne,q:Ce,Q:m3,s:g3,S:WG,u:GG,U:HG,V:ZG,w:KG,W:XG,x:null,X:null,y:YG,Y:QG,Z:tH,"%":p3},ie={a:nt,A:ht,b:pt,B:At,c:null,d:d3,e:d3,f:aH,g:mH,G:yH,H:rH,I:nH,j:iH,L:eR,m:oH,M:sH,p:_t,q:wt,Q:m3,s:g3,S:lH,u:uH,U:cH,V:hH,w:fH,W:dH,x:null,X:null,y:pH,Y:gH,Z:vH,"%":p3},Z={a:Fe,A:be,b:Ue,B:Ve,c:Ze,d:c3,e:c3,f:jG,g:u3,G:l3,H:h3,I:h3,j:kG,L:RG,m:IG,M:OG,p:Pe,q:MG,Q:LG,s:NG,S:DG,u:TG,U:PG,V:AG,w:SG,W:EG,x:Ye,X:it,y:u3,Y:l3,Z:CG,"%":zG};J.x=X(r,J),J.X=X(n,J),J.c=X(t,J),ie.x=X(r,ie),ie.X=X(n,ie),ie.c=X(t,ie);function X(ot,It){return function(Ft){var at=[],ar=-1,jt=0,br=ot.length,$e,Er,hn;for(Ft instanceof Date||(Ft=new Date(+Ft));++ar<br;)ot.charCodeAt(ar)===37&&(at.push(ot.slice(jt,ar)),(Er=s3[$e=ot.charAt(++ar)])!=null?$e=ot.charAt(++ar):Er=$e==="e"?" ":"0",(hn=It[$e])&&($e=hn(Ft,Er)),at.push($e),jt=ar+1);return at.push(ot.slice(jt,ar)),at.join("")}}function le(ot,It){return function(Ft){var at=Om(1900,void 0,1),ar=de(at,ot,Ft+="",0),jt,br;if(ar!=Ft.length)return null;if("Q"in at)return new Date(at.Q);if("s"in at)return new Date(at.s*1e3+("L"in at?at.L:0));if(It&&!("Z"in at)&&(at.Z=0),"p"in at&&(at.H=at.H%12+at.p*12),at.m===void 0&&(at.m="q"in at?at.q:0),"V"in at){if(at.V<1||at.V>53)return null;"w"in at||(at.w=1),"Z"in at?(jt=Tw(Om(at.y,0,1)),br=jt.getUTCDay(),jt=br>4||br===0?r0.ceil(jt):r0(jt),jt=e_.offset(jt,(at.V-1)*7),at.y=jt.getUTCFullYear(),at.m=jt.getUTCMonth(),at.d=jt.getUTCDate()+(at.w+6)%7):(jt=Sw(Om(at.y,0,1)),br=jt.getDay(),jt=br>4||br===0?t0.ceil(jt):t0(jt),jt=ry.offset(jt,(at.V-1)*7),at.y=jt.getFullYear(),at.m=jt.getMonth(),at.d=jt.getDate()+(at.w+6)%7)}else("W"in at||"U"in at)&&("w"in at||(at.w="u"in at?at.u%7:"W"in at?1:0),br="Z"in at?Tw(Om(at.y,0,1)).getUTCDay():Sw(Om(at.y,0,1)).getDay(),at.m=0,at.d="W"in at?(at.w+6)%7+at.W*7-(br+5)%7:at.w+at.U*7-(br+6)%7);return"Z"in at?(at.H+=at.Z/100|0,at.M+=at.Z%100,Tw(at)):Sw(at)}}function de(ot,It,Ft,at){for(var ar=0,jt=It.length,br=Ft.length,$e,Er;ar<jt;){if(at>=br)return-1;if($e=It.charCodeAt(ar++),$e===37){if($e=It.charAt(ar++),Er=Z[$e in s3?It.charAt(ar++):$e],!Er||(at=Er(ot,Ft,at))<0)return-1}else if($e!=Ft.charCodeAt(at++))return-1}return at}function Pe(ot,It,Ft){var at=w.exec(It.slice(Ft));return at?(ot.p=E.get(at[0].toLowerCase()),Ft+at[0].length):-1}function Fe(ot,It,Ft){var at=N.exec(It.slice(Ft));return at?(ot.w=U.get(at[0].toLowerCase()),Ft+at[0].length):-1}function be(ot,It,Ft){var at=A.exec(It.slice(Ft));return at?(ot.w=M.get(at[0].toLowerCase()),Ft+at[0].length):-1}function Ue(ot,It,Ft){var at=K.exec(It.slice(Ft));return at?(ot.m=Q.get(at[0].toLowerCase()),Ft+at[0].length):-1}function Ve(ot,It,Ft){var at=B.exec(It.slice(Ft));return at?(ot.m=L.get(at[0].toLowerCase()),Ft+at[0].length):-1}function Ze(ot,It,Ft){return de(ot,t,It,Ft)}function Ye(ot,It,Ft){return de(ot,r,It,Ft)}function it(ot,It,Ft){return de(ot,n,It,Ft)}function et(ot){return h[ot.getDay()]}function Ge(ot){return d[ot.getDay()]}function rt(ot){return _[ot.getMonth()]}function ge(ot){return l[ot.getMonth()]}function ne(ot){return s[+(ot.getHours()>=12)]}function Ce(ot){return 1+~~(ot.getMonth()/3)}function nt(ot){return h[ot.getUTCDay()]}function ht(ot){return d[ot.getUTCDay()]}function pt(ot){return _[ot.getUTCMonth()]}function At(ot){return l[ot.getUTCMonth()]}function _t(ot){return s[+(ot.getUTCHours()>=12)]}function wt(ot){return 1+~~(ot.getUTCMonth()/3)}return{format:function(ot){var It=X(ot+="",J);return It.toString=function(){return ot},It},parse:function(ot){var It=le(ot+="",!1);return It.toString=function(){return ot},It},utcFormat:function(ot){var It=X(ot+="",ie);return It.toString=function(){return ot},It},utcParse:function(ot){var It=le(ot+="",!0);return It.toString=function(){return ot},It}}}var s3={"-":"",_:" ",0:"0"},ea=/^\s*\d+/,xG=/^%/,bG=/[\\^$*+?|[\]().{}]/g;function Qr(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",d=s.length;return n+(d<r?new Array(r-d+1).join(t)+s:s)}function wG(e){return e.replace(bG,"\\$&")}function Dm(e){return new RegExp("^(?:"+e.map(wG).join("|")+")","i")}function Rm(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function SG(e,t,r){var n=ea.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function TG(e,t,r){var n=ea.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function PG(e,t,r){var n=ea.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function AG(e,t,r){var n=ea.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function EG(e,t,r){var n=ea.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function l3(e,t,r){var n=ea.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function u3(e,t,r){var n=ea.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function CG(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function MG(e,t,r){var n=ea.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function IG(e,t,r){var n=ea.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function c3(e,t,r){var n=ea.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function kG(e,t,r){var n=ea.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function h3(e,t,r){var n=ea.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function OG(e,t,r){var n=ea.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function DG(e,t,r){var n=ea.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function RG(e,t,r){var n=ea.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function jG(e,t,r){var n=ea.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function zG(e,t,r){var n=xG.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function LG(e,t,r){var n=ea.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function NG(e,t,r){var n=ea.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function f3(e,t){return Qr(e.getDate(),t,2)}function BG(e,t){return Qr(e.getHours(),t,2)}function FG(e,t){return Qr(e.getHours()%12||12,t,2)}function $G(e,t){return Qr(1+ry.count(sc(e),e),t,3)}function J6(e,t){return Qr(e.getMilliseconds(),t,3)}function VG(e,t){return J6(e,t)+"000"}function UG(e,t){return Qr(e.getMonth()+1,t,2)}function qG(e,t){return Qr(e.getMinutes(),t,2)}function WG(e,t){return Qr(e.getSeconds(),t,2)}function GG(e){var t=e.getDay();return t===0?7:t}function HG(e,t){return Qr(t_.count(sc(e)-1,e),t,2)}function Q6(e){var t=e.getDay();return t>=4||t===0?gp(e):gp.ceil(e)}function ZG(e,t){return e=Q6(e),Qr(gp.count(sc(e),e)+(sc(e).getDay()===4),t,2)}function KG(e){return e.getDay()}function XG(e,t){return Qr(t0.count(sc(e)-1,e),t,2)}function YG(e,t){return Qr(e.getFullYear()%100,t,2)}function JG(e,t){return e=Q6(e),Qr(e.getFullYear()%100,t,2)}function QG(e,t){return Qr(e.getFullYear()%1e4,t,4)}function eH(e,t){var r=e.getDay();return e=r>=4||r===0?gp(e):gp.ceil(e),Qr(e.getFullYear()%1e4,t,4)}function tH(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Qr(t/60|0,"0",2)+Qr(t%60,"0",2)}function d3(e,t){return Qr(e.getUTCDate(),t,2)}function rH(e,t){return Qr(e.getUTCHours(),t,2)}function nH(e,t){return Qr(e.getUTCHours()%12||12,t,2)}function iH(e,t){return Qr(1+e_.count(lc(e),e),t,3)}function eR(e,t){return Qr(e.getUTCMilliseconds(),t,3)}function aH(e,t){return eR(e,t)+"000"}function oH(e,t){return Qr(e.getUTCMonth()+1,t,2)}function sH(e,t){return Qr(e.getUTCMinutes(),t,2)}function lH(e,t){return Qr(e.getUTCSeconds(),t,2)}function uH(e){var t=e.getUTCDay();return t===0?7:t}function cH(e,t){return Qr(r_.count(lc(e)-1,e),t,2)}function tR(e){var t=e.getUTCDay();return t>=4||t===0?yp(e):yp.ceil(e)}function hH(e,t){return e=tR(e),Qr(yp.count(lc(e),e)+(lc(e).getUTCDay()===4),t,2)}function fH(e){return e.getUTCDay()}function dH(e,t){return Qr(r0.count(lc(e)-1,e),t,2)}function pH(e,t){return Qr(e.getUTCFullYear()%100,t,2)}function mH(e,t){return e=tR(e),Qr(e.getUTCFullYear()%100,t,2)}function gH(e,t){return Qr(e.getUTCFullYear()%1e4,t,4)}function yH(e,t){var r=e.getUTCDay();return e=r>=4||r===0?yp(e):yp.ceil(e),Qr(e.getUTCFullYear()%1e4,t,4)}function vH(){return"+0000"}function p3(){return"%"}function m3(e){return+e}function g3(e){return Math.floor(+e/1e3)}var Wd,rR,nR;_H({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _H(e){return Wd=_G(e),rR=Wd.format,Wd.parse,nR=Wd.utcFormat,Wd.utcParse,Wd}function xH(e){return new Date(e)}function bH(e){return e instanceof Date?+e:+new Date(+e)}function TP(e,t,r,n,s,d,h,l,_,w){var E=cP(),A=E.invert,M=E.domain,N=w(".%L"),U=w(":%S"),B=w("%I:%M"),L=w("%I %p"),K=w("%a %d"),Q=w("%b %d"),J=w("%B"),ie=w("%Y");function Z(X){return(_(X)<X?N:l(X)<X?U:h(X)<X?B:d(X)<X?L:n(X)<X?s(X)<X?K:Q:r(X)<X?J:ie)(X)}return E.invert=function(X){return new Date(A(X))},E.domain=function(X){return arguments.length?M(Array.from(X,bH)):M().map(xH)},E.ticks=function(X){var le=M();return e(le[0],le[le.length-1],X??10)},E.tickFormat=function(X,le){return le==null?Z:w(le)},E.nice=function(X){var le=M();return(!X||typeof X.range!="function")&&(X=t(le[0],le[le.length-1],X??10)),X?M(U6(le,X)):E},E.copy=function(){return ty(E,TP(e,t,r,n,s,d,h,l,_,w))},E}function wH(){return Fs.apply(TP(yG,vG,sc,wP,t_,ry,xP,vP,Ef,rR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function SH(){return Fs.apply(TP(mG,gG,lc,SP,r_,e_,bP,_P,Ef,nR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function n_(){var e=0,t=1,r,n,s,d,h=co,l=!1,_;function w(A){return A==null||isNaN(A=+A)?_:h(s===0?.5:(A=(d(A)-r)*s,l?Math.max(0,Math.min(1,A)):A))}w.domain=function(A){return arguments.length?([e,t]=A,r=d(e=+e),n=d(t=+t),s=r===n?0:1/(n-r),w):[e,t]},w.clamp=function(A){return arguments.length?(l=!!A,w):l},w.interpolator=function(A){return arguments.length?(h=A,w):h};function E(A){return function(M){var N,U;return arguments.length?([N,U]=M,h=A(N,U),w):[h(0),h(1)]}}return w.range=E(Bp),w.rangeRound=E(uP),w.unknown=function(A){return arguments.length?(_=A,w):_},function(A){return d=A,r=A(e),n=A(t),s=r===n?0:1/(n-r),w}}function hh(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function iR(){var e=ch(n_()(co));return e.copy=function(){return hh(e,iR())},fc.apply(e,arguments)}function aR(){var e=dP(n_()).domain([1,10]);return e.copy=function(){return hh(e,aR()).base(e.base())},fc.apply(e,arguments)}function oR(){var e=pP(n_());return e.copy=function(){return hh(e,oR()).constant(e.constant())},fc.apply(e,arguments)}function PP(){var e=mP(n_());return e.copy=function(){return hh(e,PP()).exponent(e.exponent())},fc.apply(e,arguments)}function TH(){return PP.apply(null,arguments).exponent(.5)}function sR(){var e=[],t=co;function r(n){if(n!=null&&!isNaN(n=+n))return t((Qg(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(rh),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,d)=>cW(e,d/n))},r.copy=function(){return sR(t).domain(e)},fc.apply(r,arguments)}function i_(){var e=0,t=.5,r=1,n=1,s,d,h,l,_,w=co,E,A=!1,M;function N(B){return isNaN(B=+B)?M:(B=.5+((B=+E(B))-d)*(n*B<n*d?l:_),w(A?Math.max(0,Math.min(1,B)):B))}N.domain=function(B){return arguments.length?([e,t,r]=B,s=E(e=+e),d=E(t=+t),h=E(r=+r),l=s===d?0:.5/(d-s),_=d===h?0:.5/(h-d),n=d<s?-1:1,N):[e,t,r]},N.clamp=function(B){return arguments.length?(A=!!B,N):A},N.interpolator=function(B){return arguments.length?(w=B,N):w};function U(B){return function(L){var K,Q,J;return arguments.length?([K,Q,J]=L,w=zW(B,[K,Q,J]),N):[w(0),w(.5),w(1)]}}return N.range=U(Bp),N.rangeRound=U(uP),N.unknown=function(B){return arguments.length?(M=B,N):M},function(B){return E=B,s=B(e),d=B(t),h=B(r),l=s===d?0:.5/(d-s),_=d===h?0:.5/(h-d),n=d<s?-1:1,N}}function lR(){var e=ch(i_()(co));return e.copy=function(){return hh(e,lR())},fc.apply(e,arguments)}function uR(){var e=dP(i_()).domain([.1,1,10]);return e.copy=function(){return hh(e,uR()).base(e.base())},fc.apply(e,arguments)}function cR(){var e=pP(i_());return e.copy=function(){return hh(e,cR()).constant(e.constant())},fc.apply(e,arguments)}function AP(){var e=mP(i_());return e.copy=function(){return hh(e,AP()).exponent(e.exponent())},fc.apply(e,arguments)}function PH(){return AP.apply(null,arguments).exponent(.5)}const y3=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:pg,scaleDiverging:lR,scaleDivergingLog:uR,scaleDivergingPow:AP,scaleDivergingSqrt:PH,scaleDivergingSymlog:cR,scaleIdentity:V6,scaleImplicit:nS,scaleLinear:Qv,scaleLog:q6,scaleOrdinal:oP,scalePoint:Xm,scalePow:gP,scaleQuantile:H6,scaleQuantize:Z6,scaleRadial:G6,scaleSequential:iR,scaleSequentialLog:aR,scaleSequentialPow:PP,scaleSequentialQuantile:sR,scaleSequentialSqrt:TH,scaleSequentialSymlog:oR,scaleSqrt:aG,scaleSymlog:W6,scaleThreshold:K6,scaleTime:wH,scaleUtc:SH,tickFormat:$6},Symbol.toStringTag,{value:"Module"}));var Pw,v3;function hR(){if(v3)return Pw;v3=1;var e=jp();function t(r,n,s){for(var d=-1,h=r.length;++d<h;){var l=r[d],_=n(l);if(_!=null&&(w===void 0?_===_&&!e(_):s(_,w)))var w=_,E=l}return E}return Pw=t,Pw}var Aw,_3;function AH(){if(_3)return Aw;_3=1;function e(t,r){return t>r}return Aw=e,Aw}var Ew,x3;function EH(){if(x3)return Ew;x3=1;var e=hR(),t=AH(),r=Lp();function n(s){return s&&s.length?e(s,r,t):void 0}return Ew=n,Ew}var CH=EH();const a_=pn(CH);var Cw,b3;function MH(){if(b3)return Cw;b3=1;function e(t,r){return t<r}return Cw=e,Cw}var Mw,w3;function IH(){if(w3)return Mw;w3=1;var e=hR(),t=MH(),r=Lp();function n(s){return s&&s.length?e(s,r,t):void 0}return Mw=n,Mw}var kH=IH();const o_=pn(kH);var Iw,S3;function OH(){if(S3)return Iw;S3=1;var e=VT(),t=uh(),r=_6(),n=Eo();function s(d,h){var l=n(d)?e:r;return l(d,t(h,3))}return Iw=s,Iw}var kw,T3;function DH(){if(T3)return kw;T3=1;var e=y6(),t=OH();function r(n,s){return e(t(n,s),1)}return kw=r,kw}var RH=DH();const jH=pn(RH);var Ow,P3;function zH(){if(P3)return Ow;P3=1;var e=tP();function t(r,n){return e(r,n)}return Ow=t,Ow}var LH=zH();const s_=pn(LH);var Fp=1e9,NH={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},CP,$n=!0,Bs="[DecimalError] ",Of=Bs+"Invalid argument: ",EP=Bs+"Exponent out of range: ",$p=Math.floor,Sf=Math.pow,BH=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,is,Qi=1e7,jn=7,fR=9007199254740991,n0=$p(fR/jn),Xt={};Xt.absoluteValue=Xt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Xt.comparedTo=Xt.cmp=function(e){var t,r,n,s,d=this;if(e=new d.constructor(e),d.s!==e.s)return d.s||-e.s;if(d.e!==e.e)return d.e>e.e^d.s<0?1:-1;for(n=d.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(d.d[t]!==e.d[t])return d.d[t]>e.d[t]^d.s<0?1:-1;return n===s?0:n>s^d.s<0?1:-1};Xt.decimalPlaces=Xt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*jn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Xt.dividedBy=Xt.div=function(e){return ic(this,new this.constructor(e))};Xt.dividedToIntegerBy=Xt.idiv=function(e){var t=this,r=t.constructor;return Sn(ic(t,new r(e),0,1),r.precision)};Xt.equals=Xt.eq=function(e){return!this.cmp(e)};Xt.exponent=function(){return wi(this)};Xt.greaterThan=Xt.gt=function(e){return this.cmp(e)>0};Xt.greaterThanOrEqualTo=Xt.gte=function(e){return this.cmp(e)>=0};Xt.isInteger=Xt.isint=function(){return this.e>this.d.length-2};Xt.isNegative=Xt.isneg=function(){return this.s<0};Xt.isPositive=Xt.ispos=function(){return this.s>0};Xt.isZero=function(){return this.s===0};Xt.lessThan=Xt.lt=function(e){return this.cmp(e)<0};Xt.lessThanOrEqualTo=Xt.lte=function(e){return this.cmp(e)<1};Xt.logarithm=Xt.log=function(e){var t,r=this,n=r.constructor,s=n.precision,d=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(is))throw Error(Bs+"NaN");if(r.s<1)throw Error(Bs+(r.s?"NaN":"-Infinity"));return r.eq(is)?new n(0):($n=!1,t=ic(_g(r,d),_g(e,d),d),$n=!0,Sn(t,s))};Xt.minus=Xt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?mR(t,e):dR(t,(e.s=-e.s,e))};Xt.modulo=Xt.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Bs+"NaN");return r.s?($n=!1,t=ic(r,e,0,1).times(e),$n=!0,r.minus(t)):Sn(new n(r),s)};Xt.naturalExponential=Xt.exp=function(){return pR(this)};Xt.naturalLogarithm=Xt.ln=function(){return _g(this)};Xt.negated=Xt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Xt.plus=Xt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?dR(t,e):mR(t,(e.s=-e.s,e))};Xt.precision=Xt.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Of+e);if(t=wi(s)+1,n=s.d.length-1,r=n*jn+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Xt.squareRoot=Xt.sqrt=function(){var e,t,r,n,s,d,h,l=this,_=l.constructor;if(l.s<1){if(!l.s)return new _(0);throw Error(Bs+"NaN")}for(e=wi(l),$n=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=su(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=$p((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new _(t)):n=new _(s.toString()),r=_.precision,s=h=r+3;;)if(d=n,n=d.plus(ic(l,d,h+2)).times(.5),su(d.d).slice(0,h)===(t=su(n.d)).slice(0,h)){if(t=t.slice(h-3,h+1),s==h&&t=="4999"){if(Sn(d,r+1,0),d.times(d).eq(l)){n=d;break}}else if(t!="9999")break;h+=4}return $n=!0,Sn(n,r)};Xt.times=Xt.mul=function(e){var t,r,n,s,d,h,l,_,w,E=this,A=E.constructor,M=E.d,N=(e=new A(e)).d;if(!E.s||!e.s)return new A(0);for(e.s*=E.s,r=E.e+e.e,_=M.length,w=N.length,_<w&&(d=M,M=N,N=d,h=_,_=w,w=h),d=[],h=_+w,n=h;n--;)d.push(0);for(n=w;--n>=0;){for(t=0,s=_+n;s>n;)l=d[s]+N[n]*M[s-n-1]+t,d[s--]=l%Qi|0,t=l/Qi|0;d[s]=(d[s]+t)%Qi|0}for(;!d[--h];)d.pop();return t?++r:d.shift(),e.d=d,e.e=r,$n?Sn(e,A.precision):e};Xt.toDecimalPlaces=Xt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(fu(e,0,Fp),t===void 0?t=n.rounding:fu(t,0,8),Sn(r,e+wi(r)+1,t))};Xt.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=zf(n,!0):(fu(e,0,Fp),t===void 0?t=s.rounding:fu(t,0,8),n=Sn(new s(n),e+1,t),r=zf(n,!0,e+1)),r};Xt.toFixed=function(e,t){var r,n,s=this,d=s.constructor;return e===void 0?zf(s):(fu(e,0,Fp),t===void 0?t=d.rounding:fu(t,0,8),n=Sn(new d(s),e+wi(s)+1,t),r=zf(n.abs(),!1,e+wi(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Xt.toInteger=Xt.toint=function(){var e=this,t=e.constructor;return Sn(new t(e),wi(e)+1,t.rounding)};Xt.toNumber=function(){return+this};Xt.toPower=Xt.pow=function(e){var t,r,n,s,d,h,l=this,_=l.constructor,w=12,E=+(e=new _(e));if(!e.s)return new _(is);if(l=new _(l),!l.s){if(e.s<1)throw Error(Bs+"Infinity");return l}if(l.eq(is))return l;if(n=_.precision,e.eq(is))return Sn(l,n);if(t=e.e,r=e.d.length-1,h=t>=r,d=l.s,h){if((r=E<0?-E:E)<=fR){for(s=new _(is),t=Math.ceil(n/jn+4),$n=!1;r%2&&(s=s.times(l),E3(s.d,t)),r=$p(r/2),r!==0;)l=l.times(l),E3(l.d,t);return $n=!0,e.s<0?new _(is).div(s):Sn(s,n)}}else if(d<0)throw Error(Bs+"NaN");return d=d<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,$n=!1,s=e.times(_g(l,n+w)),$n=!0,s=pR(s),s.s=d,s};Xt.toPrecision=function(e,t){var r,n,s=this,d=s.constructor;return e===void 0?(r=wi(s),n=zf(s,r<=d.toExpNeg||r>=d.toExpPos)):(fu(e,1,Fp),t===void 0?t=d.rounding:fu(t,0,8),s=Sn(new d(s),e,t),r=wi(s),n=zf(s,e<=r||r<=d.toExpNeg,e)),n};Xt.toSignificantDigits=Xt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(fu(e,1,Fp),t===void 0?t=n.rounding:fu(t,0,8)),Sn(new n(r),e,t)};Xt.toString=Xt.valueOf=Xt.val=Xt.toJSON=Xt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=wi(e),r=e.constructor;return zf(e,t<=r.toExpNeg||t>=r.toExpPos)};function dR(e,t){var r,n,s,d,h,l,_,w,E=e.constructor,A=E.precision;if(!e.s||!t.s)return t.s||(t=new E(e)),$n?Sn(t,A):t;if(_=e.d,w=t.d,h=e.e,s=t.e,_=_.slice(),d=h-s,d){for(d<0?(n=_,d=-d,l=w.length):(n=w,s=h,l=_.length),h=Math.ceil(A/jn),l=h>l?h+1:l+1,d>l&&(d=l,n.length=1),n.reverse();d--;)n.push(0);n.reverse()}for(l=_.length,d=w.length,l-d<0&&(d=l,n=w,w=_,_=n),r=0;d;)r=(_[--d]=_[d]+w[d]+r)/Qi|0,_[d]%=Qi;for(r&&(_.unshift(r),++s),l=_.length;_[--l]==0;)_.pop();return t.d=_,t.e=s,$n?Sn(t,A):t}function fu(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Of+e)}function su(e){var t,r,n,s=e.length-1,d="",h=e[0];if(s>0){for(d+=h,t=1;t<s;t++)n=e[t]+"",r=jn-n.length,r&&(d+=Yc(r)),d+=n;h=e[t],n=h+"",r=jn-n.length,r&&(d+=Yc(r))}else if(h===0)return"0";for(;h%10===0;)h/=10;return d+h}var ic=(function(){function e(n,s){var d,h=0,l=n.length;for(n=n.slice();l--;)d=n[l]*s+h,n[l]=d%Qi|0,h=d/Qi|0;return h&&n.unshift(h),n}function t(n,s,d,h){var l,_;if(d!=h)_=d>h?1:-1;else for(l=_=0;l<d;l++)if(n[l]!=s[l]){_=n[l]>s[l]?1:-1;break}return _}function r(n,s,d){for(var h=0;d--;)n[d]-=h,h=n[d]<s[d]?1:0,n[d]=h*Qi+n[d]-s[d];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,d,h){var l,_,w,E,A,M,N,U,B,L,K,Q,J,ie,Z,X,le,de,Pe=n.constructor,Fe=n.s==s.s?1:-1,be=n.d,Ue=s.d;if(!n.s)return new Pe(n);if(!s.s)throw Error(Bs+"Division by zero");for(_=n.e-s.e,le=Ue.length,Z=be.length,N=new Pe(Fe),U=N.d=[],w=0;Ue[w]==(be[w]||0);)++w;if(Ue[w]>(be[w]||0)&&--_,d==null?Q=d=Pe.precision:h?Q=d+(wi(n)-wi(s))+1:Q=d,Q<0)return new Pe(0);if(Q=Q/jn+2|0,w=0,le==1)for(E=0,Ue=Ue[0],Q++;(w<Z||E)&&Q--;w++)J=E*Qi+(be[w]||0),U[w]=J/Ue|0,E=J%Ue|0;else{for(E=Qi/(Ue[0]+1)|0,E>1&&(Ue=e(Ue,E),be=e(be,E),le=Ue.length,Z=be.length),ie=le,B=be.slice(0,le),L=B.length;L<le;)B[L++]=0;de=Ue.slice(),de.unshift(0),X=Ue[0],Ue[1]>=Qi/2&&++X;do E=0,l=t(Ue,B,le,L),l<0?(K=B[0],le!=L&&(K=K*Qi+(B[1]||0)),E=K/X|0,E>1?(E>=Qi&&(E=Qi-1),A=e(Ue,E),M=A.length,L=B.length,l=t(A,B,M,L),l==1&&(E--,r(A,le<M?de:Ue,M))):(E==0&&(l=E=1),A=Ue.slice()),M=A.length,M<L&&A.unshift(0),r(B,A,L),l==-1&&(L=B.length,l=t(Ue,B,le,L),l<1&&(E++,r(B,le<L?de:Ue,L))),L=B.length):l===0&&(E++,B=[0]),U[w++]=E,l&&B[0]?B[L++]=be[ie]||0:(B=[be[ie]],L=1);while((ie++<Z||B[0]!==void 0)&&Q--)}return U[0]||U.shift(),N.e=_,Sn(N,h?d+wi(N)+1:d)}})();function pR(e,t){var r,n,s,d,h,l,_=0,w=0,E=e.constructor,A=E.precision;if(wi(e)>16)throw Error(EP+wi(e));if(!e.s)return new E(is);for($n=!1,l=A,h=new E(.03125);e.abs().gte(.1);)e=e.times(h),w+=5;for(n=Math.log(Sf(2,w))/Math.LN10*2+5|0,l+=n,r=s=d=new E(is),E.precision=l;;){if(s=Sn(s.times(e),l),r=r.times(++_),h=d.plus(ic(s,r,l)),su(h.d).slice(0,l)===su(d.d).slice(0,l)){for(;w--;)d=Sn(d.times(d),l);return E.precision=A,t==null?($n=!0,Sn(d,A)):d}d=h}}function wi(e){for(var t=e.e*jn,r=e.d[0];r>=10;r/=10)t++;return t}function Dw(e,t,r){if(t>e.LN10.sd())throw $n=!0,r&&(e.precision=r),Error(Bs+"LN10 precision limit exceeded");return Sn(new e(e.LN10),t)}function Yc(e){for(var t="";e--;)t+="0";return t}function _g(e,t){var r,n,s,d,h,l,_,w,E,A=1,M=10,N=e,U=N.d,B=N.constructor,L=B.precision;if(N.s<1)throw Error(Bs+(N.s?"NaN":"-Infinity"));if(N.eq(is))return new B(0);if(t==null?($n=!1,w=L):w=t,N.eq(10))return t==null&&($n=!0),Dw(B,w);if(w+=M,B.precision=w,r=su(U),n=r.charAt(0),d=wi(N),Math.abs(d)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)N=N.times(e),r=su(N.d),n=r.charAt(0),A++;d=wi(N),n>1?(N=new B("0."+r),d++):N=new B(n+"."+r.slice(1))}else return _=Dw(B,w+2,L).times(d+""),N=_g(new B(n+"."+r.slice(1)),w-M).plus(_),B.precision=L,t==null?($n=!0,Sn(N,L)):N;for(l=h=N=ic(N.minus(is),N.plus(is),w),E=Sn(N.times(N),w),s=3;;){if(h=Sn(h.times(E),w),_=l.plus(ic(h,new B(s),w)),su(_.d).slice(0,w)===su(l.d).slice(0,w))return l=l.times(2),d!==0&&(l=l.plus(Dw(B,w+2,L).times(d+""))),l=ic(l,new B(A),w),B.precision=L,t==null?($n=!0,Sn(l,L)):l;l=_,s+=2}}function A3(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=$p(r/jn),e.d=[],n=(r+1)%jn,r<0&&(n+=jn),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=jn;n<s;)e.d.push(+t.slice(n,n+=jn));t=t.slice(n),n=jn-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),$n&&(e.e>n0||e.e<-n0))throw Error(EP+r)}else e.s=0,e.e=0,e.d=[0];return e}function Sn(e,t,r){var n,s,d,h,l,_,w,E,A=e.d;for(h=1,d=A[0];d>=10;d/=10)h++;if(n=t-h,n<0)n+=jn,s=t,w=A[E=0];else{if(E=Math.ceil((n+1)/jn),d=A.length,E>=d)return e;for(w=d=A[E],h=1;d>=10;d/=10)h++;n%=jn,s=n-jn+h}if(r!==void 0&&(d=Sf(10,h-s-1),l=w/d%10|0,_=t<0||A[E+1]!==void 0||w%d,_=r<4?(l||_)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||_||r==6&&(n>0?s>0?w/Sf(10,h-s):0:A[E-1])%10&1||r==(e.s<0?8:7))),t<1||!A[0])return _?(d=wi(e),A.length=1,t=t-d-1,A[0]=Sf(10,(jn-t%jn)%jn),e.e=$p(-t/jn)||0):(A.length=1,A[0]=e.e=e.s=0),e;if(n==0?(A.length=E,d=1,E--):(A.length=E+1,d=Sf(10,jn-n),A[E]=s>0?(w/Sf(10,h-s)%Sf(10,s)|0)*d:0),_)for(;;)if(E==0){(A[0]+=d)==Qi&&(A[0]=1,++e.e);break}else{if(A[E]+=d,A[E]!=Qi)break;A[E--]=0,d=1}for(n=A.length;A[--n]===0;)A.pop();if($n&&(e.e>n0||e.e<-n0))throw Error(EP+wi(e));return e}function mR(e,t){var r,n,s,d,h,l,_,w,E,A,M=e.constructor,N=M.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new M(e),$n?Sn(t,N):t;if(_=e.d,A=t.d,n=t.e,w=e.e,_=_.slice(),h=w-n,h){for(E=h<0,E?(r=_,h=-h,l=A.length):(r=A,n=w,l=_.length),s=Math.max(Math.ceil(N/jn),l)+2,h>s&&(h=s,r.length=1),r.reverse(),s=h;s--;)r.push(0);r.reverse()}else{for(s=_.length,l=A.length,E=s<l,E&&(l=s),s=0;s<l;s++)if(_[s]!=A[s]){E=_[s]<A[s];break}h=0}for(E&&(r=_,_=A,A=r,t.s=-t.s),l=_.length,s=A.length-l;s>0;--s)_[l++]=0;for(s=A.length;s>h;){if(_[--s]<A[s]){for(d=s;d&&_[--d]===0;)_[d]=Qi-1;--_[d],_[s]+=Qi}_[s]-=A[s]}for(;_[--l]===0;)_.pop();for(;_[0]===0;_.shift())--n;return _[0]?(t.d=_,t.e=n,$n?Sn(t,N):t):new M(0)}function zf(e,t,r){var n,s=wi(e),d=su(e.d),h=d.length;return t?(r&&(n=r-h)>0?d=d.charAt(0)+"."+d.slice(1)+Yc(n):h>1&&(d=d.charAt(0)+"."+d.slice(1)),d=d+(s<0?"e":"e+")+s):s<0?(d="0."+Yc(-s-1)+d,r&&(n=r-h)>0&&(d+=Yc(n))):s>=h?(d+=Yc(s+1-h),r&&(n=r-s-1)>0&&(d=d+"."+Yc(n))):((n=s+1)<h&&(d=d.slice(0,n)+"."+d.slice(n)),r&&(n=r-h)>0&&(s+1===h&&(d+="."),d+=Yc(n))),e.s<0?"-"+d:d}function E3(e,t){if(e.length>t)return e.length=t,!0}function gR(e){var t,r,n;function s(d){var h=this;if(!(h instanceof s))return new s(d);if(h.constructor=s,d instanceof s){h.s=d.s,h.e=d.e,h.d=(d=d.d)?d.slice():d;return}if(typeof d=="number"){if(d*0!==0)throw Error(Of+d);if(d>0)h.s=1;else if(d<0)d=-d,h.s=-1;else{h.s=0,h.e=0,h.d=[0];return}if(d===~~d&&d<1e7){h.e=0,h.d=[d];return}return A3(h,d.toString())}else if(typeof d!="string")throw Error(Of+d);if(d.charCodeAt(0)===45?(d=d.slice(1),h.s=-1):h.s=1,BH.test(d))A3(h,d);else throw Error(Of+d)}if(s.prototype=Xt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=gR,s.config=s.set=FH,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function FH(e){if(!e||typeof e!="object")throw Error(Bs+"Object expected");var t,r,n,s=["precision",1,Fp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if($p(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Of+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Of+r+": "+n);return this}var CP=gR(NH);is=new CP(1);const _n=CP;function $H(e){return WH(e)||qH(e)||UH(e)||VH()}function VH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UH(e,t){if(e){if(typeof e=="string")return sS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sS(e,t)}}function qH(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function WH(e){if(Array.isArray(e))return sS(e)}function sS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var GH=function(t){return t},yR={},vR=function(t){return t===yR},C3=function(t){return function r(){return arguments.length===0||arguments.length===1&&vR(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},HH=function e(t,r){return t===1?r:C3(function(){for(var n=arguments.length,s=new Array(n),d=0;d<n;d++)s[d]=arguments[d];var h=s.filter(function(l){return l!==yR}).length;return h>=t?r.apply(void 0,s):e(t-h,C3(function(){for(var l=arguments.length,_=new Array(l),w=0;w<l;w++)_[w]=arguments[w];var E=s.map(function(A){return vR(A)?_.shift():A});return r.apply(void 0,$H(E).concat(_))}))})},l_=function(t){return HH(t.length,t)},lS=function(t,r){for(var n=[],s=t;s<r;++s)n[s-t]=s;return n},ZH=l_(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),KH=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return GH;var s=r.reverse(),d=s[0],h=s.slice(1);return function(){return h.reduce(function(l,_){return _(l)},d.apply(void 0,arguments))}},uS=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},_R=function(t){var r=null,n=null;return function(){for(var s=arguments.length,d=new Array(s),h=0;h<s;h++)d[h]=arguments[h];return r&&d.every(function(l,_){return l===r[_]})||(r=d,n=t.apply(void 0,d)),n}};function XH(e){var t;return e===0?t=1:t=Math.floor(new _n(e).abs().log(10).toNumber())+1,t}function YH(e,t,r){for(var n=new _n(e),s=0,d=[];n.lt(t)&&s<1e5;)d.push(n.toNumber()),n=n.add(r),s++;return d}var JH=l_(function(e,t,r){var n=+e,s=+t;return n+r*(s-n)}),QH=l_(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),eZ=l_(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const u_={rangeStep:YH,getDigitCount:XH,interpolateNumber:JH,uninterpolateNumber:QH,uninterpolateTruncation:eZ};function cS(e){return nZ(e)||rZ(e)||xR(e)||tZ()}function tZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rZ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function nZ(e){if(Array.isArray(e))return hS(e)}function xg(e,t){return oZ(e)||aZ(e,t)||xR(e,t)||iZ()}function iZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xR(e,t){if(e){if(typeof e=="string")return hS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hS(e,t)}}function hS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function aZ(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,s=!1,d=void 0;try{for(var h=e[Symbol.iterator](),l;!(n=(l=h.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(_){s=!0,d=_}finally{try{!n&&h.return!=null&&h.return()}finally{if(s)throw d}}return r}}function oZ(e){if(Array.isArray(e))return e}function bR(e){var t=xg(e,2),r=t[0],n=t[1],s=r,d=n;return r>n&&(s=n,d=r),[s,d]}function wR(e,t,r){if(e.lte(0))return new _n(0);var n=u_.getDigitCount(e.toNumber()),s=new _n(10).pow(n),d=e.div(s),h=n!==1?.05:.1,l=new _n(Math.ceil(d.div(h).toNumber())).add(r).mul(h),_=l.mul(s);return t?_:new _n(Math.ceil(_))}function sZ(e,t,r){var n=1,s=new _n(e);if(!s.isint()&&r){var d=Math.abs(e);d<1?(n=new _n(10).pow(u_.getDigitCount(e)-1),s=new _n(Math.floor(s.div(n).toNumber())).mul(n)):d>1&&(s=new _n(Math.floor(e)))}else e===0?s=new _n(Math.floor((t-1)/2)):r||(s=new _n(Math.floor(e)));var h=Math.floor((t-1)/2),l=KH(ZH(function(_){return s.add(new _n(_-h).mul(n)).toNumber()}),lS);return l(0,t)}function SR(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new _n(0),tickMin:new _n(0),tickMax:new _n(0)};var d=wR(new _n(t).sub(e).div(r-1),n,s),h;e<=0&&t>=0?h=new _n(0):(h=new _n(e).add(t).div(2),h=h.sub(new _n(h).mod(d)));var l=Math.ceil(h.sub(e).div(d).toNumber()),_=Math.ceil(new _n(t).sub(h).div(d).toNumber()),w=l+_+1;return w>r?SR(e,t,r,n,s+1):(w<r&&(_=t>0?_+(r-w):_,l=t>0?l:l+(r-w)),{step:d,tickMin:h.sub(new _n(l).mul(d)),tickMax:h.add(new _n(_).mul(d))})}function lZ(e){var t=xg(e,2),r=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=Math.max(s,2),l=bR([r,n]),_=xg(l,2),w=_[0],E=_[1];if(w===-1/0||E===1/0){var A=E===1/0?[w].concat(cS(lS(0,s-1).map(function(){return 1/0}))):[].concat(cS(lS(0,s-1).map(function(){return-1/0})),[E]);return r>n?uS(A):A}if(w===E)return sZ(w,s,d);var M=SR(w,E,h,d),N=M.step,U=M.tickMin,B=M.tickMax,L=u_.rangeStep(U,B.add(new _n(.1).mul(N)),N);return r>n?uS(L):L}function uZ(e,t){var r=xg(e,2),n=r[0],s=r[1],d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=bR([n,s]),l=xg(h,2),_=l[0],w=l[1];if(_===-1/0||w===1/0)return[n,s];if(_===w)return[_];var E=Math.max(t,2),A=wR(new _n(w).sub(_).div(E-1),d,0),M=[].concat(cS(u_.rangeStep(new _n(_),new _n(w).sub(new _n(.99).mul(A)),A)),[w]);return n>s?uS(M):M}var cZ=_R(lZ),hZ=_R(uZ),fZ="Invariant failed";function Lf(e,t){throw new Error(fZ)}var dZ=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function vp(e){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vp(e)}function i0(){return i0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i0.apply(this,arguments)}function pZ(e,t){return vZ(e)||yZ(e,t)||gZ(e,t)||mZ()}function mZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gZ(e,t){if(e){if(typeof e=="string")return M3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M3(e,t)}}function M3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,w=!1;try{if(d=(r=r.call(e)).next,t!==0)for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){w=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(w)throw s}}return l}}function vZ(e){if(Array.isArray(e))return e}function _Z(e,t){if(e==null)return{};var r=xZ(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function xZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function bZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,AR(n.key),n)}}function SZ(e,t,r){return t&&wZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function TZ(e,t,r){return t=a0(t),PZ(e,TR()?Reflect.construct(t,r||[],a0(e).constructor):t.apply(e,r))}function PZ(e,t){if(t&&(vp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AZ(e)}function AZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TR=function(){return!!e})()}function a0(e){return a0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},a0(e)}function EZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fS(e,t)}function fS(e,t){return fS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},fS(e,t)}function PR(e,t,r){return t=AR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AR(e){var t=CZ(e,"string");return vp(t)=="symbol"?t:t+""}function CZ(e,t){if(vp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ny=(function(e){function t(){return bZ(this,t),TZ(this,t,arguments)}return EZ(t,e),SZ(t,[{key:"render",value:function(){var n=this.props,s=n.offset,d=n.layout,h=n.width,l=n.dataKey,_=n.data,w=n.dataPointFormatter,E=n.xAxis,A=n.yAxis,M=_Z(n,dZ),N=qr(M,!1);this.props.direction==="x"&&E.type!=="number"&&Lf();var U=_.map(function(B){var L=w(B,l),K=L.x,Q=L.y,J=L.value,ie=L.errorVal;if(!ie)return null;var Z=[],X,le;if(Array.isArray(ie)){var de=pZ(ie,2);X=de[0],le=de[1]}else X=le=ie;if(d==="vertical"){var Pe=E.scale,Fe=Q+s,be=Fe+h,Ue=Fe-h,Ve=Pe(J-X),Ze=Pe(J+le);Z.push({x1:Ze,y1:be,x2:Ze,y2:Ue}),Z.push({x1:Ve,y1:Fe,x2:Ze,y2:Fe}),Z.push({x1:Ve,y1:be,x2:Ve,y2:Ue})}else if(d==="horizontal"){var Ye=A.scale,it=K+s,et=it-h,Ge=it+h,rt=Ye(J-X),ge=Ye(J+le);Z.push({x1:et,y1:ge,x2:Ge,y2:ge}),Z.push({x1:it,y1:rt,x2:it,y2:ge}),Z.push({x1:et,y1:rt,x2:Ge,y2:rt})}return Le.createElement(fi,i0({className:"recharts-errorBar",key:"bar-".concat(Z.map(function(ne){return"".concat(ne.x1,"-").concat(ne.x2,"-").concat(ne.y1,"-").concat(ne.y2)}))},N),Z.map(function(ne){return Le.createElement("line",i0({},ne,{key:"line-".concat(ne.x1,"-").concat(ne.x2,"-").concat(ne.y1,"-").concat(ne.y2)}))}))});return Le.createElement(fi,{className:"recharts-errorBars"},U)}}])})(Le.Component);PR(ny,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});PR(ny,"displayName","ErrorBar");function bg(e){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}function I3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _f(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I3(Object(r),!0).forEach(function(n){MZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MZ(e,t,r){return t=IZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IZ(e){var t=kZ(e,"string");return bg(t)=="symbol"?t:t+""}function kZ(e,t){if(bg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ER=function(t){var r=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,d=t.legendContent,h=ns(r,If);if(!h)return null;var l=If.defaultProps,_=l!==void 0?_f(_f({},l),h.props):{},w;return h.props&&h.props.payload?w=h.props&&h.props.payload:d==="children"?w=(n||[]).reduce(function(E,A){var M=A.item,N=A.props,U=N.sectors||N.data||[];return E.concat(U.map(function(B){return{type:h.props.iconType||M.props.legendType,value:B.name,color:B.fill,payload:B}}))},[]):w=(n||[]).map(function(E){var A=E.item,M=A.type.defaultProps,N=M!==void 0?_f(_f({},M),A.props):{},U=N.dataKey,B=N.name,L=N.legendType,K=N.hide;return{inactive:K,dataKey:U,type:_.iconType||L||"square",color:MP(A),value:B||U,payload:N}}),_f(_f(_f({},_),If.getWithHeight(h,s)),{},{payload:w,item:h})};function wg(e){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wg(e)}function k3(e){return jZ(e)||RZ(e)||DZ(e)||OZ()}function OZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DZ(e,t){if(e){if(typeof e=="string")return dS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dS(e,t)}}function RZ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jZ(e){if(Array.isArray(e))return dS(e)}function dS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function O3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ni(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O3(Object(r),!0).forEach(function(n){ap(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ap(e,t,r){return t=zZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zZ(e){var t=LZ(e,"string");return wg(t)=="symbol"?t:t+""}function LZ(e,t){if(wg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ss(e,t,r){return Lr(e)||Lr(t)?r:Ri(t)?Ls(e,t,r):Dr(t)?t(e):r}function Ym(e,t,r,n){var s=jH(e,function(l){return ss(l,t)});if(r==="number"){var d=s.filter(function(l){return Bt(l)||parseFloat(l)});return d.length?[o_(d),a_(d)]:[1/0,-1/0]}var h=n?s.filter(function(l){return!Lr(l)}):s;return h.map(function(l){return Ri(l)||l instanceof Date?l:""})}var NZ=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,d=arguments.length>3?arguments[3]:void 0,h=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(d&&d.axisType==="angleAxis"&&Math.abs(Math.abs(d.range[1]-d.range[0])-360)<=1e-6)for(var _=d.range,w=0;w<l;w++){var E=w>0?s[w-1].coordinate:s[l-1].coordinate,A=s[w].coordinate,M=w>=l-1?s[0].coordinate:s[w+1].coordinate,N=void 0;if(yl(A-E)!==yl(M-A)){var U=[];if(yl(M-A)===yl(_[1]-_[0])){N=M;var B=A+_[1]-_[0];U[0]=Math.min(B,(B+E)/2),U[1]=Math.max(B,(B+E)/2)}else{N=E;var L=M+_[1]-_[0];U[0]=Math.min(A,(L+A)/2),U[1]=Math.max(A,(L+A)/2)}var K=[Math.min(A,(N+A)/2),Math.max(A,(N+A)/2)];if(t>K[0]&&t<=K[1]||t>=U[0]&&t<=U[1]){h=s[w].index;break}}else{var Q=Math.min(E,M),J=Math.max(E,M);if(t>(Q+A)/2&&t<=(J+A)/2){h=s[w].index;break}}}else for(var ie=0;ie<l;ie++)if(ie===0&&t<=(n[ie].coordinate+n[ie+1].coordinate)/2||ie>0&&ie<l-1&&t>(n[ie].coordinate+n[ie-1].coordinate)/2&&t<=(n[ie].coordinate+n[ie+1].coordinate)/2||ie===l-1&&t>(n[ie].coordinate+n[ie-1].coordinate)/2){h=n[ie].index;break}return h},MP=function(t){var r,n=t,s=n.type.displayName,d=(r=t.type)!==null&&r!==void 0&&r.defaultProps?ni(ni({},t.type.defaultProps),t.props):t.props,h=d.stroke,l=d.fill,_;switch(s){case"Line":_=h;break;case"Area":case"Radar":_=h&&h!=="none"?h:l;break;default:_=l;break}return _},BZ=function(t){var r=t.barSize,n=t.totalSize,s=t.stackGroups,d=s===void 0?{}:s;if(!d)return{};for(var h={},l=Object.keys(d),_=0,w=l.length;_<w;_++)for(var E=d[l[_]].stackGroups,A=Object.keys(E),M=0,N=A.length;M<N;M++){var U=E[A[M]],B=U.items,L=U.cateAxisId,K=B.filter(function(le){return rc(le.type).indexOf("Bar")>=0});if(K&&K.length){var Q=K[0].type.defaultProps,J=Q!==void 0?ni(ni({},Q),K[0].props):K[0].props,ie=J.barSize,Z=J[L];h[Z]||(h[Z]=[]);var X=Lr(ie)?r:ie;h[Z].push({item:K[0],stackList:K.slice(1),barSize:Lr(X)?void 0:jf(X,n,0)})}}return h},FZ=function(t){var r=t.barGap,n=t.barCategoryGap,s=t.bandSize,d=t.sizeList,h=d===void 0?[]:d,l=t.maxBarSize,_=h.length;if(_<1)return null;var w=jf(r,s,0,!0),E,A=[];if(h[0].barSize===+h[0].barSize){var M=!1,N=s/_,U=h.reduce(function(ie,Z){return ie+Z.barSize||0},0);U+=(_-1)*w,U>=s&&(U-=(_-1)*w,w=0),U>=s&&N>0&&(M=!0,N*=.9,U=_*N);var B=(s-U)/2>>0,L={offset:B-w,size:0};E=h.reduce(function(ie,Z){var X={item:Z.item,position:{offset:L.offset+L.size+w,size:M?N:Z.barSize}},le=[].concat(k3(ie),[X]);return L=le[le.length-1].position,Z.stackList&&Z.stackList.length&&Z.stackList.forEach(function(de){le.push({item:de,position:L})}),le},A)}else{var K=jf(n,s,0,!0);s-2*K-(_-1)*w<=0&&(w=0);var Q=(s-2*K-(_-1)*w)/_;Q>1&&(Q>>=0);var J=l===+l?Math.min(Q,l):Q;E=h.reduce(function(ie,Z,X){var le=[].concat(k3(ie),[{item:Z.item,position:{offset:K+(Q+w)*X+(Q-J)/2,size:J}}]);return Z.stackList&&Z.stackList.length&&Z.stackList.forEach(function(de){le.push({item:de,position:le[le.length-1].position})}),le},A)}return E},$Z=function(t,r,n,s){var d=n.children,h=n.width,l=n.margin,_=h-(l.left||0)-(l.right||0),w=ER({children:d,legendWidth:_});if(w){var E=s||{},A=E.width,M=E.height,N=w.align,U=w.verticalAlign,B=w.layout;if((B==="vertical"||B==="horizontal"&&U==="middle")&&N!=="center"&&Bt(t[N]))return ni(ni({},t),{},ap({},N,t[N]+(A||0)));if((B==="horizontal"||B==="vertical"&&N==="center")&&U!=="middle"&&Bt(t[U]))return ni(ni({},t),{},ap({},U,t[U]+(M||0)))}return t},VZ=function(t,r,n){return Lr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},CR=function(t,r,n,s,d){var h=r.props.children,l=Ns(h,ny).filter(function(w){return VZ(s,d,w.props.direction)});if(l&&l.length){var _=l.map(function(w){return w.props.dataKey});return t.reduce(function(w,E){var A=ss(E,n);if(Lr(A))return w;var M=Array.isArray(A)?[o_(A),a_(A)]:[A,A],N=_.reduce(function(U,B){var L=ss(E,B,0),K=M[0]-Math.abs(Array.isArray(L)?L[0]:L),Q=M[1]+Math.abs(Array.isArray(L)?L[1]:L);return[Math.min(K,U[0]),Math.max(Q,U[1])]},[1/0,-1/0]);return[Math.min(N[0],w[0]),Math.max(N[1],w[1])]},[1/0,-1/0])}return null},UZ=function(t,r,n,s,d){var h=r.map(function(l){return CR(t,l,n,d,s)}).filter(function(l){return!Lr(l)});return h&&h.length?h.reduce(function(l,_){return[Math.min(l[0],_[0]),Math.max(l[1],_[1])]},[1/0,-1/0]):null},MR=function(t,r,n,s,d){var h=r.map(function(_){var w=_.props.dataKey;return n==="number"&&w&&CR(t,_,w,s)||Ym(t,w,n,d)});if(n==="number")return h.reduce(function(_,w){return[Math.min(_[0],w[0]),Math.max(_[1],w[1])]},[1/0,-1/0]);var l={};return h.reduce(function(_,w){for(var E=0,A=w.length;E<A;E++)l[w[E]]||(l[w[E]]=!0,_.push(w[E]));return _},[])},IR=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},kR=function(t,r,n,s){if(s)return t.map(function(_){return _.coordinate});var d,h,l=t.map(function(_){return _.coordinate===r&&(d=!0),_.coordinate===n&&(h=!0),_.coordinate});return d||l.push(r),h||l.push(n),l},Qu=function(t,r,n){if(!t)return null;var s=t.scale,d=t.duplicateDomain,h=t.type,l=t.range,_=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,w=(r||n)&&h==="category"&&s.bandwidth?s.bandwidth()/_:0;if(w=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?yl(l[0]-l[1])*2*w:w,r&&(t.ticks||t.niceTicks)){var E=(t.ticks||t.niceTicks).map(function(A){var M=d?d.indexOf(A):A;return{coordinate:s(M)+w,value:A,offset:w}});return E.filter(function(A){return!Xg(A.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(A,M){return{coordinate:s(A)+w,value:A,index:M,offset:w}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(A){return{coordinate:s(A)+w,value:A,offset:w}}):s.domain().map(function(A,M){return{coordinate:s(A)+w,value:d?d[A]:A,index:M,offset:w}})},Rw=new WeakMap,uv=function(t,r){if(typeof r!="function")return t;Rw.has(t)||Rw.set(t,new WeakMap);var n=Rw.get(t);if(n.has(r))return n.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},qZ=function(t,r,n){var s=t.scale,d=t.type,h=t.layout,l=t.axisType;if(s==="auto")return h==="radial"&&l==="radiusAxis"?{scale:pg(),realScaleType:"band"}:h==="radial"&&l==="angleAxis"?{scale:Qv(),realScaleType:"linear"}:d==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Xm(),realScaleType:"point"}:d==="category"?{scale:pg(),realScaleType:"band"}:{scale:Qv(),realScaleType:"linear"};if(Rf(s)){var _="scale".concat(G0(s));return{scale:(y3[_]||Xm)(),realScaleType:y3[_]?_:"point"}}return Dr(s)?{scale:s}:{scale:Xm(),realScaleType:"point"}},D3=1e-4,WZ=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,s=t.range(),d=Math.min(s[0],s[1])-D3,h=Math.max(s[0],s[1])+D3,l=t(r[0]),_=t(r[n-1]);(l<d||l>h||_<d||_>h)&&t.domain([r[0],r[n-1]])}},GZ=function(t,r){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===r)return t[n].position;return null},HZ=function(t,r){if(!r||r.length!==2||!Bt(r[0])||!Bt(r[1]))return t;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),d=[t[0],t[1]];return(!Bt(t[0])||t[0]<n)&&(d[0]=n),(!Bt(t[1])||t[1]>s)&&(d[1]=s),d[0]>s&&(d[0]=s),d[1]<n&&(d[1]=n),d},ZZ=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var d=0,h=0,l=0;l<r;++l){var _=Xg(t[l][n][1])?t[l][n][0]:t[l][n][1];_>=0?(t[l][n][0]=d,t[l][n][1]=d+_,d=t[l][n][1]):(t[l][n][0]=h,t[l][n][1]=h+_,h=t[l][n][1])}},KZ=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var d=0,h=0;h<r;++h){var l=Xg(t[h][n][1])?t[h][n][0]:t[h][n][1];l>=0?(t[h][n][0]=d,t[h][n][1]=d+l,d=t[h][n][1]):(t[h][n][0]=0,t[h][n][1]=0)}},XZ={sign:ZZ,expand:O7,none:cp,silhouette:D7,wiggle:R7,positive:KZ},YZ=function(t,r,n){var s=r.map(function(l){return l.props.dataKey}),d=XZ[n],h=k7().keys(s).value(function(l,_){return+ss(l,_,0)}).order(U2).offset(d);return h(t)},JZ=function(t,r,n,s,d,h){if(!t)return null;var l=h?r.reverse():r,_={},w=l.reduce(function(A,M){var N,U=(N=M.type)!==null&&N!==void 0&&N.defaultProps?ni(ni({},M.type.defaultProps),M.props):M.props,B=U.stackId,L=U.hide;if(L)return A;var K=U[n],Q=A[K]||{hasStack:!1,stackGroups:{}};if(Ri(B)){var J=Q.stackGroups[B]||{numericAxisId:n,cateAxisId:s,items:[]};J.items.push(M),Q.hasStack=!0,Q.stackGroups[B]=J}else Q.stackGroups[Yg("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[M]};return ni(ni({},A),{},ap({},K,Q))},_),E={};return Object.keys(w).reduce(function(A,M){var N=w[M];if(N.hasStack){var U={};N.stackGroups=Object.keys(N.stackGroups).reduce(function(B,L){var K=N.stackGroups[L];return ni(ni({},B),{},ap({},L,{numericAxisId:n,cateAxisId:s,items:K.items,stackedData:YZ(t,K.items,d)}))},U)}return ni(ni({},A),{},ap({},M,N))},E)},QZ=function(t,r){var n=r.realScaleType,s=r.type,d=r.tickCount,h=r.originalDomain,l=r.allowDecimals,_=n||r.scale;if(_!=="auto"&&_!=="linear")return null;if(d&&s==="number"&&h&&(h[0]==="auto"||h[1]==="auto")){var w=t.domain();if(!w.length)return null;var E=cZ(w,d,l);return t.domain([o_(E),a_(E)]),{niceTicks:E}}if(d&&s==="number"){var A=t.domain(),M=hZ(A,d,l);return{niceTicks:M}}return null};function R3(e){var t=e.axis,r=e.ticks,n=e.bandSize,s=e.entry,d=e.index,h=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Lr(s[t.dataKey])){var l=Dv(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[d]?r[d].coordinate+n/2:null}var _=ss(s,Lr(h)?t.dataKey:h);return Lr(_)?null:t.scale(_)}var j3=function(t){var r=t.axis,n=t.ticks,s=t.offset,d=t.bandSize,h=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+s:null;var _=ss(h,r.dataKey,r.domain[l]);return Lr(_)?null:r.scale(_)-d/2+s},eK=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),d=Math.max(n[0],n[1]);return s<=0&&d>=0?0:d<0?d:s}return n[0]},tK=function(t,r){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?ni(ni({},t.type.defaultProps),t.props):t.props,d=s.stackId;if(Ri(d)){var h=r[d];if(h){var l=h.items.indexOf(t);return l>=0?h.stackedData[l]:null}}return null},rK=function(t){return t.reduce(function(r,n){return[o_(n.concat([r[0]]).filter(Bt)),a_(n.concat([r[1]]).filter(Bt))]},[1/0,-1/0])},OR=function(t,r,n){return Object.keys(t).reduce(function(s,d){var h=t[d],l=h.stackedData,_=l.reduce(function(w,E){var A=rK(E.slice(r,n+1));return[Math.min(w[0],A[0]),Math.max(w[1],A[1])]},[1/0,-1/0]);return[Math.min(_[0],s[0]),Math.max(_[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},z3=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,L3=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pS=function(t,r,n){if(Dr(t))return t(r,n);if(!Array.isArray(t))return r;var s=[];if(Bt(t[0]))s[0]=n?t[0]:Math.min(t[0],r[0]);else if(z3.test(t[0])){var d=+z3.exec(t[0])[1];s[0]=r[0]-d}else Dr(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(Bt(t[1]))s[1]=n?t[1]:Math.max(t[1],r[1]);else if(L3.test(t[1])){var h=+L3.exec(t[1])[1];s[1]=r[1]+h}else Dr(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},o0=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&r&&r.length>=2){for(var d=nP(r,function(A){return A.coordinate}),h=1/0,l=1,_=d.length;l<_;l++){var w=d[l],E=d[l-1];h=Math.min((w.coordinate||0)-(E.coordinate||0),h)}return h===1/0?0:h}return n?void 0:0},N3=function(t,r,n){return!t||!t.length||s_(t,Ls(n,"type.defaultProps.domain"))?r:t},DR=function(t,r){var n=t.type.defaultProps?ni(ni({},t.type.defaultProps),t.props):t.props,s=n.dataKey,d=n.name,h=n.unit,l=n.formatter,_=n.tooltipType,w=n.chartType,E=n.hide;return ni(ni({},qr(t,!1)),{},{dataKey:s,unit:h,formatter:l,name:d||s,color:MP(t),value:ss(r,s),type:_,payload:r,chartType:w,hide:E})};function Sg(e){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sg(e)}function B3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function F3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B3(Object(r),!0).forEach(function(n){nK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nK(e,t,r){return t=iK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iK(e){var t=aK(e,"string");return Sg(t)=="symbol"?t:t+""}function aK(e,t){if(Sg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s0=Math.PI/180,oK=function(t){return t*180/Math.PI},_a=function(t,r,n,s){return{x:t+Math.cos(-s0*s)*n,y:r+Math.sin(-s0*s)*n}},sK=function(t,r){var n=t.x,s=t.y,d=r.x,h=r.y;return Math.sqrt(Math.pow(n-d,2)+Math.pow(s-h,2))},lK=function(t,r){var n=t.x,s=t.y,d=r.cx,h=r.cy,l=sK({x:n,y:s},{x:d,y:h});if(l<=0)return{radius:l};var _=(n-d)/l,w=Math.acos(_);return s>h&&(w=2*Math.PI-w),{radius:l,angle:oK(w),angleInRadian:w}},uK=function(t){var r=t.startAngle,n=t.endAngle,s=Math.floor(r/360),d=Math.floor(n/360),h=Math.min(s,d);return{startAngle:r-h*360,endAngle:n-h*360}},cK=function(t,r){var n=r.startAngle,s=r.endAngle,d=Math.floor(n/360),h=Math.floor(s/360),l=Math.min(d,h);return t+l*360},$3=function(t,r){var n=t.x,s=t.y,d=lK({x:n,y:s},r),h=d.radius,l=d.angle,_=r.innerRadius,w=r.outerRadius;if(h<_||h>w)return!1;if(h===0)return!0;var E=uK(r),A=E.startAngle,M=E.endAngle,N=l,U;if(A<=M){for(;N>M;)N-=360;for(;N<A;)N+=360;U=N>=A&&N<=M}else{for(;N>A;)N-=360;for(;N<M;)N+=360;U=N>=M&&N<=A}return U?F3(F3({},r),{},{radius:h,angle:cK(N,r)}):null};function Tg(e){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tg(e)}var hK=["offset"];function fK(e){return gK(e)||mK(e)||pK(e)||dK()}function dK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pK(e,t){if(e){if(typeof e=="string")return mS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mS(e,t)}}function mK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gK(e){if(Array.isArray(e))return mS(e)}function mS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yK(e,t){if(e==null)return{};var r=vK(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function V3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Di(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V3(Object(r),!0).forEach(function(n){_K(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _K(e,t,r){return t=xK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xK(e){var t=bK(e,"string");return Tg(t)=="symbol"?t:t+""}function bK(e,t){if(Tg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pg(){return Pg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pg.apply(this,arguments)}var wK=function(t){var r=t.value,n=t.formatter,s=Lr(t.children)?r:t.children;return Dr(n)?n(s):s},SK=function(t,r){var n=yl(r-t),s=Math.min(Math.abs(r-t),360);return n*s},TK=function(t,r,n){var s=t.position,d=t.viewBox,h=t.offset,l=t.className,_=d,w=_.cx,E=_.cy,A=_.innerRadius,M=_.outerRadius,N=_.startAngle,U=_.endAngle,B=_.clockWise,L=(A+M)/2,K=SK(N,U),Q=K>=0?1:-1,J,ie;s==="insideStart"?(J=N+Q*h,ie=B):s==="insideEnd"?(J=U-Q*h,ie=!B):s==="end"&&(J=U+Q*h,ie=B),ie=K<=0?ie:!ie;var Z=_a(w,E,L,J),X=_a(w,E,L,J+(ie?1:-1)*359),le="M".concat(Z.x,",").concat(Z.y,`
    A`).concat(L,",").concat(L,",0,1,").concat(ie?0:1,`,
    `).concat(X.x,",").concat(X.y),de=Lr(t.id)?Yg("recharts-radial-line-"):t.id;return Le.createElement("text",Pg({},n,{dominantBaseline:"central",className:Hr("recharts-radial-bar-label",l)}),Le.createElement("defs",null,Le.createElement("path",{id:de,d:le})),Le.createElement("textPath",{xlinkHref:"#".concat(de)},r))},PK=function(t){var r=t.viewBox,n=t.offset,s=t.position,d=r,h=d.cx,l=d.cy,_=d.innerRadius,w=d.outerRadius,E=d.startAngle,A=d.endAngle,M=(E+A)/2;if(s==="outside"){var N=_a(h,l,w+n,M),U=N.x,B=N.y;return{x:U,y:B,textAnchor:U>=h?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:h,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:h,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:h,y:l,textAnchor:"middle",verticalAnchor:"end"};var L=(_+w)/2,K=_a(h,l,L,M),Q=K.x,J=K.y;return{x:Q,y:J,textAnchor:"middle",verticalAnchor:"middle"}},AK=function(t){var r=t.viewBox,n=t.parentViewBox,s=t.offset,d=t.position,h=r,l=h.x,_=h.y,w=h.width,E=h.height,A=E>=0?1:-1,M=A*s,N=A>0?"end":"start",U=A>0?"start":"end",B=w>=0?1:-1,L=B*s,K=B>0?"end":"start",Q=B>0?"start":"end";if(d==="top"){var J={x:l+w/2,y:_-A*s,textAnchor:"middle",verticalAnchor:N};return Di(Di({},J),n?{height:Math.max(_-n.y,0),width:w}:{})}if(d==="bottom"){var ie={x:l+w/2,y:_+E+M,textAnchor:"middle",verticalAnchor:U};return Di(Di({},ie),n?{height:Math.max(n.y+n.height-(_+E),0),width:w}:{})}if(d==="left"){var Z={x:l-L,y:_+E/2,textAnchor:K,verticalAnchor:"middle"};return Di(Di({},Z),n?{width:Math.max(Z.x-n.x,0),height:E}:{})}if(d==="right"){var X={x:l+w+L,y:_+E/2,textAnchor:Q,verticalAnchor:"middle"};return Di(Di({},X),n?{width:Math.max(n.x+n.width-X.x,0),height:E}:{})}var le=n?{width:w,height:E}:{};return d==="insideLeft"?Di({x:l+L,y:_+E/2,textAnchor:Q,verticalAnchor:"middle"},le):d==="insideRight"?Di({x:l+w-L,y:_+E/2,textAnchor:K,verticalAnchor:"middle"},le):d==="insideTop"?Di({x:l+w/2,y:_+M,textAnchor:"middle",verticalAnchor:U},le):d==="insideBottom"?Di({x:l+w/2,y:_+E-M,textAnchor:"middle",verticalAnchor:N},le):d==="insideTopLeft"?Di({x:l+L,y:_+M,textAnchor:Q,verticalAnchor:U},le):d==="insideTopRight"?Di({x:l+w-L,y:_+M,textAnchor:K,verticalAnchor:U},le):d==="insideBottomLeft"?Di({x:l+L,y:_+E-M,textAnchor:Q,verticalAnchor:N},le):d==="insideBottomRight"?Di({x:l+w-L,y:_+E-M,textAnchor:K,verticalAnchor:N},le):zp(d)&&(Bt(d.x)||Pf(d.x))&&(Bt(d.y)||Pf(d.y))?Di({x:l+jf(d.x,w),y:_+jf(d.y,E),textAnchor:"end",verticalAnchor:"end"},le):Di({x:l+w/2,y:_+E/2,textAnchor:"middle",verticalAnchor:"middle"},le)},EK=function(t){return"cx"in t&&Bt(t.cx)};function Fa(e){var t=e.offset,r=t===void 0?5:t,n=yK(e,hK),s=Di({offset:r},n),d=s.viewBox,h=s.position,l=s.value,_=s.children,w=s.content,E=s.className,A=E===void 0?"":E,M=s.textBreakAll;if(!d||Lr(l)&&Lr(_)&&!Se.isValidElement(w)&&!Dr(w))return null;if(Se.isValidElement(w))return Se.cloneElement(w,s);var N;if(Dr(w)){if(N=Se.createElement(w,s),Se.isValidElement(N))return N}else N=wK(s);var U=EK(d),B=qr(s,!0);if(U&&(h==="insideStart"||h==="insideEnd"||h==="end"))return TK(s,N,B);var L=U?PK(s):AK(s);return Le.createElement(Gv,Pg({className:Hr("recharts-label",A)},B,L,{breakAll:M}),N)}Fa.displayName="Label";var RR=function(t){var r=t.cx,n=t.cy,s=t.angle,d=t.startAngle,h=t.endAngle,l=t.r,_=t.radius,w=t.innerRadius,E=t.outerRadius,A=t.x,M=t.y,N=t.top,U=t.left,B=t.width,L=t.height,K=t.clockWise,Q=t.labelViewBox;if(Q)return Q;if(Bt(B)&&Bt(L)){if(Bt(A)&&Bt(M))return{x:A,y:M,width:B,height:L};if(Bt(N)&&Bt(U))return{x:N,y:U,width:B,height:L}}return Bt(A)&&Bt(M)?{x:A,y:M,width:0,height:0}:Bt(r)&&Bt(n)?{cx:r,cy:n,startAngle:d||s||0,endAngle:h||s||0,innerRadius:w||0,outerRadius:E||_||l||0,clockWise:K}:t.viewBox?t.viewBox:{}},CK=function(t,r){return t?t===!0?Le.createElement(Fa,{key:"label-implicit",viewBox:r}):Ri(t)?Le.createElement(Fa,{key:"label-implicit",viewBox:r,value:t}):Se.isValidElement(t)?t.type===Fa?Se.cloneElement(t,{key:"label-implicit",viewBox:r}):Le.createElement(Fa,{key:"label-implicit",content:t,viewBox:r}):Dr(t)?Le.createElement(Fa,{key:"label-implicit",content:t,viewBox:r}):zp(t)?Le.createElement(Fa,Pg({viewBox:r},t,{key:"label-implicit"})):null:null},MK=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,d=RR(t),h=Ns(s,Fa).map(function(_,w){return Se.cloneElement(_,{viewBox:r||d,key:"label-".concat(w)})});if(!n)return h;var l=CK(t.label,r||d);return[l].concat(fK(h))};Fa.parseViewBox=RR;Fa.renderCallByParent=MK;var jw,U3;function IK(){if(U3)return jw;U3=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return jw=e,jw}var kK=IK();const OK=pn(kK);function Ag(e){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ag(e)}var DK=["valueAccessor"],RK=["data","dataKey","clockWise","id","textBreakAll"];function jK(e){return BK(e)||NK(e)||LK(e)||zK()}function zK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LK(e,t){if(e){if(typeof e=="string")return gS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gS(e,t)}}function NK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function BK(e){if(Array.isArray(e))return gS(e)}function gS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l0(){return l0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l0.apply(this,arguments)}function q3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function W3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q3(Object(r),!0).forEach(function(n){FK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FK(e,t,r){return t=$K(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $K(e){var t=VK(e,"string");return Ag(t)=="symbol"?t:t+""}function VK(e,t){if(Ag(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ag(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function G3(e,t){if(e==null)return{};var r=UK(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function UK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var qK=function(t){return Array.isArray(t.value)?OK(t.value):t.value};function nh(e){var t=e.valueAccessor,r=t===void 0?qK:t,n=G3(e,DK),s=n.data,d=n.dataKey,h=n.clockWise,l=n.id,_=n.textBreakAll,w=G3(n,RK);return!s||!s.length?null:Le.createElement(fi,{className:"recharts-label-list"},s.map(function(E,A){var M=Lr(d)?r(E,A):ss(E&&E.payload,d),N=Lr(l)?{}:{id:"".concat(l,"-").concat(A)};return Le.createElement(Fa,l0({},qr(E,!0),w,N,{parentViewBox:E.parentViewBox,value:M,textBreakAll:_,viewBox:Fa.parseViewBox(Lr(h)?E:W3(W3({},E),{},{clockWise:h})),key:"label-".concat(A),index:A}))}))}nh.displayName="LabelList";function WK(e,t){return e?e===!0?Le.createElement(nh,{key:"labelList-implicit",data:t}):Le.isValidElement(e)||Dr(e)?Le.createElement(nh,{key:"labelList-implicit",data:t,content:e}):zp(e)?Le.createElement(nh,l0({data:t},e,{key:"labelList-implicit"})):null:null}function GK(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=Ns(n,nh).map(function(h,l){return Se.cloneElement(h,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var d=WK(e.label,t);return[d].concat(jK(s))}nh.renderCallByParent=GK;function Eg(e){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eg(e)}function yS(){return yS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yS.apply(this,arguments)}function H3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Z3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H3(Object(r),!0).forEach(function(n){HK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HK(e,t,r){return t=ZK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZK(e){var t=KK(e,"string");return Eg(t)=="symbol"?t:t+""}function KK(e,t){if(Eg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Eg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XK=function(t,r){var n=yl(r-t),s=Math.min(Math.abs(r-t),359.999);return n*s},cv=function(t){var r=t.cx,n=t.cy,s=t.radius,d=t.angle,h=t.sign,l=t.isExternal,_=t.cornerRadius,w=t.cornerIsExternal,E=_*(l?1:-1)+s,A=Math.asin(_/E)/s0,M=w?d:d+h*A,N=_a(r,n,E,M),U=_a(r,n,s,M),B=w?d-h*A:d,L=_a(r,n,E*Math.cos(A*s0),B);return{center:N,circleTangency:U,lineTangency:L,theta:A}},jR=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,d=t.outerRadius,h=t.startAngle,l=t.endAngle,_=XK(h,l),w=h+_,E=_a(r,n,d,h),A=_a(r,n,d,w),M="M ".concat(E.x,",").concat(E.y,`
    A `).concat(d,",").concat(d,`,0,
    `).concat(+(Math.abs(_)>180),",").concat(+(h>w),`,
    `).concat(A.x,",").concat(A.y,`
  `);if(s>0){var N=_a(r,n,s,h),U=_a(r,n,s,w);M+="L ".concat(U.x,",").concat(U.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(_)>180),",").concat(+(h<=w),`,
            `).concat(N.x,",").concat(N.y," Z")}else M+="L ".concat(r,",").concat(n," Z");return M},YK=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,d=t.outerRadius,h=t.cornerRadius,l=t.forceCornerRadius,_=t.cornerIsExternal,w=t.startAngle,E=t.endAngle,A=yl(E-w),M=cv({cx:r,cy:n,radius:d,angle:w,sign:A,cornerRadius:h,cornerIsExternal:_}),N=M.circleTangency,U=M.lineTangency,B=M.theta,L=cv({cx:r,cy:n,radius:d,angle:E,sign:-A,cornerRadius:h,cornerIsExternal:_}),K=L.circleTangency,Q=L.lineTangency,J=L.theta,ie=_?Math.abs(w-E):Math.abs(w-E)-B-J;if(ie<0)return l?"M ".concat(U.x,",").concat(U.y,`
        a`).concat(h,",").concat(h,",0,0,1,").concat(h*2,`,0
        a`).concat(h,",").concat(h,",0,0,1,").concat(-h*2,`,0
      `):jR({cx:r,cy:n,innerRadius:s,outerRadius:d,startAngle:w,endAngle:E});var Z="M ".concat(U.x,",").concat(U.y,`
    A`).concat(h,",").concat(h,",0,0,").concat(+(A<0),",").concat(N.x,",").concat(N.y,`
    A`).concat(d,",").concat(d,",0,").concat(+(ie>180),",").concat(+(A<0),",").concat(K.x,",").concat(K.y,`
    A`).concat(h,",").concat(h,",0,0,").concat(+(A<0),",").concat(Q.x,",").concat(Q.y,`
  `);if(s>0){var X=cv({cx:r,cy:n,radius:s,angle:w,sign:A,isExternal:!0,cornerRadius:h,cornerIsExternal:_}),le=X.circleTangency,de=X.lineTangency,Pe=X.theta,Fe=cv({cx:r,cy:n,radius:s,angle:E,sign:-A,isExternal:!0,cornerRadius:h,cornerIsExternal:_}),be=Fe.circleTangency,Ue=Fe.lineTangency,Ve=Fe.theta,Ze=_?Math.abs(w-E):Math.abs(w-E)-Pe-Ve;if(Ze<0&&h===0)return"".concat(Z,"L").concat(r,",").concat(n,"Z");Z+="L".concat(Ue.x,",").concat(Ue.y,`
      A`).concat(h,",").concat(h,",0,0,").concat(+(A<0),",").concat(be.x,",").concat(be.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(Ze>180),",").concat(+(A>0),",").concat(le.x,",").concat(le.y,`
      A`).concat(h,",").concat(h,",0,0,").concat(+(A<0),",").concat(de.x,",").concat(de.y,"Z")}else Z+="L".concat(r,",").concat(n,"Z");return Z},JK={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},zR=function(t){var r=Z3(Z3({},JK),t),n=r.cx,s=r.cy,d=r.innerRadius,h=r.outerRadius,l=r.cornerRadius,_=r.forceCornerRadius,w=r.cornerIsExternal,E=r.startAngle,A=r.endAngle,M=r.className;if(h<d||E===A)return null;var N=Hr("recharts-sector",M),U=h-d,B=jf(l,U,0,!0),L;return B>0&&Math.abs(E-A)<360?L=YK({cx:n,cy:s,innerRadius:d,outerRadius:h,cornerRadius:Math.min(B,U/2),forceCornerRadius:_,cornerIsExternal:w,startAngle:E,endAngle:A}):L=jR({cx:n,cy:s,innerRadius:d,outerRadius:h,startAngle:E,endAngle:A}),Le.createElement("path",yS({},qr(r,!0),{className:N,d:L,role:"img"}))};function Cg(e){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cg(e)}function vS(){return vS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vS.apply(this,arguments)}function K3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function X3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K3(Object(r),!0).forEach(function(n){QK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QK(e,t,r){return t=eX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eX(e){var t=tX(e,"string");return Cg(t)=="symbol"?t:t+""}function tX(e,t){if(Cg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y3={curveBasisClosed:x7,curveBasisOpen:b7,curveBasis:_7,curveBumpX:a7,curveBumpY:o7,curveLinearClosed:w7,curveLinear:Z0,curveMonotoneX:S7,curveMonotoneY:T7,curveNatural:P7,curveStep:A7,curveStepAfter:C7,curveStepBefore:E7},hv=function(t){return t.x===+t.x&&t.y===+t.y},jm=function(t){return t.x},zm=function(t){return t.y},rX=function(t,r){if(Dr(t))return t;var n="curve".concat(G0(t));return(n==="curveMonotone"||n==="curveBump")&&r?Y3["".concat(n).concat(r==="vertical"?"Y":"X")]:Y3[n]||Z0},nX=function(t){var r=t.type,n=r===void 0?"linear":r,s=t.points,d=s===void 0?[]:s,h=t.baseLine,l=t.layout,_=t.connectNulls,w=_===void 0?!1:_,E=rX(n,l),A=w?d.filter(function(B){return hv(B)}):d,M;if(Array.isArray(h)){var N=w?h.filter(function(B){return hv(B)}):h,U=A.map(function(B,L){return X3(X3({},B),{},{base:N[L]})});return l==="vertical"?M=rv().y(zm).x1(jm).x0(function(B){return B.base.x}):M=rv().x(jm).y1(zm).y0(function(B){return B.base.y}),M.defined(hv).curve(E),M(U)}return l==="vertical"&&Bt(h)?M=rv().y(zm).x1(jm).x0(h):Bt(h)?M=rv().x(jm).y1(zm).y0(h):M=FD().x(jm).y(zm),M.defined(hv).curve(E),M(A)},_S=function(t){var r=t.className,n=t.points,s=t.path,d=t.pathRef;if((!n||!n.length)&&!s)return null;var h=n&&n.length?nX(t):s;return Se.createElement("path",vS({},qr(t,!1),Rv(t),{className:Hr("recharts-curve",r),d:h,ref:d}))},zw={exports:{}},Lw,J3;function iX(){if(J3)return Lw;J3=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Lw=e,Lw}var Nw,Q3;function aX(){if(Q3)return Nw;Q3=1;var e=iX();function t(){}function r(){}return r.resetWarningCache=t,Nw=function(){function n(h,l,_,w,E,A){if(A!==e){var M=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw M.name="Invariant Violation",M}}n.isRequired=n;function s(){return n}var d={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return d.PropTypes=d,d},Nw}var eO;function oX(){return eO||(eO=1,zw.exports=aX()()),zw.exports}var sX=oX();const cn=pn(sX);var lX=Object.getOwnPropertyNames,uX=Object.getOwnPropertySymbols,cX=Object.prototype.hasOwnProperty;function tO(e,t){return function(n,s,d){return e(n,s,d)&&t(n,s,d)}}function fv(e){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,s);var d=s.cache,h=d.get(r),l=d.get(n);if(h&&l)return h===n&&l===r;d.set(r,n),d.set(n,r);var _=e(r,n,s);return d.delete(r),d.delete(n),_}}function hX(e){return e!=null?e[Symbol.toStringTag]:void 0}function rO(e){return lX(e).concat(uX(e))}var fX=Object.hasOwn||(function(e,t){return cX.call(e,t)});function Gf(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var dX="__v",pX="__o",mX="_owner",nO=Object.getOwnPropertyDescriptor,iO=Object.keys;function gX(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function yX(e,t){return Gf(e.getTime(),t.getTime())}function vX(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function _X(e,t){return e===t}function aO(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var s=new Array(n),d=e.entries(),h,l,_=0;(h=d.next())&&!h.done;){for(var w=t.entries(),E=!1,A=0;(l=w.next())&&!l.done;){if(s[A]){A++;continue}var M=h.value,N=l.value;if(r.equals(M[0],N[0],_,A,e,t,r)&&r.equals(M[1],N[1],M[0],N[0],e,t,r)){E=s[A]=!0;break}A++}if(!E)return!1;_++}return!0}var xX=Gf;function bX(e,t,r){var n=iO(e),s=n.length;if(iO(t).length!==s)return!1;for(;s-- >0;)if(!LR(e,t,r,n[s]))return!1;return!0}function Lm(e,t,r){var n=rO(e),s=n.length;if(rO(t).length!==s)return!1;for(var d,h,l;s-- >0;)if(d=n[s],!LR(e,t,r,d)||(h=nO(e,d),l=nO(t,d),(h||l)&&(!h||!l||h.configurable!==l.configurable||h.enumerable!==l.enumerable||h.writable!==l.writable)))return!1;return!0}function wX(e,t){return Gf(e.valueOf(),t.valueOf())}function SX(e,t){return e.source===t.source&&e.flags===t.flags}function oO(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var s=new Array(n),d=e.values(),h,l;(h=d.next())&&!h.done;){for(var _=t.values(),w=!1,E=0;(l=_.next())&&!l.done;){if(!s[E]&&r.equals(h.value,l.value,h.value,l.value,e,t,r)){w=s[E]=!0;break}E++}if(!w)return!1}return!0}function TX(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function PX(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function LR(e,t,r,n){return(n===mX||n===pX||n===dX)&&(e.$$typeof||t.$$typeof)?!0:fX(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var AX="[object Arguments]",EX="[object Boolean]",CX="[object Date]",MX="[object Error]",IX="[object Map]",kX="[object Number]",OX="[object Object]",DX="[object RegExp]",RX="[object Set]",jX="[object String]",zX="[object URL]",LX=Array.isArray,sO=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,lO=Object.assign,NX=Object.prototype.toString.call.bind(Object.prototype.toString);function BX(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,s=e.areFunctionsEqual,d=e.areMapsEqual,h=e.areNumbersEqual,l=e.areObjectsEqual,_=e.arePrimitiveWrappersEqual,w=e.areRegExpsEqual,E=e.areSetsEqual,A=e.areTypedArraysEqual,M=e.areUrlsEqual,N=e.unknownTagComparators;return function(B,L,K){if(B===L)return!0;if(B==null||L==null)return!1;var Q=typeof B;if(Q!==typeof L)return!1;if(Q!=="object")return Q==="number"?h(B,L,K):Q==="function"?s(B,L,K):!1;var J=B.constructor;if(J!==L.constructor)return!1;if(J===Object)return l(B,L,K);if(LX(B))return t(B,L,K);if(sO!=null&&sO(B))return A(B,L,K);if(J===Date)return r(B,L,K);if(J===RegExp)return w(B,L,K);if(J===Map)return d(B,L,K);if(J===Set)return E(B,L,K);var ie=NX(B);if(ie===CX)return r(B,L,K);if(ie===DX)return w(B,L,K);if(ie===IX)return d(B,L,K);if(ie===RX)return E(B,L,K);if(ie===OX)return typeof B.then!="function"&&typeof L.then!="function"&&l(B,L,K);if(ie===zX)return M(B,L,K);if(ie===MX)return n(B,L,K);if(ie===AX)return l(B,L,K);if(ie===EX||ie===kX||ie===jX)return _(B,L,K);if(N){var Z=N[ie];if(!Z){var X=hX(B);X&&(Z=N[X])}if(Z)return Z(B,L,K)}return!1}}function FX(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,s={areArraysEqual:n?Lm:gX,areDatesEqual:yX,areErrorsEqual:vX,areFunctionsEqual:_X,areMapsEqual:n?tO(aO,Lm):aO,areNumbersEqual:xX,areObjectsEqual:n?Lm:bX,arePrimitiveWrappersEqual:wX,areRegExpsEqual:SX,areSetsEqual:n?tO(oO,Lm):oO,areTypedArraysEqual:n?Lm:TX,areUrlsEqual:PX,unknownTagComparators:void 0};if(r&&(s=lO({},s,r(s))),t){var d=fv(s.areArraysEqual),h=fv(s.areMapsEqual),l=fv(s.areObjectsEqual),_=fv(s.areSetsEqual);s=lO({},s,{areArraysEqual:d,areMapsEqual:h,areObjectsEqual:l,areSetsEqual:_})}return s}function $X(e){return function(t,r,n,s,d,h,l){return e(t,r,l)}}function VX(e){var t=e.circular,r=e.comparator,n=e.createState,s=e.equals,d=e.strict;if(n)return function(_,w){var E=n(),A=E.cache,M=A===void 0?t?new WeakMap:void 0:A,N=E.meta;return r(_,w,{cache:M,equals:s,meta:N,strict:d})};if(t)return function(_,w){return r(_,w,{cache:new WeakMap,equals:s,meta:void 0,strict:d})};var h={cache:void 0,equals:s,meta:void 0,strict:d};return function(_,w){return r(_,w,h)}}var UX=fh();fh({strict:!0});fh({circular:!0});fh({circular:!0,strict:!0});fh({createInternalComparator:function(){return Gf}});fh({strict:!0,createInternalComparator:function(){return Gf}});fh({circular:!0,createInternalComparator:function(){return Gf}});fh({circular:!0,createInternalComparator:function(){return Gf},strict:!0});function fh(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,s=e.createState,d=e.strict,h=d===void 0?!1:d,l=FX(e),_=BX(l),w=n?n(_):$X(_);return VX({circular:r,comparator:_,createState:s,equals:w,strict:h})}function qX(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function uO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(d){r<0&&(r=d),d-r>t?(e(d),r=-1):qX(s)};requestAnimationFrame(n)}function xS(e){"@babel/helpers - typeof";return xS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xS(e)}function WX(e){return KX(e)||ZX(e)||HX(e)||GX()}function GX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HX(e,t){if(e){if(typeof e=="string")return cO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cO(e,t)}}function cO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ZX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function KX(e){if(Array.isArray(e))return e}function XX(){var e={},t=function(){return null},r=!1,n=function s(d){if(!r){if(Array.isArray(d)){if(!d.length)return;var h=d,l=WX(h),_=l[0],w=l.slice(1);if(typeof _=="number"){uO(s.bind(null,w),_);return}s(_),uO(s.bind(null,w));return}xS(d)==="object"&&(e=d,t(e)),typeof d=="function"&&d()}};return{stop:function(){r=!0},start:function(d){r=!1,n(d)},subscribe:function(d){return t=d,function(){t=function(){return null}}}}}function Mg(e){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mg(e)}function hO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hO(Object(r),!0).forEach(function(n){NR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NR(e,t,r){return t=YX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YX(e){var t=JX(e,"string");return Mg(t)==="symbol"?t:String(t)}function JX(e,t){if(Mg(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QX=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,s){return n.filter(function(d){return s.includes(d)})})},eY=function(t){return t},tY=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Jm=function(t,r){return Object.keys(r).reduce(function(n,s){return fO(fO({},n),{},NR({},s,t(s,r[s])))},{})},dO=function(t,r,n){return t.map(function(s){return"".concat(tY(s)," ").concat(r,"ms ").concat(n)}).join(",")};function rY(e,t){return aY(e)||iY(e,t)||BR(e,t)||nY()}function nY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,w=!1;try{if(d=(r=r.call(e)).next,t!==0)for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){w=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(w)throw s}}return l}}function aY(e){if(Array.isArray(e))return e}function oY(e){return uY(e)||lY(e)||BR(e)||sY()}function sY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BR(e,t){if(e){if(typeof e=="string")return bS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bS(e,t)}}function lY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uY(e){if(Array.isArray(e))return bS(e)}function bS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u0=1e-4,FR=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},$R=function(t,r){return t.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},pO=function(t,r){return function(n){var s=FR(t,r);return $R(s,n)}},cY=function(t,r){return function(n){var s=FR(t,r),d=[].concat(oY(s.map(function(h,l){return h*l}).slice(1)),[0]);return $R(d,n)}},mO=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0],d=r[1],h=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,d=0,h=1,l=1;break;case"ease":s=.25,d=.1,h=.25,l=1;break;case"ease-in":s=.42,d=0,h=1,l=1;break;case"ease-out":s=.42,d=0,h=.58,l=1;break;case"ease-in-out":s=0,d=0,h=.58,l=1;break;default:{var _=r[0].split("(");if(_[0]==="cubic-bezier"&&_[1].split(")")[0].split(",").length===4){var w=_[1].split(")")[0].split(",").map(function(L){return parseFloat(L)}),E=rY(w,4);s=E[0],d=E[1],h=E[2],l=E[3]}}}var A=pO(s,h),M=pO(d,l),N=cY(s,h),U=function(K){return K>1?1:K<0?0:K},B=function(K){for(var Q=K>1?1:K,J=Q,ie=0;ie<8;++ie){var Z=A(J)-Q,X=N(J);if(Math.abs(Z-Q)<u0||X<u0)return M(J);J=U(J-Z/X)}return M(J)};return B.isStepper=!1,B},hY=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,s=t.damping,d=s===void 0?8:s,h=t.dt,l=h===void 0?17:h,_=function(E,A,M){var N=-(E-A)*n,U=M*d,B=M+(N-U)*l/1e3,L=M*l/1e3+E;return Math.abs(L-A)<u0&&Math.abs(B)<u0?[A,0]:[L,B]};return _.isStepper=!0,_.dt=l,_},fY=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return mO(s);case"spring":return hY();default:if(s.split("(")[0]==="cubic-bezier")return mO(s)}return typeof s=="function"?s:null};function Ig(e){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ig(e)}function gO(e){return mY(e)||pY(e)||VR(e)||dY()}function dY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mY(e){if(Array.isArray(e))return SS(e)}function yO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ya(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yO(Object(r),!0).forEach(function(n){wS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wS(e,t,r){return t=gY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gY(e){var t=yY(e,"string");return Ig(t)==="symbol"?t:String(t)}function yY(e,t){if(Ig(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ig(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vY(e,t){return bY(e)||xY(e,t)||VR(e,t)||_Y()}function _Y(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VR(e,t){if(e){if(typeof e=="string")return SS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SS(e,t)}}function SS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,w=!1;try{if(d=(r=r.call(e)).next,t!==0)for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){w=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(w)throw s}}return l}}function bY(e){if(Array.isArray(e))return e}var c0=function(t,r,n){return t+(r-t)*n},TS=function(t){var r=t.from,n=t.to;return r!==n},wY=function e(t,r,n){var s=Jm(function(d,h){if(TS(h)){var l=t(h.from,h.to,h.velocity),_=vY(l,2),w=_[0],E=_[1];return ya(ya({},h),{},{from:w,velocity:E})}return h},r);return n<1?Jm(function(d,h){return TS(h)?ya(ya({},h),{},{velocity:c0(h.velocity,s[d].velocity,n),from:c0(h.from,s[d].from,n)}):h},r):e(t,s,n-1)};const SY=(function(e,t,r,n,s){var d=QX(e,t),h=d.reduce(function(L,K){return ya(ya({},L),{},wS({},K,[e[K],t[K]]))},{}),l=d.reduce(function(L,K){return ya(ya({},L),{},wS({},K,{from:e[K],velocity:0,to:t[K]}))},{}),_=-1,w,E,A=function(){return null},M=function(){return Jm(function(K,Q){return Q.from},l)},N=function(){return!Object.values(l).filter(TS).length},U=function(K){w||(w=K);var Q=K-w,J=Q/r.dt;l=wY(r,l,J),s(ya(ya(ya({},e),t),M())),w=K,N()||(_=requestAnimationFrame(A))},B=function(K){E||(E=K);var Q=(K-E)/n,J=Jm(function(Z,X){return c0.apply(void 0,gO(X).concat([r(Q)]))},h);if(s(ya(ya(ya({},e),t),J)),Q<1)_=requestAnimationFrame(A);else{var ie=Jm(function(Z,X){return c0.apply(void 0,gO(X).concat([r(1)]))},h);s(ya(ya(ya({},e),t),ie))}};return A=r.isStepper?U:B,function(){return requestAnimationFrame(A),function(){cancelAnimationFrame(_)}}});function _p(e){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_p(e)}var TY=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function PY(e,t){if(e==null)return{};var r=AY(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function AY(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,d;for(d=0;d<n.length;d++)s=n[d],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Bw(e){return IY(e)||MY(e)||CY(e)||EY()}function EY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CY(e,t){if(e){if(typeof e=="string")return PS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PS(e,t)}}function MY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function IY(e){if(Array.isArray(e))return PS(e)}function PS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vO(Object(r),!0).forEach(function(n){qm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qm(e,t,r){return t=UR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UR(n.key),n)}}function DY(e,t,r){return t&&OY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function UR(e){var t=RY(e,"string");return _p(t)==="symbol"?t:String(t)}function RY(e,t){if(_p(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_p(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AS(e,t)}function AS(e,t){return AS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},AS(e,t)}function zY(e){var t=LY();return function(){var n=h0(e),s;if(t){var d=h0(this).constructor;s=Reflect.construct(n,arguments,d)}else s=n.apply(this,arguments);return ES(this,s)}}function ES(e,t){if(t&&(_p(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CS(e)}function CS(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LY(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function h0(e){return h0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},h0(e)}var uc=(function(e){jY(r,e);var t=zY(r);function r(n,s){var d;kY(this,r),d=t.call(this,n,s);var h=d.props,l=h.isActive,_=h.attributeName,w=h.from,E=h.to,A=h.steps,M=h.children,N=h.duration;if(d.handleStyleChange=d.handleStyleChange.bind(CS(d)),d.changeStyle=d.changeStyle.bind(CS(d)),!l||N<=0)return d.state={style:{}},typeof M=="function"&&(d.state={style:E}),ES(d);if(A&&A.length)d.state={style:A[0].style};else if(w){if(typeof M=="function")return d.state={style:w},ES(d);d.state={style:_?qm({},_,w):w}}else d.state={style:{}};return d}return DY(r,[{key:"componentDidMount",value:function(){var s=this.props,d=s.isActive,h=s.canBegin;this.mounted=!0,!(!d||!h)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var d=this.props,h=d.isActive,l=d.canBegin,_=d.attributeName,w=d.shouldReAnimate,E=d.to,A=d.from,M=this.state.style;if(l){if(!h){var N={style:_?qm({},_,E):E};this.state&&M&&(_&&M[_]!==E||!_&&M!==E)&&this.setState(N);return}if(!(UX(s.to,E)&&s.canBegin&&s.isActive)){var U=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var B=U||w?A:s.to;if(this.state&&M){var L={style:_?qm({},_,B):B};(_&&M[_]!==B||!_&&M!==B)&&this.setState(L)}this.runAnimation(hl(hl({},this.props),{},{from:B,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var d=this,h=s.from,l=s.to,_=s.duration,w=s.easing,E=s.begin,A=s.onAnimationEnd,M=s.onAnimationStart,N=SY(h,l,fY(w),_,this.changeStyle),U=function(){d.stopJSAnimation=N()};this.manager.start([M,E,U,_,A])}},{key:"runStepAnimation",value:function(s){var d=this,h=s.steps,l=s.begin,_=s.onAnimationStart,w=h[0],E=w.style,A=w.duration,M=A===void 0?0:A,N=function(B,L,K){if(K===0)return B;var Q=L.duration,J=L.easing,ie=J===void 0?"ease":J,Z=L.style,X=L.properties,le=L.onAnimationEnd,de=K>0?h[K-1]:L,Pe=X||Object.keys(Z);if(typeof ie=="function"||ie==="spring")return[].concat(Bw(B),[d.runJSAnimation.bind(d,{from:de.style,to:Z,duration:Q,easing:ie}),Q]);var Fe=dO(Pe,Q,ie),be=hl(hl(hl({},de.style),Z),{},{transition:Fe});return[].concat(Bw(B),[be,Q,le]).filter(eY)};return this.manager.start([_].concat(Bw(h.reduce(N,[E,Math.max(M,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=XX());var d=s.begin,h=s.duration,l=s.attributeName,_=s.to,w=s.easing,E=s.onAnimationStart,A=s.onAnimationEnd,M=s.steps,N=s.children,U=this.manager;if(this.unSubscribe=U.subscribe(this.handleStyleChange),typeof w=="function"||typeof N=="function"||w==="spring"){this.runJSAnimation(s);return}if(M.length>1){this.runStepAnimation(s);return}var B=l?qm({},l,_):_,L=dO(Object.keys(B),h,w);U.start([E,d,hl(hl({},B),{},{transition:L}),h,A])}},{key:"render",value:function(){var s=this.props,d=s.children;s.begin;var h=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var _=PY(s,TY),w=Se.Children.count(d),E=this.state.style;if(typeof d=="function")return d(E);if(!l||w===0||h<=0)return d;var A=function(N){var U=N.props,B=U.style,L=B===void 0?{}:B,K=U.className,Q=Se.cloneElement(N,hl(hl({},_),{},{style:hl(hl({},L),E),className:K}));return Q};return w===1?A(Se.Children.only(d)):Le.createElement("div",null,Se.Children.map(d,function(M){return A(M)}))}}]),r})(Se.PureComponent);uc.displayName="Animate";uc.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};uc.propTypes={from:cn.oneOfType([cn.object,cn.string]),to:cn.oneOfType([cn.object,cn.string]),attributeName:cn.string,duration:cn.number,begin:cn.number,easing:cn.oneOfType([cn.string,cn.func]),steps:cn.arrayOf(cn.shape({duration:cn.number.isRequired,style:cn.object.isRequired,easing:cn.oneOfType([cn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),cn.func]),properties:cn.arrayOf("string"),onAnimationEnd:cn.func})),children:cn.oneOfType([cn.node,cn.func]),isActive:cn.bool,canBegin:cn.bool,onAnimationEnd:cn.func,shouldReAnimate:cn.bool,onAnimationStart:cn.func,onAnimationReStart:cn.func};function kg(e){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kg(e)}function f0(){return f0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f0.apply(this,arguments)}function NY(e,t){return VY(e)||$Y(e,t)||FY(e,t)||BY()}function BY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FY(e,t){if(e){if(typeof e=="string")return _O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _O(e,t)}}function _O(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $Y(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,w=!1;try{if(d=(r=r.call(e)).next,t!==0)for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){w=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(w)throw s}}return l}}function VY(e){if(Array.isArray(e))return e}function xO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xO(Object(r),!0).forEach(function(n){UY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UY(e,t,r){return t=qY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qY(e){var t=WY(e,"string");return kg(t)=="symbol"?t:t+""}function WY(e,t){if(kg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wO=function(t,r,n,s,d){var h=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,_=n>=0?1:-1,w=s>=0&&n>=0||s<0&&n<0?1:0,E;if(h>0&&d instanceof Array){for(var A=[0,0,0,0],M=0,N=4;M<N;M++)A[M]=d[M]>h?h:d[M];E="M".concat(t,",").concat(r+l*A[0]),A[0]>0&&(E+="A ".concat(A[0],",").concat(A[0],",0,0,").concat(w,",").concat(t+_*A[0],",").concat(r)),E+="L ".concat(t+n-_*A[1],",").concat(r),A[1]>0&&(E+="A ".concat(A[1],",").concat(A[1],",0,0,").concat(w,`,
        `).concat(t+n,",").concat(r+l*A[1])),E+="L ".concat(t+n,",").concat(r+s-l*A[2]),A[2]>0&&(E+="A ".concat(A[2],",").concat(A[2],",0,0,").concat(w,`,
        `).concat(t+n-_*A[2],",").concat(r+s)),E+="L ".concat(t+_*A[3],",").concat(r+s),A[3]>0&&(E+="A ".concat(A[3],",").concat(A[3],",0,0,").concat(w,`,
        `).concat(t,",").concat(r+s-l*A[3])),E+="Z"}else if(h>0&&d===+d&&d>0){var U=Math.min(h,d);E="M ".concat(t,",").concat(r+l*U,`
            A `).concat(U,",").concat(U,",0,0,").concat(w,",").concat(t+_*U,",").concat(r,`
            L `).concat(t+n-_*U,",").concat(r,`
            A `).concat(U,",").concat(U,",0,0,").concat(w,",").concat(t+n,",").concat(r+l*U,`
            L `).concat(t+n,",").concat(r+s-l*U,`
            A `).concat(U,",").concat(U,",0,0,").concat(w,",").concat(t+n-_*U,",").concat(r+s,`
            L `).concat(t+_*U,",").concat(r+s,`
            A `).concat(U,",").concat(U,",0,0,").concat(w,",").concat(t,",").concat(r+s-l*U," Z")}else E="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return E},GY=function(t,r){if(!t||!r)return!1;var n=t.x,s=t.y,d=r.x,h=r.y,l=r.width,_=r.height;if(Math.abs(l)>0&&Math.abs(_)>0){var w=Math.min(d,d+l),E=Math.max(d,d+l),A=Math.min(h,h+_),M=Math.max(h,h+_);return n>=w&&n<=E&&s>=A&&s<=M}return!1},HY={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},IP=function(t){var r=bO(bO({},HY),t),n=Se.useRef(),s=Se.useState(-1),d=NY(s,2),h=d[0],l=d[1];Se.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var ie=n.current.getTotalLength();ie&&l(ie)}catch{}},[]);var _=r.x,w=r.y,E=r.width,A=r.height,M=r.radius,N=r.className,U=r.animationEasing,B=r.animationDuration,L=r.animationBegin,K=r.isAnimationActive,Q=r.isUpdateAnimationActive;if(_!==+_||w!==+w||E!==+E||A!==+A||E===0||A===0)return null;var J=Hr("recharts-rectangle",N);return Q?Le.createElement(uc,{canBegin:h>0,from:{width:E,height:A,x:_,y:w},to:{width:E,height:A,x:_,y:w},duration:B,animationEasing:U,isActive:Q},function(ie){var Z=ie.width,X=ie.height,le=ie.x,de=ie.y;return Le.createElement(uc,{canBegin:h>0,from:"0px ".concat(h===-1?1:h,"px"),to:"".concat(h,"px 0px"),attributeName:"strokeDasharray",begin:L,duration:B,isActive:K,easing:U},Le.createElement("path",f0({},qr(r,!0),{className:J,d:wO(le,de,Z,X,M),ref:n})))}):Le.createElement("path",f0({},qr(r,!0),{className:J,d:wO(_,w,E,A,M)}))};function MS(){return MS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},MS.apply(this,arguments)}var kP=function(t){var r=t.cx,n=t.cy,s=t.r,d=t.className,h=Hr("recharts-dot",d);return r===+r&&n===+n&&s===+s?Se.createElement("circle",MS({},qr(t,!1),Rv(t),{className:h,cx:r,cy:n,r:s})):null};function Og(e){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Og(e)}var ZY=["x","y","top","left","width","height","className"];function IS(){return IS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},IS.apply(this,arguments)}function SO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function KY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SO(Object(r),!0).forEach(function(n){XY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XY(e,t,r){return t=YY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YY(e){var t=JY(e,"string");return Og(t)=="symbol"?t:t+""}function JY(e,t){if(Og(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QY(e,t){if(e==null)return{};var r=eJ(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function eJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var tJ=function(t,r,n,s,d,h){return"M".concat(t,",").concat(d,"v").concat(s,"M").concat(h,",").concat(r,"h").concat(n)},rJ=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,d=s===void 0?0:s,h=t.top,l=h===void 0?0:h,_=t.left,w=_===void 0?0:_,E=t.width,A=E===void 0?0:E,M=t.height,N=M===void 0?0:M,U=t.className,B=QY(t,ZY),L=KY({x:n,y:d,top:l,left:w,width:A,height:N},B);return!Bt(n)||!Bt(d)||!Bt(A)||!Bt(N)||!Bt(l)||!Bt(w)?null:Le.createElement("path",IS({},qr(L,!0),{className:Hr("recharts-cross",U),d:tJ(n,d,A,N,l,w)}))},Fw,TO;function nJ(){if(TO)return Fw;TO=1;var e=u6(),t=e(Object.getPrototypeOf,Object);return Fw=t,Fw}var $w,PO;function iJ(){if(PO)return $w;PO=1;var e=cc(),t=nJ(),r=hc(),n="[object Object]",s=Function.prototype,d=Object.prototype,h=s.toString,l=d.hasOwnProperty,_=h.call(Object);function w(E){if(!r(E)||e(E)!=n)return!1;var A=t(E);if(A===null)return!0;var M=l.call(A,"constructor")&&A.constructor;return typeof M=="function"&&M instanceof M&&h.call(M)==_}return $w=w,$w}var aJ=iJ();const oJ=pn(aJ);var Vw,AO;function sJ(){if(AO)return Vw;AO=1;var e=cc(),t=hc(),r="[object Boolean]";function n(s){return s===!0||s===!1||t(s)&&e(s)==r}return Vw=n,Vw}var lJ=sJ();const uJ=pn(lJ);function Dg(e){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dg(e)}function d0(){return d0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d0.apply(this,arguments)}function cJ(e,t){return pJ(e)||dJ(e,t)||fJ(e,t)||hJ()}function hJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fJ(e,t){if(e){if(typeof e=="string")return EO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EO(e,t)}}function EO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,w=!1;try{if(d=(r=r.call(e)).next,t!==0)for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){w=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(w)throw s}}return l}}function pJ(e){if(Array.isArray(e))return e}function CO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function MO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CO(Object(r),!0).forEach(function(n){mJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mJ(e,t,r){return t=gJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gJ(e){var t=yJ(e,"string");return Dg(t)=="symbol"?t:t+""}function yJ(e,t){if(Dg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IO=function(t,r,n,s,d){var h=n-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-h/2,",").concat(r+d),l+="L ".concat(t+n-h/2-s,",").concat(r+d),l+="L ".concat(t,",").concat(r," Z"),l},vJ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},_J=function(t){var r=MO(MO({},vJ),t),n=Se.useRef(),s=Se.useState(-1),d=cJ(s,2),h=d[0],l=d[1];Se.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var J=n.current.getTotalLength();J&&l(J)}catch{}},[]);var _=r.x,w=r.y,E=r.upperWidth,A=r.lowerWidth,M=r.height,N=r.className,U=r.animationEasing,B=r.animationDuration,L=r.animationBegin,K=r.isUpdateAnimationActive;if(_!==+_||w!==+w||E!==+E||A!==+A||M!==+M||E===0&&A===0||M===0)return null;var Q=Hr("recharts-trapezoid",N);return K?Le.createElement(uc,{canBegin:h>0,from:{upperWidth:0,lowerWidth:0,height:M,x:_,y:w},to:{upperWidth:E,lowerWidth:A,height:M,x:_,y:w},duration:B,animationEasing:U,isActive:K},function(J){var ie=J.upperWidth,Z=J.lowerWidth,X=J.height,le=J.x,de=J.y;return Le.createElement(uc,{canBegin:h>0,from:"0px ".concat(h===-1?1:h,"px"),to:"".concat(h,"px 0px"),attributeName:"strokeDasharray",begin:L,duration:B,easing:U},Le.createElement("path",d0({},qr(r,!0),{className:Q,d:IO(le,de,ie,Z,X),ref:n})))}):Le.createElement("g",null,Le.createElement("path",d0({},qr(r,!0),{className:Q,d:IO(_,w,E,A,M)})))},xJ=["option","shapeType","propTransformer","activeClassName","isActive"];function Rg(e){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rg(e)}function bJ(e,t){if(e==null)return{};var r=wJ(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function wJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function kO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function p0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kO(Object(r),!0).forEach(function(n){SJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SJ(e,t,r){return t=TJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TJ(e){var t=PJ(e,"string");return Rg(t)=="symbol"?t:t+""}function PJ(e,t){if(Rg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AJ(e,t){return p0(p0({},t),e)}function EJ(e,t){return e==="symbols"}function OO(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return Le.createElement(IP,r);case"trapezoid":return Le.createElement(_J,r);case"sector":return Le.createElement(zR,r);case"symbols":if(EJ(t))return Le.createElement(KT,r);break;default:return null}}function CJ(e){return Se.isValidElement(e)?e.props:e}function MJ(e){var t=e.option,r=e.shapeType,n=e.propTransformer,s=n===void 0?AJ:n,d=e.activeClassName,h=d===void 0?"recharts-active-shape":d,l=e.isActive,_=bJ(e,xJ),w;if(Se.isValidElement(t))w=Se.cloneElement(t,p0(p0({},_),CJ(t)));else if(Dr(t))w=t(_);else if(oJ(t)&&!uJ(t)){var E=s(t,_);w=Le.createElement(OO,{shapeType:r,elementProps:E})}else{var A=_;w=Le.createElement(OO,{shapeType:r,elementProps:A})}return l?Le.createElement(fi,{className:h},w):w}function c_(e,t){return t!=null&&"trapezoids"in e.props}function h_(e,t){return t!=null&&"sectors"in e.props}function jg(e,t){return t!=null&&"points"in e.props}function IJ(e,t){var r,n,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,d=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&d}function kJ(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function OJ(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function DJ(e,t){var r;return c_(e,t)?r=IJ:h_(e,t)?r=kJ:jg(e,t)&&(r=OJ),r}function RJ(e,t){var r;return c_(e,t)?r="trapezoids":h_(e,t)?r="sectors":jg(e,t)&&(r="points"),r}function jJ(e,t){if(c_(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(h_(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return jg(e,t)?t.payload:{}}function zJ(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=RJ(r,t),d=jJ(r,t),h=n.filter(function(_,w){var E=s_(d,_),A=r.props[s].filter(function(U){var B=DJ(r,t);return B(U,t)}),M=r.props[s].indexOf(A[A.length-1]),N=w===M;return E&&N}),l=n.indexOf(h[h.length-1]);return l}var Uw,DO;function LJ(){if(DO)return Uw;DO=1;var e=Math.ceil,t=Math.max;function r(n,s,d,h){for(var l=-1,_=t(e((s-n)/(d||1)),0),w=Array(_);_--;)w[h?_:++l]=n,n+=d;return w}return Uw=r,Uw}var qw,RO;function qR(){if(RO)return qw;RO=1;var e=P6(),t=1/0,r=17976931348623157e292;function n(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var d=s<0?-1:1;return d*r}return s===s?s:0}return qw=n,qw}var Ww,jO;function NJ(){if(jO)return Ww;jO=1;var e=LJ(),t=J0(),r=qR();function n(s){return function(d,h,l){return l&&typeof l!="number"&&t(d,h,l)&&(h=l=void 0),d=r(d),h===void 0?(h=d,d=0):h=r(h),l=l===void 0?d<h?1:-1:r(l),e(d,h,l,s)}}return Ww=n,Ww}var Gw,zO;function BJ(){if(zO)return Gw;zO=1;var e=NJ(),t=e();return Gw=t,Gw}var FJ=BJ();const m0=pn(FJ);function zg(e){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zg(e)}function LO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function NO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(r),!0).forEach(function(n){WR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WR(e,t,r){return t=$J(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $J(e){var t=VJ(e,"string");return zg(t)=="symbol"?t:t+""}function VJ(e,t){if(zg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UJ=["Webkit","Moz","O","ms"],qJ=function(t,r){var n=t.replace(/(\w)/,function(d){return d.toUpperCase()}),s=UJ.reduce(function(d,h){return NO(NO({},d),{},WR({},h+n,r))},{});return s[t]=r,s};function xp(e){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xp(e)}function g0(){return g0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g0.apply(this,arguments)}function BO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Hw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BO(Object(r),!0).forEach(function(n){rs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HR(n.key),n)}}function GJ(e,t,r){return t&&FO(e.prototype,t),r&&FO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function HJ(e,t,r){return t=y0(t),ZJ(e,GR()?Reflect.construct(t,r||[],y0(e).constructor):t.apply(e,r))}function ZJ(e,t){if(t&&(xp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KJ(e)}function KJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GR=function(){return!!e})()}function y0(e){return y0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},y0(e)}function XJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kS(e,t)}function kS(e,t){return kS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},kS(e,t)}function rs(e,t,r){return t=HR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HR(e){var t=YJ(e,"string");return xp(t)=="symbol"?t:t+""}function YJ(e,t){if(xp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var JJ=function(t){var r=t.data,n=t.startIndex,s=t.endIndex,d=t.x,h=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var _=r.length,w=Xm().domain(m0(0,_)).range([d,d+h-l]),E=w.domain().map(function(A){return w(A)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:w(n),endX:w(s),scale:w,scaleValues:E}},$O=function(t){return t.changedTouches&&!!t.changedTouches.length},bp=(function(e){function t(r){var n;return WJ(this,t),n=HJ(this,t,[r]),rs(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),rs(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),rs(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,d=s.endIndex,h=s.onDragEnd,l=s.startIndex;h==null||h({endIndex:d,startIndex:l})}),n.detachDragEndListener()}),rs(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),rs(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),rs(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),rs(n,"handleSlideDragStart",function(s){var d=$O(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:d.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return XJ(t,e),GJ(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,d=n.endX,h=this.state.scaleValues,l=this.props,_=l.gap,w=l.data,E=w.length-1,A=Math.min(s,d),M=Math.max(s,d),N=t.getIndexInRange(h,A),U=t.getIndexInRange(h,M);return{startIndex:N-N%_,endIndex:U===E?E:U-U%_}}},{key:"getTextOfTick",value:function(n){var s=this.props,d=s.data,h=s.tickFormatter,l=s.dataKey,_=ss(d[n],l,n);return Dr(h)?h(_,n):_}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,d=s.slideMoveStartX,h=s.startX,l=s.endX,_=this.props,w=_.x,E=_.width,A=_.travellerWidth,M=_.startIndex,N=_.endIndex,U=_.onChange,B=n.pageX-d;B>0?B=Math.min(B,w+E-A-l,w+E-A-h):B<0&&(B=Math.max(B,w-h,w-l));var L=this.getIndex({startX:h+B,endX:l+B});(L.startIndex!==M||L.endIndex!==N)&&U&&U(L),this.setState({startX:h+B,endX:l+B,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var d=$O(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:d.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,d=s.brushMoveStartX,h=s.movingTravellerId,l=s.endX,_=s.startX,w=this.state[h],E=this.props,A=E.x,M=E.width,N=E.travellerWidth,U=E.onChange,B=E.gap,L=E.data,K={startX:this.state.startX,endX:this.state.endX},Q=n.pageX-d;Q>0?Q=Math.min(Q,A+M-N-w):Q<0&&(Q=Math.max(Q,A-w)),K[h]=w+Q;var J=this.getIndex(K),ie=J.startIndex,Z=J.endIndex,X=function(){var de=L.length-1;return h==="startX"&&(l>_?ie%B===0:Z%B===0)||l<_&&Z===de||h==="endX"&&(l>_?Z%B===0:ie%B===0)||l>_&&Z===de};this.setState(rs(rs({},h,w+Q),"brushMoveStartX",n.pageX),function(){U&&X()&&U(J)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var d=this,h=this.state,l=h.scaleValues,_=h.startX,w=h.endX,E=this.state[s],A=l.indexOf(E);if(A!==-1){var M=A+n;if(!(M===-1||M>=l.length)){var N=l[M];s==="startX"&&N>=w||s==="endX"&&N<=_||this.setState(rs({},s,N),function(){d.props.onChange(d.getIndex({startX:d.state.startX,endX:d.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,d=n.y,h=n.width,l=n.height,_=n.fill,w=n.stroke;return Le.createElement("rect",{stroke:w,fill:_,x:s,y:d,width:h,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,d=n.y,h=n.width,l=n.height,_=n.data,w=n.children,E=n.padding,A=Se.Children.only(w);return A?Le.cloneElement(A,{x:s,y:d,width:h,height:l,margin:E,compact:!0,data:_}):null}},{key:"renderTravellerLayer",value:function(n,s){var d,h,l=this,_=this.props,w=_.y,E=_.travellerWidth,A=_.height,M=_.traveller,N=_.ariaLabel,U=_.data,B=_.startIndex,L=_.endIndex,K=Math.max(n,this.props.x),Q=Hw(Hw({},qr(this.props,!1)),{},{x:K,y:w,width:E,height:A}),J=N||"Min value: ".concat((d=U[B])===null||d===void 0?void 0:d.name,", Max value: ").concat((h=U[L])===null||h===void 0?void 0:h.name);return Le.createElement(fi,{tabIndex:0,role:"slider","aria-label":J,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(Z){["ArrowLeft","ArrowRight"].includes(Z.key)&&(Z.preventDefault(),Z.stopPropagation(),l.handleTravellerMoveKeyboard(Z.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(M,Q))}},{key:"renderSlide",value:function(n,s){var d=this.props,h=d.y,l=d.height,_=d.stroke,w=d.travellerWidth,E=Math.min(n,s)+w,A=Math.max(Math.abs(s-n)-w,0);return Le.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:_,fillOpacity:.2,x:E,y:h,width:A,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,d=n.endIndex,h=n.y,l=n.height,_=n.travellerWidth,w=n.stroke,E=this.state,A=E.startX,M=E.endX,N=5,U={pointerEvents:"none",fill:w};return Le.createElement(fi,{className:"recharts-brush-texts"},Le.createElement(Gv,g0({textAnchor:"end",verticalAnchor:"middle",x:Math.min(A,M)-N,y:h+l/2},U),this.getTextOfTick(s)),Le.createElement(Gv,g0({textAnchor:"start",verticalAnchor:"middle",x:Math.max(A,M)+_+N,y:h+l/2},U),this.getTextOfTick(d)))}},{key:"render",value:function(){var n=this.props,s=n.data,d=n.className,h=n.children,l=n.x,_=n.y,w=n.width,E=n.height,A=n.alwaysShowText,M=this.state,N=M.startX,U=M.endX,B=M.isTextActive,L=M.isSlideMoving,K=M.isTravellerMoving,Q=M.isTravellerFocused;if(!s||!s.length||!Bt(l)||!Bt(_)||!Bt(w)||!Bt(E)||w<=0||E<=0)return null;var J=Hr("recharts-brush",d),ie=Le.Children.count(h)===1,Z=qJ("userSelect","none");return Le.createElement(fi,{className:J,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:Z},this.renderBackground(),ie&&this.renderPanorama(),this.renderSlide(N,U),this.renderTravellerLayer(N,"startX"),this.renderTravellerLayer(U,"endX"),(B||L||K||Q||A)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,d=n.y,h=n.width,l=n.height,_=n.stroke,w=Math.floor(d+l/2)-1;return Le.createElement(Le.Fragment,null,Le.createElement("rect",{x:s,y:d,width:h,height:l,fill:_,stroke:"none"}),Le.createElement("line",{x1:s+1,y1:w,x2:s+h-1,y2:w,fill:"none",stroke:"#fff"}),Le.createElement("line",{x1:s+1,y1:w+2,x2:s+h-1,y2:w+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var d;return Le.isValidElement(n)?d=Le.cloneElement(n,s):Dr(n)?d=n(s):d=t.renderDefaultTraveller(s),d}},{key:"getDerivedStateFromProps",value:function(n,s){var d=n.data,h=n.width,l=n.x,_=n.travellerWidth,w=n.updateId,E=n.startIndex,A=n.endIndex;if(d!==s.prevData||w!==s.prevUpdateId)return Hw({prevData:d,prevTravellerWidth:_,prevUpdateId:w,prevX:l,prevWidth:h},d&&d.length?JJ({data:d,width:h,x:l,travellerWidth:_,startIndex:E,endIndex:A}):{scale:null,scaleValues:null});if(s.scale&&(h!==s.prevWidth||l!==s.prevX||_!==s.prevTravellerWidth)){s.scale.range([l,l+h-_]);var M=s.scale.domain().map(function(N){return s.scale(N)});return{prevData:d,prevTravellerWidth:_,prevUpdateId:w,prevX:l,prevWidth:h,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:M}}return null}},{key:"getIndexInRange",value:function(n,s){for(var d=n.length,h=0,l=d-1;l-h>1;){var _=Math.floor((h+l)/2);n[_]>s?l=_:h=_}return s>=n[l]?l:h}}])})(Se.PureComponent);rs(bp,"displayName","Brush");rs(bp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Zw,VO;function QJ(){if(VO)return Zw;VO=1;var e=rP();function t(r,n){var s;return e(r,function(d,h,l){return s=n(d,h,l),!s}),!!s}return Zw=t,Zw}var Kw,UO;function eQ(){if(UO)return Kw;UO=1;var e=r6(),t=uh(),r=QJ(),n=Eo(),s=J0();function d(h,l,_){var w=n(h)?e:r;return _&&s(h,l,_)&&(l=void 0),w(h,t(l,3))}return Kw=d,Kw}var tQ=eQ();const rQ=pn(tQ);var hu=function(t,r){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===r},Xw,qO;function nQ(){if(qO)return Xw;qO=1;var e=x6();function t(r,n,s){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[n]=s}return Xw=t,Xw}var Yw,WO;function iQ(){if(WO)return Yw;WO=1;var e=nQ(),t=v6(),r=uh();function n(s,d){var h={};return d=r(d,3),t(s,function(l,_,w){e(h,_,d(l,_,w))}),h}return Yw=n,Yw}var aQ=iQ();const oQ=pn(aQ);var Jw,GO;function sQ(){if(GO)return Jw;GO=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(!r(t[n],n,t))return!1;return!0}return Jw=e,Jw}var Qw,HO;function lQ(){if(HO)return Qw;HO=1;var e=rP();function t(r,n){var s=!0;return e(r,function(d,h,l){return s=!!n(d,h,l),s}),s}return Qw=t,Qw}var e2,ZO;function uQ(){if(ZO)return e2;ZO=1;var e=sQ(),t=lQ(),r=uh(),n=Eo(),s=J0();function d(h,l,_){var w=n(h)?e:t;return _&&s(h,l,_)&&(l=void 0),w(h,r(l,3))}return e2=d,e2}var cQ=uQ();const ZR=pn(cQ);var hQ=["x","y"];function Lg(e){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lg(e)}function OS(){return OS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OS.apply(this,arguments)}function KO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Nm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KO(Object(r),!0).forEach(function(n){fQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fQ(e,t,r){return t=dQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dQ(e){var t=pQ(e,"string");return Lg(t)=="symbol"?t:t+""}function pQ(e,t){if(Lg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mQ(e,t){if(e==null)return{};var r=gQ(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function gQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function yQ(e,t){var r=e.x,n=e.y,s=mQ(e,hQ),d="".concat(r),h=parseInt(d,10),l="".concat(n),_=parseInt(l,10),w="".concat(t.height||s.height),E=parseInt(w,10),A="".concat(t.width||s.width),M=parseInt(A,10);return Nm(Nm(Nm(Nm(Nm({},t),s),h?{x:h}:{}),_?{y:_}:{}),{},{height:E,width:M,name:t.name,radius:t.radius})}function XO(e){return Le.createElement(MJ,OS({shapeType:"rectangle",propTransformer:yQ,activeClassName:"recharts-active-bar"},e))}var vQ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var d=Bt(n)||A9(n);return d?t(n,s):(d||Lf(),r)}},_Q=["value","background"],KR;function wp(e){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wp(e)}function xQ(e,t){if(e==null)return{};var r=bQ(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function bQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function v0(){return v0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v0.apply(this,arguments)}function YO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YO(Object(r),!0).forEach(function(n){eh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YR(n.key),n)}}function SQ(e,t,r){return t&&JO(e.prototype,t),r&&JO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function TQ(e,t,r){return t=_0(t),PQ(e,XR()?Reflect.construct(t,r||[],_0(e).constructor):t.apply(e,r))}function PQ(e,t){if(t&&(wp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AQ(e)}function AQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XR=function(){return!!e})()}function _0(e){return _0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_0(e)}function EQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DS(e,t)}function DS(e,t){return DS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},DS(e,t)}function eh(e,t,r){return t=YR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YR(e){var t=CQ(e,"string");return wp(t)=="symbol"?t:t+""}function CQ(e,t){if(wp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var iy=(function(e){function t(){var r;wQ(this,t);for(var n=arguments.length,s=new Array(n),d=0;d<n;d++)s[d]=arguments[d];return r=TQ(this,t,[].concat(s)),eh(r,"state",{isAnimationFinished:!1}),eh(r,"id",Yg("recharts-bar-")),eh(r,"handleAnimationEnd",function(){var h=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),h&&h()}),eh(r,"handleAnimationStart",function(){var h=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),h&&h()}),r}return EQ(t,e),SQ(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,d=this.props,h=d.shape,l=d.dataKey,_=d.activeIndex,w=d.activeBar,E=qr(this.props,!1);return n&&n.map(function(A,M){var N=M===_,U=N?w:h,B=bi(bi(bi({},E),A),{},{isActive:N,option:U,index:M,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return Le.createElement(fi,v0({className:"recharts-bar-rectangle"},jv(s.props,A,M),{key:"rectangle-".concat(A==null?void 0:A.x,"-").concat(A==null?void 0:A.y,"-").concat(A==null?void 0:A.value,"-").concat(M)}),Le.createElement(XO,B))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,d=s.data,h=s.layout,l=s.isAnimationActive,_=s.animationBegin,w=s.animationDuration,E=s.animationEasing,A=s.animationId,M=this.state.prevData;return Le.createElement(uc,{begin:_,duration:w,isActive:l,easing:E,from:{t:0},to:{t:1},key:"bar-".concat(A),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(N){var U=N.t,B=d.map(function(L,K){var Q=M&&M[K];if(Q){var J=ml(Q.x,L.x),ie=ml(Q.y,L.y),Z=ml(Q.width,L.width),X=ml(Q.height,L.height);return bi(bi({},L),{},{x:J(U),y:ie(U),width:Z(U),height:X(U)})}if(h==="horizontal"){var le=ml(0,L.height),de=le(U);return bi(bi({},L),{},{y:L.y+L.height-de,height:de})}var Pe=ml(0,L.width),Fe=Pe(U);return bi(bi({},L),{},{width:Fe})});return Le.createElement(fi,null,n.renderRectanglesStatically(B))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,d=n.isAnimationActive,h=this.state.prevData;return d&&s&&s.length&&(!h||!s_(h,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,d=s.data,h=s.dataKey,l=s.activeIndex,_=qr(this.props.background,!1);return d.map(function(w,E){w.value;var A=w.background,M=xQ(w,_Q);if(!A)return null;var N=bi(bi(bi(bi(bi({},M),{},{fill:"#eee"},A),_),jv(n.props,w,E)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:h,index:E,className:"recharts-bar-background-rectangle"});return Le.createElement(XO,v0({key:"background-bar-".concat(E),option:n.props.background,isActive:E===l},N))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var d=this.props,h=d.data,l=d.xAxis,_=d.yAxis,w=d.layout,E=d.children,A=Ns(E,ny);if(!A)return null;var M=w==="vertical"?h[0].height/2:h[0].width/2,N=function(L,K){var Q=Array.isArray(L.value)?L.value[1]:L.value;return{x:L.x,y:L.y,value:Q,errorVal:ss(L,K)}},U={clipPath:n?"url(#clipPath-".concat(s,")"):null};return Le.createElement(fi,U,A.map(function(B){return Le.cloneElement(B,{key:"error-bar-".concat(s,"-").concat(B.props.dataKey),data:h,xAxis:l,yAxis:_,layout:w,offset:M,dataPointFormatter:N})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,d=n.data,h=n.className,l=n.xAxis,_=n.yAxis,w=n.left,E=n.top,A=n.width,M=n.height,N=n.isAnimationActive,U=n.background,B=n.id;if(s||!d||!d.length)return null;var L=this.state.isAnimationFinished,K=Hr("recharts-bar",h),Q=l&&l.allowDataOverflow,J=_&&_.allowDataOverflow,ie=Q||J,Z=Lr(B)?this.id:B;return Le.createElement(fi,{className:K},Q||J?Le.createElement("defs",null,Le.createElement("clipPath",{id:"clipPath-".concat(Z)},Le.createElement("rect",{x:Q?w:w-A/2,y:J?E:E-M/2,width:Q?A:A*2,height:J?M:M*2}))):null,Le.createElement(fi,{className:"recharts-bar-rectangles",clipPath:ie?"url(#clipPath-".concat(Z,")"):null},U?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(ie,Z),(!N||L)&&nh.renderCallByParent(this.props,d))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])})(Se.PureComponent);KR=iy;eh(iy,"displayName","Bar");eh(iy,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Np.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});eh(iy,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,s=e.bandSize,d=e.xAxis,h=e.yAxis,l=e.xAxisTicks,_=e.yAxisTicks,w=e.stackedData,E=e.dataStartIndex,A=e.displayedData,M=e.offset,N=GZ(n,r);if(!N)return null;var U=t.layout,B=r.type.defaultProps,L=B!==void 0?bi(bi({},B),r.props):r.props,K=L.dataKey,Q=L.children,J=L.minPointSize,ie=U==="horizontal"?h:d,Z=w?ie.scale.domain():null,X=eK({numericAxis:ie}),le=Ns(Q,E6),de=A.map(function(Pe,Fe){var be,Ue,Ve,Ze,Ye,it;w?be=HZ(w[E+Fe],Z):(be=ss(Pe,K),Array.isArray(be)||(be=[X,be]));var et=vQ(J,KR.defaultProps.minPointSize)(be[1],Fe);if(U==="horizontal"){var Ge,rt=[h.scale(be[0]),h.scale(be[1])],ge=rt[0],ne=rt[1];Ue=j3({axis:d,ticks:l,bandSize:s,offset:N.offset,entry:Pe,index:Fe}),Ve=(Ge=ne??ge)!==null&&Ge!==void 0?Ge:void 0,Ze=N.size;var Ce=ge-ne;if(Ye=Number.isNaN(Ce)?0:Ce,it={x:Ue,y:h.y,width:Ze,height:h.height},Math.abs(et)>0&&Math.abs(Ye)<Math.abs(et)){var nt=yl(Ye||et)*(Math.abs(et)-Math.abs(Ye));Ve-=nt,Ye+=nt}}else{var ht=[d.scale(be[0]),d.scale(be[1])],pt=ht[0],At=ht[1];if(Ue=pt,Ve=j3({axis:h,ticks:_,bandSize:s,offset:N.offset,entry:Pe,index:Fe}),Ze=At-pt,Ye=N.size,it={x:d.x,y:Ve,width:d.width,height:Ye},Math.abs(et)>0&&Math.abs(Ze)<Math.abs(et)){var _t=yl(Ze||et)*(Math.abs(et)-Math.abs(Ze));Ze+=_t}}return bi(bi(bi({},Pe),{},{x:Ue,y:Ve,width:Ze,height:Ye,value:w?be:be[1],payload:Pe,background:it},le&&le[Fe]&&le[Fe].props),{},{tooltipPayload:[DR(r,Pe)],tooltipPosition:{x:Ue+Ze/2,y:Ve+Ye/2}})});return bi({data:de,layout:U},M)});function Ng(e){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ng(e)}function MQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JR(n.key),n)}}function IQ(e,t,r){return t&&QO(e.prototype,t),r&&QO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function e4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e4(Object(r),!0).forEach(function(n){f_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f_(e,t,r){return t=JR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JR(e){var t=kQ(e,"string");return Ng(t)=="symbol"?t:t+""}function kQ(e,t){if(Ng(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OQ=function(t,r,n,s,d){var h=t.width,l=t.height,_=t.layout,w=t.children,E=Object.keys(r),A={left:n.left,leftMirror:n.left,right:h-n.right,rightMirror:h-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},M=!!ns(w,iy);return E.reduce(function(N,U){var B=r[U],L=B.orientation,K=B.domain,Q=B.padding,J=Q===void 0?{}:Q,ie=B.mirror,Z=B.reversed,X="".concat(L).concat(ie?"Mirror":""),le,de,Pe,Fe,be;if(B.type==="number"&&(B.padding==="gap"||B.padding==="no-gap")){var Ue=K[1]-K[0],Ve=1/0,Ze=B.categoricalDomain.sort(M9);if(Ze.forEach(function(ht,pt){pt>0&&(Ve=Math.min((ht||0)-(Ze[pt-1]||0),Ve))}),Number.isFinite(Ve)){var Ye=Ve/Ue,it=B.layout==="vertical"?n.height:n.width;if(B.padding==="gap"&&(le=Ye*it/2),B.padding==="no-gap"){var et=jf(t.barCategoryGap,Ye*it),Ge=Ye*it/2;le=Ge-et-(Ge-et)/it*et}}}s==="xAxis"?de=[n.left+(J.left||0)+(le||0),n.left+n.width-(J.right||0)-(le||0)]:s==="yAxis"?de=_==="horizontal"?[n.top+n.height-(J.bottom||0),n.top+(J.top||0)]:[n.top+(J.top||0)+(le||0),n.top+n.height-(J.bottom||0)-(le||0)]:de=B.range,Z&&(de=[de[1],de[0]]);var rt=qZ(B,d,M),ge=rt.scale,ne=rt.realScaleType;ge.domain(K).range(de),WZ(ge);var Ce=QZ(ge,dl(dl({},B),{},{realScaleType:ne}));s==="xAxis"?(be=L==="top"&&!ie||L==="bottom"&&ie,Pe=n.left,Fe=A[X]-be*B.height):s==="yAxis"&&(be=L==="left"&&!ie||L==="right"&&ie,Pe=A[X]-be*B.width,Fe=n.top);var nt=dl(dl(dl({},B),Ce),{},{realScaleType:ne,x:Pe,y:Fe,scale:ge,width:s==="xAxis"?n.width:B.width,height:s==="yAxis"?n.height:B.height});return nt.bandSize=o0(nt,Ce),!B.hide&&s==="xAxis"?A[X]+=(be?-1:1)*nt.height:B.hide||(A[X]+=(be?-1:1)*nt.width),dl(dl({},N),{},f_({},U,nt))},{})},QR=function(t,r){var n=t.x,s=t.y,d=r.x,h=r.y;return{x:Math.min(n,d),y:Math.min(s,h),width:Math.abs(d-n),height:Math.abs(h-s)}},DQ=function(t){var r=t.x1,n=t.y1,s=t.x2,d=t.y2;return QR({x:r,y:n},{x:s,y:d})},ej=(function(){function e(t){MQ(this,e),this.scale=t}return IQ(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,d=n.position;if(r!==void 0){if(d)switch(d){case"start":return this.scale(r);case"middle":{var h=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+h}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var _=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+_}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],d=n[n.length-1];return s<=d?r>=s&&r<=d:r>=d&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])})();f_(ej,"EPS",1e-4);var OP=function(t){var r=Object.keys(t).reduce(function(n,s){return dl(dl({},n),{},f_({},s,ej.create(t[s])))},{});return dl(dl({},r),{},{apply:function(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=d.bandAware,l=d.position;return oQ(s,function(_,w){return r[w].apply(_,{bandAware:h,position:l})})},isInRange:function(s){return ZR(s,function(d,h){return r[h].isInRange(d)})}})};function RQ(e){return(e%180+180)%180}var jQ=function(t){var r=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,d=RQ(s),h=d*Math.PI/180,l=Math.atan(n/r),_=h>l&&h<Math.PI-l?n/Math.sin(h):r/Math.cos(h);return Math.abs(_)},t2,t4;function zQ(){if(t4)return t2;t4=1;var e=uh(),t=Jg(),r=X0();function n(s){return function(d,h,l){var _=Object(d);if(!t(d)){var w=e(h,3);d=r(d),h=function(A){return w(_[A],A,_)}}var E=s(d,h,l);return E>-1?_[w?d[E]:E]:void 0}}return t2=n,t2}var r2,r4;function LQ(){if(r4)return r2;r4=1;var e=qR();function t(r){var n=e(r),s=n%1;return n===n?s?n-s:n:0}return r2=t,r2}var n2,n4;function NQ(){if(n4)return n2;n4=1;var e=d6(),t=uh(),r=LQ(),n=Math.max;function s(d,h,l){var _=d==null?0:d.length;if(!_)return-1;var w=l==null?0:r(l);return w<0&&(w=n(_+w,0)),e(d,t(h,3),w)}return n2=s,n2}var i2,i4;function BQ(){if(i4)return i2;i4=1;var e=zQ(),t=NQ(),r=e(t);return i2=r,i2}var FQ=BQ();const $Q=pn(FQ);var VQ=MD();const UQ=pn(VQ);var qQ=UQ(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),DP=Se.createContext(void 0),RP=Se.createContext(void 0),tj=Se.createContext(void 0),rj=Se.createContext({}),nj=Se.createContext(void 0),ij=Se.createContext(0),aj=Se.createContext(0),a4=function(t){var r=t.state,n=r.xAxisMap,s=r.yAxisMap,d=r.offset,h=t.clipPathId,l=t.children,_=t.width,w=t.height,E=qQ(d);return Le.createElement(DP.Provider,{value:n},Le.createElement(RP.Provider,{value:s},Le.createElement(rj.Provider,{value:d},Le.createElement(tj.Provider,{value:E},Le.createElement(nj.Provider,{value:h},Le.createElement(ij.Provider,{value:w},Le.createElement(aj.Provider,{value:_},l)))))))},WQ=function(){return Se.useContext(nj)},oj=function(t){var r=Se.useContext(DP);r==null&&Lf();var n=r[t];return n==null&&Lf(),n},GQ=function(){var t=Se.useContext(DP);return Jc(t)},HQ=function(){var t=Se.useContext(RP),r=$Q(t,function(n){return ZR(n.domain,Number.isFinite)});return r||Jc(t)},sj=function(t){var r=Se.useContext(RP);r==null&&Lf();var n=r[t];return n==null&&Lf(),n},ZQ=function(){var t=Se.useContext(tj);return t},KQ=function(){return Se.useContext(rj)},jP=function(){return Se.useContext(aj)},zP=function(){return Se.useContext(ij)};function Sp(e){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sp(e)}function XQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uj(n.key),n)}}function JQ(e,t,r){return t&&YQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function QQ(e,t,r){return t=x0(t),eee(e,lj()?Reflect.construct(t,r||[],x0(e).constructor):t.apply(e,r))}function eee(e,t){if(t&&(Sp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tee(e)}function tee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lj=function(){return!!e})()}function x0(e){return x0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},x0(e)}function ree(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RS(e,t)}function RS(e,t){return RS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},RS(e,t)}function o4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function s4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o4(Object(r),!0).forEach(function(n){LP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LP(e,t,r){return t=uj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uj(e){var t=nee(e,"string");return Sp(t)=="symbol"?t:t+""}function nee(e,t){if(Sp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function iee(e,t){return lee(e)||see(e,t)||oee(e,t)||aee()}function aee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oee(e,t){if(e){if(typeof e=="string")return l4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l4(e,t)}}function l4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function see(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,w=!1;try{if(d=(r=r.call(e)).next,t!==0)for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){w=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(w)throw s}}return l}}function lee(e){if(Array.isArray(e))return e}function jS(){return jS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jS.apply(this,arguments)}var uee=function(t,r){var n;return Le.isValidElement(t)?n=Le.cloneElement(t,r):Dr(t)?n=t(r):n=Le.createElement("line",jS({},r,{className:"recharts-reference-line-line"})),n},cee=function(t,r,n,s,d,h,l,_,w){var E=d.x,A=d.y,M=d.width,N=d.height;if(n){var U=w.y,B=t.y.apply(U,{position:h});if(hu(w,"discard")&&!t.y.isInRange(B))return null;var L=[{x:E+M,y:B},{x:E,y:B}];return _==="left"?L.reverse():L}if(r){var K=w.x,Q=t.x.apply(K,{position:h});if(hu(w,"discard")&&!t.x.isInRange(Q))return null;var J=[{x:Q,y:A+N},{x:Q,y:A}];return l==="top"?J.reverse():J}if(s){var ie=w.segment,Z=ie.map(function(X){return t.apply(X,{position:h})});return hu(w,"discard")&&rQ(Z,function(X){return!t.isInRange(X)})?null:Z}return null};function hee(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,d=e.yAxisId,h=e.shape,l=e.className,_=e.alwaysShow,w=WQ(),E=oj(s),A=sj(d),M=ZQ();if(!w||!M)return null;nc(_===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var N=OP({x:E.scale,y:A.scale}),U=Ri(t),B=Ri(r),L=n&&n.length===2,K=cee(N,U,B,L,M,e.position,E.orientation,A.orientation,e);if(!K)return null;var Q=iee(K,2),J=Q[0],ie=J.x,Z=J.y,X=Q[1],le=X.x,de=X.y,Pe=hu(e,"hidden")?"url(#".concat(w,")"):void 0,Fe=s4(s4({clipPath:Pe},qr(e,!0)),{},{x1:ie,y1:Z,x2:le,y2:de});return Le.createElement(fi,{className:Hr("recharts-reference-line",l)},uee(h,Fe),Fa.renderCallByParent(e,DQ({x1:ie,y1:Z,x2:le,y2:de})))}var NP=(function(e){function t(){return XQ(this,t),QQ(this,t,arguments)}return ree(t,e),JQ(t,[{key:"render",value:function(){return Le.createElement(hee,this.props)}}])})(Le.Component);LP(NP,"displayName","ReferenceLine");LP(NP,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function zS(){return zS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zS.apply(this,arguments)}function Tp(e){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tp(e)}function u4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function c4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u4(Object(r),!0).forEach(function(n){d_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hj(n.key),n)}}function pee(e,t,r){return t&&dee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mee(e,t,r){return t=b0(t),gee(e,cj()?Reflect.construct(t,r||[],b0(e).constructor):t.apply(e,r))}function gee(e,t){if(t&&(Tp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yee(e)}function yee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cj=function(){return!!e})()}function b0(e){return b0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},b0(e)}function vee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LS(e,t)}function LS(e,t){return LS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},LS(e,t)}function d_(e,t,r){return t=hj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hj(e){var t=_ee(e,"string");return Tp(t)=="symbol"?t:t+""}function _ee(e,t){if(Tp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var xee=function(t){var r=t.x,n=t.y,s=t.xAxis,d=t.yAxis,h=OP({x:s.scale,y:d.scale}),l=h.apply({x:r,y:n},{bandAware:!0});return hu(t,"discard")&&!h.isInRange(l)?null:l},p_=(function(e){function t(){return fee(this,t),mee(this,t,arguments)}return vee(t,e),pee(t,[{key:"render",value:function(){var n=this.props,s=n.x,d=n.y,h=n.r,l=n.alwaysShow,_=n.clipPathId,w=Ri(s),E=Ri(d);if(nc(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!w||!E)return null;var A=xee(this.props);if(!A)return null;var M=A.x,N=A.y,U=this.props,B=U.shape,L=U.className,K=hu(this.props,"hidden")?"url(#".concat(_,")"):void 0,Q=c4(c4({clipPath:K},qr(this.props,!0)),{},{cx:M,cy:N});return Le.createElement(fi,{className:Hr("recharts-reference-dot",L)},t.renderDot(B,Q),Fa.renderCallByParent(this.props,{x:M-h,y:N-h,width:2*h,height:2*h}))}}])})(Le.Component);d_(p_,"displayName","ReferenceDot");d_(p_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});d_(p_,"renderDot",function(e,t){var r;return Le.isValidElement(e)?r=Le.cloneElement(e,t):Dr(e)?r=e(t):r=Le.createElement(kP,zS({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function NS(){return NS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NS.apply(this,arguments)}function Pp(e){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function h4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function f4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h4(Object(r),!0).forEach(function(n){m_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dj(n.key),n)}}function See(e,t,r){return t&&wee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tee(e,t,r){return t=w0(t),Pee(e,fj()?Reflect.construct(t,r||[],w0(e).constructor):t.apply(e,r))}function Pee(e,t){if(t&&(Pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Aee(e)}function Aee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fj=function(){return!!e})()}function w0(e){return w0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},w0(e)}function Eee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BS(e,t)}function BS(e,t){return BS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},BS(e,t)}function m_(e,t,r){return t=dj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dj(e){var t=Cee(e,"string");return Pp(t)=="symbol"?t:t+""}function Cee(e,t){if(Pp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Mee=function(t,r,n,s,d){var h=d.x1,l=d.x2,_=d.y1,w=d.y2,E=d.xAxis,A=d.yAxis;if(!E||!A)return null;var M=OP({x:E.scale,y:A.scale}),N={x:t?M.x.apply(h,{position:"start"}):M.x.rangeMin,y:n?M.y.apply(_,{position:"start"}):M.y.rangeMin},U={x:r?M.x.apply(l,{position:"end"}):M.x.rangeMax,y:s?M.y.apply(w,{position:"end"}):M.y.rangeMax};return hu(d,"discard")&&(!M.isInRange(N)||!M.isInRange(U))?null:QR(N,U)},g_=(function(e){function t(){return bee(this,t),Tee(this,t,arguments)}return Eee(t,e),See(t,[{key:"render",value:function(){var n=this.props,s=n.x1,d=n.x2,h=n.y1,l=n.y2,_=n.className,w=n.alwaysShow,E=n.clipPathId;nc(w===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var A=Ri(s),M=Ri(d),N=Ri(h),U=Ri(l),B=this.props.shape;if(!A&&!M&&!N&&!U&&!B)return null;var L=Mee(A,M,N,U,this.props);if(!L&&!B)return null;var K=hu(this.props,"hidden")?"url(#".concat(E,")"):void 0;return Le.createElement(fi,{className:Hr("recharts-reference-area",_)},t.renderRect(B,f4(f4({clipPath:K},qr(this.props,!0)),L)),Fa.renderCallByParent(this.props,L))}}])})(Le.Component);m_(g_,"displayName","ReferenceArea");m_(g_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});m_(g_,"renderRect",function(e,t){var r;return Le.isValidElement(e)?r=Le.cloneElement(e,t):Dr(e)?r=e(t):r=Le.createElement(IP,NS({},t,{className:"recharts-reference-area-rect"})),r});function pj(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function Iee(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return jQ(n,r)}function kee(e,t,r){var n=r==="width",s=e.x,d=e.y,h=e.width,l=e.height;return t===1?{start:n?s:d,end:n?s+h:d+l}:{start:n?s+h:d+l,end:n?s:d}}function S0(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var d=r();return e*(t-e*d/2-n)>=0&&e*(t+e*d/2-s)<=0}function Oee(e,t){return pj(e,t+1)}function Dee(e,t,r,n,s){for(var d=(n||[]).slice(),h=t.start,l=t.end,_=0,w=1,E=h,A=function(){var U=n==null?void 0:n[_];if(U===void 0)return{v:pj(n,w)};var B=_,L,K=function(){return L===void 0&&(L=r(U,B)),L},Q=U.coordinate,J=_===0||S0(e,Q,K,E,l);J||(_=0,E=h,w+=1),J&&(E=Q+e*(K()/2+s),_+=w)},M;w<=d.length;)if(M=A(),M)return M.v;return[]}function Bg(e){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bg(e)}function d4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ba(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d4(Object(r),!0).forEach(function(n){Ree(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ree(e,t,r){return t=jee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jee(e){var t=zee(e,"string");return Bg(t)=="symbol"?t:t+""}function zee(e,t){if(Bg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lee(e,t,r,n,s){for(var d=(n||[]).slice(),h=d.length,l=t.start,_=t.end,w=function(M){var N=d[M],U,B=function(){return U===void 0&&(U=r(N,M)),U};if(M===h-1){var L=e*(N.coordinate+e*B()/2-_);d[M]=N=Ba(Ba({},N),{},{tickCoord:L>0?N.coordinate-L*e:N.coordinate})}else d[M]=N=Ba(Ba({},N),{},{tickCoord:N.coordinate});var K=S0(e,N.tickCoord,B,l,_);K&&(_=N.tickCoord-e*(B()/2+s),d[M]=Ba(Ba({},N),{},{isShow:!0}))},E=h-1;E>=0;E--)w(E);return d}function Nee(e,t,r,n,s,d){var h=(n||[]).slice(),l=h.length,_=t.start,w=t.end;if(d){var E=n[l-1],A=r(E,l-1),M=e*(E.coordinate+e*A/2-w);h[l-1]=E=Ba(Ba({},E),{},{tickCoord:M>0?E.coordinate-M*e:E.coordinate});var N=S0(e,E.tickCoord,function(){return A},_,w);N&&(w=E.tickCoord-e*(A/2+s),h[l-1]=Ba(Ba({},E),{},{isShow:!0}))}for(var U=d?l-1:l,B=function(Q){var J=h[Q],ie,Z=function(){return ie===void 0&&(ie=r(J,Q)),ie};if(Q===0){var X=e*(J.coordinate-e*Z()/2-_);h[Q]=J=Ba(Ba({},J),{},{tickCoord:X<0?J.coordinate-X*e:J.coordinate})}else h[Q]=J=Ba(Ba({},J),{},{tickCoord:J.coordinate});var le=S0(e,J.tickCoord,Z,_,w);le&&(_=J.tickCoord+e*(Z()/2+s),h[Q]=Ba(Ba({},J),{},{isShow:!0}))},L=0;L<U;L++)B(L);return h}function BP(e,t,r){var n=e.tick,s=e.ticks,d=e.viewBox,h=e.minTickGap,l=e.orientation,_=e.interval,w=e.tickFormatter,E=e.unit,A=e.angle;if(!s||!s.length||!n)return[];if(Bt(_)||Np.isSsr)return Oee(s,typeof _=="number"&&Bt(_)?_:0);var M=[],N=l==="top"||l==="bottom"?"width":"height",U=E&&N==="width"?Km(E,{fontSize:t,letterSpacing:r}):{width:0,height:0},B=function(J,ie){var Z=Dr(w)?w(J.value,ie):J.value;return N==="width"?Iee(Km(Z,{fontSize:t,letterSpacing:r}),U,A):Km(Z,{fontSize:t,letterSpacing:r})[N]},L=s.length>=2?yl(s[1].coordinate-s[0].coordinate):1,K=kee(d,L,N);return _==="equidistantPreserveStart"?Dee(L,K,B,s,h):(_==="preserveStart"||_==="preserveStartEnd"?M=Nee(L,K,B,s,h,_==="preserveStartEnd"):M=Lee(L,K,B,s,h),M.filter(function(Q){return Q.isShow}))}var Bee=["viewBox"],Fee=["viewBox"],$ee=["ticks"];function Ap(e){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ap(e)}function tp(){return tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tp.apply(this,arguments)}function p4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Oi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p4(Object(r),!0).forEach(function(n){FP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a2(e,t){if(e==null)return{};var r=Vee(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Vee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Uee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gj(n.key),n)}}function qee(e,t,r){return t&&m4(e.prototype,t),r&&m4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wee(e,t,r){return t=T0(t),Gee(e,mj()?Reflect.construct(t,r||[],T0(e).constructor):t.apply(e,r))}function Gee(e,t){if(t&&(Ap(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hee(e)}function Hee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mj=function(){return!!e})()}function T0(e){return T0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},T0(e)}function Zee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FS(e,t)}function FS(e,t){return FS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},FS(e,t)}function FP(e,t,r){return t=gj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gj(e){var t=Kee(e,"string");return Ap(t)=="symbol"?t:t+""}function Kee(e,t){if(Ap(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Vp=(function(e){function t(r){var n;return Uee(this,t),n=Wee(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return Zee(t,e),qee(t,[{key:"shouldComponentUpdate",value:function(n,s){var d=n.viewBox,h=a2(n,Bee),l=this.props,_=l.viewBox,w=a2(l,Fee);return!np(d,_)||!np(h,w)||!np(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,d=s.x,h=s.y,l=s.width,_=s.height,w=s.orientation,E=s.tickSize,A=s.mirror,M=s.tickMargin,N,U,B,L,K,Q,J=A?-1:1,ie=n.tickSize||E,Z=Bt(n.tickCoord)?n.tickCoord:n.coordinate;switch(w){case"top":N=U=n.coordinate,L=h+ +!A*_,B=L-J*ie,Q=B-J*M,K=Z;break;case"left":B=L=n.coordinate,U=d+ +!A*l,N=U-J*ie,K=N-J*M,Q=Z;break;case"right":B=L=n.coordinate,U=d+ +A*l,N=U+J*ie,K=N+J*M,Q=Z;break;default:N=U=n.coordinate,L=h+ +A*_,B=L+J*ie,Q=B+J*M,K=Z;break}return{line:{x1:N,y1:B,x2:U,y2:L},tick:{x:K,y:Q}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,d=n.mirror,h;switch(s){case"left":h=d?"start":"end";break;case"right":h=d?"end":"start";break;default:h="middle";break}return h}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,d=n.mirror,h="end";switch(s){case"left":case"right":h="middle";break;case"top":h=d?"start":"end";break;default:h=d?"end":"start";break}return h}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,d=n.y,h=n.width,l=n.height,_=n.orientation,w=n.mirror,E=n.axisLine,A=Oi(Oi(Oi({},qr(this.props,!1)),qr(E,!1)),{},{fill:"none"});if(_==="top"||_==="bottom"){var M=+(_==="top"&&!w||_==="bottom"&&w);A=Oi(Oi({},A),{},{x1:s,y1:d+M*l,x2:s+h,y2:d+M*l})}else{var N=+(_==="left"&&!w||_==="right"&&w);A=Oi(Oi({},A),{},{x1:s+N*h,y1:d,x2:s+N*h,y2:d+l})}return Le.createElement("line",tp({},A,{className:Hr("recharts-cartesian-axis-line",Ls(E,"className"))}))}},{key:"renderTicks",value:function(n,s,d){var h=this,l=this.props,_=l.tickLine,w=l.stroke,E=l.tick,A=l.tickFormatter,M=l.unit,N=BP(Oi(Oi({},this.props),{},{ticks:n}),s,d),U=this.getTickTextAnchor(),B=this.getTickVerticalAnchor(),L=qr(this.props,!1),K=qr(E,!1),Q=Oi(Oi({},L),{},{fill:"none"},qr(_,!1)),J=N.map(function(ie,Z){var X=h.getTickLineCoord(ie),le=X.line,de=X.tick,Pe=Oi(Oi(Oi(Oi({textAnchor:U,verticalAnchor:B},L),{},{stroke:"none",fill:w},K),de),{},{index:Z,payload:ie,visibleTicksCount:N.length,tickFormatter:A});return Le.createElement(fi,tp({className:"recharts-cartesian-axis-tick",key:"tick-".concat(ie.value,"-").concat(ie.coordinate,"-").concat(ie.tickCoord)},jv(h.props,ie,Z)),_&&Le.createElement("line",tp({},Q,le,{className:Hr("recharts-cartesian-axis-tick-line",Ls(_,"className"))})),E&&t.renderTickItem(E,Pe,"".concat(Dr(A)?A(ie.value,Z):ie.value).concat(M||"")))});return Le.createElement("g",{className:"recharts-cartesian-axis-ticks"},J)}},{key:"render",value:function(){var n=this,s=this.props,d=s.axisLine,h=s.width,l=s.height,_=s.ticksGenerator,w=s.className,E=s.hide;if(E)return null;var A=this.props,M=A.ticks,N=a2(A,$ee),U=M;return Dr(_)&&(U=M&&M.length>0?_(this.props):_(N)),h<=0||l<=0||!U||!U.length?null:Le.createElement(fi,{className:Hr("recharts-cartesian-axis",w),ref:function(L){n.layerReference=L}},d&&this.renderAxisLine(),this.renderTicks(U,this.state.fontSize,this.state.letterSpacing),Fa.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,d){var h,l=Hr(s.className,"recharts-cartesian-axis-tick-value");return Le.isValidElement(n)?h=Le.cloneElement(n,Oi(Oi({},s),{},{className:l})):Dr(n)?h=n(Oi(Oi({},s),{},{className:l})):h=Le.createElement(Gv,tp({},s,{className:"recharts-cartesian-axis-tick-value"}),d),h}}])})(Se.Component);FP(Vp,"displayName","CartesianAxis");FP(Vp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Xee=["x1","y1","x2","y2","key"],Yee=["offset"];function Nf(e){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nf(e)}function g4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g4(Object(r),!0).forEach(function(n){Jee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jee(e,t,r){return t=Qee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qee(e){var t=ete(e,"string");return Nf(t)=="symbol"?t:t+""}function ete(e,t){if(Nf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cf(){return Cf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cf.apply(this,arguments)}function y4(e,t){if(e==null)return{};var r=tte(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var rte=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,s=t.x,d=t.y,h=t.width,l=t.height,_=t.ry;return Le.createElement("rect",{x:s,y:d,ry:_,width:h,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function yj(e,t){var r;if(Le.isValidElement(e))r=Le.cloneElement(e,t);else if(Dr(e))r=e(t);else{var n=t.x1,s=t.y1,d=t.x2,h=t.y2,l=t.key,_=y4(t,Xee),w=qr(_,!1);w.offset;var E=y4(w,Yee);r=Le.createElement("line",Cf({},E,{x1:n,y1:s,x2:d,y2:h,fill:"none",key:l}))}return r}function nte(e){var t=e.x,r=e.width,n=e.horizontal,s=n===void 0?!0:n,d=e.horizontalPoints;if(!s||!d||!d.length)return null;var h=d.map(function(l,_){var w=$a($a({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(_),index:_});return yj(s,w)});return Le.createElement("g",{className:"recharts-cartesian-grid-horizontal"},h)}function ite(e){var t=e.y,r=e.height,n=e.vertical,s=n===void 0?!0:n,d=e.verticalPoints;if(!s||!d||!d.length)return null;var h=d.map(function(l,_){var w=$a($a({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(_),index:_});return yj(s,w)});return Le.createElement("g",{className:"recharts-cartesian-grid-vertical"},h)}function ate(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,d=e.width,h=e.height,l=e.horizontalPoints,_=e.horizontal,w=_===void 0?!0:_;if(!w||!t||!t.length)return null;var E=l.map(function(M){return Math.round(M+s-s)}).sort(function(M,N){return M-N});s!==E[0]&&E.unshift(0);var A=E.map(function(M,N){var U=!E[N+1],B=U?s+h-M:E[N+1]-M;if(B<=0)return null;var L=N%t.length;return Le.createElement("rect",{key:"react-".concat(N),y:M,x:n,height:B,width:d,stroke:"none",fill:t[L],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return Le.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},A)}function ote(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,d=e.x,h=e.y,l=e.width,_=e.height,w=e.verticalPoints;if(!r||!n||!n.length)return null;var E=w.map(function(M){return Math.round(M+d-d)}).sort(function(M,N){return M-N});d!==E[0]&&E.unshift(0);var A=E.map(function(M,N){var U=!E[N+1],B=U?d+l-M:E[N+1]-M;if(B<=0)return null;var L=N%n.length;return Le.createElement("rect",{key:"react-".concat(N),x:M,y:h,width:B,height:_,stroke:"none",fill:n[L],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return Le.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},A)}var ste=function(t,r){var n=t.xAxis,s=t.width,d=t.height,h=t.offset;return kR(BP($a($a($a({},Vp.defaultProps),n),{},{ticks:Qu(n,!0),viewBox:{x:0,y:0,width:s,height:d}})),h.left,h.left+h.width,r)},lte=function(t,r){var n=t.yAxis,s=t.width,d=t.height,h=t.offset;return kR(BP($a($a($a({},Vp.defaultProps),n),{},{ticks:Qu(n,!0),viewBox:{x:0,y:0,width:s,height:d}})),h.top,h.top+h.height,r)},Gd={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function vj(e){var t,r,n,s,d,h,l=jP(),_=zP(),w=KQ(),E=$a($a({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Gd.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Gd.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Gd.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:Gd.horizontalFill,vertical:(d=e.vertical)!==null&&d!==void 0?d:Gd.vertical,verticalFill:(h=e.verticalFill)!==null&&h!==void 0?h:Gd.verticalFill,x:Bt(e.x)?e.x:w.left,y:Bt(e.y)?e.y:w.top,width:Bt(e.width)?e.width:w.width,height:Bt(e.height)?e.height:w.height}),A=E.x,M=E.y,N=E.width,U=E.height,B=E.syncWithTicks,L=E.horizontalValues,K=E.verticalValues,Q=GQ(),J=HQ();if(!Bt(N)||N<=0||!Bt(U)||U<=0||!Bt(A)||A!==+A||!Bt(M)||M!==+M)return null;var ie=E.verticalCoordinatesGenerator||ste,Z=E.horizontalCoordinatesGenerator||lte,X=E.horizontalPoints,le=E.verticalPoints;if((!X||!X.length)&&Dr(Z)){var de=L&&L.length,Pe=Z({yAxis:J?$a($a({},J),{},{ticks:de?L:J.ticks}):void 0,width:l,height:_,offset:w},de?!0:B);nc(Array.isArray(Pe),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Nf(Pe),"]")),Array.isArray(Pe)&&(X=Pe)}if((!le||!le.length)&&Dr(ie)){var Fe=K&&K.length,be=ie({xAxis:Q?$a($a({},Q),{},{ticks:Fe?K:Q.ticks}):void 0,width:l,height:_,offset:w},Fe?!0:B);nc(Array.isArray(be),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Nf(be),"]")),Array.isArray(be)&&(le=be)}return Le.createElement("g",{className:"recharts-cartesian-grid"},Le.createElement(rte,{fill:E.fill,fillOpacity:E.fillOpacity,x:E.x,y:E.y,width:E.width,height:E.height,ry:E.ry}),Le.createElement(nte,Cf({},E,{offset:w,horizontalPoints:X,xAxis:Q,yAxis:J})),Le.createElement(ite,Cf({},E,{offset:w,verticalPoints:le,xAxis:Q,yAxis:J})),Le.createElement(ate,Cf({},E,{horizontalPoints:X})),Le.createElement(ote,Cf({},E,{verticalPoints:le})))}vj.displayName="CartesianGrid";var ute=["type","layout","connectNulls","ref"],cte=["key"];function Ep(e){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ep(e)}function v4(e,t){if(e==null)return{};var r=hte(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function hte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Qm(){return Qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qm.apply(this,arguments)}function _4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ts(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_4(Object(r),!0).forEach(function(n){pl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hd(e){return mte(e)||pte(e)||dte(e)||fte()}function fte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dte(e,t){if(e){if(typeof e=="string")return $S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $S(e,t)}}function pte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mte(e){if(Array.isArray(e))return $S(e)}function $S(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xj(n.key),n)}}function yte(e,t,r){return t&&x4(e.prototype,t),r&&x4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vte(e,t,r){return t=P0(t),_te(e,_j()?Reflect.construct(t,r||[],P0(e).constructor):t.apply(e,r))}function _te(e,t){if(t&&(Ep(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xte(e)}function xte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_j=function(){return!!e})()}function P0(e){return P0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},P0(e)}function bte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VS(e,t)}function VS(e,t){return VS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},VS(e,t)}function pl(e,t,r){return t=xj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xj(e){var t=wte(e,"string");return Ep(t)=="symbol"?t:t+""}function wte(e,t){if(Ep(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Df=(function(e){function t(){var r;gte(this,t);for(var n=arguments.length,s=new Array(n),d=0;d<n;d++)s[d]=arguments[d];return r=vte(this,t,[].concat(s)),pl(r,"state",{isAnimationFinished:!0,totalLength:0}),pl(r,"generateSimpleStrokeDasharray",function(h,l){return"".concat(l,"px ").concat(h-l,"px")}),pl(r,"getStrokeDasharray",function(h,l,_){var w=_.reduce(function(K,Q){return K+Q});if(!w)return r.generateSimpleStrokeDasharray(l,h);for(var E=Math.floor(h/w),A=h%w,M=l-h,N=[],U=0,B=0;U<_.length;B+=_[U],++U)if(B+_[U]>A){N=[].concat(Hd(_.slice(0,U)),[A-B]);break}var L=N.length%2===0?[0,M]:[M];return[].concat(Hd(t.repeat(_,E)),Hd(N),L).map(function(K){return"".concat(K,"px")}).join(", ")}),pl(r,"id",Yg("recharts-line-")),pl(r,"pathRef",function(h){r.mainCurve=h}),pl(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),pl(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return bte(t,e),yte(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var d=this.props,h=d.points,l=d.xAxis,_=d.yAxis,w=d.layout,E=d.children,A=Ns(E,ny);if(!A)return null;var M=function(B,L){return{x:B.x,y:B.y,value:B.value,errorVal:ss(B.payload,L)}},N={clipPath:n?"url(#clipPath-".concat(s,")"):null};return Le.createElement(fi,N,A.map(function(U){return Le.cloneElement(U,{key:"bar-".concat(U.props.dataKey),data:h,xAxis:l,yAxis:_,layout:w,dataPointFormatter:M})}))}},{key:"renderDots",value:function(n,s,d){var h=this.props.isAnimationActive;if(h&&!this.state.isAnimationFinished)return null;var l=this.props,_=l.dot,w=l.points,E=l.dataKey,A=qr(this.props,!1),M=qr(_,!0),N=w.map(function(B,L){var K=ts(ts(ts({key:"dot-".concat(L),r:3},A),M),{},{index:L,cx:B.x,cy:B.y,value:B.value,dataKey:E,payload:B.payload,points:w});return t.renderDotItem(_,K)}),U={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(d,")"):null};return Le.createElement(fi,Qm({className:"recharts-line-dots",key:"dots"},U),N)}},{key:"renderCurveStatically",value:function(n,s,d,h){var l=this.props,_=l.type,w=l.layout,E=l.connectNulls;l.ref;var A=v4(l,ute),M=ts(ts(ts({},qr(A,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(d,")"):null,points:n},h),{},{type:_,layout:w,connectNulls:E});return Le.createElement(_S,Qm({},M,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,s){var d=this,h=this.props,l=h.points,_=h.strokeDasharray,w=h.isAnimationActive,E=h.animationBegin,A=h.animationDuration,M=h.animationEasing,N=h.animationId,U=h.animateNewValues,B=h.width,L=h.height,K=this.state,Q=K.prevPoints,J=K.totalLength;return Le.createElement(uc,{begin:E,duration:A,isActive:w,easing:M,from:{t:0},to:{t:1},key:"line-".concat(N),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(ie){var Z=ie.t;if(Q){var X=Q.length/l.length,le=l.map(function(Ue,Ve){var Ze=Math.floor(Ve*X);if(Q[Ze]){var Ye=Q[Ze],it=ml(Ye.x,Ue.x),et=ml(Ye.y,Ue.y);return ts(ts({},Ue),{},{x:it(Z),y:et(Z)})}if(U){var Ge=ml(B*2,Ue.x),rt=ml(L/2,Ue.y);return ts(ts({},Ue),{},{x:Ge(Z),y:rt(Z)})}return ts(ts({},Ue),{},{x:Ue.x,y:Ue.y})});return d.renderCurveStatically(le,n,s)}var de=ml(0,J),Pe=de(Z),Fe;if(_){var be="".concat(_).split(/[,\s]+/gim).map(function(Ue){return parseFloat(Ue)});Fe=d.getStrokeDasharray(Pe,J,be)}else Fe=d.generateSimpleStrokeDasharray(J,Pe);return d.renderCurveStatically(l,n,s,{strokeDasharray:Fe})})}},{key:"renderCurve",value:function(n,s){var d=this.props,h=d.points,l=d.isAnimationActive,_=this.state,w=_.prevPoints,E=_.totalLength;return l&&h&&h.length&&(!w&&E>0||!s_(w,h))?this.renderCurveWithAnimation(n,s):this.renderCurveStatically(h,n,s)}},{key:"render",value:function(){var n,s=this.props,d=s.hide,h=s.dot,l=s.points,_=s.className,w=s.xAxis,E=s.yAxis,A=s.top,M=s.left,N=s.width,U=s.height,B=s.isAnimationActive,L=s.id;if(d||!l||!l.length)return null;var K=this.state.isAnimationFinished,Q=l.length===1,J=Hr("recharts-line",_),ie=w&&w.allowDataOverflow,Z=E&&E.allowDataOverflow,X=ie||Z,le=Lr(L)?this.id:L,de=(n=qr(h,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},Pe=de.r,Fe=Pe===void 0?3:Pe,be=de.strokeWidth,Ue=be===void 0?2:be,Ve=N9(h)?h:{},Ze=Ve.clipDot,Ye=Ze===void 0?!0:Ze,it=Fe*2+Ue;return Le.createElement(fi,{className:J},ie||Z?Le.createElement("defs",null,Le.createElement("clipPath",{id:"clipPath-".concat(le)},Le.createElement("rect",{x:ie?M:M-N/2,y:Z?A:A-U/2,width:ie?N:N*2,height:Z?U:U*2})),!Ye&&Le.createElement("clipPath",{id:"clipPath-dots-".concat(le)},Le.createElement("rect",{x:M-it/2,y:A-it/2,width:N+it,height:U+it}))):null,!Q&&this.renderCurve(X,le),this.renderErrorBar(X,le),(Q||h)&&this.renderDots(X,Ye,le),(!B||K)&&nh.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,s){for(var d=n.length%2!==0?[].concat(Hd(n),[0]):n,h=[],l=0;l<s;++l)h=[].concat(Hd(h),Hd(d));return h}},{key:"renderDotItem",value:function(n,s){var d;if(Le.isValidElement(n))d=Le.cloneElement(n,s);else if(Dr(n))d=n(s);else{var h=s.key,l=v4(s,cte),_=Hr("recharts-line-dot",typeof n!="boolean"?n.className:"");d=Le.createElement(kP,Qm({key:h},l,{className:_}))}return d}}])})(Se.PureComponent);pl(Df,"displayName","Line");pl(Df,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Np.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});pl(Df,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,s=e.xAxisTicks,d=e.yAxisTicks,h=e.dataKey,l=e.bandSize,_=e.displayedData,w=e.offset,E=t.layout,A=_.map(function(M,N){var U=ss(M,h);return E==="horizontal"?{x:R3({axis:r,ticks:s,bandSize:l,entry:M,index:N}),y:Lr(U)?null:n.scale(U),value:U,payload:M}:{x:Lr(U)?null:r.scale(U),y:R3({axis:n,ticks:d,bandSize:l,entry:M,index:N}),value:U,payload:M}});return ts({points:A,layout:E},w)});function Cp(e){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(e)}function Ste(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Sj(n.key),n)}}function Pte(e,t,r){return t&&Tte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ate(e,t,r){return t=A0(t),Ete(e,bj()?Reflect.construct(t,r||[],A0(e).constructor):t.apply(e,r))}function Ete(e,t){if(t&&(Cp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cte(e)}function Cte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bj=function(){return!!e})()}function A0(e){return A0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},A0(e)}function Mte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&US(e,t)}function US(e,t){return US=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},US(e,t)}function wj(e,t,r){return t=Sj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sj(e){var t=Ite(e,"string");return Cp(t)=="symbol"?t:t+""}function Ite(e,t){if(Cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function qS(){return qS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qS.apply(this,arguments)}function kte(e){var t=e.xAxisId,r=jP(),n=zP(),s=oj(t);return s==null?null:Se.createElement(Vp,qS({},s,{className:Hr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(h){return Qu(h,!0)}}))}var y_=(function(e){function t(){return Ste(this,t),Ate(this,t,arguments)}return Mte(t,e),Pte(t,[{key:"render",value:function(){return Se.createElement(kte,this.props)}}])})(Se.Component);wj(y_,"displayName","XAxis");wj(y_,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Mp(e){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mp(e)}function Ote(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Aj(n.key),n)}}function Rte(e,t,r){return t&&Dte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jte(e,t,r){return t=E0(t),zte(e,Tj()?Reflect.construct(t,r||[],E0(e).constructor):t.apply(e,r))}function zte(e,t){if(t&&(Mp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lte(e)}function Lte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tj=function(){return!!e})()}function E0(e){return E0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},E0(e)}function Nte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WS(e,t)}function WS(e,t){return WS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},WS(e,t)}function Pj(e,t,r){return t=Aj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aj(e){var t=Bte(e,"string");return Mp(t)=="symbol"?t:t+""}function Bte(e,t){if(Mp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function GS(){return GS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},GS.apply(this,arguments)}var Fte=function(t){var r=t.yAxisId,n=jP(),s=zP(),d=sj(r);return d==null?null:Se.createElement(Vp,GS({},d,{className:Hr("recharts-".concat(d.axisType," ").concat(d.axisType),d.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return Qu(l,!0)}}))},Fg=(function(e){function t(){return Ote(this,t),jte(this,t,arguments)}return Nte(t,e),Rte(t,[{key:"render",value:function(){return Se.createElement(Fte,this.props)}}])})(Se.Component);Pj(Fg,"displayName","YAxis");Pj(Fg,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function b4(e){return qte(e)||Ute(e)||Vte(e)||$te()}function $te(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vte(e,t){if(e){if(typeof e=="string")return HS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HS(e,t)}}function Ute(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qte(e){if(Array.isArray(e))return HS(e)}function HS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ZS=function(t,r,n,s,d){var h=Ns(t,NP),l=Ns(t,p_),_=[].concat(b4(h),b4(l)),w=Ns(t,g_),E="".concat(s,"Id"),A=s[0],M=r;if(_.length&&(M=_.reduce(function(B,L){if(L.props[E]===n&&hu(L.props,"extendDomain")&&Bt(L.props[A])){var K=L.props[A];return[Math.min(B[0],K),Math.max(B[1],K)]}return B},M)),w.length){var N="".concat(A,"1"),U="".concat(A,"2");M=w.reduce(function(B,L){if(L.props[E]===n&&hu(L.props,"extendDomain")&&Bt(L.props[N])&&Bt(L.props[U])){var K=L.props[N],Q=L.props[U];return[Math.min(B[0],K,Q),Math.max(B[1],K,Q)]}return B},M)}return d&&d.length&&(M=d.reduce(function(B,L){return Bt(L)?[Math.min(B[0],L),Math.max(B[1],L)]:B},M)),M},o2={exports:{}},w4;function Wte(){return w4||(w4=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(_,w,E){this.fn=_,this.context=w,this.once=E||!1}function d(_,w,E,A,M){if(typeof E!="function")throw new TypeError("The listener must be a function");var N=new s(E,A||_,M),U=r?r+w:w;return _._events[U]?_._events[U].fn?_._events[U]=[_._events[U],N]:_._events[U].push(N):(_._events[U]=N,_._eventsCount++),_}function h(_,w){--_._eventsCount===0?_._events=new n:delete _._events[w]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var w=[],E,A;if(this._eventsCount===0)return w;for(A in E=this._events)t.call(E,A)&&w.push(r?A.slice(1):A);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(E)):w},l.prototype.listeners=function(w){var E=r?r+w:w,A=this._events[E];if(!A)return[];if(A.fn)return[A.fn];for(var M=0,N=A.length,U=new Array(N);M<N;M++)U[M]=A[M].fn;return U},l.prototype.listenerCount=function(w){var E=r?r+w:w,A=this._events[E];return A?A.fn?1:A.length:0},l.prototype.emit=function(w,E,A,M,N,U){var B=r?r+w:w;if(!this._events[B])return!1;var L=this._events[B],K=arguments.length,Q,J;if(L.fn){switch(L.once&&this.removeListener(w,L.fn,void 0,!0),K){case 1:return L.fn.call(L.context),!0;case 2:return L.fn.call(L.context,E),!0;case 3:return L.fn.call(L.context,E,A),!0;case 4:return L.fn.call(L.context,E,A,M),!0;case 5:return L.fn.call(L.context,E,A,M,N),!0;case 6:return L.fn.call(L.context,E,A,M,N,U),!0}for(J=1,Q=new Array(K-1);J<K;J++)Q[J-1]=arguments[J];L.fn.apply(L.context,Q)}else{var ie=L.length,Z;for(J=0;J<ie;J++)switch(L[J].once&&this.removeListener(w,L[J].fn,void 0,!0),K){case 1:L[J].fn.call(L[J].context);break;case 2:L[J].fn.call(L[J].context,E);break;case 3:L[J].fn.call(L[J].context,E,A);break;case 4:L[J].fn.call(L[J].context,E,A,M);break;default:if(!Q)for(Z=1,Q=new Array(K-1);Z<K;Z++)Q[Z-1]=arguments[Z];L[J].fn.apply(L[J].context,Q)}}return!0},l.prototype.on=function(w,E,A){return d(this,w,E,A,!1)},l.prototype.once=function(w,E,A){return d(this,w,E,A,!0)},l.prototype.removeListener=function(w,E,A,M){var N=r?r+w:w;if(!this._events[N])return this;if(!E)return h(this,N),this;var U=this._events[N];if(U.fn)U.fn===E&&(!M||U.once)&&(!A||U.context===A)&&h(this,N);else{for(var B=0,L=[],K=U.length;B<K;B++)(U[B].fn!==E||M&&!U[B].once||A&&U[B].context!==A)&&L.push(U[B]);L.length?this._events[N]=L.length===1?L[0]:L:h(this,N)}return this},l.prototype.removeAllListeners=function(w){var E;return w?(E=r?r+w:w,this._events[E]&&h(this,E)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(o2)),o2.exports}var Gte=Wte();const Hte=pn(Gte);var s2=new Hte,l2="recharts.syncMouseEvents";function $g(e){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$g(e)}function Zte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ej(n.key),n)}}function Xte(e,t,r){return t&&Kte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function u2(e,t,r){return t=Ej(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ej(e){var t=Yte(e,"string");return $g(t)=="symbol"?t:t+""}function Yte(e,t){if($g(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($g(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Jte=(function(){function e(){Zte(this,e),u2(this,"activeIndex",0),u2(this,"coordinateList",[]),u2(this,"layout","horizontal")}return Xte(e,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,d=s===void 0?null:s,h=r.container,l=h===void 0?null:h,_=r.layout,w=_===void 0?null:_,E=r.offset,A=E===void 0?null:E,M=r.mouseHandlerCallback,N=M===void 0?null:M;this.coordinateList=(n=d??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=w??this.layout,this.offset=A??this.offset,this.mouseHandlerCallback=N??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),d=s.x,h=s.y,l=s.height,_=this.coordinateList[this.activeIndex].coordinate,w=((r=window)===null||r===void 0?void 0:r.scrollX)||0,E=((n=window)===null||n===void 0?void 0:n.scrollY)||0,A=d+_+w,M=h+this.offset.top+l/2+E;this.mouseHandlerCallback({pageX:A,pageY:M})}}}])})();function Qte(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],s=e==null?void 0:e[1];if(n&&s&&Bt(n)&&Bt(s))return!0}return!1}function ere(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function Cj(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,d=e.endAngle,h=_a(t,r,n,s),l=_a(t,r,n,d);return{points:[h,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:d}}function tre(e,t,r){var n,s,d,h;if(e==="horizontal")n=t.x,d=n,s=r.top,h=r.top+r.height;else if(e==="vertical")s=t.y,h=s,n=r.left,d=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,_=t.cy,w=t.innerRadius,E=t.outerRadius,A=t.angle,M=_a(l,_,w,A),N=_a(l,_,E,A);n=M.x,s=M.y,d=N.x,h=N.y}else return Cj(t);return[{x:n,y:s},{x:d,y:h}]}function Vg(e){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vg(e)}function S4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S4(Object(r),!0).forEach(function(n){rre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rre(e,t,r){return t=nre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nre(e){var t=ire(e,"string");return Vg(t)=="symbol"?t:t+""}function ire(e,t){if(Vg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function are(e){var t,r,n=e.element,s=e.tooltipEventType,d=e.isActive,h=e.activeCoordinate,l=e.activePayload,_=e.offset,w=e.activeTooltipIndex,E=e.tooltipAxisBandSize,A=e.layout,M=e.chartName,N=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!N||!d||!h||M!=="ScatterChart"&&s!=="axis")return null;var U,B=_S;if(M==="ScatterChart")U=h,B=rJ;else if(M==="BarChart")U=ere(A,h,_,E),B=IP;else if(A==="radial"){var L=Cj(h),K=L.cx,Q=L.cy,J=L.radius,ie=L.startAngle,Z=L.endAngle;U={cx:K,cy:Q,startAngle:ie,endAngle:Z,innerRadius:J,outerRadius:J},B=zR}else U={points:tre(A,h,_)},B=_S;var X=dv(dv(dv(dv({stroke:"#ccc",pointerEvents:"none"},_),U),qr(N,!1)),{},{payload:l,payloadIndex:w,className:Hr("recharts-tooltip-cursor",N.className)});return Se.isValidElement(N)?Se.cloneElement(N,X):Se.createElement(B,X)}var ore=["item"],sre=["children","className","width","height","style","compact","title","desc"];function Ip(e){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(e)}function rp(){return rp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rp.apply(this,arguments)}function T4(e,t){return cre(e)||ure(e,t)||Ij(e,t)||lre()}function lre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ure(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,d,h,l=[],_=!0,w=!1;try{if(d=(r=r.call(e)).next,t!==0)for(;!(_=(n=d.call(r)).done)&&(l.push(n.value),l.length!==t);_=!0);}catch(E){w=!0,s=E}finally{try{if(!_&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(w)throw s}}return l}}function cre(e){if(Array.isArray(e))return e}function P4(e,t){if(e==null)return{};var r=hre(e,t),n,s;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(s=0;s<d.length;s++)n=d[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function hre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function fre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dre(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kj(n.key),n)}}function pre(e,t,r){return t&&dre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mre(e,t,r){return t=C0(t),gre(e,Mj()?Reflect.construct(t,r||[],C0(e).constructor):t.apply(e,r))}function gre(e,t){if(t&&(Ip(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yre(e)}function yre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mj=function(){return!!e})()}function C0(e){return C0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},C0(e)}function vre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KS(e,t)}function KS(e,t){return KS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},KS(e,t)}function kp(e){return bre(e)||xre(e)||Ij(e)||_re()}function _re(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ij(e,t){if(e){if(typeof e=="string")return XS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XS(e,t)}}function xre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bre(e){if(Array.isArray(e))return XS(e)}function XS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ut(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A4(Object(r),!0).forEach(function(n){mr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mr(e,t,r){return t=kj(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kj(e){var t=wre(e,"string");return Ip(t)=="symbol"?t:t+""}function wre(e,t){if(Ip(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ip(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sre={xAxis:["bottom","top"],yAxis:["left","right"]},Tre={width:"100%",height:"100%"},Oj={x:0,y:0};function pv(e){return e}var Pre=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},Are=function(t,r,n,s){var d=r.find(function(E){return E&&E.index===n});if(d){if(t==="horizontal")return{x:d.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:d.coordinate};if(t==="centric"){var h=d.coordinate,l=s.radius;return ut(ut(ut({},s),_a(s.cx,s.cy,l,h)),{},{angle:h,radius:l})}var _=d.coordinate,w=s.angle;return ut(ut(ut({},s),_a(s.cx,s.cy,_,w)),{},{angle:w,radius:_})}return Oj},v_=function(t,r){var n=r.graphicalItems,s=r.dataStartIndex,d=r.dataEndIndex,h=(n??[]).reduce(function(l,_){var w=_.props.data;return w&&w.length?[].concat(kp(l),kp(w)):l},[]);return h.length>0?h:t&&t.length&&Bt(s)&&Bt(d)?t.slice(s,d+1):[]};function Dj(e){return e==="number"?[0,"auto"]:void 0}var YS=function(t,r,n,s){var d=t.graphicalItems,h=t.tooltipAxis,l=v_(r,t);return n<0||!d||!d.length||n>=l.length?null:d.reduce(function(_,w){var E,A=(E=w.props.data)!==null&&E!==void 0?E:r;A&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(A=A.slice(t.dataStartIndex,t.dataEndIndex+1));var M;if(h.dataKey&&!h.allowDuplicatedCategory){var N=A===void 0?l:A;M=Dv(N,h.dataKey,s)}else M=A&&A[n]||l[n];return M?[].concat(kp(_),[DR(w,M)]):_},[])},E4=function(t,r,n,s){var d=s||{x:t.chartX,y:t.chartY},h=Pre(d,n),l=t.orderedTooltipTicks,_=t.tooltipAxis,w=t.tooltipTicks,E=NZ(h,l,w,_);if(E>=0&&w){var A=w[E]&&w[E].value,M=YS(t,r,E,A),N=Are(n,l,E,d);return{activeTooltipIndex:E,activeLabel:A,activePayload:M,activeCoordinate:N}}return null},Ere=function(t,r){var n=r.axes,s=r.graphicalItems,d=r.axisType,h=r.axisIdKey,l=r.stackGroups,_=r.dataStartIndex,w=r.dataEndIndex,E=t.layout,A=t.children,M=t.stackOffset,N=IR(E,d);return n.reduce(function(U,B){var L,K=B.type.defaultProps!==void 0?ut(ut({},B.type.defaultProps),B.props):B.props,Q=K.type,J=K.dataKey,ie=K.allowDataOverflow,Z=K.allowDuplicatedCategory,X=K.scale,le=K.ticks,de=K.includeHidden,Pe=K[h];if(U[Pe])return U;var Fe=v_(t.data,{graphicalItems:s.filter(function(Ce){var nt,ht=h in Ce.props?Ce.props[h]:(nt=Ce.type.defaultProps)===null||nt===void 0?void 0:nt[h];return ht===Pe}),dataStartIndex:_,dataEndIndex:w}),be=Fe.length,Ue,Ve,Ze;Qte(K.domain,ie,Q)&&(Ue=pS(K.domain,null,ie),N&&(Q==="number"||X!=="auto")&&(Ze=Ym(Fe,J,"category")));var Ye=Dj(Q);if(!Ue||Ue.length===0){var it,et=(it=K.domain)!==null&&it!==void 0?it:Ye;if(J){if(Ue=Ym(Fe,J,Q),Q==="category"&&N){var Ge=C9(Ue);Z&&Ge?(Ve=Ue,Ue=m0(0,be)):Z||(Ue=N3(et,Ue,B).reduce(function(Ce,nt){return Ce.indexOf(nt)>=0?Ce:[].concat(kp(Ce),[nt])},[]))}else if(Q==="category")Z?Ue=Ue.filter(function(Ce){return Ce!==""&&!Lr(Ce)}):Ue=N3(et,Ue,B).reduce(function(Ce,nt){return Ce.indexOf(nt)>=0||nt===""||Lr(nt)?Ce:[].concat(kp(Ce),[nt])},[]);else if(Q==="number"){var rt=UZ(Fe,s.filter(function(Ce){var nt,ht,pt=h in Ce.props?Ce.props[h]:(nt=Ce.type.defaultProps)===null||nt===void 0?void 0:nt[h],At="hide"in Ce.props?Ce.props.hide:(ht=Ce.type.defaultProps)===null||ht===void 0?void 0:ht.hide;return pt===Pe&&(de||!At)}),J,d,E);rt&&(Ue=rt)}N&&(Q==="number"||X!=="auto")&&(Ze=Ym(Fe,J,"category"))}else N?Ue=m0(0,be):l&&l[Pe]&&l[Pe].hasStack&&Q==="number"?Ue=M==="expand"?[0,1]:OR(l[Pe].stackGroups,_,w):Ue=MR(Fe,s.filter(function(Ce){var nt=h in Ce.props?Ce.props[h]:Ce.type.defaultProps[h],ht="hide"in Ce.props?Ce.props.hide:Ce.type.defaultProps.hide;return nt===Pe&&(de||!ht)}),Q,E,!0);if(Q==="number")Ue=ZS(A,Ue,Pe,d,le),et&&(Ue=pS(et,Ue,ie));else if(Q==="category"&&et){var ge=et,ne=Ue.every(function(Ce){return ge.indexOf(Ce)>=0});ne&&(Ue=ge)}}return ut(ut({},U),{},mr({},Pe,ut(ut({},K),{},{axisType:d,domain:Ue,categoricalDomain:Ze,duplicateDomain:Ve,originalDomain:(L=K.domain)!==null&&L!==void 0?L:Ye,isCategorical:N,layout:E})))},{})},Cre=function(t,r){var n=r.graphicalItems,s=r.Axis,d=r.axisType,h=r.axisIdKey,l=r.stackGroups,_=r.dataStartIndex,w=r.dataEndIndex,E=t.layout,A=t.children,M=v_(t.data,{graphicalItems:n,dataStartIndex:_,dataEndIndex:w}),N=M.length,U=IR(E,d),B=-1;return n.reduce(function(L,K){var Q=K.type.defaultProps!==void 0?ut(ut({},K.type.defaultProps),K.props):K.props,J=Q[h],ie=Dj("number");if(!L[J]){B++;var Z;return U?Z=m0(0,N):l&&l[J]&&l[J].hasStack?(Z=OR(l[J].stackGroups,_,w),Z=ZS(A,Z,J,d)):(Z=pS(ie,MR(M,n.filter(function(X){var le,de,Pe=h in X.props?X.props[h]:(le=X.type.defaultProps)===null||le===void 0?void 0:le[h],Fe="hide"in X.props?X.props.hide:(de=X.type.defaultProps)===null||de===void 0?void 0:de.hide;return Pe===J&&!Fe}),"number",E),s.defaultProps.allowDataOverflow),Z=ZS(A,Z,J,d)),ut(ut({},L),{},mr({},J,ut(ut({axisType:d},s.defaultProps),{},{hide:!0,orientation:Ls(Sre,"".concat(d,".").concat(B%2),null),domain:Z,originalDomain:ie,isCategorical:U,layout:E})))}return L},{})},Mre=function(t,r){var n=r.axisType,s=n===void 0?"xAxis":n,d=r.AxisComp,h=r.graphicalItems,l=r.stackGroups,_=r.dataStartIndex,w=r.dataEndIndex,E=t.children,A="".concat(s,"Id"),M=Ns(E,d),N={};return M&&M.length?N=Ere(t,{axes:M,graphicalItems:h,axisType:s,axisIdKey:A,stackGroups:l,dataStartIndex:_,dataEndIndex:w}):h&&h.length&&(N=Cre(t,{Axis:d,graphicalItems:h,axisType:s,axisIdKey:A,stackGroups:l,dataStartIndex:_,dataEndIndex:w})),N},Ire=function(t){var r=Jc(t),n=Qu(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:nP(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:o0(r,n)}},C4=function(t){var r=t.children,n=t.defaultShowTooltip,s=ns(r,bp),d=0,h=0;return t.data&&t.data.length!==0&&(h=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(d=s.props.startIndex),s.props.endIndex>=0&&(h=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:d,dataEndIndex:h,activeTooltipIndex:-1,isTooltipActive:!!n}},kre=function(t){return!t||!t.length?!1:t.some(function(r){var n=rc(r&&r.type);return n&&n.indexOf("Bar")>=0})},M4=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Ore=function(t,r){var n=t.props,s=t.graphicalItems,d=t.xAxisMap,h=d===void 0?{}:d,l=t.yAxisMap,_=l===void 0?{}:l,w=n.width,E=n.height,A=n.children,M=n.margin||{},N=ns(A,bp),U=ns(A,If),B=Object.keys(_).reduce(function(Z,X){var le=_[X],de=le.orientation;return!le.mirror&&!le.hide?ut(ut({},Z),{},mr({},de,Z[de]+le.width)):Z},{left:M.left||0,right:M.right||0}),L=Object.keys(h).reduce(function(Z,X){var le=h[X],de=le.orientation;return!le.mirror&&!le.hide?ut(ut({},Z),{},mr({},de,Ls(Z,"".concat(de))+le.height)):Z},{top:M.top||0,bottom:M.bottom||0}),K=ut(ut({},L),B),Q=K.bottom;N&&(K.bottom+=N.props.height||bp.defaultProps.height),U&&r&&(K=$Z(K,s,n,r));var J=w-K.left-K.right,ie=E-K.top-K.bottom;return ut(ut({brushBottom:Q},K),{},{width:Math.max(J,0),height:Math.max(ie,0)})},Dre=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Rre=function(t){var r=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,d=s===void 0?"axis":s,h=t.validateTooltipEventTypes,l=h===void 0?["axis"]:h,_=t.axisComponents,w=t.legendContent,E=t.formatAxisMap,A=t.defaultProps,M=function(K,Q){var J=Q.graphicalItems,ie=Q.stackGroups,Z=Q.offset,X=Q.updateId,le=Q.dataStartIndex,de=Q.dataEndIndex,Pe=K.barSize,Fe=K.layout,be=K.barGap,Ue=K.barCategoryGap,Ve=K.maxBarSize,Ze=M4(Fe),Ye=Ze.numericAxisName,it=Ze.cateAxisName,et=kre(J),Ge=[];return J.forEach(function(rt,ge){var ne=v_(K.data,{graphicalItems:[rt],dataStartIndex:le,dataEndIndex:de}),Ce=rt.type.defaultProps!==void 0?ut(ut({},rt.type.defaultProps),rt.props):rt.props,nt=Ce.dataKey,ht=Ce.maxBarSize,pt=Ce["".concat(Ye,"Id")],At=Ce["".concat(it,"Id")],_t={},wt=_.reduce(function(Ln,Nn){var di=Q["".concat(Nn.axisType,"Map")],ta=Ce["".concat(Nn.axisType,"Id")];di&&di[ta]||Nn.axisType==="zAxis"||Lf();var Kn=di[ta];return ut(ut({},Ln),{},mr(mr({},Nn.axisType,Kn),"".concat(Nn.axisType,"Ticks"),Qu(Kn)))},_t),ot=wt[it],It=wt["".concat(it,"Ticks")],Ft=ie&&ie[pt]&&ie[pt].hasStack&&tK(rt,ie[pt].stackGroups),at=rc(rt.type).indexOf("Bar")>=0,ar=o0(ot,It),jt=[],br=et&&BZ({barSize:Pe,stackGroups:ie,totalSize:Dre(wt,it)});if(at){var $e,Er,hn=Lr(ht)?Ve:ht,lr=($e=(Er=o0(ot,It,!0))!==null&&Er!==void 0?Er:hn)!==null&&$e!==void 0?$e:0;jt=FZ({barGap:be,barCategoryGap:Ue,bandSize:lr!==ar?lr:ar,sizeList:br[At],maxBarSize:hn}),lr!==ar&&(jt=jt.map(function(Ln){return ut(ut({},Ln),{},{position:ut(ut({},Ln.position),{},{offset:Ln.position.offset-lr/2})})}))}var xr=rt&&rt.type&&rt.type.getComposedData;xr&&Ge.push({props:ut(ut({},xr(ut(ut({},wt),{},{displayedData:ne,props:K,dataKey:nt,item:rt,bandSize:ar,barPosition:jt,offset:Z,stackedData:Ft,layout:Fe,dataStartIndex:le,dataEndIndex:de}))),{},mr(mr(mr({key:rt.key||"item-".concat(ge)},Ye,wt[Ye]),it,wt[it]),"animationId",X)),childIndex:$9(rt,K.children),item:rt})}),Ge},N=function(K,Q){var J=K.props,ie=K.dataStartIndex,Z=K.dataEndIndex,X=K.updateId;if(!JC({props:J}))return null;var le=J.children,de=J.layout,Pe=J.stackOffset,Fe=J.data,be=J.reverseStackOrder,Ue=M4(de),Ve=Ue.numericAxisName,Ze=Ue.cateAxisName,Ye=Ns(le,n),it=JZ(Fe,Ye,"".concat(Ve,"Id"),"".concat(Ze,"Id"),Pe,be),et=_.reduce(function(Ce,nt){var ht="".concat(nt.axisType,"Map");return ut(ut({},Ce),{},mr({},ht,Mre(J,ut(ut({},nt),{},{graphicalItems:Ye,stackGroups:nt.axisType===Ve&&it,dataStartIndex:ie,dataEndIndex:Z}))))},{}),Ge=Ore(ut(ut({},et),{},{props:J,graphicalItems:Ye}),Q==null?void 0:Q.legendBBox);Object.keys(et).forEach(function(Ce){et[Ce]=E(J,et[Ce],Ge,Ce.replace("Map",""),r)});var rt=et["".concat(Ze,"Map")],ge=Ire(rt),ne=M(J,ut(ut({},et),{},{dataStartIndex:ie,dataEndIndex:Z,updateId:X,graphicalItems:Ye,stackGroups:it,offset:Ge}));return ut(ut({formattedGraphicalItems:ne,graphicalItems:Ye,offset:Ge,stackGroups:it},ge),et)},U=(function(L){function K(Q){var J,ie,Z;return fre(this,K),Z=mre(this,K,[Q]),mr(Z,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),mr(Z,"accessibilityManager",new Jte),mr(Z,"handleLegendBBoxUpdate",function(X){if(X){var le=Z.state,de=le.dataStartIndex,Pe=le.dataEndIndex,Fe=le.updateId;Z.setState(ut({legendBBox:X},N({props:Z.props,dataStartIndex:de,dataEndIndex:Pe,updateId:Fe},ut(ut({},Z.state),{},{legendBBox:X}))))}}),mr(Z,"handleReceiveSyncEvent",function(X,le,de){if(Z.props.syncId===X){if(de===Z.eventEmitterSymbol&&typeof Z.props.syncMethod!="function")return;Z.applySyncEvent(le)}}),mr(Z,"handleBrushChange",function(X){var le=X.startIndex,de=X.endIndex;if(le!==Z.state.dataStartIndex||de!==Z.state.dataEndIndex){var Pe=Z.state.updateId;Z.setState(function(){return ut({dataStartIndex:le,dataEndIndex:de},N({props:Z.props,dataStartIndex:le,dataEndIndex:de,updateId:Pe},Z.state))}),Z.triggerSyncEvent({dataStartIndex:le,dataEndIndex:de})}}),mr(Z,"handleMouseEnter",function(X){var le=Z.getMouseInfo(X);if(le){var de=ut(ut({},le),{},{isTooltipActive:!0});Z.setState(de),Z.triggerSyncEvent(de);var Pe=Z.props.onMouseEnter;Dr(Pe)&&Pe(de,X)}}),mr(Z,"triggeredAfterMouseMove",function(X){var le=Z.getMouseInfo(X),de=le?ut(ut({},le),{},{isTooltipActive:!0}):{isTooltipActive:!1};Z.setState(de),Z.triggerSyncEvent(de);var Pe=Z.props.onMouseMove;Dr(Pe)&&Pe(de,X)}),mr(Z,"handleItemMouseEnter",function(X){Z.setState(function(){return{isTooltipActive:!0,activeItem:X,activePayload:X.tooltipPayload,activeCoordinate:X.tooltipPosition||{x:X.cx,y:X.cy}}})}),mr(Z,"handleItemMouseLeave",function(){Z.setState(function(){return{isTooltipActive:!1}})}),mr(Z,"handleMouseMove",function(X){X.persist(),Z.throttleTriggeredAfterMouseMove(X)}),mr(Z,"handleMouseLeave",function(X){Z.throttleTriggeredAfterMouseMove.cancel();var le={isTooltipActive:!1};Z.setState(le),Z.triggerSyncEvent(le);var de=Z.props.onMouseLeave;Dr(de)&&de(le,X)}),mr(Z,"handleOuterEvent",function(X){var le=F9(X),de=Ls(Z.props,"".concat(le));if(le&&Dr(de)){var Pe,Fe;/.*touch.*/i.test(le)?Fe=Z.getMouseInfo(X.changedTouches[0]):Fe=Z.getMouseInfo(X),de((Pe=Fe)!==null&&Pe!==void 0?Pe:{},X)}}),mr(Z,"handleClick",function(X){var le=Z.getMouseInfo(X);if(le){var de=ut(ut({},le),{},{isTooltipActive:!0});Z.setState(de),Z.triggerSyncEvent(de);var Pe=Z.props.onClick;Dr(Pe)&&Pe(de,X)}}),mr(Z,"handleMouseDown",function(X){var le=Z.props.onMouseDown;if(Dr(le)){var de=Z.getMouseInfo(X);le(de,X)}}),mr(Z,"handleMouseUp",function(X){var le=Z.props.onMouseUp;if(Dr(le)){var de=Z.getMouseInfo(X);le(de,X)}}),mr(Z,"handleTouchMove",function(X){X.changedTouches!=null&&X.changedTouches.length>0&&Z.throttleTriggeredAfterMouseMove(X.changedTouches[0])}),mr(Z,"handleTouchStart",function(X){X.changedTouches!=null&&X.changedTouches.length>0&&Z.handleMouseDown(X.changedTouches[0])}),mr(Z,"handleTouchEnd",function(X){X.changedTouches!=null&&X.changedTouches.length>0&&Z.handleMouseUp(X.changedTouches[0])}),mr(Z,"handleDoubleClick",function(X){var le=Z.props.onDoubleClick;if(Dr(le)){var de=Z.getMouseInfo(X);le(de,X)}}),mr(Z,"handleContextMenu",function(X){var le=Z.props.onContextMenu;if(Dr(le)){var de=Z.getMouseInfo(X);le(de,X)}}),mr(Z,"triggerSyncEvent",function(X){Z.props.syncId!==void 0&&s2.emit(l2,Z.props.syncId,X,Z.eventEmitterSymbol)}),mr(Z,"applySyncEvent",function(X){var le=Z.props,de=le.layout,Pe=le.syncMethod,Fe=Z.state.updateId,be=X.dataStartIndex,Ue=X.dataEndIndex;if(X.dataStartIndex!==void 0||X.dataEndIndex!==void 0)Z.setState(ut({dataStartIndex:be,dataEndIndex:Ue},N({props:Z.props,dataStartIndex:be,dataEndIndex:Ue,updateId:Fe},Z.state)));else if(X.activeTooltipIndex!==void 0){var Ve=X.chartX,Ze=X.chartY,Ye=X.activeTooltipIndex,it=Z.state,et=it.offset,Ge=it.tooltipTicks;if(!et)return;if(typeof Pe=="function")Ye=Pe(Ge,X);else if(Pe==="value"){Ye=-1;for(var rt=0;rt<Ge.length;rt++)if(Ge[rt].value===X.activeLabel){Ye=rt;break}}var ge=ut(ut({},et),{},{x:et.left,y:et.top}),ne=Math.min(Ve,ge.x+ge.width),Ce=Math.min(Ze,ge.y+ge.height),nt=Ge[Ye]&&Ge[Ye].value,ht=YS(Z.state,Z.props.data,Ye),pt=Ge[Ye]?{x:de==="horizontal"?Ge[Ye].coordinate:ne,y:de==="horizontal"?Ce:Ge[Ye].coordinate}:Oj;Z.setState(ut(ut({},X),{},{activeLabel:nt,activeCoordinate:pt,activePayload:ht,activeTooltipIndex:Ye}))}else Z.setState(X)}),mr(Z,"renderCursor",function(X){var le,de=Z.state,Pe=de.isTooltipActive,Fe=de.activeCoordinate,be=de.activePayload,Ue=de.offset,Ve=de.activeTooltipIndex,Ze=de.tooltipAxisBandSize,Ye=Z.getTooltipEventType(),it=(le=X.props.active)!==null&&le!==void 0?le:Pe,et=Z.props.layout,Ge=X.key||"_recharts-cursor";return Le.createElement(are,{key:Ge,activeCoordinate:Fe,activePayload:be,activeTooltipIndex:Ve,chartName:r,element:X,isActive:it,layout:et,offset:Ue,tooltipAxisBandSize:Ze,tooltipEventType:Ye})}),mr(Z,"renderPolarAxis",function(X,le,de){var Pe=Ls(X,"type.axisType"),Fe=Ls(Z.state,"".concat(Pe,"Map")),be=X.type.defaultProps,Ue=be!==void 0?ut(ut({},be),X.props):X.props,Ve=Fe&&Fe[Ue["".concat(Pe,"Id")]];return Se.cloneElement(X,ut(ut({},Ve),{},{className:Hr(Pe,Ve.className),key:X.key||"".concat(le,"-").concat(de),ticks:Qu(Ve,!0)}))}),mr(Z,"renderPolarGrid",function(X){var le=X.props,de=le.radialLines,Pe=le.polarAngles,Fe=le.polarRadius,be=Z.state,Ue=be.radiusAxisMap,Ve=be.angleAxisMap,Ze=Jc(Ue),Ye=Jc(Ve),it=Ye.cx,et=Ye.cy,Ge=Ye.innerRadius,rt=Ye.outerRadius;return Se.cloneElement(X,{polarAngles:Array.isArray(Pe)?Pe:Qu(Ye,!0).map(function(ge){return ge.coordinate}),polarRadius:Array.isArray(Fe)?Fe:Qu(Ze,!0).map(function(ge){return ge.coordinate}),cx:it,cy:et,innerRadius:Ge,outerRadius:rt,key:X.key||"polar-grid",radialLines:de})}),mr(Z,"renderLegend",function(){var X=Z.state.formattedGraphicalItems,le=Z.props,de=le.children,Pe=le.width,Fe=le.height,be=Z.props.margin||{},Ue=Pe-(be.left||0)-(be.right||0),Ve=ER({children:de,formattedGraphicalItems:X,legendWidth:Ue,legendContent:w});if(!Ve)return null;var Ze=Ve.item,Ye=P4(Ve,ore);return Se.cloneElement(Ze,ut(ut({},Ye),{},{chartWidth:Pe,chartHeight:Fe,margin:be,onBBoxUpdate:Z.handleLegendBBoxUpdate}))}),mr(Z,"renderTooltip",function(){var X,le=Z.props,de=le.children,Pe=le.accessibilityLayer,Fe=ns(de,ou);if(!Fe)return null;var be=Z.state,Ue=be.isTooltipActive,Ve=be.activeCoordinate,Ze=be.activePayload,Ye=be.activeLabel,it=be.offset,et=(X=Fe.props.active)!==null&&X!==void 0?X:Ue;return Se.cloneElement(Fe,{viewBox:ut(ut({},it),{},{x:it.left,y:it.top}),active:et,label:Ye,payload:et?Ze:[],coordinate:Ve,accessibilityLayer:Pe})}),mr(Z,"renderBrush",function(X){var le=Z.props,de=le.margin,Pe=le.data,Fe=Z.state,be=Fe.offset,Ue=Fe.dataStartIndex,Ve=Fe.dataEndIndex,Ze=Fe.updateId;return Se.cloneElement(X,{key:X.key||"_recharts-brush",onChange:uv(Z.handleBrushChange,X.props.onChange),data:Pe,x:Bt(X.props.x)?X.props.x:be.left,y:Bt(X.props.y)?X.props.y:be.top+be.height+be.brushBottom-(de.bottom||0),width:Bt(X.props.width)?X.props.width:be.width,startIndex:Ue,endIndex:Ve,updateId:"brush-".concat(Ze)})}),mr(Z,"renderReferenceElement",function(X,le,de){if(!X)return null;var Pe=Z,Fe=Pe.clipPathId,be=Z.state,Ue=be.xAxisMap,Ve=be.yAxisMap,Ze=be.offset,Ye=X.type.defaultProps||{},it=X.props,et=it.xAxisId,Ge=et===void 0?Ye.xAxisId:et,rt=it.yAxisId,ge=rt===void 0?Ye.yAxisId:rt;return Se.cloneElement(X,{key:X.key||"".concat(le,"-").concat(de),xAxis:Ue[Ge],yAxis:Ve[ge],viewBox:{x:Ze.left,y:Ze.top,width:Ze.width,height:Ze.height},clipPathId:Fe})}),mr(Z,"renderActivePoints",function(X){var le=X.item,de=X.activePoint,Pe=X.basePoint,Fe=X.childIndex,be=X.isRange,Ue=[],Ve=le.props.key,Ze=le.item.type.defaultProps!==void 0?ut(ut({},le.item.type.defaultProps),le.item.props):le.item.props,Ye=Ze.activeDot,it=Ze.dataKey,et=ut(ut({index:Fe,dataKey:it,cx:de.x,cy:de.y,r:4,fill:MP(le.item),strokeWidth:2,stroke:"#fff",payload:de.payload,value:de.value},qr(Ye,!1)),Rv(Ye));return Ue.push(K.renderActiveDot(Ye,et,"".concat(Ve,"-activePoint-").concat(Fe))),Pe?Ue.push(K.renderActiveDot(Ye,ut(ut({},et),{},{cx:Pe.x,cy:Pe.y}),"".concat(Ve,"-basePoint-").concat(Fe))):be&&Ue.push(null),Ue}),mr(Z,"renderGraphicChild",function(X,le,de){var Pe=Z.filterFormatItem(X,le,de);if(!Pe)return null;var Fe=Z.getTooltipEventType(),be=Z.state,Ue=be.isTooltipActive,Ve=be.tooltipAxis,Ze=be.activeTooltipIndex,Ye=be.activeLabel,it=Z.props.children,et=ns(it,ou),Ge=Pe.props,rt=Ge.points,ge=Ge.isRange,ne=Ge.baseLine,Ce=Pe.item.type.defaultProps!==void 0?ut(ut({},Pe.item.type.defaultProps),Pe.item.props):Pe.item.props,nt=Ce.activeDot,ht=Ce.hide,pt=Ce.activeBar,At=Ce.activeShape,_t=!!(!ht&&Ue&&et&&(nt||pt||At)),wt={};Fe!=="axis"&&et&&et.props.trigger==="click"?wt={onClick:uv(Z.handleItemMouseEnter,X.props.onClick)}:Fe!=="axis"&&(wt={onMouseLeave:uv(Z.handleItemMouseLeave,X.props.onMouseLeave),onMouseEnter:uv(Z.handleItemMouseEnter,X.props.onMouseEnter)});var ot=Se.cloneElement(X,ut(ut({},Pe.props),wt));function It(Nn){return typeof Ve.dataKey=="function"?Ve.dataKey(Nn.payload):null}if(_t)if(Ze>=0){var Ft,at;if(Ve.dataKey&&!Ve.allowDuplicatedCategory){var ar=typeof Ve.dataKey=="function"?It:"payload.".concat(Ve.dataKey.toString());Ft=Dv(rt,ar,Ye),at=ge&&ne&&Dv(ne,ar,Ye)}else Ft=rt==null?void 0:rt[Ze],at=ge&&ne&&ne[Ze];if(At||pt){var jt=X.props.activeIndex!==void 0?X.props.activeIndex:Ze;return[Se.cloneElement(X,ut(ut(ut({},Pe.props),wt),{},{activeIndex:jt})),null,null]}if(!Lr(Ft))return[ot].concat(kp(Z.renderActivePoints({item:Pe,activePoint:Ft,basePoint:at,childIndex:Ze,isRange:ge})))}else{var br,$e=(br=Z.getItemByXY(Z.state.activeCoordinate))!==null&&br!==void 0?br:{graphicalItem:ot},Er=$e.graphicalItem,hn=Er.item,lr=hn===void 0?X:hn,xr=Er.childIndex,Ln=ut(ut(ut({},Pe.props),wt),{},{activeIndex:xr});return[Se.cloneElement(lr,Ln),null,null]}return ge?[ot,null,null]:[ot,null]}),mr(Z,"renderCustomized",function(X,le,de){return Se.cloneElement(X,ut(ut({key:"recharts-customized-".concat(de)},Z.props),Z.state))}),mr(Z,"renderMap",{CartesianGrid:{handler:pv,once:!0},ReferenceArea:{handler:Z.renderReferenceElement},ReferenceLine:{handler:pv},ReferenceDot:{handler:Z.renderReferenceElement},XAxis:{handler:pv},YAxis:{handler:pv},Brush:{handler:Z.renderBrush,once:!0},Bar:{handler:Z.renderGraphicChild},Line:{handler:Z.renderGraphicChild},Area:{handler:Z.renderGraphicChild},Radar:{handler:Z.renderGraphicChild},RadialBar:{handler:Z.renderGraphicChild},Scatter:{handler:Z.renderGraphicChild},Pie:{handler:Z.renderGraphicChild},Funnel:{handler:Z.renderGraphicChild},Tooltip:{handler:Z.renderCursor,once:!0},PolarGrid:{handler:Z.renderPolarGrid,once:!0},PolarAngleAxis:{handler:Z.renderPolarAxis},PolarRadiusAxis:{handler:Z.renderPolarAxis},Customized:{handler:Z.renderCustomized}}),Z.clipPathId="".concat((J=Q.id)!==null&&J!==void 0?J:Yg("recharts"),"-clip"),Z.throttleTriggeredAfterMouseMove=A6(Z.triggeredAfterMouseMove,(ie=Q.throttleDelay)!==null&&ie!==void 0?ie:1e3/60),Z.state={},Z}return vre(K,L),pre(K,[{key:"componentDidMount",value:function(){var J,ie;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(J=this.props.margin.left)!==null&&J!==void 0?J:0,top:(ie=this.props.margin.top)!==null&&ie!==void 0?ie:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var J=this.props,ie=J.children,Z=J.data,X=J.height,le=J.layout,de=ns(ie,ou);if(de){var Pe=de.props.defaultIndex;if(!(typeof Pe!="number"||Pe<0||Pe>this.state.tooltipTicks.length-1)){var Fe=this.state.tooltipTicks[Pe]&&this.state.tooltipTicks[Pe].value,be=YS(this.state,Z,Pe,Fe),Ue=this.state.tooltipTicks[Pe].coordinate,Ve=(this.state.offset.top+X)/2,Ze=le==="horizontal",Ye=Ze?{x:Ue,y:Ve}:{y:Ue,x:Ve},it=this.state.formattedGraphicalItems.find(function(Ge){var rt=Ge.item;return rt.type.name==="Scatter"});it&&(Ye=ut(ut({},Ye),it.props.points[Pe].tooltipPosition),be=it.props.points[Pe].tooltipPayload);var et={activeTooltipIndex:Pe,isTooltipActive:!0,activeLabel:Fe,activePayload:be,activeCoordinate:Ye};this.setState(et),this.renderCursor(de),this.accessibilityManager.setIndex(Pe)}}}},{key:"getSnapshotBeforeUpdate",value:function(J,ie){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==ie.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==J.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==J.margin){var Z,X;this.accessibilityManager.setDetails({offset:{left:(Z=this.props.margin.left)!==null&&Z!==void 0?Z:0,top:(X=this.props.margin.top)!==null&&X!==void 0?X:0}})}return null}},{key:"componentDidUpdate",value:function(J){z2([ns(J.children,ou)],[ns(this.props.children,ou)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var J=ns(this.props.children,ou);if(J&&typeof J.props.shared=="boolean"){var ie=J.props.shared?"axis":"item";return l.indexOf(ie)>=0?ie:d}return d}},{key:"getMouseInfo",value:function(J){if(!this.container)return null;var ie=this.container,Z=ie.getBoundingClientRect(),X=Cq(Z),le={chartX:Math.round(J.pageX-X.left),chartY:Math.round(J.pageY-X.top)},de=Z.width/ie.offsetWidth||1,Pe=this.inRange(le.chartX,le.chartY,de);if(!Pe)return null;var Fe=this.state,be=Fe.xAxisMap,Ue=Fe.yAxisMap,Ve=this.getTooltipEventType(),Ze=E4(this.state,this.props.data,this.props.layout,Pe);if(Ve!=="axis"&&be&&Ue){var Ye=Jc(be).scale,it=Jc(Ue).scale,et=Ye&&Ye.invert?Ye.invert(le.chartX):null,Ge=it&&it.invert?it.invert(le.chartY):null;return ut(ut({},le),{},{xValue:et,yValue:Ge},Ze)}return Ze?ut(ut({},le),Ze):null}},{key:"inRange",value:function(J,ie){var Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,X=this.props.layout,le=J/Z,de=ie/Z;if(X==="horizontal"||X==="vertical"){var Pe=this.state.offset,Fe=le>=Pe.left&&le<=Pe.left+Pe.width&&de>=Pe.top&&de<=Pe.top+Pe.height;return Fe?{x:le,y:de}:null}var be=this.state,Ue=be.angleAxisMap,Ve=be.radiusAxisMap;if(Ue&&Ve){var Ze=Jc(Ue);return $3({x:le,y:de},Ze)}return null}},{key:"parseEventsOfWrapper",value:function(){var J=this.props.children,ie=this.getTooltipEventType(),Z=ns(J,ou),X={};Z&&ie==="axis"&&(Z.props.trigger==="click"?X={onClick:this.handleClick}:X={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var le=Rv(this.props,this.handleOuterEvent);return ut(ut({},le),X)}},{key:"addListener",value:function(){s2.on(l2,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){s2.removeListener(l2,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(J,ie,Z){for(var X=this.state.formattedGraphicalItems,le=0,de=X.length;le<de;le++){var Pe=X[le];if(Pe.item===J||Pe.props.key===J.key||ie===rc(Pe.item.type)&&Z===Pe.childIndex)return Pe}return null}},{key:"renderClipPath",value:function(){var J=this.clipPathId,ie=this.state.offset,Z=ie.left,X=ie.top,le=ie.height,de=ie.width;return Le.createElement("defs",null,Le.createElement("clipPath",{id:J},Le.createElement("rect",{x:Z,y:X,height:le,width:de})))}},{key:"getXScales",value:function(){var J=this.state.xAxisMap;return J?Object.entries(J).reduce(function(ie,Z){var X=T4(Z,2),le=X[0],de=X[1];return ut(ut({},ie),{},mr({},le,de.scale))},{}):null}},{key:"getYScales",value:function(){var J=this.state.yAxisMap;return J?Object.entries(J).reduce(function(ie,Z){var X=T4(Z,2),le=X[0],de=X[1];return ut(ut({},ie),{},mr({},le,de.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(J){var ie;return(ie=this.state.xAxisMap)===null||ie===void 0||(ie=ie[J])===null||ie===void 0?void 0:ie.scale}},{key:"getYScaleByAxisId",value:function(J){var ie;return(ie=this.state.yAxisMap)===null||ie===void 0||(ie=ie[J])===null||ie===void 0?void 0:ie.scale}},{key:"getItemByXY",value:function(J){var ie=this.state,Z=ie.formattedGraphicalItems,X=ie.activeItem;if(Z&&Z.length)for(var le=0,de=Z.length;le<de;le++){var Pe=Z[le],Fe=Pe.props,be=Pe.item,Ue=be.type.defaultProps!==void 0?ut(ut({},be.type.defaultProps),be.props):be.props,Ve=rc(be.type);if(Ve==="Bar"){var Ze=(Fe.data||[]).find(function(Ge){return GY(J,Ge)});if(Ze)return{graphicalItem:Pe,payload:Ze}}else if(Ve==="RadialBar"){var Ye=(Fe.data||[]).find(function(Ge){return $3(J,Ge)});if(Ye)return{graphicalItem:Pe,payload:Ye}}else if(c_(Pe,X)||h_(Pe,X)||jg(Pe,X)){var it=zJ({graphicalItem:Pe,activeTooltipItem:X,itemData:Ue.data}),et=Ue.activeIndex===void 0?it:Ue.activeIndex;return{graphicalItem:ut(ut({},Pe),{},{childIndex:et}),payload:jg(Pe,X)?Ue.data[it]:Pe.props.data[it]}}}return null}},{key:"render",value:function(){var J=this;if(!JC(this))return null;var ie=this.props,Z=ie.children,X=ie.className,le=ie.width,de=ie.height,Pe=ie.style,Fe=ie.compact,be=ie.title,Ue=ie.desc,Ve=P4(ie,sre),Ze=qr(Ve,!1);if(Fe)return Le.createElement(a4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Le.createElement(N2,rp({},Ze,{width:le,height:de,title:be,desc:Ue}),this.renderClipPath(),eM(Z,this.renderMap)));if(this.props.accessibilityLayer){var Ye,it;Ze.tabIndex=(Ye=this.props.tabIndex)!==null&&Ye!==void 0?Ye:0,Ze.role=(it=this.props.role)!==null&&it!==void 0?it:"application",Ze.onKeyDown=function(Ge){J.accessibilityManager.keyboardEvent(Ge)},Ze.onFocus=function(){J.accessibilityManager.focus()}}var et=this.parseEventsOfWrapper();return Le.createElement(a4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Le.createElement("div",rp({className:Hr("recharts-wrapper",X),style:ut({position:"relative",cursor:"default",width:le,height:de},Pe)},et,{ref:function(rt){J.container=rt}}),Le.createElement(N2,rp({},Ze,{width:le,height:de,title:be,desc:Ue,style:Tre}),this.renderClipPath(),eM(Z,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(Se.Component);mr(U,"displayName",r),mr(U,"defaultProps",ut({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},A)),mr(U,"getDerivedStateFromProps",function(L,K){var Q=L.dataKey,J=L.data,ie=L.children,Z=L.width,X=L.height,le=L.layout,de=L.stackOffset,Pe=L.margin,Fe=K.dataStartIndex,be=K.dataEndIndex;if(K.updateId===void 0){var Ue=C4(L);return ut(ut(ut({},Ue),{},{updateId:0},N(ut(ut({props:L},Ue),{},{updateId:0}),K)),{},{prevDataKey:Q,prevData:J,prevWidth:Z,prevHeight:X,prevLayout:le,prevStackOffset:de,prevMargin:Pe,prevChildren:ie})}if(Q!==K.prevDataKey||J!==K.prevData||Z!==K.prevWidth||X!==K.prevHeight||le!==K.prevLayout||de!==K.prevStackOffset||!np(Pe,K.prevMargin)){var Ve=C4(L),Ze={chartX:K.chartX,chartY:K.chartY,isTooltipActive:K.isTooltipActive},Ye=ut(ut({},E4(K,J,le)),{},{updateId:K.updateId+1}),it=ut(ut(ut({},Ve),Ze),Ye);return ut(ut(ut({},it),N(ut({props:L},it),K)),{},{prevDataKey:Q,prevData:J,prevWidth:Z,prevHeight:X,prevLayout:le,prevStackOffset:de,prevMargin:Pe,prevChildren:ie})}if(!z2(ie,K.prevChildren)){var et,Ge,rt,ge,ne=ns(ie,bp),Ce=ne&&(et=(Ge=ne.props)===null||Ge===void 0?void 0:Ge.startIndex)!==null&&et!==void 0?et:Fe,nt=ne&&(rt=(ge=ne.props)===null||ge===void 0?void 0:ge.endIndex)!==null&&rt!==void 0?rt:be,ht=Ce!==Fe||nt!==be,pt=!Lr(J),At=pt&&!ht?K.updateId:K.updateId+1;return ut(ut({updateId:At},N(ut(ut({props:L},K),{},{updateId:At,dataStartIndex:Ce,dataEndIndex:nt}),K)),{},{prevChildren:ie,dataStartIndex:Ce,dataEndIndex:nt})}return null}),mr(U,"renderActiveDot",function(L,K,Q){var J;return Se.isValidElement(L)?J=Se.cloneElement(L,K):Dr(L)?J=L(K):J=Le.createElement(kP,K),Le.createElement(fi,{className:"recharts-active-dot",key:Q},J)});var B=Se.forwardRef(function(K,Q){return Le.createElement(U,rp({},K,{ref:Q}))});return B.displayName=U.displayName,B},jre=Rre({chartName:"LineChart",GraphicalChild:Df,axisComponents:[{axisType:"xAxis",AxisComp:y_},{axisType:"yAxis",AxisComp:Fg}],formatAxisMap:OQ});function vl(e,t){return Array.from(e.getElementsByTagName(t))}function M0(e){return e[0]==="#"?e:`#${e}`}function zre(e,t,r){return Array.from(e.getElementsByTagNameNS(r,t))}function ls(e){return e==null||e.normalize(),(e==null?void 0:e.textContent)||""}function Ua(e,t,r){const n=e.getElementsByTagName(t);return n.length?n[0]:null}function _l(e,t,r){const n={};if(!e)return n;const s=e.getElementsByTagName(t),d=s.length?s[0]:null;return d&&r?r(d,n):n}function Op(e,t,r){const n=ls(Ua(e,t));return n&&r?r(n)||{}:{}}function Po(e,t,r){const n=Number.parseFloat(ls(Ua(e,t)));if(!Number.isNaN(n))return r&&r(n),n}function __(e,t){const r={};for(const n of t)Op(e,n,s=>{r[n]=s});return r}function Rj(e){return(e==null?void 0:e.nodeType)===1}function jj(e,t){const r={},n=t==="stroke"||t==="fill"?t:`${t}-color`;return e[0]==="#"&&(e=e.substring(1)),e.length===6||e.length===3?r[n]=`#${e}`:e.length===8&&(r[`${t}-opacity`]=Number.parseInt(e.substring(0,2),16)/255,r[n]=`#${e.substring(6,8)}${e.substring(4,6)}${e.substring(2,4)}`),r}function I0(e,t,r){const n={};return Po(e,t,s=>{n[r]=s}),n}function $P(e,t){return _l(e,"color",r=>jj(ls(r),t))}function VP(e){return _l(e,"Icon",(t,r)=>(Op(t,"href",n=>{r.icon=n}),r))}function Lre(e){return _l(e,"IconStyle",t=>Object.assign($P(t,"icon"),I0(t,"scale","icon-scale"),I0(t,"heading","icon-heading"),_l(t,"hotSpot",r=>{const n=Number.parseFloat(r.getAttribute("x")||""),s=Number.parseFloat(r.getAttribute("y")||""),d=r.getAttribute("xunits")||"",h=r.getAttribute("yunits")||"";return!Number.isNaN(n)&&!Number.isNaN(s)?{"icon-offset":[n,s],"icon-offset-units":[d,h]}:{}}),VP(t)))}function Nre(e){return _l(e,"LabelStyle",t=>Object.assign($P(t,"label"),I0(t,"scale","label-scale")))}function Bre(e){return _l(e,"LineStyle",t=>Object.assign($P(t,"stroke"),I0(t,"width","stroke-width")))}function Fre(e){return _l(e,"PolyStyle",(t,r)=>Object.assign(r,_l(t,"color",n=>jj(ls(n),"fill")),Op(t,"fill",n=>{if(n==="0")return{"fill-opacity":0}}),Op(t,"outline",n=>{if(n==="0")return{"stroke-opacity":0}})))}function x_(e){return Object.assign({},Fre(e),Bre(e),Nre(e),Lre(e))}const $re=/\s*/g,Vre=/^\s*|\s*$/g,Ure=/\s+/;function zj(e){return e.replace($re,"").split(",").map(Number.parseFloat).filter(t=>!Number.isNaN(t)).slice(0,3)}function JS(e){return e.replace(Vre,"").split(Ure).map(zj).filter(t=>t.length>=2)}function qre(e){let t=vl(e,"coord");t.length===0&&(t=zre(e,"coord","*"));const r=t.map(n=>ls(n).split(" ").map(Number.parseFloat));return r.length===0?null:{geometry:r.length>2?{type:"LineString",coordinates:r}:{type:"Point",coordinates:r[0]},times:vl(e,"when").map(n=>ls(n))}}function Lj(e){if(e.length===0)return e;const t=e[0],r=e[e.length-1];let n=!0;for(let s=0;s<Math.max(t.length,r.length);s++)if(t[s]!==r[s]){n=!1;break}return n?e:e.concat([e[0]])}function bv(e){return ls(Ua(e,"coordinates"))}function Nj(e){let t=[],r=[];for(let n=0;n<e.childNodes.length;n++){const s=e.childNodes.item(n);if(Rj(s))switch(s.tagName){case"MultiGeometry":case"MultiTrack":case"gx:MultiTrack":{const d=Nj(s);t=t.concat(d.geometries),r=r.concat(d.coordTimes);break}case"Point":{const d=zj(bv(s));d.length>=2&&t.push({type:"Point",coordinates:d});break}case"LinearRing":case"LineString":{const d=JS(bv(s));d.length>=2&&t.push({type:"LineString",coordinates:d});break}case"Polygon":{const d=[];for(const h of vl(s,"LinearRing")){const l=Lj(JS(bv(h)));l.length>=4&&d.push(l)}d.length&&t.push({type:"Polygon",coordinates:d});break}case"Track":case"gx:Track":{const d=qre(s);if(!d)break;const{times:h,geometry:l}=d;t.push(l),h.length&&r.push(h);break}}}return{geometries:t,coordTimes:r}}const Zd=e=>Number(e),QS={string:e=>e,int:Zd,uint:Zd,short:Zd,ushort:Zd,float:Zd,double:Zd,bool:e=>!!e};function UP(e,t){return _l(e,"ExtendedData",(r,n)=>{for(const s of vl(r,"Data"))n[s.getAttribute("name")||""]=ls(Ua(s,"value"));for(const s of vl(r,"SimpleData")){const d=s.getAttribute("name")||"",h=t[d]||QS.string;n[d]=h(ls(s))}return n})}function qP(e){const t=Ua(e,"description");for(const r of Array.from((t==null?void 0:t.childNodes)||[]))if(r.nodeType===4)return{description:{"@type":"html",value:ls(r)}};return{}}function WP(e){return _l(e,"TimeSpan",t=>({timespan:{begin:ls(Ua(t,"begin")),end:ls(Ua(t,"end"))}}))}function GP(e){return _l(e,"TimeStamp",t=>({timestamp:ls(Ua(t,"when"))}))}function HP(e,t){return Op(e,"styleUrl",r=>(r=M0(r),t[r]?Object.assign({styleUrl:r},t[r]):{styleUrl:r}))}var js;(function(e){e.ABSOLUTE="absolute",e.RELATIVE_TO_GROUND="relativeToGround",e.CLAMP_TO_GROUND="clampToGround",e.CLAMP_TO_SEAFLOOR="clampToSeaFloor",e.RELATIVE_TO_SEAFLOOR="relativeToSeaFloor"})(js||(js={}));function Wre(e){switch(e==null?void 0:e.textContent){case js.ABSOLUTE:return js.ABSOLUTE;case js.CLAMP_TO_GROUND:return js.CLAMP_TO_GROUND;case js.CLAMP_TO_SEAFLOOR:return js.CLAMP_TO_SEAFLOOR;case js.RELATIVE_TO_GROUND:return js.RELATIVE_TO_GROUND;case js.RELATIVE_TO_SEAFLOOR:return js.RELATIVE_TO_SEAFLOOR}return null}function Gre(e){return Ua(e,"gx:LatLonQuad")?{geometry:{type:"Polygon",coordinates:[Lj(JS(bv(e)))]}}:Kre(e)}const Hre=Math.PI/180;function Zre(e,t,r){const n=[(e[0]+e[2])/2,(e[1]+e[3])/2];return[t[0].map(s=>{const d=s[1]-n[1],h=s[0]-n[0],l=Math.sqrt(d**2+h**2),_=Math.atan2(d,h)+r*Hre;return[n[0]+Math.cos(_)*l,n[1]+Math.sin(_)*l]})]}function Kre(e){const t=Ua(e,"LatLonBox");if(t){const r=Po(t,"north"),n=Po(t,"west"),s=Po(t,"east"),d=Po(t,"south"),h=Po(t,"rotation");if(typeof r=="number"&&typeof d=="number"&&typeof n=="number"&&typeof s=="number"){const l=[n,d,s,r];let _=[[[n,r],[s,r],[s,d],[n,d],[n,r]]];return typeof h=="number"&&(_=Zre(l,_,h)),{bbox:l,geometry:{type:"Polygon",coordinates:_}}}}return null}function Xre(e,t,r,n){var _;const s=Gre(e),d=(s==null?void 0:s.geometry)||null;if(!d&&n.skipNullGeometry)return null;const h={type:"Feature",geometry:d,properties:Object.assign({"@geometry-type":"groundoverlay"},__(e,["name","address","visibility","open","phoneNumber","description"]),qP(e),HP(e,t),x_(e),VP(e),UP(e,r),WP(e),GP(e))};s!=null&&s.bbox&&(h.bbox=s.bbox),((_=h.properties)==null?void 0:_.visibility)!==void 0&&(h.properties.visibility=h.properties.visibility!=="0");const l=e.getAttribute("id");return l!==null&&l!==""&&(h.id=l),h}function Yre(e){const t=Ua(e,"Region");return t?{coordinateBox:Qre(t),lod:Jre(e)}:null}function Jre(e){const t=Ua(e,"Lod");return t?[Po(t,"minLodPixels")??-1,Po(t,"maxLodPixels")??-1,Po(t,"minFadeExtent")??null,Po(t,"maxFadeExtent")??null]:null}function Qre(e){const t=Ua(e,"LatLonAltBox");if(t){const r=Po(t,"north"),n=Po(t,"west"),s=Po(t,"east"),d=Po(t,"south");if(Wre(Ua(t,"altitudeMode")||Ua(t,"gx:altitudeMode"))&&console.debug("Encountered an unsupported feature of KML for togeojson: please contact developers for support of altitude mode."),typeof r=="number"&&typeof d=="number"&&typeof n=="number"&&typeof s=="number")return{bbox:[n,d,s,r],geometry:{type:"Polygon",coordinates:[[[n,r],[s,r],[s,d],[n,d],[n,r]]]}}}return null}function ene(e){const t=Ua(e,"Link");return t?__(t,["href","refreshMode","refreshInterval","viewRefreshMode","viewRefreshTime","viewBoundScale","viewFormat","httpQuery"]):{}}function tne(e,t,r,n){var _,w,E;const s=Yre(e),d=((_=s==null?void 0:s.coordinateBox)==null?void 0:_.geometry)||null;if(!d&&n.skipNullGeometry)return null;const h={type:"Feature",geometry:d,properties:Object.assign({"@geometry-type":"networklink"},__(e,["name","address","visibility","open","phoneNumber","styleUrl","refreshVisibility","flyToView","description"]),qP(e),HP(e,t),x_(e),VP(e),UP(e,r),WP(e),GP(e),ene(e),s!=null&&s.lod?{lod:s.lod}:{})};(w=s==null?void 0:s.coordinateBox)!=null&&w.bbox&&(h.bbox=s.coordinateBox.bbox),((E=h.properties)==null?void 0:E.visibility)!==void 0&&(h.properties.visibility=h.properties.visibility!=="0");const l=e.getAttribute("id");return l!==null&&l!==""&&(h.id=l),h}function rne(e){return e.length===0?null:e.length===1?e[0]:{type:"GeometryCollection",geometries:e}}function nne(e,t,r,n){var w;const{coordTimes:s,geometries:d}=Nj(e),h=rne(d);if(!h&&n.skipNullGeometry)return null;const l={type:"Feature",geometry:h,properties:Object.assign(__(e,["name","address","visibility","open","phoneNumber","description"]),qP(e),HP(e,t),x_(e),UP(e,r),WP(e),GP(e),s.length?{coordinateProperties:{times:s.length===1?s[0]:s}}:{})};((w=l.properties)==null?void 0:w.visibility)!==void 0&&(l.properties.visibility=l.properties.visibility!=="0");const _=e.getAttribute("id");return _!==null&&_!==""&&(l.id=_),l}function ine(e){let t=e.getAttribute("id");const r=e.parentNode;return!t&&Rj(r)&&r.localName==="CascadingStyle"&&(t=r.getAttribute("kml:id")||r.getAttribute("id")),M0(t||"")}function ane(e){const t={};for(const r of vl(e,"Style"))t[ine(r)]=x_(r);for(const r of vl(e,"StyleMap")){const n=M0(r.getAttribute("id")||"");Op(r,"styleUrl",s=>{s=M0(s),t[s]&&(t[n]=t[s])})}return t}function one(e){const t={};for(const r of vl(e,"SimpleField"))t[r.getAttribute("name")||""]=QS[r.getAttribute("type")||""]||QS.string;return t}function*sne(e,t={skipNullGeometry:!1}){const r=e,n=ane(r),s=one(r);for(const d of vl(r,"Placemark")){const h=nne(d,n,s,t);h&&(yield h)}for(const d of vl(r,"GroundOverlay")){const h=Xre(d,n,s,t);h&&(yield h)}for(const d of vl(r,"NetworkLink")){const h=tne(d,n,s,t);h&&(yield h)}}function lne(e,t={skipNullGeometry:!1}){return{type:"FeatureCollection",features:Array.from(sne(e,t))}}const c2={Bengaluru:{center:[77.5946,12.9716],zoom:10,hazard:"Urban Floods",bounds:[[77.4,12.8],[78,13.2]]},Guwahati:{center:[91.7362,26.1445],zoom:11,hazard:"Compound Pluvial & Fluvial Floods",bounds:[[91.5,26],[91.9,26.3]]},Anantapur:{center:[77.6,14.6819],zoom:9,hazard:"Compound Flood & Drought",bounds:[[77.3,14.5],[78,15]]},Dordrecht:{center:[4.6667,51.8167],zoom:11,hazard:"Urban Floods & Evacuation Planning",bounds:[[4.5,51.7],[4.8,51.9]]},"Tilburg & Breda":{center:[4.8916,51.583],zoom:9,hazard:"Droughts & Urban Development",bounds:[[4.7,51.5],[5.2,51.7]]}},une={Bengaluru:{alerts:[{id:1,level:"Moderate",text:"Heavy rainfall predicted, risk of waterlogging in low-lying areas."}],forecast:[{day:"Mon",rainfall:25,temp:28,humidity:85},{day:"Tue",rainfall:40,temp:27,humidity:90},{day:"Wed",rainfall:15,temp:29,humidity:80},{day:"Thu",rainfall:5,temp:30,humidity:75},{day:"Fri",rainfall:10,temp:31,humidity:70},{day:"Sat",rainfall:30,temp:29,humidity:88},{day:"Sun",rainfall:20,temp:28,humidity:82}],citizenReports:[{id:1,user:"A. Kumar",text:"Water level rising near Bellandur lake.",time:"1h ago"}]},Guwahati:{alerts:[{id:1,level:"High",text:"Brahmaputra river level approaching warning mark. Stay vigilant."}],forecast:[{day:"Mon",rainfall:50,temp:30,humidity:92},{day:"Tue",rainfall:65,temp:29,humidity:95},{day:"Wed",rainfall:30,temp:31,humidity:88},{day:"Thu",rainfall:20,temp:32,humidity:85},{day:"Fri",rainfall:25,temp:32,humidity:87},{day:"Sat",rainfall:45,temp:30,humidity:93},{day:"Sun",rainfall:55,temp:29,humidity:94}],citizenReports:[{id:1,user:"R. Das",text:"Anil Nagar area is already experiencing some waterlogging.",time:"45m ago"}]},Anantapur:{alerts:[{id:1,level:"Low",text:"Scattered thunderstorms possible later this week. No immediate drought relief expected."}],forecast:[{day:"Mon",rainfall:0,temp:35,humidity:40},{day:"Tue",rainfall:0,temp:36,humidity:38},{day:"Wed",rainfall:5,temp:34,humidity:50},{day:"Thu",rainfall:10,temp:33,humidity:55},{day:"Fri",rainfall:2,temp:35,humidity:45},{day:"Sat",rainfall:0,temp:37,humidity:35},{day:"Sun",rainfall:0,temp:36,humidity:37}],citizenReports:[{id:1,user:"Local Farmer",text:"Soil is extremely dry in Kalyandurg mandal.",time:"8h ago"}]},Dordrecht:{alerts:[{id:1,level:"Minor",text:"Elevated river levels due to North Sea tidal surge. No flooding expected."}],forecast:[{day:"Mon",rainfall:10,temp:18,humidity:75},{day:"Tue",rainfall:5,temp:19,humidity:70},{day:"Wed",rainfall:15,temp:17,humidity:85},{day:"Thu",rainfall:20,temp:16,humidity:88},{day:"Fri",rainfall:5,temp:20,humidity:65},{day:"Sat",rainfall:2,temp:21,humidity:60},{day:"Sun",rainfall:12,temp:19,humidity:78}],citizenReports:[{id:1,user:"Water Board",text:"All flood gates are operating normally.",time:"2h ago"}]},"Tilburg & Breda":{alerts:[{id:1,level:"Low",text:"Drought conditions persist. Water conservation measures remain in effect."}],forecast:[{day:"Mon",rainfall:2,temp:22,humidity:60},{day:"Tue",rainfall:0,temp:24,humidity:55},{day:"Wed",rainfall:0,temp:25,humidity:50},{day:"Thu",rainfall:5,temp:23,humidity:65},{day:"Fri",rainfall:8,temp:21,humidity:70},{day:"Sat",rainfall:1,temp:25,humidity:52},{day:"Sun",rainfall:0,temp:26,humidity:48}],citizenReports:[{id:1,user:"City Official",text:"Please continue to limit non-essential water usage.",time:"1d ago"}]}},h2="https://demotiles.maplibre.org/style.json",mv={Streets:h2,Satellite:h2,Bright:h2},cne={},hne="https://www.google.com/maps/d/kml?forcekml=1&mid=1GRr_qSOqCC8AdtNGTZG0nr6NlW9B3iY";function fne(){const e=Se.useRef(null),t=Se.useRef(null),r=Se.useRef(null),n=Se.useRef(null),s=Se.useRef(null),[d,h]=Se.useState(null),[l,_]=Se.useState(!1),[w,E]=Se.useState("alerts"),[A,M]=Se.useState(mv.Streets),[N,U]=Se.useState(null),[B,L]=Se.useState(!1);Se.useEffect(()=>{if(t.current)return;const X=new tv.Map({container:e.current,style:A,center:[78.96,20.59],zoom:4});X.addControl(new tv.NavigationControl({showCompass:!1}),"top-right"),t.current=X},[]),Se.useEffect(()=>{t.current&&t.current.setStyle(A)},[A]),Se.useEffect(()=>{const X=t.current;if(!X)return;const le=()=>{Object.keys(cne).forEach(de=>{X.getLayer(de)&&X.removeLayer(de),X.getSource(de)&&X.removeSource(de)})};return X.on("style.load",le),le(),()=>X.off("style.load",le)},[N,A]);const K=async()=>{if(!s.current){const Fe=await(await fetch(hne)).text(),be=new DOMParser().parseFromString(Fe,"text/xml");s.current=lne(be)}const X=s.current,le=t.current;le.getSource("guw-sensors")||(le.addSource("guw-sensors",{type:"geojson",data:X}),le.addLayer({id:"guw-sensors",type:"circle",source:"guw-sensors",paint:{"circle-radius":6,"circle-color":"#00e5ff","circle-stroke-width":2,"circle-stroke-color":"#ffffff","circle-opacity":.95}}),le.addLayer({id:"guw-sensors-glow",type:"circle",source:"guw-sensors",paint:{"circle-radius":12,"circle-color":"#00e5ff","circle-opacity":.15}})),le.on("click","guw-sensors",Pe=>{const Fe=Pe.features[0],be=Fe.properties.Name||Fe.properties.name||"Sensor",Ve=(Fe.properties.description||"").replace(/[\{\}@type"value":]|html|Sl\. No\.:/g,"").replace(/\n/g,"<br/>");n.current&&n.current.remove(),n.current=new tv.Popup({offset:15,closeButton:!0,closeOnMove:!0}).setLngLat(Fe.geometry.coordinates).setHTML(`
          <div style="font-family:sans-serif;font-size:13px;max-width:240px">
            <div style="font-weight:600;color:#111;margin-bottom:4px">${be}</div>
            <div style="line-height:1.3;color:#444;">${Ve}</div>
          </div>
        `).addTo(le)});const de=X.features.filter(Pe=>{var Fe;return((Fe=Pe.geometry)==null?void 0:Fe.type)==="Point"}).map(Pe=>Pe.geometry.coordinates);if(de.length){const Pe=de.map(Ve=>Ve[0]),Fe=de.map(Ve=>Ve[1]),be=[Math.min(...Pe),Math.min(...Fe)],Ue=[Math.max(...Pe),Math.max(...Fe)];le.fitBounds([be,Ue],{padding:50})}},Q=()=>{const X=t.current;X&&(n.current&&n.current.remove(),X.getLayer("guw-sensors-glow")&&X.removeLayer("guw-sensors-glow"),X.getLayer("guw-sensors")&&X.removeLayer("guw-sensors"),X.getSource("guw-sensors")&&X.removeSource("guw-sensors"))},J=async()=>{B?(Q(),L(!1)):(await K(),L(!0))},ie=async X=>{const le=t.current;if(!le)return;if(!X){h(null),_(!1),r.current&&r.current.remove(),Q(),le.flyTo({center:[78.96,20.59],zoom:4});return}const de=c2[X];h(X),_(!0),E("alerts"),le.flyTo({center:de.center,zoom:de.zoom,essential:!0}),r.current&&r.current.remove(),r.current=new tv.Marker({color:"#E63946"}).setLngLat(de.center).addTo(le);const[Pe,Fe]=de.bounds,be={type:"Feature",geometry:{type:"Polygon",coordinates:[[[Pe[0],Pe[1]],[Fe[0],Pe[1]],[Fe[0],Fe[1]],[Pe[0],Fe[1]],[Pe[0],Pe[1]]]]}};le.getSource("site-boundary")?le.getSource("site-boundary").setData(be):(le.addSource("site-boundary",{type:"geojson",data:be}),le.addLayer({id:"site-boundary-layer",type:"fill",source:"site-boundary",paint:{"fill-color":"#1D3557","fill-opacity":.25}})),X!=="Guwahati"?(Q(),L(!1)):B&&await K()},Z=d?une[d]:null;return q.jsxs("div",{className:"map-page-wrapper",children:[q.jsxs("div",{className:"map-top-bar",children:[q.jsx("div",{className:"map-logo",children:"LODESTAR Geo-Dashboard"}),q.jsxs("select",{className:"site-selector",onChange:X=>ie(X.target.value),value:d||"",children:[q.jsx("option",{value:"",children:"-- Select a Study Site --"}),Object.keys(c2).map(X=>q.jsx("option",{value:X,children:X},X))]})]}),q.jsx("div",{ref:e,className:"map-container-full"}),q.jsxs("div",{className:"map-controls-bottom-right",children:[q.jsxs("h4",{children:[q.jsx(qL,{})," Map Layers"]}),q.jsx("div",{className:"control-group",children:Object.keys(mv).map(X=>q.jsx("button",{className:`map-control-btn ${A===mv[X]?"active":""}`,onClick:()=>M(mv[X]),children:X},X))}),q.jsxs("h4",{children:[q.jsx(jL,{})," Weather Overlays"]}),q.jsx("div",{className:"control-group",children:q.jsxs("small",{style:{opacity:.7},children:["Add ",q.jsx("code",{children:"VITE_OPENWEATHERMAP_KEY"})," in ",q.jsx("code",{children:".env"})]})}),d==="Guwahati"&&q.jsxs(q.Fragment,{children:[q.jsx("h4",{children:"Data Layers"}),q.jsx("div",{className:"control-group",children:q.jsx("button",{className:`map-control-btn ${B?"active":""}`,onClick:J,children:"Guwahati Water Sensors"})})]})]}),q.jsx("div",{className:`side-panel ${l?"open":""}`,children:Z?q.jsxs(q.Fragment,{children:[q.jsx("button",{className:"panel-close-btn",onClick:()=>_(!1),children:q.jsx(K4,{})}),q.jsxs("div",{className:"panel-header",children:[q.jsx(WL,{})," ",q.jsx("h2",{children:d})]}),q.jsxs("p",{className:"panel-sub-header",children:["Focus: ",c2[d].hazard]}),q.jsxs("div",{className:"panel-tabs",children:[q.jsx("button",{className:w==="alerts"?"active":"",onClick:()=>E("alerts"),children:"Alerts"}),q.jsx("button",{className:w==="forecast"?"active":"",onClick:()=>E("forecast"),children:"Forecast"}),q.jsx("button",{className:w==="reports"?"active":"",onClick:()=>E("reports"),children:"Reports"})]}),q.jsxs("div",{className:"panel-content",children:[w==="alerts"&&q.jsx("div",{className:"panel-section",children:Z.alerts.map(X=>q.jsxs("div",{className:`alert-item alert-${X.level.toLowerCase()}`,children:[q.jsxs("strong",{children:[X.level,":"]})," ",X.text]},X.id))}),w==="forecast"&&q.jsxs("div",{className:"panel-section",children:[q.jsx("h4",{className:"chart-title",children:"7-Day Forecast"}),q.jsx(bq,{width:"100%",height:250,children:q.jsxs(jre,{data:Z.forecast,children:[q.jsx(vj,{strokeDasharray:"3 3"}),q.jsx(y_,{dataKey:"day"}),q.jsx(Fg,{yAxisId:"left",stroke:"#8884d8"}),q.jsx(Fg,{yAxisId:"right",orientation:"right",stroke:"#82ca9d"}),q.jsx(ou,{}),q.jsx(If,{}),q.jsx(Df,{yAxisId:"left",type:"monotone",dataKey:"rainfall",stroke:"#3B82F6",strokeWidth:2}),q.jsx(Df,{yAxisId:"left",type:"monotone",dataKey:"temp",stroke:"#EF4444",strokeWidth:2}),q.jsx(Df,{yAxisId:"right",type:"monotone",dataKey:"humidity",stroke:"#82ca9d",strokeWidth:2})]})})]}),w==="reports"&&q.jsxs("div",{className:"panel-section",children:[q.jsx("div",{className:"reports-list",children:Z.citizenReports.map(X=>q.jsxs("div",{className:"report-item",children:[q.jsxs("p",{children:['"',X.text,'"']}),q.jsxs("span",{children:["- ",X.user,", ",X.time]})]},X.id))}),q.jsx("button",{className:"cta-button panel-cta",children:"Submit a Report"})]})]})]}):q.jsx("div",{className:"panel-placeholder",children:q.jsx("p",{children:"Select a study site to view details."})})})]})}const dne=[{id:1,site:"Guwahati",hazard:"Flood",severity:"Severe",issued:"2025-07-31 01:00 IST",summary:"Brahmaputra river has crossed the warning level due to heavy upstream rainfall.",actions:"Evacuate low-lying areas near the riverbank. Move valuables to higher ground. Follow instructions from ASDMA."},{id:2,site:"Anantapur",hazard:"Drought",severity:"Moderate",issued:"2025-07-30 10:00 IST",summary:"Below-average monsoon rainfall continues. Soil moisture is critically low.",actions:"Implement water conservation measures. Farmers are advised to consider drought-resistant crops."},{id:3,site:"Bengaluru",hazard:"Flood",severity:"Moderate",issued:"2025-07-31 00:30 IST",summary:"Intense short-duration rainfall expected, leading to high risk of urban waterlogging.",actions:"Avoid travel in low-lying areas and underpasses. Ensure storm drains are clear of debris."},{id:4,site:"Dordrecht",hazard:"Flood",severity:"Minor",issued:"2025-07-30 11:00 CET",summary:"River levels are elevated due to North Sea tidal surge but are expected to remain below flood stage.",actions:"Monitor water levels and be aware of potential for minor coastal flooding."},{id:5,site:"Guwahati",hazard:"Compound",severity:"Extreme",issued:"2025-07-31 02:00 IST",summary:"Compound Event: Fluvial flooding from the river is now combined with pluvial (rainfall) flooding, overwhelming city drainage.",actions:"This is a high-risk situation. Seek shelter on higher floors or designated evacuation centers immediately."}],I4={Minor:1,Moderate:2,Severe:3,Extreme:4},pne={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},mne={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};function gne(){const[e,t]=Se.useState("All"),[r,n]=Se.useState("All"),s=Se.useMemo(()=>dne.filter(h=>e==="All"||h.site===e).filter(h=>r==="All"||h.hazard===r).sort((h,l)=>I4[l.severity]-I4[h.severity]),[e,r]),d=Se.useMemo(()=>s.filter(h=>h.severity==="Severe"||h.severity==="Extreme").length,[s]);return q.jsxs("div",{children:[q.jsx("section",{className:"hero-section-about",children:q.jsxs("div",{className:"container",children:[q.jsx("h1",{className:"hero-title-about",children:"LODESTAR Alert Center"}),q.jsx("p",{className:"hero-subtitle-about",children:"A centralized hub for real-time, multi-hazard early warnings for our study sites in India and the Netherlands."})]})}),q.jsx("section",{className:"page-section",children:q.jsxs("div",{className:"container",children:[q.jsxs("div",{className:"controls-container",children:[q.jsxs("div",{className:"alert-controls",children:[q.jsxs("div",{className:"filter-group",children:[q.jsx($L,{}),q.jsx("label",{children:"Filter by Site:"}),q.jsxs("select",{value:e,onChange:h=>t(h.target.value),children:[q.jsx("option",{children:"All"})," ",q.jsx("option",{children:"Bengaluru"})," ",q.jsx("option",{children:"Guwahati"}),q.jsx("option",{children:"Anantapur"})," ",q.jsx("option",{children:"Dordrecht"})," ",q.jsx("option",{children:"Tilburg & Breda"})]})]}),q.jsxs("div",{className:"filter-group",children:[q.jsx("label",{children:"Filter by Hazard:"}),q.jsxs("select",{value:r,onChange:h=>n(h.target.value),children:[q.jsx("option",{children:"All"})," ",q.jsx("option",{children:"Flood"}),q.jsx("option",{children:"Drought"})," ",q.jsx("option",{children:"Compound"})]})]})]}),q.jsxs("div",{className:"alert-summary",children:[q.jsxs("div",{children:[q.jsx("span",{children:s.length})," Total Active Alerts"]}),q.jsxs("div",{className:"summary-high-sev",children:[q.jsx("span",{children:d})," High-Severity Alerts"]})]})]}),q.jsx(zr.div,{className:"alerts-list",variants:pne,initial:"hidden",animate:"visible",children:q.jsx(j0,{children:s.length>0?s.map(h=>q.jsxs(zr.div,{variants:mne,layout:!0,className:`alert-card-detailed sev-${h.severity.toLowerCase()}`,children:[q.jsxs("div",{className:"alert-card-header",children:[q.jsxs("div",{className:"alert-card-severity",children:[q.jsx(FL,{})," ",h.severity]}),q.jsxs("div",{className:"alert-card-location",children:[h.site," - ",h.hazard," Hazard"]})]}),q.jsxs("div",{className:"alert-card-body",children:[q.jsx("p",{className:"alert-summary-text",children:h.summary}),q.jsxs("div",{className:"alert-actions",children:[q.jsx("h4",{children:"Recommended Actions:"}),q.jsx("p",{children:h.actions})]})]}),q.jsxs("div",{className:"alert-card-footer",children:["Issued: ",h.issued]})]},h.id)):q.jsxs(zr.div,{className:"no-alerts-found",initial:{opacity:0},animate:{opacity:1},children:[q.jsx(UL,{}),q.jsx("p",{children:"No active alerts match your current filter settings."})]})})})]})})]})}const yne={hidden:{opacity:0},visible:{opacity:1}},vne={hidden:{y:"-50px",opacity:0},visible:{y:"0",opacity:1,transition:{delay:.2,type:"spring",stiffness:120}},exit:{y:"50px",opacity:0}};function Bj({isOpen:e,onClose:t}){return q.jsx(j0,{children:e&&q.jsx(zr.div,{className:"modal-backdrop",variants:yne,initial:"hidden",animate:"visible",exit:"hidden",onClick:t,children:q.jsxs(zr.div,{className:"coming-soon-box",variants:vne,onClick:r=>r.stopPropagation(),children:[q.jsx("button",{className:"modal-close-btn",onClick:t,children:q.jsx(K4,{})}),q.jsx(JL,{className:"coming-soon-icon"}),q.jsx("h2",{className:"coming-soon-title",children:"Feature in Development"}),q.jsx("p",{className:"coming-soon-text",children:"This data repository is a planned deliverable of the LODESTAR project. Our teams are currently developing the necessary infrastructure. Please check back for future updates!"}),q.jsx("button",{onClick:t,className:"cta-button",children:"Continue Exploring"})]})})})}const _ne=[{icon:q.jsx(GL,{}),title:"Participatory Social Mapping",text:"We begin by mapping the social landscape of disaster risk. Through collaborative exercises, we identify 'Who knows what?' and 'Who needs to know what?' to ensure our tools address the right problems for the right people."},{icon:q.jsx(VL,{}),title:"Serious Gaming & Scenarios",text:"Interactive and immersive games built on realistic disaster scenarios are used to elicit tacit knowledge, test response strategies, and encourage creative problem-solving among diverse stakeholders."},{icon:q.jsx(BL,{}),title:"Horizontal Learning",text:"We foster an environment of peer-to-peer knowledge exchange, connecting citizens, experts, and officials. This breaks down hierarchies and ensures that all forms of knowledge are valued equally."}];function xne(){const[e,t]=Se.useState(!1);return q.jsxs(q.Fragment,{children:[q.jsx(Bj,{isOpen:e,onClose:()=>t(!1)}),q.jsxs("div",{className:"page-wrapper",children:[q.jsx("section",{className:"hero-section-about",children:q.jsxs("div",{className:"container",children:[q.jsx(zr.h1,{className:"hero-title-about",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5},children:"Living Labs & Citizen Science"}),q.jsx(zr.p,{className:"hero-subtitle-about",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:"Where community knowledge meets scientific innovation. This is the heart of LODESTAR's bottom-up approach to building disaster resilience."})]})}),q.jsx("section",{className:"page-section",children:q.jsxs("div",{className:"container",style:{paddingBottom:"50px"},children:[q.jsx("h2",{className:"section-title",children:"What is a Living Lab?"}),q.jsx(zr.div,{className:"text-block",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.6},children:q.jsx("p",{children:"A Living Lab is an open innovation environment where we co-create solutions in real-life contexts. It's a space where we bring together all stakeholders to ensure our Multi-Hazard Early Warning System (MH-EWS) matches the actual needs, cultures, and creative potentials of the end-users. This approach moves beyond traditional top-down systems to bridge the critical 'know-do' gap."})})]})}),q.jsx("section",{className:"page-section",children:q.jsxs("div",{className:"container",children:[q.jsx("h2",{className:"section-title",children:"Our Methods for Co-Creation"}),q.jsx("div",{className:"methods-grid",children:_ne.map((r,n)=>q.jsxs(zr.div,{className:"method-card",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.5,delay:n*.15},children:[q.jsx("div",{className:"method-icon",children:r.icon}),q.jsx("h3",{children:r.title}),q.jsx("p",{children:r.text})]},r.title))})]})}),q.jsx("section",{className:"page-section cta-section",children:q.jsxs("div",{className:"container",children:[q.jsx("h2",{className:"section-title cta-title",children:"Become a Citizen Scientist"}),q.jsx("p",{className:"cta-subtitle",children:"You can play a direct role in making your community safer. Heres how:"}),q.jsxs("div",{className:"participation-grid",children:[q.jsxs(zr.div,{className:"participation-card",onClick:()=>t(!0),initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},whileHover:{scale:1.05,transition:{duration:.2,delay:0}},viewport:{once:!0,amount:.5},transition:{duration:.5,delay:.1},children:[q.jsx(RL,{className:"participation-icon"}),q.jsx("h4",{children:"Contribute Real-time Data"}),q.jsx("p",{children:"Use our upcoming mobile tools to share vital on-the-ground information like water levels."})]}),q.jsxs(zr.div,{className:"participation-card",onClick:()=>t(!0),initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},whileHover:{scale:1.05,transition:{duration:.2,delay:0}},viewport:{once:!0,amount:.5},transition:{duration:.5,delay:.2},children:[q.jsx(QL,{className:"participation-icon"}),q.jsx("h4",{children:"Join a Workshop"}),q.jsx("p",{children:"Participate in our local Living Labs to share your experiences and test new tools."})]}),q.jsxs(zr.div,{className:"participation-card",onClick:()=>t(!0),initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},whileHover:{scale:1.05,transition:{duration:.2,delay:0}},viewport:{once:!0,amount:.5},transition:{duration:.5,delay:.3},children:[q.jsx(zL,{className:"participation-icon"}),q.jsx("h4",{children:"Share Local Knowledge"}),q.jsx("p",{children:"Your knowledge of past events is invaluable for building more accurate models."})]})]})]})})]})]})}const bne=[{title:"Stop Disasters! (UNDRR)",url:"https://www.stopdisastersgame.org/game",blurb:"A multi-hazard simulation by UNDRR: protect cities from tsunami, earthquake, flood, wildfire and cyclone. Play online and test your risk-management strategy.",tags:["Multi-hazard","Strategy","Risk reduction"]},{title:"Disaster Master (Ready.gov)",url:"https://www.ready.gov/kids/games/data/dm-english/",blurb:"Youth-friendly game: face various disasters, build readiness and resilience through levels of play.",tags:["Preparedness","Youth education","Hazard awareness"]},{title:"Build a Kit Game (Ready.gov)",url:"https://www.ready.gov/kids/games/data/bak-english/index.html",blurb:"Interactive game where you build your emergency kit and choose how to act when disasters strike.",tags:["Emergency kit","Decision making","Awareness"]},{title:"The Disaster Response Game (ISR/NYAS)",url:"https://isr.nyas.org/games/disaster-response/",blurb:"Digital scenario game: wildfires, hurricanes, food-security crises. Hone rapid decision-making skills under pressure.",tags:["Crisis response","Decision-making","Preparedness"]}];function wne(){return q.jsxs("div",{className:"page-wrapper",children:[q.jsx("section",{className:"hero-section-about",children:q.jsxs("div",{className:"container",children:[q.jsx("h1",{className:"hero-title-about",children:"Serious Games Hub"}),q.jsx("p",{className:"hero-subtitle-about",children:"Dive straight into playable games that explore disaster risk, resilience and strategic response."})]})}),q.jsx("section",{className:"page-section",children:q.jsxs("div",{className:"container-wide",children:[q.jsx("h2",{className:"section-title",children:"Play These Real-World Disaster Risk Games"}),q.jsx(zr.div,{className:"games-portfolio",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},transition:{staggerChildren:.15},children:bne.map(e=>q.jsxs(zr.div,{className:"game-card-detailed",variants:{hidden:{opacity:0,y:40},visible:{opacity:1,y:0}},children:[q.jsxs("div",{className:"game-card-header",children:[q.jsx("h3",{children:e.title}),q.jsx("span",{className:"game-status-tag",children:"Playable Online"})]}),q.jsxs("div",{className:"game-card-body",children:[q.jsx("p",{children:e.blurb}),q.jsx("div",{className:"game-card-meta",children:q.jsxs("div",{children:[q.jsx(KL,{})," ",q.jsx("strong",{children:"Focus:"})," ",e.tags.join(", ")]})})]}),q.jsx("div",{className:"game-card-footer",children:q.jsxs("a",{className:"cta-button",href:e.url,target:"_blank",rel:"noopener noreferrer",title:"Open game in new tab",children:[q.jsx(ZL,{style:{marginRight:8}}),"Play"]})})]},e.title))})]})})]})}const Sne=[{icon:q.jsx(Y_,{}),title:"Pan-European Decision-Support Dashboard (A4EU)",summary:"A key dashboard from the ANYWHERE project developed by Wageningen University, serving as a model for LODESTAR's EWS.",source:"Wageningen University"},{icon:q.jsx(Y_,{}),title:"Serious Games Catalogue & Facilitation Manual",summary:"A portfolio of physical and digital serious games with a manual for developing and facilitating them in stakeholder workshops.",source:"MetaMeta Research"},{icon:q.jsx(Y_,{}),title:"Calibrated Hydrological Model (STORM V1)",summary:"A calibrated urban flood model for Bangalore, previously used for crowdsourcing studies and foundational to this project's modelling work.",source:"Indian Institute of Sciences"}],Tne=[{icon:q.jsx(gv,{}),title:"Flood disaster subcultures in The Netherlands",summary:"Examines the social and cultural responses to flood risks in Dutch communities, providing crucial context for the project's socio-technical approach.",authors:"Engel, K., Frerks, G., Velotti, L., Warner, J., & Weijs, B."},{icon:q.jsx(gv,{}),title:"Science-policy interface on water scarcity in India",summary:"Investigates the communication and knowledge gaps between scientific research and policy-making regarding water scarcity in India.",authors:"Suparana Katyaini, Anamika Barua, and Rosa Duarte"},{icon:q.jsx(gv,{}),title:"Moving from drought hazard to drought impact forecasts",summary:"A foundational paper on advancing drought EWS from simply predicting hazards to forecasting their tangible, real-world impacts on communities.",authors:"Sutanto, S. J., Van der Weert, M., Wanders, N., et al."}];function Pne(){const[e,t]=Se.useState(!1);return q.jsxs(q.Fragment,{children:[q.jsx(Bj,{isOpen:e,onClose:()=>t(!1)}),q.jsxs("div",{children:[q.jsx("section",{className:"hero-section-about",children:q.jsxs("div",{className:"container",children:[q.jsx(zr.h1,{className:"hero-title-about",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5},children:"Research & Knowledge Hub"}),q.jsx(zr.p,{className:"hero-subtitle-about",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:"Access the project's deliverables, key publications, open data repositories, and foundational documents."})]})}),q.jsx("section",{className:"page-section",children:q.jsxs("div",{className:"container",children:[q.jsx("h2",{className:"section-title",children:"Project Deliverables & Tools"}),q.jsx(zr.div,{className:"research-grid",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},transition:{staggerChildren:.15},children:Sne.map(r=>q.jsxs(zr.div,{className:"research-card",variants:{hidden:{opacity:0,y:50},visible:{opacity:1,y:0}},children:[q.jsx("div",{className:"research-card-icon",children:r.icon}),q.jsxs("div",{className:"research-card-content",children:[q.jsx("h3",{children:r.title}),q.jsx("p",{children:r.summary}),q.jsxs("span",{className:"research-card-source",children:["Source: ",r.source]})]})]},r.title))})]})}),q.jsx("section",{className:"page-section",children:q.jsxs("div",{className:"container",children:[q.jsx("h2",{className:"section-title",children:"Key Publications from the Consortium"}),q.jsx(zr.div,{className:"research-grid",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},transition:{staggerChildren:.15},children:Tne.map(r=>q.jsxs(zr.div,{className:"research-card",variants:{hidden:{opacity:0,y:50},visible:{opacity:1,y:0}},children:[q.jsx("div",{className:"research-card-icon",children:r.icon}),q.jsxs("div",{className:"research-card-content",children:[q.jsx("h3",{children:r.title}),q.jsx("p",{children:r.summary}),q.jsxs("span",{className:"research-card-source",children:["Authors: ",r.authors]})]})]},r.title))})]})}),q.jsx("section",{className:"page-section",children:q.jsxs("div",{className:"container",children:[q.jsx("h2",{className:"section-title",children:"Data, Models & Open Science"}),q.jsx("div",{className:"text-block",children:q.jsx("p",{children:"LODESTAR is committed to the FAIR (Findable, Accessible, Interoperable, Reusable) guiding principles for scientific data management. We aim to make knowledge creation, transfer, and exchange transparent and interactive."})}),q.jsxs("div",{className:"data-grid",children:[q.jsxs("div",{className:"data-card",onClick:()=>t(!0),children:[q.jsx(NL,{}),q.jsx("h4",{children:"4TU.ResearchData"}),q.jsx("p",{children:"Processed data used for publications will be stored and made available via the 4TU research data centre."})]}),q.jsxs("div",{className:"data-card",onClick:()=>t(!0),children:[q.jsx(G4,{}),q.jsx("h4",{children:"GitHub Repository"}),q.jsx("p",{children:"Algorithms, scripts, and software developed during the project will be shared through platforms like GitHub."})]}),q.jsxs("a",{href:"https://www.undrr.org/implementing-sendai-framework",target:"_blank",rel:"noopener noreferrer",className:"data-card",children:[q.jsx(Z4,{}),q.jsx("h4",{children:"Sendai Framework"}),q.jsx("p",{children:"The project's goals align with this key framework for Disaster Risk Reduction."})]})]})]})})]})]})}const f2=[{id:1,team:"Leadership",name:"Professor Anamika Barua",title:"Professor, Dept. of Humanities and Social Sciences",institution:"Indian Institute of Technology-Guwahati (IIT-G)",acronym:"IIT-G",institutionContext:"As one of India's top universities and a leading institute in engineering and disaster management, IIT-G provides the project's anchor in India.",role:"Indian Main Applicant (Principal Investigator)",projectContribution:"Leads the Indian consortium, provides overall project co-ordination, supervises PhD students, and is directly involved in Work Streams 1, 3 & 5.",keyPublication:{title:"Media reporting on conflicts and cooperation... for the Brahmaputra basin.",relevance:"This research provides critical insight into the socio-political context of water management, essential for the success of a cross-community EWS."},contact:{email:"abarua@iitg.ac.in",phone:"+91 361 258 2563"},image:"faculty/Professor-Anamika-Barua.jpg"},{id:2,team:"Leadership",name:"Dr. Jeroen F. Warner",title:"Associate Professor, Crisis and Disaster Studies",institution:"Wageningen University & Research (WUR)",acronym:"WUR",institutionContext:"A world-leading institution in life sciences and social sciences, WUR brings interdisciplinary expertise in water, climate, and disaster studies.",role:"Dutch Main Applicant (Principal Investigator)",projectContribution:"Leads the Dutch consortium, provides overall project co-ordination, supervises PhDs and is directly involved in Work Streams 3 & 5.",keyPublication:{title:"The politics of adaptive climate management: Scientific recipes and lived reality.",relevance:"This work is foundational to LODESTARs core mission, exploring the crucial intersection of scientific solutions and the lived experiences of at-risk communities."},contact:{email:"Jeroen.warner@wur.nl",phone:"(+31) 3174824720"},image:"faculty/Dr.-Jeroen-F.-Warner.webp"},{id:3,team:"Dutch",name:"Dr. Sumit Vij",title:"Assistant Professor",institution:"Wageningen University & Research",role:"Co-applicant & WS5 Lead",acronym:"WUR",image:"faculty/Dr.-Sumit-Vij.jpg"},{id:4,team:"Dutch",name:"Dr. Jantsje van Loon-Steensma",title:"Professor of Applied Sciences",institution:"VHL University",role:"Co-applicant, Eco-DRR Expert",acronym:"VHL",image:"faculty/Dr.-Jantsje-van-Loon-Steensma.jpg"},{id:5,team:"Dutch",name:"Dr. Spyridon Paparrizos",title:"Assistant Professor",institution:"Wageningen University",role:"Co-applicant & WS4 Co-lead",acronym:"WUR",image:"faculty/Dr.-Spyridon-Paparrizos.jpg"},{id:6,team:"Dutch",name:"Dr. Frank van Steenbergen",title:"Managing Director",institution:"MetaMeta Research",role:"Partner & WS3 Lead",acronym:"MM",image:"faculty/Dr.-Frank-van-Steenbergen.jpg"},{id:7,team:"Indian",name:"Dr. Roshan Karan Srivastav",title:"Assistant Professor",institution:"IIT Tirupati",role:"Co-applicant & WS4 Lead",acronym:"IIT-Tr",image:"faculty/Dr.-Roshan-Karan-Srivastav.jpg"},{id:8,team:"Indian",name:"Dr. Rajarshi Das Bhowmik",title:"Assistant Professor",institution:"IISc Bangalore",role:"Co-applicant & WS2 Lead",acronym:"IISc",image:"faculty/Dr.-Rajarshi-Das-Bhowmik.jpg"},{id:9,team:"Indian",name:"Dr. Indu K Murthy",title:"Principal Research Scientist",institution:"CSTEP",role:"Partner & WS3 Lead",acronym:"CSTEP",image:"faculty/Dr.-Indu-K-Murthy.jpg"},{id:10,team:"Indian",name:"Dr. Anil Kumar Gupta",title:"Head of Division",institution:"NIDM",role:"Collaboration Partner",acronym:"NIDM",image:"faculty/Dr.-Anil-Kumar-Gupta.jpg"}],d2=({member:e})=>e.team==="Leadership"?q.jsxs(zr.div,{className:"leader-card",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.6},children:[q.jsxs("div",{className:"leader-header",children:[e.image?q.jsx("img",{src:`/lodestar-dashboard/${e.image}`,alt:e.name,className:"leader-logo-img",style:{width:"80px",height:"80px",borderRadius:"50%",objectFit:"cover",border:"3px solid #bba352"}}):q.jsx("div",{className:"leader-logo",children:e.acronym}),q.jsxs("div",{className:"leader-title-group",children:[q.jsx("h3",{children:e.name}),q.jsx("p",{children:e.title})]})]}),q.jsxs("div",{className:"leader-body",children:[q.jsx("p",{className:"leader-context",children:e.institutionContext}),q.jsxs("div",{className:"info-item",children:[q.jsx(OL,{}),q.jsxs("span",{children:[q.jsx("strong",{children:"Role in Project:"})," ",e.role]})]}),q.jsxs("div",{className:"info-item",children:[q.jsx(YL,{}),q.jsxs("span",{children:[q.jsx("strong",{children:"Primary Contribution:"})," ",e.projectContribution]})]}),q.jsxs("div",{className:"info-item",children:[q.jsx(gv,{}),q.jsxs("span",{children:[q.jsx("strong",{children:"Key Publication Insight:"}),' "',e.keyPublication.title,'"  ',q.jsx("em",{children:e.keyPublication.relevance})]})]})]}),q.jsxs("div",{className:"leader-footer",children:[q.jsxs("a",{href:`mailto:${e.contact.email}`,children:[q.jsx(H4,{})," Email"]}),q.jsxs("span",{children:[q.jsx(HL,{})," ",e.contact.phone]})]})]}):q.jsxs(zr.div,{className:"member-card",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.5},transition:{duration:.5},children:[e.image?q.jsx("img",{src:`/lodestar-dashboard/${e.image}`,alt:e.name,className:"member-logo-img",style:{width:"60px",height:"60px",borderRadius:"50%",objectFit:"cover",marginBottom:"1rem",border:"2px solid #bba352"}}):q.jsx("div",{className:"member-logo",children:e.acronym}),q.jsxs("div",{className:"member-info",children:[q.jsx("h4",{children:e.name}),q.jsx("p",{className:"member-title",children:e.title}),q.jsx("span",{className:"member-role-tag",children:e.role})]})]});function Ane(){return q.jsxs("div",{children:[q.jsx("section",{className:"hero-section-about",children:q.jsxs("div",{className:"container",children:[q.jsx("h1",{className:"hero-title-about",children:"The LODESTAR Consortium"}),q.jsx("p",{className:"hero-subtitle-about",children:"A detailed overview of the dedicated, transdisciplinary team driving the project."})]})}),q.jsx("section",{className:"page-section",children:q.jsxs("div",{className:"container-wide",children:[q.jsx("h2",{className:"section-title",children:"Project Leadership"}),q.jsx("div",{className:"leader-grid",children:f2.filter(e=>e.team==="Leadership").map(e=>q.jsx(d2,{member:e},e.id))})]})}),q.jsx("section",{className:"page-section",children:q.jsx("div",{className:"container-wide",children:q.jsxs("div",{className:"consortium-grid",children:[q.jsxs("div",{className:"consortium-column",children:[q.jsx("h2",{className:"section-title",children:"Dutch Consortium"}),q.jsx("div",{className:"members-grid",children:f2.filter(e=>e.team==="Dutch").map(e=>q.jsx(d2,{member:e},e.id))})]}),q.jsxs("div",{className:"consortium-column",children:[q.jsx("h2",{className:"section-title",children:"Indian Consortium"}),q.jsx("div",{className:"members-grid",children:f2.filter(e=>e.team==="Indian").map(e=>q.jsx(d2,{member:e},e.id))})]})]})})})]})}function Ene(){const[e,t]=Se.useState(!1),[r,n]=Se.useState(""),[s,d]=Se.useState(""),h=l=>{l.preventDefault(),r==="admin"&&s==="admin"?t(!0):console.error("Invalid credentials")};return q.jsxs("div",{children:[q.jsx("section",{className:"hero-section-about",children:q.jsxs("div",{className:"container",children:[q.jsx("h1",{className:"hero-title-about",children:"Admin Dashboard"}),q.jsx("p",{className:"hero-subtitle-about",children:"Content Management Panel"})]})}),q.jsx("section",{className:"page-section",children:q.jsx("div",{className:"container",children:e?q.jsxs("div",{className:"admin-controls",children:[q.jsxs("div",{className:"admin-card",children:[q.jsx("h4",{children:"Data Management"}),q.jsx("p",{children:"Push new real-time alerts to the EWS or update existing ones."}),q.jsx("button",{className:"cta-button",children:"Update Alerts"})]}),q.jsxs("div",{className:"admin-card",children:[q.jsx("h4",{children:"Upload Reports"}),q.jsx("p",{children:"Add new publications or project deliverables to the Research Hub."}),q.jsx("input",{type:"file"})]}),q.jsxs("div",{className:"admin-card",children:[q.jsx("h4",{children:"Living Lab Management"}),q.jsx("p",{children:"Update workshop schedules and post citizen science results."}),q.jsx("button",{className:"cta-button",children:"Manage Labs"})]})]}):q.jsxs("form",{className:"admin-login-form",onSubmit:h,children:[q.jsx("h3",{children:"Consortium Login"}),q.jsx("input",{type:"text",placeholder:"Username",value:r,onChange:l=>n(l.target.value),required:!0}),q.jsx("input",{type:"password",placeholder:"Password",value:s,onChange:l=>d(l.target.value),required:!0}),q.jsx("button",{type:"submit",className:"cta-button",children:"Login"})]})})})]})}const Cne=()=>{const e="http://172.17.1.141:8080/web/client/login";return q.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",minHeight:"calc(100vh - 80px)"},children:[" ",q.jsx("section",{className:"hero-section-about",style:{padding:"2rem 0",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:q.jsxs("div",{className:"container",children:[q.jsx("h1",{className:"hero-title-about",style:{marginBottom:"0.5rem"},children:"Internal Access Portal"}),q.jsxs("p",{className:"hero-subtitle-about",style:{maxWidth:"800px",margin:"0 auto",fontSize:"1.1rem",color:"#666"},children:[q.jsx("span",{style:{color:"#856404",fontWeight:"bold"},children:" Restricted Access:"})," IITG VPN connection is required to access this portal."]})]})}),q.jsx("div",{className:"iframe-wrapper",style:{flex:1,minHeight:"600px",width:"100%",position:"relative",display:"flex",flexDirection:"column"},children:q.jsx("iframe",{src:e,title:"Internal DB Portal",style:{flex:1,width:"100%",border:"none",display:"block"}})}),q.jsx("section",{className:"page-section",style:{backgroundColor:"var(--bg-light)",padding:"2rem 0",borderTop:"1px solid var(--border-color)"},children:q.jsx("div",{className:"container",style:{textAlign:"center"},children:q.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",padding:"1.5rem",borderRadius:"8px",backgroundColor:"var(--bg-dark)",border:"1px solid var(--border-color)"},children:[q.jsx("h4",{style:{color:"var(--text-muted)",marginBottom:"1rem"},children:"Having trouble connecting?"}),q.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-muted)",marginBottom:"1.5rem"},children:"If the portal above is not loading (e.g., showing 'Refused to connect'), please ensure you are connected to the VPN and try opening it directly in a new tab."}),q.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"cta-button",style:{display:"inline-block"},children:"Open Internal Portal in New Tab"})]})})})]})};function Mne(){return q.jsx("div",{className:"notfound-wrapper-themed",children:q.jsxs(zr.div,{className:"notfound-container-themed",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:[q.jsxs("div",{className:"radar-container",children:[q.jsx(LL,{className:"radar-icon"}),q.jsx("div",{className:"radar-sweep"})]}),q.jsx("h1",{className:"notfound-title-themed",children:"404"}),q.jsx("h2",{className:"notfound-subtitle-themed",children:"Lost Signal"}),q.jsx("p",{className:"notfound-text-themed",children:"You've navigated to a data point that is off our forecast map. The requested page could not be found. Let's get you back to charted territory."}),q.jsx(rT,{to:"/",className:"cta-button",children:"Return to Dashboard"})]})})}function Ine(){const{pathname:e}=$f();return Se.useEffect(()=>{window.scrollTo(0,0)},[e]),null}function kne(){return q.jsxs(dL,{children:[q.jsx(Ine,{}),q.jsx(I$,{children:q.jsxs(aL,{children:[q.jsx(Ds,{path:"/",element:q.jsx(D$,{})}),q.jsx(Ds,{path:"/about",element:q.jsx(z$,{})}),q.jsx(Ds,{path:"/maps",element:q.jsx(fne,{})}),q.jsx(Ds,{path:"/alerts",element:q.jsx(gne,{})}),q.jsx(Ds,{path:"/living-labs",element:q.jsx(xne,{})}),q.jsx(Ds,{path:"/serious-games",element:q.jsx(wne,{})}),q.jsx(Ds,{path:"/research",element:q.jsx(Pne,{})}),q.jsx(Ds,{path:"/team",element:q.jsx(Ane,{})}),q.jsx(Ds,{path:"/admin",element:q.jsx(Ene,{})}),q.jsx(Ds,{path:"/internal-access",element:q.jsx(Cne,{})}),q.jsx(Ds,{path:"*",element:q.jsx(Mne,{})})]})})]})}mz.createRoot(document.getElementById("root")).render(q.jsx(Le.StrictMode,{children:q.jsx(kne,{})}))});export default One();
